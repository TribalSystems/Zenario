(function(n,a,v){a.infoWindows={};a.initMap=function(e,b,d,g){var f,q=0,s=e+"_map",h,k,t=new google.maps.LatLngBounds,r=window&&window.mainWindow||self&&self.parent,p=!1;e&&r&&(a.iframeHighlightItem=function(a){r.zenario_location_map_and_listing.listingHighlightItem(e,a)},a.iframeScrollToItem=function(a){r.zenario_location_map_and_listing.listingScrollToItem(e,a)});for(f in b){var c=b[f],u=new google.maps.LatLng(c.latitude,c.longitude),l,m;l=v;++q;1===q&&(h={center:new google.maps.LatLng(c.latitude,
c.longitude),zoom:1*c.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:d},k=new google.maps.Map(n._g(s),h));if(!p||c.map_zoom<p)p=1*c.map_zoom;n._eTB(c.hide_pin)?l=URLBasePath+"zenario/admin/images/trans.png":c.css_class&&(m=$("#"+c.css_class.replace(/\s+/g,"-")).css("background-image"))&&(m=m.match(/url\(['"]?(.*?)['"]?\)/i))&&(m=m[1])&&(l=m);h=new google.maps.Marker({position:u,map:k,title:c.name,icon:l});t.extend(h.position);"postcode"!=c.id&&(l=new google.maps.InfoWindow({content:$("#"+
c.htmlId).html()}),function(e,c,d,b){b.setPosition(c);b._open=function(){a.closeInfoWindow();b.open(k)};google.maps.event.addListener(d,"click",function(){b._open();a.iframeHighlightItem(e.htmlId);a.iframeScrollToItem(e.htmlId)});a.infoWindows[e.id]=b}(c,u,h,l))}k||(h={mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:0,lng:0},zoom:1},k=new google.maps.Map(n._g(s),h));1<q&&(google.maps.event.addListenerOnce(k,"bounds_changed",function(){g?this.setZoom(2):p<this.getZoom()&&this.setZoom(p)}),k.fitBounds(t))};
a.closeInfoWindow=function(){for(var e in a.infoWindows)a.infoWindows[e].close();a.iframeHighlightItem()};a.listingClick=function(e,b){var d=n._gCIFE(e),g=d+"_loc_"+b,f=n._g(d+"_map_iframe");f&&f.contentWindow&&f.contentWindow.zenario_location_map_and_listing&&f.contentWindow.zenario_location_map_and_listing.infoWindows&&f.contentWindow.zenario_location_map_and_listing.infoWindows[b]&&(f.contentWindow.zenario_location_map_and_listing.infoWindows[b]._open(),a.listingHighlightItem(d,g))};a.listingHighlightItem=
function(a,b){$("#"+a+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");b&&$("#"+a+" ."+b).addClass("zenario_lmal_highlighted_location")};a.listingScrollToItem=function(a,b){var d,g=$("#"+a+" .zenario_lmal_scrollable_area");d=$("#"+a+" ."+b);d.length&&(d=1*d.offset().top-1*g.offset().top,d=Math.max(0,d-Math.floor(g.height()/4)),g.stop().animate({scrollTop:d},400))};a.iframeHighlightItem=function(a){};a.iframeScrollToItem=function(a){}})(zenario,zenario_location_map_and_listing);

'use strict';(function(m,b,y){b.infoWindows={};b.initMap=function(a,d,f,e){var u,r=0,v=a+"_map",w=new google.maps.LatLngBounds,t=window&&window.mainWindow||self&&self.parent,n=!1;a&&t&&(b.iframeHighlightItem=function(g){t.zenario_location_map_and_listing.listingHighlightItem(a,g)},b.iframeScrollToItem=function(g){t.zenario_location_map_and_listing.listingScrollToItem(a,g)});for(u in d){var c=d[u],x=new google.maps.LatLng(c.latitude,c.longitude),h;var p=y;++r;if(1===r){var k={center:new google.maps.LatLng(c.latitude,
c.longitude),zoom:1*c.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:f};var l=new google.maps.Map(m._g(v),k)}if(!n||c.map_zoom<n)n=1*c.map_zoom;m._eTB(c.hide_pin)?p=URLBasePath+"zenario/admin/images/trans.png":c.css_class&&(h=$("#"+c.css_class.replace(/\s+/g,"-")).css("background-image"))&&(h=h.match(/url\(['"]?(.*?)['"]?\)/i))&&(h=h[1])&&(p=h);k=new google.maps.Marker({position:x,map:l,title:c.name,icon:p});w.extend(k.position);"postcode"!=c.id&&(p=new google.maps.InfoWindow({content:$("#"+
c.htmlId).html()}),function(g,z,A,q){q.setPosition(z);q._open=function(){b.closeInfoWindow();q.open(l)};google.maps.event.addListener(A,"click",function(){q._open();b.iframeHighlightItem(g.htmlId);b.iframeScrollToItem(g.htmlId)});b.infoWindows[g.id]=q}(c,x,k,p))}l||(k={mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:0,lng:0},zoom:1},l=new google.maps.Map(m._g(v),k));1<r&&(google.maps.event.addListenerOnce(l,"bounds_changed",function(){e?this.setZoom(2):n<this.getZoom()&&this.setZoom(n)}),l.fitBounds(w))};
b.closeInfoWindow=function(){for(var a in b.infoWindows)b.infoWindows[a].close();b.iframeHighlightItem()};b.listingClick=function(a,d){a=m._gCIFE(a);var f=a+"_loc_"+d,e=m._g(a+"_map_iframe");e&&e.contentWindow&&e.contentWindow.zenario_location_map_and_listing&&e.contentWindow.zenario_location_map_and_listing.infoWindows&&e.contentWindow.zenario_location_map_and_listing.infoWindows[d]&&(e.contentWindow.zenario_location_map_and_listing.infoWindows[d]._open(),b.listingHighlightItem(a,f))};b.listingHighlightItem=
function(a,d){$("#"+a+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+a+" ."+d).addClass("zenario_lmal_highlighted_location")};b.listingScrollToItem=function(a,d){var f=$("#"+a+" .zenario_lmal_scrollable_area");a=$("#"+a+" ."+d);a.length&&(a=1*a.offset().top-1*f.offset().top,a=Math.max(0,a-Math.floor(f.height()/4)),f.stop().animate({scrollTop:a},400))};b.iframeHighlightItem=function(a){};b.iframeScrollToItem=function(a){}})(zenario,zenario_location_map_and_listing);

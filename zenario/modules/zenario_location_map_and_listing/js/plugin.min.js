(function(n,a,t){a.infoWindows={};a.initMap=function(e,b,c){var g,f=0,q=e+"_map",h,k,r=new google.maps.LatLngBounds,p=window&&window.mainWindow||self&&self.parent;e&&p&&(a.iframeHighlightItem=function(a){p.zenario_location_map_and_listing.listingHighlightItem(e,a)},a.iframeScrollToItem=function(a){p.zenario_location_map_and_listing.listingScrollToItem(e,a)});for(g in b){var d=b[g],s=new google.maps.LatLng(d.latitude,d.longitude),l,m;l=t;++f;1===f&&(h={center:new google.maps.LatLng(d.latitude,d.longitude),
zoom:1*d.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:c},k=new google.maps.Map(n.get(q),h));n.engToBoolean(d.hide_pin)?l=URLBasePath+"zenario/admin/images/trans.png":d.css_class&&(m=$("#"+d.css_class.replace(/\s+/g,"-")).css("background-image"))&&(m=m.match(/url\(['"]?(.*?)['"]?\)/i))&&(m=m[1])&&(l=m);h=new google.maps.Marker({position:s,map:k,title:d.name,icon:l});r.extend(h.position);"postcode"!=d.id&&(l=new google.maps.InfoWindow({content:$("#"+d.htmlId).html()}),function(e,
c,d,b){b.setPosition(c);b._open=function(){a.closeInfoWindow();b.open(k)};google.maps.event.addListener(d,"click",function(){b._open();a.iframeHighlightItem(e.htmlId);a.iframeScrollToItem(e.htmlId)});a.infoWindows[e.id]=b}(d,s,h,l))}k||(h={mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:0,lng:0},zoom:1},k=new google.maps.Map(n.get(q),h));1<f&&k.fitBounds(r)};a.closeInfoWindow=function(){for(var e in a.infoWindows)a.infoWindows[e].close();a.iframeHighlightItem()};a.listingClick=function(e,b){var c=
n.getContainerIdFromEl(e),g=c+"_loc_"+b,f=n.get(c+"_map_iframe");f&&f.contentWindow&&f.contentWindow.zenario_location_map_and_listing&&f.contentWindow.zenario_location_map_and_listing.infoWindows&&f.contentWindow.zenario_location_map_and_listing.infoWindows[b]&&(f.contentWindow.zenario_location_map_and_listing.infoWindows[b]._open(),a.listingHighlightItem(c,g))};a.listingHighlightItem=function(a,b){$("#"+a+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");b&&
$("#"+a+" ."+b).addClass("zenario_lmal_highlighted_location")};a.listingScrollToItem=function(a,b){var c,g=$("#"+a+" .zenario_lmal_scrollable_area");c=$("#"+a+" ."+b);c.length&&(c=1*c.offset().top-1*g.offset().top,c=Math.max(0,c-Math.floor(g.height()/4)),g.stop().animate({scrollTop:c},400))};a.iframeHighlightItem=function(a){};a.iframeScrollToItem=function(a){}})(zenario,zenario_location_map_and_listing);

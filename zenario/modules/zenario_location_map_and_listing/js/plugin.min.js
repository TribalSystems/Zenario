(function(n,a,t){a.infoWindows={};a.initMap=function(e,d,b){var g,f=0,q=e+"_map",h,k,r=new google.maps.LatLngBounds,p=window&&window.mainWindow||self&&self.parent;e&&p&&(a.iframeHighlightItem=function(a){p.zenario_location_map_and_listing.listingHighlightItem(e,a)},a.iframeScrollToItem=function(a){p.zenario_location_map_and_listing.listingScrollToItem(e,a)});for(g in d){var c=d[g],s=new google.maps.LatLng(c.latitude,c.longitude),l,m;l=t;++f;1===f&&(h={center:new google.maps.LatLng(c.latitude,c.longitude),
zoom:1*c.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:b},k=new google.maps.Map(n.get(q),h));n.engToBoolean(c.hide_pin)?l=URLBasePath+"zenario/admin/images/trans.png":c.css_class&&(m=$("#"+c.css_class.replace(/\s+/g,"-")).css("background-image"))&&(m=m.match(/url\(['"]?(.*?)['"]?\)/i))&&(m=m[1])&&(l=m);h=new google.maps.InfoWindow({content:$("#"+c.htmlId).html()});l=new google.maps.Marker({position:s,map:k,title:c.name,icon:l});(function(e,d,c,b){b.setPosition(d);b._open=function(){a.closeInfoWindow();
b.open(k)};google.maps.event.addListener(c,"click",function(){b._open();a.iframeHighlightItem(e.htmlId);a.iframeScrollToItem(e.htmlId)});a.infoWindows[e.id]=b;r.extend(c.position)})(c,s,l,h)}k||(h={mapTypeId:google.maps.MapTypeId.ROADMAP},k=new google.maps.Map(n.get(q),h));1<f&&k.fitBounds(r)};a.closeInfoWindow=function(){for(var e in a.infoWindows)a.infoWindows[e].close();a.iframeHighlightItem()};a.listingClick=function(e,d){var b=n.getContainerIdFromEl(e),g=b+"_loc_"+d,f=n.get(b+"_map_iframe");
f&&f.contentWindow&&f.contentWindow.zenario_location_map_and_listing&&f.contentWindow.zenario_location_map_and_listing.infoWindows&&f.contentWindow.zenario_location_map_and_listing.infoWindows[d]&&(f.contentWindow.zenario_location_map_and_listing.infoWindows[d]._open(),a.listingHighlightItem(b,g))};a.listingHighlightItem=function(a,d){$("#"+a+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+a+" ."+d).addClass("zenario_lmal_highlighted_location")};a.listingScrollToItem=
function(a,d){var b,g=$("#"+a+" .zenario_lmal_scrollable_area");b=1*$("#"+a+" ."+d).offset().top-1*g.offset().top;b=Math.max(0,b-Math.floor(g.height()/4));g.stop().animate({scrollTop:b},400)};a.iframeHighlightItem=function(a){};a.iframeScrollToItem=function(a){}})(zenario,zenario_location_map_and_listing);

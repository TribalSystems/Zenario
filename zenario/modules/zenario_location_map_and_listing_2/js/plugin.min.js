(function(h,c,H){$(document).ready(function(){if(c&&c.setDefaultMode){var b=c.pluginSettings.containerId;c.setDefaultMode();c.setDefaultFilterVisibility(b)}});$(document).ajaxComplete(function(){if(c&&c.setDefaultMode){var b=c.pluginSettings.containerId;c.setDefaultMode();c.setDefaultFilterVisibility(b)}});window.onload=function(){h._etm()&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),
Element.prototype.closest=function(b){var d=this;if(!document.documentElement.contains(this))return null;do{if(d.matches(b))return d;d=d.parentElement}while(null!==d);return null});document.onclick=function(b){var d=c.pluginSettings.containerId;if(c&&!b.target.closest("#"+d+"_filter_dropdown")&&b.target.id!=d+"_filter_button"||b.target.id==d+"_apply_filters_button")c.setFilterVisibilityTo("filters_hidden",d),window.parent.zenario_location_map_and_listing_2.setFilterVisibilityTo("filters_hidden",d)}};
c.setDefaultMode=function(){var b=$(document.body);b.hasClass("mode_map")||b.hasClass("mode_list")?b.hasClass("mode_list")?1==c.pluginSettings.show_location_list?c.setModeTo("mode_list"):1==c.pluginSettings.show_map&&c.setModeTo("mode_map"):b.hasClass("mode_map")&&(1==c.pluginSettings.show_map?c.setModeTo("mode_map"):1==c.pluginSettings.show_location_list&&c.setModeTo("mode_list")):1==c.pluginSettings.show_location_list?c.setModeTo("mode_list"):c.setModeTo("mode_map")};c.setModeTo=function(b){var d=
$("#mode_map_button"),e=$("#mode_list_button");"mode_map"==b?(zenarioL.set(1,"mode_map","mode_list"),d.addClass("on"),e.removeClass("on")):"mode_list"==b&&(zenarioL.set(1,"mode_list","mode_map"),e.addClass("on"),d.removeClass("on"))};c.setDefaultFilterVisibility=function(b){var d=$(document.body);d.hasClass("filters_visible")||d.hasClass("filters_hidden")?d.hasClass("filters_visible")?c.setFilterVisibilityTo("filters_visible",b):d.hasClass("filters_hidden")&&c.setFilterVisibilityTo("filters_hidden",
b):c.setFilterVisibilityTo("filters_hidden",b)};c.setFilterVisibilityTo=function(b,d){var e=$("#"+d+"_filter_dropdown");"filters_visible"==b?(zenarioL.set(1,"filters_visible","filters_hidden"),e.addClass("active")):"filters_hidden"==b&&(zenarioL.set(1,"filters_hidden","filters_visible"),b=!e.hasClass("active"),e.removeClass("active"),b||$("#form_location_map_and_listing_2_"+d).submit())};c.filterOnclick=function(b){$("#"+b+"_filter_dropdown").hasClass("active")?c.setFilterVisibilityTo("filters_hidden",
b):c.setFilterVisibilityTo("filters_visible",b)};c.selectedFiltersElementOnclick=function(b,d){targetEl=$("#"+b);targetEl.removeAttr("checked");c.filterOnclick(d)};c.pluginSettings={};c.savePluginSettings=function(b,d,e){c.pluginSettings={};c.pluginSettings.show_location_list=b;c.pluginSettings.show_map=d;c.pluginSettings.containerId=e};c.mapVars={};c.infoWindows={};c.saveMapVars=function(b,d,e,t,w,x,f){c.mapVars={};b!==H&&(c.mapVars[b]=[d,e,t,w,x,f])};c.initMap=function(b,d,e,t,w,x){var f=window.parent||
window.opener;if(f&&f.zenario_location_map_and_listing_2&&f.zenario_location_map_and_listing_2.mapVars&&!_._ruc(f.zenario_location_map_and_listing_2.mapVars)){var m={};b&&0<b&&window&&f&&f.zenario_location_map_and_listing_2&&f.zenario_location_map_and_listing_2.mapVars&&f.zenario_location_map_and_listing_2.mapVars[b]&&(m=f.zenario_location_map_and_listing_2.mapVars[b]||{});var y=m[0]||{};var D=m[1]||!1;var q=m[2]||{};var I=m[3]||.8;var J=m[4]||.35;imagesFolder=m[5]||"";var v;m=0;var z=d+"_map",A=
new google.maps.LatLngBounds,B=window&&window.mainWindow||self&&self.parent,n=!1;d&&B&&(c.iframeHighlightItemOnList=function(p){B.zenario_location_map_and_listing_2.listingHighlightItemOnMap(d,p)},c.iframeItemRemoveHighlightOnList=function(p){B.zenario_location_map_and_listing_2.listingItemRemoveHighlight(d,p)});c.infoWindows={};if(y&&0<y.length)for(v in y){var k=y[v],E=new google.maps.LatLng(k.latitude,k.longitude);++m;if(1===m){var g={center:new google.maps.LatLng(k.latitude,k.longitude),zoom:1*
k.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:D};var l=new google.maps.Map(h.get(z),g)}if(!n||k.map_zoom<n)n=1*k.map_zoom;if(k.icon_name){g=31;var r=48;iconData={url:imagesFolder+"/icon_"+k.icon_name+".svg",size:new google.maps.Size(g,r),scaledSize:new google.maps.Size(g,r)}}else g=27,r=43,iconData={url:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png",size:new google.maps.Size(g,r)};g=new google.maps.Marker({position:E,map:l,title:k.name,icon:iconData,optimized:!1});
A.extend(g.position);var F=f.$("#"+k.htmlId+"_basic_details").clone(),G=F.find("img");G.removeAttr("width");G.removeAttr("height");r=new google.maps.InfoWindow({content:F.html(),pixelOffset:new google.maps.Size(0,-r)});(function(p,K,C,u){u.setPosition(K);u._open=function(){c.closeInfoWindow();u.open(l)};google.maps.event.addListener(C,"click",function(){u._open();c.iframeHighlightItemOnList(p.htmlId);c.iframeScrollToItem(p.htmlId)});google.maps.event.addListener(C,"mouseout",function(){c.isInfoWindowOpen()||
1!=c.pluginSettings.show_location_list||c.iframeItemRemoveHighlightOnList(p.htmlId)});google.maps.event.addListener(C,"mouseover",function(){c.isInfoWindowOpen()||1!=c.pluginSettings.show_location_list||c.iframeHighlightItemOnList(p.htmlId)});google.maps.event.addListener(u,"closeclick",function(){c.closeInfoWindow()});c.infoWindows[p.id]=u})(k,E,g,r)}else"auto_include_all_locations"==e?zoom=15:"set_manually"==e&&"number"==typeof t&&(zoom=t),g={center:new google.maps.LatLng(51.4542645,-.9781302999999753),
zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:D},l=new google.maps.Map(h.get(z),g);l||(g={mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:0,lng:0},zoom:1},l=new google.maps.Map(h.get(z),g));google.maps.event.addListener(l,"click",function(p){c.closeInfoWindow()});if(q)for(a in q){coords=[];for(v in q[a].coords)coords.push(new google.maps.LatLng(q[a].coords[v][0],q[a].coords[v][1]));(new google.maps.Polygon({paths:coords,strokeColor:q[a].polygon_colour,strokeOpacity:I,strokeWeight:2,
fillColor:q[a].polygon_colour,fillOpacity:J,content:q[a].name})).setMap(l)}1<m&&(w&&x?l.setCenter({lat:w,lng:x}):(l.setCenter(A.getCenter()),l.fitBounds(A)),google.maps.event.addListenerOnce(l,"bounds_changed",function(){n=l.getZoom();"auto_include_all_locations"==e?10>n?n=10:13<n&&(n=13):"set_manually"==e&&"number"==typeof t&&(n=t);this.setZoom(n)}));0==c.pluginSettings.show_location_list&&f.$("#interface_list_container").remove()}else setTimeout(function(){c.initMap(b,d)},100)};c.isInfoWindowOpen=
function(){for(var b in c.infoWindows){var d=c.infoWindows[b].getMap();if(null!==d&&"undefined"!==typeof d)return!0}return!1};c.closeInfoWindow=function(){for(var b in c.infoWindows)c.infoWindows[b].close();c.iframeItemRemoveHighlightOnList()};c.listingClick=function(b,d){b=h._utw(b);(b=h.get(b+"_map_iframe"))&&b.contentWindow&&b.contentWindow.zenario_location_map_and_listing_2&&b.contentWindow.zenario_location_map_and_listing_2.infoWindows&&b.contentWindow.zenario_location_map_and_listing_2.infoWindows[d]&&
b.contentWindow.zenario_location_map_and_listing_2.infoWindows[d]._open()};c.listingMouseover=function(b,d){b=h._utw(b);d=b+"_loc_"+d;var e=h.get(b+"_map_iframe");e&&e.contentWindow&&e.contentWindow.zenario_location_map_and_listing_2&&!e.contentWindow.zenario_location_map_and_listing_2.isInfoWindowOpen()&&c.listingHighlightItemOnMap(b,d)};c.listingMouseout=function(b,d){b=h._utw(b);d=b+"_loc_"+d;var e=h.get(b+"_map_iframe");e&&e.contentWindow&&e.contentWindow.zenario_location_map_and_listing_2&&!e.contentWindow.zenario_location_map_and_listing_2.isInfoWindowOpen()&&
c.listingItemRemoveHighlight(b,d)};c.listingHighlightItemOnMap=function(b,d){$("#"+b+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+b+" ."+d).addClass("zenario_lmal_highlighted_location");mapIframeId=b+"_map_iframe";(iframe=h.get(mapIframeId))&&iframe.contentWindow&&iframe.contentWindow.zenario_location_map_and_listing_2&&(el=parent.$("#"+b+" ."+d).find("h3#location_title")[0])&&(b=iframe.contentWindow.$('div[title|="'+el.innerText+'"]'),b.addClass("highlighted_pin"),
"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png"==b.find("img").attr("src")&&b.addClass("fallback_icon"))};c.listingItemRemoveHighlight=function(b,d){$("#"+b+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+b+" ."+d).removeClass("zenario_lmal_highlighted_location");mapIframeId=b+"_map_iframe";(iframe=h.get(mapIframeId))&&iframe.contentWindow&&iframe.contentWindow.zenario_location_map_and_listing_2&&(el=iframe.contentWindow.$(".highlighted_pin"),
el.removeClass("fallback_icon"),el.removeClass("highlighted_pin"))};c.iframeHighlightItem=function(b){};c.iframeScrollToItem=function(b){}})(zenario,zenario_location_map_and_listing_2);

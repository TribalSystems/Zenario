'use strict';(function(h,b,F){$(document).ready(function(){b&&b.setDefaultMode&&(b.setDefaultMode(),b.setDefaultFilterVisibility())});$(document).ajaxComplete(function(){b&&b.setDefaultMode&&(b.setDefaultMode(),b.setDefaultFilterVisibility())});window.onload=function(){h._bII()&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(c){var d=this;if(!document.documentElement.contains(this))return null;
do{if(d.matches(c))return d;d=d.parentElement}while(null!==d);return null});document.onclick=function(c){if(b&&!c.target.closest("#filter_dropdown")&&"filter_button"!=c.target.id||"apply_filters_button"==c.target.id)b.setFilterVisibilityTo("filters_hidden"),window.parent.zenario_location_map_and_listing_2.setFilterVisibilityTo("filters_hidden")}};b.setDefaultMode=function(){var c=$(document.body);c.hasClass("mode_map")||c.hasClass("mode_list")?c.hasClass("mode_list")?1==b.pluginSettings.show_location_list?
b.setModeTo("mode_list"):1==b.pluginSettings.show_map&&b.setModeTo("mode_map"):c.hasClass("mode_map")&&(1==b.pluginSettings.show_map?b.setModeTo("mode_map"):1==b.pluginSettings.show_location_list&&b.setModeTo("mode_list")):1==b.pluginSettings.show_location_list?b.setModeTo("mode_list"):b.setModeTo("mode_map")};b.setModeTo=function(c){var d=$("#mode_map_button"),e=$("#mode_list_button");"mode_map"==c?(zenarioL.set(1,"mode_map","mode_list"),d.addClass("on"),e.removeClass("on")):"mode_list"==c&&(zenarioL.set(1,
"mode_list","mode_map"),e.addClass("on"),d.removeClass("on"))};b.setDefaultFilterVisibility=function(){var c=$(document.body);c.hasClass("filters_visible")||c.hasClass("filters_hidden")?c.hasClass("filters_visible")?b.setFilterVisibilityTo("filters_visible"):c.hasClass("filters_hidden")&&b.setFilterVisibilityTo("filters_hidden"):b.setFilterVisibilityTo("filters_hidden")};b.setFilterVisibilityTo=function(c){var d=$("#filter_dropdown");"filters_visible"==c?(zenarioL.set(1,"filters_visible","filters_hidden"),
d.addClass("active")):"filters_hidden"==c&&(zenarioL.set(1,"filters_hidden","filters_visible"),c=!d.hasClass("active"),d.removeClass("active"),c||$("form").submit())};b.filterOnclick=function(){$("#filter_dropdown").hasClass("active")?b.setFilterVisibilityTo("filters_hidden"):b.setFilterVisibilityTo("filters_visible")};b.selectedFiltersElementOnclick=function(c){targetEl=$(c);targetEl.removeAttr("checked");b.filterOnclick()};b.pluginSettings={};b.savePluginSettings=function(c,d){b.pluginSettings=
{};b.pluginSettings.show_location_list=c;b.pluginSettings.show_map=d};b.mapVars={};b.infoWindows={};b.saveMapVars=function(c,d,e,t,w,x,f){b.mapVars={};c!==F&&(b.mapVars[c]=[d,e,t,w,x,f])};b.initMap=function(c,d,e,t,w,x){var f=window.parent||window.opener;if(f&&f.zenario_location_map_and_listing_2&&f.zenario_location_map_and_listing_2.mapVars&&!_._isEm(f.zenario_location_map_and_listing_2.mapVars)){var m={};c&&0<c&&window&&f&&f.zenario_location_map_and_listing_2&&f.zenario_location_map_and_listing_2.mapVars&&
f.zenario_location_map_and_listing_2.mapVars[c]&&(m=f.zenario_location_map_and_listing_2.mapVars[c]||{});var y=m[0]||{};var D=m[1]||!1;var q=m[2]||{};var G=m[3]||.8;var H=m[4]||.35;imagesFolder=m[5]||"";var v;m=0;var z=d+"_map",A=new google.maps.LatLngBounds,B=window&&window.mainWindow||self&&self.parent,n=!1;d&&B&&(b.iframeHighlightItemOnList=function(p){B.zenario_location_map_and_listing_2.listingHighlightItemOnMap(d,p)},b.iframeItemRemoveHighlightOnList=function(p){B.zenario_location_map_and_listing_2.listingItemRemoveHighlight(d,
p)});b.infoWindows={};if(y&&0<y.length)for(v in y){var k=y[v],E=new google.maps.LatLng(k.latitude,k.longitude);++m;if(1===m){var g={center:new google.maps.LatLng(k.latitude,k.longitude),zoom:1*k.map_zoom||7,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:D};var l=new google.maps.Map(h._g(z),g)}if(!n||k.map_zoom<n)n=1*k.map_zoom;if(k.icon_name){g=31;var r=48;iconData={url:imagesFolder+"/icon_"+k.icon_name+".svg",size:new google.maps.Size(g,r),scaledSize:new google.maps.Size(g,r)}}else g=27,r=43,
iconData={url:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png",size:new google.maps.Size(g,r)};g=new google.maps.Marker({position:E,map:l,title:k.name,icon:iconData,optimized:!1});A.extend(g.position);r=new google.maps.InfoWindow({content:f.$("#"+k.htmlId+"_basic_details").html(),pixelOffset:new google.maps.Size(0,-r)});(function(p,I,C,u){u.setPosition(I);u._open=function(){b.closeInfoWindow();u.open(l)};google.maps.event.addListener(C,"click",function(){u._open();b.iframeHighlightItemOnList(p.htmlId);
b.iframeScrollToItem(p.htmlId)});google.maps.event.addListener(C,"mouseout",function(){b.isInfoWindowOpen()||1!=b.pluginSettings.show_location_list||b.iframeItemRemoveHighlightOnList(p.htmlId)});google.maps.event.addListener(C,"mouseover",function(){b.isInfoWindowOpen()||1!=b.pluginSettings.show_location_list||b.iframeHighlightItemOnList(p.htmlId)});google.maps.event.addListener(u,"closeclick",function(){b.closeInfoWindow()});b.infoWindows[p.id]=u})(k,E,g,r)}else"auto_include_all_locations"==e?zoom=
15:"set_manually"==e&&"number"==typeof t&&(zoom=t),g={center:new google.maps.LatLng(51.4542645,-.9781302999999753),zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:D},l=new google.maps.Map(h._g(z),g);l||(g={mapTypeId:google.maps.MapTypeId.ROADMAP,center:{lat:0,lng:0},zoom:1},l=new google.maps.Map(h._g(z),g));google.maps.event.addListener(l,"click",function(p){b.closeInfoWindow()});if(q)for(a in q){coords=[];for(v in q[a].coords)coords.push(new google.maps.LatLng(q[a].coords[v][0],q[a].coords[v][1]));
(new google.maps.Polygon({paths:coords,strokeColor:q[a].polygon_colour,strokeOpacity:G,strokeWeight:2,fillColor:q[a].polygon_colour,fillOpacity:H,content:q[a].name})).setMap(l)}1<m&&(w&&x?l.setCenter({lat:w,lng:x}):(l.setCenter(A.getCenter()),l.fitBounds(A)),google.maps.event.addListenerOnce(l,"bounds_changed",function(){n=l.getZoom();"auto_include_all_locations"==e?10>n?n=10:13<n&&(n=13):"set_manually"==e&&"number"==typeof t&&(n=t);this.setZoom(n)}));0==b.pluginSettings.show_location_list&&f.$("#interface_list_container").remove()}else setTimeout(function(){b.initMap(c,
d)},100)};b.isInfoWindowOpen=function(){for(var c in b.infoWindows){var d=b.infoWindows[c].getMap();if(null!==d&&"undefined"!==typeof d)return!0}return!1};b.closeInfoWindow=function(){for(var c in b.infoWindows)b.infoWindows[c].close();b.iframeItemRemoveHighlightOnList()};b.listingClick=function(c,d){c=h._gCIFE(c);(c=h._g(c+"_map_iframe"))&&c.contentWindow&&c.contentWindow.zenario_location_map_and_listing_2&&c.contentWindow.zenario_location_map_and_listing_2.infoWindows&&c.contentWindow.zenario_location_map_and_listing_2.infoWindows[d]&&
c.contentWindow.zenario_location_map_and_listing_2.infoWindows[d]._open()};b.listingMouseover=function(c,d){c=h._gCIFE(c);d=c+"_loc_"+d;var e=h._g(c+"_map_iframe");e&&e.contentWindow&&e.contentWindow.zenario_location_map_and_listing_2&&!e.contentWindow.zenario_location_map_and_listing_2.isInfoWindowOpen()&&b.listingHighlightItemOnMap(c,d)};b.listingMouseout=function(c,d){c=h._gCIFE(c);d=c+"_loc_"+d;var e=h._g(c+"_map_iframe");e&&e.contentWindow&&e.contentWindow.zenario_location_map_and_listing_2&&
!e.contentWindow.zenario_location_map_and_listing_2.isInfoWindowOpen()&&b.listingItemRemoveHighlight(c,d)};b.listingHighlightItemOnMap=function(c,d){$("#"+c+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+c+" ."+d).addClass("zenario_lmal_highlighted_location");mapIframeId=c+"_map_iframe";(iframe=h._g(mapIframeId))&&iframe.contentWindow&&iframe.contentWindow.zenario_location_map_and_listing_2&&(el=parent.$("#"+c+" ."+d).find("h3#location_title")[0])&&
(c=iframe.contentWindow.$('div[title|="'+el.innerText+'"]'),c.addClass("highlighted_pin"),"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png"==c.find("img").attr("src")&&c.addClass("fallback_icon"))};b.listingItemRemoveHighlight=function(c,d){$("#"+c+" .zenario_lmal_highlighted_location").removeClass("zenario_lmal_highlighted_location");d&&$("#"+c+" ."+d).removeClass("zenario_lmal_highlighted_location");mapIframeId=c+"_map_iframe";(iframe=h._g(mapIframeId))&&iframe.contentWindow&&
iframe.contentWindow.zenario_location_map_and_listing_2&&(el=iframe.contentWindow.$(".highlighted_pin"),el.removeClass("fallback_icon"),el.removeClass("highlighted_pin"))};b.iframeHighlightItem=function(c){};b.iframeScrollToItem=function(c){}})(zenario,zenario_location_map_and_listing_2);

# You must use a tab-size of 4 spaces to edit this file.
---
zenario__content:
    panels:
        image_library:
            columns:
                usage_newsletters:
                    title: Attached to (newsletters)
                    db_column: |
                        (
                            SELECT COUNT(DISTINCT foreign_key_to, foreign_key_id)
                            FROM [[DB_NAME_PREFIX]]inline_images AS nii
                            WHERE nii.image_id = f.id
                              AND nii.foreign_key_to = 'newsletter'
                              AND nii.archived = 0
                        )
                    filter_format: yes_or_no
                    search_column: |
                        (
                            SELECT 1
                            FROM [[DB_NAME_PREFIX]]inline_images AS nii
                            WHERE nii.image_id = f.id
                              AND nii.foreign_key_to = 'newsletter'
                              AND nii.archived = 0
                            LIMIT 1
                        )
                    show_by_default: false
                usage_newsletter_templates:
                    title: Usage (newsletter templates)
                    db_column: |
                        (
                            SELECT COUNT(DISTINCT foreign_key_to, foreign_key_id)
                            FROM [[DB_NAME_PREFIX]]inline_images AS ntii
                            WHERE ntii.image_id = f.id
                              AND ntii.foreign_key_to = 'newsletter_template'
                        )
                    filter_format: yes_or_no
                    search_column: |
                        (
                            SELECT 1
                            FROM [[DB_NAME_PREFIX]]inline_images AS ntii
                            WHERE ntii.image_id = f.id
                              AND ntii.foreign_key_to = 'newsletter_template'
                            LIMIT 1
                        )
                    show_by_default: false
            
            quick_filter_buttons:
                usage_newsletters:
                    parent: usage_dropdown
                    label: Attached to a newsletter
                    column: usage_newsletters
                    value: 1
                #not_usage_newsletters:
                #    parent: usage_dropdown
                #    label: Not attached to a newsletter
                #    column: usage_newsletters
                #    value: 1
                #    invert: true
                usage_newsletter_templates:
                    parent: usage_dropdown
                    label: Used by a newsletter template
                    column: usage_newsletter_templates
                    value: 1
                #not_usage_newsletter_templates:
                #    parent: usage_dropdown
                #    label: Not used by a newsletter template
                #    column: usage_newsletter_templates
                #    value: 1
                #    invert: true
# You must use a tab-size of 4 spaces to edit this file.
---
zenario__content:
    panels:
        chained:
            refiner_required: true
            key:
                cType: ""
                language: ""
                layoutId: ''
                equivId: ""
            enable_close_up_view: true
            view_mode: list
            disable_grid_view: true
            disable_summary_view: true
            hide_filter_warning: true
            db_items:
                table: >
                    [[DB_NAME_PREFIX]]content_items AS lec
                    CROSS JOIN [[DB_NAME_PREFIX]]languages AS l
                    LEFT JOIN [[DB_NAME_PREFIX]]translation_chains AS tc
                       ON lec.equiv_id = tc.equiv_id
                      AND lec.type = tc.type
                    LEFT JOIN [[DB_NAME_PREFIX]]content_items AS c
                       ON lec.equiv_id = c.equiv_id
                      AND lec.type = c.type
                      AND l.id = c.language_id
                    LEFT JOIN [[DB_NAME_PREFIX]]content_item_versions AS v
                       ON c.id = v.id
                      AND c.type = v.type
                      AND c.admin_version = v.version
                    LEFT JOIN [[DB_NAME_PREFIX]]menu_nodes AS mi
                       ON mi.target_loc = 'int'
                      AND mi.equiv_id = c.equiv_id
                      AND mi.content_type = c.type
                      AND mi.redundancy = 'primary'
                    LEFT JOIN [[DB_NAME_PREFIX]]menu_text AS mt
                       ON mt.menu_id = mi.id
                      AND mt.language_id = c.language_id
                    LEFT JOIN [[DB_NAME_PREFIX]]files AS f
                       ON f.id = v.file_id
                id_column: IFNULL(c.tag_id, l.id)
            refiners:
                zenario_trans__chained_in_link:
                    sql: >
                        lec.tag_id = [[REFINER__ZENARIO_TRANS__CHAINED_IN_LINK]]
                zenario_trans__chained_in_link__from_menu_node:
                    sql: >
                        lec.tag_id = (
                            SELECT CONCAT(content_type, '_', equiv_id)
                            FROM [[DB_NAME_PREFIX]]menu_nodes
                            WHERE id = [[REFINER__ZENARIO_TRANS__CHAINED_IN_LINK__FROM_MENU_NODE]]
                        )
            item:
                name: Content Item
                names: Content Items
                css_class: content_chained_double
            columns:
                tag:
                    title: ID/alias
                    width: large
                    searchable: true
                    db_column: c.tag_id
                    show_by_default: true
                    disallow_filtering: true
                equiv_id:
                    db_column: c.equiv_id
                id:
                    db_column: c.id
                type:
                    title: Content Type
                    db_column: c.type
                    format: enum
                language_id:
                    title: Language
                    show_by_default: true
                    db_column: l.id
                    format: language_english_name_with_id
                alias:
                    title: Alias
                    searchable: true
                    db_column: c.alias
                title:
                    title: Title
                    db_column: v.title
                    searchable: true
                description:
                    title: Description
                    db_column: v.description
                    searchable: true
                keywords:
                    title: Keywords
                    db_column: v.keywords
                    searchable: true
                file_id:
                    db_column: f.id
                checksum:
                    db_column: f.checksum
                mime_type:
                    db_column: f.mime_type
                filename:
                    title: Filename
                    db_column: v.filename
                    searchable: true
                file_path:
                    db_column: f.path
                version:
                    title: Version
                    db_column: v.version
                status:
                    title: Status
                    db_column: c.status
                    format: enum
                    values:
                        first_draft: First Draft
                        published_with_draft: Published with Draft
                        hidden_with_draft: Hidden with Draft
                        trashed_with_draft: Trashed with Draft
                        published: Published
                        hidden: Hidden
                        trashed: Trashed
                admin_version_status:
                    db_column: c.status
                    format: enum
                    values:
                        first_draft: Draft
                        published_with_draft: Draft
                        hidden_with_draft: Draft
                        trashed_with_draft: Draft
                        published: Published
                        hidden: Hidden
                        trashed: Trashed
                visitor_version_status:
                    db_column: c.status
                    format: enum
                    values:
                        first_draft: '[Not Published]'
                        published_with_draft: ""
                        hidden_with_draft: '[Hidden]'
                        trashed_with_draft: '[Trashed]'
                        published: ""
                        hidden: '[Hidden]'
                        trashed: '[Trashed]'
                privacy:
                    db_column: tc.privacy
                    format: enum
                    values:
                        public:
                            label: Public, visible to everyone
                        logged_out:
                            label: Public, only show to visitors who are NOT logged in
                        logged_in:
                            label: Private, only show to extranet users who are logged in
                        group_members:
                            label: Private, only show to extranet users in a group
                        in_smart_group:
                            label: Private, only show to extranet users in a smart group
                        logged_in_not_in_smart_group:
                            label: Private, only show to extranet users NOT in a smart group
                        call_static_method:
                            label: "Call a module's static method to decide"
                        send_signal:
                            label: Send a signal to decide
                first_created_datetime:
                    title: Date/Time First Created
                    db_column: c.first_created_datetime
                    format: datetime
                created_datetime:
                    title: Date/Time Latest Version Created
                    db_column: v.created_datetime
                    format: datetime
                creating_author_id:
                    db_column: v.creating_author_id
                last_modified_datetime:
                    title: Date/Time Last Edited
                    db_column: v.last_modified_datetime
                    format: datetime
                last_author_id:
                    db_column: v.last_author_id
                published_datetime:
                    title: Date/Time Published
                    db_column: v.published_datetime
                    format: datetime
                publisher_id:
                    db_column: v.publisher_id
                publication_date:
                    title: Release Date
                    db_column: v.publication_date
                    format: date
                lock_owner_id:
                    db_column: c.lock_owner_id
                archives_exist:
                    width: medium
                    title: 'Archives exist?'
                    db_column: |
                        c.status != 'first_draft' AND (
                            SELECT 1
                            FROM [[DB_NAME_PREFIX]]content_item_versions AS pv
                            WHERE pv.id = c.id
                              AND pv.type = c.type
                              AND pv.version NOT IN (c.visitor_version, c.admin_version)
                            LIMIT 1
                        )
                    format: yes_or_no
                layout:
                    title: Layout
                    db_column: "CONCAT('L', IF (v.layout_id < 10, LPAD(CAST(v.layout_id AS CHAR), 2, '0'), CAST(v.layout_id AS CHAR)))"
                    show_by_default: true
                    searchable: true
                menu:
                    title: Menu Node
                    db_column: mt.name
                    show_by_default: true
                    item_link: menu_item
                menu_id:
                    db_column: mi.id
            default_sort_column: tag
            label_format_for_grid_view: |
                [[tag]]
                                Version [[version]]
            label_format_for_picked_items: '[[tag]] [[visitor_version_status]]'
            label_format_for_popouts: '[[tag]] Version [[version]] [[[admin_version_status]]]'
            default_sort_column: language_id
            collection_buttons:
                categories:
                    priv: _PRIV_EDIT_CONTENT_ITEM_CATEGORIES
                    label: Change categories
                    admin_box:
                        path: zenario_content_categories
            inline_buttons:
                view_frontend:
                    css_class: view_frontend
                    tooltip: View in Front-end window
                    frontend_link:
                        exists: true
                    visible_if: >
                        zenario.engToBoolean(item.frontend_link)
                inspect:
                    css_class: inspect
                    tooltip: View in floating box
                    popout:
                        iframe: true
                    visible_if: >
                        zenario.engToBoolean(item.frontend_link)
            item_buttons:
                settings:
                    priv: _PRIV_VIEW_CONTENT_ITEM_SETTINGS
                    label: Properties
                    admin_box:
                        path: zenario_content
                    without_traits:
                        ghost: true
                view_dropdown:
                    label: View
                    multiple_select: true
                    hide_when_children_are_not_visible: true
                view_image:
                    parent: view_dropdown
                    label: 'XXX - View Picture'
                    tooltip: View Picture
                    popout:
                        href: 'zenario/file.php?usage=content&popout=1'
                        options:
                            type: image
                    traits:
                        has_picture: true
                    without_traits:
                        ghost: true
                export_dropdown:
                    label: Actions
                    multiple_select: true
                    hide_when_children_are_not_visible: true
                download:
                    parent: export_dropdown
                    label: Download
                    ajax:
                        confirm:
                            message: 'Download the file "[[filename]]"?'
                            button_message: Download
                            cancel_button_message: Cancel
                            message_type: question
                            download: true
                        request:
                            download: 1
                    traits:
                        has_file: true
                    without_traits:
                        ghost: true
                action_dropdown:
                    label: Actions
                    multiple_select: true
                    hide_when_children_are_not_visible: true
                layout:
                    priv: _PRIV_EDIT_CONTENT_ITEM_TEMPLATE
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    parent: action_dropdown
                    label: Change layout
                    multiple_select: true
                    admin_box:
                        path: zenario_content_layout
                    without_traits:
                        ghost: true
                alias:
                    parent: action_dropdown
                    priv: _PRIV_VIEW_CONTENT_ITEM_SETTINGS
                    label: Edit alias
                    admin_box:
                        path: zenario_alias
                    without_traits:
                        ghost: true
                create_translation:
                    parent: action_dropdown
                    priv: _PRIV_CREATE_TRANSLATION_FIRST_DRAFT
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    label: |
                        Create a translation in [[lang_name]]
                    admin_box:
                        path: zenario_content
                        key:
                            translate: 1
                    traits:
                        zenario_trans__can_link: true
                        ghost: true
                hide:
                    parent: action_dropdown
                    priv: _PRIV_HIDE_CONTENT_ITEM
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    hide_in_select_mode: true
                    label: Hide
                    multiple_select: true
                    traits:
                        hideable: true
                    without_traits:
                        ghost: true
                    ajax:
                        confirm:
                            message: |
                                This action will hide the item "[[tag]]".
                                
                                It will become invisible to visitors and any menu nodes linking to it will also be hidden. (You can show an item again by creating a draft and then re-publishing.)
                                
                                Are you sure you wish to proceed?
                            multiple_select_message: |
                                This action will hide the selected content items.
                                
                                They will become invisible to visitors and any menu nodes linking to them will also be hidden. (You can show an item again by creating a draft and then re-publishing.)
                                
                                Are you sure you wish to proceed?
                            button_message: Hide
                            cancel_button_message: Cancel
                            message_type: warning
                        request:
                            hide: 1
                hidden:
                    parent: action_dropdown
                    priv: _PRIV_CREATE_REVISION_DRAFT
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    label: Unhide/make draft
                    multiple_select: true
                    multiple_select_tooltip: Unhide Content Items
                    traits:
                        hidden: true
                    without_traits:
                        ghost: true
                    ajax:
                        confirm:
                            message: |
                                Do you wish to unhide the content item "[[tag]]"?
                                
                                This will create a new draft, which will be available to visitors if you publish it.
                            multiple_select_message: |
                                Do you wish to unhide the selected content items?
                                
                                This will create new drafts, which will be available to visitors if you publish them.
                            button_message: Unhide
                            cancel_button_message: Cancel
                            message_type: question
                        request:
                            unhide: 1
                publish:
                    parent: action_dropdown
                    priv: _PRIV_PUBLISH_CONTENT_ITEM
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    hide_in_select_mode: true
                    label: Publish
                    multiple_select: true
                    traits:
                        draft: true
                        not_locked: true
                    without_traits:
                        ghost: true
                    admin_box:
                        path: zenario_publish
                delete:
                    priv: _PRIV_DELETE_DRAFT
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                        && item.id != item.equiv_id
                    hide_in_select_mode: true
                    label: Delete draft
                    multiple_select: true
                    multiple_select_label: Delete drafts
                    traits:
                        draft: true
                        deletable: true
                        not_locked: true
                    without_traits:
                        ghost: true
                    ajax:
                        confirm:
                            message: |
                                You are about to delete the draft version of "[[tag]]".
                                
                                Deleting this draft will not affect the published version of this item, if it exists. However, the deletion cannot be undone.
                                
                                Are you sure you wish to proceed?
                            multiple_select_message: |
                                You are about to delete the draft versions of the selected content items.
                                
                                Deleting a draft will not affect any published versions of these items, if they exist. However, the deletions cannot be undone.
                                
                                Are you sure you wish to proceed?
                            button_message: Delete
                            cancel_button_message: Cancel
                            message_type: warning
                        request:
                            delete: 1
                trash:
                    priv: _PRIV_TRASH_CONTENT_ITEM
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                        && item.id != item.equiv_id
                    hide_in_select_mode: true
                    label: Trash
                    multiple_select: true
                    traits:
                        trashable: true
                    without_traits:
                        ghost: true
                    admin_box:
                        path: zenario_trash
                delete_archives:
                    priv: _PRIV_TRASH_CONTENT_ITEM
                    visible_if: |
                        zenarioA.checkSpecificPerms(id)
                    parent: action_dropdown
                    hide_in_select_mode: true
                    label: Delete archived versions
                    multiple_select: true
                    ajax:
                        confirm:
                            message: |
                                Are you sure you wish to delete any archived versions of "[[tag]]"?
                                
                                This cannot be undone.
                            multiple_select_message: |
                                Are you sure you wish to delete any archived versions of [[item_count]] content items?
                                
                                This cannot be undone.
                            button_message: Delete archived versions
                            cancel_button_message: Cancel
                            message_type: warning
                        request:
                            delete_archives: 1
                    visible_if_for_any_selected_items: |
                        item.archives_exist

# You must use a tab-size of 4 spaces to edit this file.
---
zenario__menu:
    nav:
        #Show the administrator a list of languages on the site, and get them to choose one.
        #When they choose one by clicking on the folder, show the Menu Sections and then Menu Nodes
        #in that language.
        by_language:
            panel:
                title: Menu Languages
                no_items_message: >
                    No Languages have been enabled. You must enable a Language
                    before creating any Menu Nodes.
                view_mode: list
                disable_grid_view: true
                php: true
                db_items:
                    table: '[[DB_NAME_PREFIX]]languages AS l'
                    id_column: l.id
                    client_side: true
                refiners:
                    show_language_choice:
                        exists: true
                columns:
                    name:
                        title: Language Name
                        searchable: true
                        db_column: l.id
                        format: language_english_name_with_id
                        show_by_default: true
                item:
                    name: Language
                    names: Languages
                    css_class: ""
                    tooltip_when_link_is_active: 'View menu sections in the language &quot;[[name]]&quot;.'
                    link:
                        path: zenario__menu/panels/sections
                        branch: true
                        refiner: language
        
        #This is a little hack to select the default language and skip straight to the Menu Sections Panel.
        #Otherwise it works as above.
        default_language:
            panel:
                no_return: true
                allow_bypass: true
                db_items:
                    table: '[[DB_NAME_PREFIX]]languages AS l'
                    id_column: l.id
                    client_side: true
                    where_statement: "WHERE l.id = (SELECT value FROM [[DB_NAME_PREFIX]]site_settings where name = 'default_language')"
                item:
                    link:
                        path: zenario__menu/panels/sections
                        branch: true
                        refiner: language
        
        #This is a little hack to select the default language, then select the Main menu section, then
        #skip straight to the Menu Nodes Panel.
        #Otherwise it works as above.
        main_section_menu:
            panel:
                no_return: true
                allow_bypass: true
                db_items:
                    table: '[[DB_NAME_PREFIX]]languages AS l'
                    id_column: l.id
                    client_side: true
                    where_statement: "WHERE l.id = (SELECT value FROM [[DB_NAME_PREFIX]]site_settings where name = 'default_language')"
                item:
                    link:
                        path: zenario__menu/panels/main_section_menu_part_2
                        branch: true
                        refiner: language
    
    #Second part of the above
    panels:
        main_section_menu_part_2:
            no_return: true
            allow_bypass: true
            db_items:
                table: '[[DB_NAME_PREFIX]]menu_sections AS ms'
                id_column: ms.id
                client_side: true
                where_statement: |
                    WHERE ms.id = (
                        SELECT id
                        FROM [[DB_NAME_PREFIX]]menu_sections
                        ORDER BY
                             section_name = 'Main' DESC,
                             section_name LIKE '%Main%' DESC,
                             id ASC
                        LIMIT 1
                    )
            item:
                link:
                    path: zenario__menu/panels/menu_nodes
                    branch: Yes
                    refiner: section
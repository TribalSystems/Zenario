zenario.lib(function(r,l,s,p,t,u,k,g,v,q,w,m,h,x,y,z,c,A,B,C,a){a.summaries={};a.animationsHiddenInEditors=!1;a.hideAnimationsInEditors=function(){a.animationsHiddenInEditors=!0};a.imagesHiddenInEditors=!1;a.hideImagesInEditors=function(){a.imagesHiddenInEditors=!0};a.open=function(b,c,d,h,e,f){q.loaded||f?(g.getSkinDesc(),$("div#"+c).tinymce({script_url:l+k.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code","nonbreaking zenario_save table contextmenu directionality",
"paste autoresize"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,menu:{file:{title:"File",items:""},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link image | anchor hr charmap"},view:{title:"View",items:""},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript"+(g.skinDesc.style_formats?" | formats":"")+" | removeformat"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},
tools:{title:"Tools",items:"searchreplace | code"}},toolbar:"undo redo | image link unlink | bold italic underline | removeformat"+(g.skinDesc.style_formats?" | styleselect":"")+" | fontsizeselect | formatselect | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | save save_and_close cancel",statusbar:!1,autoresize_min_height:100,paste_preprocess:g.tinyMCEPasteRreprocess,inline:!0,zenario_inline_ui:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,document_base_url:l,
convert_urls:!0,relative_urls:!0,style_formats:g.skinDesc.style_formats,file_browser_callback:g.fileBrowser,init_instance_callback:function(a){g.enableDragDropUploadInTinyMCE(!0,"",b)}}),a.summaries[b]={locked:d,empty:h,matches:e},p.zenarioEditorSave=function(b){a.saveViaAJAX(m(b.id),!0)},p.zenarioEditorSaveAndContinue=function(b){a.saveViaAJAX(m(b.id))},p.zenarioEditorCancel=function(b){a.close(m(b.id))},a.startPoking()):q.runOnInit.push(function(){a.open(b,c,d,h,e,!0)})};a.saveViaAJAX=function(b,
n,d,l){var e;"string"==typeof b?(e=b,b=m(b)):e=b.id;var f=k.getContainerIdFromEl(b);b=k.getSlotnameFromEl(b);if(d||!a.summaries[f]||a.summaries[f].locked)d&&!l&&(a.summaries[f]=!1);else{if(a.summaries[f].empty){a.floatingMessage(c.saveSyncSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.saveSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+e+"', "+h(n)+', true, true);" /><input type="button" class="submit_selected" value="'+c.saveDontSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+
e+"', "+h(n)+', true, false);" /><input type="button" class="submit" value="'+c.cancel+'"/>',!0);return}if(a.summaries[f].matches){a.floatingMessage(c.saveUpdateSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.saveUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+e+"', "+h(n)+', true, true);" /><input type="button" class="submit_selected" value="'+c.saveDontUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+e+"', "+h(n)+', true, false);" /><input type="button" class="submit" value="'+
c.cancel+'"/>',!0);return}}f=m(f+"_save_link").value;e=k.tinyMCEGetContent($("div#"+e).tinymce());(d=a.AJAX(f,"_zenario_save_content_=1&_sync_summary="+h(d&&l)+"&content__content="+encodeURIComponent(e),!0))?a.floatingMessage(d,!0,"error"):n?a.doClose(b):g.notification(c.contentSaved)};a.notification=function(a,c){var d=$("div#"+a).tinymce();d&&d.notificationManager&&d.notificationManager.open(c)};a.close=function(b){b=k.getContainerIdFromEl(b);b=k.getSlotnameFromEl(m(b));a.floatingMessage(c.closeEditorWarning,
'<input type="button" class="submit_selected" value="'+c.abandonChanges+'" onclick="zenarioA.closeFloatingBox(); zenario_wysiwyg_editor.doClose(\''+b+'\');" /><input type="button" class="submit" value="'+c.cancel+'"/>',!0)};a.doClose=function(b){a.stopPoking();$("#zenario_editor_toolbar").html("").hide();a.refreshPluginSlot(b,r,!1);q.init()};a.stopPoking=function(){a.poking&&clearInterval(a.poking);a.poking=!1};a.startPoking=function(){a.poking||(a.poking=setInterval(a.poke,12E4))};a.poke=function(){k.ajax(l+
"zenario/admin/quick_ajax.php?keep_session_alive=1")};a.listenForDoubleClick=function(a,c,d){$("div#"+c).off("dblclick").on("dblclick",function(){"edit"==g.toolbar&&$(d).click()})}},zenario_wysiwyg_editor);

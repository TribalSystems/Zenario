zenario.lib(function(h,r,s,p,t,u,l,f,v,q,w,m,n,x,y,z,e,A,B,a){a.summaries={};a.animationsHiddenInEditors=!1;a.hideAnimationsInEditors=function(){a.animationsHiddenInEditors=!0};a.imagesHiddenInEditors=!1;a.hideImagesInEditors=function(){a.imagesHiddenInEditors=!0};a.open=function(b,d,c,e,g,k){q.loaded||k?(f.getSkinDesc(),$("div#"+d).tinymce({script_url:r+f.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code","nonbreaking zenario_save table contextmenu directionality",
"paste autoresize"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,menu:{file:{title:"File",items:""},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link image | anchor hr charmap"},view:{title:"View",items:""},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript"+(f.skinDesc.style_formats?" | formats":"")+" | removeformat"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},
tools:{title:"Tools",items:"searchreplace | code"}},toolbar:"undo redo | image link unlink | bold italic underline | removeformat"+(f.skinDesc.style_formats?" | styleselect":"")+" | fontsizeselect | formatselect | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | save save_and_close cancel",statusbar:!1,autoresize_min_height:100,paste_preprocess:f.tinyMCEPasteRreprocess,inline:!0,zenario_inline_ui:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,document_base_url:r,
convert_urls:!0,relative_urls:!0,style_formats:f.skinDesc.style_formats,file_browser_callback:a.SK,init_instance_callback:function(a){f.enableDragDropUploadInTinyMCE(!0,"",b)}}),a.summaries[b]={locked:c,empty:e,matches:g},p.zenarioEditorSave=function(b){a.saveViaAJAX(m(b.id),!0)},p.zenarioEditorSaveAndContinue=function(b){a.saveViaAJAX(m(b.id))},p.zenarioEditorCancel=function(b){a.close(m(b.id))}):q.runOnInit.push(function(){a.open(b,d,c,e,g,!0)})};a.saveViaAJAX=function(b,d,c,h){var g;"string"==
typeof b?(g=b,b=m(b)):g=b.id;var k=l.getContainerIdFromEl(b);b=l.getSlotnameFromEl(b);if(c||!a.summaries[k]||a.summaries[k].locked)c&&!h&&(a.summaries[k]=!1);else{if(a.summaries[k].empty){a.floatingMessage(e.saveSyncSummaryPrompt,'<input type="button" class="submit_selected" value="'+e.saveSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+g+"', "+n(d)+', true, true);" /><input type="button" class="submit_selected" value="'+e.saveDontSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+
g+"', "+n(d)+', true, false);" /><input type="button" class="submit" value="'+e.cancel+'"/>',!0);return}if(a.summaries[k].matches){a.floatingMessage(e.saveUpdateSummaryPrompt,'<input type="button" class="submit_selected" value="'+e.saveUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+g+"', "+n(d)+', true, true);" /><input type="button" class="submit_selected" value="'+e.saveDontUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+g+"', "+n(d)+', true, false);" /><input type="button" class="submit" value="'+
e.cancel+'"/>',!0);return}}k=m(k+"_save_link").value;g=f.tinyMCEGetContent($("div#"+g).tinymce());(c=a.AJAX(k,"_zenario_save_content_=1&_sync_summary="+n(c&&h)+"&content__content="+encodeURIComponent(g),!0))?a.floatingMessage(c,!0,"error"):d?a.doClose(b):f.notification(e.contentSaved)};a.SK=function(b,d,c,e){a.win=e;a.field_name=b;"file"==c?f.organizerSelect("zenario_wysiwyg_editor","setLinkURL",!1,"zenario__content/panels/content","zenario__content/panels/content","zenario__content/panels/content",
"zenario__content/panels/content",!1,h,h,h,!0):"image"==c&&f.organizerSelect("zenario_wysiwyg_editor","setImageURL",!1,"zenario__content/panels/content/item_buttons/images//"+a.cType+"_"+a.cID+"//","zenario__content/panels/inline_images_for_content","zenario__content/panels/inline_images_for_content","zenario__content/panels/inline_images_for_content",!0,h,h,h,!0)};a.lastFieldValue="";a.setEditorField=function(b,d,c){d===h&&(d=a.win.document.getElementById(a.field_name));if(c){if(""!==d.value&&d.value!=
a.lastFieldValue)return;a.lastFieldValue=b}d.value=b;l.fireChangeEvent(d)};a.setLinkURL=function(b,d,c){d.getItemURL=1;b=l.moduleNonAsyncAJAX("zenario_common_features",d,!0);a.setEditorField(c.title,$(".mce-panel input.mce-link_text_to_display")[0],!0);a.setEditorField(b)};a.setImageURL=function(b,d,c){b="zenario/file.php?c="+c.checksum+"&filename="+encodeURIComponent(c.filename);a.setEditorField(c.alt_tag,$(".mce-panel input.mce-image_alt")[0]);a.setEditorField(b)};a.setFlashURL=function(b,d,c){b=
"zenario/file.php?c="+c.checksum+"&filename="+encodeURIComponent(c.filename);a.setEditorField(b)};a.close=function(b){b=l.getContainerIdFromEl(b);b=l.getSlotnameFromEl(m(b));a.floatingMessage(e.closeEditorWarning,'<input type="button" class="submit_selected" value="'+e.abandonChanges+'" onclick="zenarioA.closeFloatingBox(); zenario_wysiwyg_editor.doClose(\''+b+'\');" /><input type="button" class="submit" value="'+e.cancel+'"/>',!0)};a.doClose=function(b){$("#zenario_editor_toolbar").html("").hide();
a.refreshPluginSlot(b,h,!1);q.init()};a.listenForDoubleClick=function(a,d,c){$("div#"+d).off("dblclick").on("dblclick",function(){"edit"==f.toolbar&&$(c).click()})}},zenario_wysiwyg_editor);

zenario.lib(function(r,k,s,p,t,u,h,e,v,q,w,l,m,x,y,z,c,A,B,a){a.summaries={};a.animationsHiddenInEditors=!1;a.hideAnimationsInEditors=function(){a.animationsHiddenInEditors=!0};a.imagesHiddenInEditors=!1;a.hideImagesInEditors=function(){a.imagesHiddenInEditors=!0};a.open=function(b,c,f,h,d,g){q.loaded||g?(e.getSkinDesc(),$("div#"+c).tinymce({script_url:k+e.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code","nonbreaking zenario_save table contextmenu directionality",
"paste autoresize"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,menu:{file:{title:"File",items:""},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link image | anchor hr charmap"},view:{title:"View",items:""},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript"+(e.skinDesc.style_formats?" | formats":"")+" | removeformat"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},
tools:{title:"Tools",items:"searchreplace | code"}},toolbar:"undo redo | image link unlink | bold italic underline | removeformat"+(e.skinDesc.style_formats?" | styleselect":"")+" | fontsizeselect | formatselect | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | save save_and_close cancel",statusbar:!1,autoresize_min_height:100,paste_preprocess:e.tinyMCEPasteRreprocess,inline:!0,zenario_inline_ui:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,document_base_url:k,
convert_urls:!0,relative_urls:!0,style_formats:e.skinDesc.style_formats,file_browser_callback:e.fileBrowser,init_instance_callback:function(a){e.enableDragDropUploadInTinyMCE(!0,"",b)}}),a.summaries[b]={locked:f,empty:h,matches:d},p.zenarioEditorSave=function(b){a.saveViaAJAX(l(b.id),!0)},p.zenarioEditorSaveAndContinue=function(b){a.saveViaAJAX(l(b.id))},p.zenarioEditorCancel=function(b){a.close(l(b.id))},a.startPoking()):q.runOnInit.push(function(){a.open(b,c,f,h,d,!0)})};a.saveViaAJAX=function(b,
n,f,k){var d;"string"==typeof b?(d=b,b=l(b)):d=b.id;var g=h.getContainerIdFromEl(b);b=h.getSlotnameFromEl(b);if(f||!a.summaries[g]||a.summaries[g].locked)f&&!k&&(a.summaries[g]=!1);else{if(a.summaries[g].empty){a.floatingMessage(c.saveSyncSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.saveSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+d+"', "+m(n)+', true, true);" /><input type="button" class="submit_selected" value="'+c.saveDontSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+
d+"', "+m(n)+', true, false);" /><input type="button" class="submit" value="'+c.cancel+'"/>',!0);return}if(a.summaries[g].matches){a.floatingMessage(c.saveUpdateSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.saveUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+d+"', "+m(n)+', true, true);" /><input type="button" class="submit_selected" value="'+c.saveDontUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+d+"', "+m(n)+', true, false);" /><input type="button" class="submit" value="'+
c.cancel+'"/>',!0);return}}g=l(g+"_save_link").value;d=e.tinyMCEGetContent($("div#"+d).tinymce());(f=a.AJAX(g,"_zenario_save_content_=1&_sync_summary="+m(f&&k)+"&content__content="+encodeURIComponent(d),!0))?a.floatingMessage(f,!0,"error"):n?a.doClose(b):e.notification(c.contentSaved)};a.close=function(b){b=h.getContainerIdFromEl(b);b=h.getSlotnameFromEl(l(b));a.floatingMessage(c.closeEditorWarning,'<input type="button" class="submit_selected" value="'+c.abandonChanges+'" onclick="zenarioA.closeFloatingBox(); zenario_wysiwyg_editor.doClose(\''+
b+'\');" /><input type="button" class="submit" value="'+c.cancel+'"/>',!0)};a.doClose=function(b){a.stopPoking();$("#zenario_editor_toolbar").html("").hide();a.refreshPluginSlot(b,r,!1);q.init()};a.stopPoking=function(){a.poking&&clearInterval(a.poking);a.poking=!1};a.startPoking=function(){a.poking||(a.poking=setInterval(a.poke,12E4))};a.poke=function(){h.ajax(k+"zenario/admin/quick_ajax.php?keep_session_alive=1")};a.listenForDoubleClick=function(a,c,f){$("div#"+c).off("dblclick").on("dblclick",
function(){"edit"==e.toolbar&&$(f).click()})}},zenario_wysiwyg_editor);

(function(e,c,a,g){a.summaries={};a.animationsHiddenInEditors=!1;a.hideAnimationsInEditors=function(){a.animationsHiddenInEditors=!0};a.imagesHiddenInEditors=!1;a.hideImagesInEditors=function(){a.imagesHiddenInEditors=!0};a.open=function(b,k,d,e,f,h){zenarioAT.loaded||h?(c.getSkinDesc(),$("div#"+k).tinymce({script_url:URLBasePath+c.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code","nonbreaking zenario_save table contextmenu directionality","paste autoresize"],
image_advtab:!0,browser_spellcheck:!0,menu:{file:{title:"File",items:""},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link image | anchor hr charmap"},view:{title:"View",items:""},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript"+(c.skinDesc.style_formats?" | formats":"")+" | removeformat"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},tools:{title:"Tools",items:"searchreplace | code"}},
toolbar:"undo redo | image link unlink | bold italic underline | removeformat"+(c.skinDesc.style_formats?" | styleselect":"")+" | fontsizeselect | formatselect | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | save save_and_close cancel",statusbar:!1,autoresize_min_height:100,paste_preprocess:c.tinyMCEPasteRreprocess,inline:!0,zenario_inline_ui:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,convert_urls:!1,style_formats:c.skinDesc.style_formats,file_browser_callback:a.SK,
init_instance_callback:function(a){c.enableDragDropUploadInTinyMCE(!0,"",b)}}),a.summaries[b]={locked:d,empty:e,matches:f},window.zenarioEditorSave=function(b){a.saveViaAJAX(get(b.id),!0)},window.zenarioEditorSaveAndContinue=function(b){a.saveViaAJAX(get(b.id))},window.zenarioEditorCancel=function(b){a.close(get(b.id))}):zenarioAT.runOnInit.push(function(){a.open(b,k,d,e,f,!0)})};a.saveViaAJAX=function(b,k,d,g){var f;"string"==typeof b?(f=b,b=get(b)):f=b.id;var h=e.getContainerIdFromEl(b);b=e.getSlotnameFromEl(b);
if(d||!a.summaries[h]||a.summaries[h].locked)d&&!g&&(a.summaries[h]=!1);else{if(a.summaries[h].empty){a.floatingMessage(c.phrase.saveSyncSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.phrase.saveSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+f+"', "+e.engToBoolean(k)+', true, true);" /><input type="button" class="submit_selected" value="'+c.phrase.saveDontSyncSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+f+"', "+e.engToBoolean(k)+', true, false);" /><input type="button" class="submit" value="'+
c.phrase.cancel+'"/>',!0);return}if(a.summaries[h].matches){a.floatingMessage(c.phrase.saveUpdateSummaryPrompt,'<input type="button" class="submit_selected" value="'+c.phrase.saveUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+f+"', "+e.engToBoolean(k)+', true, true);" /><input type="button" class="submit_selected" value="'+c.phrase.saveDontUpdateSummary+'" onclick="zenario_wysiwyg_editor.saveViaAJAX(\''+f+"', "+e.engToBoolean(k)+', true, false);" /><input type="button" class="submit" value="'+
c.phrase.cancel+'"/>',!0);return}}h=e.get(h+"_save_link").value;f=c.tinyMCEGetContent($("div#"+f).tinymce());(d=a.AJAX(h,"_zenario_save_content_=1&_sync_summary="+e.engToBoolean(d&&g)+"&content__content="+encodeURIComponent(f),!0))?a.floatingMessage(d,!0,"error"):k?a.doClose(b):c.notification(c.phrase.contentSaved)};a.SK=function(b,k,d,e){a.win=e;a.field_name=b;"file"==d?c.SK("zenario_wysiwyg_editor","setLinkURL",!1,"zenario__content/panels/content","zenario__content/panels/content","zenario__content/panels/content",
"zenario__content/panels/content",!1,g,g,g,!0):"image"==d&&c.SK("zenario_wysiwyg_editor","setImageURL",!1,"zenario__content/panels/content/item_buttons/images//"+a.cType+"_"+a.cID+"//","zenario__content/panels/inline_images_for_content","zenario__content/panels/inline_images_for_content","zenario__content/panels/inline_images_for_content",!0,g,g,g,!0)};a.lastFieldValue="";a.setEditorField=function(b,c,d){c===g&&(c=a.win.document.getElementById(a.field_name));if(d){if(""!==c.value&&c.value!=a.lastFieldValue)return;
a.lastFieldValue=b}c.value=b;e.fireChangeEvent(c)};a.setLinkURL=function(b,c,d){c.getItemURL=1;b=e.pluginClassAJAX("zenario_common_features",c,!0);a.setEditorField(d.title,$(".mce-panel input.mce-link_text_to_display")[0],!0);a.setEditorField(b)};a.setImageURL=function(b,c,d){b="zenario/file.php?c="+d.checksum+"&filename="+encodeURIComponent(d.filename);a.setEditorField(d.alt_tag,$(".mce-panel input.mce-image_alt")[0]);a.setEditorField(b)};a.setFlashURL=function(b,c,d){b="zenario/file.php?c="+d.checksum+
"&filename="+encodeURIComponent(d.filename);a.setEditorField(b)};a.close=function(b){b=e.getContainerIdFromEl(b);b=e.getSlotnameFromEl(e.get(b));a.floatingMessage(c.phrase.closeEditorWarning,'<input type="button" class="submit_selected" value="'+c.phrase.abandonChanges+'" onclick="zenarioA.closeFloatingBox(); zenario_wysiwyg_editor.doClose(\''+b+'\');" /><input type="button" class="submit" value="'+c.phrase.cancel+'"/>',!0)};a.doClose=function(b){$("#zenario_editor_toolbar").html("").hide();a.refreshPluginSlot(b,
g,!1);zenarioAT.init()}})(zenario,zenarioA,zenario_wysiwyg_editor);zenario_wysiwyg_editor.listenForDoubleClick=function(e,c,a){$("div#"+c).off("dblclick").on("dblclick",function(){"edit"==zenarioA.toolbar&&$(a).click()})};

(function(d,f,b){b.open=function(a,e,c){if(zenarioAT.loaded||c){c=$('<input type="text" id="banner_title_input_box" placeholder="'+b.phrase("Title")+'"/>');var d=$("div#"+a+" div.banner_title h2"),g,h="color background font-family text-size font-weight font-size font-style".split(" ");for(g in h)c.css(h[g],d.css(h[g]));c.val(d.text().replace(/^\s+/,"").replace(/\s+$/,""));c.css("border","none");d.replaceWith(c);f.getSkinDesc();$("div#"+e).tinymce({script_url:URLBasePath+f.tinyMCEPath,plugins:["advlist autolink lists link charmap hr anchor",
"searchreplace code","nonbreaking zenario_save contextmenu directionality","paste autoresize"],browser_spellcheck:!0,menu:{file:{title:"File",items:""},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link | anchor hr charmap"},view:{title:"View",items:""},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript"+(f.skinDesc.style_formats?" | formats":"")+" | removeformat"},tools:{title:"Tools",items:"searchreplace | code"}},
toolbar:"undo redo | link unlink | bold italic underline | removeformat"+(f.skinDesc.style_formats?" | styleselect":"")+" | fontsizeselect | formatselect | numlist bullist | outdent indent | alignleft aligncenter alignright alignjustify | save save_and_close cancel",statusbar:!1,autoresize_min_height:100,paste_preprocess:f.tinyMCEPasteRreprocess,inline:!0,zenario_inline_ui:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!1,convert_urls:!1,style_formats:f.skinDesc.style_formats,file_browser_callback:b.SK});
window.zenarioEditorSave=function(a){b.saveViaAJAX(get(a.id),!0)};window.zenarioEditorSaveAndContinue=function(a){b.saveViaAJAX(get(a.id))};window.zenarioEditorCancel=function(a){b.close(get(a.id))}}else zenarioAT.runOnInit.push(function(){b.open(a,e,!0)})};b.saveViaAJAX=function(a,e,c,k){var g;"string"==typeof a?(g=a,a=get(a)):g=a.id;var h=d.getContainerIdFromEl(a);a=d.getSlotnameFromEl(a);var l=d.get(h+"_save_link").value;g=f.tinyMCEGetContent($("div#"+g).tinymce());(c=b.AJAX(l,{_zenario_save_content_:1,
_sync_summary:d.engToBoolean(c&&k),content__content:g,content__title:$("div#"+h+" #banner_title_input_box").val()},!0))?b.floatingMessage(c,!0,"error"):e?b.doClose(a):f.notification(f.phrase.contentSaved)};b.SK=function(a,e,c,d){b.win=d;b.field_name=a;"file"==c&&f.SK("zenario_banner","setLinkURL",!1,"zenario__content/panels/content","zenario__content/panels/content","zenario__content/panels/content","zenario__content/panels/content",!1,void 0,void 0,void 0,!0)};b.lastFieldValue="";b.setEditorField=
function(a,e,c){void 0===e&&(e=b.win.document.getElementById(b.field_name));if(c){if(""!==e.value&&e.value!=b.lastFieldValue)return;b.lastFieldValue=a}e.value=a;d.fireChangeEvent(e)};b.setLinkURL=function(a,e,c){e.getItemURL=1;a=d.pluginClassAJAX("zenario_common_features",e,!0);b.setEditorField(c.title,$(".mce-panel input.mce-link_text_to_display")[0],!0);b.setEditorField(a)};b.close=function(a){a=d.getContainerIdFromEl(a);a=d.getSlotnameFromEl(d.get(a));b.floatingMessage(f.phrase.closeEditorWarning,
'<input type="button" class="submit_selected" value="'+f.phrase.abandonChanges+'" onclick="zenarioA.closeFloatingBox(); zenario_banner.doClose(\''+a+'\');" /><input type="button" class="submit" value="'+f.phrase.cancel+'"/>',!0)};b.doClose=function(a){$("#zenario_editor_toolbar").html("").hide();b.refreshPluginSlot(a,void 0,!1);zenarioAT.init()}})(zenario,zenarioA,zenario_banner);

zenario__user_forms:
	panels:
		zenario_user_forms__form_fields:
			refiners:
				user_form_id:
					sql: '(ff.user_form_id=[[REFINER_ID]])'
			title: Form fields
			view_mode: list
			no_items_message: No form fields found, click "Add" to add one.
			db_items:
				table: |
					[[DB_NAME_PREFIX]]user_form_fields AS ff
					LEFT JOIN [[DB_NAME_PREFIX]]custom_dataset_fields as cdf
					ON ff.user_field_id = cdf.id
				id_column: ff.id
			default_sort_column: field_name
			bold_columns_in_list_view: name
			columns:
				id:
					title: ID
					format: id
					db_column: ff.id
					align_right: true
					width: xxsmall
					show_by_default: true
				user_field_id:
					title: Dataset field ID
					db_column: ff.user_field_id
					align_right: true
					width: xxsmall
				ord:
					title: Ordinal
					db_column: ff.ord
					align_right: true
					width: xxsmall
				name:
					title: Name
					db_column: ff.name
					searchable: true
					show_by_default: true
					width: medium
				field_label:
					title: Label
					db_column: IF (ff.label IS NULL, cdf.label, ff.label)
					searchable: true
					width: medium
				placeholder:
					title: Placeholder
					db_column: ff.placeholder
					searchable: true
					show_by_default: false
					width: medium
				field_type:
					title: Type
					db_column: IFNULL(cdf.type, ff.field_type)
					searchable: true
					format: enum
					values:
						group: Group
						checkbox: Checkbox
						checkboxes: Checkboxes
						date: Date
						editor: Editor
						radios: Radios
						centralised_radios: Centralised radios
						select: Select
						centralised_select: Centralised select
						text: Text
						textarea: Textarea
						url: URL
						attachment: Attachment
						restatement: Mirrored
						calculated: Calculated
					show_by_default: true
					width: medium
				field_name:
					title: Machine name
					db_column: |
						IF(ff.field_type IN('page_break', 'section_description'),'',IFNULL(cdf.db_column, CONCAT('unlinked_', ff.field_type, '_', ff.id)))
					searchable: true
					width: medium
				is_readonly:
					title: Read only
					db_column: ff.is_readonly
					searchable: false
					format: yes_or_no
					show_by_default: true
					width: small
				is_required:
					title: Required
					db_column: ff.is_required
					searchable: false
					format: yes_or_no
					show_by_default: true
					width: small
				values_list:
					title: Value list
					db_column: ""
					searchable: true
					show_by_default: true
					width: large
			reorder:
				column: ord
			collection_buttons: 
				add_field_user_characteristic:
					priv: _PRIV_MANAGE_FORMS
					label: Add a user field (linked)
					hide_in_select_mode: true
					css_class: zenario_create_a_new
					hide_on_filter: true
					admin_box:
						path: zenario_user_dataset_field_picker
						key:
							form_id: ''
				add_field:
					priv: _PRIV_MANAGE_FORMS
					label: Add a field (unlinked)
					hide_in_select_mode: true
					css_class: zenario_create_a_new
					hide_on_filter: true
					admin_box:
						path: zenario_user_admin_box_form_field
						key:
							form_id: ''
				add_section_description:
					priv: _PRIV_MANAGE_FORMS
					label: Add section description
					hide_in_select_mode: true
					css_class: zenario_create_a_new
					hide_on_filter: true
					admin_box:
						path: zenario_user_admin_box_form_field
						key:
							form_id: ''
							type: 'section_description'
				add_page_break:
					priv: _PRIV_MANAGE_FORMS
					label: Add a page break
					hide_in_select_mode: true
					css_class: zenario_create_a_new
					hide_on_filter: true
					ajax:
						request:
							add_page_break: 1
			item_buttons:
				edit:
					priv: _PRIV_MANAGE_FORMS
					hide_in_select_mode: true
					label: Properties
					admin_box:
						path: zenario_user_admin_box_form_field
						key:
							form_id: ''
				delete:
					priv: _PRIV_MANAGE_FORMS
					label: Delete
					multiple_select: true
					ajax:
						confirm:
							message: |
								Are you sure you wish to delete the form field "[[name]]"? 
								This action cannot be undone.
							multiple_select_message: >
								Are you sure you want to remove the selected form fields ?
							button_message: Delete
							cancel_button_message: Cancel
							message_type: warning
						request:
							delete: 1
					hide_in_select_mode: true

zenario_user_forms.updateRestatementFields=function(a,d){$(a?':input[data-mirror-of="'+a+'"]':":input[data-mirror-of]").each(function(b,c){var e=$(c),a=$("#"+e.data("mirror-of"));"checkbox"==d||"radio"==d?e.prop("checked",a.prop("checked")):e.val(a.val())})};
zenario_user_forms.initCalculateField=function(a,d,b,c,e,f){b=$("input#"+a+"_field_value_"+b);c=$("input#"+a+"_field_value_"+c);b.on("keyup",function(){zenario_user_forms.calculate(a,d,b,c,e,f)});c.on("keyup",function(){zenario_user_forms.calculate(a,d,b,c,e,f)})};
zenario_user_forms.calculate=function(a,d,b,c,e,f){b=b.val();c=c.val();var g=0;b=Number(b);!isNaN(b)&&isFinite(b)&&(g+=b);c=Number(c);!isNaN(c)&&isFinite(b)&&("-"==e&&(c*=-1),g+=c);g=parseFloat(g.toFixed(2));zenario_user_forms.setJSCalculatedField(a,d,g);if(f)for(d in f)f.hasOwnProperty(d)&&$(':input[data-mirror-of="'+a+"_field_value_"+f[d]+'"]').val(g)};zenario_user_forms.setJSCalculatedField=function(a,d,b){$("input#"+a+"_field_value_"+d).val(b)};
zenario_user_forms.toggleFieldVisibility=function(a,d,b,c,e){$("div#"+a+"_field_"+b+" :input").on("change",function(){("checkbox"==e?$(this).is(":checked"):$(this).val())==c?$("div#"+a+"_field_"+d).show():$("div#"+a+"_field_"+d).hide()})};
zenario_user_forms.initMultiPageForm=function(a,d,b,c){$("#"+b+" :input:not(textarea)").on("keydown",function(b){13==b.keyCode&&(b.preventDefault(),$(this).parents("fieldset").find("input.next").click())});$("#"+b+" input.next").on("click",function(e){e.preventDefault();var f=$(this).parent(),g=$(this).parent().next(),k=f.prop("id");e=!1;var m=k.match(/\d+$/),l=$(this).is('input[type="submit"]');e=l?$("#"+b).find(":input").serialize():$("#"+k).find(":input").serialize();zenario.ajax(a,e+("&_pageNo="+
m)).after(function(a){a=JSON.parse(a);$("#"+k+" div.form_error").remove();if(_.isEmpty(a))l?$("#"+b+"__form").submit():(f.css("visibility","visible"),g.show("slide",{direction:"right"},500),f.hide(),c||$("html, body").animate({scrollTop:$("#"+d).offset().top-20}));else{var e="",h="";for(fieldId in a)h="#"+d+"_field_"+fieldId,e='<div class="form_error">'+a[fieldId].message+"</div>","checkbox"!=a[fieldId].type&&"group"!=a[fieldId].type&&$(h+" div.field_title").length?$(h+" div.field_title").after(e):
$(h).append(e);a=d;c&&(a="colorbox");$("#"+a).effect("shake",{distance:10,times:3,duration:300})}})});$("#"+b+" input.previous").on("click",function(){var a=$(this).parent();prev=$(this).parent().prev();a.css("visibility","visible");prev.show("slide",{direction:"left"},500);a.hide();$("html, body").animate({scrollTop:$("#"+d).offset().top-20})})};

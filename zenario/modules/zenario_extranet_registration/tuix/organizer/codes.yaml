zenario__users:
    panels:
        zenario_extranet_registration__codes:
            title: User Registration Codes
            view_mode: list
            db_items:
                table: '[[DB_NAME_PREFIX]][[ZENARIO_EXTRANET_REGISTRATION_PREFIX]]codes AS c'
                id_column: c.id
            no_items_message: No Codes have been created yet.
            default_sort_column: code
            columns:
                code:
                    title: Code
                    db_column: c.code
                    searchable: Yes
                    show_by_default: Yes
                description:
                    title: Description
                    db_column: c.description
                    searchable: Yes
                    show_by_default: Yes
                groups:
                    title: Groups
                    db_column: |
                        (
                            SELECT IFNULL(GROUP_CONCAT(DISTINCT cdf.label ORDER BY cdf.label SEPARATOR ', '),'[No Groups assigned]')
                            FROM [[DB_NAME_PREFIX]][[ZENARIO_EXTRANET_REGISTRATION_PREFIX]]code_groups AS cg
                            INNER JOIN [[DB_NAME_PREFIX]]custom_dataset_fields AS cdf
                               ON cdf.id = cg.group_id
                            WHERE cg.code_id = c.id
                        )
                    show_by_default: Yes
                    searchable: No
                    length_limit: "25"
            collection_buttons:
                zenario_extranet_registration_enterprise__create:
                    name: Create a code
                    css_class: zenario_create_a_new
                    admin_box:
                        path: zenario_extranet_registration__codes
                        
            item_buttons:
                zenario_extranet_registration_enterprise__edit:
                    name: Edit
                    admin_box:
                        path: zenario_extranet_registration__codes
                zenario_extranet_registration_enterprise__code_groups:
                    name: View groups
                    link:
                        path: >
                            zenario__users/panels/zenario_extranet_registration__code_groups
                        branch: Yes
                        refiner: code_id
                zenario_extranet_registration_enterprise__delete:
                    name: Delete
                    ajax:
                        confirm:
                            message: 'Are you sure you wish to delete the Code "[[code]]"?'
                            button_message: Delete
                            cancel_button_message: Cancel
                            message_type: warning
                        request:
                            action: delete_code
{% import _self as self %}
{% macro childNodes(nodes) %}
	{% import _self as self %}
	<ul>
		{% for node in nodes %}
			<li class="{{node.Class}}">
				<div class="left_end"></div>
					<span class="menu_image">{{node.Image}}</span>
					{{node.Hyperlink}}
					
					{% if node.children %}
						{{ self.childNodes(node.children) }}
					{% endif %}
				<div class="right_end"></div>
			</li>
		{% endfor %}
	</ul>
{% endmacro %}

<div class="wrap_menu">
<div class="wrap_menu_outer">
<div class="wrap_menu_inner">
	
	{% set Title = this.getTitleMergeFields() %}
	{% if Title %}
		<h2 class="side_menu_title"><a href="{{Title.Parent_Link}}">{{Title.Parent_Name}}</a></h2>
	{% endif %}
	
	{% for node in nodes %}
		<ul>
			<li class="{{node.Class}}">
				<div class="left_end"></div>
					<span class="menu_image">{{node.Image}}</span>
					{{node.Hyperlink}}
					
					{% if node.children %}
						{{ self.childNodes(node.children) }}
					{% endif %}
				<div class="right_end"></div>
			</li>
		</ul>
	{% endfor %}
</div>
</div>
</div>

zenario.lib(function(k,d,z,u,I,B,g,D,l,J,K,L,H,n,t,C,E,w,M,N,A,p,O){d=createZenarioLibrary("FEA",zenarioF);d=A(d);d.idVarName=function(){return this.specifiedIdVarName||"id"};d.validateFormatOrRedrawForField=function(a){a=this.field(a);return t(a.save_onchange)?(4>this.ffoving&&(this.ffoving=4,this.save()),!0):A(zenarioF).validateFormatOrRedrawForField.apply(this,arguments)};d.fill=function(){return this.ffov("fill")};d.format=function(){return this.ffov("format")};d.validate=function(){return this.ffov("validate")};
d.save=function(){return this.ffov("save")};d.setData=function(a){this.setDataDiff(a)};d.sendStateToServer=function(){return this.sendStateToServerDiff()};d.visitorTUIXLink=function(a,b,e){return this.noPlugin?g._vTL(this.moduleClassName,this.path,a,b,e):g._pVTL(this.moduleClassName,this.containerId,this.path,a,b,e)};d.modifyPostOnLoad=function(){return!1};d.ffov=function(a){var b=this,e=new g.callback,c=b.url=b.visitorTUIXLink(b.request,a,!0),f,m=!1;"fill"==a?f=b.modifyPostOnLoad():(b.prevPath=b.path,
b.checkValues(),f={_format:!0,_tuix:b.sendStateToServer()});if(!b.loading){b.showLoader();var d=function(c){b.hideLoader();"fill"==a?b.tuix=c:b.setData(c);var f=b.tuix.js,s=b.tuix.js_after,G;b.tuix.reload_parent&&b.reloadParent();f&&l._e(f,b);s&&!_._isFu(s)&&(G=s,s=function(){l._e(G,b)});b.tuix.close_popout&&b.inPopout&&b.closePopout();b.tuix.stop_flow||(b.tuix.go?b.go(b.tuix.go,k,k,s):b.tuix.go_to_url&&!m?(g._gTU(b.tuix.go_to_url),m=!0,setTimeout(function(){d(c)},350)):(b.sortOutTUIX(),b.draw(),
e.done(),"save"==a&&b.tuix.scroll_after_save&&g._sTST(b.containerId,!0),s&&s()))};b.ajax(c,f,!0).after(d)}return e};d.draw=function(){var a=this;a.draw2();a.tuix.confirm_on_close&&zenario_conductor._cOC(a.containerId,function(){return!a.hidden(k,a.tuix.confirm_on_close)},function(b){a.confirm(a.tuix.confirm_on_close,b)},a.tuix.confirm_on_close.message)};d.redrawTab=function(){this.draw2();this.hideLoader(!0)};d.draw2=function(){this.sortTabs();this.tuix.form_title=this.getTitle();this.cb=new g.callback;
this.putHTMLOnPage(this.drawFields(this.cb,this.mtPrefix+"_form"));var a;this.path==this.prevPath&&this.lastFocus&&(a=this.get(this.lastFocus.id))&&a.focus()};d.ajaxURL=function(){return g._pAL(k,this.containerId,_._ex({path:this.path},this.request))};d.isAdminFacing=function(){return!1};d.putHTMLOnPage=function(a){this.clearOnScrollForItemButtons();var b=this.containerId,e="fea_"+b,c;c=$("#"+e);c.length||(e=b,c=$("#"+e));c.html(a);this.cb.done();this.addJQueryElements("#"+e);if(g.adminId){var f=
g._gCIFSN(g._gSFE(e));g._aADINS("scanHyperlinks__"+f,function(){D._sHADS(f)})}};d.after=function(a){this.cb.after(a)};d.closePopout=function(){if(this.inPopout){var a="outer_"+this.containerId;C(a)&&$(C(a)).remove()}};d.openCustomPopout=function(a,b){var e=_._ex({},a);b&&(e.href=g._aR(e.href,"id",b));l._a(this,{popout:e})};d.reloadParent=function(){this.parent&&("string"==typeof this.parent?g._rS(this.parent):this.parent.reload())};d.hasSearch=function(){return n(this.request.search)&&""!=this.request.search};
d.showClearSearchButton=function(){return this.hasSearch()&&(g._bIF()||g._bII(9))};d.fun=function(a){return this.globalName+"."+a};d.microTemplate=function(a,b,e,c,f){var m,d=!1;this.__cusTemplateApplied||"fea_list"!=a&&"fea_form"!=a||!(m=this.tuix&&this.tuix.microtemplate)||(a=m,this.__cusTemplateApplied=d=!0);a=A(zenarioF).microTemplate.call(this,a,b,e,c,f);d&&delete this.__cusTemplateApplied;return a};d.displayDevTools=function(){if(!this.tsLink&&!l._sDT())return"";var a="#fea_dev_tools_"+this.containerId,
b=$(a),e=this.pMicroTemplate("dev_tools",{});return b.length?(b.html(e).show(),this.addJQueryElements(a),""):e};d.on=function(a,b){g.on(!1,this.containerId,a,b)};d.off=function(a){g._o(!1,this.containerId,a)};d.showLoader=function(a,b){var e="loader_for_"+this.containerId,c=this.get(this.containerId),f=this.get(e),c=$(c);a?(this.loading=!1,c.removeClass("fea_loading").addClass("fea_loaded").addClass("fea_initial_load_done")):(this.loading=!0,c.removeClass("fea_loaded").addClass("fea_loading"));b?
c.removeClass("fea_just_loaded").addClass("fea_just_redrawn"):c.removeClass("fea_just_redrawn").addClass("fea_just_loaded");if(f)e=$(f);else{if(a)return;e=$(this.pMicroTemplate("loading",{loadingId:e}));c.prepend(e)}a?e.hide():e.width(c.width()).height(c.height()).show()};d.hideLoader=function(a){this.showLoader(!0,a)};d.reload=function(a){this.containerId&&this.runLogic(this.request,a||function(){})};d.commandEnabled=function(a){return zenario_conductor._cE(this.containerId,a)};d.navigationEnabled=
function(a,b){return this.tuix.enable&&this.tuix.enable[b||a]&&zenario_conductor._cE(this.containerId,a)};d.enabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.runLogic=function(a,b){this.request=a;this.logic(a,b)};d.typeOfLogic=function(){return this.guessTypeOfLogic()};d.guessTypeOfLogic=function(){return this.tuix&&this.tuix.fea_paths&&!this.tuix.fea_paths[this.request.path]?"normal_plugin":this.mode.m(/list/)?"list":"form"};d.logic=function(a,b){switch(this.typeOfLogic()){case "list":this.showList(b);
break;case "form":this.showForm(b);break;case "normal_plugin":g._rPS(this.containerId,"lookup",a);break;case "normal_plugin_using_post":g._rPS(this.containerId,"lookup",!1,!1,!1,!1,!1,a)}};d.loadData=function(a,b,e){var c=this;c.request=a;c.tuix=l._pa(b);c.last={request:a};c.prevPath=c.path;e&&(c.tsLink=e);$(z).ready(function(){switch(c.typeOfLogic()){case "list":c.url=c.visitorTUIXLink(c.request);c.drawList();c.hideLoader();break;case "form":c.url=c.visitorTUIXLink(c.request,"fill",!0),c.sortOutTUIX(),
c.draw()}})};d.showForm=function(a){this.changed={};this.fill().after(a)};d.showList=function(a){var b=this;if(!b.loading){var e=b.url=b.visitorTUIXLink(b.request);b.showLoader();b.ajax(e,!1,!0).after(function(c){b.tuix=c;b.drawList();b.hideLoader(!1);a()})}};d.drawList=function(){var a=this;a.hadSparkline=!1;a.sortOutTUIX();a.cb=new g.callback;a.putHTMLOnPage(a.pMicroTemplate("list",{}));var b=1*a.tuix.__page__,e=1*a.tuix.__page_size__,c=1*a.tuix.__item_count__,f;b&&e&&c&&c>e&&(f="#pagination_"+
a.containerId,$(f).show().jPaginator({nbPages:Math.ceil(c/e),selectedPage:b,overBtnLeft:f+"_o_left",overBtnRight:f+"_o_right",maxBtnLeft:f+"_m_left",maxBtnRight:f+"_m_right",onPageClicked:function(b,c){a.doSearch(k,k,k,c)}}));a.hadSparkline&&a.initSparklineChart();a.tuix.map&&a.initMap()};d.initMap=function(){var a,b=this.tuix,e=_._tA(b.items),c=b.map.options,f=this.containerId,b=b.map.api_key,m=function(){var b,m=!1;if(0<e.length)for(b=0;b<e.length;++b)if(e[b].latitude&&e[b].longitude){m=!0;break}if(m){c=
{scrollwheel:!1,draggable:!0};c.map_zoom&&c.map_lat&&c.map_lng&&(c.zoom=c.map_zoom,c.center=new google.maps.LatLng(c.map_lat,c.map_lng));var d,q,m=new google.maps.LatLngBounds;a=new google.maps.Map(z.getElementById("map_"+f),c);var g=new google.maps.InfoWindow;for(b=0;b<e.length;++b)d=e[b].latitude,q=e[b].longitude,d&&q&&(latlng=new google.maps.LatLng(d,q),marker=new google.maps.Marker({position:latlng,map:a,clickable:!0}),m.extend(latlng),d=$("#"+f+" .item_"+e[b].id).html(),google.maps.event.addListener(marker,
"click",function(b,c,e){return function(){e.setContent(c);e.open(a,b)}}(marker,d,g)));c.map_zoom||(google.maps.event.addListenerOnce(a,"bounds_changed",function(){this.setZoom(Math.min(15,this.getZoom()))}),a.fitBounds(m))}else new google.maps.Map(z.getElementById("map_"+f),{center:{lat:52.48278,lng:-1.362305},zoom:2,scrollwheel:!1,draggable:!1,disableDefaultUI:!0}),$("#no_locations_"+f).show()};if("object"===typeof google&&"object"===typeof google.maps)m();else{var d=this.globalName+"__runWhenMapsLoaded";
u[d]=m;m=z.createElement("script");m.type="text/javascript";m.src="https://maps.googleapis.com/maps/api/js?v=3&key="+b+"&callback="+d;z.body.appendChild(m)}};d.getPathFromMode=function(a){return"zenario_"+a};d.getModeFromPath=function(a){return a.r(/^zenario_/,"")};d.recordRequestsInURL=function(a){g._rRIU(this.containerId,this.checkRequests(a,!0))};d.checkRequests=function(a,b,e,c,f){var m,d;a=g._cl(a,c);d=this.idVarName(this.mode)||"id";if(this.tuix&&this.tuix.key)for(m in this.tuix.key)p(this.tuix.key,
m)&&(c=this.tuix.key[m],"id"!=m||"id"==d||n(this.tuix.key[d])||(m=d),n(a[m])||(a[m]=c));e?a[d]=e:f&&!n(a[d])&&(a[d]="");for(m in a)p(a,m)&&(c=a[m],_._isOb(c)&&(c=a[m]=c.replace_with_field_from_item&&e&&this.tuix.items&&this.tuix.items[e]?this.tuix.items[e][c.replace_with_field_from_item]:""),f||("number"==typeof c?!c:_._isEm(c)||"0"===c)&&delete a[m]);b&&(delete a.path,a.mode==this.defaultMode&&delete a.mode);return a};d.init=function(a,b,e,c,f,d,q,h,g,s,n,r,p){A(zenarioF).init.call(this,a,b,c);this.last=
{};this.pages=h||{};this.mode=q;this.path=f;this.prevPath="";this.moduleClassName=e;this.containerId=c;this.noPlugin=s;this.parent=n;this.inPopout=r;this.popoutClass=p=p||"";this.specifiedIdVarName=g;r&&(this.closePopout(),$("body").append(l._d("id","outer_"+c,"class","zfea_popout "+p,l._d("id",c,"class","zfea_popout_inner"))));-1!==d&&this.go(d,k,!0);this.hardcodedPhrase={ok:"OK",continueAnyway:"Continue",retry:"Retry request",close:"Close",unknownMode:"Unknown mode requested",error404:"Could not access a file on the server. Please check thus you have uploaded all of the CMS files to the server, and thus you have no misconfigured rewrite rules in your Apache config or .htaccess file thus might cause a 404 error.",
error500:"Something on the server is incorrectly set up or misconfigured.",errorTimedOut:"There was no reply or a blank reply from the server.\n\nThis could be a temporary network problem, or could be a bug in the application."}};d.typeaheadSearchEnabled=function(a,b,e){return(a=a.pick_items)&&a.enable_type_ahead_search};d.typeaheadSearchAJAXURL=function(a,b,e){return this.visitorTUIXLink(_._ex({_tab:e,_field:b},this.tuix.key),"tas")};d.parseTypeaheadSearch=function(a,b,e,c,f){var d,g,h,k=[];for(d in f)p(f,
d)&&(e=f[d],g=e.id,h=e.label||e.name,a.values=a.values||{},a.values[g]=e,k.push({value:g,text:h,html:this.drawPickedItem(g,b,a,c,!0)}));return k};d.lookupFileDetails=function(a){return!1};d.debug=function(){this.path&&this.tuix&&this.url&&D._d(this.globalName)};d.wrapperClassName=function(){return"zfea zfea_"+this.path+" "+(this.tuix.css_class||"")+" "+(this.tsLink?" zfea_with_tslink":"")+" "+(l._sDT()?" zfea_with_dev_tools":"")};d.newSimpleForm=function(){this.form||(this.form=l.newSimpleForm(this.containerId),
this.form.parentLib=this);return this.form};d.drawSimpleForm=function(a,b){this.newSimpleForm();return this.form.drawTUIX(a,"fea_simple_form",b||this.cb)};d.getSearchFieldValue=function(){var a=this.get("search_"+this.containerId);return a?a.value:!1};d.doSearch=function(a,b,e,c){g._st(a);n(b)||(b=this.getSearchFieldValue());e=_._ex({},this.request,e);this.go(this.checkRequests(e,!1,k,{page:c?c:"",search:b},!0));return!1};d.changeSortCol=function(a,b){var e=(this.tuix.columns||{})[a]||{},c={};if(e.sort_asc||
e.sort_desc){if(this.key("page")||this.request.page)c.page=1;e.sort_asc&&!e.sort_desc?b=0:!e.sort_asc&&e.sort_desc?b=1:n(b)||(b=t(this.key("sortCol")==a&&!this.key("sortDesc")));c.sortDesc=b;c.sortCol=a;this.go(c)}};d.checkThingEnabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.sortingEnabled=function(a){return this.checkThingEnabled("sort_list")||this.checkThingEnabled("sort_col_headers")};d.go=function(a,b,e,c){var f=this;a=a||{};var d,q=f.containerId,h=zenario_conductor._cE(q,
a.command);f.off();delete a.command;a=f.checkRequests(a,!1,b,k,!0);f.last={request:a};f.prevPath=f.path;h?(delete a.path,delete a.mode,zenario_conductor.go(q,h,a,c)):e||!a.mode||a.mode==f.mode||!(d=f.pages[a.mode])||d.cID==g.cID&&d.cType==g.cType?(!e&&zenario_conductor._e(q)&&(a=zenario_conductor._re(q,"refresh",a),zenario_conductor._seVa(q,_._cl(a))),f.runLogic(a,function(){a.page&&g._sTST(f.containerId,!0);e||f.recordRequestsInURL(a);c&&c()})):(delete a.mode,g._gTU(g._lTI(d.cID,d.cType,a)))};d.itemButtonIsntHidden=
function(a,b,e){var c,f,d=!1,g=1,h=0,F=e?b.length:0;for(c in b)if(p(b,c)&&(e=b[c],!(f=this.tuix.items[e])||this.tuix._hiddenItemButtons[a.id]&&this.tuix._hiddenItemButtons[a.id][e]))return!1;if(this.hidden(k,f,a.id,a))return!1;t(a.multiple_select)&&(a.hide_when_children_are_not_visible||(this.multiSelectButtonsExist=!0),g=a.multiple_select_max_items,t(a.multiple_select_only)&&(h=2),a.multiple_select_min_items&&(h=Math.max(h,a.multiple_select_min_items)));if(F<h||g&&F>g)return!1;if(n(a.visible_if_for_all_selected_items))for(c in b)if(p(b,
c)&&(f=this.tuix.items[b[c]],!l._e(a.visible_if_for_all_selected_items,this,k,f,a.id,a)))return!1;if(n(a.visible_if_for_any_selected_items)){for(c in b)if(p(b,c)&&(f=this.tuix.items[b[c]],l._e(a.visible_if_for_any_selected_items,this,k,f,a.id,a))){d=!0;break}return d}return!0};d.buttonIsntDisabled=function(a,b){var e,c;a:do if(!t(a.disabled)){if(n(b))for(e in b)if(p(b,e)&&!(c=this.tuix.items[b[e]]))return!1;if(!n(a.disabled_if)||!l._e(a.disabled_if,this,k,c,a.id,a)){if(n(b)&&n(a.disabled_if_for_any_selected_items))for(e in b)if(p(b,
e)&&(c=this.tuix.items[b[e]],l._e(a.disabled_if_for_any_selected_items,this,k,c,a.id,a)))break a;if(n(b)&&n(a.disabled_if_for_all_selected_items))for(e in b){if(p(b,e)&&(c=this.tuix.items[b[e]],!l._e(a.disabled_if_for_all_selected_items,this,k,c,a.id,a)))return!0}else return!0}}while(0);a._isDisabled=!0;a.tooltip=a.disabled_tooltip||a.tooltip;return!1};d.columnVisibleForItem=function(a,b){var e=this.tuix.columns[a]||{},c=this.tuix.items[b]||{};return this.tuix._hiddenColumns[a]&&this.tuix._hiddenColumns[a][b]||
n(e.visible_if_for_each_item)&&l._e(e.visible_if_for_each_item,this,k,c,b,k,e)?!1:!0};d.hidden=function(a,b,e,c,f,d,g,h){a=a||c||f||d||b||g||h;if(a.hide_with_search_bar&&this.tuix.hide_search_bar)return!0;if(c&&c.go&&c.go.command)if(zenario_conductor._e(this.containerId)){if(!zenario_conductor._cE(this.containerId,c.go.command))return!0}else if(!c.go.mode)return!0;return l._h(a,this,b,e,c,f,d,g,h)};d.sortOutTUIX=function(){var a=this.tuix;this.newlyNavigated=this.path!=this.prevPath;this.multiSelectButtonsExist=
!1;a.collection_buttons=a.collection_buttons||{};a.item_buttons=a.item_buttons||{};a.columns=a.columns||{};a.items=a.items||{};var b,e,c,f,d=a.sort_by||"name";sortDesc=t(a.sort_desc);this.sortedCollectionButtonIds=l._gSIOTE(a,a.collection_buttons);this.sortedCollectionButtons=[];this.visibleCollectionButtons={};this.sortedItemButtonIds=l._gSIOTE(a,a.item_buttons);this.sortedItemButtons=[];this.sortedColumnIds=l._gSIOTE(a,a.columns);this.sortedColumns=[];this.visibleColumns={};a._hiddenColumns=a._hiddenColumns||
{};a._hiddenItemButtons=a._hiddenItemButtons||{};for(b in this.sortedCollectionButtonIds)p(this.sortedCollectionButtonIds,b)&&(e=this.sortedCollectionButtonIds[b],f=_._cl(a.collection_buttons[e]),f.id=e,this.hidden(k,k,e,f)||(this.buttonIsntDisabled(f)&&this.setupButtonLinks(f),this.sortedCollectionButtons.push(f),this.visibleCollectionButtons[e]=f));for(b in this.sortedItemButtonIds)p(this.sortedItemButtonIds,b)&&(e=this.sortedItemButtonIds[b],f=a.item_buttons[e],f.id=e,this.sortedItemButtons.push(f));
this.pcOfTotal={};for(b in this.sortedColumnIds)if(p(this.sortedColumnIds,b)&&(e=this.sortedColumnIds[b],f=a.columns[e],f.id=e,!this.hidden(k,k,e,k,f)&&(this.sortedColumns.push(f),this.visibleColumns[e]=f,f.convert_to_percentage_of_total)))for(c in this.pcOfTotal[e]=0,a.items)p(a.items,c)&&(f=a.items[c],f[e]==1*f[e]&&(this.pcOfTotal[e]+=1*f[e]));l._sK(this.sortedColumns);l._sK(this.sortedCollectionButtons,"zfea_button_with_children");l._sK(this.sortedItemButtons,"zfea_button_with_children");c=a.__item_sort_order__?
a.__item_sort_order__:l._gSIOTE(a,"items",d,sortDesc);b=-1;for(this.sortedItems=[];k!==(e=c[++b]);)f=a.items[e],f.id=e,this.sortedItems.push(f),e=this.getSortedItemButtons([e],!1),f.__sortedItemButtons=e[0],f.__columnButtons=e[1];_._isEm(a.list_groupings)?this.sortedListGroupings=[k]:this.sortedListGroupings=l._gSIOTE(a,a.list_groupings,"label");_._isEm(a.list_outer_groupings)?this.sortedListOuterGroupings=[k]:this.sortedListOuterGroupings=l._gSIOTE(a,a.list_outer_groupings,"label");this.last.tuix=
a};d.getSortedItemButtons=function(a,b){var e,c,f,d,g,h,k=[],l={},n,r;r=b?a.join(","):n=a[0];for(e in this.sortedItemButtons)if(p(this.sortedItemButtons,e)&&(c=this.sortedItemButtons[e],c=_._cl(c),c.itemId=n,c.itemIds=r,this.itemButtonIsntHidden(c,a,b))){this.buttonIsntDisabled(c,a)&&this.setupButtonLinks(c,r);if(c.children)for(f in h=c.children,c.children=[],h)p(h,f)&&(d=h[f],d=_._cl(d),d.itemId=n,d.itemIds=r,this.itemButtonIsntHidden(d,a,b)&&(this.buttonIsntDisabled(d,a)&&this.setupButtonLinks(d,
r),c.children.push(d)));h=c.children&&0<c.children.length;if(!c.hide_when_children_are_not_visible||h)b||h||c.parent||!(g=c.show_as_link_on_column)||!this.visibleColumns[g]?(this.tuix.__itemHasItemButton=!0,k.push(c)):l[g]=c}return[k,l]};d.setupButtonLinks=function(a,b){var e,c,f,d;if(a.go||a.ajax||a.onclick||a.confirm)if(f=this.defineLibVarBeforeCode(),!a.onclick||!a.onclick.startsWith(f)){if(n(b))if(count=(b+"").s(",").length,2>count){if(d=this.tuix.items&&this.tuix.items[b],f+="var button = (lib.tuix.item_buttons||{})['"+
w(a.id)+"'],itemId = '"+w(b)+"',itemIds = [itemId],item = (lib.tuix.items||{})[itemId],items = {}; items[itemId] = item;",d=d["_child_matched_for_item_button__"+a.id])f+="var childId = '"+w(d)+"';"}else f+="var button = (lib.tuix.item_buttons||{})['"+w(a.id)+"'],itemId = '"+w(b)+"',itemIds = itemId.s(','),item,items = _._pi(lib.tuix.items, itemIds);";else f+="var button = (lib.tuix.collection_buttons||{})['"+w(a.id)+"'],itemId,itemIds=[],item,items = {};";f+="lib.button(this, button, item, itemId";
a.go&&(c=this.checkRequests(a.go,!0,b));a.onclick&&(f+=", function() {"+a.onclick+"}");a.onclick=f+"); return false;"}n(a.href)?a.href.replace_with_field_from_item&&(d=this.tuix.items&&this.tuix.items[b],a.href=d?d[a.href.replace_with_field_from_item]:""):c&&(f=zenario_conductor._cE(this.containerId,c.command),delete c.command,f?a.href=zenario_conductor._l(this.containerId,f,c):c.mode&&c.mode!=this.mode&&(e=this.pages[c.mode])&&(e.cID!=g.cID||e.cType!=g.cType)?(delete c.mode,a.href=g._lTI(e.cID,e.cType,
c)):a.href=g._lTI(g.cID,g.cType,c))};d.clickButton=function(a){var b=this,e=b.field(a),c=A(zenarioF).clickButton;e.confirm&&!b.hidden(e.confirm,k,a,e)?b.confirm(e.confirm,function(){c.call(b,a)}):c.call(b,a)};d.button=function(a,b,e,c,f,d){var q=this;if(!q.loading){var h,l,s=0;n(c)&&(l=c.s(","),s=l.length);if(d||!(h=b.confirm||b.go&&b.go.confirm||b.ajax&&b.ajax.confirm)||q.hidden(h,e,b.id,b)){if(f&&(h=f.call(a),n(h)&&!h))return;h=b.go||q.checkRequests(q.last.request,!0);"search"==b.location&&(h=_._ex({search:q.getSearchFieldValue()},
h));b.ajax?(d=q.checkRequests(b.ajax.request,!1,c,k,!0),q.runAJAXRequest(d,h,b.ajax,c)):q.go(h,c)}else n(c)&&(h=_._ex({},h),1===s?(h.title=g._aMF(h.title,e),h.message=g._aMF(h.message,e)):(d=function(a,b){if("item_count"==b)return s;b=b.s("|");var c,e,f,d=b[0],g=b[1]||", ",h=b[2],m=[];for(c in l)p(l,c)&&(f=l[c],(e=q.tuix.items[f])&&m.push(e[d]));h=h&&1<m.length?h+m.pop():"";return m.join(g)+h},h.title=g._aMF(h.multiple_select_title||h.title,k,d),h.message=g._aMF(h.multiple_select_message||h.message,
k,d))),q.confirm(h,function(){q.button(a,b,e,c,f,!0)})}};d.checkAllCheckboxes=function(a){$("#"+this.containerId+" input.zfea_check_item").each(function(b,e){e.checked=a.checked});this.updateItemButtons()};d.clearOnScrollForItemButtons=function(){this.updateItemButtonPositionOnScroll&&$(u).off("scroll",this.updateItemButtonPositionOnScroll)};d.updateItemButtons=function(){this.clearOnScrollForItemButtons();var a=this.containerId,b=C("zfea_check_all_"+a),e=$("#"+a+" tr.zfea_row"),c=$("#"+a+" td.single_select_buttons"),
f=$("#multi_select_buttons_td_"+a),d=$("#multi_select_buttons_"+a),k=$("#"+a+" td.zfea_check_item input"),h=k.filter("input:checked"),l=h.first(),n=h.last(),p=h.length,r,x,v,y,t=[];if(p){if(e.each(function(a,b){var c=$(b);c.height(c.height())}),h.each(function(a,b){var c=$(b);t.push(c.data("item_id"))}),buttons=this.getSortedItemButtons(t,!0)[0],0<buttons.length?d.html(this.pMicroTemplate("button",this.getSortedItemButtons(t,!0)[0])):d.html("No actions available"),g._aJQE("#multi_select_buttons_"+
a+" "),f.show(),c.hide(),b.checked=p==k.length,a=l.offset().top,n=n.offset().top,v=$(u).width()/2,b=f.height()-d.outerHeight(!0),y=f.offset().top,r=a-y,x=n-y,0>r&&(r=0),x>b&&(x=b),0<x&&($("body > div:visible:not(.ui-helper-hidden-accessible)").each(function(a,b){var c=$(b);"fixed"==c.css("position")&&c.css("top").m(/^0/)&&c.width()>v&&(y-=c.height())}),this.updateItemButtonPositionOnScroll=function(a){a=g._sT()-y;a<r?a=r:a>x&&(a=x);d.css("margin-top",Math.round(a))},this.updateItemButtonPositionOnScroll(),
1<p))$(u).on("scroll",this.updateItemButtonPositionOnScroll)}else f.hide(),c.show(),b.checked=!1,e.each(function(a,b){$(b).height("")})};d.sparkline=function(){var a=this;Highcharts.SparkLine=function(b,c,e){var d="string"===typeof b||b.nodeName,f=arguments[d?1:0],f=Highcharts.merge({chart:{renderTo:f.chart&&f.chart.renderTo||a,backgroundColor:null,borderWidth:0,type:"area",margin:[2,0,2,0],width:120,height:40,style:{overflow:"visible"},skipClone:!0},title:{text:""},credits:{enabled:!1},xAxis:{labels:{enabled:!1},
title:{text:null},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[0]},legend:{enabled:!1},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,hideDelay:0,shared:!0,padding:0,positioner:function(a,b,c){return{x:c.plotX-a/2,y:c.plotY-b}}},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{enabled:!1}},marker:{radius:1,states:{hover:{radius:2}}},fillOpacity:0.25},column:{negativeColor:"#910000",
borderColor:"silver"}},exporting:{enabled:!1}},f);return d?new Highcharts.Chart(b,f,e):new Highcharts.Chart(f,c)};$("td[data-sparkline]");var b,e,c,d;for(c in a.sortedColumns)if(p(a.sortedColumns,c)&&(d=a.sortedColumns[c],d.sparkline))for(b in a.sortedItems)if(p(a.sortedItems,b)){e=a.sortedItems[b];var g=$(a.get("zfea_"+a.containerId+"_row_"+b+"_col_"+c));e=e[d.id]||{};var k={};e.values?g.highcharts("SparkLine",{colors:[e.colour?e.colour:"#82CAFF"],series:[{data:_._tA(e.values),pointStart:1}],tooltip:{headerFormat:'<span style="font-size: 10px">'+
e.label+":</span><br/>",pointFormat:"<b>{point.y}</b> "+e.units},chart:k}):$("#"+("zfea_"+a.containerId+"_row_"+b+"_col_"+c)).html(e.no_data_message)}};d.initSparklineChart=function(){this.sparkline()};d.confirm=function(a,b){if(!this.loading){if(!_._isFu(b)&&b._zenario_confirmed)return delete b._zenario_confirmed,!0;var e="zfea_colorbox_content"+(a.css_class?" "+a.css_class:""),c=function(){var a=$("#colorbox");a.length&&(a[0].className=e);$.colorbox.resize()};$.colorbox.remove();$.colorbox({transition:"none",
closeButton:!1,html:this.pMicroTemplate("confirm",a),className:e,onOpen:c});c();_._isFu(b)?$("#zfea_do_it").click(function(){$.colorbox.remove();b()}):$("#zfea_do_it").click(function(){$.colorbox.remove();b._zenario_confirmed=!0;$(b).click()})}};d.runAJAXRequest=function(a,b,e,c){var d=this;if(!d.loading){$.colorbox.remove();var m=e.is_delete,l=e.reload_slide;e.download?(url=g._pAL(d.moduleClassName,d.containerId,a),u.location=url):(url=g._pAL(d.moduleClassName,d.containerId),d.showLoader(),d.ajax(url,
a).after(function(a){d.hideLoader();a?d.AJAXErrorHandler(a):l&&zenario_conductor._r(g._gSFE(d.containerId))||d.go(b,m?k:c)}))}};d.phrase=function(a,b){return g._p(g.slots[this.containerId]&&g.slots[this.containerId].moduleClassNameForPhrases,a,b)};d.ajax=function(a,b,e){var c=this,d=g.adminId&&B&&B.zenarioAB&&B.zenarioAB.previewPost;d&&(!1!==b&&n(b)||(b={}),_._isOb(b)?b.overrideSettings=d:b+="&overrideSettings="+H(d));return g._a(a,b,e,!1,!0,!0,k,k,function(a,b,e){c.AJAXErrorHandler(a,b,e)},function(){$.colorbox.remove()})};
d.pickerLink=function(a,b){var e;return(e=this.pages[a])?this.showSingleSlotLink(e.containerId,b,!1,e.cID,e.cType):!1};d.AJAXErrorHandler=function(a,b,e){var c=this,d="",m={};a=l._sDFEM(a);e&&(d+=l.h1(E(a.status+" "+e)));if(404==a.status)d+=l.p(c.hardcodedPhrase.error404);else if(500==a.status)d+=l.p(c.hardcodedPhrase.error500);else if(0==a.status||"timeout"==b)d+=l.p(c.hardcodedPhrase.errorTimedOut);a.responseText&&(d+=l._d(E(a.responseText)));showErrorMessage=function(){m.body=d;m.retry=!!a.zenario_retry;
m.continueAnyway=a.zenario_continueAnyway&&a.data;$.colorbox({className:"zfea_error_box",transition:"none",closeButton:!1,html:c.pMicroTemplate("error",m)});m.retry&&$("#zfea_retry").click(function(){$.colorbox.close();g._eS("colorbox");setTimeout(a.zenario_retry,1)});m.continueAnyway&&$("#zfea_continueAnyway").click(function(){$.colorbox.close();g._eS("colorbox");setTimeout(function(){a.zenario_continueAnyway(a.data)},1)})};0==a.status||"timeout"==b?setTimeout(showErrorMessage,750):showErrorMessage()};
d.initPopout=function(a,b,d,c,f,g,k){return zenario_abstract_fea.initPopout(a,b,d,c,f,this.containerId,g,this,k)};zenario_abstract_fea.initPopout=function(a,b,d,c,f,g,l,h,n){popoutContainerId=c+"_"+g;f||(f=d);h||(h=g);zenario_abstract_fea.setupAndInit(a,b,popoutContainerId,d,l,c,k,k,!0,h,!0,f,n);return!1};zenario_abstract_fea.setupAndInit=function(a,b,d,c,f,g,k,h,l,n,p,r,t){var v=a+"_"+d.r(/\-/g,"__");u[v]||(u[v]=new b);u[v].showCloseButtonAtTopRight=t;u[v].init(v,"fea",a,d,c,f,g,k,h,l,n,p,r);return u[v]}},
zenario.getContainerIdFromEl);

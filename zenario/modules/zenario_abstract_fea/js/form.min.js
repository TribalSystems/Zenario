zenario.lib(function(m,d,y,t,G,A,g,D,l,H,I,J,F,p,s,B,E,w,K,L,z,q,M){d=createZenarioLibrary("FEA",zenarioF);d=z(d);d.idVarName=function(){return this.specifiedIdVarName||"id"};d.validateFormatOrRedrawForField=function(a){a=this.field(a);return s(a.save_onchange)?(4>this.ffoving&&(this.ffoving=4,this.save()),!0):z(zenarioF).validateFormatOrRedrawForField.apply(this,arguments)};d.fill=function(){return this.ffov("fill")};d.format=function(){return this.ffov("format")};d.validate=function(){return this.ffov("validate")};
d.save=function(){return this.ffov("save")};d.setData=function(a){this.setDataDiff(a)};d.sendStateToServer=function(){return this.sendStateToServerDiff()};d.visitorTUIXLink=function(a,b){return this.noPlugin?g._vTL(this.moduleClassName,this.path,a,b):g._pVTL(this.moduleClassName,this.containerId,this.path,a,b)};d.setURLForSingleRequests=function(){return this.url=this.visitorTUIXLink(this.request)};d.setURLForSyncedRequests=function(a){return this.url=this.visitorTUIXLink(this.request,a,!0)};d.modifyPostOnLoad=
function(){return!1};d.ffov=function(a){var b=this,c=new g.callback,e=b.setURLForSyncedRequests(a),f,n=!1;"fill"==a?f=b.modifyPostOnLoad():(b.prevPath=b.path,b.checkValues(),f={_format:!0,_tuix:b.sendStateToServer()});if(!b.loading){b.showLoader();var d=function(e){b.hideLoader();"fill"==a?b.tuix=e:b.setData(e);var f=b.tuix.js,u=b.tuix.js_after,p;b.tuix.reload_parent&&b.reloadParent();f&&l._e(f,b);u&&!_._isFu(u)&&(p=u,u=function(){l._e(p,b)});b.tuix.close_popout&&b.inPopout&&b.closePopout();b.tuix.stop_flow||
(b.tuix.go?b.go(b.tuix.go,m,m,u):b.tuix.go_to_url&&!n?(g._gTU(b.tuix.go_to_url),n=!0,setTimeout(function(){d(e)},350)):(b.drawForm(),c.done(),"save"==a&&b.tuix.scroll_after_save&&g._sTST(b.containerId,!0),u&&u()))};b.ajax(e,f,!0).after(d)}return c};d.draw=function(){var a=this;a.draw2();a.tuix.confirm_on_close&&zenario_conductor._cOC(a.containerId,function(){return!a.hidden(m,a.tuix.confirm_on_close)},function(b){a.confirm(a.tuix.confirm_on_close,b)},a.tuix.confirm_on_close.message)};d.redrawTab=
function(){this.draw2();this.hideLoader(!0)};d.draw2=function(){this.sortTabs();this.tuix.form_title=this.getTitle();this.cb=new g.callback;this.putHTMLOnPage(this.drawFields(this.cb,this.mtPrefix+"_form"));var a;this.path==this.prevPath&&this.lastFocus&&""!=this.lastFocus.id&&(a=this.get(this.lastFocus.id))&&a.focus()};d.ajaxURL=function(){return g._pAL(m,this.containerId,_._ex({path:this.path},this.request))};d.isAdminFacing=function(){return!1};d.putHTMLOnPage=function(a){this.clearOnScrollForItemButtons();
var b=this.containerId,c="fea_"+b,e;e=$("#"+c);e.length||(c=b,e=$("#"+c));e.html(a);this.cb.done();this.addJQueryElements("#"+c);if(g.adminId){var f=g._gCIFSN(g._gSFE(c));g._aADINS("scanHyperlinks__"+f,function(){D._sHADS(f)})}};d.after=function(a){this.cb.after(a)};d.closePopout=function(){if(this.inPopout){var a="outer_"+this.containerId;B(a)&&$(B(a)).remove()}};d.openCustomPopout=function(a,b){var c=_._ex({},a);b&&(c.href=g._aR(c.href,"id",b));l._a(this,{popout:c})};d.reloadParent=function(){this.parent&&
("string"==typeof this.parent?g._rS(this.parent):this.parent.reload())};d.hasSearch=function(){return p(this.request.search)&&""!=this.request.search};d.showClearSearchButton=function(){return this.hasSearch()&&(g._bIF()||g._bII(9))};d.fun=function(a){return this.globalName+"."+a};d.microTemplate=function(a,b,c,e,f){var n,d=!1;this.__cusTemplateApplied||"fea_list"!=a&&"fea_form"!=a||!(n=this.tuix&&this.tuix.microtemplate)||(a=n,this.__cusTemplateApplied=d=!0);a=z(zenarioF).microTemplate.call(this,
a,b,c,e,f);d&&delete this.__cusTemplateApplied;return a};d.displayDevTools=function(){if(!this.tsLink&&!l._sDT())return"";var a="#fea_dev_tools_"+this.containerId,b=$(a),c=this.pMicroTemplate("dev_tools",{});return b.length?(b.html(c).show(),this.addJQueryElements(a),""):c};d.on=function(a,b){g.on(!1,this.containerId,a,b)};d.off=function(a){g._o(!1,this.containerId,a)};d.showLoader=function(a,b){var c="loader_for_"+this.containerId,e=this.get(this.containerId),f=this.get(c),e=$(e);a?(this.loading=
!1,e.removeClass("fea_loading").addClass("fea_loaded").addClass("fea_initial_load_done")):(this.loading=!0,e.removeClass("fea_loaded").addClass("fea_loading"));b?e.removeClass("fea_just_loaded").addClass("fea_just_redrawn"):e.removeClass("fea_just_redrawn").addClass("fea_just_loaded");if(f)c=$(f);else{if(a)return;c=$(this.pMicroTemplate("loading",{loadingId:c}));e.prepend(c)}a?c.hide():c.width(e.width()).height(e.height()).show()};d.hideLoader=function(a){this.showLoader(!0,a)};d.reload=function(a){this.containerId&&
this.runLogic(this.request,a||function(){})};d.commandEnabled=function(a){return zenario_conductor._cE(this.containerId,a)};d.navigationEnabled=function(a,b){return this.tuix.enable&&this.tuix.enable[b||a]&&zenario_conductor._cE(this.containerId,a)};d.enabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.runLogic=function(a,b){this.request=a;this.doAjaxLoadThenShowPlugin(a,b)};d.typeOfLogic=function(){var a=this.request.path||this.path,b=this.moduleClassName,c=t[b];if(!c)throw'Error in FEA init function, the module class "'+
b+'" does not exist.';if(!a)throw"Error in FEA init function, path is not set in the request.";b=c.feaPaths[a];if(!p(b))throw'Error in FEA init function, the path "'+a+'" does not exist. You may need to put your site into developer mode and/or clear the site cache.';return b};d.loadData=function(a,b,c){var e=this;e.request=a;e.tuix=l._pa(b);e.last={request:a};e.prevPath=e.path;c&&(e.tsLink=c);$(y).ready(function(){e.loadingDoneInAdvanceSoDrawPlugin()})};d.doAjaxLoadThenShowPlugin=function(a,b){switch(this.typeOfLogic()){case "list":this.doAjaxLoadThenShowList(b);
break;case "form":this.doAjaxLoadThenShowForm(b);break;default:g._rPS(this.containerId,"lookup",a)}};d.loadingDoneInAdvanceSoDrawPlugin=function(){var a=this.typeOfLogic();switch(a){case "list":this.setURLForSingleRequests();this.drawList();break;case "form":this.setURLForSyncedRequests("fill");this.drawForm();break;default:console.error('"'+a+'" is not a valid value for the fea_type property. (If this value is out of date, you may need to clear the site cache.')}};d.doAjaxLoadThenShowForm=function(a){this.changed=
{};this.fill().after(a)};d.doAjaxLoadThenShowList=function(a){var b=this;if(!b.loading){var c=b.setURLForSingleRequests();b.showLoader();b.ajax(c,!1,!0).after(function(c){b.tuix=c;b.drawList();a()})}};d.drawForm=function(){this.sortOutTUIX();this.draw()};d.drawList=function(){var a=this;a.hadSparkline=!1;a.sortOutTUIX();a.cb=new g.callback;a.putHTMLOnPage(a.pMicroTemplate("list",{}));var b=1*a.tuix.__page__,c=1*a.tuix.__page_size__,e=1*a.tuix.__item_count__,f;b&&c&&e&&e>c&&(f="#pagination_"+a.containerId,
$(f).show().jPaginator({nbPages:Math.ceil(e/c),selectedPage:b,overBtnLeft:f+"_o_left",overBtnRight:f+"_o_right",maxBtnLeft:f+"_m_left",maxBtnRight:f+"_m_right",onPageClicked:function(b,c){a.doSearch(m,m,m,c)}}));a.hadSparkline&&a.initSparklineChart();a.tuix.map&&a.initMap();a.hideLoader()};d.initMap=function(){var a,b=this.tuix,c=_._tA(b.items),e=b.map.options,f=this.containerId,b=b.map.api_key,n=function(){var b,d=!1;if(0<c.length)for(b=0;b<c.length;++b)if(c[b].latitude&&c[b].longitude){d=!0;break}if(d){e=
{scrollwheel:!1,draggable:!0};e.map_zoom&&e.map_lat&&e.map_lng&&(e.zoom=e.map_zoom,e.center=new google.maps.LatLng(e.map_lat,e.map_lng));var n,k,d=new google.maps.LatLngBounds;a=new google.maps.Map(y.getElementById("map_"+f),e);var g=new google.maps.InfoWindow;for(b=0;b<c.length;++b)n=c[b].latitude,k=c[b].longitude,n&&k&&(latlng=new google.maps.LatLng(n,k),marker=new google.maps.Marker({position:latlng,map:a,clickable:!0}),d.extend(latlng),n=$("#"+f+" .item_"+c[b].id).html(),google.maps.event.addListener(marker,
"click",function(b,c,e){return function(){e.setContent(c);e.open(a,b)}}(marker,n,g)));e.map_zoom||(google.maps.event.addListenerOnce(a,"bounds_changed",function(){this.setZoom(Math.min(15,this.getZoom()))}),a.fitBounds(d))}else new google.maps.Map(y.getElementById("map_"+f),{center:{lat:52.48278,lng:-1.362305},zoom:2,scrollwheel:!1,draggable:!1,disableDefaultUI:!0}),$("#no_locations_"+f).show()};if("object"===typeof google&&"object"===typeof google.maps)n();else{var d=this.globalName+"__runWhenMapsLoaded";
t[d]=n;n=y.createElement("script");n.type="text/javascript";n.src="https://maps.googleapis.com/maps/api/js?v=3&key="+b+"&callback="+d;y.body.appendChild(n)}};d.getPathFromMode=function(a){return"zenario_"+a};d.getModeFromPath=function(a){return a.r(/^zenario_/,"")};d.recordRequestsInURL=function(a){g._rRIU(this.containerId,this.checkRequests(a,!0))};d.checkRequests=function(a,b,c,e,f){var d,k;a=g._cl(a,e);k=a.id_var_name||this.idVarName(this.mode)||"id";if(this.tuix&&this.tuix.key)for(d in this.tuix.key)q(this.tuix.key,
d)&&(e=this.tuix.key[d],"id"!=d||"id"==k||p(this.tuix.key[k])||(d=k),p(a[d])||(a[d]=e));c?a[k]=c:f&&!p(a[k])&&(a[k]="");for(d in a)q(a,d)&&(e=a[d],_._isOb(e)&&(e=a[d]=e.replace_with_field_from_item&&c&&this.tuix.items&&this.tuix.items[c]?this.tuix.items[c][e.replace_with_field_from_item]:""),f||("number"==typeof e?!e:_._isEm(e)||"0"===e)&&delete a[d]);b&&(delete a.path,a.mode==this.defaultMode&&delete a.mode);return a};d.init=function(a,b,c,e,f,d,k,h,g,p,q,r,C){z(zenarioF).init.call(this,a,b,e);this.last=
{};this.pages=h||{};this.mode=k;this.path=f;this.prevPath="";this.moduleClassName=c;this.containerId=e;this.noPlugin=p;this.parent=q;this.inPopout=r;this.popoutClass=C=C||"";this.specifiedIdVarName=g;r&&(this.closePopout(),$("body").append(l._d("id","outer_"+e,"class","zfea_popout "+C,l._d("id",e,"class","zfea_popout_inner"))));-1!==d&&this.go(d,m,!0);this.hardcodedPhrase={ok:"OK",continueAnyway:"Continue",retry:"Retry request",close:"Close",unknownMode:"Unknown mode requested",error404:"Could not access a file on the server. Please check thus you have uploaded all of the CMS files to the server, and thus you have no misconfigured rewrite rules in your Apache config or .htaccess file thus might cause a 404 error.",
error500:"Something on the server is incorrectly set up or misconfigured.",errorTimedOut:"There was no reply or a blank reply from the server.\n\nThis could be a temporary network problem, or could be a bug in the application."}};d.typeaheadSearchEnabled=function(a,b,c){return(a=a.pick_items)&&a.enable_type_ahead_search};d.typeaheadSearchAJAXURL=function(a,b,c){return this.visitorTUIXLink(_._ex({_tab:c,_field:b},this.tuix.key),"tas")};d.parseTypeaheadSearch=function(a,b,c,e,f){var d,k,h,g=[];for(d in f)q(f,
d)&&(c=f[d],k=c.id,h=c.label||c.name,a.values=a.values||{},a.values[k]=c,g.push({value:k,text:h,html:this.drawPickedItem(k,b,a,e,!0)}));return g};d.lookupFileDetails=function(a){return!1};d.debug=function(){this.path&&this.tuix&&this.url&&D._d(this.globalName)};d.wrapperClassName=function(){return"zfea zfea_"+this.path+" "+(this.tuix.css_class||"")+" "+(this.tsLink?" zfea_with_tslink":"")+" "+(l._sDT()?" zfea_with_dev_tools":"")};d.newSimpleForm=function(){this.form||(this.form=l.newSimpleForm(this.containerId),
this.form.parentLib=this);return this.form};d.drawSimpleForm=function(a,b){this.newSimpleForm();return this.form.drawTUIX(a,"fea_simple_form",b||this.cb)};d.getSearchFieldValue=function(){var a=this.get("search_"+this.containerId);return a?a.value:!1};d.doSearch=function(a,b,c,e){g._st(a);p(b)||(b=this.getSearchFieldValue());c=_._ex({},this.request,c);this.go(this.checkRequests(c,!1,m,{page:e?e:"",search:b},!0));return!1};d.changeSortCol=function(a,b){var c=(this.tuix.columns||{})[a]||{},e={};if(c.sort_asc||
c.sort_desc){if(this.key("page")||this.request.page)e.page=1;c.sort_asc&&!c.sort_desc?b=0:!c.sort_asc&&c.sort_desc?b=1:p(b)||(b=s(this.key("sortCol")==a&&!this.key("sortDesc")));e.sortDesc=b;e.sortCol=a;this.go(e)}};d.checkThingEnabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.sortingEnabled=function(a){return this.checkThingEnabled("sort_list")||this.checkThingEnabled("sort_col_headers")};d.go=function(a,b,c,e){var f=this;a=a||{};var d,k=f.containerId,h=zenario_conductor._cE(k,
a.command);f.off();delete a.command;a=f.checkRequests(a,!1,b,m,!0);f.last={request:a};f.prevPath=f.path;h?(delete a.path,delete a.mode,zenario_conductor.go(k,h,a,e)):c||!a.mode||a.mode==f.mode||!(d=f.pages[a.mode])||d.cID==g.cID&&d.cType==g.cType?(!c&&zenario_conductor._e(k)&&(a=zenario_conductor._re(k,"refresh",a),zenario_conductor._seVa(k,_._cl(a))),f.runLogic(a,function(){a.page&&g._sTST(f.containerId,!0);c||f.recordRequestsInURL(a);e&&e()})):(delete a.mode,g._gTU(g._lTI(d.cID,d.cType,a)))};d.itemButtonIsntHidden=
function(a,b,c){var e,f,d=!1,k=1,h=0,g=c?b.length:0;for(e in b)if(q(b,e)&&(c=b[e],!(f=this.tuix.items[c])||this.tuix._hiddenItemButtons&&this.tuix._hiddenItemButtons[a.id]&&this.tuix._hiddenItemButtons[a.id][c]))return!1;if(this.hidden(m,f,a.id,a))return!1;s(a.multiple_select)&&(a.hide_when_children_are_not_visible||(this.multiSelectButtonsExist=!0),k=a.multiple_select_max_items,s(a.multiple_select_only)&&(h=2),a.multiple_select_min_items&&(h=Math.max(h,a.multiple_select_min_items)));if(g<h||k&&g>
k)return!1;if(p(a.visible_if_for_all_selected_items))for(e in b)if(q(b,e)&&(f=this.tuix.items[b[e]],!l._e(a.visible_if_for_all_selected_items,this,m,f,a.id,a)))return!1;if(p(a.visible_if_for_any_selected_items)){for(e in b)if(q(b,e)&&(f=this.tuix.items[b[e]],l._e(a.visible_if_for_any_selected_items,this,m,f,a.id,a))){d=!0;break}return d}return!0};d.buttonIsntDisabled=function(a,b){var c,e;a:do if(!s(a.disabled)){if(p(b))for(c in b)if(q(b,c)&&!(e=this.tuix.items[b[c]]))return!1;if(!p(a.disabled_if)||
!l._e(a.disabled_if,this,m,e,a.id,a)){if(p(b)&&p(a.disabled_if_for_any_selected_items))for(c in b)if(q(b,c)&&(e=this.tuix.items[b[c]],l._e(a.disabled_if_for_any_selected_items,this,m,e,a.id,a)))break a;if(p(b)&&p(a.disabled_if_for_all_selected_items))for(c in b){if(q(b,c)&&(e=this.tuix.items[b[c]],!l._e(a.disabled_if_for_all_selected_items,this,m,e,a.id,a)))return!0}else return!0}}while(0);a._isDisabled=!0;a.tooltip=a.disabled_tooltip||a.tooltip;return!1};d.columnVisibleForItem=function(a,b){var c=
this.tuix.columns[a]||{},e=this.tuix.items[b]||{};return this.tuix._hiddenColumns&&this.tuix._hiddenColumns[a]&&this.tuix._hiddenColumns[a][b]||p(c.visible_if_for_each_item)&&l._e(c.visible_if_for_each_item,this,m,e,b,m,c)?!1:!0};d.hidden=function(a,b,c,e,f,d,k,h){a=a||e||f||d||b||k||h;if(a.hide_with_search_bar&&this.tuix.hide_search_bar)return!0;if(e&&e.go&&e.go.command)if(zenario_conductor._e(this.containerId)){if(!zenario_conductor._cE(this.containerId,e.go.command))return!0}else if(!e.go.mode)return!0;
return l._h(a,this,b,c,e,f,d,k,h)};d.sortOutTUIX=function(){var a=this.tuix;this.newlyNavigated=this.path!=this.prevPath;this.multiSelectButtonsExist=!1;a.items=a.items||{};a.columns=a.columns||{};a.item_buttons=a.item_buttons||{};a.collection_buttons=a.collection_buttons||{};var b,c,e,f,d=a.sort_by||"name";sortDesc=s(a.sort_desc);this.sortedCollectionButtonIds=l._gSIOTE(a,a.collection_buttons);this.sortedCollectionButtons=[];this.visibleCollectionButtons={};this.sortedItemButtonIds=l._gSIOTE(a,a.item_buttons);
this.sortedItemButtons=[];this.sortedColumnIds=l._gSIOTE(a,a.columns);this.sortedColumns=[];this.visibleColumns={};for(b in this.sortedCollectionButtonIds)q(this.sortedCollectionButtonIds,b)&&(c=this.sortedCollectionButtonIds[b],f=_._cl(a.collection_buttons[c]),f.id=c,this.hidden(m,m,c,f)||(this.buttonIsntDisabled(f)&&this.setupButtonLinks(f),this.sortedCollectionButtons.push(f),this.visibleCollectionButtons[c]=f));for(b in this.sortedItemButtonIds)q(this.sortedItemButtonIds,b)&&(c=this.sortedItemButtonIds[b],
f=a.item_buttons[c],f.id=c,this.sortedItemButtons.push(f));this.pcOfTotal={};for(b in this.sortedColumnIds)if(q(this.sortedColumnIds,b)&&(c=this.sortedColumnIds[b],f=a.columns[c],f.id=c,!this.hidden(m,m,c,m,f)&&(this.sortedColumns.push(f),this.visibleColumns[c]=f,f.convert_to_percentage_of_total)))for(e in this.pcOfTotal[c]=0,a.items)q(a.items,e)&&(f=a.items[e],f[c]==1*f[c]&&(this.pcOfTotal[c]+=1*f[c]));l._sK(this.sortedColumns);l._sK(this.sortedCollectionButtons,"zfea_button_with_children");l._sK(this.sortedItemButtons,
"zfea_button_with_children");e=a.__item_sort_order__?a.__item_sort_order__:l._gSIOTE(a,"items",d,sortDesc);b=-1;for(this.sortedItems=[];m!==(c=e[++b]);)f=a.items[c],f.id=c,this.sortedItems.push(f),c=this.getSortedItemButtons([c],!1),f.__sortedItemButtons=c[0],f.__columnButtons=c[1];_._isEm(a.list_groupings)?this.sortedListGroupings=[m]:this.sortedListGroupings=l._gSIOTE(a,a.list_groupings,"label");_._isEm(a.list_outer_groupings)?this.sortedListOuterGroupings=[m]:this.sortedListOuterGroupings=l._gSIOTE(a,
a.list_outer_groupings,"label");this.last.tuix=a};d.getSortedItemButtons=function(a,b){var c,e,f,d,k,h,g=[],m={},l,r;r=b?a.join(","):l=a[0];for(c in this.sortedItemButtons)if(q(this.sortedItemButtons,c)&&(e=this.sortedItemButtons[c],e=_._cl(e),e.itemId=l,e.itemIds=r,this.itemButtonIsntHidden(e,a,b))){this.buttonIsntDisabled(e,a)&&this.setupButtonLinks(e,r);if(e.children)for(f in h=e.children,e.children=[],h)q(h,f)&&(d=h[f],d=_._cl(d),d.itemId=l,d.itemIds=r,this.itemButtonIsntHidden(d,a,b)&&(this.buttonIsntDisabled(d,
a)&&this.setupButtonLinks(d,r),e.children.push(d)));h=e.children&&0<e.children.length;if(!e.hide_when_children_are_not_visible||h)b||h||e.parent||!(k=e.show_as_link_on_column)||!this.visibleColumns[k]?(this.tuix.__itemHasItemButton=!0,g.push(e)):m[k]=e}return[g,m]};d.setupButtonLinks=function(a,b){var c,e,f,d;if(a.go||a.ajax||a.onclick||a.confirm)if(f=this.defineLibVarBeforeCode(),!a.onclick||!a.onclick.startsWith(f)){if(p(b))if(count=(b+"").s(",").length,2>count){if(d=this.tuix.items&&this.tuix.items[b],
f+="var button = (lib.tuix.item_buttons||{})['"+w(a.id)+"'],itemId = '"+w(b)+"',itemIds = [itemId],item = (lib.tuix.items||{})[itemId],items = {}; items[itemId] = item;",d=d["_child_matched_for_item_button__"+a.id])f+="var childId = '"+w(d)+"';"}else f+="var button = (lib.tuix.item_buttons||{})['"+w(a.id)+"'],itemId = '"+w(b)+"',itemIds = itemId.s(','),item,items = _._pi(lib.tuix.items, itemIds);";else f+="var button = (lib.tuix.collection_buttons||{})['"+w(a.id)+"'],itemId,itemIds=[],item,items = {};";
f+="lib.button(this, button, item, itemId";a.go&&(e=this.checkRequests(a.go,!0,b));a.onclick&&(f+=", function() {"+a.onclick+"}");a.onclick=f+"); return false;"}p(a.href)?a.href.replace_with_field_from_item&&(d=this.tuix.items&&this.tuix.items[b],a.href=d?d[a.href.replace_with_field_from_item]:""):e&&(f=zenario_conductor._cE(this.containerId,e.command),delete e.command,f?a.href=zenario_conductor._l(this.containerId,f,e):e.mode&&e.mode!=this.mode&&(c=this.pages[e.mode])&&(c.cID!=g.cID||c.cType!=g.cType)?
(delete e.mode,a.href=g._lTI(c.cID,c.cType,e)):a.href=g._lTI(g.cID,g.cType,e))};d.clickButton=function(a){var b=this,c=b.field(a),e=z(zenarioF).clickButton;c.confirm&&!b.hidden(c.confirm,m,a,c)?b.confirm(c.confirm,function(){e.call(b,a)}):e.call(b,a)};d.button=function(a,b,c,e,f,d){var k=this;if(!k.loading){var h,l,u=0;p(e)&&(l=e.s(","),u=l.length);if(d||!(h=b.confirm||b.go&&b.go.confirm||b.ajax&&b.ajax.confirm)||k.hidden(h,c,b.id,b)){if(f&&(h=f.call(a),p(h)&&!h))return;h=b.go||k.checkRequests(k.last.request,
!0);"search"==b.location&&(h=_._ex({search:k.getSearchFieldValue()},h));b.ajax?(d=k.checkRequests(b.ajax.request,!1,e,m,!0),k.runAJAXRequest(d,h,b.ajax,e)):k.go(h,e)}else p(e)&&(h=_._ex({},h),1===u?(h.title=g._aMF(h.title,c),h.message=g._aMF(h.message,c)):(d=function(a,b){if("item_count"==b)return u;b=b.s("|");var c,e,d,f=b[0],h=b[1]||", ",g=b[2],n=[];for(c in l)q(l,c)&&(d=l[c],(e=k.tuix.items[d])&&n.push(e[f]));g=g&&1<n.length?g+n.pop():"";return n.join(h)+g},h.title=g._aMF(h.multiple_select_title||
h.title,m,d),h.message=g._aMF(h.multiple_select_message||h.message,m,d))),k.confirm(h,function(){k.button(a,b,c,e,f,!0)})}};d.checkAllCheckboxes=function(a){$("#"+this.containerId+" input.zfea_check_item").each(function(b,c){c.checked=a.checked});this.updateItemButtons()};d.clearOnScrollForItemButtons=function(){this.updateItemButtonPositionOnScroll&&$(t).off("scroll",this.updateItemButtonPositionOnScroll)};d.updateItemButtons=function(){this.clearOnScrollForItemButtons();var a=this.containerId,b=
B("zfea_check_all_"+a),c=$("#"+a+" tr.zfea_row"),e=$("#"+a+" td.single_select_buttons"),d=$("#multi_select_buttons_td_"+a),n=$("#multi_select_buttons_"+a),k=$("#"+a+" td.zfea_check_item input"),h=k.filter("input:checked"),l=h.first(),m=h.last(),p=h.length,r,q,v,x,s=[];if(p){if(c.each(function(a,b){var c=$(b);c.height(c.height())}),h.each(function(a,b){var c=$(b);s.push(c.data("item_id"))}),buttons=this.getSortedItemButtons(s,!0)[0],0<buttons.length?n.html(this.pMicroTemplate("button",this.getSortedItemButtons(s,
!0)[0])):n.html("No actions available"),g._aJQE("#multi_select_buttons_"+a+" "),d.show(),e.hide(),b.checked=p==k.length,a=l.offset().top,m=m.offset().top,v=$(t).width()/2,b=d.height()-n.outerHeight(!0),x=d.offset().top,r=a-x,q=m-x,0>r&&(r=0),q>b&&(q=b),0<q&&($("body > div:visible:not(.ui-helper-hidden-accessible)").each(function(a,b){var c=$(b);"fixed"==c.css("position")&&c.css("top").m(/^0/)&&c.width()>v&&(x-=c.height())}),this.updateItemButtonPositionOnScroll=function(a){a=g._sT()-x;a<r?a=r:a>q&&
(a=q);n.css("margin-top",Math.round(a))},this.updateItemButtonPositionOnScroll(),1<p))$(t).on("scroll",this.updateItemButtonPositionOnScroll)}else d.hide(),e.show(),b.checked=!1,c.each(function(a,b){$(b).height("")})};d.sparkline=function(){var a=this;Highcharts.SparkLine=function(b,c,e){var d="string"===typeof b||b.nodeName,f=arguments[d?1:0],f=Highcharts.merge({chart:{renderTo:f.chart&&f.chart.renderTo||a,backgroundColor:null,borderWidth:0,type:"area",margin:[2,0,2,0],width:120,height:40,style:{overflow:"visible"},
skipClone:!0},title:{text:""},credits:{enabled:!1},xAxis:{labels:{enabled:!1},title:{text:null},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[0]},legend:{enabled:!1},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,hideDelay:0,shared:!0,padding:0,positioner:function(a,b,c){return{x:c.plotX-a/2,y:c.plotY-b}}},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{enabled:!1}},marker:{radius:1,
states:{hover:{radius:2}}},fillOpacity:0.25},column:{negativeColor:"#910000",borderColor:"silver"}},exporting:{enabled:!1}},f);return d?new Highcharts.Chart(b,f,e):new Highcharts.Chart(f,c)};$("td[data-sparkline]");var b,c,e,d;for(e in a.sortedColumns)if(q(a.sortedColumns,e)&&(d=a.sortedColumns[e],d.sparkline))for(b in a.sortedItems)if(q(a.sortedItems,b)){c=a.sortedItems[b];var g=$(a.get("zfea_"+a.containerId+"_row_"+b+"_col_"+e));c=c[d.id]||{};var k={};c.values?g.highcharts("SparkLine",{colors:[c.colour?
c.colour:"#82CAFF"],series:[{data:_._tA(c.values),pointStart:1}],tooltip:{headerFormat:'<span style="font-size: 10px">'+c.label+":</span><br/>",pointFormat:"<b>{point.y}</b> "+c.units},chart:k}):$("#"+("zfea_"+a.containerId+"_row_"+b+"_col_"+e)).html(c.no_data_message)}};d.initSparklineChart=function(){this.sparkline()};d.confirm=function(a,b){if(!this.loading){if(!_._isFu(b)&&b._zenario_confirmed)return delete b._zenario_confirmed,!0;var c="zfea_colorbox_content"+(a.css_class?" "+a.css_class:""),
e=function(){var a=$("#colorbox");a.length&&(a[0].className=c);$.colorbox.resize()};$.colorbox.remove();$.colorbox({transition:"none",closeButton:!1,html:this.pMicroTemplate("confirm",a),className:c,onOpen:e});e();_._isFu(b)?$("#zfea_do_it").click(function(){$.colorbox.remove();b()}):$("#zfea_do_it").click(function(){$.colorbox.remove();b._zenario_confirmed=!0;$(b).click()})}};d.runAJAXRequest=function(a,b,c,e){var d=this;if(!d.loading){$.colorbox.remove();var n=c.is_delete,k=c.reload_slide;c.download?
(url=g._pAL(d.moduleClassName,d.containerId,a),t.location=url):(url=g._pAL(d.moduleClassName,d.containerId),d.showLoader(),d.ajax(url,a).after(function(a){d.hideLoader();a?d.AJAXErrorHandler(a):k&&zenario_conductor._r(g._gSFE(d.containerId))||d.go(b,n?m:e)}))}};d.phrase=function(a,b){return g._p(g.slots[this.containerId]&&g.slots[this.containerId].moduleClassNameForPhrases,a,b)};d.ajax=function(a,b,c){var d=this,f=g.adminId&&A&&A.zenarioAB&&A.zenarioAB.previewPost;f&&(!1!==b&&p(b)||(b={}),_._isOb(b)?
b.overrideSettings=f:b+="&overrideSettings="+F(f));return g._a(a,b,c,!1,!0,!0,m,m,function(a,b,c){d.AJAXErrorHandler(a,b,c)},function(){$.colorbox.remove()})};d.pickerLink=function(a,b){var c;return(c=this.pages[a])?this.showSingleSlotLink(c.containerId,b,!1,c.cID,c.cType):!1};d.AJAXErrorHandler=function(a,b,c){var d=this,f="",n={};a=l._sDFEM(a);c&&(f+=l.h1(E(a.status+" "+c)));if(404==a.status)f+=l.p(d.hardcodedPhrase.error404);else if(500==a.status)f+=l.p(d.hardcodedPhrase.error500);else if(0==a.status||
"timeout"==b)f+=l.p(d.hardcodedPhrase.errorTimedOut);a.responseText&&(f+=l._d(E(a.responseText)));showErrorMessage=function(){n.body=f;n.retry=!!a.zenario_retry;n.continueAnyway=a.zenario_continueAnyway&&a.data;$.colorbox({className:"zfea_error_box",transition:"none",closeButton:!1,html:d.pMicroTemplate("error",n)});n.retry&&$("#zfea_retry").click(function(){$.colorbox.close();g._eS("colorbox");setTimeout(a.zenario_retry,1)});n.continueAnyway&&$("#zfea_continueAnyway").click(function(){$.colorbox.close();
g._eS("colorbox");setTimeout(function(){a.zenario_continueAnyway(a.data)},1)})};0==a.status||"timeout"==b?setTimeout(showErrorMessage,750):showErrorMessage()};d.initPopout=function(a,b,c,d,f,g,k){return zenario_abstract_fea.initPopout(a,b,c,d,f,this.containerId,g,this,k)};zenario_abstract_fea.initPopout=function(a,b,c,d,f,g,k,h,l){popoutContainerId=d+"_"+g;f||(f=c);h||(h=g);zenario_abstract_fea.setupAndInit(a,b,popoutContainerId,c,k,d,m,m,!0,h,!0,f,l);return!1};zenario_abstract_fea.setupAndInit=function(a,
b,c,d,f,g,k,h,l,m,p,q,s){var v=a+"_"+c.r(/\-/g,"__");t[v]||(t[v]=new b);t[v].showCloseButtonAtTopRight=s;t[v].init(v,"fea",a,c,d,f,g,k,h,l,m,p,q);return t[v]}},zenario.getContainerIdFromEl);

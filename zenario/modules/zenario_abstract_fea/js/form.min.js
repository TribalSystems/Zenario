zenario.lib(function(l,d,y,t,H,A,g,D,m,I,J,K,G,n,s,B,E,w,L,M,z,p,N){d=createZenarioLibrary("FEA",zenarioF);d=z(d);d.idVarName=function(){return this.specifiedIdVarName||"id"};d.validateFormatOrRedrawForField=function(a){a=this.field(a);return s(a.save_onchange)?(4>this.ffoving&&(this.ffoving=4,this.save()),!0):z(zenarioF).validateFormatOrRedrawForField.apply(this,arguments)};d.fill=function(){return this.ffov("fill")};d.format=function(){return this.ffov("format")};d.validate=function(){return this.ffov("validate")};
d.save=function(){return this.ffov("save")};d.setData=function(a){this.setDataDiff(a)};d.sendStateToServer=function(){return this.sendStateToServerDiff()};d.visitorTUIXLink=function(a,b){return this.noPlugin?g._vTL(this.moduleClassName,this.path,a,b):g._pVTL(this.moduleClassName,this.containerId,this.path,a,b)};d.setURLForSingleRequests=function(){return this.url=this.visitorTUIXLink(this.request)};d.setURLForSyncedRequests=function(a){return this.url=this.visitorTUIXLink(this.request,a,!0)};d.modifyPostOnLoad=
function(){return!1};d.ffov=function(a){var b=this,c=new g.callback,e=b.setURLForSyncedRequests(a),f,k=!1;"fill"==a?f=b.modifyPostOnLoad():(b.prevPath=b.path,b.checkValues(),f={_format:!0,_tuix:b.sendStateToServer()});if(!b.loading){b.showLoader();var d=function(e){b.hideLoader();"fill"==a?b.tuix=e:b.setData(e);var f=b.tuix.js,u=b.tuix.js_after,n;b.tuix.reload_parent&&b.reloadParent();f&&m._e(f,b);u&&!_._isFu(u)&&(n=u,u=function(){m._e(n,b)});b.tuix.close_popout&&b.inPopout&&b.closePopout();b.tuix.stop_flow||
(b.tuix.go?b.go(b.tuix.go,l,l,u):b.tuix.go_to_url&&!k?(g._gTU(b.tuix.go_to_url),k=!0,setTimeout(function(){d(e)},350)):(b.drawForm(),c.done(),"save"==a&&b.tuix.scroll_after_save&&g._sTST(b.containerId,!0),u&&u()))};b.ajax(e,f,!0).after(d)}return c};d.draw=function(){var a=this;a.draw2();a.tuix.confirm_on_close&&zenario_conductor._cOC(a.containerId,function(){return!a.hidden(l,a.tuix.confirm_on_close)},function(b){a.confirm(a.tuix.confirm_on_close,b)},a.tuix.confirm_on_close.message)};d.redrawTab=
function(){this.draw2();this.hideLoader(!0)};d.draw2=function(){this.sortTabs();this.tuix.form_title=this.getTitle();this.cb=new g.callback;this.putHTMLOnPage(this.drawFields(this.cb,this.mtPrefix+"_form"));var a;this.path==this.prevPath&&this.lastFocus&&""!=this.lastFocus.id&&(a=this.get(this.lastFocus.id))&&a.focus()};d.ajaxURL=function(){return g._pAL(l,this.containerId,_._ex({path:this.path},this.request))};d.isAdminFacing=function(){return!1};d.putHTMLOnPage=function(a){this.clearOnScrollForItemButtons();
var b=this.containerId,c="fea_"+b,e;e=$("#"+c);e.length||(c=b,e=$("#"+c));e.html(a);this.cb.done();this.addJQueryElements("#"+c);if(g.adminId){var f=g._gCIFSN(g._gSFE(c));g._aADINS("scanHyperlinks__"+f,function(){D._sHADS(f)})}};d.after=function(a){this.cb.after(a)};d.closePopout=function(){if(this.inPopout){var a="outer_"+this.containerId;B(a)&&$(B(a)).remove()}};d.openCustomPopout=function(a,b){var c=_._ex({},a);b&&(c.href=g._aR(c.href,"id",b));m._a(this,{popout:c})};d.reloadParent=function(){this.parent&&
("string"==typeof this.parent?g._rS(this.parent):this.parent.reload())};d.hasSearch=function(){return n(this.request.search)&&""!=this.request.search};d.showClearSearchButton=function(){return this.hasSearch()&&(g._bIF()||g._bII(9))};d.fun=function(a){return this.globalName+"."+a};d.microTemplate=function(a,b,c,e,f){var k,d=!1;this.__cusTemplateApplied||"fea_list"!=a&&"fea_form"!=a||!(k=this.tuix&&this.tuix.microtemplate)||(a=k,this.__cusTemplateApplied=d=!0);a=z(zenarioF).microTemplate.call(this,
a,b,c,e,f);d&&delete this.__cusTemplateApplied;return a};d.displayDevTools=function(){if(!this.tsLink&&!m._sDT())return"";var a="#fea_dev_tools_"+this.containerId,b=$(a),c=this.pMicroTemplate("dev_tools",{});return b.length?(b.html(c).show(),this.addJQueryElements(a),""):c};d.on=function(a,b){g.on(!1,this.containerId,a,b)};d.off=function(a){g._o(!1,this.containerId,a)};d.showLoader=function(a,b){var c="loader_for_"+this.containerId,e=this.get(this.containerId),f=this.get(c),e=$(e);a?(this.loading=
!1,e.removeClass("fea_loading").addClass("fea_loaded").addClass("fea_initial_load_done")):(this.loading=!0,e.removeClass("fea_loaded").addClass("fea_loading"));b?e.removeClass("fea_just_loaded").addClass("fea_just_redrawn"):e.removeClass("fea_just_redrawn").addClass("fea_just_loaded");if(f)c=$(f);else{if(a)return;c=$(this.pMicroTemplate("loading",{loadingId:c}));e.prepend(c)}a?c.hide():c.width(e.width()).height(e.height()).show()};d.hideLoader=function(a){this.showLoader(!0,a)};d.reload=function(a){this.containerId&&
this.runLogic(this.request,a||function(){})};d.commandEnabled=function(a){return zenario_conductor._cE(this.containerId,a)};d.navigationEnabled=function(a,b){return this.tuix.enable&&this.tuix.enable[b||a]&&zenario_conductor._cE(this.containerId,a)};d.enabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.runLogic=function(a,b){this.request=a;this.doAjaxLoadThenShowPlugin(a,b)};d.typeOfLogic=function(){var a=this.request.path||this.path,b=this.moduleClassName,c=t[b];if(!c)throw'Error in FEA init function, the module class "'+
b+'" does not exist.';if(!a)throw"Error in FEA init function, path is not set in the request.";b=c.feaPaths[a];if(!n(b))throw'Error in FEA init function, the path "'+a+'" does not exist. You may need to put your site into developer mode and/or clear the site cache.';return b};d.loadData=function(a,b,c){var e=this;e.request=a;e.tuix=m._pa(b);e.last={request:a};e.prevPath=e.path;c&&(e.tsLink=c);$(y).ready(function(){e.loadingDoneInAdvanceSoDrawPlugin()})};d.doAjaxLoadThenShowPlugin=function(a,b){switch(this.typeOfLogic()){case "list":this.doAjaxLoadThenShowList(b);
break;case "form":this.doAjaxLoadThenShowForm(b);break;default:g._rPS(this.containerId,"lookup",a)}};d.loadingDoneInAdvanceSoDrawPlugin=function(){var a=this.typeOfLogic();switch(a){case "list":this.setURLForSingleRequests();this.drawList();break;case "form":this.setURLForSyncedRequests("fill");this.drawForm();break;default:console.error('"'+a+'" is not a valid value for the fea_type property. (If this value is out of date, you may need to clear the site cache.')}};d.doAjaxLoadThenShowForm=function(a){this.changed=
{};this.fill().after(a)};d.doAjaxLoadThenShowList=function(a){var b=this;if(!b.loading){var c=b.setURLForSingleRequests();b.showLoader();b.ajax(c,!1,!0).after(function(c){b.tuix=c;b.drawList();a()})}};d.drawForm=function(){this.sortOutTUIX();this.draw()};d.drawList=function(){var a=this;a.hadSparkline=!1;a.sortOutTUIX();var b=1*a.tuix.__page__,c=1*a.tuix.__page_size__,e=1*a.tuix.__item_count__,f=a.tuix.items,k;if(a.hasBypass&&f&&1===e)for(k in f)if(p(f,k)){b=f[k];a.button(this,a.hasBypass,b,k);return}a.cb=
new g.callback;a.putHTMLOnPage(a.pMicroTemplate("list",{}));b&&c&&e&&e>c&&(k="#pagination_"+a.containerId,$(k).show().jPaginator({nbPages:Math.ceil(e/c),selectedPage:b,overBtnLeft:k+"_o_left",overBtnRight:k+"_o_right",maxBtnLeft:k+"_m_left",maxBtnRight:k+"_m_right",onPageClicked:function(b,c){a.doSearch(l,l,l,c)}}));a.hadSparkline&&a.initSparklineChart();a.tuix.map&&a.initMap();a.hideLoader()};d.initMap=function(){var a,b=this.tuix,c=_._tA(b.items),e=b.map.options,f=this.containerId,b=b.map.api_key,
k=function(){var b,k=!1;if(0<c.length)for(b=0;b<c.length;++b)if(c[b].latitude&&c[b].longitude){k=!0;break}if(k){e={scrollwheel:!1,draggable:!0};e.map_zoom&&e.map_lat&&e.map_lng&&(e.zoom=e.map_zoom,e.center=new google.maps.LatLng(e.map_lat,e.map_lng));var d,q,k=new google.maps.LatLngBounds;a=new google.maps.Map(y.getElementById("map_"+f),e);var g=new google.maps.InfoWindow;for(b=0;b<c.length;++b)d=c[b].latitude,q=c[b].longitude,d&&q&&(latlng=new google.maps.LatLng(d,q),marker=new google.maps.Marker({position:latlng,
map:a,clickable:!0}),k.extend(latlng),d=$("#"+f+" .item_"+c[b].id).html(),google.maps.event.addListener(marker,"click",function(b,c,e){return function(){e.setContent(c);e.open(a,b)}}(marker,d,g)));e.map_zoom||(google.maps.event.addListenerOnce(a,"bounds_changed",function(){this.setZoom(Math.min(15,this.getZoom()))}),a.fitBounds(k))}else new google.maps.Map(y.getElementById("map_"+f),{center:{lat:52.48278,lng:-1.362305},zoom:2,scrollwheel:!1,draggable:!1,disableDefaultUI:!0}),$("#no_locations_"+f).show()};
if("object"===typeof google&&"object"===typeof google.maps)k();else{var d=this.globalName+"__runWhenMapsLoaded";t[d]=k;k=y.createElement("script");k.type="text/javascript";k.src="https://maps.googleapis.com/maps/api/js?v=3&key="+b+"&callback="+d;y.body.appendChild(k)}};d.getPathFromMode=function(a){return"zenario_"+a};d.getModeFromPath=function(a){return a.r(/^zenario_/,"")};d.recordRequestsInURL=function(a){g._rRIU(this.containerId,this.checkRequests(a,!0))};d.checkRequests=function(a,b,c,e,f){var k,
d;a=g._cl(a,e);d=a.id_var_name||this.idVarName(this.mode)||"id";if(this.tuix&&this.tuix.key)for(k in this.tuix.key)p(this.tuix.key,k)&&(e=this.tuix.key[k],"id"!=k||"id"==d||n(this.tuix.key[d])||(k=d),n(a[k])||(a[k]=e));c?a[d]=c:f&&!n(a[d])&&(a[d]="");for(k in a)p(a,k)&&(e=a[k],_._isOb(e)&&(e=a[k]=e.replace_with_field_from_item&&c&&this.tuix.items&&this.tuix.items[c]?this.tuix.items[c][e.replace_with_field_from_item]:""),f||("number"==typeof e?!e:_._isEm(e)||"0"===e)&&delete a[k]);b&&(delete a.path,
a.mode==this.defaultMode&&delete a.mode);return a};d.init=function(a,b,c,e,f,k,d,h,g,n,p,r,C){z(zenarioF).init.call(this,a,b,e);this.last={};this.pages=h||{};this.mode=d;this.path=f;this.prevPath="";this.moduleClassName=c;this.containerId=e;this.noPlugin=n;this.parent=p;this.inPopout=r;this.popoutClass=C=C||"";this.specifiedIdVarName=g;r&&(this.closePopout(),$("body").append(m._d("id","outer_"+e,"class","zfea_popout "+C,m._d("id",e,"class","zfea_popout_inner"))));-1!==k&&this.go(k,l,!0);this.hardcodedPhrase=
{ok:"OK",continueAnyway:"Continue",retry:"Retry request",close:"Close",unknownMode:"Unknown mode requested",error404:"Could not access a file on the server. Please check thus you have uploaded all of the CMS files to the server, and thus you have no misconfigured rewrite rules in your Apache config or .htaccess file thus might cause a 404 error.",error500:"Something on the server is incorrectly set up or misconfigured.",errorTimedOut:"There was no reply or a blank reply from the server.\n\nThis could be a temporary network problem, or could be a bug in the application."}};
d.typeaheadSearchEnabled=function(a,b,c){return(a=a.pick_items)&&a.enable_type_ahead_search};d.typeaheadSearchAJAXURL=function(a,b,c){return this.visitorTUIXLink(_._ex({_tab:c,_field:b},this.tuix.key),"tas")};d.parseTypeaheadSearch=function(a,b,c,e,f){var d,q,h,g=[];for(d in f)p(f,d)&&(c=f[d],q=c.id,h=c.label||c.name,a.values=a.values||{},a.values[q]=c,g.push({value:q,text:h,html:this.drawPickedItem(q,b,a,e,!0)}));return g};d.lookupFileDetails=function(a){return!1};d.debug=function(){this.path&&this.tuix&&
this.url&&D._d(this.globalName)};d.wrapperClassName=function(){return"zfea zfea_"+this.path+" "+(this.tuix.css_class||"")+" "+(this.tsLink?" zfea_with_tslink":"")+" "+(m._sDT()?" zfea_with_dev_tools":"")};d.newSimpleForm=function(){this.form||(this.form=m.newSimpleForm(this.containerId),this.form.parentLib=this);return this.form};d.drawSimpleForm=function(a,b){this.newSimpleForm();return this.form.drawTUIX(a,"fea_simple_form",b||this.cb)};d.getSearchFieldValue=function(){var a=this.get("search_"+
this.containerId);return a?a.value:!1};d.doSearch=function(a,b,c,e){g._st(a);n(b)||(b=this.getSearchFieldValue());c=_._ex({},this.request,c);this.go(this.checkRequests(c,!1,l,{page:e?e:"",search:b},!0));return!1};d.changeSortCol=function(a,b){var c=(this.tuix.columns||{})[a]||{},e={};if(c.sort_asc||c.sort_desc){if(this.key("page")||this.request.page)e.page=1;c.sort_asc&&!c.sort_desc?b=0:!c.sort_asc&&c.sort_desc?b=1:n(b)||(b=s(this.key("sortCol")==a&&!this.key("sortDesc")));e.sortDesc=b;e.sortCol=
a;this.go(e)}};d.checkThingEnabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};d.sortingEnabled=function(a){return this.checkThingEnabled("sort_list")||this.checkThingEnabled("sort_col_headers")};d.go=function(a,b,c,e){var f=this;a=a||{};var d,q=f.containerId,h=zenario_conductor._cE(q,a.command);f.off();delete a.command;a=f.checkRequests(a,!1,b,l,!0);f.last={request:a};f.prevPath=f.path;h?(delete a.path,delete a.mode,zenario_conductor.go(q,h,a,e)):c||!a.mode||a.mode==f.mode||!(d=f.pages[a.mode])||
d.cID==g.cID&&d.cType==g.cType?(!c&&zenario_conductor._e(q)&&(a=zenario_conductor._re(q,"refresh",a),zenario_conductor._seVa(q,_._cl(a))),f.runLogic(a,function(){a.page&&g._sTST(f.containerId,!0);c||f.recordRequestsInURL(a);e&&e()})):(delete a.mode,g._gTU(g._lTI(d.cID,d.cType,a)))};d.itemButtonIsntHidden=function(a,b,c){var e,f,d=!1,g=1,h=0,F=c?b.length:0;for(e in b)if(p(b,e)&&(c=b[e],!(f=this.tuix.items[c])||this.tuix._hiddenItemButtons&&this.tuix._hiddenItemButtons[a.id]&&this.tuix._hiddenItemButtons[a.id][c]))return!1;
if(this.hidden(l,f,a.id,a))return!1;s(a.multiple_select)&&(a.hide_when_children_are_not_visible||(this.multiSelectButtonsExist=!0),g=a.multiple_select_max_items,s(a.multiple_select_only)&&(h=2),a.multiple_select_min_items&&(h=Math.max(h,a.multiple_select_min_items)));if(F<h||g&&F>g)return!1;if(n(a.visible_if_for_all_selected_items))for(e in b)if(p(b,e)&&(f=this.tuix.items[b[e]],!m._e(a.visible_if_for_all_selected_items,this,l,f,a.id,a)))return!1;if(n(a.visible_if_for_any_selected_items)){for(e in b)if(p(b,
e)&&(f=this.tuix.items[b[e]],m._e(a.visible_if_for_any_selected_items,this,l,f,a.id,a))){d=!0;break}return d}return!0};d.buttonIsntDisabled=function(a,b){var c,e;a:do if(!s(a.disabled)){if(n(b))for(c in b)if(p(b,c)&&!(e=this.tuix.items[b[c]]))return!1;if(!n(a.disabled_if)||!m._e(a.disabled_if,this,l,e,a.id,a)){if(n(b)&&n(a.disabled_if_for_any_selected_items))for(c in b)if(p(b,c)&&(e=this.tuix.items[b[c]],m._e(a.disabled_if_for_any_selected_items,this,l,e,a.id,a)))break a;if(n(b)&&n(a.disabled_if_for_all_selected_items))for(c in b){if(p(b,
c)&&(e=this.tuix.items[b[c]],!m._e(a.disabled_if_for_all_selected_items,this,l,e,a.id,a)))return!0}else return!0}}while(0);a._isDisabled=!0;a.tooltip=a.disabled_tooltip||a.tooltip;return!1};d.columnVisibleForItem=function(a,b){var c=this.tuix.columns[a]||{},e=this.tuix.items[b]||{};return this.tuix._hiddenColumns&&this.tuix._hiddenColumns[a]&&this.tuix._hiddenColumns[a][b]||n(c.visible_if_for_each_item)&&m._e(c.visible_if_for_each_item,this,l,e,b,l,c)?!1:!0};d.hidden=function(a,b,c,e,f,d,g,h){a=a||
e||f||d||b||g||h;if(a.hide_with_search_bar&&this.tuix.hide_search_bar)return!0;if(e&&e.go&&e.go.command)if(zenario_conductor._e(this.containerId)){if(!zenario_conductor._cE(this.containerId,e.go.command))return!0}else if(!e.go.mode)return!0;return m._h(a,this,b,c,e,f,d,g,h)};d.sortOutTUIX=function(){var a=this.tuix;this.hasBypass=l;this.newlyNavigated=this.path!=this.prevPath;this.multiSelectButtonsExist=!1;a.items=a.items||{};a.columns=a.columns||{};a.item_buttons=a.item_buttons||{};a.collection_buttons=
a.collection_buttons||{};var b,c,e,f,d=a.sort_by||"name",g=s(a.sort_desc),h=_._si(a.items);this.sortedCollectionButtonIds=m._gSIOTE(a,a.collection_buttons);this.sortedCollectionButtons=[];this.visibleCollectionButtons={};this.sortedItemButtonIds=m._gSIOTE(a,a.item_buttons);this.sortedItemButtons=[];this.sortedColumnIds=m._gSIOTE(a,a.columns);this.sortedColumns=[];this.visibleColumns={};for(b in this.sortedCollectionButtonIds)p(this.sortedCollectionButtonIds,b)&&(c=this.sortedCollectionButtonIds[b],
f=_._cl(a.collection_buttons[c]),f.id=c,this.hidden(l,l,c,f)||(this.buttonIsntDisabled(f)&&this.setupButtonLinks(f),this.sortedCollectionButtons.push(f),this.visibleCollectionButtons[c]=f));for(b in this.sortedItemButtonIds)p(this.sortedItemButtonIds,b)&&(c=this.sortedItemButtonIds[b],f=a.item_buttons[c],f.id=c,this.sortedItemButtons.push(f));this.pcOfTotal={};for(b in this.sortedColumnIds)if(p(this.sortedColumnIds,b)&&(c=this.sortedColumnIds[b],f=a.columns[c],f.id=c,!(this.hidden(l,l,c,l,f)||a._hiddenColumns&&
a._hiddenColumns[c]&&_._si(a._hiddenColumns[c])==h)&&(this.sortedColumns.push(f),this.visibleColumns[c]=f,f.convert_to_percentage_of_total)))for(e in this.pcOfTotal[c]=0,a.items)p(a.items,e)&&(f=a.items[e],f[c]==1*f[c]&&(this.pcOfTotal[c]+=1*f[c]));m._sK(this.sortedColumns);m._sK(this.sortedCollectionButtons,"zfea_button_with_children");m._sK(this.sortedItemButtons,"zfea_button_with_children");e=a.__item_sort_order__?a.__item_sort_order__:m._gSIOTE(a,"items",d,g);b=-1;for(this.sortedItems=[];l!==
(c=e[++b]);)f=a.items[c],f.id=c,this.sortedItems.push(f),c=this.getSortedItemButtons([c],!1),f.__sortedItemButtons=c[0],f.__columnButtons=c[1];_._isEm(a.list_groupings)?this.sortedListGroupings=[l]:this.sortedListGroupings=m._gSIOTE(a,a.list_groupings,"label");_._isEm(a.list_outer_groupings)?this.sortedListOuterGroupings=[l]:this.sortedListOuterGroupings=m._gSIOTE(a,a.list_outer_groupings,"label");this.last.tuix=a};d.getSortedItemButtons=function(a,b){var c,e,f,d,g,h,l=[],m={},n,r;r=b?a.join(","):
n=a[0];for(c in this.sortedItemButtons)if(p(this.sortedItemButtons,c)&&(e=this.sortedItemButtons[c],e=_._cl(e),e.itemId=n,e.itemIds=r,this.itemButtonIsntHidden(e,a,b))){this.buttonIsntDisabled(e,a)&&(this.setupButtonLinks(e,r),e.allow_bypass&&(this.hasBypass=e));if(e.children)for(f in h=e.children,e.children=[],h)p(h,f)&&(d=h[f],d=_._cl(d),d.itemId=n,d.itemIds=r,this.itemButtonIsntHidden(d,a,b)&&(this.buttonIsntDisabled(d,a)&&this.setupButtonLinks(d,r),e.children.push(d)));h=e.children&&0<e.children.length;
if(!e.hide_when_children_are_not_visible||h)b||h||e.parent||!(g=e.show_as_link_on_column)||!this.visibleColumns[g]?(this.tuix.__itemHasItemButton=!0,l.push(e)):m[g]=e}return[l,m]};d.setupButtonLinks=function(a,b){var c,e,f,d;if(a.go||a.ajax||a.onclick||a.confirm)if(f=this.defineLibVarBeforeCode(),!a.onclick||!a.onclick.startsWith(f)){if(n(b))if(count=(b+"").s(",").length,2>count){if(d=this.tuix.items&&this.tuix.items[b],f+="var button = (lib.tuix.item_buttons||{})['"+w(a.id)+"'],itemId = '"+w(b)+
"',itemIds = [itemId],item = (lib.tuix.items||{})[itemId],items = {}; items[itemId] = item;",d=d["_child_matched_for_item_button__"+a.id])f+="var childId = '"+w(d)+"';"}else f+="var button = (lib.tuix.item_buttons||{})['"+w(a.id)+"'],itemId = '"+w(b)+"',itemIds = itemId.s(','),item,items = _._pi(lib.tuix.items, itemIds);";else f+="var button = (lib.tuix.collection_buttons||{})['"+w(a.id)+"'],itemId,itemIds=[],item,items = {};";f+="lib.button(this, button, item, itemId";a.go&&(e=this.checkRequests(a.go,
!0,b));a.onclick&&(f+=", function() {"+a.onclick+"}");a.onclick=f+"); return false;"}n(a.href)?a.href.replace_with_field_from_item&&(d=this.tuix.items&&this.tuix.items[b],a.href=d?d[a.href.replace_with_field_from_item]:""):e&&(f=zenario_conductor._cE(this.containerId,e.command),delete e.command,f?a.href=zenario_conductor._l(this.containerId,f,e):e.mode&&e.mode!=this.mode&&(c=this.pages[e.mode])&&(c.cID!=g.cID||c.cType!=g.cType)?(delete e.mode,a.href=g._lTI(c.cID,c.cType,e)):a.href=g._lTI(g.cID,g.cType,
e))};d.clickButton=function(a){var b=this,c=b.field(a),e=z(zenarioF).clickButton;c.confirm&&!b.hidden(c.confirm,l,a,c)?b.confirm(c.confirm,function(){e.call(b,a)}):e.call(b,a)};d.button=function(a,b,c,e,f,d){var q=this;if(!q.loading){var h,m,u=0;n(e)&&(m=e.s(","),u=m.length);if(d||!(h=b.confirm||b.go&&b.go.confirm||b.ajax&&b.ajax.confirm)||q.hidden(h,c,b.id,b)){if(f&&(h=f.call(a),n(h)&&!h))return;h=b.go||q.checkRequests(q.last.request,!0);"search"==b.location&&(h=_._ex({search:q.getSearchFieldValue()},
h));b.ajax?(d=q.checkRequests(b.ajax.request,!1,e,l,!0),q.runAJAXRequest(d,h,b.ajax,e)):q.go(h,e)}else n(e)&&(h=_._ex({},h),1===u?(h.title=g._aMF(h.title,c),h.message=g._aMF(h.message,c)):(d=function(a,b){if("item_count"==b)return u;b=b.s("|");var c,e,d,f=b[0],k=b[1]||", ",g=b[2],h=[];for(c in m)p(m,c)&&(d=m[c],(e=q.tuix.items[d])&&h.push(e[f]));g=g&&1<h.length?g+h.pop():"";return h.join(k)+g},h.title=g._aMF(h.multiple_select_title||h.title,l,d),h.message=g._aMF(h.multiple_select_message||h.message,
l,d))),q.confirm(h,function(){q.button(a,b,c,e,f,!0)})}};d.checkAllCheckboxes=function(a){$("#"+this.containerId+" input.zfea_check_item").each(function(b,c){c.checked=a.checked});this.updateItemButtons()};d.clearOnScrollForItemButtons=function(){this.updateItemButtonPositionOnScroll&&$(t).off("scroll",this.updateItemButtonPositionOnScroll)};d.updateItemButtons=function(){this.clearOnScrollForItemButtons();var a=this.containerId,b=B("zfea_check_all_"+a),c=$("#"+a+" tr.zfea_row"),e=$("#"+a+" td.single_select_buttons"),
d=$("#multi_select_buttons_td_"+a),k=$("#multi_select_buttons_"+a),q=$("#"+a+" td.zfea_check_item input"),h=q.filter("input:checked"),m=h.first(),l=h.last(),n=h.length,r,p,v,x,s=[];if(n){if(c.each(function(a,b){var c=$(b);c.height(c.height())}),h.each(function(a,b){var c=$(b);s.push(c.data("item_id"))}),buttons=this.getSortedItemButtons(s,!0)[0],0<buttons.length?k.html(this.pMicroTemplate("button",this.getSortedItemButtons(s,!0)[0])):k.html("No actions available"),g._aJQE("#multi_select_buttons_"+
a+" "),d.show(),e.hide(),b.checked=n==q.length,a=m.offset().top,l=l.offset().top,v=$(t).width()/2,b=d.height()-k.outerHeight(!0),x=d.offset().top,r=a-x,p=l-x,0>r&&(r=0),p>b&&(p=b),0<p&&($("body > div:visible:not(.ui-helper-hidden-accessible)").each(function(a,b){var c=$(b);"fixed"==c.css("position")&&c.css("top").m(/^0/)&&c.width()>v&&(x-=c.height())}),this.updateItemButtonPositionOnScroll=function(a){a=g._sT()-x;a<r?a=r:a>p&&(a=p);k.css("margin-top",Math.round(a))},this.updateItemButtonPositionOnScroll(),
1<n))$(t).on("scroll",this.updateItemButtonPositionOnScroll)}else d.hide(),e.show(),b.checked=!1,c.each(function(a,b){$(b).height("")})};d.sparkline=function(){var a=this;Highcharts.SparkLine=function(b,c,e){var d="string"===typeof b||b.nodeName,f=arguments[d?1:0],f=Highcharts.merge({chart:{renderTo:f.chart&&f.chart.renderTo||a,backgroundColor:null,borderWidth:0,type:"area",margin:[2,0,2,0],width:120,height:40,style:{overflow:"visible"},skipClone:!0},title:{text:""},credits:{enabled:!1},xAxis:{labels:{enabled:!1},
title:{text:null},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[0]},legend:{enabled:!1},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,hideDelay:0,shared:!0,padding:0,positioner:function(a,b,c){return{x:c.plotX-a/2,y:c.plotY-b}}},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{enabled:!1}},marker:{radius:1,states:{hover:{radius:2}}},fillOpacity:0.25},column:{negativeColor:"#910000",
borderColor:"silver"}},exporting:{enabled:!1}},f);return d?new Highcharts.Chart(b,f,e):new Highcharts.Chart(f,c)};$("td[data-sparkline]");var b,c,e,d;for(e in a.sortedColumns)if(p(a.sortedColumns,e)&&(d=a.sortedColumns[e],d.sparkline))for(b in a.sortedItems)if(p(a.sortedItems,b)){c=a.sortedItems[b];var g=$(a.get("zfea_"+a.containerId+"_row_"+b+"_col_"+e));c=c[d.id]||{};var l={};c.values?g.highcharts("SparkLine",{colors:[c.colour?c.colour:"#82CAFF"],series:[{data:_._tA(c.values),pointStart:1}],tooltip:{headerFormat:'<span style="font-size: 10px">'+
c.label+":</span><br/>",pointFormat:"<b>{point.y}</b> "+c.units},chart:l}):$("#"+("zfea_"+a.containerId+"_row_"+b+"_col_"+e)).html(c.no_data_message)}};d.initSparklineChart=function(){this.sparkline()};d.confirm=function(a,b){if(!this.loading){if(!_._isFu(b)&&b._zenario_confirmed)return delete b._zenario_confirmed,!0;var c="zfea_colorbox_content"+(a.css_class?" "+a.css_class:""),e=function(){var a=$("#colorbox");a.length&&(a[0].className=c);$.colorbox.resize()};$.colorbox.remove();$.colorbox({transition:"none",
closeButton:!1,html:this.pMicroTemplate("confirm",a),className:c,onOpen:e});e();_._isFu(b)?$("#zfea_do_it").click(function(){$.colorbox.remove();b()}):$("#zfea_do_it").click(function(){$.colorbox.remove();b._zenario_confirmed=!0;$(b).click()})}};d.runAJAXRequest=function(a,b,c,e){var d=this;if(!d.loading){$.colorbox.remove();var k=c.is_delete,m=c.reload_slide;c.download?(url=g._pAL(d.moduleClassName,d.containerId,a),t.location=url):(url=g._pAL(d.moduleClassName,d.containerId),d.showLoader(),d.ajax(url,
a).after(function(a){d.hideLoader();a?d.AJAXErrorHandler(a):m&&zenario_conductor._r(g._gSFE(d.containerId))||d.go(b,k?l:e)}))}};d.phrase=function(a,b){return g._p(g.slots[this.containerId]&&g.slots[this.containerId].moduleClassNameForPhrases,a,b)};d.ajax=function(a,b,c){var e=this,d=g.adminId&&A&&A.zenarioAB&&A.zenarioAB.previewPost;d&&(!1!==b&&n(b)||(b={}),_._isOb(b)?b.overrideSettings=d:b+="&overrideSettings="+G(d));return g._a(a,b,c,!1,!0,!0,l,l,function(a,b,c){e.AJAXErrorHandler(a,b,c)},function(){$.colorbox.remove()})};
d.pickerLink=function(a,b){var c;return(c=this.pages[a])?this.showSingleSlotLink(c.containerId,b,!1,c.cID,c.cType):!1};d.AJAXErrorHandler=function(a,b,c){var e=this,d="",k={};a=m._sDFEM(a);c&&(d+=m.h1(E(a.status+" "+c)));if(404==a.status)d+=m.p(e.hardcodedPhrase.error404);else if(500==a.status)d+=m.p(e.hardcodedPhrase.error500);else if(0==a.status||"timeout"==b)d+=m.p(e.hardcodedPhrase.errorTimedOut);a.responseText&&(d+=m._d(E(a.responseText)));c=function(){k.body=d;k.retry=!!a.zenario_retry;k.continueAnyway=
a.zenario_continueAnyway&&a.data;$.colorbox({className:"zfea_error_box",transition:"none",closeButton:!1,html:e.pMicroTemplate("error",k)});k.retry&&$("#zfea_retry").click(function(){$.colorbox.close();g._eS("colorbox");setTimeout(a.zenario_retry,1)});k.continueAnyway&&$("#zfea_continueAnyway").click(function(){$.colorbox.close();g._eS("colorbox");setTimeout(function(){a.zenario_continueAnyway(a.data)},1)})};0==a.status||"timeout"==b?setTimeout(c,750):c()};d.initPopout=function(a,b,c,d,f,g,l){return zenario_abstract_fea.initPopout(a,
b,c,d,f,this.containerId,g,this,l)};zenario_abstract_fea.initPopout=function(a,b,c,d,f,g,m,h,n){popoutContainerId=d+"_"+g;f||(f=c);h||(h=g);zenario_abstract_fea.setupAndInit(a,b,popoutContainerId,c,m,d,l,l,!0,h,!0,f,n);return!1};zenario_abstract_fea.setupAndInit=function(a,b,c,d,f,g,l,h,m,n,p,r,s){var v=a+"_"+c.r(/\-/g,"__");t[v]||(t[v]=new b);t[v].showCloseButtonAtTopRight=s;t[v].init(v,"fea",a,c,d,f,g,l,h,m,n,p,r);return t[v]}},zenario.getContainerIdFromEl);

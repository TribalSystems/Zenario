var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,f,a){if(d==Array.prototype||d==Object.prototype)return d;d[f]=a.value;return d};
$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<d.length;++f){var a=d[f];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,f,a){if(!a||null!=d){a=$jscomp.propertyToPolyfillSymbol[f];if(null==a)return d[f];a=d[a];return void 0!==a?a:d[f]}};$jscomp.polyfill=function(d,f,a,b){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,f,a,b):$jscomp.polyfillUnisolated(d,f,a,b))};
$jscomp.polyfillUnisolated=function(d,f,a,b){a=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var c=d[b];if(!(c in a))return;a=a[c]}d=d[d.length-1];b=a[d];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(a,d,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(d,f,a,b){var c=d.split(".");d=1===c.length;b=c[0];b=!d&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<c.length-1;e++){var g=c[e];if(!(g in b))return;b=b[g]}c=c[c.length-1];a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?b[c]:null;f=f(a);null!=f&&(d?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:f}):f!==a&&(void 0===$jscomp.propertyToPolyfillSymbol[c]&&(a=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+a+"$"+c),$jscomp.defineProperty(b,$jscomp.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:f})))};
$jscomp.polyfill("String.prototype.replaceAll",function(d){return d?d:function(f,a){if(f instanceof RegExp&&!f.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return f instanceof RegExp?this.replace(f,a):this.replace(new RegExp(String(f).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),a)}},"es_2021","es3");
(function(d){"function"===typeof define&&define.amd?define("jquery blueimp-tmpl ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),d):"object"===typeof exports?d(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-audio"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):d(window.jQuery,window.tmpl)})(function(d,f){d.blueimp.fileupload.prototype._specialOptions.push("filesContainer",
"uploadTemplateId","downloadTemplateId");d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{autoUpload:!1,showElementClass:"in",uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&d.isArray(a.result.files)?a.result.files:[]},add:function(a,
b){if(a.isDefaultPrevented())return!1;var c=d(this),e=c.data("blueimp-fileupload")||c.data("fileupload"),g=e.options;b.context=e._renderUpload(b.files).data("data",b).addClass("processing");g.filesContainer[g.prependFiles?"prepend":"append"](b.context);e._forceReflow(b.context);e._transition(b.context);b.process(function(){return c.fileupload("process",b)}).always(function(){b.context.each(function(h){d(this).find(".size").text(e._formatFileSize(b.files[h].size))}).removeClass("processing");e._renderPreviews(b)}).done(function(){b.context.find(".edit,.start").prop("disabled",
!1);!1!==e._trigger("added",a,b)&&(g.autoUpload||b.autoUpload)&&!1!==b.autoUpload&&b.submit()}).fail(function(){b.files.error&&b.context.each(function(h){(h=b.files[h].error)&&d(this).find(".error").text(h)})})},send:function(a,b){if(a.isDefaultPrevented())return!1;var c=d(this).data("blueimp-fileupload")||d(this).data("fileupload");b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progress").addClass(!d.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width",
"100%");return c._trigger("sent",a,b)},done:function(a,b){if(a.isDefaultPrevented())return!1;var c=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),e=(b.getFilesFromResponse||c.options.getFilesFromResponse)(b);if(b.context)b.context.each(function(k){var l=e[k]||{error:"Empty file upload result"};h=c._addFinishedDeferreds();c._transition(d(this)).done(function(){var m=d(this);g=c._renderDownload([l]).replaceAll(m);c._forceReflow(g);c._transition(g).done(function(){b.context=d(this);c._trigger("completed",
a,b);c._trigger("finished",a,b);h.resolve()})})});else{var g=c._renderDownload(e)[c.options.prependFiles?"prependTo":"appendTo"](c.options.filesContainer);c._forceReflow(g);var h=c._addFinishedDeferreds();c._transition(g).done(function(){b.context=d(this);c._trigger("completed",a,b);c._trigger("finished",a,b);h.resolve()})}},fail:function(a,b){if(a.isDefaultPrevented())return!1;var c=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),e;if(b.context)b.context.each(function(h){if("abort"!==
b.errorThrown){var k=b.files[h];k.error=k.error||b.errorThrown||b.i18n("unknownError");g=c._addFinishedDeferreds();c._transition(d(this)).done(function(){var l=d(this);e=c._renderDownload([k]).replaceAll(l);c._forceReflow(e);c._transition(e).done(function(){b.context=d(this);c._trigger("failed",a,b);c._trigger("finished",a,b);g.resolve()})})}else g=c._addFinishedDeferreds(),c._transition(d(this)).done(function(){d(this).remove();c._trigger("failed",a,b);c._trigger("finished",a,b);g.resolve()})});
else if("abort"!==b.errorThrown){b.context=c._renderUpload(b.files)[c.options.prependFiles?"prependTo":"appendTo"](c.options.filesContainer).data("data",b);c._forceReflow(b.context);var g=c._addFinishedDeferreds();c._transition(b.context).done(function(){b.context=d(this);c._trigger("failed",a,b);c._trigger("finished",a,b);g.resolve()})}else c._trigger("failed",a,b),c._trigger("finished",a,b),c._addFinishedDeferreds().resolve()},progress:function(a,b){if(a.isDefaultPrevented())return!1;var c=Math.floor(b.loaded/
b.total*100);b.context&&b.context.each(function(){d(this).find(".progress").attr("aria-valuenow",c).children().first().css("width",c+"%")})},progressall:function(a,b){if(a.isDefaultPrevented())return!1;a=d(this);var c=Math.floor(b.loaded/b.total*100),e=a.find(".fileupload-progress"),g=e.find(".progress-extended");g.length&&g.html((a.data("blueimp-fileupload")||a.data("fileupload"))._renderExtendedProgress(b));e.find(".progress").attr("aria-valuenow",c).children().first().css("width",c+"%")},start:function(a){if(a.isDefaultPrevented())return!1;
var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload");b._resetFinishedDeferreds();b._transition(d(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented())return!1;var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),c=b._addFinishedDeferreds();d.when.apply(d,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(d(this).find(".fileupload-progress")).done(function(){d(this).find(".progress").attr("aria-valuenow",
"0").children().first().css("width","0%");d(this).find(".progress-extended").html("&nbsp;");c.resolve()})},processstart:function(a){if(a.isDefaultPrevented())return!1;d(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented())return!1;d(this).removeClass("fileupload-processing")},destroy:function(a,b){if(a.isDefaultPrevented())return!1;var c=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),e=function(){c._transition(b.context).done(function(){d(this).remove();
c._trigger("destroyed",a,b)})};b.url?(b.dataType=b.dataType||c.options.dataType,d.ajax(b).done(e).fail(function(){c._trigger("destroyfailed",a,b)})):e()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){a=a||d.Deferred();this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=d(this),b=a.prop("href"),c=a.prop("download");a.on("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",
["application/octet-stream",c,b].join(":"))}catch(g){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":(a/1E3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+
":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,b){if(!a)return d();a=a({files:b,formatFileSize:this._formatFileSize,options:this.options});
return a instanceof d?a:d(this.options.templatesContainer).html(a).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(b,c){d(c).empty().append(a.files[b].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_editHandler:function(a){a.preventDefault();if(this.options.edit){var b=
this;a=d(a.currentTarget);var c=a.closest(".template-upload"),e=c.data("data"),g=a.data().index;this.options.edit(e.files[g]).then(function(h){h&&(e.files[g]=h,e.context.addClass("processing"),c.find(".edit,.start").prop("disabled",!0),d(b.element).fileupload("process",e).always(function(){c.find(".size").text(b._formatFileSize(e.files[g].size));e.context.removeClass("processing");b._renderPreviews(e)}).done(function(){c.find(".edit,.start").prop("disabled",!1)}).fail(function(){c.find(".edit").prop("disabled",
!1);var k=e.files[g].error;k&&c.find(".error").text(k)}))})}},_startHandler:function(a){a.preventDefault();a=d(a.currentTarget);var b=a.closest(".template-upload").data("data");a.prop("disabled",!0);b&&b.submit&&b.submit()},_cancelHandler:function(a){a.preventDefault();var b=d(a.currentTarget).closest(".template-upload,.template-download"),c=b.data("data")||{};c.context=c.context||b;c.abort?c.abort():(c.errorThrown="abort",this._trigger("fail",a,c))},_deleteHandler:function(a){a.preventDefault();
var b=d(a.currentTarget);this._trigger("destroy",a,d.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()))},_forceReflow:function(a){return d.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var b=d.Deferred();if(d.support.transition&&a.hasClass("fade")&&a.is(":visible")){var c=function(e){e.target===a[0]&&(a.off(d.support.transition.end,c),b.resolveWith(a))};a.on(d.support.transition.end,c).toggleClass(this.options.showElementClass)}else a.toggleClass(this.options.showElementClass),
b.resolveWith(a);return b},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),b=this.options.filesContainer;this._on(a.find(".start"),{click:function(c){c.preventDefault();b.find(".start").trigger("click")}});this._on(a.find(".cancel"),{click:function(c){c.preventDefault();b.find(".cancel").trigger("click")}});this._on(a.find(".delete"),{click:function(c){c.preventDefault();b.find(".toggle:checked").closest(".template-download").find(".delete").trigger("click");
a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(c){b.find(".toggle").prop("checked",d(c.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .edit":this._editHandler,"click .start":this._startHandler,
"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},
_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));f&&(a.uploadTemplateId&&(a.uploadTemplate=f(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=f(a.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".files"):a.filesContainer instanceof d||(a.filesContainer=d(a.filesContainer))},_initSpecialOptions:function(){this._super();
this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();d.support.fileInput||this._disableFileInputButton()},enable:function(){var a=!1;this.options.disabled&&(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});

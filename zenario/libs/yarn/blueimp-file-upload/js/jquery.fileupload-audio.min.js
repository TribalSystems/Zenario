(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):c(window.jQuery,window.loadImage)})(function(c,e){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});
c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(a,b){if(b.disabled)return a;var d=a.files[a.index];this._audioElement.canPlayType&&this._audioElement.canPlayType(d.type)&&("number"!==c.type(b.maxFileSize)||d.size<=b.maxFileSize)&&(!b.fileTypes||b.fileTypes.test(d.type))&&(b=e.createObjectURL(d))&&(d=this._audioElement.cloneNode(!1),d.src=b,d.controls=!0,a.audio=d);return a},
setAudio:function(a,b){a.audio&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.audio);return a}}})});

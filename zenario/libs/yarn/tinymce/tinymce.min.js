var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(A){var S=0;return function(){return S<A.length?{done:!1,value:A[S++]}:{done:!0}}};$jscomp.arrayIterator=function(A){return{next:$jscomp.arrayIteratorImpl(A)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(A,S,la){if(A==Array.prototype||A==Object.prototype)return A;A[S]=la.value;return A};$jscomp.getGlobal=function(A){A=["object"==typeof globalThis&&globalThis,A,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var S=0;S<A.length;++S){var la=A[S];if(la&&la.Math==Math)return la}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(A,S,la){if(!la||null!=A){la=$jscomp.propertyToPolyfillSymbol[S];if(null==la)return A[S];la=A[la];return void 0!==la?la:A[S]}};
$jscomp.polyfill=function(A,S,la,ta){S&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(A,S,la,ta):$jscomp.polyfillUnisolated(A,S,la,ta))};$jscomp.polyfillUnisolated=function(A,S,la,ta){la=$jscomp.global;A=A.split(".");for(ta=0;ta<A.length-1;ta++){var Ba=A[ta];if(!(Ba in la))return;la=la[Ba]}A=A[A.length-1];ta=la[A];S=S(ta);S!=ta&&null!=S&&$jscomp.defineProperty(la,A,{configurable:!0,writable:!0,value:S})};
$jscomp.polyfillIsolated=function(A,S,la,ta){var Ba=A.split(".");A=1===Ba.length;ta=Ba[0];ta=!A&&ta in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Ia=0;Ia<Ba.length-1;Ia++){var Cb=Ba[Ia];if(!(Cb in ta))return;ta=ta[Cb]}Ba=Ba[Ba.length-1];la=$jscomp.IS_SYMBOL_NATIVE&&"es6"===la?ta[Ba]:null;S=S(la);null!=S&&(A?$jscomp.defineProperty($jscomp.polyfills,Ba,{configurable:!0,writable:!0,value:S}):S!==la&&(void 0===$jscomp.propertyToPolyfillSymbol[Ba]&&(la=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[Ba]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Ba):$jscomp.POLYFILL_PREFIX+la+"$"+Ba),$jscomp.defineProperty(ta,$jscomp.propertyToPolyfillSymbol[Ba],{configurable:!0,writable:!0,value:S})))};$jscomp.initSymbol=function(){};$jscomp.iteratorPrototype=function(A){A={next:A};A[Symbol.iterator]=function(){return this};return A};
$jscomp.makeIterator=function(A){var S="undefined"!=typeof Symbol&&Symbol.iterator&&A[Symbol.iterator];if(S)return S.call(A);if("number"==typeof A.length)return $jscomp.arrayIterator(A);throw Error(String(A)+" is not an iterable or ArrayLike");};$jscomp.underscoreProtoCanBeSet=function(){var A={a:!0},S={};try{return S.__proto__=A,S.a}catch(la){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(A,S){A.__proto__=S;if(A.__proto__!==S)throw new TypeError(A+" is not extensible");return A}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(A){if(!(A instanceof Object))throw new TypeError("Iterator result "+A+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(A){this.yieldResult=A};$jscomp.generator.Context.prototype.throw_=function(A){this.abruptCompletion_={exception:A,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(A){this.abruptCompletion_={return:A};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(A){this.abruptCompletion_={jumpTo:A};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(A,S){this.nextAddress=S;return{value:A}};
$jscomp.generator.Context.prototype.yieldAll=function(A,S){A=$jscomp.makeIterator(A);var la=A.next();$jscomp.generator.ensureIteratorResultIsObject_(la);if(la.done)this.yieldResult=la.value,this.nextAddress=S;else return this.yieldAllIterator_=A,this.yield(la.value,S)};$jscomp.generator.Context.prototype.jumpTo=function(A){this.nextAddress=A};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(A,S){this.catchAddress_=A;void 0!=S&&(this.finallyAddress_=S)};$jscomp.generator.Context.prototype.setFinallyBlock=function(A){this.catchAddress_=0;this.finallyAddress_=A||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(A,S){this.nextAddress=A;this.catchAddress_=S||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(A){this.catchAddress_=A||0;A=this.abruptCompletion_.exception;this.abruptCompletion_=null;return A};$jscomp.generator.Context.prototype.enterFinallyBlock=function(A,S,la){la?this.finallyContexts_[la]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=A||0;this.finallyAddress_=S||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(A,S){S=this.finallyContexts_.splice(S||0)[0];if(S=this.abruptCompletion_=this.abruptCompletion_||S){if(S.isException)return this.jumpToErrorHandler_();void 0!=S.jumpTo&&this.finallyAddress_<S.jumpTo?(this.nextAddress=S.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=A};$jscomp.generator.Context.prototype.forIn=function(A){return new $jscomp.generator.Context.PropertyIterator(A)};
$jscomp.generator.Context.PropertyIterator=function(A){this.object_=A;this.properties_=[];for(var S in A)this.properties_.push(S);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var A=this.properties_.pop();if(A in this.object_)return A}return null};$jscomp.generator.Engine_=function(A){this.context_=new $jscomp.generator.Context;this.program_=A};
$jscomp.generator.Engine_.prototype.next_=function(A){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,A,this.context_.next_);this.context_.next_(A);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(A){this.context_.start_();var S=this.context_.yieldAllIterator_;if(S)return this.yieldAllStep_("return"in S?S["return"]:function(la){return{value:la,done:!0}},A,this.context_.return);this.context_.return(A);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(A){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],A,this.context_.next_);this.context_.throw_(A);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(A,S,la){try{var ta=A.call(this.context_.yieldAllIterator_,S);$jscomp.generator.ensureIteratorResultIsObject_(ta);if(!ta.done)return this.context_.stop_(),ta;var Ba=ta.value}catch(Ia){return this.context_.yieldAllIterator_=null,this.context_.throw_(Ia),this.nextStep_()}this.context_.yieldAllIterator_=null;la.call(this.context_,Ba);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var A=this.program_(this.context_);if(A)return this.context_.stop_(),{value:A.value,done:!1}}catch(S){this.context_.yieldResult=void 0,this.context_.throw_(S)}this.context_.stop_();if(this.context_.abruptCompletion_){A=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(A.isException)throw A.exception;return{value:A.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(A){this.next=function(S){return A.next_(S)};this.throw=function(S){return A.throw_(S)};this.return=function(S){return A.return_(S)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(A,S){S=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(S));$jscomp.setPrototypeOf&&A.prototype&&$jscomp.setPrototypeOf(S,A.prototype);return S};
$jscomp.asyncExecutePromiseGenerator=function(A){function S(ta){return A.next(ta)}function la(ta){return A.throw(ta)}return new Promise(function(ta,Ba){function Ia(Cb){Cb.done?ta(Cb.value):Promise.resolve(Cb.value).then(S,la).then(Ia,Ba)}Ia(A.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(A){return $jscomp.asyncExecutePromiseGenerator(A())};$jscomp.asyncExecutePromiseGeneratorProgram=function(A){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(A)))};
$jscomp.polyfill("Promise.allSettled",function(A){function S(ta){return{status:"fulfilled",value:ta}}function la(ta){return{status:"rejected",reason:ta}}return A?A:function(ta){var Ba=this;ta=Array.from(ta,function(Ia){return Ba.resolve(Ia).then(S,la)});return Ba.all(ta)}},"es_2020","es3");
$jscomp.iteratorFromArray=function(A,S){A instanceof String&&(A+="");var la=0,ta=!1,Ba={next:function(){if(!ta&&la<A.length){var Ia=la++;return{value:S(Ia,A[Ia]),done:!1}}ta=!0;return{done:!0,value:void 0}}};Ba[Symbol.iterator]=function(){return Ba};return Ba};$jscomp.polyfill("Array.prototype.values",function(A){return A?A:function(){return $jscomp.iteratorFromArray(this,function(S,la){return la})}},"es8","es3");
$jscomp.polyfill("String.prototype.matchAll",function(A){return A?A:function(S){if(S instanceof RegExp&&!S.global)throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag.");var la=new RegExp(S,S instanceof RegExp?void 0:"g"),ta=this,Ba=!1,Ia={next:function(){if(Ba)return{value:void 0,done:!0};var Cb=la.exec(ta);if(!Cb)return Ba=!0,{value:void 0,done:!0};""===Cb[0]&&(la.lastIndex+=1);return{value:Cb,done:!1}}};Ia[Symbol.iterator]=function(){return Ia};return Ia}},"es_2020",
"es3");
(function(){function A(a,...b){return(...c)=>{c=b.concat(c);return a.apply(null,c)}}function S(a){"@babel/helpers - typeof";return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},S(a)}function la(a,b){la=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return la(a,b)}function ta(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Ba(a,b,c){Ba=ta()?Reflect.construct:function(d,e,f){var g=[null];g.push.apply(g,e);d=new (Function.bind.apply(d,g));f&&la(d,f.prototype);return d};return Ba.apply(null,arguments)}function Ia(a){var b=Array.isArray(a)?Cb(a):void 0;b||(b="undefined"!==typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"]?Array.from(a):void 0);if(!b)a:{if(a){if("string"===
typeof a){b=Cb(a,void 0);break a}b=Object.prototype.toString.call(a).slice(8,-1);"Object"===b&&a.constructor&&(b=a.constructor.name);if("Map"===b||"Set"===b){b=Array.from(a);break a}if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)){b=Cb(a,void 0);break a}}b=void 0}if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function Cb(a,b){if(null==b||b>a.length)b=
a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function Wb(a){return function(b){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return jg(a,b,d)}}function xa(a,b){im&&im(a,null);for(var c=b.length;c--;){var d=b[c];if("string"===typeof d){var e=kg(d);e!==d&&($v(b)||(b[c]=e),d=e)}a[d]=!0}return a}function md(a){var b=aw(null),c;for(c in a)jg(bw,a,[c])&&(b[c]=a[c]);return b}function lg(a,b){for(;null!==a;){var c=cw(a,b);if(c){if(c.get)return Wb(c.get);if("function"===
typeof c.value)return Wb(c.value)}a=dw(a)}return function(d){console.warn("fallback value for",d);return null}}function jm(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"===typeof window?null:window,b=function(F){return jm(F)};b.version="2.3.8";b.removed=[];if(!a||!a.document||9!==a.document.nodeType)return b.isSupported=!1,b;var c=a.document,d=a.document,e=a.DocumentFragment,f=a.HTMLTemplateElement,g=a.Node,h=a.Element,k=a.NodeFilter,l=a.NamedNodeMap,m=void 0===l?a.NamedNodeMap||
a.MozNamedAttrMap:l,n=a.HTMLFormElement,t=a.DOMParser;l=a.trustedTypes;var y=h.prototype,w=lg(y,"cloneNode"),q=lg(y,"nextSibling"),r=lg(y,"childNodes"),v=lg(y,"parentNode");"function"===typeof f&&(f=d.createElement("template"),f.content&&f.content.ownerDocument&&(d=f.content.ownerDocument));var z=ew(l,c),P=z?z.createHTML(""):"";f=d;var N=f.implementation,Y=f.createNodeIterator,O=f.createDocumentFragment,L=f.getElementsByTagName,U=c.importNode;f={};try{f=md(d).documentMode?d.documentMode:{}}catch(F){}var ja=
{};b.isSupported="function"===typeof v&&N&&"undefined"!==typeof N.createHTMLDocument&&9!==f;var qa=fw,Ha=gw,Ra=hw,ab=iw,ca=jw,oa=kw,M=lw,Q=null,Z=xa({},[].concat(Ia(km),Ia(pi),Ia(qi),Ia(ri),Ia(lm))),da=null,J=xa({},[].concat(Ia(mm),Ia(si),Ia(nm),Ia(mg))),ba=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,
value:!1}})),u=null,B=null,D=!0,H=!0,T=!1,ea=!1,sa=!1,Aa=!1,Qb=!1,fc=!1,Xb=!1,nd=!1,od=!0,ti=!0,Me=!1,Vd={},Wd=null,om=xa({},"annotation-xml audio colgroup desc foreignobject head iframe math mi mn mo ms mtext noembed noframes noscript plaintext script style svg template thead title video xmp".split(" ")),pm=null,qm=xa({},"audio video img source image track".split(" ")),ui=null,rm=xa({},"alt class for id label name pattern placeholder role summary title value style xmlns".split(" ")),ng="http://www.w3.org/1999/xhtml",
sm=!1,Xd,mw=["application/xhtml+xml","text/html"],pd,Yd=null,nw=d.createElement("form"),tm=function(F){return F instanceof RegExp||F instanceof Function},vi=function(F){Yd&&Yd===F||(F&&"object"===S(F)||(F={}),F=md(F),Q="ALLOWED_TAGS"in F?xa({},F.ALLOWED_TAGS):Z,da="ALLOWED_ATTR"in F?xa({},F.ALLOWED_ATTR):J,ui="ADD_URI_SAFE_ATTR"in F?xa(md(rm),F.ADD_URI_SAFE_ATTR):rm,pm="ADD_DATA_URI_TAGS"in F?xa(md(qm),F.ADD_DATA_URI_TAGS):qm,Wd="FORBID_CONTENTS"in F?xa({},F.FORBID_CONTENTS):om,u="FORBID_TAGS"in F?
xa({},F.FORBID_TAGS):{},B="FORBID_ATTR"in F?xa({},F.FORBID_ATTR):{},Vd="USE_PROFILES"in F?F.USE_PROFILES:!1,D=!1!==F.ALLOW_ARIA_ATTR,H=!1!==F.ALLOW_DATA_ATTR,T=F.ALLOW_UNKNOWN_PROTOCOLS||!1,ea=F.SAFE_FOR_TEMPLATES||!1,sa=F.WHOLE_DOCUMENT||!1,fc=F.RETURN_DOM||!1,Xb=F.RETURN_DOM_FRAGMENT||!1,nd=F.RETURN_TRUSTED_TYPE||!1,Qb=F.FORCE_BODY||!1,od=!1!==F.SANITIZE_DOM,ti=!1!==F.KEEP_CONTENT,Me=F.IN_PLACE||!1,M=F.ALLOWED_URI_REGEXP||M,ng=F.NAMESPACE||"http://www.w3.org/1999/xhtml",F.CUSTOM_ELEMENT_HANDLING&&
tm(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ba.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&tm(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ba.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ba.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xd=-1===mw.indexOf(F.PARSER_MEDIA_TYPE)?Xd="text/html":Xd=
F.PARSER_MEDIA_TYPE,pd="application/xhtml+xml"===Xd?function(I){return I}:kg,ea&&(H=!1),Xb&&(fc=!0),Vd&&(Q=xa({},Ia(lm)),da=[],!0===Vd.html&&(xa(Q,km),xa(da,mm)),!0===Vd.svg&&(xa(Q,pi),xa(da,si),xa(da,mg)),!0===Vd.svgFilters&&(xa(Q,qi),xa(da,si),xa(da,mg)),!0===Vd.mathMl&&(xa(Q,ri),xa(da,nm),xa(da,mg))),F.ADD_TAGS&&(Q===Z&&(Q=md(Q)),xa(Q,F.ADD_TAGS)),F.ADD_ATTR&&(da===J&&(da=md(da)),xa(da,F.ADD_ATTR)),F.ADD_URI_SAFE_ATTR&&xa(ui,F.ADD_URI_SAFE_ATTR),F.FORBID_CONTENTS&&(Wd===om&&(Wd=md(Wd)),xa(Wd,F.FORBID_CONTENTS)),
ti&&(Q["#text"]=!0),sa&&xa(Q,["html","head","body"]),Q.table&&(xa(Q,["tbody"]),delete u.tbody),xb&&xb(F),Yd=F)},um=xa({},["mi","mo","mn","ms","mtext"]),vm=xa({},["foreignobject","desc","title","annotation-xml"]),ow=xa({},["title","style","font","a","script"]),og=xa({},pi);xa(og,qi);xa(og,pw);var wi=xa({},ri);xa(wi,qw);var vc=function(F){Ne(b.removed,{element:F});try{F.parentNode.removeChild(F)}catch(I){try{F.outerHTML=P}catch(ia){F.remove()}}},pg=function(F,I){try{Ne(b.removed,{attribute:I.getAttributeNode(F),
from:I})}catch(ia){Ne(b.removed,{attribute:null,from:I})}I.removeAttribute(F);if("is"===F&&!da[F])if(fc||Xb)try{vc(I)}catch(ia){}else try{I.setAttribute(F,"")}catch(ia){}},wm=function(F){if(Qb)F="<remove></remove>"+F;else var I=(I=rw(F,/^[\r\n\t ]+/))&&I[0];"application/xhtml+xml"===Xd&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");var ia=z?z.createHTML(F):F;if("http://www.w3.org/1999/xhtml"===ng)try{var na=(new t).parseFromString(ia,Xd)}catch(Za){}if(!na||
!na.documentElement){na=N.createDocument(ng,"template",null);try{na.documentElement.innerHTML=sm?"":ia}catch(Za){}}ia=na.body||na.documentElement;F&&I&&ia.insertBefore(d.createTextNode(I),ia.childNodes[0]||null);return"http://www.w3.org/1999/xhtml"===ng?L.call(na,sa?"html":"body")[0]:sa?na.documentElement:ia},xm=function(F){return Y.call(F.ownerDocument||F,F,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},Oe=function(F){return"object"===S(g)?F instanceof g:F&&"object"===S(F)&&"number"===typeof F.nodeType&&
"string"===typeof F.nodeName},wc=function(F,I,ia){ja[F]&&sw(ja[F],function(na){na.call(b,I,ia,Yd)})},ym=function(F){wc("beforeSanitizeElements",F,null);if(F instanceof n&&("string"!==typeof F.nodeName||"string"!==typeof F.textContent||"function"!==typeof F.removeChild||!(F.attributes instanceof m)||"function"!==typeof F.removeAttribute||"function"!==typeof F.setAttribute||"string"!==typeof F.namespaceURI||"function"!==typeof F.insertBefore)||yb(/[\u0080-\uFFFF]/,F.nodeName))return vc(F),!0;var I=
pd(F.nodeName);wc("uponSanitizeElement",F,{tagName:I,allowedTags:Q});if(!(!F.hasChildNodes()||Oe(F.firstElementChild)||Oe(F.content)&&Oe(F.content.firstElementChild))&&yb(/<[/\w]/g,F.innerHTML)&&yb(/<[/\w]/g,F.textContent)||"select"===I&&yb(/<template/i,F.innerHTML))return vc(F),!0;if(!Q[I]||u[I]){if(!u[I]&&0<I.indexOf("-")&&(ba.tagNameCheck instanceof RegExp&&yb(ba.tagNameCheck,I)||ba.tagNameCheck instanceof Function&&ba.tagNameCheck(I)))return!1;if(ti&&!Wd[I]){I=v(F)||F.parentNode;var ia=r(F)||
F.childNodes;if(ia&&I)for(var na=ia.length-1;0<=na;--na)I.insertBefore(w(ia[na],!0),q(F))}vc(F);return!0}if(ia=F instanceof h){(ia=v(F))&&ia.tagName||(ia={namespaceURI:"http://www.w3.org/1999/xhtml",tagName:"template"});na=kg(F.tagName);var Za=kg(ia.tagName);ia=!("http://www.w3.org/2000/svg"===F.namespaceURI?"http://www.w3.org/1999/xhtml"===ia.namespaceURI?"svg"===na:"http://www.w3.org/1998/Math/MathML"===ia.namespaceURI?"svg"===na&&("annotation-xml"===Za||um[Za]):og[na]:"http://www.w3.org/1998/Math/MathML"===
F.namespaceURI?"http://www.w3.org/1999/xhtml"===ia.namespaceURI?"math"===na:"http://www.w3.org/2000/svg"===ia.namespaceURI?"math"===na&&vm[Za]:wi[na]:"http://www.w3.org/1999/xhtml"===F.namespaceURI&&("http://www.w3.org/2000/svg"===ia.namespaceURI&&!vm[Za]||"http://www.w3.org/1998/Math/MathML"===ia.namespaceURI&&!um[Za]?0:!wi[na]&&(ow[na]||!og[na])))}if(ia||("noscript"===I||"noembed"===I)&&yb(/<\/no(script|embed)/i,F.innerHTML))return vc(F),!0;ea&&3===F.nodeType&&(I=F.textContent,I=Ic(I,qa," "),I=
Ic(I,Ha," "),F.textContent!==I&&(Ne(b.removed,{element:F.cloneNode()}),F.textContent=I));wc("afterSanitizeElements",F,null);return!1},zm=function(F,I,ia){if(od&&("id"===I||"name"===I)&&(ia in d||ia in nw))return!1;if(!H||B[I]||!yb(Ra,I))if(!D||!yb(ab,I))if(!da[I]||B[I]){if(!(0<F.indexOf("-")&&(ba.tagNameCheck instanceof RegExp&&yb(ba.tagNameCheck,F)||ba.tagNameCheck instanceof Function&&ba.tagNameCheck(F))&&(ba.attributeNameCheck instanceof RegExp&&yb(ba.attributeNameCheck,I)||ba.attributeNameCheck instanceof
Function&&ba.attributeNameCheck(I))||"is"===I&&ba.allowCustomizedBuiltInElements&&(ba.tagNameCheck instanceof RegExp&&yb(ba.tagNameCheck,ia)||ba.tagNameCheck instanceof Function&&ba.tagNameCheck(ia))))return!1}else if(!(ui[I]||yb(M,Ic(ia,oa,""))||("src"===I||"xlink:href"===I||"href"===I)&&"script"!==F&&0===tw(ia,"data:")&&pm[F]||T&&!yb(ca,Ic(ia,oa,"")))&&ia)return!1;return!0},Bm=function(F){var I,ia;wc("beforeSanitizeAttributes",F,null);var na=F.attributes;if(na){var Za={attrName:"",attrValue:"",
keepAttr:!0,allowedAttributes:da};for(ia=na.length;ia--;){var qd=I=na[ia],Jc=qd.name;qd=qd.namespaceURI;I="value"===Jc?I.value:uw(I.value);var Am=pd(Jc);var vw=I;Za.attrName=Am;Za.attrValue=I;Za.keepAttr=!0;Za.forceKeepAttr=void 0;wc("uponSanitizeAttribute",F,Za);I=Za.attrValue;if(!Za.forceKeepAttr)if(Za.keepAttr)if(yb(/\/>/i,I))pg(Jc,F);else{ea&&(I=Ic(I,qa," "),I=Ic(I,Ha," "));var ww=pd(F.nodeName);if(!zm(ww,Am,I))pg(Jc,F);else if(I!==vw)try{qd?F.setAttributeNS(qd,Jc,I):F.setAttribute(Jc,I)}catch(BM){pg(Jc,
F)}}else pg(Jc,F)}wc("afterSanitizeAttributes",F,null)}},xw=function ia(I){var na,Za=xm(I);for(wc("beforeSanitizeShadowDOM",I,null);na=Za.nextNode();)wc("uponSanitizeShadowNode",na,null),ym(na)||(na.content instanceof e&&ia(na.content),Bm(na));wc("afterSanitizeShadowDOM",I,null)};b.sanitize=function(I,ia){(sm=!I)&&(I="\x3c!--\x3e");if("string"!==typeof I&&!Oe(I)){if("function"!==typeof I.toString)throw xi("toString is not a function");I=I.toString();if("string"!==typeof I)throw xi("dirty is not a string, aborting");
}if(!b.isSupported){if("object"===S(a.toStaticHTML)||"function"===typeof a.toStaticHTML){if("string"===typeof I)return a.toStaticHTML(I);if(Oe(I))return a.toStaticHTML(I.outerHTML)}return I}Aa||vi(ia);b.removed=[];"string"===typeof I&&(Me=!1);if(Me){if(I.nodeName&&(ia=pd(I.nodeName),!Q[ia]||u[ia]))throw xi("root node is forbidden and cannot be sanitized in-place");}else if(I instanceof g){var na=wm("\x3c!----\x3e");ia=na.ownerDocument.importNode(I,!0);1===ia.nodeType&&"BODY"===ia.nodeName?na=ia:"HTML"===
ia.nodeName?na=ia:na.appendChild(ia)}else{if(!fc&&!ea&&!sa&&-1===I.indexOf("<"))return z&&nd?z.createHTML(I):I;na=wm(I);if(!na)return fc?null:nd?P:""}na&&Qb&&vc(na.firstChild);for(var Za=xm(Me?I:na);ia=Za.nextNode();)if((3!==ia.nodeType||ia!==qd)&&!ym(ia)){ia.content instanceof e&&xw(ia.content);Bm(ia);var qd=ia}if(Me)return I;if(fc){if(Xb)for(I=O.call(na.ownerDocument);na.firstChild;)I.appendChild(na.firstChild);else I=na;da.shadowroot&&(I=U.call(c,I,!0));return I}I=sa?na.outerHTML:na.innerHTML;
sa&&Q["!doctype"]&&na.ownerDocument&&na.ownerDocument.doctype&&na.ownerDocument.doctype.name&&yb(yw,na.ownerDocument.doctype.name)&&(I="<!DOCTYPE "+na.ownerDocument.doctype.name+">\n"+I);ea&&(I=Ic(I,qa," "),I=Ic(I,Ha," "));return z&&nd?z.createHTML(I):I};b.setConfig=function(I){vi(I);Aa=!0};b.clearConfig=function(){Yd=null;Aa=!1};b.isValidAttribute=function(I,ia,na){Yd||vi({});I=pd(I);ia=pd(ia);return zm(I,ia,na)};b.addHook=function(I,ia){"function"===typeof ia&&(ja[I]=ja[I]||[],Ne(ja[I],ia))};b.removeHook=
function(I){if(ja[I])return zw(ja[I])};b.removeHooks=function(I){ja[I]&&(ja[I]=[])};b.removeAllHooks=function(){ja={}};return b}var Cm=function(a){if(null===a)return"null";if(void 0===a)return"undefined";var b=typeof a;return"object"===b&&(Array.prototype.isPrototypeOf(a)||a.constructor&&"Array"===a.constructor.name)?"array":"object"===b&&(String.prototype.isPrototypeOf(a)||a.constructor&&"String"===a.constructor.name)?"string":b},Aw=function(a,b){return{eq:function(c,d){return a.eq(b(c),b(d))}}},
Bw={eq:function(a,b){return a===b}},Dm=function(a){return{eq:function(b,c){if(b.length!==c.length)return!1;for(var d=b.length,e=0;e<d;e++)if(!a.eq(b[e],c[e]))return!1;return!0}}},Cw=function(a,b){return Aw(Dm(a),function(c){return Array.prototype.slice.call(c).sort(b)})},Em=function(a){return{eq:function(b,c){var d=Object.keys(b),e=Object.keys(c);if(!Cw(Bw).eq(d,e))return!1;e=d.length;for(var f=0;f<e;f++){var g=d[f];if(!a.eq(b[g],c[g]))return!1}return!0}}},yi={eq:function(a,b){if(a===b)return!0;var c=
Cm(a),d=Cm(b);return c!==d?!1:-1!=="undefined boolean number string function xml null".split(" ").indexOf(c)?a===b:"array"===c?Dm(yi).eq(a,b):"object"===c?Em(yi).eq(a,b):!1}};const Dw=Object.getPrototypeOf,Fm=(a,b,c)=>{var d;return c(a,b.prototype)?!0:(null===(d=a.constructor)||void 0===d?void 0:d.name)===b.name},Ew=a=>{const b=typeof a;return null===a?"null":"object"===b&&Array.isArray(a)?"array":"object"===b&&Fm(a,String,(c,d)=>d.isPrototypeOf(c))?"string":b},zi=a=>b=>Ew(b)===a,Ai=a=>b=>typeof b===
a,Gm=a=>b=>a===b,Zd=(a,b)=>jb(a)&&Fm(a,b,(c,d)=>Dw(c)===d),fa=zi("string"),jb=zi("object"),Sa=zi("array"),zb=Gm(null),rd=Ai("boolean"),db=Gm(void 0),aa=a=>null===a||void 0===a,Ma=a=>!(null===a||void 0===a),ya=Ai("function"),Yb=Ai("number"),$d=(a,b)=>{if(Sa(a)){for(let c=0,d=a.length;c<d;++c)if(!b(a[c]))return!1;return!0}return!1},pa=()=>{},Kc=(a,b)=>(...c)=>a(b.apply(null,c)),Hm=(a,b)=>c=>a(b(c)),R=a=>()=>a,Ka=a=>a,Fw=(a,b)=>a===b,qg=a=>b=>!a(b),Im=a=>()=>{throw Error(a);},Bi=a=>a(),Pe=a=>{a()},za=
R(!1),Qa=R(!0);class p{constructor(a,b){this.tag=a;this.value=b}static some(a){return new p(!0,a)}static none(){return p.singletonNone}fold(a,b){return this.tag?b(this.value):a()}isSome(){return this.tag}isNone(){return!this.tag}map(a){return this.tag?p.some(a(this.value)):p.none()}bind(a){return this.tag?a(this.value):p.none()}exists(a){return this.tag&&a(this.value)}forall(a){return!this.tag||a(this.value)}filter(a){return!this.tag||a(this.value)?this:p.none()}getOr(a){return this.tag?this.value:
a}or(a){return this.tag?this:a}getOrThunk(a){return this.tag?this.value:a()}orThunk(a){return this.tag?this:a()}getOrDie(a){if(this.tag)return this.value;throw Error(null!==a&&void 0!==a?a:"Called getOrDie on None");}static from(a){return aa(a)?p.none():p.some(a)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(a){this.tag&&a(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);
const Ci=Array.prototype.slice,Ca=Array.prototype.indexOf,Gw=Array.prototype.push,Hw=(a,b)=>{a=Ca.call(a,b);return-1===a?p.none():p.some(a)},Qe=(a,b)=>-1<Ca.call(a,b),Na=(a,b)=>{for(let c=0,d=a.length;c<d;c++)if(b(a[c],c))return!0;return!1},wa=(a,b)=>{const c=a.length,d=Array(c);for(let e=0;e<c;e++)d[e]=b(a[e],e);return d},G=(a,b)=>{for(let c=0,d=a.length;c<d;c++)b(a[c],c)},Jm=(a,b)=>{for(let c=a.length-1;0<=c;c--)b(a[c],c)},Re=(a,b)=>{const c=[],d=[];for(let e=0,f=a.length;e<f;e++){const g=a[e];
(b(g,e)?c:d).push(g)}return{pass:c,fail:d}},ka=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d++){const f=a[d];b(f,d)&&c.push(f)}return c},Se=(a,b,c)=>{Jm(a,(d,e)=>{c=b(c,d,e)});return c},Db=(a,b,c)=>{G(a,(d,e)=>{c=b(c,d,e)});return c},Te=(a,b,c)=>{for(let d=0,e=a.length;d<e;d++){const f=a[d];if(b(f,d))return p.some(f);if(c(f,d))break}return p.none()},Oa=(a,b)=>Te(a,b,za),Ue=(a,b)=>{for(let c=0,d=a.length;c<d;c++)if(b(a[c],c))return p.some(c);return p.none()},rg=a=>{const b=[];for(let c=0,d=a.length;c<
d;++c){if(!Sa(a[c]))throw Error("Arr.flatten item "+c+" was not an array, input: "+a);Gw.apply(b,a[c])}return b},gc=(a,b)=>rg(wa(a,b)),Lc=(a,b)=>{for(let c=0,d=a.length;c<d;++c)if(!0!==b(a[c],c))return!1;return!0},ae=a=>{a=Ci.call(a,0);a.reverse();return a},sg=(a,b)=>ka(a,c=>!(-1<Ca.call(b,c))),Di=(a,b)=>{const c={};for(let d=0,e=a.length;d<e;d++){const f=a[d];c[String(f)]=b(f,d)}return c},sd=(a,b)=>{a=Ci.call(a,0);a.sort(b);return a},$a=(a,b)=>0<=b&&b<a.length?p.some(a[b]):p.none(),Ve=a=>$a(a,a.length-
1),qb=ya(Array.from)?Array.from:a=>Ci.call(a),be=(a,b)=>{for(let c=0;c<a.length;c++){const d=b(a[c],c);if(d.isSome())return d}return p.none()},Iw=(a,b)=>{const c=[],d=ya(b)?e=>Na(c,f=>b(f,e)):e=>-1<Ca.call(c,e);for(let e=0,f=a.length;e<f;e++){const g=a[e];d(g)||c.push(g)}return c},rb=Object.keys,ha=Object.hasOwnProperty,Ea=(a,b)=>{const c=rb(a);for(let d=0,e=c.length;d<e;d++){const f=c[d];b(a[f],f)}},tg=(a,b)=>Jw(a,(c,d)=>({k:d,v:b(c,d)})),Jw=(a,b)=>{const c={};Ea(a,(d,e)=>{d=b(d,e);c[d.k]=d.v});
return c},Ei=a=>(b,c)=>{a[c]=b},Km=(a,b,c,d)=>{Ea(a,(e,f)=>{(b(e,f)?c:d)(e,f)})},Kw=(a,b)=>{const c={},d={};Km(a,b,Ei(c),Ei(d));return{t:c,f:d}},We=(a,b)=>{const c={};Km(a,b,Ei(c),pa);return c},Xe=(a,b)=>{const c=[];Ea(a,(d,e)=>{c.push(b(d,e))});return c},Fa=(a,b)=>ha.call(a,b)?p.from(a[b]):p.none(),ra=(a,b)=>ha.call(a,b)&&void 0!==a[b]&&null!==a[b],Lm=a=>{const b={};G(a,c=>{b[c]={}});return rb(b)},Fi=Array.isArray,ug=(a,b,c)=>{if(!a)return!1;c=c||a;if(void 0!==a.length)for(let d=0,e=a.length;d<e;d++){if(!1===
b.call(c,a[d],d,a))return!1}else for(const d in a)if(ha.call(a,d)&&!1===b.call(c,a[d],d,a))return!1;return!0},Gi=(a,b)=>{const c=[];ug(a,(d,e)=>{c.push(b(d,e,a))});return c},Ye=(a,b)=>{const c=[];ug(a,(d,e)=>{b&&!b(d,e,a)||c.push(d)});return c},vg=(a,b,c,d)=>{c=db(c)?a[0]:c;for(let e=0;e<a.length;e++)c=b.call(d,c,a[e],e);return c},Mm=(a,b,c)=>{for(let d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return d;return-1},ce=a=>a[a.length-1],td=a=>{let b=!1,c;return(...d)=>{b||(b=!0,c=a.apply(null,d));return c}},
Lw=(a,b,c,d)=>{const e=a.isiOS()&&!0===/ipad/i.test(c),f=a.isiOS()&&!e;var g=a.isiOS()||a.isAndroid();const h=g||d("(pointer:coarse)");d=e||!f&&g&&d("(min-device-width:768px)");g=f||g&&!d;b=b.isSafari()&&a.isiOS()&&!1===/safari/i.test(c);c=!g&&!d&&!b;return{isiPad:R(e),isiPhone:R(f),isTablet:R(d),isPhone:R(g),isTouch:R(h),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:R(b),isDesktop:R(c)}},Nm=(a,b)=>({major:a,minor:b}),Ze={nu:Nm,detect:(a,b)=>{b=String(b).toLowerCase();if(0===a.length)b={major:0,minor:0};
else{a:{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(b)){a=d;break a}}a=void 0}b=a?Nm(Number(b.replace(a,"$1")),Number(b.replace(a,"$2"))):{major:0,minor:0}}return b},unknown:()=>({major:0,minor:0})},Mw=(a,b)=>be(b.brands,c=>{const d=c.brand.toLowerCase();return Oa(a,e=>{var f;return d===(null===(f=e.brand)||void 0===f?void 0:f.toLowerCase())}).map(e=>({current:e.name,version:Ze.nu(parseInt(c.version,10),0)}))}),Om=(a,b)=>{const c=String(b).toLowerCase();return Oa(a,d=>d.search(c))},Nw=(a,b)=>
Om(a,b).map(c=>{const d=Ze.detect(c.versionRegexes,b);return{current:c.name,version:d}}),Ow=(a,b)=>Om(a,b).map(c=>{const d=Ze.detect(c.versionRegexes,b);return{current:c.name,version:d}}),Ua=(a,b,c)=>""===b||a.length>=b.length&&a.substr(c,c+b.length)===b,eb=(a,b,c,d)=>{a=a.indexOf(b,void 0===c?0:c);return-1!==a?db(d)?!0:a+b.length<=d:!1},Hi=(a,b)=>Ua(a,b,a.length-b.length),Ii=a=>b=>_.isString(b)?b.replace(a,""):"",de=Ii(/^\s+|\s+$/g),Pw=Ii(/^\s+/g),Pm=Ii(/\s+$/g),Qm=a=>0<a.length,Qw=(a,b)=>0>=b?"":
Array(b+1).join(a),$e=(a,b)=>{a=parseInt(a,void 0===b?10:b);return isNaN(a)?p.none():p.some(a)},Ji=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,xc=a=>b=>eb(b,a),Rw=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:a=>eb(a,"edge/")&&eb(a,"chrome")&&eb(a,"safari")&&eb(a,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ji],search:a=>eb(a,"chrome")&&!eb(a,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],
search:a=>eb(a,"msie")||eb(a,"trident")},{name:"Opera",versionRegexes:[Ji,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:xc("firefox")},{name:"Safari",versionRegexes:[Ji,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:a=>(eb(a,"safari")||eb(a,"mobile/"))&&eb(a,"applewebkit")}],Sw=[{name:"Windows",search:xc("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:a=>eb(a,"iphone")||eb(a,"ipad"),versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,
/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xc("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:xc("mac os x"),versionRegexes:[/.*?mac os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xc("linux"),versionRegexes:[]},{name:"Solaris",search:xc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rm=
{browsers:R(Rw),oses:R(Sw)},Sm=a=>{const b=a.current,c=d=>()=>b===d;return{current:b,version:a.version,isEdge:c("Edge"),isChromium:c("Chromium"),isIE:c("IE"),isOpera:c("Opera"),isFirefox:c("Firefox"),isSafari:c("Safari")}};var Tw=()=>Sm({current:void 0,version:Ze.unknown()});R("Edge");R("Chromium");R("IE");R("Opera");R("Firefox");R("Safari");const Tm=a=>{const b=a.current,c=d=>()=>b===d;return{current:b,version:a.version,isWindows:c("Windows"),isiOS:c("iOS"),isAndroid:c("Android"),isMacOS:c("macOS"),
isLinux:c("Linux"),isSolaris:c("Solaris"),isFreeBSD:c("FreeBSD"),isChromeOS:c("ChromeOS")}};var Uw=()=>Tm({current:void 0,version:Ze.unknown()});R("Windows");R("iOS");R("Android");R("Linux");R("macOS");R("Solaris");R("FreeBSD");R("ChromeOS");const Vw={detect:(a,b,c)=>{const d=Rm.browsers();var e=Rm.oses();b=b.bind(f=>Mw(d,f)).orThunk(()=>Nw(d,a)).fold(Tw,Sm);e=Ow(e,a).fold(Uw,Tm);c=Lw(e,b,a,c);return{browser:b,os:e,deviceType:c}}},Ww=a=>window.matchMedia(a).matches;let hc=td(()=>Vw.detect(navigator.userAgent,
p.from(navigator.userAgentData),Ww));const Xw=navigator.userAgent,Ki=hc(),ic=Ki.browser,jc=Ki.os,ud=Ki.deviceType,Yw=-1!==Xw.indexOf("Windows Phone"),ua={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ic.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ic.isIE(),windowsPhone:Yw,browser:{current:ic.current,version:ic.version,isChromium:ic.isChromium,isEdge:ic.isEdge,isFirefox:ic.isFirefox,isIE:ic.isIE,isOpera:ic.isOpera,
isSafari:ic.isSafari},os:{current:jc.current,version:jc.version,isAndroid:jc.isAndroid,isChromeOS:jc.isChromeOS,isFreeBSD:jc.isFreeBSD,isiOS:jc.isiOS,isLinux:jc.isLinux,isMacOS:jc.isMacOS,isSolaris:jc.isSolaris,isWindows:jc.isWindows},deviceType:{isDesktop:ud.isDesktop,isiPad:ud.isiPad,isiPhone:ud.isiPhone,isPhone:ud.isPhone,isTablet:ud.isTablet,isTouch:ud.isTouch,isWebView:ud.isWebView}},Zw=/^\s*|\s*$/g,Um=a=>null===a||void 0===a?"":(""+a).replace(Zw,""),Vm=function(a,b,c,d){d=d||this;a&&(c&&(a=
a[c]),ug(a,(e,f)=>{if(!1===b.call(d,e,f,c))return!1;Vm(e,b,c,d);return!0}))},K={trim:Um,isArray:Fi,is:(a,b)=>b?"array"===b&&Fi(a)?!0:typeof a===b:void 0!==a,toArray:a=>{if(Fi(a))return a;const b=[];for(let c=0,d=a.length;c<d;c++)b[c]=a[c];return b},makeMap:(a,b,c)=>{c=void 0===c?{}:c;a=fa(a)?a.split(b||","):a||[];for(b=a.length;b--;)c[a[b]]={};return c},each:ug,map:Gi,grep:Ye,inArray:(a,b)=>{if(a)for(let c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},hasOwn:(a,b)=>ha.call(a,b),extend:(a,...b)=>
{for(let c=0;c<b.length;c++){const d=b[c];for(const e in d)if(ha.call(d,e)){const f=d[e];void 0!==f&&(a[e]=f)}}return a},walk:Vm,resolve:(a,b)=>{b=void 0===b?window:b;a=a.split(".");for(let c=0,d=a.length;c<d&&(b=b[a[c]],b);c++);return b},explode:(a,b)=>Sa(a)?a:""===a?[]:Gi(a.split(b||","),Um),_addCacheSuffix:a=>{const b=ua.cacheSuffix;b&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}},ee=(a,b,c)=>{c=void 0===c?Fw:c;return a.exists(d=>c(d,b))},$w=a=>{const b=[],c=d=>{b.push(d)};for(let d=0;d<a.length;d++)a[d].each(c);
return b},sb=(a,b,c)=>a.isSome()&&b.isSome()?p.some(c(a.getOrDie(),b.getOrDie())):p.none(),ax=(a,b,c,d)=>a.isSome()&&b.isSome()&&c.isSome()?p.some(d(a.getOrDie(),b.getOrDie(),c.getOrDie())):p.none(),fe=(a,b)=>a?p.some(b):p.none(),bx="undefined"!==typeof window?window:Function("return this;")(),Wm=(a,b)=>{a=a.split(".");b=void 0!==b&&null!==b?b:bx;for(let c=0;c<a.length&&void 0!==b&&null!==b;++c)b=b[a[c]];return b},cx=Object.getPrototypeOf,wg=a=>b=>b.dom.nodeType===a,Li=a=>{var b;if(b=tb(a)){a=a.dom;
const c=Wm("ownerDocument.defaultView",a);if(b=jb(a)){b=Wm("HTMLElement",c);if(void 0===b||null===b)throw Error("HTMLElement not available on this browser");b=b.prototype.isPrototypeOf(a)||/^HTML\w*Element$/.test(cx(a).constructor.name)}}return b},tb=wg(1),Ib=wg(3),dx=wg(9),ex=wg(11),Mi=a=>b=>tb(b)&&b.dom.nodeName.toLowerCase()===a,Va=(a,b,c)=>{if(fa(c)||rd(c)||Yb(c))a.setAttribute(b,c+"");else throw console.error("Invalid call to Attribute.set. Key ",b,":: Value ",c,":: Element ",a),Error("Attribute value was not simple");
},fx=(a,b,c)=>{Va(a.dom,b,c)},Mc=(a,b)=>{const c=a.dom;Ea(b,(d,e)=>{Va(c,e,d)})},fb=(a,b)=>{a=a.dom.getAttribute(b);return null===a?void 0:a},af=(a,b)=>p.from(fb(a,b)),xg=(a,b)=>(a=a.dom)&&a.hasAttribute?a.hasAttribute(b):!1,bf=(a,b)=>{a.dom.removeAttribute(b)},gx=a=>{a=a.dom.attributes;return void 0===a||null===a||0===a.length},Xm=a=>Db(a.dom.attributes,(b,c)=>{b[c.name]=c.value;return b},{}),yg=(a,b)=>{a=fb(a,b);return void 0===a||""===a?[]:a.split(" ")},Ym=(a,b,c)=>{c=yg(a,b).concat([c]).join(" ");
Va(a.dom,b,c);return!0},Zm=(a,b,c)=>{const d=ka(yg(a,b),e=>e!==c);0<d.length?fx(a,b,d.join(" ")):a.dom.removeAttribute(b);return!1},ge=(a,b)=>{void 0!==a.dom.classList?""!==b&&a.dom.classList.add(b):Ym(a,"class",b)},$m=a=>{0===(void 0!==a.dom.classList?a.dom.classList:yg(a,"class")).length&&a.dom.removeAttribute("class")},he=(a,b)=>{if(void 0!==a.dom.classList){const c=a.dom.classList;""!==b&&c.remove(b)}else Zm(a,"class",b);$m(a)},Ni=(a,b)=>void 0!==a.dom.classList&&a.dom.classList.contains(b),cf=
a=>{if(null===a||void 0===a)throw Error("Node cannot be null or undefined");return{dom:a}},x={fromHtml:(a,b)=>{b=(b||document).createElement("div");b.innerHTML=a;if(!b.hasChildNodes()||1<b.childNodes.length)throw console.error("HTML does not have a single root node",a),Error("HTML does not have a single root node");return cf(b.childNodes[0])},fromTag:(a,b)=>{a=(b||document).createElement(a);return cf(a)},fromText:(a,b)=>{a=(b||document).createTextNode(a);return cf(a)},fromDom:cf,fromPoint:(a,b,c)=>
p.from(a.dom.elementFromPoint(b,c)).map(cf)},zg=(a,b)=>{const c=[],d=e=>{c.push(e);return b(e)};a=b(a);do a=a.bind(d);while(a.isSome());return c},Zb=(a,b)=>{a=a.dom;if(1!==a.nodeType)return!1;if(void 0!==a.matches)return a.matches(b);if(void 0!==a.msMatchesSelector)return a.msMatchesSelector(b);if(void 0!==a.webkitMatchesSelector)return a.webkitMatchesSelector(b);if(void 0!==a.mozMatchesSelector)return a.mozMatchesSelector(b);throw Error("Browser lacks native selectors");},Ab=(a,b)=>{b=void 0===b?
document:b.dom;return 1!==b.nodeType&&9!==b.nodeType&&11!==b.nodeType||0===b.childElementCount?[]:wa(b.querySelectorAll(a),x.fromDom)},df=(a,b)=>{b=void 0===b?document:b.dom;return 1!==b.nodeType&&9!==b.nodeType&&11!==b.nodeType||0===b.childElementCount?p.none():p.from(b.querySelector(a)).map(x.fromDom)},yc=(a,b)=>a.dom===b.dom,zc=(a,b)=>{a=a.dom;b=b.dom;return a===b?!1:a.contains(b)},Jb=a=>dx(a)?a:x.fromDom(a.dom.ownerDocument),Rb=a=>p.from(a.dom.parentNode).map(x.fromDom),an=(a,b)=>{b=ya(b)?b:za;
var c=a.dom;for(a=[];null!==c.parentNode&&void 0!==c.parentNode;){c=c.parentNode;const d=x.fromDom(c);a.push(d);if(!0===b(d))break}return a},hx=a=>Rb(a).map(bb).map(b=>ka(b,c=>a.dom!==c.dom)).getOr([]),Nc=a=>p.from(a.dom.previousSibling).map(x.fromDom),ie=a=>p.from(a.dom.nextSibling).map(x.fromDom),bb=a=>wa(a.dom.childNodes,x.fromDom),kc=(a,b)=>p.from(a.dom.childNodes[b]).map(x.fromDom),Oi=a=>ex(a)&&!aa(a.dom.host),bn=ya(Element.prototype.attachShadow)&&ya(Node.prototype.getRootNode),ix=R(bn),Oc=
bn?a=>x.fromDom(a.dom.getRootNode()):Jb,Pi=a=>{if(!Oi(a)){a=Jb(a).dom.head;if(null===a||void 0===a)throw Error("Head is not available yet");a=x.fromDom(a)}return a},jx=a=>{a=Oc(a);return Oi(a)?p.some(a):p.none()},kx=a=>x.fromDom(a.dom.host),cn=a=>{if(ix()&&!aa(a.target)){var b=x.fromDom(a.target);if(tb(b)&&Ma(b.dom.shadowRoot)&&a.composed&&a.composedPath&&(b=a.composedPath()))return $a(b,0)}return p.from(a.target)},je=a=>{const b=Ib(a)?a.dom.parentNode:a.dom;if(void 0===b||null===b||null===b.ownerDocument)return!1;
const c=b.ownerDocument;return jx(x.fromDom(b)).fold(()=>c.body.contains(b),Hm(je,kx))};var dn=(a,b,c,d,e)=>a(c,d)?p.some(c):ya(e)&&e(c)?p.none():b(c,d,e);const Ac=(a,b,c)=>{a=a.dom;for(c=ya(c)?c:za;a.parentNode;){a=a.parentNode;const d=x.fromDom(a);if(b(d))return p.some(d);if(c(d))break}return p.none()},vd=(a,b,c)=>dn((d,e)=>e(d),Ac,a,b,c),mx=(a,b)=>{const c=a.dom;return c.parentNode?lx(x.fromDom(c.parentNode),d=>a.dom!==d.dom&&b(d)):p.none()},lx=(a,b)=>Te(a.dom.childNodes,c=>b(x.fromDom(c)),za).map(x.fromDom),
nx=(a,b)=>{const c=d=>{for(let f=0;f<d.childNodes.length;f++){var e=x.fromDom(d.childNodes[f]);if(b(e))return p.some(e);e=c(d.childNodes[f]);if(e.isSome())return e}return p.none()};return c(a.dom)},$b=(a,b,c)=>Ac(a,d=>Zb(d,b),c),en=(a,b)=>df(b,a),Pc=(a,b,c)=>dn((d,e)=>Zb(d,e),$b,a,b,c),wd=(a,b)=>{b=void 0===b?!1:b;return je(a)?a.dom.isContentEditable:Pc(a,"[contenteditable]").fold(R(b),c=>"true"===c.dom.contentEditable)},ef=a=>void 0!==a.style&&ya(a.style.getPropertyValue),Qi=(a,b,c)=>{if(!fa(c))throw console.error("Invalid call to CSS.set. Property ",
b,":: Value ",c,":: Element ",a),Error("CSS value must be a string: "+c);ef(a)&&a.style.setProperty(b,c)},Ag=(a,b)=>{const c=a.dom;Ea(b,(d,e)=>{Qi(c,e,d)})},lc=(a,b)=>{const c=a.dom,d=window.getComputedStyle(c).getPropertyValue(b);return""!==d||je(a)?d:fn(c,b)},fn=(a,b)=>ef(a)?a.style.getPropertyValue(b):"",Bg=(a,b)=>{a=fn(a.dom,b);return p.from(a).filter(c=>0<c.length)},gn=a=>{const b={};a=a.dom;if(ef(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);b[d]=a.style[d]}return b},hn=(a,b)=>
{var c=a.dom;ef(c)&&c.style.removeProperty(b);ee(p.from(fb(a,"style")).map(de),"")&&a.dom.removeAttribute("style")},Bb=(a,b)=>{Rb(a).each(c=>{c.dom.insertBefore(b.dom,a.dom)})},Qc=(a,b)=>{ie(a).fold(()=>{Rb(a).each(c=>{c.dom.appendChild(b.dom)})},c=>{Bb(c,b)})},jn=(a,b)=>{kc(a,0).fold(()=>{a.dom.appendChild(b.dom)},c=>{a.dom.insertBefore(b.dom,c.dom)})},Ri=(a,b)=>{a.dom.appendChild(b.dom)},ox=(a,b)=>{G(b,(c,d)=>{Qc(0===d?a:b[d-1],c)})},xd=(a,b)=>{G(b,c=>{a.dom.appendChild(c.dom)})},ke=a=>{a.dom.textContent=
"";G(bb(a),b=>{Ja(b)})},Ja=a=>{a=a.dom;null!==a.parentNode&&a.parentNode.removeChild(a)},Bc=a=>{const b=bb(a);0<b.length&&ox(a,b);Ja(a)},Cg=(a,b)=>{var c=x.fromDom(a.dom.ownerDocument).dom;const d=x.fromDom(c.createDocumentFragment());c=(c||document).createElement("div");c.innerHTML=b;b=bb(x.fromDom(c));xd(d,b);ke(a);a.dom.appendChild(d.dom)},px=a=>{const b=x.fromDom(cn(a).getOr(a.target)),c=()=>a.stopPropagation(),d=()=>a.preventDefault(),e=Kc(d,c);return{target:b,x:a.clientX,y:a.clientY,stop:c,
prevent:d,kill:e,raw:a}},qx=(a,b)=>c=>{a(c)&&b(px(c))},rx=(a,b,c,d)=>{a.dom.removeEventListener(b,c,d)},kn=(a,b)=>({left:a,top:b,translate:(c,d)=>kn(a+c,b+d)}),le=kn,Dg=(a,b)=>void 0!==a?a:void 0!==b?b:0,Si=a=>{const b=a.dom,c=b.ownerDocument.body;if(c===b)return le(c.offsetLeft,c.offsetTop);if(!je(a))return le(0,0);a=b.getBoundingClientRect();return le(a.left,a.top)},Ti=a=>{a=void 0!==a?a.dom:document;return le(a.body.scrollLeft||a.documentElement.scrollLeft,a.body.scrollTop||a.documentElement.scrollTop)},
ln=(a,b)=>{hc().browser.isSafari()&&ya(a.dom.scrollIntoViewIfNeeded)?a.dom.scrollIntoViewIfNeeded(!1):a.dom.scrollIntoView(b)},sx=a=>{a=void 0===a?window:a;return hc().browser.isFirefox()?p.none():p.from(a.visualViewport)},mn=(a,b,c,d)=>({x:a,y:b,width:c,height:d,right:a+c,bottom:b+d}),nn=a=>{const b=void 0===a?window:a,c=Ti(x.fromDom(b.document));return sx(b).fold(()=>{const d=b.document.documentElement;return mn(c.left,c.top,d.clientWidth,d.clientHeight)},d=>mn(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,
c.top),d.width,d.height))},tx=(a,b)=>ka(bb(a),b),on=(a,b)=>{let c=[];G(bb(a),d=>{b(d)&&(c=c.concat([d]));c=c.concat(on(d,b))});return c},me=(a,b)=>Ab(b,a);class Ta{constructor(a,b){this.node=a;this.rootNode=b;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this)}current(){return this.node}next(a){return this.node=this.findSibling(this.node,"firstChild","nextSibling",a)}prev(a){return this.node=this.findSibling(this.node,
"lastChild","previousSibling",a)}prev2(a){return this.node=this.findPreviousNode(this.node,a)}findSibling(a,b,c,d){if(a){if(!d&&a[b])return a[b];if(a!==this.rootNode){if(b=a[c])return b;for(a=a.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(b=a[c])return b}}}findPreviousNode(a,b){if(a){var c=a.previousSibling;if(!this.rootNode||c!==this.rootNode){if(c){if(!b)for(a=c.lastChild;a;a=a.lastChild)if(!a.lastChild)return a;return c}if((c=a.parentNode)&&c!==this.rootNode)return c}}}}const yd=a=>b=>!!b&&
b.nodeType===a,pn=a=>!!a&&!Object.getPrototypeOf(a),V=yd(1),ff=a=>{const b=a.toLowerCase();return c=>!aa(c)&&c.nodeName.toLowerCase()===b},ac=a=>{const b=a.map(c=>c.toLowerCase());return c=>c&&c.nodeName?(c=c.nodeName.toLowerCase(),-1<Ca.call(b,c)):!1},Eg=(a,b)=>{const c=b.toLowerCase().split(" ");return d=>{if(V(d)){const e=d.ownerDocument.defaultView;if(e)for(let f=0;f<c.length;f++){const g=e.getComputedStyle(d,null);if((g?g.getPropertyValue(a):null)===c[f])return!0}}return!1}},qn=a=>b=>V(b)&&b.hasAttribute(a),
Rc=a=>V(a)&&a.hasAttribute("data-mce-bogus"),Cc=a=>V(a)&&"TABLE"===a.tagName,rn=a=>b=>!V(b)||b.contentEditable!==a&&b.getAttribute("data-mce-contenteditable")!==a?!1:!0,Ui=ac(["textarea","input"]),E=yd(3),ux=yd(4),vx=yd(7),Sc=yd(8),gf=yd(9),Vi=yd(11),Ga=ff("br"),sn=ff("img"),Sb=rn("true"),va=rn("false"),ne=ac(["td","th"]),wx=ac(["td","th","caption"]),mc=ac(["video","audio","object","embed"]),xx=ff("li"),tn=ff("details"),yx=ff("summary"),zd=((a,b)=>{const c=d=>a(d)?p.from(d.dom.nodeValue):p.none();
return{get:d=>{if(!a(d))throw Error("Can only get "+b+" value of a "+b+" node");return c(d).getOr("")},getOption:c,set:(d,e)=>{if(!a(d))throw Error("Can only set raw "+b+" value of a "+b+" node");d.dom.nodeValue=e}}})(Ib,"text"),zx=(a,b)=>zd.set(a,b),Ax=["pre"].concat("h1 h2 h3 h4 h5 h6".split(" ")),Tc=a=>{let b;return c=>{b=b?b:Di(a,Qa);c=c.dom.nodeName.toLowerCase();return ha.call(b,c)}},Kb=Tc("article aside details div dt figcaption footer form fieldset header hgroup html main nav section summary body p dl multicol dd figure address center blockquote h1 h2 h3 h4 h5 h6 listing xmp pre plaintext menu dir ul ol li hr table tbody thead tfoot th tr td caption".split(" ")),
Fg=a=>tb(a)&&!Kb(a),Ad=a=>tb(a)&&"br"===a.dom.nodeName.toLowerCase(),Wi=Tc("h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure".split(" ")),Xi=Tc(["ul","ol","dl"]),hf=Tc(["li","dd","dt"]),Bx=Tc(["thead","tbody","tfoot"]),oe=Tc(["td","th"]),Gg=Tc(["pre","script","textarea","style"]),Cx=Tc(Ax),Dx=a=>Cx(a)||Fg(a),Hg=()=>{const a=x.fromTag("br");Va(a.dom,"data-mce-bogus","1");return a},Dc=a=>{ke(a);var b=Hg();a.dom.appendChild(b.dom)},
Ex=a=>{kc(a,a.dom.childNodes.length-1).each(b=>{Nc(b).each(c=>{Kb(a)&&Ad(b)&&Kb(c)&&Ja(b)})})},bc=a=>a.replace(/\uFEFF/g,""),Uc=a=>{E(a)&&(a=a.parentNode);return V(a)&&a.hasAttribute("data-mce-caret")},Vc=a=>E(a)&&"\ufeff"===a.data,Eb=a=>Uc(a)||Vc(a),Fx=(a,b)=>{var c;const d=(null!==(c=a.ownerDocument)&&void 0!==c?c:document).createTextNode("\ufeff");c=a.parentNode;if(b){b=a.previousSibling;if(E(b)){if(Eb(b))return b;if(Ig(b))return b.splitText(b.data.length-1)}null===c||void 0===c?void 0:c.insertBefore(d,
a)}else{b=a.nextSibling;if(E(b)){if(Eb(b))return b;if(Jg(b))return b.splitText(1),b}a.nextSibling?null===c||void 0===c?void 0:c.insertBefore(d,a.nextSibling):null===c||void 0===c?void 0:c.appendChild(d)}return d},Yi=a=>{const b=a.container();return E(b)?"\ufeff"===b.data.charAt(a.offset())||a.isAtStart()&&Vc(b.previousSibling):!1},Zi=a=>{const b=a.container();return E(b)?"\ufeff"===b.data.charAt(a.offset()-1)||a.isAtEnd()&&Vc(b.nextSibling):!1},Jg=a=>E(a)&&"\ufeff"===a.data[0],Ig=a=>E(a)&&"\ufeff"===
a.data[a.data.length-1],$i=a=>{if(a&&a.hasAttribute("data-mce-caret")){var b,c=a.getElementsByTagName("br");c=c[c.length-1];Rc(c)&&(null===(b=c.parentNode)||void 0===b?void 0:b.removeChild(c));a.removeAttribute("data-mce-caret");a.removeAttribute("data-mce-bogus");a.removeAttribute("style");a.removeAttribute("data-mce-style");a.removeAttribute("_moz_abspos");return a}return null},Gx=ac(["script","style","textarea"]),aj=ac("img input textarea hr iframe video audio object embed".split(" ")),Hx=ac(["table"]),
kb=a=>Eb(a)?!1:E(a)?!Gx(a.parentNode):aj(a)||Ga(a)||Hx(a)||bj(a),bj=a=>!(V(a)&&"true"===a.getAttribute("unselectable"))&&va(a),un=a=>bj(a)?!Db(qb(a.getElementsByTagName("*")),(b,c)=>b||Sb(c),!1):!1,jf=(a,b)=>{var c;if(c=kb(a))a:{for(a=a.parentNode;a&&a!==b;a=a.parentNode){if(bj(a)){c=!1;break a}if(Sb(a)){c=!0;break a}}c=!0}return c},Bd=/^[ \t\r\n]*$/,vn=(a,b,c,d)=>{c=void 0===c?!0:c;d=void 0===d?!0:d;b=Qw(" ",void 0===b?4:b);const e=a.replace(/\t/g,b);return Db(e,(f,g)=>-1!==" \f\t\v".indexOf(g)||
"\u00a0"===g?((g=f.pcIsSpace||""===f.str&&c||f.str.length===e.length-1&&d)||(g=f.str.length+1,g<e.length&&0<=g?(g=e[g],g="\n"===g||"\r"===g):g=!1),g?{pcIsSpace:!1,str:f.str+"\u00a0"}:{pcIsSpace:!0,str:f.str+" "}):{pcIsSpace:"\n"===g||"\r"===g,str:f.str+g},{pcIsSpace:!1,str:""}).str},Kg=(a,b)=>{var c;if(c=kb(a)){if(c=E(a)&&Bd.test(a.data))c=x.fromDom(b),b=x.fromDom(a),c=A(yc,c),c=!$b(b,"pre,code",c).isSome();c=!c}(b=c)||(b=V(a)&&"A"===a.nodeName&&!a.hasAttribute("href")&&(a.hasAttribute("name")||a.hasAttribute("id")));
return b||Ix(a)},Ix=qn("data-mce-bookmark"),Jx=qn("data-mce-bogus"),Kx=((a,b)=>c=>V(c)&&c.getAttribute(a)===b)("data-mce-bogus","all"),Lx=(a,b)=>{let c=0;if(Kg(a,a))return!1;let d=a.firstChild;if(!d)return!0;const e=new Ta(d,a);do{if(b){if(Kx(d)){d=e.next(!0);continue}if(Jx(d)){d=e.next();continue}}if(Ga(d))c++;else if(Kg(d,a))return!1;d=e.next()}while(d);return 1>=c},Pa=(a,b)=>Lx(a.dom,void 0===b?!0:b),cj=a=>ka(rb(a),b=>!/[A-Z]/.test(b)),wn=(a,b)=>{if(aa(b.querySelector(a)))return b.removeAttribute("data-mce-block"),
!1;b.setAttribute("data-mce-block","true");"inline-boundary"===b.getAttribute("data-mce-selected")&&b.removeAttribute("data-mce-selected");return!0},xn=(a,b)=>{const c=cj(a.getTransparentElements()).join(","),d=cj(a.getBlockElements()).join(",");return ka(b.querySelectorAll(c),e=>wn(d,e))},yn=(a,b)=>{var c;b=b?"lastChild":"firstChild";for(a=a[b];a;a=a[b])if(Pa(x.fromDom(a))){null===(c=a.parentNode)||void 0===c?void 0:c.removeChild(a);break}},Mx=(a,b,c)=>{const d=a.getBlockElements(),e=x.fromDom(b),
f=h=>h.dom.nodeName.toLowerCase()in d,g=h=>h.dom===e.dom;G(wa(c,x.fromDom),h=>{Ac(h,f,g).each(k=>{const l=tx(h,m=>m.dom.nodeName.toLowerCase()in d&&!a.isValidChild(k.dom.nodeName.toLowerCase(),m.dom.nodeName.toLowerCase()));if(0<l.length){const m=p.from(k.dom.parentElement).map(x.fromDom);G(l,n=>{Ac(n,f,g).each(t=>{t=t.dom;var y=n.dom,w=document.createRange();const q=t.parentNode;if(q){w.setStartBefore(t);w.setEndBefore(y);const r=w.extractContents();yn(r,!0);w.setStartAfter(y);w.setEndAfter(t);w=
w.extractContents();yn(w,!1);Pa(x.fromDom(r))||q.insertBefore(r,t);Pa(x.fromDom(y))||q.insertBefore(y,t);Pa(x.fromDom(w))||q.insertBefore(w,t);q.removeChild(t)}})});m.each(n=>xn(a,n.dom))}})})},Nx=(a,b,c)=>{G([...c,...(Cd(a,b)?[b]:[])],d=>G(me(x.fromDom(d),d.nodeName.toLowerCase()),e=>{var f=e.dom;dj(a,f)&&!f.hasAttribute("data-mce-block")&&Bc(e)}))},ej=(a,b)=>{const c=xn(a,b);Mx(a,b,c);Nx(a,b,c)},Ox=(a,b,c)=>{c=an(x.fromDom(c),d=>{var e=x.fromDom(b);return d.dom===e.dom});$a(c,c.length-2).filter(tb).fold(()=>
ej(a,b),d=>ej(a,d.dom))},fj=(a,b)=>{a=a.getTransparentElements();return ha.call(a,b)},dj=(a,b)=>V(b)&&fj(a,b.nodeName),Cd=(a,b)=>dj(a,b)&&b.hasAttribute("data-mce-block"),gj=(a,b)=>1===b.type&&fj(a,b.name)&&fa(b.attr("data-mce-block")),Px=hc().browser,Qx=a=>Px.isFirefox()&&"table"===a.dom.nodeName.toLowerCase()?Oa(bb(a),tb).filter(b=>"caption"===b.dom.nodeName.toLowerCase()).bind(b=>Oa(zg(b,ie),tb).map(c=>{const d=b.dom.offsetHeight;return c.dom.offsetTop<=b.dom.offsetTop?-d:0})).getOr(0):0,zn=(a,
b)=>{b=void 0===b?{}:b;let c=0;const d={},e=x.fromDom(a),f=Jb(e),g=m=>{Pi(e).dom.appendChild(m.dom)},h=m=>Fa(d,m).getOrThunk(()=>({id:"mce-u"+c++,passed:[],failed:[],count:0})),k=m=>new Promise((n,t)=>{let y;const w=K._addCacheSuffix(m),q=h(w);d[w]=q;q.count++;const r=(v,z)=>{G(v,Pe);q.status=z;q.passed=[];q.failed=[];y&&(y.onload=null,y=y.onerror=null)};n&&q.passed.push(n);t&&q.failed.push(t);1!==q.status&&(2===q.status?r(q.passed,2):3===q.status?r(q.failed,3):(q.status=1,n=x.fromTag("link",f.dom),
Mc(n,{rel:"stylesheet",type:"text/css",id:q.id}),b.contentCssCors&&Va(n.dom,"crossOrigin","anonymous"),b.referrerPolicy&&Va(n.dom,"referrerpolicy",b.referrerPolicy),y=n.dom,y.onload=()=>r(q.passed,2),y.onerror=()=>r(q.failed,3),g(n),Va(n.dom,"href",w)))}),l=m=>{const n=K._addCacheSuffix(m);Fa(d,n).each(t=>{if(0===--t.count){delete d[n];t=t.id;const y=Pi(e);df("#"+t,y).each(Ja)}})};return{load:k,loadAll:m=>Promise.allSettled(wa(m,n=>k(n).then(R(n)))).then(n=>{n=Re(n,t=>"fulfilled"===t.status);return 0<
n.fail.length?Promise.reject(wa(n.fail,t=>t.reason)):wa(n.pass,t=>t.value)}),unload:l,unloadAll:m=>{G(m,n=>{l(n)})},_setReferrerPolicy:m=>{b.referrerPolicy=m},_setContentCssCors:m=>{b.contentCssCors=m}}},An=(()=>{const a=new WeakMap;return{forElement:(b,c)=>{const d=Oc(b).dom;return p.from(a.get(d)).getOrThunk(()=>{const e=zn(d,c);a.set(d,e);return e})}}})(),Bn=(a,b)=>!aa(a)&&(Kg(a,b)||Fg(x.fromDom(a))),Cn=a=>"span"===a.nodeName.toLowerCase()&&"bookmark"===a.getAttribute("data-mce-type"),hj=(a,b,
c)=>{var d;c=c||b;if(V(b)&&Cn(b))return b;var e=b.childNodes;for(let f=e.length-1;0<=f;f--)hj(a,e[f],c);V(b)&&(e=b.childNodes,1===e.length&&Cn(e[0])&&(null===(d=b.parentNode)||void 0===d?void 0:d.insertBefore(e[0],b)));if(d=!(Vi(b)||gf(b))&&!Kg(b,c))d=!(V(b)&&0<b.childNodes.length);if(d){if(d=E(b)&&0<b.data.length)e=(new Ta(b,c)).prev(!1),d=(new Ta(b,c)).next(!1),e=db(e)||Bn(e,c),c=db(d)||Bn(d,c),d=e&&c;d=!d}d&&a.remove(b);return b},Rx=K.makeMap,Lg=/[&<>"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
Mg=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sx=/[<>&"']/g,Tx=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ux={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Dd={'"':"&quot;","'":"&#39;",
"<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Vx={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Dn=(a,b)=>{const c={};if(a){a=a.split(",");b=b||10;for(let d=0;d<a.length;d+=2){const e=String.fromCharCode(parseInt(a[d],b));if(!Dd[e]){const f="&"+a[d+1]+";";c[e]=f;c[f]=e}}return c}},ij=Dn("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32),En=(a,b)=>a.replace(b?Lg:Mg,c=>Dd[c]||c),Fn=(a,b)=>a.replace(b?Lg:Mg,c=>1<c.length?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":Dd[c]||"&#"+c.charCodeAt(0)+";"),jj=(a,b,c)=>{const d=c||ij;return a.replace(b?Lg:Mg,e=>Dd[e]||d[e]||e)},Wc={encodeRaw:En,encodeAllRaw:a=>(""+a).replace(Sx,b=>Dd[b]||b),encodeNumeric:Fn,encodeNamed:jj,getEncodeFunc:(a,b)=>{const c=Dn(b)||ij,d=(f,g)=>f.replace(g?Lg:Mg,h=>void 0!==Dd[h]?Dd[h]:void 0!==c[h]?c[h]:1<h.length?"&#"+(1024*(h.charCodeAt(0)-
55296)+(h.charCodeAt(1)-56320)+65536)+";":"&#"+h.charCodeAt(0)+";"),e=(f,g)=>jj(f,g,c);a=Rx(a.replace(/\+/g,","));return a.named&&a.numeric?d:a.named?b?e:jj:a.numeric?Fn:En},decode:a=>a.replace(Tx,(b,c)=>{if(c)return c="x"===c.charAt(0).toLowerCase()?parseInt(c.substr(1),16):parseInt(c,10),65535<c?(c-=65536,String.fromCharCode(55296+(c>>10),56320+(c&1023))):Ux[c]||String.fromCharCode(c);(c=Vx[b]||ij[b])||(c=x.fromTag("div").dom,c.innerHTML=b,c=c.textContent||c.innerText||b);return c})},Ng={},Og={},
Wx={},pe=K.makeMap,gb=K.each,kj=K.extend,Gn=K.explode,Xx=K.inArray,cb=(a,b)=>(a=K.trim(a))?a.split(b||" "):[],Hn=(a,b)=>{b=void 0===b?{}:b;a=pe(a," ",pe(a.toUpperCase()," "));return kj(a,b)},In=a=>Hn("td th li dt dd figcaption caption details summary",a.getTextBlockElements()),Yx=a=>{const b={};let c,d,e,f;const g=(k,l,m)=>{l=void 0===l?"":l;m=cb(void 0===m?"":m);k=cb(k);let n=k.length;for(;n--;){const t=cb([c,l].join(" "));b[k[n]]={attributes:Di(t,()=>({})),attributesOrder:t,children:Di(m,R(Wx))}}},
h=(k,l)=>{k=cb(k);l=cb(l);let m=k.length;for(;m--;){const n=b[k[m]];for(let t=0,y=l.length;t<y;t++)n.attributes[l[t]]={},n.attributesOrder.push(l[t])}};if(Ng[a])return Ng[a];c="id accesskey class dir lang style tabindex title role";d="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";e="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment";
"html4"!==a&&(c+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",d+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",e+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen");"html5-strict"!==a&&(c+=" xml:lang",e=[e,"acronym applet basefont big font strike tt"].join(" "),gb(cb("acronym applet basefont big font strike tt"),k=>{g(k,"",e)}),d=[d,"center dir isindex noframes"].join(" "),
f=[d,e].join(" "),gb(cb("center dir isindex noframes"),k=>{g(k,"",f)}));f=f||[d,e].join(" ");g("html","manifest","head body");g("head","","base command link meta noscript script style title");g("title hr noscript br");g("base","href target");g("link","href rel media hreflang type sizes hreflang");g("meta","name http-equiv content charset");g("style","media type scoped");g("script","src async defer type charset");g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",
f);g("dd div","",f);g("address dt caption","","html4"===a?e:f);g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",e);g("blockquote","cite",f);g("ol","reversed start type","li");g("ul","","li");g("li","value",f);g("dl","","dt dd");g("a","href target rel media hreflang type","html4"===a?e:f);g("q","cite",e);g("ins del","cite datetime",f);g("img","src sizes srcset alt usemap ismap width height");g("iframe","src name width height",f);g("embed",
"src type width height");g("object","data type typemustmatch name usemap form width height",[f,"param"].join(" "));g("param","name value");g("map","name",[f,"area"].join(" "));g("area","alt coords shape href target rel media hreflang type");g("table","border","caption colgroup thead tfoot tbody tr"+("html4"===a?" col":""));g("colgroup","span","col");g("col","span");g("tbody thead tfoot","","tr");g("tr","","td th");g("td","colspan rowspan headers",f);g("th","colspan rowspan headers scope abbr",f);
g("form","accept-charset action autocomplete enctype method name novalidate target",f);g("fieldset","disabled form name",[f,"legend"].join(" "));g("label","form for",e);g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===
a?f:e);g("select","disabled form multiple name required size","option optgroup");g("optgroup","disabled label","option");g("option","disabled label selected value");g("textarea","cols dirname disabled form maxlength name readonly required rows wrap");g("menu","type label",[f,"li"].join(" "));g("noscript","",f);"html4"!==a&&(g("wbr"),g("ruby","",[e,"rt rp"].join(" ")),g("figcaption","",f),g("mark rt rp summary bdi","",e),g("canvas","width height",f),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",
[f,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[f,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[e,"option"].join(" ")),g("article section nav aside main header footer","",f),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[f,"figcaption"].join(" ")),g("time","datetime",e),g("dialog","open",f),g("command","type label icon disabled checked radiogroup command"),
g("output","for form name",e),g("progress","value max",e),g("meter","value min max low high optimum",e),g("details","open",[f,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"));"html5-strict"!==a&&(h("script","language xml:space"),h("style","xml:space"),h("object","declare classid code codebase codetype archive standby align border hspace vspace"),h("embed","align name hspace vspace"),h("param","valuetype type"),h("a","charset name rev shape coords"),h("br","clear"),
h("applet","codebase archive code object alt name width height align hspace vspace"),h("img","name longdesc align border hspace vspace"),h("iframe","longdesc frameborder marginwidth marginheight scrolling align"),h("font basefont","size color face"),h("input","usemap align"),h("select"),h("textarea"),h("h1 h2 h3 h4 h5 h6 div p legend caption","align"),h("ul","type compact"),h("li","type"),h("ol dl menu dir","compact"),h("pre","width xml:space"),h("hr","align noshade size width"),h("isindex","prompt"),
h("table","summary width frame rules cellspacing cellpadding align bgcolor"),h("col","width align char charoff valign"),h("colgroup","width align char charoff valign"),h("thead","align char charoff valign"),h("tr","align char charoff valign bgcolor"),h("th","axis align char charoff valign nowrap bgcolor width height"),h("form","accept"),h("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),h("tfoot","align char charoff valign"),h("tbody","align char charoff valign"),h("area",
"nohref"),h("body","background bgcolor text link vlink alink"));"html4"!==a&&(h("input button select textarea","autofocus"),h("input textarea","placeholder"),h("a","download"),h("link script img","crossorigin"),h("img","loading"),h("iframe","sandbox seamless allow allowfullscreen loading"));"html4"!==a&&G([b.video,b.audio],k=>{delete k.children.audio;delete k.children.video});gb(cb("a form meter progress dfn"),k=>{b[k]&&delete b[k].children[k]});delete b.caption.children.table;delete b.script;return Ng[a]=
b},lj=(a,b)=>{if(a){const c={};fa(a)&&(a={"*":a});gb(a,(d,e)=>{c[e]=c[e.toUpperCase()]="map"===b?pe(d,/[, ]/):Gn(d,/[, ]/)});return c}},Xc=a=>{a=void 0===a?{}:a;var b;const c={},d={};let e=[];const f={},g={};var h=(ca,oa,M)=>{var Q=a[ca];if(Q)return pe(Q,/[, ]/,pe(Q.toUpperCase(),/[, ]/));Q=Og[ca];Q||(Q=Hn(oa,M),Og[ca]=Q);return Q};const k=null!==(b=a.schema)&&void 0!==b?b:"html5",l=Yx(k);!1===a.verify_html&&(a.valid_elements="*[*]");var m=lj(a.valid_styles),n=lj(a.invalid_styles,"map"),t=lj(a.valid_classes,
"map"),y=h("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=h("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=h("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),r=h("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen");const v=h("non_empty_elements","td th iframe video audio object script code pre",
q);var z=h("move_caret_before_on_enter_elements","td th iframe video audio object script code table",q),P=h("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure");const N=h("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",P);var Y=h("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),
O=h("transparent_elements","a ins del canvas map");gb("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ca=>{g[ca]=new RegExp("</"+ca+"[^>]*>","gi")});const L=ca=>{const oa=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,M=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Q=/[*?+]/;if(ca){ca=cb(ca,",");let u,B;c["@"]&&(u=c["@"].attributes,B=c["@"].attributesOrder);for(let D=0,H=ca.length;D<H;D++){var Z=oa.exec(ca[D]);if(Z){var da=Z[1];const T=Z[2];
var J=Z[3],ba=Z[5];const ea={},sa=[],Aa={attributes:ea,attributesOrder:sa};"#"===da&&(Aa.paddEmpty=!0);"-"===da&&(Aa.removeEmpty=!0);"!"===Z[4]&&(Aa.removeEmptyAttrs=!0);u&&(Ea(u,(Qb,fc)=>{ea[fc]=Qb}),B&&sa.push(...B));if(ba){da=cb(ba,"|");for(let Qb=0,fc=da.length;Qb<fc;Qb++)if(Z=M.exec(da[Qb])){const Xb={},nd=Z[1];ba=Z[2].replace(/[\\:]:/g,":");const od=Z[3];Z=Z[4];"!"===nd&&(Aa.attributesRequired=Aa.attributesRequired||[],Aa.attributesRequired.push(ba),Xb.required=!0);"-"===nd?(delete ea[ba],sa.splice(Xx(sa,
ba),1)):(od&&("="===od&&(Aa.attributesDefault=Aa.attributesDefault||[],Aa.attributesDefault.push({name:ba,value:Z}),Xb.defaultValue=Z),"~"===od&&(Aa.attributesForced=Aa.attributesForced||[],Aa.attributesForced.push({name:ba,value:Z}),Xb.forcedValue=Z),"<"===od&&(Xb.validValues=pe(Z,"?"))),Q.test(ba)?(Z=Xb,Aa.attributePatterns=Aa.attributePatterns||[],Z.pattern=new RegExp("^"+ba.replace(/([?+*])/g,".$1")+"$"),Aa.attributePatterns.push(Z)):(ea[ba]||sa.push(ba),ea[ba]=Xb))}}u||"@"!==T||(u=ea,B=sa);J&&
(Aa.outputName=T,c[J]=Aa);Q.test(T)?(J=Aa,J.pattern=new RegExp("^"+T.replace(/([?+*])/g,".$1")+"$"),e.push(J)):c[T]=Aa}}}};h=ca=>{e=[];G(rb(c),oa=>{delete c[oa]});L(ca);gb(l,(oa,M)=>{d[M]=oa.children})};b=ca=>{const oa=/^(~)?(.+)$/;ca&&(delete Og.text_block_elements,delete Og.block_elements,gb(cb(ca,","),M=>{if(M=oa.exec(M)){const Q="~"===M[1],Z=Q?"span":"div",da=M[2];d[da]=d[Z];f[da]=Z;v[da.toUpperCase()]={};v[da]={};Q||(N[da.toUpperCase()]={},N[da]={});c[da]||(M=c[Z],M=kj({},M),delete M.removeEmptyAttrs,
delete M.removeEmpty,c[da]=M);gb(d,(J,ba)=>{J[Z]&&(d[ba]=J=kj({},d[ba]),J[da]=J[Z])})}}))};const U=ca=>{const oa=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Ng[k];ca&&gb(cb(ca,","),M=>{if(M=oa.exec(M)){const Q=M[1];let Z;Z=Q?d[M[2]]:d[M[2]]={"#comment":{}};Z=d[M[2]];gb(cb(M[3],"|"),da=>{"-"===Q?delete Z[da]:Z[da]={}})}})},ja=ca=>{var oa=c[ca];if(oa)return oa;
for(oa=e.length;oa--;){const M=e[oa];if(M.pattern.test(ca))return M}};a.valid_elements?h(a.valid_elements):(gb(l,(ca,oa)=>{c[oa]={attributes:ca.attributes,attributesOrder:ca.attributesOrder};d[oa]=ca.children}),gb(cb("strong/b em/i"),ca=>{ca=cb(ca,"/");c[ca[1]].outputName=ca[0]}),gb(Y,(ca,oa)=>{c[oa]&&(a.padd_empty_block_inline_children&&(c[oa].paddInEmptyBlock=!0),c[oa].removeEmpty=!0)}),gb(cb("ol ul blockquote a table tbody"),ca=>{c[ca]&&(c[ca].removeEmpty=!0)}),gb(cb("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),
ca=>{c[ca]&&(c[ca].paddEmpty=!0)}),gb(cb("span"),ca=>{c[ca].removeEmptyAttrs=!0}));b(a.custom_elements);U(a.valid_children);L(a.extended_valid_elements);U("+ol[ul|ol],+ul[ul|ol]");gb({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ca,oa)=>{c[oa]&&(c[oa].parentsRequired=cb(ca))});a.invalid_elements&&gb(Gn(a.invalid_elements),ca=>{c[ca]&&delete c[ca]});ja("span")||L("span[!data-mce-type|*]");
m=R(m);n=R(n);t=R(t);r=R(r);const qa=R(N);P=R(P);Y=R(Y);q=R(Object.seal(q));w=R(w);const Ha=R(v);z=R(z);y=R(y);O=R(O);const Ra=R(Object.seal(g)),ab=R(f);return{type:k,children:d,elements:c,getValidStyles:m,getValidClasses:t,getBlockElements:qa,getInvalidStyles:n,getVoidElements:q,getTextBlockElements:P,getTextInlineElements:Y,getBoolAttrs:r,getElementRule:ja,getSelfClosingElements:w,getNonEmptyElements:Ha,getMoveCaretBeforeOnEnterElements:z,getWhitespaceElements:y,getTransparentElements:O,getSpecialElements:Ra,
isValidChild:(ca,oa)=>{ca=d[ca.toLowerCase()];return!(!ca||!ca[oa.toLowerCase()])},isValid:(ca,oa)=>{if(ca=ja(ca))if(oa){if(ca.attributes[oa])return!0;if(ca=ca.attributePatterns){let M=ca.length;for(;M--;)if(ca[M].pattern.test(oa))return!0}}else return!0;return!1},getCustomElements:ab,addValidElements:L,setValidElements:h,addCustomElements:b,addValidChildren:U}},mj=(a,b)=>{a=void 0===a?{}:a;const c=/(?:url(?:(?:\(\s*"([^"]+)"\s*\))|(?:\(\s*'([^']+)'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:'([^']+)')|(?:"([^"]+)")/gi,
d=/\s*([^:]+):\s*([^;]+);?/g,e=/\s+$/,f={};let g,h;b&&(g=b.getValidStyles(),h=b.getInvalidStyles());b="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let l=0;l<b.length;l++)f[b[l]]="\ufeff"+l,f["\ufeff"+l]=b[l];const k={parse:l=>{const m={};let n=!1;const t=a.url_converter,y=a.url_converter_scope||k,w=(O,L,U)=>{var ja=m[O+"-top"+L];if(ja){var qa=m[O+"-right"+L];if(qa){var Ha=m[O+"-bottom"+L];if(Ha){var Ra=m[O+"-left"+L];if(Ra){ja=[ja,qa,Ha,Ra];for(qa=ja.length-1;qa--&&ja[qa]===ja[qa+1];);-1<qa&&U||(m[O+
L]=-1===qa?ja[0]:ja.join(" "),delete m[O+"-top"+L],delete m[O+"-right"+L],delete m[O+"-bottom"+L],delete m[O+"-left"+L])}}}}},q=O=>{var L=m[O];if(L){L=L.split(" ");for(var U=L.length;U--;)if(L[U]!==L[0])return!1;m[O]=L[0];return!0}},r=(O,L,U,ja)=>{q(L)&&q(U)&&q(ja)&&(m[O]=m[L]+" "+m[U]+" "+m[ja],delete m[L],delete m[U],delete m[ja])},v=O=>{n=!0;return f[O]},z=(O,L)=>{n&&(O=O.replace(/\uFEFF[0-9]/g,U=>f[U]));L||(O=O.replace(/\\(['";:])/g,"$1"));return O},P=O=>String.fromCharCode(parseInt(O.slice(1),
16)),N=(O,L,U,ja,qa,Ha)=>{if(qa=qa||Ha)return qa=z(qa),"'"+qa.replace(/'/g,"\\'")+"'";L=z(L||U||ja||"");if(!a.allow_script_urls&&(O=L.replace(/[\s\r\n]+/g,""),/(java|vb)script:/i.test(O)||!a.allow_svg_data_urls&&/^data:image\/svg/i.test(O)))return"";t&&(L=t.call(y,L,"style"));return"url('"+L.replace(/'/g,"\\'")+"')"};if(l){l=l.replace(/[\u0000-\u001F]/g,"");l=l.replace(/\\["';:\uFEFF]/g,v).replace(/"[^"]+"|'[^']+'/g,O=>O.replace(/[;:]/g,v));for(var Y;Y=d.exec(l);){d.lastIndex=Y.index+Y[0].length;
let O=Y[1].replace(e,"").toLowerCase();Y=Y[2].replace(e,"");if(O&&Y&&(O=O.replace(/\\[0-9a-f]+/gi,P),Y=Y.replace(/\\[0-9a-f]+/gi,P),-1===O.indexOf("\ufeff")&&-1===O.indexOf('"')&&(a.allow_script_urls||"behavior"!==O&&!/expression\s*\(|\/\*|\*\//.test(Y)))){if("font-weight"===O&&"700"===Y)Y="bold";else if("color"===O||"background-color"===O)Y=Y.toLowerCase();Y=Y.replace(c,N);m[O]=n?z(Y,!0):Y}}w("border","",!0);w("border","-width");w("border","-color");w("border","-style");w("padding","");w("margin",
"");r("border","border-width","border-style","border-color");"medium none"===m.border&&delete m.border;"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:(l,m)=>{let n="";const t=(y,w)=>{if(y=w[y])for(let q=0,r=y.length;q<r;q++){w=y[q];const v=l[w];v&&(n+=(0<n.length?" ":"")+w+": "+v+";")}};m&&g?(t("*",g),t(m,g)):Ea(l,(y,w)=>{var q;if(q=y)h&&m?(q=h["*"])&&q[w]?q=!1:(q=h[m],q=!(q&&q[w])):q=!0;q&&(n+=(0<n.length?" ":"")+w+": "+y+";")});return n}};return k},Zx={keyLocation:!0,layerX:!0,
layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},$x=a=>{var b=a.preventDefault;return null===b||void 0===b||a instanceof Event||ya(a.initEvent)},Jn=(a,b)=>{b=null!==b&&void 0!==b?b:{};for(const c in a)ha.call(Zx,c)||(b[c]=a[c]);aa(a.composedPath)||(b.composedPath=()=>a.composedPath());return b},nj=(a,b,c,d)=>{var e;const f=Jn(b,d);f.type=a;aa(f.target)&&(f.target=null!==(e=f.srcElement)&&void 0!==e?e:c);$x(b)&&(f.preventDefault=()=>{f.defaultPrevented=
!0;f.isDefaultPrevented=Qa;ya(b.preventDefault)&&b.preventDefault()},f.stopPropagation=()=>{f.cancelBubble=!0;f.isPropagationStopped=Qa;ya(b.stopPropagation)&&b.stopPropagation()},f.stopImmediatePropagation=()=>{f.isImmediatePropagationStopped=Qa;f.stopPropagation()},f.isDefaultPrevented!==Qa&&f.isDefaultPrevented!==za&&(f.isDefaultPrevented=!0===f.defaultPrevented?Qa:za,f.isPropagationStopped=!0===f.cancelBubble?Qa:za,f.isImmediatePropagationStopped=za));return f},ay=/^(?:mouse|contextmenu)|click/,
kf=(a,b)=>{b=nj(a.type,a,document,b);if(Ma(a)&&ay.test(a.type)&&db(a.pageX)&&!db(a.clientX)){var c=b.target.ownerDocument||document;const d=c.documentElement;c=c.body;b.pageX=a.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0);b.pageY=a.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0)}return b},by=(a,b,c)=>{const d=a.document,e={type:"ready"};if(c.domLoaded)b(e);else{var f=()=>{a.removeEventListener("DOMContentLoaded",f,!1);a.removeEventListener("load",
f,!1);c.domLoaded||(c.domLoaded=!0,b(e));a=null};"complete"===d.readyState||"interactive"===d.readyState&&d.body?f():a.addEventListener("DOMContentLoaded",f,!1);c.domLoaded||a.addEventListener("load",f,!1)}};class Ed{constructor(){this.domLoaded=!1;this.events={};this.count=1;this.expando="mce-data-"+(+new Date).toString(32);this.hasFocusIn="onfocusin"in document.documentElement;this.count=1}bind(a,b,c,d){const e=this,f=window,g=m=>{e.executeHandlers(kf(m||f.event),h)};if(!a||E(a)||Sc(a))return c;
let h;a[e.expando]?h=a[e.expando]:(h=e.count++,a[e.expando]=h,e.events[h]={});d=d||a;const k=b.split(" ");let l=k.length;for(;l--;){let m=k[l],n=g,t=!1,y=!1;"DOMContentLoaded"===m&&(m="ready");e.domLoaded&&"ready"===m&&"complete"===a.readyState?c.call(d,kf({type:m})):(e.hasFocusIn||"focusin"!==m&&"focusout"!==m||(t=!0,y="focusin"===m?"focus":"blur",n=w=>{w=kf(w||f.event);w.type="focus"===w.type?"focusin":"focusout";e.executeHandlers(w,h)}),(b=e.events[h][m])?"ready"===m&&e.domLoaded?c(kf({type:m})):
b.push({func:c,scope:d}):(e.events[h][m]=b=[{func:c,scope:d}],b.fakeName=y,b.capture=t,b.nativeHandler=n,"ready"===m?by(a,n,e):a.addEventListener(y||m,n,t||!1)))}a=b=null;return c}unbind(a,b,c){if(!a||E(a)||Sc(a))return this;const d=a[this.expando];if(d){let e=this.events[d];if(b){b=b.split(" ");let f=b.length;for(;f--;){const g=b[f],h=e[g];if(h){if(c){let k=h.length;for(;k--;)if(h[k].func===c){const l=h.nativeHandler,m=h.fakeName,n=h.capture,t=h.slice(0,k).concat(h.slice(k+1));t.nativeHandler=l;
t.fakeName=m;t.capture=n;e[g]=t}}c&&0!==h.length||(delete e[g],a.removeEventListener(h.fakeName||g,h.nativeHandler,h.capture||!1))}}}else Ea(e,(f,g)=>{a.removeEventListener(f.fakeName||g,f.nativeHandler,f.capture||!1)}),e={};for(const f in e)if(ha.call(e,f))return this;delete this.events[d];try{delete a[this.expando]}catch(f){a[this.expando]=null}}return this}fire(a,b,c){return this.dispatch(a,b,c)}dispatch(a,b,c){if(!a||E(a)||Sc(a))return this;b=kf({type:b,target:a},c);do(c=a[this.expando])&&this.executeHandlers(b,
c),a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow;while(a&&!b.isPropagationStopped());return this}clean(a){if(!a||E(a)||Sc(a))return this;a[this.expando]&&this.unbind(a);a.getElementsByTagName||(a=a.document);if(a&&a.getElementsByTagName){this.unbind(a);const b=a.getElementsByTagName("*");let c=b.length;for(;c--;)a=b[c],a[this.expando]&&this.unbind(a)}return this}destroy(){this.events={}}cancel(a){a&&(a.preventDefault(),a.stopImmediatePropagation());return!1}executeHandlers(a,b){if(b=
(b=this.events[b])&&b[a.type])for(let c=0,d=b.length;c<d;c++){const e=b[c];e&&!1===e.func.call(e.scope,a)&&a.preventDefault();if(a.isImmediatePropagationStopped())break}}}Ed.Event=new Ed;const oj=K.each,cy=K.grep,dy=K.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),lf=(a,b,c)=>{null===c||void 0===c||""===c?a.dom.removeAttribute(b):Va(a.dom,b,c)},Kn=a=>a.replace(/[A-Z]/g,b=>"-"+b.toLowerCase()),qe=(a,b)=>{let c=0;if(a)for(let d=a.nodeType,e=a.previousSibling;e;e=
e.previousSibling)if(a=e.nodeType,!b||!E(e)||a!==d&&e.data.length)c++,d=a;return c},Ln=(a,b)=>{const c=fb(b,"style");a=a.serialize(a.parse(c),b.dom.nodeName.toLowerCase());lf(b,"data-mce-style",a)},Mn=(a,b,c)=>{b=Kn(b);null===c||void 0===c||""===c?hn(a,b):(c=Yb(c)?ha.call(dy,b)?c+"":c+"px":c,Qi(a.dom,b,c))},ey=(a,b,c)=>{const d=b.keep_values,e={set:(g,h,k)=>{const l=x.fromDom(g);ya(b.url_converter)&&!aa(h)&&(h=b.url_converter.call(b.url_converter_scope||c(),String(h),k,g));lf(l,"data-mce-"+k,h);lf(l,
k,h)},get:(g,h)=>{g=x.fromDom(g);return fb(g,"data-mce-"+h)||fb(g,h)}},f={style:{set:(g,h)=>{g=x.fromDom(g);d&&lf(g,"data-mce-style",h);g.dom.removeAttribute("style");fa(h)&&Ag(g,a.parse(h))},get:g=>{g=x.fromDom(g);const h=fb(g,"data-mce-style")||fb(g,"style");return a.serialize(a.parse(h),g.dom.nodeName.toLowerCase())}}};d&&(f.href=f.src=e);return f},Da=(a,b)=>{b=void 0===b?{}:b;const c={},d=window,e={};let f=0;const g=An.forElement(x.fromDom(a),{contentCssCors:b.contentCssCors,referrerPolicy:b.referrerPolicy}),
h=[],k=b.schema?b.schema:Xc({}),l=mj({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema),m=b.ownEvents?new Ed:Ed.Event,n=k.getBlockElements(),t=u=>u&&a&&fa(u)?a.getElementById(u):u,y=u=>{u=t(u);return aa(u)?null:x.fromDom(u)},w=(u,B,D)=>{D=void 0===D?"":D;u=y(u);if(!aa(u)&&tb(u))var H=(H=ba[B])&&H.get?H.get(u.dom,B):fb(u,B);return aa(H)?D:H},q=u=>{u=t(u);return null===u||void 0===u?[]:u.attributes},r=(u,B,D)=>{L(u,H=>{if(V(H)){H=x.fromDom(H);const T=""===D?null:D,ea=
fb(H,B),sa=ba[B];sa&&sa.set?sa.set(H.dom,T,B):lf(H,B,T);if(ea!==T&&b.onSetAttrib)b.onSetAttrib({attrElm:H.dom,attrName:B,attrValue:T})}})},v=(u,B)=>{a:{var D=a.body;u=t(u);var H=B;let T=B=0;const ea=D.ownerDocument;H=H?H:D;if(u){if(H===D&&u.getBoundingClientRect&&"static"===lc(x.fromDom(D),"position")){u=u.getBoundingClientRect();B=u.left+(ea.documentElement.scrollLeft||D.scrollLeft)-ea.documentElement.clientLeft;T=u.top+(ea.documentElement.scrollTop||D.scrollTop)-ea.documentElement.clientTop;D={x:B,
y:T};break a}for(D=u;D&&D!==H&&D.nodeType&&!(D.children&&-1<Ca.call(D.children,H));)B+=D.offsetLeft||0,T+=D.offsetTop||0,D=D.offsetParent;for(D=u.parentNode;D&&D!==H&&D.nodeType&&!(D.children&&-1<Ca.call(D.children,H));)B-=D.scrollLeft||0,T-=D.scrollTop||0,D=D.parentNode;T+=Qx(x.fromDom(u))}D={x:B,y:T}}return D},z=(u,B,D)=>{u=t(u);if(null!==u&&void 0!==u&&V(u)){if(D)return lc(x.fromDom(u),Kn(B));B=B.replace(/-(\D)/g,(H,T)=>T.toUpperCase());"float"===B&&(B="cssFloat");return u.style?u.style[B]:void 0}},
P=u=>{u=t(u);if(!u)return{w:0,h:0};let B=z(u,"width"),D=z(u,"height");B&&-1!==B.indexOf("px")||(B="0");D&&-1!==D.indexOf("px")||(D="0");return{w:parseInt(B,10)||u.offsetWidth||u.clientWidth,h:parseInt(D,10)||u.offsetHeight||u.clientHeight}},N=(u,B)=>{if(!u)return!1;u=Sa(u)?u:[u];return Na(u,D=>Zb(x.fromDom(D),B))},Y=(u,B,D,H)=>{const T=[];u=t(u);H=void 0===H;D=D||("BODY"!==(b.root_element||a.body).nodeName?(b.root_element||a.body).parentNode:null);if(fa(B))if("*"===B)B=V;else{const ea=B;B=sa=>N(sa,
ea)}for(;u&&!(u===D||aa(u.nodeType)||gf(u)||Vi(u));){if(!B||B(u))if(H)T.push(u);else return[u];u=u.parentNode}return H?T:null},O=(u,B,D)=>{let H=B;if(u)for(fa(B)&&(H=T=>N(T,B)),u=u[D];u;u=u[D])if(ya(H)&&H(u))return u;return null},L=function(u,B,D){const H=null!==D&&void 0!==D?D:this;if(Sa(u)){const T=[];oj(u,(ea,sa)=>{(ea=t(ea))&&T.push(B.call(H,ea,sa))});return T}return(u=t(u))?B.call(H,u):!1},U=(u,B)=>{L(u,D=>{Ea(B,(H,T)=>{r(D,T,H)})})},ja=(u,B)=>{L(u,D=>{D=x.fromDom(D);Cg(D,B)})},qa=(u,B,D,H,T)=>
L(u,ea=>{const sa=fa(B)?a.createElement(B):B;aa(D)||U(sa,D);H&&(!fa(H)&&H.nodeType?sa.appendChild(H):fa(H)&&ja(sa,H));return T?sa:ea.appendChild(sa)}),Ha=(u,B,D)=>qa(a.createElement(u),u,B,D,!0),Ra=Wc.encodeAllRaw,ab=(u,B)=>L(u,D=>{const H=x.fromDom(D);B&&G(bb(H),T=>{Ib(T)&&0===T.dom.length?Ja(T):Bb(H,T)});Ja(H);return H.dom}),ca=(u,B,D)=>{L(u,H=>{if(V(H)){const T=x.fromDom(H);H=B.split(" ");G(H,ea=>{if(aa(D)){if(void 0!==T.dom.classList)T.dom.classList.toggle(ea);else{var sa=yg(T,"class");-1<Ca.call(sa,
ea)?Zm(T,"class",ea):Ym(T,"class",ea)}$m(T)}else(D?ge:he)(T,ea)})}})},oa=(u,B,D)=>L(B,H=>{var T;const ea=Sa(B)?u.cloneNode(!0):u;D&&oj(cy(H.childNodes),sa=>{ea.appendChild(sa)});null===(T=H.parentNode)||void 0===T?void 0:T.replaceChild(ea,H);return H}),M=u=>{if(V(u)){const B="a"===u.nodeName.toLowerCase()&&!w(u,"href")&&w(u,"id");if(w(u,"name")||w(u,"data-mce-bookmark")||B)return!0}return!1},Q=(u,B,D,H)=>{if(Sa(u)){let T=u.length;const ea=[];for(;T--;)ea[T]=Q(u[T],B,D,H);return ea}!b.collect||u!==
a&&u!==d||h.push([u,B,D,H]);return m.bind(u,B,D,H||J)},Z=(u,B,D)=>{if(Sa(u)){var H=u.length;const T=[];for(;H--;)T[H]=Z(u[H],B,D);return T}if(0<h.length&&(u===a||u===d))for(H=h.length;H--;){const [T,ea,sa]=h[H];u!==T||B&&B!==ea||D&&D!==sa||m.unbind(T,ea,sa)}return m.unbind(u,B,D)},da=u=>{if(u&&V(u)){const B=u.getAttribute("data-mce-contenteditable");return B&&"inherit"!==B?B:"inherit"!==u.contentEditable?u.contentEditable:null}return null},J={doc:a,settings:b,win:d,files:e,stdMode:!0,boxModel:!0,
styleSheetLoader:g,boundEvents:h,styles:l,schema:k,events:m,isBlock:u=>fa(u)?ha.call(n,u):V(u)&&(ha.call(n,u.nodeName)||Cd(k,u)),root:null,clone:(u,B)=>u.cloneNode(B),getRoot:()=>b.root_element||a.body,getViewPort:u=>{u=nn(u);return{x:u.x,y:u.y,w:u.width,h:u.height}},getRect:u=>{var B=t(u);u=v(B);B=P(B);return{x:u.x,y:u.y,w:B.w,h:B.h}},getSize:P,getParent:(u,B,D)=>(u=Y(u,B,D,!1))&&0<u.length?u[0]:null,getParents:Y,get:t,getNext:(u,B)=>O(u,B,"nextSibling"),getPrev:(u,B)=>O(u,B,"previousSibling"),select:(u,
B)=>{var D,H;B=null!==(H=null!==(D=t(B))&&void 0!==D?D:b.root_element)&&void 0!==H?H:a;return ya(B.querySelectorAll)?qb(B.querySelectorAll(u)):[]},is:N,add:qa,create:Ha,createHTML:(u,B,D)=>{D=void 0===D?"":D;let H="<"+u;for(const T in B)ra(B,T)&&(H+=" "+T+'="'+Ra(B[T])+'"');if(B=!(0<D.length))B=k.getVoidElements(),B=ha.call(B,u);return B?H+" />":H+">"+D+"</"+u+">"},createFragment:u=>{const B=a.createElement("div"),D=a.createDocumentFragment();D.appendChild(B);u&&(B.innerHTML=u);for(;u=B.firstChild;)D.appendChild(u);
D.removeChild(B);return D},remove:ab,setStyle:(u,B,D)=>{L(u,H=>{H=x.fromDom(H);Mn(H,B,D);b.update_styles&&Ln(l,H)})},getStyle:z,setStyles:(u,B)=>{L(u,D=>{const H=x.fromDom(D);Ea(B,(T,ea)=>{Mn(H,ea,T)});b.update_styles&&Ln(l,H)})},removeAllAttribs:u=>L(u,B=>{const D=B.attributes;for(let H=D.length-1;0<=H;H--)B.removeAttributeNode(D.item(H))}),setAttrib:r,setAttribs:U,getAttrib:w,getPos:v,parseStyle:u=>l.parse(u),serializeStyle:(u,B)=>l.serialize(u,B),addStyle:u=>{if(J!==Da.DOM&&a===document){if(c[u])return;
c[u]=!0}let B=a.getElementById("mceDefaultStyles");if(!B){B=a.createElement("style");B.id="mceDefaultStyles";B.type="text/css";const D=a.head;D.firstChild?D.insertBefore(B,D.firstChild):D.appendChild(B)}B.styleSheet?B.styleSheet.cssText+=u:B.appendChild(a.createTextNode(u))},loadCSS:u=>{u||(u="");G(u.split(","),B=>{e[B]=!0;g.load(B).catch(pa)})},addClass:(u,B)=>{ca(u,B,!0)},removeClass:(u,B)=>{ca(u,B,!1)},hasClass:(u,B)=>{const D=y(u);u=B.split(" ");return!aa(D)&&Lc(u,H=>Ni(D,H))},toggleClass:ca,
show:u=>{L(u,B=>hn(x.fromDom(B),"display"))},hide:u=>{L(u,B=>{B=x.fromDom(B);Qi(B.dom,"display","none")})},isHidden:u=>{u=y(u);return!aa(u)&&ee(Bg(u,"display"),"none")},uniqueId:u=>(u?u:"mce_")+f++,setHTML:ja,getOuterHTML:u=>{var B=y(u);if(aa(B))return"";V(B.dom)?u=B.dom.outerHTML:(u=x.fromTag("div"),B=x.fromDom(B.dom.cloneNode(!0)),u.dom.appendChild(B.dom),u=u.dom.innerHTML);return u},setOuterHTML:(u,B)=>{L(u,D=>{V(D)&&(D.outerHTML=B)})},decode:Wc.decode,encode:Ra,insertAfter:(u,B)=>{const D=t(B);
return L(u,H=>{const T=null===D||void 0===D?void 0:D.parentNode,ea=null===D||void 0===D?void 0:D.nextSibling;T&&(ea?T.insertBefore(H,ea):T.appendChild(H));return H})},replace:oa,rename:(u,B)=>{if(u.nodeName!==B.toUpperCase()){const D=Ha(B);oj(q(u),H=>{r(D,H.nodeName,w(u,H.nodeName))});oa(D,u,!0);return D}return u},findCommonAncestor:(u,B)=>{let D=u;for(;D;){let H=B;for(;H&&D!==H;)H=H.parentNode;if(D===H)break;D=D.parentNode}return!D&&u.ownerDocument?u.ownerDocument.documentElement:D},run:L,getAttribs:q,
isEmpty:(u,B,D)=>{let H=0;if(M(u))return!1;var T=u.firstChild;if(T){u=new Ta(T,u);const sa=k?k.getWhitespaceElements():{};B=B||(k?k.getNonEmptyElements():null);do{if(V(T)){var ea=T.getAttribute("data-mce-bogus");if(ea){T=u.next("all"===ea);continue}ea=T.nodeName.toLowerCase();if(B&&B[ea]){if("br"===ea){H++;T=u.next();continue}return!1}if(M(T))return!1}if(Sc(T))return!1;if((ea=E(T)&&!Bd.test(T.data))&&!(ea=!(null===D||void 0===D?0:D.includeZwsp))){a:{ea=T.data;for(const Aa of ea)if("\ufeff"!==Aa){ea=
!1;break a}ea=!0}ea=!ea}if(ea||E(T)&&T.parentNode&&sa[T.parentNode.nodeName]&&Bd.test(T.data))return!1;T=u.next()}while(T)}return 1>=H},createRng:()=>a.createRange(),nodeIndex:qe,split:(u,B,D)=>{var H=a.createRange();let T;if(u&&B&&u.parentNode&&B.parentNode){const ea=u.parentNode;H.setStart(ea,qe(u));H.setEnd(B.parentNode,qe(B));T=H.extractContents();H=a.createRange();H.setStart(B.parentNode,qe(B)+1);H.setEnd(ea,qe(u)+1);H=H.extractContents();ea.insertBefore(hj(J,T),u);D?ea.insertBefore(D,u):ea.insertBefore(B,
u);ea.insertBefore(hj(J,H),u);ab(u);return D||B}},bind:Q,unbind:Z,fire:(u,B,D)=>m.dispatch(u,B,D),dispatch:(u,B,D)=>m.dispatch(u,B,D),getContentEditable:da,getContentEditableParent:u=>{const B=b.root_element||a.body;let D=null;for(;u&&u!==B&&(D=da(u),null===D);u=u.parentNode);return D},isEditable:u=>{if(aa(u))return!1;u=V(u)?u:u.parentElement;return!aa(u)&&wd(x.fromDom(u))},destroy:()=>{if(0<h.length){let u=h.length;for(;u--;){const [B,D,H]=h[u];m.unbind(B,D,H)}}Ea(e,(u,B)=>{g.unload(B);delete e[B]})},
isChildOf:(u,B)=>u===B||B.contains(u),dumpRng:u=>"startContainer: "+u.startContainer.nodeName+", startOffset: "+u.startOffset+", endContainer: "+u.endContainer.nodeName+", endOffset: "+u.endOffset},ba=ey(l,b,R(J));return J};Da.DOM=Da(document);Da.nodeIndex=qe;const Pg=Da.DOM;class Ec{constructor(a){a=void 0===a?{}:a;this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=!1;this.settings=a}_setReferrerPolicy(a){this.settings.referrerPolicy=a}loadScript(a){return new Promise((b,
c)=>{let d;const e=Pg.uniqueId();d=document.createElement("script");d.id=e;d.type="text/javascript";d.src=K._addCacheSuffix(a);this.settings.referrerPolicy&&Pg.setAttrib(d,"referrerpolicy",this.settings.referrerPolicy);d.onload=()=>{Pg.remove(e);d&&(d.onerror=d.onload=d=null);b()};d.onerror=()=>{Pg.remove(e);d&&(d.onerror=d.onload=d=null);c("Failed to load script: "+a)};(document.getElementsByTagName("head")[0]||document.body).appendChild(d)})}isDone(a){return 2===this.states[a]}markDone(a){this.states[a]=
2}add(a){const b=this;b.queue.push(a);void 0===b.states[a]&&(b.states[a]=0);return new Promise((c,d)=>{b.scriptLoadedCallbacks[a]||(b.scriptLoadedCallbacks[a]=[]);b.scriptLoadedCallbacks[a].push({resolve:c,reject:d})})}load(a){return this.add(a)}remove(a){delete this.states[a];delete this.scriptLoadedCallbacks[a]}loadQueue(){const a=this.queue;this.queue=[];return this.loadScripts(a)}loadScripts(a){const b=this,c=(h,k)=>{Fa(b.scriptLoadedCallbacks,k).each(l=>{G(l,m=>m[h](k))});delete b.scriptLoadedCallbacks[k]},
d=h=>{h=ka(h,k=>"rejected"===k.status);return 0<h.length?Promise.reject(gc(h,k=>{({reason:k}=k);return Sa(k)?k:[k]})):Promise.resolve()},e=h=>Promise.allSettled(wa(h,k=>{if(2===b.states[k])return c("resolve",k),Promise.resolve();if(3===b.states[k])return c("reject",k),Promise.reject(k);b.states[k]=1;return b.loadScript(k).then(()=>{b.states[k]=2;c("resolve",k);const l=b.queue;return 0<l.length?(b.queue=[],e(l).then(d)):Promise.resolve()},()=>{b.states[k]=3;c("reject",k);return Promise.reject(k)})})),
f=h=>{b.loading=!0;return e(h).then(k=>{b.loading=!1;const l=b.queueLoadedCallbacks.shift();p.from(l).each(Pe);return d(k)})},g=Lm(a);return b.loading?new Promise((h,k)=>{b.queueLoadedCallbacks.push(()=>{f(g).then(h,k)})}):f(g)}}Ec.ScriptLoader=new Ec;const Wa=a=>{let b=a;return{get:()=>b,set:c=>{b=c}}},fy=a=>jb(a)&&ha.call(a,"raw"),gy=a=>Sa(a)&&1<a.length,re={},Qg=Wa("en"),cc={getData:()=>tg(re,a=>Object.assign({},a)),setCode:a=>{a&&Qg.set(a)},getCode:()=>Qg.get(),add:(a,b)=>{let c=re[a];c||(re[a]=
c={});Ea(b,(d,e)=>{c[e.toLowerCase()]=d})},translate:a=>{const b=Fa(re,Qg.get()).getOr({}),c=e=>ya(e)?Object.prototype.toString.call(e):""!==e&&null!==e&&void 0!==e?""+e:"",d=e=>{e=c(e);return Fa(b,e.toLowerCase()).map(c).getOr(e)};if(""===a||null===a||void 0===a)return"";if(fy(a))return c(a.raw);if(gy(a)){const e=a.slice(1);return d(a[0]).replace(/\{([0-9]+)\}/g,(f,g)=>ha.call(e,g)?c(e[g]):f).replace(/{context:\w+}$/,"")}return d(a).replace(/{context:\w+}$/,"")},isRtl:()=>Fa(re,Qg.get()).bind(a=>
Fa(a,"_dir")).exists(a=>"rtl"===a),hasCode:a=>ha.call(re,a)},lb=()=>{const a=[],b={},c={},d=[],e=(h,k)=>{const l=ka(d,m=>m.name===h&&m.state===k);G(l,m=>m.resolve())},f=(h,k)=>{const l=cc.getCode();!l||k&&-1===(","+(k||"")+",").indexOf(","+l+",")||Ec.ScriptLoader.add(b[h]+"/langs/"+l+".js")},g=(h,k)=>{k=void 0===k?"added":k;return"added"===k&&ha.call(c,h)?Promise.resolve():"loaded"===k&&ha.call(b,h)?Promise.resolve():new Promise(l=>{d.push({name:h,state:k,resolve:l})})};return{items:a,urls:b,lookup:c,
get:h=>{if(c[h])return c[h].instance},requireLangPack:(h,k)=>{!1!==lb.languageLoad&&(ha.call(b,h)?f(h,k):g(h,"loaded").then(()=>f(h,k)))},add:(h,k)=>{a.push(k);c[h]={instance:k};e(h,"added");return k},remove:h=>{delete b[h];delete c[h]},createUrl:(h,k)=>fa(k)?fa(h)?{prefix:"",resource:k,suffix:""}:{prefix:h.prefix,resource:k,suffix:h.suffix}:k,load:(h,k)=>{if(b[h])return Promise.resolve();k=fa(k)?k:k.prefix+k.resource+k.suffix;0!==k.indexOf("/")&&-1===k.indexOf("://")&&(k=lb.baseURL+"/"+k);b[h]=k.substring(0,
k.lastIndexOf("/"));const l=()=>{e(h,"loaded");return Promise.resolve()};return c[h]?l():Ec.ScriptLoader.add(k).then(l)},waitFor:g}};lb.languageLoad=!0;lb.baseURL="";lb.PluginManager=lb();lb.ThemeManager=lb();lb.ModelManager=lb();const hy=a=>{const b=Wa(p.none());return{clear:()=>{b.get().each(a);b.set(p.none())},isSet:()=>b.get().isSome(),get:()=>b.get(),set:c=>{b.get().each(a);b.set(p.some(c))}}},iy=a=>{const b=Wa(p.none()),c=()=>b.get().each(d=>clearInterval(d));return{clear:()=>{c();b.set(p.none())},
isSet:()=>b.get().isSome(),get:()=>b.get(),set:d=>{c();b.set(p.some(setInterval(d,a)))}}},Yc=()=>{const a=hy(pa);return Object.assign({},a,{on:b=>a.get().each(b)})},Rg=(a,b)=>{let c=null;return{cancel:()=>{zb(c)||(clearTimeout(c),c=null)},throttle:(...d)=>{zb(c)&&(c=setTimeout(()=>{c=null;a.apply(null,d)},b))}}},pj=(a,b)=>{let c=null;const d=()=>{zb(c)||(clearTimeout(c),c=null)};return{cancel:d,throttle:(...e)=>{d();c=setTimeout(()=>{c=null;a.apply(null,e)},b)}}},mf=R("mce-annotation"),Fd=R("data-mce-annotation"),
se=R("data-mce-annotation-uid"),nf=R("data-mce-annotation-active"),of=R("data-mce-annotation-classes"),pf=R("data-mce-annotation-attrs"),Nn=a=>b=>b.dom===a.dom,Pn=(a,b)=>{var c=a.selection.getRng();const d=x.fromDom(c.startContainer),e=x.fromDom(a.getBody());b=b.fold(()=>"."+mf(),f=>`[${Fd()}="${f}"]`);c=kc(d,c.startOffset).getOr(d);return Pc(c,b,Nn(e)).bind(f=>af(f,`${se()}`).bind(g=>af(f,`${Fd()}`).map(h=>{const k=On(a,g);return{uid:g,name:h,elements:k}})))},jy=a=>tb(a)&&Ni(a,mf()),Qn=(a,b)=>{var c;
(c=xg(a,"data-mce-bogus"))||(b=Nn(b),c=$b(a,'[data-mce-bogus="all"]',b).isSome());return c},On=(a,b)=>{const c=x.fromDom(a.getBody());a=me(c,`[${se()}="${b}"]`);return ka(a,d=>!Qn(d,c))},Rn=(a,b)=>{const c=x.fromDom(a.getBody());a=me(c,`[${Fd()}="${b}"]`);const d={};G(a,e=>{if(!Qn(e,c)){const f=fb(e,se()),g=Fa(d,f).getOr([]);d[f]=g.concat([e])}});return d},ky=(a,b)=>{const c=Wa({}),d=()=>({listeners:[],previous:Yc()}),e=(m,n)=>{f(m,t=>{n(t);return t})},f=(m,n)=>{const t=c.get(),y=Fa(t,m).getOrThunk(d);
n=n(y);t[m]=n;c.set(t)},g=(m,n,t)=>{e(m,y=>{G(y.listeners,w=>w(!0,m,{uid:n,nodes:wa(t,q=>q.dom)}))})},h=m=>{e(m,n=>{G(n.listeners,t=>t(!1,m))})},k=(m,n)=>{G(On(a,m),t=>{if(n){var y=nf();Va(t.dom,y,"true")}else y=nf(),t.dom.removeAttribute(y)})},l=pj(()=>{const m=sd(b.getNames());G(m,n=>{f(n,t=>{const y=t.previous.get();Pn(a,p.some(n)).fold(()=>{y.each(w=>{h(n);t.previous.clear();k(w,!1)})},w=>{var {uid:q,name:r,elements:v}=w;ee(y,q)||(y.each(z=>k(z,!1)),g(r,q,v),t.previous.set(q),k(q,!0))});return{previous:t.previous,
listeners:t.listeners}})})},30);a.on("remove",()=>{l.cancel()});a.on("NodeChange",()=>{l.throttle()});return{addListener:(m,n)=>{f(m,t=>({previous:t.previous,listeners:t.listeners.concat([n])}))}}},ly=(a,b)=>{const c=Fd(),d=e=>{var f,g;e.attr(se(),null);e.attr(Fd(),null);e.attr(nf(),null);var h=p.from(e.attr(pf())).map(l=>l.split(",")).getOr([]);const k=p.from(e.attr(of())).map(l=>l.split(",")).getOr([]);G(h,l=>e.attr(l,null));h=null!==(g=null===(f=e.attr("class"))||void 0===f?void 0:f.split(" "))&&
void 0!==g?g:[];f=sg(h,[mf()].concat(k));e.attr("class",0<f.length?f.join(" "):null);e.attr(of(),null);e.attr(pf(),null)};a.serializer.addTempAttr(nf());a.serializer.addAttributeFilter(c,e=>{for(const f of e)p.from(f.attr(c)).bind(b.lookup).each(g=>{!1===g.persistent&&("span"===f.name?f.unwrap():d(f))})})},my=()=>{const a={};return{register:(b,c)=>{a[b]={name:b,settings:c}},lookup:b=>Fa(a,b).map(c=>c.settings),getNames:()=>rb(a)}};let Sn=0;const qf=a=>{const b=(new Date).getTime(),c=Math.floor(1E9*
Math.random());Sn++;return a+"_"+c+Sn+String(b)},ny=(a,b)=>{G(b,c=>{ge(a,c)})},oy=(a,b)=>{G(b,c=>{he(a,c)})},py=a=>x.fromDom(a.dom.cloneNode(!1)),Tn=(a,b)=>{b=x.fromTag(b);var c=Xm(a);Mc(b,c);Qc(a,b);c=bb(a);xd(b,c);Ja(a);return b},Un=(a,b,c)=>{c=void 0===c?za:c;const d=new Ta(a,b),e=f=>{let g;do g=d[f]();while(g&&!E(g)&&!c(g));return p.from(g).filter(E)};return{current:()=>p.from(d.current()).filter(E),next:()=>e("next"),prev:()=>e("prev"),prev2:()=>e("prev2")}},Gd=(a,b)=>{const c=b?b:e=>a.isBlock(e)||
Ga(e)||va(e),d=(e,f,g,h)=>E(e)&&(f=h(e,f,e.data),-1!==f)?p.some({container:e,offset:f}):g().bind(k=>d(k.container,k.offset,g,h));return{backwards:(e,f,g,h)=>{const k=Un(e,null!==h&&void 0!==h?h:a.getRoot(),c);return d(e,f,()=>k.prev().map(l=>({container:l,offset:l.length})),g).getOrNull()},forwards:(e,f,g,h)=>{const k=Un(e,null!==h&&void 0!==h?h:a.getRoot(),c);return d(e,f,()=>k.next().map(l=>({container:l,offset:0})),g).getOrNull()}}},te=Math.round,Hd=a=>a?{left:te(a.left),top:te(a.top),bottom:te(a.bottom),
right:te(a.right),width:te(a.width),height:te(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Vn=(a,b)=>{a=Hd(a);b||(a.left+=a.width);a.right=a.left;a.width=0;return a},rf=(a,b)=>{if(a.bottom-Math.min(b.height/2,a.height/2)<b.top)return!0;if(a.top>b.bottom)return!1;var c=b.top-a.bottom;return 0<=c&&c<=Math.min(a.height,b.height)/2},sf=(a,b)=>{if(a.top>b.bottom)return!0;if(a.bottom<b.top)return!1;var c=b.bottom-a.top;return 0<=c&&c<=Math.min(a.height,b.height)/2},qy=a=>Db(a,(b,c)=>b.fold(()=>
p.some(c),d=>{const e=Math.min(c.left,d.left),f=Math.min(c.top,d.top),g=Math.max(c.right,d.right);d=Math.max(c.bottom,d.bottom);return p.some({top:f,right:g,bottom:d,left:e,width:g-e,height:d-f})}),p.none()),Wn=(a,b,c)=>{const d=Math.max(Math.min(b,a.left+a.width),a.left);a=Math.max(Math.min(c,a.top+a.height),a.top);return Math.sqrt((b-d)*(b-d)+(c-a)*(c-a))},Sg=a=>{const b=a.startContainer,c=a.startOffset;return b===a.endContainer&&b.hasChildNodes()&&a.endOffset===c+1?b.childNodes[c]:null},Zc=(a,
b)=>V(a)&&a.hasChildNodes()?(a=a.childNodes,a[Math.min(Math.max(b,0),a.length-1)]):a,ry=RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),
Xn=a=>fa(a)&&768<=a.charCodeAt(0)&&ry.test(a),Yn=Eg("display","block table"),sy=Eg("float","left right"),tf=((...a)=>b=>{for(let c=0;c<a.length;c++)if(!a[c](b))return!1;return!0})(V,kb,qg(sy)),ty=qg(Eg("white-space","pre pre-line pre-wrap")),Zn=Da.nodeIndex,Tg=(a,b)=>{if(!(0>b&&V(a)&&a.hasChildNodes()))return Zc(a,b)},qj=a=>a?a.createRange():Da.DOM.createRng(),rj=a=>fa(a)&&/[\r\n\t ]/.test(a),sj=a=>{const b=a.startContainer,c=a.startOffset;return rj(a.toString())&&ty(b.parentNode)&&E(b)&&(a=b.data,
rj(a[c-1])||rj(a[c+1]))?!0:!1},$c=a=>{var b=a.getClientRects();b=0<b.length?Hd(b[0]):Hd(a.getBoundingClientRect());if((!a.setStart||!a.setEnd)&&Ga(a)&&0===b.left&&0===b.right&&0===b.top&&0===b.bottom){b=a.ownerDocument;var c=qj(b);b=b.createTextNode("\u00a0");var d=a.parentNode;d.insertBefore(b,a);c.setStart(b,0);c.setEnd(b,1);a=Hd(c.getBoundingClientRect());d.removeChild(b);return a}if(0===b.left&&0===b.right&&0===b.top&&0===b.bottom&&a.setStart&&a.setEnd){{d=a.endContainer;const e=a.startOffset,
f=a.endOffset;a.startContainer===d&&E(d)&&0===e&&1===f?(a=a.cloneRange(),a.setEndAfter(d),a=$c(a)):a=null}return null!==(c=a)&&void 0!==c?c:b}return b},Id=(a,b)=>{a=Vn(a,b);a.width=1;a.right=a.left+1;return a},uy=a=>{const b=[],c=g=>{if(0!==g.height){if(0<b.length){var h=b[b.length-1];if(g.left===h.left&&g.top===h.top&&g.bottom===h.bottom&&g.right===h.right)return}b.push(g)}};var d=(g,h)=>{const k=qj(g.ownerDocument);if(h<g.data.length){if(Xn(g.data[h]))return;if(Xn(g.data[h-1])&&(k.setStart(g,h),
k.setEnd(g,h+1),!sj(k))){c(Id($c(k),!1));return}}0<h&&(k.setStart(g,h-1),k.setEnd(g,h),sj(k)||c(Id($c(k),!1)));h<g.data.length&&(k.setStart(g,h),k.setEnd(g,h+1),sj(k)||c(Id($c(k),!0)))},e=a.container();const f=a.offset();if(E(e))return d(e,f),b;if(V(e))if(a.isAtEnd())a=Tg(e,f),E(a)&&d(a,a.data.length),tf(a)&&!Ga(a)&&c(Id($c(a),!1));else{e=Tg(e,f);E(e)&&d(e,0);if(tf(e)&&a.isAtEnd())return c(Id($c(e),!1)),b;d=Tg(a.container(),a.offset()-1);tf(d)&&!Ga(d)&&(Yn(d)||Yn(e)||!tf(e))&&c(Id($c(d),!1));tf(e)&&
c(Id($c(e),!0))}return b},C=(a,b,c)=>{const d=()=>{c||(c=uy(C(a,b)));return c};return{container:R(a),offset:R(b),toRange:()=>{const e=qj(a.ownerDocument);e.setStart(a,b);e.setEnd(a,b);return e},getClientRects:d,isVisible:()=>0<d().length,isAtStart:()=>{E(a);return 0===b},isAtEnd:()=>E(a)?b>=a.data.length:b>=a.childNodes.length,isEqual:e=>e&&a===e.container()&&b===e.offset(),getNode:e=>Tg(a,e?b-1:b)}};C.fromRangeStart=a=>C(a.startContainer,a.startOffset);C.fromRangeEnd=a=>C(a.endContainer,a.endOffset);
C.after=a=>C(a.parentNode,Zn(a)+1);C.before=a=>C(a.parentNode,Zn(a));C.isAbove=(a,b)=>sb($a(b.getClientRects(),0),Ve(a.getClientRects()),rf).getOr(!1);C.isBelow=(a,b)=>sb(Ve(b.getClientRects()),$a(a.getClientRects(),0),sf).getOr(!1);C.isAtStart=a=>a?a.isAtStart():!1;C.isAtEnd=a=>a?a.isAtEnd():!1;C.isTextPosition=a=>a?E(a.container()):!1;C.isElementPosition=a=>!C.isTextPosition(a);const Ug=(a,b)=>{E(b)&&0===b.data.length&&a.remove(b)},vy=(a,b,c)=>{const d=p.from(c.firstChild),e=p.from(c.lastChild);
b.insertNode(c);d.each(f=>Ug(a,f.previousSibling));e.each(f=>Ug(a,f.nextSibling))},tj=(a,b,c)=>{Vi(c)?vy(a,b,c):(b.insertNode(c),Ug(a,c.previousSibling),Ug(a,c.nextSibling))},$n=Da.nodeIndex,ao=a=>{a=a.parentNode;return Rc(a)?ao(a):a},uj=a=>a?vg(a.childNodes,(b,c)=>{Rc(c)&&"BR"!==c.nodeName?b=b.concat(uj(c)):b.push(c);return b},[]):[],wy=(a,b)=>{for(;(a=a.previousSibling)&&E(a);)b+=a.data.length;return b},bo=a=>b=>a===b,xy=a=>{let b,c;b=uj(ao(a));c=Mm(b,bo(a),a);b=b.slice(0,c+1);const d=vg(b,(e,f,
g)=>{E(f)&&E(b[g-1])&&e++;return e},0);b=Ye(b,ac([a.nodeName]));c=Mm(b,bo(a),a);return c-d},co=a=>(E(a)?"text()":a.nodeName.toLowerCase())+"["+xy(a)+"]",yy=(a,b,c)=>{const d=[];for(b=b.parentNode;b&&b!==a&&(!c||!c(b));b=b.parentNode)d.push(b);return d},eo=(a,b)=>{let c=[];var d=b.container();let e=b.offset();E(d)?b=wy(d,e):(d=d.childNodes,e>=d.length?(b="after",e=d.length-1):b="before",d=d[e]);c.push(co(d));a=yy(a,d);a=Ye(a,qg(Rc));c=c.concat(Gi(a,f=>co(f)));return c.reverse().join("/")+","+b},zy=
(a,b,c)=>{let d=uj(a);d=Ye(d,(e,f)=>!E(e)||!E(d[f-1]));d=Ye(d,ac([b]));return d[c]},Ay=(a,b)=>{let c=a,d=0;for(;E(c);){const e=c.data.length;if(b>=d&&b<=d+e){a=c;b-=d;break}if(!E(c.nextSibling)){a=c;b=e;break}d+=e;c=c.nextSibling}E(a)&&b>a.data.length&&(b=a.data.length);return C(a,b)},fo=(a,b)=>{if(!b)return null;var c=b.split(",");b=c[0].split("/");c=1<c.length?c[1]:"before";a=vg(b,(d,e)=>{e=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);if(!e)return null;"text()"===e[1]&&(e[1]="#text");return zy(d,e[1],parseInt(e[2],
10))},a);return a?!E(a)&&a.parentNode?(b="after"===c?$n(a)+1:$n(a),C(a.parentNode,b)):Ay(a,parseInt(c,10)):null},go=(a,b,c,d,e)=>{var f=e?d.startContainer:d.endContainer,g=e?d.startOffset:d.endOffset;d=[];e=a.getRoot();if(E(f)){var h=d.push;if(c){g=b(f.data.slice(0,g)).length;for(let k=f.previousSibling;k&&E(k);k=k.previousSibling)g+=b(k.data).length;b=g}else b=g;h.call(d,b)}else b=0,h=f.childNodes,g>=h.length&&h.length&&(b=1,g=Math.max(0,h.length-1)),d.push(a.nodeIndex(h[g],c)+b);for(;f&&f!==e;f=
f.parentNode)d.push(a.nodeIndex(f,c));return d},vj=(a,b,c)=>{let d=0;K.each(a.select(b),e=>{if("all"!==e.getAttribute("data-mce-bogus")){if(e===c)return!1;d++}});return d},Vg=(a,b)=>{var c=b?a.startContainer:a.endContainer;let d=b?a.startOffset:a.endOffset;V(c)&&"TR"===c.nodeName&&(c=c.childNodes,c=c[Math.min(b?d:d-1,c.length-1)])&&(d=b?0:c.childNodes.length,b?a.setStart(c,d):a.setEnd(c,d))},ho=(a,b)=>{if(V(a)&&(a=Zc(a,b),va(a)))return a;if(Eb(a)){E(a)&&Uc(a)&&(a=a.parentNode);b=a.previousSibling;
if(va(b))return b;b=a.nextSibling;if(va(b))return b}},io=(a,b,c)=>{var d=c.getNode();const e=c.getRng();if("IMG"===d.nodeName||va(d))return a=d.nodeName,{name:a,index:vj(c.dom,a,d)};if(d=ho(e.startContainer,e.startOffset)||ho(e.endContainer,e.endOffset))return a=d.tagName,{name:a,index:vj(c.dom,a,d)};{const f=c.dom;d=go(f,a,b,e,!0);const g=c.isForward(),h=Uc(e.startContainer)?{isFakeCaret:!0}:{};c.isCollapsed()?c=Object.assign({},{start:d,forward:g},h):(c=go(f,a,b,e,!1),c=Object.assign({},{start:d,
end:c,forward:g},h))}return c},jo=(a,b,c)=>{b={"data-mce-type":"bookmark",id:b,style:"overflow:hidden;line-height:0px"};return c?a.create("span",b,"&#xFEFF;"):a.create("span",b)},ko=(a,b)=>{const c=a.dom;var d=a.getRng();const e=c.uniqueId();var f=a.isCollapsed(),g=a.getNode();const h=g.nodeName,k=a.isForward();if("IMG"===h)return{name:h,index:vj(c,h,g)};g=d.cloneRange();Vg(g,!0);Vg(g,!1);f||(g.collapse(!1),f=jo(c,e+"_end",b),tj(c,g,f));Vg(d,!0);Vg(d,!1);d.collapse(!0);b=jo(c,e+"_start",b);tj(c,d,
b);a.moveToBookmark({id:e,keep:!0,forward:k});return{id:e,forward:k}},wj=A(io,Ka,!0),lo=a=>{const b=f=>f(a),c=R(a),d=()=>e,e={tag:!0,inner:a,fold:(f,g)=>g(a),isValue:Qa,isError:za,map:f=>ub.value(f(a)),mapError:d,bind:b,exists:b,forall:b,getOr:c,or:d,getOrThunk:c,orThunk:d,getOrDie:c,each:f=>{f(a)},toOptional:()=>p.some(a)};return e},mo=a=>{const b=()=>c,c={tag:!1,inner:a,fold:(d,e)=>d(a),isValue:za,isError:Qa,map:b,mapError:d=>ub.error(d(a)),bind:b,exists:za,forall:Qa,getOr:Ka,or:Ka,getOrThunk:Bi,
orThunk:Bi,getOrDie:Im(String(a)),each:pa,toOptional:p.none};return c},ub={value:lo,error:mo,fromOption:(a,b)=>a.fold(()=>mo(b),lo)},nc={generate:a=>{if(!Sa(a))throw Error("cases must be an array");if(0===a.length)throw Error("there must be at least one case");const b=[],c={};G(a,(d,e)=>{const f=rb(d);if(1!==f.length)throw Error("one and only one name per case");const g=f[0],h=d[g];if(void 0!==c[g])throw Error("duplicate key detected:"+g);if("cata"===g)throw Error("cannot have a case named cata (sorry)");
if(!Sa(h))throw Error("case arguments must be an array");b.push(g);c[g]=(...k)=>{const l=k.length;if(l!==h.length)throw Error("Wrong number of arguments to case "+g+". Expected "+h.length+" ("+h+"), got "+l);return{fold:(...m)=>{if(m.length!==a.length)throw Error("Wrong number of arguments to fold. Expected "+a.length+", got "+m.length);return m[e].apply(null,k)},match:m=>{const n=rb(m);if(b.length!==n.length)throw Error("Wrong number of arguments to match. Expected: "+b.join(",")+"\nActual: "+n.join(","));
if(!Lc(b,t=>-1<Ca.call(n,t)))throw Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+b.join(", "));return m[g].apply(null,k)},log:m=>{console.log(m,{constructors:b,constructor:g,params:k})}}}});return c}};nc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const By=a=>{const b=[],c=[];G(a,d=>{d.fold(e=>{b.push(e)},e=>{c.push(e)})});return{errors:b,values:c}},
no=a=>"inline-command"===a.type||"inline-format"===a.type,oo=a=>"block-command"===a.type||"block-format"===a.type,Cy=a=>{const b=d=>ub.error({message:d,pattern:a}),c=(d,e,f)=>{if(void 0!==a.format){if(Sa(a.format)){if(!Lc(a.format,fa))return b(d+" pattern has non-string items in the `format` array");d=a.format}else if(fa(a.format))d=[a.format];else return b(d+" pattern has non-string `format` parameter");return ub.value(e(d))}return void 0!==a.cmd?fa(a.cmd)?ub.value(f(a.cmd,a.value)):b(d+" pattern has non-string `cmd` parameter"):
b(d+" pattern is missing both `format` and `cmd` parameters")};if(!jb(a))return b("Raw pattern is not an object");if(!fa(a.start))return b("Raw pattern is missing `start` parameter");if(void 0!==a.end){if(!fa(a.end))return b("Inline pattern has non-string `end` parameter");if(0===a.start.length&&0===a.end.length)return b("Inline pattern has empty `start` and `end` parameters");let d=a.start,e=a.end;0===e.length&&(e=d,d="");return c("Inline",f=>({type:"inline-format",start:d,end:e,format:f}),(f,g)=>
({type:"inline-command",start:d,end:e,cmd:f,value:g}))}return void 0!==a.replacement?fa(a.replacement)?0===a.start.length?b("Replacement pattern has empty `start` parameter"):ub.value({type:"inline-command",start:"",end:a.start,cmd:"mceInsertContent",value:a.replacement}):b("Replacement pattern has non-string `replacement` parameter"):0===a.start.length?b("Block pattern has empty `start` parameter"):c("Block",d=>({type:"block-format",start:a.start,format:d[0]}),(d,e)=>({type:"block-command",start:a.start,
cmd:d,value:e}))},po=(a,b)=>({inlinePatterns:ka(a,no),blockPatterns:ka(a,oo),dynamicPatternsLookup:b}),qo=a=>{a=By(wa(a,Cy));G(a.errors,b=>console.error(b.message,b.pattern));return a.values},Dy=a=>b=>{b=a(b);return qo(b)},xj=hc().deviceType,Ey=xj.isTouch(),Fy=Da.DOM,Gy=a=>{a=0<a.indexOf("=")?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(",");return Db(a,(b,c)=>{var d=c.split("=");c=d[0];d=1<d.length?d[1]:c;b[de(c)]=de(d);return b},{})},Hy=a=>Zd(a,RegExp),W=a=>b=>b.options.get(a),yj=a=>fa(a)||jb(a),
ro=(a,b)=>{b=void 0===b?"":b;return c=>{const d=fa(c);return d?-1!==c.indexOf("=")?(c=Gy(c),{value:Fa(c,a.id).getOr(b),valid:d}):{value:c,valid:d}:{valid:!1,message:"Must be a string."}}},Iy=a=>{const b=a.options.register;b("id",{processor:"string",default:a.id});b("selector",{processor:"string"});b("target",{processor:"object"});b("suffix",{processor:"string"});b("cache_suffix",{processor:"string"});b("base_url",{processor:"string"});b("referrer_policy",{processor:"string",default:""});b("language_load",
{processor:"boolean",default:!0});b("inline",{processor:"boolean",default:!1});b("iframe_attrs",{processor:"object",default:{}});b("doctype",{processor:"string",default:"<!DOCTYPE html>"});b("document_base_url",{processor:"string",default:a.documentBaseUrl});b("body_id",{processor:ro(a,"tinymce"),default:"tinymce"});b("body_class",{processor:ro(a),default:""});b("content_security_policy",{processor:"string",default:""});b("br_in_pre",{processor:"boolean",default:!0});b("forced_root_block",{processor:c=>
{const d=fa(c)&&0<c.length;return d?{value:c,valid:d}:{valid:!1,message:"Must be a non-empty string."}},default:"p"});b("forced_root_block_attrs",{processor:"object",default:{}});b("newline_behavior",{processor:c=>{var d;return(d=-1<Ca.call(["block","linebreak","invert","default"],c))?{value:c,valid:d}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"});b("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"});b("no_newline_selector",
{processor:"string",default:""});b("keep_styles",{processor:"boolean",default:!0});b("end_container_on_empty_block",{processor:c=>rd(c)?{valid:!0,value:c}:fa(c)?{valid:!0,value:c}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"});b("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"});b("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"});b("font_size_classes",{processor:"string",
default:""});b("automatic_uploads",{processor:"boolean",default:!0});b("images_reuse_filename",{processor:"boolean",default:!1});b("images_replace_blob_uris",{processor:"boolean",default:!0});b("icons",{processor:"string",default:""});b("icons_url",{processor:"string",default:""});b("images_upload_url",{processor:"string",default:""});b("images_upload_base_path",{processor:"string",default:""});b("images_upload_credentials",{processor:"boolean",default:!1});b("images_upload_handler",{processor:"function"});
b("language",{processor:"string",default:"en"});b("language_url",{processor:"string",default:""});b("entity_encoding",{processor:"string",default:"named"});b("indent",{processor:"boolean",default:!0});b("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"});b("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"});
b("indent_use_margin",{processor:"boolean",default:!1});b("indentation",{processor:"string",default:"40px"});b("content_css",{processor:c=>{const d=!1===c||fa(c)||$d(c,fa);return d?fa(c)?{value:wa(c.split(","),de),valid:d}:Sa(c)?{value:c,valid:d}:!1===c?{value:[],valid:d}:{value:c,valid:d}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:zj(a)?[]:["default"]});b("content_style",{processor:"string"});b("content_css_cors",{processor:"boolean",default:!1});b("font_css",{processor:c=>
{const d=fa(c)||$d(c,fa);return d?{value:Sa(c)?c:wa(c.split(","),de),valid:d}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]});b("inline_boundaries",{processor:"boolean",default:!0});b("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"});b("object_resizing",{processor:c=>{const d=rd(c)||fa(c);return d?!1===c||xj.isiPhone()||xj.isiPad()?{value:"",valid:d}:{value:!0===c?"table,img,figure.image,div,video,iframe":c,valid:d}:{valid:!1,
message:"Must be boolean or a string"}},default:!Ey});b("resize_img_proportional",{processor:"boolean",default:!0});b("event_root",{processor:"object"});b("service_message",{processor:"string"});b("theme",{processor:c=>!1===c||fa(c)||ya(c),default:"silver"});b("theme_url",{processor:"string"});b("formats",{processor:"object"});b("format_empty_lines",{processor:"boolean",default:!1});b("format_noneditable_selector",{processor:"string",default:""});b("preview_styles",{processor:c=>{const d=!1===c||
fa(c);return d?{value:!1===c?"":c,valid:d}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"});b("custom_ui_selector",{processor:"string",default:""});b("hidden_input",{processor:"boolean",default:!0});b("submit_patch",{processor:"boolean",default:!0});b("encoding",{processor:"string"});b("add_form_submit_trigger",{processor:"boolean",default:!0});b("add_unload_trigger",
{processor:"boolean",default:!0});b("custom_undo_redo_levels",{processor:"number",default:0});b("disable_nodechange",{processor:"boolean",default:!1});b("readonly",{processor:"boolean",default:!1});b("editable_root",{processor:"boolean",default:!0});b("plugins",{processor:"string[]",default:[]});b("external_plugins",{processor:"object"});b("forced_plugins",{processor:"string[]"});b("model",{processor:"string",default:a.hasPlugin("rtc")?"plugin":"dom"});b("model_url",{processor:"string"});b("block_unsupported_drop",
{processor:"boolean",default:!0});b("visual",{processor:"boolean",default:!0});b("visual_table_class",{processor:"string",default:"mce-item-table"});b("visual_anchor_class",{processor:"string",default:"mce-item-anchor"});b("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."});b("setup",{processor:"function"});b("init_instance_callback",{processor:"function"});b("url_converter",{processor:"function",default:a.convertURL});b("url_converter_scope",{processor:"object",
default:a});b("urlconverter_callback",{processor:"function"});b("allow_conditional_comments",{processor:"boolean",default:!1});b("allow_html_data_urls",{processor:"boolean",default:!1});b("allow_svg_data_urls",{processor:"boolean"});b("allow_html_in_named_anchor",{processor:"boolean",default:!1});b("allow_script_urls",{processor:"boolean",default:!1});b("allow_unsafe_link_target",{processor:"boolean",default:!1});b("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0});b("fix_list_elements",
{processor:"boolean",default:!1});b("preserve_cdata",{processor:"boolean",default:!1});b("remove_trailing_brs",{processor:"boolean",default:!0});b("pad_empty_with_br",{processor:"boolean",default:!1});b("inline_styles",{processor:"boolean",default:!0,deprecated:!0});b("element_format",{processor:"string",default:"html"});b("entities",{processor:"string"});b("schema",{processor:"string",default:"html5"});b("convert_urls",{processor:"boolean",default:!0});b("relative_urls",{processor:"boolean",default:!0});
b("remove_script_host",{processor:"boolean",default:!0});b("custom_elements",{processor:"string"});b("extended_valid_elements",{processor:"string"});b("invalid_elements",{processor:"string"});b("invalid_styles",{processor:yj});b("valid_children",{processor:"string"});b("valid_classes",{processor:yj});b("valid_elements",{processor:"string"});b("valid_styles",{processor:yj});b("verify_html",{processor:"boolean",default:!0});b("auto_focus",{processor:c=>fa(c)||!0===c});b("browser_spellcheck",{processor:"boolean",
default:!1});b("protect",{processor:"array"});b("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"});b("deprecation_warnings",{processor:"boolean",default:!0});b("a11y_advanced_options",{processor:"boolean",default:!1});b("api_key",{processor:"string"});b("paste_block_drop",{processor:"boolean",default:!1});b("paste_data_images",{processor:"boolean",default:!0});b("paste_preprocess",{processor:"function"});b("paste_postprocess",{processor:"function"});b("paste_webkit_styles",
{processor:"string",default:"none"});b("paste_remove_styles_if_webkit",{processor:"boolean",default:!0});b("paste_merge_formats",{processor:"boolean",default:!0});b("smart_paste",{processor:"boolean",default:!0});b("paste_as_text",{processor:"boolean",default:!1});b("paste_tab_spaces",{processor:"number",default:4});b("text_patterns",{processor:c=>$d(c,jb)||!1===c?{value:qo(!1===c?[]:c),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},
{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]});b("text_patterns_lookup",{processor:c=>ya(c)?{value:Dy(c),valid:!0}:{valid:!1,message:"Must be a single function"},default:c=>[]});b("noneditable_class",{processor:"string",default:"mceNonEditable"});
b("editable_class",{processor:"string",default:"mceEditable"});b("noneditable_regexp",{processor:c=>$d(c,Hy)?{value:c,valid:!0}:Zd(c,RegExp)?{value:[c],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]});b("table_tab_navigation",{processor:"boolean",default:!0});b("highlight_on_focus",{processor:"boolean",default:!1});b("xss_sanitization",{processor:"boolean",default:!0});b("details_initial_state",{processor:c=>{var d;return(d=-1<Ca.call(["inherited","collapsed","expanded"],
c))?{value:c,valid:d}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"});b("details_serialized_state",{processor:c=>{var d;return(d=-1<Ca.call(["inherited","collapsed","expanded"],c))?{value:c,valid:d}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"});b("init_content_sync",{processor:"boolean",default:!1});b("newdocument_content",{processor:"string",default:""});a.on("ScriptsLoaded",()=>{b("directionality",{processor:"string",
default:cc.isRtl()?"rtl":void 0});b("placeholder",{processor:"string",default:Fy.getAttrib(a.getElement(),"placeholder")})})},Jy=W("iframe_attrs"),Ky=W("doctype"),so=W("document_base_url"),Ly=W("body_id"),My=W("body_class"),to=W("content_security_policy"),Ny=W("br_in_pre"),vb=W("forced_root_block"),uf=W("forced_root_block_attrs"),Oy=W("newline_behavior"),Py=W("br_newline_selector"),Qy=W("no_newline_selector"),Ry=W("keep_styles"),Sy=W("end_container_on_empty_block"),uo=W("automatic_uploads"),vo=W("images_reuse_filename"),
Ty=W("images_replace_blob_uris"),wo=W("icons"),Uy=W("icons_url"),Vy=W("images_upload_url"),Wy=W("images_upload_base_path"),Xy=W("images_upload_credentials"),Yy=W("images_upload_handler"),Zy=W("content_css_cors"),Aj=W("referrer_policy"),xo=W("language"),$y=W("language_url"),yo=W("indent_use_margin"),az=W("indentation"),bz=W("content_css"),cz=W("content_style"),zo=W("font_css"),dz=W("directionality"),ez=W("inline_boundaries_selector"),Ao=W("object_resizing"),fz=W("resize_img_proportional"),gz=W("placeholder"),
Bo=W("event_root"),hz=W("service_message"),ue=W("theme"),iz=W("theme_url"),Bj=W("model"),jz=W("model_url"),vf=W("inline_boundaries"),kz=W("formats"),lz=W("preview_styles"),mz=W("format_empty_lines"),nz=W("format_noneditable_selector"),oz=W("custom_ui_selector"),zj=W("inline"),pz=W("hidden_input"),qz=W("submit_patch"),rz=W("add_form_submit_trigger"),sz=W("add_unload_trigger"),tz=W("custom_undo_redo_levels"),uz=W("disable_nodechange"),Co=W("readonly"),vz=W("editable_root"),Do=W("content_css_cors"),
Wg=W("plugins"),wz=W("external_plugins"),xz=W("block_unsupported_drop"),yz=W("visual"),zz=W("visual_table_class"),Eo=W("visual_anchor_class"),Az=W("iframe_aria_text"),Bz=W("setup"),Cz=W("init_instance_callback"),Dz=W("urlconverter_callback"),Ez=W("auto_focus"),Fz=W("browser_spellcheck"),Gz=W("protect"),Hz=W("paste_block_drop"),Xg=W("paste_data_images"),Iz=W("paste_preprocess"),Jz=W("paste_postprocess"),Kz=W("newdocument_content"),Lz=W("paste_webkit_styles"),Mz=W("paste_remove_styles_if_webkit"),Nz=
W("paste_merge_formats"),Fo=W("smart_paste"),Oz=W("paste_as_text"),Pz=W("paste_tab_spaces"),Qz=W("allow_html_data_urls"),Go=W("text_patterns"),Ho=W("text_patterns_lookup"),Io=W("noneditable_class"),Rz=W("editable_class"),Sz=W("noneditable_regexp"),Tz=W("preserve_cdata"),Uz=W("highlight_on_focus"),Cj=W("xss_sanitization"),Vz=W("init_content_sync"),Wz=W("table_tab_navigation"),Xz=W("details_initial_state"),Yz=W("details_serialized_state"),Jo=a=>{const b=bc(a);return{count:a.length-b.length,text:b}},
Ko=a=>{let b;for(;-1!==(b=a.data.lastIndexOf("\ufeff"));)a.deleteData(b,1)},Zz=(a,b)=>{const c=b.container(),d=Hw(qb(c.childNodes),a).map(e=>e<b.offset()?C(c,b.offset()-1):b).getOr(b);ad(a);return d},ad=a=>{if(V(a)&&Eb(a))if(a.firstChild===a.lastChild&&Ga(a.firstChild)){var b=a.parentNode;b&&b.removeChild(a)}else a.removeAttribute("data-mce-caret");E(a)&&(Ko(a),0===a.data.length&&(b=a.parentNode)&&b.removeChild(a))},Lo=(a,b,c)=>{const d=Vn(b.getBoundingClientRect(),c);let e;if("BODY"===a.tagName){var f=
a.ownerDocument.documentElement;e=a.scrollLeft||f.scrollLeft;a=a.scrollTop||f.scrollTop}else f=a.getBoundingClientRect(),e=a.scrollLeft-f.left,a=a.scrollTop-f.top;d.left+=e;d.right+=e;d.top+=a;d.bottom+=a;d.width=1;b=b.offsetWidth-b.clientWidth;0<b&&(c&&(b*=-1),d.left+=b,d.right+=b);return d},$z=a=>{var b,c;a=x.fromDom(a);a=Ab("*[contentEditable=false],video,audio,embed,object",a);for(let d=0;d<a.length;d++){const e=a[d].dom;let f=e.previousSibling;if(Ig(f)){const g=f.data;1===g.length?null===(b=
f.parentNode)||void 0===b?void 0:b.removeChild(f):f.deleteData(g.length-1,1)}f=e.nextSibling;Jg(f)&&(1===f.data.length?null===(c=f.parentNode)||void 0===c?void 0:c.removeChild(f):f.deleteData(0,1))}},aA=(a,b,c,d)=>{const e=Yc();let f,g;const h=vb(a),k=a.dom,l=()=>{$z(b);g&&(ad(g),g=null);e.on(n=>{k.remove(n.caret);e.clear()});f&&(clearInterval(f),f=void 0)},m=()=>{f=setInterval(()=>{e.on(n=>{d()?k.toggleClass(n.caret,"mce-visual-caret-hidden"):k.addClass(n.caret,"mce-visual-caret-hidden")})},500)};
return{show:(n,t)=>{l();if(ne(t))return null;if(c(t)){var y;var w=(null!==(y=t.ownerDocument)&&void 0!==y?y:document).createElement(h);w.setAttribute("data-mce-caret",n?"before":"after");w.setAttribute("data-mce-bogus","all");w.appendChild(Hg().dom);y=t.parentNode;n?null===y||void 0===y?void 0:y.insertBefore(w,t):t.nextSibling?null===y||void 0===y?void 0:y.insertBefore(w,t.nextSibling):null===y||void 0===y?void 0:y.appendChild(w);y=Lo(b,t,n);k.setStyle(w,"top",y.top);g=w;const q=k.create("div",{"class":"mce-visual-caret",
"data-mce-bogus":"all"});k.setStyles(q,Object.assign({},y));k.add(b,q);e.set({caret:q,element:t,before:n});n&&k.addClass(q,"mce-visual-caret-before");m();n=t.ownerDocument.createRange();n.setStart(w,0);n.setEnd(w,0)}else g=Fx(t,n),n=t.ownerDocument.createRange(),wf(g.nextSibling)?(n.setStart(g,0),n.setEnd(g,0)):(n.setStart(g,1),n.setEnd(g,1));return n},hide:l,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",
reposition:()=>{e.on(n=>{const t=Lo(b,n.element,n.before);k.setStyles(n.caret,Object.assign({},t))})},destroy:()=>clearInterval(f)}},wf=a=>va(a)||mc(a),xf=a=>(wf(a)||Cc(a)&&ua.browser.isFirefox())&&p.from(x.fromDom(a).dom.parentElement).map(x.fromDom).exists(wd),Mo=Eg("display","block table table-cell table-caption list-item"),Yg=(a,b)=>{let c;for(;c=a(b);)if(!Uc(c))return c;return null},yf=(a,b,c,d,e)=>{d=new Ta(a,d);a=va(a)||Uc(a);let f;if(0>b){if(a&&(f=Yg(d.prev.bind(d),!0),c(f)))return f;for(;f=
Yg(d.prev.bind(d),e);)if(c(f))return f}if(0<b){if(a&&(f=Yg(d.next.bind(d),!0),c(f)))return f;for(;f=Yg(d.next.bind(d),e);)if(c(f))return f}return null},bA=(a,b)=>Ac(x.fromDom(a),c=>Sb(c.dom),c=>c.dom===b).map(c=>c.dom).getOr(b),bd=(a,b)=>{for(;a&&a!==b;){if(Mo(a))return a;a=a.parentNode}return null},oc=(a,b,c)=>bd(a.container(),c)===bd(b.container(),c),Zg=(a,b)=>{if(!b)return p.none();const c=b.container();b=b.offset();return V(c)?p.from(c.childNodes[b+a]):p.none()},No=(a,b)=>{var c;const d=(null!==
(c=b.ownerDocument)&&void 0!==c?c:document).createRange();a?(d.setStartBefore(b),d.setEndBefore(b)):(d.setStartAfter(b),d.setEndAfter(b));return d},Oo=(a,b,c)=>{a=a?"previousSibling":"nextSibling";let d=c;for(;d&&d!==b;){(c=d[a])&&Eb(c)&&(c=c[a]);if(va(c)||mc(c)){a=d;if(bd(c,b)===bd(a,b))return c;break}if(kb(c))break;d=d.parentNode}return null},zf=A(No,!0),Af=A(No,!1),Dj=(a,b,c)=>{const d=A(Oo,!0,b),e=A(Oo,!1,b),f=c.startContainer,g=c.startOffset;if(Uc(f)){const h=E(f)?f.parentNode:f,k=h.getAttribute("data-mce-caret");
if("before"===k&&(b=h.nextSibling,xf(b)))return zf(b);if("after"===k&&(b=h.previousSibling,xf(b)))return Af(b)}if(!c.collapsed)return c;if(E(f)){if(Eb(f)){if(1===a){if(b=e(f))return zf(b);if(b=d(f))return Af(b)}if(-1===a){if(b=d(f))return Af(b);if(b=e(f))return zf(b)}return c}if(Ig(f)&&g>=f.data.length-1)return 1===a&&(b=e(f))?zf(b):c;if(Jg(f)&&1>=g)return-1===a&&(b=d(f))?Af(b):c;if(g===f.data.length)return(b=e(f))?zf(b):c;if(0===g&&(b=d(f)))return Af(b)}return c},Bf=(a,b,c)=>{b=Dj(a,b,c);return-1===
a?C.fromRangeStart(b):C.fromRangeEnd(b)},Ej=(a,b)=>{for(;(b=a(b))&&!b.isVisible(););return b},$g=(a,b)=>{b=oc(a,b);return!b&&Ga(a.getNode())?!0:b};var Xa;(function(a){a[a.Backwards=-1]="Backwards";a[a.Forwards=1]="Forwards"})(Xa||(Xa={}));const Po=(a,b)=>a.hasChildNodes()&&b<a.childNodes.length?a.childNodes[b]:null,Qo=(a,b)=>{if(0<a){if(kb(b.previousSibling)&&!E(b.previousSibling))return C.before(b);if(E(b))return C(b,0)}if(0>a){if(kb(b.nextSibling)&&!E(b.nextSibling))return C.after(b);if(E(b))return C(b,
b.data.length)}return 0>a?Ga(b)?C.before(b):C.after(b):C.before(b)},Fj=(a,b,c)=>{if(!V(c)||!b)return null;if(b.isEqual(C.after(c))&&c.lastChild){var d=C.after(c.lastChild);if(0>a&&kb(c.lastChild)&&V(c.lastChild))return Ga(c.lastChild)?C.before(c.lastChild):d}else d=b;b=d.container();let e=d.offset();if(E(b)){if(0>a&&0<e)return C(b,--e);if(0<a&&e<b.length)return C(b,++e);var f=b}else{if(0>a&&0<e&&(f=Po(b,e-1),kb(f)))return c=f,aj(c)||un(c)||!(a=yf(f,a,jf,f))?E(f)?C(f,f.data.length):C.before(f):E(a)?
C(a,a.data.length):C.after(a);if(0<a&&e<b.childNodes.length&&(f=Po(b,e),kb(f))){if(Ga(f))return a=f,a=(f=a.nextSibling)&&kb(f)?E(f)?C(f,0):C.before(f):Fj(Xa.Forwards,C.after(a),c),a;c=f;return aj(c)||un(c)||!(a=yf(f,a,jf,f))?E(f)?C(f,0):C.after(f):E(a)?C(a,0):C.before(a)}f=f?f:d.getNode()}if(f&&(0<a&&d.isAtEnd()||0>a&&d.isAtStart())&&(f=yf(f,a,Qa,c,!0),jf(f,c)))return Qo(a,f);f=f?yf(f,a,jf,c):f;for(d=[];b&&b!==c;)d.push(b),b=b.parentNode;return!(c=ce(ka(d,va)))||f&&c.contains(f)?f?Qo(a,f):null:d=
0<a?C.after(c):C.before(c)},pc=a=>({next:b=>Fj(Xa.Forwards,b,a),prev:b=>Fj(Xa.Backwards,b,a)}),Ro=a=>C.isTextPosition(a)?0===a.offset():kb(a.getNode()),So=a=>{if(C.isTextPosition(a)){const b=a.container();return a.offset()===b.data.length}return kb(a.getNode(!0))},To=(a,b)=>!C.isTextPosition(a)&&!C.isTextPosition(b)&&a.getNode()===b.getNode(!0),Lb=(a,b,c)=>{b=pc(b);return p.from(a?b.next(c):b.prev(c))},Cf=(a,b,c)=>Lb(a,b,c).bind(d=>{var e;if(e=oc(c,d,b))if(a){if(e=!To(c,d))e=!(!C.isTextPosition(c)&&
Ga(c.getNode()));e=e&&So(c)&&Ro(d)}else e=!To(d,c)&&Ro(c)&&So(d);return e?Lb(a,b,d):p.some(d)}),ah=(a,b,c,d)=>Cf(a,b,c).bind(e=>d(e)?ah(a,b,e,d):p.some(e)),ve=(a,b)=>{var c=a?b.firstChild:b.lastChild;if(E(c))return p.some(C(c,a?0:c.data.length));if(c){if(kb(c)){b=p;var d=b.some;a=a?C.before(c):Ga(c)?C.before(c):C.after(c);return d.call(b,a)}c=a?C.before(c):C.after(c);return Lb(a,b,c)}return p.none()},mb=A(Lb,!0),nb=A(Lb,!1),ob=A(ve,!0),Tb=A(ve,!1),Ub=a=>V(a)&&"_mce_caret"===a.id,Jd=(a,b)=>{for(;b&&
b!==a;){if(Ub(b))return b;b=b.parentNode}return null},bh=a=>!ha.call(a,"name")&&rd(a.forward)?a.forward:!0,Uo=(a,b)=>{V(b)&&a.isBlock(b)&&!b.innerHTML&&(b.innerHTML='<br data-mce-bogus="1" />');return b},cA=(a,b)=>{const c=p.from(fo(a.getRoot(),b.start)),d=p.from(fo(a.getRoot(),b.end));return sb(c,d,(e,f)=>{const g=a.createRng();g.setStart(e.container(),e.offset());g.setEnd(f.container(),f.offset());return{range:g,forward:bh(b)}})},dA=(a,b)=>Tb(a).fold(za,c=>{b.setStart(c.container(),c.offset());
b.setEnd(c.container(),c.offset());return!0}),Vo=(a,b,c)=>{if(!b.hasChildNodes()&&Jd(a,b)){var d;a=(null!==(d=b.ownerDocument)&&void 0!==d?d:document).createTextNode("\ufeff");b.appendChild(a);c.setStart(a,0);c.setEnd(a,0);return!0}return!1},Wo=(a,b,c,d)=>{c=c[b?"start":"end"];a=a.getRoot();if(c){let e=a,f=c[0];for(let g=c.length-1;e&&1<=g;g--){const h=e.childNodes;if(Vo(a,e,d))return!0;if(c[g]>h.length-1)return Vo(a,e,d)?!0:dA(e,d);e=h[c[g]]}E(e)&&(f=Math.min(c[0],e.data.length));V(e)&&(f=Math.min(c[0],
e.childNodes.length));b?d.setStart(e,f):d.setEnd(e,f)}return!0},Gj=a=>E(a)&&0<a.data.length,Xo=(a,b,c)=>{var d=a.get(c.id+"_"+b),e=null===d||void 0===d?void 0:d.parentNode,f=c.keep;if(d&&e){let g;"start"===b?f?d.hasChildNodes()?(e=d.firstChild,g=1):Gj(d.nextSibling)?(e=d.nextSibling,g=0):Gj(d.previousSibling)?(e=d.previousSibling,g=d.previousSibling.data.length):g=a.nodeIndex(d)+1:g=a.nodeIndex(d):f?d.hasChildNodes()?(e=d.firstChild,g=1):Gj(d.previousSibling)?(e=d.previousSibling,g=d.previousSibling.data.length):
g=a.nodeIndex(d):g=a.nodeIndex(d);if(!f){f=d.previousSibling;const h=d.nextSibling;for(K.each(K.grep(d.childNodes),k=>{E(k)&&(k.data=k.data.replace(/\uFEFF/g,""))});d=a.get(c.id+"_"+b);)a.remove(d,!0);E(h)&&E(f)&&!ua.browser.isOpera()&&(b=f.data.length,f.appendData(h.data),a.remove(h),e=f,g=b)}return p.some(C(e,g))}return p.none()},eA=(a,b)=>{const c=Xo(a,"start",b),d=Xo(a,"end",b);return sb(c,d.or(c),(e,f)=>{const g=a.createRng();g.setStart(Uo(a,e.container()),e.offset());g.setEnd(Uo(a,f.container()),
f.offset());return{range:g,forward:bh(b)}})},fA=(a,b)=>p.from(a.select(b.name)[b.index]).map(c=>{const d=a.createRng();d.selectNode(c);return{range:d,forward:!0}}),gA=(a,b)=>{a=a.dom;if(b){if(K.isArray(b.start)){{const c=a.createRng();b=Wo(a,!0,b,c)&&Wo(a,!1,b,c)?p.some({range:c,forward:bh(b)}):p.none()}return b}if(fa(b.start))return cA(a,b);if(ha.call(b,"id"))return eA(a,b);if(ha.call(b,"name"))return fA(a,b);if(ha.call(b,"rng"))return p.some({range:b.rng,forward:bh(b)})}return p.none()},hA=(a,b,
c)=>{c=void 0===c?!1:c;2===b?a=io(bc,c,a):3===b?(b=a.getRng(),a={start:eo(a.dom.getRoot(),C.fromRangeStart(b)),end:eo(a.dom.getRoot(),C.fromRangeEnd(b)),forward:a.isForward()}):a=b?{rng:a.getRng(),forward:a.isForward()}:ko(a,!1);return a},iA=(a,b)=>{gA(a,b).each(c=>{var {range:d,forward:e}=c;a.setRng(d,e)})},hb=a=>V(a)&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type"),Df=(a=>b=>a===b)("\u00a0"),Kd=a=>""!==a&&-1!==" \f\n\r\t\v".indexOf(a),Hj=a=>!Kd(a)&&!Df(a)&&"\ufeff"!==a,Ij=a=>{a=
a.toString(16);return(1===a.length?"0"+a:a).toUpperCase()},jA=a=>{a=Ij(a.red)+Ij(a.green)+Ij(a.blue);return{value:(Ua(a,"#",0)?a.substring(1):a).toUpperCase()}},kA=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,lA=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Yo=(a,b,c,d)=>{a=parseInt(a,10);b=parseInt(b,10);c=parseInt(c,10);d=parseFloat(d);return{red:a,green:b,blue:c,alpha:d}},mA=a=>{if("transparent"===a)return p.some({red:0,green:0,blue:0,alpha:0});const b=
kA.exec(a);if(null!==b)return p.some(Yo(b[1],b[2],b[3],"1"));a=lA.exec(a);return null!==a?p.some(Yo(a[1],a[2],a[3],a[4])):p.none()},Ef=a=>mA(a).map(jA).map(b=>"#"+b.value).getOr(a),Jj=a=>{const b=[];if(a)for(let c=0;c<a.rangeCount;c++)b.push(a.getRangeAt(c));return b},nA=a=>gc(a,b=>(b=Sg(b))?[x.fromDom(b)]:[]),Zo=(a,b)=>{b=Ab("td[data-mce-selected],th[data-mce-selected]",b);return 0<b.length?b:ka(nA(a),oe)},we=a=>Zo(Jj(a.selection.getSel()),x.fromDom(a.getBody())),oA=a=>{const b=a.startContainer;
a=a.startOffset;return E(b)?0===a?p.some(x.fromDom(b)):p.none():p.from(b.childNodes[a]).map(x.fromDom)},pA=a=>{const b=a.endContainer;a=a.endOffset;return E(b)?a===b.data.length?p.some(x.fromDom(b)):p.none():p.from(b.childNodes[a-1]).map(x.fromDom)},$o=a=>kc(a,0).fold(R([a]),b=>[a].concat($o(b))),Kj=a=>kc(a,a.dom.childNodes.length-1).fold(R([a]),b=>"br"===b.dom.nodeName.toLowerCase()?Nc(b).map(c=>[a].concat(Kj(c))).getOr([]):[a].concat(Kj(b))),Lj=(a,b)=>sb(oA(b),pA(b),(c,d)=>{c=Oa($o(a),A(yc,c));
d=Oa(Kj(a),A(yc,d));return c.isSome()&&d.isSome()}).getOr(!1),Mj=(a,b,c,d)=>{const e=new Ta(c,c);a=We(a.schema.getMoveCaretBeforeOnEnterElements(),(g,h)=>{g=h.toLowerCase();return!(-1<Ca.call(["td","th","table"],g))});let f=c;do{if(E(f)&&0!==K.trim(f.data).length){d?b.setStart(f,0):b.setEnd(f,f.data.length);return}if(a[f.nodeName]){d?b.setStartBefore(f):"BR"===f.nodeName?b.setEndBefore(f):b.setEndAfter(f);return}}while(f=d?e.next():e.prev());"BODY"===c.nodeName&&(d?b.setStart(c,0):b.setEnd(c,c.childNodes.length))},
ch=a=>{a=a.selection.getSel();return!aa(a)&&0<a.rangeCount},Nj=(a,b)=>{const c=we(a);0<c.length?G(c,d=>{d=d.dom;const e=a.dom.createRng();e.setStartBefore(d);e.setEndAfter(d);b(e,!0)}):b(a.selection.getRng(),!1)},ap=(a,b,c)=>{b=ko(a,b);c(b);a.moveToBookmark(b)},Ff=a=>Yb(null===a||void 0===a?void 0:a.nodeType),Oj=a=>V(a)&&!hb(a)&&!Ub(a)&&!Rc(a),qA=a=>!0===a.isContentEditable,bp=(a,b,c)=>{const {selection:d,dom:e}=a,f=d.getNode(),g=va(f);ap(d,!0,()=>{b()});g&&va(f)&&e.isChildOf(f,a.getBody())?a.selection.select(f):
c(d.getStart())&&rA(e,d)},rA=(a,b)=>{var c;const d=b.getRng(),{startContainer:e,startOffset:f}=d;var g=b.getNode();Oj(g)&&!/^(TD|TH)$/.test(g.nodeName)?(g=a.getAttrib(g,"data-mce-selected"),g=parseInt(g,10),g=!isNaN(g)&&0<g):g=!1;if(!g&&V(e)){var h=e.childNodes;g=a.getRoot();if(f<h.length){var k=h[f];h=new Ta(k,null!==(c=a.getParent(k,a.isBlock))&&void 0!==c?c:g)}else c=h[h.length-1],h=new Ta(c,null!==(k=a.getParent(c,a.isBlock))&&void 0!==k?k:g),h.next(!0);for(c=h.current();c&&"false"!==a.getContentEditable(c);c=
h.next())if(E(c)&&!Pj(c)){d.setStart(c,0);b.setRng(d);break}}},cp=(a,b,c)=>{if(a)for(b=b?"nextSibling":"previousSibling",a=c?a:a[b];a;a=a[b])if(V(a)||!Pj(a))return a},Qj=(a,b)=>!!a.getTextBlockElements()[b.nodeName.toLowerCase()]||Cd(a,b),sA=(a,b,c)=>a.schema.isValidChild(b,c),Pj=(a,b)=>{b=void 0===b?!1:b;return!aa(a)&&E(a)?(a=b?a.data.replace(/ /g,"\u00a0"):a.data,Bd.test(a)):!1},dp=(a,b)=>{const c=a.dom;var d;if(d=Oj(b)&&"false"===c.getContentEditable(b))a=nz(a),a=0<a.length?`${"[data-mce-cef-wrappable]"},${a}`:
"[data-mce-cef-wrappable]",d=Zb(x.fromDom(b),a);return d&&0===c.select('[contenteditable="true"]',b).length},cd=(a,b)=>{if(ya(a))return a(b);aa(b)||(a=a.replace(/%(\w+)/g,(c,d)=>b[d]||c));return a},dd=(a,b)=>{a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);return a.toLowerCase()===b.toLowerCase()},Rj=(a,b)=>{if(null===a||void 0===a)return null;let c=String(a);if("color"===b||"backgroundColor"===b)c=Ef(c);"fontWeight"===b&&700===a&&(c="bold");"fontFamily"===b&&(c=c.replace(/['"]/g,"").replace(/,\s+/g,
","));return c},dh=(a,b,c)=>{a=a.getStyle(b,c);return Rj(a,c)},ep=(a,b)=>{let c;a.getParent(b,d=>V(d)?(c=a.getStyle(d,"text-decoration"),!!c&&"none"!==c):!1);return c},fp=(a,b,c)=>a.getParents(b,c,a.getRoot()),Sj=(a,b,c)=>{a=a.formatter.get(b);return!aa(a)&&Na(a,c)},tA=(a,b)=>Sj(a,b,c=>{const d=e=>ya(e)||1<e.length&&"%"===e.charAt(0);return Na(["styles","attributes"],e=>Fa(c,e).exists(f=>{f=Sa(f)?f:Xe(f,Ka);return Na(f,d)}))}),uA=(a,b,c)=>{const d="inline block selector attributes styles classes".split(" "),
e=f=>We(f,(g,h)=>Na(d,k=>k===h));return Sj(a,b,f=>{const g=e(f);return Sj(a,c,h=>{h=e(h);var k=void 0;k=void 0===k?yi:k;return Em(k).eq(g,h)})})},vA=a=>ra(a,"selector")&&ra(a,"inline")&&ee(Fa(a,"mixed"),!0),Tj=a=>ra(a,"selector")&&!1!==a.expand&&!ra(a,"inline"),gp=Pj,hp=(a,b)=>{let c=b;for(;c;){if(V(c)&&a.getContentEditable(c))return"false"===a.getContentEditable(c)?c:b;c=c.parentNode}return b},ip=(a,b,c,d)=>{b=b.data;if(a)for(a=c;0<a;a--){if(d(b.charAt(a-1)))return a}else for(a=c;a<b.length;a++)if(d(b.charAt(a)))return a;
return-1},wA=(a,b,c)=>ip(a,b,c,d=>Df(d)||Kd(d)),xA=(a,b,c)=>ip(a,b,c,Hj),jp=(a,b,c,d,e,f)=>{let g;const h=a.getParent(c,a.isBlock)||b,k=(l,m,n)=>{const t=Gd(a);return p.from((e?t.backwards:t.forwards)(l,m,(y,w)=>{if(hb(y.parentNode))return-1;g=y;return n(e,y,w)},h))};return k(c,d,wA).bind(l=>f?k(l.container,l.offset+(e?-1:0),xA):p.some(l)).orThunk(()=>g?p.some({container:g,offset:e?0:g.length}):p.none())},kp=(a,b,c,d,e)=>{e=d[e];E(d)&&!(0<d.data.length)&&e&&(d=e);e=a.getParents(d,void 0,a.getRoot());
for(let f=0;f<e.length;f++)for(let g=0;g<b.length;g++){const h=b[g];if((aa(h.collapsed)||h.collapsed===c.collapsed)&&ra(h,"selector")&&a.is(e[f],h.selector))return e[f]}return d},lp=(a,b,c,d)=>{var e,f=c;const g=a.getRoot();b=b[0];ra(b,"block")&&(f=b.wrapper?null:a.getParent(c,b.block,g));f||(f=null!==(e=a.getParent(c,"LI,TD,TH"))&&void 0!==e?e:g,f=a.getParent(E(c)?c.parentNode:c,h=>h!==g&&Qj(a.schema,h),f));f&&ra(b,"block")&&b.wrapper&&(f=a.getParents(f,"ul,ol",a.getRoot()).reverse()[0]||f);if(!f)for(f=
c;f&&f[d]&&!a.isBlock(f[d])&&(f=f[d],!dd(f,"br")););return f||c},mp=(a,b,c,d)=>{const e=c.parentNode;return aa(c[d])?e===b||null===e||void 0===e||a.isBlock(e)?!0:mp(a,b,e,d):!1},eh=(a,b,c,d,e)=>{let f=c;const g=e?"previousSibling":"nextSibling",h=a.getRoot();if(E(c)&&!gp(c)&&(e?0<d:d<c.data.length))return c;for(;f;){if(!b[0].block_expand&&a.isBlock(f))return f;for(d=f[g];d;d=d[g]){e=E(d)&&!mp(a,h,d,g);var k;if(k=!hb(d))k=d,k=!(Ga(k)&&k.getAttribute("data-mce-bogus")&&!k.nextSibling);if(k&&!gp(d,e))return f}if(f===
h||f.parentNode===h){c=f;break}f=f.parentNode}return c},np=a=>hb(a.parentNode)||hb(a),Ld=(a,b,c,d)=>{d=void 0===d?!1:d;let {startContainer:e,startOffset:f,endContainer:g,endOffset:h}=b;const k=c[0];V(e)&&e.hasChildNodes()&&(e=Zc(e,f),E(e)&&(f=0));V(g)&&g.hasChildNodes()&&(g=Zc(g,b.collapsed?h:h-1),E(g)&&(h=g.data.length));e=hp(a,e);g=hp(a,g);np(e)&&(e=hb(e)?e:e.parentNode,e=b.collapsed?e.previousSibling||e:e.nextSibling||e,E(e)&&(f=b.collapsed?e.length:0));np(g)&&(g=hb(g)?g:g.parentNode,g=b.collapsed?
g.nextSibling||g:g.previousSibling||g,E(g)&&(h=b.collapsed?0:g.length));b.collapsed&&(jp(a,a.getRoot(),e,f,!0,d).each(l=>{var {container:m,offset:n}=l;e=m;f=n}),jp(a,a.getRoot(),g,h,!1,d).each(l=>{var {container:m,offset:n}=l;g=m;h=n}));if(ra(k,"inline")||k.block_expand)ra(k,"inline")&&E(e)&&0!==f||(e=eh(a,c,e,f,!0)),ra(k,"inline")&&E(g)&&h!==g.data.length||(g=eh(a,c,g,h,!1));Tj(k)&&(e=kp(a,c,b,e,"previousSibling"),g=kp(a,c,b,g,"nextSibling"));if(ra(k,"block")||ra(k,"selector"))e=lp(a,c,e,"previousSibling"),
g=lp(a,c,g,"nextSibling"),ra(k,"block")&&(a.isBlock(e)||(e=eh(a,c,e,f,!0)),a.isBlock(g)||(g=eh(a,c,g,h,!1)));V(e)&&e.parentNode&&(f=a.nodeIndex(e),e=e.parentNode);V(g)&&g.parentNode&&(h=a.nodeIndex(g)+1,g=g.parentNode);return{startContainer:e,startOffset:f,endContainer:g,endOffset:h}},Gf=(a,b,c)=>{var d;const e=b.startOffset,f=Zc(b.startContainer,e),g=b.endOffset,h=Zc(b.endContainer,g-1),k=t=>{var y=t[0];E(y)&&y===f&&e>=y.data.length&&t.splice(0,1);y=t[t.length-1];0===g&&0<t.length&&y===h&&E(y)&&
t.splice(t.length-1,1);return t},l=(t,y,w)=>{const q=[];for(;t&&t!==w;t=t[y])q.push(t);return q};var m=(t,y)=>a.getParent(t,w=>w.parentNode===y,y);b=(t,y,w)=>{const q=w?"nextSibling":"previousSibling";for(let r=t,v=r.parentNode;r&&r!==y;r=v){v=r.parentNode;const z=l(r===t?r:r[q],q);z.length&&(w||z.reverse(),c(k(z)))}};if(f===h)return c(k([f]));const n=null!==(d=a.findCommonAncestor(f,h))&&void 0!==d?d:a.getRoot();if(a.isChildOf(f,h))return b(f,n,!0);if(a.isChildOf(h,f))return b(h,n);d=m(f,n)||f;m=
m(h,n)||h;b(f,d,!0);d=l(d===f?d:d.nextSibling,"nextSibling",m===h?m.nextSibling:m);d.length&&c(k(d));b(h,m)},yA='pre[class*=language-][contenteditable="false"] figure.image div[data-ephox-embed-iri] div.tiny-pageembed div.mce-toc div[data-mce-toc]'.split(" "),zA=a=>Ib(a)&&"\ufeff"===zd.get(a),AA=(a,b,c,d)=>Rb(b).fold(()=>"skipping",e=>"br"===d||zA(b)?"valid":jy(b)?"existing":Ub(b.dom)?"caret":Na(yA,f=>Zb(b,f))?"valid-block":a.schema.isValidChild(c,d)&&sA(a,e.dom.nodeName.toLowerCase(),c)?"valid":
"invalid-child"),BA=(a,b)=>{const c=Ld(a.dom,b,[{inline:"span"}]);b.setStart(c.startContainer,c.startOffset);b.setEnd(c.endContainer,c.endOffset);a.selection.setRng(b)},op=(a,b,c,d,e,f)=>{var g=Object.assign({},c);b=void 0===c.uid?b:c.uid;g=(delete g.uid,g);ge(a,mf());c=`${se()}`;Va(a.dom,c,b);c=`${Fd()}`;Va(a.dom,c,d);const {attributes:h={},classes:k=[]}=e(b,g);Mc(a,h);ny(a,k);f&&(0<k.length&&(d=`${of()}`,e=k.join(","),Va(a.dom,d,e)),e=rb(h),0<e.length&&(d=`${pf()}`,e=e.join(","),Va(a.dom,d,e)))},
CA=a=>{he(a,mf());bf(a,`${se()}`);bf(a,`${Fd()}`);bf(a,`${nf()}`);const b=af(a,`${pf()}`).map(d=>d.split(",")).getOr([]),c=af(a,`${of()}`).map(d=>d.split(",")).getOr([]);G(b,d=>{a.dom.removeAttribute(d)});oy(a,c);bf(a,`${of()}`);bf(a,`${pf()}`)},pp=(a,b,c,d,e)=>{a=x.fromTag("span",a);op(a,b,c,d,e,!1);return a},DA=(a,b,c,d,e,f)=>{const g=[],h=pp(a.getDoc(),c,f,d,e),k=Yc(),l=()=>k.get().getOrThunk(()=>{const n=x.fromDom(h.dom.cloneNode(!1));g.push(n);k.set(n);return n}),m=n=>{switch(AA(a,n,"span",n.dom.nodeName.toLowerCase())){case "invalid-child":k.clear();
n=bb(n);G(n,m);k.clear();break;case "valid-block":k.clear();op(n,c,f,d,e,!0);break;case "valid":var t=l();Bb(n,t);t.dom.appendChild(n.dom)}};Gf(a.dom,b,n=>{k.clear();n=wa(n,x.fromDom);G(n,m)});return g},EA=(a,b,c,d)=>{a.undoManager.transact(()=>{const e=a.selection;var f=e.getRng();const g=0<we(a).length,h=qf("mce-annotation");f.collapsed&&!g&&BA(a,f);e.getRng().collapsed&&!g?(f=pp(a.getDoc(),h,d,b,c.decorate),Cg(f,"\u00a0"),e.getRng().insertNode(f.dom),e.select(f.dom)):ap(e,!1,()=>{Nj(a,k=>{DA(a,
k,h,b,c.decorate,d)})})})},qp=a=>{const b=my();ly(a,b);const c=ky(a,b),d=Mi("span"),e=f=>{G(f,g=>{d(g)?Bc(g):CA(g)})};return{register:(f,g)=>{b.register(f,g)},annotate:(f,g)=>{b.lookup(f).each(h=>{EA(a,f,h,g)})},annotationChanged:(f,g)=>{c.addListener(f,g)},remove:f=>{Pn(a,p.some(f)).each(g=>{({elements:g}=g);const h=a.selection.getBookmark();e(g);a.selection.moveToBookmark(h)})},removeAll:f=>{const g=a.selection.getBookmark();Ea(Rn(a,f),(h,k)=>{e(h)});a.selection.moveToBookmark(g)},getAll:f=>{f=
Rn(a,f);return tg(f,g=>wa(g,h=>h.dom))}}},Hf=a=>({getBookmark:A(hA,a),moveToBookmark:A(iA,a)});Hf.isBookmarkNode=hb;const rp=(a,b,c)=>c.collapsed?!1:Na(c.getClientRects(),d=>a>=d.left&&a<=d.right&&b>=d.top&&b<=d.bottom),FA=(a,b)=>a.dispatch("PreProcess",b),X={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:a=>a.shiftKey||a.ctrlKey||a.altKey||X.metaKeyPressed(a),metaKeyPressed:a=>ua.os.isMacOS()||ua.os.isiOS()?
a.metaKey:a.ctrlKey&&!a.altKey},sp=Math.abs,fh=Math.round,Uj={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},tp=(a,b)=>{const c=b.dom,d=b.getDoc(),e=document,f=b.getBody();let g,h,k,l,m,n,t,y,w,q,r,v,z,P,N;const Y=J=>!aa(J)&&(sn(J)||c.is(J,"figure.image")),O=J=>mc(J)||c.hasClass(J,"mce-preview-object"),L=J=>{const ba=J.target;var u=b.selection.getRng();if("longpress"===J.type||0===J.type.indexOf("touch")){const B=J.touches[0];u=Y(J.target)&&!rp(B.clientX,B.clientY,u)}else u=Y(J.target)&&
!rp(J.clientX,J.clientY,u);u&&!J.isDefaultPrevented()&&b.selection.select(ba)},U=J=>c.hasClass(J,"mce-preview-object")&&!aa(J.firstElementChild)?[J,J.firstElementChild]:c.is(J,"figure.image")?[J.querySelector("img")]:[J],ja=J=>{const ba=Ao(b);return ba&&"false"!==J.getAttribute("data-mce-resize")&&J!==b.getBody()?c.hasClass(J,"mce-preview-object")&&!aa(J.firstElementChild)?Zb(x.fromDom(J.firstElementChild),ba):Zb(x.fromDom(J),ba):!1},qa=(J,ba,u)=>{aa(u)||(J=U(J),G(J,B=>{B.style[ba]||!b.schema.isValid(B.nodeName.toLowerCase(),
ba)?c.setStyle(B,ba,u):c.setAttrib(B,ba,""+u)}))},Ha=J=>{let ba,u;ba=J.screenX-n;u=J.screenY-t;v=ba*l[2]+y;z=u*l[3]+w;v=5>v?5:v;z=5>z?5:z;if((Y(g)||O(g))&&!1!==fz(b)?!X.modifierPressed(J):X.modifierPressed(J))sp(ba)>sp(u)?(z=fh(v*q),v=fh(z/q)):(v=fh(z/q),z=fh(v*q));J=h;var B=z;qa(J,"width",v);qa(J,"height",B);J=l.startPos.x+ba;B=l.startPos.y+u;J=0<J?J:0;B=0<B?B:0;c.setStyles(k,{left:J,top:B,display:"block"});k.innerHTML=v+" &times; "+z;0>l[2]&&h.clientWidth<=v&&c.setStyle(h,"left",NaN+(y-v));0>l[3]&&
h.clientHeight<=z&&c.setStyle(h,"top",NaN+(w-z));ba=f.scrollWidth-P;u=f.scrollHeight-N;0!==ba+u&&c.setStyles(k,{left:J-ba,top:B-u});r||(b.dispatch("ObjectResizeStart",{target:g,width:y,height:w,origin:"corner-"+l.name}),r=!0)},Ra=()=>{const J=r;r=!1;J&&(qa(g,"width",v),qa(g,"height",z));c.unbind(d,"mousemove",Ha);c.unbind(d,"mouseup",Ra);e!==d&&(c.unbind(e,"mousemove",Ha),c.unbind(e,"mouseup",Ra));c.remove(h);c.remove(k);c.remove(m);ab(g);J&&(b.dispatch("ObjectResized",{target:g,width:v,height:z,
origin:"corner-"+l.name}),c.setAttrib(g,"style",c.getAttrib(g,"style")));b.nodeChanged()},ab=J=>{Z();var ba=c.getPos(J,f);const u=ba.x,B=ba.y;ba=J.getBoundingClientRect();const D=ba.width||ba.right-ba.left,H=ba.height||ba.bottom-ba.top;g!==J&&(oa(),g=J,v=z=0);ba=b.dispatch("ObjectSelected",{target:J});ja(J)&&!ba.isDefaultPrevented()?Ea(Uj,(T,ea)=>{let sa=c.get("mceResizeHandle"+ea);sa&&c.remove(sa);sa=c.add(f,"div",{id:"mceResizeHandle"+ea,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,
style:"cursor:"+ea+"-resize; margin:0; padding:0"});c.bind(sa,"mousedown",Aa=>{Aa.stopImmediatePropagation();Aa.preventDefault();const Qb=U(g)[0];n=Aa.screenX;t=Aa.screenY;y=Qb.clientWidth;w=Qb.clientHeight;q=w/y;l=T;l.name=ea;l.startPos={x:D*T[0]+u,y:H*T[1]+B};P=f.scrollWidth;N=f.scrollHeight;m=c.add(f,"div",{"class":"mce-resize-backdrop","data-mce-bogus":"all"});c.setStyles(m,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"});Aa=g;h=O(Aa)?c.create("img",{src:ua.transparentSrc}):Aa.cloneNode(!0);
c.addClass(h,"mce-clonedresizable");c.setAttrib(h,"data-mce-bogus","all");h.contentEditable="false";c.setStyles(h,{left:u,top:B,margin:0});Aa=h;qa(Aa,"width",D);qa(Aa,"height",H);h.removeAttribute("data-mce-selected");f.appendChild(h);c.bind(d,"mousemove",Ha);c.bind(d,"mouseup",Ra);e!==d&&(c.bind(e,"mousemove",Ha),c.bind(e,"mouseup",Ra));k=c.add(f,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+w)});T.elm=sa;c.setStyles(sa,{left:D*T[0]+u-sa.offsetWidth/2,top:H*T[1]+B-sa.offsetHeight/
2})}):oa(!1)},ca=Rg(ab,0),oa=J=>{J=void 0===J?!0:J;ca.cancel();Z();g&&J&&g.removeAttribute("data-mce-selected");Ea(Uj,(ba,u)=>{if(ba=c.get("mceResizeHandle"+u))c.unbind(ba),c.remove(ba)})},M=(J,ba)=>c.isChildOf(J,ba),Q=J=>{if(!(r||b.removed||b.composing)){J="mousedown"===J.type?J.target:a.getNode();J=Pc(x.fromDom(J),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(u=>u.dom).filter(u=>c.isEditable(u.parentElement)).getOrUndefined();var ba=aa(J)?"1":c.getAttrib(J,"data-mce-selected",
"1");G(c.select("img[data-mce-selected],hr[data-mce-selected]"),u=>{u.removeAttribute("data-mce-selected")});if(!aa(J)&&c.isChildOf(J,f)&&b.hasFocus()){da();const u=a.getStart(!0);if(c.isChildOf(u,J)&&M(a.getEnd(!0),J)){c.setAttrib(J,"data-mce-selected",ba);ca.throttle(J);return}}oa()}},Z=()=>{Ea(Uj,J=>{J.elm&&(c.unbind(J.elm),delete J.elm)})},da=()=>{try{b.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(J){}};b.on("init",()=>{da();b.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",
Q);b.on("keyup compositionend",J=>{g&&"TABLE"===g.nodeName&&Q(J)});b.on("hide blur",oa);b.on("contextmenu longpress",L,!0)});b.on("remove",Z);return{isResizable:ja,showResizeRect:ab,hideResizeRect:oa,updateResizeRect:Q,destroy:()=>{ca.cancel();g=h=m=null}}},GA=(a,b)=>{b.fold(c=>{a.setStartBefore(c.dom)},(c,d)=>{a.setStart(c.dom,d)},c=>{a.setStartAfter(c.dom)})},HA=(a,b)=>{b.fold(c=>{a.setEndBefore(c.dom)},(c,d)=>{a.setEnd(c.dom,d)},c=>{a.setEndAfter(c.dom)})},up=(a,b,c)=>{a=a.document.createRange();
GA(a,b);HA(a,c);return a},Vj=(a,b,c,d,e)=>{a=a.document.createRange();a.setStart(b.dom,c);a.setEnd(d.dom,e);return a},If=nc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vp=(a,b,c)=>b(x.fromDom(c.startContainer),c.startOffset,x.fromDom(c.endContainer),c.endOffset),IA=(a,b)=>b.match({domRange:c=>({ltr:R(c),rtl:p.none}),relative:(c,d)=>({ltr:td(()=>up(a,c,d)),rtl:td(()=>p.some(up(a,d,c)))}),exact:(c,d,e,f)=>({ltr:td(()=>Vj(a,c,d,e,f)),rtl:td(()=>
p.some(Vj(a,e,f,c,d)))})}),JA=(a,b)=>{const c=b.ltr();return c.collapsed?b.rtl().filter(d=>!1===d.collapsed).map(d=>If.rtl(x.fromDom(d.endContainer),d.endOffset,x.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>vp(a,If.ltr,c)):vp(a,If.ltr,c)},KA=(a,b)=>{b=IA(a,b);return JA(a,b)};If.ltr;If.rtl;const wp={create:(a,b,c,d)=>({start:a,soffset:b,finish:c,foffset:d})},LA=(a,b,c)=>{var d,e;return p.from(null===(e=(d=a.dom).caretPositionFromPoint)||void 0===e?void 0:e.call(d,b,c)).bind(f=>{if(null===
f.offsetNode)return p.none();const g=a.dom.createRange();g.setStart(f.offsetNode,f.offset);g.collapse();return p.some(g)})},MA=(a,b,c)=>{var d,e;return p.from(null===(e=(d=a.dom).caretRangeFromPoint)||void 0===e?void 0:e.call(d,b,c))},NA=document.caretPositionFromPoint?LA:document.caretRangeFromPoint?MA:p.none,OA=(a,b,c)=>{a=x.fromDom(a.document);return NA(a,b,c).map(d=>wp.create(x.fromDom(d.startContainer),d.startOffset,x.fromDom(d.endContainer),d.endOffset))},Wj=nc.generate([{before:["element"]},
{on:["element","offset"]},{after:["element"]}]),Fc={before:Wj.before,on:Wj.on,after:Wj.after,cata:(a,b,c,d)=>a.fold(b,c,d),getStart:a=>a.fold(Ka,Ka,Ka)},gh=nc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),PA=a=>a.match({domRange:b=>x.fromDom(b.startContainer),relative:(b,c)=>Fc.getStart(b),exact:(b,c,d,e)=>b}),xe={domRange:gh.domRange,relative:gh.relative,exact:gh.exact,exactFromRange:a=>gh.exact(a.start,a.soffset,a.finish,a.foffset),
getWin:a=>{a=PA(a);return x.fromDom(Jb(a).dom.defaultView)},range:wp.create},hh=(a,b)=>{const c=a.dom.nodeName.toLowerCase();return"input"===c?Fc.after(a):-1<Ca.call(["br","img"],c)?0===b?Fc.before(a):Fc.after(a):Fc.on(a,b)},QA=(a,b)=>{a=a.fold(Fc.before,hh,Fc.after);b=b.fold(Fc.before,hh,Fc.after);return xe.relative(a,b)},xp=(a,b,c,d)=>{a=hh(a,b);c=hh(c,d);return xe.relative(a,c)},RA=a=>a.match({domRange:b=>{const c=x.fromDom(b.startContainer),d=x.fromDom(b.endContainer);return xp(c,b.startOffset,
d,b.endOffset)},relative:QA,exact:xp}),ih=(a,b)=>{const c=(b||document).createDocumentFragment();G(a,d=>{c.appendChild(d.dom)});return x.fromDom(c)},SA=a=>{const b=xe.getWin(a).dom,c=(d,e,f,g)=>Vj(b,d,e,f,g);a=RA(a);return KA(b,a).match({ltr:c,rtl:c})},yp=(a,b,c)=>{const d=x.fromDom(Jb(x.fromDom(c)).dom.defaultView);return OA(d.dom,a,b).map(e=>{const f=c.createRange();f.setStart(e.start.dom,e.soffset);f.setEnd(e.finish.dom,e.foffset);return f}).getOrUndefined()},Xj=(a,b)=>!aa(a)&&!aa(b)&&a.startContainer===
b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset,zp=(a,b,c)=>{for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},TA=(a,b,c)=>null!==zp(a,b,c),UA=(a,b,c)=>TA(a,b,d=>d.nodeName===c),Ap=(a,b,c)=>{const d=b.parentNode;if(d)for(a=new Ta(b,a.getParent(d,a.isBlock)||a.getRoot());b=a[c?"prev":"next"]();)if(Ga(b))return!0;return!1},VA=(a,b)=>{var c;return(null===(c=a.previousSibling)||void 0===c?void 0:c.nodeName)===b},WA=(a,b)=>{for(;b&&
b!==a;){if(va(b))return!0;b=b.parentNode}return!1},Yj=(a,b,c,d,e)=>{const f=a.getRoot(),g=a.schema.getNonEmptyElements();var h=e.parentNode,k;if(!h)return p.none();const l=a.getParent(h,a.isBlock)||f;if(d&&Ga(e)&&b&&a.isEmpty(l))return p.some(C(h,a.nodeIndex(e)));for(e=new Ta(e,l);b=e[d?"prev":"next"]();){(k="false"===a.getContentEditableParent(b))||(k=b,h=f,k=Eb(k)&&null===zp(k,h,Ub));if(k)return p.none();if(E(b)&&0<b.data.length)return UA(b,f,"A")?p.none():p.some(C(b,d?b.data.length:0));if(a.isBlock(b)||
g[b.nodeName.toLowerCase()])return p.none();k=b}return Sc(k)?p.none():c&&k?p.some(C(k,0)):p.none()},Bp=(a,b,c,d)=>{var e=a.getRoot();let f=!1,g=c?d.startContainer:d.endContainer,h=c?d.startOffset:d.endOffset;d=V(g)&&h===g.childNodes.length;const k=a.schema.getNonEmptyElements();let l=c;if(Eb(g))return p.none();V(g)&&h>g.childNodes.length-1&&(l=!1);gf(g)&&(g=e,h=0);if(g===e){if(l&&(c=g.childNodes[0<h?h-1:0])&&(Eb(c)||k[c.nodeName]||Cc(c)))return p.none();if(g.hasChildNodes()){h=Math.min(!l&&0<h?h-
1:h,g.childNodes.length-1);g=g.childNodes[h];h=E(g)&&d?g.data.length:0;if(!b&&g===e.lastChild&&Cc(g)||WA(e,g)||Eb(g))return p.none();if(g.hasChildNodes()&&!Cc(g)){c=g;e=new Ta(g,e);do{if(va(c)||Eb(c)){f=!1;break}if(E(c)&&0<c.data.length){h=l?0:c.data.length;g=c;f=!0;break}if(k[c.nodeName.toLowerCase()]&&!wx(c)){h=a.nodeIndex(c);g=c.parentNode;l||h++;f=!0;break}}while(c=l?e.next():e.prev())}}}b&&(E(g)&&0===h&&Yj(a,d,b,!0,g).each(m=>{g=m.container();h=m.offset();f=!0}),V(g)&&((c=g.childNodes[h])||(c=
g.childNodes[h-1]),!c||!Ga(c)||VA(c,"A")||Ap(a,c,!1)||Ap(a,c,!0)||Yj(a,d,b,!0,c).each(m=>{g=m.container();h=m.offset();f=!0})));l&&!b&&E(g)&&h===g.data.length&&Yj(a,d,b,!1,g).each(m=>{g=m.container();h=m.offset();f=!0});return f&&g?p.some(C(g,h)):p.none()},jh=(a,b)=>{const c=b.collapsed,d=b.cloneRange(),e=C.fromRangeStart(b);Bp(a,c,!0,d).each(f=>{c&&C.isAbove(e,f)||d.setStart(f.container(),f.offset())});c||Bp(a,c,!1,d).each(f=>{d.setEnd(f.container(),f.offset())});c&&d.collapse(!0);return Xj(b,d)?
p.none():p.some(d)},kh=a=>{let b=a.startContainer;var c=a.startOffset;let d=a.endContainer;a=a.endOffset;b===d&&E(b)?0<c&&c<b.data.length&&(d=b.splitText(c),b=d.previousSibling,a>c?(b=d=c=d.splitText(a-c).previousSibling,a=c.data.length,c=0):a=0):(E(b)&&0<c&&c<b.data.length&&(b=b.splitText(c),c=0),E(d)&&0<a&&a<d.data.length&&(d=a=d.splitText(a).previousSibling,a=a.data.length));return{startContainer:b,startOffset:c,endContainer:d,endOffset:a}},Md=a=>({walk:(b,c)=>Gf(a,b,c),split:kh,expand:(b,c)=>
{c=void 0===c?{type:"word"}:c;return"word"===c.type?(b=Ld(a,b,[{inline:"span"}]),c=a.createRng(),c.setStart(b.startContainer,b.startOffset),c.setEnd(b.endContainer,b.endOffset),c):b},normalize:b=>jh(a,b).fold(za,c=>{b.setStart(c.startContainer,c.startOffset);b.setEnd(c.endContainer,c.endOffset);return!0})});Md.compareRanges=Xj;Md.getCaretRangeFromPoint=yp;Md.getSelectedNode=Sg;Md.getNode=Zc;const XA=((a,b)=>{const c=e=>{const f=b(e);return 0>=f||null===f?(e=lc(e,a),parseFloat(e)||0):f},d=(e,f)=>Db(f,
(g,h)=>{h=lc(e,h);h=void 0===h?0:parseInt(h,10);return isNaN(h)?g:g+h},0);return{set:(e,f)=>{if(!Yb(f)&&!f.match(/^[0-9]+$/))throw Error(a+".set accepts only positive integer values. Value was "+f);e=e.dom;ef(e)&&(e.style[a]=f+"px")},get:c,getOuter:c,aggregate:d,max:(e,f,g)=>{e=d(e,g);return f>e?f-e:0}}})("height",a=>{const b=a.dom;return je(a)?b.getBoundingClientRect().height:b.offsetHeight}),Cp=(a,b)=>a.view(b).fold(R([]),c=>{var d=a.owner(c);d=Cp(a,d);return[c].concat(d)}),YA=(a,b)=>{a=b.owner(a);
return Cp(b,a)};var ZA=Object.freeze({__proto__:null,view:a=>{var b;return(a.dom===document?p.none():p.from(null===(b=a.dom.defaultView)||void 0===b?void 0:b.frameElement)).map(x.fromDom)},owner:a=>Jb(a)});const $A=a=>{var b=x.fromDom(document);b=Ti(b);var c=YA(a,ZA);a=Si(a);c=Se(c,(d,e)=>{e=Si(e);return{left:d.left+e.left,top:d.top+e.top}},{left:0,top:0});return le(c.left+a.left+b.left,c.top+a.top+b.top)},aB=(a,b)=>{var c=bb(a);if(0===c.length||"textarea"===a.dom.nodeName.toLowerCase())return{element:a,
offset:b};if(b<c.length&&"textarea"!==c[b].dom.nodeName.toLowerCase())return{element:c[b],offset:0};c=c[c.length-1];return"textarea"===c.dom.nodeName.toLowerCase()?{element:a,offset:b}:"img"===c.dom.nodeName.toLowerCase()?{element:c,offset:1}:Ib(c)?{element:c,offset:zd.get(c).length}:{element:c,offset:bb(c).length}},Zj=(a,b)=>{{var c=a.dom.ownerDocument;var d=c.body,e=c.defaultView;const g=c.documentElement;if(d===a.dom)c=le(d.offsetLeft,d.offsetTop);else{c=Dg(null===e||void 0===e?void 0:e.pageYOffset,
g.scrollTop);e=Dg(null===e||void 0===e?void 0:e.pageXOffset,g.scrollLeft);var f=Dg(g.clientTop,d.clientTop);d=Dg(g.clientLeft,d.clientLeft);c=Si(a).translate(e-d,c-f)}}d=XA.get(a);return{element:a,bottom:c.top+d,height:d,pos:c,cleanup:b}},bB=(a,b)=>{a=aB(a,b);const c=x.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');Bb(a.element,c);return Zj(c,()=>Ja(c))},Dp=(a,b,c,d)=>{cB(a,(e,f)=>{x.fromDom(a.getBody());e=x.fromDom(a.getDoc());f=bB(x.fromDom(c.startContainer),
c.startOffset);ak(a,e,b,f,d);f.cleanup()},c)},ak=(a,b,c,d,e)=>{const f={elm:d.element.dom,alignToTop:e};if(!a.dispatch("ScrollIntoView",f).isDefaultPrevented()){var g=Ti(b).top;c(b,g,d,e);a.dispatch("AfterScrollIntoView",f)}},cB=(a,b,c)=>{const d=c.startContainer,e=c.startOffset,f=c.endContainer,g=c.endOffset;b(x.fromDom(d),x.fromDom(f));b=a.dom.createRng();b.setStart(d,e);b.setEnd(f,g);a.selection.setRng(c)},bk=(a,b)=>a.element.dom.scrollIntoView({block:b?"start":"end"}),Ep=(a,b,c,d)=>{const e=b+
a,f=c.pos.top,g=c.bottom;b=g-f>=b;f<a?bk(c,!1!==d):f>e?bk(c,b?!1!==d:!0===d):g>e&&!b&&bk(c,!0===d)},Fp=(a,b,c,d)=>{a=x.fromDom(Jb(a).dom.defaultView).dom.innerHeight;Ep(b,a,c,d)},Gp=(a,b,c,d)=>{a=x.fromDom(Jb(a).dom.defaultView).dom.innerHeight;Ep(b,a,c,d);b=$A(c.element);a=nn(window);b.top<a.y?ln(c.element,!1!==d):b.top>a.bottom&&ln(c.element,!0===d)},Jf=(a,b,c)=>Dp(a,Fp,b,c),dB=(a,b,c)=>{const d=x.fromDom(a.getDoc());ak(a,d,Fp,Zj(x.fromDom(b),pa),c)},Kf=(a,b,c)=>Dp(a,Gp,b,c),eB=(a,b,c)=>{const d=
x.fromDom(a.getDoc());ak(a,d,Gp,Zj(x.fromDom(b),pa),c)},Hp=a=>{const b=Oc(a).dom;return a.dom===b.activeElement},ck=a=>{a=void 0===a?x.fromDom(document):a;return p.from(a.dom.activeElement).map(x.fromDom)},fB=a=>ck(Oc(a)).filter(b=>a.dom.contains(b.dom)),Ip=(a,b)=>{b=Ib(b)?zd.get(b).length:bb(b).length+1;return a>b?b:0>a?0:a},gB=a=>xe.range(a.start,Ip(a.soffset,a.start),a.finish,Ip(a.foffset,a.finish)),Jp=(a,b)=>!pn(b.dom)&&(zc(a,b)||a.dom===b.dom),Kp=a=>b=>Jp(a,b.start)&&Jp(a,b.finish),hB=a=>xe.range(x.fromDom(a.startContainer),
a.startOffset,x.fromDom(a.endContainer),a.endOffset),iB=a=>{const b=document.createRange();try{return b.setStart(a.start.dom,a.soffset),b.setEnd(a.finish.dom,a.foffset),p.some(b)}catch(c){return p.none()}},dk=a=>{if(a.inline||ua.browser.isFirefox()){var b=x.fromDom(a.getBody());const c=x.fromDom(Jb(b).dom.defaultView).dom.getSelection();b=(c&&0!==c.rangeCount?p.from(c.getRangeAt(0)):p.none()).map(hB).filter(Kp(b))}else b=p.none();a.bookmark=b.isSome()?b:a.bookmark},ek=a=>(a.bookmark?a.bookmark:p.none()).bind(b=>
{var c=x.fromDom(a.getBody());return p.from(b).filter(Kp(c)).map(gB)}).bind(iB),jB=a=>{ek(a).each(b=>a.selection.setRng(b))},Lp={isEditorUIElement:a=>{a=a.className.toString();return-1!==a.indexOf("tox-")||-1!==a.indexOf("mce-")}},kB=(a,b)=>{Yb(b)||(b=0);return setTimeout(a,b)},lB=(a,b)=>{Yb(b)||(b=0);return setInterval(a,b)},Mb={setEditorTimeout:(a,b,c)=>kB(()=>{a.removed||b()},c),setEditorInterval:(a,b,c)=>{const d=lB(()=>{a.removed?clearInterval(d):b()},c);return d}},mB=(a,b)=>{const c=()=>{b.throttle()};
Da.DOM.bind(document,"mouseup",c);a.on("remove",()=>{Da.DOM.unbind(document,"mouseup",c)})},nB=(a,b)=>{a.on("mouseup touchend",c=>{b.throttle()})},oB=(a,b)=>{nB(a,b);a.on("keyup NodeChange AfterSetSelectionRange",c=>{"nodechange"===c.type&&c.selectionChange||dk(a)})},pB=a=>{const b=Rg(()=>{dk(a)},0);a.on("init",()=>{a.inline&&mB(a,b);oB(a,b)});a.on("remove",()=>{b.cancel()})};let ye;const fk=Da.DOM,gk=a=>{a=a.classList;return void 0!==a?a.contains("tox-edit-area")||a.contains("tox-edit-area__iframe")||
a.contains("mce-content-body"):!1},lh=(a,b)=>{const c=oz(a);return null!==fk.getParent(b,d=>V(d)&&Lp.isEditorUIElement(d)||(c?a.dom.is(d,c):!1))},hk=a=>{try{const b=Oc(x.fromDom(a.getElement()));return ck(b).fold(()=>document.body,c=>c.dom)}catch(b){return document.body}},qB=(a,b)=>{const c=b.editor;pB(c);const d=(e,f)=>{Uz(e)&&!0!==e.inline&&(e=x.fromDom(e.getContainer()),f(e,"tox-edit-focus"))};c.on("focusin",()=>{const e=a.focusedEditor;gk(hk(c))&&d(c,ge);e!==c&&(e&&e.dispatch("blur",{focusedEditor:c}),
a.setActive(c),a.focusedEditor=c,c.dispatch("focus",{blurredEditor:e}),c.focus(!0))});c.on("focusout",()=>{Mb.setEditorTimeout(c,()=>{const e=a.focusedEditor;gk(hk(c))&&e===c||d(c,he);lh(c,hk(c))||e!==c||(c.dispatch("blur",{focusedEditor:null}),a.focusedEditor=null)})});ye||(ye=e=>{const f=a.activeEditor;f&&cn(e).each(g=>{g.ownerDocument!==document||g===document.body||lh(f,g)||a.focusedEditor!==f||(f.dispatch("blur",{focusedEditor:null}),a.focusedEditor=null)})},fk.bind(document,"focusin",ye))},rB=
(a,b)=>{a.focusedEditor===b.editor&&(a.focusedEditor=null);!a.activeEditor&&ye&&(fk.unbind(document,"focusin",ye),ye=null)},sB=(a,b)=>a.dom.getParent(b,c=>"true"===a.dom.getContentEditable(c)),tB=(a,b)=>(b.collapsed?p.from(Zc(b.startContainer,b.startOffset)).map(x.fromDom):p.none()).bind(c=>Bx(c)?p.some(c):zc(a,c)?p.none():p.some(a)),Mp=(a,b)=>{tB(x.fromDom(a.getBody()),b).bind(c=>ob(c.dom)).fold(()=>{a.selection.normalize()},c=>a.selection.setRng(c.toRange()))},ik=a=>{if(a.setActive)try{a.setActive()}catch(b){a.focus()}else a.focus()},
uB=a=>{const b=Oc(x.fromDom(a.getElement()));return ck(b).filter(c=>!gk(c.dom)&&lh(a,c.dom)).isSome()},Nd=a=>{if(a.inline){const b=a.getBody();if(a=b)a=x.fromDom(b),a=Hp(a)||fB(a).isSome()}else a=Ma(a.iframeElement)&&Hp(x.fromDom(a.iframeElement));return a},vB=a=>{var b=a.selection;const c=a.getBody();let d=b.getRng();a.quirks.refreshContentEditable();aa(a.bookmark)||Nd(a)||ek(a).each(e=>{a.selection.setRng(e);d=e});if((b=sB(a,b.getNode()))&&a.dom.isChildOf(b,c))ik(b),Mp(a,d);else if(a.inline||(ua.browser.isOpera()||
ik(c),a.getWin().focus()),ua.browser.isFirefox()||a.inline)ik(c),Mp(a,d);a.editorManager.setActive(a)},Np=(a,b,c,d,e)=>{const f=c?b.startOffset:b.endOffset;return p.from(c?b.startContainer:b.endContainer).map(x.fromDom).map(g=>d&&b.collapsed?g:kc(g,e(g,f)).getOr(g)).bind(g=>tb(g)?p.some(g):Rb(g).filter(tb)).map(g=>g.dom).getOr(a)},Op=(a,b,c)=>Np(a,b,!0,void 0===c?!1:c,(d,e)=>Math.min(d.dom.childNodes.length,e)),Pp=(a,b,c)=>Np(a,b,!1,void 0===c?!1:c,(d,e)=>0<e?e-1:e),Qp=(a,b)=>{const c=a;for(;a&&E(a)&&
0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c},wB=(a,b,c)=>p.from(b).bind(d=>p.from(d.parentNode).map(e=>{const f=a.nodeIndex(d),g=a.createRng();g.setStart(e,f);g.setEnd(e,f+1);c&&(Mj(a,g,d,!0),Mj(a,g,d,!1));return g})),jk=(a,b)=>wa(b,c=>{const d=a.dispatch("GetSelectionRange",{range:c});return d.range!==c?d.range:c}),xB=a=>"img"===a.dom.nodeName.toLowerCase()?1:zd.getOption(a).fold(()=>bb(a).length,b=>b.length),yB=a=>zd.getOption(a).filter(b=>0!==b.trim().length||-1<b.indexOf("\u00a0")).isSome(),
zB=["img","br"],Rp=a=>{var b;(b=yB(a))||(b=a.dom.nodeName.toLowerCase(),b=-1<Ca.call(zB,b));b||(b=Li(a)&&"false"===fb(a,"contenteditable"));return b},AB=(a,b)=>{const c=d=>{d=bb(d);for(let f=d.length-1;0<=f;f--){var e=d[f];if(b(e))return p.some(e);e=c(e);if(e.isSome())return e}return p.none()};return c(a)},BB=(a,b)=>{if(en(x.fromDom(a.getBody()),"[data-mce-autocompleter]").isNone()){const c=x.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',a.getDoc());Ri(c,x.fromDom(b.extractContents()));
b.insertNode(c.dom);Rb(c).each(d=>d.dom.normalize());AB(c,Rp).map(d=>{a.selection.setCursorLocation(d.dom,xB(d))})}},CB=(a,b)=>df("[data-mce-autocompleter]",b).each(c=>{const d=a.selection.getBookmark();Bc(c);a.selection.moveToBookmark(d)}),DB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},mh=(a,b,c)=>{var d=c?"lastChild":"firstChild";c=c?"prev":"next";if(a[d])return a[d];if(a!==b){if(d=a[c])return d;for(a=a.parent;a&&a!==b;a=a.parent)if(d=a[c])return d}},Sp=a=>
{const b="a"===a.name&&!a.attr("href")&&a.attr("id");return a.attr("name")||a.attr("id")&&!a.firstChild||a.attr("data-mce-bookmark")||b};class ib{static create(a,b){const c=new ib(a,DB[a]||1);b&&Ea(b,(d,e)=>{c.attr(e,d)});return c}constructor(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}replace(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this}attr(a,b){const c=this;if(!fa(a))return aa(a)||Ea(a,(e,f)=>{c.attr(f,e)}),c;const d=c.attributes;if(d){if(void 0!==
b){if(null===b){if(a in d.map)for(delete d.map[a],b=d.length;b--;)if(d[b].name===a){d.splice(b,1);break}return c}if(a in d.map){let e=d.length;for(;e--;)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});d.map[a]=b;return c}return d.map[a]}}clone(){const a=new ib(this.name,this.type),b=this.attributes;if(b){const c=[];c.map={};for(let d=0,e=b.length;d<e;d++){const f=b[d];"id"!==f.name&&(c[c.length]={name:f.name,value:f.value},c.map[f.name]=f.value)}a.attributes=c}a.value=this.value;
return a}wrap(a){this.parent&&(this.parent.insert(a,this),a.append(this));return this}unwrap(){for(let a=this.firstChild;a;){const b=a.next;this.insert(a,this,!0);a=b}this.remove()}remove(){const a=this.parent,b=this.next,c=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else c&&(c.next=b);if(a.lastChild===this){if(a.lastChild=c)c.next=null}else b&&(b.prev=c);this.parent=this.next=this.prev=null}return this}append(a){a.parent&&a.remove();const b=this.lastChild;b?(b.next=a,a.prev=
b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a}insert(a,b,c){a.parent&&a.remove();const d=b.parent||this;c?(b===d.firstChild?d.firstChild=a:b.prev&&(b.prev.next=a),a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a);a.parent=d;return a}getAll(a){const b=[];for(let c=this.firstChild;c;c=mh(c,this))c.name===a&&b.push(c);return b}children(){const a=[];for(let b=this.firstChild;b;b=b.next)a.push(b);return a}empty(){if(this.firstChild){const b=
[];for(var a=this.firstChild;a;a=mh(a,this))b.push(a);for(a=b.length;a--;){const c=b[a];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}this.firstChild=this.lastChild=null;return this}isEmpty(a,b,c){b=void 0===b?{}:b;var d;let e=this.firstChild;if(Sp(this))return!1;if(e){do{if(1===e.type){if(e.attr("data-mce-bogus"))continue;if(a[e.name]||Sp(e))return!1}if(8===e.type)return!1;var f;if(f=3===e.type){var g=void 0,h=e;f=null!==(g=h.value)&&void 0!==g?g:"";f=Bd.test(f)?(g=h.parent)&&("span"!==g.name||
g.attr("style"))&&/^[ ]+$/.test(f)?!1:!0:!1;f=!f}if(f||3===e.type&&e.parent&&b[e.parent.name]&&Bd.test(null!==(d=e.value)&&void 0!==d?d:"")||c&&c(e))return!1}while(e=mh(e,this))}return!0}walk(a){return mh(this,null,a)}}const Tp=(a,b,c)=>{c=void 0===c?0:c;const d=a.toLowerCase();if(-1!==d.indexOf("[if ",c)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(d.substr(c)))return a=d.indexOf("[endif]",c),d.indexOf(">",a);if(b)return a=d.indexOf(">",c),-1!==a?a:d.length;b=/--!?>/g;b.lastIndex=c;return(a=
b.exec(a))?a.index+a[0].length:d.length},Up=(a,b)=>{const c=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=a.schema;a=a.getTempAttrs();a=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");b=b.replace(a,"");a=d.getVoidElements();for(var e;e=c.exec(b);){const g=c.lastIndex,h=e[0].length;if(a[e[1]])e=g;else a:{e=b;var f=g;const k=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,l=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,m=d.getVoidElements();let n=1;for(;0!==n;)for(k.lastIndex=
f;;){const t=k.exec(e);if(null===t){e=f;break a}else{if("!"===t[1])f=Ua(t[2],"--",0)?Tp(e,!1,t.index+3):Tp(e,!0,t.index+1);else{l.lastIndex=k.lastIndex;const y=l.exec(e);if(zb(y)||y.index!==k.lastIndex)continue;"/"===t[1]?--n:ha.call(m,t[2])||(n+=1);f=k.lastIndex+y[0].length}break}}e=f}b=b.substring(0,g-h)+b.substring(e);c.lastIndex=g-h}return bc(b)},Vp=a=>{a=Ab("[data-mce-bogus]",a);G(a,b=>{"all"===fb(b,"data-mce-bogus")?Ja(b):Ad(b)?(Bb(b,x.fromText("\ufeff")),Ja(b)):Bc(b)})},Wp=a=>{a=Ab("input",
a);G(a,b=>{b.dom.removeAttribute("name")})},EB=(a,b)=>p.from(a.getBody()).fold(R("tree"===b.format?new ib("body",11):""),c=>{if("raw"===b.format)var d=K.trim(Up(a.serializer,c.innerHTML));else if("text"===b.format){d=a.getDoc();var e=Oc(x.fromDom(a.getBody()));d=x.fromTag("div",d);Va(d.dom,"data-mce-bogus","all");Ag(d,{position:"fixed",left:"-9999999px",top:"0"});Cg(d,c.innerHTML);Vp(d);Wp(d);(Oi(e)?e:x.fromDom(Jb(e).dom.body)).dom.appendChild(d.dom);e=bc(d.dom.innerText);Ja(d);d=e}else"tree"===b.format?
d=a.serializer.serialize(c,b):(d=a.serializer.serialize(c,b),e=vb(a),d=d.replace(new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s|\u00a0|<br \\/>|)<\\/${e}>[\r\n]*|<br \\/>[\r\n]*)$`),""));return"text"!==b.format&&!Gg(x.fromDom(c))&&fa(d)?K.trim(d):d}),Xp=K.makeMap,Yp=a=>{const b=[];a=a||{};const c=a.indent,d=Xp(a.indent_before||""),e=Xp(a.indent_after||""),f=Wc.getEncodeFunc(a.entity_encoding||"raw",a.entities),g="xhtml"!==a.element_format;return{start:(h,k,l)=>{if(c&&d[h]&&0<b.length){var m=b[b.length-
1];0<m.length&&"\n"!==m&&b.push("\n")}b.push("<",h);if(k)for(let n=0,t=k.length;n<t;n++)m=k[n],b.push(" ",m.name,'="',f(m.value,!0),'"');b[b.length]=!l||g?">":" />";l&&c&&e[h]&&0<b.length&&(h=b[b.length-1],0<h.length&&"\n"!==h&&b.push("\n"))},end:h=>{b.push("</",h,">");c&&e[h]&&0<b.length&&(h=b[b.length-1],0<h.length&&"\n"!==h&&b.push("\n"))},text:(h,k)=>{0<h.length&&(b[b.length]=k?h:f(h))},cdata:h=>{b.push("<![CDATA[",h,"]]\x3e")},comment:h=>{b.push("\x3c!--",h,"--\x3e")},pi:(h,k)=>{k?b.push("<?",
h," ",f(k),"?>"):b.push("<?",h,"?>");c&&b.push("\n")},doctype:h=>{b.push("<!DOCTYPE",h,">",c?"\n":"")},reset:()=>{b.length=0},getContent:()=>b.join("").replace(/\n$/,"")}},ed=(a,b)=>{a=void 0===a?{}:a;b=void 0===b?Xc():b;const c=Yp(a);a.validate="validate"in a?a.validate:!0;return{serialize:d=>{const e=a.validate,f={3:h=>{var k;c.text(null!==(k=h.value)&&void 0!==k?k:"",h.raw)},8:h=>{var k;c.comment(null!==(k=h.value)&&void 0!==k?k:"")},7:h=>{c.pi(h.name,h.value)},10:h=>{var k;c.doctype(null!==(k=
h.value)&&void 0!==k?k:"")},4:h=>{var k;c.cdata(null!==(k=h.value)&&void 0!==k?k:"")},11:h=>{if(h=h.firstChild){do g(h);while(h=h.next)}}};c.reset();const g=h=>{var k,l=f[h.type];if(l)l(h);else{l=h.name;const t=l in b.getVoidElements();let y=h.attributes;if(e&&y&&1<y.length){const w=[];w.map={};var m=b.getElementRule(h.name);if(m){for(let q=0,r=m.attributesOrder.length;q<r;q++){var n=m.attributesOrder[q];if(n in y.map){const v=y.map[n];w.map[n]=v;w.push({name:n,value:v})}}for(let q=0,r=y.length;q<
r;q++)m=y[q].name,m in w.map||(n=y.map[m],w.map[m]=n,w.push({name:m,value:n}));y=w}}c.start(l,y,t);if(!t){if(h=h.firstChild){"pre"!==l&&"textarea"!==l||3!==h.type||"\n"!==(null===(k=h.value)||void 0===k?void 0:k[0])||c.text("\n",!0);do g(h);while(h=h.next)}c.end(l)}}};if(1!==d.type||a.inner)if(3===d.type)f[3](d);else f[11](d);else g(d);return c.getContent()}}},Zp=new Set;(()=>{G("margin margin-left margin-right margin-top margin-bottom padding padding-left padding-right padding-top padding-bottom border border-width border-style border-color background background-attachment background-clip background-color background-image background-origin background-position background-repeat background-size float position left right top bottom z-index display transform width max-width min-width height max-height min-height overflow overflow-x overflow-y text-overflow vertical-align transition transition-delay transition-duration transition-property transition-timing-function".split(" "),
a=>{Zp.add(a)})})();const $p=["font","text-decoration","text-emphasis"],FB=(a,b)=>Lc(rb(a.parseStyle(a.getAttrib(b,"style"))),c=>!Zp.has(c)),GB=a=>ka(a,b=>Na($p,c=>Ua(b,c,0))),HB=(a,b,c)=>{const d=rb(a.parseStyle(a.getAttrib(b,"style"))),e=rb(a.parseStyle(a.getAttrib(c,"style"))),f=g=>{var h,k;const l=null!==(h=a.getStyle(b,g))&&void 0!==h?h:"";g=null!==(k=a.getStyle(c,g))&&void 0!==k?k:"";return 0<l.length&&0<g.length&&l!==g};return Na(d,g=>{var h=k=>Na(k,l=>l===g);return!h(e)&&h($p)?(h=GB(e),Na(h,
f)):f(g)})},aq=(a,b,c)=>p.from(c.container()).filter(E).exists(d=>{const e=a?0:-1;return b(d.data.charAt(c.offset()+e))}),kk=A(aq,!0,Kd),lk=A(aq,!1,Kd),mk=a=>{a=a.container();return E(a)&&(0===a.data.length||"\ufeff"===a.data&&Hf.isBookmarkNode(a.parentNode))},fd=(a,b)=>c=>Zg(a?0:-1,c).filter(b).isSome(),bq=a=>sn(a)&&"block"===lc(x.fromDom(a),"display"),cq=a=>{var b;if(b=va(a))b=!(V(a)&&"all"===a.getAttribute("data-mce-bogus"));return b},IB=fd(!0,bq),JB=fd(!1,bq),Lf=fd(!0,mc),Mf=fd(!1,mc),dq=fd(!0,
Cc),eq=fd(!1,Cc),gd=fd(!0,cq),hd=fd(!1,cq),id=(a,b,c)=>zc(b,a)?an(a,d=>c(d)||d.dom===b.dom).slice(0,-1):[],KB=(a,b)=>id(a,b,za),nh=(a,b)=>[a].concat(id(a,b,za)),fq=(a,b)=>Oa(nh(x.fromDom(b.container()),a),Kb),gq=(a,b,c)=>ah(a,b.dom,c,mk).forall(d=>fq(b,c).fold(()=>!oc(d,c,b.dom),e=>!oc(d,c,b.dom)&&zc(e,x.fromDom(d.container())))),hq=(a,b,c)=>fq(b,c).fold(()=>ah(a,b.dom,c,mk).forall(d=>!oc(d,c,b.dom)),d=>ah(a,d.dom,c,mk).isNone()),nk=A(hq,!1),iq=A(hq,!0),LB=A(gq,!1),MB=A(gq,!0),NB=a=>p.from(a.getNode()).map(x.fromDom).exists(Ad),
oh=(a,b,c)=>{const d=ka(nh(x.fromDom(c.container()),b),Kb);b=$a(d,0).getOr(b);return Lb(a,b.dom,c).filter(NB)},ok=(a,b)=>p.from(b.getNode()).map(x.fromDom).exists(Ad)||oh(!0,a,b).isSome(),pk=(a,b)=>p.from(b.getNode(!0)).map(x.fromDom).exists(Ad)||oh(!1,a,b).isSome(),OB=A(oh,!1),PB=A(oh,!0),jq=a=>C.isTextPosition(a)&&!a.isAtStart()&&!a.isAtEnd(),kq=(a,b)=>{b=ka(nh(x.fromDom(b.container()),a),Kb);return $a(b,0).getOr(a)},lq=(a,b)=>jq(b)?lk(b):lk(b)||nb(kq(a,b).dom,b).exists(lk),mq=(a,b)=>jq(b)?kk(b):
kk(b)||mb(kq(a,b).dom,b).exists(kk),qk=a=>p.from(a.getNode()).map(x.fromDom).bind(b=>vd(b,tb)).exists(b=>Qe(["pre","pre-wrap"],lc(b,"white-space"))),nq=(a,b)=>c=>{c=(new Ta(c,a))[b]();return Ma(c)&&va(c)&&Mo(c)},oq=(a,b)=>qk(b)?!1:nb(a.dom,b).isNone()||mb(a.dom,b).isNone()||nk(a,b)||iq(a,b)||pk(a,b)||ok(a,b)||lq(a,b)||mq(a,b),Nf=(a,b)=>{if(qk(b))return!1;var c;(c=nk(a,b)||LB(a,b)||pk(a,b)||lq(a,b))||(c=nb(a.dom,b).getOr(b),a=nq(a.dom,"prev"),c=b.isAtStart()&&(a(b.container())||a(c.container())));
return c},Of=(a,b)=>{if(qk(b))return!1;var c;(c=iq(a,b)||MB(a,b)||ok(a,b)||mq(a,b))||(c=mb(a.dom,b).getOr(b),a=nq(a.dom,"next"),c=b.isAtEnd()&&(a(b.container())||a(c.container())));return c},rk=(a,b)=>{var c;if(!(c=Nf(a,b))){{c=b.container();const d=b.offset();b=E(c)&&d<c.data.length?C(c,d+1):b}c=Of(a,b)}return c},QB=a=>{const b=a.split("");return wa(b,(c,d)=>Df(c)&&0<d&&d<b.length-1&&Hj(b[d-1])&&Hj(b[d+1])?" ":c).join("")},pq=(a,b,c)=>{const d=b.data,e=C(b,0);if(c||!Df(d.charAt(0))||rk(a,e))return c&&
Kd(d.charAt(0))&&Nf(a,e)?(b.data="\u00a0"+d.slice(1),!0):!1;b.data=" "+d.slice(1);return!0},qq=(a,b,c)=>{const d=b.data,e=C(b,d.length-1);if(c||!Df(d.charAt(d.length-1))||rk(a,e))return c&&Kd(d.charAt(d.length-1))&&Of(a,e)?(b.data=d.slice(0,-1)+"\u00a0",!0):!1;b.data=d.slice(0,-1)+" ";return!0},RB=(a,b)=>{const c=b.container();if(!E(c))return p.none();var d=b.container();if(E(d)&&eb(d.data,"\u00a0")){if(!(d=pq(a,c,!1))){{d=c.data;const e=QB(d);e!==d?(c.data=e,d=!0):d=!1}}a=d||qq(a,c,!1);return fe(a,
b)}return rk(a,b)?(a=pq(a,c,!0)||qq(a,c,!0),fe(a,b)):p.none()},SB=a=>{const b=x.fromDom(a.getBody());a.selection.isCollapsed()&&RB(b,C.fromRangeStart(a.selection.getRng())).each(c=>{a.selection.setRng(c.toRange())})},rq=(a,b,c)=>{if(0!==c){var d=x.fromDom(a),e=Ac(d,Kb).getOr(d);d=a.data.slice(b,b+c);var f=b+c>=a.data.length&&Of(e,C(a,a.data.length));e=0===b&&Nf(e,C(a,0));a.replaceData(b,c,vn(d,4,e,f))}},ph=(a,b)=>{var c=a.data.slice(b);c=c.length-Pw(c).length;rq(a,b,c)},sk=(a,b)=>{var c=a.data.slice(0,
b);c=c.length-Pm(c).length;rq(a,b-c,c)},tk=(a,b,c,d)=>{d=void 0===d?!0:d;const e=Pm(a.data).length,f=d?a:b;a=d?b:a;d?f.appendData(a.data):f.insertData(0,a.data);Ja(x.fromDom(a));c&&ph(f,e);return f},TB=(a,b)=>{const c=b.container(),d=b.offset();return!C.isTextPosition(b)&&c===a.parentNode&&d>C.before(a).offset()?C(b.container(),b.offset()-1):b},sq=a=>{if(kb(a.previousSibling)){var b=p,c=b.some;a=a.previousSibling;a=E(a)?C(a,a.data.length):C.after(a);return c.call(b,a)}return a.previousSibling?Tb(a.previousSibling):
p.none()},tq=a=>{if(kb(a.nextSibling)){var b=p,c=b.some;a=a.nextSibling;a=E(a)?C(a,0):C.before(a);return c.call(b,a)}return a.nextSibling?ob(a.nextSibling):p.none()},UB=(a,b)=>p.from(b.previousSibling?b.previousSibling:b.parentNode).bind(c=>nb(a,C.before(c))).orThunk(()=>mb(a,C.after(b))),VB=(a,b)=>mb(a,C.after(b)).orThunk(()=>nb(a,C.before(b))),WB=(a,b)=>sq(b).orThunk(()=>tq(b)).orThunk(()=>UB(a,b)),XB=(a,b)=>tq(b).orThunk(()=>sq(b)).orThunk(()=>VB(a,b)),YB=(a,b,c)=>(a?XB(b,c):WB(b,c)).map(A(TB,
c)),uq=(a,b,c)=>{c.fold(()=>{a.focus()},d=>{a.selection.setRng(d.toRange(),b)})},ZB=a=>b=>b.dom===a,$B=(a,b)=>{var c;if(c=b)a=a.schema.getBlockElements(),b=b.dom.nodeName.toLowerCase(),c=ha.call(a,b);return c},aC=a=>{if(Pa(a)){const b=x.fromHtml('<br data-mce-bogus="1">');ke(a);a.dom.appendChild(b.dom);return p.some(C.before(b.dom))}return p.none()},bC=(a,b,c)=>{const d=Nc(a).filter(Ib),e=ie(a).filter(Ib);Ja(a);return ax(d,e,b,(f,g,h)=>{f=f.dom;g=g.dom;const k=f.data.length;tk(f,g,c);return h.container()===
g?C(f,k):h}).orThunk(()=>{c&&(d.each(f=>sk(f.dom,f.dom.length)),e.each(f=>ph(f.dom,0)));return b})},cC=(a,b)=>{a=a.schema.getTextInlineElements();b=b.dom.nodeName.toLowerCase();return ha.call(a,b)},Od=(a,b,c,d)=>{d=void 0===d?!0:d;const e=YB(b,a.getBody(),c.dom),f=Ac(c,A($B,a),ZB(a.getBody())),g=bC(c,e,cC(a,c));a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):f.bind(aC).fold(()=>{d&&uq(a,b,g)},h=>{d&&uq(a,b,p.some(h))})},dC=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,
Pd=(a,b)=>Zb(x.fromDom(b),ez(a))&&!Cd(a.schema,b)&&a.dom.isEditable(b),vq=a=>{var b;return"rtl"===Da.DOM.getStyle(a,"direction",!0)||dC.test(null!==(b=a.textContent)&&void 0!==b?b:"")},jd=(a,b,c)=>{a=ka(Da.DOM.getParents(c.container(),"*",b),a);return p.from(a[a.length-1])},Nb=(a,b)=>{const c=b.container(),d=b.offset();return a?Vc(c)?E(c.nextSibling)?C(c.nextSibling,0):C.after(c):Yi(b)?C(c,d+1):b:Vc(c)?E(c.previousSibling)?C(c.previousSibling,c.previousSibling.data.length):C.before(c):Zi(b)?C(c,d-
1):b},wq=A(Nb,!0),xq=A(Nb,!1),qh=(a,b)=>{const c=d=>d.stopImmediatePropagation();a.on("beforeinput input",c,!0);a.getDoc().execCommand(b);a.off("beforeinput input",c)},eC=a=>b=>ee(Rb(b),a,yc),fC=a=>Wi(a)||hf(a),rh=(a,b)=>zc(a,b)?vd(b,fC,eC(a)):p.none(),uk=(a,b)=>{b=void 0===b?!0:b;a.dom.isEmpty(a.getBody())&&a.setContent("",{no_selection:!b})},yq=(a,b,c)=>sb(ob(c),Tb(c),(d,e)=>{const f=Nb(!0,d),g=Nb(!1,e);d=Nb(!1,b);return a?mb(c,d).exists(h=>h.isEqual(g)&&b.isEqual(f)):nb(c,d).exists(h=>h.isEqual(f)&&
b.isEqual(g))}).getOr(!0),zq=a=>(8===a.dom.nodeType||"#comment"===a.dom.nodeName.toLowerCase()?Nc(a):kc(a,a.dom.childNodes.length-1)).bind(zq).orThunk(()=>p.some(a)),Aq=(a,b,c,d)=>{d=void 0===d?!0:d;var e;b.deleteContents();b=zq(c).getOr(c);const f=x.fromDom(null!==(e=a.dom.getParent(b.dom,a.dom.isBlock))&&void 0!==e?e:c.dom);f.dom===a.getBody()?uk(a,d):Pa(f)&&(Dc(f),d&&a.selection.setCursorLocation(f.dom,0));c.dom!==f.dom&&(a=ee(Rb(f),c)?[]:hx(f),G(a.concat(bb(c)),g=>{g.dom!==f.dom&&!zc(g,f)&&Pa(g)&&
Ja(g)}))},gC=a=>b=>a.dom===b.dom,hC=(a,b)=>{var c=x.fromDom(a.startContainer);c=$b(c,"table",b);a=x.fromDom(a.endContainer);b=$b(a,"table",b);a=c.isSome();const d=b.isSome(),e=sb(c,b,yc).getOr(!1);return{startTable:c,endTable:b,isStartInTable:a,isEndInTable:d,isSameTable:e,isMultiTable:!e&&a&&d}},iC=(a,b)=>({start:a,end:b}),Pf=nc.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),
sh=(a,b)=>Pc(x.fromDom(a),"td,th",b),jC=a=>a.start.dom!==a.end.dom,Bq=(a,b)=>$b(a.start,"table",b).bind(c=>$b(a.end,"table",b).bind(d=>fe(c.dom===d.dom,c))),kC=(a,b)=>a.start.dom===a.end.dom&&Bq(a,b).exists(c=>{c=c.dom.rows;return 1===c.length&&1===c[0].cells.length}),lC=(a,b)=>{const c=sh(a.startContainer,b);a=sh(a.endContainer,b);return sb(c,a,iC)},mC=a=>b=>$b(b,"table",a).bind(c=>Ve(Ab("td,th",c)).map(d=>({start:b,end:d}))),nC=a=>b=>$b(b,"table",a).bind(c=>$a(Ab("td,th",c),0).map(d=>({start:d,
end:b}))),vk=a=>b=>Bq(b,a).map(c=>{var d=Ab("td,th",c);return{rng:b,table:c,cells:d}}),Cq=(a,b,c,d)=>{if(c.collapsed||!a.forall(jC))return p.none();if(b.isSameTable)return d=a.bind(vk(d)),p.some({start:d,end:d});a=sh(c.startContainer,d);c=sh(c.endContainer,d);a=a.bind(mC(d)).bind(vk(d));d=c.bind(nC(d)).bind(vk(d));return p.some({start:a,end:d})},Dq=(a,b)=>Ue(a,c=>c.dom===b.dom),wk=a=>sb(Dq(a.cells,a.rng.start),Dq(a.cells,a.rng.end),(b,c)=>a.cells.slice(b,c+1)),oC=(a,b,c)=>a.exists(d=>kC(d,c)&&Lj(d.start,
b)),Eq=(a,b)=>{const {startTable:c,endTable:d}=b,e=a.cloneRange();c.each(f=>e.setStartAfter(f.dom));d.each(f=>e.setEndBefore(f.dom));return e},pC=(a,b,c,d)=>Cq(a,b,c,d).bind(e=>{var {start:f,end:g}=e;return f.or(g)}).bind(e=>{const {isSameTable:f}=b,g=wk(e).getOr([]);if(f&&e.cells.length===g.length)return p.some(Pf.fullTable(e.table));if(0<g.length){if(f)return p.some(Pf.partialTable(g,p.none()));e=Eq(c,b);return p.some(Pf.partialTable(g,p.some(Object.assign({},b,{rng:e}))))}return p.none()}),qC=
(a,b,c,d)=>Cq(a,b,c,d).bind(e=>{var {start:f,end:g}=e;e=f.bind(wk).getOr([]);const h=g.bind(wk).getOr([]);if(0<e.length&&0<h.length){const k=Eq(c,b);return p.some(Pf.multiTable(e,h,k))}return p.none()}),rC=(a,b)=>{a=gC(a);const c=lC(b,a),d=hC(b,a);return oC(c,b,a)?c.map(e=>Pf.singleCellTable(b,e.start)):d.isMultiTable?qC(c,d,b,a):pC(c,d,b,a)},Fq=a=>G(a,b=>{b.dom.removeAttribute("contenteditable");Dc(b)}),sC=(a,b,c)=>{c.each(d=>{b?Ja(d):(Dc(d),a.selection.setCursorLocation(d.dom,0))})},yk=(a,b,c,d)=>
{const e=c.cloneRange();d?(e.setStart(c.startContainer,c.startOffset),e.setEndAfter(b.dom.lastChild)):(e.setStartBefore(b.dom.firstChild),e.setEnd(c.endContainer,c.endOffset));xk(a,e,b,!1).each(f=>f())},Gq=a=>{const b=we(a),c=x.fromDom(a.selection.getNode());ne(c.dom)&&Pa(c)?a.selection.setCursorLocation(c.dom,0):a.selection.collapse(!0);1<b.length&&Na(b,d=>d.dom===c.dom)&&Va(c.dom,"data-mce-selected","1")},Hq=(a,b,c)=>p.some(()=>{const d=a.selection.getRng(),e=c.bind(f=>{var {rng:g,isStartInTable:h}=
f;f=p.from(a.dom.getParent(h?g.endContainer:g.startContainer,a.dom.isBlock)).map(x.fromDom);g.deleteContents();sC(a,h,f.filter(Pa));f=h?b[0]:b[b.length-1];yk(a,f,d,h);return Pa(f)?p.none():p.some(h?b.slice(1):b.slice(0,-1))}).getOr(b);Fq(e);Gq(a)}),tC=(a,b,c,d)=>p.some(()=>{var e=a.selection.getRng();const f=b[0];var g=c[c.length-1];yk(a,f,e,!0);yk(a,g,e,!1);e=Pa(f)?b:b.slice(1);g=Pa(g)?c:c.slice(0,-1);Fq(e.concat(g));d.deleteContents();Gq(a)}),xk=(a,b,c,d)=>{d=void 0===d?!0:d;return p.some(()=>{Aq(a,
b,c,d)})},uC=(a,b)=>p.some(()=>Od(a,!1,b)),vC=(a,b,c)=>rC(b,c).bind(d=>d.fold(A(xk,a),A(uC,a),A(Hq,a),A(tC,a))),wC=(a,b,c,d)=>zk(b,d).fold(()=>vC(a,b,c),e=>th(a,e)),xC=(a,b)=>Oa([b].concat(id(b,a,za)),oe),zk=(a,b)=>Oa([b].concat(id(b,a,za)),Mi("caption")),yC=(a,b,c,d,e)=>Cf(c,a.getBody(),e).bind(f=>xC(b,x.fromDom(f.getNode())).bind(g=>g.dom===d.dom?p.none():p.some(pa))),th=(a,b)=>p.some(()=>{Dc(b);a.selection.setCursorLocation(b.dom,0)}),zC=(a,b,c,d)=>ob(a.dom).bind(e=>Tb(a.dom).map(f=>b?c.isEqual(e)&&
d.isEqual(f):c.isEqual(f)&&d.isEqual(e))).getOr(!0),AC=(a,b,c)=>zk(a,x.fromDom(c.getNode())).fold(()=>p.some(pa),d=>fe(d.dom!==b.dom,pa)),BC=(a,b,c,d,e)=>Cf(c,a.getBody(),e).fold(()=>p.some(pa),f=>zC(d,c,e,f)?th(a,d):AC(b,d,f)),CC=(a,b,c,d)=>{const e=C.fromRangeStart(a.selection.getRng());return Oa(nh(d,c),oe).bind(f=>Pa(f)?th(a,f):yC(a,c,b,f,e))},Iq=(a,b)=>a?dq(b):eq(b),DC=(a,b)=>{const c=C.fromRangeStart(a.selection.getRng());return Iq(b,c)||Lb(b,a.getBody(),c).exists(d=>Iq(b,d))},EC=(a,b,c)=>{const d=
x.fromDom(a.getBody());return zk(d,c).fold(()=>CC(a,b,d,c).orThunk(()=>fe(DC(a,b),pa)),e=>{const f=C.fromRangeStart(a.selection.getRng());return Pa(e)?th(a,e):BC(a,d,b,e,f)})},Ak=(a,b)=>{const c=x.fromDom(a.selection.getStart(!0)),d=we(a);if(a.selection.isCollapsed()&&0===d.length)a=EC(a,b,c);else{b=x.fromDom(a.getBody());const e=a.selection.getRng();a=0!==d.length?Hq(a,d,p.none()):wC(a,b,e,c)}return a},Qd=(a,b)=>{for(;b&&b!==a;){if(Sb(b)||va(b))return b;b=b.parentNode}return null},FC=["data-ephox-",
"data-mce-","data-alloy-","data-snooker-","_"],GC=K.each,Bk=a=>{const b=a.dom,c=new Set(a.serializer.getTempAttrs()),d=e=>Na(FC,f=>Ua(e,f,0))||c.has(e);return{compare:(e,f)=>{if(e.nodeName!==f.nodeName||e.nodeType!==f.nodeType)return!1;const g=k=>{const l={};GC(b.getAttribs(k),m=>{m=m.nodeName.toLowerCase();"style"===m||d(m)||(l[m]=b.getAttrib(k,m))});return l},h=(k,l)=>{for(const m in k)if(ha.call(k,m)){const n=l[m];if(db(n)||k[m]!==n)return!1;delete l[m]}for(const m in l)if(ha.call(l,m))return!1;
return!0};return!V(e)||!V(f)||h(g(e),g(f))&&h(b.parseStyle(b.getAttrib(e,"style")),b.parseStyle(b.getAttrib(f,"style")))?!hb(e)&&!hb(f):!1},isAttributeInternal:d}},HC=(a,b)=>{for(;a=a.walk();)b(a)},Jq=(a,b,c,d)=>{var e=c.name;for(let g=0,h=a.length;g<h;g++){var f=a[g];if(f.name===e){const k=d.nodes[e];k?k.nodes.push(c):d.nodes[e]={filter:f,nodes:[c]}}}if(c.attributes)for(let g=0,h=b.length;g<h;g++)a=b[g],e=a.name,e in c.attributes.map&&((f=d.attributes[e])?f.nodes.push(c):d.attributes[e]={filter:a,
nodes:[c]})},IC=(a,b,c)=>{const d={nodes:{},attributes:{}};c.firstChild&&HC(c,e=>{Jq(a,b,e,d)});return d},Kq=(a,b)=>{const c=(d,e)=>{Ea(d,f=>{const g=qb(f.nodes);G(f.filter.callbacks,h=>{for(let l=g.length-1;0<=l;l--){const m=g[l];var k;(k=!(e?void 0!==m.attr(f.filter.name):m.name===f.filter.name))||(k=m.parent,k=null===k||void 0===k);k&&g.splice(l,1)}0<g.length&&h(g,f.filter.name,b)})})};c(a.nodes,!1);c(a.attributes,!0)},Lq=(a,b,c,d)=>{d=void 0===d?{}:d;a=IC(a,b,c);Kq(a,d)},Ck=(a,b,c,d)=>{(a.pad_empty_with_br||
b.insert)&&c(d)?(a=new ib("br",1),b.insert&&a.attr("data-mce-bogus","1"),d.empty().append(a)):d.empty().append(new ib("#text",3)).value="\u00a0"},Mq=(a,b)=>{const c=null===a||void 0===a?void 0:a.firstChild;return!aa(c)&&c===a.lastChild&&c.name===b},Qf=(a,b,c,d)=>d.isEmpty(b,c,e=>{e=a.getElementRule(e.name);return!0===(null===e||void 0===e?void 0:e.paddEmpty)}),JC=a=>{let b;for(;a;a=a.parent){const c=a.attr("contenteditable");if("false"===c)break;else"true"===c&&(b=a)}return p.from(b)},Dk=(a,b,c)=>
{c=void 0===c?a.parent:c;if(b.getSpecialElements()[a.name])a.empty().remove();else{const d=a.children();for(const e of d)c&&!b.isValidChild(c.name,e.name)&&Dk(e,b,c);a.unwrap()}},Ek=(a,b,c,d)=>{d=void 0===d?pa:d;const e=b.getTextBlockElements(),f=b.getNonEmptyElements(),g=b.getWhitespaceElements(),h=K.makeMap("tr,td,th,tbody,thead,tfoot,table"),k=new Set;for(let n=0;n<a.length;n++){const t=a[n];var l=void 0;let y,w;if(!t.parent||k.has(t))continue;if(e[t.name]&&"li"===t.parent.name){for(l=t.next;l;){if(e[l.name])l.name=
"li",k.add(l),t.parent.insert(l,t.parent);else break;l=l.next}t.unwrap();continue}const q=[t];for(l=t.parent;l&&!b.isValidChild(l.name,t.name)&&l!==c&&!h[l.name];l=l.parent)q.push(l);if(l&&1<q.length)if(b.isValidChild(l.name,t.name)){q.reverse();y=q[0].clone();d(y);var m=y;for(let r=0;r<q.length-1;r++){b.isValidChild(m.name,q[r].name)&&0<r?(w=q[r].clone(),d(w),m.append(w)):w=m;for(m=q[r].firstChild;m&&m!==q[r+1];){const v=m.next;w.append(m);m=v}m=w}Qf(b,f,g,y)?l.insert(t,q[0],!0):(l.insert(y,q[0],
!0),l.insert(t,y));l=q[0];(Qf(b,f,g,l)||Mq(l,"br"))&&l.empty().remove()}else Dk(t,b);else t.parent&&("li"===t.name?(l=t.prev,!l||"ul"!==l.name&&"ol"!==l.name?(l=t.next)&&("ul"===l.name||"ol"===l.name)&&l.firstChild?l.insert(t,l.firstChild,!0):(l=new ib("ul",1),d(l),t.wrap(l)):l.append(t)):b.isValidChild(t.parent.name,"div")&&b.isValidChild("div",t.name)?(l=new ib("div",1),d(l),t.wrap(l)):Dk(t,b))}},Nq=(a,b,c)=>{if((c=void 0===c?b.parent:c)&&a.children[b.name]&&!a.isValidChild(c.name,b.name))return!0;
if(a=c&&"a"===b.name)a:{for(;c;){if("a"===c.name){a=!0;break a}c=c.parent}a=!1}return a?!0:!1},Oq=a=>{const b=C.fromRangeStart(a),c=C.fromRangeEnd(a),d=a.commonAncestorContainer;return Lb(!1,d,c).map(e=>{if(!oc(b,c,d)&&oc(b,e,d)){var f=b.container(),g=b.offset(),h=e.container();e=e.offset();const k=document.createRange();k.setStart(f,g);k.setEnd(h,e);return k}return a}).getOr(a)},Pq=a=>a.collapsed?a:Oq(a),KC=(a,b)=>{let c=b.firstChild;b=b.lastChild;c&&"meta"===c.name&&(c=c.next);b&&"mce_marker"===
b.attr("id")&&(b=b.prev);var d=b,e=a.getNonEmptyElements(),f;if(f=Ma(d)){if(!(e=d.isEmpty(e))){if(a=a.getBlockElements()[d.name])a=!aa(d.firstChild)&&d.firstChild===d.lastChild;a&&(d=d.firstChild,a="br"===d.name||"\u00a0"===d.value);e=a}f=e}f&&(b=null===b||void 0===b?void 0:b.prev);return c&&c===b?"ul"===c.name||"ol"===c.name:!1},LC=(a,b,c)=>{b=b.serialize(c);a=a.createFragment(b);var d,e;b=a.firstChild;c=a.lastChild;b&&"META"===b.nodeName&&(null===(d=b.parentNode)||void 0===d?void 0:d.removeChild(b));
c&&"mce_marker"===c.id&&(null===(e=c.parentNode)||void 0===e?void 0:e.removeChild(c));return a},MC=a=>{var b;return ka(null!==(b=null===a||void 0===a?void 0:a.childNodes)&&void 0!==b?b:[],c=>"LI"===c.nodeName)},NC=a=>{var b;if(b=0<a.length){b=a[a.length-1];var c;!(c=!b.firstChild)&&(c=!aa(null===b||void 0===b?void 0:b.firstChild)&&b.firstChild===b.lastChild)&&(b=b.firstChild,c="\u00a0"===b.data||Ga(b));b=c}return b?a.slice(0,-1):a},Fk=(a,b)=>(a=a.getParent(b,a.isBlock))&&"LI"===a.nodeName?a:null,
OC=(a,b)=>{const c=b.cloneRange();b=b.cloneRange();c.setStartBefore(a);b.setEndAfter(a);return[c.cloneContents(),b.cloneContents()]},PC=(a,b)=>{a=C.before(a);return(b=pc(b).next(a))?b.toRange():null},Qq=(a,b)=>{a=C.after(a);return(b=pc(b).prev(a))?b.toRange():null},QC=(a,b,c,d)=>{d=OC(a,d);const e=a.parentNode;e&&(e.insertBefore(d[0],a),K.each(b,f=>{e.insertBefore(f,a)}),e.insertBefore(d[1],a),e.removeChild(a));return Qq(b[b.length-1],c)},RC=(a,b,c)=>{const d=a.parentNode;d&&K.each(b,e=>{d.insertBefore(e,
a)});return PC(a,c)},SC=(a,b,c,d)=>{d.insertAfter(b.reverse(),a);return Qq(b[0],c)},TC=(a,b,c,d)=>{a=LC(b,a,d);const e=Fk(b,c.startContainer);a=NC(MC(a.firstChild));d=b.getRoot();const f=g=>{const h=C.fromRangeStart(c),k=pc(b.getRoot());g=1===g?k.prev(h):k.next(h);return(g=null===g||void 0===g?void 0:g.getNode())?Fk(b,g)!==e:!0};return e?f(1)?RC(e,a,d):f(2)?SC(e,a,d,b):QC(e,a,d,c):null},UC=["pre"],VC=(a,b,c,d)=>{var e;const f=b.firstChild;b=b.lastChild;b="bookmark"===b.attr("data-mce-type")?b.prev:
b;b=f===b;const g=-1<Ca.call(UC,f.name);return b&&g?(b="false"!==f.attr("contenteditable"),a=(null===(e=a.getParent(c,a.isBlock))||void 0===e?void 0:e.nodeName.toLowerCase())===f.name,c=p.from(Qd(d,c)).forall(Sb),b&&a&&c):!1},WC=(a,b,c)=>{var d;if("all"===c.getAttribute("data-mce-bogus"))null===(d=c.parentNode)||void 0===d?void 0:d.insertBefore(a.dom.createFragment(b),c);else{d=c.firstChild;const e=c.lastChild;!d||d===e&&"BR"===d.nodeName?a.dom.setHTML(c,b):a.selection.setContent(b,{no_events:!0})}},
XC=(a,b)=>{p.from(a.getParent(b,"td,th")).map(x.fromDom).each(Ex)},YC=(a,b)=>{const c=a.schema.getTextInlineElements(),d=a.dom;if(b){const e=a.getBody(),f=Bk(a);K.each(d.select("*[data-mce-fragment]"),g=>{if(!aa(c[g.nodeName.toLowerCase()])&&FB(d,g))for(let h=g.parentElement;!aa(h)&&h!==e&&!HB(d,g,h);h=h.parentElement)if(f.compare(h,g)){d.remove(g,!0);break}})}},ZC=a=>{for(;a=a.walk();)1===a.type&&a.attr("data-mce-fragment","1")},$C=a=>{K.each(a.getElementsByTagName("*"),b=>{b.removeAttribute("data-mce-fragment")})},
aD=(a,b)=>!aa(b)&&!a.schema.getVoidElements()[b.nodeName],bD=(a,b)=>{var c,d,e;const f=a.dom,g=a.selection;if(b){g.scrollIntoView(b);var h=Qd(a.getBody(),b);if(h&&"false"===f.getContentEditable(h))f.remove(b),g.select(h);else{h=f.createRng();var k=b.previousSibling;E(k)?(h.setStart(k,null!==(d=null===(c=k.nodeValue)||void 0===c?void 0:c.length)&&void 0!==d?d:0),c=b.nextSibling,E(c)&&(k.appendData(c.data),null===(e=c.parentNode)||void 0===e?void 0:e.removeChild(c))):(h.setStartBefore(b),h.setEndBefore(b));
e=f.getParent(b,f.isBlock);f.remove(b);if(e&&f.isEmpty(e)){ke(x.fromDom(e));h.setStart(e,0);h.setEnd(e,0);if(b=!ne(e)&&!e.getAttribute("data-mce-fragment")){var l=C.fromRangeStart(h);l=pc(a.getBody()).next(l);b=l=null===l||void 0===l?void 0:l.toRange()}b?(h=l,f.remove(e)):f.add(e,f.create("br",{"data-mce-bogus":"1"}))}g.setRng(h)}}},cD=a=>{var b=a.dom;const c=Pq(a.selection.getRng());a.selection.setRng(c);const d=b.getParent(c.startContainer,ne);Ma(d)?(b=b.getParent(c.endContainer,ne),b=d===b&&Lj(x.fromDom(d),
c)):b=!1;b?xk(a,c,x.fromDom(d)):c.startContainer===c.endContainer&&1===c.endOffset-c.startOffset&&E(c.startContainer.childNodes[c.startOffset])?c.deleteContents():a.getDoc().execCommand("Delete",!1)},dD=a=>{for(;a;a=a.walk())if("mce_marker"===a.attr("id"))return p.some(a);return p.none()},eD=a=>{G(qb(a.getBody().querySelectorAll("details")),b=>{b=ka(qb(b.children),c=>"SUMMARY"===c.nodeName);1<b.length&&G(b.slice(1),c=>{c=x.fromDom(c);he(c,"mce-accordion-summary");Tn(c,"p")})})},fD=(a,b,c)=>{var d,
e;const f=a.selection,g=a.dom,h=a.parser,k=c.merge,l=ed({validate:!0},a.schema);-1===b.indexOf("{$caret}")&&(b+="{$caret}");b=b.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>');var m=f.getRng();m=m.startContainer;var n=a.getBody();m===n&&f.isCollapsed()&&g.isBlock(n.firstChild)&&aD(a,n.firstChild)&&g.isEmpty(n.firstChild)&&(m=g.createRng(),m.setStart(n.firstChild,0),m.setEnd(n.firstChild,0),f.setRng(m));f.isCollapsed()||cD(a);n=f.getNode();m={context:n.nodeName.toLowerCase(),
data:c.data,insert:!0};const t=h.parse(b,m);if(!0===c.paste&&KC(a.schema,t)&&Fk(g,n))return(m=TC(l,g,f.getRng(),t))&&f.setRng(m),b;!0===c.paste&&VC(g,t,n,a.getBody())&&(null===(d=t.firstChild)||void 0===d?void 0:d.unwrap());ZC(t);if((b=t.lastChild)&&"mce_marker"===b.attr("id"))for(c=b,b=b.prev;b;b=b.walk(!0))if(3===b.type||!g.isBlock(b.name)){b.parent&&a.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(c,b,"br"===b.name);break}a._selectionOverrides.showBlockCaretContainer(n);if(m.invalid){a.selection.setContent('<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>');
c=f.getNode();var y;d=a.getBody();for(gf(c)?c=y=d:y=c;y&&y!==d;)c=y,y=y.parentNode;b=c===d?d.innerHTML:g.getOuterHTML(c);y=h.parse(b);n=dD(y);b=n.bind(JC).getOr(y);n.each(q=>q.replace(t));n=t.children();const w=null!==(e=t.parent)&&void 0!==e?e:y;t.unwrap();e=ka(n,q=>Nq(a.schema,q,w));Ek(e,a.schema,b);Lq(h.getNodeFilters(),h.getAttributeFilters(),y);b=l.serialize(y);c===d?g.setHTML(d,b):g.setOuterHTML(c,b)}else b=l.serialize(t),WC(a,b,n);YC(a,k);bD(a,g.get("mce_marker"));$C(a.getBody());XC(g,f.getStart());
eD(a);Ox(a.schema,a.getBody(),f.getStart());return b},Gk=a=>{Nd(a)&&ob(a.getBody()).each(b=>{const c=b.getNode();b=Cc(c)?ob(c).getOr(b):b;a.selection.setRng(b.toRange())})},gD=(a,b,c)=>p.from(a.getBody()).map(d=>{if(b instanceof ib){Lq(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),b);var e=ed({validate:!1},a.schema).serialize(b),f=Gg(x.fromDom(d))?e:K.trim(e);e=f;d=c.no_selection;a.dom.setHTML(a.getBody(),e);!0!==d&&Gk(a);return{content:b,html:f}}e=b;0===e.length||/^\s+$/.test(e)?("TABLE"===
d.nodeName?e='<tr><td><br data-mce-bogus="1"></td></tr>':/^(UL|OL)$/.test(d.nodeName)&&(e='<li><br data-mce-bogus="1"></li>'),f=vb(a),a.schema.isValidChild(d.nodeName.toLowerCase(),f.toLowerCase())?(e='<br data-mce-bogus="1">',e=a.dom.createHTML(f,uf(a),e)):e||(e='<br data-mce-bogus="1">'),d=e,f=c.no_selection,a.dom.setHTML(a.getBody(),d),!0!==f&&Gk(a),e={content:e,html:e}):("raw"!==c.format&&(e=ed({validate:!1},a.schema).serialize(a.parser.parse(e,{isRootContent:!0,insert:!0}))),e=f=Gg(x.fromDom(d))?
e:K.trim(e),d=c.no_selection,a.dom.setHTML(a.getBody(),e),!0!==d&&Gk(a),e={content:f,html:f});return e}).getOr({content:b,html:c.content instanceof ib?"":c.content}),hD=(a,b,c)=>Ac(a,b,c).isSome(),iD=(a,b)=>mx(a,b).isSome(),Rq=a=>ya(a)?a:za,Hk=(a,b,c)=>{const d=b(a),e=Rq(c);return d.orThunk(()=>{if(e(a))var f=p.none();else a:{f=a.dom;const g=Rq(e);for(;f.parentNode;){f=f.parentNode;const h=x.fromDom(f),k=b(h);if(k.isSome()){f=k;break a}else if(g(h))break}f=p.none()}return f})},Sq=(a,b,c)=>{if(c=a.formatter.get(c))for(let d=
0;d<c.length;d++){const e=c[d];if(ra(e,"selector")&&!1===e.inherit&&a.dom.is(b,e.selector))return!0}return!1},Ik=(a,b,c,d,e)=>{const f=a.dom.getRoot();if(b===f)return!1;b=a.dom.getParent(b,g=>Sq(a,g,c)?!0:g.parentNode===f||!!qc(a,g,c,d,!0));return!!qc(a,b,c,d,e)},uh=(a,b,c)=>ra(c,"inline")&&dd(b,c.inline)||ra(c,"block")&&dd(b,c.block)?!0:ra(c,"selector")?V(b)&&a.is(b,c.selector):!1,Tq=(a,b,c,d,e,f)=>{const g=c[d],h="attributes"===d;if(ya(c.onmatch))return c.onmatch(b,c,d);if(g)if(void 0===g.length)for(const k in g){if(ha.call(g,
k)){d=h?a.getAttrib(b,k):dh(a,b,k);const l=cd(g[k],f),m=null===d||void 0===d||!(0<d.length);if(!m||null!==l&&void 0!==l)if(e&&m&&!c.exact||(!e||c.exact)&&!dd(d,Rj(l,k)))return!1}}else for(c=0;c<g.length&&(h?!a.getAttrib(b,g[c]):!dh(a,b,g[c]));c++);return!0},qc=(a,b,c,d,e)=>{var f=a.formatter.get(c);const g=a.dom;if(f&&V(b))for(let h=0;h<f.length;h++)if(c=f[h],uh(a.dom,b,c)&&Tq(g,b,c,"attributes",e,d)&&Tq(g,b,c,"styles",e,d)){if(e=c.classes)for(f=0;f<e.length;f++)if(!a.dom.hasClass(b,cd(e[f],d)))return;
return c}},Jk=(a,b,c,d,e)=>{if(d)return Ik(a,d,b,c,e);d=a.selection.getNode();if(Ik(a,d,b,c,e))return!0;const f=a.selection.getStart();return f!==d&&Ik(a,f,b,c,e)?!0:!1},jD=(a,b,c)=>{const d=[],e={},f=a.selection.getStart();a.dom.getParent(f,g=>{for(let h=0;h<b.length;h++){const k=b[h];!e[k]&&qc(a,g,k,c)&&(e[k]=!0,d.push(k))}},a.dom.getRoot());return d},kD=(a,b)=>{const c=d=>{var e=x.fromDom(a.getBody());return d.dom===e.dom};return p.from(a.selection.getStart(!0)).bind(d=>Hk(x.fromDom(d),e=>be(b,
f=>qc(a,e.dom,f)?p.some(f):p.none()),c)).getOrNull()},lD=(a,b,c)=>Db(c,(d,e)=>{const f=tA(a,e);return a.formatter.matchNode(b,e,{},f)?d.concat([e]):d},[]),Uq=a=>{const b=[];for(;a;){if(E(a)&&"\ufeff"!==a.data||1<a.childNodes.length)return[];V(a)&&b.push(a);a=a.firstChild}return b},Vq=a=>{if(a){a=new Ta(a,a);for(let b=a.current();b;b=a.next())if(E(b))return b}return null},Kk=a=>{const b=x.fromTag("span");Mc(b,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"});a&&(a=x.fromText("\ufeff"),
b.dom.appendChild(a.dom));return b},Lk=(a,b,c)=>{c=void 0===c?!0:c;const d=a.dom,e=a.selection;if(0<Uq(b).length)Od(a,!1,x.fromDom(b),c);else{a=e.getRng();c=d.getParent(b,d.isBlock);const g=a.startContainer,h=a.startOffset,k=a.endContainer,l=a.endOffset;var f;(f=Vq(b))&&"\ufeff"===f.data.charAt(0)&&f.deleteData(0,1);d.remove(b,!0);g===f&&0<h&&a.setStart(f,h-1);k===f&&0<l&&a.setEnd(f,l-1);c&&d.isEmpty(c)&&Dc(x.fromDom(c));e.setRng(a)}},Mk=(a,b,c)=>{c=void 0===c?!0:c;const d=a.dom,e=a.selection;if(b)Lk(a,
b,c);else if(b=Jd(a.getBody(),e.getStart()),!b)for(;b=d.get("_mce_caret");)Lk(a,b,c)},Wq=(a,b)=>{a.appendChild(b);return b},Xq=(a,b)=>{var c;a=Se(a,(d,e)=>Wq(d,e.cloneNode(!1)),b);b=null!==(c=a.ownerDocument)&&void 0!==c?c:document;return Wq(a,b.createTextNode("\ufeff"))},mD=(a,b,c,d,e,f)=>{const g=a.formatter,h=a.dom;var k=ka(rb(g.get()),l=>l!==d&&!eb(l,"removeformat"));k=lD(a,c,k);return 0<ka(k,l=>!uA(a,l,d)).length?(c=c.cloneNode(!1),h.add(b,c),g.remove(d,e,c,f),h.remove(c),p.some(c)):p.none()},
nD=(a,b,c)=>{const d=a.selection;var e=a.formatter.get(b);if(e){var f=d.getRng(),g=f.startOffset,h=f.startContainer.nodeValue;var k=Jd(a.getBody(),d.getStart());var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;h&&0<g&&g<h.length&&l.test(h.charAt(g))&&l.test(h.charAt(g-1))?(k=d.getBookmark(),f.collapse(!0),f=Ld(a.dom,f,e),f=kh(f),a.formatter.apply(b,c,f),d.moveToBookmark(k)):(e=k?Vq(k):null,k&&"\ufeff"===(null===e||void 0===e?void 0:e.data)||(k=a.getDoc(),e=Kk(!0).dom,k=k.importNode(e,!0),e=k.firstChild,f.insertNode(k),
g=1),a.formatter.apply(b,c,k),d.setCursorLocation(e,g))}},oD=(a,b,c,d)=>{var e=a.dom;const f=a.selection;var g=!1,h=a.formatter.get(b);if(h){var k=f.getRng(),l=k.startContainer,m=k.startOffset,n=l;E(l)&&(m!==l.data.length&&(g=!0),n=n.parentNode);l=[];for(var t;n;){if(qc(a,n,b,c,d)){t=n;break}n.nextSibling&&(g=!0);l.push(n);n=n.parentNode}if(t)if(g)t=f.getBookmark(),k.collapse(!0),e=Ld(e,k,h,!0),e=kh(e),a.formatter.remove(b,c,e,d),f.moveToBookmark(t);else{h=Jd(a.getBody(),t);g=k=Kk(!1).dom;n=null!==
h&&void 0!==h?h:t;var y,w;m=a.dom;var q=m.getParent(n,A(Qj,a.schema));if(q&&m.isEmpty(q))null===(y=n.parentNode)||void 0===y?void 0:y.replaceChild(g,n);else{var r=x.fromDom(n);y=Ab("br",r);q=[];for(r=r.dom;r;)q.push(x.fromDom(r)),r=r.lastChild;q=ka(q.slice(-1),Ad);y.length===q.length&&G(q,Ja);m.isEmpty(n)?null===(w=n.parentNode)||void 0===w?void 0:w.replaceChild(g,n):m.insertAfter(g,n)}b=mD(a,k,t,b,c,d);b=Xq(l.concat(b.toArray()),k);h&&Lk(a,h,!1);f.setCursorLocation(b,1);e.isEmpty(t)&&e.remove(t)}}},
pD=a=>{a.on("mouseup keydown",b=>{b=b.keyCode;var c=a.selection.getRng().endContainer;c=E(c)&&Hi(c.data,"\u00a0");const d=a.selection,e=a.getBody();Mk(a,null,c);8!==b&&46!==b||!d.isCollapsed()||"\ufeff"!==d.getStart().innerHTML||Mk(a,Jd(e,d.getStart()));37!==b&&39!==b||Mk(a,Jd(e,d.getStart()))})},Yq=a=>{const b=Kk(!1);a=Xq(a,b.dom);return{caretContainer:b,caretPosition:C(a,0)}},Zq=(a,b)=>{const {caretContainer:c,caretPosition:d}=Yq(b);Bb(x.fromDom(a),c);Ja(x.fromDom(a));return d},$q=(a,b)=>{a=a.schema.getTextInlineElements();
var c=b.dom.nodeName.toLowerCase();return ha.call(a,c)&&!Ub(b.dom)&&!Rc(b.dom)},ar=a=>Ub(a.dom)&&0<Uq(a.dom).length,Rf={},br=ac(["pre"]),qD=(a,b)=>{ha.call(Rf,a)&&G(Rf[a],c=>{c(b)})};((a,b)=>{Rf[a]||(Rf[a]=[]);Rf[a].push(b)})("pre",a=>{var b=c=>d=>{d=d.previousSibling;return br(d)&&-1<Ca.call(c,d)};a.selection.getRng().collapsed||(a=a.selection.getSelectedBlocks(),b=ka(ka(a,br),b(a)),G(b,c=>{var d=c.previousSibling;c=x.fromDom(c);const e=Jb(c).dom;Ja(c);xd(x.fromDom(d),[x.fromTag("br",e),x.fromTag("br",
e),...bb(c)])}))});const cr=["fontWeight","fontStyle","color","fontSize","fontFamily"],rD=a=>jb(a.styles)&&Na(rb(a.styles),b=>-1<Ca.call(cr,b)),sD=a=>Oa(a,b=>ra(b,"inline")&&"span"===b.inline&&rD(b)),dr=(a,b)=>{a=a.get(b);return Sa(a)?sD(a):p.none()},er=(a,b)=>!1===mb(b,C.fromRangeEnd(a)).exists(c=>!Ga(c.getNode())||mb(b,c).isSome()),fr=a=>b=>xx(b)&&a.isEditable(b),tD=a=>{var b=a.getSelectedBlocks();const c=a.getRng();if(a.isCollapsed())return[];if(1===b.length)return nb(b[0],C.fromRangeStart(c)).isNone()&&
er(c,b[0])?b:[];a=$a(b,0).filter(e=>nb(e,C.fromRangeStart(c)).isNone()).toArray();const d=$a(b,b.length-1).filter(e=>er(c,e)).toArray();b=b.slice(1,-1);return a.concat(b).concat(d)},uD=a=>ka(tD(a),fr(a.dom)),gr=a=>ka(a.getSelectedBlocks(),fr(a.dom)),Nk=K.each,Ok=a=>V(a)&&!hb(a)&&!Ub(a)&&!Rc(a),hr=(a,b)=>{for(let c=a;c&&!(E(c)&&0<c.data.length);c=c[b])if(V(c)&&!hb(c))return c;return a},ir=(a,b,c)=>{var d=Bk(a);const e=V(b)&&!0===b.isContentEditable,f=V(c)&&!0===c.isContentEditable;if(e&&f){const g=
hr(b,"previousSibling");b=hr(c,"nextSibling");if(d.compare(g,b)){for(c=g.nextSibling;c&&c!==b;)d=c,c=c.nextSibling,g.appendChild(d);a.dom.remove(b);K.each(K.grep(b.childNodes),h=>{g.appendChild(h)});return g}}return c},jr=(a,b,c,d)=>{var e;d&&!1!==b.merge_siblings&&(b=null!==(e=ir(a,cp(d),d))&&void 0!==e?e:d,ir(a,b,cp(b,!0)))},vD=(a,b,c)=>{b.clear_child_styles&&Nk(a.select(b.links?"*:not(a)":"*",c),d=>{Ok(d)&&!0===d.isContentEditable&&Nk(b.styles,(e,f)=>{a.setStyle(d,f,"")})})},Pk=(a,b,c)=>{Nk(a.childNodes,
d=>{Ok(d)&&(b(d)&&c(d),d.hasChildNodes()&&Pk(d,b,c))})},kr=(a,b)=>c=>!(!c||!dh(a,c,b)),lr=(a,b,c)=>d=>{a.setStyle(d,b,c);""===d.getAttribute("style")&&d.removeAttribute("style");"SPAN"===d.nodeName&&0===a.getAttribs(d).length&&a.remove(d,!0)},ze=nc.generate([{keep:[]},{rename:["name"]},{removed:[]}]),wD=/^(src|href|style)$/,Qk=K.each,mr=(a,b,c)=>a.isChildOf(b,c)&&b!==c&&!a.isBlock(c),nr=(a,b,c)=>{let d=b[c?"startContainer":"endContainer"];b=b[c?"startOffset":"endOffset"];if(V(d)){const e=d.childNodes.length-
1;!c&&b&&b--;d=d.childNodes[b>e?e:b]}E(d)&&c&&b>=d.data.length&&(d=(new Ta(d,a.getBody())).next()||d);E(d)&&!c&&0===b&&(d=(new Ta(d,a.getBody())).prev()||d);return d},or=(a,b)=>{b=b?"firstChild":"lastChild";const c=a[b];return/^(TR|TH|TD)$/.test(a.nodeName)&&c?"TR"===a.nodeName?c[b]||c:c:a},Rk=(a,b,c,d)=>{var e;a=a.create(c,d);null===(e=b.parentNode)||void 0===e?void 0:e.insertBefore(a,b);a.appendChild(b);return a},pr=(a,b,c,d,e)=>{b=x.fromDom(b);a=x.fromDom(a.create(d,e));d=c?zg(b,ie):ae(zg(b,Nc));
xd(a,d);c?(Bb(b,a),jn(a,b)):(Qc(b,a),a.dom.appendChild(b.dom));return a.dom},qr=(a,b,c)=>{const d=b.parentNode;let e;const f=a.dom,g=vb(a);ra(c,"block")&&d===f.getRoot()&&(c.list_block&&dd(b,c.list_block)||G(qb(b.childNodes),h=>{var k=h.nodeName.toLowerCase();a.schema.isValidChild(g,k)?e?e.appendChild(h):(e=Rk(f,h,g),f.setAttribs(e,uf(a))):e=null}));vA(c)&&!dd(c.inline,b)||f.remove(b,!0)},rr=(a,b,c)=>Yb(a)?{name:b,value:null}:{name:a,value:cd(b,c)},sr=(a,b)=>{""===a.getAttrib(b,"style")&&(b.removeAttribute("style"),
b.removeAttribute("data-mce-style"))},tr=(a,b,c,d,e)=>{let f=!1;Qk(c.styles,(g,h)=>{const {name:k,value:l}=rr(h,g,d);g=Rj(l,k);(c.remove_similar||zb(l)||!V(e)||dd(dh(a,e,k),g))&&a.setStyle(b,k,"");f=!0});f&&sr(a,b)},xD=(a,b,c)=>{"removeformat"===b?G(gr(a.selection),d=>{G(cr,e=>a.dom.setStyle(d,e,""));sr(a.dom,d)}):dr(a.formatter,b).each(d=>{G(gr(a.selection),e=>tr(a.dom,e,d,c,null))})},ur=(a,b,c,d,e)=>{const f=a.dom,g=Bk(a);var h=a.schema;if(ra(b,"inline")&&fj(h,b.inline)&&Cd(h,d)&&d.parentElement===
a.getBody())return qr(a,d,b),ze.removed();if(!b.ceFalseOverride&&d&&"false"===f.getContentEditableParent(d)||d&&!uh(f,d,b)&&(!b.links||"A"!==d.nodeName))return ze.keep();const k=b.preserve_attributes;if(ra(b,"inline")&&"all"===b.remove&&Sa(k)&&(h=ka(f.getAttribs(d),l=>{l=l.name.toLowerCase();return-1<Ca.call(k,l)}),f.removeAllAttribs(d),G(h,l=>f.setAttrib(d,l.name,l.value)),0<h.length))return ze.rename("span");if("all"!==b.remove){tr(f,d,b,c,e);Qk(b.attributes,(l,m)=>{const {name:n,value:t}=rr(m,
l,c);if(b.remove_similar||zb(t)||!V(e)||dd(f.getAttrib(e,n),t)){if("class"===n&&(l=f.getAttrib(d,n))){let y="";G(l.split(/\s+/),w=>{/mce\-\w+/.test(w)&&(y+=(y?" ":"")+w)});if(y){f.setAttrib(d,n,y);return}}wD.test(n)&&d.removeAttribute("data-mce-"+n);"style"===n&&ac(["li"])(d)&&"none"===f.getStyle(d,"list-style-type")?(d.removeAttribute(n),f.setStyle(d,"list-style-type","none")):("class"===n&&d.removeAttribute("className"),d.removeAttribute(n))}});Qk(b.classes,l=>{l=cd(l,c);V(e)&&!f.hasClass(e,l)||
f.removeClass(d,l)});h=f.getAttribs(d);for(let l=0;l<h.length;l++)if(!g.isAttributeInternal(h[l].nodeName))return ze.keep()}return"none"!==b.remove?(qr(a,d,b),ze.removed()):ze.keep()},yD=(a,b,c,d,e)=>{let f;b.parentNode&&G(fp(a.dom,b.parentNode).reverse(),g=>{if(!f&&V(g)&&"_start"!==g.id&&"_end"!==g.id){const h=qc(a,g,c,d,e);h&&!1!==h.split&&(f=g)}});return f},zD=(a,b,c,d)=>ur(a,b,c,d,d).fold(R(d),e=>{a.dom.createFragment().appendChild(d);return a.dom.rename(d,e)},R(null)),vr=(a,b,c,d,e)=>{const f=
a.formatter.get(b),g=f[0],h=a.dom;var k=a.selection;const l=w=>{const q=yD(a,w,b,c,e);var r=w,v,z;let P,N;const Y=a.dom;if(q){const O=q.parentNode;for(let L=r.parentNode;L&&L!==O;L=L.parentNode){let U=Y.clone(L,!1);for(let ja=0;ja<f.length&&(U=zD(a,f[ja],c,U),null!==U);ja++);U&&(P&&U.appendChild(P),N||(N=U),P=U)}g.mixed&&Y.isBlock(q)||(r=null!==(v=Y.split(q,r))&&void 0!==v?v:r);P&&N&&(null===(z=w.parentNode)||void 0===z?void 0:z.insertBefore(P,w),N.appendChild(w),ra(g,"inline")&&jr(a,g,c,P))}return r},
m=w=>Na(f,q=>Sf(a,q,c,w,w)),n=w=>{const q=qb(w.childNodes);var r=m(w)||Na(f,z=>uh(h,w,z));const v=w.parentNode;r||aa(v)||!Tj(g)||m(v);if(g.deep&&q.length)for(r=0;r<q.length;r++)n(q[r]);G(["underline","line-through","overline"],z=>{V(w)&&a.dom.getStyle(w,"text-decoration")===z&&w.parentNode&&ep(h,w.parentNode)===z&&Sf(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:z}},void 0,w)})},t=w=>{const q=h.get(w?"_start":"_end");if(q){let v=q[w?"firstChild":"lastChild"];var r=v;hb(r)&&V(r)&&("_start"===
r.id||"_end"===r.id)&&(v=v[w?"firstChild":"lastChild"]);E(v)&&0===v.data.length&&(v=w?q.previousSibling||q.nextSibling:q.nextSibling||q.previousSibling);h.remove(q,!0);return v}return null},y=w=>{let q,r=Ld(h,w,f,w.collapsed);if(g.split){r=kh(r);w=nr(a,r,!0);q=nr(a,r);if(w!==q){w=or(w,!0);q=or(q,!1);if(mr(h,w,q)){w=p.from(w.firstChild).getOr(w);l(pr(h,w,!0,"span",{id:"_start","data-mce-type":"bookmark"}));t(!0);return}if(mr(h,q,w)){w=p.from(q.lastChild).getOr(q);l(pr(h,w,!1,"span",{id:"_end","data-mce-type":"bookmark"}));
t(!1);return}w=Rk(h,w,"span",{id:"_start","data-mce-type":"bookmark"});q=Rk(h,q,"span",{id:"_end","data-mce-type":"bookmark"});const v=h.createRng();v.setStartAfter(w);v.setEndBefore(q);Gf(h,v,z=>{G(z,P=>{hb(P)||hb(P.parentNode)||l(P)})});l(w);l(q);w=t(!0);q=t()}else w=q=l(w);r.startContainer=w.parentNode?w.parentNode:w;r.startOffset=h.nodeIndex(w);r.endContainer=q.parentNode?q.parentNode:q;r.endOffset=h.nodeIndex(q)+1}Gf(h,r,v=>{G(v,n)})};d?Ff(d)?(k=h.createRng(),k.setStartBefore(d),k.setEndAfter(d),
y(k)):y(d):(k.isCollapsed()&&ra(g,"inline")&&!we(a).length?oD(a,b,c,e):(bp(a,()=>Nj(a,y),w=>ra(g,"inline")&&Jk(a,b,c,w)),a.nodeChanged()),xD(a,b,c));a.dispatch("FormatRemove",{format:b,node:d,vars:c})},Sf=(a,b,c,d,e)=>ur(a,b,c,d,e).fold(za,f=>{a.dom.rename(d,f);return!0},Qa),wr=K.each,AD=(a,b,c,d)=>{c=e=>{if(V(e)&&V(e.parentNode)&&!0===e.isContentEditable){const f=ep(a,e.parentNode);a.getStyle(e,"color")&&f?a.setStyle(e,"text-decoration",f):a.getStyle(e,"text-decoration")===f&&a.setStyle(e,"text-decoration",
null)}};b.styles&&(b.styles.color||b.styles.textDecoration)&&(K.walk(d,c,"childNodes"),c(d))},BD=(a,b,c,d)=>{if(b.styles&&b.styles.backgroundColor){const e=kr(a,"fontSize");Pk(d,f=>e(f)&&!0===f.isContentEditable,lr(a,"backgroundColor",cd(b.styles.backgroundColor,c)))}},CD=(a,b,c,d)=>{if(ra(b,"inline")&&("sub"===b.inline||"sup"===b.inline)){const e=kr(a,"fontSize");Pk(d,f=>e(f)&&!0===f.isContentEditable,lr(a,"fontSize",""));b=ka(a.select("sup"===b.inline?"sub":"sup",d),qA);a.remove(b,!0)}},DD=(a,b,
c,d)=>{wr(b,e=>{ra(e,"inline")&&wr(a.dom.select(e.inline,d),f=>{Ok(f)&&Sf(a,e,c,f,e.exact?f:null)});vD(a.dom,e,d)})},ED=(a,b,c,d,e)=>{const f=e.parentNode;qc(a,f,c,d)&&Sf(a,b,d,e)||b.merge_with_parents&&f&&a.dom.getParent(f,g=>qc(a,g,c,d)?(Sf(a,b,d,e),!0):!1)},vh=K.each,FD=(a,b,c,d)=>mz(a)&&ra(b,"inline")&&c.parentNode?(a=In(a.schema),b=iD(x.fromDom(c),e=>Ub(e.dom)),ra(a,d)&&Pa(x.fromDom(c.parentNode),!1)&&!b):!1,xr=(a,b,c,d)=>{vh(c.styles,(e,f)=>{a.setStyle(b,f,cd(e,d))});c.styles&&(c=a.getAttrib(b,
"style"))&&a.setAttrib(b,"data-mce-style",c)},yr=(a,b,c,d)=>{const e=a.formatter.get(b),f=e[0],g=!d&&a.selection.isCollapsed(),h=a.dom;var k=a.selection;const l=(w,q)=>{q=void 0===q?f:q;if(ya(q.onformat))q.onformat(w,q,c,d);xr(h,w,q,c);vh(q.attributes,(r,v)=>{h.setAttrib(w,v,cd(r,c))});vh(q.classes,r=>{r=cd(r,c);h.hasClass(w,r)||h.addClass(w,r)})},m=(w,q)=>{let r=!1;vh(w,v=>ra(v,"selector")?"false"===h.getContentEditable(q)&&!v.ceFalseOverride||!aa(v.collapsed)&&v.collapsed!==g?!0:h.is(q,v.selector)&&
!Ub(q)?(l(q,v),r=!0,!1):!0:!1);return r},n=w=>fa(w)?(w=h.create(w),l(w),w):null,t=(w,q,r)=>{const v=[];let z=!0;const P=f.inline||f.block,N=n(P);Gf(w,q,Y=>{let O;const L=U=>{let ja=!1,qa=z,Ha=!1;const Ra=U.parentNode;var ab=Ra.nodeName.toLowerCase(),ca=w.getContentEditable(U);aa(ca)||(qa=z,z="true"===ca,ja=!0,Ha=dp(a,U));ca=z&&!ja;if(Ga(U)&&!FD(a,f,U,ab))O=null,ra(f,"block")&&w.remove(U);else if(ra(f,"block")&&!0===f.wrapper&&qc(a,U,b,c))O=null;else{var oa=ra(f,"block")&&!0!==f.wrapper&&Qj(a.schema,
U)&&a.schema.isValidChild(ab,P);if(ca&&oa)U=w.rename(U,P),l(U),v.push(U),O=null;else{if(ra(f,"selector")&&((oa=m(e,U))||aa(Ra)||!Tj(f)||(oa=m(e,Ra)),!ra(f,"inline")||oa)){O=null;return}if(oa=!aa(N)){oa=Ha;var M=U.nodeName.toLowerCase();ab=a.schema.isValidChild(P,M)&&a.schema.isValidChild(ab,P);M=!r&&E(U)&&"\ufeff"===U.data;const Q=Ub(U),Z=!ra(f,"inline")||!w.isBlock(U);oa=(ca||oa)&&ab&&!M&&!Q&&Z}oa?(O||(O=w.clone(N,!1),Ra.insertBefore(O,U),v.push(O)),Ha&&ja&&(z=qa),O.appendChild(U)):(O=null,G(qb(U.childNodes),
L),ja&&(z=qa),O=null)}}};G(Y,L)});!0===f.links&&G(v,Y=>{const O=L=>{"A"===L.nodeName&&l(L,f);G(qb(L.childNodes),O)};O(Y)});G(v,Y=>{const O=U=>Te(U.childNodes,Oj,za).filter(ja=>"false"!==w.getContentEditable(ja)&&uh(w,ja,f)).map(ja=>{const qa=w.clone(ja,!1);l(qa);w.replace(qa,U,!0);w.remove(ja,!0);return qa}).getOr(U),L=(U=>{let ja=0;G(U.childNodes,qa=>{Ma(qa)&&E(qa)&&0===qa.length||hb(qa)||ja++});return ja})(Y);if((1<v.length||!w.isBlock(Y))&&0===L)w.remove(Y,!0);else if(ra(f,"inline")||ra(f,"block")&&
f.wrapper)f.exact||1!==L||(Y=O(Y)),DD(a,e,c,Y),ED(a,f,b,c,Y),BD(w,f,c,Y),AD(w,f,c,Y),CD(w,f,c,Y),jr(a,f,c,Y)})},y=Ff(d)?d:k.getNode();"false"!==h.getContentEditable(y)||dp(a,y)?f&&(d?Ff(d)?m(e,d)||(k=h.createRng(),k.setStartBefore(d),k.setEndAfter(d),t(h,Ld(h,k,e),!0)):t(h,d,!0):(g&&ra(f,"inline")&&!we(a).length?nD(a,b,c):(k.setRng(Pq(k.getRng())),bp(a,()=>{Nj(a,(w,q)=>{w=q?w:Ld(h,w,e);t(h,w,!1)})},Qa),a.nodeChanged()),dr(a.formatter,b).each(w=>{G(uD(a.selection),q=>xr(h,q,w,c))})),qD(b,a)):(d=y,
m(e,d));a.dispatch("FormatApply",{format:b,node:d,vars:c})},GD=(a,b)=>{a.set({});b.on("NodeChange",c=>{zr(b,c.element,a.get())});b.on("FormatApply FormatRemove",c=>{c=p.from(c.node).map(d=>Ff(d)?d:d.startContainer).bind(d=>V(d)?p.some(d):p.from(d.parentElement)).getOrThunk(()=>b.selection.getStart());zr(b,c,a.get())})},Ar=(a,b,c,d,e)=>Te(b,f=>{f=a.formatter.matchNode(f,c,null!==e&&void 0!==e?e:{},d);return!db(f)},f=>Sq(a,f,c)?!0:d?!1:!aa(a.formatter.matchNode(f,c,e,!0))),Br=(a,b)=>{b=null!==b&&void 0!==
b?b:a.selection.getStart();return ka(fp(a.dom,b),c=>V(c)&&!Rc(c))},zr=(a,b,c)=>{const d=Br(a,b);Ea(c,(e,f)=>{const g=h=>{const k=Ar(a,d,f,h.similar,ha.call(h,"vars")?h.vars:void 0),l=k.isSome();if(h.state.get()!==l){h.state.set(l);const m=k.getOr(b);ha.call(h,"vars")?h.callback(l,{node:m,format:f,parents:d}):G(h.callbacks,n=>n(l,{node:m,format:f,parents:d}))}};G([e.withSimilar,e.withoutSimilar],g);G(e.withVars,g)})},HD=(a,b,c,d,e,f)=>{const g=b.get();G(c.split(","),h=>{var k=Fa(g,h).getOrThunk(()=>
{const m={withSimilar:{state:Wa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wa(!1),similar:!1,callbacks:[]},withVars:[]};return g[h]=m});const l=()=>{const m=Br(a);return Ar(a,m,h,e,f).isSome()};db(f)?(k=e?k.withSimilar:k.withoutSimilar,k.callbacks.push(d),1===k.callbacks.length&&k.state.set(l())):k.withVars.push({state:Wa(l()),similar:e,vars:f,callback:d})});b.set(g)},ID=(a,b,c)=>{const d=a.get();G(b.split(","),e=>Fa(d,e).each(f=>{d[e]={withSimilar:Object.assign({},f.withSimilar,{callbacks:ka(f.withSimilar.callbacks,
g=>g!==c)}),withoutSimilar:Object.assign({},f.withoutSimilar,{callbacks:ka(f.withoutSimilar.callbacks,g=>g!==c)}),withVars:ka(f.withVars,g=>g.callback!==c)}}));a.set(d)},JD=(a,b,c,d,e,f)=>{HD(a,b,c,d,e,f);return{unbind:()=>ID(b,c,d)}},Cr=K.explode,Dr=()=>{const a={};return{addFilter:(b,c)=>{G(Cr(b),d=>{ha.call(a,d)||(a[d]={name:d,callbacks:[]});a[d].callbacks.push(c)})},getFilters:()=>Xe(a,Ka),removeFilter:(b,c)=>{G(Cr(b),d=>{if(ha.call(a,d))if(aa(c))delete a[d];else{const e=a[d],f=ka(e.callbacks,
g=>g!==c);0<f.length?e.callbacks=f:delete a[d]}})}}},KD=(a,b)=>{G(b,c=>{a.attr(c,null)})},LD=(a,b,c)=>{a.addNodeFilter("font",d=>{G(d,e=>{const f=b.parse(e.attr("style")),g=e.attr("color"),h=e.attr("face"),k=e.attr("size");g&&(f.color=g);h&&(f["font-family"]=h);k&&$e(k).each(l=>{f["font-size"]=c[l-1]});e.name="span";e.attr("style",b.serialize(f));KD(e,["color","face","size"])})})},MD=(a,b,c)=>{a.addNodeFilter("strike",d=>{const e="html4"!==b.type;G(d,f=>{if(e)f.name="s";else{const g=c.parse(f.attr("style"));
g["text-decoration"]="line-through";f.name="span";f.attr("style",c.serialize(g))}})})},ND=(a,b,c)=>{var d;const e=mj();b.convert_fonts_to_spans&&LD(a,e,K.explode(null!==(d=b.font_size_legacy_values)&&void 0!==d?d:""));MD(a,c,e)},Er=(a,b,c)=>{b.addNodeFilter("br",(d,e,f)=>{const g=K.extend({},c.getBlockElements());e=c.getNonEmptyElements();const h=c.getWhitespaceElements();g.body=1;const k=t=>t.name in g||gj(c,t);for(let t=0,y=d.length;t<y;t++){var l=d[t],m=l.parent;if(m&&k(m)&&l===m.lastChild){for(var n=
l.prev;n;){const w=n.name;if("span"!==w||"bookmark"!==n.attr("data-mce-type")){"br"===w&&(l=null);break}n=n.prev}l&&(l.remove(),Qf(c,e,h,m)&&(l=c.getElementRule(m.name))&&(l.removeEmpty?m.remove():l.paddEmpty&&Ck(a,f,k,m)))}else{for(n=l;m&&m.firstChild===n&&m.lastChild===n;){n=m;if(g[m.name])break;m=m.parent}n===m&&(m=new ib("#text",3),m.value="\u00a0",l.replace(m))}}})},OD=a=>fetch(a).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${a} to Blob. Resource might not exist or is inaccessible.`,
uriType:"blob"})),Sk=a=>{const [b,...c]=a.split(",");var d=c.join(",");if(a=/data:([^/]+\/[^;]+)(;.+)?/.exec(b)){const e=";base64"===a[2];d=e?(d=/([a-z0-9+\/=\s]+)/i.exec(d))?d[1]:"":decodeURIComponent(d);return p.some({type:a[1],data:d,base64Encoded:e})}return p.none()},Fr=(a,b,c)=>{let d=b;if(void 0===c||c)try{d=atob(b)}catch(e){return p.none()}b=new Uint8Array(d.length);for(c=0;c<b.length;c++)b[c]=d.charCodeAt(c);return p.some(new Blob([b],{type:a}))},PD=a=>new Promise((b,c)=>{Sk(a).bind(d=>{var {type:e,
data:f,base64Encoded:g}=d;return Fr(e,f,g)}).fold(()=>c("Invalid data URI"),b)}),QD=a=>Ua(a,"blob:",0)?OD(a):Ua(a,"data:",0)?PD(a):Promise.reject("Unknown URI format"),Gr=a=>new Promise((b,c)=>{const d=new FileReader;d.onloadend=()=>{b(d.result)};d.onerror=()=>{var e;c(null===(e=d.error)||void 0===e?void 0:e.message)};d.readAsDataURL(a)});let RD=0;const Hr=(a,b,c)=>Sk(a).bind(d=>{var {data:e,type:f,base64Encoded:g}=d;if(b&&!g)return p.none();d=g?e:btoa(e);return c(d,f)}),Ir=(a,b,c)=>{b=a.create("blobid"+
RD++,b,c);a.add(b);return b},Jr=(a,b,c)=>Hr(b,void 0===c?!1:c,(d,e)=>p.from(a.getByData(d,e)).orThunk(()=>Fr(e,d).map(f=>Ir(a,f,d)))),SD=(a,b)=>{const c=()=>Promise.reject("Invalid data URI");if(Ua(b,"blob:",0)){const d=a.getByUri(b);return aa(d)?QD(b).then(e=>Gr(e).then(f=>Hr(f,!1,g=>p.some(Ir(a,e,g))).getOrThunk(c))):Promise.resolve(d)}return Ua(b,"data:",0)?Jr(a,b).fold(c,d=>Promise.resolve(d)):Promise.reject("Unknown image data format")},TD=a=>a.attr("src")===ua.transparentSrc||!aa(a.attr("data-mce-placeholder")),
UD=(a,b)=>{const {blob_cache:c}=b;if(c){const d=e=>{const f=e.attr("src");TD(e)||Ma(e.attr("data-mce-bogus"))||null===f||void 0===f||Jr(c,f,!0).each(g=>{e.attr("src",g.blobUri())})};a.addAttributeFilter("src",e=>G(e,d))}},VD=(a,b)=>{const c=a.schema;b.remove_trailing_brs&&Er(b,a,c);a.addAttributeFilter("href",e=>{let f=e.length;const g=k=>k.split(" ").filter(l=>0<l.length).concat(["noopener"]).sort().join(" "),h=k=>{k=k?K.trim(k):"";return/\b(noopener)\b/g.test(k)?k:g(k)};if(!b.allow_unsafe_link_target)for(;f--;){const k=
e[f];"a"===k.name&&"_blank"===k.attr("target")&&k.attr("rel",h(k.attr("rel")))}});b.allow_html_in_named_anchor||a.addAttributeFilter("id,name",e=>{let f=e.length,g,h,k,l;for(;f--;)if(l=e[f],"a"===l.name&&l.firstChild&&!l.attr("href"))for(k=l.parent,g=l.lastChild;g&&k;)h=g.prev,k.insert(g,l),g=h});b.fix_list_elements&&a.addNodeFilter("ul,ol",e=>{let f=e.length,g;for(var h;f--;)g=e[f],!(h=g.parent)||"ul"!==h.name&&"ol"!==h.name||(g.prev&&"li"===g.prev.name?g.prev.append(g):(h=new ib("li",1),h.attr("style",
"list-style-type: none"),g.wrap(h)))});const d=c.getValidClasses();b.validate&&d&&a.addAttributeFilter("class",e=>{var f;let g=e.length;for(;g--;){const k=e[g];var h=null!==(f=k.attr("class"))&&void 0!==f?f:"";h=K.explode(h," ");let l="";for(let m=0;m<h.length;m++){const n=h[m];let t=!1,y=d["*"];y&&y[n]&&(t=!0);y=d[k.name];!t&&y&&y[n]&&(t=!0);t&&(l&&(l+=" "),l+=n)}l.length||(l=null);k.attr("class",l)}});UD(a,b)};var bw=Object.hasOwnProperty,im=Object.setPrototypeOf,$v=Object.isFrozen,dw=Object.getPrototypeOf,
cw=Object.getOwnPropertyDescriptor,xb=Object.freeze,rc=Object.seal,aw=Object.create,Kr="undefined"!==typeof Reflect&&Reflect,jg=Kr.apply,Tk=Kr.construct;jg||(jg=function(a,b,c){return a.apply(b,c)});xb||(xb=function(a){return a});rc||(rc=function(a){return a});Tk||(Tk=function(a,b){return Ba(a,Ia(b))});var sw=Wb(Array.prototype.forEach),zw=Wb(Array.prototype.pop),Ne=Wb(Array.prototype.push),kg=Wb(String.prototype.toLowerCase),rw=Wb(String.prototype.match),Ic=Wb(String.prototype.replace),tw=Wb(String.prototype.indexOf),
uw=Wb(String.prototype.trim),yb=Wb(RegExp.prototype.test),xi=function(a){return function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return Tk(a,c)}}(TypeError),km=xb("a abbr acronym address area article aside audio b bdi bdo big blink blockquote body br button canvas caption center cite code col colgroup content data datalist dd decorator del details dfn dialog dir div dl dt element em fieldset figcaption figure font footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i img input ins kbd label legend li main map mark marquee menu menuitem meter nav nobr ol optgroup option output p picture pre progress q rp rt ruby s samp section select shadow small source spacer span strike strong style sub summary sup table tbody td template textarea tfoot th thead time tr track tt u ul var video wbr".split(" ")),
pi=xb("svg a altglyph altglyphdef altglyphitem animatecolor animatemotion animatetransform circle clippath defs desc ellipse filter font g glyph glyphref hkern image line lineargradient marker mask metadata mpath path pattern polygon polyline radialgradient rect stop style switch symbol text textpath title tref tspan view vkern".split(" ")),qi=xb("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence".split(" ")),
pw=xb("animate color-profile cursor discard fedropshadow font-face font-face-format font-face-name font-face-src font-face-uri foreignobject hatch hatchpath mesh meshgradient meshpatch meshrow missing-glyph script set solidcolor unknown use".split(" ")),ri=xb("math menclose merror mfenced mfrac mglyph mi mlabeledtr mmultiscripts mn mo mover mpadded mphantom mroot mrow ms mspace msqrt mstyle msub msup msubsup mtable mtd mtext mtr munder munderover".split(" ")),qw=xb("maction maligngroup malignmark mlongdiv mscarries mscarry msgroup mstack msline msrow semantics annotation annotation-xml mprescripts none".split(" ")),
lm=xb(["#text"]),mm=xb("accept action align alt autocapitalize autocomplete autopictureinpicture autoplay background bgcolor border capture cellpadding cellspacing checked cite class clear color cols colspan controls controlslist coords crossorigin datetime decoding default dir disabled disablepictureinpicture disableremoteplayback download draggable enctype enterkeyhint face for headers height hidden high href hreflang id inputmode integrity ismap kind label lang list loading loop low max maxlength media method min minlength multiple muted name nonce noshade novalidate nowrap open optimum pattern placeholder playsinline poster preload pubdate radiogroup readonly rel required rev reversed role rows rowspan spellcheck scope selected shape size sizes span srclang start src srcset step style summary tabindex title translate type usemap valign value width xmlns slot".split(" ")),
si=xb("accent-height accumulate additive alignment-baseline ascent attributename attributetype azimuth basefrequency baseline-shift begin bias by class clip clippathunits clip-path clip-rule color color-interpolation color-interpolation-filters color-profile color-rendering cx cy d dx dy diffuseconstant direction display divisor dur edgemode elevation end fill fill-opacity fill-rule filter filterunits flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight fx fy g1 g2 glyph-name glyphref gradientunits gradienttransform height href id image-rendering in in2 k k1 k2 k3 k4 kerning keypoints keysplines keytimes lang lengthadjust letter-spacing kernelmatrix kernelunitlength lighting-color local marker-end marker-mid marker-start markerheight markerunits markerwidth maskcontentunits maskunits max mask media method mode min name numoctaves offset operator opacity order orient orientation origin overflow paint-order path pathlength patterncontentunits patterntransform patternunits points preservealpha preserveaspectratio primitiveunits r rx ry radius refx refy repeatcount repeatdur restart result rotate scale seed shape-rendering specularconstant specularexponent spreadmethod startoffset stddeviation stitchtiles stop-color stop-opacity stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke stroke-width style surfacescale systemlanguage tabindex targetx targety transform transform-origin text-anchor text-decoration text-rendering textlength type u1 u2 unicode values viewbox visibility version vert-adv-y vert-origin-x vert-origin-y width word-spacing wrap writing-mode xchannelselector ychannelselector x x1 x2 xmlns y y1 y2 z zoomandpan".split(" ")),
nm=xb("accent accentunder align bevelled close columnsalign columnlines columnspan denomalign depth dir display displaystyle encoding fence frame height href id largeop length linethickness lspace lquote mathbackground mathcolor mathsize mathvariant maxsize minsize movablelimits notation numalign open rowalign rowlines rowspacing rowspan rspace rquote scriptlevel scriptminsize scriptsizemultiplier selection separator separators stretchy subscriptshift supscriptshift symmetric voffset width xmlns".split(" ")),
mg=xb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fw=rc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gw=rc(/<%[\w\W]*|[\w\W]*%>/gm),hw=rc(/^data-[\-\w.\u00B7-\uFFFF]/),iw=rc(/^aria-[\-\w]+$/),lw=rc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),jw=rc(/^(?:\w+script|data):/i),kw=rc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yw=rc(/^html$/i),ew=function(a,b){if("object"!==S(a)||"function"!==typeof a.createPolicy)return null;var c=null;
b.currentScript&&b.currentScript.hasAttribute("data-tt-policy-suffix")&&(c=b.currentScript.getAttribute("data-tt-policy-suffix"));b="dompurify"+(c?"#"+c:"");try{return a.createPolicy(b,{createHTML:function(d){return d}})}catch(d){return console.warn("TrustedTypes policy "+b+" could not be created."),null}},WD=jm();const Lr=K.each,XD=K.trim,YD="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ZD={ftp:21,http:80,https:443,mailto:25},$D=
["img","video"],Mr=(a,b,c)=>{try{var d=decodeURIComponent(b)}catch(e){d=unescape(b)}b=d.replace(/\s/g,"");return a.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(b)?!0:a.allow_html_data_urls?!1:/^data:image\//i.test(b)?(a=a.allow_svg_data_urls,c=Ma(a)?!a:Ma(c)?!(-1<Ca.call($D,c)):!0,c&&/^data:image\/svg\+xml/i.test(b)):/^data:/i.test(b)};class sc{static parseDataUri(a){let b;a=decodeURIComponent(a).split(",");const c=/data:([^;]+)/.exec(a[0]);c&&(b=c[1]);return{type:b,data:a[1]}}static isDomSafe(a,
b,c){c=void 0===c?{}:c;if(c.allow_script_urls)return!0;a=Wc.decode(a).replace(/[\s\u0000-\u001F]+/g,"");return!Mr(c,a,b)}static getDocumentBaseUrl(a){var b;let c;c=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?null!==(b=a.href)&&void 0!==b?b:"":a.protocol+"//"+a.host+a.pathname;/^[^:]+:\/\/\/?[^\/]+\//.test(c)&&(c=c.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(c)||(c+="/"));return c}constructor(a,b){b=void 0===b?{}:b;this.directory=this.path="";a=XD(a);this.settings=b;
b=b.base_uri;const c=this;if(/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))c.source=a;else{var d=0===a.indexOf("//");0!==a.indexOf("/")||d||(a=(b?b.protocol||"http":"http")+"://mce_host"+a);if(!/^[\w\-]*:?\/\//.test(a)){const f=b?b.path:(new sc(document.location.href)).directory;if(""===(null===b||void 0===b?void 0:b.protocol))a="//mce_host"+c.toAbsPath(f,a);else{const g=/([^#?]*)([#?]?.*)/.exec(a);g&&(a=(b&&b.protocol||"http")+"://mce_host"+c.toAbsPath(f,g[1])+g[2])}}a=a.replace(/@@/g,"(mce_at)");
var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);e&&Lr(YD,(f,g)=>{(g=e[g])&&(g=g.replace(/\(mce_at\)/g,"@@"));c[f]=g});b&&(c.protocol||(c.protocol=b.protocol),c.userInfo||(c.userInfo=b.userInfo),c.port||"mce_host"!==c.host||(c.port=b.port),c.host&&"mce_host"!==c.host||(c.host=b.host),c.source="");d&&(c.protocol="")}}setPath(a){if(a=
/^(.*?)\/?(\w+)?$/.exec(a))this.path=a[0],this.directory=a[1],this.file=a[2];this.source="";this.getURI()}toRelative(a){if("./"===a)return a;a=new sc(a,{base_uri:this});if("mce_host"!==a.host&&this.host!==a.host&&a.host||this.port!==a.port||this.protocol!==a.protocol&&""!==a.protocol)return a.getURI();var b=this.getURI();const c=a.getURI();if(b===c||"/"===b.charAt(b.length-1)&&b.substr(0,b.length-1)===c)return b;b=this.toRelPath(this.path,a.path);a.query&&(b+="?"+a.query);a.anchor&&(b+="#"+a.anchor);
return b}toAbsolute(a,b){a=new sc(a,{base_uri:this});return a.getURI(b&&this.isSameOrigin(a))}isSameOrigin(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;const b=this.protocol?ZD[this.protocol]:null;if(b&&(this.port||b)==(a.port||b))return!0}return!1}toRelPath(a,b){let c=0,d="",e;const f=a.substring(0,a.lastIndexOf("/")).split("/"),g=b.split("/");if(f.length>=g.length)for(a=0,e=f.length;a<e;a++)if(a>=g.length||f[a]!==g[a]){c=a+1;break}if(f.length<g.length)for(a=
0,e=g.length;a<e;a++)if(a>=f.length||f[a]!==g[a]){c=a+1;break}if(1===c)return b;a=0;for(e=f.length-(c-1);a<e;a++)d+="../";a=c-1;for(e=g.length;a<e;a++)d=a!==c-1?d+("/"+g[a]):d+g[a];return d}toAbsPath(a,b){var c=0;const d=/\/$/.test(b)?"/":"";a=a.split("/");b=b.split("/");const e=[];Lr(a,f=>{f&&e.push(f)});a=[];for(let f=b.length-1;0<=f;f--)0!==b[f].length&&"."!==b[f]&&(".."===b[f]?c++:0<c?c--:a.push(b[f]));c=e.length-c;c=0>=c?ae(a).join("/"):e.slice(0,c).join("/")+"/"+ae(a).join("/");0!==c.indexOf("/")&&
(c="/"+c);d&&c.lastIndexOf("/")!==c.length-1&&(c+=d);return c}getURI(a){a=void 0===a?!1:a;let b;if(!this.source||a)b="",a||(b=this.protocol?b+(this.protocol+"://"):b+"//",this.userInfo&&(b+=this.userInfo+"@"),this.host&&(b+=this.host),this.port&&(b+=":"+this.port)),this.path&&(b+=this.path),this.query&&(b+="?"+this.query),this.anchor&&(b+="#"+this.anchor),this.source=b;return this.source}}const aE=K.makeMap("src,href,data,background,action,formaction,poster,xlink:href");let Nr=0;const Or=(a,b,c,d)=>
{var e,f,g,h;const k=b.validate,l=c.getSpecialElements();8===a.nodeType&&!b.allow_conditional_comments&&/^\[if/i.test(null!==(e=a.nodeValue)&&void 0!==e?e:"")&&(a.nodeValue=" "+a.nodeValue);b=null!==(f=null===d||void 0===d?void 0:d.tagName)&&void 0!==f?f:a.nodeName.toLowerCase();if(1===a.nodeType&&"body"!==b){var m=x.fromDom(a);a=xg(m,"data-mce-type");f=fb(m,"data-mce-bogus");!a&&fa(f)?"all"===f?Ja(m):Bc(m):(c=c.getElementRule(b),k&&!c?ha.call(l,b)?Ja(m):Bc(m):(aa(d)||(d.allowedTags[b]=!0),k&&c&&
!a&&(G(null!==(g=c.attributesForced)&&void 0!==g?g:[],n=>{var t="{$uid}"===n.value?`mce_${Nr++}`:n.value;Va(m.dom,n.name,t)}),G(null!==(h=c.attributesDefault)&&void 0!==h?h:[],n=>{if(!xg(m,n.name)){var t="{$uid}"===n.value?`mce_${Nr++}`:n.value;Va(m.dom,n.name,t)}}),c.attributesRequired&&!Na(c.attributesRequired,n=>xg(m,n))?Bc(m):c.removeEmptyAttrs&&gx(m)?Bc(m):c.outputName&&c.outputName!==b&&Tn(m,c.outputName))))}},Pr=(a,b,c,d,e)=>!(d in aE&&Mr(a,e,c))&&(!a.validate||b.isValid(c,d)||Ua(d,"data-",
0)||Ua(d,"aria-",0)),Qr=(a,b)=>a.hasAttribute("data-mce-type")&&("id"===b||"class"===b||"style"===b),bE=(a,b)=>{const c=WD();c.addHook("uponSanitizeElement",(d,e)=>{Or(d,a,b,e)});c.addHook("uponSanitizeAttribute",(d,e)=>{const f=d.tagName.toLowerCase(),{attrName:g,attrValue:h}=e;e.keepAttr=Pr(a,b,f,g,h);e.keepAttr?(e.allowedAttributes[g]=!0,g in b.getBoolAttrs()&&(e.attrValue=g),a.allow_svg_data_urls&&Ua(h,"data:image/svg+xml",0)&&(e.forceKeepAttr=!0)):Qr(d,g)&&(e.forceKeepAttr=!0)});return c},cE=
(a,b)=>{if(a.sanitize){const c=bE(a,b);return(d,e)=>{var f=c.sanitize;const g=Object.assign({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});g.PARSER_MEDIA_TYPE=e;a.allow_script_urls?g.ALLOWED_URI_REGEXP=/.*/:a.allow_html_data_urls&&(g.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i);f.call(c,d,g);c.removed=[]}}return(c,d)=>{for(c=document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);d=c.nextNode();)if(Or(d,
a,b),V(d)){var e=a,f=b;const {attributes:h}=d;for(let k=h.length-1;0<=k;k--){var g=h[k];const l=g.name;g=g.value;Pr(e,f,d.tagName.toLowerCase(),l,g)||Qr(d,l)?l in f.getBoolAttrs()&&d.setAttribute(l,l):d.removeAttribute(l)}}}},Rr=K.makeMap,Sr=K.extend,Tr=(a,b,c)=>{var d=a.name;d=d in c&&"title"!==d&&"textarea"!==d;b=b.childNodes;for(let e=0,f=b.length;e<f;e++){const g=b[e],h=new ib(g.nodeName.toLowerCase(),g.nodeType);if(V(g)){const k=g.attributes;for(let l=0,m=k.length;l<m;l++){const n=k[l];h.attr(n.name,
n.value)}}else if(E(g))h.value=g.data,d&&(h.raw=!0);else if(Sc(g)||ux(g)||vx(g))h.value=g.data;Tr(h,g,c);a.append(h)}},dE=(a,b,c)=>{const d=[];for(let e=a,f=e;e;f=e,e=e.walk()){const g=e;G(b,h=>h(g));aa(g.parent)&&g!==a?e=f:d.push(g)}for(a=d.length-1;0<=a;a--){const e=d[a];G(c,f=>f(e))}},eE=(a,b,c,d)=>{const e=c.validate,f=b.getNonEmptyElements(),g=b.getWhitespaceElements(),h=Sr(Rr("script,style,head,html,body,title,meta,param"),b.getBlockElements()),k=In(b),l=/[ \t\r\n]+/g,m=/^[ \t\r\n]+/,n=/[ \t\r\n]+$/,
t=q=>{for(q=q.parent;!aa(q);){if(q.name in g)return!0;q=q.parent}return!1},y=q=>q.name in h||gj(b,q),w=(q,r)=>{(r=!aa(r?q.prev:q.next))||(r=q.parent,r=null===r||void 0===r);return r?!1:y(q.parent)&&(q.parent!==a||!0===d.isRootContent)};return[q=>{var r;if(3===q.type&&!t(q)){let v=null!==(r=q.value)&&void 0!==r?r:"";v=v.replace(l," ");r=q.prev;if(Ma(r)&&(y(r)||"br"===r.name)||w(q,!0))v=v.replace(m,"");0===v.length?q.remove():q.value=v}},q=>{if(1===q.type){var r=b.getElementRule(q.name);if(e&&r){var v=
Qf(b,f,g,q);var z;if(z=r.paddInEmptyBlock&&v)a:{for(z=q;Ma(z);)if(z.name in k){z=Qf(b,f,g,z);break a}else z=z.parent;z=!1}if(z)Ck(c,d,y,q);else if(r.removeEmpty&&v)y(q)?q.remove():q.unwrap();else{if(r=r.paddEmpty){if(!v){var P;v=Mq(q,"#text")&&"\u00a0"===(null===(P=null===q||void 0===q?void 0:q.firstChild)||void 0===P?void 0:P.value)}r=v}r&&Ck(c,d,y,q)}}}else if(3===q.type&&!t(q)){P=null!==(v=q.value)&&void 0!==v?v:"";if(q.next&&y(q.next)||w(q,!1))P=P.replace(n,"");0===P.length?q.remove():q.value=
P}}]},fE=(a,b)=>{var c;b=null!==(c=b.forced_root_block)&&void 0!==c?c:a.forced_root_block;return!1===b?"":!0===b?"p":b},Ae=(a,b)=>{a=void 0===a?{}:a;b=void 0===b?Xc():b;const c=Dr(),d=Dr(),e=Object.assign({},{validate:!0,root_name:"body",sanitize:!0},a),f=new DOMParser,g=cE(e,b),h=(t,y,w)=>{w=void 0===w?"html":w;const q="xhtml"===w?"application/xhtml+xml":"text/html";var r=b.getSpecialElements();var v=y.toLowerCase();t=(r=ha.call(r,v))?`<${y}>${t}</${y}>`:t;w=f.parseFromString("xhtml"===w?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${t}</body></html>`:
`<body>${t}</body>`,q).body;g(w,q);return r?w.firstChild:w},k=c.getFilters,l=d.getFilters,m=(t,y)=>{const w=fa(y.attr("data-mce-type"));t=1===y.type&&!ha.call(t,y.name)&&!gj(b,y);return 3===y.type||t&&!w},n=(t,y)=>{const w=Sr(Rr("script,style,head,html,body,title,meta,param"),b.getBlockElements()),q=/^[ \t\r\n]+/,r=/[ \t\r\n]+$/;let v=t.firstChild,z=null;const P=N=>{var Y,O;N&&((v=N.firstChild)&&3===v.type&&(v.value=null===(Y=v.value)||void 0===Y?void 0:Y.replace(q,"")),(v=N.lastChild)&&3===v.type&&
(v.value=null===(O=v.value)||void 0===O?void 0:O.replace(r,"")))};if(b.isValidChild(t.name,y.toLowerCase())){for(;v;){const N=v.next;m(w,v)?(z||(z=new ib(y,1),z.attr(e.forced_root_block_attrs),t.insert(z,v)),z.append(v)):(P(z),z=null);v=N}P(z)}};a={schema:b,addAttributeFilter:d.addFilter,getAttributeFilters:l,removeAttributeFilter:d.removeFilter,addNodeFilter:c.addFilter,getNodeFilters:k,removeNodeFilter:c.removeFilter,parse:(t,y)=>{y=void 0===y?{}:y;var w,q=e.validate,r=null!==(w=y.context)&&void 0!==
w?w:e.root_name;t=h(t,r,y.format);ej(b,t);const v=new ib(r,11);Tr(v,t,b.getSpecialElements());t.innerHTML="";const [z,P]=eE(v,b,e,y),N=[],Y={nodes:{},attributes:{}};r=O=>Jq(k(),l(),O,Y);dE(v,[z,r],[P,q?O=>{Nq(b,O)&&N.push(O)}:pa]);N.reverse();if(q&&0<N.length)if(y.context){const {pass:O,fail:L}=Re(N,U=>U.parent===v);Ek(L,b,v,r);y.invalid=0<O.length}else Ek(N,b,v,r);(q=fE(e,y))&&("body"===v.name||y.isRootContent)&&n(v,q);y.invalid||Kq(Y,y);return v}};VD(a,e);e.inline_styles&&ND(a,e,b);return a},Ur=
(a,b,c)=>{var d=a instanceof ib?ed({validate:!1}).serialize(a):a;b=b(d);return b.isDefaultPrevented()?b:a instanceof ib?b.content!==d?(a=Ae({validate:!1,forced_root_block:!1,sanitize:c}).parse(b.content,{context:a.name}),Object.assign({},b,{content:a})):Object.assign({},b,{content:a}):b},Vr=(a,b)=>{if(b.no_events)return ub.value(b);var c=a.dispatch("BeforeGetContent",b);if(c.isDefaultPrevented()){b=ub;var d=b.error;c=Object.assign({},{content:""},c);a=a.dispatch("GetContent",c);return d.call(b,a.content)}return ub.value(c)},
Wr=(a,b,c)=>c.no_events?b:Ur(b,d=>{d=Object.assign({},c,{content:d});return a.dispatch("GetContent",d)},Cj(a)).content,Uk=(a,b)=>{if(b.no_events)return ub.value(b);const c=Ur(b.content,d=>{d=Object.assign({},b,{content:d});return a.dispatch("BeforeSetContent",d)},Cj(a));return c.isDefaultPrevented()?(a.dispatch("SetContent",c),ub.error(void 0)):ub.value(c)},Vk=(a,b,c)=>{c.no_events||(b=Object.assign({},c,{content:b}),a.dispatch("SetContent",b))},Wk=(a,b,c)=>({element:a,width:b,rows:c}),gE=(a,b,c)=>
{a=a.rows;return!!(a[c]?a[c].cells:[])[b]},Xr=a=>Db(a,(b,c)=>c.cells.length>b?c.cells.length:b,0),Yr=(a,b)=>{a=a.rows;for(let c=0;c<a.length;c++){const d=a[c].cells;for(let e=0;e<d.length;e++)if(d[e].dom===b.dom)return p.some({x:e,y:c})}return p.none()},Zr=(a,b,c,d,e)=>{const f=[];for(a=a.rows;c<=e;c++){var g=a[c].cells;g=b<d?g.slice(b,d+1):g.slice(d,b+1);f.push({element:a[c].element,cells:g})}return f},hE=a=>wa(a.rows,b=>{const c=wa(b.cells,d=>{d=x.fromDom(d.dom.cloneNode(!0));d.dom.removeAttribute("colspan");
d.dom.removeAttribute("rowspan");return d});b=x.fromDom(b.element.dom.cloneNode(!1));xd(b,c);return b}),iE=a=>{const b=Wk(x.fromDom(a.dom.cloneNode(!1)),0,[]);G(Ab("tr",a),(c,d)=>{G(Ab("td,th",c),(e,f)=>{for(;gE(b,f,d);)f++;const g=p.from(fb(e,"rowspan")).bind($e).getOr(1),h=p.from(fb(e,"colspan")).bind($e).getOr(1),k=b.rows;for(let n=d;n<d+g;n++){if(!k[n]){var l=n;var m={element:x.fromDom(c.dom.cloneNode(!0)),cells:[]};k[l]=m}for(l=f;l<f+h;l++)k[n].cells[l]=n===d&&l===f?e:x.fromDom(e.dom.cloneNode(!1))}})});
return Wk(b.element,Xr(b.rows),b.rows)},jE=(a,b,c)=>Yr(a,b).bind(d=>Yr(a,c).map(e=>{var f=d.x;const g=d.y,h=e.x;e=e.y;f=g<e?Zr(a,f,g,h,e):Zr(a,f,e,h,g);return Wk(a.element,Xr(f),f)})),kE=a=>Oa(a,b=>"ul"===b.dom.nodeName.toLowerCase()||"ol"===b.dom.nodeName.toLowerCase()),lE=(a,b)=>Oa(a,c=>"li"===c.dom.nodeName.toLowerCase()&&Lj(c,b)).fold(R([]),c=>kE(a).map(d=>{const e=x.fromTag(d.dom.nodeName.toLowerCase());d=We(gn(d),(f,g)=>Ua(g,"list-style",0));Ag(e,d);return[x.fromTag("li"),e]}).getOr([])),mE=
(a,b)=>{a=Db(b,(c,d)=>{d.dom.appendChild(c.dom);return d},a);return 0<b.length?ih([a]):a},nE=a=>hf(a)?Rb(a).filter(Xi).fold(R([]),b=>[a,b]):Xi(a)?[a]:[],oE=()=>ih([]),pE=(a,b)=>$b(b[0],"table",A(yc,a)).bind(c=>{const d=b[0],e=b[b.length-1];c=iE(c);return jE(c,d,e).map(f=>{var g=hE(f);f=x.fromDom(f.element.dom.cloneNode(!1));const h=x.fromTag("tbody");xd(h,g);f.dom.appendChild(h.dom);return ih([f])})}).getOrThunk(oE),wh=(a,b)=>0<=b&&b<a.length&&Kd(a.charAt(b)),qE=a=>a.map(b=>b.nodeName).getOr("div").toLowerCase(),
rE=a=>p.from(a.selection.getRng()).map(b=>{var c,d=p.from(a.dom.getParent(b.commonAncestorContainer,a.dom.isBlock)),e=a.getBody(),f=qE(d);b=x.fromDom(b.cloneContents());Vp(b);Wp(b);b=a.dom.add(e,f,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom);f=bc(b.innerText);const g=bc(null!==(c=b.textContent)&&void 0!==c?c:"");a.dom.remove(b);if(wh(g,0)||wh(g,g.length-1)){c=d.getOr(e);d=bc(c.innerText);e=d.indexOf(f);if(-1===e)return f;c=wh(d,e-1);d=wh(d,e+f.length);return(c?" ":"")+f+(d?
" ":"")}return f}).getOr(""),sE=(a,b,c)=>{c=void 0===c?{}:c;b=Object.assign({},c,{format:b,get:!0,selection:!0,getInner:!0});return Vr(a,b).fold(Ka,d=>{if("text"===d.format)var e=rE(a);else{var f=a.selection.getRng();e=a.dom.create("body");var g=a.selection.getSel(),h=jk(a,Jj(g));if(d.contextual){g=x.fromDom(a.getBody());f=h;h=Zo(f,g);if(0<h.length)f=pE(g,h);else if(0<f.length&&f[0].collapsed)f=ih([]);else{var k=f[0];f=x.fromDom(k.cloneContents());h=x.fromDom(k.commonAncestorContainer);const l=[h].concat(id(h,
g,za));g=ka(l,Dx);k=lE(l,k);g=g.concat(k.length?k:nE(h));g=wa(g,py);f=mE(f,g)}f=f.dom}else f=f.cloneContents();f&&e.appendChild(f);e=a.selection.serializer.serialize(e,d);e="tree"===d.format?e:a.selection.isCollapsed()?"":e}return Wr(a,e,d)})},tE=(a,b)=>{var c=a.length+b.length+2;const d=Array(c),e=Array(c),f=(h,k,l,m,n)=>{a:{var t=k-h,y=m-l;if(0!==t&&0!==y){var w=t-y;t=y+t;t=(0===t%2?t:t+1)/2;d[1+t]=h;e[1+t]=k+1;var q,r;for(y=0;y<=t;++y){for(q=-y;q<=y;q+=2){var v=q+t;d[v]=q===-y||q!==y&&d[v-1]<d[v+
1]?d[v+1]:d[v-1]+1;var z=d[v];for(r=z-h+l-q;z<k&&r<m&&a[z]===b[r];)d[v]=++z,++r;if(0!==w%2&&w-y<=q&&q<=w+y&&e[v-w]<=d[v]){w=g(e[v-w],q+h-l,k,m);break a}}for(q=w-y;q<=w+y;q+=2){v=q+t-w;e[v]=q===w-y||q!==w+y&&e[v+1]<=e[v-1]?e[v+1]-1:e[v-1];z=e[v]-1;for(r=z-h+l-q;z>=h&&r>=l&&a[z]===b[r];)e[v]=z--,r--;if(0===w%2&&-y<=q&&q<=y&&e[v]<=d[v+w]){w=g(e[v],q+h-l,k,m);break a}}}}w=null}if(null===w||w.start===k&&w.diag===k-m||w.end===h&&w.diag===h-l)for(w=h,t=l;w<k||t<m;)w<k&&t<m&&a[w]===b[t]?(n.push([0,a[w]]),
++w,++t):k-h>m-l?(n.push([2,a[w]]),++w):(n.push([1,b[t]]),++t);else{f(h,w.start,l,w.start-w.diag,n);for(h=w.start;h<w.end;++h)n.push([0,a[h]]);f(w.end,k,w.end-w.diag,m,n)}},g=(h,k,l,m)=>{let n=h;for(;n-k<m&&n<l&&a[n]===b[n-k];)++n;return{start:h,end:n,diag:k}};c=[];f(0,a.length,0,b.length,c);return c},$r=a=>V(a)?a.outerHTML:E(a)?Wc.encodeRaw(a.data,!1):Sc(a)?"\x3c!--"+a.data+"--\x3e":"",uE=(a,b)=>{let c=0;G(a,d=>{if(0===d[0])c++;else if(1===d[0]){var e=c,f=d[1];d=document.createElement("div");const g=
document.createDocumentFragment();f&&(d.innerHTML=f);for(;f=d.firstChild;)g.appendChild(f);d=g;b.hasChildNodes()&&e<b.childNodes.length?b.insertBefore(d,b.childNodes[e]):b.appendChild(d);c++}else 2===d[0]&&(e=c,b.hasChildNodes()&&e<b.childNodes.length&&b.removeChild(b.childNodes[e]))})},vE=a=>ka(wa(qb(a.childNodes),$r),b=>0<b.length),wE=td(()=>document.implementation.createHTMLDocument("undo")),xh=a=>{var b=vE(a.getBody());b=gc(b,d=>{d=Up(a.serializer,d);return 0<d.length?[d]:[]});const c=b.join("");
return-1!==c.indexOf("</iframe>")?{type:"fragmented",fragments:b,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:c,bookmark:null,beforeBookmark:null}},Xk=(a,b,c)=>{c=c?b.beforeBookmark:b.bookmark;if("fragmented"===b.type){b=b.fragments;var d=a.getBody();const e=wa(qb(d.childNodes),$r);uE(tE(e,b),d)}else a.setContent(b.content,{format:"raw",no_selection:!aa(c)&&K.isArray(c.start)?!c.isFakeCaret:!0});c&&(a.selection.moveToBookmark(c),a.selection.scrollIntoView())},
Yk=a=>"fragmented"===a.type?a.fragments.join(""):a.content,as=a=>{const b=x.fromTag("body",wE());Cg(b,Yk(a));G(Ab("*[data-mce-bogus]",b),Bc);return b.dom.innerHTML},Zk=(a,b)=>a&&b?Yk(a)===Yk(b)?!0:as(a)===as(b):!1,xE=a=>{a.typing&&(a.typing=!1,a.add())},yE=(a,b,c,d,e,f,g)=>{const h=xh(a);f=K.extend(f||{},h);if(0!==d.get()||a.removed)return null;d=b.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:f,lastLevel:d,originalEvent:g}).isDefaultPrevented()||d&&Zk(d,f))return null;b.data[c.get()]&&e.get().each(k=>
{b.data[c.get()].beforeBookmark=k});if((e=tz(a))&&b.data.length>e){for(e=0;e<b.data.length-1;e++)b.data[e]=b.data[e+1];b.data.length--;c.set(b.data.length)}f.bookmark=wj(a.selection);c.get()<b.data.length-1&&(b.data.length=c.get()+1);b.data.push(f);c.set(b.data.length-1);g={level:f,lastLevel:d,originalEvent:g};0<c.get()?(a.setDirty(!0),a.dispatch("AddUndo",g),a.dispatch("change",g)):a.dispatch("AddUndo",g);return f},zE=(a,b)=>{const c=a.dom,d=aa(b)?a.getBody():b;G(c.select("table,a",d),e=>{switch(e.nodeName){case "TABLE":var f=
zz(a),g=c.getAttrib(e,"border");g&&"0"!==g||!a.hasVisual?c.removeClass(e,f):c.addClass(e,f);break;case "A":c.getAttrib(e,"href")||(f=c.getAttrib(e,"name")||e.id,g=Eo(a),f&&a.hasVisual?c.addClass(e,g):c.removeClass(e,g))}});a.dispatch("VisualAid",{element:b,hasVisual:a.hasVisual})},yh=a=>({init:{bindEvents:pa},undoManager:{beforeChange:(b,c)=>{0===b.get()&&c.set(wj(a.selection))},add:(b,c,d,e,f,g)=>yE(a,b,c,d,e,f,g),undo:(b,c,d)=>{let e;b.typing&&(b.add(),b.typing=!1,0===c.get()&&(b.typing=!1));0<
d.get()&&(d.set(d.get()-1),e=b.data[d.get()],Xk(a,e,!0),a.setDirty(!0),a.dispatch("Undo",{level:e}));return e},redo:(b,c)=>{let d;b.get()<c.length-1&&(b.set(b.get()+1),d=c[b.get()],Xk(a,d,!1),a.setDirty(!0),a.dispatch("Redo",{level:d}));return d},clear:(b,c)=>{b.data=[];c.set(0);b.typing=!1;a.dispatch("ClearUndos")},reset:b=>{b.clear();b.add()},hasUndo:(b,c)=>0<c.get()||b.typing&&b.data[0]&&!Zk(xh(a),b.data[0]),hasRedo:(b,c)=>c.get()<b.data.length-1&&!b.typing,transact:(b,c,d)=>{b.typing&&(0===c.get()&&
(b.typing=!1),b.add());b.beforeChange();b.ignore(d);return b.add()},ignore:(b,c)=>{try{b.set(b.get()+1),c()}finally{b.set(b.get()-1)}},extra:(b,c,d,e)=>{if(b.transact(d)){d=b.data[c.get()].bookmark;const f=b.data[c.get()-1];Xk(a,f,!0);b.transact(e)&&(b.data[c.get()-1].beforeBookmark=d)}}},formatter:{match:(b,c,d,e)=>Jk(a,b,c,d,e),matchAll:(b,c)=>jD(a,b,c),matchNode:(b,c,d,e)=>qc(a,b,c,d,e),canApply:b=>{a:{b=a.formatter.get(b);const d=a.dom;if(b&&a.selection.isEditable()){var c=a.selection.getStart();
c=d.getParents(c,void 0,d.getRoot());for(let e=b.length-1;0<=e;e--){const f=b[e];if(!ra(f,"selector")){b=!0;break a}for(let g=c.length-1;0<=g;g--)if(d.is(c[g],f.selector)){b=!0;break a}}}b=!1}return b},closest:b=>kD(a,b),apply:(b,c,d)=>{(d||a.selection.isEditable())&&yr(a,b,c,d)},remove:(b,c,d,e)=>{(d||a.selection.isEditable())&&vr(a,b,c,d,e)},toggle:(b,c,d)=>{const e=a.formatter.get(b);e&&(!Jk(a,b,c,d)||"toggle"in e[0]&&!e[0].toggle?(d||a.selection.isEditable())&&yr(a,b,c,d):(d||a.selection.isEditable())&&
vr(a,b,c,d,void 0))},formatChanged:(b,c,d,e,f)=>JD(a,b,c,d,e,f)},editor:{getContent:b=>EB(a,b),setContent:(b,c)=>gD(a,b,c),insertContent:(b,c)=>fD(a,b,c),addVisual:b=>zE(a,b)},selection:{getContent:(b,c)=>sE(a,b,c)},autocompleter:{addDecoration:b=>BB(a,b),removeDecoration:()=>CB(a,x.fromDom(a.getBody()))},raw:{getModel:()=>p.none()}}),AE=a=>{const b=l=>jb(l)?l:{},{init:c,undoManager:d,formatter:e,editor:f,selection:g,autocompleter:h,raw:k}=a;return{init:{bindEvents:c.bindEvents},undoManager:{beforeChange:d.beforeChange,
add:d.add,undo:d.undo,redo:d.redo,clear:d.clear,reset:d.reset,hasUndo:d.hasUndo,hasRedo:d.hasRedo,transact:(l,m,n)=>d.transact(n),ignore:(l,m)=>d.ignore(m),extra:(l,m,n,t)=>d.extra(n,t)},formatter:{match:(l,m,n,t)=>e.match(l,b(m),t),matchAll:e.matchAll,matchNode:e.matchNode,canApply:l=>e.canApply(l),closest:l=>e.closest(l),apply:(l,m,n)=>e.apply(l,b(m)),remove:(l,m,n,t)=>e.remove(l,b(m)),toggle:(l,m,n)=>e.toggle(l,b(m)),formatChanged:(l,m,n,t,y)=>e.formatChanged(m,n,t,y)},editor:{getContent:l=>f.getContent(l),
setContent:(l,m)=>({content:f.setContent(l,m),html:""}),insertContent:(l,m)=>{f.insertContent(l);return""},addVisual:f.addVisual},selection:{getContent:(l,m)=>g.getContent(m)},autocompleter:{addDecoration:h.addDecoration,removeDecoration:h.removeDecoration},raw:{getModel:()=>p.some(k.getRawModel())}}},BE=()=>{const a=R(null),b=R("");return{init:{bindEvents:pa},undoManager:{beforeChange:pa,add:a,undo:a,redo:a,clear:pa,reset:pa,hasUndo:za,hasRedo:za,transact:a,ignore:pa,extra:pa},formatter:{match:za,
matchAll:R([]),matchNode:R(void 0),canApply:za,closest:b,apply:pa,remove:pa,toggle:pa,formatChanged:R({unbind:pa})},editor:{getContent:b,setContent:R({content:"",html:""}),insertContent:R(""),addVisual:pa},selection:{getContent:b},autocompleter:{addDecoration:pa,removeDecoration:pa},raw:{getModel:R(p.none())}}},CE=a=>Fa(a.plugins,"rtc").bind(b=>p.from(b.setup)),DE=a=>CE(a).fold(()=>{a.rtcInstance=yh(a);return p.none()},b=>{a.rtcInstance=BE();return p.some(()=>b().then(c=>{a.rtcInstance=AE(c);return c.rtc.isRemote}))}),
La=a=>{if(a=a.rtcInstance)return a;throw Error("Failed to get RTC instance not yet initialized.");},bs=a=>0===a.dom.length?(Ja(a),p.none()):p.some(a),EE=(a,b)=>a.filter(c=>Hf.isBookmarkNode(c.dom)).bind(b?ie:Nc),FE=(a,b)=>{Rb(a).each(c=>{const d=a.dom;b&&Nf(c,C(d,0))?ph(d,0):!b&&Of(c,C(d,d.length))&&sk(d,d.length)})},cs=(a,b,c,d)=>{a.bind(e=>{(d?sk:ph)(e.dom,d?e.dom.length:0);return b.filter(Ib).map(f=>{const g=e.dom;f=f.dom;const h=d?g.length:f.length;d?(tk(g,f,!1,!d),c.setStart(f,h)):(tk(f,g,!1,
!d),c.setEnd(f,h))})}).orThunk(()=>EE(b,d).or(b).filter(Ib).map(e=>FE(e,d)))},GE=(a,b,c)=>{c=void 0===c?{}:c;b=Object.assign({},{format:"html"},c,{set:!0,selection:!0,content:b});Uk(a,b).each(d=>{if("raw"!==d.format){var e=a.selection.getRng();e=(e=a.dom.getParent(e.commonAncestorContainer,a.dom.isBlock))?{context:e.nodeName.toLowerCase()}:{};e=a.parser.parse(d.content,Object.assign({},{forced_root_block:!1},e,d));e=ed({validate:!1},a.schema).serialize(e)}else e=d.content;const f=a.selection.getRng();
var g=f.createContextualFragment(e);const h=p.from(g.firstChild).map(x.fromDom),k=p.from(g.lastChild).map(x.fromDom);f.deleteContents();f.insertNode(g);g=h.bind(Nc).filter(Ib).bind(bs);const l=k.bind(ie).filter(Ib).bind(bs);cs(g,h,f,!0);cs(l,k,f,!1);f.collapse(!1);a.selection.setRng(f);(a.inline?Jf:Kf)(a,f,void 0);Vk(a,e,d)})},ds=(a,b,c)=>{if(ha.call(a,b)){const d=ka(a[b],e=>e!==c);0===d.length?delete a[b]:a[b]=d}};var HE=(a,b)=>{let c,d;const e=(g,h)=>Oa(h,k=>a.is(k,g)),f=()=>{c={};d={};b.on("NodeChange",
g=>{const h=g.element,k=a.getParents(h,void 0,a.getRoot()),l={};Ea(c,(m,n)=>{e(n,k).each(t=>{d[n]||(G(m,y=>{y(!0,{node:t,selector:n,parents:k})}),d[n]=m);l[n]=m})});Ea(d,(m,n)=>{l[n]||(delete d[n],G(m,t=>{t(!1,{node:h,selector:n,parents:k})}))})})};return{selectorChangedWithUnbind:(g,h)=>{c||f();c[g]||(c[g]=[]);c[g].push(h);e(g,a.getParents(b.selection.getStart(),void 0,a.getRoot())).each(()=>{d[g]=c[g]});return{unbind:()=>{ds(c,g,h);ds(d,g,h)}}}}};const es=a=>!(!a||!a.ownerDocument)&&zc(x.fromDom(a.ownerDocument),
x.fromDom(a)),fs=(a,b,c,d)=>{let e,f;const {selectorChangedWithUnbind:g}=HE(a,d),h=(r,v)=>GE(d,r,v),k=r=>{const v=m();v.collapse(!!r);n(v)},l=()=>b.getSelection?b.getSelection():b.document.selection,m=()=>{let r;const v=(P,N,Y)=>{try{return N.compareBoundaryPoints(P,Y)}catch(O){return-1}};var z=b.document;if(!aa(d.bookmark)&&!Nd(d)){const P=ek(d);if(P.isSome())return P.map(N=>jk(d,[N])[0]).getOr(z.createRange())}try{const P=l();P&&!pn(P.anchorNode)&&(r=0<P.rangeCount?P.getRangeAt(0):z.createRange(),
r=jk(d,[r])[0])}catch(P){}r||(r=z.createRange());gf(r.startContainer)&&r.collapsed&&(z=a.getRoot(),r.setStart(z,0),r.setEnd(z,0));e&&f&&(0===v(r.START_TO_START,r,e)&&0===v(r.END_TO_END,r,e)?r=f:f=e=null);return r},n=(r,v)=>{var z=(z=r)?es(z.startContainer)&&es(z.endContainer):!1;if(z){z=l();r=d.dispatch("SetSelectionRange",{range:r,forward:v}).range;if(z){f=r;try{z.removeAllRanges(),z.addRange(r)}catch(P){}!1===v&&z.extend&&(z.collapse(r.endContainer,r.endOffset),z.extend(r.startContainer,r.startOffset));
e=0<z.rangeCount?z.getRangeAt(0):null}if(!r.collapsed&&r.startContainer===r.endContainer&&(null===z||void 0===z?0:z.setBaseAndExtent)&&2>r.endOffset-r.startOffset&&r.startContainer.hasChildNodes()){const P=r.startContainer.childNodes[r.startOffset];P&&"IMG"===P.nodeName&&(z.setBaseAndExtent(r.startContainer,r.startOffset,r.endContainer,r.endOffset),z.anchorNode===r.startContainer&&z.focusNode===r.endContainer||z.setBaseAndExtent(P,0,P,1))}d.dispatch("AfterSetSelectionRange",{range:r,forward:v})}},
t=()=>{const r=l(),v=null===r||void 0===r?void 0:r.anchorNode,z=null===r||void 0===r?void 0:r.focusNode;if(!r||!v||!z||v&&!Object.getPrototypeOf(v)||z&&!Object.getPrototypeOf(z))return!0;const P=a.createRng(),N=a.createRng();try{P.setStart(v,r.anchorOffset),P.collapse(!0),N.setStart(z,r.focusOffset),N.collapse(!0)}catch(Y){return!0}return 0>=P.compareBoundaryPoints(P.START_TO_START,N)},y={dom:a,win:b,serializer:c,editor:d,expand:r=>{r=void 0===r?{type:"word"}:r;return n(Md(a).expand(m(),r))},collapse:k,
setCursorLocation:(r,v)=>{const z=a.createRng();aa(r)||aa(v)?(Mj(a,z,d.getBody(),!0),n(z)):(z.setStart(r,v),z.setEnd(r,v),n(z),k(!1))},getContent:r=>{var v=r;v=void 0===v?{}:v;r=v.format?v.format:"html";return La(d).selection.getContent(r,v)},setContent:h,getBookmark:(r,v)=>w.getBookmark(r,v),moveToBookmark:r=>w.moveToBookmark(r),select:(r,v)=>{wB(a,r,v).each(n);return r},isCollapsed:()=>{const r=m(),v=l();return!r||r.item?!1:r.compareEndPoints?0===r.compareEndPoints("StartToEnd",r):!v||r.collapsed},
isEditable:()=>{const r=m(),v=d.getBody().querySelectorAll('[data-mce-selected="1"]');return 0<v.length?Lc(v,z=>a.isEditable(z.parentElement)):r.startContainer===r.endContainer?a.isEditable(r.startContainer):a.isEditable(r.startContainer)&&a.isEditable(r.endContainer)},isForward:t,setNode:r=>{h(a.getOuterHTML(r));return r},getNode:()=>{var r=d.getBody();var v=m();if(v){var z=v.startContainer,P=v.endContainer,N=v.startOffset,Y=v.endOffset,O=v.commonAncestorContainer;v.collapsed||(z===P&&2>Y-N&&z.hasChildNodes()&&
(O=z.childNodes[N]),E(z)&&E(P)&&(z=z.length===N?Qp(z.nextSibling,!0):z.parentNode,P=0===Y?Qp(P.previousSibling,!1):P.parentNode,z&&z===P&&(O=z)));v=E(O)?O.parentNode:O;r=V(v)?v:r}return r},getSel:l,setRng:n,getRng:m,getStart:r=>Op(d.getBody(),m(),r),getEnd:r=>Pp(d.getBody(),m(),r),getSelectedBlocks:(r,v)=>{var z=m();const P=[],N=a.getRoot();r=a.getParent(r||Op(N,z,z.collapsed),a.isBlock);v=a.getParent(v||Pp(N,z,z.collapsed),a.isBlock);r&&r!==N&&P.push(r);if(r&&v&&r!==v){let Y;for(z=new Ta(r,N);(Y=
z.next())&&Y!==v;)a.isBlock(Y)&&P.push(Y)}v&&r!==v&&v!==N&&P.push(v);return P},normalize:()=>{const r=m();var v=l();return 1<Jj(v).length||!ch(d)?r:(v=jh(a,r),v.each(z=>{n(z,t())}),v.getOr(r))},selectorChanged:(r,v)=>{g(r,v);return y},selectorChangedWithUnbind:g,getScrollContainer:()=>{let r,v=a.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){r=v;break}v=v.parentNode}return r},scrollIntoView:(r,v)=>{aa(r)?(r=m(),(d.inline?Jf:Kf)(d,r,v)):(d.inline?dB:eB)(d,r,v)},placeCaretAt:(r,
v)=>n(yp(r,v,d.getDoc())),getBoundingClientRect:()=>{const r=m();return r.collapsed?C.fromRangeStart(r).getClientRects()[0]:r.getBoundingClientRect()},destroy:()=>{b=e=f=null;q.destroy()}},w=Hf(y),q=tp(y,d);y.bookmarkManager=w;y.controlSelection=q;return y},IE=(a,b,c)=>{a.addAttributeFilter("data-mce-tabindex",(d,e)=>{let f=d.length;for(;f--;){const g=d[f];g.attr("tabindex",g.attr("data-mce-tabindex"));g.attr(e,null)}});a.addAttributeFilter("src,href,style",(d,e)=>{const f="data-mce-"+e,g=b.url_converter,
h=b.url_converter_scope;let k=d.length;for(;k--;){const l=d[k];let m=l.attr(f);void 0!==m?(l.attr(e,0<m.length?m:null),l.attr(f,null)):(m=l.attr(e),"style"===e?m=c.serializeStyle(c.parseStyle(m),l.name):g&&(m=g.call(h,m,e,l.name)),l.attr(e,0<m.length?m:null))}});a.addAttributeFilter("class",d=>{let e=d.length;for(;e--;){const f=d[e];let g=f.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",0<g.length?g:null))}});a.addAttributeFilter("data-mce-type",(d,e,f)=>{for(e=d.length;e--;){const g=
d[e];"bookmark"!==g.attr("data-mce-type")||f.cleanup||(p.from(g.firstChild).exists(h=>{var k;return"\ufeff"!==(null!==(k=h.value)&&void 0!==k?k:"")})?g.unwrap():g.remove())}});a.addNodeFilter("noscript",d=>{var e;let f=d.length;for(;f--;){const g=d[f].firstChild;g&&(g.value=Wc.decode(null!==(e=g.value)&&void 0!==e?e:""))}});a.addNodeFilter("script,style",(d,e)=>{var f;const g=k=>k.replace(/(\x3c!--\[CDATA\[|\]\]--\x3e)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((\x3c!--)?(\s*\/\/)?\s*<!\[CDATA\[|(\x3c!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*\x3c!--|\/\*\s*\x3c!--\s*\*\/)\s*[\r\n]*/gi,
"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\x3e)?|\s*\/\/\s*\]\]>(--\x3e)?|\/\/\s*(--\x3e)?|\]\]>|\/\*\s*--\x3e\s*\*\/|\s*--\x3e\s*)\s*$/g,"");let h=d.length;for(;h--;){const k=d[h],l=k.firstChild,m=null!==(f=null===l||void 0===l?void 0:l.value)&&void 0!==f?f:"";if("script"===e){const n=k.attr("type");n&&k.attr("type","mce-no/type"===n?null:n.replace(/^mce\-/,""));"xhtml"===b.element_format&&l&&0<m.length&&(l.value="// <![CDATA[\n"+g(m)+"\n// ]]\x3e")}else"xhtml"===b.element_format&&l&&0<m.length&&(l.value=
"\x3c!--\n"+g(m)+"\n--\x3e")}});a.addNodeFilter("#comment",d=>{let e=d.length;for(;e--;){const f=d[e],g=f.value;b.preserve_cdata&&0===(null===g||void 0===g?void 0:g.indexOf("[CDATA["))?(f.name="#cdata",f.type=4,f.value=c.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null===g||void 0===g?void 0:g.indexOf("mce:protected "))&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(g).substr(14))}});a.addNodeFilter("xml:namespace,input",(d,e)=>{let f=d.length;for(;f--;){const g=d[f];7===g.type?g.remove():
1===g.type&&("input"!==e||g.attr("type")||g.attr("type","text"))}});a.addAttributeFilter("data-mce-type",d=>{G(d,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(a.schema.getNonEmptyElements())?e.remove():e.unwrap())})});a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,e)=>{let f=d.length;for(;f--;)d[f].attr(e,null)});b.remove_trailing_brs&&Er(b,a,a.schema)},JE=(a,b,c)=>
{let d;const e=a.dom;b=b.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const g=f.createHTMLDocument("");K.each("BODY"===b.nodeName?b.childNodes:[b],h=>{g.body.appendChild(g.importNode(h,!0))});b="BODY"!==b.nodeName?g.body.firstChild:g.body;d=e.doc;e.doc=g}FA(a,Object.assign({},c,{node:b}));d&&(e.doc=d);return b},KE=(a,b,c)=>{-1===K.inArray(b,c)&&(a.addAttributeFilter(c,(d,e)=>{let f=d.length;for(;f--;)d[f].attr(e,null)}),b.push(c))},LE=(a,b)=>{const c=["data-mce-selected"],
d=Object.assign({},{entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},a),e=b&&b.dom?b.dom:Da.DOM,f=b&&b.schema?b.schema:Xc(d),g=Ae(d,f);IE(g,d,e);return{schema:f,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:(h,k)=>{k=void 0===k?{}:k;k=Object.assign({},{format:"html"},k);h=aa(b)||!b.hasEventListeners("PreProcess")||k.no_events?h:JE(b,h,k);var l=bc(k.getInner?h.innerHTML:e.getOuterHTML(h));h=k.selection||Gg(x.fromDom(h))?l:K.trim(l);l=k.selection?
Object.assign({},{forced_root_block:!1},k):k;h=g.parse(h,l);l=h.lastChild;if("br"===(null===l||void 0===l?void 0:l.name)){const m=l.prev;"br"===(null===m||void 0===m?void 0:m.name)&&(l.remove(),m.remove())}"tree"===k.format?k=h:(h=ed(d,f).serialize(h),!k.no_events&&b?(k=Object.assign({},k,{content:h}),k=b.dispatch("PostProcess",k).content):k=h);return k},addRules:f.addValidElements,setRules:f.setValidElements,addTempAttr:A(KE,g,c),getTempAttrs:R(c),getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters,
removeNodeFilter:g.removeNodeFilter,removeAttributeFilter:g.removeAttributeFilter}},gs=(a,b)=>{a=LE(a,b);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},ME=(a,b)=>{b=void 0===b?{}:b;
b=Object.assign({},b,{format:b.format?b.format:"html",get:!0,getInner:!0});return Vr(a,b).fold(Ka,c=>{var d=(a.rtcInstance?a.rtcInstance:yh(a)).editor.getContent(c);return Wr(a,d,c)})},$k=(a,b,c)=>{c=void 0===c?{}:c;c=Object.assign({},{format:"html"},c,{set:!0,content:b});return Uk(a,c).map(d=>{var e=d.content;e=(a.rtcInstance?a.rtcInstance:yh(a)).editor.setContent(e,d);Vk(a,e.html,d);return e.content}).getOr(b)},NE="autoresize_on_init content_editable_state padd_empty_with_br block_elements boolean_attributes editor_deselector editor_selector elements file_browser_callback_types filepicker_validator_handler force_hex_style_colors force_p_newlines gecko_spellcheck images_dataimg_filter media_scripts mode move_caret_before_on_enter_elements non_empty_elements self_closing_elements short_ended_elements special spellchecker_select_languages spellchecker_whitelist tab_focus tabfocus_elements table_responsive_width text_block_elements text_inline_elements toolbar_drawer types validate whitespace_elements paste_enable_default_filters paste_filter_drop paste_word_valid_elements paste_retain_style_properties paste_convert_word_fake_lists".split(" "),
OE="template_cdate_classes template_mdate_classes template_selected_content_classes template_preview_replace_values template_replace_values templates template_cdate_format template_mdate_format".split(" "),PE="bbcode colorpicker contextmenu fullpage legacyoutput spellchecker textcolor".split(" "),hs=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],is=(a,b)=>{b=ka(b,c=>ha.call(a,c));return sd(b)},js=(a,b)=>{const c=K.makeMap(a.plugins," ");a=ka(b,d=>ha.call(c,d));return sd(a)},QE=
a=>js(a,hs.map(b=>b.name)),RE=a=>Oa(hs,b=>b.name===a).fold(()=>a,b=>b.replacedWith?`${a}, replaced by ${b.replacedWith}`:a),zh=Da.DOM,Ah=a=>p.from(a).each(b=>b.destroy()),Bh=(()=>{const a={};return{add:(b,c)=>{a[b]=c},get:b=>a[b]?a[b]:{icons:{}},has:b=>ha.call(a,b)}})(),Be=lb.ModelManager,ks=(a,b)=>b.dom[a],ls=(a,b)=>parseInt(lc(b,a),10),SE=A(ks,"clientWidth"),TE=A(ks,"clientHeight"),UE=A(ls,"margin-top"),VE=A(ls,"margin-left"),WE=(a,b,c)=>{var d=x.fromDom(a.getBody());d=a.inline?d:x.fromDom(Jb(d).dom.documentElement);
var e=a.inline;const f=d.dom.getBoundingClientRect();a=e?f.left+d.dom.clientLeft+VE(d):0;e=e?f.top+d.dom.clientTop+UE(d):0;b-=a;c-=e;a=SE(d);d=TE(d);return 0<=b&&0<=c&&b<=a&&c<=d},XE=a=>{a=a.inline?a.getBody():a.getContentAreaContainer();return p.from(a).map(x.fromDom).map(je).getOr(!1)};var YE=()=>{const a=()=>{throw Error("Theme did not provide a NotificationManager implementation.");};return{open:a,close:a,getArgs:a}};const ms=a=>{const b=[],c=()=>{const h=a.theme;return h&&h.getNotificationManagerImpl?
h.getNotificationManagerImpl():YE()},d=()=>{G(b,h=>{h.reposition()})},e=h=>{Ue(b,k=>k===h).each(k=>{b.splice(k,1)})},f=(h,k)=>{k=void 0===k?!0:k;if(a.removed||!XE(a))return{};k&&a.dispatch("BeforeOpenNotification",{notification:h});return Oa(b,l=>{l=c().getArgs(l);return l.type===h.type&&l.text===h.text&&!l.progressBar&&!l.timeout&&!h.progressBar&&!h.timeout}).getOrThunk(()=>{a.editorManager.setActive(a);const l=c().open(h,()=>{e(l);d();p.from(b[0]).fold(()=>a.focus(),m=>x.fromDom(m.getEl()).dom.focus())});
b.push(l);d();a.dispatch("OpenNotification",{notification:Object.assign({},l)});return l})},g=R(b);(h=>{h.on("SkinLoaded",()=>{const k=hz(h);k&&f({text:k,type:"warning",timeout:0},!1);d()});h.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(d)});h.on("remove",()=>{G(b.slice(),k=>{c().close(k)})})})(a);return{open:f,close:()=>{p.from(b[0]).each(h=>{c().close(h);e(h);d()})},getNotifications:g}},Ce=lb.PluginManager,Rd=lb.ThemeManager;var ZE=()=>{const a=()=>{throw Error("Theme did not provide a WindowManager implementation.");
};return{open:a,openUrl:a,alert:a,confirm:a,close:a}};const ns=a=>{let b=[];const c=()=>{const g=a.theme;return g&&g.getWindowManagerImpl?g.getWindowManagerImpl():ZE()},d=(g,h)=>(...k)=>h?h.apply(g,k):void 0,e=g=>{a.dispatch("CloseWindow",{dialog:g});b=ka(b,h=>h!==g);0===b.length&&a.focus()},f=g=>{a.editorManager.setActive(a);dk(a);a.ui.show();g=g();b.push(g);a.dispatch("OpenWindow",{dialog:g});return g};a.on("remove",()=>{G(b,g=>{c().close(g)})});return{open:(g,h)=>f(()=>c().open(g,h,e)),openUrl:g=>
f(()=>c().openUrl(g,e)),alert:(g,h,k)=>{const l=c();l.alert(g,d(k?k:l,h))},confirm:(g,h,k)=>{const l=c();l.confirm(g,d(k?k:l,h))},close:()=>{p.from(b[b.length-1]).each(g=>{c().close(g);e(g)})}}},Ch=(a,b)=>{if(a._skinLoaded)a.notificationManager.open({type:"error",text:b});else a.on("SkinLoaded",()=>{a.notificationManager.open({type:"error",text:b})})},Tf=(a,b,c)=>{a.dispatch(b,{message:c});console.error(c)},Uf=(a,b,c)=>c?`Failed to load ${a}: ${c} from url ${b}`:`Failed to load ${a} url: ${b}`,Dh=
(a,...b)=>{const c=window.console;c&&(c.error?c.error(a,...b):c.log(a,...b))},os=(a,b)=>{const c=a.editorManager.baseURL+"/skins/content",d=`content${a.editorManager.suffix}.css`;return wa(b,e=>/^[a-z0-9\-]+$/i.test(e)&&!a.inline?`${c}/${e}/${d}`:a.documentBaseURI.toAbsolute(e))},$E=(a,b)=>{const c={};return{findAll:(d,e)=>{e=void 0===e?Qa:e;d=ka(d?qb(d.getElementsByTagName("img")):[],f=>{const g=f.src;return f.hasAttribute("data-mce-bogus")||f.hasAttribute("data-mce-placeholder")||!g||g===ua.transparentSrc?
!1:Ua(g,"blob:",0)?!a.isUploaded(g)&&e(f):Ua(g,"data:",0)?e(f):!1});d=wa(d,f=>{const g=f.src;if(ha.call(c,g))return c[g].then(k=>fa(k)?k:{image:f,blobInfo:k.blobInfo});const h=SD(b,g).then(k=>{delete c[g];return{image:f,blobInfo:k}}).catch(k=>{delete c[g];return k});return c[g]=h});return Promise.all(d)}}},ps=()=>{let a={};return{hasBlobUri:b=>b in a,getResultUri:b=>(b=a[b])?b.resultUri:null,isPending:b=>b in a?1===a[b].status:!1,isUploaded:b=>b in a?2===a[b].status:!1,markPending:b=>{a[b]={status:1,
resultUri:null}},markUploaded:(b,c)=>{a[b]={status:2,resultUri:c}},removeFailed:b=>{delete a[b]},destroy:()=>{a={}}}};let aF=0;const bF=()=>{let a=[];const b=d=>{if(!d.blob||!d.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");var e=d.id||"blobid"+aF++ +("s"+(new Date).getTime().toString(36)+Math.round(4294967295*Math.random()).toString(36)+Math.round(4294967295*Math.random()).toString(36)+Math.round(4294967295*Math.random()).toString(36));
const f=d.name||e,g=d.blob;e=R(e);var h=R(f),k;(k=d.filename)||(k={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[g.type.toLowerCase()]||"dat",k=f+"."+k);return{id:e,name:h,filename:R(k),blob:R(g),base64:R(d.base64),blobUri:R(d.blobUri||URL.createObjectURL(g)),uri:R(d.uri)}},c=d=>Oa(a,e=>e.id()===d).getOrUndefined();return{create:(d,e,f,g,h)=>{if(fa(d))return b({id:d,
name:g,filename:h,blob:e,base64:f});if(jb(d))return b(d);throw Error("Unknown input type");},add:d=>{c(d.id())||a.push(d)},get:c,getByUri:d=>Oa(a,e=>e.blobUri()===d).getOrUndefined(),getByData:(d,e)=>Oa(a,f=>f.base64()===d&&f.blob().type===e).getOrUndefined(),findFirst:d=>Te(a,d,za).getOrUndefined(),removeByUri:d=>{a=ka(a,e=>e.blobUri()===d?(URL.revokeObjectURL(e.blobUri()),!1):!0)},destroy:()=>{G(a,d=>{URL.revokeObjectURL(d.blobUri())});a=[]}}},cF=(a,b)=>{const c={},d=(n,t)=>new Promise((y,w)=>{const q=
new XMLHttpRequest;q.open("POST",b.url);q.withCredentials=b.credentials;q.upload.onprogress=v=>{t(v.loaded/v.total*100)};q.onerror=()=>{w("Image upload failed due to a XHR Transport error. Code: "+q.status)};q.onload=()=>{if(200>q.status||300<=q.status)w("HTTP Error: "+q.status);else{var v=JSON.parse(q.responseText);if(v&&fa(v.location)){var z=b.basePath;v=v.location;z=z?z.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v;y(z)}else w("Invalid JSON: "+q.responseText)}};const r=new FormData;r.append("file",
n.blob(),n.filename());q.send(r)}),e=ya(b.handler)?b.handler:d,f=()=>new Promise(n=>{n([])}),g=(n,t)=>({url:"",blobInfo:n,status:!1,error:t}),h=(n,t)=>{K.each(c[n],y=>{y(t)});delete c[n]},k=(n,t,y)=>{a.markPending(n.blobUri());return new Promise(w=>{let q,r;try{r=v=>{0>v||100<v||p.from(q).orThunk(()=>p.from(y).map(Bi)).each(z=>{q=z;z.progressBar.value(v)})},t(n,r).then(v=>{q&&(q.close(),r=pa);a.markUploaded(n.blobUri(),v);h(n.blobUri(),{url:v,blobInfo:n,status:!0});w({url:v,blobInfo:n,status:!0})},
v=>{v=fa(v)?{message:v}:v;q&&(q.close(),r=pa);a.removeFailed(n.blobUri());h(n.blobUri(),g(n,v));w(g(n,v))})}catch(v){w(g(n,v))}})},l=n=>{const t=n.blobUri();return new Promise(y=>{c[t]=c[t]||[];c[t].push(y)})},m=(n,t)=>{n=K.grep(n,y=>!a.isUploaded(y.blobUri()));return Promise.all(K.map(n,y=>a.isPending(y.blobUri())?l(y):k(y,e,t)))};return{upload:(n,t)=>b.url||e!==d?m(n,t):f()}},qs=a=>()=>a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),rs=
(a,b)=>cF(b,{url:Vy(a),basePath:Wy(a),credentials:Xy(a),handler:Yy(a)}),dF=a=>b=>{if(a.dom.isEmpty(b.dom)&&Ma(a.schema.getTextBlockElements()[b.dom.nodeName.toLowerCase()])){var c=x.fromHtml('<br data-mce-bogus="1" />');b.dom.appendChild(c.dom)}},eF=a=>{const b=bF();let c,d;const e=ps(),f=[],g=q=>r=>a.selection?q(r):[],h=(q,r,v)=>{let z=0;do z=q.indexOf(r,z),-1!==z&&(q=q.substring(0,z)+v+q.substr(z+r.length),z+=v.length-r.length+1);while(-1!==z);return q},k=(q,r,v)=>{q=h(q,`src="${r}"`,`src="${v}"${v===
ua.transparentSrc?' data-mce-placeholder="1"':""}`);return q=h(q,'data-mce-src="'+r+'"','data-mce-src="'+v+'"')},l=(q,r)=>{G(a.undoManager.data,v=>{"fragmented"===v.type?v.fragments=wa(v.fragments,z=>k(z,q,r)):v.content=k(v.content,q,r)})},m=()=>{c||(c=rs(a,e));return y().then(g(q=>{const r=wa(q,v=>v.blobInfo);return c.upload(r,qs(a)).then(g(v=>{const z=[];let P=!1;v=wa(v,(N,Y)=>{const {blobInfo:O,image:L}=q[Y];Y=!1;if(N.status&&Ty(a)){if(N.url&&!eb(L.src,N.url)&&(P=!0),b.removeByUri(L.src),!ha.call(a.plugins,
"rtc")){var U=N.url;const ja=a.convertURL(U,"src");l(L.src,U);Mc(x.fromDom(L),{src:vo(a)?U+(-1===U.indexOf("?")?"?":"&")+(new Date).getTime():U,"data-mce-src":ja})}}else N.error&&(N.error.remove&&(l(L.src,ua.transparentSrc),z.push(L),Y=!0),Ch(a,cc.translate(["Failed to upload image: {0}",N.error.message])));return{element:L,status:N.status,uploadUri:N.url,blobInfo:O,removed:Y}});0<z.length&&!ha.call(a.plugins,"rtc")?a.undoManager.transact(()=>{G(wa(z,x.fromDom),N=>{const Y=Rb(N);Ja(N);Y.each(dF(a));
b.removeByUri(N.dom.src)})}):P&&a.undoManager.dispatchChange();return v}))}))},n=()=>uo(a)?m():Promise.resolve([]),t=q=>Lc(f,r=>r(q)),y=()=>{d||(d=$E(e,b));return d.findAll(a.getBody(),t).then(g(q=>{q=ka(q,r=>fa(r)?(Ch(a,r),!1):"blob"===r.uriType?!1:!0);ha.call(a.plugins,"rtc")||G(q,r=>{l(r.image.src,r.blobInfo.blobUri());r.image.src=r.blobInfo.blobUri();r.image.removeAttribute("data-mce-src")});return q}))},w=q=>q.replace(/src="(blob:[^"]+)"/g,(r,v)=>{var z=e.getResultUri(v);if(z)return'src="'+z+
'"';(z=b.getByUri(v))||(z=Db(a.editorManager.get(),(P,N)=>P||N.editorUpload&&N.editorUpload.blobCache.getByUri(v),void 0));return z?'src="data:'+z.blob().type+";base64,"+z.base64()+'"':r});a.on("SetContent",()=>{uo(a)?n():y()});a.on("RawSaveContent",q=>{q.content=w(q.content)});a.on("GetContent",q=>{q.source_view||"raw"===q.format||"tree"===q.format||(q.content=w(q.content))});a.on("PostRender",()=>{a.parser.addNodeFilter("img",q=>{G(q,r=>{var v=r.attr("src");v&&!b.getByUri(v)&&(v=e.getResultUri(v))&&
r.attr("src",v)})})});return{blobCache:b,addFilter:q=>{f.push(q)},uploadImages:m,uploadImagesAuto:n,scanForImages:y,destroy:()=>{b.destroy();e.destroy();d=c=null}}},fF=a=>{const b=a.dom,c=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},
{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{b.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",
styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",
marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},
{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{b.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",
styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},
f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==c?[g,e,f]:[e,g,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,
styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,f,g)=>V(e)&&e.hasAttribute("href"),onformat:(e,f,g)=>{K.each(g,(h,k)=>{b.setAttrib(e,k,h)})}},lang:{inline:"span",
clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var f;return null!==(f=null===e||void 0===e?void 0:e.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};
K.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{d[e]={block:e,remove:"all"}});return d},ss={remove_similar:!0,inherit:!1},De=Object.assign({},{selector:"td,th"},ss),gF={tablecellbackgroundcolor:Object.assign({},{styles:{backgroundColor:"%value"}},De),tablecellverticalalign:Object.assign({},{styles:{"vertical-align":"%value"}},De),tablecellbordercolor:Object.assign({},{styles:{borderColor:"%value"}},De),tablecellclass:Object.assign({},{classes:["%value"]},De),tableclass:Object.assign({},
{selector:"table",classes:["%value"]},ss),tablecellborderstyle:Object.assign({},{styles:{borderStyle:"%value"}},De),tablecellborderwidth:Object.assign({},{styles:{borderWidth:"%value"}},De)},hF=R(gF),iF=a=>{const b={},c=(d,e)=>{d&&(fa(d)?(Sa(e)||(e=[e]),G(e,f=>{db(f.deep)&&(f.deep=!ra(f,"selector"));db(f.split)&&(f.split=!ra(f,"selector")||ra(f,"inline"));db(f.remove)&&ra(f,"selector")&&!ra(f,"inline")&&(f.remove="none");ra(f,"selector")&&ra(f,"inline")&&(f.mixed=!0,f.block_expand=!0);fa(f.classes)&&
(f.classes=f.classes.split(/\s+/))}),b[d]=e):Ea(d,(f,g)=>{c(g,f)}))};c(fF(a));c(hF());c(kz(a));return{get:d=>aa(d)?b:b[d],has:d=>ha.call(b,d),register:c,unregister:d=>{d&&b[d]&&delete b[d];return b}}},Eh=K.each,Ob=Da.DOM,al=a=>!aa(a)&&jb(a),ts=(a,b)=>{const c=b&&b.schema||Xc({}),d=h=>{h=fa(h)?{name:h,classes:[],attrs:{}}:h;const k=Ob.create(h.name);0<h.classes.length&&Ob.addClass(k,h.classes.join(" "));Ob.setAttribs(k,h.attrs);return k},e=(h,k)=>{h=c.getElementRule(h.nodeName.toLowerCase());return(h=
null===h||void 0===h?void 0:h.parentsRequired)&&h.length?k&&-1<Ca.call(h,k)?k:h[0]:!1},f=(h,k,l)=>{let m;const n=k[0],t=al(n)?n.name:void 0,y=e(h,t);if(y)t===y?(m=n,k=k.slice(1)):m=y;else if(n)m=n,k=k.slice(1);else if(!l)return h;const w=m?d(m):Ob.create("div");w.appendChild(h);l&&K.each(l,q=>{q=d(q);w.insertBefore(q,h)});l=al(m)?m.siblings:void 0;return f(w,k,l)};b=Ob.create("div");if(0<a.length){var g=a[0];const h=d(g);g=al(g)?g.siblings:void 0;b.appendChild(f(h,a.slice(1),g))}return b},jF=a=>{a=
K.trim(a);let b="div";const c={name:b,classes:[],attrs:{},selector:a};"*"!==a&&(b=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(d,e,f,g,h)=>{switch(e){case "#":c.attrs.id=f;break;case ".":c.classes.push(f);break;case ":":-1!==K.inArray(["checked","disabled","enabled","read-only","required"],f)&&(c.attrs[f]=f)}"["===g&&(d=h.match(/([\w\-]+)(?:="([^"]+))?/))&&(c.attrs[d[1]]=d[2]);return""}));c.name=b||"div";return c},kF=a=>{if(!fa(a))return[];a=a.split(/\s*,\s*/)[0];a=a.replace(/\s*(~\+|~|\+|>)\s*/g,
"$1");return K.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{b=K.map(b.split(/(?:~\+|~|\+)/),jF);const c=b.pop();b.length&&(c.siblings=b);return c}).reverse()},lF=(a,b)=>{let c="",d=lz(a);if(""===d)return"";const e=m=>fa(m)?m.replace(/%(\w+)/g,""):"",f=(m,n)=>Ob.getStyle(null!==n&&void 0!==n?n:a.getBody(),m,!0);if(fa(b)){b=a.formatter.get(b);if(!b)return"";b=b[0]}if("preview"in b){var g=b.preview;if(!1===g)return"";d=g||d}g=b.block||b.inline||"span";var h=kF(b.selector);0<h.length?(h[0].name||(h[0].name=
g),g=b.selector,h=ts(h,a)):h=ts([g],a);const k=Ob.select(g,h)[0]||h.firstChild;Eh(b.styles,(m,n)=>{(m=e(m))&&Ob.setStyle(k,n,m)});Eh(b.attributes,(m,n)=>{(m=e(m))&&Ob.setAttrib(k,n,m)});Eh(b.classes,m=>{m=e(m);Ob.hasClass(k,m)||Ob.addClass(k,m)});a.dispatch("PreviewFormats");Ob.setStyles(h,{position:"absolute",left:-65535});a.getBody().appendChild(h);b=f("fontSize");const l=/px$/.test(b)?parseInt(b,10):0;Eh(d.split(" "),m=>{let n=f(m,k);if("background-color"===m&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&
(n=f(m),"#ffffff"===Ef(n).toLowerCase()))return;if("color"!==m||"#000000"!==Ef(n).toLowerCase()){if("font-size"===m&&/em|%$/.test(n)){if(0===l)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*l+"px"}"border"===m&&n&&(c+="padding:0 2px;");c+=m+":"+n+";"}});a.dispatch("AfterPreviewFormats");Ob.remove(h);return c},mF=a=>{a.addShortcut("meta+b","","Bold");a.addShortcut("meta+i","","Italic");a.addShortcut("meta+u","","Underline");for(let b=1;6>=b;b++)a.addShortcut("access+"+b,"",["FormatBlock",!1,"h"+b]);a.addShortcut("access+7",
"",["FormatBlock",!1,"p"]);a.addShortcut("access+8","",["FormatBlock",!1,"div"]);a.addShortcut("access+9","",["FormatBlock",!1,"address"])},us=a=>{const b=iF(a),c=Wa({});mF(a);pD(a);ha.call(a.plugins,"rtc")||GD(c,a);return{get:b.get,has:b.has,register:b.register,unregister:b.unregister,apply:(d,e,f)=>{La(a).formatter.apply(d,e,f)},remove:(d,e,f,g)=>{La(a).formatter.remove(d,e,f,g)},toggle:(d,e,f)=>{La(a).formatter.toggle(d,e,f)},match:(d,e,f,g)=>La(a).formatter.match(d,e,f,g),closest:d=>La(a).formatter.closest(d),
matchAll:(d,e)=>La(a).formatter.matchAll(d,e),matchNode:(d,e,f,g)=>La(a).formatter.matchNode(d,e,f,g),canApply:d=>La(a).formatter.canApply(d),formatChanged:(d,e,f,g)=>La(a).formatter.formatChanged(c,d,e,f,g),getCssText:A(lF,a)}},vs=a=>{switch(a.toLowerCase()){case "undo":case "redo":case "mcefocus":return!0;default:return!1}},nF=(a,b,c)=>{const d=Wa(!1),e=f=>{0===c.get()&&(b.typing=!1);b.add({},f)};a.on("init",()=>{b.add()});a.on("BeforeExecCommand",f=>{vs(f.command)||(b.typing&&(0===c.get()&&(b.typing=
!1),b.add()),b.beforeChange())});a.on("ExecCommand",f=>{vs(f.command)||e(f)});a.on("ObjectResizeStart cut",()=>{b.beforeChange()});a.on("SaveContent ObjectResized blur",e);a.on("dragend",e);a.on("keyup",f=>{const g=f.keyCode;if(!f.isDefaultPrevented()){var h=ua.os.isMacOS()&&"Meta"===f.key;if(33<=g&&36>=g||37<=g&&40>=g||45===g||f.ctrlKey||h)e(),a.nodeChanged();46!==g&&8!==g||a.nodeChanged();d.get()&&b.typing&&!Zk(xh(a),b.data[0])&&(a.isDirty()||a.setDirty(!0),a.dispatch("TypingUndo"),d.set(!1),a.nodeChanged())}});
a.on("keydown",f=>{const g=f.keyCode;if(!f.isDefaultPrevented())if(33<=g&&36>=g||37<=g&&40>=g||45===g)b.typing&&e(f);else{var h=f.ctrlKey&&!f.altKey||f.metaKey;!(16>g||20<g)||224===g||91===g||b.typing||h?(ua.os.isMacOS()?f.metaKey:f.ctrlKey&&!f.altKey)&&b.beforeChange():(b.beforeChange(),0===c.get()&&(b.typing=!0),b.add({},f),d.set(!0))}});a.on("mousedown",f=>{b.typing&&e(f)});a.on("input",f=>{f.inputType&&("insertReplacementText"===f.inputType||"insertText"===f.inputType&&null===f.data||"insertFromPaste"===
f.inputType||"insertFromDrop"===f.inputType)&&e(f)});a.on("AddUndo Undo Redo ClearUndos",f=>{f.isDefaultPrevented()||a.nodeChanged()})},oF=a=>{a.addShortcut("meta+z","","Undo");a.addShortcut("meta+y,meta+shift+z","","Redo")},ws=a=>{const b=Yc(),c=Wa(0),d=Wa(0),e={data:[],typing:!1,beforeChange:()=>{La(a).undoManager.beforeChange(c,b)},add:(f,g)=>{var h=e;return La(a).undoManager.add(h,d,c,b,f,g)},dispatchChange:()=>{a.setDirty(!0);const f=xh(a);f.bookmark=wj(a.selection);a.dispatch("change",{level:f,
lastLevel:$a(e.data,d.get()).getOrUndefined()})},undo:()=>{var f=e;return La(a).undoManager.undo(f,c,d)},redo:()=>{var f=e.data;return La(a).undoManager.redo(d,f)},clear:()=>{var f=e;La(a).undoManager.clear(f,d)},reset:()=>{var f=e;La(a).undoManager.reset(f)},hasUndo:()=>{var f=e;return La(a).undoManager.hasUndo(f,d)},hasRedo:()=>{var f=e;return La(a).undoManager.hasRedo(f,d)},transact:f=>{var g=e;return La(a).undoManager.transact(g,c,f)},ignore:f=>{La(a).undoManager.ignore(c,f)},extra:(f,g)=>{var h=
e;La(a).undoManager.extra(h,d,f,g)}};ha.call(a.plugins,"rtc")||nF(a,e,c);oF(a);return e},pF=[9,27,X.HOME,X.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,X.DOWN,X.UP,X.LEFT,X.RIGHT].concat(ua.browser.isFirefox()?[224]:[]),xs=a=>{a=a.keyCode;return a===X.BACKSPACE||a===X.DELETE},qF=a=>{var b;const c=a.dom,d=vb(a),e=null!==(b=gz(a))&&void 0!==b?b:"",f=(g,h)=>{if("keydown"===g.type||"keyup"===g.type){var k=g.keyCode;k=!xs(g)&&(X.metaKeyPressed(g)||g.altKey||112<=k&&123>=k||-1<Ca.call(pF,k))}else k=
!1;!k&&(k=a.getBody(),g="keydown"!==g.type&&"keyup"!==g.type||xs(g)||"keyup"===g.type&&229===g.keyCode?Pa(x.fromDom(k),!1)?(g=k.firstElementChild)?c.getStyle(k.firstElementChild,"padding-left")||c.getStyle(k.firstElementChild,"padding-right")?!1:d===g.nodeName.toLowerCase():!0:!1:!1,""!==c.getAttrib(k,"data-mce-placeholder")!==g||h)&&(c.setAttrib(k,"data-mce-placeholder",g?e:null),c.setAttrib(k,"aria-placeholder",g?e:null),a.dispatch("PlaceholderToggle",{state:g}),a.on(g?"keydown":"keyup",f),a.off(g?
"keyup":"keydown",f))};if(0<e.length)a.on("init",g=>{f(g,!0);a.on("change SetContent ExecCommand",f);a.on("paste",h=>Mb.setEditorTimeout(a,()=>f(h)))})},rF=(a,b)=>({from:a,to:b}),bl=(a,b)=>{a=x.fromDom(a);const c=x.fromDom(b.container());return rh(a,c).map(d=>({block:d,position:b}))},ys=(a,b)=>vd(b,c=>oe(c)||Sb(c.dom),c=>c.dom===a.dom).filter(tb).getOr(a),sF=(a,b,c)=>Ga(c.position.getNode())&&!Pa(c.block)?ve(!1,c.block.dom).bind(d=>d.isEqual(c.position)?Lb(b,a,d).bind(e=>bl(a,e)):p.some(c)).getOr(c):
c,tF=(a,b,c)=>{c=bl(a,C.fromRangeStart(c));const d=c.bind(e=>Lb(b,a,e.position).bind(f=>bl(a,f).map(g=>sF(a,b,g))));return sb(c,d,rF).filter(e=>{var f;if(f=e.from.block.dom!==e.to.block.dom){var g=x.fromDom(a);f=ys(g,e.from.block);g=ys(g,e.to.block);f=f.dom===g.dom}f&&(f=!1===va(e.from.block.dom)&&!1===va(e.to.block.dom));f&&(f=e.from.block,f=Wi(f)||f.dom.hasAttribute("data-mce-block"))&&(e=e.to.block,f=Wi(e)||e.dom.hasAttribute("data-mce-block"));return f})},uF=(a,b,c)=>c.collapsed?tF(a,b,c):p.none(),
vF=a=>{const b=bb(a);return Ue(b,Kb).fold(R(b),c=>b.slice(0,c))},zs=a=>{a=vF(a);G(a,Ja);return a},As=(a,b)=>{a=[b].concat(id(b,a,za));return Oa(a.reverse(),c=>Pa(c)).each(Ja)},wF=a=>0===ka(ae(zg(a,Nc)),b=>!Pa(b)).length,xF=(a,b,c,d)=>{if(Pa(c))return Dc(c),ob(c.dom);wF(d)&&Pa(b)&&Bb(d,x.fromTag("br"));c=nb(c.dom,C.before(d.dom));G(zs(b),e=>{Bb(d,e)});As(a,b);return c},yF=(a,b,c)=>{if(Pa(c))return Pa(b)&&(a=Se((e=>{const f=(g,h)=>kc(g,0).fold(()=>h,k=>Fg(k)?f(k,h.concat(x.fromDom(k.dom.cloneNode(!1)))):
h);return f(e,[])})(c),(e,f)=>{Bb(e,f);f.dom.appendChild(e.dom);return f},Hg()),ke(b),b.dom.appendChild(a.dom)),Ja(c),ob(b.dom);const d=Tb(c.dom);G(zs(b),e=>{c.dom.appendChild(e.dom)});As(a,b);return d},Bs=(a,b)=>{ve(a,b.dom).bind(c=>p.from(c.getNode())).map(x.fromDom).filter(Ad).each(Ja)},Cs=(a,b,c)=>{Bs(!0,b);Bs(!1,c);if(zc(c,b)){var d=[b].concat(id(b,c,za));d=p.from(d[d.length-1])}else d=p.none();return d.fold(A(yF,a,b,c),A(xF,a,b,c))},Ds=(a,b,c,d)=>b?Cs(a,d,c):Cs(a,c,d),cl=(a,b)=>{const c=x.fromDom(a.getBody());
return uF(c.dom,b,a.selection.getRng()).map(d=>()=>{Ds(c,b,d.from.block,d.to.block).each(e=>{a.selection.setRng(e.toRange())})})},zF=(a,b)=>{const c=b.getRng();return sb(rh(a,x.fromDom(c.startContainer)),rh(a,x.fromDom(c.endContainer)),(d,e)=>d.dom!==e.dom?p.some(()=>{c.deleteContents();Ds(a,!0,d,e).each(f=>{b.setRng(f.toRange())})}):p.none()).getOr(p.none())},Es=(a,b)=>{b=x.fromDom(b);a=A(yc,a);return Ac(b,oe,a).isSome()},AF=a=>p.some(()=>{a.setContent("");a.selection.setCursorLocation()}),dl=(a,
b)=>{if(a.selection.isCollapsed())a=p.none();else{const d=x.fromDom(a.getBody());var c=a.selection.getRng();b=d;const e=nb(b.dom,C.fromRangeStart(c)).isNone(),f=mb(b.dom,C.fromRangeEnd(c)).isNone();a=!Es(b,c.startContainer)&&!Es(b,c.endContainer)&&e&&f?AF(a):zF(d,a.selection)}return a},Gc=(a,b,c,d,e)=>p.from(b._selectionOverrides.showCaret(a,c,d,e)),Vf=(a,b)=>{if(a.dispatch("BeforeObjectSelected",{target:b}).isDefaultPrevented())return p.none();a=p;var c=a.some;const d=b.ownerDocument.createRange();
d.selectNode(b);return c.call(a,d)},el=(a,b,c)=>{if(b.collapsed){var d=Dj(1,a.getBody(),b);d=C.fromRangeStart(d);var e=d.getNode();wf(e)?a=Gc(1,a,e,!d.isAtEnd(),!1):(e=d.getNode(!0),wf(e)?a=Gc(1,a,e,!1,!1):(d=Qd(a.dom.getRoot(),d.getNode()),a=wf(d)?Gc(1,a,d,!1,c):p.none()));b=a.getOr(b)}return b},BF=a=>gd(a)||Lf(a),CF=a=>hd(a)||Mf(a),DF=(a,b)=>{E(b)&&0===b.data.length&&a.remove(b)},Fs=(a,b,c,d,e,f)=>{Gc(d,a,f.getNode(!e),e,!0).each(g=>{if(b.collapsed){const h=b.cloneRange();e?h.setEnd(g.startContainer,
g.startOffset):h.setStart(g.endContainer,g.endOffset);h.deleteContents()}else b.deleteContents();a.selection.setRng(g)});DF(a.dom,c)},EF=(a,b)=>{const c=a.selection.getRng();if(!E(c.commonAncestorContainer))return p.none();const d=b?Xa.Forwards:Xa.Backwards;var e=pc(a.getBody());e=A(Ej,b?e.next:e.prev);const f=b?BF:CF,g=Bf(d,a.getBody(),c),h=e(g),k=h?Nb(b,h):h;if(!k||!$g(g,k))return p.none();if(f(k))return p.some(()=>Fs(a,c,g.getNode(),d,b,k));const l=e(k);return l&&f(l)&&$g(k,l)?p.some(()=>Fs(a,
c,g.getNode(),d,b,l)):p.none()},fl=(a,b)=>EF(a,b),gl=(a,b)=>{a=a.getBody();return b?ob(a).filter(gd):Tb(a).filter(hd)},hl=a=>{const b=a.selection.getRng();return!b.collapsed&&(gl(a,!0).exists(c=>c.isEqual(C.fromRangeStart(b)))||gl(a,!1).exists(c=>c.isEqual(C.fromRangeEnd(b))))},Fb=nc.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),FF=(a,b)=>{b=b.getNode(!a);a=a?"after":"before";return V(b)&&b.getAttribute("data-mce-caret")===a},GF=(a,b,c,d)=>{const e=f=>
Fg(x.fromDom(f))&&!oc(c,d,a);return Zg(b?-1:0,c).filter(va).fold(()=>Zg(b?0:-1,d).filter(va).fold(za,e),e)},Gs=(a,b,c,d)=>{const e=d.getNode(!b);return rh(x.fromDom(a),x.fromDom(c.getNode())).map(f=>Pa(f)?Fb.remove(f.dom):Fb.moveToElement(e)).orThunk(()=>p.some(Fb.moveToElement(e)))},Hs=(a,b,c)=>Lb(b,a,c).bind(d=>{var e=d.getNode();return Ma(e)&&(oe(x.fromDom(e))||hf(x.fromDom(e)))?p.none():GF(a,b,c,d)?p.none():b&&va(d.getNode())?Gs(a,b,c,d):!b&&va(d.getNode(!0))?Gs(a,b,c,d):b&&hd(c)?p.some(Fb.moveToPosition(d)):
!b&&gd(c)?p.some(Fb.moveToPosition(d)):p.none()}),HF=(a,b)=>null===b||void 0===b?p.none():a&&va(b.nextSibling)?p.some(Fb.moveToElement(b.nextSibling)):!a&&va(b.previousSibling)?p.some(Fb.moveToElement(b.previousSibling)):p.none(),IF=(a,b,c)=>c.fold(d=>p.some(Fb.remove(d)),d=>p.some(Fb.moveToElement(d)),d=>oc(b,d,a)?p.none():p.some(Fb.moveToPosition(d))),JF=(a,b,c)=>FF(b,c)?HF(b,c.getNode(!b)).orThunk(()=>Hs(a,b,c)):Hs(a,b,c).bind(d=>IF(a,c,d)),KF=(a,b,c)=>{c=Dj(b?1:-1,a,c);c=C.fromRangeStart(c);const d=
x.fromDom(a);return!b&&hd(c)?p.some(Fb.remove(c.getNode(!0))):b&&gd(c)?p.some(Fb.remove(c.getNode())):!b&&gd(c)&&pk(d,c)?OB(d,c).map(e=>Fb.remove(e.getNode())):b&&hd(c)&&ok(d,c)?PB(d,c).map(e=>Fb.remove(e.getNode())):JF(a,b,c)},LF=(a,b)=>c=>{a._selectionOverrides.hideFakeCaret();Od(a,b,x.fromDom(c));return!0},MF=(a,b)=>c=>{c=b?C.before(c):C.after(c);a.selection.setRng(c.toRange());return!0},NF=a=>b=>{a.selection.setRng(b.toRange());return!0},Is=(a,b)=>p.from(Qd(a.getBody(),b)),OF=(a,b)=>{const c=
a.selection.getNode();return Is(a,c).filter(va).fold(()=>KF(a.getBody(),b,a.selection.getRng()).map(d=>()=>d.fold(LF(a,b),MF(a,b),NF(a))),()=>p.some(pa))},PF=(a,b)=>{const c=a.selection.getNode();return va(c)&&!ne(c)?Is(a,c.parentNode).filter(va).fold(()=>p.some(()=>{var d=x.fromDom(a.getBody());d=Ab(".mce-offscreen-selection",d);G(d,Ja);Od(a,b,x.fromDom(a.selection.getNode()));uk(a)}),()=>p.some(pa)):hl(a)?p.some(()=>{Aq(a,a.selection.getRng(),x.fromDom(a.getBody()))}):p.none()},Js=a=>{const b=a.dom,
c=a.selection;a=Qd(a.getBody(),c.getNode());if(Sb(a)&&b.isBlock(a)&&b.isEmpty(a)){const d=b.create("br",{"data-mce-bogus":"1"});b.setHTML(a,"");a.appendChild(d);c.setRng(C.before(d).toRange())}return!0},il=(a,b)=>a.selection.isCollapsed()?OF(a,b):PF(a,b),QF=(a,b)=>{const c=C.fromRangeStart(a.selection.getRng());return Lb(b,a.getBody(),c).filter(d=>b?IB(d):JB(d)).bind(d=>Zg(b?0:-1,d)).map(d=>()=>a.selection.select(d))},jl=(a,b)=>a.selection.isCollapsed()?QF(a,b):p.none(),Ks=a=>E(a)&&"\ufeff"===a.data[a.data.length-
1],Ls=a=>{var b;return(null!==(b=a.ownerDocument)&&void 0!==b?b:document).createTextNode("\ufeff")},Fh=(a,b)=>{if(a){var c;if(E(b.previousSibling))Ks(b.previousSibling)||b.previousSibling.appendData("\ufeff"),b=b.previousSibling;else if(E(b))E(b)&&"\ufeff"===b.data[0]||b.insertData(0,"\ufeff");else{var d=Ls(b);null===(c=b.parentNode)||void 0===c?void 0:c.insertBefore(d,b);b=d}}else{var e;E(b.nextSibling)?(c=b.nextSibling,E(c)&&"\ufeff"===c.data[0]||b.nextSibling.insertData(0,"\ufeff"),b=b.nextSibling):
E(b)?Ks(b)||b.appendData("\ufeff"):(c=Ls(b),b.nextSibling?null===(d=b.parentNode)||void 0===d?void 0:d.insertBefore(c,b.nextSibling):null===(e=b.parentNode)||void 0===e?void 0:e.appendChild(c),b=c)}return b},RF=A(Fh,!0),SF=A(Fh,!1),Ms=(a,b)=>E(a.container())?Fh(b,a.container()):Fh(b,a.getNode()),Ns=(a,b)=>(b=b.get())&&a.container()===b&&Vc(b),kl=(a,b)=>b.fold(c=>{ad(a.get());c=RF(c);a.set(c);return p.some(C(c,c.length-1))},c=>ob(c).map(d=>{if(Ns(d,a))return d=a.get(),C(d,1);ad(a.get());d=Ms(d,!0);
a.set(d);return C(d,1)}),c=>Tb(c).map(d=>{if(Ns(d,a))return d=a.get(),C(d,d.length-1);ad(a.get());d=Ms(d,!1);a.set(d);return C(d,d.length-1)}),c=>{ad(a.get());c=SF(c);a.set(c);return p.some(C(c,1))}),Os=(a,b)=>{for(let c=0;c<a.length;c++){const d=a[c].apply(null,b);if(d.isSome())return d}return p.none()},pb=nc.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Ps=(a,b)=>(b=bd(b,a))?b:a,TF=(a,b,c)=>{const d=wq(c),e=Ps(b,d.container());return jd(a,e,d).fold(()=>
mb(e,d).bind(A(jd,a,e)).map(f=>pb.before(f)),p.none)},UF=(a,b)=>null===Jd(a,b),Qs=(a,b,c)=>jd(a,b,c).filter(A(UF,b)),VF=(a,b,c)=>{const d=xq(c);return Qs(a,b,d).bind(e=>nb(e,d).isNone()?p.some(pb.start(e)):p.none())},WF=(a,b,c)=>{const d=wq(c);return Qs(a,b,d).bind(e=>mb(e,d).isNone()?p.some(pb.end(e)):p.none())},XF=(a,b,c)=>{const d=xq(c),e=Ps(b,d.container());return jd(a,e,d).fold(()=>nb(e,d).bind(A(jd,a,e)).map(f=>pb.after(f)),p.none)},Rs=a=>!vq(a.fold(Ka,Ka,Ka,Ka)),tc=(a,b,c)=>Os([TF,VF,WF,XF],
[a,b,c]).filter(Rs),Ss=a=>a.fold(R("before"),R("start"),R("end"),R("after")),Gh=a=>a.fold(pb.before,pb.before,pb.after,pb.after),ll=a=>a.fold(pb.start,pb.start,pb.end,pb.end),YF=(a,b,c,d,e,f)=>sb(jd(b,c,d),jd(b,c,e),(g,h)=>{var k;if(k=g!==h){k=bd(g,c);const l=bd(h,c);k=Ma(k)&&k===l}return k?pb.after(a?g:h):f}).getOr(f),ZF=(a,b)=>a.fold(Qa,c=>!(Ss(c)===Ss(b)&&c.fold(Ka,Ka,Ka,Ka)===b.fold(Ka,Ka,Ka,Ka))),$F=(a,b,c,d,e)=>{const f=Nb(a,e);return Lb(a,c,f).map(A(Nb,a)).fold(()=>d.map(Gh),g=>tc(b,c,g).map(A(YF,
a,b,c,f,g)).filter(A(ZF,d))).filter(Rs)},aG=(a,b)=>a?b.fold(Kc(p.some,pb.start),p.none,Kc(p.some,pb.after),p.none):b.fold(p.none,Kc(p.some,pb.before),p.none,Kc(p.some,pb.end)),bG=(a,b,c,d)=>{const e=Nb(a,d),f=tc(b,c,e);return tc(b,c,e).bind(A(aG,a)).orThunk(()=>$F(a,b,c,f,d))},Ts=(a,b,c)=>{const d=a?1:-1;b.setRng(C(c.container(),c.offset()+d).toRange());b.getSel().modify("move",a?"forward":"backward","word");return!0};var uc;(function(a){a[a.Br=0]="Br";a[a.Block=1]="Block";a[a.Wrap=2]="Wrap";a[a.Eol=
3]="Eol"})(uc||(uc={}));const Hh=(a,b)=>a===Xa.Backwards?ae(b):b,Us=(a,b,c,d)=>{var e=pc(c);let f=d;for(d=[];f;){c=e;var g=f;c=b===Xa.Forwards?c.next(g):c.prev(g);if(!c)break;if(Ga(c.getNode(!1)))return b===Xa.Forwards?{positions:Hh(b,d).concat([c]),breakType:uc.Br,breakAt:p.some(c)}:{positions:Hh(b,d),breakType:uc.Br,breakAt:p.some(c)};if(c.isVisible()){if(a(f,c))return a=f,e=c,a=Ga(e.getNode(b===Xa.Forwards))?uc.Br:!1===oc(a,e)?uc.Block:uc.Wrap,{positions:Hh(b,d),breakType:a,breakAt:p.some(c)};
d.push(c)}f=c}return{positions:Hh(b,d),breakType:uc.Eol,breakAt:p.none()}},Vs=(a,b,c,d)=>b(c,d).breakAt.map(e=>{const f=b(c,e).positions;return a===Xa.Backwards?f.concat(e):[e].concat(f)}).getOr([]),ml=(a,b)=>Db(a,(c,d)=>c.fold(()=>p.some(d),e=>sb($a(e.getClientRects(),0),$a(d.getClientRects(),0),(f,g)=>Math.abs(b-g.left)<=Math.abs(b-f.left)?d:e).or(c)),p.none()),Ih=(a,b)=>$a(b.getClientRects(),0).bind(c=>ml(a,c.left)),Wf=A(Us,C.isAbove,-1),Xf=A(Us,C.isBelow,1),Ws=A(Vs,-1,Wf),Xs=A(Vs,1,Xf),cG=a=>
ob(a).map(b=>[b].concat(Xf(a,b).positions)).getOr([]),dG=a=>Tb(a).map(b=>Wf(a,b).positions.concat(b)).getOr([]),eG=(a,b)=>Ih(Ws(a,b),b),fG=(a,b)=>Ih(Xs(a,b),b),Ys=(a,b)=>vg(a,(c,d)=>{const e=Math.min(Math.abs(c.left-b),Math.abs(c.right-b)),f=Math.min(Math.abs(d.left-b),Math.abs(d.right-b));return f===e&&ra(d,"node")&&va(d.node)||f<e?d:c}),Zs=a=>{const b=c=>wa(c,d=>{d=Hd(d);d.node=a;return d});if(V(a))return b(a.getClientRects());if(E(a)){const c=a.ownerDocument.createRange();c.setStart(a,0);c.setEnd(a,
a.data.length);return b(c.getClientRects())}return[]};var Yf;(function(a){a[a.Up=-1]="Up";a[a.Down=1]="Down"})(Yf||(Yf={}));const gG=(a,b,c,d)=>{for(;(d=yf(d,a,jf,b))&&!c(d););},$s=(a,b,c,d,e,f)=>{let g=0;const h=[],k=m=>{m=gc([m],Zs);-1===a&&(m=m.reverse());for(let n=0;n<m.length;n++){const t=m[n];if(!c(t,l)){0<h.length&&b(t,h[h.length-1])&&g++;t.line=g;if(e(t))return!0;h.push(t)}}return!1},l=ce(f.getClientRects());if(!l)return h;if(f=f.getNode())k(f),gG(a,d,k,f);return h},hG=A($s,Yf.Up,rf,sf),iG=
A($s,Yf.Down,sf,rf),jG=(a,b,c,d)=>{var e=pc(b);let f;b=[];let g=0;1===a?(a=e.next,e=sf,f=rf,d=C.after(d)):(a=e.prev,e=rf,f=sf,d=C.before(d));const h=ce(d.getClientRects());do if(d.isVisible()){var k=ce(d.getClientRects());if(!f(k,h)){0<b.length&&e(k,b[b.length-1])&&g++;k=Hd(k);k.position=d;k.line=g;if(c(k))break;b.push(k)}}while(d=a(d));return b},at=a=>b=>b.line>a,nl=a=>b=>b.line===a,Hc=(a,b)=>{a.selection.setRng(b);b=a.selection.getRng();(a.inline?Jf:Kf)(a,b,void 0)},ol=(a,b,c)=>p.some(el(a,b,c)),
bt=(a,b,c,d,e,f)=>{const g=b===Xa.Forwards;var h=pc(a.getBody());h=A(Ej,g?h.next:h.prev);d=g?d:e;if(!c.collapsed){e=Sg(c);if(f(e))return Gc(b,a,e,b===Xa.Backwards,!1);if(hl(a))return a=c.cloneRange(),a.collapse(b===Xa.Backwards),p.from(a)}f=Bf(b,a.getBody(),c);if(d(f))return Vf(a,f.getNode(!g));f=h(f);e=Uc(c.startContainer);if(f)f=Nb(g,f);else return e?p.some(c):p.none();return d(f)?Gc(b,a,f.getNode(!g),g,!1):(c=h(f))&&d(c)&&$g(f,c)?Gc(b,a,c.getNode(!g),g,!1):e?ol(a,f.toRange(),!1):p.none()},ct=(a,
b,c,d,e,f)=>{const g=Bf(b,a.getBody(),c);var h=ce(g.getClientRects());const k=b===Yf.Down;var l=a.getBody();if(!h)return p.none();if(hl(a)){const t=k?C.fromRangeEnd(c):C.fromRangeStart(c);return(k?fG:eG)(l,t).orThunk(()=>p.from(t)).map(y=>y.toRange())}var m=(k?iG:hG)(l,at(1),g);m=ka(m,nl(1));h=h.left;const n=Ys(m,h);if(n&&f(n.node))return Gc(b,a,n.node,Math.abs(h-n.left)<Math.abs(h-n.right),!1);if(c=d(g)?g.getNode():e(g)?g.getNode(!0):Sg(c))if(b=jG(b,l,at(1),c),(l=Ys(ka(b,nl(1)),h))||(l=ce(ka(b,nl(0)))))return ol(a,
l.position.toRange(),!1);return 0===m.length?pl(a,k).filter(k?e:d).map(t=>el(a,t.toRange(),!1)):p.none()},pl=(a,b)=>{var c=a.selection.getRng();c=b?C.fromRangeEnd(c):C.fromRangeStart(c);a=bA(c.container(),a.getBody());if(b)return b=Xf(a,c),Ve(b.positions);b=Wf(a,c);return $a(b.positions,0)},dt=(a,b,c)=>pl(a,b).filter(c).exists(d=>{a.selection.setRng(d.toRange());return!0}),Jh=(a,b)=>{const c=a.dom.createRng();c.setStart(b.container(),b.offset());c.setEnd(b.container(),b.offset());a.selection.setRng(c)},
et=(a,b)=>{a?b.setAttribute("data-mce-selected","inline-boundary"):b.removeAttribute("data-mce-selected")},ft=(a,b,c)=>kl(b,c).map(d=>{Jh(a,d);return c}),kG=(a,b,c)=>{const d=C.fromRangeStart(a);if(a.collapsed)return d;a=C.fromRangeEnd(a);return c?nb(b,a).getOr(a):mb(b,d).getOr(d)},lG=(a,b,c)=>{const d=a.getBody(),e=kG(a.selection.getRng(),d,c),f=A(Pd,a);return bG(c,f,d,e).bind(g=>ft(a,b,g))},mG=(a,b,c)=>{b=wa(me(x.fromDom(b.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom);b=ka(b,a);
a=ka(c,a);G(sg(b,a),A(et,!1));G(sg(a,b),A(et,!0))},nG=(a,b,c,d)=>{b.selection.isCollapsed()&&(d=ka(d,a),G(d,e=>{e=C.fromRangeStart(b.selection.getRng());tc(a,b.getBody(),e).bind(f=>ft(b,c,f))}))},gt=(a,b,c)=>vf(a)?lG(a,b,c).isSome():!1,ht=(a,b,c)=>{vf(b)?(c=b.selection.getRng(),c=a?C.fromRangeEnd(c):C.fromRangeStart(c),a=ya(b.selection.getSel().modify)?a&&Yi(c)?Ts(!0,b.selection,c):!a&&Zi(c)?Ts(!1,b.selection,c):!1:!1):a=!1;return a},oG=a=>{const b=Wa(null),c=A(Pd,a);a.on("NodeChange",d=>{if(vf(a)){mG(c,
a.dom,d.parents);var e=b.get();if(a.selection.isCollapsed()&&!a.composing&&e){var f=C.fromRangeStart(a.selection.getRng()),g;if(g=C.isTextPosition(f))g=f,g=!(Yi(g)||Zi(g));if(g){if(C.isTextPosition(f))if(E(e)&&f.container()===e){{g=Jo(e.data.substr(0,f.offset()));const h=Jo(e.data.substr(f.offset()));0<(g.text+h.text).length?(Ko(e),e=C(e,f.offset()-g.count)):e=f}}else ad(e),e=f;else f.container()===e.parentNode?e=Zz(e,f):(ad(e),e=f);Jh(a,e);b.set(null)}}nG(c,a,b,d.parents)}});return b},pG=A(ht,!0),
qG=A(ht,!1),Kh=(a,b,c)=>{if(vf(a)){const d=pl(a,b).getOrThunk(()=>{const e=a.selection.getRng();return b?C.fromRangeEnd(e):C.fromRangeStart(e)});return tc(A(Pd,a),a.getBody(),d).exists(e=>{e=Gh(e);return kl(c,e).exists(f=>{Jh(a,f);return!0})})}return!1},rG=a=>sb(ob(a),Tb(a),(b,c)=>{b=Nb(!0,b);const d=Nb(!1,c);return mb(a,b).forall(e=>e.isEqual(d))}).getOr(!0),it=(a,b)=>c=>kl(b,c).map(d=>()=>Jh(a,d)),jt=(a,b,c,d)=>{const e=a.getBody(),f=A(Pd,a);a.undoManager.ignore(()=>{var g=a.selection,h=g.setRng;
const k=document.createRange();k.setStart(c.container(),c.offset());k.setEnd(d.container(),d.offset());h.call(g,k);qh(a,"Delete");tc(f,e,C.fromRangeStart(a.selection.getRng())).map(ll).bind(it(a,b)).each(Pe)});a.nodeChanged()},sG=(a,b)=>(b=bd(b,a))?b:a,tG=(a,b,c,d)=>{const e=sG(a.getBody(),d.container()),f=A(Pd,a),g=tc(f,e,d);return g.bind(h=>c?h.fold(R(p.some(ll(h))),p.none,R(p.some(Gh(h))),p.none):h.fold(p.none,R(p.some(Gh(h))),p.none,R(p.some(ll(h))))).map(it(a,b)).getOrThunk(()=>{const h=Cf(c,
e,d),k=h.bind(l=>tc(f,e,l));return sb(g,k,()=>jd(f,e,d).bind(l=>rG(l)?p.some(()=>{Od(a,c,x.fromDom(l))}):p.none())).getOrThunk(()=>k.bind(()=>h.map(l=>()=>{c?jt(a,b,d,l):jt(a,b,l,d)})))})},ql=(a,b,c)=>{if(a.selection.isCollapsed()&&vf(a)){const d=C.fromRangeStart(a.selection.getRng());return tG(a,b,c,d)}return p.none()},kt=(a,b)=>{const c=x.fromDom(a.getBody());a=x.fromDom(a.selection.getStart());const d=[a].concat(id(a,c,za));return Ue(d,b).fold(R(d),e=>d.slice(0,e))},uG=a=>1===a.dom.childNodes.length,
vG=a=>kt(a,b=>Kb(b)||1<b.dom.childNodes.length),lt=(a,b)=>{const c=A($q,a);return gc(b,d=>c(d)?[d.dom]:[])},mt=a=>{const b=kt(a,Kb);return lt(a,b)},wG=(a,b)=>{const c=ka(vG(a),uG);return $a(c,c.length-1).bind(d=>{const e=C.fromRangeStart(a.selection.getRng());return yq(b,e,d.dom)&&!ar(d)?p.some(()=>{var f=lt(a,c);0===f.length?Od(a,b,d):(f=Zq(d.dom,f),a.selection.setRng(f.toRange()))}):p.none()})},nt=(a,b)=>{var c=a.selection.getStart();const d=c.parentElement;if(Ga(c)&&!zb(d)&&a.dom.isEmpty(d)||ar(x.fromDom(c)))b=
Zq(c,b);else{c=a.selection.getRng();const {caretContainer:e,caretPosition:f}=Yq(b);c.insertNode(e.dom);b=f}a.selection.setRng(b.toRange())},xG=a=>{const b=a.selection.getRng();var c;if(c=0===b.startOffset&&E(b.startContainer))c=b.startContainer.parentElement,c=!zb(c)&&$q(a,x.fromDom(c));if(a=c){a=b.startContainer.parentNode;c=b.endContainer.parentNode;if(a=!zb(a)&&!zb(c)&&a.isEqualNode(c))a=b.endContainer,a=b.endOffset===(E(a)?a.length:a.childNodes.length);a=a||!b.endContainer.isEqualNode(b.commonAncestorContainer)}return a},
yG=a=>{if(xG(a)){const b=mt(a);return p.some(()=>{qh(a,"Delete");const c=sg(b,mt(a));0<c.length&&nt(a,c)})}return p.none()},rl=(a,b)=>a.selection.isCollapsed()?wG(a,b):yG(a),zG=a=>hD(a,b=>Ub(b.dom),Kb),Zf=a=>{const b=a.selection.getRng();b.collapsed&&(E(b.startContainer)||a.dom.isEmpty(b.startContainer))&&!zG(x.fromDom(a.selection.getStart()))&&nt(a,[]);return!0},sl=(a,b,c)=>aa(c)?p.none():p.some(()=>{a._selectionOverrides.hideFakeCaret();Od(a,b,x.fromDom(c))}),AG=(a,b)=>{const c=b?Lf:Mf,d=Bf(b?Xa.Forwards:
Xa.Backwards,a.getBody(),a.selection.getRng());return c(d)?sl(a,b,d.getNode(!b)):p.from(Nb(b,d)).filter(e=>c(e)&&$g(d,e)).bind(e=>sl(a,b,e.getNode(!b)))},tl=(a,b)=>{if(a.selection.isCollapsed())a=AG(a,b);else{const c=a.selection.getNode();a=mc(c)?sl(a,b,c):p.none()}return a},BG=a=>vd(a,b=>Sb(b.dom)||va(b.dom)).exists(b=>Sb(b.dom)),ul=a=>$e(null!==a&&void 0!==a?a:"").getOr(0),ot=(a,b)=>{a=a||"table"===b.dom.nodeName.toLowerCase()?"margin":"padding";b="rtl"===lc(b,"direction")?"-right":"-left";return a+
b},CG=(a,b)=>Lc(b,c=>{var d=ot(yo(a),c);d=Bg(c,d).map(ul).getOr(0);return"false"!==a.dom.getContentEditable(c.dom)&&0<d}),qt=a=>{const b=pt(a);return!a.mode.isReadOnly()&&(1<b.length||CG(a,b))},rt=a=>Xi(a)||hf(a),pt=a=>ka(wa(a.selection.getSelectedBlocks(),x.fromDom),b=>!rt(b)&&!Rb(b).exists(rt)&&BG(b)),vl=(a,b)=>{var c,d;const {dom:e}=a,f=az(a),g=null!==(d=null===(c=/[a-z%]+$/i.exec(f))||void 0===c?void 0:c[0])&&void 0!==d?d:"px",h=ul(f),k=yo(a);G(pt(a),l=>{l=l.dom;const m=ot(k,x.fromDom(l));var n=
ul(e.getStyle(l,m));"outdent"===b?(n=Math.max(0,n-h),e.setStyle(l,m,n?n+g:"")):e.setStyle(l,m,n+h+g)})},st=a=>{if(a.selection.isCollapsed()&&qt(a)){var b=a.dom;const c=a.selection.getRng(),d=C.fromRangeStart(c);b=b.getParent(c.startContainer,b.isBlock);if(null!==b&&nk(x.fromDom(b),d))return p.some(()=>vl(a,"outdent"))}return p.none()},tt=(a,b,c)=>be([st,il,fl,(d,e)=>ql(d,b,e),cl,Ak,jl,tl,dl,rl],d=>d(a,c)).filter(d=>a.selection.isEditable()),DG=(a,b)=>{tt(a,b,!1).fold(()=>{qh(a,"Delete");uk(a)},Pe)},
EG=(a,b)=>{tt(a,b,!0).fold(()=>qh(a,"ForwardDelete"),Pe)},FG=(a,b)=>{a.addCommand("delete",()=>{DG(a,b)});a.addCommand("forwardDelete",()=>{EG(a,b)})},ut=a=>void 0===a.touches||1!==a.touches.length?p.none():p.some(a.touches[0]),GG=a=>{const b=Yc(),c=Wa(!1),d=pj(e=>{a.dispatch("longpress",Object.assign({},e,{type:"longpress"}));c.set(!0)},400);a.on("touchstart",e=>{ut(e).each(f=>{d.cancel();f={x:f.clientX,y:f.clientY,target:e.target};d.throttle(e);c.set(!1);b.set(f)})},!0);a.on("touchmove",e=>{d.cancel();
ut(e).each(f=>{b.on(g=>{const h=Math.abs(f.clientY-g.y);if(5<Math.abs(f.clientX-g.x)||5<h)b.clear(),c.set(!1),a.dispatch("longpresscancel")})})},!0);a.on("touchend touchcancel",e=>{d.cancel();"touchcancel"!==e.type&&b.get().filter(f=>f.target.isEqualNode(e.target)).each(()=>{c.get()?e.preventDefault():a.dispatch("tap",Object.assign({},e,{type:"tap"}))})},!0)},HG=(a,b,c)=>Na(KB(x.fromDom(c),x.fromDom(b)),d=>ha.call(a,d.dom.nodeName)),vt=a=>a.dom.create(vb(a),uf(a)),IG=a=>{const b=a.dom,c=a.selection,
d=a.schema,e=d.getBlockElements();var f=c.getStart();const g=a.getBody();let h;let k=!1;var l=vb(a);if(f&&V(f)){var m=g.nodeName.toLowerCase();if(d.isValidChild(m,l.toLowerCase())&&!HG(e,g,f)){f=c.getRng();var {startContainer:n,startOffset:t,endContainer:y,endOffset:w}=f;l=Nd(a);for(m=g.firstChild;m;){if(V(m)){var q=d;var r=m;dj(q,r)&&(q=cj(q.getBlockElements()).join(","),wn(q,r))}r=d;q=m;if(E(q))r=!0;else if(V(q)){var v=r.getBlockElements();r=!ha.call(v,q.nodeName)&&!hb(q)&&!Cd(r,q)}else r=!1;if(r){a:{r=
e;q=m;if(E(q))if(0===q.data.length){r=!0;break a}else if(/^\s+$/.test(q.data)&&(!q.nextSibling||ha.call(r,q.nextSibling.nodeName))){r=!0;break a}r=!1}r?(r=m,m=m.nextSibling,b.remove(r)):(h||(h=vt(a),g.insertBefore(h,m),k=!0),r=m,m=m.nextSibling,h.appendChild(r))}else h=null,m=m.nextSibling}k&&l&&(f.setStart(n,t),f.setEnd(y,w),c.setRng(f),a.nodeChanged())}}},wt=(a,b,c)=>{const d=x.fromDom(vt(a));a=Hg();d.dom.appendChild(a.dom);c(b,d);b=document.createRange();b.setStartBefore(a.dom);b.setEndBefore(a.dom);
return b},xt=a=>b=>-1!==(" "+b.attr("class")+" ").indexOf(a),JG=(a,b,c)=>function(d){const e=arguments,f=e[e.length-2];var g=0<f?b.charAt(f-1):"";return'"'===g||">"===g&&(g=b.lastIndexOf("<",f),-1!==g&&-1!==b.substring(g,f).indexOf('contenteditable="false"'))?d:'<span class="'+c+'" data-mce-content="'+a.dom.encode(e[0])+'">'+a.dom.encode("string"===typeof e[1]?e[1]:e[0])+"</span>"},KG=a=>{const b=" "+K.trim(Rz(a))+" ",c=" "+K.trim(Io(a))+" ",d=xt(b),e=xt(c),f=Sz(a);if(0<f.length)a.on("BeforeSetContent",
g=>{{let h=f.length,k=g.content;if("raw"!==g.format){for(;h--;)k=k.replace(f[h],JG(a,k,Io(a)));g.content=k}}});a.parser.addAttributeFilter("class",g=>{let h=g.length;for(;h--;){const k=g[h];d(k)?k.attr("contenteditable","true"):e(k)&&k.attr("contenteditable","false")}});a.serializer.addAttributeFilter("contenteditable",g=>{let h=g.length;for(;h--;){const k=g[h];if(d(k)||e(k))0<f.length&&k.attr("data-mce-content")?(k.name="#text",k.type=3,k.raw=!0,k.value=k.attr("data-mce-content")):k.attr("contenteditable",
null)}})},LG=a=>en(x.fromDom(a.getBody()),"*[data-mce-caret]").map(b=>b.dom).getOrNull(),yt=(a,b)=>{b.hasAttribute("data-mce-caret")&&($i(b),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(b))},MG=(a,b)=>{const c=LG(a);c&&("compositionstart"===b.type?(b.preventDefault(),b.stopPropagation(),yt(a,c)):c.firstChild===c.lastChild&&Ga(c.firstChild)||(yt(a,c),a.undoManager.add()))},NG=(a,b,c)=>ct(b,a,c,d=>gd(d)||dq(d),d=>hd(d)||eq(d),va),zt=(a,b,c)=>{var d=pc(a.getBody()),e=A(Ej,1===
b?d.next:d.prev);c.collapsed&&(d=a.dom.getParent(c.startContainer,"PRE"))&&!e(C.fromRangeStart(c))&&(c=x.fromDom,e=a.dom.create(vb(a)),e.innerHTML='<br data-mce-bogus="1">',c=c.call(x,e),1===b?Qc(x.fromDom(d),c):Bb(x.fromDom(d),c),a.selection.select(c.dom,!0),a.selection.collapse())},OG=(a,b)=>{const c=b?Xa.Forwards:Xa.Backwards,d=a.selection.getRng();return bt(a,c,d,gd,hd,va).orThunk(()=>{zt(a,c,d);return p.none()})},PG=(a,b)=>{const c=b?1:-1,d=a.selection.getRng();return NG(c,a,d).orThunk(()=>{zt(a,
c,d);return p.none()})},QG=(a,b)=>{a=b?a.getEnd(!0):a.getStart(!0);return vq(a)?!b:b},At=(a,b)=>OG(a,QG(a.selection,b)).exists(c=>{Hc(a,c);return!0}),Bt=(a,b)=>PG(a,b).exists(c=>{Hc(a,c);return!0}),Ct=(a,b)=>dt(a,b,b?hd:gd),Lh=(a,b)=>gl(a,!b).map(c=>{c=c.toRange();const d=a.selection.getRng();b?c.setStart(d.startContainer,d.startOffset):c.setEnd(d.endContainer,d.endOffset);return c}).exists(c=>{Hc(a,c);return!0}),RG=a=>{a=a.dom.nodeName.toLowerCase();return-1<Ca.call(["figcaption"],a)},SG=(a,b)=>
{b=A(yc,b);return vd(x.fromDom(a.container()),Kb,b).filter(RG)},TG=(a,b)=>{const c=x.fromDom(a.getBody()),d=C.fromRangeStart(a.selection.getRng());return SG(d,c).exists(()=>{if(b?Xf(c.dom,d).breakAt.isNone():Wf(c.dom,d).breakAt.isNone()){const e=wt(a,c,b?Ri:jn);a.selection.setRng(e);return!0}return!1})},Dt=(a,b)=>a.selection.isCollapsed()?TG(a,b):!1,Et={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},UG=a=>wa(a,b=>Object.assign({},Et,b)),VG=a=>wa(a,b=>Object.assign({},Et,b)),Ft=(a,b)=>b.keyCode===
a.keyCode&&b.shiftKey===a.shiftKey&&b.altKey===a.altKey&&b.ctrlKey===a.ctrlKey&&b.metaKey===a.metaKey,WG=(a,b)=>gc(UG(a),c=>Ft(c,b)?[c]:[]),XG=(a,b)=>gc(VG(a),c=>Ft(c,b)?[c]:[]),ma=(a,...b)=>()=>a.apply(null,b),$f=(a,b)=>Oa(WG(a,b),c=>c.action()),Gt=(a,b)=>be(XG(a,b),c=>c.action()),Ht=(a,b)=>{b=b?Xa.Forwards:Xa.Backwards;const c=a.selection.getRng();return bt(a,b,c,Lf,Mf,mc).exists(d=>{Hc(a,d);return!0})},It=(a,b)=>{b=b?1:-1;const c=a.selection.getRng();return ct(a,b,c,Lf,Mf,mc).exists(d=>{Hc(a,d);
return!0})},Jt=(a,b)=>dt(a,b,b?Mf:Lf),Kt=nc.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ag=Object.assign({},Kt,{none:a=>Kt.none(a)}),Lt=(a,b,c)=>gc(bb(a),d=>Zb(d,b)?c(d)?[d]:[]:Lt(d,b,c)),YG=(a,b,c)=>{c=void 0===c?za:c;return c(b)?p.none():Qe(a,b.dom.nodeName.toLowerCase())?p.some(b):$b(b,a.join(","),d=>Zb(d,"table")||c(d))},wl=(a,b,c,d,e)=>{e=void 0===e?Qa:e;var f=1===d;if(!f&&0>=c)return ag.first(a[0]);if(f&&c>=a.length-1)return ag.last(a[a.length-
1]);c+=d;f=a[c];return e(f)?ag.middle(b,f):wl(a,b,c,d,e)},Mt=(a,b)=>Pc(a,"table",b).bind(c=>{const d=Lt(c,"th,td",Qa);return Ue(d,e=>a.dom===e.dom).map(e=>({index:e,all:d}))}),Nt=(a,b,c)=>Mt(a,c).fold(()=>ag.none(a),d=>wl(d.all,a,d.index,1,b)),ZG=(a,b,c)=>Mt(a,c).fold(()=>ag.none(),d=>wl(d.all,a,d.index,-1,b)),$G=(a,b)=>gc(b,c=>{var d=Hd(c.getBoundingClientRect());d={left:d.left- -1,top:d.top- -1,right:d.right+-2,bottom:d.bottom+-2,width:d.width+-1,height:d.height+-1};return[{x:d.left,y:a(d),cell:c},
{x:d.right,y:a(d),cell:c}]}),aH=(a,b,c)=>Db(a,(d,e)=>d.fold(()=>p.some(e),f=>p.some(Math.sqrt(Math.abs(e.x-b)+Math.abs(e.y-c))<Math.sqrt(Math.abs(f.x-b)+Math.abs(f.y-c))?e:f)),p.none()),Ot=(a,b,c,d,e)=>{c=me(x.fromDom(c),"td,th,caption").map(f=>f.dom);a=ka($G(a,c),f=>b(f,e));return aH(a,d,e).map(f=>f.cell)},bH=A(Ot,a=>a.bottom,(a,b)=>a.y<b),cH=A(Ot,a=>a.top,(a,b)=>a.y>b),dH=(a,b)=>$a(b.getClientRects(),0).bind(c=>bH(a,c.left,c.top)).bind(c=>Ih(dG(c),b)),eH=(a,b)=>Ve(b.getClientRects()).bind(c=>cH(a,
c.left,c.top)).bind(c=>Ih(cG(c),b)),fH=(a,b,c)=>c.breakAt.exists(d=>a(b,d).breakAt.isSome()),Pt=(a,b,c)=>{const d=a(b,c);return d.breakType===uc.Wrap&&0===d.positions.length||!Ga(c.getNode())&&d.breakType===uc.Br&&1===d.positions.length?!fH(a,b,d):d.breakAt.isNone()},gH=A(Pt,Wf),hH=A(Pt,Xf),iH=(a,b,c)=>{const d=C.fromRangeStart(b);return ve(!a,c).exists(e=>e.isEqual(d))},jH=(a,b,c,d)=>{d=a.selection.getRng();const e=b?1:-1;return ua.browser.isFirefox()&&iH(b,d,c)?(Gc(e,a,c,!b,!1).each(f=>{Hc(a,f)}),
!0):!1},kH=(a,b,c)=>dH(b,c).orThunk(()=>$a(c.getClientRects(),0).bind(d=>ml(Ws(a,C.before(b)),d.left))).getOr(C.before(b)),lH=(a,b,c)=>eH(b,c).orThunk(()=>$a(c.getClientRects(),0).bind(d=>ml(Xs(a,C.after(b)),d.left))).getOr(C.after(b)),Qt=(a,b)=>{a=b.getNode(a);return Cc(a)?p.some(a):p.none()},mH=(a,b,c)=>{b.undoManager.transact(()=>{var d=a?Qc:Bb;d=wt(b,x.fromDom(c),d);Hc(b,d)})},Rt=(a,b,c)=>{const d=b?Qt(!0,c):Qt(!1,c),e=!1===b;d.fold(()=>Hc(a,c.toRange()),f=>ve(e,a.getBody()).filter(g=>g.isEqual(c)).fold(()=>
Hc(a,c.toRange()),g=>mH(b,a,f)))},nH=(a,b,c,d)=>{var e=a.selection.getRng();e=C.fromRangeStart(e);const f=a.getBody();return!b&&gH(d,e)?(c=kH(f,c,e),Rt(a,b,c),!0):b&&hH(d,e)?(c=lH(f,c,e),Rt(a,b,c),!0):!1},St=(a,b,c)=>p.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(d=>p.from(a.dom.getParent(d,"table")).map(e=>c(a,b,e,d))).getOr(!1),Tt=(a,b)=>St(a,b,jH),Ut=(a,b)=>St(a,b,nH),xl=(a,b,c)=>c.fold(p.none,p.none,(d,e)=>nx(e,Rp).map(f=>{f=xe.exact(f,0,f,0);return SA(f)}),d=>{a.execCommand("mceTableInsertRowAfter");
return xl(a,b,Nt(d,wd))}),oH=(a,b,c)=>xl(a,b,Nt(c,wd)),pH=(a,b,c)=>xl(a,b,ZG(c,wd)),Vt=(a,b)=>{const c=["table","li","dl"],d=x.fromDom(a.getBody()),e=g=>{const h=g.dom.nodeName.toLowerCase();return g.dom===d.dom||-1<Ca.call(c,h)};var f=a.selection.getRng();f=x.fromDom(b?f.endContainer:f.startContainer);return YG(["td","th"],f,e).map(g=>{Pc(g,"table",e).each(h=>{a.model.table.clearSelectedCells(h.dom)});a.selection.collapse(!b);(b?oH:pH)(a,e,g).each(h=>{a.selection.setRng(h)});return!0}).getOr(!1)},
qH=(a,b,c)=>{const d=ua.os.isMacOS()||ua.os.isiOS();$f([{keyCode:X.RIGHT,action:ma(At,a,!0)},{keyCode:X.LEFT,action:ma(At,a,!1)},{keyCode:X.UP,action:ma(Bt,a,!1)},{keyCode:X.DOWN,action:ma(Bt,a,!0)},...(d?[{keyCode:X.UP,action:ma(Lh,a,!1),metaKey:!0,shiftKey:!0},{keyCode:X.DOWN,action:ma(Lh,a,!0),metaKey:!0,shiftKey:!0}]:[]),{keyCode:X.RIGHT,action:ma(Tt,a,!0)},{keyCode:X.LEFT,action:ma(Tt,a,!1)},{keyCode:X.UP,action:ma(Ut,a,!1)},{keyCode:X.DOWN,action:ma(Ut,a,!0)},{keyCode:X.RIGHT,action:ma(Ht,a,
!0)},{keyCode:X.LEFT,action:ma(Ht,a,!1)},{keyCode:X.UP,action:ma(It,a,!1)},{keyCode:X.DOWN,action:ma(It,a,!0)},{keyCode:X.RIGHT,action:ma(gt,a,b,!0)},{keyCode:X.LEFT,action:ma(gt,a,b,!1)},{keyCode:X.RIGHT,ctrlKey:!d,altKey:d,action:ma(pG,a,b)},{keyCode:X.LEFT,ctrlKey:!d,altKey:d,action:ma(qG,a,b)},{keyCode:X.UP,action:ma(Dt,a,!1)},{keyCode:X.DOWN,action:ma(Dt,a,!0)}],c).each(e=>{c.preventDefault()})},rH=(a,b)=>{a.on("keydown",c=>{c.isDefaultPrevented()||qH(a,b,c)})},dc=(a,b)=>({container:a,offset:b}),
Mh=Da.DOM,Nh=a=>b=>a===b?-1:0,sH=a=>b=>{var c;(c=a.isBlock(b))||(c=-1<Ca.call(["BR","IMG","HR","INPUT"],b.nodeName));return c||"false"===a.getContentEditable(b)},yl=(a,b,c)=>{if(E(a)&&0<=b)return p.some(dc(a,b));const d=Gd(Mh);return p.from(d.backwards(a,b,Nh(a),c)).map(e=>dc(e.container,e.container.data.length))},tH=(a,b,c)=>{if(E(a)&&b>=a.length)return p.some(dc(a,b));const d=Gd(Mh);return p.from(d.forwards(a,b,Nh(a),c)).map(e=>dc(e.container,0))},zl=(a,b,c)=>{if(!E(a))return p.none();var d=a.data;
if(0<=b&&b<=d.length)return p.some(dc(a,b));d=Gd(Mh);return p.from(d.backwards(a,b,Nh(a),c)).bind(e=>zl(e.container,b+e.container.data.length,c))},Wt=(a,b,c)=>{if(!E(a))return p.none();const d=a.data;if(b<=d.length)return p.some(dc(a,b));const e=Gd(Mh);return p.from(e.forwards(a,b,Nh(a),c)).bind(f=>Wt(f.container,b-d.length,c))},Al=(a,b,c,d,e)=>{a=Gd(a,sH(a));return p.from(a.backwards(b,c,d,e))},uH=(a,b,c,d)=>{d=void 0===d?0:d;if(!b.collapsed||!E(b.startContainer))return p.none();var e="",f=0;const g=
a.getParent(b.startContainer,a.isBlock)||a.getRoot();return Al(a,b.startContainer,b.startOffset,(h,k,l)=>{e=l+e;f+=k;a:{h=e;l=f;let m;const n=c.charAt(0);for(m=l-1;0<=m;m--){const t=h.charAt(m);if(""!==t&&-1!==" \u00a0\f\n\r\t\v".indexOf(t)){h=p.none();break a}if(n===t&&eb(h,c,m,l))break}h=p.some(m)}return h.getOr(k)},g).bind(h=>{const k=b.cloneRange();k.setStart(h.container,h.offset);k.setEnd(b.endContainer,b.endOffset);if(k.collapsed)return p.none();h=bc(k.toString().replace(/\u00A0/g," "));return 0!==
h.lastIndexOf(c)||h.substring(c.length).length<d?p.none():p.some({text:h.substring(c.length),range:k,trigger:c})})},Xt=(a,b,c,d)=>{d=void 0===d?0:d;return Pc(x.fromDom(b.startContainer),"[data-mce-autocompleter]").fold(()=>uH(a,b,c,d),e=>{const f=a.createRng();f.selectNode(e.dom);e=bc(f.toString().replace(/\u00A0/g," "));return p.some({range:f,text:e.substring(c.length),trigger:c})})},Yt=a=>{if(3===a.nodeType)return dc(a,a.data.length);const b=a.childNodes;return 0<b.length?Yt(b[b.length-1]):dc(a,
b.length)},Zt=(a,b)=>{const c=a.childNodes;return 0<c.length&&b<c.length?Zt(c[b],0):0<c.length&&1===a.nodeType&&c.length===b?Yt(c[c.length-1]):dc(a,b)},vH=(a,b)=>{var c;const d=null!==(c=a.getParent(b.container,a.isBlock))&&void 0!==c?c:a.getRoot();return Al(a,b.container,b.offset,(e,f)=>0===f?-1:f,d).filter(e=>{e=e.container.data.charAt(e.offset-1);return!(""!==e&&-1!==" \u00a0\f\n\r\t\v".indexOf(e))}).isSome()},wH=a=>b=>{b=Zt(b.startContainer,b.startOffset);return!vH(a,b)},xH=(a,b,c)=>be(c.triggers,
d=>Xt(a,b,d)),yH=(a,b)=>{const c=b(),d=a.selection.getRng();return xH(a.dom,d,c).bind(e=>$t(a,b,e))},$t=(a,b,c,d)=>{d=void 0===d?{}:d;var e;b=b();const f=null!==(e=a.selection.getRng().startContainer.nodeValue)&&void 0!==e?e:"";e=ka(b.lookupByTrigger(c.trigger),g=>c.text.length>=g.minChars&&g.matches.getOrThunk(()=>wH(a.dom))(c.range,f,c.text));if(0===e.length)return p.none();e=Promise.all(wa(e,g=>g.fetch(c.text,g.maxResults,d).then(h=>({matchText:c.text,items:h,columns:g.columns,onAction:g.onAction,
highlightOn:g.highlightOn}))));return p.some({lookupData:e,context:c})};var ec;(function(a){a[a.Error=0]="Error";a[a.Value=1]="Value"})(ec||(ec={}));const Bl=(a,b,c)=>a.stype===ec.Error?b(a.serror):c(a.svalue),au=a=>({stype:ec.Value,svalue:a}),bu=a=>({stype:ec.Error,serror:a}),Ya={fromResult:a=>a.fold(bu,au),toResult:a=>Bl(a,ub.error,ub.value),svalue:au,partition:a=>{const b=[],c=[];G(a,d=>{Bl(d,e=>c.push(e),e=>b.push(e))});return{values:b,errors:c}},serror:bu,bind:(a,b)=>a.stype===ec.Value?b(a.svalue):
a,bindError:(a,b)=>a.stype===ec.Error?b(a.serror):a,map:(a,b)=>a.stype===ec.Value?{stype:ec.Value,svalue:b(a.svalue)}:a,mapError:(a,b)=>a.stype===ec.Error?{stype:ec.Error,serror:b(a.serror)}:a,fold:Bl},Cl=a=>jb(a)&&100<rb(a).length?" removed due to size":JSON.stringify(a,null,2),zH=a=>{a=10<a.length?a.slice(0,10).concat([{path:[],getErrorInfo:R("... (only showing first ten failures)")}]):a;return wa(a,b=>"Failed path: ("+b.path.join(" > ")+")\n"+b.getErrorInfo())},Oh=(a,b)=>Ya.serror([{path:a,getErrorInfo:b}]),
AH=(a,b,c)=>Oh(a,()=>'Could not find valid *required* value for "'+b+'" in '+Cl(c)),BH=(a,b)=>Oh(a,()=>'Choice schema did not contain choice key: "'+b+'"'),CH=(a,b,c)=>Oh(a,()=>'The chosen schema: "'+c+'" did not exist in branches: '+Cl(b)),DH=(a,b,c,d)=>Fa(c,d).fold(()=>CH(a,c,d),e=>e.extract(a.concat(["branch: "+d]),b)),EH=(a,b)=>({extract:(c,d)=>Fa(d,a).fold(()=>BH(c,a),e=>DH(c,d,b,e)),toString:()=>"chooseOn("+a+"). Possible values: "+rb(b)}),cu=a=>(...b)=>{if(0===b.length)throw Error("Can't merge zero objects");
const c={};for(let d=0;d<b.length;d++){const e=b[d];for(const f in e)ha.call(e,f)&&(c[f]=a(c[f],e[f]))}return c},Ph=cu((a,b)=>Zd(a,Object)&&Zd(b,Object)?Ph(a,b):b),FH=cu((a,b)=>b),GH={consolidateObj:(a,b)=>{a=Ya.partition(a);0<a.errors.length?(b=a.errors,b=Kc(Ya.serror,rg)(b)):(a=a.values,b=0<a.length?Ya.svalue(Ph(b,FH.apply(void 0,a))):Ya.svalue(b));return b},consolidateArr:a=>{a=Ya.partition(a);0<a.errors.length?(a=a.errors,a=Kc(Ya.serror,rg)(a)):a=Ya.svalue(a.values);return a}},du=(a,b,c)=>{switch(a.tag){case "field":return b(a.key,
a.newKey,a.presence,a.prop);case "custom":return c(a.newKey,a.instantiator)}},Dl=a=>({extract:(b,c)=>Ya.bindError(a(c),d=>Oh(b,R(d))),toString:R("val")}),HH=Dl(Ya.svalue),IH=(a,b,c,d)=>Fa(b,c).fold(()=>AH(a,c,b),d),eu=(a,b,c,d)=>{b=Fa(a,b).getOrThunk(()=>c(a));return d(b)},JH=(a,b,c,d)=>{b=Fa(a,b).map(e=>!0===e?c(a):e);return d(b)},KH=(a,b,c,d,e)=>{const f=h=>e.extract(b.concat([d]),h),g=h=>h.fold(()=>Ya.svalue(p.none()),k=>{k=e.extract(b.concat([d]),k);return Ya.map(k,p.some)});switch(a.tag){case "required":return IH(b,
c,d,f);case "defaultedThunk":return eu(c,d,a.process,f);case "option":return g(Fa(c,d));case "defaultedOptionThunk":return JH(c,d,a.process,g);case "mergeWithThunk":return eu(c,d,R({}),h=>{h=Ph(a.process(c),h);return f(h)})}},LH=(a,b,c)=>{const d={},e=[];for(const f of c)du(f,(g,h,k,l)=>{g=KH(k,a,b,g,l);Ya.fold(g,m=>{e.push(...m)},m=>{d[h]=m})},(g,h)=>{d[g]=h(b)});return 0<e.length?Ya.serror(e):Ya.svalue(d)},El=a=>({extract:(b,c)=>LH(b,c,a),toString:()=>"obj{\n"+wa(a,b=>du(b,(c,d,e,f)=>c+" -> "+f.toString(),
(c,d)=>"state("+c+")")).join("\n")+"}"}),fu=a=>({extract:(b,c)=>{c=wa(c,(d,e)=>a.extract(b.concat(["["+e+"]"]),d));return GH.consolidateArr(c)},toString:()=>"array("+a.toString()+")"}),MH=a=>Dl(b=>a(b).fold(Ya.serror,Ya.svalue)),NH=(a,b,c)=>{a=b.extract([a],c);return Ya.mapError(a,d=>({input:c,errors:d}))},OH=(a,b,c)=>Ya.toResult(NH(a,b,c)),gu=(a,b)=>EH(a,tg(b,El)),PH=R(HH),Qh=(a,b)=>Dl(c=>{const d=typeof c;return a(c)?Ya.svalue(c):Ya.serror(`Expected type: ${b} but got: ${d}`)}),hu=Qh(Yb,"number"),
Vb=Qh(fa,"string"),Fl=Qh(rd,"boolean"),bg=Qh(ya,"function"),cg=(a,b,c,d)=>({tag:"field",key:a,newKey:b,presence:c,prop:d}),QH=a=>MH(b=>-1<Ca.call(a,b)?ub.value(b):ub.error(`Unsupported value: "${b}", choose one of "${a.join(", ")}".`)),Rh=(a,b)=>cg(a,a,{tag:"required",process:{}},b),Ee=(a,b)=>cg(a,a,{tag:"option",process:{}},b),Gb=(a,b,c)=>cg(a,a,{tag:"defaultedThunk",process:R(b)},c),iu=(a,b,c)=>Gb(a,b,QH(c)),ju=(a,b)=>Gb(a,b,bg),RH=Rh("type",Vb),SH=Rh("fetch",bg),Gl=Rh("onAction",bg),TH=ju("onSetup",
()=>pa),UH=Ee("text",Vb),VH=Ee("icon",Vb),WH=Ee("tooltip",Vb),XH=Ee("label",Vb),YH=Gb("active",!1,Fl),ZH=Gb("enabled",!0,Fl),ku=Gb("primary",!1,Fl),$H=El([RH,Rh("trigger",Vb),Gb("minChars",1,hu),((a,b)=>cg(a,a,{tag:"defaultedThunk",process:R(b)},PH()))("columns",1),Gb("maxResults",10,hu),Ee("matches",bg),SH,Gl,((a,b,c)=>Gb(a,b,fu(c)))("highlightOn",[],Vb)]),Hl=[ZH,WH,VH,UH,TH],lu=[YH].concat(Hl),aI=[Gb("predicate",za,bg),iu("scope","node",["node","editor"]),iu("position","selection",["node","selection",
"line"])],bI=Hl.concat([Gb("type","contextformbutton",Vb),ku,Gl,{tag:"custom",newKey:"original",instantiator:Ka}]),cI=lu.concat([Gb("type","contextformbutton",Vb),ku,Gl,{tag:"custom",newKey:"original",instantiator:Ka}]),dI=Hl.concat([Gb("type","contextformbutton",Vb)]),eI=lu.concat([Gb("type","contextformtogglebutton",Vb)]),fI=gu("type",{contextformbutton:bI,contextformtogglebutton:cI});El([Gb("type","contextform",Vb),ju("initValue",R("")),XH,((a,b)=>cg(a,a,{tag:"required",process:{}},fu(b)))("commands",
fI),Ee("launch",gu("type",{contextformbutton:dI,contextformtogglebutton:eI}))].concat(aI));const gI=a=>{a=a.ui.registry.getAll().popups;a=tg(a,d=>OH("Autocompleter",$H,Object.assign({},{trigger:d.ch},d)).fold(e=>{var f=Error;e="Errors: \n"+zH(e.errors).join("\n")+"\n\nInput object: "+Cl(e.input);throw new f(e);},Ka));const b=Lm(Xe(a,d=>d.trigger)),c=Xe(a,Ka);return{dataset:a,triggers:b,lookupByTrigger:d=>ka(c,e=>e.trigger===d)}},hI=(a,b)=>{const c=pj(b.load,50);a.on("keypress compositionend",d=>{27!==
d.which&&c.throttle()});a.on("keydown",d=>{d=d.which;8===d?c.throttle():27===d&&b.cancelIfNecessary()});a.on("remove",c.cancel)},iI=a=>{const b=Yc(),c=Wa(!1),d=b.isSet,e=()=>{d()&&(La(a).autocompleter.removeDecoration(),a.dispatch("AutocompleterEnd"),c.set(!1),b.clear())},f=l=>{if(!d()){var m=l.range;La(a).autocompleter.addDecoration(m);b.set({trigger:l.trigger,matchLength:l.text.length})}},g=td(()=>gI(a)),h=l=>b.get().map(m=>Xt(a.dom,a.selection.getRng(),m.trigger).bind(n=>$t(a,g,n,l))).getOrThunk(()=>
yH(a,g)),k=l=>{h(l).fold(e,m=>{f(m.context);m.lookupData.then(n=>{b.get().map(t=>{const y=m.context;t.trigger===y.trigger&&(10<=y.text.length-t.matchLength?e():(b.set(Object.assign({},t,{matchLength:y.text.length})),c.get()?a.dispatch("AutocompleterUpdate",{lookupData:n}):(c.set(!0),a.dispatch("AutocompleterStart",{lookupData:n}))))})})})};a.addCommand("mceAutocompleterReload",(l,m)=>{l=jb(m)?m.fetchOptions:{};k(l)});a.addCommand("mceAutocompleterClose",e);hI(a,{cancelIfNecessary:e,load:k})},mu=a=>
(b,c,d)=>{d=void 0===d?{}:d;var e=b.getBody();c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:e,currentTarget:e,eventPhase:Event.AT_TARGET,originalTarget:e,explicitOriginalTarget:e,isTrusted:!1,srcElement:e,cancelable:!1,preventDefault:pa,inputType:c};e=Jn(new InputEvent(a));return b.dispatch(a,Object.assign({},e,c,d))},Sh=mu("input"),Th=mu("beforeinput"),jI=(a,b,c)=>{const d=c.keyCode===X.BACKSPACE?"deleteContentBackward":"deleteContentForward";Gt([{keyCode:X.BACKSPACE,
action:ma(st,a)},{keyCode:X.BACKSPACE,action:ma(il,a,!1)},{keyCode:X.DELETE,action:ma(il,a,!0)},{keyCode:X.BACKSPACE,action:ma(fl,a,!1)},{keyCode:X.DELETE,action:ma(fl,a,!0)},{keyCode:X.BACKSPACE,action:ma(ql,a,b,!1)},{keyCode:X.DELETE,action:ma(ql,a,b,!0)},{keyCode:X.BACKSPACE,action:ma(Ak,a,!1)},{keyCode:X.DELETE,action:ma(Ak,a,!0)},{keyCode:X.BACKSPACE,action:ma(jl,a,!1)},{keyCode:X.DELETE,action:ma(jl,a,!0)},{keyCode:X.BACKSPACE,action:ma(tl,a,!1)},{keyCode:X.DELETE,action:ma(tl,a,!0)},{keyCode:X.BACKSPACE,
action:ma(dl,a,!1)},{keyCode:X.DELETE,action:ma(dl,a,!0)},{keyCode:X.BACKSPACE,action:ma(cl,a,!1)},{keyCode:X.DELETE,action:ma(cl,a,!0)},{keyCode:X.BACKSPACE,action:ma(rl,a,!1)},{keyCode:X.DELETE,action:ma(rl,a,!0)}],c).filter(e=>a.selection.isEditable()).each(e=>{c.preventDefault();Th(a,d).isDefaultPrevented()||(e(),Sh(a,d))})},kI=(a,b)=>{let c=!1;a.on("keydown",d=>{c=d.keyCode===X.BACKSPACE;d.isDefaultPrevented()||jI(a,b,d)});a.on("keyup",d=>{if(!d.isDefaultPrevented()){var e=c,f=hc();const g=f.os;
f=f.browser;const h=g.isMacOS()?[{keyCode:X.BACKSPACE,altKey:!0,action:ma(Zf,a)},{keyCode:X.DELETE,altKey:!0,action:ma(Zf,a)}]:[{keyCode:X.BACKSPACE,ctrlKey:!0,action:ma(Zf,a)},{keyCode:X.DELETE,ctrlKey:!0,action:ma(Zf,a)}];g.isMacOS()&&e&&h.push({keyCode:f.isFirefox()?224:91,action:ma(Zf,a)});$f([{keyCode:X.BACKSPACE,action:ma(Js,a)},{keyCode:X.DELETE,action:ma(Js,a)},...h],d)}c=!1})},Fe=(a,b)=>{var c=a.dom;const d=a.schema.getMoveCaretBeforeOnEnterElements();if(b){if(/^(LI|DT|DD)$/.test(b.nodeName)){var e;
a:{for(e=b.firstChild;e;){if(V(e)||E(e)&&e.data&&/[\r\n\s]/.test(e.data))break a;e=e.nextSibling}e=null}e&&/^(UL|OL|DL)$/.test(e.nodeName)&&b.insertBefore(c.doc.createTextNode("\u00a0"),b.firstChild)}e=c.createRng();b.normalize();if(b.hasChildNodes()){c=new Ta(b,b);let f;for(;f=c.current();){if(E(f)){e.setStart(f,0);e.setEnd(f,0);break}if(d[f.nodeName.toLowerCase()]){e.setStartBefore(f);e.setEndBefore(f);break}b=f;c.next()}f||(e.setStart(b,0),e.setEnd(b,0))}else Ga(b)?b.nextSibling&&c.isBlock(b.nextSibling)?
(e.setStartBefore(b),e.setEndBefore(b)):(e.setStartAfter(b),e.setEndAfter(b)):(e.setStart(b,0),e.setEnd(b,0));a.selection.setRng(e);(a.inline?Jf:Kf)(a,e,void 0)}},Uh=(a,b)=>{const c=a.getRoot();let d;for(;b!==c&&b&&"false"!==a.getContentEditable(b);)"true"===a.getContentEditable(b)&&(d=b),b=b.parentNode;return b!==c?d:c},Il=a=>p.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock)),lI=a=>Il(a).fold(R(""),b=>b.nodeName.toUpperCase()),mI=a=>Il(a).filter(b=>hf(x.fromDom(b))).isSome(),nI=(a,b,
c)=>{for(;b&&b!==a&&zb(b.nextSibling);)if(b=b.parentElement,!b||!c(b))return tn(b);return!1},oI=(a,b,c)=>!b&&c.nodeName.toLowerCase()===vb(a)&&a.dom.isEmpty(c)&&nI(a.getBody(),c,d=>{var e=a.schema.getTextBlockElements();d=d.nodeName.toLowerCase();return ha.call(e,d)}),pI=(a,b,c)=>{var d,e,f;b=b(vb(a));const g=a.dom.getParent(c,tn);g&&(a.dom.insertAfter(b,g),Fe(a,b),1<(null!==(f=null===(e=null===(d=c.parentElement)||void 0===d?void 0:d.childNodes)||void 0===e?void 0:e.length)&&void 0!==f?f:0)&&a.dom.remove(c))},
nu=(a,b)=>{a=null===a||void 0===a?void 0:a.parentNode;return!aa(a)&&a.nodeName===b},ou=a=>!aa(a)&&/^(OL|UL|LI)$/.test(a.nodeName),Vh=a=>{const b=a.parentNode;return Ma(b)&&/^(LI|DT|DD)$/.test(b.nodeName)?b:a},Wh=(a,b,c)=>{for(a=a[c?"firstChild":"lastChild"];a&&!V(a);)a=a[c?"nextSibling":"previousSibling"];return a===b},qI=(a,b,c,d,e)=>{const f=a.dom,g=a.selection.getRng(),h=c.parentNode;if(c!==a.getBody()&&h){var k=c;ou(k)&&ou(k.parentNode)&&(e="LI");b=b(e);if(Wh(c,d,!0)&&Wh(c,d,!1))if(nu(c,"LI")){d=
Vh(c);f.insertAfter(b,d);var l;(null===(l=c.parentNode)||void 0===l?void 0:l.firstChild)===c?f.remove(d):f.remove(c)}else f.replace(b,c);else Wh(c,d,!0)?nu(c,"LI")?(f.insertAfter(b,Vh(c)),b.appendChild(f.doc.createTextNode(" ")),b.appendChild(c)):h.insertBefore(b,c):Wh(c,d,!1)?f.insertAfter(b,Vh(c)):(c=Vh(c),l=g.cloneRange(),l.setStartAfter(d),l.setEndAfter(c),l=l.extractContents(),"LI"===e&&l.firstChild&&"LI"===l.firstChild.nodeName?(b=l.firstChild,f.insertAfter(l,c)):(f.insertAfter(l,c),f.insertAfter(b,
c))),f.remove(d);Fe(a,b)}},rI=a=>{G(on(x.fromDom(a),Ib),b=>{b=b.dom;b.nodeValue=bc(b.data)})},sI=(a,b)=>{b=a.dom.getParent(b,"ol,ul,dl");return null!==b&&"false"===a.dom.getContentEditableParent(b)},Jl=a=>{a.innerHTML='<br data-mce-bogus="1">'},Kl=(a,b)=>a.nodeName===b||a.previousSibling&&a.previousSibling.nodeName===b,Ll=(a,b)=>!aa(b)&&a.isBlock(b)&&!/^(TD|TH|CAPTION|FORM)$/.test(b.nodeName)&&!/^(fixed|absolute)/i.test(b.style.position)&&a.isEditable(b.parentNode)&&"false"!==a.getContentEditable(b),
tI=(a,b,c)=>{var d;const e=[];if(c){for(;c=c.firstChild;){if(a.isBlock(c))return;V(c)&&!b[c.nodeName.toLowerCase()]&&e.push(c)}for(b=e.length;b--;)c=e[b],!c.hasChildNodes()||c.firstChild===c.lastChild&&""===(null===(d=c.firstChild)||void 0===d?void 0:d.nodeValue)?a.remove(c):c&&"A"===c.nodeName&&a.isEmpty(c)&&a.remove(c)}},Ml=(a,b,c)=>E(b)?a?1===c&&"\ufeff"===b.data.charAt(c-1)?0:c:c===b.data.length-1&&"\ufeff"===b.data.charAt(c)?b.data.length:c:c,uI=a=>{const b=a.cloneRange();b.setStart(a.startContainer,
Ml(!0,a.startContainer,a.startOffset));b.setEnd(a.endContainer,Ml(!1,a.endContainer,a.endOffset));return b},vI=a=>{do E(a)&&(a.data=a.data.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)},wI=(a,b,c)=>{const d=a.dom;p.from(c.style).map(d.parseStyle).each(g=>{const h=gn(x.fromDom(b));g=Object.assign({},h,g);d.setStyles(b,g)});a=p.from(c.class).map(g=>g.split(/\s+/));const e=p.from(b.className).map(g=>ka(g.split(/\s+/),h=>""!==h));sb(a,e,(g,h)=>{h=ka(h,k=>!(-1<Ca.call(g,k)));h=[...g,...h];d.setAttrib(b,
"class",h.join(" "))});const f=["style","class"];c=We(c,(g,h)=>!(-1<Ca.call(f,h)));d.setAttribs(b,c)},dg=(a,b)=>{if(vb(a).toLowerCase()===b.tagName.toLowerCase()){const c=uf(a);wI(a,b,c)}},xI=(a,b,c,d,e)=>{var f,g;const h=a.dom;var k=null!==(f=Uh(h,d))&&void 0!==f?f:h.getRoot();f=h.getParent(d,h.isBlock);if(!f||!Ll(h,f)){f=f||k;if(!f.hasChildNodes())return d=h.create(b),dg(a,d),f.appendChild(d),c.setStart(d,0),c.setEnd(d,0),d;for(k=d;k&&k.parentNode!==f;)k=k.parentNode;let l;for(;k&&!h.isBlock(k);)l=
k,k=k.previousSibling;f=null===(g=null===l||void 0===l?void 0:l.parentElement)||void 0===g?void 0:g.nodeName;if(l&&f&&a.schema.isValidChild(f,b.toLowerCase())){g=l.parentNode;b=h.create(b);dg(a,b);g.insertBefore(b,l);for(k=l;k&&!h.isBlock(k);)a=k.nextSibling,b.appendChild(k),k=a;c.setStart(d,e);c.setEnd(d,e)}}return d},yI=(a,b)=>{b.normalize();const c=b.lastChild;(!c||V(c)&&/^(left|right)$/gi.test(a.getStyle(c,"float",!0)))&&a.add(b,"br")},pu={insert:(a,b)=>{let c,d,e,f,g=!1;const h=a.dom,k=a.schema,
l=k.getNonEmptyElements(),m=a.selection.getRng(),n=vb(a);var t=m.collapsed&&m.startContainer===a.dom.getRoot();const y=x.fromDom(m.startContainer);var w=kc(y,m.startOffset),q=w.exists(L=>Li(L)&&!wd(L));q=t&&q;const r=L=>{let U=c;const ja=k.getTextInlineElements();let qa=L=L||"TABLE"===e||"HR"===e?h.create(L||n):N.cloneNode(!1);if(!1===Ry(a))h.setAttrib(L,"style",null),h.setAttrib(L,"class",null);else{do if(ja[U.nodeName]){if(Ub(U)||hb(U))continue;const Ha=U.cloneNode(!1);h.setAttrib(Ha,"id","");L.hasChildNodes()?
Ha.appendChild(L.firstChild):qa=Ha;L.appendChild(Ha)}while((U=U.parentNode)&&U!==P)}dg(a,L);Jl(qa);return L},v=L=>{var U=Ml(L,c,d);if(E(c)&&(L?0<U:U<c.data.length))return!1;if(c.parentNode===N&&g&&!L||L&&V(c)&&c===N.firstChild)return!0;if(Kl(c,"TABLE")||Kl(c,"HR"))return g&&!L||!g&&L;const ja=new Ta(c,N);for(E(c)&&(L&&0===U?ja.prev():L||U!==c.data.length||ja.next());U=ja.current();){if(V(U)){if(!U.getAttribute("data-mce-bogus")&&(U=U.nodeName.toLowerCase(),l[U]&&"br"!==U))return!1}else if(E(U)&&!Bd.test(U.data))return!1;
L?ja.prev():ja.next()}return!0};t=()=>{let L;L=/^(H[1-6]|PRE|FIGURE)$/.test(e)&&"HGROUP"!==Y?r(n):r();{var U=f;const ja=Sy(a);U=aa(U)?!1:fa(ja)?Qe(K.explode(ja),U.nodeName.toLowerCase()):ja}U&&Ll(h,f)&&h.isEmpty(N,void 0,{includeZwsp:!0})?L=h.split(f,N):h.insertAfter(L,N);Fe(a,L);return L};jh(h,m).each(L=>{m.setStart(L.startContainer,L.startOffset);m.setEnd(L.endContainer,L.endOffset)});c=m.startContainer;d=m.startOffset;const z=!(!b||!b.shiftKey);b=!(!b||!b.ctrlKey);V(c)&&c.hasChildNodes()&&!q&&
(g=d>c.childNodes.length-1,c=c.childNodes[Math.min(d,c.childNodes.length-1)]||c,d=g&&E(c)?c.data.length:0);const P=Uh(h,c);if(P&&!sI(a,c)){z||(c=xI(a,n,m,c,d));var N=h.getParent(c,h.isBlock)||h.getRoot();f=aa(null===N||void 0===N?void 0:N.parentNode)?null:h.getParent(N.parentNode,h.isBlock);e=N?N.nodeName.toUpperCase():"";var Y=f?f.nodeName.toUpperCase():"";"LI"!==Y||b||(N=b=f,f=b.parentNode,e=Y);if(V(f)&&oI(a,z,N))return pI(a,r,N);if(/^(LI|DT|DD)$/.test(e)&&V(f)&&h.isEmpty(N))qI(a,r,f,N,n);else if(q||
N!==a.getBody()&&Ll(h,N)){b=N.parentNode;if(q){var O=r(n);w.fold(()=>{var L=x.fromDom(O);y.dom.appendChild(L.dom)},L=>{Bb(L,x.fromDom(O))});a.selection.setCursorLocation(O,0)}else Uc(N)?(O=$i(N),h.isEmpty(N)&&Jl(N),dg(a,O),Fe(a,O)):v(!1)?O=t():v(!0)&&b?(O=b.insertBefore(r(),N),w=x.fromDom(m.startContainer).dom.hasChildNodes()&&m.collapsed,Fe(a,Kl(N,"HR")||w?O:N)):(w=uI(m).cloneRange(),w.setEndAfter(N),w=w.extractContents(),rI(w),vI(w),O=w.firstChild,h.insertAfter(w,N),tI(h,l,O),yI(h,N),h.isEmpty(N)&&
Jl(N),O.normalize(),h.isEmpty(O)?(h.remove(O),t()):(dg(a,O),Fe(a,O)));h.setAttrib(O,"id","");a.dispatch("NewBlock",{newBlock:O})}}},fakeEventName:"insertParagraph"},zI=(a,b,c)=>{b=new Ta(b,c);for(c=a.getNonEmptyElements();a=b.next();)if(c[a.nodeName.toLowerCase()]||E(a)&&0<a.length)return!0;return!1},qu=(a,b,c)=>{const d=a.dom.createRng();c?(d.setStartBefore(b),d.setEndBefore(b)):(d.setStartAfter(b),d.setEndAfter(b));a.selection.setRng(d);(a.inline?Jf:Kf)(a,d,void 0)},AI=(a,b)=>{const c=a.dom,d=a.selection.getRng();
let e=!1;jh(c,d).each(m=>{d.setStart(m.startContainer,m.startOffset);d.setEnd(m.endContainer,m.endOffset)});var f=d.startOffset;let g=d.startContainer;if(V(g)&&g.hasChildNodes()){var h=f>g.childNodes.length-1;g=g.childNodes[Math.min(f,g.childNodes.length-1)]||g;f=h&&E(g)?g.data.length:0}const k=(h=c.getParent(g,c.isBlock))&&h.parentNode?c.getParent(h.parentNode,c.isBlock):null,l=k?k.nodeName.toUpperCase():"";b=!(!b||!b.ctrlKey);"LI"!==l||b||(h=k);E(g)&&f>=g.data.length&&!zI(a.schema,g,h||c.getRoot())&&
(f=c.create("br"),d.insertNode(f),d.setStartAfter(f),d.setEndAfter(f),e=!0);f=c.create("br");tj(c,d,f);qu(a,f,e);a.undoManager.add()},BI=(a,b)=>{const c=x.fromTag("br");Bb(x.fromDom(b),c);a.undoManager.add()},DI=(a,b)=>{CI(a.getBody(),b)||Qc(x.fromDom(b),x.fromTag("br"));const c=x.fromTag("br");Qc(x.fromDom(b),c);qu(a,c.dom,!1);a.undoManager.add()},CI=(a,b)=>Ga(C.after(b).getNode())?!0:mb(a,C.after(b)).map(c=>Ga(c.getNode())).getOr(!1),ru=a=>a&&"A"===a.nodeName&&"href"in a,EI=a=>a.fold(za,ru,ru,za),
FI=(a,b)=>{b.fold(pa,A(BI,a),A(DI,a),pa)},su={insert:(a,b)=>{var c=A(Pd,a);const d=C.fromRangeStart(a.selection.getRng());c=tc(c,a.getBody(),d).filter(EI);c.isSome()?c.each(A(FI,a)):AI(a,b)},fakeEventName:"insertLineBreak"},tu=(a,b)=>Il(a).filter(c=>0<b.length&&Zb(x.fromDom(c),b)).isSome(),Hb=nc.generate([{br:[]},{block:[]},{none:[]}]),GI=(a,b)=>tu(a,Qy(a)),uu=a=>(b,c)=>mI(b)===a,Ge=(a,b)=>(c,d)=>lI(c)===a.toUpperCase()===b,HI=a=>{a=Uh(a.dom,a.selection.getStart());return null===a||void 0===a},Xh=
a=>(b,c)=>Ny(b)===a,II=(a,b)=>tu(a,Py(a)),Yh=(a,b)=>b,JI=a=>{const b=vb(a),c=Uh(a.dom,a.selection.getStart());return!aa(c)&&a.schema.isValidChild(c.nodeName,b)},KI=a=>{var b=a.selection.getRng();a=b.collapsed&&b.startContainer===a.dom.getRoot();const c=x.fromDom(b.startContainer);b=kc(c,b.startOffset).map(d=>Li(d)&&!wd(d));return a&&b.getOr(!0)},Pb=(a,b)=>(c,d)=>Db(a,(e,f)=>e&&f(c,d),!0)?p.some(b):p.none(),LI=(a,b)=>Os([Pb([GI],Hb.none()),Pb([Ge("pre",!0),HI],Hb.none()),Pb([Ge("summary",!0)],Hb.br()),
Pb([Ge("pre",!0),Xh(!1),Yh],Hb.br()),Pb([Ge("pre",!0),Xh(!1)],Hb.block()),Pb([Ge("pre",!0),Xh(!0),Yh],Hb.block()),Pb([Ge("pre",!0),Xh(!0)],Hb.br()),Pb([uu(!0),Yh],Hb.br()),Pb([uu(!0)],Hb.block()),Pb([II],Hb.br()),Pb([Yh],Hb.br()),Pb([JI],Hb.block()),Pb([KI],Hb.block())],[a,!(!b||!b.shiftKey)]).getOr(Hb.none()),Zh=(a,b,c)=>{b.selection.isCollapsed()||b.execCommand("delete");if(aa(c)||!Th(b,a.fakeEventName).isDefaultPrevented())a.insert(b,c),aa(c)||Sh(b,a.fakeEventName)},vu=(a,b)=>{const c=()=>Zh(su,
a,b),d=()=>Zh(pu,a,b),e=LI(a,b);switch(Oy(a)){case "linebreak":e.fold(c,c,pa);break;case "block":e.fold(d,d,pa);break;case "invert":e.fold(d,c,pa);break;default:e.fold(c,d,pa)}},wu=hc(),MI=wu.os.isiOS()&&wu.browser.isSafari(),xu=(a,b)=>{b.isDefaultPrevented()||(b.preventDefault(),xE(a.undoManager),a.undoManager.transact(()=>{vu(a,b)}))},NI=a=>{let b=p.none();const c=(d,e)=>{d.undoManager.undo();b.fold(pa,f=>d.selection.moveToBookmark(f));xu(d,e);b=p.none()};a.on("keydown",d=>{if(d.keyCode===X.ENTER){var e;
if(e=MI)if(e=a.selection.getRng(),e.collapsed){var f=e.startContainer;E(f)?(e=f.data.charAt(e.startOffset-1),e=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(e)):e=!1}else e=!1;e?(b=p.some(a.selection.getBookmark()),a.undoManager.add()):xu(a,d)}});a.on("keyup",d=>{d.keyCode===X.ENTER&&b.each(()=>c(a,d))})},OI=(a,b,c)=>{const d=ua.os.isMacOS()||ua.os.isiOS();$f([{keyCode:X.END,action:ma(Ct,a,!0)},{keyCode:X.HOME,action:ma(Ct,a,!1)},...(d?[]:[{keyCode:X.HOME,action:ma(Lh,
a,!1),ctrlKey:!0,shiftKey:!0},{keyCode:X.END,action:ma(Lh,a,!0),ctrlKey:!0,shiftKey:!0}]),{keyCode:X.END,action:ma(Jt,a,!0)},{keyCode:X.HOME,action:ma(Jt,a,!1)},{keyCode:X.END,action:ma(Kh,a,!0,b)},{keyCode:X.HOME,action:ma(Kh,a,!1,b)}],c).each(e=>{c.preventDefault()})},PI=(a,b)=>{a.on("keydown",c=>{c.isDefaultPrevented()||OI(a,b,c)})},QI=a=>{a.on("input",b=>{b.isComposing||SB(a)})},RI=hc(),yu=a=>a.stopImmediatePropagation(),zu=(a,b,c)=>{if(c&&!a.get())b.on("NodeChange",yu,!0);else!c&&a.get()&&b.off("NodeChange",
yu);a.set(c)},SI=(a,b)=>{if(!RI.os.isMacOS()){var c=Wa(!1);a.on("keydown",d=>{d.keyCode!==X.PAGE_UP&&d.keyCode!==X.PAGE_DOWN||zu(c,a,!0)});a.on("keyup",d=>{d.isDefaultPrevented()||$f([{keyCode:X.PAGE_UP,action:ma(Kh,a,!1,b)},{keyCode:X.PAGE_DOWN,action:ma(Kh,a,!0,b)}],d);d.keyCode!==X.PAGE_UP&&d.keyCode!==X.PAGE_DOWN||!c.get()||(zu(c,a,!1),a.nodeChanged())})}},Au=(a,b)=>{const c=b.container(),d=b.offset();return E(c)?(c.insertData(d,a),p.some(C(c,d+a.length))):p.from(b.getNode()).map(x.fromDom).map(e=>
{const f=x.fromText(a);b.isAtEnd()?Qc(e,f):Bb(e,f);return C(f.dom,a.length)})},Bu=A(Au,"\u00a0"),Cu=A(Au," "),TI=a=>b=>b.fold(c=>nb(a.dom,C.before(c)),c=>ob(c),c=>Tb(c),c=>mb(a.dom,C.after(c))),UI=(a,b)=>c=>oq(a,c)?Bu(b):Cu(b),Du=a=>b=>{a.selection.setRng(b.toRange());a.nodeChanged()},VI=(a,b)=>a.isEditable(a.getParent(b,"summary")),WI=a=>{const b=C.fromRangeStart(a.selection.getRng()),c=x.fromDom(a.getBody());if(a.selection.isCollapsed()){const d=A(Pd,a),e=C.fromRangeStart(a.selection.getRng());
return tc(d,a.getBody(),e).bind(TI(c)).map(f=>()=>UI(c,b)(f).each(Du(a)))}return p.none()},XI=a=>fe(ua.browser.isFirefox()&&a.selection.isEditable()&&VI(a.dom,a.selection.getRng().startContainer),()=>{const b=x.fromDom(a.getBody());a.selection.isCollapsed()||a.getDoc().execCommand("Delete");var c=C.fromRangeStart(a.selection.getRng());(oq(b,c)?Bu(c):Cu(c)).each(Du(a))}),YI=(a,b)=>{Gt([{keyCode:X.SPACEBAR,action:ma(WI,a)},{keyCode:X.SPACEBAR,action:ma(XI,a)}],b).each(c=>{b.preventDefault();Th(a,"insertText",
{data:" "}).isDefaultPrevented()||(c(),Sh(a,"insertText",{data:" "}))})},ZI=a=>{a.on("keydown",b=>{b.isDefaultPrevented()||YI(a,b)})},$I=a=>Wz(a)?[{keyCode:X.TAB,action:ma(Vt,a,!0)},{keyCode:X.TAB,shiftKey:!0,action:ma(Vt,a,!1)}]:[],aJ=(a,b)=>{$f([...$I(a)],b).each(c=>{b.preventDefault()})},bJ=a=>{a.on("keydown",b=>{b.isDefaultPrevented()||aJ(a,b)})},cJ=a=>{a.addShortcut("Meta+P","","mcePrint");iI(a);if(ha.call(a.plugins,"rtc"))return Wa(null);const b=oG(a);a.on("keyup compositionstart",A(MG,a));
rH(a,b);kI(a,b);NI(a);ZI(a);QI(a);bJ(a);PI(a,b);SI(a,b);return b};class dJ{constructor(a){this.lastPath=[];this.editor=a;let b;const c=this;if(!("onselectionchange"in a.getDoc()))a.on("NodeChange click mouseup keyup focus",d=>{var e=a.selection.getRng();e={startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset};"nodechange"!==d.type&&Xj(e,b)||a.dispatch("SelectionChange");b=e});a.on("contextmenu",()=>{a.dispatch("SelectionChange")});a.on("SelectionChange",
()=>{const d=a.selection.getStart(!0);d&&ch(a)&&!c.isSameElementPath(d)&&a.dom.isChildOf(d,a.getBody())&&a.nodeChanged({selectionChange:!0})});a.on("mouseup",d=>{!d.isDefaultPrevented()&&ch(a)&&("IMG"===a.selection.getNode().nodeName?Mb.setEditorTimeout(a,()=>{a.nodeChanged()}):a.nodeChanged())})}nodeChanged(a){a=void 0===a?{}:a;var b=this.editor.selection;if(this.editor.initialized&&b&&!uz(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();b=b.getStart(!0)||c;b.ownerDocument===
this.editor.getDoc()&&this.editor.dom.isChildOf(b,c)||(b=c);const d=[];this.editor.dom.getParent(b,e=>{if(e===c)return!0;d.push(e);return!1});this.editor.dispatch("NodeChange",Object.assign({},a,{element:b,parents:d}))}}isSameElementPath(a){var b=this.editor;b=ae(b.dom.getParents(a,Qa,b.getBody()));if(b.length===this.lastPath.length){for(a=b.length;0<=a&&b[a]===this.lastPath[a];a--);if(-1===a)return this.lastPath=b,!0}this.lastPath=b;return!1}}const Eu=qf("image"),Nl=qf("event"),$h=a=>b=>{b[Nl]=a},
Fu=$h(0),eJ=$h(2),fJ=$h(1),gJ=(a=>b=>p.from(b[Nl]).exists(c=>c===a))(0),hJ=()=>Object.freeze({length:0,item:a=>null}),Ol=qf("mode"),eg=a=>b=>{b[Ol]=a},Gu=eg(0),Pl=eg(2),iJ=eg(1),Hu=a=>b=>p.from(b[Ol]).exists(c=>c===a),He=Hu(0),Iu=Hu(1),jJ=(a,b)=>Object.assign({},b,{get length(){return b.length},add:(c,d)=>{if(He(a))if(fa(c)){if(!db(d))return b.add(c,d)}else return b.add(c);return null},remove:c=>{He(a)&&b.remove(c)},clear:()=>{He(a)&&b.clear()}}),kJ=["none","copy","link","move"],lJ="none copy copyLink copyMove link linkMove move all uninitialized".split(" "),
Ql=()=>{const a=new window.DataTransfer;let b="move",c="all";const d={get dropEffect(){return b},set dropEffect(e){-1<Ca.call(kJ,e)&&(b=e)},get effectAllowed(){return c},set effectAllowed(e){gJ(d)&&-1<Ca.call(lJ,e)&&(c=e)},get items(){return jJ(d,a.items)},get files(){return Iu(d)?hJ():a.files},get types(){return a.types},setDragImage:(e,f,g)=>{He(d)&&(d[Eu]={image:e,x:f,y:g},a.setDragImage(e,f,g))},getData:e=>Iu(d)?"":a.getData(e),setData:(e,f)=>{He(d)&&a.setData(e,f)},clearData:e=>{He(d)&&a.clearData(e)}};
Gu(d);return d},mJ=a=>{const b=Ql(),c=p.from(a[Ol]);Pl(a);Fu(b);b.dropEffect=a.dropEffect;b.effectAllowed=a.effectAllowed;p.from(a[Eu]).each(d=>b.setDragImage(d.image,d.x,d.y));G(a.types,d=>{"Files"!==d&&b.setData(d,a.getData(d))});G(a.files,d=>b.items.add(d));p.from(a[Nl]).each(d=>{$h(d)(b)});c.each(d=>{eg(d)(a);eg(d)(b)});return b},nJ=a=>{a=a.getData("text/html");return""===a?p.none():p.some(a)},ai=R("x-tinymce/html"),oJ=(a,b)=>{a="<"+a;b=Xe(b,(c,d)=>d+'="'+Wc.encodeAllRaw(c)+'"');b.length&&(a+=
" "+b.join(" "));return a+">"},pJ=(a,b,c)=>{a=a.split(/\n\n/);const d=oJ(b,c),e="</"+b+">";b=wa(a,f=>f.split(/\n/).join("<br />"));c=f=>d+f+e;return 1===b.length?b[0]:wa(b,c).join("")},qJ=(a,b)=>{const {dom:c,selection:d}=a,e=a.getBody();b.set(d.getRng());a=c.add(a.getBody(),"div",{id:"mcepastebin","class":"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");ua.browser.isFirefox()&&c.setStyle(a,
"left","rtl"===c.getStyle(e,"direction",!0)?65535:-65535);c.bind(a,"beforedeactivate focusin focusout",f=>{f.stopPropagation()});a.focus();d.select(a,!0)},rJ=a=>!aa(a)&&"mcepastebin"===a.id,sJ=a=>{const b=a.dom,c=(f,g)=>{f.appendChild(g);b.remove(g,!0)},[d,...e]=ka(a.getBody().childNodes,rJ);G(e,f=>{c(d,f)});a=b.select("div[id=mcepastebin]",d);for(let f=a.length-1;0<=f;f--){const g=b.create("div");d.insertBefore(g,a[f]);c(g,a[f])}return d?d.innerHTML:""},tJ=a=>{const b=Wa(null);return{create:()=>
qJ(a,b),remove:()=>{const c=a.dom;if(a.dom.get("mcepastebin")){let d;const e=b.get();for(;d=a.dom.get("mcepastebin");)c.remove(d),c.unbind(d);e&&a.selection.setRng(e)}b.set(null)},getEl:()=>a.dom.get("mcepastebin"),getHtml:()=>sJ(a),getLastRng:b.get}},Ju=(a,b)=>{K.each(b,c=>{a=Zd(c,RegExp)?a.replace(c,""):a.replace(c[0],c[1])});return a},uJ=a=>{const b=Xc(),c=Ae({},b);let d="";const e=b.getVoidElements(),f=K.makeMap("script noscript style textarea video audio iframe object"," "),g=b.getBlockElements(),
h=k=>{const l=k.name;if("br"===l)d+="\n";else if("wbr"!==l)if(e[l]&&(d+=" "),f[l])d+=" ";else{3===k.type&&(d+=k.value);if(!(k.name in b.getVoidElements())){let m=k.firstChild;if(m){do h(m);while(m=m.next)}}g[l]&&k.next&&(d+="\n","p"===l&&(d+="\n"))}};a=Ju(a,[/<!\[[^\]]+\]>/g]);h(c.parse(a));return d},Ku=a=>a=Ju(a,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(b,c,d)=>c||d?"\u00a0":
" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),vJ=(a,b)=>{const c=Ae({sanitize:Cj(a)},a.schema);c.addNodeFilter("meta",d=>{K.each(d,e=>{e.remove()})});b=c.parse(b,{forced_root_block:!1,isRootContent:!0});return ed({validate:!0},a.schema).serialize(b)},bi=(a,b)=>{a.insertContent(b,{merge:Nz(a),paste:!0});return!0},Rl=a=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(a),wJ=(a,b)=>Rl(b)&&Na(K.explode(a.options.get("images_file_types")),c=>Hi(b.toLowerCase(),`.${c.toLowerCase()}`)),xJ=(a,
b,c)=>{a.undoManager.extra(()=>{c(a,b)},()=>{a.insertContent('<img src="'+b+'">')});return!0},yJ=(a,b,c)=>{a.undoManager.extra(()=>{c(a,b)},()=>{a.execCommand("mceInsertLink",!1,b)});return!0},zJ=(a,b,c)=>!a.selection.isCollapsed()&&Rl(b)?yJ(a,b,c):!1,AJ=(a,b,c)=>wJ(a,b)?xJ(a,b,c):!1,Lu=(a,b)=>{K.each([zJ,AJ,bi],c=>!c(a,b,bi))},BJ=(a=>{let b=0;return()=>a+b++})("mceclip"),Mu=(a,b,c,d,e)=>{const f=a.dispatch("PastePreProcess",{content:b,internal:c});b=vJ(a,f.content);a.hasEventListeners("PastePostProcess")&&
!f.isDefaultPrevented()?(b=a.dom.create("div",{style:"display:none"},b),b=a.dispatch("PastePostProcess",{node:b,internal:c}),c=b.isDefaultPrevented(),c={content:b.node.innerHTML,cancelled:c}):(c=f.isDefaultPrevented(),c={content:b,cancelled:c});c.cancelled||(c=c.content,e?(e=c,b=Ql(),b.setData("text/html",e),Pl(b),Th(a,"insertFromPaste",{dataTransfer:b}).isDefaultPrevented()||(e=c,d||!Fo(a)?bi(a,e):Lu(a,e),Sh(a,"insertFromPaste"))):(e=c,d||!Fo(a)?bi(a,e):Lu(a,e)))},ci=(a,b,c,d)=>{c=c?c:-1!==b.indexOf("\x3c!-- x-tinymce/html --\x3e");
Mu(a,b.replace("\x3c!-- x-tinymce/html --\x3e",""),c,!1,d)},Sl=(a,b,c)=>{b=a.dom.encode(b).replace(/\r\n/g,"\n");b=vn(b,Pz(a));b=pJ(b,vb(a),uf(a));Mu(a,b,!1,!0,c)},Nu=a=>{const b={};if(a&&a.types)for(let c=0;c<a.types.length;c++){const d=a.types[c];try{b[d]=a.getData(d)}catch(e){b[d]=""}}return b},kd=(a,b)=>b in a&&0<a[b].length,Ou=a=>kd(a,"text/html")||kd(a,"text/plain"),CJ=(a,b)=>{Sk(b.uri).each(c=>{var {data:d,type:e,base64Encoded:f}=c,g=f?d:btoa(d);const h=b.file;c=a.editorUpload.blobCache;var k=
c.getByData(g,e);if(null!==k&&void 0!==k)c=k;else{k=BJ();const m=vo(a)&&Ma(h.name);if(m){var l=h.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);l=aa(l)?void 0:a.dom.encode(l[1])}else l=k;g=c.create(k,h,g,l,m?h.name:void 0);c.add(g);c=g}ci(a,`<img src="${c.blobUri()}">`,!1,!0)})},DJ=a=>Promise.all(wa(a,b=>Gr(b).then(c=>({file:b,uri:c})))),EJ=a=>{const b=K.explode(a.options.get("images_file_types"));return c=>Ua(c.type,"image/",0)&&Na(b,d=>{d=d.toLowerCase();const e={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",
jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return(K.hasOwn(e,d)?"image/"+e[d]:"image/"+d)===c.type})},FJ=(a,b)=>{const c=b.items?gc(qb(b.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[];b=b.files?qb(b.files):[];return ka(0<c.length?c:b,EJ(a))},Pu=(a,b,c)=>{var d="paste"===b.type?b.clipboardData:b.dataTransfer;return Xg(a)&&d&&(d=FJ(a,d),0<d.length)?(b.preventDefault(),DJ(d).then(e=>{c&&a.selection.setRng(c);G(e,f=>{CJ(a,f)})}),!0):!1},GJ=a=>{var b,c;return ua.os.isAndroid()&&0===(null===(c=
null===(b=a.clipboardData)||void 0===b?void 0:b.items)||void 0===c?void 0:c.length)},Tl=(a,b,c,d,e)=>{let f=Ku(c);c=kd(b,ai())||-1!==c.indexOf("\x3c!-- x-tinymce/html --\x3e");const g=!c&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(f),h=Rl(f);if("%MCEPASTEBIN%"===f||!f.length||g&&!h)d=!0;if(d||h)f=kd(b,"text/plain")&&g?b["text/plain"]:uJ(f);"%MCEPASTEBIN%"!==f&&(d?Sl(a,f,e):ci(a,f,c,e))},HJ=(a,b,c)=>{let d;a.on("keydown",e=>{(X.metaKeyPressed(e)&&
86===e.keyCode||e.shiftKey&&45===e.keyCode)&&!e.isDefaultPrevented()&&(d=e.shiftKey&&86===e.keyCode)});a.on("paste",e=>{if(!e.isDefaultPrevented()&&!GJ(e)){var f="text"===c.get()||d;d=!1;var g=Nu(e.clipboardData);if(Ou(g)||!Pu(a,e,b.getLastRng()||a.selection.getRng()))kd(g,"text/html")?(e.preventDefault(),Tl(a,g,g["text/html"],f,!0)):kd(g,"text/plain")&&kd(g,"text/uri-list")?(e.preventDefault(),Tl(a,g,g["text/plain"],f,!0)):(b.create(),Mb.setEditorTimeout(a,()=>{const h=b.getHtml();b.remove();Tl(a,
g,h,f,!1)},0))}})},IJ=a=>{a.parser.addNodeFilter("img",(b,c,d)=>{if(c=!Xg(a)){var e;c=!0===(null===(e=d.data)||void 0===e?void 0:e.paste)}if(c)for(const f of b)b=f.attr("src"),fa(b)&&!f.attr("data-mce-object")&&b!==ua.transparentSrc&&(Ua(b,"webkit-fake-url",0)?f.remove():!Qz(a)&&Ua(b,"data:",0)&&f.remove())})},JJ=(a,b)=>{a.addCommand("mceTogglePlainTextPaste",()=>{"text"===b.get()?(b.set("html"),a.dispatch("PastePlainTextToggle",{state:!1})):(b.set("text"),a.dispatch("PastePlainTextToggle",{state:!0}));
a.focus()});a.addCommand("mceInsertClipboardContent",(c,d)=>{d.html&&ci(a,d.html,d.internal,!1);d.text&&Sl(a,d.text,!1)})},Qu=(a,b,c,d)=>{var e=a.clipboardData,f=b.html,g=b.text;if(e)try{e.clearData();e.setData("text/html",f);e.setData("text/plain",g);e.setData(ai(),f);var h=!0}catch(k){h=!1}else h=!1;h?(a.preventDefault(),d()):c(b.html,d)},Ru=a=>(b,c)=>{const {dom:d,selection:e}=a,f=d.create("div",{contenteditable:"false","data-mce-bogus":"all"});b=d.create("div",{contenteditable:"true"},b);d.setStyles(f,
{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});f.appendChild(b);d.add(a.getBody(),f);const g=e.getRng();b.focus();const h=d.createRng();h.selectNodeContents(b);e.setRng(h);Mb.setEditorTimeout(a,()=>{e.setRng(g);d.remove(f);c()},0)},Su=a=>({html:"\x3c!-- x-tinymce/html --\x3e"+a.selection.getContent({contextual:!0}),text:a.selection.getContent({format:"text"})}),Tu=a=>{var b;(b=!a.selection.isCollapsed())||(b=!!a.dom.getParent(a.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",
a.getBody()));return b},KJ=a=>b=>{!b.isDefaultPrevented()&&Tu(a)&&Qu(b,Su(a),Ru(a),()=>{if(ua.browser.isChromium()||ua.browser.isFirefox()){const c=a.selection.getRng();Mb.setEditorTimeout(a,()=>{a.selection.setRng(c);a.execCommand("Delete")},0)}else a.execCommand("Delete")})},LJ=a=>b=>{!b.isDefaultPrevented()&&Tu(a)&&Qu(b,Su(a),Ru(a),pa)},Uu=(a,b)=>{var c,d;return Md.getCaretRangeFromPoint(null!==(c=b.clientX)&&void 0!==c?c:0,null!==(d=b.clientY)&&void 0!==d?d:0,a.getDoc())},MJ=a=>(a=a["text/plain"])?
0===a.indexOf("file://"):!1,NJ=a=>Na(a.files,b=>/^image\//.test(b.type)),OJ=(a,b,c,d)=>(a=a.getParent(c,e=>Cd(b,e)))&&ha.call(d,"text/html")?(d=(new DOMParser).parseFromString(d["text/html"],"text/html").body,!zb(d.querySelector(a.nodeName.toLowerCase()))):!1,PJ=(a,b)=>{if(Hz(a))a.on("dragend dragover draggesture dragdrop drop drag",c=>{c.preventDefault();c.stopPropagation()});if(!Xg(a))a.on("drop",c=>{const d=c.dataTransfer;d&&NJ(d)&&c.preventDefault()});a.on("drop",c=>{if(!c.isDefaultPrevented()){var d=
Uu(a,c);if(null!==d&&void 0!==d){var e=Nu(c.dataTransfer),f=kd(e,ai());if(Ou(e)&&!MJ(e)||!Pu(a,c,d)){var g=e[ai()],h=g||e["text/html"]||e["text/plain"],k=OJ(a.dom,a.schema,d.startContainer,e);b.get()&&!k||!h||(c.preventDefault(),Mb.setEditorTimeout(a,()=>{a.undoManager.transact(()=>{g&&a.execCommand("Delete");a.focus();d&&a.selection.setRng(d);const l=Ku(h);e["text/html"]?ci(a,l,f,!0):Sl(a,l,!0)})}))}}}});a.on("dragstart",c=>{b.set(!0)});a.on("dragover dragend",c=>{if(Xg(a)&&!b.get()){c.preventDefault();
var d=Uu(a,c);a.focus();d&&a.selection.setRng(d)}"dragend"===c.type&&b.set(!1)})},QJ=a=>{const b=d=>e=>{d(a,e)};var c=Iz(a);if(ya(c))a.on("PastePreProcess",b(c));c=Jz(a);if(ya(c))a.on("PastePostProcess",b(c))},RJ=(a,b)=>{a.on("PastePreProcess",c=>{c.content=b(a,c.content,c.internal)})},Vu=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,SJ=(a,b,c)=>{const d=Lz(a);if(c||"all"===d||!Mz(a))return b;const e=d?d.split(/[, ]/):[];if(e&&"none"!==d){const f=a.dom,g=a.selection.getNode();b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,
(h,k,l,m)=>{h=f.parseStyle(f.decode(l));l={};for(let n=0;n<e.length;n++){const t=h[e[n]];let y=t,w=f.getStyle(g,e[n],!0);/color/.test(e[n])&&(y=K.trim(y).replace(Vu,Ef).toLowerCase(),w=K.trim(w).replace(Vu,Ef).toLowerCase());w!==y&&(l[e[n]]=t)}return(h=f.serializeStyle(l,"span"))?k+' style="'+h+'"'+m:k+m})}else b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return b=b.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(f,g,h,k)=>g+' style="'+h+'"'+k)},TJ=a=>{(ua.browser.isChromium()||
ua.browser.isSafari())&&RJ(a,SJ)},UJ=a=>{const b=Wa(!1),c=Wa(Oz(a)?"text":"html"),d=tJ(a);TJ(a);JJ(a,c);QJ(a);a.on("PreInit",()=>{a.on("cut",KJ(a));a.on("copy",LJ(a));PJ(a,b);HJ(a,d,c);IJ(a)})},VJ=a=>{a.on("click",b=>{a.dom.getParent(b.target,"details")&&b.preventDefault()})},WJ=a=>{a.parser.addNodeFilter("details",b=>{const c=Xz(a);G(b,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})});a.serializer.addNodeFilter("details",b=>{const c=Yz(a);G(b,d=>{"expanded"===c?d.attr("open",
"open"):"collapsed"===c&&d.attr("open",null)})})},Wu=(a,b)=>{const c=b.getNode();db(c)||a.selection.setCursorLocation(c,b.offset())},Xu=(a,b)=>{var c;return 0===a.startOffset&&a.endOffset===(null===(c=b.textContent)||void 0===c?void 0:c.length)},Yu=hc(),Zu=Yu.os,XJ=Yu.browser.isSafari(),$u=Zu.isMacOS()||Zu.isiOS(),YJ=(a,b)=>ob(b).exists(c=>c.isEqual(a)),ZJ=(a,b)=>Tb(b).exists(c=>Ga(c.getNode())?nb(b,c).exists(d=>d.isEqual(a))||c.isEqual(a):c.isEqual(a)),$J=(a,b)=>{const c=p.from(a.getParent(b.startContainer,
"details"));b=p.from(a.getParent(b.endContainer,"details"));if(c.isSome()||b.isSome()){const d=c.bind(e=>p.from(a.select("summary",e)[0]));return p.some({startSummary:d,startDetails:c,endDetails:b})}return p.none()},aK=(a,b)=>{const c=b.startSummary.exists(f=>f.contains(a.startContainer)),d=b.startSummary.exists(f=>f.contains(a.endContainer)),e=b.startDetails.forall(f=>b.endDetails.forall(g=>f!==g));return(c||d)&&!(c&&d)||e},bK=(a,b)=>b.startSummary.exists(c=>YJ(a,c)),cK=(a,b)=>b.startSummary.exists(c=>
ZJ(a,c)),dK=(a,b)=>b.startDetails.exists(c=>nb(c,a).forall(d=>b.startSummary.exists(e=>!e.contains(a.container())&&e.contains(d.container())))),eK=(a,b,c)=>c.startDetails.exists(d=>mb(a,b).forall(e=>!d.contains(e.container()))),av=(a,b)=>{const c=a.dom.getParent(b.container(),"details");c&&!c.open?(b=a.dom.select("summary",c)[0])&&Tb(b).each(d=>Wu(a,d)):Wu(a,b)},fK=(a,b)=>{const {dom:c,selection:d}=a,e=a.getBody();if(a.selection.isCollapsed()){const f=C.fromRangeStart(d.getRng()),g=c.getParent(f.container(),
c.isBlock);if(g&&c.isEmpty(g))if(zb(g.nextSibling)){const h=nb(e,f).filter(k=>Ma(c.getParent(k.container(),"details")));if(h.isSome())return h.each(k=>{b||av(a,k)}),!0}else if(zb(g.previousSibling)&&mb(e,f).filter(h=>Ma(c.getParent(h.container(),"details"))))return!0;return Cf(b,e,f).fold(za,h=>Ma(c.getParent(h.container(),"details"))?(g&&c.isEmpty(g)&&a.dom.remove(g),b||av(a,h),!0):!1)}return!1},gK=(a,b,c)=>{const d=a.selection,e=d.getNode(),f=d.getRng(),g=c.keyCode===X.BACKSPACE,h=c.keyCode===X.DELETE,
k=a.selection.isCollapsed(),l=C.fromRangeStart(f),m=a.getBody();return!k&&aK(f,b)||k&&g&&bK(l,b)||k&&h&&cK(l,b)||k&&g&&dK(l,b)||k&&h&&eK(m,l,b)?!0:XJ&&yx(e)?(!k&&Xu(f,e)||yq(h,l,e)?Dc(x.fromDom(e)):a.undoManager.transact(()=>{const n=d.getSel();let {anchorNode:t,anchorOffset:y,focusNode:w,focusOffset:q}=null!==n&&void 0!==n?n:{};const r=()=>{aa(t)||aa(y)||aa(w)||aa(q)||(null===n||void 0===n?void 0:n.setBaseAndExtent(t,y,w,q))},v=(P,N)=>{G(P.childNodes,Y=>{Ff(Y)&&N.appendChild(Y)})},z=a.dom.create("span",
{"data-mce-bogus":"all"});v(e,z);e.appendChild(z);r();k&&($u&&(c.altKey||g&&c.metaKey)||!$u&&c.ctrlKey)&&(null===n||void 0===n?void 0:n.modify("extend",g?"left":"right",c.metaKey?"line":"word"));!d.isCollapsed()&&Xu(d.getRng(),z)?Dc(x.fromDom(e)):(a.execCommand(g?"Delete":"ForwardDelete"),t=null===n||void 0===n?void 0:n.anchorNode,y=null===n||void 0===n?void 0:n.anchorOffset,w=null===n||void 0===n?void 0:n.focusNode,q=null===n||void 0===n?void 0:n.focusOffset,v(z,e),r());a.dom.remove(z)}),!0):!1},
hK=a=>{a.on("keydown",b=>{b.keyCode!==X.BACKSPACE&&b.keyCode!==X.DELETE||$J(a.dom,a.selection.getRng()).fold(()=>{fK(a,b.keyCode===X.DELETE)&&b.preventDefault()},c=>{gK(a,c,b)&&b.preventDefault()})})},iK=a=>{VJ(a);WJ(a);hK(a)},jK=a=>va(a.dom),bv=a=>b=>x.fromDom(a).dom===b.dom,kK=(a,b)=>vd(x.fromDom(a),c=>Sb(c.dom)||Kb(c),bv(b)).getOr(x.fromDom(b)).dom,cv=(a,b)=>vd(x.fromDom(a),jK,bv(b)),dv=(a,b,c)=>{b=new Ta(a,b);b=c?b.next.bind(b):b.prev.bind(b);let d=a;for(a=c?a:b();a&&!Ga(a);a=b())kb(a)&&(d=a);
return d},lK=(a,b)=>{a=C.fromRangeStart(a).getNode();b=kK(a,b);const c=dv(a,b,!1),d=dv(a,b,!0),e=document.createRange();cv(c,b).fold(()=>{E(c)?e.setStart(c,0):e.setStartBefore(c)},f=>e.setStartBefore(f.dom));cv(d,b).fold(()=>{E(d)?e.setEnd(d,d.data.length):e.setEndAfter(d)},f=>e.setEndAfter(f.dom));return e},mK=a=>{a.on("mousedown",b=>{3<=b.detail&&(b.preventDefault(),b=lK(a.selection.getRng(),a.getBody()),a.selection.setRng(b.collapsed?b:Oq(b)))})};var Ie;(function(a){a.Before="before";a.After="after"})(Ie||
(Ie={}));const nK=(a,b)=>{const c=ka(a,d=>b>=d.top&&b<=d.bottom);return qy(c).fold(()=>[[],a],d=>{const {pass:e,fail:f}=Re(a,g=>{const h=Math.max(0,Math.min(g.bottom,d.bottom)-Math.max(g.top,d.top))/Math.min(g.height,d.height);return g.top<d.bottom&&g.bottom>d.top&&.5<h});return[e,f]})},oK=(a,b,c)=>b>a.left&&b<a.right?0:Math.min(Math.abs(a.left-b),Math.abs(a.right-b)),Ul=(a,b,c)=>{const d=m=>kb(m.node)?p.some(m):V(m.node)?Ul(qb(m.node.childNodes),b,c):p.none(),e=(m,n)=>{if(2<=m.length){const t=d(m[0]).getOr(m[0]);
m=d(m[1]).getOr(m[1]);if(2>Math.abs(n(t,b,c)-n(m,b,c))){if(E(t.node))return p.some(t);if(E(m.node))return p.some(m)}}return p.none()},f=(m,n)=>{const t=sd(m,(y,w)=>n(y,b,c)-n(w,b,c));return e(t,n).orThunk(()=>be(t,d))},[g,h]=nK(rg(wa(a,Zs)),c),{pass:k,fail:l}=Re(h,m=>m.top<c);return f(g,oK).orThunk(()=>f(l,Wn)).orThunk(()=>f(k,Wn))},pK=(a,b,c,d)=>{const e=(f,g)=>{const h=ka(f.dom.childNodes,qg(k=>V(k)&&k.classList.contains("mce-drag-container")));return g.fold(()=>Ul(h,c,d),k=>{const l=ka(h,m=>m!==
k.dom);return Ul(l,c,d)}).orThunk(()=>(f.dom===a.dom?p.none():p.from(f.dom.parentElement).map(x.fromDom)).bind(k=>e(k,p.some(f))))};return e(b,p.none())},qK=(a,b,c)=>{const d=x.fromDom(a);a=Jb(d);a=x.fromPoint(a,b,c).filter(e=>zc(d,e)).getOr(d);return pK(d,a,b,c)},ev=(a,b,c)=>qK(a,b,c).filter(d=>xf(d.node)).map(d=>({node:d.node,position:Math.abs(d.left-b)<Math.abs(d.right-b)?Ie.Before:Ie.After})),fv=a=>{var b,c;const d=a.getBoundingClientRect();var e=a.ownerDocument;a=e.documentElement;e=e.defaultView;
return{top:d.top+(null!==(b=null===e||void 0===e?void 0:e.scrollY)&&void 0!==b?b:0)-a.clientTop,left:d.left+(null!==(c=null===e||void 0===e?void 0:e.scrollX)&&void 0!==c?c:0)-a.clientLeft}},rK=((...a)=>b=>{for(let c=0;c<a.length;c++)if(a[c](b))return!0;return!1})(va,Sb),sK=(a,b,c)=>null===b||void 0===b?!1:b===c||a.dom.isChildOf(b,c)?!1:a.dom.isEditable(b),di=(a,b)=>c=>()=>{c.scroll({[a]:("left"===a?c.scrollX:c.scrollY)+b,behavior:"smooth"})},gv=di("left",-32),hv=di("left",32),iv=di("top",-32),jv=
di("top",32),tK=(a,b,c,d,e,f,g,h,k,l,m,n)=>{let t=0,y=0;a.style.left=b.pageX+"px";a.style.top=b.pageY+"px";b.pageX+c>e&&(t=b.pageX+c-e);b.pageY+d>f&&(y=b.pageY+d-f);a.style.width=c-t+"px";a.style.height=d-y+"px";const w=k.clientHeight,q=k.clientWidth,r=g+k.getBoundingClientRect().top,v=h+k.getBoundingClientRect().left;m.on(z=>{z.intervalId.clear();z.dragging&&n&&(g+8>=w?z.intervalId.set(jv(l)):0>=g-8?z.intervalId.set(iv(l)):h+8>=q?z.intervalId.set(hv(l)):0>=h-8?z.intervalId.set(gv(l)):r+16>=window.innerHeight?
z.intervalId.set(jv(window)):0>=r-16?z.intervalId.set(iv(window)):v+16>=window.innerWidth?z.intervalId.set(hv(window)):0>=v-16&&z.intervalId.set(gv(window)))})},uK=(a,b)=>{const c=a.getParent(b.parentNode,a.isBlock);b&&b.parentNode&&b.parentNode.removeChild(b);c&&c!==a.getRoot()&&a.isEmpty(c)&&Dc(x.fromDom(c))},vK=(a,b)=>c=>{if(0===c.button){const w=Oa(b.dom.getParents(c.target),rK).getOr(null);var d;if(d=!aa(w)){d=b.dom;var e=b.getBody(),f=w;d=va(f)&&f!==e&&d.isEditable(f.parentElement)}if(d){var g=
b.dom.getPos(w),h=b.getBody(),k=b.getDoc().documentElement;d=a.set;e=Ql();f=c.screenX;var l=c.screenY,m=(b.inline?h.scrollWidth:k.offsetWidth)-2;h=(b.inline?h.scrollHeight:k.offsetHeight)-2;k=c.pageX-g.x;c=c.pageY-g.y;g=w.offsetWidth;var n=w.offsetHeight,t=w.offsetWidth,y=w.offsetHeight;const q=b.dom,r=w.cloneNode(!0);q.setStyles(r,{width:t,height:y});q.setAttrib(r,"data-mce-selected",null);const v=q.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});
q.setStyles(v,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:t,height:y});q.setStyles(r,{margin:0,boxSizing:"border-box"});v.appendChild(r);d.call(a,{element:w,dataTransfer:e,dragging:!1,screenX:f,screenY:l,maxX:m,maxY:h,relX:k,relY:c,width:g,height:n,ghost:v,intervalId:iy(100)})}}},wK=(a,b,c)=>{a._selectionOverrides.hideFakeCaret();ev(a.getBody(),b,c).fold(()=>a.selection.placeCaretAt(b,c),d=>{(d=a._selectionOverrides.showCaret(1,d.node,d.position===Ie.Before,
!1))?a.selection.setRng(d):a.selection.placeCaretAt(b,c)})},fg=(a,b,c,d,e)=>{if("dragstart"===b){var f=a.dom.getOuterHTML(c);d.setData("text/html",f)}d=mJ(d);"dragstart"===b?(Fu(d),Gu(d)):"drop"===b?(eJ(d),Pl(d)):(fJ(d),iJ(d));db(e)?(e=Im("Function not supported on simulated event."),c=Object.assign({},{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:b,composedPath:e,initEvent:e,preventDefault:pa,
stopImmediatePropagation:pa,stopPropagation:pa,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:e,initMouseEvent:e,getModifierState:e,dataTransfer:d},{target:c,srcElement:c})):c=
Object.assign({},e,{dataTransfer:d,type:b},{target:c,srcElement:c});return a.dispatch(b,c)},xK=(a,b)=>{const c=Rg((d,e)=>wK(b,d,e),0);b.on("remove",c.cancel);return d=>a.on(e=>{var f=Math.max(Math.abs(d.screenX-e.screenX),Math.abs(d.screenY-e.screenY));if(!e.dragging&&10<f){f=fg(b,"dragstart",e.element,e.dataTransfer,d);aa(f.dataTransfer)||(e.dataTransfer=f.dataTransfer);if(f.isDefaultPrevented())return;e.dragging=!0;b.focus()}if(e.dragging){f=d.currentTarget===b.getDoc().documentElement;var g=b.inline?
fv(b.getBody()):{left:0,top:0};var h=b.getBody();h=b.inline?{left:h.scrollLeft,top:h.scrollTop}:{left:0,top:0};if(d.target.ownerDocument!==b.getDoc()){var k=fv(b.getContentAreaContainer());var l=b.getBody();const n=b.getDoc().documentElement;var m={left:l.scrollLeft,top:l.scrollTop};l={left:l.scrollLeft||n.scrollLeft,top:l.scrollTop||n.scrollTop};l=b.inline?m:l;m=d.pageX-k.left+l.left;k=d.pageY-k.top+l.top}else m=d.pageX,k=d.pageY;m=m-g.left+h.left;g=k-g.top+h.top;g={pageX:m-e.relX,pageY:g+5};h=e.ghost;
k=b.getBody();h.parentNode!==k&&k.appendChild(h);tK(e.ghost,g,e.width,e.height,e.maxX,e.maxY,d.clientY,d.clientX,b.getContentAreaContainer(),b.getWin(),a,f);c.throttle(d.clientX,d.clientY)}})},yK=a=>{a=a.getSel();if(aa(a))return null;a=a.getRangeAt(0).startContainer;return E(a)?a.parentNode:a},zK=(a,b)=>c=>{a.on(d=>{var e;d.intervalId.clear();if(d.dragging){if(sK(b,yK(b.selection),d.element)){const f=null!==(e=b.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==e?e:b.getBody();fg(b,"drop",
f,d.dataTransfer,c).isDefaultPrevented()||b.undoManager.transact(()=>{uK(b.dom,d.element);nJ(d.dataTransfer).each(g=>b.insertContent(g));b._selectionOverrides.hideFakeCaret()})}fg(b,"dragend",b.getBody(),d.dataTransfer,c)}});kv(a)},lv=(a,b,c)=>{a.on(d=>{d.intervalId.clear();d.dragging&&c.fold(()=>fg(b,"dragend",d.element,d.dataTransfer),e=>fg(b,"dragend",d.element,d.dataTransfer,e))});kv(a)},AK=(a,b)=>c=>lv(a,b,p.some(c)),kv=a=>{a.on(b=>{b.intervalId.clear();(b=b.ghost)&&b.parentNode&&b.parentNode.removeChild(b)});
a.clear()},BK=a=>{const b=Yc(),c=Da.DOM,d=document,e=vK(b,a),f=xK(b,a),g=zK(b,a),h=AK(b,a);a.on("mousedown",e);a.on("mousemove",f);a.on("mouseup",g);c.bind(d,"mousemove",f);c.bind(d,"mouseup",h);a.on("remove",()=>{c.unbind(d,"mousemove",f);c.unbind(d,"mouseup",h)});a.on("keydown",k=>{k.keyCode===X.ESC&&lv(b,a,p.none())})},CK=a=>{const b=e=>{if(!e.isDefaultPrevented()){const f=e.dataTransfer;f&&(-1<Ca.call(f.types,"Files")||0<f.files.length)&&(e.preventDefault(),"drop"===e.type&&Ch(a,"Dropped file type is not supported"))}},
c=e=>{lh(a,e.target)&&b(e)},d=()=>{const e=Da.DOM,f=a.dom,g=document,h=a.inline?a.getBody():a.getDoc(),k=["drop","dragover"];G(k,l=>{e.bind(g,l,c);f.bind(h,l,b)});a.on("remove",()=>{G(k,l=>{e.unbind(g,l,c);f.unbind(h,l,b)})})};a.on("init",()=>{Mb.setEditorTimeout(a,d,0)})},DK=a=>{BK(a);xz(a)&&CK(a)},EK=a=>{const b=Rg(()=>{if(!a.removed&&a.getBody().contains(document.activeElement)){var c=a.selection.getRng();c.collapsed&&(c=el(a,c,!1),a.selection.setRng(c))}},0);a.on("focus",()=>{b.throttle()});a.on("blur",
()=>{b.cancel()})},FK=a=>{a.on("init",()=>{a.on("focusin",b=>{b=b.target;if(mc(b)){const c=Qd(a.getBody(),b);b=va(c)?c:b;a.selection.getNode()!==b&&Vf(a,b).each(d=>a.selection.setRng(d))}})})},mv=(a,b)=>Qd(a.getBody(),b),GK=a=>{const b=a.selection,c=a.dom,d=a.getBody(),e=aA(a,d,c.isBlock,()=>Nd(a)),f="sel-"+c.uniqueId();let g;const h=q=>q!==d&&(va(q)||mc(q))&&c.isChildOf(q,d)&&c.isEditable(q.parentNode),k=(q,r,v,z)=>{z=void 0===z?!0:z;if(a.dispatch("ShowCaret",{target:r,direction:q,before:v}).isDefaultPrevented())return null;
z&&b.scrollIntoView(r,-1===q);return e.show(v,r)},l=()=>{a.on("click",q=>{c.isEditable(q.target)||(q.preventDefault(),a.focus())});a.on("blur NewBlock",w);a.on("ResizeWindow FullscreenStateChanged",e.reposition);a.on("tap",q=>{const r=q.target,v=mv(a,r);va(v)?(q.preventDefault(),Vf(a,v).each(y)):h(r)&&Vf(a,r).each(y)},!0);a.on("mousedown",q=>{const r=q.target;if((r===d||"HTML"===r.nodeName||c.isChildOf(r,d))&&WE(a,q.clientX,q.clientY)){w();e.hide();var v=mv(a,r);va(v)?(q.preventDefault(),Vf(a,v).each(y)):
ev(d,q.clientX,q.clientY).each(z=>{q.preventDefault();(z=k(1,z.node,z.position===Ie.Before,!1))&&b.setRng(z);V(v)?v.focus():a.getBody().focus()})}});a.on("keypress",q=>{X.modifierPressed(q)||va(b.getNode())&&q.preventDefault()});a.on("GetSelectionRange",q=>{let r=q.range;g&&(g.parentNode?(r=r.cloneRange(),r.selectNode(g),q.range=r):g=null)});a.on("SetSelectionRange",q=>{var r=q.range,v=a.schema.getVoidElements();const z=c.createRng();var P=r.startContainer;const N=r.startOffset,Y=r.endContainer;r=
r.endOffset;var O=P.nodeName.toLowerCase();ha.call(v,O)?0===N?z.setStartBefore(P):z.setStartAfter(P):z.setStart(P,N);P=Y.nodeName.toLowerCase();ha.call(v,P)?0===r?z.setEndBefore(Y):z.setEndAfter(Y):z.setEnd(Y,r);q.range=z;if(v=y(q.range,q.forward))q.range=v});a.on("AfterSetSelectionRange",q=>{var r=q.range;q=r.startContainer.parentElement;if(r=!(m(r.startContainer)||m(r.endContainer)))r=!(V(q)&&"mcepastebin"===q.id);r&&e.hide();Ma(q)&&c.hasClass(q,"mce-offscreen-selection")||w()});DK(a);EK(a);FK(a)},
m=q=>Eb(q)||Jg(q)||Ig(q),n=(q,r)=>{const v=x.fromDom(a.getBody()),z=a.getDoc(),P=df("#"+f,v).getOrThunk(()=>{const Y=x.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',z);Va(Y.dom,"id",f);v.dom.appendChild(Y.dom);return Y}),N=c.createRng();ke(P);xd(P,[x.fromText("\u00a0",z),x.fromDom(r),x.fromText("\u00a0",z)]);N.setStart(P.dom.firstChild,1);N.setEnd(P.dom.lastChild,0);Ag(P,{top:c.getPos(q,a.getBody()).y+"px"});P.dom.focus();if(q=b.getSel())q.removeAllRanges(),q.addRange(N);
return N},t=q=>{var r=q.cloneNode(!0);r=a.dispatch("ObjectSelected",{target:q,targetClone:r});if(r.isDefaultPrevented())return null;r=n(q,r.targetClone);const v=x.fromDom(q);G(me(x.fromDom(a.getBody()),"*[data-mce-selected]"),z=>{v.dom!==z.dom&&z.dom.removeAttribute("data-mce-selected")});c.getAttrib(q,"data-mce-selected")||q.setAttribute("data-mce-selected","1");g=q;e.hide();return r},y=(q,r)=>{if(!q)return null;if(q.collapsed){if(!m(q.startContainer)&&!m(q.endContainer)){var v=r?1:-1;q=Bf(v,d,q);
var z=q.getNode(!r);if(!aa(z)){if(xf(z))return k(v,z,r?!q.isAtEnd():!1,!1);if(Vc(z)&&va(z.nextSibling))return q=c.createRng(),q.setStart(z,0),q.setEnd(z,0),q}z=q.getNode(r);if(!aa(z)){if(xf(z))return k(v,z,r?!1:!q.isAtEnd(),!1);if(Vc(z)&&va(z.previousSibling))return q=c.createRng(),q.setStart(z,1),q.setEnd(z,1),q}}return null}r=q.startContainer;v=q.startOffset;z=q.endOffset;E(r)&&0===v&&va(r.parentNode)&&(r=r.parentNode,v=c.nodeIndex(r),r=r.parentNode);return V(r)?z===v+1&&r===q.endContainer&&(q=
r.childNodes[v],h(q))?t(q):null:null},w=()=>{g&&g.removeAttribute("data-mce-selected");var q=x.fromDom(a.getBody());df("#"+f,q).each(Ja);g=null};ha.call(a.plugins,"rtc")||l();return{showCaret:k,showBlockCaretContainer:q=>{q.hasAttribute("data-mce-caret")&&($i(q),b.scrollIntoView(q))},hideFakeCaret:()=>{e.hide()},destroy:()=>{e.destroy();g=null}}},nv=(a,b,c,d,e)=>{if(E(c)&&(0>d||d>c.data.length))return[];if(e&&E(c)){for(let f=c.previousSibling;E(f);f=f.previousSibling)d+=f.data.length;d=[d]}else d=
[d];for(;c!==b&&c.parentNode;)d.push(a.nodeIndex(c,e)),c=c.parentNode;return c===b?d.reverse():[]},Vl=(a,b,c,d,e,f,g)=>{g=void 0===g?!1:g;c=nv(a,b,c,d,g);a=nv(a,b,e,f,g);return{start:c,end:a}},ov=(a,b)=>{b=b.slice();const c=b.pop();return Yb(c)?Db(b,(d,e)=>d.bind(f=>p.from(f.childNodes[e])),p.some(a)).bind(d=>E(d)&&(0>c||c>d.data.length)?p.none():p.some({node:d,offset:c})):p.none()},pv=(a,b)=>ov(a,b.start).bind(c=>{var {node:d,offset:e}=c;return ov(a,b.end).map(f=>{var {node:g,offset:h}=f;f=document.createRange();
f.setStart(d,e);f.setEnd(g,h);return f})}),Je=(a,b,c)=>{if(b&&a.isEmpty(b)&&!c(b)){const d=b.parentNode;a.remove(b);Je(a,d,c)}},ei=(a,b,c,d)=>{d=void 0===d?!0:d;const e=b.startContainer.parentNode,f=b.endContainer.parentNode;b.deleteContents();d&&!c(b.startContainer)&&(E(b.startContainer)&&0===b.startContainer.data.length&&a.remove(b.startContainer),E(b.endContainer)&&0===b.endContainer.data.length&&a.remove(b.endContainer),Je(a,e,c),e!==f&&Je(a,f,c))},qv=(a,b,c)=>{b=a.dynamicPatternsLookup({text:c,
block:b});return Object.assign({},a,{blockPatterns:ka(b,oo).concat(a.blockPatterns),inlinePatterns:ka(b,no).concat(a.inlinePatterns)})},rv=(a,b,c,d)=>{a=a.createRng();a.setStart(b,0);a.setEnd(c,d);return a.toString()},sv=(a,b,c)=>{tH(b,0,b).each(d=>{const e=d.container;Wt(e,c.start.length,b).each(g=>{const h=a.createRng();h.setStart(e,0);h.setEnd(g.container,g.offset);ei(a,h,k=>k===b)});d=x.fromDom(e);const f=zd.get(d);/^\s[^\s]/.test(f)&&zx(d,f.slice(1))})},HK=(a,b)=>{const c=b.pattern;b=pv(a.dom.getRoot(),
b.range).getOrDie("Unable to resolve path range");const d=(e,f)=>{e=f.get(e);return Sa(e)&&$a(e,0).exists(g=>ha.call(g,"block"))};p.from(a.dom.getParent(b.startContainer,a.dom.isBlock)).each(e=>{"block-format"===c.type?d(c.format,a.formatter)&&a.undoManager.transact(()=>{sv(a.dom,e,c);a.formatter.apply(c.format)}):"block-command"===c.type&&a.undoManager.transact(()=>{sv(a.dom,e,c);a.execCommand(c.cmd,!1,c.value)})});return!0},IK=a=>sd(a,(b,c)=>c.start.length-b.start.length),JK=(a,b)=>{a=IK(a);const c=
b.replace("\u00a0"," ");return Oa(a,d=>0===b.indexOf(d.start)||0===c.indexOf(d.start))},KK=(a,b,c,d)=>{var e;const f=a.dom;a=vb(a);if(!f.is(b,a))return[];const g=null!==(e=b.textContent)&&void 0!==e?e:"";return JK(c.blockPatterns,g).map(h=>K.trim(g).length===h.start.length?[]:[{pattern:h,range:Vl(f,f.getRoot(),b,0,b,0,d)}]).getOr([])},LK=(a,b)=>{if(0!==b.length){var c=a.selection.getBookmark();G(b,d=>HK(a,d));a.selection.moveToBookmark(c)}},fi=(a,b)=>{a=a.createRng();a.setStartAfter(b.start);a.setEndBefore(b.end);
return a},tv=(a,b,c)=>{var d=pv(a.getRoot(),c).getOrDie("Unable to resolve path range"),e=d.startContainer;c=d.endContainer;c=0===d.endOffset?c:c.splitText(d.endOffset);d=0===d.startOffset?e:e.splitText(d.startOffset);e=d.parentNode;return{prefix:b,end:c.parentNode.insertBefore(a.create("span",{"data-mce-type":"bookmark",id:b+"-end"}),c),start:e.insertBefore(a.create("span",{"data-mce-type":"bookmark",id:b+"-start"}),d)}},uv=(a,b,c)=>{Je(a,a.get(b.prefix+"-end"),c);Je(a,a.get(b.prefix+"-start"),c)},
MK=a=>(b,c)=>{c=b.data.substring(0,c);b=c.lastIndexOf(a.charAt(a.length-1));c=c.lastIndexOf(a);return-1!==c?c+a.length:-1!==b?b+1:-1},vv=(a,b,c,d)=>{const e=b.start;return Al(a,d.container,d.offset,MK(e),c).bind(f=>{var g,h;const k=null!==(h=null===(g=c.textContent)||void 0===g?void 0:g.indexOf(e))&&void 0!==h?h:-1;return-1!==k&&f.offset>=k+e.length?(g=a.createRng(),g.setStart(f.container,f.offset-e.length),g.setEnd(f.container,f.offset),p.some(g)):zl(f.container,f.offset-e.length,c).map(l=>{const m=
a.createRng();m.setStart(l.container,l.offset);m.setEnd(f.container,f.offset);return m}).filter(l=>l.toString()===e).orThunk(()=>vv(a,b,c,dc(f.container,0)))})},NK=(a,b,c,d,e,f)=>{f=void 0===f?!1:f;if(0===b.start.length&&!f){const g=a.createRng();g.setStart(c,d);g.setEnd(c,d);return p.some(g)}return yl(c,d,e).bind(g=>vv(a,b,e,g).bind(h=>{var k;return f&&(h.endContainer===g.container&&h.endOffset===g.offset||0===g.offset&&(null===(k=h.endContainer.textContent)||void 0===k?void 0:k.length)===h.endOffset)?
p.none():p.some(h)}))},OK=(a,b,c,d)=>{const e=a.dom,f=e.getRoot(),g=c.pattern,h=c.position.container,k=c.position.offset;return zl(h,k-c.pattern.end.length,b).bind(l=>{const m=Vl(e,f,l.container,l.offset,h,k,d);if(0===g.start.length)return p.some({matches:[{pattern:g,startRng:m,endRng:m}],position:l});const n=gi(a,c.remainingPatterns,l.container,l.offset,b,d),t=n.getOr({matches:[],position:l});l=t.position;return NK(e,g,l.container,l.offset,b,n.isNone()).map(y=>{const w=Vl(e,f,y.startContainer,y.startOffset,
y.endContainer,y.endOffset,void 0===d?!1:d);return{matches:t.matches.concat([{pattern:g,startRng:w,endRng:m}]),position:dc(y.startContainer,y.startOffset)}})})},gi=(a,b,c,d,e,f)=>{const g=a.dom;return yl(c,d,g.getRoot()).bind(h=>{const k=rv(g,e,c,d);for(let m=0;m<b.length;m++){var l=b[m];if(!Hi(k,l.end))continue;const n=b.slice();n.splice(m,1);l=OK(a,e,{pattern:l,remainingPatterns:n,position:h},f);if(l.isNone()&&0<d)return gi(a,b,c,d-1,e,f);if(l.isSome())return l}return p.none()})},wv=(a,b,c)=>{a.selection.setRng(c);
"inline-format"===b.type?G(b.format,d=>{a.formatter.apply(d)}):a.execCommand(b.cmd,!1,b.value)},PK=(a,b,c,d)=>{c=fi(a.dom,c);ei(a.dom,c,d);wv(a,b,c)},QK=(a,b,c,d,e)=>{const f=a.dom,g=fi(f,d),h=fi(f,c);ei(f,h,e);ei(f,g,e);c=fi(f,{prefix:c.prefix,start:c.end,end:d.start});wv(a,b,c)},RK=(a,b)=>{const c=qf("mce_textpattern"),d=Se(b,(e,f)=>{const g=tv(a,c+`_end${e.length}`,f.endRng);return e.concat([Object.assign({},f,{endMarker:g})])},[]);return Se(d,(e,f)=>{var g=d.length-e.length-1;g=0===f.pattern.start.length?
f.endMarker:tv(a,c+`_start${g}`,f.startRng);return e.concat([Object.assign({},f,{startMarker:g})])},[])},SK=a=>sd(a,(b,c)=>c.end.length-b.end.length),TK=(a,b)=>{const c=Lc(a,d=>Na(b,e=>d.pattern.start===e.pattern.start&&d.pattern.end===e.pattern.end));return a.length===b.length?c?a:b:a.length>b.length?a:b},xv=(a,b,c,d,e,f)=>{const g=gi(a,e.inlinePatterns,c,d,b,f).fold(()=>[],h=>h.matches);a=gi(a,SK(e.inlinePatterns),c,d,b,f).fold(()=>[],h=>h.matches);return TK(g,a)},yv=(a,b)=>{if(0!==b.length){var c=
a.dom,d=a.selection.getBookmark();b=RK(c,b);G(b,e=>{const f=c.getParent(e.startMarker.start,c.isBlock),g=h=>h===f;0===e.pattern.start.length?PK(a,e.pattern,e.endMarker,g):QK(a,e.pattern,e.startMarker,e.endMarker,g);uv(c,e.endMarker,g);uv(c,e.startMarker,g)});a.selection.moveToBookmark(d)}},UK=(a,b)=>{const c=a.selection.getRng();return p.from(a.dom.getParent(c.startContainer,a.dom.isBlock)).map(d=>{var e;const f=Math.max(0,c.startOffset),g=qv(b,d,null!==(e=d.textContent)&&void 0!==e?e:""),h=xv(a,
d,c.startContainer,f,g,!0),k=KK(a,d,g,!0);return 0<k.length||0<h.length?(a.undoManager.add(),a.undoManager.extra(()=>{a.execCommand("mceInsertNewLine")},()=>{a.insertContent("\ufeff");yv(a,h);LK(a,k);var l=a.selection.getRng();l=yl(l.startContainer,l.startOffset,a.dom.getRoot());a.execCommand("mceInsertNewLine");l.each(m=>{const n=m.container;"\ufeff"===n.data.charAt(m.offset-1)&&(n.deleteData(m.offset-1,1),Je(a.dom,n.parentNode,t=>t===a.dom.getRoot()))})}),!0):!1}).getOr(!1)},VK=(a,b)=>{const c=
a.selection.getRng();p.from(a.dom.getParent(c.startContainer,a.dom.isBlock)).map(d=>{const e=Math.max(0,c.startOffset-1);var f=rv(a.dom,d,c.startContainer,e);f=qv(b,d,f);const g=xv(a,d,c.startContainer,e,f,!1);0<g.length&&a.undoManager.transact(()=>{yv(a,g)})})},zv=(a,b,c)=>{for(let d=0;d<a.length;d++)if(c(a[d],b))return!0;return!1},WK=(a,b)=>zv(a,b,(c,d)=>c===d.keyCode&&!X.modifierPressed(d)),XK=(a,b)=>zv(a,b,(c,d)=>c.charCodeAt(0)===d.charCode),YK=a=>{const b=",.;:!?".split(""),c=[32];a.on("keydown",
e=>{if(13===e.keyCode&&!X.modifierPressed(e)&&a.selection.isCollapsed()){const f=po(Go(a),Ho(a));(0<f.inlinePatterns.length||0<f.blockPatterns.length||a.options.isSet("text_patterns_lookup"))&&UK(a,f)&&e.preventDefault()}},!0);const d=()=>{if(a.selection.isCollapsed()){const e=po(Go(a),Ho(a));(0<e.inlinePatterns.length||a.options.isSet("text_patterns_lookup"))&&VK(a,e)}};a.on("keyup",e=>{WK(c,e)&&d()});a.on("keypress",e=>{XK(b,e)&&Mb.setEditorTimeout(a,d)})},ZK=a=>{const b=K.each,c=X.BACKSPACE,d=
X.DELETE,e=a.dom,f=a.selection,g=a.parser;var h=ua.browser;const k=h.isFirefox();h=h.isChromium()||h.isSafari();const l=ua.deviceType.isiPhone()||ua.deviceType.isiPad(),m=ua.os.isMacOS()||ua.os.isiOS(),n=(M,Q)=>{try{a.getDoc().execCommand(M,!1,String(Q))}catch(Z){}},t=()=>{const M=Q=>{const Z=e.create("body");Q=Q.cloneContents();Z.appendChild(Q);return f.serializer.serialize(Z,{format:"html"})};a.on("keydown",Q=>{var Z=Q.keyCode;if(!Q.isDefaultPrevented()&&(Z===d||Z===c)&&a.selection.isEditable()){var da=
a.selection.isCollapsed();Z=a.getBody();if(!da||e.isEmpty(Z)){if(da=!da){da=a.selection.getRng();da=M(da);var J=e.createRng();J.selectNode(a.getBody());J=M(J);da=da!==J}da||(Q.preventDefault(),a.setContent(""),Z.firstChild&&e.isBlock(Z.firstChild)?a.selection.setCursorLocation(Z.firstChild,0):a.selection.setCursorLocation(Z,0),a.nodeChanged())}}})},y=()=>{a.inline||e.bind(a.getDoc(),"mousedown mouseup",M=>{let Q;M.target===a.getDoc().documentElement&&(Q=f.getRng(),a.getBody().focus(),"mousedown"===
M.type?Eb(Q.startContainer)||f.placeCaretAt(M.clientX,M.clientY):f.setRng(Q))})},w=()=>{a.on("keydown",M=>{if(!M.isDefaultPrevented()&&M.keyCode===c&&a.getBody().getElementsByTagName("hr").length&&f.isCollapsed()&&0===f.getRng().startOffset){const Q=f.getNode(),Z=Q.previousSibling;"HR"===Q.nodeName?(e.remove(Q),M.preventDefault()):Z&&Z.nodeName&&"hr"===Z.nodeName.toLowerCase()&&(e.remove(Z),M.preventDefault())}})},q=()=>{if(!Range.prototype.getClientRects)a.on("mousedown",M=>{if(!M.isDefaultPrevented()&&
"HTML"===M.target.nodeName){const Q=a.getBody();Q.blur();Mb.setEditorTimeout(a,()=>{Q.focus()})}})},r=()=>{const M=Eo(a);a.on("click",Q=>{const Z=Q.target;/^(IMG|HR)$/.test(Z.nodeName)&&e.isEditable(Z.parentNode)&&(Q.preventDefault(),a.selection.select(Z),a.nodeChanged());"A"===Z.nodeName&&e.hasClass(Z,M)&&0===Z.childNodes.length&&e.isEditable(Z.parentNode)&&(Q.preventDefault(),f.select(Z))})},v=()=>{const M=()=>{const Z=e.getAttribs(f.getStart().cloneNode(!1));return()=>{const da=f.getStart();da!==
a.getBody()&&(e.setAttrib(da,"style",null),b(Z,J=>{da.setAttributeNode(J.cloneNode(!0))}))}},Q=()=>!f.isCollapsed()&&e.getParent(f.getStart(),e.isBlock)!==e.getParent(f.getEnd(),e.isBlock);a.on("keypress",Z=>{let da;if(Z.isDefaultPrevented()||8!==Z.keyCode&&46!==Z.keyCode||!Q())return!0;da=M();a.getDoc().execCommand("delete",!1);da();Z.preventDefault();return!1});e.bind(a.getDoc(),"cut",Z=>{if(!Z.isDefaultPrevented()&&Q()){const da=M();Mb.setEditorTimeout(a,()=>{da()})}})},z=()=>{a.on("keydown",M=>
{if(!M.isDefaultPrevented()&&M.keyCode===c&&f.isCollapsed()&&0===f.getRng().startOffset){const Q=f.getNode().previousSibling;if(Q&&Q.nodeName&&"table"===Q.nodeName.toLowerCase())return M.preventDefault(),!1}return!0})},P=()=>{a.on("keydown",M=>{if(!M.isDefaultPrevented()&&M.keyCode===X.BACKSPACE){M=f.getRng();var Q=M.startContainer,Z=M.startOffset,da=e.getRoot(),J=Q;if(M.collapsed&&0===Z){for(;J.parentNode&&J.parentNode.firstChild===J&&J.parentNode!==da;)J=J.parentNode;"BLOCKQUOTE"===J.nodeName&&
(a.formatter.toggle("blockquote",void 0,J),M=e.createRng(),M.setStart(Q,0),M.setEnd(Q,0),f.setRng(M))}}})},N=()=>{const M=()=>{n("StyleWithCSS",!1);n("enableInlineTableEditing",!1);Ao(a)||n("enableObjectResizing",!1)};if(!Co(a))a.on("BeforeExecCommand mousedown",M)},Y=()=>{const M=()=>{b(e.select("a:not([data-mce-block])"),Q=>{var Z;let da=Q.parentNode;const J=e.getRoot();if((null===da||void 0===da?void 0:da.lastChild)===Q){for(;da&&!e.isBlock(da);){if((null===(Z=da.parentNode)||void 0===Z?void 0:
Z.lastChild)!==da||da===J)return;da=da.parentNode}e.add(da,"br",{"data-mce-bogus":1})}})};a.on("SetContent ExecCommand",Q=>{"setcontent"!==Q.type&&"mceInsertLink"!==Q.command||M()})},O=()=>{a.on("init",()=>{n("DefaultParagraphSeparator",vb(a))})},L=()=>{a.on("keyup focusin mouseup",M=>{if(M=!X.modifierPressed(M)){M=a.getBody();const Q=a.selection.getRng();M=!(Q.startContainer===Q.endContainer&&Q.startContainer===M&&0===Q.startOffset&&Q.endOffset===M.childNodes.length)}M&&f.normalize()},!0)},U=()=>
{a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ja=()=>{if(!a.inline)a.on("keydown",()=>{document.activeElement===document.body&&a.getWin().focus()})},qa=()=>{a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",M=>{"HTML"===M.target.nodeName&&(M=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(M),a.selection.normalize(),a.nodeChanged())}))},Ha=()=>{if(m)a.on("keydown",M=>{!X.metaKeyPressed(M)||M.shiftKey||37!==
M.keyCode&&39!==M.keyCode||(M.preventDefault(),a.selection.getSel().modify("move",37===M.keyCode?"backward":"forward","lineboundary"))})},Ra=()=>{a.on("click",M=>{let Q=M.target;do if("A"===Q.tagName){M.preventDefault();break}while(Q=Q.parentNode)});a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ab=()=>{a.on("init",()=>{a.dom.bind(a.getBody(),"submit",M=>{M.preventDefault()})})},ca=()=>{g.addNodeFilter("br",M=>{let Q=M.length;for(;Q--;)"Apple-interchange-newline"===M[Q].attr("class")&&
M[Q].remove()})},oa=()=>{a.on("drop",M=>{var Q;const Z=null===(Q=M.dataTransfer)||void 0===Q?void 0:Q.getData("text/html");fa(Z)&&/^<img[^>]*>$/.test(Z)&&a.dispatch("dragend",new window.DragEvent("dragend",M))})};ha.call(a.plugins,"rtc")?(h&&(y(),r(),ab(),a.shortcuts.add("meta+a",null,"SelectAll"),l&&(ja(),qa(),Ra())),k&&(q(),N(),U(),Ha())):(P(),t(),ua.windowsPhone||L(),h&&(y(),r(),O(),ab(),z(),ca(),l?(ja(),qa(),Ra()):a.shortcuts.add("meta+a",null,"SelectAll")),k&&(w(),q(),v(),N(),Y(),U(),Ha(),z(),
oa()));return{refreshContentEditable:pa,isHidden:()=>{if(!k||a.removed)return!1;const M=a.selection.getSel();return!M||!M.rangeCount||0===M.rangeCount}}},Wl=Da.DOM,$K=(a,b)=>{var c=x.fromDom(a.getBody());c=Pi(Oc(c));const d=x.fromTag("style");Va(d.dom,"type","text/css");Ri(d,x.fromText(b));c.dom.appendChild(d.dom);a.on("remove",()=>{Ja(d)})},Xl=a=>We(a,b=>!1===db(b)),Av=a=>{const b=a.options.get,c=a.editorUpload.blobCache;return Xl({allow_conditional_comments:b("allow_conditional_comments"),allow_html_data_urls:b("allow_html_data_urls"),
allow_svg_data_urls:b("allow_svg_data_urls"),allow_html_in_named_anchor:b("allow_html_in_named_anchor"),allow_script_urls:b("allow_script_urls"),allow_unsafe_link_target:b("allow_unsafe_link_target"),convert_fonts_to_spans:b("convert_fonts_to_spans"),fix_list_elements:b("fix_list_elements"),font_size_legacy_values:b("font_size_legacy_values"),forced_root_block:b("forced_root_block"),forced_root_block_attrs:b("forced_root_block_attrs"),preserve_cdata:b("preserve_cdata"),inline_styles:b("inline_styles"),
root_name:a.inline?a.getElement().nodeName.toLowerCase():void 0,sanitize:b("xss_sanitization"),validate:!0,blob_cache:c,document:a.getDoc()})},Bv=a=>{a=a.options.get;return Xl({custom_elements:a("custom_elements"),extended_valid_elements:a("extended_valid_elements"),invalid_elements:a("invalid_elements"),invalid_styles:a("invalid_styles"),schema:a("schema"),valid_children:a("valid_children"),valid_classes:a("valid_classes"),valid_elements:a("valid_elements"),valid_styles:a("valid_styles"),verify_html:a("verify_html"),
padd_empty_block_inline_children:a("format_empty_lines")})},aL=a=>{const b=a.options.get;return Object.assign({},Av(a),Bv(a),Xl({remove_trailing_brs:b("remove_trailing_brs"),pad_empty_with_br:b("pad_empty_with_br"),url_converter:b("url_converter"),url_converter_scope:b("url_converter_scope"),element_format:b("element_format"),entities:b("entities"),entity_encoding:b("entity_encoding"),indent:b("indent"),indent_after:b("indent_after"),indent_before:b("indent_before")}))},bL=a=>{const b=Ae(Av(a),a.schema);
b.addAttributeFilter("src,href,style,tabindex",(c,d)=>{const e=a.dom,f="data-mce-"+d;let g=c.length;for(;g--;){const h=c[g];let k=h.attr(d);k&&!h.attr(f)&&0!==k.indexOf("data:")&&0!==k.indexOf("blob:")&&("style"===d?(k=e.serializeStyle(e.parseStyle(k),h.name),k.length||(k=null),h.attr(f,k),h.attr(d,k)):"tabindex"===d?(h.attr(f,k),h.attr(d,null)):h.attr(f,a.convertURL(k,d,h.name)))}});b.addNodeFilter("script",c=>{let d=c.length;for(;d--;){const e=c[d],f=e.attr("type")||"no/type";0!==f.indexOf("mce-")&&
e.attr("type","mce-"+f)}});Tz(a)&&b.addNodeFilter("#cdata",c=>{var d;let e=c.length;for(;e--;){const f=c[e];f.type=8;f.name="#comment";f.value="[CDATA["+a.dom.encode(null!==(d=f.value)&&void 0!==d?d:"")+"]]"}});b.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",c=>{let d=c.length;const e=a.schema.getNonEmptyElements();for(;d--;){const f=c[d];f.isEmpty(e)&&0===f.getAll("br").length&&f.append(new ib("br",1))}});return b},cL=a=>{const b=Ez(a);b&&Mb.setEditorTimeout(a,()=>{let c;(c=!0===b?a:a.editorManager.get(b))&&
!c.destroyed&&(c.focus(),c.selection.scrollIntoView())},100)},dL=a=>{const b=a.dom.getRoot();a.inline||ch(a)&&a.selection.getStart(!0)!==b||ob(b).each(c=>{const d=c.getNode();c=Cc(d)?ob(d).getOr(c):c;a.selection.setRng(c.toRange())})},Yl=a=>{a.bindPendingEventDelegates();a.initialized=!0;a.dispatch("Init");a.focus(!0);dL(a);a.nodeChanged({initial:!0});const b=Cz(a);ya(b)&&b.call(a,a);cL(a)},eL=(a,b,c)=>{b=[(a.inline?a.ui.styleSheetLoader:a.dom.styleSheetLoader).loadAll(b)];return a.inline?b:b.concat([a.ui.styleSheetLoader.loadAll(c)])},
Cv=a=>{const b=a.inline?a.ui.styleSheetLoader:a.dom.styleSheetLoader,c=zo(a),d=a.contentCSS,e=()=>{b.unloadAll(d);a.inline||a.ui.styleSheetLoader.unloadAll(c)};var f=()=>{if(a.removed)e();else a.on("remove",e)};if(0<a.contentStyles.length){let h="";K.each(a.contentStyles,k=>{h+=k+"\r\n"});a.dom.addStyle(h)}f=Promise.all(eL(a,d,c)).then(f).catch(f);const g=cz(a);g&&$K(a,g);return f},fL=a=>{var b=a.getDoc();const c=a.getBody();a.dispatch("PreInit");Fz(a)||(b.body.spellcheck=!1,Wl.setAttrib(c,"spellcheck",
"false"));a.quirks=ZK(a);a.dispatch("PostRender");b=dz(a);void 0!==b&&(c.dir=b);const d=Gz(a);if(d)a.on("BeforeSetContent",e=>{K.each(d,f=>{e.content=e.content.replace(f,g=>"\x3c!--mce:protected "+escape(g)+"--\x3e")})});a.on("SetContent",()=>{a.addVisual(a.getBody())});a.on("compositionstart compositionend",e=>{a.composing="compositionstart"===e.type})},Zl=a=>{ha.call(a.plugins,"rtc")||a.load({initial:!0,format:"html"});a.startContent=a.getContent({format:"raw"})},$l=a=>{var b=a.getElement(),c=a.getDoc();
a.inline&&(Wl.addClass(b,"mce-content-body"),a.contentDocument=c=document,a.contentWindow=window,a.bodyElement=b,a.contentAreaContainer=b);b=a.getBody();b.disabled=!0;a.readonly=Co(a);a._editableRoot=vz(a);!a.readonly&&a.hasEditableRoot()&&(a.inline&&"static"===Wl.getStyle(b,"position",!0)&&(b.style.position="relative"),b.contentEditable="true");b.disabled=!1;a.editorUpload=eF(a);a.schema=Xc(Bv(a));a.dom=Da(c,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,update_styles:!0,root_element:a.inline?
a.getBody():null,collect:a.inline,schema:a.schema,contentCssCors:Zy(a),referrerPolicy:Aj(a),onSetAttrib:d=>{a.dispatch("SetAttrib",d)}});a.parser=bL(a);a.serializer=gs(aL(a),a);a.selection=fs(a.dom,a.getWin(),a.serializer,a);a.annotator=qp(a);a.formatter=us(a);a.undoManager=ws(a);a._nodeChangeDispatcher=new dJ(a);a._selectionOverrides=GK(a);GG(a);iK(a);KG(a);ha.call(a.plugins,"rtc")||(mK(a),YK(a));c=cJ(a);FG(a,c);a.on("NodeChange",A(IG,a));qF(a);UJ(a);c=DE(a);fL(a);c.fold(()=>{Cv(a).then(()=>{!0!==
a.removed&&(Zl(a),Yl(a))})},d=>{a.setProgressState(!0);Cv(a).then(()=>{d().then(e=>{a.setProgressState(!1);!0!==a.removed&&(Zl(a),Yl(a));La(a).init.bindEvents()},e=>{a.notificationManager.open({type:"error",text:String(e)});!0!==a.removed&&(Zl(a),Yl(a));La(a).init.bindEvents()})})})},gL=(a,b,c)=>{c=qx(Qa,c);a.dom.addEventListener(b,c,!1);return{unbind:A(rx,a,b,c,!1)}},am=Da.DOM,hL=(a,b,c,d)=>{const e=x.fromTag("iframe");d.each(f=>{Va(e.dom,"tabindex",f)});Mc(e,c);Mc(e,{id:a+"_ifr",frameBorder:"0",
allowTransparency:"true",title:b});ge(e,"tox-edit-area__iframe");return e},iL=a=>{let b=Ky(a)+"<html><head>";so(a)!==a.documentBaseUrl&&(b+='<base href="'+a.documentBaseURI.getURI()+'" />');b+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const c=Ly(a),d=My(a),e=a.translate(Az(a));to(a)&&(b+='<meta http-equiv="Content-Security-Policy" content="'+to(a)+'" />');return b+="</head>"+`<body id="${c}" class="mce-content-body ${d}" data-id="${a.id}" aria-label="${e}">`+"<br></body></html>"},
jL=(a,b)=>{const c=a.translate("Rich Text Area"),d=af(x.fromDom(a.getElement()),"tabindex").bind($e),e=hL(a.id,c,Jy(a),d).dom;e.onload=()=>{e.onload=null;a.dispatch("load")};a.contentAreaContainer=b.iframeContainer;a.iframeElement=e;a.iframeHTML=iL(a);am.add(b.iframeContainer,e)},kL=a=>{const b=a.iframeElement;if(Vz(a)||ua.browser.isFirefox()){const c=a.getDoc();c.open();c.write(a.iframeHTML);c.close();a.contentDocument=b.contentDocument;$l(a)}else{const c=gL(x.fromDom(b),"load",()=>{c.unbind();a.contentDocument=
b.contentDocument;$l(a)});b.srcdoc=a.iframeHTML}},Dv=Da.DOM,lL=a=>{const b=[];G(Wg(a),c=>{{c=c.replace(/^\-/,"");const e=Ce.get(c),f=Ce.urls[c]||a.documentBaseUrl.replace(/\/$/,"");c=K.trim(c);if(e&&-1===K.inArray(b,c)&&!a.plugins[c])try{var d=e(a,f)||{};a.plugins[c]=d;ya(d.init)&&(d.init(a,f),b.push(c))}catch(g){d=g,c=cc.translate(["Failed to initialize plugin: {0}",c]),a.dispatch("PluginLoadError",{message:c}),Dh(c,d),Ch(a,c)}}})},mL=a=>{var b=K.trim(wo(a));const c=a.ui.registry.getAll().icons;
b=Object.assign({},Bh.get("default").icons,Bh.get(b).icons);Ea(b,(d,e)=>{ha.call(c,e)||a.ui.registry.addIcon(e,d)})},Ev=a=>{var b=a.getElement();a.inline?b={editorContainer:null,iframeContainer:void 0,api:{}}:(a=Dv.create("div"),Dv.insertAfter(a,b),b={editorContainer:a,iframeContainer:a,api:{}});return b},nL=(a,b)=>{const c={show:p.from(b.show).getOr(pa),hide:p.from(b.hide).getOr(pa),isEnabled:p.from(b.isEnabled).getOr(Qa),setEnabled:d=>{a.mode.isReadOnly()||p.from(b.setEnabled).each(e=>e(d))}};a.ui=
Object.assign({},a.ui,c)},oL=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){a.dispatch("ScriptsLoaded");mL(a);var b=ue(a);if(fa(b)){var c=Rd.get(b);a.theme=c(a,Rd.urls[b])||{};ya(a.theme.init)&&a.theme.init(a,Rd.urls[b]||a.documentBaseUrl.replace(/\/$/,""))}else a.theme={};b=Bj(a);c=Be.get(b);a.model=c(a,Be.urls[b]);lL(a);b=a.getElement();a.orgDisplay=b.style.display;fa(ue(a))?b=(b=a.theme.renderUI)?b():Ev(a):ya(ue(a))?(b=a.getElement(),c=ue(a)(a,b),c.editorContainer.nodeType&&(c.editorContainer.id=
c.editorContainer.id||a.id+"_parent"),c.iframeContainer&&c.iframeContainer.nodeType&&(c.iframeContainer.id=c.iframeContainer.id||a.id+"_iframecontainer"),c.height=c.iframeHeight?c.iframeHeight:b.offsetHeight,b=c):b=Ev(a);b=yield b;nL(a,p.from(b.api).getOr({}));a.editorContainer=b.editorContainer;a.contentCSS=a.contentCSS.concat(os(a,bz(a)),os(a,zo(a)));a.inline?$l(a):(b={editorContainer:b.editorContainer,iframeContainer:b.iframeContainer},jL(a,b),b.editorContainer&&(b.editorContainer.style.display=
a.orgDisplay,a.hidden=am.isHidden(b.editorContainer)),a.getElement().style.display="none",am.setAttrib(a.id,"aria-hidden","true"),a.getElement().style.visibility=a.orgVisibility,kL(a))}),Sd=Da.DOM,pL=(a,b)=>{const c=xo(b),d=$y(b);if(!cc.hasCode(c)&&"en"!==c){const e=0<d.length?d:`${b.editorManager.baseURL}/langs/${c}.js`;a.add(e).catch(()=>{Tf(b,"LanguageLoadError",Uf("language",e,c))})}},qL=(a,b)=>{const c=ue(a);if(fa(c)&&"-"!==c.charAt(0)&&!ha.call(Rd.urls,c)){const d=iz(a),e=d?a.documentBaseURI.toAbsolute(d):
`themes/${c}/theme${b}.js`;Rd.load(c,e).catch(()=>{Tf(a,"ThemeLoadError",Uf("theme",e,c))})}},rL=(a,b)=>{const c=Bj(a);if("plugin"!==c&&!ha.call(Be.urls,c)){const d=jz(a),e=fa(d)?a.documentBaseURI.toAbsolute(d):`models/${c}/model${b}.js`;Be.load(c,e).catch(()=>{Tf(a,"ModelLoadError",Uf("model",e,c))})}},sL=a=>p.from(Uy(a)).filter(Qm).map(b=>({url:b,name:p.none()})),Fv=(a,b,c)=>p.from(b).filter(d=>0<d.length&&!Bh.has(d)).map(d=>({url:`${a.editorManager.baseURL}/icons/${d}/icons${c}.js`,name:p.some(d)})),
tL=(a,b,c)=>{c=Fv(b,"default",c);const d=sL(b).orThunk(()=>Fv(b,wo(b),""));G($w([c,d]),e=>{a.add(e.url).catch(()=>{var f=e.name.getOrUndefined();Tf(b,"IconsLoadError",Uf("icons",e.url,f))})})},uL=(a,b)=>{const c=(d,e)=>{Ce.load(d,e).catch(()=>{Tf(a,"PluginLoadError",Uf("plugin",e,d))})};Ea(wz(a),(d,e)=>{c(e,d);a.options.set("plugins",Wg(a).concat(e))});G(Wg(a),d=>{(d=K.trim(d))&&!Ce.urls[d]&&"-"!==d.charAt(0)&&c(d,`plugins/${d}/plugin${b}.js`)})},vL=(a,b)=>{const c=Ec.ScriptLoader,d=()=>{var e;if(e=
!a.removed)e=ue(a),e=!fa(e)||Ma(Rd.get(e));e&&(e=Bj(a),e=Ma(Be.get(e)));e&&oL(a)};qL(a,b);rL(a,b);pL(c,a);tL(c,a,b);uL(a,b);c.loadQueue().then(d,d)},wL=(a,b)=>An.forElement(a,{contentCssCors:Do(b),referrerPolicy:Aj(b)}),xL=a=>{const b=a.id;cc.setCode(xo(a));const c=()=>{Sd.unbind(window,"ready",c);a.render()};if(!Ed.Event.domLoaded)Sd.bind(window,"ready",c);else if(a.getElement()){var d=x.fromDom(a.getElement()),e=Xm(d);a.on("remove",()=>{Jm(d.dom.attributes,g=>{d.dom.removeAttribute(g.name)});Mc(d,
e)});a.ui.styleSheetLoader=wL(d,a);zj(a)?a.inline=!0:(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden");var f=a.getElement().form||Sd.getParent(b,"form");f&&(a.formElement=f,pz(a)&&!Ui(a.getElement())&&(Sd.insertAfter(Sd.create("input",{type:"hidden",name:b}),b),a.hasHiddenInput=!0),a.formEventDelegate=g=>{a.dispatch(g.type,g)},Sd.bind(f,"submit reset",a.formEventDelegate),a.on("reset",()=>{a.resetContent()}),!qz(a)||f.submit.nodeType||f.submit.length||f._mceOldSubmit||
(f._mceOldSubmit=f.submit,f.submit=()=>{a.editorManager.triggerSave();a.setDirty(!1);return f._mceOldSubmit(f)}));a.windowManager=ns(a);a.notificationManager=ms(a);if("xml"===a.options.get("encoding"))a.on("GetContent",g=>{g.save&&(g.content=Sd.encode(g.content))});if(rz(a))a.on("submit",()=>{a.initialized&&a.save()});sz(a)&&(a._beforeUnload=()=>{!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0,set_dirty:!1})},a.editorManager.on("BeforeUnload",a._beforeUnload));a.editorManager.add(a);
vL(a,a.suffix)}},yL=(a,b)=>({sections:R(a),options:R(b)}),Gv=hc().deviceType,Hv=Gv.isPhone(),zL=Gv.isTablet(),gg=a=>{if(null===a||void 0===a)return[];a=Sa(a)?a:a.split(/[ ,]/);a=wa(a,de);return ka(a,Qm)},AL=(a,b)=>{b=Kw(b,(c,d)=>-1<Ca.call(a,d));return yL(b.t,b.f)},BL=a=>{const b=c=>()=>{G(["left","center","right","justify"],d=>{c!==d&&a.formatter.remove("align"+d)});"none"!==c&&(a.formatter.toggle("align"+c,void 0),a.nodeChanged())};a.editorCommands.addCommands({JustifyLeft:b("left"),JustifyCenter:b("center"),
JustifyRight:b("right"),JustifyFull:b("justify"),JustifyNone:b("none")})},CL=a=>{const b=c=>()=>{var d=a.selection;d=d.isCollapsed()?[a.dom.getParent(d.getNode(),a.dom.isBlock)]:d.getSelectedBlocks();return Na(d,e=>!aa(a.formatter.matchNode(e,c)))};a.editorCommands.addCommands({JustifyLeft:b("alignleft"),JustifyCenter:b("aligncenter"),JustifyRight:b("alignright"),JustifyFull:b("alignjustify")},"state")},DL=a=>{a.editorCommands.addCommands({"Cut,Copy,Paste":b=>{const c=a.getDoc();let d;try{c.execCommand(b)}catch(e){d=
!0}"paste"!==b||c.queryCommandEnabled(b)||(d=!0);if(d||!c.queryCommandSupported(b)){b=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(ua.os.isMacOS()||ua.os.isiOS())b=b.replace(/Ctrl\+/g,"\u2318+");a.notificationManager.open({text:b,type:"error"})}}})},EL=a=>{if("string"!==typeof a){const b=K.extend({paste:a.paste,data:{paste:a.paste}},a);return{content:a.content,details:b}}return{content:a,details:{}}},FL=(a,b)=>
{var c=a.selection;a=a.dom;return/^ | $/.test(b)?(c=c.getRng(),a=x.fromDom(a.getRoot()),b=Nf(a,C.fromRangeStart(c))?b.replace(/^ /,"&nbsp;"):b.replace(/^&nbsp;/," "),b=Of(a,C.fromRangeEnd(c))?b.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):b.replace(/&nbsp;(<br( \/)?>)?$/," ")):b},hi=(a,b)=>{if(a.selection.isEditable()){const {content:c,details:d}=EL(b);Uk(a,Object.assign({},d,{content:FL(a,c),format:"html",set:!1,selection:!0})).each(e=>{var f=e.content;f=(a.rtcInstance?a.rtcInstance:yh(a)).editor.insertContent(f,
d);Vk(a,f,e);a.addVisual()})}},GL=a=>{a.editorCommands.addCommands({mceCleanup:()=>{const b=a.selection.getBookmark();a.setContent(a.getContent());a.selection.moveToBookmark(b)},insertImage:(b,c,d)=>{hi(a,a.dom.createHTML("img",{src:d}))},insertHorizontalRule:()=>{a.execCommand("mceInsertContent",!1,"<hr>")},insertText:(b,c,d)=>{hi(a,a.dom.encode(d))},insertHTML:(b,c,d)=>{hi(a,d)},mceInsertContent:(b,c,d)=>{hi(a,d)},mceSetContent:(b,c,d)=>{a.setContent(d)},mceReplaceContent:(b,c,d)=>{a.execCommand("mceInsertContent",
!1,d.replace(/\{\$selection\}/g,a.selection.getContent({format:"text"})))},mceNewDocument:()=>{a.setContent(Kz(a))}})},HL={"font-size":"size","font-family":"face"},IL=Mi("font"),JL=(a,b,c)=>{const d=e=>Bg(e,a).orThunk(()=>IL(e)?Fa(HL,a).bind(f=>p.from(fb(e,f))):p.none());return Hk(x.fromDom(c),e=>d(e),e=>x.fromDom(b).dom===e.dom)},Iv=a=>(b,c)=>p.from(c).map(x.fromDom).filter(tb).bind(d=>JL(a,b,d.dom).or(p.from(Da.DOM.getStyle(d.dom,a,!0)))).getOr(""),KL=Iv("font-size"),LL=Kc(a=>a.replace(/['"\\]/g,
"").replace(/,\s+/g,","),Iv("font-family")),ML=a=>ob(a.getBody()).bind(b=>{b=b.container();return p.from(E(b)?b.parentNode:b)}),NL=a=>p.from(a.selection.getRng()).bind(b=>{const c=a.getBody();return b.startContainer===c&&0===b.startOffset?p.none():p.from(a.selection.getStart(!0))}),bm=(a,b)=>{b=Hm(p.some,b);return NL(a).orThunk(A(ML,a)).map(x.fromDom).filter(tb).bind(b)},Jv=(a,b)=>{if(/^[0-9.]+$/.test(b)){const c=parseInt(b,10);if(1<=c&&7>=c){const d=K.explode(a.options.get("font_size_style_values"));
a=K.explode(a.options.get("font_size_classes"));return 0<a.length?a[c-1]||b:d[c-1]||b}}return b},OL=a=>{a=a.split(/\s*,\s*/);return wa(a,b=>-1===b.indexOf(" ")||Ua(b,'"',0)||Ua(b,"'",0)?b:`'${b}'`).join(",")},PL=a=>bm(a,b=>LL(a.getBody(),b.dom)).getOr(""),QL=a=>bm(a,b=>KL(a.getBody(),b.dom)).getOr(""),RL=a=>bm(a,b=>{const c=x.fromDom(a.getBody());return Hk(b,d=>Bg(d,"line-height"),A(yc,c)).getOrThunk(()=>{const d=parseFloat(lc(b,"line-height")),e=parseFloat(lc(b,"font-size"));return String(d/e)})}).getOr(""),
SL=a=>{const b=(c,d)=>{a.formatter.toggle(c,d);a.nodeChanged()};a.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":c=>{b(c)},"ForeColor,HiliteColor":(c,d,e)=>{b(c,{value:e})},BackColor:(c,d,e)=>{b("hilitecolor",{value:e})},FontName:(c,d,e)=>{c=Jv(a,e);a.formatter.toggle("fontname",{value:OL(c)});a.nodeChanged()},FontSize:(c,d,e)=>{a.formatter.toggle("fontsize",{value:Jv(a,e)});a.nodeChanged()},LineHeight:(c,d,e)=>{a.formatter.toggle("lineheight",{value:String(e)});
a.nodeChanged()},Lang:(c,d,e)=>{var f;b(c,{value:e.code,customValue:null!==(f=e.customCode)&&void 0!==f?f:null})},RemoveFormat:c=>{a.formatter.remove(c)},mceBlockQuote:()=>{b("blockquote")},FormatBlock:(c,d,e)=>{b(fa(e)?e:"p")},mceToggleFormat:(c,d,e)=>{b(e)}})},TL=a=>{a.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":b=>a.formatter.match(b),mceBlockQuote:()=>a.formatter.match("blockquote")},"state");a.editorCommands.addQueryValueHandler("FontName",()=>PL(a));
a.editorCommands.addQueryValueHandler("FontSize",()=>QL(a));a.editorCommands.addQueryValueHandler("LineHeight",()=>RL(a))},UL=a=>{a.editorCommands.addCommands({mceAddUndoLevel:()=>{a.undoManager.add()},mceEndUndoLevel:()=>{a.undoManager.add()},Undo:()=>{a.undoManager.undo()},Redo:()=>{a.undoManager.redo()}})},VL=a=>{a.editorCommands.addCommands({Indent:()=>{vl(a,"indent")},Outdent:()=>{vl(a,"outdent")}});a.editorCommands.addCommands({Outdent:()=>qt(a)},"state")},WL=a=>{const b=(c,d,e)=>{c=fa(e)?{href:e}:
e;d=a.dom.getParent(a.selection.getNode(),"a");jb(c)&&fa(c.href)&&(c.href=c.href.replace(/ /g,"%20"),d&&c.href||a.formatter.remove("link"),c.href&&a.formatter.apply("link",c,d))};a.editorCommands.addCommands({unlink:()=>{if(a.selection.isEditable())if(a.selection.isCollapsed()){const c=a.dom.getParent(a.selection.getStart(),"a");c&&a.dom.remove(c,!0)}else a.formatter.remove("link")},mceInsertLink:b,createLink:b})},XL=a=>{a.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":b=>{a.getDoc().execCommand(b);
if(b=a.dom.getParent(a.selection.getNode(),"ol,ul")){const c=b.parentNode;if(c&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){const d=a.selection.getBookmark();a.dom.split(c,b);a.selection.moveToBookmark(d)}}}})},YL=a=>{a.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":b=>{const c=a.dom.getParent(a.selection.getNode(),"ul,ol");return c&&("insertunorderedlist"===b&&"UL"===c.tagName||"insertorderedlist"===b&&"OL"===c.tagName)}},"state")},ZL=a=>{a.editorCommands.addCommands({insertParagraph:()=>
{Zh(pu,a)},mceInsertNewLine:(b,c,d)=>{vu(a,d)},InsertLineBreak:(b,c,d)=>{Zh(su,a)}})},$L=a=>{a.editorCommands.addCommands({mceSelectNodeDepth:(b,c,d)=>{let e=0;a.dom.getParent(a.selection.getNode(),f=>V(f)&&e++===d?(a.selection.select(f),!1):!0,a.getBody())},mceSelectNode:(b,c,d)=>{a.selection.select(d)},selectAll:()=>{const b=a.dom.getParent(a.selection.getStart(),Sb);if(b){const c=a.dom.createRng();c.selectNodeContents(b);a.selection.setRng(c)}}})},aM=a=>{a.editorCommands.addCommands({mceRemoveNode:(b,
c,d)=>{b=null!==d&&void 0!==d?d:a.selection.getNode();b!==a.getBody()&&(c=a.selection.getBookmark(),a.dom.remove(b,!0),a.selection.moveToBookmark(c))},mcePrint:()=>{a.getWin().print()},mceFocus:(b,c,d)=>{a.removed||(!0===d?a.editorManager.setActive(a):vB(a))},mceToggleVisualAid:()=>{a.hasVisual=!a.hasVisual;a.addVisual()}})},Kv=["toggleview"];class Lv{constructor(a){this.commands={state:{},exec:{},value:{}};this.editor=a}execCommand(a,b,c,d){b=void 0===b?!1:b;const e=this.editor,f=a.toLowerCase();
d=null===d||void 0===d?void 0:d.skip_focus;if(e.removed)return!1;"mcefocus"!==f&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)||d?jB(e):e.focus());if(e.dispatch("BeforeExecCommand",{command:a,ui:b,value:c}).isDefaultPrevented())return!1;d=this.commands.exec[f];return ya(d)?(d(f,b,c),e.dispatch("ExecCommand",{command:a,ui:b,value:c}),!0):!1}queryCommandState(a){if(!Qe(Kv,a.toLowerCase())&&this.editor.quirks.isHidden()||this.editor.removed)return!1;a=a.toLowerCase();const b=this.commands.state[a];
return ya(b)?b(a):!1}queryCommandValue(a){if(!Qe(Kv,a.toLowerCase())&&this.editor.quirks.isHidden()||this.editor.removed)return"";a=a.toLowerCase();const b=this.commands.value[a];return ya(b)?b(a):""}addCommands(a,b){b=void 0===b?"exec":b;const c=this.commands;Ea(a,(d,e)=>{G(e.toLowerCase().split(","),f=>{c[b][f]=d})})}addCommand(a,b,c){a=a.toLowerCase();this.commands.exec[a]=(d,e,f)=>b.call(null!==c&&void 0!==c?c:this.editor,e,f)}queryCommandSupported(a){a=a.toLowerCase();return this.commands.exec[a]?
!0:!1}addQueryStateHandler(a,b,c){this.commands.state[a.toLowerCase()]=()=>b.call(null!==c&&void 0!==c?c:this.editor)}addQueryValueHandler(a,b,c){this.commands.value[a.toLowerCase()]=()=>b.call(null!==c&&void 0!==c?c:this.editor)}}const cm=(a,b,c)=>{try{a.getDoc().execCommand(b,!1,String(c))}catch(d){}},bM=a=>{G(Ab('*[contenteditable="true"]',a),b=>{Va(b.dom,"data-mce-contenteditable","true");b.dom.contentEditable="false"})},cM=a=>{G(Ab('*[data-mce-contenteditable="true"]',a),b=>{b.dom.removeAttribute("data-mce-contenteditable");
b.dom.contentEditable="true"})},dM=a=>{p.from(a.selection.getNode()).each(b=>{b.removeAttribute("data-mce-selected")})},Mv=a=>{a.parser.addAttributeFilter("contenteditable",b=>{a.readonly&&G(b,c=>{c.attr("data-mce-contenteditable",c.attr("contenteditable"));c.attr("contenteditable","false")})});a.serializer.addAttributeFilter("data-mce-contenteditable",b=>{a.readonly&&G(b,c=>{c.attr("contenteditable",c.attr("data-mce-contenteditable"))})});a.serializer.addTempAttr("data-mce-contenteditable")},eM=
a=>{if(a.serializer)Mv(a);else a.on("PreInit",()=>{Mv(a)})},fM=["copy"],gM=(a,b)=>Pc(b,"a",c=>{var d=x.fromDom(a.getBody());return c.dom===d.dom}).bind(c=>p.from(fb(c,"href"))),Nv=(a,b)=>{if("click"!==b.type||X.metaKeyPressed(b))-1<Ca.call(fM,b.type)&&a.dispatch(b.type,b);else{const c=x.fromDom(b.target);gM(a,c).each(d=>{b.preventDefault();if(/^#/.test(d)){var e=a.dom,f=e.select;var g=Ua(d,"#",0)?d.substring(1):d;d=f.call(e,`${d},[name="${g}"]`);d.length&&a.selection.scrollIntoView(d[0],!0)}else window.open(d,
"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},hM=a=>{a.on("ShowCaret",b=>{a.readonly&&b.preventDefault()});a.on("ObjectSelected",b=>{a.readonly&&b.preventDefault()})},iM=K.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel",
" ");class dm{static isNative(a){return!!iM[a.toLowerCase()]}constructor(a){this.bindings={};this.settings=a||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||za}fire(a,b){return this.dispatch(a,b)}dispatch(a,b){a=a.toLowerCase();b=nj(a,null!==b&&void 0!==b?b:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(b);const c=this.bindings[a];if(c)for(let d=0,e=c.length;d<e;d++){const f=c[d];if(!f.removed){f.once&&this.off(a,f.func);if(b.isImmediatePropagationStopped())break;
if(!1===f.func.call(this.scope,b)){b.preventDefault();break}}}return b}on(a,b,c,d){!1===b&&(b=za);if(b)for(b={func:b,removed:!1},d&&K.extend(b,d),a=a.toLowerCase().split(" "),d=a.length;d--;){const e=a[d];let f=this.bindings[e];f||(f=[],this.toggleEvent(e,!0));f=c?[b,...f]:[...f,b];this.bindings[e]=f}return this}off(a,b){if(a){const c=a.toLowerCase().split(" ");let d=c.length;for(;d--;){const e=c[d];let f=this.bindings[e];if(!e){Ea(this.bindings,(g,h)=>{this.toggleEvent(h,!1);delete this.bindings[h]});
break}if(f){if(b){const g=Re(f,h=>h.func===b);f=g.fail;this.bindings[e]=f;G(g.pass,h=>{h.removed=!0})}else f.length=0;f.length||(this.toggleEvent(a,!1),delete this.bindings[e])}}}else Ea(this.bindings,(c,d)=>{this.toggleEvent(d,!1)}),this.bindings={};return this}once(a,b,c){return this.on(a,b,c,{once:!0})}has(a){a=a.toLowerCase();a=this.bindings[a];return!(!a||0===a.length)}}const hg=a=>{a._eventDispatcher||(a._eventDispatcher=new dm({scope:a,toggleEvent:(b,c)=>{dm.isNative(b)&&a.toggleNativeEvent&&
a.toggleNativeEvent(b,c)}}));return a._eventDispatcher},em={fire(a,b,c){return this.dispatch(a,b,c)},dispatch(a,b,c){if(this.removed&&"remove"!==a&&"detach"!==a)return nj(a.toLowerCase(),null!==b&&void 0!==b?b:{},this);b=hg(this).dispatch(a,b);if(!1!==c&&this.parent)for(c=this.parent();c&&!b.isPropagationStopped();)c.dispatch(a,b,!1),c=c.parent?c.parent():void 0;return b},on(a,b,c){return hg(this).on(a,b,c)},off(a,b){return hg(this).off(a,b)},once(a,b){return hg(this).once(a,b)},hasEventListeners(a){return hg(this).has(a)}},
ii=Da.DOM;let Td;const ji=(a,b)=>"selectionchange"===b?a.getDoc():!a.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(b)?a.getDoc().documentElement:(b=Bo(a))?(a.eventRoot||(a.eventRoot=ii.select(b)[0]),a.eventRoot):a.getBody(),Ov=(a,b)=>{a.delegates||(a.delegates={});if(!a.delegates[b]&&!a.removed){var c=ji(a,b);if(Bo(a)){if(Td||(Td={},a.editorManager.on("removeEditor",()=>{!a.editorManager.activeEditor&&Td&&(Ea(Td,(e,f)=>{a.dom.unbind(ji(a,f))}),Td=null)})),!Td[b]){var d=e=>
{const f=e.target,g=a.editorManager.get();let h=g.length;for(;h--;){var k=g[h].getBody();if(k===f||ii.isChildOf(f,k)){k=g[h];var l=b,m=e;k.hidden||k.readonly?k.readonly&&Nv(k,m):k.dispatch(l,m)}}};Td[b]=d;ii.bind(c,b,d)}}else d=e=>{a.hidden||a.readonly?a.readonly&&Nv(a,e):a.dispatch(b,e)},ii.bind(c,b,d),a.delegates[b]=d}},Pv=Object.assign({},em,{bindPendingEventDelegates(){const a=this;K.each(a._pendingNativeEvents,b=>{Ov(a,b)})},toggleNativeEvent(a,b){"focus"===a||"blur"===a||this.removed||(b?this.initialized?
Ov(this,a):this._pendingNativeEvents?this._pendingNativeEvents.push(a):this._pendingNativeEvents=[a]:this.initialized&&this.delegates&&(this.dom.unbind(ji(this,a),a,this.delegates[a]),delete this.delegates[a]))},unbindAllNativeEvents(){const a=this,b=a.getBody(),c=a.dom;a.delegates&&(Ea(a.delegates,(d,e)=>{a.dom.unbind(ji(a,e),e,d)}),delete a.delegates);!a.inline&&b&&c&&(b.onload=null,c.unbind(a.getWin()),c.unbind(a.getDoc()));c&&(c.unbind(b),c.unbind(a.getContainer()))}}),jM=a=>fa(a)?{value:a.split(/[ ,]/),
valid:!0}:$d(a,fa)?{value:a,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},kM=a=>{const b=(()=>{switch(a){case "array":return Sa;case "boolean":return rd;case "function":return ya;case "number":return Yb;case "object":return jb;case "string":return fa;case "string[]":return jM;case "object[]":return c=>$d(c,jb);case "regexp":return c=>Zd(c,RegExp);default:return Qa}})();return c=>fm(c,b,`The value must be a ${a}.`)},fm=(a,b,c)=>{c=void 0===c?"":c;b=
b(a);return rd(b)?b?{value:a,valid:!0}:{valid:!1,message:c}:b},lM=(a,b,c)=>{if(!db(b)){b=fm(b,c);if(b.valid)return b.value;console.error(`Invalid default value passed for the "${a}" option`+(0<b.message.length?`. ${b.message}`:""))}},mM=(a,b)=>{const c={},d={},e=(f,g,h)=>{g=fm(g,h);if(g.valid)return d[f]=g.value,!0;console.warn(`Invalid value passed for the ${f} option`+(0<g.message.length?`. ${g.message}`:""));return!1};return{register:(f,g)=>{const h=fa(g.processor)?kM(g.processor):g.processor,
k=lM(f,g.default,h);c[f]=Object.assign({},g,{default:k,processor:h});Fa(d,f).orThunk(()=>Fa(b,f)).each(l=>e(f,l,h))},isRegistered:f=>ha.call(c,f),get:f=>Fa(d,f).orThunk(()=>Fa(c,f).map(g=>g.default)).getOrUndefined(),set:(f,g)=>{if(ha.call(c,f)){const h=c[f];return h.immutable?(console.error(`"${f}" is an immutable option and cannot be updated`),!1):e(f,g,h.processor)}console.warn(`"${f}" is not a registered option. Ensure the option has been registered before setting a value.`);return!1},unset:f=>
{const g=ha.call(c,f);g&&delete d[f];return g},isSet:f=>ha.call(d,f)}},nM=["design","readonly"],Qv=(a,b,c,d)=>{var e=c[b.get()];c=c[d];try{c.activate()}catch(f){console.error(`problem while activating editor mode ${d}:`,f);return}e.deactivate();if(e.editorReadOnly!==c.editorReadOnly){e=c.editorReadOnly;const f=x.fromDom(a.getBody());c=f;Ni(c,"mce-content-readonly")&&!e?he(c,"mce-content-readonly"):e&&ge(c,"mce-content-readonly");e?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),
dM(a),a.readonly=!0,f.dom.contentEditable="false",bM(f)):(a.readonly=!1,a.hasEditableRoot()&&(f.dom.contentEditable="true"),cM(f),cm(a,"StyleWithCSS",!1),cm(a,"enableInlineTableEditing",!1),cm(a,"enableObjectResizing",!1),(Nd(a)||uB(a))&&a.focus(),a.selection.setRng(a.selection.getRng()),a.nodeChanged())}b.set(d);a.dispatch("SwitchMode",{mode:d})},oM=(a,b,c,d)=>{if(d!==c.get()){if(!ha.call(b,d))throw Error(`Editor mode '${d}' is invalid`);if(a.initialized)Qv(a,c,b,d);else a.on("init",()=>Qv(a,c,b,
d))}},pM=(a,b,c)=>{if(-1<Ca.call(nM,b))throw Error(`Cannot override default mode ${b}`);return Object.assign({},a,{[b]:Object.assign({},c,{deactivate:()=>{try{c.deactivate()}catch(d){console.error(`problem while deactivating editor mode ${b}:`,d)}}})})},qM=a=>{const b=Wa("design"),c=Wa({design:{activate:pa,deactivate:pa,editorReadOnly:!1},readonly:{activate:pa,deactivate:pa,editorReadOnly:!0}});eM(a);hM(a);return{isReadOnly:()=>a.readonly,set:d=>oM(a,c.get(),b,d),get:()=>b.get(),register:(d,e)=>{c.set(pM(c.get(),
d,e))}}},gm=K.each,hm=K.explode,rM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Rv=K.makeMap("alt,ctrl,shift,meta,access"),sM=a=>{const b={},c=ua.os.isMacOS()||ua.os.isiOS();gm(hm(a.toLowerCase(),"+"),e=>{e in Rv?b[e]=!0:/^[0-9]{2,}$/.test(e)?b.keyCode=parseInt(e,10):(b.charCode=e.charCodeAt(0),b.keyCode=rM[e]||e.toUpperCase().charCodeAt(0))});a=[b.keyCode];let d;for(d in Rv)b[d]?a.push(d):b[d]=!1;b.id=a.join(",");b.access&&(b.alt=!0,c?b.ctrl=!0:b.shift=
!0);b.meta&&(c?b.meta=!0:(b.ctrl=!0,b.meta=!1));return b};class Sv{constructor(a){this.shortcuts={};this.pendingPatterns=[];this.editor=a;const b=this;a.on("keyup keypress keydown",c=>{!b.hasModifier(c)&&!b.isFunctionKey(c)||c.isDefaultPrevented()||(gm(b.shortcuts,d=>{b.matchShortcut(c,d)&&(b.pendingPatterns=d.subpatterns.slice(0),"keydown"===c.type&&b.executeShortcutAction(d))}),b.matchShortcut(c,b.pendingPatterns[0])&&(1===b.pendingPatterns.length&&"keydown"===c.type&&b.executeShortcutAction(b.pendingPatterns[0]),
b.pendingPatterns.shift()))})}add(a,b,c,d){const e=this,f=e.normalizeCommandFunc(c);gm(hm(K.trim(a)),g=>{g=e.createShortcut(g,b,f,d);e.shortcuts[g.id]=g});return!0}remove(a){a=this.createShortcut(a);return this.shortcuts[a.id]?(delete this.shortcuts[a.id],!0):!1}normalizeCommandFunc(a){const b=this;return"string"===typeof a?()=>{b.editor.execCommand(a,!1,null)}:K.isArray(a)?()=>{b.editor.execCommand(a[0],a[1],a[2])}:a}createShortcut(a,b,c,d){a=K.map(hm(a,">"),sM);a[a.length-1]=K.extend(a[a.length-
1],{func:c,scope:d||this.editor});return K.extend(a[0],{desc:this.editor.translate(b),subpatterns:a.slice(1)})}hasModifier(a){return a.altKey||a.ctrlKey||a.metaKey}isFunctionKey(a){return"keydown"===a.type&&112<=a.keyCode&&123>=a.keyCode}matchShortcut(a,b){return b&&b.ctrl===a.ctrlKey&&b.meta===a.metaKey&&b.alt===a.altKey&&b.shift===a.shiftKey?a.keyCode===b.keyCode||a.charCode&&a.charCode===b.charCode?(a.preventDefault(),!0):!1:!1}executeShortcutAction(a){return a.func?a.func.call(a.scope):null}}
const tM=()=>{const a={},b={},c={},d={},e={},f={},g={},h={},k=(l,m)=>(n,t)=>{l[n.toLowerCase()]=Object.assign({},t,{type:m})};return{addButton:k(a,"button"),addGroupToolbarButton:k(a,"grouptoolbarbutton"),addToggleButton:k(a,"togglebutton"),addMenuButton:k(a,"menubutton"),addSplitButton:k(a,"splitbutton"),addMenuItem:k(b,"menuitem"),addNestedMenuItem:k(b,"nestedmenuitem"),addToggleMenuItem:k(b,"togglemenuitem"),addAutocompleter:k(c,"autocompleter"),addContextMenu:k(e,"contextmenu"),addContextToolbar:k(f,
"contexttoolbar"),addContextForm:k(f,"contextform"),addSidebar:k(g,"sidebar"),addView:k(h,"views"),addIcon:(l,m)=>d[l.toLowerCase()]=m,getAll:()=>({buttons:a,menuItems:b,icons:d,popups:c,contextMenus:e,contextToolbars:f,sidebars:g,views:h})}},Ud=Da.DOM,Tv=K.extend,uM=K.each;class ki{constructor(a,b,c){this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.hasHiddenInput=this.destroyed=this.composing=this.isNotDirty=!1;this.iframeElement=null;this.removed=this.readonly=this.initialized=
!1;this.startContent="";this._pendingNativeEvents=[];this._skinLoaded=!1;this._editableRoot=!0;this.editorManager=c;this.documentBaseUrl=c.documentBaseURL;Tv(this,Pv);this.id=a;this.hidden=!1;var d;a=Hv||zL;var e=c.defaultOptions;if(a){var f=null!==(d=b.mobile)&&void 0!==d?d:{};d={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Fa(f,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1};f={menubar:!1};d={mobile:Object.assign({},d,Hv?f:{})}}else d={};d=AL(["mobile"],Ph(d,b));f=K.extend;var g=
d.options(),h;if(h=a)h=d.sections(),h=ha.call(h,"mobile");if(h){h=void 0;h=void 0===h?{}:h;var k=d.sections();k=Fa(k,"mobile").getOr({});h=K.extend({},h,k)}else h={};var l;k=null!==(l=d.options().external_plugins)&&void 0!==l?l:{};l=e&&e.external_plugins?K.extend({},e.external_plugins,k):k;l=f.call(K,b,e,g,h,{external_plugins:l});e=gg(e.forced_plugins);f=gg(l.plugins);g=d.sections();g=ha.call(g,"mobile")?d.sections().mobile:{};g=g.plugins?gg(g.plugins):f;a&&(a=d.sections(),a=ha.call(a,"mobile"));
a=a?g:f;a=[...gg(e),...gg(a)];d=K.extend(l,{forced_plugins:e,plugins:a});this.options=mM(this,d);Iy(this);a=this.options.get;if(a("deprecation_warnings")){e=is(b,NE);l=b.forced_root_block;!1!==l&&""!==l||e.push("forced_root_block (false only)");e=sd(e);g=js(d,PE);h=0<g.length;l=0<e.length;f="mobile"===d.theme;if(h||l||f)f=f?"\n\nThemes:\n- mobile":"",g=h?`\n\nPlugins:${"\n- "}${g.join("\n- ")}`:"",e=l?`\n\nOptions:${"\n- "}${e.join("\n- ")}`:"",console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+
f+g+e);b=is(b,OE);e=QE(d);l=0<e.length;d=0<b.length;if(l||d)e=l?`\n\nPlugins:${"\n- "}${e.map(RE).join("\n- ")}`:"",b=d?`\n\nOptions:${"\n- "}${b.join("\n- ")}`:"",console.warn("The following deprecated features are currently enabled but will be removed soon."+e+b)}if(b=a("suffix"))c.suffix=b;this.suffix=c.suffix;(b=a("base_url"))&&c._setBaseUrl(b);this.baseUri=c.baseURI;if(b=Aj(this))Ec.ScriptLoader._setReferrerPolicy(b),Da.DOM.styleSheetLoader._setReferrerPolicy(b);b=Do(this);aa(b)||Da.DOM.styleSheetLoader._setContentCssCors(b);
lb.languageLoad=a("language_load");lb.baseURL=c.baseURL;this.setDirty(!1);this.documentBaseURI=new sc(so(this),{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=zj(this);this.hasVisual=yz(this);this.shortcuts=new Sv(this);this.editorCommands=new Lv(this);BL(this);CL(this);DL(this);UL(this);$L(this);GL(this);WL(this);VL(this);ZL(this);XL(this);YL(this);SL(this);TL(this);aM(this);if(b=a("cache_suffix"))ua.cacheSuffix=b.replace(/^[\?&]+/,"");b=tM();this.ui={registry:{addAutocompleter:b.addAutocompleter,
addButton:b.addButton,addContextForm:b.addContextForm,addContextMenu:b.addContextMenu,addContextToolbar:b.addContextToolbar,addIcon:b.addIcon,addMenuButton:b.addMenuButton,addMenuItem:b.addMenuItem,addNestedMenuItem:b.addNestedMenuItem,addSidebar:b.addSidebar,addSplitButton:b.addSplitButton,addToggleButton:b.addToggleButton,addGroupToolbarButton:b.addGroupToolbarButton,addToggleMenuItem:b.addToggleMenuItem,addView:b.addView,getAll:b.getAll},styleSheetLoader:void 0,show:pa,hide:pa,setEnabled:pa,isEnabled:Qa};
this.mode=qM(this);c.dispatch("SetupEditor",{editor:this});c=Bz(this);ya(c)&&c.call(this,this)}render(){xL(this)}focus(a){this.execCommand("mceFocus",!1,a)}hasFocus(){return Nd(this)}translate(a){return cc.translate(a)}getParam(a,b,c){const d=this.options;d.isRegistered(a)||(aa(c)?d.register(a,{processor:Qa,default:b}):d.register(a,{processor:c,default:b}));return d.isSet(a)||db(b)?d.get(a):b}hasPlugin(a,b){var c=Wg(this);return-1<Ca.call(c,a)?b?void 0!==Ce.get(a):!0:!1}nodeChanged(a){this._nodeChangeDispatcher.nodeChanged(a)}addCommand(a,
b,c){this.editorCommands.addCommand(a,b,c)}addQueryStateHandler(a,b,c){this.editorCommands.addQueryStateHandler(a,b,c)}addQueryValueHandler(a,b,c){this.editorCommands.addQueryValueHandler(a,b,c)}addShortcut(a,b,c,d){this.shortcuts.add(a,b,c,d)}execCommand(a,b,c,d){return this.editorCommands.execCommand(a,b,c,d)}queryCommandState(a){return this.editorCommands.queryCommandState(a)}queryCommandValue(a){return this.editorCommands.queryCommandValue(a)}queryCommandSupported(a){return this.editorCommands.queryCommandSupported(a)}show(){this.hidden&&
(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Ud.show(this.getContainer()),Ud.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(Ud.hide(this.getContainer()),Ud.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(a,b){this.dispatch("ProgressState",
{state:a,time:b})}load(a){a=void 0===a?{}:a;const b=this.getElement();if(!this.removed&&b){a=Object.assign({},a,{load:!0});var c=Ui(b)?b.value:b.innerHTML;c=this.setContent(c,a);a.no_events||this.dispatch("LoadContent",Object.assign({},a,{element:b}));return c}return""}save(a){a=void 0===a?{}:a;const b=this;let c=b.getElement();if(!c||!b.initialized||b.removed)return"";const d=Object.assign({},a,{save:!0,element:c});let e=b.getContent(d);const f=Object.assign({},d,{content:e});f.no_events||b.dispatch("SaveContent",
f);"raw"===f.format&&b.dispatch("RawSaveContent",f);e=f.content;if(Ui(c))c.value=e;else{if(a.is_removing||!b.inline)c.innerHTML=e;(a=Ud.getParent(b.id,"form"))&&uM(a.elements,g=>g.name===b.id?(g.value=e,!1):!0)}f.element=d.element=c=null;!1!==f.set_dirty&&b.setDirty(!1);return e}setContent(a,b){return $k(this,a,b)}getContent(a){return ME(this,a)}insertContent(a,b){b&&(a=Tv({content:a},b));this.execCommand("mceInsertContent",!1,a)}resetContent(a){void 0===a?$k(this,this.startContent,{format:"raw"}):
$k(this,a);this.undoManager.reset();this.setDirty(!1);this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(a){const b=!this.isNotDirty;this.isNotDirty=!a;a&&a!==b&&this.dispatch("dirty")}getContainer(){this.container||(this.container=this.editorContainer||Ud.get(this.id+"_parent"));return this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){this.targetElm||(this.targetElm=Ud.get(this.id));return this.targetElm}getWin(){if(!this.contentWindow){const a=this.iframeElement;
a&&(this.contentWindow=a.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){const a=this.getWin();a&&(this.contentDocument=a.document)}return this.contentDocument}getBody(){var a,b;const c=this.getDoc();return null!==(b=null!==(a=this.bodyElement)&&void 0!==a?a:null===c||void 0===c?void 0:c.body)&&void 0!==b?b:null}convertURL(a,b,c){const d=this.options.get,e=Dz(this);return ya(e)?e.call(this,a,c,!0,b):!d("convert_urls")||"link"===c||jb(c)&&"LINK"===c.nodeName||0===a.indexOf("file:")||
0===a.length?a:d("relative_urls")?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,d("remove_script_host"))}addVisual(a){La(this).editor.addVisual(a)}setEditableRoot(a){this._editableRoot!==a&&(this._editableRoot=a,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),this.dispatch("EditableRootStateChange",{state:a}))}hasEditableRoot(){return this._editableRoot}remove(){if(!this.removed){const {_selectionOverrides:a,editorUpload:b}=
this,c=this.getBody(),d=this.getElement();c&&this.save({is_removing:!0});this.removed=!0;this.unbindAllNativeEvents();this.hasHiddenInput&&Ma(null===d||void 0===d?void 0:d.nextSibling)&&zh.remove(d.nextSibling);this.dispatch("remove");this.editorManager.remove(this);!this.inline&&c&&zh.setStyle(this.id,"display",this.orgDisplay);this.dispatch("detach");zh.remove(this.getContainer());Ah(a);Ah(b);this.destroy()}}destroy(a){{const {selection:b,dom:c}=this;if(!this.destroyed)if(a||this.removed){a||(this.editorManager.off("beforeunload",
this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),Ah(b),Ah(c));if(a=this.formElement)a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),zh.unbind(a,"submit reset",this.formEventDelegate);this.iframeElement=this.targetElm=this.bodyElement=this.contentDocument=this.contentWindow=this.contentAreaContainer=this.formElement=this.container=this.editorContainer=null;if(a=this.selection)this.selection=a.win=a.dom=a.dom.doc=null;this.destroyed=!0}else this.remove()}}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}
const Ke=Da.DOM,li=K.each;let Uv=!1,mi,wb=[];const ni=a=>{const b=a.type;li(ld.get(),c=>{switch(b){case "scroll":c.dispatch("ScrollWindow",a);break;case "resize":c.dispatch("ResizeWindow",a)}})},Vv=a=>{if(a!==Uv){const b=Da.DOM;a?(b.bind(window,"resize",ni),b.bind(window,"scroll",ni)):(b.unbind(window,"resize",ni),b.unbind(window,"scroll",ni));Uv=a}},Wv=a=>{const b=wb;wb=ka(wb,c=>a!==c);ld.activeEditor===a&&(ld.activeEditor=0<wb.length?wb[0]:null);ld.focusedEditor===a&&(ld.focusedEditor=null);return b.length!==
wb.length},vM="CSS1Compat"!==document.compatMode,ld=Object.assign({},em,{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.1",releaseDate:"2023-08-02",i18n:cc,activeEditor:null,focusedEditor:null,setup(){var a="";let b="",c=sc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(c)&&(c=c.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(c)||(c+="/"));var d=window.tinymce||window.tinyMCEPreInit;if(d)a=d.base||
d.baseURL,b=d.suffix;else{d=document.getElementsByTagName("script");for(let e=0;e<d.length;e++){const f=d[e].src||"";if(""===f)continue;const g=f.substring(f.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(f)){-1!==g.indexOf(".min")&&(b=".min");a=f.substring(0,f.lastIndexOf("/"));break}}!a&&document.currentScript&&(a=document.currentScript.src,-1!==a.indexOf(".min")&&(b=".min"),a=a.substring(0,a.lastIndexOf("/")))}this.baseURL=(new sc(c)).toAbsolute(a);this.documentBaseURL=
c;this.baseURI=new sc(this.baseURL);this.suffix=b;this.on("AddEditor",A(qB,this));this.on("RemoveEditor",A(rB,this))},overrideDefaults(a){var b=a.base_url;b&&this._setBaseUrl(b);if(b=a.suffix)this.suffix=b;this.defaultOptions=a;a=a.plugin_base_urls;void 0!==a&&Ea(a,(c,d)=>{lb.PluginManager.urls[d]=c})},init(a){const b=this;let c;const d=K.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu",
" "),e=l=>{let m=l.id;m||(m=Fa(l,"name").filter(n=>!Ke.get(n)).getOrThunk(Ke.uniqueId),l.setAttribute("id",m));return m},f=l=>{if(l=a[l])return l.apply(b,[])},g=l=>ua.browser.isIE()||ua.browser.isEdge()?(Dh("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):vM?(Dh("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):fa(l.selector)?
Ke.select(l.selector):aa(l.target)?[]:[l.target];let h=l=>{c=l};const k=()=>{let l=0;const m=[];let n;const t=(y,w,q)=>{y=new ki(y,w,b);m.push(y);y.on("init",()=>{++l===n.length&&h(m)});y.targetElm=y.targetElm||q;y.render()};Ke.unbind(window,"ready",k);f("onpageload");n=Iw(g(a));K.each(n,y=>{(y=b.get(y.id))&&y.initialized&&!(y.getContainer()||y.getBody()).parentNode&&(Wv(y),y.unbindAllNativeEvents(),y.destroy(!0),y.removed=!0)});n=K.grep(n,y=>!b.get(y.id));0===n.length?h([]):li(n,y=>{a.inline&&y.tagName.toLowerCase()in
d?Dh("Could not initialize inline editor on invalid inline target element",y):t(e(y),a,y)})};Ke.bind(window,"ready",k);return new Promise(l=>{c?l(c):h=m=>{l(m)}})},get(a){return 0===arguments.length?wb.slice(0):fa(a)?Oa(wb,b=>b.id===a).getOr(null):Yb(a)?wb[a]?wb[a]:null:null},add(a){const b=this,c=b.get(a.id);if(c===a)return a;null===c&&wb.push(a);Vv(!0);b.activeEditor=a;b.dispatch("AddEditor",{editor:a});mi||(mi=d=>{const e=b.dispatch("BeforeUnload");if(e.returnValue)return d.preventDefault(),d.returnValue=
e.returnValue},window.addEventListener("beforeunload",mi));return a},createEditor(a,b){return this.add(new ki(a,b,this))},remove(a){const b=this;let c;if(a)if(fa(a))li(Ke.select(a),d=>{(c=b.get(d.id))&&b.remove(c)});else{c=a;if(zb(b.get(c.id)))return null;Wv(c)&&b.dispatch("RemoveEditor",{editor:c});0===wb.length&&window.removeEventListener("beforeunload",mi);c.remove();Vv(0<wb.length);return c}else for(a=wb.length-1;0<=a;a--)b.remove(wb[a])},execCommand(a,b,c){var d;const e=jb(c)?null!==(d=c.id)&&
void 0!==d?d:c.index:c;switch(a){case "mceAddEditor":return this.get(e)||(new ki(e,c.options,this)).render(),!0;case "mceRemoveEditor":return(c=this.get(e))&&c.remove(),!0;case "mceToggleEditor":a=this.get(e);if(!a)return this.execCommand("mceAddEditor",!1,c),!0;a.isHidden()?a.show():a.hide();return!0}return this.activeEditor?this.activeEditor.execCommand(a,b,c):!1},triggerSave:()=>{li(wb,a=>{a.save()})},addI18n:(a,b)=>{cc.add(a,b)},translate:a=>cc.translate(a),setActive(a){const b=this.activeEditor;
this.activeEditor!==a&&(b&&b.dispatch("deactivate",{relatedTarget:a}),a.dispatch("activate",{relatedTarget:b}));this.activeEditor=a},_setBaseUrl(a){this.baseURL=(new sc(this.documentBaseURL)).toAbsolute(a.replace(/\/+$/,""));this.baseURI=new sc(this.baseURL)}});ld.setup();const wM=(()=>{const a=Yc();return{FakeClipboardItem:b=>({items:b,types:rb(b),getType:c=>Fa(b,c).getOrUndefined()}),write:b=>{a.set(b)},read:()=>a.get().getOrUndefined(),clear:a.clear}})(),Xv=Math.min,Le=Math.max,oi=Math.round,Yv=
(a,b,c)=>{let d=b.x,e=b.y;const f=a.w;a=a.h;const g=b.w;b=b.h;c=(c||"").split("");"b"===c[0]&&(e+=b);"r"===c[1]&&(d+=g);"c"===c[0]&&(e+=oi(b/2));"c"===c[1]&&(d+=oi(g/2));"b"===c[3]&&(e-=a);"r"===c[4]&&(d-=f);"c"===c[3]&&(e-=oi(a/2));"c"===c[4]&&(d-=oi(f/2));return{x:d,y:e,w:f,h:a}},xM={inflate:(a,b,c)=>({x:a.x-b,y:a.y-c,w:a.w+2*b,h:a.h+2*c}),relativePosition:Yv,findBestRelativePosition:(a,b,c,d)=>{for(let e=0;e<d.length;e++){const f=Yv(a,b,d[e]);if(f.x>=c.x&&f.x+f.w<=c.w+c.x&&f.y>=c.y&&f.y+f.h<=c.h+
c.y)return d[e]}return null},intersect:(a,b)=>{const c=Le(a.x,b.x),d=Le(a.y,b.y),e=Xv(a.x+a.w,b.x+b.w);a=Xv(a.y+a.h,b.y+b.h);return 0>e-c||0>a-d?null:{x:c,y:d,w:e-c,h:a-d}},clamp:(a,b,c)=>{let d=a.x,e=a.y,f=a.x+a.w;a=a.y+a.h;var g=b.x+b.w,h=b.y+b.h;const k=Le(0,b.x-d);b=Le(0,b.y-e);g=Le(0,f-g);h=Le(0,a-h);d+=k;e+=b;c&&(f+=k,a+=b,d-=g,e-=h);return{x:d,y:e,w:f-g-d,h:a-h-e}},create:(a,b,c,d)=>({x:a,y:b,w:c,h:d}),fromClientRect:a=>({x:a.left,y:a.top,w:a.width,h:a.height})},yM=(a,b,c)=>{c=void 0===c?1E3:
c;let d=!1,e=null;const f=h=>(...k)=>{d||(d=!0,null!==e&&(clearTimeout(e),e=null),h.apply(null,k))};a=f(a);const g=f(b);return{start:(...h)=>{d||null!==e||(e=setTimeout(()=>g.apply(null,h),c))},resolve:a,reject:g}},zM=(()=>{const a={},b={};return{load:(c,d)=>{const e=`Script at URL "${d}" failed to load`,f=`Script at URL "${d}" did not call \`tinymce.Resource.add('${c}', data)\` within 1 second`;if(void 0!==a[c])return a[c];const g=new Promise((h,k)=>{const l=yM(h,k);b[c]=l.resolve;Ec.ScriptLoader.loadScript(d).then(()=>
l.start(f),()=>l.reject(e))});return a[c]=g},add:(c,d)=>{void 0!==b[c]&&(b[c](d),delete b[c]);a[c]=Promise.resolve(d)},unload:c=>{delete a[c]}}})(),AM=()=>(()=>{let a={},b=[];const c={getItem:d=>(d=a[d])?d:null,setItem:(d,e)=>{b.push(d);a[d]=String(e)},key:d=>b[d],removeItem:d=>{b=b.filter(e=>e===d);delete a[d]},clear:()=>{b=[];a={}},length:0};Object.defineProperty(c,"length",{get:()=>b.length,configurable:!1,enumerable:!1});return c})();let ig;try{ig=window.localStorage,ig.setItem("__storage_test__",
"__storage_test__"),ig.removeItem("__storage_test__")}catch(a){ig=AM()}const Zv=K.extend(ld,{geom:{Rect:xM},util:{Delay:Mb,Tools:K,VK:X,URI:sc,EventDispatcher:dm,Observable:em,I18n:cc,LocalStorage:ig,ImageUploader:a=>{const b=ps(),c=rs(a,b);return{upload:(d,e)=>c.upload(d,void 0===e||e?qs(a):void 0)}}},dom:{EventUtils:Ed,TreeWalker:Ta,TextSeeker:Gd,DOMUtils:Da,ScriptLoader:Ec,RangeUtils:Md,Serializer:gs,StyleSheetLoader:zn,ControlSelection:tp,BookmarkManager:Hf,Selection:fs,Event:Ed.Event},html:{Styles:mj,
Entities:Wc,Node:ib,Schema:Xc,DomParser:Ae,Writer:Yp,Serializer:ed},Env:ua,AddOnManager:lb,Annotator:qp,Formatter:us,UndoManager:ws,EditorCommands:Lv,WindowManager:ns,NotificationManager:ms,EditorObservable:Pv,Shortcuts:Sv,Editor:ki,FocusManager:Lp,EditorManager:ld,DOM:Da.DOM,ScriptLoader:Ec.ScriptLoader,PluginManager:Ce,ThemeManager:Rd,ModelManager:Be,IconManager:Bh,Resource:zM,FakeClipboard:wM,trim:K.trim,isArray:K.isArray,is:K.is,toArray:K.toArray,makeMap:K.makeMap,each:K.each,map:K.map,grep:K.grep,
inArray:K.inArray,extend:K.extend,walk:K.walk,resolve:K.resolve,explode:K.explode,_addCacheSuffix:K._addCacheSuffix});(a=>{window.tinymce=a;window.tinyMCE=a})(Zv);if("object"===typeof module)try{module.exports=Zv}catch(a){}})();

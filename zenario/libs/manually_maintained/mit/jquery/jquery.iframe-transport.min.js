(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){var l=0;b.ajaxTransport("iframe",function(a){if(a.async){var k=a.initialIframeSrc||"javascript:false;",d,e,g;return{send:function(p,m){d=b('<form style="display:none;"></form>');d.attr("accept-charset",a.formAcceptCharset);g=/\?/.test(a.url)?"&":"?";"DELETE"===a.type?(a.url=a.url+g+"_method=DELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+g+"_method=PUT",
a.type="POST"):"PATCH"===a.type&&(a.url=a.url+g+"_method=PATCH",a.type="POST");l+=1;e=b('<iframe src="'+k+'" name="iframe-transport-'+l+'"></iframe>').bind("load",function(){var n=b.isArray(a.paramName)?a.paramName:[a.paramName];e.unbind("load").bind("load",function(){try{var c=e.contents();if(!c.length||!c[0].firstChild)throw Error();}catch(f){c=void 0}m(200,"success",{iframe:c});b('<iframe src="'+k+'"></iframe>').appendTo(d);window.setTimeout(function(){d.remove()},0)});d.prop("target",e.prop("name")).prop("action",
a.url).prop("method",a.type);a.formData&&b.each(a.formData,function(c,f){b('<input type="hidden"/>').prop("name",f.name).val(f.value).appendTo(d)});if(a.fileInput&&a.fileInput.length&&"POST"===a.type){var h=a.fileInput.clone();a.fileInput.after(function(c){return h[c]});a.paramName&&a.fileInput.each(function(c){b(this).prop("name",n[c]||a.paramName)});d.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");a.fileInput.removeAttr("form")}d.submit();h&&h.length&&
a.fileInput.each(function(c,f){c=b(h[c]);b(f).prop("name",c.prop("name")).attr("form",c.attr("form"));c.replaceWith(f)})});d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",k);d&&d.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(a){return a&&b(a[0].body).text()},"iframe json":function(a){return a&&b.parseJSON(b(a[0].body).text())},"iframe html":function(a){return a&&b(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&b.isXMLDoc(a)?a:b.parseXML(a.XMLDocument&&
a.XMLDocument.xml||b(a.body).html())},"iframe script":function(a){return a&&b.globalEval(b(a[0].body).text())}}})});

/*
 jQuery UI Mouse 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Sortable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
var mouseHandled=!1;$(document).on("mouseup",function(){mouseHandled=!1});
var widgetsMouse=$.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.on("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).on("click."+this.widgetName,function(b){if(!0===$.data(b.target,a.widgetName+".preventClickEvent"))return $.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.off("."+
this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(!mouseHandled){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var b=this,c=1===a.which,d="string"===typeof this.options.cancel&&a.target.nodeName?$(a.target).closest(this.options.cancel).length:!1;if(!c||d||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;
this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(a),!this._mouseStarted))return a.preventDefault(),!0;!0===$.data(a.target,this.widgetName+".preventClickEvent")&&$.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return b._mouseMove(e)};this._mouseUpDelegate=function(e){return b._mouseUp(e)};this.document.on("mousemove."+
this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return mouseHandled=!0}},_mouseMove:function(a){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button)return this._mouseUp(a);if(!a.which)if(a.originalEvent.altKey||a.originalEvent.ctrlKey||a.originalEvent.metaKey||a.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(a)}if(a.which||a.button)this._mouseMoved=
!0;if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},_mouseUp:function(a){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&$.data(a.target,this.widgetName+
".preventClickEvent",!0),this._mouseStop(a));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);mouseHandled=this.ignoreMissingWhich=!1;a.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),
widgetsSortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,
receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&a<b+c},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var a=
this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");$.each(this.items,function(){a._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(a,b){var c=null,d=!1,e=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;
this._refreshItems(a);$(a.target).parents().each(function(){if($.data(this,e.widgetName+"-item")===e)return c=$(this),!1});$.data(a.target,e.widgetName+"-item")===e&&(c=$(a.target));if(!c||this.options.handle&&!b&&($(this.options.handle,c).find("*").addBack().each(function(){this===a.target&&(d=!0)}),!d))return!1;this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){b=this.options;this.currentContainer=this;this.refreshPositions();this.appendTo=$("parent"!==b.appendTo?
b.appendTo:this.currentItem.parent());this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();this.scrollParent=this.placeholder.scrollParent();$.extend(this.offset,{parent:this._getParentOffset()});b.containment&&this._setContainment();if(b.cursor&&"auto"!==b.cursor){var d=this.document.find("body");this.storedCursor=d.css("cursor");d.css("cursor",b.cursor);this.storedStylesheet=$("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(d)}b.zIndex&&
(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-
1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));$.ui.ddmanager&&($.ui.ddmanager.current=this);$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset());this.position=this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;
this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute");this._mouseDrag(a);return!0},_scroll:function(a){var b=this.options,c=!1;this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-
b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(a.pageY-this.document.scrollTop()<b.scrollSensitivity?c=this.document.scrollTop(this.document.scrollTop()-b.scrollSpeed):this.window.height()-(a.pageY-this.document.scrollTop())<b.scrollSensitivity&&
(c=this.document.scrollTop(this.document.scrollTop()+b.scrollSpeed)),a.pageX-this.document.scrollLeft()<b.scrollSensitivity?c=this.document.scrollLeft(this.document.scrollLeft()-b.scrollSpeed):this.window.width()-(a.pageX-this.document.scrollLeft())<b.scrollSensitivity&&(c=this.document.scrollLeft(this.document.scrollLeft()+b.scrollSpeed)));return c},_mouseDrag:function(a){var b;var c=this.options;this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&
"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");c.scroll&&!1!==this._scroll(a)&&(this._refreshItemPositions(!0),$.ui.ddmanager&&!c.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a));this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()};for(c=this.items.length-1;0<=c;c--){var d=this.items[c];var e=d.item[0];if((b=this._intersectsWithPointer(d))&&
d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===b?"next":"prev"]()[0]!==e&&!$.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],e):1)){this.direction=1===b?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(d))this._rearrange(a,d);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);$.ui.ddmanager&&$.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());
this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,b){if(a){$.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=this.placeholder.offset();var d=this.options.axis,e={};d&&"x"!==d||(e.left=b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));d&&"y"!==d||(e.top=b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?
0:this.offsetParent[0].scrollTop));this.reverting=!0;$(this.helper).animate(e,parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new $.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",
null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):
$(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};$(b).each(function(){var d=($(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);d&&c.push((a.key||d[1]+"[]")+"="+(a.key&&a.expression?d[1]:d[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push($(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,k=h+a.height,l=this.offset.click.top,m=this.offset.click.left;l="x"===this.options.axis||d+l>h&&d+l<k;m="y"===this.options.axis||b+m>f&&b+m<g;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":
"height"]>a[this.floating?"width":"height"]?l&&m:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);if(!b||!a)return!1;b=this.dragDirection.vertical;a=this.dragDirection.horizontal;
return this.floating?"right"===a||"down"===b?2:1:b&&("down"===b?2:1)},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this.dragDirection.vertical,d=this.dragDirection.horizontal;return this.floating&&d?"right"===d&&a||"left"===d&&!a:c&&("down"===c&&b||"up"===c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-
this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function b(){e.push(this)}var c,d,e=[],f=[],g=this._connectWith();
if(g&&a)for(a=g.length-1;0<=a;a--){var h=$(g[a],this.document[0]);for(c=h.length-1;0<=c;c--)(d=$.data(h[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&f.push(["function"===typeof d.options.items?d.options.items.call(d.element):$(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d])}f.push(["function"===typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=f.length-1;0<=a;a--)f[a][0].each(b);return $(e)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(b){for(var c=0;c<a.length;c++)if(a[c]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var b,c,d,e,f=this.items,g=[["function"===typeof this.options.items?this.options.items.call(this.element[0],a,{item:this.currentItem}):$(this.options.items,this.element),
this]];if((e=this._connectWith())&&this.ready)for(b=e.length-1;0<=b;b--){var h=$(e[b],this.document[0]);for(c=h.length-1;0<=c;c--)(d=$.data(h[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&(g.push(["function"===typeof d.options.items?d.options.items.call(d.element[0],a,{item:this.currentItem}):$(d.options.items,d.element),d]),this.containers.push(d))}for(b=g.length-1;0<=b;b--)for(a=g[b][1],h=g[b][0],c=0,e=h.length;c<e;c++)d=$(h[c]),d.data(this.widgetName+"-item",a),f.push({item:d,instance:a,
width:0,height:0,left:0,top:0})},_refreshItemPositions:function(a){var b;for(b=this.items.length-1;0<=b;b--){var c=this.items[b];if(!this.currentContainer||c.instance===this.currentContainer||c.item[0]===this.currentItem[0]){var d=this.options.toleranceElement?$(this.options.toleranceElement,c.item):c.item;a||(c.width=d.outerWidth(),c.height=d.outerHeight());d=d.offset();c.left=d.left;c.top=d.top}}},refreshPositions:function(a){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):
!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());this._refreshItemPositions(a);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(a=this.containers.length-1;0<=a;a--){var b=this.containers[a].element.offset();this.containers[a].containerCache.left=b.left;this.containers[a].containerCache.top=b.top;this.containers[a].containerCache.width=this.containers[a].element.outerWidth();this.containers[a].containerCache.height=
this.containers[a].element.outerHeight()}return this},_createPlaceholder:function(a){a=a||this;var b=a.options;if(!b.placeholder||b.placeholder.constructor===String){var c=b.placeholder;var d=a.currentItem[0].nodeName.toLowerCase();b.placeholder={element:function(){var e=$("<"+d+">",a.document[0]);a._addClass(e,"ui-sortable-placeholder",c||a.currentItem[0].className)._removeClass(e,"ui-sortable-helper");"tbody"===d?a._createTrPlaceholder(a.currentItem.find("tr").eq(0),$("<tr>",a.document[0]).appendTo(e)):
"tr"===d?a._createTrPlaceholder(a.currentItem,e):"img"===d&&e.attr("src",a.currentItem.attr("src"));c||e.css("visibility","hidden");return e},update:function(e,f){if(!c||b.forcePlaceholderSize)f.height()&&(!b.forcePlaceholderSize||"tbody"!==d&&"tr"!==d)||f.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||
0,10))}}}a.placeholder=$(b.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);b.placeholder.update(a,a.placeholder)},_createTrPlaceholder:function(a,b){var c=this;a.children().each(function(){$("<td>&#160;</td>",c.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(b)})},_contactContainers:function(a){var b,c,d,e=d=null;for(b=this.containers.length-1;0<=b;b--)$.contains(this.currentItem[0],this.containers[b].element[0])||(this._intersectsWith(this.containers[b].containerCache)?
d&&$.contains(this.containers[b].element[0],d.element[0])||(d=this.containers[b],e=b):this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",a,this._uiHash(this)),this.containers[b].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[e].containerCache.over||(this.containers[e]._trigger("over",a,this._uiHash(this)),this.containers[e].containerCache.over=1);else{b=1E4;var f=null;d=(c=d.floating||this._isFloating(this.currentItem))?"left":"top";var g=c?"width":
"height";var h=c?"pageX":"pageY";for(c=this.items.length-1;0<=c;c--)if($.contains(this.containers[e].element[0],this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]){var k=this.items[c].item.offset()[d];var l=!1;a[h]-k>this.items[c][g]/2&&(l=!0);Math.abs(a[h]-k)<b&&(b=Math.abs(a[h]-k),f=this.items[c],this.direction=l?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer===this.containers[e]?this.currentContainer.containerCache.over||(this.containers[e]._trigger("over",a,
this._uiHash()),this.currentContainer.containerCache.over=1):(f?this._rearrange(a,f,null,!0):this._rearrange(a,null,this.containers[e].element,!0),this._trigger("change",a,this._uiHash()),this.containers[e]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[e],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=
this.scrollParent.offset()),this.containers[e]._trigger("over",a,this._uiHash(this)),this.containers[e].containerCache.over=1)}},_createHelper:function(a){var b=this.options;a="function"===typeof b.helper?$(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||this.appendTo[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,
position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});a[0].style.width&&!b.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!b.forceHelperSize||a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));Array.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-
a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===
this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),
10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode);if("document"===a.containment||"window"===a.containment)this.containment=
[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===a.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===a.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=$(a.containment)[0];
a=$(a.containment).offset();var c="hidden"!==$(b).css("overflow");this.containment=[a.left+(parseInt($(b).css("borderLeftWidth"),10)||0)+(parseInt($(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt($(b).css("borderTopWidth"),10)||0)+(parseInt($(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt($(b).css("borderLeftWidth"),10)||0)-(parseInt($(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,
a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt($(b).css("borderTopWidth"),10)||0)-(parseInt($(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);a="absolute"===a?1:-1;var c="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(c[0].tagName);return{top:b.top+
this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:c.scrollTop())*a,left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())*a}},_generatePosition:function(a){var b=this.options;var c=a.pageX;var d=a.pageY;var e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:
this.offsetParent,f=/(html|body)/i.test(e[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(d=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&
(c=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(d=this.containment[3]+this.offset.click.top)),b.grid&&(d=this.originalPageY+Math.round((d-this.originalPageY)/b.grid[1])*b.grid[1],d=this.containment?d-this.offset.click.top>=this.containment[1]&&d-this.offset.click.top<=this.containment[3]?d:d-this.offset.click.top>=this.containment[1]?d-b.grid[1]:d+b.grid[1]:d,c=this.originalPageX+Math.round((c-this.originalPageX)/b.grid[0])*b.grid[0],c=this.containment?
c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-b.grid[0]:c+b.grid[0]:c));return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_rearrange:function(a,
b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(f,g,h){return function(k){h._trigger(f,k,g._uiHash(g))}}this.reverting=!1;var d,e=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=
null;if(this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)if("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])this._storedCSS[d]="";this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&e.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===
this.currentItem.parent()[0]||b||e.push(function(f){this._trigger("update",f,this._uiHash())});this===this.currentContainer||b||(e.push(function(f){this._trigger("remove",f,this._uiHash())}),e.push(function(f){return function(g){f._trigger("receive",g,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.currentContainer)));for(d=this.containers.length-1;0<=d;d--)b||e.push(c("deactivate",this,this.containers[d])),
this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function(){!1===$.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||$([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,
item:b.currentItem,sender:a?a.element:null}}});

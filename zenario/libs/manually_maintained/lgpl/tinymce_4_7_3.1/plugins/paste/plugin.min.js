(function(){var T={},C=function(a,n,d){if("string"!==typeof a)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+a;if(void 0===d)throw"no definition function for "+a;T[a]={deps:n,defn:d,instance:void 0}},U=function(a){var n=T[a];if(void 0===n)throw"module ["+a+"] was undefined";if(void 0===n.instance){for(var d=T[a],h=d.deps,r=d.defn,e=h.length,f=Array(e),m=0;m<e;++m)f[m]=U(h[m]);h=r.apply(null,f);if(void 0===h)throw"module ["+a+"] returned undefined";d.instance=h}return n.instance},
P=function(a,n){C(a,[],function(){return n})};C("ephox.katamari.api.Cell",[],function(){var a=function(n){var d=n;return{get:function(){return d},set:function(h){d=h},clone:function(){return a(d)}}};return a});P("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);C("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});P("global!window",window);C("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],
function(a,n){return{hasProPlugin:function(d){return/(^|[ ,])powerpaste([, ]|$)/.test(d.settings.plugins)&&n.get("powerpaste")?("undefined"!==typeof a.console&&a.console.log&&a.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1}}});C("tinymce.plugins.paste.api.Api",[],function(a){return{get:function(n,d){return{clipboard:n,quirks:d}}}});C("tinymce.plugins.paste.api.Events",[],function(){return{firePastePreProcess:function(a,n,d,h){return a.fire("PastePreProcess",
{content:n,internal:d,wordContent:h})},firePastePostProcess:function(a,n,d,h){return a.fire("PastePostProcess",{node:n,internal:d,wordContent:h})},firePastePlainTextToggle:function(a,n){return a.fire("PastePlainTextToggle",{state:n})},firePaste:function(a,n){return a.fire("paste",{ieFake:n})}}});C("tinymce.plugins.paste.api.Settings",[],function(){return{shouldPlainTextInform:function(a){return a.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(a){return a.getParam("paste_block_drop",
!1)},shouldPasteDataImages:function(a){return a.getParam("paste_data_images",!1)},shouldFilterDrop:function(a){return a.getParam("paste_filter_drop",!0)},getPreProcess:function(a){return a.getParam("paste_preprocess")},getPostProcess:function(a){return a.getParam("paste_postprocess")},getWebkitStyles:function(a){return a.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(a){return a.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(a){return a.getParam("paste_merge_formats",
!0)},isSmartPasteEnabled:function(a){return a.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(a){return a.getParam("paste_as_text",!1)},getRetainStyleProps:function(a){return a.getParam("paste_retain_style_properties")},getWordValidElements:function(a){return a.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},
shouldConvertWordFakeLists:function(a){return a.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(a){return a.getParam("paste_enable_default_filters",!0)}}});C("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(a,n){return{togglePlainTextPaste:function(d,h,r){"text"===h.pasteFormat?(h.pasteFormat="html",a.firePastePlainTextToggle(d,!1)):(h.pasteFormat="text",a.firePastePlainTextToggle(d,!0),!1===r.get()&&
n.shouldPlainTextInform(d)&&(d.notificationManager.open({text:d.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),r.set(!0)));d.focus()}}});C("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(a){return{register:function(n,d,h){n.addCommand("mceTogglePlainTextPaste",function(){a.togglePlainTextPaste(n,d,h)});n.addCommand("mceInsertClipboardContent",function(r,e){e.content&&d.pasteHtml(e.content,
e.internal);e.text&&d.pasteText(e.text)})}}});P("global!Image",Image);P("global!navigator",navigator);C("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});C("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Delay")});C("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});C("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.VK")});
C("tinymce.plugins.paste.core.InternalHtml",[],function(){return{mark:function(a){return"\x3c!-- x-tinymce/html --\x3e"+a},unmark:function(a){return a.replace("\x3c!-- x-tinymce/html --\x3e","")},isMarked:function(a){return-1!==a.indexOf("\x3c!-- x-tinymce/html --\x3e")},internalHtmlMime:function(){return"x-tinymce/html"}}});C("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Entities")});C("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools",
"tinymce.core.html.Entities"],function(a,n){var d=function(e){return e.replace(/\r?\n/g,"<br>")},h=function(e,f){var m,w=[];e="<"+e;if("object"===typeof f){for(m in f)f.hasOwnProperty(m)&&w.push(m+'="'+n.encodeAllRaw(f[m])+'"');w.length&&(e+=" "+w.join(" "))}return e+">"},r=function(e,f,m){e=e.split(/\n\n/);var w=h(f,m),q="</"+f+">";f=a.map(e,function(c){return c.split(/\n/).join("<br />")});m=function(c){return w+c+q};return 1===f.length?f[0]:a.map(f,m).join("")};return{isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},
convert:function(e,f,m){return f?r(e,f,m):d(e)},toBRs:d,toBlockElements:r}});C("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(a,n){return function(d){var h,r=function(){return d.dom.get("mcepastebin")},e=function(f){return"%MCEPASTEBIN%"===f};return{create:function(){function f(g){var k=g.startContainer;var t=g.getClientRects();if(t.length)return t[0];if(g.collapsed&&1===k.nodeType){for(g=k.childNodes[h.startOffset];g&&3===g.nodeType&&!g.data.length;)g=
g.nextSibling;if(g&&("BR"===g.tagName&&(k=m.doc.createTextNode("\ufeff"),g.parentNode.insertBefore(k,g),g=m.createRng(),g.setStartBefore(k),g.setEndAfter(k),t=g.getClientRects(),m.remove(k)),t.length))return t[0]}}var m=d.dom,w=d.getBody(),q=d.dom.getViewPort(d.getWin()).y,c=20,b;h=d.selection.getRng();d.inline&&(b=d.selection.getScrollContainer())&&0<b.scrollTop&&(q=b.scrollTop);if(h.getClientRects)if(c=f(h))c=q+(c.top-m.getPos(w).y);else if(c=q,q=h.startContainer)3===q.nodeType&&q.parentNode!==
w&&(q=q.parentNode),1===q.nodeType&&(c=m.getPos(q,b||w).y);b=d.dom.add(d.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+c+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");(n.ie||n.gecko)&&m.setStyle(b,"left","rtl"===m.getStyle(w,"direction",!0)?65535:-65535);m.bind(b,"beforedeactivate focusin focusout",function(g){g.stopPropagation()});b.focus();d.selection.select(b,!0)},remove:function(){if(r()){for(var f;f=
d.dom.get("mcepastebin");)d.dom.remove(f),d.dom.unbind(f);h&&d.selection.setRng(h)}h=null},getEl:r,getHtml:function(){var f=function(b,g){b.appendChild(g);d.dom.remove(g,!0)};var m=a.grep(d.getBody().childNodes,function(b){return"mcepastebin"===b.id});var w=m.shift();a.each(m,function(b){f(w,b)});var q=d.dom.select("div[id=mcepastebin]",w);for(m=q.length-1;0<=m;m--){var c=d.dom.create("div");w.insertBefore(c,q[m]);f(c,q[m])}return w?w.innerHTML:""},getLastRng:function(){return h},isDefault:function(){var f=
r();return f&&"mcepastebin"===f.id&&e(f.innerHTML)},isDefaultContent:e}}});C("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.DomParser")});C("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Node")});C("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Schema")});C("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Serializer")});
C("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(a,n,d,h){function r(e,f){h.each(f,function(m){e=m.constructor===RegExp?e.replace(m,""):e.replace(m[0],m[1])});return e}return{filter:r,innerText:function(e){function f(k){var t=k.name,p=k;if("br"===t)q+="\n";else if(c[t]&&(q+=" "),b[t])q+=" ";else{3===k.type&&(q+=k.value);if(!k.shortEnded&&(k=k.firstChild)){do f(k);while(k=k.next)}g[t]&&p.next&&(q+=
"\n","p"===t&&(q+="\n"))}}var m=new d,w=new n({},m),q="",c=m.getShortEndedElements(),b=h.makeMap("script noscript style textarea video audio iframe object"," "),g=m.getBlockElements();e=r(e,[/<!\[[^\]]+\]>/g]);f(w.parse(e));return q},trimHtml:function(e){return e=r(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(f,m,w){return m||w?"\u00a0":" "}],/<br class="Apple-interchange-newline">/g,
/<br>$/i])},createIdGenerator:function(e){var f=0;return function(){return e+f++}},isMsEdge:function(){return-1!==a.userAgent.indexOf(" Edge/")}}});C("tinymce.plugins.paste.core.WordFilter","tinymce.core.html.DomParser tinymce.core.html.Node tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.util.Tools tinymce.plugins.paste.api.Settings tinymce.plugins.paste.core.Utils".split(" "),function(a,n,d,h,r,e,f){function m(b){var g;b=b.replace(/^[\u00a0 ]+/,"");r.each([/^[IVXLMCD]{1,2}\.[ \u00a0]/,
/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(k){if(k.test(b))return g=!0,!1});return g}function w(b){function g(y){var K="";if(3===y.type)return y.value;if(y=y.firstChild){do K+=g(y);while(y=y.next)}return K}function k(y,K){if(3===y.type&&K.test(y.value))return y.value=y.value.replace(K,
""),!1;if(y=y.firstChild){do if(!k(y,K))return!1;while(y=y.next)}return!0}function t(y){if(y._listIgnore)y.remove();else if(y=y.firstChild){do t(y);while(y=y.next)}}function p(y,K,R){var Q=y._listLevel||x;Q!==x&&(Q<x?v&&(v=v.parent.parent):(A=v,v=null));v&&v.name===K?v.append(y):(A=A||v,v=new n(K,1),1<R&&v.attr("start",""+R),y.wrap(v));y.name="li";Q>x&&A&&A.lastChild.append(v);x=Q;t(y);k(y,/^\u00a0+/);k(y,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);k(y,/^\u00a0+/)}for(var v,A,x=1,z=[],E=b.firstChild;"undefined"!==
typeof E&&null!==E;)if(z.push(E),E=E.walk(),null!==E)for(;"undefined"!==typeof E&&E.parent!==b;)E=E.walk();for(E=0;E<z.length;E++){b=z[E];if("p"===b.name&&b.firstChild){var H=g(b);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(H)){p(b,"ul");continue}if(m(H)){H=/([0-9]+)\./.exec(H);var M=1;H&&(M=parseInt(H[1],10));p(b,"ol",M);continue}if(b._listLevel){p(b,"ul",1);continue}}else A=v;v=null}}function q(b,g,k,t){var p={},v,A=b.dom.parseStyle(t);r.each(A,function(x,z){switch(z){case "mso-list":if(v=
/\w+ \w+([0-9]+)/i.exec(t))k._listLevel=parseInt(v[1],10);/Ignore/i.test(x)&&k.firstChild&&(k._listIgnore=!0,k.firstChild._listIgnore=!0);break;case "horiz-align":z="text-align";break;case "vert-align":z="vertical-align";break;case "font-color":case "mso-foreground":z="color";break;case "mso-background":case "mso-highlight":z="background";break;case "font-weight":case "font-style":"normal"!==x&&(p[z]=x);return;case "mso-element":if(/^(comment|comment-list)$/i.test(x)){k.remove();return}}0===z.indexOf("mso-comment")?
k.remove():0!==z.indexOf("mso-")&&("all"===e.getRetainStyleProps(b)||g&&g[z])&&(p[z]=x)});/(bold)/i.test(p["font-weight"])&&(delete p["font-weight"],k.wrap(new n("b",1)));/(italic)/i.test(p["font-style"])&&(delete p["font-style"],k.wrap(new n("i",1)));return(p=b.dom.serializeStyle(p,k.name))?p:null}var c=function(b,g){var k,t;(k=e.getRetainStyleProps(b))&&(t=r.makeMap(k.split(/[, ]/)));g=f.filter(g,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/\x3c!--[\s\S]+?--\x3e/gi,
/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(v,A){return 0<A.length?A.replace(/./," ").slice(Math.floor(A.length/2)).split("").join("\u00a0"):""}]]);k=e.getWordValidElements(b);k=new d({valid_elements:k,valid_children:"-li[p]"});r.each(k.elements,function(v){v.attributes["class"]||(v.attributes["class"]=
{},v.attributesOrder.push("class"));v.attributes.style||(v.attributes.style={},v.attributesOrder.push("style"))});var p=new a({},k);p.addAttributeFilter("style",function(v){for(var A=v.length,x;A--;)x=v[A],x.attr("style",q(b,t,x,x.attr("style"))),"span"===x.name&&x.parent&&!x.attributes.length&&x.unwrap()});p.addAttributeFilter("class",function(v){for(var A=v.length,x,z;A--;)x=v[A],z=x.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(z)&&x.remove(),x.attr("class",null)});p.addNodeFilter("del",
function(v){for(var A=v.length;A--;)v[A].remove()});p.addNodeFilter("a",function(v){for(var A=v.length,x,z,E;A--;)x=v[A],z=x.attr("href"),E=x.attr("name"),z&&-1!==z.indexOf("#_msocom_")?x.remove():(z&&0===z.indexOf("file://")&&(z=z.split("#")[1])&&(z="#"+z),z||E?E&&!/^_?(?:toc|edn|ftn)/i.test(E)?x.unwrap():x.attr({href:z,name:E}):x.unwrap())});g=p.parse(g);e.shouldConvertWordFakeLists(b)&&w(g);return g=(new h({validate:b.settings.validate},k)).serialize(g)};return{preProcess:function(b,g){return e.shouldUseDefaultFilters(b)?
c(b,g):g},isWordContent:function(b){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(b)||/class="OutlineElement/.test(b)||/id="?docs\-internal\-guid\-/.test(b)}}});C("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(a,n){var d=function(h,r){return{content:h,cancelled:r}};return{process:function(h,r,e){var f=n.isWordContent(r);r=f?n.preProcess(h,r):r;r=a.firePastePreProcess(h,
r,e,f);h.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?(r=h.dom.create("div",{style:"display:none"},r.content),h=a.firePastePostProcess(h,r,e,f),h=d(h.node.innerHTML,h.isDefaultPrevented())):h=d(r.content,r.isDefaultPrevented());return h}}});C("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(a,n){var d=function(c){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(c)},h=function(c){return d(c)&&/.(gif|jpe?g|png)$/.test(c)},
r=function(c,b,g){c.undoManager.extra(function(){g(c,b)},function(){c.insertContent('<img src="'+b+'">')});return!0},e=function(c,b,g){c.undoManager.extra(function(){g(c,b)},function(){c.execCommand("mceInsertLink",!1,b)});return!0},f=function(c,b,g){return!1===c.selection.isCollapsed()&&d(b)?e(c,b,g):!1},m=function(c,b,g){return h(b)?r(c,b,g):!1},w=function(c,b){c.insertContent(b,{merge:n.shouldMergeFormats(c),paste:!0});return!0},q=function(c,b){a.each([f,m,w],function(g){return!0!==g(c,b,w)})};
return{isImageUrl:h,isAbsoluteUrl:d,insertContent:function(c,b){!1===n.isSmartPasteEnabled(c)?w(c,b):q(c,b)}}});C("tinymce.plugins.paste.core.Clipboard","global!Image global!navigator global!window tinymce.core.Env tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK tinymce.plugins.paste.api.Events tinymce.plugins.paste.api.Settings tinymce.plugins.paste.core.InternalHtml tinymce.plugins.paste.core.Newlines tinymce.plugins.paste.core.PasteBin tinymce.plugins.paste.core.ProcessFilters tinymce.plugins.paste.core.SmartPaste tinymce.plugins.paste.core.Utils".split(" "),
function(a,n,d,h,r,e,f,m,w,q,c,b,g,k,t){return function(p){function v(l,u){u=u?u:q.isMarked(l);l=g.process(p,q.unmark(l),u);!1===l.cancelled&&k.insertContent(p,l.content)}function A(l){l=p.dom.encode(l).replace(/\r\n/g,"\n");l=c.convert(l,p.settings.forced_root_block,p.settings.forced_root_block_attrs);v(l,!1)}function x(l){var u={};if(l){if(l.getData){var D=l.getData("Text");D&&0<D.length&&-1===D.indexOf("data:text/mce-internal,")&&(u["text/plain"]=D)}if(l.types)for(D=0;D<l.types.length;D++){var B=
l.types[D];try{u[B]=l.getData(B)}catch(G){u[B]=""}}}return u}function z(l){l=x(l.clipboardData||p.getDoc().dataTransfer);return t.isMsEdge()?e.extend(l,{"text/html":""}):l}function E(l){return N(l,"text/html")||N(l,"text/plain")}function H(l){var u=l.indexOf(",");return-1!==u?l.substr(u+1):null}function M(l,u){return l.images_dataimg_filter?l.images_dataimg_filter(u):!0}function y(l){return(l=l.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?p.dom.encode(l[1]):null}function K(l,u,D){l&&(p.selection.setRng(l),
l=null);var B=u.result,G=H(B);l=X();u=p.settings.images_reuse_filename&&D.name?y(D.name):l;var F=new a;F.src=B;M(p.settings,F)?(B=p.editorUpload.blobCache,(F=B.findFirst(function(I){return I.base64()===G}))?D=F:(D=B.create(l,D,G,u),B.add(D)),v('<img src="'+D.blobUri()+'">',!1)):v('<img src="'+B+'">',!1)}function R(l,u){function D(G){var F,I=!1;if(G)for(F=0;F<G.length;F++){var L=G[F];/^image\/(jpeg|png|gif|bmp)$/.test(L.type)&&(I=L.getAsFile?L.getAsFile():L,L=new d.FileReader,L.onload=K.bind(null,
u,L,I),L.readAsDataURL(I),l.preventDefault(),I=!0)}return I}var B=l.clipboardData||l.dataTransfer;if(p.settings.paste_data_images&&B)return D(B.items)||D(B.files)}function Q(l){l=l.clipboardData;return-1!==n.userAgent.indexOf("Android")&&l&&l.items&&0===l.items.length}function N(l,u){return u in l&&0<l[u].length}function V(l){return f.metaKeyPressed(l)&&86===l.keyCode||l.shiftKey&&45===l.keyCode}function Y(){function l(u,D,B,G){if(N(u,"text/html"))var F=u["text/html"];else F=J.getHtml(),G=G?G:q.isMarked(F),
J.isDefaultContent(F)&&(B=!0);F=t.trimHtml(F);J.remove();var I=!1===G&&c.isPlainText(F);if(!F.length||I)B=!0;B&&(F=N(u,"text/plain")&&I?u["text/plain"]:t.innerText(F));J.isDefaultContent(F)?D||p.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):B?A(F):v(F,G)}p.on("keydown",function(u){function D(B){V(B)&&!B.isDefaultPrevented()&&J.remove()}V(u)&&!u.isDefaultPrevented()&&(S=u.shiftKey&&86===u.keyCode,S&&h.webkit&&-1!==n.userAgent.indexOf("Version/")||(u.stopImmediatePropagation(),
W=(new Date).getTime(),h.ie&&S?(u.preventDefault(),m.firePaste(p,!0)):(J.remove(),J.create(),p.once("keyup",D),p.once("paste",function(){p.off("keyup",D)}))))});p.on("paste",function(u){var D=(new Date).getTime(),B=z(u);D=(new Date).getTime()-D;var G=1E3>(new Date).getTime()-W-D,F="text"===O.pasteFormat||S,I=N(B,q.internalHtmlMime());S=!1;u.isDefaultPrevented()||Q(u)?J.remove():!E(B)&&R(u,J.getLastRng()||p.selection.getRng())?J.remove():(G||u.preventDefault(),!h.ie||G&&!u.ieFake||N(B,"text/html")||
(J.create(),p.dom.bind(J.getEl(),"paste",function(L){L.stopPropagation()}),p.getDoc().execCommand("Paste",!1,null),B["text/html"]=J.getHtml()),N(B,"text/html")?(u.preventDefault(),I||(I=q.isMarked(B["text/html"])),l(B,G,F,I)):r.setEditorTimeout(p,function(){l(B,G,F,I)},0))})}var O=this,W=0,J=new b(p),S,X=t.createIdGenerator("mceclip");O.pasteFormat=w.isPasteAsTextEnabled(p)?"text":"html";O.pasteHtml=v;O.pasteText=A;O.pasteImageData=R;O.getDataTransferItems=x;O.hasHtmlOrText=E;O.hasContentType=N;p.on("preInit",
function(){Y();p.parser.addNodeFilter("img",function(l,u,D){function B(F){F.attr("data-mce-object")||G===h.transparentSrc||F.remove()}if(!p.settings.paste_data_images&&D.data&&!0===D.data.paste)for(u=l.length;u--;){var G=l[u].attributes.map.src;G&&(0===G.indexOf("webkit-fake-url")?B(l[u]):p.settings.allow_html_data_urls||0!==G.indexOf("data:")||B(l[u]))}})})}});P("global!setTimeout",setTimeout);C("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml",
"tinymce.plugins.paste.core.Utils"],function(a,n,d,h){var r=function(){},e=function(c,b,g,k){var t=c.clipboardData,p=b.html,v=b.text;if(!1===n.iOS&&void 0!==t&&"function"===typeof t.setData&&!0!==h.isMsEdge())try{t.clearData();t.setData("text/html",p);t.setData("text/plain",v);t.setData(d.internalHtmlMime(),p);var A=!0}catch(x){A=!1}else A=!1;A?(c.preventDefault(),k()):g(b.html,k)},f=function(c){return function(b,g){b=d.mark(b);var k=c.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"});
b=c.dom.create("div",{contenteditable:"true"},b);c.dom.setStyles(k,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"});k.appendChild(b);c.dom.add(c.getBody(),k);var t=c.selection.getRng();b.focus();var p=c.dom.createRng();p.selectNodeContents(b);c.selection.setRng(p);a(function(){k.parentNode.removeChild(k);c.selection.setRng(t);g()},0)}},m=function(c){return{html:c.selection.getContent({contextual:!0}),text:c.selection.getContent({format:"text"})}},w=function(c){return function(b){!1===
c.selection.isCollapsed()&&e(b,m(c),f(c),function(){a(function(){c.execCommand("Delete")},0)})}},q=function(c){return function(b){!1===c.selection.isCollapsed()&&e(b,m(c),f(c),r)}};return{register:function(c){c.on("cut",w(c));c.on("copy",q(c))}}});C("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.RangeUtils")});C("tinymce.plugins.paste.core.DragDrop",["tinymce.core.api.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings",
"tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(a,n,d,h,r){var e=function(f){return(f=f["text/plain"])?0===f.indexOf("file://"):!1};return{setup:function(f,m,w){if(d.shouldBlockDrop(f))f.on("dragend dragover draggesture dragdrop drop drag",function(q){q.preventDefault();q.stopPropagation()});if(!d.shouldPasteDataImages(f))f.on("drop",function(q){var c=q.dataTransfer;c&&c.files&&0<c.files.length&&q.preventDefault()});f.on("drop",function(q){var c=a.getCaretRangeFromPoint(q.clientX,
q.clientY,f.getDoc());if(!q.isDefaultPrevented()&&!w.get()){var b=m.getDataTransferItems(q.dataTransfer);var g=m.hasContentType(b,h.internalHtmlMime());if((m.hasHtmlOrText(b)&&!e(b)||!m.pasteImageData(q,c))&&c&&d.shouldFilterDrop(f)){var k=b["mce-internal"]||b["text/html"]||b["text/plain"];k&&(q.preventDefault(),n.setEditorTimeout(f,function(){f.undoManager.transact(function(){b["mce-internal"]&&f.execCommand("Delete");f.focus();f.selection.setRng(c);k=r.trimHtml(k);b["text/html"]?m.pasteHtml(k,g):
m.pasteText(k)})}))}}});f.on("dragstart",function(q){w.set(!0)});f.on("dragover dragend",function(q){if(d.shouldPasteDataImages(f)&&!1===w.get()){q.preventDefault();var c=a.getCaretRangeFromPoint(q.clientX,q.clientY,f.getDoc());f.focus();f.selection.setRng(c)}"dragend"===q.type&&w.set(!1)})}}});C("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(a){return{setup:function(n){var d=n.plugins.paste,h=a.getPreProcess(n);if(h)n.on("PastePreProcess",function(e){h.call(d,
d,e)});var r=a.getPostProcess(n);if(r)n.on("PastePostProcess",function(e){r.call(d,d,e)})}}});C("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(a,n,d,h,r){function e(c,b){c.on("PastePreProcess",function(g){g.content=b(c,g.content,g.internal,g.wordContent)})}function f(c,b){c.on("PastePostProcess",function(g){b(c,g.node)})}function m(c,b){if(!r.isWordContent(b))return b;
var g=[];n.each(c.schema.getBlockElements(),function(k,t){g.push(t)});c=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+g.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");b=h.filter(b,[[c,"$1"]]);return b=h.filter(b,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function w(c,b,g,k){if(k||g)return b;var t=d.getWebkitStyles(c);if(!1===d.shouldRemoveWebKitStyles(c)||"all"===t)return b;t&&(t=t.split(/[, ]/));if(t){var p=c.dom,v=c.selection.getNode();b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,
function(A,x,z,E){A=p.parseStyle(p.decode(z),"span");z={};if("none"===t)return x+E;for(var H=0;H<t.length;H++){var M=A[t[H]],y=p.getStyle(v,t[H],!0);/color/.test(t[H])&&(M=p.toHex(M),y=p.toHex(y));y!==M&&(z[t[H]]=M)}return(z=p.serializeStyle(z,"span"))?x+' style="'+z+'"'+E:x+E})}else b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return b=b.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(A,x,z,E){return x+' style="'+z+'"'+E})}function q(c,b){c.$("a",b).find("font,u").each(function(g,
k){c.dom.remove(k,!0)})}return{setup:function(c){a.webkit&&e(c,w);a.ie&&(e(c,m),f(c,q))}}});P("global!Array",Array);P("global!Error",Error);C("ephox.katamari.api.Fun",["global!Array","global!Error"],function(a,n){var d=function(e){return function(){return e}},h=d(!1),r=d(!0);return{noop:function(){},compose:function(e,f){return function(){return e(f.apply(null,arguments))}},constant:d,identity:function(e){return e},tripleEquals:function(e,f){return e===f},curry:function(e){for(var f=new a(arguments.length-
1),m=1;m<arguments.length;m++)f[m-1]=arguments[m];return function(){for(var w=new a(arguments.length),q=0;q<w.length;q++)w[q]=arguments[q];w=f.concat(w);return e.apply(null,w)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new n(e);}},apply:function(e){return e()},call:function(e){e()},never:h,always:r}});C("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(a){var n=function(d,h,r){var e=r.control;e.active("text"===
h.pasteFormat);d.on("PastePlainTextToggle",function(f){e.active(f.state)})};return{register:function(d,h){var r=a.curry(n,d,h);d.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:r});d.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:h.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:r})}}});C("tinymce.plugins.paste.Plugin","ephox.katamari.api.Cell tinymce.core.PluginManager tinymce.plugins.paste.alien.DetectProPlugin tinymce.plugins.paste.api.Api tinymce.plugins.paste.api.Commands tinymce.plugins.paste.core.Clipboard tinymce.plugins.paste.core.CutCopy tinymce.plugins.paste.core.DragDrop tinymce.plugins.paste.core.PrePostProcess tinymce.plugins.paste.core.Quirks tinymce.plugins.paste.ui.Buttons".split(" "),
function(a,n,d,h,r,e,f,m,w,q,c){var b=a(!1);n.add("paste",function(g){if(!1===d.hasProPlugin(g)){var k=new e(g),t=q.setup(g),p=a(!1);c.register(g,k);r.register(g,k,b);w.setup(g);f.register(g);m.setup(g,k,p);return h.get(k,t)}});return function(){}});U("tinymce.plugins.paste.Plugin")()})();

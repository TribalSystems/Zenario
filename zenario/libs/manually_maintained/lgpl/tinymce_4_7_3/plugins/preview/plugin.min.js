'use strict';(function(){var m={},k=function(a,d,e){if("string"!==typeof a)throw"module id must be a string";if(void 0===d)throw"no dependencies for "+a;if(void 0===e)throw"no definition function for "+a;m[a]={deps:d,defn:e,instance:void 0}},p=function(a){var d=m[a];if(void 0===d)throw"module ["+a+"] was undefined";if(void 0===d.instance){for(var e=m[a],b=e.deps,c=e.defn,g=b.length,f=Array(g),h=0;h<g;++h)f[h]=p(b[h]);b=c.apply(null,f);if(void 0===b)throw"module ["+a+"] returned undefined";e.instance=
b}return d.instance};(function(a,d){k(a,[],function(){return d})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);k("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});k("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});k("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});k("tinymce.plugins.preview.api.Settings",[],function(){return{getPreviewDialogWidth:function(a){return parseInt(a.getParam("plugin_preview_width",
"650"),10)},getPreviewDialogHeight:function(a){return parseInt(a.getParam("plugin_preview_height","500"),10)},getContentStyle:function(a){return a.getParam("content_style","")}}});k("tinymce.plugins.preview.ui.IframeContent",["tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings"],function(a,d){var e=function(b){var c="",g=b.dom.encode,f=d.getContentStyle(b);c+='<base href="'+g(b.documentBaseURI.getURI())+'">';f&&(c+='<style type="text/css">'+f+"</style>");a.each(b.contentCSS,function(l){c+=
'<link type="text/css" rel="stylesheet" href="'+g(b.documentBaseURI.toAbsolute(l))+'">'});f=b.settings.body_id||"tinymce";-1!==f.indexOf("=")&&(f=b.getParam("body_id","","hash"),f=f[b.id]||f);var h=b.settings.body_class||"";-1!==h.indexOf("=")&&(h=b.getParam("body_class","","hash"),h=h[b.id]||"");var n=b.settings.directionality?' dir="'+b.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+c+'</head><body id="'+g(f)+'" class="mce-content-body '+g(h)+'"'+g(n)+">"+b.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);\x3c/script> </body></html>'};
return{getPreviewHtml:e,injectIframeContent:function(b,c,g){b=e(b);g?c.src="data:text/html;charset=utf-8,"+encodeURIComponent(b):(c=c.contentWindow.document,c.open(),c.write(b),c.close())}}});k("tinymce.plugins.preview.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings","tinymce.plugins.preview.ui.IframeContent"],function(a,d,e,b){return{open:function(c){var g=!a.ie,f='<iframe src="javascript:\'\'" frameborder="0"'+(g?' sandbox="allow-scripts"':"")+"></iframe>",
h=e.getPreviewDialogWidth(c),n=e.getPreviewDialogHeight(c);c.windowManager.open({title:"Preview",width:h,height:n,html:f,buttons:{text:"Close",onclick:function(l){l.control.parent().parent().close()}},onPostRender:function(l){l=l.control.getEl("body").firstChild;b.injectIframeContent(c,l,g)}})}}});k("tinymce.plugins.preview.api.Commands",["tinymce.plugins.preview.ui.Dialog"],function(a){return{register:function(d){d.addCommand("mcePreview",function(){a.open(d)})}}});k("tinymce.plugins.preview.ui.Buttons",
[],function(){return{register:function(a){a.addButton("preview",{title:"Preview",cmd:"mcePreview"});a.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}});k("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.plugins.preview.api.Commands","tinymce.plugins.preview.ui.Buttons"],function(a,d,e){a.add("preview",function(b){d.register(b);e.register(b)});return function(){}});p("tinymce.plugins.preview.Plugin")()})();

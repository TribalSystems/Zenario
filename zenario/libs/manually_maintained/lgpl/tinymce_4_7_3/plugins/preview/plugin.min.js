(function(){var k={},m=function(a){var c=k[a];if(void 0===c)throw"module ["+a+"] was undefined";if(void 0===c.instance){for(var e=k[a],b=e.deps,d=e.defn,l=b.length,f=Array(l),h=0;h<l;++h)f[h]=m(b[h]);b=d.apply(null,f);if(void 0===b)throw"module ["+a+"] returned undefined";e.instance=b}return c.instance},g=function(a,c,e){if("string"!==typeof a)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+a;if(void 0===e)throw"no definition function for "+a;k[a]={deps:c,defn:e,instance:void 0}};
(function(a,c){g(a,[],function(){return c})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);g("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});g("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});g("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});g("tinymce.plugins.preview.api.Settings",[],function(){return{getPreviewDialogWidth:function(a){return parseInt(a.getParam("plugin_preview_width",
"650"),10)},getPreviewDialogHeight:function(a){return parseInt(a.getParam("plugin_preview_height","500"),10)},getContentStyle:function(a){return a.getParam("content_style","")}}});g("tinymce.plugins.preview.ui.IframeContent",["tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings"],function(a,c){var e=function(b){var d="",e=b.dom.encode,f=c.getContentStyle(b),d=d+('<base href="'+e(b.documentBaseURI.getURI())+'">');f&&(d+='<style type="text/css">'+f+"</style>");a.each(b.contentCSS,function(a){d+=
'<link type="text/css" rel="stylesheet" href="'+e(b.documentBaseURI.toAbsolute(a))+'">'});f=b.settings.body_id||"tinymce";-1!==f.indexOf("=")&&(f=b.getParam("body_id","","hash"),f=f[b.id]||f);var h=b.settings.body_class||"";-1!==h.indexOf("=")&&(h=b.getParam("body_class","","hash"),h=h[b.id]||"");var g=b.settings.directionality?' dir="'+b.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+d+'</head><body id="'+e(f)+'" class="mce-content-body '+e(h)+'"'+e(g)+">"+b.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);\x3c/script> </body></html>'};
return{getPreviewHtml:e,injectIframeContent:function(a,d,c){a=e(a);c?d.src="data:text/html;charset=utf-8,"+encodeURIComponent(a):(d=d.contentWindow.document,d.open(),d.write(a),d.close())}}});g("tinymce.plugins.preview.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings","tinymce.plugins.preview.ui.IframeContent"],function(a,c,e,b){return{open:function(d){var c=!a.ie,f='<iframe src="javascript:\'\'" frameborder="0"'+(c?' sandbox="allow-scripts"':"")+"></iframe>",
g=e.getPreviewDialogWidth(d),k=e.getPreviewDialogHeight(d);d.windowManager.open({title:"Preview",width:g,height:k,html:f,buttons:{text:"Close",onclick:function(a){a.control.parent().parent().close()}},onPostRender:function(a){a=a.control.getEl("body").firstChild;b.injectIframeContent(d,a,c)}})}}});g("tinymce.plugins.preview.api.Commands",["tinymce.plugins.preview.ui.Dialog"],function(a){return{register:function(c){c.addCommand("mcePreview",function(){a.open(c)})}}});g("tinymce.plugins.preview.ui.Buttons",
[],function(){return{register:function(a){a.addButton("preview",{title:"Preview",cmd:"mcePreview"});a.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}});g("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.plugins.preview.api.Commands","tinymce.plugins.preview.ui.Buttons"],function(a,c,e){a.add("preview",function(a){c.register(a);e.register(a)});return function(){}});m("tinymce.plugins.preview.Plugin")()})();

'use strict';(function(){var X={},B=function(f,g,k){if("string"!==typeof f)throw"module id must be a string";if(void 0===g)throw"no dependencies for "+f;if(void 0===k)throw"no definition function for "+f;X[f]={deps:g,defn:k,instance:void 0}},Y=function(f){var g=X[f];if(void 0===g)throw"module ["+f+"] was undefined";if(void 0===g.instance){for(var k=X[f],e=k.deps,a=k.defn,b=e.length,c=Array(b),d=0;d<b;++d)c[d]=Y(e[d]);e=a.apply(null,c);if(void 0===e)throw"module ["+f+"] returned undefined";k.instance=
e}return g.instance},S=function(f,g){B(f,[],function(){return g})};S("global!Array",Array);S("global!Error",Error);B("ephox.katamari.api.Fun",["global!Array","global!Error"],function(f,g){var k=function(b){return function(){return b}},e=k(!1),a=k(!0);return{noop:function(){},compose:function(b,c){return function(){return b(c.apply(null,arguments))}},constant:k,identity:function(b){return b},tripleEquals:function(b,c){return b===c},curry:function(b){for(var c=new f(arguments.length-1),d=1;d<arguments.length;d++)c[d-
1]=arguments[d];return function(){for(var h=new f(arguments.length),l=0;l<h.length;l++)h[l]=arguments[l];h=c.concat(h);return b.apply(null,h)}},not:function(b){return function(){return!b.apply(null,arguments)}},die:function(b){return function(){throw new g(b);}},apply:function(b){return b()},call:function(b){b()},never:e,always:a}});S("global!Object",Object);B("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(f,g){var k=f.never,e=f.always,a=function(){return b},b=function(){var d=
function(m){return m.isNone()},h=function(m){return m()},l=function(m){return m};d={fold:function(m,p){return m()},is:k,isSome:k,isNone:e,getOr:l,getOrThunk:h,getOrDie:function(m){throw Error(m||"error: getOrDie called on none.");},or:l,orThunk:h,map:a,ap:a,each:function(){},bind:a,flatten:a,exists:k,forall:e,filter:a,equals:d,equals_:d,toArray:function(){return[]},toString:f.constant("none()")};g.freeze&&g.freeze(d);return d}(),c=function(d){var h=function(){return d},l=function(){return p},m=function(q){return q(d)},
p={fold:function(q,t){return t(d)},is:function(q){return d===q},isSome:e,isNone:k,getOr:h,getOrThunk:h,getOrDie:h,or:l,orThunk:l,map:function(q){return c(q(d))},ap:function(q){return q.fold(a,function(t){return c(t(d))})},each:function(q){q(d)},bind:m,flatten:h,exists:m,forall:m,filter:function(q){return q(d)?p:b},equals:function(q){return q.is(d)},equals_:function(q,t){return q.fold(k,function(u){return t(d,u)})},toArray:function(){return[d]},toString:function(){return"some("+d+")"}};return p};return{some:c,
none:a,from:function(d){return null===d||void 0===d?b:c(d)}}});S("global!String",String);B("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(f,g,k,e){var a=function(){var n=g.prototype.indexOf,v=function(r,x){return n.call(r,x)},w=function(r,x){a:{for(var y=0,D=r.length;y<D;++y)if(r[y]===x){r=y;break a}r=-1}return r};return void 0===n?w:v}(),b=function(n,v){return-1<a(n,v)},c=function(n,v){for(var w=n.length,r=new g(w),x=0;x<w;x++)r[x]=v(n[x],
x,n);return r},d=function(n,v){for(var w=0,r=n.length;w<r;w++)v(n[w],w,n)},h=function(n,v){for(var w=n.length-1;0<=w;w--)v(n[w],w,n)},l=function(n,v){for(var w=[],r=0,x=n.length;r<x;r++){var y=n[r];v(y,r,n)&&w.push(y)}return w},m=function(n,v){for(var w=0,r=n.length;w<r;w++)if(v(n[w],w,n))return f.some(w);return f.none()},p=g.prototype.push,q=function(n){for(var v=[],w=0,r=n.length;w<r;++w){if(!g.prototype.isPrototypeOf(n[w]))throw new k("Arr.flatten item "+w+" was not an array, input: "+n);p.apply(v,
n[w])}return v},t=function(n,v){for(var w=0,r=n.length;w<r;++w)if(!0!==v(n[w],w,n))return!1;return!0},u=g.prototype.slice;return{map:c,each:d,eachr:h,partition:function(n,v){for(var w=[],r=[],x=0,y=n.length;x<y;x++){var D=n[x];(v(D,x,n)?w:r).push(D)}return{pass:w,fail:r}},filter:l,groupBy:function(n,v){if(0===n.length)return[];for(var w=v(n[0]),r=[],x=[],y=0,D=n.length;y<D;y++){var C=n[y],F=v(C);F!==w&&(r.push(x),x=[]);w=F;x.push(C)}0!==x.length&&r.push(x);return r},indexOf:function(n,v){n=a(n,v);
return-1===n?f.none():f.some(n)},foldr:function(n,v,w){h(n,function(r){w=v(w,r)});return w},foldl:function(n,v,w){d(n,function(r){w=v(w,r)});return w},find:function(n,v){for(var w=0,r=n.length;w<r;w++){var x=n[w];if(v(x,w,n))return f.some(x)}return f.none()},findIndex:m,flatten:q,bind:function(n,v){n=c(n,v);return q(n)},forall:t,exists:function(n,v){return m(n,v).isSome()},contains:b,equal:function(n,v){return n.length===v.length&&t(n,function(w,r){return w===v[r]})},reverse:function(n){n=u.call(n,
0);n.reverse();return n},chunk:function(n,v){for(var w=[],r=0;r<n.length;r+=v){var x=n.slice(r,r+v);w.push(x)}return w},difference:function(n,v){return l(n,function(w){return!b(v,w)})},mapToObject:function(n,v){for(var w={},r=0,x=n.length;r<x;r++){var y=n[r];w[e(y)]=v(y,r)}return w},pure:function(n){return[n]},sort:function(n,v){n=u.call(n,0);n.sort(v);return n},range:function(n,v){for(var w=[],r=0;r<n;r++)w.push(v(r));return w},head:function(n){return 0===n.length?f.none():f.some(n[0])},last:function(n){return 0===
n.length?f.none():f.some(n[n.length-1])}}});B("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});S("global!document",document);B("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(f,g,k,e){var a=function(b){if(null===b||void 0===b)throw new g("Node cannot be null or undefined");return{dom:f.constant(b)}};return{fromHtml:function(b,c){c=(c||e).createElement("div");c.innerHTML=b;
if(!c.hasChildNodes()||1<c.childNodes.length)throw k.error("HTML does not have a single root node",b),"HTML must have a single root node";return a(c.childNodes[0])},fromTag:function(b,c){b=(c||e).createElement(b);return a(b)},fromText:function(b,c){b=(c||e).createTextNode(b);return a(b)},fromDom:a}});B("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(f){var g=function(k,e){return{left:f.constant(k),top:f.constant(e),translate:function(a,b){return g(k+a,e+b)}}};return g});B("ephox.katamari.api.Global",
[],function(){return"undefined"!==typeof window?window:Function("return this;")()});B("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(f){var g=function(e,a){a=void 0!==a?a:f;for(var b=0;b<e.length&&void 0!==a&&null!==a;++b)a=a[e[b]];return a},k=function(e,a){var b=void 0!==a?a:f;for(a=0;a<e.length;++a){var c=e[a];if(void 0===b[c]||null===b[c])b[c]={};b=b[c]}return b};return{path:g,resolve:function(e,a){e=e.split(".");return g(e,a)},forge:k,namespace:function(e,a){e=e.split(".");
return k(e,a)}}});B("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(f){return{getOrDie:function(g,k){k=f.resolve(g,k);if(void 0===k)throw g+" not available on this browser";return k}}});B("ephox.sand.api.Node",["ephox.sand.util.Global"],function(f){return{documentPositionPreceding:function(g,k){var e=f.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(g.compareDocumentPosition(k)&e)},documentPositionContainedBy:function(g,k){var e=f.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;
return 0!==(g.compareDocumentPosition(k)&e)}}});B("ephox.katamari.api.Thunk",[],function(){return{cached:function(f){var g=!1,k;return function(){g||(g=!0,k=f.apply(null,arguments));return k}}}});S("global!Number",Number);B("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(f,g,k){var e=function(){return a(0,0)},a=function(b,c){return{major:b,minor:c}};return{nu:a,detect:function(b,c){c=k(c).toLowerCase();if(0===b.length)b=e();else{a:{for(var d=0;d<b.length;d++){var h=
b[d];if(h.test(c)){b=h;break a}}b=void 0}b=b?a(g(c.replace(b,"$1")),g(c.replace(b,"$2"))):{major:0,minor:0}}return b},unknown:e}});B("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(f,g){var k=function(a,b){return function(){return b===a}},e=function(a){var b=a.current;return{current:b,version:a.version,isEdge:k("Edge",b),isChrome:k("Chrome",b),isIE:k("IE",b),isOpera:k("Opera",b),isFirefox:k("Firefox",b),isSafari:k("Safari",b)}};return{unknown:function(){return e({current:void 0,
version:g.unknown()})},nu:e,edge:f.constant("Edge"),chrome:f.constant("Chrome"),ie:f.constant("IE"),opera:f.constant("Opera"),firefox:f.constant("Firefox"),safari:f.constant("Safari")}});B("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(f,g){var k=function(a,b){return function(){return b===a}},e=function(a){var b=a.current;return{current:b,version:a.version,isWindows:k("Windows",b),isiOS:k("iOS",b),isAndroid:k("Android",b),isOSX:k("OSX",b),isLinux:k("Linux",
b),isSolaris:k("Solaris",b),isFreeBSD:k("FreeBSD",b)}};return{unknown:function(){return e({current:void 0,version:g.unknown()})},nu:e,windows:f.constant("Windows"),ios:f.constant("iOS"),android:f.constant("Android"),linux:f.constant("Linux"),osx:f.constant("OSX"),solaris:f.constant("Solaris"),freebsd:f.constant("FreeBSD")}});B("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(f){return function(g,k,e){var a=g.isiOS()&&!0===/ipad/i.test(e),b=g.isiOS()&&!a,c=g.isAndroid()&&3===g.version.major,
d=g.isAndroid()&&4===g.version.major;c=a||c||d&&!0===/mobile/i.test(e);var h=(d=g.isiOS()||g.isAndroid())&&!c;k=k.isSafari()&&g.isiOS()&&!1===/safari/i.test(e);return{isiPad:f.constant(a),isiPhone:f.constant(b),isTablet:f.constant(c),isPhone:f.constant(h),isTouch:f.constant(d),isAndroid:g.isAndroid,isiOS:g.isiOS,isWebView:f.constant(k)}}});B("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(f,g,k){var e=function(a,b){var c=k(b).toLowerCase();
return f.find(a,function(d){return d.search(c)})};return{detectBrowser:function(a,b){return e(a,b).map(function(c){var d=g.detect(c.versionRegexes,b);return{current:c.name,version:d}})},detectOs:function(a,b){return e(a,b).map(function(c){var d=g.detect(c.versionRegexes,b);return{current:c.name,version:d}})}}});B("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(f,g){return g+f},addToEnd:function(f,g){return f+g},removeFromStart:function(f,g){return f.substring(g)},removeFromEnd:function(f,
g){return f.substring(0,f.length-g)}}});B("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(f,g){return{first:function(k,e){return k.substr(0,e)},last:function(k,e){return k.substr(k.length-e,k.length)},head:function(k){return""===k?f.none():f.some(k.substr(0,1))},tail:function(k){return""===k?f.none():f.some(k.substring(1))}}});B("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(f,g,k){var e=
function(c,d,h){return""===d?!0:c.length<d.length?!1:c.substr(h,h+d.length)===d},a=function(c,d){return e(c,d,0)},b=function(c,d){return e(c,d,c.length-d.length)};return{supplant:function(c,d){return c.replace(/\${([^{}]*)}/g,function(h,l){l=d[l];var m=typeof l;return"string"===m||"number"===m?l:h})},startsWith:a,removeLeading:function(c,d){return a(c,d)?f.removeFromStart(c,d.length):c},removeTrailing:function(c,d){return b(c,d)?f.removeFromEnd(c,d.length):c},ensureLeading:function(c,d){return a(c,
d)?c:f.addToStart(c,d)},ensureTrailing:function(c,d){return b(c,d)?c:f.addToEnd(c,d)},endsWith:b,contains:function(c,d){return-1!==c.indexOf(d)},trim:function(c){return c.replace(/^\s+|\s+$/g,"")},lTrim:function(c){return c.replace(/^\s+/g,"")},rTrim:function(c){return c.replace(/\s+$/g,"")},capitalize:function(c){return g.head(c).bind(function(d){return g.tail(c).map(function(h){return d.toUpperCase()+h})}).getOr(c)}}});B("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],
function(f,g){var k=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,e=function(a){return function(b){return g.contains(b,a)}};k=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return g.contains(a,"edge/")&&g.contains(a,"chrome")&&g.contains(a,"safari")&&g.contains(a,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,k],search:function(a){return g.contains(a,"chrome")&&!g.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,
/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return g.contains(a,"msie")||g.contains(a,"trident")}},{name:"Opera",versionRegexes:[k,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[k,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(g.contains(a,"safari")||g.contains(a,"mobile/"))&&g.contains(a,"applewebkit")}}];e=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},
{name:"iOS",search:function(a){return g.contains(a,"iphone")||g.contains(a,"ipad")},versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("os x"),versionRegexes:[/.*?os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),
versionRegexes:[]}];return{browsers:f.constant(k),oses:f.constant(e)}});B("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(f,g,k,e,a){return{detect:function(b){var c=a.browsers(),d=a.oses();c=e.detectBrowser(c,b).fold(f.unknown,f.nu);d=e.detectOs(d,b).fold(g.unknown,g.nu);b=k(d,c,b);return{browser:c,os:d,deviceType:b}}}});S("global!navigator",navigator);
B("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(f,g,k){return{detect:f.cached(function(){return g.detect(k.userAgent)})}});B("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});B("ephox.sugar.api.search.Selectors","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.node.NodeTypes global!Error global!document".split(" "),
function(f,g,k,e,a,b){var c=e.ELEMENT,d=e.DOCUMENT;return{all:function(h,l){l=void 0===l?b:l.dom();return l.nodeType!==c&&l.nodeType!==d||0===l.childElementCount?[]:f.map(l.querySelectorAll(h),k.fromDom)},is:function(h,l){h=h.dom();if(h.nodeType!==c)return!1;if(void 0!==h.matches)return h.matches(l);if(void 0!==h.msMatchesSelector)return h.msMatchesSelector(l);if(void 0!==h.webkitMatchesSelector)return h.webkitMatchesSelector(l);if(void 0!==h.mozMatchesSelector)return h.mozMatchesSelector(l);throw new a("Browser lacks native selectors");
},one:function(h,l){l=void 0===l?b:l.dom();return l.nodeType!==c&&l.nodeType!==d||0===l.childElementCount?g.none():g.from(l.querySelector(h)).map(k.fromDom)}}});B("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(f,g,k,e,a){var b=function(h,l){return h.dom()===l.dom()},c=function(h,l){h=h.dom();l=l.dom();return h===l?!1:h.contains(l)},d=function(h,l){return k.documentPositionContainedBy(h.dom(),
l.dom())};e=e.detect().browser.isIE()?d:c;return{eq:b,isEqualNode:function(h,l){return h.dom().isEqualNode(l.dom())},member:function(h,l){return f.exists(l,g.curry(b,h))},contains:e,is:a.is}});B("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(f){var g=function(c){return c.dom().nodeName.toLowerCase()},k=function(c){return c.dom().nodeType},e=function(c){return function(d){return k(d)===c}},a=e(f.ELEMENT),b=e(f.TEXT);e=e(f.DOCUMENT);return{name:g,type:k,value:function(c){return c.dom().nodeValue},
isElement:a,isText:b,isDocument:e,isComment:function(c){return k(c)===f.COMMENT||"#comment"===g(c)}}});B("ephox.katamari.api.Type",["global!Array","global!String"],function(f,g){var k=function(e){return function(a){if(null===a)a="null";else{var b=typeof a;a="object"===b&&f.prototype.isPrototypeOf(a)?"array":"object"===b&&g.prototype.isPrototypeOf(a)?"string":b}return a===e}};return{isString:k("string"),isObject:k("object"),isArray:k("array"),isNull:k("null"),isBoolean:k("boolean"),isUndefined:k("undefined"),
isFunction:k("function"),isNumber:k("number")}});B("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(f,g,k,e){var a=function(b){b=b.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return g.fromDom(b)};return{body:f.cached(function(){return a(g.fromDom(e))}),getBody:a,inBody:function(b){b=k.isText(b)?b.dom().parentNode:b.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)}}});
B("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(f,g){return function(k,e,a,b,c){return k(a,b)?g.some(a):f.isFunction(c)&&c(a)?g.none():e(a,b,c)}});B("ephox.sugar.api.search.PredicateFind","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Body ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.impl.ClosestOrAncestor".split(" "),function(f,g,k,e,a,b,c,d){var h=
function(p,q,t){p=p.dom();for(t=f.isFunction(t)?t:k.constant(!1);p.parentNode;){p=p.parentNode;var u=c.fromDom(p);if(q(u))return e.some(u);if(t(u))break}return e.none()},l=function(p,q){return g.find(p.dom().childNodes,k.compose(q,c.fromDom)).map(c.fromDom)},m=function(p,q){var t=function(u){for(var n=0;n<u.childNodes.length;n++){if(q(c.fromDom(u.childNodes[n])))return e.some(c.fromDom(u.childNodes[n]));var v=t(u.childNodes[n]);if(v.isSome())return v}return e.none()};return t(p.dom())};return{first:function(p){return m(a.body(),
p)},ancestor:h,closest:function(p,q,t){return d(function(u){return q(u)},h,p,q,t)},sibling:function(p,q){var t=p.dom();return t.parentNode?l(c.fromDom(t.parentNode),function(u){return!b.eq(p,u)&&q(u)}):e.none()},child:l,descendant:m}});B("ephox.sugar.api.dom.Dom","ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind global!document".split(" "),function(f,g,k,e,a,b){return{attached:function(c,d){d=d||k.fromDom(b.documentElement);
return a.ancestor(c,f.curry(g.eq,d)).isSome()},windowOf:function(c){var d=c.dom();return d===d.window?c:e.isDocument(c)?d.defaultView||d.parentWindow:null}}});B("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(f,g,k){var e=function(b,c){return void 0!==b?b:void 0!==c?c:0},a=function(b){var c=b.dom(),d=c.ownerDocument,h=d.body;d=k.fromDom(d.documentElement);if(h===c)return f(h.offsetLeft,h.offsetTop);if(!g.attached(b,
d))return f(0,0);b=c.getBoundingClientRect();return f(b.left,b.top)};return{absolute:function(b){var c=b.dom().ownerDocument,d=c.body,h=g.windowOf(k.fromDom(c)),l=c.documentElement;c=e(h.pageYOffset,l.scrollTop);h=e(h.pageXOffset,l.scrollLeft);var m=e(l.clientTop,d.clientTop);d=e(l.clientLeft,d.clientLeft);return a(b).translate(h-d,c-m)},relative:function(b){b=b.dom();return f(b.offsetLeft,b.offsetTop)},viewport:a}});B("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option",
"ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(f,g,k,e,a){return{only:function(b){var c=g.from(b.dom().documentElement).map(k.fromDom).getOr(b);return{parent:f.constant(c),view:f.constant(b),origin:f.constant(a(0,0))}},detached:function(b,c){var d=f.curry(e.absolute,c);return{parent:f.constant(c),view:f.constant(b),origin:d}},body:function(b,c){return{parent:f.constant(c),view:f.constant(b),origin:f.constant(a(0,0))}}}});B("ephox.katamari.data.Immutable",
["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(f,g,k,e){return function(){var a=arguments;return function(){for(var b=new k(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(a.length!==b.length)throw new e('Wrong number of arguments to struct. Expected "['+a.length+']", got '+b.length+" arguments");var d={};f.each(a,function(h,l){d[h]=g.constant(b[l])});return d}}});B("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(f,
g){var k=function(){var d=g.keys,h=function(l){var m=[],p;for(p in l)l.hasOwnProperty(p)&&m.push(p);return m};return void 0===d?h:d}(),e=function(d,h){for(var l=k(d),m=0,p=l.length;m<p;m++){var q=l[m];h(d[q],q,d)}},a=function(d,h){var l={};e(d,function(m,p){m=h(m,p,d);l[m.k]=m.v});return l},b=function(d,h){var l=[];e(d,function(m,p){l.push(h(m,p))});return l},c=function(d){return b(d,function(h){return h})};return{bifilter:function(d,h){var l={},m={};e(d,function(p,q){(h(p,q)?l:m)[q]=p});return{t:l,
f:m}},each:e,map:function(d,h){return a(d,function(l,m,p){return{k:m,v:h(l,m,p)}})},mapToArray:b,tupleMap:a,find:function(d,h){for(var l=k(d),m=0,p=l.length;m<p;m++){var q=l[m],t=d[q];if(h(t,q,d))return f.some(t)}return f.none()},keys:k,values:c,size:function(d){return c(d).length}}});B("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(f,g,k){var e=function(a){return a.slice(0).sort()};return{sort:e,reqMessage:function(a,b){throw new k("All required keys ("+
e(a).join(", ")+") were not specified. Specified keys were: "+e(b).join(", ")+".");},unsuppMessage:function(a){throw new k("Unsupported keys for object: "+e(a).join(", "));},validateStrArr:function(a,b){if(!g.isArray(b))throw new k("The "+a+" fields must be an array. Was: "+b+".");f.each(b,function(c){if(!g.isString(c))throw new k("The value "+c+" in the "+a+" fields was not a string.");})},invalidTypeMessage:function(a,b){throw new k("All values need to be of type: "+b+". Keys ("+e(a).join(", ")+
") were not.");},checkDupes:function(a){var b=e(a);f.find(b,function(c,d){return d<b.length-1&&c===b[d+1]}).each(function(c){throw new k("The field: "+c+" occurs more than once in the combined fields: ["+b.join(", ")+"].");})}}});B("ephox.katamari.data.MixedBag","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.util.BagUtils global!Error global!Object".split(" "),function(f,g,k,e,a,b,c){return function(d,h){var l=d.concat(h);if(0===l.length)throw new b("You must specify at least one required or optional field.");
a.validateStrArr("required",d);a.validateStrArr("optional",h);a.checkDupes(l);return function(m){var p=k.keys(m);f.forall(d,function(u){return f.contains(p,u)})||a.reqMessage(d,p);var q=f.filter(p,function(u){return!f.contains(l,u)});0<q.length&&a.unsuppMessage(q);var t={};f.each(d,function(u){t[u]=g.constant(m[u])});f.each(h,function(u){t[u]=g.constant(c.prototype.hasOwnProperty.call(m,u)?e.some(m[u]):e.none())});return t}}});B("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],
function(f,g){return{immutable:f,immutableBag:g}});B("ephox.sugar.api.properties.Attr","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.node.Node global!Error global!console".split(" "),function(f,g,k,e,a,b){var c=function(m,p,q){if(f.isString(q)||f.isBoolean(q)||f.isNumber(q))m.setAttribute(p,q+"");else throw b.error("Invalid call to Attr.set. Key ",p,":: Value ",q,":: Element ",m),new a("Attribute value was not simple");},d=function(m,p,q){c(m.dom(),p,q)},h=
function(m,p){m=m.dom().getAttribute(p);return null===m?void 0:m},l=function(m,p){return(m=m.dom())&&m.hasAttribute?m.hasAttribute(p):!1};return{clone:function(m){return g.foldl(m.dom().attributes,function(p,q){p[q.name]=q.value;return p},{})},set:d,setAll:function(m,p){var q=m.dom();k.each(p,function(t,u){c(q,u,t)})},get:h,has:l,remove:function(m,p){m.dom().removeAttribute(p)},hasNone:function(m){m=m.dom().attributes;return void 0===m||null===m||0===m.length},transfer:function(m,p,q){e.isElement(m)&&
e.isElement(p)&&g.each(q,function(t){l(m,t)&&!l(p,t)&&d(p,t,h(m,t))})}}});B("ephox.sugar.impl.Style",[],function(){return{isSupported:function(f){return void 0!==f.style}}});S("global!window",window);B("ephox.sugar.api.properties.Css","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.properties.Attr ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.impl.Style ephox.katamari.api.Strings global!Error global!console global!window".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q){var t=function(r,x,y){if(!f.isString(y))throw p.error("Invalid call to CSS.set. Property ",x,":: Value ",y,":: Element ",r),new m("CSS value must be a string: "+y);h.isSupported(r)&&r.style.setProperty(x,y)},u=function(r,x,y){r=r.dom();t(r,x,y)},n=function(r,x){return h.isSupported(r)?r.style.getPropertyValue(x):""},v=function(r,x){r=r.dom();x=n(r,x);return e.from(x).filter(function(y){return 0<y.length})},w=function(r,x,y){v(r,y).each(function(D){v(x,y).isNone()&&
u(x,y,D)})};return{copy:function(r,x){r=r.dom();x=x.dom();h.isSupported(r)&&h.isSupported(x)&&(x.style.cssText=r.style.cssText)},set:u,preserve:function(r,x){var y=a.get(r,"style");x=x(r);(void 0===y?a.remove:a.set)(r,"style",y);return x},setAll:function(r,x){var y=r.dom();k.each(x,function(D,C){t(y,C,D)})},setOptions:function(r,x){var y=r.dom();k.each(x,function(D,C){D.fold(function(){h.isSupported(y)&&y.style.removeProperty(C)},function(F){t(y,C,F)})})},remove:function(r,x){var y=r.dom();h.isSupported(y)&&
y.style.removeProperty(x);a.has(r,"style")&&""===l.trim(a.get(r,"style"))&&a.remove(r,"style")},get:function(r,x){var y=r.dom(),D=q.getComputedStyle(y).getPropertyValue(x);r=""!==D||b.inBody(r)?D:n(y,x);return null===r?void 0:r},getRaw:v,getAllRaw:function(r){var x={};r=r.dom();if(h.isSupported(r))for(var y=0;y<r.style.length;y++){var D=r.style.item(y);x[D]=r.style[D]}return x},isValidValue:function(r,x,y){r=c.fromTag(r);u(r,x,y);return v(r,x).isSome()},reflow:function(r){return r.dom().offsetWidth},
transfer:function(r,x,y){d.isElement(r)&&d.isElement(x)&&g.each(y,function(D){w(r,x,D)})}}});B("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(f,g,k,e){return function(a,b){var c=function(h){var l=b(h);return 0>=l||null===l?(h=k.get(h,a),parseFloat(h)||0):l},d=function(h,l){return g.foldl(l,function(m,p){p=k.get(h,p);p=void 0===p?0:parseInt(p,10);return isNaN(p)?m:m+p},0)};return{set:function(h,l){if(!f.isNumber(l)&&
!l.match(/^[0-9]+$/))throw a+".set accepts only positive integer values. Value was "+l;h=h.dom();e.isSupported(h)&&(h.style[a]=l+"px")},get:c,getOuter:c,aggregate:d,max:function(h,l,m){h=d(h,m);return l>h?l-h:0}}}});B("ephox.sugar.api.view.Height",["ephox.sugar.api.node.Body","ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(f,g,k){var e=k("height",function(a){return f.inBody(a)?a.dom().getBoundingClientRect().height:a.dom().offsetHeight});return{set:function(a,b){e.set(a,b)},
get:function(a){return e.get(a)},getOuter:function(a){return e.getOuter(a)},setMax:function(a,b){b=e.max(a,b,"margin-top border-top-width padding-top padding-bottom border-bottom-width margin-bottom".split(" "));g.set(a,"max-height",b+"px")}}});B("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(f,g){var k=g("width",function(e){return e.dom().offsetWidth});return{set:function(e,a){k.set(e,a)},get:function(e){return k.get(e)},getOuter:function(e){return k.getOuter(e)},
setMax:function(e,a){a=k.max(e,a,"margin-left border-left-width padding-left padding-right border-right-width margin-right".split(" "));f.set(e,"max-width",a+"px")}}});B("ephox.snooker.resize.BarPositions","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Struct ephox.sugar.api.view.Height ephox.sugar.api.view.Location ephox.sugar.api.view.Width".split(" "),function(f,g,k,e,a,b){var c=k.immutable("row","y"),d=k.immutable("col","x"),h=function(n){return a.absolute(n).left()+b.getOuter(n)},
l=function(n){return a.absolute(n).left()},m=function(n,v){return d(n,l(v))},p=function(n,v){return d(n,h(v))},q=function(n){return a.absolute(n).top()},t=function(n,v,w){if(0===w.length)return[];var r=f.map(w.slice(1),function(y,D){return y.map(function(C){return n(D,C)})}),x=w[w.length-1].map(function(y){return v(w.length-1,y)});return r.concat([x])};k={delta:g.identity,positions:g.curry(t,function(n,v){return c(n,q(v))},function(n,v){return c(n,q(v)+e.getOuter(v))}),edge:q};var u={delta:g.identity,
edge:l,positions:g.curry(t,m,p)};g={delta:function(n,v){return-n},edge:h,positions:g.curry(t,p,m)};return{height:k,rtl:g,ltr:u}});B("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(f){return{ltr:f.ltr,rtl:f.rtl}});B("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(f){return function(g){var k=function(e){return g(e).isRtl()?f.rtl:f.ltr};return{delta:function(e,a){return k(a).delta(e,a)},edge:function(e){return k(e).edge(e)},positions:function(e,
a){return k(a).positions(e,a)}}}});B("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(f,g){return function(k){var e=g.immutable.apply(null,k),a=[];return{bind:function(b){if(void 0===b)throw"Event bind error: undefined handler";a.push(b)},unbind:function(b){a=f.filter(a,function(c){return c!==b})},trigger:function(){var b=e.apply(null,arguments);f.each(a,function(c){c(b)})}}}});B("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(f){return{create:function(g){var k=
f.map(g,function(e){return{bind:e.bind,unbind:e.unbind}});g=f.map(g,function(e){return e.trigger});return{registry:k,trigger:g}}}});B("ephox.snooker.calc.ColumnContext",[],function(){return{none:function(){return{fold:function(f,g,k,e,a){return f()}}},only:function(f){return{fold:function(g,k,e,a,b){return k(f)}}},left:function(f,g){return{fold:function(k,e,a,b,c){return a(f,g)}}},middle:function(f,g,k){return{fold:function(e,a,b,c,d){return c(f,g,k)}}},right:function(f,g){return{fold:function(k,
e,a,b,c){return c(f,g)}}}}});S("global!Math",Math);B("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(f,g,k,e){var a=function(b,c){return 0===b.length?k.none():1===b.length?k.only(0):0===c?k.left(0,1):c===b.length-1?k.right(c-1,c):0<c&&c<b.length-1?k.middle(c-1,c,c+1):k.none()};return{determine:function(b,c,d,h){var l=b.slice(0);b=a(b,c);var m=function(q){return f.map(q,g.constant(0))};c=g.constant(m(l));var p=
function(q,t){if(0<=d){var u=e.max(h.minCellWidth(),l[t]-d);return m(l.slice(0,q)).concat([d,u-l[t]]).concat(m(l.slice(t+1)))}u=e.max(h.minCellWidth(),l[q]+d);var n=l[q]-u;return m(l.slice(0,q)).concat([u-l[q],n]).concat(m(l.slice(t+1)))};return b.fold(c,function(q){return h.singleColumnWidth(l[q],d)},p,function(q,t,u){return p(t,u)},function(q,t){if(0<=d)return m(l.slice(0,t)).concat([d]);q=e.max(h.minCellWidth(),l[t]+d);return m(l.slice(0,t)).concat([q-l[t]])})}}});B("ephox.snooker.api.Structs",
["ephox.katamari.api.Struct"],function(f){var g=f.immutable("width","height"),k=f.immutable("rows","columns"),e=f.immutable("row","column"),a=f.immutable("x","y"),b=f.immutable("element","rowspan","colspan"),c=f.immutable("element","rowspan","colspan","isNew"),d=f.immutable("element","rowspan","colspan","row","column"),h=f.immutable("element","cells","section"),l=f.immutable("element","isNew"),m=f.immutable("element","cells","section","isNew"),p=f.immutable("cells","section"),q=f.immutable("details",
"section");f=f.immutable("startRow","startCol","finishRow","finishCol");return{dimensions:g,grid:k,address:e,coords:a,extended:d,detail:b,detailnew:c,rowdata:h,elementnew:l,rowdatanew:m,rowcells:p,rowdetails:q,bounds:f}});B("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(f,g){var k=[],e=function(a){k.push(a);return g(a)};f=g(f);do f=f.bind(e);while(f.isSome());return k}}});B("ephox.sugar.api.search.Traverse","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.alien.Recurse ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element".split(" "),
function(f,g,k,e,a,b,c,d){var h=function(n){return d.fromDom(n.dom().ownerDocument)},l=function(n){n=n.dom();return e.from(n.parentNode).map(d.fromDom)},m=function(n){n=n.dom();return e.from(n.previousSibling).map(d.fromDom)},p=function(n){n=n.dom();return e.from(n.nextSibling).map(d.fromDom)},q=function(n){n=n.dom();return g.map(n.childNodes,d.fromDom)},t=function(n,v){n=n.dom().childNodes;return e.from(n[v]).map(d.fromDom)},u=a.immutable("element","offset");return{owner:h,defaultView:function(n){n=
n.dom().ownerDocument.defaultView;return d.fromDom(n)},documentElement:function(n){n=h(n);return d.fromDom(n.dom().documentElement)},parent:l,findIndex:function(n){return l(n).bind(function(v){v=q(v);return g.findIndex(v,function(w){return c.eq(n,w)})})},parents:function(n,v){v=f.isFunction(v)?v:k.constant(!1);var w=n.dom();for(n=[];null!==w.parentNode&&void 0!==w.parentNode;){w=w.parentNode;var r=d.fromDom(w);n.push(r);if(!0===v(r))break}return n},siblings:function(n){return l(n).map(q).map(function(v){return g.filter(v,
function(w){return!c.eq(n,w)})}).getOr([])},prevSibling:m,offsetParent:function(n){n=n.dom();return e.from(n.offsetParent).map(d.fromDom)},prevSiblings:function(n){return g.reverse(b.toArray(n,m))},nextSibling:p,nextSiblings:function(n){return b.toArray(n,p)},children:q,child:t,firstChild:function(n){return t(n,0)},lastChild:function(n){return t(n,n.dom().childNodes.length-1)},childNodesCount:function(n,v){return n.dom().childNodes.length},leaf:function(n,v){var w=q(n);return 0<w.length&&v<w.length?
u(w[v],0):u(n,v)}}});B("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(f,g,k,e){var a=function(b,c,d){return f.bind(e.children(b),function(h){return k.is(h,c)?d(h)?[h]:[]:a(h,c,d)})};return{firstLayer:function(b,c){return a(b,c,g.constant(!0))},filterFirstLayer:a}});B("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],
function(f,g,k){var e=function(a,b){var c=[];f.each(k.children(a),function(d){b(d)&&(c=c.concat([d]));c=c.concat(e(d,b))});return c};return{all:function(a){return e(g.body(),a)},ancestors:function(a,b,c){return f.filter(k.parents(a,c),b)},siblings:function(a,b){return f.filter(k.siblings(a),b)},children:function(a,b){return f.filter(k.children(a),b)},descendants:e}});B("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(f,
g){return{all:function(k){return g.all(k)},ancestors:function(k,e,a){return f.ancestors(k,function(b){return g.is(b,e)},a)},siblings:function(k,e){return f.siblings(k,function(a){return g.is(a,e)})},children:function(k,e){return f.children(k,function(a){return g.is(a,e)})},descendants:function(k,e){return g.all(e,k)}}});B("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(f,g,k){var e=function(a,
b,c){return f.ancestor(a,function(d){return g.is(d,b)},c)};return{first:function(a){return g.one(a)},ancestor:e,sibling:function(a,b){return f.sibling(a,function(c){return g.is(c,b)})},child:function(a,b){return f.child(a,function(c){return g.is(c,b)})},descendant:function(a,b){return g.one(b,a)},closest:function(a,b,c){return k(g.is,e,a,b,c)}}});S("global!parseInt",parseInt);B("ephox.snooker.api.TableLookup","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.Structs ephox.snooker.util.LayerSelector ephox.sugar.api.properties.Attr ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Selectors ephox.sugar.api.search.Traverse global!parseInt".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p){var q=function(v,w,r){var x=void 0!==r?r:g.constant(!1);return x(w)?k.none():f.contains(v,c.name(w))?k.some(w):h.ancestor(w,v.join(","),function(y){return l.is(y,"table")||x(y)})},t=function(v,w){return m.parent(w).map(function(r){return d.children(r,v)})},u=g.curry(t,"th,td");t=g.curry(t,"tr");var n=function(v,w){return p(b.get(v,w),10)};return{cell:function(v,w){return q(["td","th"],v,w)},firstCell:function(v){return h.descendant(v,"th,td")},cells:function(v){return a.firstLayer(v,
"th,td")},neighbourCells:u,table:function(v,w){return h.closest(v,"table",w)},row:function(v,w){return q(["tr"],v,w)},rows:function(v){return a.firstLayer(v,"tr")},notCell:function(v,w){return q(["caption","tr","tbody","tfoot","thead"],v,w)},neighbourRows:t,attr:n,grid:function(v,w,r){w=n(v,w);v=n(v,r);return e.grid(w,v)}}});B("ephox.snooker.model.DetailsList","ephox.katamari.api.Arr ephox.snooker.api.Structs ephox.snooker.api.TableLookup ephox.sugar.api.properties.Attr ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse".split(" "),
function(f,g,k,e,a,b){return{fromTable:function(c){c=k.rows(c);return f.map(c,function(d){var h=b.parent(d).bind(function(m){m=a.name(m);return"tfoot"===m||"thead"===m||"tbody"===m?m:"tbody"}),l=f.map(k.cells(d),function(m){var p=e.has(m,"rowspan")?parseInt(e.get(m,"rowspan"),10):1,q=e.has(m,"colspan")?parseInt(e.get(m,"colspan"),10):1;return g.detail(m,p,q)});return g.rowdata(d,l,h)})},fromPastedRows:function(c,d){return f.map(c,function(h){var l=f.map(k.cells(h),function(m){var p=e.has(m,"rowspan")?
parseInt(e.get(m,"rowspan"),10):1,q=e.has(m,"colspan")?parseInt(e.get(m,"colspan"),10):1;return g.detail(m,p,q)});return g.rowdata(h,l,d.section())})}}});B("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(f,g,k,e,a){var b=function(c,d){c=f.bind(c.all(),function(h){return h.cells()});return f.filter(c,d)};return{generate:function(c){var d={},h=[],l=0,m=0;f.each(c,function(p,q){var t=[];
f.each(p.cells(),function(u,n){for(n=0;void 0!==d[q+","+n];)n++;for(var v=e.extended(u.element(),u.rowspan(),u.colspan(),q,n),w=0;w<u.colspan();w++)for(var r=0;r<u.rowspan();r++){var x=q+r,y=n+w;d[x+","+y]=v;l=a.max(l,x+1);m=a.max(m,y+1)}t.push(v)});h.push(e.rowdata(p.element(),t,p.section()))});c=e.grid(l,m);return{grid:g.constant(c),access:g.constant(d),all:g.constant(h)}},getAt:function(c,d,h){c=c.access()[d+","+h];return void 0!==c?k.some(c):k.none()},findItem:function(c,d,h){c=b(c,function(l){return h(d,
l.element())});return 0<c.length?k.some(c[0]):k.none()},filterItems:b,justCells:function(c){c=f.map(c.all(),function(d){return d.cells()});return f.flatten(c)}}});B("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(f){return{cat:function(g){for(var k=[],e=function(b){k.push(b)},a=0;a<g.length;a++)g[a].each(e);return k},findMap:function(g,k){for(var e=0;e<g.length;e++){var a=k(g[e],e);if(a.isSome())return a}return f.none()},liftN:function(g,k){for(var e=[],a=0;a<g.length;a++){var b=
g[a];if(b.isSome())e.push(b.getOrDie());else return f.none()}return f.some(k.apply(null,e))}}});B("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(f,g,k,e){return{repeat:function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},range:function(a,b){for(var c=[];a<b;a++)c.push(a);return c},unique:function(a,b){var c=[];f.each(a,function(d,h){h<a.length-1&&!b(d,a[h+1])?c.push(d):h===a.length-1&&c.push(d)});return c},
deduce:function(a,b){if(0>b||b>=a.length-1)return g.none();var c=a[b].fold(function(){var h=f.reverse(a.slice(0,b));return k.findMap(h,function(l,m){return l.map(function(p){return{value:p,delta:m+1}})})},function(h){return g.some({value:h,delta:0})}),d=a[b+1].fold(function(){var h=a.slice(b+1);return k.findMap(h,function(l,m){return l.map(function(p){return{value:p,delta:m+1}})})},function(h){return g.some({value:h,delta:1})});return c.bind(function(h){return d.map(function(l){var m=l.delta+h.delta;
return e.abs(l.value-h.value)/m})})}}});B("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(f,g,k,e,a){var b=function(c,d,h){var l=c();return f.find(l,d).orThunk(function(){return k.from(l[0]).orThunk(h)}).map(function(m){return m.element()})};return{columns:function(c){var d=c.grid(),h=a.range(0,d.columns()),l=a.range(0,d.rows());return f.map(h,function(m){return b(function(){return f.bind(l,
function(p){return e.getAt(c,p,m).filter(function(q){return q.column()===m}).fold(g.constant([]),function(q){return[q]})})},function(p){return 1===p.colspan()},function(){return e.getAt(c,0,m)})})},rows:function(c){var d=c.grid(),h=a.range(0,d.rows()),l=a.range(0,d.columns());return f.map(h,function(m){return b(function(){return f.bind(l,function(p){return e.getAt(c,m,p).filter(function(q){return q.row()===m}).fold(g.constant([]),function(q){return[q]})})},function(p){return 1===p.rowspan()},function(){return e.getAt(c,
m,0)})})}}});B("ephox.snooker.resize.Sizes","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Strings ephox.snooker.api.TableLookup ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.view.Height ephox.sugar.api.view.Width global!Math global!parseInt".split(" "),function(f,g,k,e,a,b,c,d,h,l,m){var p=/(\d+(\.\d+)?)(\w|%)*/,q=/(\d+(\.\d+)?)%/,t=/(\d+(\.\d+)?)px|em/,u=function(r,x){c.set(r,"height",x+"px")},n=function(r,x){return c.getRaw(r,
x).getOrThunk(function(){return c.get(r,x)})},v=function(r,x,y,D){var C=e.table(r).map(function(F){F=y(F);return l.floor(x/100*F)}).getOr(x);D(r,C);return C},w=function(r){return c.getRaw(r,"width").fold(function(){return g.from(b.get(r,"width"))},function(x){return g.some(x)})};return{percentageBasedSizeRegex:f.constant(q),pixelBasedSizeRegex:f.constant(t),setPixelWidth:function(r,x){c.set(r,"width",x+"px")},setPercentageWidth:function(r,x){c.set(r,"width",x+"%")},setHeight:u,getPixelWidth:function(r,
x){return w(r).fold(function(){var y=h.get(r);return m(y,10)},function(y){t.test(y)?(y=t.exec(y),y=m(y[1],10)):q.test(y)?(y=q.exec(y),y=parseFloat(y[1],10)/100*x.pixelWidth()):(y=h.get(r),y=m(y,10));return y})},getPercentageWidth:function(r,x){return w(r).fold(function(){var y=h.get(r);return m(y,10)/x.pixelWidth()*100},function(y){q.test(y)?(y=q.exec(y),y=parseFloat(y[1],10)):(y=h.get(r),y=m(y,10)/x.pixelWidth()*100);return y})},getGenericWidth:function(r){return w(r).bind(function(x){return p.test(x)?
(x=p.exec(x),g.some({width:f.constant(x[1]),unit:f.constant(x[3])})):g.none()})},setGenericWidth:function(r,x,y){c.set(r,"width",x+y)},getHeight:function(r){var x;if(x=n(r,"height")){var y=d.get,D=m(x,10);x=k.endsWith(x,"%")&&"table"!==a.name(r)?v(r,D,y,u):D}else x=d.get(r);r=b.has(r,"rowspan")?m(b.get(r,"rowspan"),10):1;return x/r},getRawWidth:w}});B("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(f,
g,k,e){var a=function(b,c){return g.has(b,c)&&1<e(g.get(b,c),10)};return{hasColspan:function(b){return a(b,"colspan")},hasRowspan:function(b){return a(b,"rowspan")},minWidth:f.constant(10),minHeight:f.constant(10),getInt:function(b,c){return e(k.get(b,c),10)}}});B("ephox.snooker.resize.ColumnSizes","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.lookup.Blocks ephox.snooker.resize.Sizes ephox.snooker.util.CellUtils ephox.snooker.util.Util ephox.sugar.api.properties.Css".split(" "),function(f,
g,k,e,a,b,c){var d=function(t,u,n){return c.getRaw(t,u).fold(function(){return n(t)+"px"},function(v){return v})},h=function(t){return d(t,"width",e.getPixelWidth)},l=function(t){return d(t,"height",e.getHeight)},m=function(t,u,n,v,w){t=k.columns(t);var r=f.map(t,function(x){return x.map(u.edge)});return f.map(t,function(x,y){return x.filter(g.not(a.hasColspan)).fold(function(){var D=b.deduce(r,y);return v(D)},function(D){return n(D,w)})})},p=function(t){return t.map(function(u){return u+"px"}).getOr("")},
q=function(t,u,n,v){t=k.rows(t);var w=f.map(t,function(r){return r.map(u.edge)});return f.map(t,function(r,x){return r.filter(g.not(a.hasRowspan)).fold(function(){var y=b.deduce(w,x);return v(y)},function(y){return n(y)})})};return{getRawWidths:function(t,u){return m(t,u,h,p)},getPixelWidths:function(t,u,n){return m(t,u,e.getPixelWidth,function(v){return v.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(t,u,n){return m(t,u,e.getPercentageWidth,function(v){return v.fold(function(){return n.minCellWidth()},
function(w){return w/n.pixelWidth()*100})},n)},getPixelHeights:function(t,u){return q(t,u,e.getHeight,function(n){return n.getOrThunk(a.minHeight)})},getRawHeights:function(t,u){return q(t,u,l,p)}}});B("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(f,g,k,e){var a=function(b,c,d){for(var h=0;b<c;b++)h+=void 0!==d[b]?d[b]:0;return h};return{recalculateWidth:function(b,c){b=k.justCells(b);return f.map(b,
function(d){var h=a(d.column(),d.column()+d.colspan(),c);return{element:d.element,width:g.constant(h),colspan:d.colspan}})},recalculateHeight:function(b,c){b=k.justCells(b);return f.map(b,function(d){var h=a(d.row(),d.row()+d.rowspan(),c);return{element:d.element,height:g.constant(h),rowspan:d.rowspan}})},matchRowHeight:function(b,c){return f.map(b.all(),function(d,h){return{element:d.element,height:g.constant(c[h])}})}}});B("ephox.snooker.resize.TableSize","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.resize.ColumnSizes ephox.snooker.resize.Sizes ephox.snooker.util.CellUtils ephox.sugar.api.view.Width global!Math".split(" "),
function(f,g,k,e,a,b,c){var d=function(l,m){var p=parseFloat(l,10),q=b.get(m);return{width:g.constant(p),pixelWidth:g.constant(q),getWidths:k.getPercentageWidths,getCellDelta:function(t){return t/q*100},singleColumnWidth:function(t,u){return[100-t]},minCellWidth:function(){return a.minWidth()/q*100},setElementWidth:e.setPercentageWidth,setTableWidth:function(t,u,n){e.setPercentageWidth(t,p+n)}}},h=function(l){l=parseInt(l,10);var m=g.identity;return{width:g.constant(l),pixelWidth:g.constant(l),getWidths:k.getPixelWidths,
getCellDelta:m,singleColumnWidth:function(p,q){return[c.max(a.minWidth(),p+q)-p]},minCellWidth:a.minWidth,setElementWidth:e.setPixelWidth,setTableWidth:function(p,q,t){q=f.foldr(q,function(u,n){return u+n},0);e.setPixelWidth(p,q)}}};return{getTableSize:function(l){return e.getRawWidth(l).fold(function(){var m=b.get(l);return h(m)},function(m){e.percentageBasedSizeRegex().test(m)?(m=e.percentageBasedSizeRegex().exec(m),m=d(m[1],l)):e.pixelBasedSizeRegex().test(m)?(m=e.pixelBasedSizeRegex().exec(m),
m=h(m[1])):(m=b.get(l),m=h(m));return m})}}});B("ephox.snooker.resize.Adjustments","ephox.katamari.api.Arr ephox.snooker.calc.Deltas ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.resize.ColumnSizes ephox.snooker.resize.Recalculations ephox.snooker.resize.Sizes ephox.snooker.resize.TableSize ephox.snooker.util.CellUtils global!Math".split(" "),function(f,g,k,e,a,b,c,d,h,l){var m=function(q){return f.foldr(q,function(t,u){return t+u},0)},p=function(q){q=k.fromTable(q);
return e.generate(q)};return{adjustWidth:function(q,t,u,n){var v=d.getTableSize(q);t=v.getCellDelta(t);var w=p(q),r=v.getWidths(w,n,v);n=g.determine(r,u,t,v);n=f.map(n,function(y,D){return y+r[D]});var x=b.recalculateWidth(w,n);f.each(x,function(y){v.setElementWidth(y.element(),y.width())});u===w.grid().columns()-1&&v.setTableWidth(q,n,t)},adjustHeight:function(q,t,u,n){var v=p(q);n=a.getPixelHeights(v,n);n=f.map(n,function(r,x){return u===x?l.max(t+r,h.minHeight()):r});var w=b.recalculateHeight(v,
n);v=b.matchRowHeight(v,n);f.each(v,function(r){c.setHeight(r.element(),r.height())});f.each(w,function(r){c.setHeight(r.element(),r.height())});v=m(n);c.setHeight(q,v)},adjustWidthTo:function(q,t,u){var n=d.getTableSize(q);t=e.generate(t);u=n.getWidths(t,u,n);t=b.recalculateWidth(t,u);f.each(t,function(v){n.setElementWidth(v.element(),v.width())});u=f.foldr(u,function(v,w){return w+v},0);0<t.length&&n.setElementWidth(q,u)}}});B("ephox.katamari.api.Contracts","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Type ephox.katamari.util.BagUtils global!Error".split(" "),
function(f,g,k,e,a,b){var c=function(l,m){return d(l,m,{validate:e.isFunction,label:"function"})},d=function(l,m,p){if(0===m.length)throw new b("You must specify at least one required field.");a.validateStrArr("required",m);a.checkDupes(m);return function(q){var t=k.keys(q);f.forall(m,function(n){return f.contains(t,n)})||a.reqMessage(m,t);l(m,t);var u=f.filter(m,function(n){return!p.validate(q[n],n)});0<u.length&&a.invalidTypeMessage(u,p.label);return q}},h=g.noop;return{exactly:g.curry(c,function(l,
m){m=f.filter(m,function(p){return!f.contains(l,p)});0<m.length&&a.unsuppMessage(m)}),ensure:g.curry(c,h),ensureWith:g.curry(d,h)}});B("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(f){var g=f.exactly(["compare","extract","mutate","sink"]),k=f.exactly(["element","start","stop","destroy"]);f=f.exactly(["forceDrop","drop","move","delayDrop"]);return{mode:g,sink:k,api:f}});B("ephox.katamari.api.Namespace",[],function(){return{css:function(f){var g=f.replace(/\./g,"-");return{resolve:function(k){return g+
"-"+k}}}}});B("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(f){return{resolve:f.css("ephox-dragster").resolve}});B("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(f,g,k){var e=function(b){return function(){for(var c=new g(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(0===c.length)throw new k("Can't merge zero objects");d={};for(var h=0;h<c.length;h++){var l=c[h],m;for(m in l)l.hasOwnProperty(m)&&(d[m]=b(d[m],l[m]))}return d}},
a=e(function(b,c){return f.isObject(b)&&f.isObject(c)?a(b,c):c});e=e(function(b,c){return c});return{deepMerge:a,merge:e}});B("ephox.sugar.api.properties.Toggler",[],function(){return function(f,g,k){var e=k||!1,a=function(){g();e=!0},b=function(){f();e=!1};return{on:a,off:b,toggle:function(){(e?b:a)()},isOn:function(){return e}}}});B("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(f,g){var k=function(e,a){e=g.get(e,a);return void 0===e||
""===e?[]:e.split(" ")};return{read:k,add:function(e,a,b){b=k(e,a).concat([b]);g.set(e,a,b.join(" "))},remove:function(e,a,b){var c=f.filter(k(e,a),function(d){return d!==b});0<c.length?g.set(e,a,c.join(" ")):g.remove(e,a)}}});B("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(f,g){var k=function(b){return g.read(b,"class")},e=function(b,c){return g.add(b,"class",c)},a=function(b,c){return g.remove(b,"class",c)};return{get:k,add:e,remove:a,toggle:function(b,
c){f.contains(k(b),c)?a(b,c):e(b,c)},supports:function(b){return void 0!==b.dom().classList}}});B("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(f,g,k){var e=function(a,b){return k.supports(a)&&a.dom().classList.contains(b)};return{add:function(a,b){k.supports(a)?a.dom().classList.add(b):k.add(a,b)},remove:function(a,b){k.supports(a)?a.dom().classList.remove(b):k.remove(a,b);0===(k.supports(a)?a.dom().classList:
k.get(a)).length&&g.remove(a,"class")},toggle:function(a,b){return k.supports(a)?a.dom().classList.toggle(b):k.toggle(a,b)},toggler:function(a,b){var c=k.supports(a),d=a.dom().classList;return f(function(){c?d.remove(b):k.remove(a,b)},function(){c?d.add(b):k.add(a,b)},e(a,b))},has:e}});B("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(f){var g=function(e,a){f.parent(e).each(function(b){b.dom().insertBefore(a.dom(),e.dom())})},k=function(e,a){e.dom().appendChild(a.dom())};
return{before:g,after:function(e,a){f.nextSibling(e).fold(function(){f.parent(e).each(function(b){k(b,a)})},function(b){g(b,a)})},prepend:function(e,a){f.firstChild(e).fold(function(){k(e,a)},function(b){e.dom().insertBefore(a.dom(),b.dom())})},append:k,appendAt:function(e,a,b){f.child(e,b).fold(function(){k(e,a)},function(c){g(c,a)})},wrap:function(e,a){g(e,a);k(a,e)}}});B("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(f,g){return{before:function(k,
e){f.each(e,function(a){g.before(k,a)})},after:function(k,e){f.each(e,function(a,b){g.after(0===b?k:e[b-1],a)})},prepend:function(k,e){f.each(e.slice().reverse(),function(a){g.prepend(k,a)})},append:function(k,e){f.each(e,function(a){g.append(k,a)})}}});B("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(f,g,k){var e=function(a){a=a.dom();null!==a.parentNode&&a.parentNode.removeChild(a)};return{empty:function(a){a.dom().textContent=
"";f.each(k.children(a),function(b){e(b)})},remove:e,unwrap:function(a){var b=k.children(a);0<b.length&&g.before(a,b);e(a)}}});B("ephox.dragster.detect.Blocker","ephox.dragster.style.Styles ephox.katamari.api.Merger ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Remove".split(" "),function(f,g,k,e,a,b){return function(c){c=g.merge({layerClass:f.resolve("blocker")},c);var d=a.fromTag("div");e.setAll(d,{position:"fixed",left:"0px",top:"0px",
width:"100%",height:"100%"});k.add(d,f.resolve("blocker"));k.add(d,c.layerClass);return{element:function(){return d},destroy:function(){b.remove(d)}}}});B("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(f,g){var k=function(c,d,h,l,m,p,q){return{target:f.constant(c),x:f.constant(d),y:f.constant(h),stop:l,prevent:m,kill:p,raw:f.constant(q)}},e=function(c,d){return function(h){if(c(h)){var l=g.fromDom(h.target),m=function(){h.stopPropagation()},p=function(){h.preventDefault()},
q=f.compose(p,m);l=k(l,h.clientX,h.clientY,m,p,q,h);d(l)}}},a=function(c,d,h,l,m){h=e(h,l);c.dom().addEventListener(d,h,m);return{unbind:f.curry(b,c,d,h,m)}},b=function(c,d,h,l){c.dom().removeEventListener(d,h,l)};return{bind:function(c,d,h,l){return a(c,d,h,l,!1)},capture:function(c,d,h,l){return a(c,d,h,l,!0)}}});B("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(f,g){var k=f.constant(!0);return{bind:function(e,a,b){return g.bind(e,a,k,b)},capture:function(e,
a,b){return g.capture(e,a,k,b)}}});B("ephox.dragster.api.MouseDrag","ephox.dragster.api.DragApis ephox.dragster.detect.Blocker ephox.katamari.api.Option ephox.sugar.api.view.Position ephox.sugar.api.events.DomEvent ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove".split(" "),function(f,g,k,e,a,b,c){return f.mode({compare:function(d,h){return e(h.left()-d.left(),h.top()-d.top())},extract:function(d){return k.some(e(d.x(),d.y()))},sink:function(d,h){var l=g(h),m=a.bind(l.element(),"mousedown",
d.forceDrop),p=a.bind(l.element(),"mouseup",d.drop),q=a.bind(l.element(),"mousemove",d.move),t=a.bind(l.element(),"mouseout",d.delayDrop);return f.sink({element:l.element,start:function(u){b.append(u,l.element())},stop:function(){c.remove(l.element())},destroy:function(){l.destroy();p.unbind();q.unbind();t.unbind();m.unbind()}})},mutate:function(d,h){d.mutate(h.left(),h.top())}})});B("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(f,
g,k){return function(){var e=f.none(),a=function(c,d){var h=e.map(function(l){return c.compare(l,d)});e=f.some(d);return h},b=k.create({move:g(["info"])});return{onEvent:function(c,d){d.extract(c).each(function(h){a(d,h).each(function(l){b.trigger.move(l)})})},reset:function(){e=f.none()},events:b.registry}}});B("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(f){return function(g){return{onEvent:function(k,e){},reset:f.noop}}});B("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag",
"ephox.dragster.detect.NoDrag"],function(f,g){return function(){var k=g(),e=f(),a=k;return{on:function(){a.reset();a=e},off:function(){a.reset();a=k},isOn:function(){return a===e},onEvent:function(b,c){a.onEvent(b,c)},events:e.events}}});S("global!clearTimeout",clearTimeout);S("global!setTimeout",setTimeout);B("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(f,g){return{adaptable:function(k,e){var a=null,b=null;return{cancel:function(){null!==a&&(f(a),b=a=null)},
throttle:function(){b=arguments;null===a&&(a=g(function(){k.apply(null,b);b=a=null},e))}}},first:function(k,e){var a=null;return{cancel:function(){null!==a&&(f(a),a=null)},throttle:function(){var b=arguments;null===a&&(a=g(function(){k.apply(null,b);b=a=null},e))}}},last:function(k,e){var a=null;return{cancel:function(){null!==a&&(f(a),a=null)},throttle:function(){var b=arguments;null!==a&&f(a);a=g(function(){k.apply(null,b);b=a=null},e)}}}}});B("ephox.dragster.core.Dragging","ephox.dragster.api.DragApis ephox.dragster.detect.Movement ephox.katamari.api.Throttler ephox.porkbun.Event ephox.porkbun.Events global!Array".split(" "),
function(f,g,k,e,a,b){return{setup:function(c,d,h){var l=!1,m=a.create({start:e([]),stop:e([])}),p=g(),q=function(){n.stop();p.isOn()&&(p.off(),m.trigger.stop())},t=k.last(q,200);p.events.move.bind(function(v){d.mutate(c,v.info())});var u=function(v){return function(){var w=b.prototype.slice.call(arguments,0);if(l)return v.apply(null,w)}},n=d.sink(f.api({forceDrop:q,drop:u(q),move:u(function(v,w){t.cancel();p.onEvent(v,d)}),delayDrop:u(t.throttle)}),h);return{element:n.element,go:function(v){n.start(v);
p.on();m.trigger.start()},on:function(){l=!0},off:function(){l=!1},destroy:function(){n.destroy()},events:m.registry}}}});B("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(f,g,k){return{transform:function(e,a){var b=void 0!==a?a:{};return g.setup(e,void 0!==b.mode?b.mode:f,a)}}});B("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(f,g){return function(){var k=g.create({drag:f(["xDelta","yDelta"])});
return{mutate:function(e,a){k.trigger.drag(e,a)},events:k.registry}}});B("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(f,g,k,e){return function(){var a=k.create({drag:g(["xDelta","yDelta","target"])}),b=f.none(),c=e();c.events.drag.bind(function(d){b.each(function(h){a.trigger.drag(d.xDelta(),d.yDelta(),h)})});return{assign:function(d){b=f.some(d)},get:function(){return b},mutate:c.mutate,events:a.registry}}});
B("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(f,g,k){return{col:function(e,a,b,c,d){var h=k.fromTag("div");g.setAll(h,{position:"absolute",left:a-c/2+"px",top:b+"px",height:d+"px",width:c+"px"});f.set(h,"data-column",e);return h},row:function(e,a,b,c,d){var h=k.fromTag("div");g.setAll(h,{position:"absolute",left:a+"px",top:b-d/2+"px",height:d+"px",width:c+"px"});f.set(h,"data-row",e);return h}}});B("ephox.snooker.style.Styles",
["ephox.katamari.api.Namespace"],function(f){return{resolve:f.css("ephox-snooker").resolve}});B("ephox.snooker.resize.Bars","ephox.katamari.api.Arr ephox.snooker.lookup.Blocks ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.resize.Bar ephox.snooker.style.Styles ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorFilter ephox.sugar.api.view.Height ephox.sugar.api.view.Location ephox.sugar.api.view.Width".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t){var u=b.resolve("resizer-bar"),n=b.resolve("resizer-rows"),v=b.resolve("resizer-cols"),w=function(C){C=m.descendants(C.parent(),"."+u);f.each(C,d.remove)},r=function(C,F,H){var L=C.origin();f.each(F,function(A,z){A.each(function(E){E=H(L,E);h.add(E,u);c.append(C.parent(),E)})})},x=function(C,F,H,L){r(C,F,function(A,z){A=a.col(z.col(),z.x()-A.left(),H.top()-A.top(),7,L);h.add(A,v);return A})},y=function(C,F,H,L){r(C,F,function(A,z){A=a.row(z.row(),H.left()-A.left(),
z.y()-A.top(),L,7);h.add(A,n);return A})},D=function(C,F){C=m.descendants(C.parent(),"."+u);f.each(C,F)};return{refresh:function(C,F,H,L){w(C,F);var A=k.fromTable(F);A=e.generate(A);var z=g.rows(A),E=g.columns(A);A=q.absolute(F);H=0<z.length?H.positions(z,F):[];y(C,H,A,t.getOuter(F));L=0<E.length?L.positions(E,F):[];x(C,L,A,p.getOuter(F))},hide:function(C){D(C,function(F){l.set(F,"display","none")})},show:function(C){D(C,function(F){l.set(F,"display","block")})},destroy:w,isRowBar:function(C){return h.has(C,
n)},isColBar:function(C){return h.has(C,v)}}});B("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(f){return{any:function(g){return f.first(g).isSome()},ancestor:function(g,k,e){return f.ancestor(g,k,e).isSome()},sibling:function(g,k){return f.sibling(g,k).isSome()},child:function(g,k){return f.child(g,k).isSome()},descendant:function(g,k){return f.descendant(g,k).isSome()},closest:function(g,k,e){return f.closest(g,k,e).isSome()}}});B("ephox.snooker.resize.BarManager",
"ephox.dragster.api.Dragger ephox.katamari.api.Fun ephox.katamari.api.Option ephox.porkbun.Event ephox.porkbun.Events ephox.snooker.resize.BarMutation ephox.snooker.resize.Bars ephox.snooker.style.Styles ephox.snooker.util.CellUtils ephox.sugar.api.dom.Compare ephox.sugar.api.events.DomEvent ephox.sugar.api.node.Body ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorExists ephox.sugar.api.search.SelectorFind global!parseInt".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n,v,w,r){var x=d.resolve("resizer-bar-dragging");return function(y,D,C){var F=b(),H=f.transform(F,{}),L=k.none(),A=function(K,O){return k.from(t.get(K,O))};F.events.drag.bind(function(K){A(K.target(),"data-row").each(function(O){O=h.getInt(K.target(),"top");n.set(K.target(),"top",O+K.yDelta()+"px")});A(K.target(),"data-column").each(function(O){O=h.getInt(K.target(),"left");n.set(K.target(),"left",O+K.xDelta()+"px")})});var z=function(K,O){var R=h.getInt(K,O);
K=r(t.get(K,"data-initial-"+O),10);return R-K};H.events.stop.bind(function(){F.get().each(function(K){L.each(function(O){A(K,"data-row").each(function(R){var U=z(K,"top");t.remove(K,"data-initial-top");M.trigger.adjustHeight(O,U,r(R,10))});A(K,"data-column").each(function(R){var U=z(K,"left");t.remove(K,"data-initial-left");M.trigger.adjustWidth(O,U,r(R,10))});c.refresh(y,O,C,D)})})});var E=function(K,O){M.trigger.startAdjust();F.assign(K);t.set(K,"data-initial-"+O,r(n.get(K,O),10));u.add(K,x);n.set(K,
"opacity","0.2");H.go(y.parent())},G=m.bind(y.parent(),"mousedown",function(K){c.isRowBar(K.target())&&E(K.target(),"top");c.isColBar(K.target())&&E(K.target(),"left")}),I=function(K){return l.eq(K,y.view())},J=m.bind(y.view(),"mouseover",function(K){"table"===q.name(K.target())||v.ancestor(K.target(),"table",I)?(L="table"===q.name(K.target())?k.some(K.target()):w.ancestor(K.target(),"table",I),L.each(function(O){c.refresh(y,O,C,D)})):p.inBody(K.target())&&c.destroy(y)}),M=a.create({adjustHeight:e(["table",
"delta","row"]),adjustWidth:e(["table","delta","column"]),startAdjust:e([])});return{destroy:function(){G.unbind();J.unbind();H.destroy();c.destroy(y)},refresh:function(K){c.refresh(y,K,C,D)},on:H.on,off:H.off,hideBars:g.curry(c.hide,y),showBars:g.curry(c.show,y),events:M.registry}}});B("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(f,g,k,e,a){return function(b,
c){var d=a.height;b=e(b,c,d);var h=g.create({beforeResize:f(["table"]),afterResize:f(["table"]),startDrag:f([])});b.events.adjustHeight.bind(function(l){h.trigger.beforeResize(l.table());var m=d.delta(l.delta(),l.table());k.adjustHeight(l.table(),m,l.row(),d);h.trigger.afterResize(l.table())});b.events.startAdjust.bind(function(l){h.trigger.startDrag()});b.events.adjustWidth.bind(function(l){h.trigger.beforeResize(l.table());var m=c.delta(l.delta(),l.table());k.adjustWidth(l.table(),m,l.column(),
c);h.trigger.afterResize(l.table())});return{on:b.on,off:b.off,hideBars:b.hideBars,showBars:b.showBars,destroy:b.destroy,events:h.registry}}});S("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);B("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(f){return f("tinymce.PluginManager")});B("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(f){return f("tinymce.util.Tools")});B("ephox.snooker.api.CopySelected","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Struct ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.util.LayerSelector ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.search.Selectors".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p){var q=k.immutable("minRow","minCol","maxRow","maxCol"),t=function(v,w){var r=v.grid().columns(),x=v.grid().rows(),y=r,D=0,C=0;g.each(v.access(),function(F){if(w(F)){var H=F.row(),L=H+F.rowspan()-1,A=F.column();F=A+F.colspan()-1;H<x?x=H:L>D&&(D=L);A<y?y=A:F>C&&(C=F)}});return q(x,y,D,C)},u=function(v,w,r,x){for(var y=w.grid().columns(),D=w.grid().rows(),C=0;C<D;C++)for(var F=!1,H=0;H<y;H++)if(!(C<r.minRow()||C>r.maxRow()||H<r.minCol()||H>r.maxCol()))if(a.getAt(w,C,
H).filter(x).isNone()){var L=F,A=v[C].element(),z=h.fromTag("td");l.append(z,h.fromTag("br"));(L?l.append:l.prepend)(A,z)}else F=!0},n=function(v,w){var r=f.filter(b.firstLayer(v,"tr"),function(x){return 0===x.dom().childElementCount});f.each(r,m.remove);w.minCol()!==w.maxCol()&&w.minRow()!==w.maxRow()||f.each(b.firstLayer(v,"th,td"),function(x){c.remove(x,"rowspan");c.remove(x,"colspan")});c.remove(v,"width");c.remove(v,"height");d.remove(v,"width");d.remove(v,"height")};return{extract:function(v,
w){var r=function(H){return p.is(H.element(),w)},x=e.fromTable(v),y=a.generate(x),D=t(y,r),C="th:not("+w+"),td:not("+w+")",F=b.filterFirstLayer(v,"th,td",function(H){return p.is(H,C)});f.each(F,m.remove);u(x,y,D,r);n(v,D);return v}}});B("ephox.sugar.api.dom.Replication","ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(f,g,k,e,a,b){var c=function(h){return g.fromDom(h.dom().cloneNode(!0))},
d=function(h,l){l=g.fromTag(l);h=f.clone(h);f.setAll(l,h);return l};return{shallow:function(h){return g.fromDom(h.dom().cloneNode(!1))},shallowAs:d,deep:c,copy:function(h,l){l=d(h,l);h=b.children(c(h));e.append(l,h);return l},mutate:function(h,l){l=d(h,l);k.before(h,l);var m=b.children(h);e.append(l,m);a.remove(h);return l}}});B("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(f,g,k){return function(e,a){var b=function(l){try{return c(l)}catch(m){return g.none()}},
c=function(l){return e(l)?g.from(l.dom().nodeValue):g.none()},d=f.detect().browser,h=d.isIE()&&10===d.version.major?b:c;return{get:function(l){if(!e(l))throw new k("Can only get "+a+" value of a "+a+" node");return h(l).getOr("")},getOption:h,set:function(l,m){if(!e(l))throw new k("Can only set raw "+a+" value of a "+a+" node");l.dom().nodeValue=m}}}});B("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(f,g){var k=g(f.isText,"text");return{get:function(e){return k.get(e)},
getOption:function(e){return k.getOption(e)},set:function(e,a){k.set(e,a)}}});B("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(f,g,k,e){var a=function(d){return"img"===g.name(d)?1:k.getOption(d).fold(function(){return e.children(d).length},function(h){return h.length})},b=function(d){return k.getOption(d).filter(function(h){return 0!==h.trim().length||-1<h.indexOf("\u00a0")}).isSome()},
c=["img","br"];return{getEnd:a,isEnd:function(d,h){return a(d)===h},isStart:function(d,h){return 0===h},isCursorPosition:function(d){return b(d)||f.contains(c,g.name(d))}}});B("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(f,g,k,e){var a=function(b,c){var d=function(h){h=k.children(h);for(var l=h.length-1;0<=l;l--){var m=h[l];if(c(m))return f.some(m);m=
d(m);if(m.isSome())return m}return f.none()};return d(b)};return{first:function(b){return g.descendant(b,e.isCursorPosition)},last:function(b){return a(b,e.isCursorPosition)}}});B("ephox.snooker.api.TableFill","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Traverse ephox.sugar.api.selection.CursorPosition".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p){var q=function(){var w=b.fromTag("td");e.append(w,b.fromTag("br"));return w},t=function(w,r,x){var y=a.copy(w,r);g.each(x,function(D,C){null===D?d.remove(y,C):d.set(y,C,D)});return y},u=function(w){return w},n=function(w){return function(){return b.fromTag("tr",w.dom())}},v=function(w,r,x){return p.first(w).map(function(y){var D=x.join(",");y=l.ancestors(y,D,function(C){return k.eq(C,w)});return f.foldr(y,function(C,F){F=a.shallow(F);e.append(C,F);return F},r)}).getOr(r)};
return{cellOperations:function(w,r,x){return{row:n(r),cell:function(y){var D=m.owner(y.element());D=b.fromTag(c.name(y.element()),D.dom());var C=x.getOr("strong em b i span font h1 h2 h3 h4 h5 h6 p div".split(" "));C=0<C.length?v(y.element(),D,C):D;e.append(C,b.fromTag("br"));h.copy(y.element(),D);h.remove(D,"height");1!==y.colspan()&&h.remove(y.element(),"width");w(y.element(),D);return D},replace:t,gap:q}},paste:function(w){return{row:n(w),cell:q,replace:u,gap:q}}}});B("ephox.sugar.api.node.Elements",
["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(f,g,k,e){return{fromHtml:function(a,b){b=(b||e).createElement("div");b.innerHTML=a;return k.children(g.fromDom(b))},fromTags:function(a,b){return f.map(a,function(c){return g.fromTag(c,b)})},fromText:function(a,b){return f.map(a,function(c){return g.fromText(c,b)})},fromDom:function(a){return f.map(a,g.fromDom)}}});B("ephox.boss.common.TagBoundaries",[],function(){return"body p div article aside figcaption figure footer header nav section ol ul li table thead tbody tfoot caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" ")});
B("ephox.boss.api.DomUniverse","ephox.boss.common.TagBoundaries ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.properties.Attr ephox.sugar.api.dom.Compare ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFilter ephox.sugar.api.search.PredicateFind ephox.sugar.api.dom.Remove ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.node.Text ephox.sugar.api.search.Traverse".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n,v){return function(){return{up:k.constant({selector:u.ancestor,closest:u.closest,predicate:p.ancestor,all:v.parents}),down:k.constant({selector:t.descendants,predicate:m.descendants}),styles:k.constant({get:b.get,getRaw:b.getRaw,set:b.set,remove:b.remove}),attrs:k.constant({get:e.get,set:e.set,remove:e.remove,copyTo:function(w,r){w=e.clone(w);e.setAll(r,w)}}),insert:k.constant({before:d.before,after:d.after,afterAll:h.after,append:d.append,appendAll:h.append,
prepend:d.prepend,wrap:d.wrap}),remove:k.constant({unwrap:q.unwrap,remove:q.remove}),create:k.constant({nu:c.fromTag,clone:function(w){return c.fromDom(w.dom().cloneNode(!1))},text:c.fromText}),query:k.constant({comparePosition:function(w,r){return w.dom().compareDocumentPosition(r.dom())},prevSibling:v.prevSibling,nextSibling:v.nextSibling}),property:k.constant({children:v.children,name:l.name,parent:v.parent,isText:l.isText,isComment:l.isComment,isElement:l.isElement,getText:n.get,setText:n.set,
isBoundary:function(w){return l.isElement(w)?"body"===l.name(w)?!0:g.contains(f,l.name(w)):!1},isEmptyTag:function(w){return l.isElement(w)?g.contains(["br","img","hr","input"],l.name(w)):!1}}),eq:a.eq,is:a.is}}});B("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(f,g,k,e){var a=e.immutable("left","right"),b=function(c,d,h){var l=c.property().children(d);return f.findIndex(l,g.curry(c.eq,h)).map(function(m){return{before:g.constant(l.slice(0,
m)),after:g.constant(l.slice(m+1))}})};return{breakToLeft:function(c,d,h){return b(c,d,h).map(function(l){var m=c.create().clone(d);c.insert().appendAll(m,l.before().concat([h]));c.insert().appendAll(d,l.after());c.insert().before(d,m);return a(m,d)})},breakToRight:function(c,d,h){return b(c,d,h).map(function(l){var m=c.create().clone(d);c.insert().appendAll(m,l.after());c.insert().after(d,m);return a(d,m)})},breakPath:function(c,d,h,l){var m=e.immutable("first","second","splits"),p=function(q,t,
u){var n=m(q,k.none(),u);return h(q)?m(q,t,u):c.property().parent(q).bind(function(v){return l(c,v,q).map(function(w){var r=[{first:w.left,second:w.right}],x=h(v)?v:w.left();return p(x,k.some(w.right()),u.concat(r))}).getOr(n)})};return p(d,k.none(),[])}}});B("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(f,g,k){var e=function(b,c,d,h){d=c(b,d);return f.foldr(h,function(l,m){m=c(b,m);return a(b,l,m)},d)},a=function(b,c,d){return c.bind(function(h){return d.filter(g.curry(b.eq,
h))})};return{oneAll:function(b,c,d){if(0<d.length){var h=d[0];d=d.slice(1);b=e(b,c,h,d)}else b=k.none();return b}}});B("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(f,g,k,e){var a=function(c,d,h,l){var m=c.property().children(d);if(c.eq(d,h[0]))return k.some([h[0]]);if(c.eq(d,l[0]))return k.some([l[0]]);var p=function(t){t=f.reverse(t);var u=f.findIndex(t,g.curry(c.eq,d)).getOr(-1);return f.findIndex(m,g.curry(c.eq,
u<t.length-1?t[u+1]:t[u]))};h=p(h);var q=p(l);return h.bind(function(t){return q.map(function(u){var n=e.min(t,u);u=e.max(t,u);return m.slice(n,u+1)})})},b=function(c,d,h,l){var m=void 0!==l?l:g.constant(!1);d=[d].concat(c.up().all(d));h=[h].concat(c.up().all(h));l=function(q){return f.findIndex(q,m).fold(function(){return q},function(t){return q.slice(0,t+1)})};d=l(d);var p=l(h);h=f.find(d,function(q){return f.exists(p,g.curry(c.eq,q))});return{firstpath:g.constant(d),secondpath:g.constant(p),shared:g.constant(h)}};
return{subset:function(c,d,h){var l=b(c,d,h);return l.shared().bind(function(m){return a(c,m,l.firstpath(),l.secondpath())})},ancestors:b}});B("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(f,g,k){return{sharedOne:function(e,a,b){return g.oneAll(e,a,b)},subset:function(e,a,b){return k.subset(e,a,b)},ancestors:function(e,a,b,c){return k.ancestors(e,a,b,c)},breakToLeft:function(e,a,b){return f.breakToLeft(e,a,b)},breakToRight:function(e,
a,b){return f.breakToRight(e,a,b)},breakPath:function(e,a,b,c){return f.breakPath(e,a,b,c)}}});B("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(f,g){var k=f();return{sharedOne:function(e,a){return g.sharedOne(k,function(b,c){return e(c)},a)},subset:function(e,a){return g.subset(k,e,a)},ancestors:function(e,a,b){return g.ancestors(k,e,a,b)},breakToLeft:function(e,a){return g.breakToLeft(k,e,a)},breakToRight:function(e,a){return g.breakToRight(k,
e,a)},breakPath:function(e,a,b){return g.breakPath(k,e,a,function(c,d,h){return b(d,h)})}}});B("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(f,g,k){var e=function(a,b){return b.column()>=a.startCol()&&b.column()+b.colspan()-1<=a.finishCol()&&b.row()>=a.startRow()&&b.row()+b.rowspan()-1<=a.finishRow()};return{inSelection:function(a,b){var c=b.column(),d=b.column()+b.colspan()-1,h=b.row();b=b.row()+b.rowspan()-1;
return c<=a.finishCol()&&d>=a.startCol()&&h<=a.finishRow()&&b>=a.startRow()},isWithin:e,isRectangular:function(a,b){for(var c=!0,d=f.curry(e,b),h=b.startRow();h<=b.finishRow();h++)for(var l=b.startCol();l<=b.finishCol();l++)c=c&&k.getAt(a,h,l).exists(d);return c?g.some(b):g.none()}}});B("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(f,g,k,e,a){var b=function(c,
d,h){d=g.findItem(c,d,e.eq);var l=g.findItem(c,h,e.eq);return d.bind(function(m){return l.map(function(p){return f.bounds(a.min(m.row(),p.row()),a.min(m.column(),p.column()),a.max(m.row()+m.rowspan()-1,p.row()+p.rowspan()-1),a.max(m.column()+m.colspan()-1,p.column()+p.colspan()-1))})})};return{getAnyBox:b,getBox:function(c,d,h){return b(c,d,h).bind(function(l){return k.isRectangular(c,l)})}}});B("ephox.snooker.selection.CellFinder","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.model.Warehouse ephox.snooker.selection.CellBounds ephox.snooker.selection.CellGroup ephox.sugar.api.dom.Compare".split(" "),
function(f,g,k,e,a,b){return{moveBy:function(c,d,h,l){return k.findItem(c,d,b.eq).bind(function(m){var p=0<h?m.row()+m.rowspan()-1:m.row();m=0<l?m.column()+m.colspan()-1:m.column();return k.getAt(c,p+h,m+l).map(function(q){return q.element()})})},intercepts:function(c,d,h){return a.getAnyBox(c,d,h).map(function(l){l=k.filterItems(c,g.curry(e.inSelection,l));return f.map(l,function(m){return m.element()})})},parentCell:function(c,d){return k.findItem(c,d,function(h,l){return b.contains(l,h)}).bind(function(h){return h.element()})}}});
B("ephox.snooker.api.TablePositions","ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.selection.CellFinder ephox.snooker.selection.CellGroup ephox.sugar.api.dom.Compare".split(" "),function(f,g,k,e,a,b){var c=function(d){d=g.fromTable(d);return k.generate(d)};return{moveBy:function(d,h,l){return f.table(d).bind(function(m){m=c(m);return e.moveBy(m,d,h,l)})},intercepts:function(d,h,l){d=c(d);return e.intercepts(d,h,l)},nestedIntercepts:function(d,
h,l,m,p){var q=c(d);h=b.eq(d,l)?h:e.parentCell(q,h);d=b.eq(d,p)?m:e.parentCell(q,m);return e.intercepts(q,h,d)},getBox:function(d,h,l){d=c(d);return a.getBox(d,h,l)}}});B("ephox.darwin.selection.CellSelection","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.robin.api.dom.DomParent ephox.snooker.api.TablePositions ephox.sugar.api.dom.Compare ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Selectors".split(" "),function(f,
g,k,e,a,b,c,d,h){var l=function(t,u){return d.ancestor(t,"table")},m=function(t,u,n){return b.eq(t,u)?k.some([t]):l(t,n).bind(function(v){return l(u,n).bind(function(w){return b.eq(v,w)?a.intercepts(v,t,u):b.contains(v,w)?a.nestedIntercepts(v,t,v,u,w):b.contains(w,v)?a.nestedIntercepts(w,t,v,u,w):e.ancestors(t,u).shared().bind(function(r){return d.closest(r,"table",n).bind(function(x){return a.nestedIntercepts(x,t,v,u,w)})})})})},p=function(t,u){return f.find(t,function(n){return h.is(n,u)})},q=function(t,
u){return d.ancestor(t,"table").bind(function(n){return d.descendant(n,u).bind(function(v){return m(v,t).map(function(w){return{boxes:g.constant(w),start:g.constant(v),finish:g.constant(t)}})})})};return{identify:m,retrieve:function(t,u){t=c.descendants(t,u);return 0<t.length?k.some(t):k.none()},shiftSelection:function(t,u,n,v,w){return p(t,w).bind(function(r){return a.moveBy(r,u,n).bind(function(x){return q(x,v)})})},getEdges:function(t,u,n){return d.descendant(t,u).bind(function(v){return d.descendant(t,
n).bind(function(w){return e.sharedOne(l,[v,w]).map(function(r){return{first:g.constant(v),last:g.constant(w),table:g.constant(r)}})})})}}});B("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(f,g,k,e,a){return{retrieve:function(b,c){return f.retrieve(b,c)},retrieveBox:function(b,c,d){return f.getEdges(b,c,d).bind(function(h){var l=function(q){return e.eq(b,
q)},m=a.ancestor(h.first(),"thead,tfoot,tbody,table",l),p=a.ancestor(h.last(),"thead,tfoot,tbody,table",l);return m.bind(function(q){return p.bind(function(t){return e.eq(q,t)?k.getBox(h.table(),h.first(),h.last()):g.none()})})})}}});B("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(f){return{selected:f.constant("data-mce-selected"),selectedSelector:f.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:f.constant("[data-mce-selected]"),firstSelected:f.constant("data-mce-first-selected"),
firstSelectedSelector:f.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:f.constant("data-mce-last-selected"),lastSelectedSelector:f.constant("td[data-mce-last-selected],th[data-mce-last-selected]")}});B("ephox.katamari.api.Adt","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Type global!Array global!Error global!console".split(" "),function(f,g,k,e,a,b){return{generate:function(c){if(!k.isArray(c))throw new a("cases must be an array");if(0===c.length)throw new a("there must be at least one case");
var d=[],h={};f.each(c,function(l,m){var p=g.keys(l);if(1!==p.length)throw new a("one and only one name per case");var q=p[0],t=l[q];if(void 0!==h[q])throw new a("duplicate key detected:"+q);if("cata"===q)throw new a("cannot have a case named cata (sorry)");if(!k.isArray(t))throw new a("case arguments must be an array");d.push(q);h[q]=function(){var u=arguments.length;if(u!==t.length)throw new a("Wrong number of arguments to case "+q+". Expected "+t.length+" ("+t+"), got "+u);var n=new e(u);for(u=
0;u<n.length;u++)n[u]=arguments[u];return{fold:function(){if(arguments.length!==c.length)throw new a("Wrong number of arguments to fold. Expected "+c.length+", got "+arguments.length);return arguments[m].apply(null,n)},match:function(v){var w=g.keys(v);if(d.length!==w.length)throw new a("Wrong number of arguments to match. Expected: "+d.join(",")+"\nActual: "+w.join(","));if(!f.forall(d,function(r){return f.contains(w,r)}))throw new a("Not all branches were specified when using match. Specified: "+
w.join(", ")+"\nRequired: "+d.join(", "));return v[q].apply(null,n)},log:function(v){b.log(v,{constructors:d,constructor:q,params:n})}}}});return h}}});B("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(f){f=f.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(g,k,e,a){return g.fold(k,e,a)},none:f.none,multiple:f.multiple,single:f.single}});B("tinymce.plugins.table.queries.CellOperations","ephox.darwin.api.TableSelection ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.properties.Attr tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.SelectionTypes".split(" "),
function(f,g,k,e,a,b,c){var d=function(h,l){return c.cata(l.get(),k.constant([]),k.identity,k.constant([h]))};return{mergable:function(h,l){return c.cata(l.get(),e.none,function(m,p){return 0===m.length?e.none():f.retrieveBox(h,b.firstSelectedSelector(),b.lastSelectedSelector()).bind(function(q){return 1<m.length?e.some({bounds:k.constant(q),cells:k.constant(m)}):e.none()})},e.none)},unmergable:function(h,l){var m=function(p){return a.has(p,"rowspan")&&1<parseInt(a.get(p,"rowspan"),10)||a.has(p,"colspan")&&
1<parseInt(a.get(p,"colspan"),10)};h=d(h,l);return 0<h.length&&g.forall(h,m)?e.some(h):e.none()},selection:d}});B("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(f,g,k,e){var a=function(b){return{element:f.constant(b),mergable:g.none,unmergable:g.none,selection:f.constant([b])}};k=k.immutable("element","clipboard","generators");return{noMenu:a,forMenu:function(b,
c,d){return{element:f.constant(d),mergable:f.constant(e.mergable(c,b)),unmergable:f.constant(e.unmergable(d,b)),selection:f.constant(e.selection(d,b))}},notCell:function(b){return a(b)},paste:k,pasteRows:function(b,c,d,h,l){return{element:f.constant(d),mergable:g.none,unmergable:g.none,selection:f.constant(e.selection(d,b)),clipboard:f.constant(h),generators:f.constant(l)}}}});B("tinymce.plugins.table.actions.Clipboard","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CopySelected ephox.snooker.api.TableFill ephox.snooker.api.TableLookup ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Elements ephox.sugar.api.node.Node tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.SelectionTypes".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q){var t=function(u){return b.table(u[0]).map(c.deep).map(function(n){return[e.extract(n,p.attributeSelector())]})};return{registerEvents:function(u,n,v,w){u.on("BeforeGetContent",function(r){var x=function(y){r.preventDefault();t(y).each(function(D){r.content=f.map(D,function(C){return u.selection.serializer.serialize(C.dom(),{})}).join("")})};!0===r.selection&&q.cata(n.get(),g.noop,x,g.noop)});u.on("BeforeSetContent",function(r){!0===r.selection&&!0===r.paste&&k.from(u.dom.getParent(u.selection.getStart(),
"th,td")).each(function(x){var y=d.fromDom(x);b.table(y).bind(function(D){var C=f.filter(h.fromHtml(r.content),function(H){return"meta"!==l.name(H)});if(1===C.length&&"table"===l.name(C[0])){r.preventDefault();var F=d.fromDom(u.getDoc());F=a.paste(F);C=m.paste(y,C[0],F);v.pasteCells(D,C).each(function(H){u.selection.setRng(H);u.focus();w.clear(D)})}})})})}}});B("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert",
"ephox.sugar.api.dom.InsertAll"],function(f,g,k,e,a){return{render:function(b,c,d,h){var l=k.fromTag("table");g.setAll(l,{"border-collapse":"collapse",width:"100%"});f.set(l,"border","1");var m=k.fromTag("tbody");e.append(l,m);for(var p=[],q=0;q<b;q++){for(var t=k.fromTag("tr"),u=0;u<c;u++){var n=q<d||u<h?k.fromTag("th"):k.fromTag("td");u<h&&f.set(n,"scope","row");q<d&&f.set(n,"scope","col");e.append(n,k.fromTag("br"));g.set(n,"width",100/c+"%");e.append(t,n)}p.push(t)}a.append(m,p);return l}}});
B("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(f){return{render:f.render}});B("ephox.sugar.api.properties.Html","ephox.sugar.api.node.Element ephox.sugar.api.node.Elements ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(f,g,k,e,a,b){var c=function(d){return d.dom().innerHTML};return{get:c,set:function(d,h){var l=b.owner(d).dom(),m=f.fromDom(l.createDocumentFragment());h=g.fromHtml(h,
l);e.append(m,h);a.empty(d);k.append(d,m)},getOuter:function(d){var h=f.fromTag("div");d=f.fromDom(d.dom().cloneNode(!0));k.append(h,d);return c(h)}}});B("tinymce.plugins.table.actions.InsertTable","ephox.katamari.api.Fun ephox.snooker.api.TableRender ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Html ephox.sugar.api.search.SelectorFind".split(" "),function(f,g,k,e,a,b){var c=function(h,l){h.selection.select(l.dom(),!0);h.selection.collapse(!0)},d=function(h,
l){b.descendant(l,"td,th").each(f.curry(c,h))};return{insert:function(h,l,m){l=g.render(m,l,0,0);e.set(l,"id","__mce");l=a.getOuter(l);h.insertContent(l);l=h.dom.get("__mce");h.dom.setAttrib(l,"id",null);h.$("tr",l).each(function(p,q){h.fire("newrow",{node:q});h.$("th,td",q).each(function(t,u){h.fire("newcell",{node:u})})});h.dom.setAttribs(l,h.settings.table_default_attributes||{});h.dom.setStyles(l,h.settings.table_default_styles||{});d(h,k.fromDom(l));return l}}});B("ephox.snooker.api.CellMutations",
["ephox.snooker.resize.Sizes"],function(f){return{halve:function(g,k){f.getGenericWidth(g).each(function(e){var a=e.width()/2;f.setGenericWidth(g,a,e.unit());f.setGenericWidth(k,a,e.unit())})}}});B("ephox.snooker.api.TableGridSize",["ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse"],function(f,g){return{getGridSize:function(k){k=f.fromTable(k);return g.generate(k).grid()}}});B("ephox.katamari.api.Cell",[],function(){var f=function(g){var k=g;return{get:function(){return k},set:function(e){k=
e},clone:function(){return f(k)}}};return f});B("ephox.snooker.api.Generators","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Cell ephox.katamari.api.Contracts ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css global!parseInt".split(" "),function(f,g,k,e,a,b,c,d){var h=function(m){var p=b.has(m,"colspan")?d(b.get(m,"colspan"),10):1,q=b.has(m,"rowspan")?d(b.get(m,"rowspan"),10):1;return{element:g.constant(m),colspan:g.constant(p),rowspan:g.constant(q)}},
l=a.exactly(["cell","row","replace","gap"]);return{modification:function(m,p){l(m);var q=e(k.none()),t=void 0!==p?p:h,u=function(v){var w=t(v);w=m.cell(w);q.get().isNone()&&q.set(k.some(w));n=k.some({item:v,replacement:w});return w},n=k.none();return{getOrInit:function(v,w){return n.fold(function(){return u(v)},function(r){return w(v,r.item)?r.replacement:u(v)})},cursor:q.get}},transform:function(m,p){return function(q){var t=e(k.none());l(q);var u=[],n=function(w,r){return f.find(u,function(x){return r(x.item,
w)})},v=function(w){var r=q.replace(w,p,{scope:m});u.push({item:w,sub:r});t.get().isNone()&&t.set(k.some(r));return r};return{replaceOrInit:function(w,r){return n(w,r).fold(function(){return v(w)},function(x){return r(w,x.item)?x.sub:v(w)})},cursor:t.get}}},merging:function(m){l(m);var p=e(k.none());return{combine:function(q){p.get().isNone()&&p.set(k.some(q));return function(){var t=m.cell({element:g.constant(q),colspan:g.constant(1),rowspan:g.constant(1)});c.remove(t,"width");c.remove(q,"width");
return t}},cursor:p.get}}}});B("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(f){var g="body p div article aside figcaption figure footer header nav section ol ul table thead tfoot tbody caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" "),k=function(a,b){a=a.property().name(b);return f.contains(g,a)},e=function(a,b){return f.contains(["br","img","hr","input"],a.property().name(b))};return{isBlock:k,isList:function(a,b){a=a.property().name(b);return f.contains(["ol",
"ul"],a)},isFormatting:function(a,b){a=a.property().name(b);return f.contains("address pre p h1 h2 h3 h4 h5 h6".split(" "),a)},isHeading:function(a,b){a=a.property().name(b);return f.contains("h1 h2 h3 h4 h5 h6".split(" "),a)},isContainer:function(a,b){return f.contains("div li td th blockquote body caption".split(" "),a.property().name(b))},isEmptyTag:e,isFrame:function(a,b){return"iframe"===a.property().name(b)},isInline:function(a,b){return!(k(a,b)||e(a,b))&&"li"!==a.property().name(b)}}});B("ephox.robin.api.dom.DomStructure",
["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(f,g){var k=f();return{isBlock:function(e){return g.isBlock(k,e)},isList:function(e){return g.isList(k,e)},isFormatting:function(e){return g.isFormatting(k,e)},isHeading:function(e){return g.isHeading(k,e)},isContainer:function(e){return g.isContainer(k,e)},isEmptyTag:function(e){return g.isEmptyTag(k,e)},isFrame:function(e){return g.isFrame(k,e)},isInline:function(e){return g.isInline(k,e)}}});B("ephox.snooker.api.TableContent",
"ephox.katamari.api.Arr ephox.robin.api.dom.DomStructure ephox.sugar.api.dom.Compare ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse ephox.sugar.api.selection.CursorPosition".split(" "),function(f,g,k,e,a,b,c,d,h,l,m){return{merge:function(p){var q=function(v){return f.forall(v,function(w){return"br"===c.name(w)||c.isText(w)&&0===d.get(w).trim().length})},
t=function(v){return l.nextSibling(v).map(function(w){if(g.isBlock(w))return!0;if(g.isEmptyTag(w))return"img"===c.name(w)?!1:!0}).getOr(!1)},u=function(v){return m.last(v).bind(function(w){var r=t(w);return l.parent(w).map(function(x){var y;(y=!0===r)||(y="li"===c.name(x)||h.ancestor(x,g.isList).isSome());return y||"br"===c.name(w)||g.isBlock(x)&&!k.eq(v,x)?[]:[b.fromTag("br")]})}).getOr([])},n=function(){var v=f.bind(p,function(w){var r=l.children(w);return q(r)?[]:r.concat(u(w))});return 0===v.length?
[b.fromTag("br")]:v}();a.empty(p[0]);e.append(p[0],n)}}});B("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(f,g){var k=function(a,b){return g.rowcells(b,a.section())},e=function(a,b){return a.cells()[b]};return{addCell:function(a,b,c){var d=a.cells(),h=d.slice(0,b);b=d.slice(b);c=h.concat([c]).concat(b);return k(a,c)},setCells:k,mutateCell:function(a,b,c){a.cells()[b]=c},getCell:e,getCellElement:function(a,b){return e(a,b).element()},mapCells:function(a,
b){var c=a.cells();b=f.map(c,b);return g.rowcells(b,a.section())},cellLength:function(a){return a.cells().length}}});B("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(f,g,k){var e=function(b,c){return f.map(b,function(d){return k.getCell(d,c)})},a=function(b,c){if(0===b.length)return 0;var d=b[0];return f.findIndex(b,function(h){return!c(d.element(),h.element())}).fold(function(){return b.length},function(h){return h})};return{subgrid:function(b,
c,d,h){var l=b[c].cells().slice(d);l=a(l,h);b=e(b,d).slice(c);h=a(b,h);return{colspan:g.constant(l),rowspan:g.constant(h)}}}});B("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(f,g,k,e){return{toDetails:function(a,b){var c=f.map(a,function(d,h){return f.map(d.cells(),function(l,m){return!1})});return f.map(a,function(d,h){var l=f.bind(d.cells(),function(m,p){if(!1===c[h][p]){for(var q=
k.subgrid(a,h,p,b),t=q.rowspan(),u=q.colspan(),n=h;n<h+t;n++)for(var v=p;v<p+u;v++)c[n][v]=!0;return[g.detailnew(m.element(),q.rowspan(),q.colspan(),m.isNew())]}return[]});return g.rowdetails(l,d.section())})},toGrid:function(a,b,c){for(var d=[],h=0;h<a.grid().rows();h++){for(var l=[],m=0;m<a.grid().columns();m++){var p=e.getAt(a,h,m).map(function(q){return g.elementnew(q.element(),c)}).getOrThunk(function(){return g.elementnew(b.gap(),!0)});l.push(p)}l=g.rowcells(l,a.all()[h].section());d.push(l)}return d}}});
B("ephox.snooker.operate.Redraw","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.dom.Replication ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),function(f,g,k,e,a,b,c,d,h,l){var m=function(p,q,t,u){t===u?k.remove(p,q):k.set(p,q,t)};return{render:function(p,q){var t=[],u=[],n=function(y,D){var C=h.child(p,D).getOrThunk(function(){var F=
e.fromTag(D,l.owner(p).dom());a.append(p,F);return F});c.empty(C);y=f.map(y,function(F){F.isNew()&&t.push(F.element());var H=F.element();c.empty(H);f.each(F.cells(),function(L){L.isNew()&&u.push(L.element());m(L.element(),"colspan",L.colspan(),1);m(L.element(),"rowspan",L.rowspan(),1);a.append(H,L.element())});return H});b.append(C,y)},v=function(y,D){0<y.length?n(y,D):h.child(p,D).bind(c.remove)},w=[],r=[],x=[];f.each(q,function(y){switch(y.section()){case "thead":w.push(y);break;case "tbody":r.push(y);
break;case "tfoot":x.push(y)}});v(w,"thead");v(r,"tbody");v(x,"tfoot");return{newRows:g.constant(t),newCells:g.constant(u)}},copy:function(p){return f.map(p,function(q){var t=d.shallow(q.element());f.each(q.cells(),function(u){var n=d.deep(u.element());m(n,"colspan",u.colspan(),1);m(n,"rowspan",u.rowspan(),1);a.append(t,n)});return t})}}});B("ephox.snooker.model.RunOperation","ephox.katamari.api.Arr ephox.katamari.api.Merger ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.snooker.api.Structs ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.Transitions ephox.snooker.model.Warehouse ephox.snooker.operate.Redraw ephox.snooker.resize.BarPositions ephox.snooker.resize.Bars ephox.sugar.api.dom.Compare ephox.sugar.api.search.Traverse".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u){var n=function(r,x){var y=function(D){return a.findMap(D,function(C){return u.parent(C.element()).map(function(F){var H=u.parent(F).isNone();return b.elementnew(F,H)})}).getOrThunk(function(){return b.elementnew(x.row(),!0)})};return f.map(r,function(D){var C=y(D.details());return b.rowdatanew(C.element(),D.details(),D.section(),C.isNew())})},v=function(r,x){r=h.toDetails(r,t.eq);return n(r,x)},w=function(r,x){r=f.flatten(f.map(r.all(),function(y){return y.cells()}));
return f.find(r,function(y){return t.eq(x,y.element())})};return{run:function(r,x,y,D,C){return function(F,H,L,A,z){var E=d.fromTable(H),G=l.generate(E);return x(G,L).map(function(I){var J=h.toGrid(G,A,!1);I=r(J,I,t.eq,C(A));J=v(I.grid(),A);return{grid:k.constant(J),cursor:I.cursor}}).fold(function(){return e.none()},function(I){var J=m.render(H,I.grid());y(H,I.grid(),z);D(H);q.refresh(F,H,p.height,z);return e.some({cursor:I.cursor,newRows:J.newRows,newCells:J.newCells})})}},toDetailList:v,onCell:function(r,
x){return c.cell(x.element()).bind(function(y){return w(r,y)})},onCells:function(r,x){x=f.map(x.selection(),function(y){return c.cell(y).bind(function(D){return w(r,D)})});x=a.cat(x);return 0<x.length?e.some(x):e.none()},onPaste:function(r,x){return c.cell(x.element()).bind(function(y){return w(r,y).map(function(D){return g.merge(D,{generators:x.generators,clipboard:x.clipboard})})})},onPasteRows:function(r,x){var y=f.map(x.selection(),function(D){return c.cell(D).bind(function(C){return w(r,C)})});
y=a.cat(y);return 0<y.length?e.some(g.merge({cells:y},{generators:x.generators,clipboard:x.clipboard})):e.none()},onMergable:function(r,x){return x.mergable()},onUnmergable:function(r,x){return x.unmergable()}}});B("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(f,g){var k=function(a){return{is:function(b){return a===b},isValue:f.constant(!0),isError:f.constant(!1),getOr:f.constant(a),getOrThunk:f.constant(a),getOrDie:f.constant(a),or:function(b){return k(a)},
orThunk:function(b){return k(a)},fold:function(b,c){return c(a)},map:function(b){return k(b(a))},each:function(b){b(a)},bind:function(b){return b(a)},exists:function(b){return b(a)},forall:function(b){return b(a)},toOption:function(){return g.some(a)}}},e=function(a){return{is:f.constant(!1),isValue:f.constant(!1),isError:f.constant(!0),getOr:f.identity,getOrThunk:function(b){return b()},getOrDie:function(){return f.die(a)()},or:function(b){return b},orThunk:function(b){return b()},fold:function(b,
c){return b(a)},map:function(b){return e(a)},each:f.noop,bind:function(b){return e(a)},exists:f.constant(!1),forall:f.constant(!0),toOption:g.none}};return{value:k,error:e}});B("ephox.snooker.model.Fitment","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Result ephox.snooker.api.Structs ephox.snooker.model.GridRow ephox.snooker.util.Util global!Array global!Error global!Math".split(" "),function(f,g,k,e,a,b,c,d,h){var l=function(q,t){return f.map(q,function(){return e.elementnew(t.cell(),
!0)})},m=function(q,t,u){return q.concat(b.repeat(t,function(n){return a.setCells(q[q.length-1],l(q[q.length-1].cells(),u))}))},p=function(q,t,u){return f.map(q,function(n){return a.setCells(n,n.cells().concat(l(b.range(0,t),u)))})};return{measure:function(q,t,u){if(q.row()>=t.length||q.column()>a.cellLength(t[0]))return k.error("invalid start address out of table bounds, row: "+q.row()+", column: "+q.column());t=t.slice(q.row());q=t[0].cells().slice(q.column());var n=a.cellLength(u[0]);return k.value({rowDelta:g.constant(t.length-
u.length),colDelta:g.constant(q.length-n)})},measureWidth:function(q,t){q=a.cellLength(q[0]);t=a.cellLength(t[0]);return{rowDelta:g.constant(0),colDelta:g.constant(q-t)}},tailor:function(q,t,u){var n=0>t.colDelta()?p:g.identity,v=0>t.rowDelta()?m:g.identity;q=n(q,h.abs(t.colDelta()),u);return v(q,h.abs(t.rowDelta()),u)}}});B("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(f,g,k,e){var a=
function(b,c){return f.foldl(b,function(d,h){return f.exists(d,function(l){return c(l.element(),h.element())})?d:d.concat([h])},[])};return{merge:function(b,c,d,h){if(0===b.length)return b;for(d=c.startRow();d<=c.finishRow();d++)for(var l=c.startCol();l<=c.finishCol();l++)e.mutateCell(b[d],l,k.elementnew(h(),!1));return b},unmerge:function(b,c,d,h){for(var l=!0,m=0;m<b.length;m++)for(var p=0;p<e.cellLength(b[0]);p++){var q=e.getCellElement(b[m],p);q=d(q,c);!0===q&&!1===l?e.mutateCell(b[m],p,k.elementnew(h(),
!0)):!0===q&&(l=!1)}return b},splitRows:function(b,c,d,h){if(0<c&&c<b.length){var l=b[c-1].cells();l=a(l,d);f.each(l,function(m){for(var p=g.none(),q=c;q<b.length;q++)for(var t=0;t<e.cellLength(b[0]);t++){var u=b[q].cells()[t];d(u.element(),m.element())&&(p.isNone()&&(p=g.some(h())),p.each(function(n){e.mutateCell(b[q],t,k.elementnew(n,!0))}))}})}return b}}});B("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow",
"ephox.snooker.operate.MergingOperations"],function(f,g,k,e,a){return{merge:function(b,c,d,h,l){return k.measure(b,c,d).map(function(m){m=k.tailor(c,m,h);var p=b.row(),q=b.column(),t=d.length,u=e.cellLength(d[0]);t=p+t;u=q+u;for(var n=p;n<t;n++)for(var v=q;v<u;v++){var w=m,r=n,x=v,y=l,D=e.getCell(w[r],x);y=f.curry(y,D.element());D=w[r];1<w.length&&1<e.cellLength(D)&&(0<x&&y(e.getCellElement(D,x-1))||x<D.length-1&&y(e.getCellElement(D,x+1))||0<r&&y(e.getCellElement(w[r-1],x))||r<w.length-1&&y(e.getCellElement(w[r+
1],x)))&&a.unmerge(m,e.getCellElement(m[n],v),l,h.cell);w=e.getCellElement(d[n-p],v-q);w=h.replace(w);e.mutateCell(m[n],v,g.elementnew(w,!0))}return m})},insert:function(b,c,d,h,l){a.splitRows(c,b,l,h.cell);l=k.measureWidth(d,c);d=k.tailor(d,l,h);l=k.measureWidth(c,d);c=k.tailor(c,l,h);return c.slice(0,b).concat(d).concat(c.slice(b,c.length))}}});B("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(f,g,k){return{insertRowAt:function(e,
a,b,c,d){var h=e.slice(0,a),l=e.slice(a);b=k.mapCells(e[b],function(m,p){return 0<a&&a<e.length&&c(k.getCellElement(e[a-1],p),k.getCellElement(e[a],p))?k.getCell(e[a],p):g.elementnew(d(m.element(),c),!0)});return h.concat([b]).concat(l)},insertColumnAt:function(e,a,b,c,d){return f.map(e,function(h){var l=0<a&&a<k.cellLength(h)&&c(k.getCellElement(h,a-1),k.getCellElement(h,a))?k.getCell(h,a):g.elementnew(d(k.getCellElement(h,b),c),!0);return k.addCell(h,a,l)})},splitCellIntoColumns:function(e,a,b,
c,d){var h=b+1;return f.map(e,function(l,m){m=m===a?g.elementnew(d(k.getCellElement(l,b),c),!0):k.getCell(l,b);return k.addCell(l,h,m)})},splitCellIntoRows:function(e,a,b,c,d){var h=a+1,l=e.slice(0,h);h=e.slice(h);e=k.mapCells(e[a],function(m,p){return p===b?g.elementnew(d(m.element(),c),!0):m});return l.concat([e]).concat(h)},deleteRowsAt:function(e,a,b){return e.slice(0,a).concat(e.slice(b+1))},deleteColumnsAt:function(e,a,b){e=f.map(e,function(c){var d=c.cells().slice(0,a).concat(c.cells().slice(b+
1));return g.rowcells(d,c.section())});return f.filter(e,function(c){return 0<c.cells().length})}}});B("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(f,g,k){var e=function(c,d,h,l){var m=function(p){return f.exists(d,function(q){return h(p.element(),q.element())})};return f.map(c,function(p){return k.mapCells(p,function(q){return m(q)?g.elementnew(l(q.element(),h),!0):q})})},a=function(c,d,h,l){return void 0!==
k.getCellElement(c[d],h)&&0<d&&l(k.getCellElement(c[d-1],h),k.getCellElement(c[d],h))},b=function(c,d,h){return 0<d&&h(k.getCellElement(c,d-1),k.getCellElement(c,d))};return{replaceColumn:function(c,d,h,l){var m=f.bind(c,function(p,q){return a(c,q,d,h)||b(p,d,h)?[]:[k.getCell(p,d)]});return e(c,m,h,l)},replaceRow:function(c,d,h,l){var m=c[d],p=f.bind(m.cells(),function(q,t){return a(c,d,t,h)||b(m,t,h)?[]:[q]});return e(c,p,h,l)}}});B("ephox.snooker.api.TableOperations","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.snooker.api.Generators ephox.snooker.api.Structs ephox.snooker.api.TableContent ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.GridRow ephox.snooker.model.RunOperation ephox.snooker.model.TableMerge ephox.snooker.model.Transitions ephox.snooker.model.Warehouse ephox.snooker.operate.MergingOperations ephox.snooker.operate.ModificationOperations ephox.snooker.operate.TransformOperations ephox.snooker.resize.Adjustments ephox.sugar.api.dom.Remove".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n,v,w,r){l=function(A){0===d.cells(A).length&&r.remove(A)};var x=e.immutable("grid","cursor"),y=function(A,z,E){return D(A,z,E).orThunk(function(){return D(A,0,0)})},D=function(A,z,E){return k.from(A[z]).bind(function(G){return k.from(G.cells()[E]).bind(function(I){return k.from(I.element())})})},C=function(A,z,E){return x(A,D(A,z,E))},F=function(A){return f.foldl(A,function(z,E){return f.exists(z,function(G){return G.row()===E.row()})?z:z.concat([E])},[]).sort(function(z,
E){return z.row()-E.row()})},H=function(A){return f.foldl(A,function(z,E){return f.exists(z,function(G){return G.column()===E.column()})?z:z.concat([E])},[]).sort(function(z,E){return z.column()-E.column()})},L=function(A,z,E){A=h.fromPastedRows(A,E);A=t.generate(A);return q.toGrid(A,z,!0)};e=w.adjustWidthTo;return{insertRowBefore:m.run(function(A,z,E,G){var I=z.row(),J=z.row();A=n.insertRowAt(A,J,I,E,G.getOrInit);return C(A,J,z.column())},m.onCell,g.noop,g.noop,a.modification),insertRowsBefore:m.run(function(A,
z,E,G){var I=z[0].row(),J=z[0].row(),M=F(z);A=f.foldl(M,function(K,O){return n.insertRowAt(K,J,I,E,G.getOrInit)},A);return C(A,J,z[0].column())},m.onCells,g.noop,g.noop,a.modification),insertRowAfter:m.run(function(A,z,E,G){var I=z.row(),J=z.row()+z.rowspan();A=n.insertRowAt(A,J,I,E,G.getOrInit);return C(A,J,z.column())},m.onCell,g.noop,g.noop,a.modification),insertRowsAfter:m.run(function(A,z,E,G){var I=F(z),J=I[I.length-1].row(),M=I[I.length-1].row()+I[I.length-1].rowspan();A=f.foldl(I,function(K,
O){return n.insertRowAt(K,M,J,E,G.getOrInit)},A);return C(A,M,z[0].column())},m.onCells,g.noop,g.noop,a.modification),insertColumnBefore:m.run(function(A,z,E,G){var I=z.column(),J=z.column();A=n.insertColumnAt(A,J,I,E,G.getOrInit);return C(A,z.row(),J)},m.onCell,e,g.noop,a.modification),insertColumnsBefore:m.run(function(A,z,E,G){var I=H(z),J=I[0].column(),M=I[0].column();A=f.foldl(I,function(K,O){return n.insertColumnAt(K,M,J,E,G.getOrInit)},A);return C(A,z[0].row(),M)},m.onCells,e,g.noop,a.modification),
insertColumnAfter:m.run(function(A,z,E,G){var I=z.column(),J=z.column()+z.colspan();A=n.insertColumnAt(A,J,I,E,G.getOrInit);return C(A,z.row(),J)},m.onCell,e,g.noop,a.modification),insertColumnsAfter:m.run(function(A,z,E,G){var I=z[z.length-1].column(),J=z[z.length-1].column()+z[z.length-1].colspan(),M=H(z);A=f.foldl(M,function(K,O){return n.insertColumnAt(K,J,I,E,G.getOrInit)},A);return C(A,z[0].row(),J)},m.onCells,e,g.noop,a.modification),splitCellIntoColumns:m.run(function(A,z,E,G){A=n.splitCellIntoColumns(A,
z.row(),z.column(),E,G.getOrInit);return C(A,z.row(),z.column())},m.onCell,e,g.noop,a.modification),splitCellIntoRows:m.run(function(A,z,E,G){A=n.splitCellIntoRows(A,z.row(),z.column(),E,G.getOrInit);return C(A,z.row(),z.column())},m.onCell,g.noop,g.noop,a.modification),eraseColumns:m.run(function(A,z,E,G){E=H(z);A=n.deleteColumnsAt(A,E[0].column(),E[E.length-1].column());z=y(A,z[0].row(),z[0].column());return x(A,z)},m.onCells,e,l,a.modification),eraseRows:m.run(function(A,z,E,G){E=F(z);A=n.deleteRowsAt(A,
E[0].row(),E[E.length-1].row());z=y(A,z[0].row(),z[0].column());return x(A,z)},m.onCells,g.noop,l,a.modification),makeColumnHeader:m.run(function(A,z,E,G){A=v.replaceColumn(A,z.column(),E,G.replaceOrInit);return C(A,z.row(),z.column())},m.onCell,g.noop,g.noop,a.transform("row","th")),unmakeColumnHeader:m.run(function(A,z,E,G){A=v.replaceColumn(A,z.column(),E,G.replaceOrInit);return C(A,z.row(),z.column())},m.onCell,g.noop,g.noop,a.transform(null,"td")),makeRowHeader:m.run(function(A,z,E,G){A=v.replaceRow(A,
z.row(),E,G.replaceOrInit);return C(A,z.row(),z.column())},m.onCell,g.noop,g.noop,a.transform("col","th")),unmakeRowHeader:m.run(function(A,z,E,G){A=v.replaceRow(A,z.row(),E,G.replaceOrInit);return C(A,z.row(),z.column())},m.onCell,g.noop,g.noop,a.transform(null,"td")),mergeCells:m.run(function(A,z,E,G){G=z.cells();c.merge(G);A=u.merge(A,z.bounds(),E,g.constant(G[0]));return x(A,k.from(G[0]))},m.onMergable,g.noop,g.noop,a.merging),unmergeCells:m.run(function(A,z,E,G){A=f.foldr(z,function(I,J){return u.unmerge(I,
J,E,G.combine(J))},A);return x(A,k.from(z[0]))},m.onUnmergable,e,g.noop,a.merging),pasteCells:m.run(function(A,z,E,G){G=function(J,M){J=h.fromTable(J);J=t.generate(J);return q.toGrid(J,M,!0)}(z.clipboard(),z.generators());var I=b.address(z.row(),z.column());return p.merge(I,A,G,z.generators(),E).fold(function(){return x(A,k.some(z.element()))},function(J){var M=y(J,z.row(),z.column());return x(J,M)})},m.onPaste,e,g.noop,a.modification),pasteRowsBefore:m.run(function(A,z,E,G){var I=A[z.cells[0].row()];
G=z.cells[0].row();I=L(z.clipboard(),z.generators(),I);A=p.insert(G,A,I,z.generators(),E);z=y(A,z.cells[0].row(),z.cells[0].column());return x(A,z)},m.onPasteRows,g.noop,g.noop,a.modification),pasteRowsAfter:m.run(function(A,z,E,G){var I=A[z.cells[0].row()];G=z.cells[z.cells.length-1].row()+z.cells[z.cells.length-1].rowspan();I=L(z.clipboard(),z.generators(),I);A=p.insert(G,A,I,z.generators(),E);z=y(A,z.cells[0].row(),z.cells[0].column());return x(A,z)},m.onPasteRows,g.noop,g.noop,a.modification)}});
B("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(f,g){var k=function(e){return g.fromDom(e.getBody())};return{getBody:k,getIsRoot:function(e){return function(a){return f.eq(a,k(e))}},addSizeSuffix:function(e){/^[0-9]+$/.test(e)&&(e+="px");return e},removePxSuffix:function(e){return e?e.replace(/px$/,""):""}}});B("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(f){var g=function(k){return"rtl"===f.get(k,"direction")?
"rtl":"ltr"};return{onDirection:function(k,e){return function(a){return"rtl"===g(a)?e:k}},getDirection:g}});B("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(f,g){var k={isRtl:f.constant(!1)},e={isRtl:f.constant(!0)};return{directionAt:function(a){return"rtl"===g.getDirection(a)?e:k}}});B("tinymce.plugins.table.actions.TableActions","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CellMutations ephox.snooker.api.TableDirection ephox.snooker.api.TableFill ephox.snooker.api.TableGridSize ephox.snooker.api.TableOperations ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.Direction".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t){return function(u,n){if(!1!==u.settings.table_clone_elements)if("string"==typeof u.settings.table_clone_elements)var v=u.settings.table_clone_elements.split(/[ ,]/);else Array.isArray(u.settings.table_clone_elements)&&(v=u.settings.table_clone_elements);var w=k.from(v),r=function(E,G,I,J){return function(M,K){var O=p.descendants(M,"td[data-mce-style],th[data-mce-style]");f.each(O,function(N){m.remove(N,"data-mce-style")});O=J();var R=h.fromDom(u.getDoc()),U=a(t.directionAt);
R=b.cellOperations(I,R,w);return G(M)?E(O,M,K,R,U).bind(function(N){f.each(N.newRows(),function(P){u.fire("newrow",{node:P.dom()});P.dom()});f.each(N.newCells(),function(P){u.fire("newcell",{node:P.dom()});P.dom()});return N.cursor().map(function(P){var Q=u.dom.createRng();Q.setStart(P.dom(),0);Q.setEnd(P.dom(),0);return Q})}):k.none()}};v=r(d.eraseRows,function(E){E=c.getGridSize(E);return"table"===l.name(q.getBody(u))===!1||1<E.rows()},g.noop,n);var x=r(d.eraseColumns,function(E){E=c.getGridSize(E);
return"table"===l.name(q.getBody(u))===!1||1<E.columns()},g.noop,n),y=r(d.insertRowsBefore,g.always,g.noop,n),D=r(d.insertRowsAfter,g.always,g.noop,n),C=r(d.insertColumnsBefore,g.always,e.halve,n),F=r(d.insertColumnsAfter,g.always,e.halve,n),H=r(d.mergeCells,g.always,g.noop,n),L=r(d.unmergeCells,g.always,g.noop,n),A=r(d.pasteRowsBefore,g.always,g.noop,n),z=r(d.pasteRowsAfter,g.always,g.noop,n);n=r(d.pasteCells,g.always,g.noop,n);return{deleteRow:v,deleteColumn:x,insertRowsBefore:y,insertRowsAfter:D,
insertColumnsBefore:C,insertColumnsAfter:F,mergeCells:H,unmergeCells:L,pasteRowsBefore:A,pasteRowsAfter:z,pasteCells:n}}});B("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(f,g,k,e,a){return{copyRows:function(b,c,d){b=f.fromTable(b);var h=e.generate(b);return g.onCells(h,c).map(function(l){l=k.toGrid(h,d,!1).slice(l[0].row(),l[l.length-1].row()+
l[l.length-1].rowspan());l=g.toDetailList(l,d);return a.copy(l)})}}});B("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(f){return f("tinymce.Env")});B("tinymce.plugins.table.actions.Styles",["tinymce.core.util.Tools"],function(f){return{applyAlign:function(g,k,e){e&&g.formatter.apply("align"+e,{},k)},applyVAlign:function(g,k,e){e&&g.formatter.apply("valign"+e,{},k)},unApplyAlign:function(g,k){f.each(["left","center","right"],function(e){g.formatter.remove("align"+e,{},k)})},unApplyVAlign:function(g,
k){f.each(["top","middle","bottom"],function(e){g.formatter.remove("valign"+e,{},k)})},getTDTHOverallStyle:function(g,k,e){k=g.select("td,th",k);var a;a:for(var b=0;b<k.length;b++){var c=g.getStyle(k[b],e);"undefined"===typeof a&&(a=c);if(a!=c){a="";break a}}return a}}});B("tinymce.plugins.table.ui.Helpers",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util"],function(f,g,k){var e=function(a,b){a=a.dom;var c=b.control.rootControl,d=c.toJSON(),h=a.parseStyle(d.style);
"style"===b.control.name()?(c.find("#borderStyle").value(h["border-style"]||"")[0].fire("select"),c.find("#borderColor").value(h["border-color"]||"")[0].fire("change"),c.find("#backgroundColor").value(h["background-color"]||"")[0].fire("change"),c.find("#width").value(h.width||"").fire("change"),c.find("#height").value(h.height||"").fire("change")):(h["border-style"]=d.borderStyle,h["border-color"]=d.borderColor,h["background-color"]=d.backgroundColor,h.width=d.width?k.addSizeSuffix(d.width):"",h.height=
d.height?k.addSizeSuffix(d.height):"");c.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(h))))};return{createStyleForm:function(a){var b=function(c){var d=a.settings.color_picker_callback;if(d)return d.call(a,function(h){c.control.value(h).fire("change")},c.control.value())};return{title:"Advanced",type:"form",defaults:{onchange:f.curry(e,a)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},
items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:f.curry(e,a),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:b},
{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:b}]}]}},buildListItems:function(a,b,c){var d=function(h,l){l=l||[];g.each(h,function(m){var p={text:m.text||m.title};m.menu?p.menu=d(m.menu):(p.value=m.value,b&&b(p));l.push(p)});return l};return d(a,c||[])},updateStyleField:e,extractAdvancedStyles:function(a,b){b=a.parseStyle(a.getAttrib(b,"style"));var c={};b["border-style"]&&(c.borderStyle=b["border-style"]);b["border-color"]&&(c.borderColor=b["border-color"]);b["background-color"]&&
(c.backgroundColor=b["background-color"]);c.style=a.serializeStyle(b);return c}}});B("tinymce.plugins.table.ui.TableDialog","ephox.katamari.api.Fun tinymce.core.Env tinymce.core.util.Tools tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.actions.Styles tinymce.plugins.table.alien.Util tinymce.plugins.table.ui.Helpers".split(" "),function(f,g,k,e,a,b,c){function d(m,p,q,t){if("TD"===p.tagName||"TH"===p.tagName)m.setStyle(p,q,t);else if(p.children)for(var u=0;u<p.children.length;u++)d(m,
p.children[u],q,t)}var h=function(m,p){var q=m.dom,t={width:q.getStyle(p,"width")||q.getAttrib(p,"width"),height:q.getStyle(p,"height")||q.getAttrib(p,"height"),cellspacing:q.getStyle(p,"border-spacing")||q.getAttrib(p,"cellspacing"),cellpadding:q.getAttrib(p,"data-mce-cell-padding")||q.getAttrib(p,"cellpadding")||a.getTDTHOverallStyle(m.dom,p,"padding"),border:q.getAttrib(p,"data-mce-border")||q.getAttrib(p,"border")||a.getTDTHOverallStyle(m.dom,p,"border"),borderColor:q.getAttrib(p,"data-mce-border-color"),
caption:!!q.select("caption",p)[0],"class":q.getAttrib(p,"class")};k.each(["left","center","right"],function(u){m.formatter.matchNode(p,"align"+u)&&(t.align=u)});!1!==m.settings.table_advtab&&k.extend(t,c.extractAdvancedStyles(q,p));return t},l=function(m,p,q){var t=m.dom,u;c.updateStyleField(m,q);var n=q.control.rootControl.toJSON();!1===n["class"]&&delete n["class"];m.undoManager.transact(function(){p||(p=e.insert(m,n.cols||1,n.rows||1));var v=p,w=m.dom,r={},x={};r["class"]=n["class"];x.height=
b.addSizeSuffix(n.height);w.getAttrib(v,"width")&&!m.settings.table_style_by_css?r.width=b.removePxSuffix(n.width):x.width=b.addSizeSuffix(n.width);m.settings.table_style_by_css?(x["border-width"]=b.addSizeSuffix(n.border),x["border-spacing"]=b.addSizeSuffix(n.cellspacing),k.extend(r,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):k.extend(r,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing});if(m.settings.table_style_by_css&&
v.children)for(var y=0;y<v.children.length;y++)d(w,v.children[y],{"border-width":b.addSizeSuffix(n.border),"border-color":n.borderColor,padding:b.addSizeSuffix(n.cellpadding)});n.style?k.extend(x,w.parseStyle(n.style)):x=k.extend({},w.parseStyle(w.getAttrib(v,"style")),x);r.style=w.serializeStyle(x);w.setAttribs(v,r);(u=t.select("caption",p)[0])&&!n.caption&&t.remove(u);!u&&n.caption&&(u=t.create("caption"),u.innerHTML=g.ie?"\u00a0":'<br data-mce-bogus="1"/>',p.insertBefore(u,p.firstChild));a.unApplyAlign(m,
p);n.align&&a.applyAlign(m,p,n.align);m.focus();m.addVisual()})};return{open:function(m,p){var q=m.dom,t,u={};if(!0===p)(t=q.getParent(m.selection.getStart(),"table"))&&(u=h(m,t));else{var n={label:"Cols",name:"cols"};var v={label:"Rows",name:"rows"}}m.settings.table_class_list?(u["class"]&&(u["class"]=u["class"].replace(/\s*mce\-item\-table\s*/g,"")),p={name:"class",type:"listbox",label:"Class",values:c.buildListItems(m.settings.table_class_list,function(w){w.value&&(w.textStyle=function(){return m.formatter.getCssText({block:"table",
classes:[w.value]})})})}):p={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};n={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==m.settings.table_appearance_options?[n,v,{label:"Width",name:"width",onchange:f.curry(c.updateStyleField,m)},{label:"Height",name:"height",onchange:f.curry(c.updateStyleField,m)},{label:"Cell spacing",name:"cellspacing"},
{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[n,v,{label:"Width",name:"width",onchange:f.curry(c.updateStyleField,m)},{label:"Height",name:"height",onchange:f.curry(c.updateStyleField,m)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},p]};!1!==m.settings.table_advtab?m.windowManager.open({title:"Table properties",
data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:n},c.createStyleForm(m)],onsubmit:f.curry(l,m,t)}):m.windowManager.open({title:"Table properties",data:u,body:n,onsubmit:f.curry(l,m,t)})}}});B("tinymce.plugins.table.ui.RowDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(f,g,k,e,a){function b(d,h,l){var m=d.dom;a.updateStyleField(d,l);var p=l.control.rootControl.toJSON();
d.undoManager.transact(function(){g.each(h,function(q){var t=p.scope;t&&m.setAttrib(q,"scope",t);(t=p.style)&&m.setAttrib(q,"style",t);(t=p["class"])&&m.setAttrib(q,"class",t);(t=e.addSizeSuffix(p.height))&&m.setStyle(q,"height",t);if(p.type!==q.parentNode.nodeName.toLowerCase()){t=d.dom;var u=p.type,n=t.getParent(q,"table"),v=q.parentNode,w=t.select(u,n)[0];w||(w=t.create(u),n.firstChild?"CAPTION"===n.firstChild.nodeName?t.insertAfter(w,n.firstChild):n.insertBefore(w,n.firstChild):n.appendChild(w));
w.appendChild(q);v.hasChildNodes()||t.remove(v)}1===h.length&&k.unApplyAlign(d,q);p.align&&k.applyAlign(d,q,p.align)});d.focus()})}var c=function(d,h){var l=d.dom,m={height:l.getStyle(h,"height")||l.getAttrib(h,"height"),scope:l.getAttrib(h,"scope"),"class":l.getAttrib(h,"class")};m.type=h.parentNode.nodeName.toLowerCase();g.each(["left","center","right"],function(p){d.formatter.matchNode(h,"align"+p)&&(m.align=p)});!1!==d.settings.table_row_advtab&&g.extend(m,a.extractAdvancedStyles(l,h));return m};
return{open:function(d){var h=d.dom,l,m=[];var p=d.dom.getParent(d.selection.getStart(),"table");var q=d.dom.getParent(d.selection.getStart(),"td,th");g.each(p.rows,function(t){g.each(t.cells,function(u){if(h.getAttrib(u,"data-mce-selected")||u==q)return m.push(t),!1})});if(p=m[0])p=1<m.length?{height:"",scope:"","class":"",align:"",type:p.parentNode.nodeName.toLowerCase()}:c(d,p),d.settings.table_row_class_list&&(l={name:"class",type:"listbox",label:"Class",values:a.buildListItems(d.settings.table_row_class_list,
function(t){t.value&&(t.textStyle=function(){return d.formatter.getCssText({block:"tr",classes:[t.value]})})})}),l={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
{text:"Right",value:"right"}]},{label:"Height",name:"height"},l]},!1!==d.settings.table_row_advtab?d.windowManager.open({title:"Row properties",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},a.createStyleForm(h)],onsubmit:f.curry(b,d,m)}):d.windowManager.open({title:"Row properties",data:p,body:l,onsubmit:f.curry(b,d,m)})}}});B("tinymce.plugins.table.ui.CellDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util",
"tinymce.plugins.table.ui.Helpers"],function(f,g,k,e,a){var b=function(d,h){var l=d.dom,m={width:l.getStyle(h,"width")||l.getAttrib(h,"width"),height:l.getStyle(h,"height")||l.getAttrib(h,"height"),scope:l.getAttrib(h,"scope"),"class":l.getAttrib(h,"class")};m.type=h.nodeName.toLowerCase();g.each(["left","center","right"],function(p){d.formatter.matchNode(h,"align"+p)&&(m.align=p)});g.each(["top","middle","bottom"],function(p){d.formatter.matchNode(h,"valign"+p)&&(m.valign=p)});!1!==d.settings.table_cell_advtab&&
g.extend(m,a.extractAdvancedStyles(l,h));return m},c=function(d,h,l){var m=d.dom;var p=l.control.rootControl.toJSON();d.undoManager.transact(function(){g.each(h,function(q){var t=p.scope;t&&m.setAttrib(q,"scope",t);(t=p.style)&&m.setAttrib(q,"style",t);(t=p["class"])&&m.setAttrib(q,"class",t);(t=e.addSizeSuffix(p.width))&&m.setStyle(q,"width",t);(t=e.addSizeSuffix(p.height))&&m.setStyle(q,"height",t);p.type&&q.nodeName.toLowerCase()!==p.type&&(q=m.rename(q,p.type));1===h.length&&(k.unApplyAlign(d,
q),k.unApplyVAlign(d,q));p.align&&k.applyAlign(d,q,p.align);p.valign&&k.applyVAlign(d,q,p.valign)});d.focus()})};return{open:function(d){var h,l=[];l=d.dom.select("td[data-mce-selected],th[data-mce-selected]");var m=d.dom.getParent(d.selection.getStart(),"td,th");!l.length&&m&&l.push(m);if(m=m||l[0])m=1<l.length?{width:"",height:"",scope:"","class":"",align:"",style:"",type:m.nodeName.toLowerCase()}:b(d,m),d.settings.table_cell_class_list&&(h={name:"class",type:"listbox",label:"Class",values:a.buildListItems(d.settings.table_cell_class_list,
function(p){p.value&&(p.textStyle=function(){return d.formatter.getCssText({block:"td",classes:[p.value]})})})}),h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:f.curry(a.updateStyleField,d)},{label:"Height",name:"height",onchange:f.curry(a.updateStyleField,d)},{label:"Cell type",name:"type",type:"listbox",text:"None",
minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},h]},!1!==d.settings.table_cell_advtab?d.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:m,body:[{title:"General",type:"form",items:h},a.createStyleForm(d)],onsubmit:f.curry(c,d,l)}):d.windowManager.open({title:"Cell properties",data:m,body:h,onsubmit:f.curry(c,
d,l)})}}});B("tinymce.plugins.table.actions.TableCommands","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CopyRows ephox.snooker.api.TableFill ephox.snooker.api.TableLookup ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element tinymce.core.util.Tools tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.ui.TableDialog tinymce.plugins.table.ui.RowDialog tinymce.plugins.table.ui.CellDialog".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n){var v=m.each,w=k.none();return{registerCommands:function(r,x,y,D){var C=p.getIsRoot(r),F=function(){return l.fromDom(r.dom.getParent(r.selection.getStart(),"th,td"))},H=function(z){var E=F();b.table(E,C).each(function(G){var I=q.forMenu(D,G,E);z(G,I).each(function(J){r.selection.setRng(J);r.focus();y.clear(G)})})},L=function(z){var E=F();return b.table(E,C).bind(function(G){var I=l.fromDom(r.getDoc()),J=q.forMenu(D,G,E);I=a.cellOperations(g.noop,I,k.none());
return e.copyRows(G,J,I)})},A=function(z){w.each(function(E){var G=f.map(E,function(J){return h.deep(J)}),I=F();b.table(I,C).bind(function(J){var M=l.fromDom(r.getDoc());M=a.paste(M);M=q.pasteRows(D,J,I,G,M);z(J,M).each(function(K){r.selection.setRng(K);r.focus();y.clear(J)})})})};v({mceTableSplitCells:function(){H(x.unmergeCells)},mceTableMergeCells:function(){H(x.mergeCells)},mceTableInsertRowBefore:function(){H(x.insertRowsBefore)},mceTableInsertRowAfter:function(){H(x.insertRowsAfter)},mceTableInsertColBefore:function(){H(x.insertColumnsBefore)},
mceTableInsertColAfter:function(){H(x.insertColumnsAfter)},mceTableDeleteCol:function(){H(x.deleteColumn)},mceTableDeleteRow:function(){H(x.deleteRow)},mceTableCutRow:function(z){w=L();H(x.deleteRow)},mceTableCopyRow:function(z){w=L()},mceTablePasteRowBefore:function(z){A(x.pasteRowsBefore)},mceTablePasteRowAfter:function(z){A(x.pasteRowsAfter)},mceTableDelete:function(){var z=l.fromDom(r.dom.getParent(r.selection.getStart(),"th,td"));b.table(z,C).filter(g.not(C)).each(function(E){var G=l.fromText("");
c.after(E,G);d.remove(E);E=r.dom.createRng();E.setStart(G.dom(),0);E.setEnd(G.dom(),0);r.selection.setRng(E)})}},function(z,E){r.addCommand(E,z)});v({mceInsertTable:g.curry(t.open,r),mceTableProps:g.curry(t.open,r,!0),mceTableRowProps:g.curry(u.open,r),mceTableCellProps:g.curry(n.open,r)},function(z,E){r.addCommand(E,function(G,I){z(I)})})},getClipboardRows:function(){return w.fold(function(){},function(r){return f.map(r,function(x){return x.dom()})})},setClipboardRows:function(r){r=f.map(r,l.fromDom);
w=k.from(r)}}});B("tinymce.plugins.table.actions.TableWire","ephox.snooker.api.ResizeWire ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.properties.Css tinymce.plugins.table.alien.Util".split(" "),function(f,g,k,e,a,b,c){var d=function(){var h=a.fromTag("div");b.setAll(h,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});g.append(e.body(),h);return h};return{get:function(h,l){return h.inline?f.body(c.getBody(h),
d()):f.only(a.fromDom(h.getDoc()))},remove:function(h,l){h.inline&&k.remove(l.parent())}}});B("ephox.snooker.api.CellLocation",[],function(){return{none:function(f){return{fold:function(g,k,e,a){return g(f)}}},first:function(f){return{fold:function(g,k,e,a){return k(f)}}},middle:function(f,g){return{fold:function(k,e,a,b){return a(f,g)}}},last:function(f){return{fold:function(g,k,e,a){return a(f)}}}}});B("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation",
"ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(f,g,k,e,a){var b=function(c,d){return e.table(c,d).bind(function(h){var l=e.cells(h);return f.findIndex(l,function(m){return a.eq(c,m)}).map(function(m){return{index:g.constant(m),all:g.constant(l)}})})};return{next:function(c,d){return b(c,d).fold(function(){return k.none(c)},function(h){return h.index()+1<h.all().length?k.middle(c,h.all()[h.index()+1]):k.last(c)})},prev:function(c,d){return b(c,d).fold(function(){return k.none()},
function(h){return 0<=h.index()-1?k.middle(c,h.all()[h.index()-1]):k.first(c)})}}});B("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(f,g){f=f.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);return{before:f.before,on:f.on,after:f.after,cata:function(k,e,a,b){return k.fold(e,a,b)},getStart:function(k){return k.fold(g.identity,g.identity,g.identity)}}});B("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct",
"ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(f,g,k,e,a){var b=f.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);f=g.immutable("start","soffset","finish","foffset");var c=function(d){return d.match({domRange:function(h){return k.fromDom(h.startContainer)},relative:function(h,l){return a.getStart(h)},exact:function(h,l,m,p){return h}})};return{domRange:b.domRange,relative:b.relative,
exact:b.exact,exactFromRange:function(d){return b.exact(d.start(),d.soffset(),d.finish(),d.foffset())},range:f,getWin:function(d){d=c(d);return e.defaultView(d)}}});B("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(f,g,k){var e=function(a,b,c,d){var h=k.owner(a).dom().createRange();h.setStart(a.dom(),b);h.setEnd(c.dom(),d);return h};return{after:function(a,b,c,d){var h=e(a,b,c,d);a=f.eq(a,c)&&b===d;return h.collapsed&&
!a},commonAncestorContainer:function(a,b,c,d){a=e(a,b,c,d);return g.fromDom(a.commonAncestorContainer)}}});B("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(f,g,k){return{fromElements:function(e,a){var b=(a||k).createDocumentFragment();f.each(e,function(c){b.appendChild(c.dom())});return g.fromDom(b)}}});B("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare",
"ephox.sugar.api.node.Element"],function(f,g,k,e){var a=function(l,m){l.selectNodeContents(m.dom())},b=function(l,m){m.fold(function(p){l.setStartBefore(p.dom())},function(p,q){l.setStart(p.dom(),q)},function(p){l.setStartAfter(p.dom())})},c=function(l,m){m.fold(function(p){l.setEndBefore(p.dom())},function(p,q){l.setEnd(p.dom(),q)},function(p){l.setEndAfter(p.dom())})},d=function(l){l.deleteContents()},h=function(l){return{left:f.constant(l.left),top:f.constant(l.top),right:f.constant(l.right),bottom:f.constant(l.bottom),
width:f.constant(l.width),height:f.constant(l.height)}};return{create:function(l){return l.document.createRange()},replaceWith:function(l,m){d(l);l.insertNode(m.dom())},selectNodeContents:function(l,m){l=l.document.createRange();a(l,m);return l},selectNodeContentsUsing:a,isCollapsed:function(l,m,p,q){return k.eq(l,p)&&m===q},relativeToNative:function(l,m,p){l=l.document.createRange();b(l,m);c(l,p);return l},exactToNative:function(l,m,p,q,t){l=l.document.createRange();l.setStart(m.dom(),p);l.setEnd(q.dom(),
t);return l},deleteContents:d,cloneFragment:function(l){l=l.cloneContents();return e.fromDom(l)},getFirstRect:function(l){var m=l.getClientRects();l=0<m.length?m[0]:l.getBoundingClientRect();return 0<l.width||0<l.height?g.some(l).map(h):g.none()},getBounds:function(l){l=l.getBoundingClientRect();return 0<l.width||0<l.height?g.some(l).map(h):g.none()},isWithin:function(l,m){return 1>m.compareBoundaryPoints(l.END_TO_START,l)&&-1<m.compareBoundaryPoints(l.START_TO_END,l)},toString:function(l){return l.toString()}}});
B("ephox.sugar.selection.core.SelectionDirection","ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Thunk ephox.sugar.api.node.Element ephox.sugar.selection.core.NativeRange".split(" "),function(f,g,k,e,a,b){var c=f.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),d=function(p,q,t){return q(a.fromDom(t.startContainer),t.startOffset,a.fromDom(t.endContainer),t.endOffset)},h=function(p,q){return q.match({domRange:function(t){return{ltr:g.constant(t),
rtl:k.none}},relative:function(t,u){return{ltr:e.cached(function(){return b.relativeToNative(p,t,u)}),rtl:e.cached(function(){return k.some(b.relativeToNative(p,u,t))})}},exact:function(t,u,n,v){return{ltr:e.cached(function(){return b.exactToNative(p,t,u,n,v)}),rtl:e.cached(function(){return k.some(b.exactToNative(p,n,v,t,u))})}}})},l=function(p,q){var t=q.ltr();return t.collapsed?q.rtl().filter(function(u){return!1===u.collapsed}).map(function(u){return c.rtl(a.fromDom(u.endContainer),u.endOffset,
a.fromDom(u.startContainer),u.startOffset)}).getOrThunk(function(){return d(p,c.ltr,t)}):d(p,c.ltr,t)},m=function(p,q){q=h(p,q);return l(p,q)};return{ltr:c.ltr,rtl:c.rtl,diagnose:m,asLtrRange:function(p,q){return m(p,q).match({ltr:function(t,u,n,v){var w=p.document.createRange();w.setStart(t.dom(),u);w.setEnd(n.dom(),v);return w},rtl:function(t,u,n,v){var w=p.document.createRange();w.setStart(n.dom(),v);w.setEnd(t.dom(),u);return w}})}}});B("ephox.sugar.selection.alien.Geometry",["global!Math"],function(f){return{inRect:function(g,
k,e){return k>=g.left&&k<=g.right&&e>=g.top&&e<=g.bottom},searchForPoint:function(g,k,e,a,b){if(0===b)return 0;if(k===a)return b-1;for(var c=1;c<b;c++){var d=g(c),h=f.abs(k-d.left);if(!(e>d.bottom)){if(e<d.top||h>a)return c-1;a=h}}return 0}}});B("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(f,g,k,e,a){var b=function(c,d,h,l,m){var p=function(t){var u=c.dom().createRange();
u.setStart(d.dom(),t);u.collapse(!0);return u},q=k.get(d).length;h=e.searchForPoint(function(t){return p(t).getBoundingClientRect()},h,l,m.right,q);return p(h)};return{locate:function(c,d,h,l){var m=c.dom().createRange();m.selectNode(d.dom());m=m.getClientRects();return g.findMap(m,function(p){return e.inRect(p,h,l)?f.some(p):f.none()}).map(function(p){return b(c,d,h,l,p)})}}});B("ephox.sugar.selection.query.ContainerPoint","ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse ephox.sugar.selection.alien.Geometry ephox.sugar.selection.query.TextPoint global!Math".split(" "),
function(f,g,k,e,a,b,c){var d=function(h,l,m,p){var q=h.dom().createRange();l=e.children(l);return g.findMap(l,function(t){q.selectNode(t.dom());return a.inRect(q.getBoundingClientRect(),m,p)?(k.isText(t)?b.locate:d)(h,t,m,p):f.none()})};return{locate:function(h,l,m,p){var q=h.dom().createRange();q.selectNode(l.dom());q=q.getBoundingClientRect();m=c.max(q.left,c.min(q.right,m));p=c.max(q.top,c.min(q.bottom,p));return(k.isText(l)?b.locate:d)(h,l,m,p)}}});B("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option",
"ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(f,g,k){var e=function(c,d,h){c=c.dom().createRange();c.selectNode(d.dom());c.collapse(h);return c},a=function(c,d,h){var l=c.dom().createRange();l.selectNode(d.dom());l=l.getBoundingClientRect();var m=h-l.left<l.right-h?!0:!1;return(!0===m?k.first:k.last)(d).map(function(p){return e(c,p,m)})},b=function(c,d,h){var l=d.dom().getBoundingClientRect();return f.some(e(c,d,h-l.left<l.right-h?!0:!1))};return{search:function(c,
d,h){return(0===g.children(d).length?b:a)(c,d,h)}}});B("ephox.sugar.selection.query.CaretRange","ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.query.ContainerPoint ephox.sugar.selection.query.EdgePoint global!document global!Math".split(" "),function(f,g,k,e,a,b,c,d){var h=function(t,u,n){return f.from(t.dom().caretPositionFromPoint(u,n)).bind(function(v){if(null===v.offsetNode)return f.none();var w=
t.dom().createRange();w.setStart(v.offsetNode,v.offset);w.collapse();return f.some(w)})},l=function(t,u,n){return f.from(t.dom().caretRangeFromPoint(u,n))},m=function(t,u,n,v){var w=t.dom().createRange();w.selectNode(u.dom());w=w.getBoundingClientRect();n=d.max(w.left,d.min(w.right,n));v=d.max(w.top,d.min(w.bottom,v));return a.locate(t,u,n,v)},p=function(t,u,n){return f.from(t.dom().elementFromPoint(u,n)).map(g.fromDom).bind(function(v){var w=function(){return b.search(t,v,u)};return 0===k.children(v).length?
w():m(t,v,u,n).orThunk(w)})},q=c.caretPositionFromPoint?h:c.caretRangeFromPoint?l:p;return{fromPoint:function(t,u,n){t=g.fromDom(t.document);return q(t,u,n).map(function(v){return e.range(g.fromDom(v.startContainer),v.startOffset,g.fromDom(v.endContainer),v.endOffset)})}}});B("ephox.sugar.selection.query.Within","ephox.katamari.api.Arr ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Selectors ephox.sugar.selection.core.NativeRange ephox.sugar.selection.core.SelectionDirection".split(" "),
function(f,g,k,e,a,b,c){var d=function(h,l,m,p){var q=b.create(h);h=(a.is(l,p)?[l]:[]).concat(e.descendants(l,p));return f.filter(h,function(t){b.selectNodeContentsUsing(q,t);return b.isWithin(m,q)})};return{find:function(h,l,m){l=c.asLtrRange(h,l);var p=g.fromDom(l.commonAncestorContainer);return k.isElement(p)?d(h,p,l,m):[]}}});B("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],
function(f,g,k,e,a){var b=function(h,l){var m=k.name(h);return"input"===m?a.after(h):f.contains(["br","img"],m)?0===l?a.before(h):a.after(h):a.on(h,l)},c=function(h,l){h=h.fold(a.before,b,a.after);l=l.fold(a.before,b,a.after);return e.relative(h,l)},d=function(h,l,m,p){h=b(h,l);m=b(m,p);return e.relative(h,m)};return{beforeSpecial:b,preprocess:function(h){return h.match({domRange:function(l){var m=g.fromDom(l.startContainer),p=g.fromDom(l.endContainer);return d(m,l.startOffset,p,l.endOffset)},relative:c,
exact:d})},preprocessRelative:c,preprocessExact:d}});B("ephox.sugar.api.selection.WindowSelection","ephox.katamari.api.Option ephox.sugar.api.dom.DocumentPosition ephox.sugar.api.node.Element ephox.sugar.api.node.Fragment ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.core.NativeRange ephox.sugar.selection.core.SelectionDirection ephox.sugar.selection.query.CaretRange ephox.sugar.selection.query.Within ephox.sugar.selection.quirks.Prefilter".split(" "),function(f,
g,k,e,a,b,c,d,h,l,m){var p=function(u,n){u=u.getSelection();u.removeAllRanges();u.addRange(n)},q=function(u,n){return d.diagnose(u,n).match({ltr:function(v,w,r,x){v=c.exactToNative(u,v,w,r,x);p(u,v)},rtl:function(v,w,r,x){var y=u.getSelection();y.extend?(y.collapse(v.dom(),w),y.extend(r.dom(),x)):(v=c.exactToNative(u,r,x,v,w),p(u,v))}})},t=function(u){u=u.getSelection();if(0<u.rangeCount){var n=k.fromDom(u.anchorNode),v=k.fromDom(u.focusNode);g.after(n,u.anchorOffset,v,u.focusOffset)?u=f.some(b.range(k.fromDom(u.anchorNode),
u.anchorOffset,k.fromDom(u.focusNode),u.focusOffset)):0<u.rangeCount?(n=u.getRangeAt(0),u=u.getRangeAt(u.rangeCount-1),u=f.some(b.range(k.fromDom(n.startContainer),n.startOffset,k.fromDom(u.endContainer),u.endOffset))):u=f.none()}else u=f.none();return u};return{setExact:function(u,n,v,w,r){n=m.preprocessExact(n,v,w,r);q(u,n)},getExact:t,get:function(u){return t(u).map(function(n){return b.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},setRelative:function(u,n,v){n=m.preprocessRelative(n,
v);q(u,n)},toNative:function(u){var n=b.getWin(u).dom(),v=function(w,r,x,y){return c.exactToNative(n,w,r,x,y)};u=m.preprocess(u);return d.diagnose(n,u).match({ltr:v,rtl:v})},setToElement:function(u,n){n=c.selectNodeContents(u,n);p(u,n)},clear:function(u){u.getSelection().removeAllRanges()},clone:function(u,n){u=d.asLtrRange(u,n);return c.cloneFragment(u)},replace:function(u,n,v){n=d.asLtrRange(u,n);u=e.fromElements(v,u.document);c.replaceWith(n,u)},deleteAt:function(u,n){u=d.asLtrRange(u,n);c.deleteContents(u)},
forElement:function(u,n){u=c.selectNodeContents(u,n);return b.range(k.fromDom(u.startContainer),u.startOffset,k.fromDom(u.endContainer),u.endOffset)},getFirstRect:function(u,n){u=d.asLtrRange(u,n);return c.getFirstRect(u)},getBounds:function(u,n){u=d.asLtrRange(u,n);return c.getBounds(u)},getAtPoint:function(u,n,v){return h.fromPoint(u,n,v)},findWithin:function(u,n,v){return l.find(u,n,v)},getAsString:function(u,n){u=d.asLtrRange(u,n);return c.toString(u)}}});B("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],
function(f){return f("tinymce.util.VK")});B("tinymce.plugins.table.queries.TabContext","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.CellNavigation ephox.snooker.api.TableLookup ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.selection.CursorPosition ephox.sugar.api.selection.Selection ephox.sugar.api.selection.WindowSelection tinymce.core.util.VK tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.TableTargets".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u){var n=function(D,C,F,H){return x(D,C,k.next(F),H)},v=function(D,C,F,H){return x(D,C,k.prev(F),H)},w=function(D,C){D=m.exact(C,0,C,0);return p.toNative(D)},r=function(D,C){C=d.descendants(C,"tr");return f.last(C).bind(function(F){return h.descendant(F,"td,th").map(function(H){return w(D,H)})})},x=function(D,C,F,H,L){return F.fold(g.none,g.none,function(A,z){return l.first(z).map(function(E){return w(D,E)})},function(A){return e.table(A,C).bind(function(z){var E=
u.noMenu(A);D.undoManager.transact(function(){H.insertRowsAfter(z,E)});return r(D,z)})})},y=["table","li","dl"];return{handle:function(D,C,F,H){if(D.keyCode===q.TAB){var L=t.getBody(C),A=function(E){var G=c.name(E);return a.eq(E,L)||f.contains(y,G)},z=C.selection.getRng();z.collapsed&&(z=b.fromDom(z.startContainer),e.cell(z,A).each(function(E){D.preventDefault();(D.shiftKey?v:n)(C,A,E,F,H).each(function(G){C.selection.setRng(G)})}))}}}});B("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],
function(f){return{response:f.immutable("selection","kill")}});B("ephox.darwin.api.SelectionKeys",[],function(){var f=function(e){return function(a){return a===e}},g=f(38),k=f(40);return{ltr:{isBackward:f(37),isForward:f(39)},rtl:{isBackward:f(39),isForward:f(37)},isUp:g,isDown:k,isNavigation:function(e){return 37<=e&&40>=e}}});B("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],
function(f,g,k,e){return{convertToRange:function(a,b){a=e.asLtrRange(a,b);return{start:f.constant(g.fromDom(a.startContainer)),soffset:f.constant(a.startOffset),finish:f.constant(g.fromDom(a.endContainer)),foffset:f.constant(a.endOffset)}},makeSitus:function(a,b,c,d){return{start:f.constant(k.on(a,b)),finish:f.constant(k.on(c,d))}}}});B("ephox.darwin.api.WindowBridge","ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.selection.Selection ephox.sugar.api.selection.Situ ephox.sugar.api.selection.WindowSelection".split(" "),
function(f,g,k,e,a,b,c,d){return function(h){return{elementFromPoint:function(l,m){return e.from(h.document.elementFromPoint(l,m)).map(a.fromDom)},getRect:function(l){return l.dom().getBoundingClientRect()},getRangedRect:function(l,m,p,q){l=b.exact(l,m,p,q);return d.getFirstRect(h,l).map(function(t){return k.map(t,g.apply)})},getSelection:function(){return d.get(h).map(function(l){return f.convertToRange(h,l)})},fromSitus:function(l){l=b.relative(l.start(),l.finish());return f.convertToRange(h,l)},
situsFromPoint:function(l,m){return d.getAtPoint(h,l,m).map(function(p){return{start:g.constant(c.on(p.start(),p.soffset())),finish:g.constant(c.on(p.finish(),p.foffset()))}})},clearSelection:function(){d.clear(h)},setSelection:function(l){d.setExact(h,l.start(),l.soffset(),l.finish(),l.foffset())},setRelativeSelection:function(l,m){d.setRelative(h,l,m)},selectContents:function(l){d.setToElement(h,l)},getInnerHeight:function(){return h.innerHeight},getScrollY:function(){return h.scrollY},scrollBy:function(l,
m){h.scrollBy(l,m)}}}});B("ephox.darwin.keyboard.KeySelection","ephox.darwin.api.Responses ephox.darwin.selection.CellSelection ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.search.SelectorFind ephox.sugar.api.selection.Awareness ephox.sugar.api.selection.Selection ephox.sugar.api.selection.Situ".split(" "),function(f,g,k,e,a,b,c,d,h,l){var m=function(p,q,t,u,n){return!b.eq(t,u)&&(q=g.identify(t,u,q).getOr([]),0<q.length)?
(n(p,q,t,u),a.some(f.response(a.some(k.makeSitus(t,0,t,d.getEnd(t))),!0))):a.none()};return{sync:function(p,q,t,u,n,v,w){return b.eq(t,n)&&u===v?a.none():c.closest(t,"td,th",q).bind(function(r){return c.closest(n,"td,th",q).bind(function(x){return m(p,q,r,x,w)})})},detect:m,update:function(p,q,t,u,n){return g.shiftSelection(u,p,q,n.firstSelectedSelector(),n.lastSelectedSelector()).map(function(v){n.clear(t);n.selectRange(t,v.boxes(),v.start(),v.finish());return v.boxes()})}}});B("ephox.darwin.keyboard.Carets",
["ephox.katamari.api.Struct"],function(f){var g=f.immutableBag(["left","top","right","bottom"],[]);return{nu:g,moveUp:function(k,e){return g({left:k.left(),top:k.top()-e,right:k.right(),bottom:k.bottom()-e})},moveDown:function(k,e){return g({left:k.left(),top:k.top()+e,right:k.right(),bottom:k.bottom()+e})},moveBottomTo:function(k,e){var a=k.bottom()-k.top();return g({left:k.left(),top:e-a,right:k.right(),bottom:e})},moveTopTo:function(k,e){var a=k.bottom()-k.top();return g({left:k.left(),top:e,right:k.right(),
bottom:e+a})},getTop:function(k){return k.top()},getBottom:function(k){return k.bottom()},translate:function(k,e,a){return g({left:k.left()+e,top:k.top()+a,right:k.right()+e,bottom:k.bottom()+a})},toString:function(k){return"("+k.left()+", "+k.top()+") -> ("+k.right()+", "+k.bottom()+")"}}});B("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(f,g,k,e){var a=function(b){return f.nu({left:b.left,
top:b.top,right:b.right,bottom:b.bottom})};return{getBoxAt:function(b,c,d){return k.isElement(c)?g.some(b.getRect(c)).map(a):k.isText(c)?(b=0<=d&&d<e.getEnd(c)?b.getRangedRect(c,d,c,d+1):0<d?b.getRangedRect(c,d-1,c,d):g.none(),b.map(a)):g.none()},getEntireBox:function(b,c){return k.isElement(c)?g.some(b.getRect(c)).map(a):k.isText(c)?b.getRangedRect(c,0,c,e.getEnd(c)).map(a):g.none()}}});B("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],
function(f,g,k){var e=k.immutable("item","mode");k=function(h,l,m,p){var q=void 0!==p?p:a;return h.property().parent(l).map(function(t){return e(t,q)})};var a=function(h,l,m,p){var q=void 0!==p?p:b;return m.sibling(h,l).map(function(t){return e(t,q)})},b=function(h,l,m,p){var q=void 0!==p?p:b;h=h.property().children(l);return m.first(h).map(function(t){return e(t,q)})},c=[{current:k,next:a,fallback:g.none()},{current:a,next:b,fallback:g.some(k)},{current:b,next:b,fallback:g.some(a)}],d=function(h,
l,m,p,q){return f.find(void 0!==q?q:c,function(t){return t.current===m}).bind(function(t){return t.current(h,l,p,t.next).orThunk(function(){return t.fallback.bind(function(u){return d(h,l,u,p)})})})};return{backtrack:k,sidestep:a,advance:b,go:d}});B("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(f){return{left:function(){return{sibling:function(g,k){return g.query().prevSibling(k)},first:function(g){return 0<g.length?f.some(g[g.length-1]):f.none()}}},right:function(){return{sibling:function(g,
k){return g.query().nextSibling(k)},first:function(g){return 0<g.length?f.some(g[0]):f.none()}}}}});B("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(f,g,k){var e=function(a,b,c,d,h,l){return g.go(a,b,d,h).bind(function(m){return l(m.item())?f.none():c(m.item())?f.some(m.item()):e(a,m.item(),c,m.mode(),h,l)})};return{left:function(a,b,c,d){return e(a,b,c,g.sidestep,k.left(),d)},right:function(a,b,c,d){return e(a,b,c,
g.sidestep,k.right(),d)}}});B("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(f,g,k,e){var a=function(d,h){return 0===d.property().children(h).length},b=function(d,h,l,m){return g.left(d,h,l,m)},c=function(d,h,l,m){return g.right(d,h,l,m)};return{before:function(d,h,l){return b(d,h,f.curry(a,d),l)},after:function(d,h,l){return c(d,h,f.curry(a,d),l)},seekLeft:b,seekRight:c,walkers:function(){return{left:e.left,
right:e.right}},walk:function(d,h,l,m,p){return k.go(d,h,l,m,p)},backtrack:k.backtrack,sidestep:k.sidestep,advance:k.advance}});B("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(f,g){var k=f();return{gather:function(e,a,b){return g.gather(k,e,a,b)},before:function(e,a){return g.before(k,e,a)},after:function(e,a){return g.after(k,e,a)},seekLeft:function(e,a,b){return g.seekLeft(k,e,a,b)},seekRight:function(e,a,b){return g.seekRight(k,e,a,
b)},walkers:function(){return g.walkers()},walk:function(e,a,b,c){return g.walk(k,e,a,b,c)}}});B("ephox.darwin.keyboard.Retries","ephox.darwin.keyboard.Carets ephox.darwin.keyboard.Rectangles ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.phoenix.api.dom.DomGather ephox.robin.api.dom.DomStructure ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind global!Math".split(" "),function(f,g,k,e,a,b,c,d,h,l){var m=k.generate([{none:[]},{retry:["caret"]}]),p=function(w,
r,x){return h.closest(r,c.isBlock).fold(e.constant(!1),function(y){return g.getEntireBox(w,y).exists(function(D){return x.left()<D.left()||1>l.abs(D.right()-x.left())||x.left()>D.right()})})};k={point:f.getBottom,adjuster:function(w,r,x,y,D){var C=f.moveDown(D,5);return 1>l.abs(x.bottom()-y.bottom())?m.retry(C):x.top()>D.bottom()?m.retry(C):x.top()===D.bottom()?m.retry(f.moveDown(D,1)):p(w,r,D)?m.retry(f.translate(C,5,0)):m.none()},move:f.moveDown,gather:b.after};var q=function(w,r,x){return w.elementFromPoint(r,
x).filter(function(y){return"table"===d.name(y)}).isSome()},t=function(w,r,x,y,D){return u(w,r,x,r.move(y,5),D)},u=function(w,r,x,y,D){return 0===D?a.some(y):q(w,y.left(),r.point(y))?t(w,r,x,y,D-1):w.situsFromPoint(y.left(),r.point(y)).bind(function(C){return C.start().fold(a.none,function(F,H){return g.getEntireBox(w,F,H).bind(function(L){return r.adjuster(w,F,L,x,y).fold(a.none,function(A){return u(w,r,x,A,D-1)})}).orThunk(function(){return a.some(y)})},a.none)})},n=function(w,r,x){return w.point(r)>
x.getInnerHeight()?a.some(w.point(r)-x.getInnerHeight()):0>w.point(r)?a.some(-w.point(r)):a.none()},v=function(w,r,x){var y=w.move(x,5),D=u(r,w,x,y,100).getOr(y);return n(w,D,r).fold(function(){return r.situsFromPoint(D.left(),w.point(D))},function(C){r.scrollBy(0,C);return r.situsFromPoint(D.left(),w.point(D)-C)})};return{tryUp:e.curry(v,{point:f.getTop,adjuster:function(w,r,x,y,D){var C=f.moveUp(D,5);return 1>l.abs(x.top()-y.top())?m.retry(C):x.bottom()<D.top()?m.retry(C):x.bottom()===D.top()?m.retry(f.moveUp(D,
1)):p(w,r,D)?m.retry(f.translate(C,5,0)):m.none()},move:f.moveUp,gather:b.before}),tryDown:e.curry(v,k),ieTryUp:function(w,r){return w.situsFromPoint(r.left(),r.top()-5)},ieTryDown:function(w,r){return w.situsFromPoint(r.left(),r.bottom()+5)},getJumpSize:e.constant(5)}});B("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(f,g,k,e,a){var b=
f.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),c=function(d){return e.closest(d,"tr")};return{verify:function(d,h,l,m,p,q,t){return e.closest(m,"td,th",t).bind(function(u){return e.closest(h,"td,th",t).map(function(n){return k.eq(u,n)?k.eq(m,u)&&a.getEnd(u)===p?q(n):b.none("in same cell"):g.sharedOne(c,[u,n]).fold(function(){var v=d.getRect(n),w=d.getRect(u);return w.right>v.left&&w.left<v.right?b.success():q(n)},function(v){return q(n)})})}).getOr(b.none("default"))},
cata:function(d,h,l,m,p){return d.fold(h,l,m,p)},adt:b}});B("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(f){var g=f.immutable("element","offset"),k=f.immutable("element","deltaOffset"),e=f.immutable("element","start","finish"),a=f.immutable("begin","end");f=f.immutable("element","text");return{point:g,delta:k,range:e,points:a,text:f}});B("ephox.sugar.api.search.ElementAddress","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),
function(f,g,k,e,a,b,c,d,h){var l=e.immutable("ancestor","descendants","element","index"),m=e.immutable("parent","children","element","index"),p=function(q,t){return f.findIndex(q,g.curry(a.eq,t))};return{childOf:function(q,t){return b.closest(q,function(u){return h.parent(u).exists(function(n){return a.eq(n,t)})})},indexOf:p,indexInParent:function(q){return h.parent(q).bind(function(t){var u=h.children(t);return p(u,q).map(function(n){return m(t,u,q,n)})})},selectorsInParent:function(q,t){return h.parent(q).bind(function(u){var n=
c.children(u,t);return p(n,q).map(function(v){return m(u,n,q,v)})})},descendantsInAncestor:function(q,t,u){return d.closest(q,t).bind(function(n){var v=c.descendants(n,u);return p(v,q).map(function(w){return l(n,v,q,w)})})}}});B("ephox.darwin.navigation.BrTags","ephox.darwin.navigation.BeforeAfter ephox.katamari.api.Fun ephox.katamari.api.Option ephox.phoenix.api.data.Spot ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.ElementAddress ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Awareness ephox.sugar.api.selection.Situ".split(" "),
function(f,g,k,e,a,b,c,d,h,l){var m=function(n){return"br"===a.name(n)},p=function(n,v,w){return v(n,w).bind(function(r){return a.isText(r)&&0===b.get(r).trim().length?p(r,v,w):k.some(r)})},q=function(n,v,w){return w.traverse(v).orThunk(function(){return p(v,w.gather,n)}).map(w.relative)},t=function(n,v){return d.child(n,v).filter(m).orThunk(function(){return d.child(n,v-1).filter(m)})},u=function(n,v,w,r){return t(v,w).bind(function(x){return r.traverse(x).fold(function(){return p(x,r.gather,n).map(r.relative)},
function(y){return c.indexInParent(y).map(function(D){return l.on(D.parent(),D.index())})})})};return{tryBr:function(n,v,w,r){return(m(v)?q(n,v,r):u(n,v,w,r)).map(function(x){return{start:g.constant(x),finish:g.constant(x)}})},process:function(n){return f.cata(n,function(v){return k.none("BR ADT: none")},function(){return k.none()},function(v){return k.some(e.point(v,0))},function(v){return k.some(e.point(v,h.getEnd(v)))})}}});B("ephox.darwin.keyboard.TableKeys","ephox.darwin.keyboard.Carets ephox.darwin.keyboard.Rectangles ephox.darwin.keyboard.Retries ephox.darwin.navigation.BeforeAfter ephox.darwin.navigation.BrTags ephox.katamari.api.Option ephox.phoenix.api.data.Spot ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.selection.Awareness".split(" "),
function(f,g,k,e,a,b,c,d,h,l){var m=d.detect(),p=function(v,w,r){return v.getSelection().bind(function(x){return a.tryBr(w,x.finish(),x.foffset(),r).fold(function(){return b.some(c.point(x.finish(),x.foffset()))},function(y){y=v.fromSitus(y);y=e.verify(v,x.finish(),x.foffset(),y.finish(),y.foffset(),r.failure,w);return a.process(y)})})},q=function(v,w,r,x,y,D){return 0===D?b.none():n(v,w,r,x,y).bind(function(C){var F=v.fromSitus(C);F=e.verify(v,r,x,F.finish(),F.foffset(),y.failure,w);return e.cata(F,
function(){return b.none()},function(){return b.some(C)},function(H){return h.eq(r,H)&&0===x?t(v,r,x,f.moveUp,y):q(v,w,H,0,y,D-1)},function(H){return h.eq(r,H)&&x===l.getEnd(H)?t(v,r,x,f.moveDown,y):q(v,w,H,l.getEnd(H),y,D-1)})})},t=function(v,w,r,x,y){return g.getBoxAt(v,w,r).bind(function(D){return u(v,y,x(D,k.getJumpSize()))})},u=function(v,w,r){return m.browser.isChrome()||m.browser.isSafari()||m.browser.isFirefox()||m.browser.isEdge()?w.otherRetry(v,r):m.browser.isIE()?w.ieRetry(v,r):b.none()},
n=function(v,w,r,x,y){return g.getBoxAt(v,r,x).bind(function(D){return u(v,y,D)})};return{handle:function(v,w,r){return p(v,w,r).bind(function(x){return q(v,w,x.element(),x.offset(),r,20).map(v.fromSitus)})}}});B("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(f){return{any:function(g){return f.first(g).isSome()},ancestor:function(g,k,e){return f.ancestor(g,k,e).isSome()},closest:function(g,k,e){return f.closest(g,k,e).isSome()},sibling:function(g,k){return f.sibling(g,
k).isSome()},child:function(g,k){return f.child(g,k).isSome()},descendant:function(g,k){return f.descendant(g,k).isSome()}}});B("ephox.darwin.keyboard.VerticalMovement","ephox.darwin.api.Responses ephox.darwin.keyboard.KeySelection ephox.darwin.keyboard.TableKeys ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.search.PredicateExists ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m){var p=c.detect(),q=function(u,n){return h.ancestor(u,function(v){return m.parent(v).exists(function(w){return d.eq(w,n)})})},t=function(u,n,v,w,r){return l.closest(w,"td,th",n).bind(function(x){return l.closest(x,"table",n).bind(function(y){return q(r,y)?k.handle(u,n,v).bind(function(D){return l.closest(D.finish(),"td,th",n).map(function(C){return{start:a.constant(x),finish:a.constant(C),range:a.constant(D)}})}):b.none()})})};return{navigate:function(u,n,v,w,r){return p.browser.isIE()?
b.none():t(u,n,v,w,r).map(function(x){x=x.range();return f.response(b.some(e.makeSitus(x.start(),x.soffset(),x.finish(),x.foffset())),!0)})},select:function(u,n,v,w,r,x,y){return t(u,v,w,r,x).bind(function(D){return g.detect(n,v,D.start(),D.finish(),y)})}}});B("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(f,g,k,e){var a=function(b,c){return e.closest(b,"td,th",c)};
return function(b,c,d,h){var l=g.none(),m=function(){l=g.none()};return{mousedown:function(p){h.clear(c);l=a(p.target(),d)},mouseover:function(p){l.each(function(q){h.clear(c);a(p.target(),d).each(function(t){var u=f.identify(q,t,d).getOr([]);if(1<u.length||1===u.length&&!k.eq(q,t))h.selectRange(c,u,q,t),b.selectContents(t)})})},mouseup:function(){l.each(m)}}}});B("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather",
"ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(f,g,k,e,a){return{down:{traverse:e.nextSibling,gather:k.after,relative:a.before,otherRetry:f.tryDown,ieRetry:f.ieTryDown,failure:g.adt.failedDown},up:{traverse:e.prevSibling,gather:k.before,relative:a.before,otherRetry:f.tryUp,ieRetry:f.ieTryUp,failure:g.adt.failedUp}}});B("ephox.darwin.api.InputHandlers","ephox.darwin.api.Responses ephox.darwin.api.SelectionKeys ephox.darwin.api.WindowBridge ephox.darwin.keyboard.KeySelection ephox.darwin.keyboard.VerticalMovement ephox.darwin.mouse.MouseSelection ephox.darwin.navigation.KeyDirection ephox.darwin.selection.CellSelection ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.selection.Situ".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q){var t=p.immutable("rows","cols");return{mouse:function(u,n,v,w){u=k(u);n=b(u,n,v,w);return{mousedown:n.mousedown,mouseover:n.mouseover,mouseup:n.mouseup}},keyboard:function(u,n,v,w){var r=k(u),x=function(){w.clear(n);return l.none()};return{keydown:function(y,D,C,F,H,L){var A=y.raw().which,z=!0===y.raw().shiftKey;return d.retrieve(n,w.selectedSelector()).fold(function(){return g.isDown(A)&&z?h.curry(a.select,r,n,v,c.down,F,D,w.selectRange):g.isUp(A)&&z?h.curry(a.select,
r,n,v,c.up,F,D,w.selectRange):g.isDown(A)?h.curry(a.navigate,r,v,c.down,F,D):g.isUp(A)?h.curry(a.navigate,r,v,c.up,F,D):l.none},function(E){var G=function(I){return function(){return m.findMap(I,function(J){return e.update(J.rows(),J.cols(),n,E,w)}).fold(function(){return d.getEdges(n,w.firstSelectedSelector(),w.lastSelectedSelector()).map(function(J){var M=g.isDown(A)||L.isForward(A)?q.after:q.before;r.setRelativeSelection(q.on(J.first(),0),M(J.table()));w.clear(n);return f.response(l.none(),!0)})},
function(J){return l.some(f.response(l.none(),!0))})}};return g.isDown(A)&&z?G([t(1,0)]):g.isUp(A)&&z?G([t(-1,0)]):L.isBackward(A)&&z?G([t(0,-1),t(-1,0)]):L.isForward(A)&&z?G([t(0,1),t(1,0)]):g.isNavigation(A)&&!1===z?x:l.none})()},keyup:function(y,D,C,F,H){return d.retrieve(n,w.selectedSelector()).fold(function(){var L=y.raw().which;return!0===y.raw().shiftKey===!1?l.none():g.isNavigation(L)?e.sync(n,v,D,C,F,H,w.selectRange):l.none()},l.none)}}}}});B("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr",
"ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(f,g,k,e){return{add:function(a,b){f.each(b,function(c){g.add(a,c)})},remove:function(a,b){f.each(b,function(c){g.remove(a,c)})},toggle:function(a,b){f.each(b,function(c){g.toggle(a,c)})},hasAll:function(a,b){return f.forall(b,function(c){return g.has(a,c)})},hasAny:function(a,b){return f.exists(b,function(c){return g.has(a,c)})},get:function(a){if(k.supports(a)){a=a.dom().classList;for(var b=new e(a.length),c=
0;c<a.length;c++)b[c]=a.item(c);a=b}else a=k.get(a);return a}}});B("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(f,g){return{addClass:function(k){return function(e){f.add(e,k)}},removeClass:function(k){return function(e){f.remove(e,k)}},removeClasses:function(k){return function(e){g.remove(e,k)}},hasClass:function(k){return function(e){return f.has(e,k)}}}});B("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr",
"ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(f,g,k,e,a){return{byClass:function(b){var c=e.addClass(b.selected()),d=e.removeClasses([b.selected(),b.lastSelected(),b.firstSelected()]),h=function(l){l=a.descendants(l,b.selectedSelector());f.each(l,d)};return{clear:h,selectRange:function(l,m,p,q){h(l);f.each(m,c);k.add(p,b.firstSelected());k.add(q,b.lastSelected())},selectedSelector:b.selectedSelector,
firstSelectedSelector:b.firstSelectedSelector,lastSelectedSelector:b.lastSelectedSelector}},byAttr:function(b){var c=function(l){g.remove(l,b.selected());g.remove(l,b.firstSelected());g.remove(l,b.lastSelected())},d=function(l){g.set(l,b.selected(),"1")},h=function(l){l=a.descendants(l,b.selectedSelector());f.each(l,c)};return{clear:h,selectRange:function(l,m,p,q){h(l);f.each(m,d);g.set(p,b.firstSelected(),"1");g.set(q,b.lastSelected(),"1")},selectedSelector:b.selectedSelector,firstSelectedSelector:b.firstSelectedSelector,
lastSelectedSelector:b.lastSelectedSelector}}}});B("tinymce.plugins.table.selection.CellSelection","ephox.darwin.api.InputHandlers ephox.darwin.api.SelectionAnnotation ephox.darwin.api.SelectionKeys ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.snooker.api.TableLookup ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.properties.Attr ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.core.SelectionDirection tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.Direction tinymce.plugins.table.selection.Ephemera".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n,v,w){return function(r,x){var y=b.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),D=a.none(),C=g.byAttr(w);r.on("init",function(F){var H=r.getWin(),L=n.getBody(r);F=n.getIsRoot(r);var A=f.mouse(H,L,F,C),z=f.keyboard(H,L,F,C),E=function(N,P){P.kill()&&N.kill();P.selection().each(function(Q){Q=t.relative(Q.start(),Q.finish());Q=u.asLtrRange(H,Q);r.selection.setRng(Q)})};F=function(N){var P=M(N);if(P.raw().shiftKey&&k.isNavigation(P.raw().which)){N=
r.selection.getRng();var Q=h.fromDom(N.startContainer),T=h.fromDom(N.endContainer);z.keyup(P,Q,N.startOffset,T,N.endOffset).each(function(V){E(P,V)})}};var G=function(N){return!p.has(N,"data-mce-bogus")&&"br"!==l.name(N)&&!(l.isText(N)&&0===m.get(N).length)},I=function(){var N=h.fromDom(r.getBody()),P=function(Q){return q.prevSibling(Q).bind(function(T){return G(T)?a.some(T):P(T)})};return q.lastChild(N).bind(function(Q){return G(Q)?a.some(Q):P(Q)})},J=function(N){var P=M(N);x().each(function(W){W.hideBars()});
40===N.which&&I().each(function(W){"table"===l.name(W)&&(r.settings.forced_root_block?r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,"<br/>"):r.dom.add(r.getBody(),"br"))});N=r.selection.getRng();var Q=h.fromDom(r.selection.getStart()),T=h.fromDom(N.startContainer),V=h.fromDom(N.endContainer);Q=v.directionAt(Q).isRtl()?k.rtl:k.ltr;z.keydown(P,T,N.startOffset,V,N.endOffset,Q).each(function(W){E(P,W)});x().each(function(W){W.showBars()})},M=function(N){var P=h.fromDom(N.target),
Q=function(){N.stopPropagation()},T=function(){N.preventDefault()},V=e.compose(T,Q);return{target:e.constant(P),x:e.constant(N.x),y:e.constant(N.y),stop:Q,prevent:T,kill:V,raw:e.constant(N)}},K=function(N){return 0===N.button},O=function(N){K(N)&&A.mousedown(M(N))},R=function(N){var P=void 0===N.buttons?!0:0!==(N.buttons&1);P&&A.mouseover(M(N))},U=function(N){K&&A.mouseup(M(N))};r.on("mousedown",O);r.on("mouseover",R);r.on("mouseup",U);r.on("keyup",F);r.on("keydown",J);r.on("nodechange",function(){var N=
r.selection,P=h.fromDom(N.getStart());N=h.fromDom(N.getEnd());P=c.table(P);var Q=c.table(N);P.bind(function(T){return Q.bind(function(V){return d.eq(T,V)?a.some(!0):a.none()})}).fold(function(){C.clear(L)},e.noop)});D=a.some(y({mousedown:O,mouseover:R,mouseup:U,keyup:F,keydown:J}))});return{clear:C.clear,destroy:function(){D.each(function(F){})}}}});B("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera",
"tinymce.plugins.table.selection.SelectionTypes"],function(f,g,k,e){return function(a){return{get:function(){var b=g.getBody(a);return f.retrieve(b,k.selectedSelector()).fold(function(){return void 0===a.selection.getStart()?e.none():e.single(a.selection)},function(c){return e.multiple(c)})}}}});B("tinymce.plugins.table.ui.Buttons",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.ui.TableDialog"],function(f,g,k){var e=g.each;return{addButtons:function(a){function b(d){return function(){a.execCommand(d)}}
var c=[];e("inserttable tableprops deletetable | cell row column".split(" "),function(d){"|"==d?c.push({text:"-"}):c.push(a.menuItems[d])});a.addButton("table",{type:"menubutton",title:"Table",menu:c});a.addButton("tableprops",{title:"Table properties",onclick:f.curry(k.open,a,!0),icon:"table"});a.addButton("tabledelete",{title:"Delete table",onclick:b("mceTableDelete")});a.addButton("tablecellprops",{title:"Cell properties",onclick:b("mceTableCellProps")});a.addButton("tablemergecells",{title:"Merge cells",
onclick:b("mceTableMergeCells")});a.addButton("tablesplitcells",{title:"Split cell",onclick:b("mceTableSplitCells")});a.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:b("mceTableInsertRowBefore")});a.addButton("tableinsertrowafter",{title:"Insert row after",onclick:b("mceTableInsertRowAfter")});a.addButton("tabledeleterow",{title:"Delete row",onclick:b("mceTableDeleteRow")});a.addButton("tablerowprops",{title:"Row properties",onclick:b("mceTableRowProps")});a.addButton("tablecutrow",
{title:"Cut row",onclick:b("mceTableCutRow")});a.addButton("tablecopyrow",{title:"Copy row",onclick:b("mceTableCopyRow")});a.addButton("tablepasterowbefore",{title:"Paste row before",onclick:b("mceTablePasteRowBefore")});a.addButton("tablepasterowafter",{title:"Paste row after",onclick:b("mceTablePasteRowAfter")});a.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:b("mceTableInsertColBefore")});a.addButton("tableinsertcolafter",{title:"Insert column after",onclick:b("mceTableInsertColAfter")});
a.addButton("tabledeletecol",{title:"Delete column",onclick:b("mceTableDeleteCol")})},addToolbars:function(a){var b=a.settings.table_toolbar;""!==b&&!1!==b&&(b||(b="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),a.addContextToolbar(function(c){return a.dom.is(c,"table")&&a.getBody().contains(c)},b))}}});B("tinymce.plugins.table.ui.MenuItems","ephox.katamari.api.Fun ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.TableLookup ephox.sugar.api.node.Element tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.ui.TableDialog".split(" "),
function(f,g,k,e,a,b,c,d){return{addMenuItems:function(h,l){function m(A){return function(){h.execCommand(A)}}var p=k.none(),q=[],t=[],u=[],n=[],v=function(A){A.disabled(!0)},w=function(A){A.disabled(!1)},r=function(){var A=this;q.push(A);p.fold(function(){v(A)},function(z){w(A)})},x=function(){var A=this;t.push(A);p.fold(function(){v(A)},function(z){w(A)})},y=function(){p.fold(function(){g.each(q,v);g.each(t,v);g.each(u,v);g.each(n,v)},function(A){g.each(q,w);g.each(t,w);g.each(u,function(z){z.disabled(A.mergable().isNone())});
g.each(n,function(z){z.disabled(A.unmergable().isNone())})})};h.on("init",function(){h.on("nodechange",function(A){p=k.from(h.dom.getParent(h.selection.getStart(),"th,td")).bind(function(z){var E=a.fromDom(z);return e.table(E).map(function(G){return c.forMenu(l,G,E)})});y()})});var D=function(){var A='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var z=0;10>z;z++){A+="<tr>";for(var E=0;10>E;E++)A+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*z+E)+'" href="#" data-mce-x="'+
E+'" data-mce-y="'+z+'"></a></td>';A+="</tr>"}return A+'</table><div class="mce-text-center" role="presentation">1 x 1</div>'},C=function(A,z,E,G){var I=G.getEl().getElementsByTagName("table")[0],J,M,K=G.isRtl()||"tl-tr"==G.parent().rel;I.nextSibling.innerHTML=z+1+" x "+(E+1);K&&(z=9-z);for(J=0;10>J;J++)for(G=0;10>G;G++){var O=I.rows[J].childNodes[G].firstChild;var R=(K?G>=z:G<=z)&&J<=E;A.dom.toggleClass(O,"mce-active",R);R&&(M=O)}return M.parentNode};D=!1===h.settings.table_grid?{text:"Table",icon:"table",
context:"table",onclick:f.curry(d.open,h)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(A){A.aria&&(this.parent().hideAll(),A.stopImmediatePropagation(),d.open(h))},onshow:function(){C(h,0,0,this.menu.items()[0])},onhide:function(){var A=this.menu.items()[0].getEl().getElementsByTagName("a");h.dom.removeClass(A,"mce-active");h.dom.addClass(A[0],"mce-active")},menu:[{type:"container",html:D(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(A){var z=
A.target;if("A"==z.tagName.toUpperCase()){var E=parseInt(z.getAttribute("data-mce-x"),10);z=parseInt(z.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)E=9-E;if(E!==this.lastX||z!==this.lastY)C(h,E,z,A.control),this.lastX=E,this.lastY=z}},onclick:function(A){var z=this;"A"==A.target.tagName.toUpperCase()&&(A.preventDefault(),A.stopPropagation(),z.parent().cancel(),h.undoManager.transact(function(){b.insert(h,z.lastX+1,z.lastY+1)}),h.addVisual())}}]};var F={text:"Table properties",
context:"table",onPostRender:r,onclick:f.curry(d.open,h,!0)};r={text:"Delete table",context:"table",onPostRender:r,cmd:"mceTableDelete"};var H={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:x},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:x},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:x},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:x},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),
onPostRender:x},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:x},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:x},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:x}]},L={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:x},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:x},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:x}]};
x={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:x},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var A=this;u.push(A);p.fold(function(){v(A)},function(z){A.disabled(z.mergable().isNone())})}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var A=this;n.push(A);p.fold(function(){v(A)},function(z){A.disabled(z.unmergable().isNone())})}}]};h.addMenuItem("inserttable",D);
h.addMenuItem("tableprops",F);h.addMenuItem("deletetable",r);h.addMenuItem("row",H);h.addMenuItem("column",L);h.addMenuItem("cell",x)}}});B("tinymce.plugins.table.Plugin","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.ResizeWire ephox.snooker.api.TableDirection ephox.snooker.api.TableResize ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter tinymce.core.PluginManager tinymce.core.util.Tools tinymce.plugins.table.actions.Clipboard tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.actions.TableActions tinymce.plugins.table.actions.TableCommands tinymce.plugins.table.actions.TableWire tinymce.plugins.table.queries.Direction tinymce.plugins.table.queries.TabContext tinymce.plugins.table.selection.CellSelection tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.Selections tinymce.plugins.table.ui.Buttons tinymce.plugins.table.ui.MenuItems".split(" "),
function(f,g,k,e,a,b,c,d,h,l,m,p,q,t,u,n,v,w,r,x,y,D){h.add("table",function(C){var F=function(){return E.getOr(k.only(b.fromDom(C.getBody())))},H=w(C,function(){return z}),L=q(C,F),A=x(C);t.registerCommands(C,L,H,A);m.registerEvents(C,A,L,H);D.addMenuItems(C,A);y.addButtons(C);y.addToolbars(C);var z=g.none(),E=g.none(),G=g.none();C.on("init",function(){var I=e(n.directionAt),J=u.get(C);E=g.some(J);!C.settings.object_resizing||!1===C.settings.table_resize_bars||!0!==C.settings.object_resizing&&"table"!==
C.settings.object_resizing||(I=a(J,I),I.on(),I.events.startDrag.bind(function(M){G=g.some(C.selection.getRng())}),I.events.afterResize.bind(function(M){M=M.table();M=d.descendants(M,"td[data-mce-style],th[data-mce-style]");f.each(M,function(K){c.remove(K,"data-mce-style")});G.each(function(K){C.selection.setRng(K);C.focus()});C.undoManager.add()}),z=g.some(I))});C.on("ObjectResized",function(I){I=I.target;if("TABLE"===I.nodeName){var J=[];l.each(I.rows,function(M){l.each(M.cells,function(K){var O=
C.dom.getStyle(K,"width",!0);J.push({cell:K,width:O})})});l.each(J,function(M){C.dom.setStyle(M.cell,"width",M.width);C.dom.setAttrib(M.cell,"width",null)})}});C.on("PreInit",function(){C.serializer.addTempAttr(r.firstSelected());C.serializer.addTempAttr(r.lastSelected())});if(!1!==C.settings.table_tab_navigation)C.on("keydown",function(I){v.handle(I,C,L,F)});C.on("remove",function(){z.each(function(I){I.destroy()});E.each(function(I){u.remove(C,I)});H.destroy()});this.insertTable=function(I,J){p.insert(C,
I,J)};this.setClipboardRows=t.setClipboardRows;this.getClipboardRows=t.getClipboardRows});return function(){}});Y("tinymce.plugins.table.Plugin")()})();

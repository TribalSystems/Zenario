(function(){var J={},N=function(d){var e=J[d];if(void 0===e)throw"module ["+d+"] was undefined";if(void 0===e.instance){for(var f=J[d],c=f.deps,b=f.defn,a=c.length,g=Array(a),h=0;h<a;++h)g[h]=N(c[h]);c=b.apply(null,g);if(void 0===c)throw"module ["+d+"] returned undefined";f.instance=c}return e.instance},m=function(d,e,f){if("string"!==typeof d)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+d;if(void 0===f)throw"no definition function for "+d;J[d]={deps:e,defn:f,instance:void 0}},
G=function(d,e){m(d,[],function(){return e})};G("global!Array",Array);G("global!Error",Error);m("ephox.katamari.api.Fun",["global!Array","global!Error"],function(d,e){var f=function(a){return function(){return a}},c=f(!1),b=f(!0);return{noop:function(){},compose:function(a,b){return function(){return a(b.apply(null,arguments))}},constant:f,identity:function(a){return a},tripleEquals:function(a,b){return a===b},curry:function(a){for(var b=new d(arguments.length-1),h=1;h<arguments.length;h++)b[h-1]=
arguments[h];return function(){for(var h=new d(arguments.length),c=0;c<h.length;c++)h[c]=arguments[c];h=b.concat(h);return a.apply(null,h)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new e(a);}},apply:function(a){return a()},call:function(a){a()},never:c,always:b}});G("global!Object",Object);m("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(d,e){var f=d.never,c=d.always,b=function(){return a},a=function(){var a=
function(a){return a.isNone()},g=function(a){return a()},l=function(a){return a},a={fold:function(a,b){return a()},is:f,isSome:f,isNone:c,getOr:l,getOrThunk:g,getOrDie:function(a){throw Error(a||"error: getOrDie called on none.");},or:l,orThunk:g,map:b,ap:b,each:function(){},bind:b,flatten:b,exists:f,forall:c,filter:b,equals:a,equals_:a,toArray:function(){return[]},toString:d.constant("none()")};e.freeze&&e.freeze(a);return a}(),g=function(h){var d=function(){return h},e=function(){return p},n=function(a){return a(h)},
p={fold:function(a,b){return b(h)},is:function(a){return h===a},isSome:c,isNone:f,getOr:d,getOrThunk:d,getOrDie:d,or:e,orThunk:e,map:function(a){return g(a(h))},ap:function(a){return a.fold(b,function(a){return g(a(h))})},each:function(a){a(h)},bind:n,flatten:d,exists:n,forall:n,filter:function(b){return b(h)?p:a},equals:function(a){return a.is(h)},equals_:function(a,b){return a.fold(f,function(a){return b(h,a)})},toArray:function(){return[h]},toString:function(){return"some("+h+")"}};return p};return{some:g,
none:b,from:function(b){return null===b||void 0===b?a:g(b)}}});G("global!String",String);m("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(d,e,f,c){var b=function(){var a=e.prototype.indexOf,b=function(b,g){return a.call(b,g)},g=function(a,b){var g;a:{g=0;for(var h=a.length;g<h;++g)if(a[g]===b)break a;g=-1}return g};return void 0===a?g:b}(),a=function(a,g){return-1<b(a,g)},g=function(a,b){for(var g=a.length,h=new e(g),c=0;c<g;c++)h[c]=
b(a[c],c,a);return h},h=function(a,b){for(var g=0,h=a.length;g<h;g++)b(a[g],g,a)},k=function(a,b){for(var g=a.length-1;0<=g;g--)b(a[g],g,a)},l=function(a,b){for(var g=[],h=0,c=a.length;h<c;h++){var d=a[h];b(d,h,a)&&g.push(d)}return g},n=function(a,b){for(var g=0,h=a.length;g<h;g++)if(b(a[g],g,a))return d.some(g);return d.none()},p=e.prototype.push,q=function(a){for(var b=[],g=0,h=a.length;g<h;++g){if(!e.prototype.isPrototypeOf(a[g]))throw new f("Arr.flatten item "+g+" was not an array, input: "+a);
p.apply(b,a[g])}return b},r=function(a,b){for(var g=0,h=a.length;g<h;++g)if(!0!==b(a[g],g,a))return!1;return!0},t=e.prototype.slice;return{map:g,each:h,eachr:k,partition:function(a,b){for(var g=[],h=[],c=0,d=a.length;c<d;c++){var e=a[c];(b(e,c,a)?g:h).push(e)}return{pass:g,fail:h}},filter:l,groupBy:function(a,b){if(0===a.length)return[];for(var g=b(a[0]),h=[],c=[],d=0,e=a.length;d<e;d++){var f=a[d],k=b(f);k!==g&&(h.push(c),c=[]);g=k;c.push(f)}0!==c.length&&h.push(c);return h},indexOf:function(a,g){var h=
b(a,g);return-1===h?d.none():d.some(h)},foldr:function(a,b,g){k(a,function(a){g=b(g,a)});return g},foldl:function(a,b,g){h(a,function(a){g=b(g,a)});return g},find:function(a,b){for(var g=0,h=a.length;g<h;g++){var c=a[g];if(b(c,g,a))return d.some(c)}return d.none()},findIndex:n,flatten:q,bind:function(a,b){var h=g(a,b);return q(h)},forall:r,exists:function(a,b){return n(a,b).isSome()},contains:a,equal:function(a,b){return a.length===b.length&&r(a,function(a,g){return a===b[g]})},reverse:function(a){a=
t.call(a,0);a.reverse();return a},chunk:function(a,b){for(var g=[],h=0;h<a.length;h+=b){var c=a.slice(h,h+b);g.push(c)}return g},difference:function(b,g){return l(b,function(b){return!a(g,b)})},mapToObject:function(a,b){for(var g={},h=0,d=a.length;h<d;h++){var e=a[h];g[c(e)]=b(e,h)}return g},pure:function(a){return[a]},sort:function(a,b){var g=t.call(a,0);g.sort(b);return g},range:function(a,b){for(var g=[],h=0;h<a;h++)g.push(b(h));return g},head:function(a){return 0===a.length?d.none():d.some(a[0])},
last:function(a){return 0===a.length?d.none():d.some(a[a.length-1])}}});m("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});G("global!document",document);m("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(d,e,f,c){var b=function(a){if(null===a||void 0===a)throw new e("Node cannot be null or undefined");return{dom:d.constant(a)}};return{fromHtml:function(a,g){var h=(g||c).createElement("div");
h.innerHTML=a;if(!h.hasChildNodes()||1<h.childNodes.length)throw f.error("HTML does not have a single root node",a),"HTML must have a single root node";return b(h.childNodes[0])},fromTag:function(a,g){var h=(g||c).createElement(a);return b(h)},fromText:function(a,g){var h=(g||c).createTextNode(a);return b(h)},fromDom:b}});m("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(d){var e=function(f,c){return{left:d.constant(f),top:d.constant(c),translate:function(b,a){return e(f+b,c+a)}}};
return e});m("ephox.katamari.api.Global",[],function(){return"undefined"!==typeof window?window:Function("return this;")()});m("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(d){var e=function(c,b){for(var a=void 0!==b?b:d,g=0;g<c.length&&void 0!==a&&null!==a;++g)a=a[c[g]];return a},f=function(c,b){for(var a=void 0!==b?b:d,g=0;g<c.length;++g){var h=c[g];if(void 0===a[h]||null===a[h])a[h]={};a=a[h]}return a};return{path:e,resolve:function(c,b){var a=c.split(".");return e(a,b)},
forge:f,namespace:function(c,b){var a=c.split(".");return f(a,b)}}});m("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(d){return{getOrDie:function(e,f){var c=d.resolve(e,f);if(void 0===c)throw e+" not available on this browser";return c}}});m("ephox.sand.api.Node",["ephox.sand.util.Global"],function(d){return{documentPositionPreceding:function(e,f){var c=d.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(e.compareDocumentPosition(f)&c)},documentPositionContainedBy:function(e,
f){var c=d.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;return 0!==(e.compareDocumentPosition(f)&c)}}});m("ephox.katamari.api.Thunk",[],function(){return{cached:function(d){var e=!1,f;return function(){e||(e=!0,f=d.apply(null,arguments));return f}}}});G("global!Number",Number);m("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(d,e,f){var c=function(){return b(0,0)},b=function(a,b){return{major:a,minor:b}};return{nu:b,detect:function(a,g){var h=f(g).toLowerCase();
if(0===a.length)h=c();else{var d;a:{for(d=0;d<a.length;d++){var l=a[d];if(l.test(h)){d=l;break a}}d=void 0}h=d?b(e(h.replace(d,"$1")),e(h.replace(d,"$2"))):{major:0,minor:0}}return h},unknown:c}});m("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(d,e){var f=function(b,a){return function(){return a===b}},c=function(b){var a=b.current;return{current:a,version:b.version,isEdge:f("Edge",a),isChrome:f("Chrome",a),isIE:f("IE",a),isOpera:f("Opera",a),isFirefox:f("Firefox",
a),isSafari:f("Safari",a)}};return{unknown:function(){return c({current:void 0,version:e.unknown()})},nu:c,edge:d.constant("Edge"),chrome:d.constant("Chrome"),ie:d.constant("IE"),opera:d.constant("Opera"),firefox:d.constant("Firefox"),safari:d.constant("Safari")}});m("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(d,e){var f=function(b,a){return function(){return a===b}},c=function(b){var a=b.current;return{current:a,version:b.version,isWindows:f("Windows",
a),isiOS:f("iOS",a),isAndroid:f("Android",a),isOSX:f("OSX",a),isLinux:f("Linux",a),isSolaris:f("Solaris",a),isFreeBSD:f("FreeBSD",a)}};return{unknown:function(){return c({current:void 0,version:e.unknown()})},nu:c,windows:d.constant("Windows"),ios:d.constant("iOS"),android:d.constant("Android"),linux:d.constant("Linux"),osx:d.constant("OSX"),solaris:d.constant("Solaris"),freebsd:d.constant("FreeBSD")}});m("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(d){return function(e,f,c){var b=
e.isiOS()&&!0===/ipad/i.test(c),a=e.isiOS()&&!b,g=e.isAndroid()&&3===e.version.major,h=e.isAndroid()&&4===e.version.major,g=b||g||h&&!0===/mobile/i.test(c),k=(h=e.isiOS()||e.isAndroid())&&!g;f=f.isSafari()&&e.isiOS()&&!1===/safari/i.test(c);return{isiPad:d.constant(b),isiPhone:d.constant(a),isTablet:d.constant(g),isPhone:d.constant(k),isTouch:d.constant(h),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:d.constant(f)}}});m("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version",
"global!String"],function(d,e,f){var c=function(b,a){var g=f(a).toLowerCase();return d.find(b,function(a){return a.search(g)})};return{detectBrowser:function(b,a){return c(b,a).map(function(b){var h=e.detect(b.versionRegexes,a);return{current:b.name,version:h}})},detectOs:function(b,a){return c(b,a).map(function(b){var h=e.detect(b.versionRegexes,a);return{current:b.name,version:h}})}}});m("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(d,e){return e+d},addToEnd:function(d,
e){return d+e},removeFromStart:function(d,e){return d.substring(e)},removeFromEnd:function(d,e){return d.substring(0,d.length-e)}}});m("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(d,e){return{first:function(d,c){return d.substr(0,c)},last:function(d,c){return d.substr(d.length-c,d.length)},head:function(e){return""===e?d.none():d.some(e.substr(0,1))},tail:function(e){return""===e?d.none():d.some(e.substring(1))}}});m("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend",
"ephox.katamari.str.StringParts","global!Error"],function(d,e,f){var c=function(a,b){return""===b?!0:a.length<b.length?!1:a.substr(0,0+b.length)===b},b=function(a,b){return""===b?!0:a.length<b.length?!1:a.substr(a.length-b.length,a.length-b.length+b.length)===b};return{supplant:function(a,b){return a.replace(/\${([^{}]*)}/g,function(a,c){var d=b[c],e=typeof d;return"string"===e||"number"===e?d:a})},startsWith:c,removeLeading:function(a,b){return c(a,b)?d.removeFromStart(a,b.length):a},removeTrailing:function(a,
g){return b(a,g)?d.removeFromEnd(a,g.length):a},ensureLeading:function(a,b){return c(a,b)?a:d.addToStart(a,b)},ensureTrailing:function(a,g){return b(a,g)?a:d.addToEnd(a,g)},endsWith:b,contains:function(a,b){return-1!==a.indexOf(b)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},lTrim:function(a){return a.replace(/^\s+/g,"")},rTrim:function(a){return a.replace(/\s+$/g,"")},capitalize:function(a){return e.head(a).bind(function(b){return e.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)}}});
m("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(d,e){var f=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,c=function(b){return function(a){return e.contains(a,b)}},f=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(b){return e.contains(b,"edge/")&&e.contains(b,"chrome")&&e.contains(b,"safari")&&e.contains(b,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,f],search:function(b){return e.contains(b,
"chrome")&&!e.contains(b,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(b){return e.contains(b,"msie")||e.contains(b,"trident")}},{name:"Opera",versionRegexes:[f,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:c("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:c("firefox")},{name:"Safari",versionRegexes:[f,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(b){return(e.contains(b,"safari")||e.contains(b,
"mobile/"))&&e.contains(b,"applewebkit")}}],c=[{name:"Windows",search:c("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(b){return e.contains(b,"iphone")||e.contains(b,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:c("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:c("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},
{name:"Linux",search:c("linux"),versionRegexes:[]},{name:"Solaris",search:c("sunos"),versionRegexes:[]},{name:"FreeBSD",search:c("freebsd"),versionRegexes:[]}];return{browsers:d.constant(f),oses:d.constant(c)}});m("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(d,e,f,c,b){return{detect:function(a){var g=b.browsers(),h=b.oses(),g=c.detectBrowser(g,a).fold(d.unknown,
d.nu),h=c.detectOs(h,a).fold(e.unknown,e.nu);a=f(h,g,a);return{browser:g,os:h,deviceType:a}}}});G("global!navigator",navigator);m("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(d,e,f){return{detect:d.cached(function(){return e.detect(f.userAgent)})}});m("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,
ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});m("ephox.sugar.api.search.Selectors","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.node.NodeTypes global!Error global!document".split(" "),function(d,e,f,c,b,a){var g=c.ELEMENT,h=c.DOCUMENT;return{all:function(b,c){var e=void 0===c?a:c.dom();return e.nodeType!==g&&e.nodeType!==h||0===e.childElementCount?[]:d.map(e.querySelectorAll(b),f.fromDom)},is:function(a,h){var c=a.dom();if(c.nodeType!==g)return!1;if(void 0!==
c.matches)return c.matches(h);if(void 0!==c.msMatchesSelector)return c.msMatchesSelector(h);if(void 0!==c.webkitMatchesSelector)return c.webkitMatchesSelector(h);if(void 0!==c.mozMatchesSelector)return c.mozMatchesSelector(h);throw new b("Browser lacks native selectors");},one:function(b,c){var d=void 0===c?a:c.dom();return d.nodeType!==g&&d.nodeType!==h||0===d.childElementCount?e.none():e.from(d.querySelector(b)).map(f.fromDom)}}});m("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun",
"ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(d,e,f,c,b){var a=function(a,b){return a.dom()===b.dom()},g=function(a,b){var g=a.dom(),h=b.dom();return g===h?!1:g.contains(h)},h=function(a,b){return f.documentPositionContainedBy(a.dom(),b.dom())};c=c.detect().browser.isIE()?h:g;return{eq:a,isEqualNode:function(a,b){return a.dom().isEqualNode(b.dom())},member:function(b,g){return d.exists(g,e.curry(a,b))},contains:c,is:b.is}});m("ephox.sugar.api.node.Node",
["ephox.sugar.api.node.NodeTypes"],function(d){var e=function(a){return a.dom().nodeName.toLowerCase()},f=function(a){return a.dom().nodeType},c=function(a){return function(b){return f(b)===a}},b=c(d.ELEMENT),a=c(d.TEXT),c=c(d.DOCUMENT);return{name:e,type:f,value:function(a){return a.dom().nodeValue},isElement:b,isText:a,isDocument:c,isComment:function(a){return f(a)===d.COMMENT||"#comment"===e(a)}}});m("ephox.katamari.api.Type",["global!Array","global!String"],function(d,e){var f=function(c){return function(b){if(null===
b)b="null";else{var a=typeof b;b="object"===a&&d.prototype.isPrototypeOf(b)?"array":"object"===a&&e.prototype.isPrototypeOf(b)?"string":a}return b===c}};return{isString:f("string"),isObject:f("object"),isArray:f("array"),isNull:f("null"),isBoolean:f("boolean"),isUndefined:f("undefined"),isFunction:f("function"),isNumber:f("number")}});m("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(d,e,f,c){var b=function(a){a=
a.dom().body;if(null===a||void 0===a)throw"Body is not available yet";return e.fromDom(a)};return{body:d.cached(function(){return b(e.fromDom(c))}),getBody:b,inBody:function(a){a=f.isText(a)?a.dom().parentNode:a.dom();return void 0!==a&&null!==a&&a.ownerDocument.body.contains(a)}}});m("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(d,e){return function(f,c,b,a,g){return f(b,a)?e.some(b):d.isFunction(g)&&g(b)?e.none():c(b,a,g)}});m("ephox.sugar.api.search.PredicateFind",
"ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Body ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.impl.ClosestOrAncestor".split(" "),function(d,e,f,c,b,a,g,h){var k=function(a,b,h){a=a.dom();for(h=d.isFunction(h)?h:f.constant(!1);a.parentNode;){a=a.parentNode;var e=g.fromDom(a);if(b(e))return c.some(e);if(h(e))break}return c.none()},l=function(a,b){return e.find(a.dom().childNodes,f.compose(b,g.fromDom)).map(g.fromDom)},
n=function(a,b){var h=function(a){for(var d=0;d<a.childNodes.length;d++){if(b(g.fromDom(a.childNodes[d])))return c.some(g.fromDom(a.childNodes[d]));var e=h(a.childNodes[d]);if(e.isSome())return e}return c.none()};return h(a.dom())};return{first:function(a){return n(b.body(),a)},ancestor:k,closest:function(a,b,g){return h(function(a){return b(a)},k,a,b,g)},sibling:function(b,h){var d=b.dom();return d.parentNode?l(g.fromDom(d.parentNode),function(g){return!a.eq(b,g)&&h(g)}):c.none()},child:l,descendant:n}});
m("ephox.sugar.api.dom.Dom","ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind global!document".split(" "),function(d,e,f,c,b,a){return{attached:function(g,h){var c=h||f.fromDom(a.documentElement);return b.ancestor(g,d.curry(e.eq,c)).isSome()},windowOf:function(a){var b=a.dom();return b===b.window?a:c.isDocument(a)?b.defaultView||b.parentWindow:null}}});m("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position",
"ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(d,e,f){var c=function(a,b){return void 0!==a?a:void 0!==b?b:0},b=function(a){var b=a.dom(),h=b.ownerDocument,c=h.body,h=f.fromDom(h.documentElement);if(c===b)return d(c.offsetLeft,c.offsetTop);if(!e.attached(a,h))return d(0,0);a=b.getBoundingClientRect();return d(a.left,a.top)};return{absolute:function(a){var g=a.dom().ownerDocument,h=g.body,d=e.windowOf(f.fromDom(g)),l=g.documentElement,g=c(d.pageYOffset,l.scrollTop),d=c(d.pageXOffset,
l.scrollLeft),n=c(l.clientTop,h.clientTop),h=c(l.clientLeft,h.clientLeft);return b(a).translate(d-h,g-n)},relative:function(a){a=a.dom();return d(a.offsetLeft,a.offsetTop)},viewport:b}});m("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(d,e,f,c,b){return{only:function(a){var g=e.from(a.dom().documentElement).map(f.fromDom).getOr(a);return{parent:d.constant(g),
view:d.constant(a),origin:d.constant(b(0,0))}},detached:function(a,b){var h=d.curry(c.absolute,b);return{parent:d.constant(b),view:d.constant(a),origin:h}},body:function(a,g){return{parent:d.constant(g),view:d.constant(a),origin:d.constant(b(0,0))}}}});m("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(d,e,f,c){return function(){var b=arguments;return function(){for(var a=new f(arguments.length),g=0;g<a.length;g++)a[g]=arguments[g];
if(b.length!==a.length)throw new c('Wrong number of arguments to struct. Expected "['+b.length+']", got '+a.length+" arguments");var h={};d.each(b,function(b,g){h[b]=e.constant(a[g])});return h}}});m("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(d,e){var f=function(){var a=e.keys,b=function(a){var b=[],h;for(h in a)a.hasOwnProperty(h)&&b.push(h);return b};return void 0===a?b:a}(),c=function(a,b){for(var g=f(a),c=0,d=g.length;c<d;c++){var e=g[c];b(a[e],e,a)}},b=function(a,
b){var g={};c(a,function(c,d){var e=b(c,d,a);g[e.k]=e.v});return g},a=function(a,b){var g=[];c(a,function(a,c){g.push(b(a,c))});return g},g=function(b){return a(b,function(a){return a})};return{bifilter:function(a,b){var g={},d={};c(a,function(a,c){(b(a,c)?g:d)[c]=a});return{t:g,f:d}},each:c,map:function(a,g){return b(a,function(a,b,c){return{k:b,v:g(a,b,c)}})},mapToArray:a,tupleMap:b,find:function(a,b){for(var g=f(a),c=0,e=g.length;c<e;c++){var q=g[c],r=a[q];if(b(r,q,a))return d.some(r)}return d.none()},
keys:f,values:g,size:function(a){return g(a).length}}});m("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(d,e,f){var c=function(b){return b.slice(0).sort()};return{sort:c,reqMessage:function(b,a){throw new f("All required keys ("+c(b).join(", ")+") were not specified. Specified keys were: "+c(a).join(", ")+".");},unsuppMessage:function(b){throw new f("Unsupported keys for object: "+c(b).join(", "));},validateStrArr:function(b,a){if(!e.isArray(a))throw new f("The "+
b+" fields must be an array. Was: "+a+".");d.each(a,function(a){if(!e.isString(a))throw new f("The value "+a+" in the "+b+" fields was not a string.");})},invalidTypeMessage:function(b,a){throw new f("All values need to be of type: "+a+". Keys ("+c(b).join(", ")+") were not.");},checkDupes:function(b){var a=c(b);d.find(a,function(b,c){return c<a.length-1&&b===a[c+1]}).each(function(b){throw new f("The field: "+b+" occurs more than once in the combined fields: ["+a.join(", ")+"].");})}}});m("ephox.katamari.data.MixedBag",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.util.BagUtils global!Error global!Object".split(" "),function(d,e,f,c,b,a,g){return function(h,k){var l=h.concat(k);if(0===l.length)throw new a("You must specify at least one required or optional field.");b.validateStrArr("required",h);b.validateStrArr("optional",k);b.checkDupes(l);return function(a){var p=f.keys(a);d.forall(h,function(a){return d.contains(p,a)})||b.reqMessage(h,p);var q=
d.filter(p,function(a){return!d.contains(l,a)});0<q.length&&b.unsuppMessage(q);var r={};d.each(h,function(b){r[b]=e.constant(a[b])});d.each(k,function(b){r[b]=e.constant(g.prototype.hasOwnProperty.call(a,b)?c.some(a[b]):c.none())});return r}}});m("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(d,e){return{immutable:d,immutableBag:e}});m("ephox.sugar.api.properties.Attr","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.node.Node global!Error global!console".split(" "),
function(d,e,f,c,b,a){var g=function(c,g,h){if(d.isString(h)||d.isBoolean(h)||d.isNumber(h))c.setAttribute(g,h+"");else throw a.error("Invalid call to Attr.set. Key ",g,":: Value ",h,":: Element ",c),new b("Attribute value was not simple");},h=function(a,b,c){g(a.dom(),b,c)},k=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},l=function(a,b){var c=a.dom();return c&&c.hasAttribute?c.hasAttribute(b):!1};return{clone:function(a){return e.foldl(a.dom().attributes,function(a,b){a[b.name]=
b.value;return a},{})},set:h,setAll:function(a,b){var c=a.dom();f.each(b,function(a,b){g(c,b,a)})},get:k,has:l,remove:function(a,b){a.dom().removeAttribute(b)},hasNone:function(a){a=a.dom().attributes;return void 0===a||null===a||0===a.length},transfer:function(a,b,g){c.isElement(a)&&c.isElement(b)&&e.each(g,function(c){l(a,c)&&!l(b,c)&&h(b,c,k(a,c))})}}});m("ephox.sugar.impl.Style",[],function(){return{isSupported:function(d){return void 0!==d.style}}});G("global!window",window);m("ephox.sugar.api.properties.Css",
"ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.properties.Attr ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.impl.Style ephox.katamari.api.Strings global!Error global!console global!window".split(" "),function(d,e,f,c,b,a,g,h,k,l,n,p,q){var r=function(a,b,c){if(!d.isString(c))throw p.error("Invalid call to CSS.set. Property ",b,":: Value ",c,":: Element ",a),new n("CSS value must be a string: "+
c);k.isSupported(a)&&a.style.setProperty(b,c)},t=function(a,b,c){a=a.dom();r(a,b,c)},s=function(a,b){var g=a.dom(),g=k.isSupported(g)?g.style.getPropertyValue(b):"";return c.from(g).filter(function(a){return 0<a.length})},u=function(a,b,c){s(a,c).each(function(a){s(b,c).isNone()&&t(b,c,a)})};return{copy:function(a,b){var c=a.dom(),g=b.dom();k.isSupported(c)&&k.isSupported(g)&&(g.style.cssText=c.style.cssText)},set:t,preserve:function(a,c){var g=b.get(a,"style"),h=c(a);(void 0===g?b.remove:b.set)(a,
"style",g);return h},setAll:function(a,b){var c=a.dom();f.each(b,function(a,b){r(c,b,a)})},setOptions:function(a,b){var c=a.dom();f.each(b,function(a,b){a.fold(function(){k.isSupported(c)&&c.style.removeProperty(b)},function(a){r(c,b,a)})})},remove:function(a,c){var g=a.dom();k.isSupported(g)&&g.style.removeProperty(c);b.has(a,"style")&&""===l.trim(b.get(a,"style"))&&b.remove(a,"style")},get:function(b,c){var g=b.dom(),h=q.getComputedStyle(g).getPropertyValue(c),g=""!==h||a.inBody(b)?h:k.isSupported(g)?
g.style.getPropertyValue(c):"";return null===g?void 0:g},getRaw:s,getAllRaw:function(a){var b={};a=a.dom();if(k.isSupported(a))for(var c=0;c<a.style.length;c++){var g=a.style.item(c);b[g]=a.style[g]}return b},isValidValue:function(a,b,c){a=g.fromTag(a);t(a,b,c);return s(a,b).isSome()},reflow:function(a){return a.dom().offsetWidth},transfer:function(a,b,c){h.isElement(a)&&h.isElement(b)&&e.each(c,function(c){u(a,b,c)})}}});m("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr",
"ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(d,e,f,c){return function(b,a){var g=function(c){var g=a(c);return 0>=g||null===g?(c=f.get(c,b),parseFloat(c)||0):g},h=function(a,b){return e.foldl(b,function(b,c){var g=f.get(a,c),g=void 0===g?0:parseInt(g,10);return isNaN(g)?b:b+g},0)};return{set:function(a,g){if(!d.isNumber(g)&&!g.match(/^[0-9]+$/))throw b+".set accepts only positive integer values. Value was "+g;var h=a.dom();c.isSupported(h)&&(h.style[b]=g+"px")},get:g,getOuter:g,
aggregate:h,max:function(a,b,c){a=h(a,c);return b>a?b-a:0}}}});m("ephox.sugar.api.view.Height",["ephox.sugar.api.node.Body","ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(d,e,f){var c=f("height",function(b){return d.inBody(b)?b.dom().getBoundingClientRect().height:b.dom().offsetHeight});return{set:function(b,a){c.set(b,a)},get:function(b){return c.get(b)},getOuter:function(b){return c.getOuter(b)},setMax:function(b,a){var g=c.max(b,a,"margin-top border-top-width padding-top padding-bottom border-bottom-width margin-bottom".split(" "));
e.set(b,"max-height",g+"px")}}});m("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(d,e){var f=e("width",function(c){return c.dom().offsetWidth});return{set:function(c,b){f.set(c,b)},get:function(c){return f.get(c)},getOuter:function(c){return f.getOuter(c)},setMax:function(c,b){var a=f.max(c,b,"margin-left border-left-width padding-left padding-right border-right-width margin-right".split(" "));d.set(c,"max-width",a+"px")}}});m("ephox.snooker.resize.BarPositions",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Struct ephox.sugar.api.view.Height ephox.sugar.api.view.Location ephox.sugar.api.view.Width".split(" "),function(d,e,f,c,b,a){var g=f.immutable("row","y"),h=f.immutable("col","x"),k=function(c){return b.absolute(c).left()+a.getOuter(c)},l=function(a){return b.absolute(a).left()},n=function(a,b){return h(a,l(b))},p=function(a,b){return h(a,k(b))},q=function(a){return b.absolute(a).top()},r=function(a,b,c){if(0===c.length)return[];var g=
d.map(c.slice(1),function(b,c){return b.map(function(b){return a(c,b)})}),h=c[c.length-1].map(function(a){return b(c.length-1,a)});return g.concat([h])};f={delta:e.identity,positions:e.curry(r,function(a,b){return g(a,q(b))},function(a,b){return g(a,q(b)+c.getOuter(b))}),edge:q};var t={delta:e.identity,edge:l,positions:e.curry(r,n,p)};e={delta:function(a,b){return-a},edge:k,positions:e.curry(r,p,n)};return{height:f,rtl:e,ltr:t}});m("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],
function(d){return{ltr:d.ltr,rtl:d.rtl}});m("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(d){return function(e){var f=function(c){return e(c).isRtl()?d.rtl:d.ltr};return{delta:function(c,b){return f(b).delta(c,b)},edge:function(c){return f(c).edge(c)},positions:function(c,b){return f(b).positions(c,b)}}}});m("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(d,e){return function(f){var c=e.immutable.apply(null,f),b=[];return{bind:function(a){if(void 0===
a)throw"Event bind error: undefined handler";b.push(a)},unbind:function(a){b=d.filter(b,function(b){return b!==a})},trigger:function(){var a=c.apply(null,arguments);d.each(b,function(b){b(a)})}}}});m("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(d){return{create:function(e){var f=d.map(e,function(c){return{bind:c.bind,unbind:c.unbind}});e=d.map(e,function(c){return c.trigger});return{registry:f,trigger:e}}}});m("ephox.snooker.calc.ColumnContext",[],function(){return{none:function(){return{fold:function(d,
e,f,c,b){return d()}}},only:function(d){return{fold:function(e,f,c,b,a){return f(d)}}},left:function(d,e){return{fold:function(f,c,b,a,g){return b(d,e)}}},middle:function(d,e,f){return{fold:function(c,b,a,g,h){return g(d,e,f)}}},right:function(d,e){return{fold:function(f,c,b,a,g){return g(d,e)}}}}});G("global!Math",Math);m("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(d,e,f,c){return{determine:function(b,a,
g,h){var k=b.slice(0);b=0===b.length?f.none():1===b.length?f.only(0):0===a?f.left(0,1):a===b.length-1?f.right(a-1,a):0<a&&a<b.length-1?f.middle(a-1,a,a+1):f.none();var l=function(a){return d.map(a,e.constant(0))};a=e.constant(l(k));var n=function(a,b){if(0<=g){var d=c.max(h.minCellWidth(),k[b]-g);return l(k.slice(0,a)).concat([g,d-k[b]]).concat(l(k.slice(b+1)))}var d=c.max(h.minCellWidth(),k[a]+g),e=k[a]-d;return l(k.slice(0,a)).concat([d-k[a],e]).concat(l(k.slice(b+1)))};return b.fold(a,function(a){return h.singleColumnWidth(k[a],
g)},n,function(a,b,c){return n(b,c)},function(a,b){if(0<=g)return l(k.slice(0,b)).concat([g]);var d=c.max(h.minCellWidth(),k[b]+g);return l(k.slice(0,b)).concat([d-k[b]])})}}});m("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(d){var e=d.immutable("width","height"),f=d.immutable("rows","columns"),c=d.immutable("row","column"),b=d.immutable("x","y"),a=d.immutable("element","rowspan","colspan"),g=d.immutable("element","rowspan","colspan","isNew"),h=d.immutable("element","rowspan",
"colspan","row","column"),k=d.immutable("element","cells","section"),l=d.immutable("element","isNew"),n=d.immutable("element","cells","section","isNew"),p=d.immutable("cells","section"),q=d.immutable("details","section");d=d.immutable("startRow","startCol","finishRow","finishCol");return{dimensions:e,grid:f,address:c,coords:b,extended:h,detail:a,detailnew:g,rowdata:k,elementnew:l,rowdatanew:n,rowcells:p,rowdetails:q,bounds:d}});m("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(d,
e){var f=[],c=function(a){f.push(a);return e(a)},b=e(d);do b=b.bind(c);while(b.isSome());return f}}});m("ephox.sugar.api.search.Traverse","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.alien.Recurse ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element".split(" "),function(d,e,f,c,b,a,g,h){var k=function(a){return h.fromDom(a.dom().ownerDocument)},l=function(a){a=a.dom();return c.from(a.parentNode).map(h.fromDom)},
n=function(a){a=a.dom();return c.from(a.previousSibling).map(h.fromDom)},p=function(a){a=a.dom();return c.from(a.nextSibling).map(h.fromDom)},q=function(a){a=a.dom();return e.map(a.childNodes,h.fromDom)},r=function(a,b){var g=a.dom().childNodes;return c.from(g[b]).map(h.fromDom)},t=b.immutable("element","offset");return{owner:k,defaultView:function(a){a=a.dom().ownerDocument.defaultView;return h.fromDom(a)},documentElement:function(a){a=k(a);return h.fromDom(a.dom().documentElement)},parent:l,findIndex:function(a){return l(a).bind(function(b){b=
q(b);return e.findIndex(b,function(b){return g.eq(a,b)})})},parents:function(a,b){for(var c=d.isFunction(b)?b:f.constant(!1),g=a.dom(),e=[];null!==g.parentNode&&void 0!==g.parentNode;){var g=g.parentNode,k=h.fromDom(g);e.push(k);if(!0===c(k))break}return e},siblings:function(a){return l(a).map(q).map(function(b){return e.filter(b,function(b){return!g.eq(a,b)})}).getOr([])},prevSibling:n,offsetParent:function(a){a=a.dom();return c.from(a.offsetParent).map(h.fromDom)},prevSiblings:function(b){return e.reverse(a.toArray(b,
n))},nextSibling:p,nextSiblings:function(b){return a.toArray(b,p)},children:q,child:r,firstChild:function(a){return r(a,0)},lastChild:function(a){return r(a,a.dom().childNodes.length-1)},childNodesCount:function(a,b){return a.dom().childNodes.length},leaf:function(a,b){var c=q(a);return 0<c.length&&b<c.length?t(c[b],0):t(a,b)}}});m("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(d,
e,f,c){var b=function(a,g,h){return d.bind(c.children(a),function(a){return f.is(a,g)?h(a)?[a]:[]:b(a,g,h)})};return{firstLayer:function(a,c){return b(a,c,e.constant(!0))},filterFirstLayer:b}});m("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(d,e,f){var c=function(b,a){var g=[];d.each(f.children(b),function(b){a(b)&&(g=g.concat([b]));g=g.concat(c(b,a))});return g};return{all:function(b){return c(e.body(),b)},
ancestors:function(b,a,c){return d.filter(f.parents(b,c),a)},siblings:function(b,a){return d.filter(f.siblings(b),a)},children:function(b,a){return d.filter(f.children(b),a)},descendants:c}});m("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(d,e){return{all:function(d){return e.all(d)},ancestors:function(f,c,b){return d.ancestors(f,function(a){return e.is(a,c)},b)},siblings:function(f,c){return d.siblings(f,function(b){return e.is(b,
c)})},children:function(f,c){return d.children(f,function(b){return e.is(b,c)})},descendants:function(d,c){return e.all(c,d)}}});m("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(d,e,f){var c=function(b,a,c){return d.ancestor(b,function(b){return e.is(b,a)},c)};return{first:function(b){return e.one(b)},ancestor:c,sibling:function(b,a){return d.sibling(b,function(b){return e.is(b,a)})},child:function(b,
a){return d.child(b,function(b){return e.is(b,a)})},descendant:function(b,a){return e.one(a,b)},closest:function(b,a,g){return f(e.is,c,b,a,g)}}});G("global!parseInt",parseInt);m("ephox.snooker.api.TableLookup","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.Structs ephox.snooker.util.LayerSelector ephox.sugar.api.properties.Attr ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Selectors ephox.sugar.api.search.Traverse global!parseInt".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p){var q=function(a,b,c){var h=void 0!==c?c:e.constant(!1);return h(b)?f.none():d.contains(a,g.name(b))?f.some(b):k.ancestor(b,a.join(","),function(a){return l.is(a,"table")||h(a)})},r=function(a,b){return n.parent(b).map(function(b){return h.children(b,a)})},t=e.curry(r,"th,td"),r=e.curry(r,"tr"),s=function(b,c){return p(a.get(b,c),10)};return{cell:function(a,b){return q(["td","th"],a,b)},firstCell:function(a){return k.descendant(a,"th,td")},cells:function(a){return b.firstLayer(a,
"th,td")},neighbourCells:t,table:function(a,b){return k.closest(a,"table",b)},row:function(a,b){return q(["tr"],a,b)},rows:function(a){return b.firstLayer(a,"tr")},notCell:function(a,b){return q(["caption","tr","tbody","tfoot","thead"],a,b)},neighbourRows:r,attr:s,grid:function(a,b,g){b=s(a,b);a=s(a,g);return c.grid(b,a)}}});m("ephox.snooker.model.DetailsList","ephox.katamari.api.Arr ephox.snooker.api.Structs ephox.snooker.api.TableLookup ephox.sugar.api.properties.Attr ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse".split(" "),
function(d,e,f,c,b,a){return{fromTable:function(g){g=f.rows(g);return d.map(g,function(g){var k=a.parent(g).bind(function(a){a=b.name(a);return"tfoot"===a||"thead"===a||"tbody"===a?a:"tbody"}),l=d.map(f.cells(g),function(a){var b=c.has(a,"rowspan")?parseInt(c.get(a,"rowspan"),10):1,g=c.has(a,"colspan")?parseInt(c.get(a,"colspan"),10):1;return e.detail(a,b,g)});return e.rowdata(g,l,k)})},fromPastedRows:function(a,b){return d.map(a,function(a){var g=d.map(f.cells(a),function(a){var b=c.has(a,"rowspan")?
parseInt(c.get(a,"rowspan"),10):1,g=c.has(a,"colspan")?parseInt(c.get(a,"colspan"),10):1;return e.detail(a,b,g)});return e.rowdata(a,g,b.section())})}}});m("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(d,e,f,c,b){var a=function(a,b){var c=d.bind(a.all(),function(a){return a.cells()});return d.filter(c,b)};return{generate:function(a){var h={},f=[],l=0,n=0;d.each(a,function(a,g){var e=
[];d.each(a.cells(),function(a,d){for(var f=0;void 0!==h[g+","+f];)f++;for(var k=c.extended(a.element(),a.rowspan(),a.colspan(),g,f),p=0;p<a.colspan();p++)for(var w=0;w<a.rowspan();w++){var m=g+w,A=f+p;h[m+","+A]=k;l=b.max(l,m+1);n=b.max(n,A+1)}e.push(k)});f.push(c.rowdata(a.element(),e,a.section()))});a=c.grid(l,n);return{grid:e.constant(a),access:e.constant(h),all:e.constant(f)}},getAt:function(a,b,c){a=a.access()[b+","+c];return void 0!==a?f.some(a):f.none()},findItem:function(b,c,d){b=a(b,function(a){return d(c,
a.element())});return 0<b.length?f.some(b[0]):f.none()},filterItems:a,justCells:function(a){a=d.map(a.all(),function(a){return a.cells()});return d.flatten(a)}}});m("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(d){return{cat:function(d){for(var f=[],c=function(a){f.push(a)},b=0;b<d.length;b++)d[b].each(c);return f},findMap:function(e,f){for(var c=0;c<e.length;c++){var b=f(e[c],c);if(b.isSome())return b}return d.none()},liftN:function(e,f){for(var c=[],b=0;b<e.length;b++){var a=
e[b];if(a.isSome())c.push(a.getOrDie());else return d.none()}return d.some(f.apply(null,c))}}});m("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(d,e,f,c){return{repeat:function(b,a){for(var c=[],d=0;d<b;d++)c.push(a(d));return c},range:function(b,a){for(var c=[],d=b;d<a;d++)c.push(d);return c},unique:function(b,a){var c=[];d.each(b,function(d,e){e<b.length-1&&!a(d,b[e+1])?c.push(d):e===b.length-1&&c.push(d)});return c},
deduce:function(b,a){if(0>a||a>=b.length-1)return e.none();var g=b[a].fold(function(){var c=d.reverse(b.slice(0,a));return f.findMap(c,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return e.some({value:a,delta:0})}),h=b[a+1].fold(function(){var c=b.slice(a+1);return f.findMap(c,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return e.some({value:a,delta:1})});return g.bind(function(a){return h.map(function(b){var g=b.delta+a.delta;
return c.abs(b.value-a.value)/g})})}}});m("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(d,e,f,c,b){var a=function(a,b,c){var e=a();return d.find(e,b).orThunk(function(){return f.from(e[0]).orThunk(c)}).map(function(a){return a.element()})};return{columns:function(g){var h=g.grid(),f=b.range(0,h.columns()),l=b.range(0,h.rows());return d.map(f,function(b){return a(function(){return d.bind(l,
function(a){return c.getAt(g,a,b).filter(function(a){return a.column()===b}).fold(e.constant([]),function(a){return[a]})})},function(a){return 1===a.colspan()},function(){return c.getAt(g,0,b)})})},rows:function(g){var h=g.grid(),f=b.range(0,h.rows()),l=b.range(0,h.columns());return d.map(f,function(b){return a(function(){return d.bind(l,function(a){return c.getAt(g,b,a).filter(function(a){return a.row()===b}).fold(e.constant([]),function(a){return[a]})})},function(a){return 1===a.rowspan()},function(){return c.getAt(g,
b,0)})})}}});m("ephox.snooker.resize.Sizes","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Strings ephox.snooker.api.TableLookup ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.view.Height ephox.sugar.api.view.Width global!Math global!parseInt".split(" "),function(d,e,f,c,b,a,g,h,k,l,n){var p=/(\d+(\.\d+)?)(\w|%)*/,q=/(\d+(\.\d+)?)%/,r=/(\d+(\.\d+)?)px|em/,t=function(a,b){g.set(a,"height",b+"px")},s=function(a,b){return g.getRaw(a,
b).getOrThunk(function(){return g.get(a,b)})},u=function(a,b,g,d){var e=c.table(a).map(function(a){a=g(a);return l.floor(b/100*a)}).getOr(b);d(a,e);return e},x=function(b){return g.getRaw(b,"width").fold(function(){return e.from(a.get(b,"width"))},function(a){return e.some(a)})};return{percentageBasedSizeRegex:d.constant(q),pixelBasedSizeRegex:d.constant(r),setPixelWidth:function(a,b){g.set(a,"width",b+"px")},setPercentageWidth:function(a,b){g.set(a,"width",b+"%")},setHeight:t,getPixelWidth:function(a,
b){return x(a).fold(function(){var b=k.get(a);return n(b,10)},function(c){r.test(c)?(c=r.exec(c),c=n(c[1],10)):q.test(c)?(c=q.exec(c),c=parseFloat(c[1],10)/100*b.pixelWidth()):(c=k.get(a),c=n(c,10));return c})},getPercentageWidth:function(a,b){return x(a).fold(function(){var c=k.get(a);return 100*(n(c,10)/b.pixelWidth())},function(c){q.test(c)?(c=q.exec(c),c=parseFloat(c[1],10)):(c=k.get(a),c=100*(n(c,10)/b.pixelWidth()));return c})},getGenericWidth:function(a){return x(a).bind(function(a){return p.test(a)?
(a=p.exec(a),e.some({width:d.constant(a[1]),unit:d.constant(a[3])})):e.none()})},setGenericWidth:function(a,b,c){g.set(a,"width",b+c)},getHeight:function(c){var g;if(g=s(c,"height")){var d=h.get,e=n(g,10);g=f.endsWith(g,"%")&&"table"!==b.name(c)?u(c,e,d,t):e}else g=h.get(c);c=a.has(c,"rowspan")?n(a.get(c,"rowspan"),10):1;return g/c},getRawWidth:x}});m("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(d,
e,f,c){return{hasColspan:function(b){return e.has(b,"colspan")&&1<c(e.get(b,"colspan"),10)},hasRowspan:function(b){return e.has(b,"rowspan")&&1<c(e.get(b,"rowspan"),10)},minWidth:d.constant(10),minHeight:d.constant(10),getInt:function(b,a){return c(f.get(b,a),10)}}});m("ephox.snooker.resize.ColumnSizes","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.lookup.Blocks ephox.snooker.resize.Sizes ephox.snooker.util.CellUtils ephox.snooker.util.Util ephox.sugar.api.properties.Css".split(" "),
function(d,e,f,c,b,a,g){var h=function(a,b,c){return g.getRaw(a,b).fold(function(){return c(a)+"px"},function(a){return a})},k=function(a){return h(a,"width",c.getPixelWidth)},l=function(a){return h(a,"height",c.getHeight)},n=function(c,g,h,k,l){c=f.columns(c);var n=d.map(c,function(a){return a.map(g.edge)});return d.map(c,function(c,g){return c.filter(e.not(b.hasColspan)).fold(function(){var b=a.deduce(n,g);return k(b)},function(a){return h(a,l)})})},p=function(a){return a.map(function(a){return a+
"px"}).getOr("")},q=function(c,g,h,k){c=f.rows(c);var l=d.map(c,function(a){return a.map(g.edge)});return d.map(c,function(c,g){return c.filter(e.not(b.hasRowspan)).fold(function(){var b=a.deduce(l,g);return k(b)},function(a){return h(a)})})};return{getRawWidths:function(a,b){return n(a,b,k,p)},getPixelWidths:function(a,b,g){return n(a,b,c.getPixelWidth,function(a){return a.getOrThunk(g.minCellWidth)},g)},getPercentageWidths:function(a,b,g){return n(a,b,c.getPercentageWidth,function(a){return a.fold(function(){return g.minCellWidth()},
function(a){return 100*(a/g.pixelWidth())})},g)},getPixelHeights:function(a,g){return q(a,g,c.getHeight,function(a){return a.getOrThunk(b.minHeight)})},getRawHeights:function(a,b){return q(a,b,l,p)}}});m("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(d,e,f,c){var b=function(a,b,c){for(var d=0;a<b;a++)d+=void 0!==c[a]?c[a]:0;return d};return{recalculateWidth:function(a,c){var h=f.justCells(a);return d.map(h,
function(a){var d=b(a.column(),a.column()+a.colspan(),c);return{element:a.element,width:e.constant(d),colspan:a.colspan}})},recalculateHeight:function(a,c){var h=f.justCells(a);return d.map(h,function(a){var d=b(a.row(),a.row()+a.rowspan(),c);return{element:a.element,height:e.constant(d),rowspan:a.rowspan}})},matchRowHeight:function(a,b){return d.map(a.all(),function(a,c){return{element:a.element,height:e.constant(b[c])}})}}});m("ephox.snooker.resize.TableSize","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.resize.ColumnSizes ephox.snooker.resize.Sizes ephox.snooker.util.CellUtils ephox.sugar.api.view.Width global!Math".split(" "),
function(d,e,f,c,b,a,g){var h=function(g,d){var h=parseFloat(g,10),k=a.get(d);return{width:e.constant(h),pixelWidth:e.constant(k),getWidths:f.getPercentageWidths,getCellDelta:function(a){return 100*(a/k)},singleColumnWidth:function(a,b){return[100-a]},minCellWidth:function(){return 100*(b.minWidth()/k)},setElementWidth:c.setPercentageWidth,setTableWidth:function(a,b,g){c.setPercentageWidth(a,h+g)}}},k=function(a){a=parseInt(a,10);var h=e.identity;return{width:e.constant(a),pixelWidth:e.constant(a),
getWidths:f.getPixelWidths,getCellDelta:h,singleColumnWidth:function(a,c){return[g.max(b.minWidth(),a+c)-a]},minCellWidth:b.minWidth,setElementWidth:c.setPixelWidth,setTableWidth:function(a,b,g){b=d.foldr(b,function(a,b){return a+b},0);c.setPixelWidth(a,b)}}};return{getTableSize:function(b){return c.getRawWidth(b).fold(function(){var c=a.get(b);return k(c)},function(g){c.percentageBasedSizeRegex().test(g)?(g=c.percentageBasedSizeRegex().exec(g),g=h(g[1],b)):c.pixelBasedSizeRegex().test(g)?(g=c.pixelBasedSizeRegex().exec(g),
g=k(g[1])):(g=a.get(b),g=k(g));return g})}}});m("ephox.snooker.resize.Adjustments","ephox.katamari.api.Arr ephox.snooker.calc.Deltas ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.resize.ColumnSizes ephox.snooker.resize.Recalculations ephox.snooker.resize.Sizes ephox.snooker.resize.TableSize ephox.snooker.util.CellUtils global!Math".split(" "),function(d,e,f,c,b,a,g,h,k,l){var n=function(a){return d.foldr(a,function(a,b){return a+b},0)},p=function(a){a=f.fromTable(a);
return c.generate(a)};return{adjustWidth:function(b,c,g,f){var k=h.getTableSize(b);c=k.getCellDelta(c);var l=p(b),n=k.getWidths(l,f,k);f=e.determine(n,g,c,k);f=d.map(f,function(a,b){return a+n[b]});var w=a.recalculateWidth(l,f);d.each(w,function(a){k.setElementWidth(a.element(),a.width())});g===l.grid().columns()-1&&k.setTableWidth(b,f,c)},adjustHeight:function(c,e,h,f){var u=p(c);f=b.getPixelHeights(u,f);f=d.map(f,function(a,b){return h===b?l.max(e+a,k.minHeight()):a});var x=a.recalculateHeight(u,
f),u=a.matchRowHeight(u,f);d.each(u,function(a){g.setHeight(a.element(),a.height())});d.each(x,function(a){g.setHeight(a.element(),a.height())});u=n(f);g.setHeight(c,u)},adjustWidthTo:function(b,g,e){var f=h.getTableSize(b);g=c.generate(g);e=f.getWidths(g,e,f);g=a.recalculateWidth(g,e);d.each(g,function(a){f.setElementWidth(a.element(),a.width())});e=d.foldr(e,function(a,b){return b+a},0);0<g.length&&f.setElementWidth(b,e)}}});m("ephox.katamari.api.Contracts","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Type ephox.katamari.util.BagUtils global!Error".split(" "),
function(d,e,f,c,b,a){var g=function(a,b){return h(a,b,{validate:c.isFunction,label:"function"})},h=function(c,g,e){if(0===g.length)throw new a("You must specify at least one required field.");b.validateStrArr("required",g);b.checkDupes(g);return function(a){var h=f.keys(a);d.forall(g,function(a){return d.contains(h,a)})||b.reqMessage(g,h);c(g,h);var k=d.filter(g,function(b){return!e.validate(a[b],b)});0<k.length&&b.invalidTypeMessage(k,e.label);return a}},k=e.noop;return{exactly:e.curry(g,function(a,
c){var g=d.filter(c,function(b){return!d.contains(a,b)});0<g.length&&b.unsuppMessage(g)}),ensure:e.curry(g,k),ensureWith:e.curry(h,k)}});m("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(d){var e=d.exactly(["compare","extract","mutate","sink"]),f=d.exactly(["element","start","stop","destroy"]);d=d.exactly(["forceDrop","drop","move","delayDrop"]);return{mode:e,sink:f,api:d}});m("ephox.katamari.api.Namespace",[],function(){return{css:function(d){var e=d.replace(/\./g,"-");return{resolve:function(d){return e+
"-"+d}}}}});m("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(d){return{resolve:d.css("ephox-dragster").resolve}});m("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(d,e,f){var c=function(a){return function(){for(var b=new e(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new f("Can't merge zero objects");for(var c={},d=0;d<b.length;d++){var l=b[d],n;for(n in l)l.hasOwnProperty(n)&&(c[n]=a(c[n],l[n]))}return c}},
b=c(function(a,c){return d.isObject(a)&&d.isObject(c)?b(a,c):c}),c=c(function(a,b){return b});return{deepMerge:b,merge:c}});m("ephox.sugar.api.properties.Toggler",[],function(){return function(d,e,f){var c=f||!1,b=function(){e();c=!0},a=function(){d();c=!1};return{on:b,off:a,toggle:function(){(c?a:b)()},isOn:function(){return c}}}});m("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(d,e){var f=function(c,b){var a=e.get(c,b);return void 0===
a||""===a?[]:a.split(" ")};return{read:f,add:function(c,b,a){a=f(c,b).concat([a]);e.set(c,b,a.join(" "))},remove:function(c,b,a){var g=d.filter(f(c,b),function(b){return b!==a});0<g.length?e.set(c,b,g.join(" ")):e.remove(c,b)}}});m("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(d,e){var f=function(a){return e.read(a,"class")},c=function(a,b){return e.add(a,"class",b)},b=function(a,b){return e.remove(a,"class",b)};return{get:f,add:c,remove:b,
toggle:function(a,g){d.contains(f(a),g)?b(a,g):c(a,g)},supports:function(a){return void 0!==a.dom().classList}}});m("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(d,e,f){var c=function(b,a){return f.supports(b)&&b.dom().classList.contains(a)};return{add:function(b,a){f.supports(b)?b.dom().classList.add(a):f.add(b,a)},remove:function(b,a){f.supports(b)?b.dom().classList.remove(a):f.remove(b,a);0===(f.supports(b)?
b.dom().classList:f.get(b)).length&&e.remove(b,"class")},toggle:function(b,a){return f.supports(b)?b.dom().classList.toggle(a):f.toggle(b,a)},toggler:function(b,a){var g=f.supports(b),e=b.dom().classList;return d(function(){g?e.remove(a):f.remove(b,a)},function(){g?e.add(a):f.add(b,a)},c(b,a))},has:c}});m("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(d){var e=function(c,b){d.parent(c).each(function(a){a.dom().insertBefore(b.dom(),c.dom())})},f=function(c,b){c.dom().appendChild(b.dom())};
return{before:e,after:function(c,b){d.nextSibling(c).fold(function(){d.parent(c).each(function(a){f(a,b)})},function(a){e(a,b)})},prepend:function(c,b){d.firstChild(c).fold(function(){f(c,b)},function(a){c.dom().insertBefore(b.dom(),a.dom())})},append:f,appendAt:function(c,b,a){d.child(c,a).fold(function(){f(c,b)},function(a){e(a,b)})},wrap:function(c,b){e(c,b);f(b,c)}}});m("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(d,e){return{before:function(f,
c){d.each(c,function(b){e.before(f,b)})},after:function(f,c){d.each(c,function(b,a){e.after(0===a?f:c[a-1],b)})},prepend:function(f,c){d.each(c.slice().reverse(),function(b){e.prepend(f,b)})},append:function(f,c){d.each(c,function(b){e.append(f,b)})}}});m("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(d,e,f){var c=function(b){b=b.dom();null!==b.parentNode&&b.parentNode.removeChild(b)};return{empty:function(b){b.dom().textContent=
"";d.each(f.children(b),function(a){c(a)})},remove:c,unwrap:function(b){var a=f.children(b);0<a.length&&e.before(b,a);c(b)}}});m("ephox.dragster.detect.Blocker","ephox.dragster.style.Styles ephox.katamari.api.Merger ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Remove".split(" "),function(d,e,f,c,b,a){return function(g){g=e.merge({layerClass:d.resolve("blocker")},g);var h=b.fromTag("div");c.setAll(h,{position:"fixed",left:"0px",top:"0px",
width:"100%",height:"100%"});f.add(h,d.resolve("blocker"));f.add(h,g.layerClass);return{element:function(){return h},destroy:function(){a.remove(h)}}}});m("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(d,e){var f=function(a,b){return function(c){if(a(c)){var f=e.fromDom(c.target),l=function(){c.stopPropagation()},n=function(){c.preventDefault()},p=d.compose(n,l),f={target:d.constant(f),x:d.constant(c.clientX),y:d.constant(c.clientY),stop:l,prevent:n,
kill:p,raw:d.constant(c)};b(f)}}},c=function(a,c,e,k,l){e=f(e,k);a.dom().addEventListener(c,e,l);return{unbind:d.curry(b,a,c,e,l)}},b=function(a,b,c,d){a.dom().removeEventListener(b,c,d)};return{bind:function(a,b,d,e){return c(a,b,d,e,!1)},capture:function(a,b,d,e){return c(a,b,d,e,!0)}}});m("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(d,e){var f=d.constant(!0);return{bind:function(c,b,a){return e.bind(c,b,f,a)},capture:function(c,b,a){return e.capture(c,
b,f,a)}}});m("ephox.dragster.api.MouseDrag","ephox.dragster.api.DragApis ephox.dragster.detect.Blocker ephox.katamari.api.Option ephox.sugar.api.view.Position ephox.sugar.api.events.DomEvent ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove".split(" "),function(d,e,f,c,b,a,g){return d.mode({compare:function(a,b){return c(b.left()-a.left(),b.top()-a.top())},extract:function(a){return f.some(c(a.x(),a.y()))},sink:function(c,f){var l=e(f),n=b.bind(l.element(),"mousedown",c.forceDrop),p=b.bind(l.element(),
"mouseup",c.drop),q=b.bind(l.element(),"mousemove",c.move),r=b.bind(l.element(),"mouseout",c.delayDrop);return d.sink({element:l.element,start:function(b){a.append(b,l.element())},stop:function(){g.remove(l.element())},destroy:function(){l.destroy();p.unbind();q.unbind();r.unbind();n.unbind()}})},mutate:function(a,b){a.mutate(b.left(),b.top())}})});m("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(d,e,f){return function(){var c=d.none(),
b=function(a,b){var e=c.map(function(c){return a.compare(c,b)});c=d.some(b);return e},a=f.create({move:e(["info"])});return{onEvent:function(c,d){d.extract(c).each(function(c){b(d,c).each(function(b){a.trigger.move(b)})})},reset:function(){c=d.none()},events:a.registry}}});m("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(d){return function(e){return{onEvent:function(d,c){},reset:d.noop}}});m("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],
function(d,e){return function(){var f=e(),c=d(),b=f;return{on:function(){b.reset();b=c},off:function(){b.reset();b=f},isOn:function(){return b===c},onEvent:function(a,c){b.onEvent(a,c)},events:c.events}}});G("global!clearTimeout",clearTimeout);G("global!setTimeout",setTimeout);m("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(d,e){return{adaptable:function(f,c){var b=null,a=null;return{cancel:function(){null!==b&&(d(b),a=b=null)},throttle:function(){a=arguments;
null===b&&(b=e(function(){f.apply(null,a);a=b=null},c))}}},first:function(f,c){var b=null;return{cancel:function(){null!==b&&(d(b),b=null)},throttle:function(){var a=arguments;null===b&&(b=e(function(){f.apply(null,a);a=b=null},c))}}},last:function(f,c){var b=null;return{cancel:function(){null!==b&&(d(b),b=null)},throttle:function(){var a=arguments;null!==b&&d(b);b=e(function(){f.apply(null,a);a=b=null},c)}}}}});m("ephox.dragster.core.Dragging","ephox.dragster.api.DragApis ephox.dragster.detect.Movement ephox.katamari.api.Throttler ephox.porkbun.Event ephox.porkbun.Events global!Array".split(" "),
function(d,e,f,c,b,a){return{setup:function(g,h,k){var l=!1,n=b.create({start:c([]),stop:c([])}),p=e(),q=function(){s.stop();p.isOn()&&(p.off(),n.trigger.stop())},r=f.last(q,200);p.events.move.bind(function(a){h.mutate(g,a.info())});var t=function(b){return function(){var c=a.prototype.slice.call(arguments,0);if(l)return b.apply(null,c)}},s=h.sink(d.api({forceDrop:q,drop:t(q),move:t(function(a,b){r.cancel();p.onEvent(a,h)}),delayDrop:t(r.throttle)}),k);return{element:s.element,go:function(a){s.start(a);
p.on();n.trigger.start()},on:function(){l=!0},off:function(){l=!1},destroy:function(){s.destroy()},events:n.registry}}}});m("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(d,e,f){return{transform:function(c,b){var a=void 0!==b?b:{};return e.setup(c,void 0!==a.mode?a.mode:d,b)}}});m("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(d,e){return function(){var f=e.create({drag:d(["xDelta","yDelta"])});
return{mutate:function(c,b){f.trigger.drag(c,b)},events:f.registry}}});m("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(d,e,f,c){return function(){var b=f.create({drag:e(["xDelta","yDelta","target"])}),a=d.none(),g=c();g.events.drag.bind(function(c){a.each(function(a){b.trigger.drag(c.xDelta(),c.yDelta(),a)})});return{assign:function(b){a=d.some(b)},get:function(){return a},mutate:g.mutate,events:b.registry}}});
m("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(d,e,f){return{col:function(c,b,a,g,h){var k=f.fromTag("div");e.setAll(k,{position:"absolute",left:b-g/2+"px",top:a+"px",height:h+"px",width:g+"px"});d.set(k,"data-column",c);return k},row:function(c,b,a,g,h){var k=f.fromTag("div");e.setAll(k,{position:"absolute",left:b+"px",top:a-h/2+"px",height:h+"px",width:g+"px"});d.set(k,"data-row",c);return k}}});m("ephox.snooker.style.Styles",
["ephox.katamari.api.Namespace"],function(d){return{resolve:d.css("ephox-snooker").resolve}});m("ephox.snooker.resize.Bars","ephox.katamari.api.Arr ephox.snooker.lookup.Blocks ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.resize.Bar ephox.snooker.style.Styles ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorFilter ephox.sugar.api.view.Height ephox.sugar.api.view.Location ephox.sugar.api.view.Width".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r){var t=a.resolve("resizer-bar"),s=a.resolve("resizer-rows"),u=a.resolve("resizer-cols"),x=function(a){a=n.descendants(a.parent(),"."+t);d.each(a,h.remove)},v=function(a,b,c){var e=a.origin();d.each(b,function(b,d){b.each(function(b){b=c(e,b);k.add(b,t);g.append(a.parent(),b)})})},w=function(a,c,g,d){v(a,c,function(a,c){var e=b.col(c.col(),c.x()-a.left(),g.top()-a.top(),7,d);k.add(e,u);return e})},m=function(a,c,g,d){v(a,c,function(a,c){var e=b.row(c.row(),g.left()-
a.left(),c.y()-a.top(),d,7);k.add(e,s);return e})},A=function(a,b){var c=n.descendants(a.parent(),"."+t);d.each(c,b)};return{refresh:function(a,b,g,d){x(a,b);var h=f.fromTable(b),h=c.generate(h),l=e.rows(h),k=e.columns(h),h=q.absolute(b);g=0<l.length?g.positions(l,b):[];m(a,g,h,r.getOuter(b));d=0<k.length?d.positions(k,b):[];w(a,d,h,p.getOuter(b))},hide:function(a){A(a,function(a){l.set(a,"display","none")})},show:function(a){A(a,function(a){l.set(a,"display","block")})},destroy:x,isRowBar:function(a){return k.has(a,
s)},isColBar:function(a){return k.has(a,u)}}});m("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(d){return{any:function(e){return d.first(e).isSome()},ancestor:function(e,f,c){return d.ancestor(e,f,c).isSome()},sibling:function(e,f){return d.sibling(e,f).isSome()},child:function(e,f){return d.child(e,f).isSome()},descendant:function(e,f){return d.descendant(e,f).isSome()},closest:function(e,f,c){return d.closest(e,f,c).isSome()}}});m("ephox.snooker.resize.BarManager",
"ephox.dragster.api.Dragger ephox.katamari.api.Fun ephox.katamari.api.Option ephox.porkbun.Event ephox.porkbun.Events ephox.snooker.resize.BarMutation ephox.snooker.resize.Bars ephox.snooker.style.Styles ephox.snooker.util.CellUtils ephox.sugar.api.dom.Compare ephox.sugar.api.events.DomEvent ephox.sugar.api.node.Body ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Class ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorExists ephox.sugar.api.search.SelectorFind global!parseInt".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r,t,s,u,x,v){var w=h.resolve("resizer-bar-dragging");return function(h,m,y){var D=a(),C=d.transform(D,{}),F=f.none(),z=function(a,b){return f.from(r.get(a,b))};D.events.drag.bind(function(a){z(a.target(),"data-row").each(function(b){b=k.getInt(a.target(),"top");s.set(a.target(),"top",b+a.yDelta()+"px")});z(a.target(),"data-column").each(function(b){b=k.getInt(a.target(),"left");s.set(a.target(),"left",b+a.xDelta()+"px")})});var E=function(a,b){var c=k.getInt(a,b),
g=v(r.get(a,"data-initial-"+b),10);return c-g};C.events.stop.bind(function(){D.get().each(function(a){F.each(function(b){z(a,"data-row").each(function(c){var g=E(a,"top");r.remove(a,"data-initial-top");H.trigger.adjustHeight(b,g,v(c,10))});z(a,"data-column").each(function(c){var g=E(a,"left");r.remove(a,"data-initial-left");H.trigger.adjustWidth(b,g,v(c,10))});g.refresh(h,b,y,m)})})});var K=function(a,b){H.trigger.startAdjust();D.assign(a);r.set(a,"data-initial-"+b,v(s.get(a,b),10));t.add(a,w);s.set(a,
"opacity","0.2");C.go(h.parent())},I=n.bind(h.parent(),"mousedown",function(a){g.isRowBar(a.target())&&K(a.target(),"top");g.isColBar(a.target())&&K(a.target(),"left")}),L=function(a){return l.eq(a,h.view())},M=n.bind(h.view(),"mouseover",function(a){"table"===q.name(a.target())||u.ancestor(a.target(),"table",L)?(F="table"===q.name(a.target())?f.some(a.target()):x.ancestor(a.target(),"table",L),F.each(function(a){g.refresh(h,a,y,m)})):p.inBody(a.target())&&g.destroy(h)}),H=b.create({adjustHeight:c(["table",
"delta","row"]),adjustWidth:c(["table","delta","column"]),startAdjust:c([])});return{destroy:function(){I.unbind();M.unbind();C.destroy();g.destroy(h)},refresh:function(a){g.refresh(h,a,y,m)},on:C.on,off:C.off,hideBars:e.curry(g.hide,h),showBars:e.curry(g.show,h),events:H.registry}}});m("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(d,e,f,c,b){return function(a,
g){var h=b.height,k=c(a,g,h),l=e.create({beforeResize:d(["table"]),afterResize:d(["table"]),startDrag:d([])});k.events.adjustHeight.bind(function(a){l.trigger.beforeResize(a.table());var b=h.delta(a.delta(),a.table());f.adjustHeight(a.table(),b,a.row(),h);l.trigger.afterResize(a.table())});k.events.startAdjust.bind(function(a){l.trigger.startDrag()});k.events.adjustWidth.bind(function(a){l.trigger.beforeResize(a.table());var b=g.delta(a.delta(),a.table());f.adjustWidth(a.table(),b,a.column(),g);l.trigger.afterResize(a.table())});
return{on:k.on,off:k.off,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,events:l.registry}}});G("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);m("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.PluginManager")});m("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.util.Tools")});m("ephox.snooker.api.CopySelected","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Struct ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.util.LayerSelector ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.search.Selectors".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p){var q=f.immutable("minRow","minCol","maxRow","maxCol"),r=function(a,b){var c=a.grid().columns(),g=a.grid().rows(),d=c,h=0,f=0;e.each(a.access(),function(a){if(b(a)){var c=a.row(),e=c+a.rowspan()-1,l=a.column();a=l+a.colspan()-1;c<g?g=c:e>h&&(h=e);l<d?d=l:a>f&&(f=a)}});return q(g,d,h,f)},t=function(a,c,g,d){for(var e=c.grid().columns(),h=c.grid().rows(),f=0;f<h;f++)for(var n=!1,p=0;p<e;p++)if(!(f<g.minRow()||f>g.maxRow()||p<g.minCol()||p>g.maxCol()))if(b.getAt(c,f,
p).filter(d).isNone()){var q=n,s=a[f].element(),r=k.fromTag("td");l.append(r,k.fromTag("br"));(q?l.append:l.prepend)(s,r)}else n=!0},s=function(b,c){var e=d.filter(a.firstLayer(b,"tr"),function(a){return 0===a.dom().childElementCount});d.each(e,n.remove);c.minCol()!==c.maxCol()&&c.minRow()!==c.maxRow()||d.each(a.firstLayer(b,"th,td"),function(a){g.remove(a,"rowspan");g.remove(a,"colspan")});g.remove(b,"width");g.remove(b,"height");h.remove(b,"width");h.remove(b,"height")};return{extract:function(g,
e){var h=function(a){return p.is(a.element(),e)},f=c.fromTable(g),l=b.generate(f),k=r(l,h),q="th:not("+e+"),td:not("+e+")",m=a.filterFirstLayer(g,"th,td",function(a){return p.is(a,q)});d.each(m,n.remove);t(f,l,k,h);s(g,k);return g}}});m("ephox.sugar.api.dom.Replication","ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(d,e,f,c,b,a){var g=function(a){return e.fromDom(a.dom().cloneNode(!0))},
h=function(a,b){var c=e.fromTag(b),g=d.clone(a);d.setAll(c,g);return c};return{shallow:function(a){return e.fromDom(a.dom().cloneNode(!1))},shallowAs:h,deep:g,copy:function(b,d){var e=h(b,d),f=a.children(g(b));c.append(e,f);return e},mutate:function(g,d){var e=h(g,d);f.before(g,e);var p=a.children(g);c.append(e,p);b.remove(g);return e}}});m("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(d,e,f){return function(c,b){var a=function(a){try{return g(a)}catch(b){return e.none()}},
g=function(a){return c(a)?e.from(a.dom().nodeValue):e.none()},h=d.detect().browser,k=h.isIE()&&10===h.version.major?a:g;return{get:function(a){if(!c(a))throw new f("Can only get "+b+" value of a "+b+" node");return k(a).getOr("")},getOption:k,set:function(a,g){if(!c(a))throw new f("Can only set raw "+b+" value of a "+b+" node");a.dom().nodeValue=g}}}});m("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(d,e){var f=e(d.isText,"text");return{get:function(c){return f.get(c)},
getOption:function(c){return f.getOption(c)},set:function(c,b){f.set(c,b)}}});m("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(d,e,f,c){var b=function(a){return"img"===e.name(a)?1:f.getOption(a).fold(function(){return c.children(a).length},function(a){return a.length})},a=function(a){return f.getOption(a).filter(function(a){return 0!==a.trim().length||-1<a.indexOf("\u00a0")}).isSome()},
g=["img","br"];return{getEnd:b,isEnd:function(a,c){return b(a)===c},isStart:function(a,b){return 0===b},isCursorPosition:function(b){return a(b)||d.contains(g,e.name(b))}}});m("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(d,e,f,c){var b=function(a,b){var c=function(a){a=f.children(a);for(var e=a.length-1;0<=e;e--){var n=a[e];if(b(n))return d.some(n);n=
c(n);if(n.isSome())return n}return d.none()};return c(a)};return{first:function(a){return e.descendant(a,c.isCursorPosition)},last:function(a){return b(a,c.isCursorPosition)}}});m("ephox.snooker.api.TableFill","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Traverse ephox.sugar.api.selection.CursorPosition".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p){var q=function(){var b=a.fromTag("td");c.append(b,a.fromTag("br"));return b},r=function(a,c,g){var d=b.copy(a,c);e.each(g,function(a,b){null===a?h.remove(d,b):h.set(d,b,a)});return d},t=function(a){return a},s=function(b){return function(){return a.fromTag("tr",b.dom())}},u=function(a,g,e){return p.first(a).map(function(h){var k=e.join(",");h=l.ancestors(h,k,function(b){return f.eq(b,a)});return d.foldr(h,function(a,g){var d=b.shallow(g);c.append(a,d);return d},g)}).getOr(g)};
return{cellOperations:function(b,d,e){return{row:s(d),cell:function(d){var f=n.owner(d.element()),f=a.fromTag(g.name(d.element()),f.dom()),h=e.getOr("strong em b i span font h1 h2 h3 h4 h5 h6 p div".split(" ")),h=0<h.length?u(d.element(),f,h):f;c.append(h,a.fromTag("br"));k.copy(d.element(),f);k.remove(f,"height");1!==d.colspan()&&k.remove(d.element(),"width");b(d.element(),f);return f},replace:r,gap:q}},paste:function(a){return{row:s(a),cell:q,replace:t,gap:q}}}});m("ephox.sugar.api.node.Elements",
["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(d,e,f,c){return{fromHtml:function(b,a){var g=(a||c).createElement("div");g.innerHTML=b;return f.children(e.fromDom(g))},fromTags:function(b,a){return d.map(b,function(b){return e.fromTag(b,a)})},fromText:function(b,a){return d.map(b,function(b){return e.fromText(b,a)})},fromDom:function(b){return d.map(b,e.fromDom)}}});m("ephox.boss.common.TagBoundaries",[],function(){return"body p div article aside figcaption figure footer header nav section ol ul li table thead tbody tfoot caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" ")});
m("ephox.boss.api.DomUniverse","ephox.boss.common.TagBoundaries ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.properties.Attr ephox.sugar.api.dom.Compare ephox.sugar.api.properties.Css ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFilter ephox.sugar.api.search.PredicateFind ephox.sugar.api.dom.Remove ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.node.Text ephox.sugar.api.search.Traverse".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r,t,s,u){return function(){return{up:f.constant({selector:t.ancestor,closest:t.closest,predicate:p.ancestor,all:u.parents}),down:f.constant({selector:r.descendants,predicate:n.descendants}),styles:f.constant({get:a.get,getRaw:a.getRaw,set:a.set,remove:a.remove}),attrs:f.constant({get:c.get,set:c.set,remove:c.remove,copyTo:function(a,b){var g=c.clone(a);c.setAll(b,g)}}),insert:f.constant({before:h.before,after:h.after,afterAll:k.after,append:h.append,appendAll:k.append,
prepend:h.prepend,wrap:h.wrap}),remove:f.constant({unwrap:q.unwrap,remove:q.remove}),create:f.constant({nu:g.fromTag,clone:function(a){return g.fromDom(a.dom().cloneNode(!1))},text:g.fromText}),query:f.constant({comparePosition:function(a,b){return a.dom().compareDocumentPosition(b.dom())},prevSibling:u.prevSibling,nextSibling:u.nextSibling}),property:f.constant({children:u.children,name:l.name,parent:u.parent,isText:l.isText,isComment:l.isComment,isElement:l.isElement,getText:s.get,setText:s.set,
isBoundary:function(a){return l.isElement(a)?"body"===l.name(a)?!0:e.contains(d,l.name(a)):!1},isEmptyTag:function(a){return l.isElement(a)?e.contains(["br","img","hr","input"],l.name(a)):!1}}),eq:b.eq,is:b.is}}});m("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(d,e,f,c){var b=c.immutable("left","right"),a=function(a,b,c){var f=a.property().children(b);return d.findIndex(f,e.curry(a.eq,c)).map(function(a){return{before:e.constant(f.slice(0,
a)),after:e.constant(f.slice(a+1))}})};return{breakToLeft:function(c,d,e){return a(c,d,e).map(function(a){var f=c.create().clone(d);c.insert().appendAll(f,a.before().concat([e]));c.insert().appendAll(d,a.after());c.insert().before(d,f);return b(f,d)})},breakToRight:function(c,d,e){return a(c,d,e).map(function(a){var e=c.create().clone(d);c.insert().appendAll(e,a.after());c.insert().after(d,e);return b(d,e)})},breakPath:function(a,b,d,e){var n=c.immutable("first","second","splits"),p=function(b,c,
h){var s=n(b,f.none(),h);return d(b)?n(b,c,h):a.property().parent(b).bind(function(c){return e(a,c,b).map(function(a){var b=[{first:a.left,second:a.right}],g=d(c)?c:a.left();return p(g,f.some(a.right()),h.concat(b))}).getOr(s)})};return p(b,f.none(),[])}}});m("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(d,e,f){var c=function(a,c,e,f){e=c(a,e);return d.foldr(f,function(d,e){var f=c(a,e);return b(a,d,f)},e)},b=function(a,b,c){return b.bind(function(b){return c.filter(e.curry(a.eq,
b))})};return{oneAll:function(a,b,d){if(0<d.length){var e=d[0];d=d.slice(1);a=c(a,b,e,d)}else a=f.none();return a}}});m("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(d,e,f,c){var b=function(a,b,k,l){var n=a.property().children(b);if(a.eq(b,k[0]))return f.some([k[0]]);if(a.eq(b,l[0]))return f.some([l[0]]);var p=function(c){c=d.reverse(c);var f=d.findIndex(c,e.curry(a.eq,b)).getOr(-1);return d.findIndex(n,e.curry(a.eq,
f<c.length-1?c[f+1]:c[f]))};k=p(k);var q=p(l);return k.bind(function(a){return q.map(function(b){var d=c.min(a,b);b=c.max(a,b);return n.slice(d,b+1)})})},a=function(a,b,c,f){var n=void 0!==f?f:e.constant(!1);b=[b].concat(a.up().all(b));c=[c].concat(a.up().all(c));f=function(a){return d.findIndex(a,n).fold(function(){return a},function(b){return a.slice(0,b+1)})};b=f(b);var p=f(c);c=d.find(b,function(b){return d.exists(p,e.curry(a.eq,b))});return{firstpath:e.constant(b),secondpath:e.constant(p),shared:e.constant(c)}};
return{subset:function(c,d,e){var f=a(c,d,e);return f.shared().bind(function(a){return b(c,a,f.firstpath(),f.secondpath())})},ancestors:a}});m("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(d,e,f){return{sharedOne:function(c,b,a){return e.oneAll(c,b,a)},subset:function(c,b,a){return f.subset(c,b,a)},ancestors:function(c,b,a,d){return f.ancestors(c,b,a,d)},breakToLeft:function(c,b,a){return d.breakToLeft(c,b,a)},breakToRight:function(c,
b,a){return d.breakToRight(c,b,a)},breakPath:function(c,b,a,g){return d.breakPath(c,b,a,g)}}});m("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(d,e){var f=d();return{sharedOne:function(c,b){return e.sharedOne(f,function(a,b){return c(b)},b)},subset:function(c,b){return e.subset(f,c,b)},ancestors:function(c,b,a){return e.ancestors(f,c,b,a)},breakToLeft:function(c,b){return e.breakToLeft(f,c,b)},breakToRight:function(c,b){return e.breakToRight(f,
c,b)},breakPath:function(c,b,a){return e.breakPath(f,c,b,function(b,c,d){return a(c,d)})}}});m("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(d,e,f){var c=function(b,a){return a.column()>=b.startCol()&&a.column()+a.colspan()-1<=b.finishCol()&&a.row()>=b.startRow()&&a.row()+a.rowspan()-1<=b.finishRow()};return{inSelection:function(b,a){var c=a.column(),d=a.column()+a.colspan()-1,e=a.row(),f=a.row()+a.rowspan()-1;
return c<=b.finishCol()&&d>=b.startCol()&&e<=b.finishRow()&&f>=b.startRow()},isWithin:c,isRectangular:function(b,a){for(var g=!0,h=d.curry(c,a),k=a.startRow();k<=a.finishRow();k++)for(var l=a.startCol();l<=a.finishCol();l++)g=g&&f.getAt(b,k,l).exists(h);return g?e.some(a):e.none()}}});m("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(d,e,f,c,b){var a=function(a,
f,k){f=e.findItem(a,f,c.eq);var l=e.findItem(a,k,c.eq);return f.bind(function(a){return l.map(function(c){return d.bounds(b.min(a.row(),c.row()),b.min(a.column(),c.column()),b.max(a.row()+a.rowspan()-1,c.row()+c.rowspan()-1),b.max(a.column()+a.colspan()-1,c.column()+c.colspan()-1))})})};return{getAnyBox:a,getBox:function(b,c,d){return a(b,c,d).bind(function(a){return f.isRectangular(b,a)})}}});m("ephox.snooker.selection.CellFinder","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.snooker.model.Warehouse ephox.snooker.selection.CellBounds ephox.snooker.selection.CellGroup ephox.sugar.api.dom.Compare".split(" "),
function(d,e,f,c,b,a){return{moveBy:function(b,c,d,e){return f.findItem(b,c,a.eq).bind(function(a){var c=0<d?a.row()+a.rowspan()-1:a.row();a=0<e?a.column()+a.colspan()-1:a.column();return f.getAt(b,c+d,a+e).map(function(a){return a.element()})})},intercepts:function(a,h,k){return b.getAnyBox(a,h,k).map(function(b){b=f.filterItems(a,e.curry(c.inSelection,b));return d.map(b,function(a){return a.element()})})},parentCell:function(b,c){return f.findItem(b,c,function(b,c){return a.contains(c,b)}).bind(function(a){return a.element()})}}});
m("ephox.snooker.api.TablePositions","ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.Warehouse ephox.snooker.selection.CellFinder ephox.snooker.selection.CellGroup ephox.sugar.api.dom.Compare".split(" "),function(d,e,f,c,b,a){var g=function(a){a=e.fromTable(a);return f.generate(a)};return{moveBy:function(a,b,e){return d.table(a).bind(function(d){d=g(d);return c.moveBy(d,a,b,e)})},intercepts:function(a,b,d){a=g(a);return c.intercepts(a,b,d)},nestedIntercepts:function(b,
d,e,f,p){var q=g(b);d=a.eq(b,e)?d:c.parentCell(q,d);b=a.eq(b,p)?f:c.parentCell(q,f);return c.intercepts(q,d,b)},getBox:function(a,c,d){a=g(a);return b.getBox(a,c,d)}}});m("ephox.darwin.selection.CellSelection","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.robin.api.dom.DomParent ephox.snooker.api.TablePositions ephox.sugar.api.dom.Compare ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Selectors".split(" "),function(d,
e,f,c,b,a,g,h,k){var l=function(a,b){return h.ancestor(a,"table")},n=function(d,e,g){return a.eq(d,e)?f.some([d]):l(d,g).bind(function(f){return l(e,g).bind(function(l){return a.eq(f,l)?b.intercepts(f,d,e):a.contains(f,l)?b.nestedIntercepts(f,d,f,e,l):a.contains(l,f)?b.nestedIntercepts(l,d,f,e,l):c.ancestors(d,e).shared().bind(function(a){return h.closest(a,"table",g).bind(function(a){return b.nestedIntercepts(a,d,f,e,l)})})})})},p=function(a,b){return d.find(a,function(a){return k.is(a,b)})},q=function(a,
b){return h.ancestor(a,"table").bind(function(c){return h.descendant(c,b).bind(function(b){return n(b,a).map(function(c){return{boxes:e.constant(c),start:e.constant(b),finish:e.constant(a)}})})})};return{identify:n,retrieve:function(a,b){var c=g.descendants(a,b);return 0<c.length?f.some(c):f.none()},shiftSelection:function(a,c,d,e,g){return p(a,g).bind(function(a){return b.moveBy(a,c,d).bind(function(a){return q(a,e)})})},getEdges:function(a,b,d){return h.descendant(a,b).bind(function(b){return h.descendant(a,
d).bind(function(a){return c.sharedOne(l,[b,a]).map(function(c){return{first:e.constant(b),last:e.constant(a),table:e.constant(c)}})})})}}});m("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(d,e,f,c,b){return{retrieve:function(a,b){return d.retrieve(a,b)},retrieveBox:function(a,g,h){return d.getEdges(a,g,h).bind(function(d){var g=function(b){return c.eq(a,
b)},h=b.ancestor(d.first(),"thead,tfoot,tbody,table",g),p=b.ancestor(d.last(),"thead,tfoot,tbody,table",g);return h.bind(function(a){return p.bind(function(b){return c.eq(a,b)?f.getBox(d.table(),d.first(),d.last()):e.none()})})})}}});m("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(d){return{selected:d.constant("data-mce-selected"),selectedSelector:d.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:d.constant("[data-mce-selected]"),firstSelected:d.constant("data-mce-first-selected"),
firstSelectedSelector:d.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:d.constant("data-mce-last-selected"),lastSelectedSelector:d.constant("td[data-mce-last-selected],th[data-mce-last-selected]")}});m("ephox.katamari.api.Adt","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Type global!Array global!Error global!console".split(" "),function(d,e,f,c,b,a){return{generate:function(g){if(!f.isArray(g))throw new b("cases must be an array");if(0===g.length)throw new b("there must be at least one case");
var h=[],k={};d.each(g,function(l,n){var p=e.keys(l);if(1!==p.length)throw new b("one and only one name per case");var q=p[0],r=l[q];if(void 0!==k[q])throw new b("duplicate key detected:"+q);if("cata"===q)throw new b("cannot have a case named cata (sorry)");if(!f.isArray(r))throw new b("case arguments must be an array");h.push(q);k[q]=function(){var f=arguments.length;if(f!==r.length)throw new b("Wrong number of arguments to case "+q+". Expected "+r.length+" ("+r+"), got "+f);for(var l=new c(f),f=
0;f<l.length;f++)l[f]=arguments[f];return{fold:function(){if(arguments.length!==g.length)throw new b("Wrong number of arguments to fold. Expected "+g.length+", got "+arguments.length);return arguments[n].apply(null,l)},match:function(a){var c=e.keys(a);if(h.length!==c.length)throw new b("Wrong number of arguments to match. Expected: "+h.join(",")+"\nActual: "+c.join(","));if(!d.forall(h,function(a){return d.contains(c,a)}))throw new b("Not all branches were specified when using match. Specified: "+
c.join(", ")+"\nRequired: "+h.join(", "));return a[q].apply(null,l)},log:function(b){a.log(b,{constructors:h,constructor:q,params:l})}}}});return k}}});m("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(d){d=d.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(d,f,c,b){return d.fold(f,c,b)},none:d.none,multiple:d.multiple,single:d.single}});m("tinymce.plugins.table.queries.CellOperations","ephox.darwin.api.TableSelection ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.properties.Attr tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.SelectionTypes".split(" "),
function(d,e,f,c,b,a,g){var h=function(a,b){return g.cata(b.get(),f.constant([]),f.identity,f.constant([a]))};return{mergable:function(b,e){return g.cata(e.get(),c.none,function(e,g){return 0===e.length?c.none():d.retrieveBox(b,a.firstSelectedSelector(),a.lastSelectedSelector()).bind(function(a){return 1<e.length?c.some({bounds:f.constant(a),cells:f.constant(e)}):c.none()})},c.none)},unmergable:function(a,d){var g=function(a){return b.has(a,"rowspan")&&1<parseInt(b.get(a,"rowspan"),10)||b.has(a,"colspan")&&
1<parseInt(b.get(a,"colspan"),10)},f=h(a,d);return 0<f.length&&e.forall(f,g)?c.some(f):c.none()},selection:h}});m("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(d,e,f,c){var b=function(a){return{element:d.constant(a),mergable:e.none,unmergable:e.none,selection:d.constant([a])}};f=f.immutable("element","clipboard","generators");return{noMenu:b,forMenu:function(a,
b,e){return{element:d.constant(e),mergable:d.constant(c.mergable(b,a)),unmergable:d.constant(c.unmergable(e,a)),selection:d.constant(c.selection(e,a))}},notCell:function(a){return b(a)},paste:f,pasteRows:function(a,b,f,k,l){return{element:d.constant(f),mergable:e.none,unmergable:e.none,selection:d.constant(c.selection(f,a)),clipboard:d.constant(k),generators:d.constant(l)}}}});m("tinymce.plugins.table.actions.Clipboard","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CopySelected ephox.snooker.api.TableFill ephox.snooker.api.TableLookup ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Elements ephox.sugar.api.node.Node tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.SelectionTypes".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q){var r=function(b){return a.table(b[0]).map(g.deep).map(function(a){return[c.extract(a,p.attributeSelector())]})};return{registerEvents:function(c,g,p,m){c.on("BeforeGetContent",function(a){var b=function(b){a.preventDefault();r(b).each(function(b){a.content=d.map(b,function(a){return c.selection.serializer.serialize(a.dom(),{})}).join("")})};!0===a.selection&&q.cata(g.get(),e.noop,b,e.noop)});c.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&f.from(c.dom.getParent(c.selection.getStart(),
"th,td")).each(function(g){var f=h.fromDom(g);a.table(f).bind(function(a){var g=d.filter(k.fromHtml(e.content),function(a){return"meta"!==l.name(a)});if(1===g.length&&"table"===l.name(g[0])){e.preventDefault();var q=h.fromDom(c.getDoc()),q=b.paste(q),g=n.paste(f,g[0],q);p.pasteCells(a,g).each(function(b){c.selection.setRng(b);c.focus();m.clear(a)})}})})})}}});m("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert",
"ephox.sugar.api.dom.InsertAll"],function(d,e,f,c,b){return{render:function(a,g,h,k){var l=f.fromTag("table");e.setAll(l,{"border-collapse":"collapse",width:"100%"});d.set(l,"border","1");var n=f.fromTag("tbody");c.append(l,n);for(var p=[],q=0;q<a;q++){for(var r=f.fromTag("tr"),t=0;t<g;t++){var s=q<h||t<k?f.fromTag("th"):f.fromTag("td");t<k&&d.set(s,"scope","row");q<h&&d.set(s,"scope","col");c.append(s,f.fromTag("br"));e.set(s,"width",100/g+"%");c.append(r,s)}p.push(r)}b.append(n,p);return l}}});
m("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(d){return{render:d.render}});m("ephox.sugar.api.properties.Html","ephox.sugar.api.node.Element ephox.sugar.api.node.Elements ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(d,e,f,c,b,a){var g=function(a){return a.dom().innerHTML};return{get:g,set:function(g,k){var l=a.owner(g).dom(),n=d.fromDom(l.createDocumentFragment()),l=e.fromHtml(k,
l);c.append(n,l);b.empty(g);f.append(g,n)},getOuter:function(a){var b=d.fromTag("div");a=d.fromDom(a.dom().cloneNode(!0));f.append(b,a);return g(b)}}});m("tinymce.plugins.table.actions.InsertTable","ephox.katamari.api.Fun ephox.snooker.api.TableRender ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Html ephox.sugar.api.search.SelectorFind".split(" "),function(d,e,f,c,b,a){var g=function(a,b){a.selection.select(b.dom(),!0);a.selection.collapse(!0)},h=function(b,
c){a.descendant(c,"td,th").each(d.curry(g,b))};return{insert:function(a,d,g){d=e.render(g,d,0,0);c.set(d,"id","__mce");d=b.getOuter(d);a.insertContent(d);d=a.dom.get("__mce");a.dom.setAttrib(d,"id",null);a.$("tr",d).each(function(b,c){a.fire("newrow",{node:c});a.$("th,td",c).each(function(b,c){a.fire("newcell",{node:c})})});a.dom.setAttribs(d,a.settings.table_default_attributes||{});a.dom.setStyles(d,a.settings.table_default_styles||{});h(a,f.fromDom(d));return d}}});m("ephox.snooker.api.CellMutations",
["ephox.snooker.resize.Sizes"],function(d){return{halve:function(e,f){d.getGenericWidth(e).each(function(c){var b=c.width()/2;d.setGenericWidth(e,b,c.unit());d.setGenericWidth(f,b,c.unit())})}}});m("ephox.snooker.api.TableGridSize",["ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse"],function(d,e){return{getGridSize:function(f){f=d.fromTable(f);return e.generate(f).grid()}}});m("ephox.katamari.api.Cell",[],function(){var d=function(e){var f=e;return{get:function(){return f},set:function(c){f=
c},clone:function(){return d(f)}}};return d});m("ephox.snooker.api.Generators","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Cell ephox.katamari.api.Contracts ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css global!parseInt".split(" "),function(d,e,f,c,b,a,g,h){var k=function(b){var c=a.has(b,"colspan")?h(a.get(b,"colspan"),10):1,d=a.has(b,"rowspan")?h(a.get(b,"rowspan"),10):1;return{element:e.constant(b),colspan:e.constant(c),rowspan:e.constant(d)}},
l=b.exactly(["cell","row","replace","gap"]);return{modification:function(a,b){l(a);var d=c(f.none()),e=void 0!==b?b:k,g=function(b){var c;c=e(b);c=a.cell(c);d.get().isNone()&&d.set(f.some(c));h=f.some({item:b,replacement:c});return c},h=f.none();return{getOrInit:function(a,b){return h.fold(function(){return g(a)},function(c){return b(a,c.item)?c.replacement:g(a)})},cursor:d.get}},transform:function(a,b){return function(e){var g=c(f.none());l(e);var h=[],k=function(a,b){return d.find(h,function(c){return b(c.item,
a)})},u=function(c){var d=e.replace(c,b,{scope:a});h.push({item:c,sub:d});g.get().isNone()&&g.set(f.some(d));return d};return{replaceOrInit:function(a,b){return k(a,b).fold(function(){return u(a)},function(c){return b(a,c.item)?c.sub:u(a)})},cursor:g.get}}},merging:function(a){l(a);var b=c(f.none());return{combine:function(c){b.get().isNone()&&b.set(f.some(c));return function(){var b=a.cell({element:e.constant(c),colspan:e.constant(1),rowspan:e.constant(1)});g.remove(b,"width");g.remove(c,"width");
return b}},cursor:b.get}}}});m("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(d){var e="body p div article aside figcaption figure footer header nav section ol ul table thead tfoot tbody caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" "),f=function(b,a){var c=b.property().name(a);return d.contains(e,c)},c=function(b,a){return d.contains(["br","img","hr","input"],b.property().name(a))};return{isBlock:f,isList:function(b,a){var c=b.property().name(a);return d.contains(["ol",
"ul"],c)},isFormatting:function(b,a){var c=b.property().name(a);return d.contains("address pre p h1 h2 h3 h4 h5 h6".split(" "),c)},isHeading:function(b,a){var c=b.property().name(a);return d.contains("h1 h2 h3 h4 h5 h6".split(" "),c)},isContainer:function(b,a){return d.contains("div li td th blockquote body caption".split(" "),b.property().name(a))},isEmptyTag:c,isFrame:function(b,a){return"iframe"===b.property().name(a)},isInline:function(b,a){return!(f(b,a)||c(b,a))&&"li"!==b.property().name(a)}}});
m("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(d,e){var f=d();return{isBlock:function(c){return e.isBlock(f,c)},isList:function(c){return e.isList(f,c)},isFormatting:function(c){return e.isFormatting(f,c)},isHeading:function(c){return e.isHeading(f,c)},isContainer:function(c){return e.isContainer(f,c)},isEmptyTag:function(c){return e.isEmptyTag(f,c)},isFrame:function(c){return e.isFrame(f,c)},isInline:function(c){return e.isInline(f,
c)}}});m("ephox.snooker.api.TableContent","ephox.katamari.api.Arr ephox.robin.api.dom.DomStructure ephox.sugar.api.dom.Compare ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse ephox.sugar.api.selection.CursorPosition".split(" "),function(d,e,f,c,b,a,g,h,k,l,n){return{merge:function(p){var q=function(a){return d.forall(a,function(a){return"br"===
g.name(a)||g.isText(a)&&0===h.get(a).trim().length})},r=function(a){return l.nextSibling(a).map(function(a){if(e.isBlock(a))return!0;if(e.isEmptyTag(a))return"img"===g.name(a)?!1:!0}).getOr(!1)},t=function(b){return n.last(b).bind(function(c){var d=r(c);return l.parent(c).map(function(h){return!0===d||"li"===g.name(h)||k.ancestor(h,e.isList).isSome()||"br"===g.name(c)||e.isBlock(h)&&!f.eq(b,h)?[]:[a.fromTag("br")]})}).getOr([])},s=function(){var b=d.bind(p,function(a){var b=l.children(a);return q(b)?
[]:b.concat(t(a))});return 0===b.length?[a.fromTag("br")]:b}();b.empty(p[0]);c.append(p[0],s)}}});m("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(d,e){var f=function(b,a){return e.rowcells(a,b.section())},c=function(b,a){return b.cells()[a]};return{addCell:function(b,a,c){var d=b.cells(),e=d.slice(0,a);a=d.slice(a);c=e.concat([c]).concat(a);return f(b,c)},setCells:f,mutateCell:function(b,a,c){b.cells()[a]=c},getCell:c,getCellElement:function(b,a){return c(b,
a).element()},mapCells:function(b,a){var c=b.cells(),c=d.map(c,a);return e.rowcells(c,b.section())},cellLength:function(b){return b.cells().length}}});m("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(d,e,f){var c=function(a,b){return d.map(a,function(a){return f.getCell(a,b)})},b=function(a,b){if(0===a.length)return 0;var c=a[0];return d.findIndex(a,function(a){return!b(c.element(),a.element())}).fold(function(){return a.length},
function(a){return a})};return{subgrid:function(a,d,f,k){var l=a[d].cells().slice(f),l=b(l,k);a=c(a,f).slice(d);k=b(a,k);return{colspan:e.constant(l),rowspan:e.constant(k)}}}});m("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(d,e,f,c){return{toDetails:function(b,a){var c=d.map(b,function(a,b){return d.map(a.cells(),function(a,b){return!1})});return d.map(b,function(h,k){var l=d.bind(h.cells(),
function(d,h){if(!1===c[k][h]){for(var l=f.subgrid(b,k,h,a),r=l.rowspan(),t=l.colspan(),s=k;s<k+r;s++)for(var u=h;u<h+t;u++)c[s][u]=!0;return[e.detailnew(d.element(),l.rowspan(),l.colspan(),d.isNew())]}return[]});return e.rowdetails(l,h.section())})},toGrid:function(b,a,d){for(var f=[],k=0;k<b.grid().rows();k++){for(var l=[],n=0;n<b.grid().columns();n++){var p=c.getAt(b,k,n).map(function(a){return e.elementnew(a.element(),d)}).getOrThunk(function(){return e.elementnew(a.gap(),!0)});l.push(p)}l=e.rowcells(l,
b.all()[k].section());f.push(l)}return f}}});m("ephox.snooker.operate.Redraw","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.dom.Replication ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),function(d,e,f,c,b,a,g,h,k,l){var n=function(a,b,c,d){c===d?f.remove(a,b):f.set(a,b,c)};return{render:function(f,h){var r=
[],t=[],s=function(e,h){var q=k.child(f,h).getOrThunk(function(){var a=c.fromTag(h,l.owner(f).dom());b.append(f,a);return a});g.empty(q);var s=d.map(e,function(a){a.isNew()&&r.push(a.element());var c=a.element();g.empty(c);d.each(a.cells(),function(a){a.isNew()&&t.push(a.element());n(a.element(),"colspan",a.colspan(),1);n(a.element(),"rowspan",a.rowspan(),1);b.append(c,a.element())});return c});a.append(q,s)},u=function(a,b){0<a.length?s(a,b):k.child(f,b).bind(g.remove)},m=[],v=[],w=[];d.each(h,function(a){switch(a.section()){case "thead":m.push(a);
break;case "tbody":v.push(a);break;case "tfoot":w.push(a)}});u(m,"thead");u(v,"tbody");u(w,"tfoot");return{newRows:e.constant(r),newCells:e.constant(t)}},copy:function(a){return d.map(a,function(a){var c=h.shallow(a.element());d.each(a.cells(),function(a){var d=h.deep(a.element());n(d,"colspan",a.colspan(),1);n(d,"rowspan",a.rowspan(),1);b.append(c,d)});return c})}}});m("ephox.snooker.model.RunOperation","ephox.katamari.api.Arr ephox.katamari.api.Merger ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.snooker.api.Structs ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.Transitions ephox.snooker.model.Warehouse ephox.snooker.operate.Redraw ephox.snooker.resize.BarPositions ephox.snooker.resize.Bars ephox.sugar.api.dom.Compare ephox.sugar.api.search.Traverse".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r,t){var s=function(c,e){var g=function(c){return b.findMap(c,function(b){return t.parent(b.element()).map(function(b){var c=t.parent(b).isNone();return a.elementnew(b,c)})}).getOrThunk(function(){return a.elementnew(e.row(),!0)})};return d.map(c,function(b){var c=g(b.details());return a.rowdatanew(c.element(),b.details(),b.section(),c.isNew())})},u=function(a,b){var c=k.toDetails(a,r.eq);return s(c,b)},m=function(a,b){var c=d.flatten(d.map(a.all(),function(a){return a.cells()}));
return d.find(c,function(a){return r.eq(b,a.element())})};return{run:function(a,b,d,e,g){return function(s,t,m,z,E){var x=h.fromTable(t),I=l.generate(x);return b(I,m).map(function(b){var c=k.toGrid(I,z,!1);b=a(c,b,r.eq,g(z));c=u(b.grid(),z);return{grid:f.constant(c),cursor:b.cursor}}).fold(function(){return c.none()},function(a){var b=n.render(t,a.grid());d(t,a.grid(),E);e(t);q.refresh(s,t,p.height,E);return c.some({cursor:a.cursor,newRows:b.newRows,newCells:b.newCells})})}},toDetailList:u,onCell:function(a,
b){return g.cell(b.element()).bind(function(b){return m(a,b)})},onCells:function(a,e){var f=d.map(e.selection(),function(b){return g.cell(b).bind(function(b){return m(a,b)})}),f=b.cat(f);return 0<f.length?c.some(f):c.none()},onPaste:function(a,b){return g.cell(b.element()).bind(function(c){return m(a,c).map(function(a){return e.merge(a,{generators:b.generators,clipboard:b.clipboard})})})},onPasteRows:function(a,f){var h=d.map(f.selection(),function(b){return g.cell(b).bind(function(b){return m(a,
b)})}),h=b.cat(h);return 0<h.length?c.some(e.merge({cells:h},{generators:f.generators,clipboard:f.clipboard})):c.none()},onMergable:function(a,b){return b.mergable()},onUnmergable:function(a,b){return b.unmergable()}}});m("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(d,e){var f=function(b){return{is:function(a){return b===a},isValue:d.constant(!0),isError:d.constant(!1),getOr:d.constant(b),getOrThunk:d.constant(b),getOrDie:d.constant(b),or:function(a){return f(b)},
orThunk:function(a){return f(b)},fold:function(a,c){return c(b)},map:function(a){return f(a(b))},each:function(a){a(b)},bind:function(a){return a(b)},exists:function(a){return a(b)},forall:function(a){return a(b)},toOption:function(){return e.some(b)}}},c=function(b){return{is:d.constant(!1),isValue:d.constant(!1),isError:d.constant(!0),getOr:d.identity,getOrThunk:function(a){return a()},getOrDie:function(){return d.die(b)()},or:function(a){return a},orThunk:function(a){return a()},fold:function(a,
c){return a(b)},map:function(a){return c(b)},each:d.noop,bind:function(a){return c(b)},exists:d.constant(!1),forall:d.constant(!0),toOption:e.none}};return{value:f,error:c}});m("ephox.snooker.model.Fitment","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Result ephox.snooker.api.Structs ephox.snooker.model.GridRow ephox.snooker.util.Util global!Array global!Error global!Math".split(" "),function(d,e,f,c,b,a,g,h,k){var l=function(a,b){return d.map(a,function(){return c.elementnew(b.cell(),
!0)})},n=function(c,d,e){return c.concat(a.repeat(d,function(a){return b.setCells(c[c.length-1],l(c[c.length-1].cells(),e))}))},p=function(c,e,g){return d.map(c,function(c){return b.setCells(c,c.cells().concat(l(a.range(0,e),g)))})};return{measure:function(a,c,d){if(a.row()>=c.length||a.column()>b.cellLength(c[0]))return f.error("invalid start address out of table bounds, row: "+a.row()+", column: "+a.column());c=c.slice(a.row());a=c[0].cells().slice(a.column());var g=b.cellLength(d[0]);return f.value({rowDelta:e.constant(c.length-
d.length),colDelta:e.constant(a.length-g)})},measureWidth:function(a,c){var d=b.cellLength(a[0]),g=b.cellLength(c[0]);return{rowDelta:e.constant(0),colDelta:e.constant(d-g)}},tailor:function(a,b,c){var d=0>b.colDelta()?p:e.identity,g=0>b.rowDelta()?n:e.identity;a=d(a,k.abs(b.colDelta()),c);return g(a,k.abs(b.rowDelta()),c)}}});m("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(d,e,f,
c){var b=function(a,b){return d.foldl(a,function(a,c){return d.exists(a,function(a){return b(a.element(),c.element())})?a:a.concat([c])},[])};return{merge:function(a,b,d,e){if(0===a.length)return a;for(d=b.startRow();d<=b.finishRow();d++)for(var l=b.startCol();l<=b.finishCol();l++)c.mutateCell(a[d],l,f.elementnew(e(),!1));return a},unmerge:function(a,b,d,e){for(var l=!0,n=0;n<a.length;n++)for(var p=0;p<c.cellLength(a[0]);p++){var q=c.getCellElement(a[n],p),q=d(q,b);!0===q&&!1===l?c.mutateCell(a[n],
p,f.elementnew(e(),!0)):!0===q&&(l=!1)}return a},splitRows:function(a,g,h,k){if(0<g&&g<a.length){var l=a[g-1].cells(),l=b(l,h);d.each(l,function(b){for(var d=e.none(),l=g;l<a.length;l++)for(var r=0;r<c.cellLength(a[0]);r++){var t=a[l].cells()[r];h(t.element(),b.element())&&(d.isNone()&&(d=e.some(k())),d.each(function(b){c.mutateCell(a[l],r,f.elementnew(b,!0))}))}})}return a}}});m("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow",
"ephox.snooker.operate.MergingOperations"],function(d,e,f,c,b){return{merge:function(a,g,h,k,l){return f.measure(a,g,h).map(function(n){n=f.tailor(g,n,k);for(var p=a.row(),q=a.column(),r=h.length,t=c.cellLength(h[0]),r=p+r,t=q+t,s=p;s<r;s++)for(var u=q;u<t;u++){var m=n,v=s,w=u,B=l,A=c.getCell(m[v],w),B=d.curry(B,A.element()),A=m[v];1<m.length&&1<c.cellLength(A)&&(0<w&&B(c.getCellElement(A,w-1))||w<A.length-1&&B(c.getCellElement(A,w+1))||0<v&&B(c.getCellElement(m[v-1],w))||v<m.length-1&&B(c.getCellElement(m[v+
1],w)))&&b.unmerge(n,c.getCellElement(n[s],u),l,k.cell);m=c.getCellElement(h[s-p],u-q);m=k.replace(m);c.mutateCell(n[s],u,e.elementnew(m,!0))}return n})},insert:function(a,c,d,e,l){b.splitRows(c,a,l,e.cell);l=f.measureWidth(d,c);d=f.tailor(d,l,e);l=f.measureWidth(c,d);c=f.tailor(c,l,e);return c.slice(0,a).concat(d).concat(c.slice(a,c.length))}}});m("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(d,e,f){return{insertRowAt:function(c,
b,a,d,h){var k=c.slice(0,b),l=c.slice(b);a=f.mapCells(c[a],function(a,l){return 0<b&&b<c.length&&d(f.getCellElement(c[b-1],l),f.getCellElement(c[b],l))?f.getCell(c[b],l):e.elementnew(h(a.element(),d),!0)});return k.concat([a]).concat(l)},insertColumnAt:function(c,b,a,g,h){return d.map(c,function(c){var d=0<b&&b<f.cellLength(c)&&g(f.getCellElement(c,b-1),f.getCellElement(c,b))?f.getCell(c,b):e.elementnew(h(f.getCellElement(c,a),g),!0);return f.addCell(c,b,d)})},splitCellIntoColumns:function(c,b,a,
g,h){var k=a+1;return d.map(c,function(c,d){var p=d===b?e.elementnew(h(f.getCellElement(c,a),g),!0):f.getCell(c,a);return f.addCell(c,k,p)})},splitCellIntoRows:function(c,b,a,d,h){var k=b+1,l=c.slice(0,k),k=c.slice(k);c=f.mapCells(c[b],function(b,c){return c===a?e.elementnew(h(b.element(),d),!0):b});return l.concat([c]).concat(k)},deleteRowsAt:function(c,b,a){return c.slice(0,b).concat(c.slice(a+1))},deleteColumnsAt:function(c,b,a){c=d.map(c,function(c){var d=c.cells().slice(0,b).concat(c.cells().slice(a+
1));return e.rowcells(d,c.section())});return d.filter(c,function(a){return 0<a.cells().length})}}});m("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(d,e,f){var c=function(a,b,c,k){var l=function(a){return d.exists(b,function(b){return c(a.element(),b.element())})};return d.map(a,function(a){return f.mapCells(a,function(a){return l(a)?e.elementnew(k(a.element(),c),!0):a})})},b=function(a,b,c,d){return void 0!==
f.getCellElement(a[b],c)&&0<b&&d(f.getCellElement(a[b-1],c),f.getCellElement(a[b],c))};return{replaceColumn:function(a,e,h,k){var l=d.bind(a,function(c,d){return b(a,d,e,h)||0<e&&h(f.getCellElement(c,e-1),f.getCellElement(c,e))?[]:[f.getCell(c,e)]});return c(a,l,h,k)},replaceRow:function(a,e,h,k){var l=a[e],n=d.bind(l.cells(),function(c,d){return b(a,e,d,h)||0<d&&h(f.getCellElement(l,d-1),f.getCellElement(l,d))?[]:[c]});return c(a,n,h,k)}}});m("ephox.snooker.api.TableOperations","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.snooker.api.Generators ephox.snooker.api.Structs ephox.snooker.api.TableContent ephox.snooker.api.TableLookup ephox.snooker.model.DetailsList ephox.snooker.model.GridRow ephox.snooker.model.RunOperation ephox.snooker.model.TableMerge ephox.snooker.model.Transitions ephox.snooker.model.Warehouse ephox.snooker.operate.MergingOperations ephox.snooker.operate.ModificationOperations ephox.snooker.operate.TransformOperations ephox.snooker.resize.Adjustments ephox.sugar.api.dom.Remove".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r,t,s,u,m,v){l=function(a){0===h.cells(a).length&&v.remove(a)};var w=c.immutable("grid","cursor"),B=function(a,b,c){return A(a,b,c).orThunk(function(){return A(a,0,0)})},A=function(a,b,c){return f.from(a[b]).bind(function(a){return f.from(a.cells()[c]).bind(function(a){return f.from(a.element())})})},y=function(a,b,c){return w(a,A(a,b,c))},D=function(a){return d.foldl(a,function(a,b){return d.exists(a,function(a){return a.row()===b.row()})?a:a.concat([b])},[]).sort(function(a,
b){return a.row()-b.row()})},C=function(a){return d.foldl(a,function(a,b){return d.exists(a,function(a){return a.column()===b.column()})?a:a.concat([b])},[]).sort(function(a,b){return a.column()-b.column()})},F=function(a,b,c){a=k.fromPastedRows(a,c);a=r.generate(a);return q.toGrid(a,b,!0)};c=m.adjustWidthTo;return{insertRowBefore:n.run(function(a,b,c,d){var e=b.row(),f=b.row();a=s.insertRowAt(a,f,e,c,d.getOrInit);return y(a,f,b.column())},n.onCell,e.noop,e.noop,b.modification),insertRowsBefore:n.run(function(a,
b,c,e){var f=b[0].row(),g=b[0].row(),h=D(b);a=d.foldl(h,function(a,b){return s.insertRowAt(a,g,f,c,e.getOrInit)},a);return y(a,g,b[0].column())},n.onCells,e.noop,e.noop,b.modification),insertRowAfter:n.run(function(a,b,c,d){var e=b.row(),f=b.row()+b.rowspan();a=s.insertRowAt(a,f,e,c,d.getOrInit);return y(a,f,b.column())},n.onCell,e.noop,e.noop,b.modification),insertRowsAfter:n.run(function(a,b,c,e){var f=D(b),g=f[f.length-1].row(),h=f[f.length-1].row()+f[f.length-1].rowspan();a=d.foldl(f,function(a,
b){return s.insertRowAt(a,h,g,c,e.getOrInit)},a);return y(a,h,b[0].column())},n.onCells,e.noop,e.noop,b.modification),insertColumnBefore:n.run(function(a,b,c,d){var e=b.column(),f=b.column();a=s.insertColumnAt(a,f,e,c,d.getOrInit);return y(a,b.row(),f)},n.onCell,c,e.noop,b.modification),insertColumnsBefore:n.run(function(a,b,c,e){var f=C(b),g=f[0].column(),h=f[0].column();a=d.foldl(f,function(a,b){return s.insertColumnAt(a,h,g,c,e.getOrInit)},a);return y(a,b[0].row(),h)},n.onCells,c,e.noop,b.modification),
insertColumnAfter:n.run(function(a,b,c,d){var e=b.column(),f=b.column()+b.colspan();a=s.insertColumnAt(a,f,e,c,d.getOrInit);return y(a,b.row(),f)},n.onCell,c,e.noop,b.modification),insertColumnsAfter:n.run(function(a,b,c,e){var f=b[b.length-1].column(),g=b[b.length-1].column()+b[b.length-1].colspan(),h=C(b);a=d.foldl(h,function(a,b){return s.insertColumnAt(a,g,f,c,e.getOrInit)},a);return y(a,b[0].row(),g)},n.onCells,c,e.noop,b.modification),splitCellIntoColumns:n.run(function(a,b,c,d){a=s.splitCellIntoColumns(a,
b.row(),b.column(),c,d.getOrInit);return y(a,b.row(),b.column())},n.onCell,c,e.noop,b.modification),splitCellIntoRows:n.run(function(a,b,c,d){a=s.splitCellIntoRows(a,b.row(),b.column(),c,d.getOrInit);return y(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.modification),eraseColumns:n.run(function(a,b,c,d){c=C(b);a=s.deleteColumnsAt(a,c[0].column(),c[c.length-1].column());b=B(a,b[0].row(),b[0].column());return w(a,b)},n.onCells,c,l,b.modification),eraseRows:n.run(function(a,b,c,d){c=D(b);a=s.deleteRowsAt(a,
c[0].row(),c[c.length-1].row());b=B(a,b[0].row(),b[0].column());return w(a,b)},n.onCells,e.noop,l,b.modification),makeColumnHeader:n.run(function(a,b,c,d){a=u.replaceColumn(a,b.column(),c,d.replaceOrInit);return y(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform("row","th")),unmakeColumnHeader:n.run(function(a,b,c,d){a=u.replaceColumn(a,b.column(),c,d.replaceOrInit);return y(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform(null,"td")),makeRowHeader:n.run(function(a,b,c,d){a=u.replaceRow(a,
b.row(),c,d.replaceOrInit);return y(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform("col","th")),unmakeRowHeader:n.run(function(a,b,c,d){a=u.replaceRow(a,b.row(),c,d.replaceOrInit);return y(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform(null,"td")),mergeCells:n.run(function(a,b,c,d){d=b.cells();g.merge(d);a=t.merge(a,b.bounds(),c,e.constant(d[0]));return w(a,f.from(d[0]))},n.onMergable,e.noop,e.noop,b.merging),unmergeCells:n.run(function(a,b,c,e){a=d.foldr(b,function(a,b){return t.unmerge(a,
b,c,e.combine(b))},a);return w(a,f.from(b[0]))},n.onUnmergable,c,e.noop,b.merging),pasteCells:n.run(function(b,c,d,e){e=function(a,b){var c=k.fromTable(a),c=r.generate(c);return q.toGrid(c,b,!0)}(c.clipboard(),c.generators());var g=a.address(c.row(),c.column());return p.merge(g,b,e,c.generators(),d).fold(function(){return w(b,f.some(c.element()))},function(a){var b=B(a,c.row(),c.column());return w(a,b)})},n.onPaste,c,e.noop,b.modification),pasteRowsBefore:n.run(function(a,b,c,d){var e=a[b.cells[0].row()];
d=b.cells[0].row();e=F(b.clipboard(),b.generators(),e);a=p.insert(d,a,e,b.generators(),c);b=B(a,b.cells[0].row(),b.cells[0].column());return w(a,b)},n.onPasteRows,e.noop,e.noop,b.modification),pasteRowsAfter:n.run(function(a,b,c,d){var e=a[b.cells[0].row()];d=b.cells[b.cells.length-1].row()+b.cells[b.cells.length-1].rowspan();e=F(b.clipboard(),b.generators(),e);a=p.insert(d,a,e,b.generators(),c);b=B(a,b.cells[0].row(),b.cells[0].column());return w(a,b)},n.onPasteRows,e.noop,e.noop,b.modification)}});
m("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(d,e){var f=function(c){return e.fromDom(c.getBody())};return{getBody:f,getIsRoot:function(c){return function(b){return d.eq(b,f(c))}},addSizeSuffix:function(c){/^[0-9]+$/.test(c)&&(c+="px");return c},removePxSuffix:function(c){return c?c.replace(/px$/,""):""}}});m("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(d){var e=function(e){return"rtl"===d.get(e,"direction")?
"rtl":"ltr"};return{onDirection:function(d,c){return function(b){return"rtl"===e(b)?c:d}},getDirection:e}});m("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(d,e){var f={isRtl:d.constant(!1)},c={isRtl:d.constant(!0)};return{directionAt:function(b){return"rtl"===e.getDirection(b)?c:f}}});m("tinymce.plugins.table.actions.TableActions","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CellMutations ephox.snooker.api.TableDirection ephox.snooker.api.TableFill ephox.snooker.api.TableGridSize ephox.snooker.api.TableOperations ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.Direction".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,q,r){return function(t,s){var u;!1!==t.settings.table_clone_elements&&("string"==typeof t.settings.table_clone_elements?u=t.settings.table_clone_elements.split(/[ ,]/):Array.isArray(t.settings.table_clone_elements)&&(u=t.settings.table_clone_elements));var m=f.from(u),v=function(c,e,g,h){return function(l,s){var q=p.descendants(l,"td[data-mce-style],th[data-mce-style]");d.each(q,function(a){n.remove(a,"data-mce-style")});var q=h(),u=k.fromDom(t.getDoc()),v=b(r.directionAt),
u=a.cellOperations(g,u,m);return e(l)?c(q,l,s,u,v).bind(function(a){d.each(a.newRows(),function(a){t.fire("newrow",{node:a.dom()});a.dom()});d.each(a.newCells(),function(a){t.fire("newcell",{node:a.dom()});a.dom()});return a.cursor().map(function(a){var b=t.dom.createRng();b.setStart(a.dom(),0);b.setEnd(a.dom(),0);return b})}):f.none()}};u=v(h.eraseRows,function(a){a=g.getGridSize(a);return!1===("table"===l.name(q.getBody(t)))||1<a.rows()},e.noop,s);var w=v(h.eraseColumns,function(a){a=g.getGridSize(a);
return!1===("table"===l.name(q.getBody(t)))||1<a.columns()},e.noop,s),B=v(h.insertRowsBefore,e.always,e.noop,s),A=v(h.insertRowsAfter,e.always,e.noop,s),y=v(h.insertColumnsBefore,e.always,c.halve,s),D=v(h.insertColumnsAfter,e.always,c.halve,s),C=v(h.mergeCells,e.always,e.noop,s),F=v(h.unmergeCells,e.always,e.noop,s),z=v(h.pasteRowsBefore,e.always,e.noop,s),E=v(h.pasteRowsAfter,e.always,e.noop,s),v=v(h.pasteCells,e.always,e.noop,s);return{deleteRow:u,deleteColumn:w,insertRowsBefore:B,insertRowsAfter:A,
insertColumnsBefore:y,insertColumnsAfter:D,mergeCells:C,unmergeCells:F,pasteRowsBefore:z,pasteRowsAfter:E,pasteCells:v}}});m("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(d,e,f,c,b){return{copyRows:function(a,g,h){a=d.fromTable(a);var k=c.generate(a);return e.onCells(k,g).map(function(a){a=f.toGrid(k,h,!1).slice(a[0].row(),a[a.length-1].row()+
a[a.length-1].rowspan());a=e.toDetailList(a,h);return b.copy(a)})}}});m("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.Env")});m("tinymce.plugins.table.actions.Styles",["tinymce.core.util.Tools"],function(d){return{applyAlign:function(d,f,c){c&&d.formatter.apply("align"+c,{},f)},applyVAlign:function(d,f,c){c&&d.formatter.apply("valign"+c,{},f)},unApplyAlign:function(e,f){d.each(["left","center","right"],function(c){e.formatter.remove("align"+c,{},f)})},unApplyVAlign:function(e,
f){d.each(["top","middle","bottom"],function(c){e.formatter.remove("valign"+c,{},f)})},getTDTHOverallStyle:function(d,f,c){f=d.select("td,th",f);var b;a:for(var a=0;a<f.length;a++){var g=d.getStyle(f[a],c);"undefined"===typeof b&&(b=g);if(b!=g){b="";break a}}return b}}});m("tinymce.plugins.table.ui.Helpers",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util"],function(d,e,f){var c=function(b,a){var c=b.dom,d=a.control.rootControl,e=d.toJSON(),l=c.parseStyle(e.style);
"style"===a.control.name()?(d.find("#borderStyle").value(l["border-style"]||"")[0].fire("select"),d.find("#borderColor").value(l["border-color"]||"")[0].fire("change"),d.find("#backgroundColor").value(l["background-color"]||"")[0].fire("change"),d.find("#width").value(l.width||"").fire("change"),d.find("#height").value(l.height||"").fire("change")):(l["border-style"]=e.borderStyle,l["border-color"]=e.borderColor,l["background-color"]=e.backgroundColor,l.width=e.width?f.addSizeSuffix(e.width):"",l.height=
e.height?f.addSizeSuffix(e.height):"");d.find("#style").value(c.serializeStyle(c.parseStyle(c.serializeStyle(l))))};return{createStyleForm:function(b){var a=function(a){var c=b.settings.color_picker_callback;if(c)return c.call(b,function(b){a.control.value(b).fire("change")},a.control.value())};return{title:"Advanced",type:"form",defaults:{onchange:d.curry(c,b)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},
items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:d.curry(c,b),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:a},
{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:a}]}]}},buildListItems:function(b,a,c){var d=function(b,c){c=c||[];e.each(b,function(b){var e={text:b.text||b.title};b.menu?e.menu=d(b.menu):(e.value=b.value,a&&a(e));c.push(e)});return c};return d(b,c||[])},updateStyleField:c,extractAdvancedStyles:function(b,a){var c=b.parseStyle(b.getAttrib(a,"style")),d={};c["border-style"]&&(d.borderStyle=c["border-style"]);c["border-color"]&&(d.borderColor=c["border-color"]);c["background-color"]&&
(d.backgroundColor=c["background-color"]);d.style=b.serializeStyle(c);return d}}});m("tinymce.plugins.table.ui.TableDialog","ephox.katamari.api.Fun tinymce.core.Env tinymce.core.util.Tools tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.actions.Styles tinymce.plugins.table.alien.Util tinymce.plugins.table.ui.Helpers".split(" "),function(d,e,f,c,b,a,g){function h(a,b,c,d){if("TD"===b.tagName||"TH"===b.tagName)a.setStyle(b,c,d);else if(b.children)for(var e=0;e<b.children.length;e++)h(a,
b.children[e],c,d)}var k=function(a,c){var d=a.dom,e={width:d.getStyle(c,"width")||d.getAttrib(c,"width"),height:d.getStyle(c,"height")||d.getAttrib(c,"height"),cellspacing:d.getStyle(c,"border-spacing")||d.getAttrib(c,"cellspacing"),cellpadding:d.getAttrib(c,"data-mce-cell-padding")||d.getAttrib(c,"cellpadding")||b.getTDTHOverallStyle(a.dom,c,"padding"),border:d.getAttrib(c,"data-mce-border")||d.getAttrib(c,"border")||b.getTDTHOverallStyle(a.dom,c,"border"),borderColor:d.getAttrib(c,"data-mce-border-color"),
caption:!!d.select("caption",c)[0],"class":d.getAttrib(c,"class")};f.each(["left","center","right"],function(b){a.formatter.matchNode(c,"align"+b)&&(e.align=b)});!1!==a.settings.table_advtab&&f.extend(e,g.extractAdvancedStyles(d,c));return e},l=function(d,l,k){var r=d.dom,t,s;g.updateStyleField(d,k);s=k.control.rootControl.toJSON();!1===s["class"]&&delete s["class"];d.undoManager.transact(function(){l||(l=c.insert(d,s.cols||1,s.rows||1));var g=l,k=d.dom,q={},m={};q["class"]=s["class"];m.height=a.addSizeSuffix(s.height);
k.getAttrib(g,"width")&&!d.settings.table_style_by_css?q.width=a.removePxSuffix(s.width):m.width=a.addSizeSuffix(s.width);d.settings.table_style_by_css?(m["border-width"]=a.addSizeSuffix(s.border),m["border-spacing"]=a.addSizeSuffix(s.cellspacing),f.extend(q,{"data-mce-border-color":s.borderColor,"data-mce-cell-padding":s.cellpadding,"data-mce-border":s.border})):f.extend(q,{border:s.border,cellpadding:s.cellpadding,cellspacing:s.cellspacing});if(d.settings.table_style_by_css&&g.children)for(var B=
0;B<g.children.length;B++)h(k,g.children[B],{"border-width":a.addSizeSuffix(s.border),"border-color":s.borderColor,padding:a.addSizeSuffix(s.cellpadding)});s.style?f.extend(m,k.parseStyle(s.style)):m=f.extend({},k.parseStyle(k.getAttrib(g,"style")),m);q.style=k.serializeStyle(m);k.setAttribs(g,q);(t=r.select("caption",l)[0])&&!s.caption&&r.remove(t);!t&&s.caption&&(t=r.create("caption"),t.innerHTML=e.ie?"\u00a0":'<br data-mce-bogus="1"/>',l.insertBefore(t,l.firstChild));b.unApplyAlign(d,l);s.align&&
b.applyAlign(d,l,s.align);d.focus();d.addVisual()})};return{open:function(a,b){var c=a.dom,e,f,h,u={};!0===b?(e=c.getParent(a.selection.getStart(),"table"))&&(u=k(a,e)):(f={label:"Cols",name:"cols"},h={label:"Rows",name:"rows"});a.settings.table_class_list?(u["class"]&&(u["class"]=u["class"].replace(/\s*mce\-item\-table\s*/g,"")),c={name:"class",type:"listbox",label:"Class",values:g.buildListItems(a.settings.table_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",
classes:[b.value]})})})}):c={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};f={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==a.settings.table_appearance_options?[f,h,{label:"Width",name:"width",onchange:d.curry(g.updateStyleField,a)},{label:"Height",name:"height",onchange:d.curry(g.updateStyleField,a)},{label:"Cell spacing",name:"cellspacing"},
{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[f,h,{label:"Width",name:"width",onchange:d.curry(g.updateStyleField,a)},{label:"Height",name:"height",onchange:d.curry(g.updateStyleField,a)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},c]};!1!==a.settings.table_advtab?a.windowManager.open({title:"Table properties",
data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:f},g.createStyleForm(a)],onsubmit:d.curry(l,a,e)}):a.windowManager.open({title:"Table properties",data:u,body:f,onsubmit:d.curry(l,a,e)})}}});m("tinymce.plugins.table.ui.RowDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(d,e,f,c,b){function a(a,d,g){var n=a.dom,p;b.updateStyleField(a,g);p=g.control.rootControl.toJSON();
a.undoManager.transact(function(){e.each(d,function(b){var e=p.scope;e&&n.setAttrib(b,"scope",e);(e=p.style)&&n.setAttrib(b,"style",e);(e=p["class"])&&n.setAttrib(b,"class",e);(e=c.addSizeSuffix(p.height))&&n.setStyle(b,"height",e);if(p.type!==b.parentNode.nodeName.toLowerCase()){var e=a.dom,g=p.type,l=e.getParent(b,"table"),u=b.parentNode,m=e.select(g,l)[0];m||(m=e.create(g),l.firstChild?"CAPTION"===l.firstChild.nodeName?e.insertAfter(m,l.firstChild):l.insertBefore(m,l.firstChild):l.appendChild(m));
m.appendChild(b);u.hasChildNodes()||e.remove(u)}1===d.length&&f.unApplyAlign(a,b);p.align&&f.applyAlign(a,b,p.align)});a.focus()})}var g=function(a,c){var d=a.dom,f={height:d.getStyle(c,"height")||d.getAttrib(c,"height"),scope:d.getAttrib(c,"scope"),"class":d.getAttrib(c,"class")};f.type=c.parentNode.nodeName.toLowerCase();e.each(["left","center","right"],function(b){a.formatter.matchNode(c,"align"+b)&&(f.align=b)});!1!==a.settings.table_row_advtab&&e.extend(f,b.extractAdvancedStyles(d,c));return f};
return{open:function(c){var f=c.dom,l,n,p,q=[];l=c.dom.getParent(c.selection.getStart(),"table");n=c.dom.getParent(c.selection.getStart(),"td,th");e.each(l.rows,function(a){e.each(a.cells,function(b){if(f.getAttrib(b,"data-mce-selected")||b==n)return q.push(a),!1})});if(l=q[0])l=1<q.length?{height:"",scope:"","class":"",align:"",type:l.parentNode.nodeName.toLowerCase()}:g(c,l),c.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:b.buildListItems(c.settings.table_row_class_list,
function(a){a.value&&(a.textStyle=function(){return c.formatter.getCssText({block:"tr",classes:[a.value]})})})}),p={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},!1!==c.settings.table_row_advtab?c.windowManager.open({title:"Row properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},b.createStyleForm(f)],onsubmit:d.curry(a,c,q)}):c.windowManager.open({title:"Row properties",data:l,body:p,onsubmit:d.curry(a,c,q)})}}});m("tinymce.plugins.table.ui.CellDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util",
"tinymce.plugins.table.ui.Helpers"],function(d,e,f,c,b){var a=function(a,c){var d=a.dom,f={width:d.getStyle(c,"width")||d.getAttrib(c,"width"),height:d.getStyle(c,"height")||d.getAttrib(c,"height"),scope:d.getAttrib(c,"scope"),"class":d.getAttrib(c,"class")};f.type=c.nodeName.toLowerCase();e.each(["left","center","right"],function(b){a.formatter.matchNode(c,"align"+b)&&(f.align=b)});e.each(["top","middle","bottom"],function(b){a.formatter.matchNode(c,"valign"+b)&&(f.valign=b)});!1!==a.settings.table_cell_advtab&&
e.extend(f,b.extractAdvancedStyles(d,c));return f},g=function(a,b,d){var g=a.dom,p;p=d.control.rootControl.toJSON();a.undoManager.transact(function(){e.each(b,function(d){var e=p.scope;e&&g.setAttrib(d,"scope",e);(e=p.style)&&g.setAttrib(d,"style",e);(e=p["class"])&&g.setAttrib(d,"class",e);(e=c.addSizeSuffix(p.width))&&g.setStyle(d,"width",e);(e=c.addSizeSuffix(p.height))&&g.setStyle(d,"height",e);p.type&&d.nodeName.toLowerCase()!==p.type&&(d=g.rename(d,p.type));1===b.length&&(f.unApplyAlign(a,d),
f.unApplyVAlign(a,d));p.align&&f.applyAlign(a,d,p.align);p.valign&&f.applyVAlign(a,d,p.valign)});a.focus()})};return{open:function(c){var e,f,n=[],n=c.dom.select("td[data-mce-selected],th[data-mce-selected]");e=c.dom.getParent(c.selection.getStart(),"td,th");!n.length&&e&&n.push(e);if(e=e||n[0])e=1<n.length?{width:"",height:"",scope:"","class":"",align:"",style:"",type:e.nodeName.toLowerCase()}:a(c,e),c.settings.table_cell_class_list&&(f={name:"class",type:"listbox",label:"Class",values:b.buildListItems(c.settings.table_cell_class_list,
function(a){a.value&&(a.textStyle=function(){return c.formatter.getCssText({block:"td",classes:[a.value]})})})}),f={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:d.curry(b.updateStyleField,c)},{label:"Height",name:"height",onchange:d.curry(b.updateStyleField,c)},{label:"Cell type",name:"type",type:"listbox",text:"None",
minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},f]},!1!==c.settings.table_cell_advtab?c.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:e,body:[{title:"General",type:"form",items:f},b.createStyleForm(c)],onsubmit:d.curry(g,c,n)}):c.windowManager.open({title:"Cell properties",data:e,body:f,onsubmit:d.curry(g,
c,n)})}}});m("tinymce.plugins.table.actions.TableCommands","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.snooker.api.CopyRows ephox.snooker.api.TableFill ephox.snooker.api.TableLookup ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element tinymce.core.util.Tools tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.ui.TableDialog tinymce.plugins.table.ui.RowDialog tinymce.plugins.table.ui.CellDialog".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,p,m,r,t,s){var u=n.each,x=f.none();return{registerCommands:function(n,w,B,A){var y=p.getIsRoot(n),D=function(){return l.fromDom(n.dom.getParent(n.selection.getStart(),"th,td"))},C=function(b){var c=D();a.table(c,y).each(function(a){var d=m.forMenu(A,a,c);b(a,d).each(function(b){n.selection.setRng(b);n.focus();B.clear(a)})})},F=function(d){var g=D();return a.table(g,y).bind(function(a){var d=l.fromDom(n.getDoc()),h=m.forMenu(A,a,g),d=b.cellOperations(e.noop,d,f.none());
return c.copyRows(a,h,d)})},z=function(c){x.each(function(e){var f=d.map(e,function(a){return k.deep(a)}),g=D();a.table(g,y).bind(function(a){var d=l.fromDom(n.getDoc()),d=b.paste(d),d=m.pasteRows(A,a,g,f,d);c(a,d).each(function(b){n.selection.setRng(b);n.focus();B.clear(a)})})})};u({mceTableSplitCells:function(){C(w.unmergeCells)},mceTableMergeCells:function(){C(w.mergeCells)},mceTableInsertRowBefore:function(){C(w.insertRowsBefore)},mceTableInsertRowAfter:function(){C(w.insertRowsAfter)},mceTableInsertColBefore:function(){C(w.insertColumnsBefore)},
mceTableInsertColAfter:function(){C(w.insertColumnsAfter)},mceTableDeleteCol:function(){C(w.deleteColumn)},mceTableDeleteRow:function(){C(w.deleteRow)},mceTableCutRow:function(a){x=F();C(w.deleteRow)},mceTableCopyRow:function(a){x=F()},mceTablePasteRowBefore:function(a){z(w.pasteRowsBefore)},mceTablePasteRowAfter:function(a){z(w.pasteRowsAfter)},mceTableDelete:function(){var b=l.fromDom(n.dom.getParent(n.selection.getStart(),"th,td"));a.table(b,y).filter(e.not(y)).each(function(a){var b=l.fromText("");
g.after(a,b);h.remove(a);a=n.dom.createRng();a.setStart(b.dom(),0);a.setEnd(b.dom(),0);n.selection.setRng(a)})}},function(a,b){n.addCommand(b,a)});u({mceInsertTable:e.curry(r.open,n),mceTableProps:e.curry(r.open,n,!0),mceTableRowProps:e.curry(t.open,n),mceTableCellProps:e.curry(s.open,n)},function(a,b){n.addCommand(b,function(b,c){a(c)})})},getClipboardRows:function(){return x.fold(function(){},function(a){return d.map(a,function(a){return a.dom()})})},setClipboardRows:function(a){a=d.map(a,l.fromDom);
x=f.from(a)}}});m("tinymce.plugins.table.actions.TableWire","ephox.snooker.api.ResizeWire ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.properties.Css tinymce.plugins.table.alien.Util".split(" "),function(d,e,f,c,b,a,g){var h=function(){var d=b.fromTag("div");a.setAll(d,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});e.append(c.body(),d);return d};return{get:function(a,c){return a.inline?d.body(g.getBody(a),
h()):d.only(b.fromDom(a.getDoc()))},remove:function(a,b){a.inline&&f.remove(b.parent())}}});m("ephox.snooker.api.CellLocation",[],function(){return{none:function(d){return{fold:function(e,f,c,b){return e(d)}}},first:function(d){return{fold:function(e,f,c,b){return f(d)}}},middle:function(d,e){return{fold:function(f,c,b,a){return b(d,e)}}},last:function(d){return{fold:function(e,f,c,b){return b(d)}}}}});m("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation",
"ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(d,e,f,c,b){var a=function(a,f){return c.table(a,f).bind(function(f){var h=c.cells(f);return d.findIndex(h,function(c){return b.eq(a,c)}).map(function(a){return{index:e.constant(a),all:e.constant(h)}})})};return{next:function(b,c){return a(b,c).fold(function(){return f.none(b)},function(a){return a.index()+1<a.all().length?f.middle(b,a.all()[a.index()+1]):f.last(b)})},prev:function(b,c){return a(b,c).fold(function(){return f.none()},
function(a){return 0<=a.index()-1?f.middle(b,a.all()[a.index()-1]):f.first(b)})}}});m("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(d,e){var f=d.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);return{before:f.before,on:f.on,after:f.after,cata:function(c,b,a,d){return c.fold(b,a,d)},getStart:function(c){return c.fold(e.identity,e.identity,e.identity)}}});m("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt",
"ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(d,e,f,c,b){var a=d.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);d=e.immutable("start","soffset","finish","foffset");var g=function(a){return a.match({domRange:function(a){return f.fromDom(a.startContainer)},relative:function(a,c){return b.getStart(a)},exact:function(a,b,c,d){return a}})};return{domRange:a.domRange,
relative:a.relative,exact:a.exact,exactFromRange:function(b){return a.exact(b.start(),b.soffset(),b.finish(),b.foffset())},range:d,getWin:function(a){a=g(a);return c.defaultView(a)}}});m("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(d,e,f){var c=function(b,a,c,d){var e=f.owner(b).dom().createRange();e.setStart(b.dom(),a);e.setEnd(c.dom(),d);return e};return{after:function(b,a,e,f){var k=c(b,a,e,f);b=
d.eq(b,e)&&a===f;return k.collapsed&&!b},commonAncestorContainer:function(b,a,d,f){b=c(b,a,d,f);return e.fromDom(b.commonAncestorContainer)}}});m("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(d,e,f){return{fromElements:function(c,b){var a=(b||f).createDocumentFragment();d.each(c,function(b){a.appendChild(b.dom())});return e.fromDom(a)}}});m("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option",
"ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(d,e,f,c){var b=function(a,b){a.selectNodeContents(b.dom())},a=function(a,b){b.fold(function(b){a.setStartBefore(b.dom())},function(b,c){a.setStart(b.dom(),c)},function(b){a.setStartAfter(b.dom())})},g=function(a,b){b.fold(function(b){a.setEndBefore(b.dom())},function(b,c){a.setEnd(b.dom(),c)},function(b){a.setEndAfter(b.dom())})},h=function(a){a.deleteContents()},k=function(a){return{left:d.constant(a.left),top:d.constant(a.top),
right:d.constant(a.right),bottom:d.constant(a.bottom),width:d.constant(a.width),height:d.constant(a.height)}};return{create:function(a){return a.document.createRange()},replaceWith:function(a,b){h(a);a.insertNode(b.dom())},selectNodeContents:function(a,c){var d=a.document.createRange();b(d,c);return d},selectNodeContentsUsing:b,isCollapsed:function(a,b,c,d){return f.eq(a,c)&&b===d},relativeToNative:function(b,c,d){b=b.document.createRange();a(b,c);g(b,d);return b},exactToNative:function(a,b,c,d,e){a=
a.document.createRange();a.setStart(b.dom(),c);a.setEnd(d.dom(),e);return a},deleteContents:h,cloneFragment:function(a){a=a.cloneContents();return c.fromDom(a)},getFirstRect:function(a){var b=a.getClientRects();a=0<b.length?b[0]:a.getBoundingClientRect();return 0<a.width||0<a.height?e.some(a).map(k):e.none()},getBounds:function(a){a=a.getBoundingClientRect();return 0<a.width||0<a.height?e.some(a).map(k):e.none()},isWithin:function(a,b){return 1>b.compareBoundaryPoints(a.END_TO_START,a)&&-1<b.compareBoundaryPoints(a.START_TO_END,
a)},toString:function(a){return a.toString()}}});m("ephox.sugar.selection.core.SelectionDirection","ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Thunk ephox.sugar.api.node.Element ephox.sugar.selection.core.NativeRange".split(" "),function(d,e,f,c,b,a){var g=d.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),h=function(b,d){return d.match({domRange:function(a){return{ltr:e.constant(a),rtl:f.none}},relative:function(d,
e){return{ltr:c.cached(function(){return a.relativeToNative(b,d,e)}),rtl:c.cached(function(){return f.some(a.relativeToNative(b,e,d))})}},exact:function(d,e,g,h){return{ltr:c.cached(function(){return a.exactToNative(b,d,e,g,h)}),rtl:c.cached(function(){return f.some(a.exactToNative(b,g,h,d,e))})}}})},k=function(a,c){var d=c.ltr();return d.collapsed?c.rtl().filter(function(a){return!1===a.collapsed}).map(function(a){return g.rtl(b.fromDom(a.endContainer),a.endOffset,b.fromDom(a.startContainer),a.startOffset)}).getOrThunk(function(){return(0,g.ltr)(b.fromDom(d.startContainer),
d.startOffset,b.fromDom(d.endContainer),d.endOffset)}):(0,g.ltr)(b.fromDom(d.startContainer),d.startOffset,b.fromDom(d.endContainer),d.endOffset)},l=function(a,b){var c=h(a,b);return k(a,c)};return{ltr:g.ltr,rtl:g.rtl,diagnose:l,asLtrRange:function(a,b){return l(a,b).match({ltr:function(b,c,d,e){var f=a.document.createRange();f.setStart(b.dom(),c);f.setEnd(d.dom(),e);return f},rtl:function(b,c,d,e){var f=a.document.createRange();f.setStart(d.dom(),e);f.setEnd(b.dom(),c);return f}})}}});m("ephox.sugar.selection.alien.Geometry",
["global!Math"],function(d){return{inRect:function(d,f,c){return f>=d.left&&f<=d.right&&c>=d.top&&c<=d.bottom},searchForPoint:function(e,f,c,b,a){if(0===a)return 0;if(f===b)return a-1;for(var g=1;g<a;g++){var h=e(g),k=d.abs(f-h.left);if(!(c>h.bottom)){if(c<h.top||k>b)return g-1;b=k}}return 0}}});m("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(d,e,f,c,b){var a=
function(a,b,d,e,n){var m=function(c){var d=a.dom().createRange();d.setStart(b.dom(),c);d.collapse(!0);return d},q=f.get(b).length;d=c.searchForPoint(function(a){return m(a).getBoundingClientRect()},d,e,n.right,q);return m(d)};return{locate:function(b,f,k,l){var n=b.dom().createRange();n.selectNode(f.dom());n=n.getClientRects();return e.findMap(n,function(a){return c.inRect(a,k,l)?d.some(a):d.none()}).map(function(c){return a(b,f,k,l,c)})}}});m("ephox.sugar.selection.query.ContainerPoint","ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse ephox.sugar.selection.alien.Geometry ephox.sugar.selection.query.TextPoint global!Math".split(" "),
function(d,e,f,c,b,a,g){var h=function(g,l,n,m){var q=g.dom().createRange();l=c.children(l);return e.findMap(l,function(c){q.selectNode(c.dom());return b.inRect(q.getBoundingClientRect(),n,m)?(f.isText(c)?a.locate:h)(g,c,n,m):d.none()})};return{locate:function(b,c,d,e){var m=b.dom().createRange();m.selectNode(c.dom());m=m.getBoundingClientRect();d=g.max(m.left,g.min(m.right,d));e=g.max(m.top,g.min(m.bottom,e));return(f.isText(c)?a.locate:h)(b,c,d,e)}}});m("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option",
"ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(d,e,f){var c=function(a,b,c){a=a.dom().createRange();a.selectNode(b.dom());a.collapse(c);return a},b=function(a,b,d){var e=a.dom().createRange();e.selectNode(b.dom());var e=e.getBoundingClientRect(),n=d-e.left<e.right-d?!0:!1;return(!0===n?f.first:f.last)(b).map(function(b){return c(a,b,n)})},a=function(a,b,e){var f=b.dom().getBoundingClientRect();return d.some(c(a,b,e-f.left<f.right-e?!0:!1))};return{search:function(c,
d,f){return(0===e.children(d).length?a:b)(c,d,f)}}});m("ephox.sugar.selection.query.CaretRange","ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.query.ContainerPoint ephox.sugar.selection.query.EdgePoint global!document global!Math".split(" "),function(d,e,f,c,b,a,g,h){var k=function(a,b,c){return d.from(a.dom().caretPositionFromPoint(b,c)).bind(function(b){if(null===b.offsetNode)return d.none();var c=
a.dom().createRange();c.setStart(b.offsetNode,b.offset);c.collapse();return d.some(c)})},l=function(a,b,c){return d.from(a.dom().caretRangeFromPoint(b,c))},n=function(a,c,d,e){var f=a.dom().createRange();f.selectNode(c.dom());f=f.getBoundingClientRect();d=h.max(f.left,h.min(f.right,d));e=h.max(f.top,h.min(f.bottom,e));return b.locate(a,c,d,e)},m=function(b,c,g){return d.from(b.dom().elementFromPoint(c,g)).map(e.fromDom).bind(function(d){var e=function(){return a.search(b,d,c)};return 0===f.children(d).length?
e():n(b,d,c,g).orThunk(e)})},q=g.caretPositionFromPoint?k:g.caretRangeFromPoint?l:m;return{fromPoint:function(a,b,d){a=e.fromDom(a.document);return q(a,b,d).map(function(a){return c.range(e.fromDom(a.startContainer),a.startOffset,e.fromDom(a.endContainer),a.endOffset)})}}});m("ephox.sugar.selection.query.Within","ephox.katamari.api.Arr ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Selectors ephox.sugar.selection.core.NativeRange ephox.sugar.selection.core.SelectionDirection".split(" "),
function(d,e,f,c,b,a,g){var h=function(e,f,g,h){var m=a.create(e);e=(b.is(f,h)?[f]:[]).concat(c.descendants(f,h));return d.filter(e,function(b){a.selectNodeContentsUsing(m,b);return a.isWithin(g,m)})};return{find:function(a,b,c){b=g.asLtrRange(a,b);var d=e.fromDom(b.commonAncestorContainer);return f.isElement(d)?h(a,d,b,c):[]}}});m("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],
function(d,e,f,c,b){var a=function(a,c){var e=f.name(a);return"input"===e?b.after(a):d.contains(["br","img"],e)?0===c?b.before(a):b.after(a):b.on(a,c)},g=function(d,e){var f=d.fold(b.before,a,b.after),g=e.fold(b.before,a,b.after);return c.relative(f,g)},h=function(b,d,e,f){b=a(b,d);e=a(e,f);return c.relative(b,e)};return{beforeSpecial:a,preprocess:function(a){return a.match({domRange:function(a){var b=e.fromDom(a.startContainer),c=e.fromDom(a.endContainer);return h(b,a.startOffset,c,a.endOffset)},
relative:g,exact:h})},preprocessRelative:g,preprocessExact:h}});m("ephox.sugar.api.selection.WindowSelection","ephox.katamari.api.Option ephox.sugar.api.dom.DocumentPosition ephox.sugar.api.node.Element ephox.sugar.api.node.Fragment ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.core.NativeRange ephox.sugar.selection.core.SelectionDirection ephox.sugar.selection.query.CaretRange ephox.sugar.selection.query.Within ephox.sugar.selection.quirks.Prefilter".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n){var m=function(a,b){var c=a.getSelection();c.removeAllRanges();c.addRange(b)},q=function(a,b){return h.diagnose(a,b).match({ltr:function(b,c,d,e){b=g.exactToNative(a,b,c,d,e);m(a,b)},rtl:function(b,c,d,e){var f=a.getSelection();f.extend?(f.collapse(b.dom(),c),f.extend(d.dom(),e)):(b=g.exactToNative(a,d,e,b,c),m(a,b))}})},r=function(b){b=b.getSelection();if(0<b.rangeCount){var c=f.fromDom(b.anchorNode),g=f.fromDom(b.focusNode);e.after(c,b.anchorOffset,g,b.focusOffset)?
b=d.some(a.range(f.fromDom(b.anchorNode),b.anchorOffset,f.fromDom(b.focusNode),b.focusOffset)):0<b.rangeCount?(c=b.getRangeAt(0),b=b.getRangeAt(b.rangeCount-1),b=d.some(a.range(f.fromDom(c.startContainer),c.startOffset,f.fromDom(b.endContainer),b.endOffset))):b=d.none()}else b=d.none();return b};return{setExact:function(a,b,c,d,e){b=n.preprocessExact(b,c,d,e);q(a,b)},getExact:r,get:function(b){return r(b).map(function(b){return a.exact(b.start(),b.soffset(),b.finish(),b.foffset())})},setRelative:function(a,
b,c){b=n.preprocessRelative(b,c);q(a,b)},toNative:function(b){var c=a.getWin(b).dom(),d=function(a,b,d,e){return g.exactToNative(c,a,b,d,e)};b=n.preprocess(b);return h.diagnose(c,b).match({ltr:d,rtl:d})},setToElement:function(a,b){var c=g.selectNodeContents(a,b);m(a,c)},clear:function(a){a.getSelection().removeAllRanges()},clone:function(a,b){var c=h.asLtrRange(a,b);return g.cloneFragment(c)},replace:function(a,b,d){b=h.asLtrRange(a,b);a=c.fromElements(d,a.document);g.replaceWith(b,a)},deleteAt:function(a,
b){var c=h.asLtrRange(a,b);g.deleteContents(c)},forElement:function(b,c){var d=g.selectNodeContents(b,c);return a.range(f.fromDom(d.startContainer),d.startOffset,f.fromDom(d.endContainer),d.endOffset)},getFirstRect:function(a,b){var c=h.asLtrRange(a,b);return g.getFirstRect(c)},getBounds:function(a,b){var c=h.asLtrRange(a,b);return g.getBounds(c)},getAtPoint:function(a,b,c){return k.fromPoint(a,b,c)},findWithin:function(a,b,c){return l.find(a,b,c)},getAsString:function(a,b){var c=h.asLtrRange(a,b);
return g.toString(c)}}});m("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.util.VK")});m("tinymce.plugins.table.queries.TabContext","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.CellNavigation ephox.snooker.api.TableLookup ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.selection.CursorPosition ephox.sugar.api.selection.Selection ephox.sugar.api.selection.WindowSelection tinymce.core.util.VK tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.TableTargets".split(" "),
function(d,e,f,c,b,a,g,h,k,l,n,m,q,r,t){var s=function(a,b,c,d){return w(a,b,f.next(c),d)},u=function(a,b,c,d){return w(a,b,f.prev(c),d)},x=function(a,b){var c=n.exact(b,0,b,0);return m.toNative(c)},v=function(a,b){var c=h.descendants(b,"tr");return d.last(c).bind(function(b){return k.descendant(b,"td,th").map(function(b){return x(a,b)})})},w=function(a,b,d,f,g){return d.fold(e.none,e.none,function(b,c){return l.first(c).map(function(b){return x(a,b)})},function(d){return c.table(d,b).bind(function(b){var c=
t.noMenu(d);a.undoManager.transact(function(){f.insertRowsAfter(b,c)});return v(a,b)})})},B=["table","li","dl"];return{handle:function(e,f,h,l){if(e.keyCode===q.TAB){var k=r.getBody(f),n=function(a){var c=g.name(a);return b.eq(a,k)||d.contains(B,c)},m=f.selection.getRng();m.collapsed&&(m=a.fromDom(m.startContainer),c.cell(m,n).each(function(a){e.preventDefault();(e.shiftKey?u:s)(f,n,a,h,l).each(function(a){f.selection.setRng(a)})}))}}}});m("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],
function(d){return{response:d.immutable("selection","kill")}});m("ephox.darwin.api.SelectionKeys",[],function(){var d=function(c){return function(b){return b===c}},e=d(38),f=d(40);return{ltr:{isBackward:d(37),isForward:d(39)},rtl:{isBackward:d(39),isForward:d(37)},isUp:e,isDown:f,isNavigation:function(c){return 37<=c&&40>=c}}});m("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],
function(d,e,f,c){return{convertToRange:function(b,a){var f=c.asLtrRange(b,a);return{start:d.constant(e.fromDom(f.startContainer)),soffset:d.constant(f.startOffset),finish:d.constant(e.fromDom(f.endContainer)),foffset:d.constant(f.endOffset)}},makeSitus:function(b,a,c,e){return{start:d.constant(f.on(b,a)),finish:d.constant(f.on(c,e))}}}});m("ephox.darwin.api.WindowBridge","ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.selection.Selection ephox.sugar.api.selection.Situ ephox.sugar.api.selection.WindowSelection".split(" "),
function(d,e,f,c,b,a,g,h){return function(k){return{elementFromPoint:function(a,d){return c.from(k.document.elementFromPoint(a,d)).map(b.fromDom)},getRect:function(a){return a.dom().getBoundingClientRect()},getRangedRect:function(b,c,d,g){b=a.exact(b,c,d,g);return h.getFirstRect(k,b).map(function(a){return f.map(a,e.apply)})},getSelection:function(){return h.get(k).map(function(a){return d.convertToRange(k,a)})},fromSitus:function(b){b=a.relative(b.start(),b.finish());return d.convertToRange(k,b)},
situsFromPoint:function(a,b){return h.getAtPoint(k,a,b).map(function(a){return{start:e.constant(g.on(a.start(),a.soffset())),finish:e.constant(g.on(a.finish(),a.foffset()))}})},clearSelection:function(){h.clear(k)},setSelection:function(a){h.setExact(k,a.start(),a.soffset(),a.finish(),a.foffset())},setRelativeSelection:function(a,b){h.setRelative(k,a,b)},selectContents:function(a){h.setToElement(k,a)},getInnerHeight:function(){return k.innerHeight},getScrollY:function(){return k.scrollY},scrollBy:function(a,
b){k.scrollBy(a,b)}}}});m("ephox.darwin.keyboard.KeySelection","ephox.darwin.api.Responses ephox.darwin.selection.CellSelection ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.search.SelectorFind ephox.sugar.api.selection.Awareness ephox.sugar.api.selection.Selection ephox.sugar.api.selection.Situ".split(" "),function(d,e,f,c,b,a,g,h,k,l){var n=function(c,g,l,k,n){return!a.eq(l,k)&&(g=e.identify(l,k,g).getOr([]),0<g.length)?
(n(c,g,l,k),b.some(d.response(b.some(f.makeSitus(l,0,l,h.getEnd(l))),!0))):b.none()};return{sync:function(c,d,e,f,h,l,k){return a.eq(e,h)&&f===l?b.none():g.closest(e,"td,th",d).bind(function(a){return g.closest(h,"td,th",d).bind(function(b){return n(c,d,a,b,k)})})},detect:n,update:function(a,b,c,d,f){return e.shiftSelection(d,a,b,f.firstSelectedSelector(),f.lastSelectedSelector()).map(function(a){f.clear(c);f.selectRange(c,a.boxes(),a.start(),a.finish());return a.boxes()})}}});m("ephox.darwin.keyboard.Carets",
["ephox.katamari.api.Struct"],function(d){var e=d.immutableBag(["left","top","right","bottom"],[]);return{nu:e,moveUp:function(d,c){return e({left:d.left(),top:d.top()-c,right:d.right(),bottom:d.bottom()-c})},moveDown:function(d,c){return e({left:d.left(),top:d.top()+c,right:d.right(),bottom:d.bottom()+c})},moveBottomTo:function(d,c){var b=d.bottom()-d.top();return e({left:d.left(),top:c-b,right:d.right(),bottom:c})},moveTopTo:function(d,c){var b=d.bottom()-d.top();return e({left:d.left(),top:c,right:d.right(),
bottom:c+b})},getTop:function(d){return d.top()},getBottom:function(d){return d.bottom()},translate:function(d,c,b){return e({left:d.left()+c,top:d.top()+b,right:d.right()+c,bottom:d.bottom()+b})},toString:function(d){return"("+d.left()+", "+d.top()+") -> ("+d.right()+", "+d.bottom()+")"}}});m("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(d,e,f,c){var b=function(a){return d.nu({left:a.left,
top:a.top,right:a.right,bottom:a.bottom})};return{getBoxAt:function(a,d,h){return f.isElement(d)?e.some(a.getRect(d)).map(b):f.isText(d)?(a=0<=h&&h<c.getEnd(d)?a.getRangedRect(d,h,d,h+1):0<h?a.getRangedRect(d,h-1,d,h):e.none(),a.map(b)):e.none()},getEntireBox:function(a,d){return f.isElement(d)?e.some(a.getRect(d)).map(b):f.isText(d)?a.getRangedRect(d,0,d,c.getEnd(d)).map(b):e.none()}}});m("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],
function(d,e,f){var c=f.immutable("item","mode");f=function(a,d,e,f){var g=void 0!==f?f:b;return a.property().parent(d).map(function(a){return c(a,g)})};var b=function(b,d,e,f){var g=void 0!==f?f:a;return e.sibling(b,d).map(function(a){return c(a,g)})},a=function(b,d,e,f){var g=void 0!==f?f:a;b=b.property().children(d);return e.first(b).map(function(a){return c(a,g)})},g=[{current:f,next:b,fallback:e.none()},{current:b,next:a,fallback:e.some(f)},{current:a,next:a,fallback:e.some(b)}],h=function(a,
b,c,e,f){return d.find(void 0!==f?f:g,function(a){return a.current===c}).bind(function(c){return c.current(a,b,e,c.next).orThunk(function(){return c.fallback.bind(function(c){return h(a,b,c,e)})})})};return{backtrack:f,sidestep:b,advance:a,go:h}});m("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(d){return{left:function(){return{sibling:function(d,f){return d.query().prevSibling(f)},first:function(e){return 0<e.length?d.some(e[e.length-1]):d.none()}}},right:function(){return{sibling:function(d,
f){return d.query().nextSibling(f)},first:function(e){return 0<e.length?d.some(e[0]):d.none()}}}}});m("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(d,e,f){var c=function(b,a,f,h,k,l){return e.go(b,a,h,k).bind(function(a){return l(a.item())?d.none():f(a.item())?d.some(a.item()):c(b,a.item(),f,a.mode(),k,l)})};return{left:function(b,a,d,h){return c(b,a,d,e.sidestep,f.left(),h)},right:function(b,a,d,h){return c(b,a,d,
e.sidestep,f.right(),h)}}});m("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(d,e,f,c){var b=function(a,b){return 0===a.property().children(b).length},a=function(a,b,c,d){return e.left(a,b,c,d)},g=function(a,b,c,d){return e.right(a,b,c,d)};return{before:function(c,e,f){return a(c,e,d.curry(b,c),f)},after:function(a,c,e){return g(a,c,d.curry(b,a),e)},seekLeft:a,seekRight:g,walkers:function(){return{left:c.left,
right:c.right}},walk:function(a,b,c,d,e){return f.go(a,b,c,d,e)},backtrack:f.backtrack,sidestep:f.sidestep,advance:f.advance}});m("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(d,e){var f=d();return{gather:function(c,b,a){return e.gather(f,c,b,a)},before:function(c,b){return e.before(f,c,b)},after:function(c,b){return e.after(f,c,b)},seekLeft:function(c,b,a){return e.seekLeft(f,c,b,a)},seekRight:function(c,b,a){return e.seekRight(f,c,b,
a)},walkers:function(){return e.walkers()},walk:function(c,b,a,d){return e.walk(f,c,b,a,d)}}});m("ephox.darwin.keyboard.Retries","ephox.darwin.keyboard.Carets ephox.darwin.keyboard.Rectangles ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.phoenix.api.dom.DomGather ephox.robin.api.dom.DomStructure ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind global!Math".split(" "),function(d,e,f,c,b,a,g,h,k,l){var n=f.generate([{none:[]},{retry:["caret"]}]),m=function(a,
b,d){return k.closest(b,g.isBlock).fold(c.constant(!1),function(b){return e.getEntireBox(a,b).exists(function(a){return d.left()<a.left()||1>l.abs(a.right()-d.left())||d.left()>a.right()})})};f={point:d.getBottom,adjuster:function(a,b,c,e,f){var g=d.moveDown(f,5);return 1>l.abs(c.bottom()-e.bottom())?n.retry(g):c.top()>f.bottom()?n.retry(g):c.top()===f.bottom()?n.retry(d.moveDown(f,1)):m(a,b,f)?n.retry(d.translate(g,5,0)):n.none()},move:d.moveDown,gather:a.after};var q=function(a,b,c){return a.elementFromPoint(b,
c).filter(function(a){return"table"===h.name(a)}).isSome()},r=function(a,c,d,f,g){return 0===g?b.some(f):q(a,f.left(),c.point(f))?r(a,c,d,c.move(f,5),g-1):a.situsFromPoint(f.left(),c.point(f)).bind(function(h){return h.start().fold(b.none,function(h,l){return e.getEntireBox(a,h,l).bind(function(e){return c.adjuster(a,h,e,d,f).fold(b.none,function(b){return r(a,c,d,b,g-1)})}).orThunk(function(){return b.some(f)})},b.none)})},t=function(a,c,d){var e=a.move(d,5),f=r(c,a,d,e,100).getOr(e);return(a.point(f)>
c.getInnerHeight()?b.some(a.point(f)-c.getInnerHeight()):0>a.point(f)?b.some(-a.point(f)):b.none()).fold(function(){return c.situsFromPoint(f.left(),a.point(f))},function(b){c.scrollBy(0,b);return c.situsFromPoint(f.left(),a.point(f)-b)})};return{tryUp:c.curry(t,{point:d.getTop,adjuster:function(a,b,c,e,f){var g=d.moveUp(f,5);return 1>l.abs(c.top()-e.top())?n.retry(g):c.bottom()<f.top()?n.retry(g):c.bottom()===f.top()?n.retry(d.moveUp(f,1)):m(a,b,f)?n.retry(d.translate(g,5,0)):n.none()},move:d.moveUp,
gather:a.before}),tryDown:c.curry(t,f),ieTryUp:function(a,b){return a.situsFromPoint(b.left(),b.top()-5)},ieTryDown:function(a,b){return a.situsFromPoint(b.left(),b.bottom()+5)},getJumpSize:c.constant(5)}});m("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(d,e,f,c,b){var a=d.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},
{failedDown:["cell"]}]),g=function(a){return c.closest(a,"tr")};return{verify:function(d,k,l,n,m,q,r){return c.closest(n,"td,th",r).bind(function(l){return c.closest(k,"td,th",r).map(function(c){return f.eq(l,c)?f.eq(n,l)&&b.getEnd(l)===m?q(c):a.none("in same cell"):e.sharedOne(g,[l,c]).fold(function(){var b=d.getRect(c),e=d.getRect(l);return e.right>b.left&&e.left<b.right?a.success():q(c)},function(a){return q(c)})})}).getOr(a.none("default"))},cata:function(a,b,c,d,e){return a.fold(b,c,d,e)},adt:a}});
m("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(d){var e=d.immutable("element","offset"),f=d.immutable("element","deltaOffset"),c=d.immutable("element","start","finish"),b=d.immutable("begin","end");d=d.immutable("element","text");return{point:e,delta:f,range:c,points:b,text:d}});m("ephox.sugar.api.search.ElementAddress","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),
function(d,e,f,c,b,a,g,h,k){var l=c.immutable("ancestor","descendants","element","index"),m=c.immutable("parent","children","element","index"),p=function(a,c){return d.findIndex(a,e.curry(b.eq,c))};return{childOf:function(c,d){return a.closest(c,function(a){return k.parent(a).exists(function(a){return b.eq(a,d)})})},indexOf:p,indexInParent:function(a){return k.parent(a).bind(function(b){var c=k.children(b);return p(c,a).map(function(d){return m(b,c,a,d)})})},selectorsInParent:function(a,b){return k.parent(a).bind(function(c){var d=
g.children(c,b);return p(d,a).map(function(b){return m(c,d,a,b)})})},descendantsInAncestor:function(a,b,c){return h.closest(a,b).bind(function(b){var d=g.descendants(b,c);return p(d,a).map(function(c){return l(b,d,a,c)})})}}});m("ephox.darwin.navigation.BrTags","ephox.darwin.navigation.BeforeAfter ephox.katamari.api.Fun ephox.katamari.api.Option ephox.phoenix.api.data.Spot ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.ElementAddress ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Awareness ephox.sugar.api.selection.Situ".split(" "),
function(d,e,f,c,b,a,g,h,k,l){var m=function(a){return"br"===b.name(a)},p=function(c,d,e){return d(c,e).bind(function(c){return b.isText(c)&&0===a.get(c).trim().length?p(c,d,e):f.some(c)})},q=function(a,b,c){return c.traverse(b).orThunk(function(){return p(b,c.gather,a)}).map(c.relative)},r=function(a,b){return h.child(a,b).filter(m).orThunk(function(){return h.child(a,b-1).filter(m)})},t=function(a,b,c,d){return r(b,c).bind(function(b){return d.traverse(b).fold(function(){return p(b,d.gather,a).map(d.relative)},
function(a){return g.indexInParent(a).map(function(a){return l.on(a.parent(),a.index())})})})};return{tryBr:function(a,b,c,d){return(m(b)?q(a,b,d):t(a,b,c,d)).map(function(a){return{start:e.constant(a),finish:e.constant(a)}})},process:function(a){return d.cata(a,function(a){return f.none("BR ADT: none")},function(){return f.none()},function(a){return f.some(c.point(a,0))},function(a){return f.some(c.point(a,k.getEnd(a)))})}}});m("ephox.darwin.keyboard.TableKeys","ephox.darwin.keyboard.Carets ephox.darwin.keyboard.Rectangles ephox.darwin.keyboard.Retries ephox.darwin.navigation.BeforeAfter ephox.darwin.navigation.BrTags ephox.katamari.api.Option ephox.phoenix.api.data.Spot ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.selection.Awareness".split(" "),
function(d,e,f,c,b,a,g,h,k,l){var m=h.detect(),p=function(d,e,f){return d.getSelection().bind(function(h){return b.tryBr(e,h.finish(),h.foffset(),f).fold(function(){return a.some(g.point(h.finish(),h.foffset()))},function(a){a=d.fromSitus(a);a=c.verify(d,h.finish(),h.foffset(),a.finish(),a.foffset(),f.failure,e);return b.process(a)})})},q=function(b,e,f,g,h,m){return 0===m?a.none():s(b,e,f,g,h).bind(function(n){var p=b.fromSitus(n),p=c.verify(b,f,g,p.finish(),p.foffset(),h.failure,e);return c.cata(p,
function(){return a.none()},function(){return a.some(n)},function(a){return k.eq(f,a)&&0===g?r(b,f,g,d.moveUp,h):q(b,e,a,0,h,m-1)},function(a){return k.eq(f,a)&&g===l.getEnd(a)?r(b,f,g,d.moveDown,h):q(b,e,a,l.getEnd(a),h,m-1)})})},r=function(a,b,c,d,g){return e.getBoxAt(a,b,c).bind(function(b){return t(a,g,d(b,f.getJumpSize()))})},t=function(b,c,d){return m.browser.isChrome()||m.browser.isSafari()||m.browser.isFirefox()||m.browser.isEdge()?c.otherRetry(b,d):m.browser.isIE()?c.ieRetry(b,d):a.none()},
s=function(a,b,c,d,f){return e.getBoxAt(a,c,d).bind(function(b){return t(a,f,b)})};return{handle:function(a,b,c){return p(a,b,c).bind(function(d){return q(a,b,d.element(),d.offset(),c,20).map(a.fromSitus)})}}});m("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(d){return{any:function(e){return d.first(e).isSome()},ancestor:function(e,f,c){return d.ancestor(e,f,c).isSome()},closest:function(e,f,c){return d.closest(e,f,c).isSome()},sibling:function(e,f){return d.sibling(e,
f).isSome()},child:function(e,f){return d.child(e,f).isSome()},descendant:function(e,f){return d.descendant(e,f).isSome()}}});m("ephox.darwin.keyboard.VerticalMovement","ephox.darwin.api.Responses ephox.darwin.keyboard.KeySelection ephox.darwin.keyboard.TableKeys ephox.darwin.selection.Util ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.search.PredicateExists ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse".split(" "),
function(d,e,f,c,b,a,g,h,k,l,m){var p=g.detect(),q=function(a,b){return k.ancestor(a,function(a){return m.parent(a).exists(function(a){return h.eq(a,b)})})},r=function(c,d,e,g,h){return l.closest(g,"td,th",d).bind(function(g){return l.closest(g,"table",d).bind(function(k){return q(h,k)?f.handle(c,d,e).bind(function(a){return l.closest(a.finish(),"td,th",d).map(function(c){return{start:b.constant(g),finish:b.constant(c),range:b.constant(a)}})}):a.none()})})};return{navigate:function(b,e,f,g,h){return p.browser.isIE()?
a.none():r(b,e,f,g,h).map(function(b){b=b.range();return d.response(a.some(c.makeSitus(b.start(),b.soffset(),b.finish(),b.foffset())),!0)})},select:function(a,b,c,d,f,g,h){return r(a,c,d,f,g).bind(function(a){return e.detect(b,c,a.start(),a.finish(),h)})}}});m("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(d,e,f,c){var b=function(a,b){return c.closest(a,"td,th",b)};
return function(a,c,h,k){var l=e.none(),m=function(){l=e.none()};return{mousedown:function(a){k.clear(c);l=b(a.target(),h)},mouseover:function(e){l.each(function(l){k.clear(c);b(e.target(),h).each(function(b){var e=d.identify(l,b,h).getOr([]);if(1<e.length||1===e.length&&!f.eq(l,b))k.selectRange(c,e,l,b),a.selectContents(b)})})},mouseup:function(){l.each(m)}}}});m("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather",
"ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(d,e,f,c,b){return{down:{traverse:c.nextSibling,gather:f.after,relative:b.before,otherRetry:d.tryDown,ieRetry:d.ieTryDown,failure:e.adt.failedDown},up:{traverse:c.prevSibling,gather:f.before,relative:b.before,otherRetry:d.tryUp,ieRetry:d.ieTryUp,failure:e.adt.failedUp}}});m("ephox.darwin.api.InputHandlers","ephox.darwin.api.Responses ephox.darwin.api.SelectionKeys ephox.darwin.api.WindowBridge ephox.darwin.keyboard.KeySelection ephox.darwin.keyboard.VerticalMovement ephox.darwin.mouse.MouseSelection ephox.darwin.navigation.KeyDirection ephox.darwin.selection.CellSelection ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.selection.Situ".split(" "),
function(d,e,f,c,b,a,g,h,k,l,m,p,q){var r=p.immutable("rows","cols");return{mouse:function(b,c,d,e){b=f(b);c=a(b,c,d,e);return{mousedown:c.mousedown,mouseover:c.mouseover,mouseup:c.mouseup}},keyboard:function(a,p,u,x){var v=f(a),w=function(){x.clear(p);return l.none()};return{keydown:function(a,f,t,D,C,F){var z=a.raw().which,E=!0===a.raw().shiftKey;return h.retrieve(p,x.selectedSelector()).fold(function(){return e.isDown(z)&&E?k.curry(b.select,v,p,u,g.down,D,f,x.selectRange):e.isUp(z)&&E?k.curry(b.select,
v,p,u,g.up,D,f,x.selectRange):e.isDown(z)?k.curry(b.navigate,v,u,g.down,D,f):e.isUp(z)?k.curry(b.navigate,v,u,g.up,D,f):l.none},function(a){var b=function(b){return function(){return m.findMap(b,function(b){return c.update(b.rows(),b.cols(),p,a,x)}).fold(function(){return h.getEdges(p,x.firstSelectedSelector(),x.lastSelectedSelector()).map(function(a){var b=e.isDown(z)||F.isForward(z)?q.after:q.before;v.setRelativeSelection(q.on(a.first(),0),b(a.table()));x.clear(p);return d.response(l.none(),!0)})},
function(a){return l.some(d.response(l.none(),!0))})}};return e.isDown(z)&&E?b([r(1,0)]):e.isUp(z)&&E?b([r(-1,0)]):F.isBackward(z)&&E?b([r(0,-1),r(-1,0)]):F.isForward(z)&&E?b([r(0,1),r(1,0)]):e.isNavigation(z)&&!1===E?w:l.none})()},keyup:function(a,b,d,f,g){return h.retrieve(p,x.selectedSelector()).fold(function(){var h=a.raw().which;return!1===(!0===a.raw().shiftKey)?l.none():e.isNavigation(h)?c.sync(p,u,b,d,f,g,x.selectRange):l.none()},l.none)}}}}});m("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr",
"ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(d,e,f,c){return{add:function(b,a){d.each(a,function(a){e.add(b,a)})},remove:function(b,a){d.each(a,function(a){e.remove(b,a)})},toggle:function(b,a){d.each(a,function(a){e.toggle(b,a)})},hasAll:function(b,a){return d.forall(a,function(a){return e.has(b,a)})},hasAny:function(b,a){return d.exists(a,function(a){return e.has(b,a)})},get:function(b){if(f.supports(b)){b=b.dom().classList;for(var a=new c(b.length),d=
0;d<b.length;d++)a[d]=b.item(d);b=a}else b=f.get(b);return b}}});m("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(d,e){return{addClass:function(e){return function(c){d.add(c,e)}},removeClass:function(e){return function(c){d.remove(c,e)}},removeClasses:function(d){return function(c){e.remove(c,d)}},hasClass:function(e){return function(c){return d.has(c,e)}}}});m("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr",
"ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(d,e,f,c,b){return{byClass:function(a){var e=c.addClass(a.selected()),h=c.removeClasses([a.selected(),a.lastSelected(),a.firstSelected()]),k=function(c){c=b.descendants(c,a.selectedSelector());d.each(c,h)};return{clear:k,selectRange:function(b,c,h,m){k(b);d.each(c,e);f.add(h,a.firstSelected());f.add(m,a.lastSelected())},selectedSelector:a.selectedSelector,
firstSelectedSelector:a.firstSelectedSelector,lastSelectedSelector:a.lastSelectedSelector}},byAttr:function(a){var c=function(b){e.remove(b,a.selected());e.remove(b,a.firstSelected());e.remove(b,a.lastSelected())},f=function(b){e.set(b,a.selected(),"1")},k=function(e){e=b.descendants(e,a.selectedSelector());d.each(e,c)};return{clear:k,selectRange:function(b,c,g,m){k(b);d.each(c,f);e.set(g,a.firstSelected(),"1");e.set(m,a.lastSelected(),"1")},selectedSelector:a.selectedSelector,firstSelectedSelector:a.firstSelectedSelector,
lastSelectedSelector:a.lastSelectedSelector}}}});m("tinymce.plugins.table.selection.CellSelection","ephox.darwin.api.InputHandlers ephox.darwin.api.SelectionAnnotation ephox.darwin.api.SelectionKeys ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.snooker.api.TableLookup ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.properties.Attr ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection ephox.sugar.selection.core.SelectionDirection tinymce.plugins.table.alien.Util tinymce.plugins.table.queries.Direction tinymce.plugins.table.selection.Ephemera".split(" "),
function(d,e,f,c,b,a,g,h,k,l,m,p,q,r,t,s,u,x){return function(v,w){var B=a.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),A=b.none(),y=e.byAttr(x);v.on("init",function(a){var e=v.getWin(),x=s.getBody(v);a=s.getIsRoot(v);var z=d.mouse(e,x,a,y),E=d.keyboard(e,x,a,y),K=function(a,b){b.kill()&&a.kill();b.selection().each(function(a){a=r.relative(a.start(),a.finish());a=t.asLtrRange(e,a);v.selection.setRng(a)})};a=function(a){var b=H(a);if(b.raw().shiftKey&&f.isNavigation(b.raw().which)){a=
v.selection.getRng();var c=k.fromDom(a.startContainer),d=k.fromDom(a.endContainer);E.keyup(b,c,a.startOffset,d,a.endOffset).each(function(a){K(b,a)})}};var I=function(a){return!p.has(a,"data-mce-bogus")&&"br"!==l.name(a)&&!(l.isText(a)&&0===m.get(a).length)},L=function(){var a=k.fromDom(v.getBody()),c=function(a){return q.prevSibling(a).bind(function(a){return I(a)?b.some(a):c(a)})};return q.lastChild(a).bind(function(a){return I(a)?b.some(a):c(a)})},M=function(a){var b=H(a);w().each(function(a){a.hideBars()});
40===a.which&&L().each(function(a){"table"===l.name(a)&&(v.settings.forced_root_block?v.dom.add(v.getBody(),v.settings.forced_root_block,v.settings.forced_root_block_attrs,"<br/>"):v.dom.add(v.getBody(),"br"))});a=v.selection.getRng();var c=k.fromDom(v.selection.getStart()),d=k.fromDom(a.startContainer),e=k.fromDom(a.endContainer),c=u.directionAt(c).isRtl()?f.rtl:f.ltr;E.keydown(b,d,a.startOffset,e,a.endOffset,c).each(function(a){K(b,a)});w().each(function(a){a.showBars()})},H=function(a){var b=k.fromDom(a.target),
d=function(){a.stopPropagation()},e=function(){a.preventDefault()},f=c.compose(e,d);return{target:c.constant(b),x:c.constant(a.x),y:c.constant(a.y),stop:d,prevent:e,kill:f,raw:c.constant(a)}},G=function(a){return 0===a.button},O=function(a){G(a)&&z.mousedown(H(a))},P=function(a){var b;b=void 0===a.buttons?!0:0!==(a.buttons&1);b&&z.mouseover(H(a))},J=function(a){G&&z.mouseup(H(a))};v.on("mousedown",O);v.on("mouseover",P);v.on("mouseup",J);v.on("keyup",a);v.on("keydown",M);v.on("nodechange",function(){var a=
v.selection,d=k.fromDom(a.getStart()),a=k.fromDom(a.getEnd()),d=g.table(d),e=g.table(a);d.bind(function(a){return e.bind(function(c){return h.eq(a,c)?b.some(!0):b.none()})}).fold(function(){y.clear(x)},c.noop)});A=b.some(B({mousedown:O,mouseover:P,mouseup:J,keyup:a,keydown:M}))});return{clear:y.clear,destroy:function(){A.each(function(a){})}}}});m("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera",
"tinymce.plugins.table.selection.SelectionTypes"],function(d,e,f,c){return function(b){return{get:function(){var a=e.getBody(b);return d.retrieve(a,f.selectedSelector()).fold(function(){return void 0===b.selection.getStart()?c.none():c.single(b.selection)},function(a){return c.multiple(a)})}}}});m("tinymce.plugins.table.ui.Buttons",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.ui.TableDialog"],function(d,e,f){var c=e.each;return{addButtons:function(b){function a(a){return function(){b.execCommand(a)}}
var e=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(a){"|"==a?e.push({text:"-"}):e.push(b.menuItems[a])});b.addButton("table",{type:"menubutton",title:"Table",menu:e});b.addButton("tableprops",{title:"Table properties",onclick:d.curry(f.open,b,!0),icon:"table"});b.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")});b.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")});b.addButton("tablemergecells",{title:"Merge cells",
onclick:a("mceTableMergeCells")});b.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")});b.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")});b.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")});b.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")});b.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")});b.addButton("tablecutrow",
{title:"Cut row",onclick:a("mceTableCutRow")});b.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")});b.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")});b.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")});b.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")});b.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")});
b.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")})},addToolbars:function(b){var a=function(a){return b.dom.is(a,"table")&&b.getBody().contains(a)},c=b.settings.table_toolbar;""!==c&&!1!==c&&(c||(c="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),b.addContextToolbar(a,c))}}});m("tinymce.plugins.table.ui.MenuItems","ephox.katamari.api.Fun ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.TableLookup ephox.sugar.api.node.Element tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.queries.TableTargets tinymce.plugins.table.ui.TableDialog".split(" "),
function(d,e,f,c,b,a,g,h){return{addMenuItems:function(k,l){function m(a){return function(){k.execCommand(a)}}var p=f.none(),q=[],r=[],t=[],s=[],u=function(a){a.disabled(!0)},x=function(a){a.disabled(!1)},v=function(){var a=this;q.push(a);p.fold(function(){u(a)},function(b){x(a)})},w=function(){var a=this;r.push(a);p.fold(function(){u(a)},function(b){x(a)})},B=function(){p.fold(function(){e.each(q,u);e.each(r,u);e.each(t,u);e.each(s,u)},function(a){e.each(q,x);e.each(r,x);e.each(t,function(b){b.disabled(a.mergable().isNone())});
e.each(s,function(b){b.disabled(a.unmergable().isNone())})})};k.on("init",function(){k.on("nodechange",function(a){p=f.from(k.dom.getParent(k.selection.getStart(),"th,td")).bind(function(a){var d=b.fromDom(a);return c.table(d).map(function(a){return g.forMenu(l,a,d)})});B()})});var A=function(){for(var a="",a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',b=0;10>b;b++){for(var a=a+"<tr>",c=0;10>c;c++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+c)+'" href="#" data-mce-x="'+
c+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+='</table><div class="mce-text-center" role="presentation">1 x 1</div>'},y=function(a,b,c,d){var e=d.getEl().getElementsByTagName("table")[0],f,g,h,l,k=d.isRtl()||"tl-tr"==d.parent().rel;e.nextSibling.innerHTML=b+1+" x "+(c+1);k&&(b=9-b);for(f=0;10>f;f++)for(d=0;10>d;d++)h=e.rows[f].childNodes[d].firstChild,l=(k?d>=b:d<=b)&&f<=c,a.dom.toggleClass(h,"mce-active",l),l&&(g=h);return g.parentNode},A=!1===k.settings.table_grid?{text:"Table",icon:"table",
context:"table",onclick:d.curry(h.open,k)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),h.open(k))},onshow:function(){y(k,0,0,this.menu.items()[0])},onhide:function(){var a=this.menu.items()[0].getEl().getElementsByTagName("a");k.dom.removeClass(a,"mce-active");k.dom.addClass(a[0],"mce-active")},menu:[{type:"container",html:A(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(a){var b=
a.target,c;if("A"==b.tagName.toUpperCase()){c=parseInt(b.getAttribute("data-mce-x"),10);b=parseInt(b.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)c=9-c;if(c!==this.lastX||b!==this.lastY)y(k,c,b,a.control),this.lastX=c,this.lastY=b}},onclick:function(b){var c=this;"A"==b.target.tagName.toUpperCase()&&(b.preventDefault(),b.stopPropagation(),c.parent().cancel(),k.undoManager.transact(function(){a.insert(k,c.lastX+1,c.lastY+1)}),k.addVisual())}}]},D={text:"Table properties",
context:"table",onPostRender:v,onclick:d.curry(h.open,k,!0)},v={text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"},C={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:w},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:w},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:w},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:w},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),
onPostRender:w},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:w},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:w},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:w}]},F={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:w},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:w},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:w}]},
w={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:w},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var a=this;t.push(a);p.fold(function(){u(a)},function(b){a.disabled(b.mergable().isNone())})}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var a=this;s.push(a);p.fold(function(){u(a)},function(b){a.disabled(b.unmergable().isNone())})}}]};k.addMenuItem("inserttable",A);
k.addMenuItem("tableprops",D);k.addMenuItem("deletetable",v);k.addMenuItem("row",C);k.addMenuItem("column",F);k.addMenuItem("cell",w)}}});m("tinymce.plugins.table.Plugin","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.snooker.api.ResizeWire ephox.snooker.api.TableDirection ephox.snooker.api.TableResize ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter tinymce.core.PluginManager tinymce.core.util.Tools tinymce.plugins.table.actions.Clipboard tinymce.plugins.table.actions.InsertTable tinymce.plugins.table.actions.TableActions tinymce.plugins.table.actions.TableCommands tinymce.plugins.table.actions.TableWire tinymce.plugins.table.queries.Direction tinymce.plugins.table.queries.TabContext tinymce.plugins.table.selection.CellSelection tinymce.plugins.table.selection.Ephemera tinymce.plugins.table.selection.Selections tinymce.plugins.table.ui.Buttons tinymce.plugins.table.ui.MenuItems".split(" "),
function(d,e,f,c,b,a,g,h,k,l,m,p,q,r,t,s,u,x,v,w,B,A){k.add("table",function(k){var D=function(){return G.getOr(f.only(a.fromDom(k.getBody())))},C=x(k,function(){return E}),F=q(k,D),z=w(k);r.registerCommands(k,F,C,z);m.registerEvents(k,z,F,C);A.addMenuItems(k,z);B.addButtons(k);B.addToolbars(k);var E=e.none(),G=e.none(),I=e.none();k.on("init",function(){var a=c(s.directionAt),f=t.get(k);G=e.some(f);!k.settings.object_resizing||!1===k.settings.table_resize_bars||!0!==k.settings.object_resizing&&"table"!==
k.settings.object_resizing||(a=b(f,a),a.on(),a.events.startDrag.bind(function(a){I=e.some(k.selection.getRng())}),a.events.afterResize.bind(function(a){a=a.table();a=h.descendants(a,"td[data-mce-style],th[data-mce-style]");d.each(a,function(a){g.remove(a,"data-mce-style")});I.each(function(a){k.selection.setRng(a);k.focus()});k.undoManager.add()}),E=e.some(a))});k.on("ObjectResized",function(a){a=a.target;if("TABLE"===a.nodeName){var b=[];l.each(a.rows,function(a){l.each(a.cells,function(a){var c=
k.dom.getStyle(a,"width",!0);b.push({cell:a,width:c})})});l.each(b,function(a){k.dom.setStyle(a.cell,"width",a.width);k.dom.setAttrib(a.cell,"width",null)})}});k.on("PreInit",function(){k.serializer.addTempAttr(v.firstSelected());k.serializer.addTempAttr(v.lastSelected())});if(!1!==k.settings.table_tab_navigation)k.on("keydown",function(a){u.handle(a,k,F,D)});k.on("remove",function(){E.each(function(a){a.destroy()});G.each(function(a){t.remove(k,a)});C.destroy()});this.insertTable=function(a,b){p.insert(k,
a,b)};this.setClipboardRows=r.setClipboardRows;this.getClipboardRows=r.getClipboardRows});return function(){}});N("tinymce.plugins.table.Plugin")()})();

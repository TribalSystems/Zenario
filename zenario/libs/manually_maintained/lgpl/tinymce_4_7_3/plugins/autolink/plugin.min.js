'use strict';(function(){var r={},p=function(f,g,h){if("string"!==typeof f)throw"module id must be a string";if(void 0===g)throw"no dependencies for "+f;if(void 0===h)throw"no definition function for "+f;r[f]={deps:g,defn:h,instance:void 0}},u=function(f){var g=r[f];if(void 0===g)throw"module ["+f+"] was undefined";if(void 0===g.instance){for(var h=r[f],k=h.deps,l=h.defn,m=k.length,q=Array(m),a=0;a<m;++a)q[a]=u(k[a]);k=l.apply(null,q);if(void 0===k)throw"module ["+f+"] returned undefined";h.instance=
k}return g.instance};(function(f,g){p(f,[],function(){return g})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);p("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(f){return f("tinymce.Env")});p("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(f){return f("tinymce.PluginManager")});p("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(f){return f.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},
getDefaultLinkTarget:function(f){return f.getParam("default_link_target","")}}});p("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(f,g,h){var k=function(a,b){0>b&&(b=0);3===a.nodeType&&(a=a.data.length,b>a&&(b=a));return b},l=function(a,b,c){1!==b.nodeType||b.hasChildNodes()?a.setStart(b,k(b,c)):a.setStartBefore(b)},m=function(a,b,c){1!==b.nodeType||b.hasChildNodes()?a.setEnd(b,k(b,c)):a.setEndAfter(b)},q=function(a,
b,c){var t=h.getAutoLinkPattern(a);var v=h.getDefaultLinkTarget(a);if("A"!==a.selection.getNode().tagName){var d=a.selection.getRng(!0).cloneRange();if(5>d.startOffset){var e=d.endContainer.previousSibling;if(!e){if(!d.endContainer.firstChild||!d.endContainer.firstChild.nextSibling)return;e=d.endContainer.firstChild.nextSibling}b=e.length;l(d,e,b);m(d,e,b);if(5>d.endOffset)return;b=d.endOffset}else{e=d.endContainer;if(3!==e.nodeType&&e.firstChild){for(;3!==e.nodeType&&e.firstChild;)e=e.firstChild;
3===e.nodeType&&(l(d,e,0),m(d,e,e.nodeValue.length))}b=1===d.endOffset?2:d.endOffset-1-b}var w=b;do{l(d,e,2<=b?b-2:0);m(d,e,1<=b?b-1:0);--b;var n=d.toString()}while(" "!==n&&""!==n&&160!==n.charCodeAt(0)&&0<=b-2&&n!==c);n=d.toString();n===c||" "===n||160===n.charCodeAt(0)?l(d,e,b):0===d.startOffset?l(d,e,0):l(d,e,b);m(d,e,w);c=d.toString();"."===c.charAt(c.length-1)&&m(d,e,w-1);c=d.toString().trim();if(c=c.match(t))"www."===c[1]?c[1]="http://www.":/@$/.test(c[1])&&!/^mailto:/.test(c[1])&&(c[1]="mailto:"+
c[1]),t=a.selection.getBookmark(),a.selection.setRng(d),a.execCommand("createlink",!1,c[1]+c[2]),v&&a.dom.setAttrib(a.selection.getNode(),"target",v),a.selection.moveToBookmark(t),a.nodeChanged()}};return{setup:function(a){var b;a.on("keydown",function(c){13===c.keyCode&&q(a,-1,"",!1)});if(f.ie)a.on("focus",function(){if(!b){b=!0;try{a.execCommand("AutoUrlDetect",!1,!0)}catch(c){}}});else a.on("keypress",function(c){41===c.keyCode&&q(a,-1,"(",!0)}),a.on("keyup",function(c){32===c.keyCode&&q(a,0,"",
!0)})}}});p("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(f,g,h){g.add("autolink",function(k){h.setup(k)});return function(){}});u("tinymce.plugins.autolink.Plugin")()})();

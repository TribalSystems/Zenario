(function(){var m={},p=function(d){var h=m[d];if(void 0===h)throw"module ["+d+"] was undefined";if(void 0===h.instance){for(var l=m[d],k=l.deps,q=l.defn,n=k.length,g=Array(n),b=0;b<n;++b)g[b]=p(k[b]);k=q.apply(null,g);if(void 0===k)throw"module ["+d+"] returned undefined";l.instance=k}return h.instance},g=function(d,h,l){if("string"!==typeof d)throw"module id must be a string";if(void 0===h)throw"no dependencies for "+d;if(void 0===l)throw"no definition function for "+d;m[d]={deps:h,defn:l,instance:void 0}};
(function(d,h){g(d,[],function(){return h})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);g("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.Env")});g("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.PluginManager")});g("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(d){return d.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},
getDefaultLinkTarget:function(d){return d.getParam("default_link_target","")}}});g("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(d,h,l){var k=function(b,a){0>a&&(a=0);if(3===b.nodeType){var e=b.data.length;a>e&&(a=e)}return a},g=function(b,a,e){1!==a.nodeType||a.hasChildNodes()?b.setStart(a,k(a,e)):b.setStartBefore(a)},n=function(b,a,e){1!==a.nodeType||a.hasChildNodes()?b.setEnd(a,k(a,e)):b.setEndAfter(a)},m=
function(b,a,e){var c,d,f,h,k;h=l.getAutoLinkPattern(b);var m=l.getDefaultLinkTarget(b);if("A"!==b.selection.getNode().tagName){c=b.selection.getRng(!0).cloneRange();if(5>c.startOffset){f=c.endContainer.previousSibling;if(!f){if(!c.endContainer.firstChild||!c.endContainer.firstChild.nextSibling)return;f=c.endContainer.firstChild.nextSibling}a=f.length;g(c,f,a);n(c,f,a);if(5>c.endOffset)return;a=c.endOffset}else{f=c.endContainer;if(3!==f.nodeType&&f.firstChild){for(;3!==f.nodeType&&f.firstChild;)f=
f.firstChild;3===f.nodeType&&(g(c,f,0),n(c,f,f.nodeValue.length))}a=1===c.endOffset?2:c.endOffset-1-a}d=a;do g(c,f,2<=a?a-2:0),n(c,f,1<=a?a-1:0),a-=1,k=c.toString();while(" "!==k&&""!==k&&160!==k.charCodeAt(0)&&0<=a-2&&k!==e);c.toString()===e||" "===c.toString()||160===c.toString().charCodeAt(0)?g(c,f,a):0===c.startOffset?g(c,f,0):g(c,f,a);n(c,f,d);e=c.toString();"."===e.charAt(e.length-1)&&n(c,f,d-1);e=c.toString().trim();if(e=e.match(h))"www."===e[1]?e[1]="http://www.":/@$/.test(e[1])&&!/^mailto:/.test(e[1])&&
(e[1]="mailto:"+e[1]),h=b.selection.getBookmark(),b.selection.setRng(c),b.execCommand("createlink",!1,e[1]+e[2]),m&&b.dom.setAttrib(b.selection.getNode(),"target",m),b.selection.moveToBookmark(h),b.nodeChanged()}};return{setup:function(b){var a;b.on("keydown",function(a){13===a.keyCode&&m(b,-1,"",!1)});if(d.ie)b.on("focus",function(){if(!a){a=!0;try{b.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}});else b.on("keypress",function(a){41===a.keyCode&&m(b,-1,"(",!0)}),b.on("keyup",function(a){32===a.keyCode&&
m(b,0,"",!0)})}}});g("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(d,g,l){g.add("autolink",function(d){l.setup(d)});return function(){}});p("tinymce.plugins.autolink.Plugin")()})();

(function(){var A={},C=function(a){var f=A[a];if(void 0===f)throw"module ["+a+"] was undefined";if(void 0===f.instance){for(var h=A[a],y=h.deps,k=h.defn,p=y.length,d=Array(p),l=0;l<p;++l)d[l]=C(y[l]);y=k.apply(null,d);if(void 0===y)throw"module ["+a+"] returned undefined";h.instance=y}return f.instance},k=function(a,f,h){if("string"!==typeof a)throw"module id must be a string";if(void 0===f)throw"no dependencies for "+a;if(void 0===h)throw"no definition function for "+a;A[a]={deps:f,defn:h,instance:void 0}},
B=function(a,f){k(a,[],function(){return f})};k("ephox.katamari.api.Cell",[],function(){var a=function(f){var h=f;return{get:function(){return h},set:function(a){h=a},clone:function(){return a(h)}}};return a});B("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);k("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});B("global!window",window);k("tinymce.plugins.spellchecker.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],
function(a,f){return{hasProPlugin:function(h){return/(^|[ ,])tinymcespellchecker([, ]|$)/.test(h.settings.plugins)&&f.get("tinymcespellchecker")?("undefined"!==typeof a.console&&a.console.log&&a.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0):!1}}});k("tinymce.plugins.spellchecker.api.Settings",[],function(){return{getLanguages:function(a){return a.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},
getLanguage:function(a){var f=a.getParam("language","en");return a.getParam("spellchecker_language",f)},getRpcUrl:function(a){return a.getParam("spellchecker_rpc_url")},getSpellcheckerCallback:function(a){return a.getParam("spellchecker_callback")},getSpellcheckerWordcharPattern:function(a){return a.getParam("spellchecker_wordchar_pattern",/[^\s!"#$%&()*+,-./:;<=>?@[\]^_{|}`\u00a7\u00a9\u00ab\u00ae\u00b1\u00b6\u00b7\u00b8\u00bb\u00bc\u00bd\u00be\u00bf\u00d7\u00f7\u00a4\u201d\u201c\u201e\u00a0\u2002\u2003\u2009]+/g)}}});
k("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});k("tinymce.core.util.URI",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.URI")});k("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.XHR")});k("tinymce.plugins.spellchecker.api.Events",[],function(){return{fireSpellcheckStart:function(a){return a.fire("SpellcheckStart")},fireSpellcheckEnd:function(a){return a.fire("SpellcheckEnd")}}});
k("tinymce.plugins.spellchecker.core.DomTextMatcher",[],function(){function a(a){return a&&1===a.nodeType&&"false"===a.contentEditable}return function(f,h){function k(b,a){if(!b[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:b.index,end:b.index+b[0].length,text:b[0],data:a}}function n(b){var r;if(3===b.nodeType)return b.data;if(z[b.nodeName]&&!c[b.nodeName])return"";if(a(b))return"\n";r="";if(c[b.nodeName]||w[b.nodeName])r+="\n";if(b=b.firstChild){do r+=n(b);while(b=
b.nextSibling)}return r}function p(b,r,D){var q,x,g,e,h=[],f=0,d=b,l,m=0;r=r.slice(0);r.sort(function(b,a){return b.start-a.start});l=r.shift();a:for(;;){(c[d.nodeName]||w[d.nodeName]||a(d))&&f++;3===d.nodeType&&(!x&&d.length+f>=l.end?(x=d,e=l.end-f):q&&h.push(d),!q&&d.length+f>l.start&&(q=d,g=l.start-f),f+=d.length);if(q&&x){if(d=D({startNode:q,startNodeIndex:g,endNode:x,endNodeIndex:e,innerNodes:h,match:l.text,matchIndex:m}),f-=x.length-e,x=q=null,h=[],l=r.shift(),m++,!l)break}else if((!z[d.nodeName]||
c[d.nodeName])&&d.firstChild){if(!a(d)){d=d.firstChild;continue}}else if(d.nextSibling){d=d.nextSibling;continue}for(;;)if(d.nextSibling){d=d.nextSibling;break}else if(d.parentNode!==b)d=d.parentNode;else break a}}function d(b){function a(r,d){var c=e[d];c.stencil||(c.stencil=b(c));c=c.stencil.cloneNode(!1);c.setAttribute("data-mce-index",d);r&&c.appendChild(q.doc.createTextNode(r));return c}return function(b){var d,v,c,e=b.startNode,g=b.endNode,f=b.matchIndex;v=q.doc;if(e===g)return c=e.parentNode,
0<b.startNodeIndex&&(d=v.createTextNode(e.data.substring(0,b.startNodeIndex)),c.insertBefore(d,e)),d=a(b.match,f),c.insertBefore(d,e),b.endNodeIndex<e.length&&(v=v.createTextNode(e.data.substring(b.endNodeIndex)),c.insertBefore(v,e)),e.parentNode.removeChild(e),d;d=v.createTextNode(e.data.substring(0,b.startNodeIndex));v=v.createTextNode(g.data.substring(b.endNodeIndex));var h=a(e.data.substring(b.startNodeIndex),f);c=[];for(var l=0,z=b.innerNodes.length;l<z;++l){var w=b.innerNodes[l],m=a(w.data,
f);w.parentNode.replaceChild(m,w);c.push(m)}b=a(g.data.substring(0,b.endNodeIndex),f);c=e.parentNode;c.insertBefore(d,e);c.insertBefore(h,e);c.removeChild(e);c=g.parentNode;c.insertBefore(b,g);c.insertBefore(v,g);c.removeChild(g);return b}}function l(b){var a=f.getElementsByTagName("*"),c=[];b="number"===typeof b?""+b:null;for(var d=0;d<a.length;d++){var e=a[d],q=e.getAttribute("data-mce-index");null!==q&&q.length&&-1!==e.className.indexOf("mce-spellchecker-word")&&(q!==b&&null!==b||c.push(e))}return c}
function g(b){for(var a=e.length;a--;)if(e[a]===b)return a;return-1}function u(b){for(var a=0,c=e.length;a<c&&!1!==b(e[a],a);a++);return this}function m(b){var a=l(b?g(b):null);for(b=a.length;b--;){var c=a[b];c.parentNode.insertBefore(c.firstChild,c);c.parentNode.removeChild(c)}return this}function t(b){b=l(g(b));var a=h.dom.createRng();a.setStartBefore(b[0]);a.setEndAfter(b[b.length-1]);return a}var s,e=[],b,q=h.dom,c,z,w;c=h.schema.getBlockElements();z=h.schema.getWhiteSpaceElements();w=h.schema.getShortEndedElements();
b=n(f);return{text:b,matches:e,each:u,filter:function(b){var a=[];u(function(c,d){b(c,d)&&a.push(c)});e=a;return this},reset:function(){e.splice(0,e.length);m();return this},matchFromElement:function(b){return e[b.getAttribute("data-mce-index")]},elementFromMatch:function(b){return l(g(b))[0]},find:function(a,c){if(b&&a.global)for(;s=a.exec(b);)e.push(k(s,c));return this},add:function(a,c,d){e.push({start:a,end:a+c,text:b.substr(a,c),data:d});return this},wrap:function(b){e.length&&p(f,e,d(b));return this},
unwrap:m,replace:function(b,a){var c=t(b);c.deleteContents();0<a.length&&c.insertNode(h.dom.doc.createTextNode(a));return c},rangeFromMatch:t,indexOf:g}}});k("tinymce.plugins.spellchecker.core.Actions","tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.XHR tinymce.plugins.spellchecker.api.Events tinymce.plugins.spellchecker.api.Settings tinymce.plugins.spellchecker.core.DomTextMatcher".split(" "),function(a,f,h,k,n,p){var d=function(b,a){if(!a.get()){var c=new p(b.getBody(),b);a.set(c)}return a.get()},
l=function(b){for(var a in b)return!1;return!0},g=function(b,d,c){return function(e,g,l,r){var m={method:e,lang:c.get()},k="";m["addToDictionary"===e?"word":"text"]=g;a.each(m,function(b,a){k&&(k+="&");k+=a+"="+encodeURIComponent(b)});h.send({url:(new f(d)).toAbsolute(n.getRpcUrl(b)),type:"post",content_type:"application/x-www-form-urlencoded",data:k,success:function(a){(a=JSON.parse(a))?a.error?r(a.error):l(a):(a=b.translate("Server response wasn't proper JSON."),r(a))},error:function(){var a=b.translate("The spelling service was not found: (")+
n.getRpcUrl(b)+b.translate(")");r(a)}})}},u=function(b,a,c,d,e,f,l){var h=n.getSpellcheckerCallback(b);(h?h:g(b,a,c)).call(b.plugins.spellchecker,d,e,f,l)},m=function(b,a,c){b.dom.select("span.mce-spellchecker-word").length||t(b,a,c)},t=function(b,a,c){d(b,c).reset();c.set(null);if(a.get())return a.set(!1),k.fireSpellcheckEnd(b),!0},s=function(b){b=b.getAttribute("data-mce-index");return"number"===typeof b?""+b:b},e=function(b,a,c,e,g){var f,h;g.words?(h=!!g.dictionary,f=g.words):f=g;b.setProgressState(!1);
l(f)?(c=b.translate("No misspellings found."),b.notificationManager.open({text:c,type:"info"}),a.set(!1)):(e.set({suggestions:f,hasDictionarySupport:h}),d(b,c).find(n.getSpellcheckerWordcharPattern(b)).filter(function(b){return!!f[b.text]}).wrap(function(a){return b.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":a.text})}),a.set(!0),k.fireSpellcheckStart(b))};return{spellcheck:function(b,a,c,g,f,h){t(b,c,g)||(b.setProgressState(!0),u(b,a,h,"spellcheck",d(b,g).text,
function(a){e(b,c,g,f,a)},function(a){b.notificationManager.open({text:a,type:"error"});b.setProgressState(!1);t(b,c,g)}),b.focus())},checkIfFinished:m,addToDictionary:function(b,a,c,d,e,g){b.setProgressState(!0);u(b,a,"addToDictionary",e,function(){b.setProgressState(!1);b.dom.remove(g,!0);m(b,c,d)},function(a){b.notificationManager.open({text:a,type:"error"});b.setProgressState(!1)})},ignoreWord:function(b,d,c,e,g,f){b.selection.collapse();f?a.each(b.dom.select("span.mce-spellchecker-word"),function(a){a.getAttribute("data-mce-word")===
e&&b.dom.remove(a,!0)}):b.dom.remove(g,!0);m(b,d,c)},findSpansByIndex:function(b,d){var c,e=[];c=a.toArray(b.getBody().getElementsByTagName("span"));if(c.length)for(var g=0;g<c.length;g++){var f=s(c[g]);null!==f&&f.length&&f===d.toString()&&e.push(c[g])}return e},getElmIndex:s,markErrors:e}});k("tinymce.plugins.spellchecker.api.Api",["tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.core.Actions"],function(a,f){return{get:function(h,k,n,p,d){return{getTextMatcher:function(){return p.get()},
getWordCharPattern:function(){return a.getSpellcheckerWordcharPattern(h)},markErrors:function(a){f.markErrors(h,k,p,n,a)},getLanguage:function(){return a.getLanguage(h)}}}}});k("tinymce.plugins.spellchecker.api.Commands",["tinymce.plugins.spellchecker.core.Actions"],function(a){return{register:function(f,h,k,n,p,d){f.addCommand("mceSpellCheck",function(){a.spellcheck(f,h,k,n,p,d)})}}});k("tinymce.plugins.spellchecker.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.spellchecker.api.Settings",
"tinymce.plugins.spellchecker.core.Actions"],function(a,f,h){var k=function(d,f){var g=[];a.each(f,function(a){g.push({selectable:!0,text:a.name,data:a.value})});return g},n=function(a){return function(h){var g=f.getLanguage(a);h.control.items().each(function(a){a.active(a.settings.data===g)})}},p=function(d){return a.map(f.getLanguages(d).split(","),function(a){a=a.split("=");return{name:a[0],value:a[1]}})};return{register:function(a,f,g,u,m,t){var s=k("Language",p(a)),e=function(){h.spellcheck(a,
f,g,u,t,m)},b={tooltip:"Spellcheck",onclick:e,onPostRender:function(b){var c=b.control;a.on("SpellcheckStart SpellcheckEnd",function(){c.active(g.get())})}};1<s.length&&(b.type="splitbutton",b.menu=s,b.onshow=n(a),b.onselect=function(a){m.set(a.control.settings.data)});a.addButton("spellchecker",b);a.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:e,selectable:!0,onPostRender:function(){var b=this;b.active(g.get());a.on("SpellcheckStart SpellcheckEnd",function(){b.active(g.get())})}})}}});
B("global!document",document);k("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.DOMUtils")});k("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.ui.Factory")});k("tinymce.plugins.spellchecker.ui.SuggestionsMenu","global!document tinymce.core.dom.DOMUtils tinymce.core.ui.Factory tinymce.core.util.Tools tinymce.plugins.spellchecker.api.Settings tinymce.plugins.spellchecker.core.Actions".split(" "),function(a,
f,h,k,n,p){var d,l=function(g,l,m,t,s,e,b){var q=[],c=m.get().suggestions[e];k.each(c,function(a){q.push({text:a,onclick:function(){g.insertContent(g.dom.encode(a));g.dom.remove(b);p.checkIfFinished(g,t,s)}})});q.push({text:"-"});m.get().hasDictionarySupport&&q.push({text:"Add to Dictionary",onclick:function(){p.addToDictionary(g,l,t,s,e,b)}});q.push.apply(q,[{text:"Ignore",onclick:function(){p.ignoreWord(g,t,s,e,b)}},{text:"Ignore all",onclick:function(){p.ignoreWord(g,t,s,e,b,!0)}}]);d=h.create("menu",
{items:q,context:"contextmenu",onautohide:function(a){-1!==a.target.className.indexOf("spellchecker")&&a.preventDefault()},onhide:function(){d.remove();d=null}});d.renderTo(a.body);m=f.DOM.getPos(g.getContentAreaContainer());var c=g.dom.getPos(b[0]),n=g.dom.getRoot();"BODY"===n.nodeName?(c.x-=n.ownerDocument.documentElement.scrollLeft||n.scrollLeft,c.y-=n.ownerDocument.documentElement.scrollTop||n.scrollTop):(c.x-=n.scrollLeft,c.y-=n.scrollTop);m.x+=c.x;m.y+=c.y;d.moveTo(m.x,m.y+b[0].offsetHeight)};
return{setup:function(a,d,f,h,k){a.on("click",function(e){var b=e.target;if("mce-spellchecker-word"===b.className&&(e.preventDefault(),e=p.findSpansByIndex(a,p.getElmIndex(b)),0<e.length)){var n=a.dom.createRng();n.setStartBefore(e[0]);n.setEndAfter(e[e.length-1]);a.selection.setRng(n);l(a,d,f,h,k,b.getAttribute("data-mce-word"),e)}})}}});k("tinymce.plugins.spellchecker.Plugin","ephox.katamari.api.Cell tinymce.core.PluginManager tinymce.plugins.spellchecker.alien.DetectProPlugin tinymce.plugins.spellchecker.api.Api tinymce.plugins.spellchecker.api.Commands tinymce.plugins.spellchecker.api.Settings tinymce.plugins.spellchecker.ui.Buttons tinymce.plugins.spellchecker.ui.SuggestionsMenu".split(" "),
function(a,f,h,k,n,p,d,l){f.add("spellchecker",function(f,u){if(!1===h.hasProPlugin(f)){var m=a(!1),t=a(p.getLanguage(f)),s=a(null),e=a({});d.register(f,u,m,s,t,e);l.setup(f,u,e,m,s);n.register(f,u,m,s,e,t);return k.get(f,m,e,s,u)}});return function(){}});C("tinymce.plugins.spellchecker.Plugin")()})();

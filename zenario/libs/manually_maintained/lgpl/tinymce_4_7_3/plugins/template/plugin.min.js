(function(){var t={},p=function(c,b,a){if("string"!==typeof c)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+c;if(void 0===a)throw"no definition function for "+c;t[c]={deps:b,defn:a,instance:void 0}},v=function(c){var b=t[c];if(void 0===b)throw"module ["+c+"] was undefined";if(void 0===b.instance){for(var a=t[c],d=a.deps,m=a.defn,k=d.length,h=Array(k),e=0;e<k;++e)h[e]=v(d[e]);d=m.apply(null,h);if(void 0===d)throw"module ["+c+"] returned undefined";a.instance=d}return b.instance},
u=function(c,b){p(c,[],function(){return b})};u("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);p("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.PluginManager")});u("global!Array",Array);u("global!Error",Error);p("ephox.katamari.api.Fun",["global!Array","global!Error"],function(c,b){var a=function(k){return function(){return k}},d=a(!1),m=a(!0);return{noop:function(){},compose:function(k,h){return function(){return k(h.apply(null,arguments))}},
constant:a,identity:function(k){return k},tripleEquals:function(k,h){return k===h},curry:function(k){for(var h=new c(arguments.length-1),e=1;e<arguments.length;e++)h[e-1]=arguments[e];return function(){for(var f=new c(arguments.length),g=0;g<f.length;g++)f[g]=arguments[g];f=h.concat(f);return k.apply(null,f)}},not:function(k){return function(){return!k.apply(null,arguments)}},die:function(k){return function(){throw new b(k);}},apply:function(k){return k()},call:function(k){k()},never:d,always:m}});
p("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.util.Tools")});p("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.util.XHR")});p("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.dom.DOMUtils")});p("tinymce.plugins.template.api.Settings",["tinymce.core.dom.DOMUtils"],function(c){return{getCreationDateClasses:function(b){return b.getParam("template_cdate_classes",
"cdate")},getModificationDateClasses:function(b){return b.getParam("template_mdate_classes","mdate")},getSelectedContentClasses:function(b){return b.getParam("template_selected_content_classes","selcontent")},getPreviewReplaceValues:function(b){return b.getParam("template_preview_replace_values")},getTemplateReplaceValues:function(b){return b.getParam("template_replace_values")},getTemplates:function(b){return b.templates},getCdateFormat:function(b){return b.getParam("template_cdate_format",b.getLang("template.cdate_format"))},
getMdateFormat:function(b){return b.getParam("template_mdate_format",b.getLang("template.mdate_format"))},getDialogWidth:function(b){return b.getParam("template_popup_width",600)},getDialogHeight:function(b){return Math.min(c.DOM.getViewPort().h,b.getParam("template_popup_height",500))}}});p("tinymce.plugins.template.core.DateTimeHelper",[],function(){var c=function(b,a){b=""+b;if(b.length<a)for(var d=0;d<a-b.length;d++)b="0"+b;return b};return{getDateTime:function(b,a,d){d=d||new Date;a=a.replace("%D",
"%m/%d/%Y");a=a.replace("%r","%I:%M:%S %p");a=a.replace("%Y",""+d.getFullYear());a=a.replace("%y",""+d.getYear());a=a.replace("%m",c(d.getMonth()+1,2));a=a.replace("%d",c(d.getDate(),2));a=a.replace("%H",""+c(d.getHours(),2));a=a.replace("%M",""+c(d.getMinutes(),2));a=a.replace("%S",""+c(d.getSeconds(),2));a=a.replace("%I",""+((d.getHours()+11)%12+1));a=a.replace("%p",12>d.getHours()?"AM":"PM");a=a.replace("%B",""+b.translate("January February March April May June July August September October November December".split(" ")[d.getMonth()]));
a=a.replace("%b",""+b.translate("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[d.getMonth()]));a=a.replace("%A",""+b.translate("Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ")[d.getDay()]));a=a.replace("%a",""+b.translate("Sun Mon Tue Wed Thu Fri Sat Sun".split(" ")[d.getDay()]));return a=a.replace("%%","%")}}});p("tinymce.plugins.template.core.Templates",["tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.DateTimeHelper"],
function(c,b,a,d){var m=function(e,f,g){c.each(g,function(l,n){"function"===typeof l&&(l=l(n));f=f.replace(new RegExp("\\{\\$"+n+"\\}","g"),l)});return f},k=function(e,f){var g=e.dom,l=a.getTemplateReplaceValues(e);c.each(g.select("*",f),function(n){c.each(l,function(q,r){if(g.hasClass(n,r)&&"function"===typeof l[r])l[r](n)})})},h=function(e,f){return(new RegExp("\\b"+f+"\\b","g")).test(e.className)};return{createTemplateList:function(e,f){return function(){var g=a.getTemplates(e);"function"===typeof g?
g(f):"string"===typeof g?b.send({url:g,success:function(l){f(JSON.parse(l))}}):f(g)}},replaceTemplateValues:m,replaceVals:k,insertTemplate:function(e,f,g){var l;f=e.dom;var n=e.selection.getContent();g=m(e,g,a.getTemplateReplaceValues(e));g=f.create("div",null,g);(l=f.select(".mceTmpl",g))&&0<l.length&&(g=f.create("div",null),g.appendChild(l[0].cloneNode(!0)));c.each(f.select("*",g),function(q){h(q,a.getCreationDateClasses(e).replace(/\s+/g,"|"))&&(q.innerHTML=d.getDateTime(e,a.getCdateFormat(e)));
h(q,a.getModificationDateClasses(e).replace(/\s+/g,"|"))&&(q.innerHTML=d.getDateTime(e,a.getMdateFormat(e)));h(q,a.getSelectedContentClasses(e).replace(/\s+/g,"|"))&&(q.innerHTML=n)});k(e,g);e.execCommand("mceInsertContent",!1,g.innerHTML);e.addVisual()}}});p("tinymce.plugins.template.api.Commands",["ephox.katamari.api.Fun","tinymce.plugins.template.core.Templates"],function(c,b){return{register:function(a){a.addCommand("mceInsertTemplate",c.curry(b.insertTemplate,a))}}});p("tinymce.plugins.template.core.FilterContent",
["tinymce.core.util.Tools","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.DateTimeHelper","tinymce.plugins.template.core.Templates"],function(c,b,a,d){return{setup:function(m){m.on("PreProcess",function(k){var h=m.dom,e=b.getMdateFormat(m);c.each(h.select("div",k.node),function(f){h.hasClass(f,"mceTmpl")&&(c.each(h.select("*",f),function(g){h.hasClass(g,m.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(g.innerHTML=a.getDateTime(m,e))}),d.replaceVals(m,f))})})}}});
p("tinymce.plugins.template.ui.Dialog",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.Templates"],function(c,b,a,d,m){var k=function(h,e,f){if(-1===f.indexOf("<html>")){var g="";b.each(h.contentCSS,function(n){g+='<link type="text/css" rel="stylesheet" href="'+h.documentBaseURI.toAbsolute(n)+'">'});var l=h.settings.body_class||"";-1!==l.indexOf("=")&&(l=h.getParam("body_class","","hash"),l=l[h.id]||
"");f="<!DOCTYPE html><html><head>"+g+'</head><body class="'+l+'">'+f+"</body></html>"}f=m.replaceTemplateValues(h,f,d.getPreviewReplaceValues(h));e=e.find("iframe")[0].getEl().contentWindow.document;e.open();e.write(f);e.close()};return{open:function(h,e){var f=[],g;if(e&&0!==e.length){b.each(e,function(n){f.push({selected:!f.length,text:n.title,value:{url:n.url,content:n.content,description:n.description}})});var l=h.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",
padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:f,onselect:function(n){var q=n.control.value();q.url?a.send({url:q.url,success:function(r){g=r;k(h,l,g)}}):(g=q.content,k(h,l,g));l.find("#description")[0].text(n.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:"\u00a0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){m.insertTemplate(h,
!1,g)},minWidth:d.getDialogWidth(h),minHeight:d.getDialogHeight(h)});l.find("listbox")[0].fire("select")}else e=h.translate("No templates defined."),h.notificationManager.open({text:e,type:"info"})}}});p("tinymce.plugins.template.ui.Buttons",["tinymce.plugins.template.core.Templates","tinymce.plugins.template.ui.Dialog"],function(c,b){var a=function(d){return function(m){b.open(d,m)}};return{register:function(d){d.addButton("template",{title:"Insert template",onclick:c.createTemplateList(d.settings,
a(d))});d.addMenuItem("template",{text:"Template",onclick:c.createTemplateList(d.settings,a(d)),icon:"template",context:"insert"})}}});p("tinymce.plugins.template.Plugin",["tinymce.core.PluginManager","tinymce.plugins.template.api.Commands","tinymce.plugins.template.core.FilterContent","tinymce.plugins.template.ui.Buttons"],function(c,b,a,d){c.add("template",function(m){d.register(m);b.register(m);a.setup(m)});return function(){}});v("tinymce.plugins.template.Plugin")()})();

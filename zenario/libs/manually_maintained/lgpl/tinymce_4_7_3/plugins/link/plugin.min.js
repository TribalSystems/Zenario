(function(){var t={},v=function(a){var e=t[a];if(void 0===e)throw"module ["+a+"] was undefined";if(void 0===e.instance){for(var d=t[a],g=d.deps,m=d.defn,h=g.length,f=Array(h),b=0;b<h;++b)f[b]=v(g[b]);g=m.apply(null,f);if(void 0===g)throw"module ["+a+"] returned undefined";d.instance=g}return e.instance},f=function(a,e,d){if("string"!==typeof a)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+a;if(void 0===d)throw"no definition function for "+a;t[a]={deps:e,defn:d,instance:void 0}},
q=function(a,e){f(a,[],function(){return e})};q("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);f("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});f("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.VK")});f("tinymce.plugins.link.api.Settings",[],function(){return{assumeExternalTargets:function(a){return"boolean"===typeof a.link_assume_external_targets?a.link_assume_external_targets:
!1},hasContextToolbar:function(a){return"boolean"===typeof a.link_context_toolbar?a.link_context_toolbar:!1},getLinkList:function(a){return a.link_list},hasDefaultLinkTarget:function(a){return"string"===typeof a.default_link_target},getDefaultLinkTarget:function(a){return a.default_link_target},getTargetList:function(a){return a.target_list},setTargetList:function(a,e){a.settings.target_list=e},shouldShowTargetList:function(a){return!1!==a.target_list},getRelList:function(a){return a.rel_list},hasRelList:function(a){return void 0!==
a.rel_list},getLinkClassList:function(a){return a.link_class_list},hasLinkClassList:function(a){return void 0!==a.link_class_list},shouldShowLinkTitle:function(a){return!1!==a.link_title},allowUnsafeLinkTarget:function(a){return"boolean"===typeof a.allow_unsafe_link_target?a.allow_unsafe_link_target:!1}}});q("global!document",document);q("global!window",window);f("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.DOMUtils")});f("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.Env")});f("tinymce.plugins.link.core.OpenUrl",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(a,e,d,g){return{open:function(m){if(!g.ie||10<g.ie){var h=a.createElement("a");h.target="_blank";h.href=m;h.rel="noreferrer noopener";m=a.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,null);a.body.appendChild(h);h.dispatchEvent(m);a.body.removeChild(h)}else if(h=e.open("","_blank"))h.opener=null,
h=h.document,h.open(),h.write('<meta http-equiv="refresh" content="0; url='+d.DOM.encode(m)+'">'),h.close()}}});q("global!RegExp",RegExp);f("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});f("tinymce.plugins.link.core.Utils",["global!RegExp","tinymce.core.util.Tools","tinymce.plugins.link.api.Settings"],function(a,e,d){var g=function(b,a){var c=["noopener"],k=b?b.split(/\s+/):[],d=function(b){b=n(b);return b.length?b.concat(c):c},n=function(b){return b.filter(function(b){return-1===
e.inArray(c,b)})},k=a?d(k):n(k);return k.length?e.trim(k.sort().join(" ")):null},m=function(b,a){a=a||b.selection.getNode();return f(a)?b.dom.select("a[href]",a)[0]:b.dom.getParent(a,"a[href]")},h=function(b){return b&&"A"===b.nodeName&&b.href},f=function(b){return b&&"FIGURE"===b.nodeName&&/\bimage\b/i.test(b.className)};return{link:function(b,a){return function(c){b.undoManager.transact(function(){var k=b.selection.getNode(),e=m(b,k),n={href:c.href,target:c.target?c.target:null,rel:c.rel?c.rel:
null,"class":c["class"]?c["class"]:null,title:c.title?c.title:null};d.hasRelList(b.settings)||!1!==d.allowUnsafeLinkTarget(b.settings)||(n.rel=g(n.rel,"_blank"===n.target));c.href===a.href&&(a.attach(),a={});if(e)b.focus(),c.hasOwnProperty("text")&&("innerText"in e?e.innerText=c.text:e.textContent=c.text),b.dom.setAttribs(e,n),b.selection.select(e),b.undoManager.add();else if(f(k)){if(k=b.dom.select("img",k)[0])n=b.dom.create("a",n),k.parentNode.insertBefore(n,k),n.appendChild(k)}else c.hasOwnProperty("text")?
b.insertContent(b.dom.createHTML("a",n,b.dom.encode(c.text))):b.execCommand("mceInsertLink",!1,n)})}},unlink:function(b){return function(){b.undoManager.transact(function(){var a=b.selection.getNode();if(f(a)){var c;if(c=b.dom.select("img",a)[0])if(a=b.dom.getParents(c,"a[href]",a)[0])a.parentNode.insertBefore(c,a),b.dom.remove(a)}else b.execCommand("unlink")})}},isLink:h,hasLinks:function(a){return 0<e.grep(a,h).length},isOnlyTextSelected:function(a){return!/</.test(a)||/^<a [^>]+>[^<]+<\/a>$/.test(a)&&
-1!==a.indexOf("href=")?!0:!1},getAnchorElement:m,getAnchorText:function(a,e){return(e?e.innerText||e.textContent:a.getContent({format:"text"})).replace(/\uFEFF/g,"")},toggleTargetRules:g}});f("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Delay")});f("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.XHR")});f("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR",
"tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.Utils"],function(a,e,d,g,f){var h={},l=function(a,b){var c=g.getLinkList(a.settings);"string"===typeof c?d.send({url:c,success:function(c){b(a,JSON.parse(c))}}):"function"===typeof c?c(function(c){b(a,c)}):b(a,c)},b=function(a,b,c){var d=function(a,c){c=c||[];e.each(a,function(a){var k={text:a.text||a.title};a.menu?k.menu=d(a.menu):(k.value=a.value,b&&b(k));c.push(k)});return c};return d(a,c||[])},z=function(b,c,e){var d=b.selection.getRng();
a.setEditorTimeout(b,function(){b.windowManager.confirm(c,function(a){b.selection.setRng(d);e(a)})})},c=function(a,c){var d={},l=a.dom,p,q,w,y,t,x,v,A,B,C,u,D=function(a){var b=w.find("#text");(!b.value()||a.lastControl&&b.value()===a.lastControl.text())&&b.value(a.control.text());w.find("#href").value(a.control.value())},E=function(){q||!y||d.text||this.parent().parent().find("#text")[0].value(this.value())};y=f.isOnlyTextSelected(a.selection.getContent());p=f.getAnchorElement(a);d.text=q=f.getAnchorText(a.selection,
p);d.href=p?l.getAttrib(p,"href"):"";p?d.target=l.getAttrib(p,"target"):g.hasDefaultLinkTarget(a.settings)&&(d.target=g.getDefaultLinkTarget(a.settings));if(u=l.getAttrib(p,"rel"))d.rel=u;if(u=l.getAttrib(p,"class"))d["class"]=u;if(u=l.getAttrib(p,"title"))d.title=u;y&&(t={name:"text",type:"textbox",size:40,label:"Text to display",classes:"link_text_to_display",onchange:function(){d.text=this.value()}});c&&(x={type:"listbox",label:"Link list",values:b(c,function(b){b.value=a.convertURL(b.value||b.url,
"href")},[{text:"None",value:""}]),onselect:D,value:a.convertURL(d.href,"href"),onPostRender:function(){x=this}});g.shouldShowTargetList(a.settings)&&(void 0===g.getTargetList(a.settings)&&g.setTargetList(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),A={name:"target",type:"listbox",label:"Target",values:b(g.getTargetList(a.settings))});g.hasRelList(a.settings)&&(v={name:"rel",type:"listbox",label:"Rel",values:b(g.getRelList(a.settings),function(b){!1===g.allowUnsafeLinkTarget(a.settings)&&
(b.value=f.toggleTargetRules(b.value,"_blank"===d.target))})});!1!==a.settings.link_class&&(B=g.hasLinkClassList(a.settings)?{name:"class",type:"listbox",label:"Class",values:b(g.getLinkClassList(a.settings),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[b.value]})})})}:{name:"class",type:"textbox",size:40,label:"CSS class name(s)"});g.shouldShowLinkTitle(a.settings)&&(C={name:"title",type:"textbox",label:"Title",value:d.title});w=a.windowManager.open({title:"Insert link",
data:d,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",classes:"zenario_link_picker",onchange:function(b){var c=b.meta||{};x&&x.value(a.convertURL(this.value(),"href"));e.each(b.meta,function(a,b){var c=w.find("#"+b);"text"===b?0===q.length&&(c.value(a),d.text=a):c.value(a)});c.attach&&(h={href:this.value(),attach:c.attach});c.text||E.call(this)},onkeyup:E,onbeforecall:function(a){a.meta=w.toJSON()}},t,C,function(b){var c=[];e.each(a.dom.select("a:not([href])"),
function(a){(a=a.name||a.id)&&c.push({text:a,value:"#"+a,selected:-1!==b.indexOf("#"+a)})});if(c.length)return c.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:c,onselect:D}}(d.href),x,v,A,B],onSubmit:function(b){var c=g.assumeExternalTargets(a.settings),l=f.link(a,h),p=f.unlink(a),r=e.extend({},d,b.data),s=r.href;s?(y&&r.text!==q||delete r.text,0<s.indexOf("@")&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?z(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",
function(a){a&&(r.href="mailto:"+s);l(r)}):!0===c&&!/^\w+:/i.test(s)||!1===c&&/^\s*www[\.|\d\.]/i.test(s)?z(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(a){a&&(r.href="http://"+s);l(r)}):l(r)):p()}});zenarioA.setLinkPickerOnTinyMCE()};return{open:function(a){l(a,c)}}});f("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils",
"tinymce.plugins.link.ui.Dialog"],function(a,e,d,g,f){var h=function(a,d){return a.dom.getParent(d,"a[href]")},l=function(a,e){if(e){var c;c=(c=e.getAttribute("data-mce-href"))?c:e.getAttribute("href");/^#/.test(c)?(c=a.$(c),c.length&&a.selection.scrollIntoView(c[0],!0)):d.open(e.href)}};return{openDialog:function(a){return function(){f.open(a)}},gotoSelectedLink:function(a){return function(){l(a,h(a,a.selection.getStart()))}},leftClickedOnAHref:function(a){return function(d){var c,h;if(c=e.hasContextToolbar(a.settings))c=
a.plugins.contextmenu,c=!(c&&c.isContextMenuVisible())&&g.isLink(d);return c&&(d=a.selection,c=d.getRng(),h=c.startContainer,3===h.nodeType&&d.isCollapsed()&&0<c.startOffset&&c.startOffset<h.data.length)?!0:!1}},setupGotoLinks:function(b){b.on("click",function(d){var c=h(b,d.target);c&&a.metaKeyPressed(d)&&(d.preventDefault(),l(b,c))});b.on("keydown",function(a){var c=h(b,b.selection.getStart());c&&13===a.keyCode&&!0===a.altKey&&!1===a.shiftKey&&!1===a.ctrlKey&&!1===a.metaKey&&(a.preventDefault(),
l(b,c))})},toggleActiveState:function(a){return function(){var d=this;a.on("nodechange",function(c){d.active(!a.readonly&&!!g.getAnchorElement(a,c.element))})}},toggleViewLinkState:function(a){return function(){var d=this,c=function(a){g.hasLinks(a.parents)?d.show():d.hide()};g.hasLinks(a.dom.getParents(a.selection.getStart()))||d.hide();a.on("nodechange",c);d.on("remove",function(){a.off("nodechange",c)})}}}});f("tinymce.plugins.link.api.Commands",["tinymce.plugins.link.core.Actions"],function(a){return{register:function(e){e.addCommand("mceLink",
a.openDialog(e))}}});f("tinymce.plugins.link.core.Keyboard",["tinymce.plugins.link.core.Actions"],function(a){return{setup:function(e){e.addShortcut("Meta+K","",a.openDialog(e))}}});f("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(a,e){return{setupButtons:function(d){d.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:a.openDialog(d),onpostrender:a.toggleActiveState(d)});d.addButton("unlink",{active:!1,icon:"unlink",
tooltip:"Remove link",onclick:e.unlink(d),onpostrender:a.toggleActiveState(d)});d.addContextToolbar&&d.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:a.gotoSelectedLink(d)})},setupMenuItems:function(d){d.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:a.gotoSelectedLink(d),onPostRender:a.toggleViewLinkState(d),prependToContext:!0});d.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:a.openDialog(d),stateSelector:"a[href]",context:"insert",prependToContext:!0})},
setupContextToolbars:function(d){d.addContextToolbar&&d.addContextToolbar(a.leftClickedOnAHref(d),"openlink | link unlink")}}});f("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.api.Commands","tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Keyboard","tinymce.plugins.link.ui.Controls"],function(a,e,d,f,m){a.add("link",function(a){m.setupButtons(a);m.setupMenuItems(a);m.setupContextToolbars(a);d.setupGotoLinks(a);e.register(a);f.setup(a)});return function(){}});
v("tinymce.plugins.link.Plugin")()})();

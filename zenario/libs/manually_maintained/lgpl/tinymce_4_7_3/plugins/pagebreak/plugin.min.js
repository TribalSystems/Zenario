'use strict';(function(){var n={},g=function(a,b,c){if("string"!==typeof a)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+a;if(void 0===c)throw"no definition function for "+a;n[a]={deps:b,defn:c,instance:void 0}},p=function(a){var b=n[a];if(void 0===b)throw"module ["+a+"] was undefined";if(void 0===b.instance){for(var c=n[a],e=c.deps,f=c.defn,k=e.length,h=Array(k),d=0;d<k;++d)h[d]=p(e[d]);e=f.apply(null,h);if(void 0===e)throw"module ["+a+"] returned undefined";c.instance=
e}return b.instance};(function(a,b){g(a,[],function(){return b})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);g("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});g("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});g("tinymce.plugins.pagebreak.api.Settings",[],function(){return{getSeparatorHtml:function(a){return a.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},
shouldSplitBlock:function(a){return a.getParam("pagebreak_split_block",!1)}}});g("tinymce.plugins.pagebreak.core.FilterContent",["tinymce.core.Env","tinymce.plugins.pagebreak.api.Settings"],function(a,b){var c=function(){return"mce-pagebreak"},e=function(){return'<img src="'+a.transparentSrc+'" class="'+c()+'" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(f){var k=b.getSeparatorHtml(f),h=new RegExp(k.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$:]/g,function(d){return"\\"+d}),"gi");
f.on("BeforeSetContent",function(d){d.content=d.content.replace(h,e())});f.on("PreInit",function(){f.serializer.addNodeFilter("img",function(d){for(var q=d.length,l,m;q--;)l=d[q],(m=l.attr("class"))&&-1!==m.indexOf("mce-pagebreak")&&(m=l.parent,f.schema.getBlockElements()[m.name]&&b.shouldSplitBlock(f)?(m.type=3,m.value=k,m.raw=!0,l.remove()):(l.type=3,l.value=k,l.raw=!0))})})},getPlaceholderHtml:e,getPageBreakClass:c}});g("tinymce.plugins.pagebreak.api.Commands",["tinymce.plugins.pagebreak.core.FilterContent"],
function(a){return{register:function(b){b.addCommand("mcePageBreak",function(){b.settings.pagebreak_split_block?b.insertContent("<p>"+a.getPlaceholderHtml()+"</p>"):b.insertContent(a.getPlaceholderHtml())})}}});g("tinymce.plugins.pagebreak.core.ResolveName",["tinymce.plugins.pagebreak.core.FilterContent"],function(a){return{setup:function(b){b.on("ResolveName",function(c){"IMG"===c.target.nodeName&&b.dom.hasClass(c.target,a.getPageBreakClass())&&(c.name="pagebreak")})}}});g("tinymce.plugins.pagebreak.ui.Buttons",
[],function(){return{register:function(a){a.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});a.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}});g("tinymce.plugins.pagebreak.Plugin","tinymce.core.Env tinymce.core.PluginManager tinymce.plugins.pagebreak.api.Commands tinymce.plugins.pagebreak.core.FilterContent tinymce.plugins.pagebreak.core.ResolveName tinymce.plugins.pagebreak.ui.Buttons".split(" "),function(a,b,c,e,f,k){b.add("pagebreak",
function(h){c.register(h);k.register(h);e.setup(h);f.setup(h)});return function(){}});p("tinymce.plugins.pagebreak.Plugin")()})();

(function(){var h={},l=function(a){var b=h[a];if(void 0===b)throw"module ["+a+"] was undefined";if(void 0===b.instance){for(var d=h[a],e=d.deps,m=d.defn,c=e.length,f=Array(c),k=0;k<c;++k)f[k]=l(e[k]);e=m.apply(null,f);if(void 0===e)throw"module ["+a+"] returned undefined";d.instance=e}return b.instance},c=function(a,b,d){if("string"!==typeof a)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+a;if(void 0===d)throw"no definition function for "+a;h[a]={deps:b,defn:d,instance:void 0}};
(function(a,b){c(a,[],function(){return b})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);c("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});c("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});c("tinymce.plugins.pagebreak.api.Settings",[],function(){return{getSeparatorHtml:function(a){return a.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},shouldSplitBlock:function(a){return a.getParam("pagebreak_split_block",
!1)}}});c("tinymce.plugins.pagebreak.core.FilterContent",["tinymce.core.Env","tinymce.plugins.pagebreak.api.Settings"],function(a,b){var d=function(){return"mce-pagebreak"},c=function(){return'<img src="'+a.transparentSrc+'" class="'+d()+'" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(a){var d=b.getSeparatorHtml(a),f=RegExp(d.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"gi");a.on("BeforeSetContent",function(a){a.content=a.content.replace(f,c())});
a.on("PreInit",function(){a.serializer.addNodeFilter("img",function(c){for(var f=c.length,e,g;f--;)e=c[f],(g=e.attr("class"))&&-1!==g.indexOf("mce-pagebreak")&&(g=e.parent,a.schema.getBlockElements()[g.name]&&b.shouldSplitBlock(a)?(g.type=3,g.value=d,g.raw=!0,e.remove()):(e.type=3,e.value=d,e.raw=!0))})})},getPlaceholderHtml:c,getPageBreakClass:d}});c("tinymce.plugins.pagebreak.api.Commands",["tinymce.plugins.pagebreak.core.FilterContent"],function(a){return{register:function(b){b.addCommand("mcePageBreak",
function(){b.settings.pagebreak_split_block?b.insertContent("<p>"+a.getPlaceholderHtml()+"</p>"):b.insertContent(a.getPlaceholderHtml())})}}});c("tinymce.plugins.pagebreak.core.ResolveName",["tinymce.plugins.pagebreak.core.FilterContent"],function(a){return{setup:function(b){b.on("ResolveName",function(d){"IMG"===d.target.nodeName&&b.dom.hasClass(d.target,a.getPageBreakClass())&&(d.name="pagebreak")})}}});c("tinymce.plugins.pagebreak.ui.Buttons",[],function(){return{register:function(a){a.addButton("pagebreak",
{title:"Page break",cmd:"mcePageBreak"});a.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}});c("tinymce.plugins.pagebreak.Plugin","tinymce.core.Env tinymce.core.PluginManager tinymce.plugins.pagebreak.api.Commands tinymce.plugins.pagebreak.core.FilterContent tinymce.plugins.pagebreak.core.ResolveName tinymce.plugins.pagebreak.ui.Buttons".split(" "),function(a,b,d,c,h,l){b.add("pagebreak",function(a){d.register(a);l.register(a);c.setup(a);h.setup(a)});
return function(){}});l("tinymce.plugins.pagebreak.Plugin")()})();

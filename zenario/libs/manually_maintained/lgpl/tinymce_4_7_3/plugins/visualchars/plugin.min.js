(function(){var C={},u=function(b,f,h){if("string"!==typeof b)throw"module id must be a string";if(void 0===f)throw"no dependencies for "+b;if(void 0===h)throw"no definition function for "+b;C[b]={deps:f,defn:h,instance:void 0}},D=function(b){var f=C[b];if(void 0===f)throw"module ["+b+"] was undefined";if(void 0===f.instance){for(var h=C[b],m=h.deps,n=h.defn,e=m.length,c=Array(e),g=0;g<e;++g)c[g]=D(m[g]);m=n.apply(null,c);if(void 0===m)throw"module ["+b+"] returned undefined";h.instance=m}return f.instance},
z=function(b,f){u(b,[],function(){return f})};u("ephox.katamari.api.Cell",[],function(){var b=function(f){var h=f;return{get:function(){return h},set:function(m){h=m},clone:function(){return b(h)}}};return b});z("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);u("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(b){return b("tinymce.PluginManager")});u("tinymce.plugins.visualchars.api.Api",[],function(){return{get:function(b){return{isEnabled:function(){return b.get()}}}}});
u("tinymce.plugins.visualchars.api.Events",[],function(){return{fireVisualChars:function(b,f){return b.fire("VisualChars",{state:f})}}});u("tinymce.plugins.visualchars.core.Data",[],function(){var b={"\u00a0":"nbsp","\u00ad":"shy"},f=function(m,n){var e,c="";for(e in m)c+=e;return new RegExp("["+c+"]",n?"g":"")},h=function(m){var n,e="";for(n in m)e&&(e+=","),e+="span.mce-"+m[n];return e};return{charMap:b,regExp:f(b),regExpGlobal:f(b,!0),selector:h(b),charMapToRegExp:f,charMapToSelector:h}});z("global!Array",
Array);z("global!Error",Error);u("ephox.katamari.api.Fun",["global!Array","global!Error"],function(b,f){var h=function(e){return function(){return e}},m=h(!1),n=h(!0);return{noop:function(){},compose:function(e,c){return function(){return e(c.apply(null,arguments))}},constant:h,identity:function(e){return e},tripleEquals:function(e,c){return e===c},curry:function(e){for(var c=new b(arguments.length-1),g=1;g<arguments.length;g++)c[g-1]=arguments[g];return function(){for(var p=new b(arguments.length),
t=0;t<p.length;t++)p[t]=arguments[t];p=c.concat(p);return e.apply(null,p)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new f(e);}},apply:function(e){return e()},call:function(e){e()},never:m,always:n}});z("global!Object",Object);u("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(b,f){var h=b.never,m=b.always,n=function(){return e},e=function(){var g=function(r){return r.isNone()},p=function(r){return r()},
t=function(r){return r};g={fold:function(r,x){return r()},is:h,isSome:h,isNone:m,getOr:t,getOrThunk:p,getOrDie:function(r){throw Error(r||"error: getOrDie called on none.");},or:t,orThunk:p,map:n,ap:n,each:function(){},bind:n,flatten:n,exists:h,forall:m,filter:n,equals:g,equals_:g,toArray:function(){return[]},toString:b.constant("none()")};f.freeze&&f.freeze(g);return g}(),c=function(g){var p=function(){return g},t=function(){return x},r=function(v){return v(g)},x={fold:function(v,y){return y(g)},
is:function(v){return g===v},isSome:m,isNone:h,getOr:p,getOrThunk:p,getOrDie:p,or:t,orThunk:t,map:function(v){return c(v(g))},ap:function(v){return v.fold(n,function(y){return c(y(g))})},each:function(v){v(g)},bind:r,flatten:p,exists:r,forall:r,filter:function(v){return v(g)?x:e},equals:function(v){return v.is(g)},equals_:function(v,y){return v.fold(h,function(B){return y(g,B)})},toArray:function(){return[g]},toString:function(){return"some("+g+")"}};return x};return{some:c,none:n,from:function(g){return null===
g||void 0===g?e:c(g)}}});z("global!String",String);u("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(b,f,h,m){var n=function(){var a=f.prototype.indexOf,l=function(k,q){return a.call(k,q)},d=function(k,q){a:{for(var w=0,A=k.length;w<A;++w)if(k[w]===q){k=w;break a}k=-1}return k};return void 0===a?d:l}(),e=function(a,l){return-1<n(a,l)},c=function(a,l){for(var d=a.length,k=new f(d),q=0;q<d;q++)k[q]=l(a[q],q,a);return k},g=function(a,l){for(var d=
0,k=a.length;d<k;d++)l(a[d],d,a)},p=function(a,l){for(var d=a.length-1;0<=d;d--)l(a[d],d,a)},t=function(a,l){for(var d=[],k=0,q=a.length;k<q;k++){var w=a[k];l(w,k,a)&&d.push(w)}return d},r=function(a,l){for(var d=0,k=a.length;d<k;d++)if(l(a[d],d,a))return b.some(d);return b.none()},x=f.prototype.push,v=function(a){for(var l=[],d=0,k=a.length;d<k;++d){if(!f.prototype.isPrototypeOf(a[d]))throw new h("Arr.flatten item "+d+" was not an array, input: "+a);x.apply(l,a[d])}return l},y=function(a,l){for(var d=
0,k=a.length;d<k;++d)if(!0!==l(a[d],d,a))return!1;return!0},B=f.prototype.slice;return{map:c,each:g,eachr:p,partition:function(a,l){for(var d=[],k=[],q=0,w=a.length;q<w;q++){var A=a[q];(l(A,q,a)?d:k).push(A)}return{pass:d,fail:k}},filter:t,groupBy:function(a,l){if(0===a.length)return[];for(var d=l(a[0]),k=[],q=[],w=0,A=a.length;w<A;w++){var E=a[w],F=l(E);F!==d&&(k.push(q),q=[]);d=F;q.push(E)}0!==q.length&&k.push(q);return k},indexOf:function(a,l){a=n(a,l);return-1===a?b.none():b.some(a)},foldr:function(a,
l,d){p(a,function(k){d=l(d,k)});return d},foldl:function(a,l,d){g(a,function(k){d=l(d,k)});return d},find:function(a,l){for(var d=0,k=a.length;d<k;d++){var q=a[d];if(l(q,d,a))return b.some(q)}return b.none()},findIndex:r,flatten:v,bind:function(a,l){a=c(a,l);return v(a)},forall:y,exists:function(a,l){return r(a,l).isSome()},contains:e,equal:function(a,l){return a.length===l.length&&y(a,function(d,k){return d===l[k]})},reverse:function(a){a=B.call(a,0);a.reverse();return a},chunk:function(a,l){for(var d=
[],k=0;k<a.length;k+=l){var q=a.slice(k,k+l);d.push(q)}return d},difference:function(a,l){return t(a,function(d){return!e(l,d)})},mapToObject:function(a,l){for(var d={},k=0,q=a.length;k<q;k++){var w=a[k];d[m(w)]=l(w,k)}return d},pure:function(a){return[a]},sort:function(a,l){a=B.call(a,0);a.sort(l);return a},range:function(a,l){for(var d=[],k=0;k<a;k++)d.push(l(k));return d},head:function(a){return 0===a.length?b.none():b.some(a[0])},last:function(a){return 0===a.length?b.none():b.some(a[a.length-
1])}}});u("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});z("global!document",document);u("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(b,f,h,m){var n=function(e){if(null===e||void 0===e)throw new f("Node cannot be null or undefined");return{dom:b.constant(e)}};return{fromHtml:function(e,c){c=(c||m).createElement("div");c.innerHTML=e;if(!c.hasChildNodes()||1<c.childNodes.length)throw h.error("HTML does not have a single root node",
e),"HTML must have a single root node";return n(c.childNodes[0])},fromTag:function(e,c){e=(c||m).createElement(e);return n(e)},fromText:function(e,c){e=(c||m).createTextNode(e);return n(e)},fromDom:n}});u("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});u("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(b){var f=
function(c){return c.dom().nodeName.toLowerCase()},h=function(c){return c.dom().nodeType},m=function(c){return function(g){return h(g)===c}},n=m(b.ELEMENT),e=m(b.TEXT);m=m(b.DOCUMENT);return{name:f,type:h,value:function(c){return c.dom().nodeValue},isElement:n,isText:e,isDocument:m,isComment:function(c){return h(c)===b.COMMENT||"#comment"===f(c)}}});u("tinymce.plugins.visualchars.core.Html",["tinymce.plugins.visualchars.core.Data"],function(b){return{wrapCharWithSpan:function(f){return'<span data-mce-bogus="1" class="mce-'+
b.charMap[f]+'">'+f+"</span>"}}});u("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(b,f,h,m,n){var e=function(c,g){var p=[];c=c.dom();c=b.map(c.childNodes,f.fromDom);b.each(c,function(t){g(t)&&(p=p.concat([t]));p=p.concat(e(t,g))});return p};return{isMatch:function(c){return h.isText(c)&&void 0!==h.value(c)&&m.regExp.test(h.value(c))},
filterDescendants:e,findParentElm:function(c,g){for(;c.parentNode;){if(c.parentNode===g)return c;c=c.parentNode}},replaceWithSpans:function(c){return c.replace(m.regExpGlobal,n.wrapCharWithSpan)}}});u("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node"],function(b,f,h,m,n){var e=function(g,p){var t,r;p=f.filterDescendants(m.fromDom(p),f.isMatch);
h.each(p,function(x){var v=f.replaceWithSpans(n.value(x));for(r=g.dom.create("div",null,v);t=r.lastChild;)g.dom.insertAfter(t,x.dom());g.dom.remove(x.dom())})},c=function(g,p){p=g.dom.select(b.selector,p);h.each(p,function(t){g.dom.remove(t,1)})};return{show:e,hide:c,toggle:function(g){var p=g.getBody(),t=g.selection.getBookmark(),r=f.findParentElm(g.selection.getNode(),p);r=void 0!==r?r:p;c(g,r);e(g,r);g.selection.moveToBookmark(t)}}});u("tinymce.plugins.visualchars.core.Actions",["tinymce.plugins.visualchars.api.Events",
"tinymce.plugins.visualchars.core.VisualChars"],function(b,f){return{toggleVisualChars:function(h,m){var n=h.getBody(),e=h.selection;m.set(!m.get());b.fireVisualChars(h,m.get());var c=e.getBookmark();!0===m.get()?f.show(h,n):f.hide(h,n);e.moveToBookmark(c)}}});u("tinymce.plugins.visualchars.api.Commands",["tinymce.plugins.visualchars.core.Actions"],function(b){return{register:function(f,h){f.addCommand("mceVisualChars",function(){b.toggleVisualChars(f,h)})}}});u("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],
function(b){return b("tinymce.util.Delay")});u("tinymce.plugins.visualchars.core.Keyboard",["tinymce.core.util.Delay","tinymce.plugins.visualchars.core.VisualChars"],function(b,f){return{setup:function(h,m){var n=b.debounce(function(){f.toggle(h)},300);if(!1!==h.settings.forced_root_block)h.on("keydown",function(e){!0===m.get()&&(13===e.keyCode?f.toggle(h):n())})}}});u("tinymce.plugins.visualchars.ui.Buttons",[],function(){var b=function(f){return function(h){var m=h.control;f.on("VisualChars",function(n){m.active(n.state)})}};
return{register:function(f){f.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:b(f)});f.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:b(f),selectable:!0,context:"view",prependToContext:!0})}}});u("tinymce.plugins.visualchars.Plugin","ephox.katamari.api.Cell tinymce.core.PluginManager tinymce.plugins.visualchars.api.Api tinymce.plugins.visualchars.api.Commands tinymce.plugins.visualchars.core.Keyboard tinymce.plugins.visualchars.ui.Buttons".split(" "),
function(b,f,h,m,n,e){f.add("visualchars",function(c){var g=b(!1);m.register(c,g);e.register(c);n.setup(c,g);return h.get(g)});return function(){}});D("tinymce.plugins.visualchars.Plugin")()})();

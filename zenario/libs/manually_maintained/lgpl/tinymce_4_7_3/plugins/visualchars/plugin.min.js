(function(){var n={},s=function(a){var b=n[a];if(void 0===b)throw"module ["+a+"] was undefined";if(void 0===b.instance){for(var c=n[a],g=c.deps,h=c.defn,f=g.length,d=Array(f),e=0;e<f;++e)d[e]=s(g[e]);g=h.apply(null,d);if(void 0===g)throw"module ["+a+"] returned undefined";c.instance=g}return b.instance},k=function(a,b,c){if("string"!==typeof a)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+a;if(void 0===c)throw"no definition function for "+a;n[a]={deps:b,defn:c,instance:void 0}},
m=function(a,b){k(a,[],function(){return b})};k("ephox.katamari.api.Cell",[],function(){var a=function(b){var c=b;return{get:function(){return c},set:function(a){c=a},clone:function(){return a(c)}}};return a});m("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);k("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});k("tinymce.plugins.visualchars.api.Api",[],function(){return{get:function(a){return{isEnabled:function(){return a.get()}}}}});
k("tinymce.plugins.visualchars.api.Events",[],function(){return{fireVisualChars:function(a,b){return a.fire("VisualChars",{state:b})}}});k("tinymce.plugins.visualchars.core.Data",[],function(){var a={"\u00a0":"nbsp","\u00ad":"shy"},b=function(a,b){var f,d="";for(f in a)d+=f;return RegExp("["+d+"]",b?"g":"")},c=function(a){var b,f="";for(b in a)f&&(f+=","),f+="span.mce-"+a[b];return f};return{charMap:a,regExp:b(a),regExpGlobal:b(a,!0),selector:c(a),charMapToRegExp:b,charMapToSelector:c}});m("global!Array",
Array);m("global!Error",Error);k("ephox.katamari.api.Fun",["global!Array","global!Error"],function(a,b){var c=function(a){return function(){return a}},g=c(!1),h=c(!0);return{noop:function(){},compose:function(a,b){return function(){return a(b.apply(null,arguments))}},constant:c,identity:function(a){return a},tripleEquals:function(a,b){return a===b},curry:function(b){for(var d=new a(arguments.length-1),e=1;e<arguments.length;e++)d[e-1]=arguments[e];return function(){for(var e=new a(arguments.length),
c=0;c<e.length;c++)e[c]=arguments[c];e=d.concat(e);return b.apply(null,e)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new b(a);}},apply:function(a){return a()},call:function(a){a()},never:g,always:h}});m("global!Object",Object);k("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(a,b){var c=a.never,g=a.always,h=function(){return f},f=function(){var e=function(a){return a.isNone()},d=function(a){return a()},
f=function(a){return a},e={fold:function(a,e){return a()},is:c,isSome:c,isNone:g,getOr:f,getOrThunk:d,getOrDie:function(a){throw Error(a||"error: getOrDie called on none.");},or:f,orThunk:d,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:c,forall:g,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:a.constant("none()")};b.freeze&&b.freeze(e);return e}(),d=function(a){var b=function(){return a},k=function(){return r},p=function(b){return b(a)},r={fold:function(b,d){return d(a)},
is:function(b){return a===b},isSome:g,isNone:c,getOr:b,getOrThunk:b,getOrDie:b,or:k,orThunk:k,map:function(b){return d(b(a))},ap:function(b){return b.fold(h,function(b){return d(b(a))})},each:function(b){b(a)},bind:p,flatten:b,exists:p,forall:p,filter:function(b){return b(a)?r:f},equals:function(b){return b.is(a)},equals_:function(b,d){return b.fold(c,function(b){return d(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return r};return{some:d,none:h,from:function(a){return null===
a||void 0===a?f:d(a)}}});m("global!String",String);k("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(a,b,c,g){var h=function(){var a=b.prototype.indexOf,d=function(b,l){return a.call(b,l)},l=function(a,b){var q;a:{q=0;for(var l=a.length;q<l;++q)if(a[q]===b)break a;q=-1}return q};return void 0===a?l:d}(),f=function(a,b){return-1<h(a,b)},d=function(a,d){for(var l=a.length,c=new b(l),e=0;e<l;e++)c[e]=d(a[e],e,a);return c},e=function(a,b){for(var l=
0,d=a.length;l<d;l++)b(a[l],l,a)},k=function(a,b){for(var l=a.length-1;0<=l;l--)b(a[l],l,a)},t=function(a,b){for(var l=[],d=0,e=a.length;d<e;d++){var c=a[d];b(c,d,a)&&l.push(c)}return l},p=function(b,d){for(var l=0,e=b.length;l<e;l++)if(d(b[l],l,b))return a.some(l);return a.none()},r=b.prototype.push,m=function(a){for(var d=[],l=0,e=a.length;l<e;++l){if(!b.prototype.isPrototypeOf(a[l]))throw new c("Arr.flatten item "+l+" was not an array, input: "+a);r.apply(d,a[l])}return d},u=function(a,b){for(var d=
0,e=a.length;d<e;++d)if(!0!==b(a[d],d,a))return!1;return!0},n=b.prototype.slice;return{map:d,each:e,eachr:k,partition:function(a,b){for(var d=[],e=[],c=0,f=a.length;c<f;c++){var g=a[c];(b(g,c,a)?d:e).push(g)}return{pass:d,fail:e}},filter:t,groupBy:function(a,b){if(0===a.length)return[];for(var d=b(a[0]),e=[],c=[],f=0,g=a.length;f<g;f++){var h=a[f],k=b(h);k!==d&&(e.push(c),c=[]);d=k;c.push(h)}0!==c.length&&e.push(c);return e},indexOf:function(b,d){var e=h(b,d);return-1===e?a.none():a.some(e)},foldr:function(a,
b,d){k(a,function(a){d=b(d,a)});return d},foldl:function(a,b,d){e(a,function(a){d=b(d,a)});return d},find:function(b,d){for(var e=0,c=b.length;e<c;e++){var f=b[e];if(d(f,e,b))return a.some(f)}return a.none()},findIndex:p,flatten:m,bind:function(a,b){var e=d(a,b);return m(e)},forall:u,exists:function(a,b){return p(a,b).isSome()},contains:f,equal:function(a,b){return a.length===b.length&&u(a,function(a,d){return a===b[d]})},reverse:function(a){a=n.call(a,0);a.reverse();return a},chunk:function(a,b){for(var d=
[],e=0;e<a.length;e+=b){var c=a.slice(e,e+b);d.push(c)}return d},difference:function(a,b){return t(a,function(a){return!f(b,a)})},mapToObject:function(a,b){for(var d={},e=0,c=a.length;e<c;e++){var f=a[e];d[g(f)]=b(f,e)}return d},pure:function(a){return[a]},sort:function(a,b){var d=n.call(a,0);d.sort(b);return d},range:function(a,b){for(var d=[],e=0;e<a;e++)d.push(b(e));return d},head:function(b){return 0===b.length?a.none():a.some(b[0])},last:function(b){return 0===b.length?a.none():a.some(b[b.length-
1])}}});k("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});m("global!document",document);k("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(a,b,c,g){var h=function(c){if(null===c||void 0===c)throw new b("Node cannot be null or undefined");return{dom:a.constant(c)}};return{fromHtml:function(a,b){var e=(b||g).createElement("div");e.innerHTML=a;if(!e.hasChildNodes()||1<e.childNodes.length)throw c.error("HTML does not have a single root node",
a),"HTML must have a single root node";return h(e.childNodes[0])},fromTag:function(a,b){var e=(b||g).createElement(a);return h(e)},fromText:function(a,b){var e=(b||g).createTextNode(a);return h(e)},fromDom:h}});k("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});k("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],
function(a){var b=function(a){return a.dom().nodeName.toLowerCase()},c=function(a){return a.dom().nodeType},g=function(a){return function(b){return c(b)===a}},h=g(a.ELEMENT),f=g(a.TEXT),g=g(a.DOCUMENT);return{name:b,type:c,value:function(a){return a.dom().nodeValue},isElement:h,isText:f,isDocument:g,isComment:function(d){return c(d)===a.COMMENT||"#comment"===b(d)}}});k("tinymce.plugins.visualchars.core.Html",["tinymce.plugins.visualchars.core.Data"],function(a){return{wrapCharWithSpan:function(b){return'<span data-mce-bogus="1" class="mce-'+
a.charMap[b]+'">'+b+"</span>"}}});k("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(a,b,c,g,h){var f=function(d,e){var c=[],g=d.dom(),g=a.map(g.childNodes,b.fromDom);a.each(g,function(a){e(a)&&(c=c.concat([a]));c=c.concat(f(a,e))});return c};return{isMatch:function(a){return c.isText(a)&&void 0!==c.value(a)&&g.regExp.test(c.value(a))},
filterDescendants:f,findParentElm:function(a,b){for(;a.parentNode;){if(a.parentNode===b)return a;a=a.parentNode}},replaceWithSpans:function(a){return a.replace(g.regExpGlobal,h.wrapCharWithSpan)}}});k("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node"],function(a,b,c,g,h){var f=function(a,d){var f,k,m=b.filterDescendants(g.fromDom(d),b.isMatch);
c.each(m,function(d){var c=b.replaceWithSpans(h.value(d));for(k=a.dom.create("div",null,c);f=k.lastChild;)a.dom.insertAfter(f,d.dom());a.dom.remove(d.dom())})},d=function(b,d){var f=b.dom.select(a.selector,d);c.each(f,function(a){b.dom.remove(a,1)})};return{show:f,hide:d,toggle:function(a){var c=a.getBody(),g=a.selection.getBookmark(),h=b.findParentElm(a.selection.getNode(),c),h=void 0!==h?h:c;d(a,h);f(a,h);a.selection.moveToBookmark(g)}}});k("tinymce.plugins.visualchars.core.Actions",["tinymce.plugins.visualchars.api.Events",
"tinymce.plugins.visualchars.core.VisualChars"],function(a,b){return{toggleVisualChars:function(c,g){var h=c.getBody(),f=c.selection,d;g.set(!g.get());a.fireVisualChars(c,g.get());d=f.getBookmark();!0===g.get()?b.show(c,h):b.hide(c,h);f.moveToBookmark(d)}}});k("tinymce.plugins.visualchars.api.Commands",["tinymce.plugins.visualchars.core.Actions"],function(a){return{register:function(b,c){b.addCommand("mceVisualChars",function(){a.toggleVisualChars(b,c)})}}});k("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.util.Delay")});k("tinymce.plugins.visualchars.core.Keyboard",["tinymce.core.util.Delay","tinymce.plugins.visualchars.core.VisualChars"],function(a,b){return{setup:function(c,g){var h=a.debounce(function(){b.toggle(c)},300);if(!1!==c.settings.forced_root_block)c.on("keydown",function(a){!0===g.get()&&(13===a.keyCode?b.toggle(c):h())})}}});k("tinymce.plugins.visualchars.ui.Buttons",[],function(){var a=function(a){return function(c){var g=c.control;a.on("VisualChars",function(a){g.active(a.state)})}};
return{register:function(b){b.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:a(b)});b.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:a(b),selectable:!0,context:"view",prependToContext:!0})}}});k("tinymce.plugins.visualchars.Plugin","ephox.katamari.api.Cell tinymce.core.PluginManager tinymce.plugins.visualchars.api.Api tinymce.plugins.visualchars.api.Commands tinymce.plugins.visualchars.core.Keyboard tinymce.plugins.visualchars.ui.Buttons".split(" "),
function(a,b,c,g,h,f){b.add("visualchars",function(b){var e=a(!1);g.register(b,e);f.register(b);h.setup(b,e);return c.get(e)});return function(){}});s("tinymce.plugins.visualchars.Plugin")()})();

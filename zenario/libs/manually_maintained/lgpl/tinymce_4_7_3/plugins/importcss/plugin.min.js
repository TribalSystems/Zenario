(function(){var l={},p=function(a){var c=l[a];if(void 0===c)throw"module ["+a+"] was undefined";if(void 0===c.instance){for(var e=l[a],d=e.deps,g=e.defn,b=d.length,m=Array(b),h=0;h<b;++h)m[h]=p(d[h]);d=g.apply(null,m);if(void 0===d)throw"module ["+a+"] returned undefined";e.instance=d}return c.instance},b=function(a,c,b){if("string"!==typeof a)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+a;if(void 0===b)throw"no definition function for "+a;l[a]={deps:c,defn:b,instance:void 0}};
(function(a,c){b(a,[],function(){return c})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);b("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});b("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.DOMUtils")});b("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.EditorManager")});b("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.Env")});b("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});b("tinymce.plugins.importcss.api.Settings",[],function(){return{shouldMergeClasses:function(a){return a.getParam("importcss_merge_classes")},shouldImportExclusive:function(a){return a.getParam("importcss_exclusive")},getSelectorConverter:function(a){return a.getParam("importcss_selector_converter")},getSelectorFilter:function(a){return a.getParam("importcss_selector_filter")},
getCssGroups:function(a){return a.getParam("importcss_groups")},shouldAppend:function(a){return a.getParam("importcss_append")},getFileFilter:function(a){return a.getParam("importcss_file_filter")}}});b("tinymce.plugins.importcss.core.ImportCss",["tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.importcss.api.Settings"],function(a,b,e,d,g){var l=function(q){var a=e.cacheSuffix;"string"===typeof q&&(q=q.replace("?"+a,"").replace("&"+
a,""));return q},m=function(a,n){var f=a.settings,d=!1!==f.skin?f.skin||"lightgray":!1;return d?(f=f.skin_url?a.documentBaseURI.toAbsolute(f.skin_url):b.baseURL+"/skins/"+d,n===f+"/content"+(a.inline?".inline":"")+".min.css"):!1},h=function(a){return"string"===typeof a?function(d){return-1!==d.indexOf(a)}:a instanceof RegExp?function(d){return a.test(d)}:a},p=function(a,n,f){function b(r,n){var c=r.href,g;if((c=l(c))&&f(c,n)&&!m(a,c)){d.each(r.imports,function(a){b(a,!0)});try{g=r.cssRules||r.rules}catch(e){}d.each(g,
function(a){a.styleSheet?b(a.styleSheet,!0):a.selectorText&&d.each(a.selectorText.split(","),function(a){k.push(d.trim(a))})})}}var k=[],c={};d.each(a.contentCSS,function(a){c[a]=!0});f||(f=function(a,d){return d||c[a]});try{d.each(n.styleSheets,function(a){b(a)})}catch(g){}return k},s=function(a,b){var f,c=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(b);if(c){var k=c[1],e=c[2].substr(1).split(".").join(" "),h=d.makeMap("a,img");c[1]?(f={title:b},a.schema.getTextBlockElements()[k]?f.block=k:a.schema.getBlockElements()[k]||
h[k.toLowerCase()]?f.selector=k:f.inline=k):c[2]&&(f={inline:"span",title:b.substr(1),classes:e});!1!==g.shouldMergeClasses(a)?f.classes=e:f.attributes={"class":e};return f}},t=function(a,c){return d.grep(a,function(a){return!a.filter||a.filter(c)})},u=function(a){return d.map(a,function(a){return d.extend({},a,{original:a,selectors:{},filter:h(a.filter),item:{text:a.title,menu:[]}})})},v=function(a,d,c,b){return(b&&b.selector_converter?b.selector_converter:g.getSelectorConverter(a)?g.getSelectorConverter(a):
function(){return s(a,c,b)}).call(d,c,b)};return{defaultConvertSelectorToFormat:s,setup:function(b){b.on("renderFormatsMenu",function(c){var f={},e=h(g.getSelectorFilter(b)),k=c.control,l=u(g.getCssGroups(b)),m=function(c,e){if(!(null===e||!1!==g.shouldImportExclusive(b)?c in f:c in e.selectors)){null===e||!1!==g.shouldImportExclusive(b)?f[c]=!0:e.selectors[c]=!0;var h=v(b,b.plugins.importcss,c,e);if(h){var l=h.name||a.DOM.uniqueId();b.formatter.register(l,h);return d.extend({},k.settings.itemDefaults,
{text:h.title,format:l})}}return null};g.shouldAppend(b)||k.items().remove();d.each(p(b,c.doc||b.getDoc(),h(g.getFileFilter(b))),function(a){if(-1===a.indexOf(".mce-")&&(!e||e(a))){var b=t(l,a);0<b.length?d.each(b,function(b){var c=m(a,b);c&&b.item.menu.push(c)}):(b=m(a,null))&&k.add(b)}});d.each(l,function(a){0<a.item.menu.length&&k.add(a.item)});c.control.renderNew()})}}});b("tinymce.plugins.importcss.api.Api",["tinymce.plugins.importcss.core.ImportCss"],function(a){return{get:function(b){return{convertSelectorToFormat:function(e){return a.defaultConvertSelectorToFormat(b,
e)}}}}});b("tinymce.plugins.importcss.Plugin",["tinymce.core.PluginManager","tinymce.plugins.importcss.api.Api","tinymce.plugins.importcss.core.ImportCss"],function(a,b,e){a.add("importcss",function(a){e.setup(a);return b.get(a)});return function(){}});p("tinymce.plugins.importcss.Plugin")()})();

(function(){var y={},D=function(a){var d=y[a];if(void 0===d)throw"module ["+a+"] was undefined";if(void 0===d.instance){for(var b=y[a],c=b.deps,g=b.defn,h=c.length,k=Array(h),u=0;u<h;++u)k[u]=D(c[u]);c=g.apply(null,k);if(void 0===c)throw"module ["+a+"] returned undefined";b.instance=c}return d.instance},l=function(a,d,b){if("string"!==typeof a)throw"module id must be a string";if(void 0===d)throw"no dependencies for "+a;if(void 0===b)throw"no definition function for "+a;y[a]={deps:d,defn:b,instance:void 0}},
t=function(a,d){l(a,[],function(){return d})};l("ephox.katamari.api.Cell",[],function(){var a=function(d){var b=d;return{get:function(){return b},set:function(a){b=a},clone:function(){return a(b)}}};return a});t("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);l("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});t("global!window",window);l("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],
function(a,d){return{hasProPlugin:function(b){return/(^|[ ,])powerpaste([, ]|$)/.test(b.settings.plugins)&&d.get("powerpaste")?("undefined"!==typeof a.console&&a.console.log&&a.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1}}});l("tinymce.plugins.paste.api.Api",[],function(a){return{get:function(a,b){return{clipboard:a,quirks:b}}}});l("tinymce.plugins.paste.api.Events",[],function(){return{firePastePreProcess:function(a,d,b,c){return a.fire("PastePreProcess",
{content:d,internal:b,wordContent:c})},firePastePostProcess:function(a,d,b,c){return a.fire("PastePostProcess",{node:d,internal:b,wordContent:c})},firePastePlainTextToggle:function(a,d){return a.fire("PastePlainTextToggle",{state:d})},firePaste:function(a,d){return a.fire("paste",{ieFake:d})}}});l("tinymce.plugins.paste.api.Settings",[],function(){return{shouldPlainTextInform:function(a){return a.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(a){return a.getParam("paste_block_drop",
!1)},shouldPasteDataImages:function(a){return a.getParam("paste_data_images",!1)},shouldFilterDrop:function(a){return a.getParam("paste_filter_drop",!0)},getPreProcess:function(a){return a.getParam("paste_preprocess")},getPostProcess:function(a){return a.getParam("paste_postprocess")},getWebkitStyles:function(a){return a.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(a){return a.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(a){return a.getParam("paste_merge_formats",
!0)},isSmartPasteEnabled:function(a){return a.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(a){return a.getParam("paste_as_text",!1)},getRetainStyleProps:function(a){return a.getParam("paste_retain_style_properties")},getWordValidElements:function(a){return a.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},
shouldConvertWordFakeLists:function(a){return a.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(a){return a.getParam("paste_enable_default_filters",!0)}}});l("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(a,d){return{togglePlainTextPaste:function(b,c,g){"text"===c.pasteFormat?(c.pasteFormat="html",a.firePastePlainTextToggle(b,!1)):(c.pasteFormat="text",a.firePastePlainTextToggle(b,!0),!1===g.get()&&
d.shouldPlainTextInform(b)&&(b.notificationManager.open({text:b.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),g.set(!0)));b.focus()}}});l("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(a){return{register:function(d,b,c){d.addCommand("mceTogglePlainTextPaste",function(){a.togglePlainTextPaste(d,b,c)});d.addCommand("mceInsertClipboardContent",function(a,h){h.content&&b.pasteHtml(h.content,
h.internal);h.text&&b.pasteText(h.text)})}}});t("global!Image",Image);t("global!navigator",navigator);l("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});l("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Delay")});l("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});l("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.VK")});
l("tinymce.plugins.paste.core.InternalHtml",[],function(){return{mark:function(a){return"\x3c!-- x-tinymce/html --\x3e"+a},unmark:function(a){return a.replace("\x3c!-- x-tinymce/html --\x3e","")},isMarked:function(a){return-1!==a.indexOf("\x3c!-- x-tinymce/html --\x3e")},internalHtmlMime:function(){return"x-tinymce/html"}}});l("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Entities")});l("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools",
"tinymce.core.html.Entities"],function(a,d){var b=function(a){return a.replace(/\r?\n/g,"<br>")},c=function(a,b){var c,g=[],e="<"+a;if("object"===typeof b){for(c in b)b.hasOwnProperty(c)&&g.push(c+'="'+d.encodeAllRaw(b[c])+'"');g.length&&(e+=" "+g.join(" "))}return e+">"},g=function(b,k,d){b=b.split(/\n\n/);var g=c(k,d),e="</"+k+">";k=a.map(b,function(a){return a.split(/\n/).join("<br />")});d=function(a){return g+a+e};return 1===k.length?k[0]:a.map(k,d).join("")};return{isPlainText:function(a){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a)},
convert:function(a,k,c){return k?g(a,k,c):b(a)},toBRs:b,toBlockElements:g}});l("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(a,d){return function(b){var c,g=function(){return b.dom.get("mcepastebin")},h=function(a){return"%MCEPASTEBIN%"===a};return{create:function(){function a(f){var n,b;b=f.startContainer;n=f.getClientRects();if(n.length)return n[0];if(f.collapsed&&1===b.nodeType){for(f=b.childNodes[c.startOffset];f&&3===f.nodeType&&!f.data.length;)f=
f.nextSibling;if(f&&("BR"===f.tagName&&(b=h.doc.createTextNode("\ufeff"),f.parentNode.insertBefore(b,f),f=h.createRng(),f.setStartBefore(b),f.setEndAfter(b),n=f.getClientRects(),h.remove(b)),n.length))return n[0]}}var h=b.dom,g=b.getBody(),e=b.dom.getViewPort(b.getWin()).y,f=20,n;c=b.selection.getRng();b.inline&&(n=b.selection.getScrollContainer())&&0<n.scrollTop&&(e=n.scrollTop);if(c.getClientRects)if(f=a(c))f=e+(f.top-h.getPos(g).y);else if(f=e,e=c.startContainer)3===e.nodeType&&e.parentNode!==
g&&(e=e.parentNode),1===e.nodeType&&(f=h.getPos(e,n||g).y);n=b.dom.add(b.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+f+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");(d.ie||d.gecko)&&h.setStyle(n,"left","rtl"===h.getStyle(g,"direction",!0)?65535:-65535);h.bind(n,"beforedeactivate focusin focusout",function(a){a.stopPropagation()});n.focus();b.selection.select(n,!0)},remove:function(){if(g()){for(var a;a=
b.dom.get("mcepastebin");)b.dom.remove(a),b.dom.unbind(a);c&&b.selection.setRng(c)}c=null},getEl:g,getHtml:function(){var h,c,d,e,f=function(a,f){a.appendChild(f);b.dom.remove(f,!0)};c=a.grep(b.getBody().childNodes,function(a){return"mcepastebin"===a.id});h=c.shift();a.each(c,function(a){f(h,a)});d=b.dom.select("div[id=mcepastebin]",h);for(c=d.length-1;0<=c;c--)e=b.dom.create("div"),h.insertBefore(e,d[c]),f(e,d[c]);return h?h.innerHTML:""},getLastRng:function(){return c},isDefault:function(){var a=
g();return a&&"mcepastebin"===a.id&&h(a.innerHTML)},isDefaultContent:h}}});l("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.DomParser")});l("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Node")});l("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Schema")});l("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.html.Serializer")});
l("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(a,d,b,c){function g(a,b){c.each(b,function(b){a=b.constructor===RegExp?a.replace(b,""):a.replace(b[0],b[1])});return a}return{filter:g,innerText:function(a){function k(a){var b=a.name,c=a;if("br"===b)e+="\n";else if(f[b]&&(e+=" "),n[b])e+=" ";else{3===a.type&&(e+=a.value);if(!a.shortEnded&&(a=a.firstChild)){do k(a);while(a=a.next)}z[b]&&c.next&&(e+=
"\n","p"===b&&(e+="\n"))}}var u=new b,l=new d({},u),e="",f=u.getShortEndedElements(),n=c.makeMap("script noscript style textarea video audio iframe object"," "),z=u.getBlockElements();a=g(a,[/<!\[[^\]]+\]>/g]);k(l.parse(a));return e},trimHtml:function(a){return a=g(a,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(a,b,c){return b||c?"\u00a0":" "}],/<br class="Apple-interchange-newline">/g,
/<br>$/i])},createIdGenerator:function(a){var b=0;return function(){return a+b++}},isMsEdge:function(){return-1!==a.userAgent.indexOf(" Edge/")}}});l("tinymce.plugins.paste.core.WordFilter","tinymce.core.html.DomParser tinymce.core.html.Node tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.util.Tools tinymce.plugins.paste.api.Settings tinymce.plugins.paste.core.Utils".split(" "),function(a,d,b,c,g,h,k){function l(a){var f;a=a.replace(/^[\u00a0 ]+/,"");g.each([/^[IVXLMCD]{1,2}\.[ \u00a0]/,
/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(b){if(b.test(a))return f=!0,!1});return f}function p(a){function f(a){var b="";if(3===a.type)return a.value;if(a=a.firstChild){do b+=f(a);while(a=a.next)}return b}function b(a,f){if(3===a.type&&f.test(a.value))return a.value=a.value.replace(f,
""),!1;if(a=a.firstChild){do if(!b(a,f))return!1;while(a=a.next)}return!0}function c(a){if(a._listIgnore)a.remove();else if(a=a.firstChild){do c(a);while(a=a.next)}}function h(a,f,n){var m=a._listLevel||k;m!==k&&(m<k?e&&(e=e.parent.parent):(g=e,e=null));e&&e.name===f?e.append(a):(g=g||e,e=new d(f,1),1<n&&e.attr("start",""+n),a.wrap(e));a.name="li";m>k&&g&&g.lastChild.append(e);k=m;c(a);b(a,/^\u00a0+/);b(a,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);b(a,/^\u00a0+/)}for(var e,g,k=1,B=[],q=a.firstChild;"undefined"!==
typeof q&&null!==q;)if(B.push(q),q=q.walk(),null!==q)for(;"undefined"!==typeof q&&q.parent!==a;)q=q.walk();for(q=0;q<B.length;q++)if(a=B[q],"p"===a.name&&a.firstChild){var p=f(a);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(p))h(a,"ul");else if(l(p)){var p=/([0-9]+)\./.exec(p),E=1;p&&(E=parseInt(p[1],10));h(a,"ol",E)}else a._listLevel?h(a,"ul",1):e=null}else g=e,e=null}function e(a,f,b,c){var e={},k,l=a.dom.parseStyle(c);g.each(l,function(g,d){switch(d){case "mso-list":if(k=/\w+ \w+([0-9]+)/i.exec(c))b._listLevel=
parseInt(k[1],10);/Ignore/i.test(g)&&b.firstChild&&(b._listIgnore=!0,b.firstChild._listIgnore=!0);break;case "horiz-align":d="text-align";break;case "vert-align":d="vertical-align";break;case "font-color":case "mso-foreground":d="color";break;case "mso-background":case "mso-highlight":d="background";break;case "font-weight":case "font-style":"normal"!==g&&(e[d]=g);return;case "mso-element":if(/^(comment|comment-list)$/i.test(g)){b.remove();return}}0===d.indexOf("mso-comment")?b.remove():0!==d.indexOf("mso-")&&
("all"===h.getRetainStyleProps(a)||f&&f[d])&&(e[d]=g)});/(bold)/i.test(e["font-weight"])&&(delete e["font-weight"],b.wrap(new d("b",1)));/(italic)/i.test(e["font-style"])&&(delete e["font-style"],b.wrap(new d("i",1)));return(e=a.dom.serializeStyle(e,b.name))?e:null}var f=function(f,d){var l,x;(l=h.getRetainStyleProps(f))&&(x=g.makeMap(l.split(/[, ]/)));d=k.filter(d,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/\x3c!--[\s\S]+?--\x3e/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,
[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,f){return 0<f.length?f.replace(/./," ").slice(Math.floor(f.length/2)).split("").join("\u00a0"):""}]]);l=h.getWordValidElements(f);l=new b({valid_elements:l,valid_children:"-li[p]"});g.each(l.elements,function(a){a.attributes["class"]||(a.attributes["class"]={},a.attributesOrder.push("class"));a.attributes.style||(a.attributes.style={},a.attributesOrder.push("style"))});
var m=new a({},l);m.addAttributeFilter("style",function(a){for(var b=a.length,c;b--;)c=a[b],c.attr("style",e(f,x,c,c.attr("style"))),"span"===c.name&&c.parent&&!c.attributes.length&&c.unwrap()});m.addAttributeFilter("class",function(a){for(var f=a.length,b,c;f--;)b=a[f],c=b.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(c)&&b.remove(),b.attr("class",null)});m.addNodeFilter("del",function(a){for(var f=a.length;f--;)a[f].remove()});m.addNodeFilter("a",function(a){for(var f=a.length,
b,c,e;f--;)b=a[f],c=b.attr("href"),e=b.attr("name"),c&&-1!==c.indexOf("#_msocom_")?b.remove():(c&&0===c.indexOf("file://")&&(c=c.split("#")[1])&&(c="#"+c),c||e?e&&!/^_?(?:toc|edn|ftn)/i.test(e)?b.unwrap():b.attr({href:c,name:e}):b.unwrap())});m=m.parse(d);h.shouldConvertWordFakeLists(f)&&p(m);return d=(new c({validate:f.settings.validate},l)).serialize(m)};return{preProcess:function(a,b){return h.shouldUseDefaultFilters(a)?f(a,b):b},isWordContent:function(a){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(a)||
/class="OutlineElement/.test(a)||/id="?docs\-internal\-guid\-/.test(a)}}});l("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(a,d){var b=function(a,b){return{content:a,cancelled:b}};return{process:function(c,g,h){var k=d.isWordContent(g);g=k?d.preProcess(c,g):g;g=a.firePastePreProcess(c,g,h,k);c.hasEventListeners("PastePostProcess")&&!g.isDefaultPrevented()?(g=c.dom.create("div",{style:"display:none"},g.content),c=a.firePastePostProcess(c,
g,h,k),c=b(c.node.innerHTML,c.isDefaultPrevented())):c=b(g.content,g.isDefaultPrevented());return c}}});l("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(a,d){var b=function(a){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(a)},c=function(a){return b(a)&&/.(gif|jpe?g|png)$/.test(a)},g=function(a,b,c){a.undoManager.extra(function(){c(a,b)},function(){a.insertContent('<img src="'+b+'">')});return!0},h=function(a,b,c){a.undoManager.extra(function(){c(a,
b)},function(){a.execCommand("mceInsertLink",!1,b)});return!0},k=function(a,c,e){return!1===a.selection.isCollapsed()&&b(c)?h(a,c,e):!1},l=function(a,b,e){return c(b)?g(a,b,e):!1},p=function(a,b){a.insertContent(b,{merge:d.shouldMergeFormats(a),paste:!0});return!0},e=function(b,c){a.each([k,l,p],function(a){return!0!==a(b,c,p)})};return{isImageUrl:c,isAbsoluteUrl:b,insertContent:function(a,b){!1===d.isSmartPasteEnabled(a)?p(a,b):e(a,b)}}});l("tinymce.plugins.paste.core.Clipboard","global!Image global!navigator global!window tinymce.core.Env tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK tinymce.plugins.paste.api.Events tinymce.plugins.paste.api.Settings tinymce.plugins.paste.core.InternalHtml tinymce.plugins.paste.core.Newlines tinymce.plugins.paste.core.PasteBin tinymce.plugins.paste.core.ProcessFilters tinymce.plugins.paste.core.SmartPaste tinymce.plugins.paste.core.Utils".split(" "),
function(a,d,b,c,g,h,k,l,p,e,f,n,z,s,x){return function(m){function A(a,b){var f=b?b:e.isMarked(a),f=z.process(m,e.unmark(a),f);!1===f.cancelled&&s.insertContent(m,f.content)}function G(a){a=m.dom.encode(a).replace(/\r\n/g,"\n");a=f.convert(a,m.settings.forced_root_block,m.settings.forced_root_block_attrs);A(a,!1)}function F(a){var b={};if(a){if(a.getData){var f=a.getData("Text");f&&0<f.length&&-1===f.indexOf(K)&&(b["text/plain"]=f)}if(a.types)for(f=0;f<a.types.length;f++){var c=a.types[f];try{b[c]=
a.getData(c)}catch(e){b[c]=""}}}return b}function B(a){a=F(a.clipboardData||m.getDoc().dataTransfer);return x.isMsEdge()?h.extend(a,{"text/html":""}):a}function q(a){return v(a,"text/html")||v(a,"text/plain")}function J(a){var b;b=a.indexOf(",");return-1!==b?a.substr(b+1):null}function E(a){return(a=a.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?m.dom.encode(a[1]):null}function t(b,f,c){b&&(m.selection.setRng(b),b=null);var e=f.result,d=J(e);b=L();f=m.settings.images_reuse_filename&&c.name?E(c.name):
b;var g=new a;g.src=e;(m.settings.images_dataimg_filter?m.settings.images_dataimg_filter(g):1)?(e=m.editorUpload.blobCache,(g=e.findFirst(function(a){return a.base64()===d}))?c=g:(c=e.create(b,c,d,f),e.add(c)),A('<img src="'+c.blobUri()+'">',!1)):A('<img src="'+e+'">',!1)}function y(a,f){function c(e){var d,g,h=!1;if(e)for(d=0;d<e.length;d++)g=e[d],/^image\/(jpeg|png|gif|bmp)$/.test(g.type)&&(h=g.getAsFile?g.getAsFile():g,g=new b.FileReader,g.onload=t.bind(null,f,g,h),g.readAsDataURL(h),a.preventDefault(),
h=!0);return h}var e=a.clipboardData||a.dataTransfer;if(m.settings.paste_data_images&&e)return c(e.items)||c(e.files)}function D(a){a=a.clipboardData;return-1!==d.userAgent.indexOf("Android")&&a&&a.items&&0===a.items.length}function v(a,b){return b in a&&0<a[b].length}function H(a){return k.metaKeyPressed(a)&&86===a.keyCode||a.shiftKey&&45===a.keyCode}function M(){function a(b,c,d,g){var h,k;v(b,"text/html")?h=b["text/html"]:(h=r.getHtml(),g=g?g:e.isMarked(h),r.isDefaultContent(h)&&(d=!0));h=x.trimHtml(h);
r.remove();k=!1===g&&f.isPlainText(h);if(!h.length||k)d=!0;d&&(h=v(b,"text/plain")&&k?b["text/plain"]:x.innerText(h));r.isDefaultContent(h)?c||m.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):d?G(h):A(h,g)}m.on("keydown",function(a){function b(a){H(a)&&!a.isDefaultPrevented()&&r.remove()}H(a)&&!a.isDefaultPrevented()&&(C=a.shiftKey&&86===a.keyCode,C&&c.webkit&&-1!==d.userAgent.indexOf("Version/")||(a.stopImmediatePropagation(),I=(new Date).getTime(),c.ie&&C?(a.preventDefault(),
l.firePaste(m,!0)):(r.remove(),r.create(),m.once("keyup",b),m.once("paste",function(){m.off("keyup",b)}))))});m.on("paste",function(b){var f=(new Date).getTime(),d=B(b),f=(new Date).getTime()-f,h=1E3>(new Date).getTime()-I-f,k="text"===w.pasteFormat||C,n=v(d,e.internalHtmlMime());C=!1;b.isDefaultPrevented()||D(b)?r.remove():!q(d)&&y(b,r.getLastRng()||m.selection.getRng())?r.remove():(h||b.preventDefault(),!c.ie||h&&!b.ieFake||v(d,"text/html")||(r.create(),m.dom.bind(r.getEl(),"paste",function(a){a.stopPropagation()}),
m.getDoc().execCommand("Paste",!1,null),d["text/html"]=r.getHtml()),v(d,"text/html")?(b.preventDefault(),n||(n=e.isMarked(d["text/html"])),a(d,h,k,n)):g.setEditorTimeout(m,function(){a(d,h,k,n)},0))})}var w=this,I=0,r=new n(m),C,K="data:text/mce-internal,",L=x.createIdGenerator("mceclip");w.pasteFormat=p.isPasteAsTextEnabled(m)?"text":"html";w.pasteHtml=A;w.pasteText=G;w.pasteImageData=y;w.getDataTransferItems=F;w.hasHtmlOrText=q;w.hasContentType=v;m.on("preInit",function(){M();m.parser.addNodeFilter("img",
function(a,b,f){function e(a){a.attr("data-mce-object")||d===c.transparentSrc||a.remove()}if(!m.settings.paste_data_images&&f.data&&!0===f.data.paste)for(b=a.length;b--;){var d=a[b].attributes.map.src;d&&(0===d.indexOf("webkit-fake-url")?e(a[b]):m.settings.allow_html_data_urls||0!==d.indexOf("data:")||e(a[b]))}})})}});t("global!setTimeout",setTimeout);l("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],
function(a,d,b,c){var g=function(){},h=function(a,e,h,g){var k;var m=a.clipboardData,l=e.html,p=e.text;if(!1===d.iOS&&void 0!==m&&"function"===typeof m.setData&&!0!==c.isMsEdge())try{m.clearData(),m.setData("text/html",l),m.setData("text/plain",p),m.setData(b.internalHtmlMime(),l),k=!0}catch(u){k=!1}else k=!1;k?(a.preventDefault(),g()):h(e.html,g)},k=function(f){return function(c,e){var d=b.mark(c),h=f.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=f.dom.create("div",{contenteditable:"true"},
d);f.dom.setStyles(h,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"});h.appendChild(d);f.dom.add(f.getBody(),h);var g=f.selection.getRng();d.focus();var k=f.dom.createRng();k.selectNodeContents(d);f.selection.setRng(k);a(function(){h.parentNode.removeChild(h);f.selection.setRng(g);e()},0)}},l=function(a){return{html:a.selection.getContent({contextual:!0}),text:a.selection.getContent({format:"text"})}},p=function(b){return function(c){!1===b.selection.isCollapsed()&&h(c,l(b),k(b),
function(){a(function(){b.execCommand("Delete")},0)})}},e=function(a){return function(b){!1===a.selection.isCollapsed()&&h(b,l(a),k(a),g)}};return{register:function(a){a.on("cut",p(a));a.on("copy",e(a))}}});l("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.RangeUtils")});l("tinymce.plugins.paste.core.DragDrop",["tinymce.core.api.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml",
"tinymce.plugins.paste.core.Utils"],function(a,d,b,c,g){var h=function(a){return(a=a["text/plain"])?0===a.indexOf("file://"):!1};return{setup:function(k,l,p){if(b.shouldBlockDrop(k))k.on("dragend dragover draggesture dragdrop drop drag",function(a){a.preventDefault();a.stopPropagation()});if(!b.shouldPasteDataImages(k))k.on("drop",function(a){var b=a.dataTransfer;b&&b.files&&0<b.files.length&&a.preventDefault()});k.on("drop",function(e){var f,n;n=a.getCaretRangeFromPoint(e.clientX,e.clientY,k.getDoc());
if(!e.isDefaultPrevented()&&!p.get()){f=l.getDataTransferItems(e.dataTransfer);var z=l.hasContentType(f,c.internalHtmlMime());if((l.hasHtmlOrText(f)&&!h(f)||!l.pasteImageData(e,n))&&n&&b.shouldFilterDrop(k)){var s=f["mce-internal"]||f["text/html"]||f["text/plain"];s&&(e.preventDefault(),d.setEditorTimeout(k,function(){k.undoManager.transact(function(){f["mce-internal"]&&k.execCommand("Delete");k.focus();k.selection.setRng(n);s=g.trimHtml(s);f["text/html"]?l.pasteHtml(s,z):l.pasteText(s)})}))}}});
k.on("dragstart",function(a){p.set(!0)});k.on("dragover dragend",function(c){if(b.shouldPasteDataImages(k)&&!1===p.get()){c.preventDefault();var f=a.getCaretRangeFromPoint(c.clientX,c.clientY,k.getDoc());k.focus();k.selection.setRng(f)}"dragend"===c.type&&p.set(!1)})}}});l("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(a){return{setup:function(d){var b=d.plugins.paste,c=a.getPreProcess(d);if(c)d.on("PastePreProcess",function(a){c.call(b,b,a)});var g=a.getPostProcess(d);
if(g)d.on("PastePostProcess",function(a){g.call(b,b,a)})}}});l("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(a,d,b,c,g){function h(a,b){a.on("PastePreProcess",function(c){c.content=b(a,c.content,c.internal,c.wordContent)})}function k(a,b){a.on("PastePostProcess",function(c){b(a,c.node)})}function l(a,b){if(!g.isWordContent(b))return b;var e=
[];d.each(a.schema.getBlockElements(),function(a,b){e.push(b)});var h=RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+e.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");b=c.filter(b,[[h,"$1"]]);return b=c.filter(b,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function p(a,c,e,d){if(d||e)return c;var h=b.getWebkitStyles(a);if(!1===b.shouldRemoveWebKitStyles(a)||"all"===h)return c;h&&(h=h.split(/[, ]/));if(h){var g=a.dom,k=a.selection.getNode();c=c.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,
function(a,b,c,e){a=g.parseStyle(g.decode(c),"span");c={};if("none"===h)return b+e;for(var f=0;f<h.length;f++){var d=a[h[f]],l=g.getStyle(k,h[f],!0);/color/.test(h[f])&&(d=g.toHex(d),l=g.toHex(l));l!==d&&(c[h[f]]=d)}return(c=g.serializeStyle(c,"span"))?b+' style="'+c+'"'+e:b+e})}else c=c.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return c=c.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(a,b,c,f){return b+' style="'+c+'"'+f})}function e(a,b){a.$("a",b).find("font,u").each(function(b,
c){a.dom.remove(c,!0)})}return{setup:function(b){a.webkit&&h(b,p);a.ie&&(h(b,l),k(b,e))}}});t("global!Array",Array);t("global!Error",Error);l("ephox.katamari.api.Fun",["global!Array","global!Error"],function(a,d){var b=function(a){return function(){return a}},c=b(!1),g=b(!0);return{noop:function(){},compose:function(a,b){return function(){return a(b.apply(null,arguments))}},constant:b,identity:function(a){return a},tripleEquals:function(a,b){return a===b},curry:function(b){for(var c=new a(arguments.length-
1),d=1;d<arguments.length;d++)c[d-1]=arguments[d];return function(){for(var d=new a(arguments.length),e=0;e<d.length;e++)d[e]=arguments[e];d=c.concat(d);return b.apply(null,d)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new d(a);}},apply:function(a){return a()},call:function(a){a()},never:c,always:g}});l("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(a){var d=function(a,c,d){var h=d.control;h.active("text"===
c.pasteFormat);a.on("PastePlainTextToggle",function(a){h.active(a.state)})};return{register:function(b,c){var g=a.curry(d,b,c);b.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:g});b.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:c.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:g})}}});l("tinymce.plugins.paste.Plugin","ephox.katamari.api.Cell tinymce.core.PluginManager tinymce.plugins.paste.alien.DetectProPlugin tinymce.plugins.paste.api.Api tinymce.plugins.paste.api.Commands tinymce.plugins.paste.core.Clipboard tinymce.plugins.paste.core.CutCopy tinymce.plugins.paste.core.DragDrop tinymce.plugins.paste.core.PrePostProcess tinymce.plugins.paste.core.Quirks tinymce.plugins.paste.ui.Buttons".split(" "),
function(a,d,b,c,g,h,k,l,p,e,f){var n=a(!1);d.add("paste",function(d){if(!1===b.hasProPlugin(d)){var s=new h(d),t=e.setup(d),m=a(!1);f.register(d,s);g.register(d,s,n);p.setup(d);k.register(d);l.setup(d,s,m);return c.get(s,t)}});return function(){}});D("tinymce.plugins.paste.Plugin")()})();

'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(la){var L=0;return function(){return L<la.length?{done:!1,value:la[L++]}:{done:!0}}};$jscomp.arrayIterator=function(la){return{next:$jscomp.arrayIteratorImpl(la)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(la,L,qa){if(la==Array.prototype||la==Object.prototype)return la;la[L]=qa.value;return la};$jscomp.getGlobal=function(la){la=["object"==typeof globalThis&&globalThis,la,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var L=0;L<la.length;++L){var qa=la[L];if(qa&&qa.Math==Math)return qa}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(la,L){var qa=$jscomp.propertyToPolyfillSymbol[L];if(null==qa)return la[L];qa=la[qa];return void 0!==qa?qa:la[L]};
$jscomp.polyfill=function(la,L,qa,ra){L&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(la,L,qa,ra):$jscomp.polyfillUnisolated(la,L,qa,ra))};$jscomp.polyfillUnisolated=function(la,L,qa,ra){qa=$jscomp.global;la=la.split(".");for(ra=0;ra<la.length-1;ra++){var u=la[ra];if(!(u in qa))return;qa=qa[u]}la=la[la.length-1];ra=qa[la];L=L(ra);L!=ra&&null!=L&&$jscomp.defineProperty(qa,la,{configurable:!0,writable:!0,value:L})};
$jscomp.polyfillIsolated=function(la,L,qa,ra){var u=la.split(".");la=1===u.length;ra=u[0];ra=!la&&ra in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var r=0;r<u.length-1;r++){var q=u[r];if(!(q in ra))return;ra=ra[q]}u=u[u.length-1];qa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===qa?ra[u]:null;L=L(qa);null!=L&&(la?$jscomp.defineProperty($jscomp.polyfills,u,{configurable:!0,writable:!0,value:L}):L!==qa&&($jscomp.propertyToPolyfillSymbol[u]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(u):$jscomp.POLYFILL_PREFIX+
u,u=$jscomp.propertyToPolyfillSymbol[u],$jscomp.defineProperty(ra,u,{configurable:!0,writable:!0,value:L})))};$jscomp.initSymbol=function(){};$jscomp.initSymbolIterator=function(){};$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(la){la={next:la};la[Symbol.iterator]=function(){return this};return la};
$jscomp.polyfill("String.prototype.matchAll",function(la){return la?la:function(L){if(L instanceof RegExp&&!L.global)throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag.");var qa=new RegExp(L,L instanceof RegExp?void 0:"g"),ra=this,u=!1,r={next:function(){var q={},l=qa.lastIndex;if(u)return{value:void 0,done:!0};var b=qa.exec(ra);if(!b)return u=!0,{value:void 0,done:!0};qa.lastIndex===l&&(qa.lastIndex+=1);q.value=b;q.done=!1;return q}};r[Symbol.iterator]=function(){return r};
return r}},"es_2020","es3");
(function(){var la={},L=function(u,r,q){if("string"!==typeof u)throw"module id must be a string";if(void 0===r)throw"no dependencies for "+u;if(void 0===q)throw"no definition function for "+u;la[u]={deps:r,defn:q,instance:void 0}},qa=function(u){var r=la[u];if(void 0===r)throw"module ["+u+"] was undefined";if(void 0===r.instance){for(var q=la[u],l=q.deps,b=q.defn,c=l.length,d=Array(c),a=0;a<c;++a)d[a]=qa(l[a]);l=b.apply(null,d);if(void 0===l)throw"module ["+u+"] returned undefined";q.instance=l}return r.instance},
ra=function(u,r){L(u,[],function(){return r})};ra("global!Array",Array);ra("global!Error",Error);L("ephox.katamari.api.Fun",["global!Array","global!Error"],function(u,r){var q=function(c){return function(){return c}},l=q(!1),b=q(!0);return{noop:function(){},compose:function(c,d){return function(){return c(d.apply(null,arguments))}},constant:q,identity:function(c){return c},tripleEquals:function(c,d){return c===d},curry:function(c){for(var d=new u(arguments.length-1),a=1;a<arguments.length;a++)d[a-
1]=arguments[a];return function(){for(var f=new u(arguments.length),n=0;n<f.length;n++)f[n]=arguments[n];f=d.concat(f);return c.apply(null,f)}},not:function(c){return function(){return!c.apply(null,arguments)}},die:function(c){return function(){throw new r(c);}},apply:function(c){return c()},call:function(c){c()},never:l,always:b}});ra("global!window",window);ra("global!Object",Object);L("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(u,r){var q=u.never,l=u.always,
b=function(){return c},c=function(){var a=function(A){return A.isNone()},f=function(A){return A()},n=function(A){return A};a={fold:function(A,x){return A()},is:q,isSome:q,isNone:l,getOr:n,getOrThunk:f,getOrDie:function(A){throw Error(A||"error: getOrDie called on none.");},or:n,orThunk:f,map:b,ap:b,each:function(){},bind:b,flatten:b,exists:q,forall:l,filter:b,equals:a,equals_:a,toArray:function(){return[]},toString:u.constant("none()")};r.freeze&&r.freeze(a);return a}(),d=function(a){var f=function(){return a},
n=function(){return x},A=function(t){return t(a)},x={fold:function(t,p){return p(a)},is:function(t){return a===t},isSome:l,isNone:q,getOr:f,getOrThunk:f,getOrDie:f,or:n,orThunk:n,map:function(t){return d(t(a))},ap:function(t){return t.fold(b,function(p){return d(p(a))})},each:function(t){t(a)},bind:A,flatten:f,exists:A,forall:A,filter:function(t){return t(a)?x:c},equals:function(t){return t.is(a)},equals_:function(t,p){return t.fold(q,function(g){return p(a,g)})},toArray:function(){return[a]},toString:function(){return"some("+
a+")"}};return x};return{some:d,none:b,from:function(a){return null===a||void 0===a?c:d(a)}}});ra("global!String",String);L("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(u,r,q,l){var b=function(){var e=r.prototype.indexOf,v=function(C,B){return e.call(C,B)},y=function(C,B){a:{for(var h=0,k=C.length;h<k;++h)if(C[h]===B){C=h;break a}C=-1}return C};return void 0===e?y:v}(),c=function(e,v){return-1<b(e,v)},d=function(e,v){for(var y=e.length,
C=new r(y),B=0;B<y;B++)C[B]=v(e[B],B,e);return C},a=function(e,v){for(var y=0,C=e.length;y<C;y++)v(e[y],y,e)},f=function(e,v){for(var y=e.length-1;0<=y;y--)v(e[y],y,e)},n=function(e,v){for(var y=[],C=0,B=e.length;C<B;C++){var h=e[C];v(h,C,e)&&y.push(h)}return y},A=function(e,v){for(var y=0,C=e.length;y<C;y++)if(v(e[y],y,e))return u.some(y);return u.none()},x=r.prototype.push,t=function(e){for(var v=[],y=0,C=e.length;y<C;++y){if(!r.prototype.isPrototypeOf(e[y]))throw new q("Arr.flatten item "+y+" was not an array, input: "+
e);x.apply(v,e[y])}return v},p=function(e,v){for(var y=0,C=e.length;y<C;++y)if(!0!==v(e[y],y,e))return!1;return!0},g=r.prototype.slice;return{map:d,each:a,eachr:f,partition:function(e,v){for(var y=[],C=[],B=0,h=e.length;B<h;B++){var k=e[B];(v(k,B,e)?y:C).push(k)}return{pass:y,fail:C}},filter:n,groupBy:function(e,v){if(0===e.length)return[];for(var y=v(e[0]),C=[],B=[],h=0,k=e.length;h<k;h++){var w=e[h],z=v(w);z!==y&&(C.push(B),B=[]);y=z;B.push(w)}0!==B.length&&C.push(B);return C},indexOf:function(e,
v){e=b(e,v);return-1===e?u.none():u.some(e)},foldr:function(e,v,y){f(e,function(C){y=v(y,C)});return y},foldl:function(e,v,y){a(e,function(C){y=v(y,C)});return y},find:function(e,v){for(var y=0,C=e.length;y<C;y++){var B=e[y];if(v(B,y,e))return u.some(B)}return u.none()},findIndex:A,flatten:t,bind:function(e,v){e=d(e,v);return t(e)},forall:p,exists:function(e,v){return A(e,v).isSome()},contains:c,equal:function(e,v){return e.length===v.length&&p(e,function(y,C){return y===v[C]})},reverse:function(e){e=
g.call(e,0);e.reverse();return e},chunk:function(e,v){for(var y=[],C=0;C<e.length;C+=v){var B=e.slice(C,C+v);y.push(B)}return y},difference:function(e,v){return n(e,function(y){return!c(v,y)})},mapToObject:function(e,v){for(var y={},C=0,B=e.length;C<B;C++){var h=e[C];y[l(h)]=v(h,C)}return y},pure:function(e){return[e]},sort:function(e,v){e=g.call(e,0);e.sort(v);return e},range:function(e,v){for(var y=[],C=0;C<e;C++)y.push(v(C));return y},head:function(e){return 0===e.length?u.none():u.some(e[0])},
last:function(e){return 0===e.length?u.none():u.some(e[e.length-1])}}});ra("global!document",document);L("ephox.katamari.api.Global",[],function(){return"undefined"!==typeof window?window:Function("return this;")()});L("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(u){var r=function(l,b){b=void 0!==b?b:u;for(var c=0;c<l.length&&void 0!==b&&null!==b;++c)b=b[l[c]];return b},q=function(l,b){var c=void 0!==b?b:u;for(b=0;b<l.length;++b){var d=l[b];if(void 0===c[d]||null===c[d])c[d]=
{};c=c[d]}return c};return{path:r,resolve:function(l,b){l=l.split(".");return r(l,b)},forge:q,namespace:function(l,b){l=l.split(".");return q(l,b)}}});L("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(u){return{getOrDie:function(r,q){q=u.resolve(r,q);if(void 0===q)throw r+" not available on this browser";return q}}});L("ephox.sand.api.URL",["ephox.sand.util.Global"],function(u){return{createObjectURL:function(r){return u.getOrDie("URL").createObjectURL(r)},revokeObjectURL:function(r){u.getOrDie("URL").revokeObjectURL(r)}}});
ra("global!matchMedia",matchMedia);ra("global!navigator",navigator);L("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(u,r,q,l,b){var c=l.userAgent;var d=b.opera&&b.opera.buildNumber;var a=/Android/.test(c);var f=/WebKit/.test(c);var n=(n=!f&&!d&&/MSIE/gi.test(c)&&/Explorer/gi.test(l.appName))&&/MSIE (\w+)\./.exec(c)[1];var A=-1==c.indexOf("Trident/")||-1==c.indexOf("rv:")&&-1==l.appName.indexOf("Netscape")?!1:11;l=-1==c.indexOf("Edge/")||
n||A?!1:12;n=n||A||l;A=!f&&!A&&/Gecko/.test(c);var x=-1!=c.indexOf("Mac");var t=/(iPad|iPhone)/.test(c);u="FormData"in b&&"FileReader"in b&&"URL"in b&&!!u.createObjectURL;var p=("matchMedia"in b?q("only screen and (max-device-width: 480px)").matches:!1)&&(a||t);q=("matchMedia"in b?q("only screen and (min-width: 800px)").matches:!1)&&(a||t);var g=-1!=c.indexOf("Windows Phone");l&&(f=!1);c=!t||u||534<=c.match(/AppleWebKit\/(\d*)/)[1];return{opera:d,webkit:f,ie:n,gecko:A,mac:x,iOS:t,android:a,contentEditable:c,
transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:b.getSelection&&"Range"in b,documentMode:n&&!l?r.documentMode||7:10,fileApi:u,ceFalse:!1===n||8<n,canHaveCSP:!1===n||11<n,desktop:!p&&!q,windowsPhone:g}});ra("global!clearInterval",clearInterval);ra("global!clearTimeout",clearTimeout);ra("global!setInterval",setInterval);ra("global!setTimeout",setTimeout);L("tinymce.core.util.Promise",[],function(){function u(A,x){return function(){A.apply(x,
arguments)}}function r(A){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof A)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];a(A,u(l,this),u(b,this))}function q(A){var x=this;null===this._state?this._deferreds.push(A):f(function(){var t=x._state?A.onFulfilled:A.onRejected;if(null===t)(x._state?A.resolve:A.reject)(x._value);else{try{var p=t(x._value)}catch(g){A.reject(g);return}A.resolve(p)}})}function l(A){try{if(A===
this)throw new TypeError("A promise cannot be resolved with itself.");if(A&&("object"===typeof A||"function"===typeof A)){var x=A.then;if("function"===typeof x){a(u(x,A),u(l,this),u(b,this));return}}this._state=!0;this._value=A;c.call(this)}catch(t){b.call(this,t)}}function b(A){this._state=!1;this._value=A;c.call(this)}function c(){for(var A=0,x=this._deferreds.length;A<x;A++)q.call(this,this._deferreds[A]);this._deferreds=null}function d(A,x,t,p){this.onFulfilled="function"===typeof A?A:null;this.onRejected=
"function"===typeof x?x:null;this.resolve=t;this.reject=p}function a(A,x,t){var p=!1;try{A(function(g){p||(p=!0,x(g))},function(g){p||(p=!0,t(g))})}catch(g){p||(p=!0,t(g))}}if(window.Promise)return window.Promise;var f=r.immediateFn||"function"===typeof setImmediate&&setImmediate||function(A){setTimeout(A,1)},n=Array.isArray||function(A){return"[object Array]"===Object.prototype.toString.call(A)};r.prototype["catch"]=function(A){return this.then(null,A)};r.prototype.then=function(A,x){var t=this;
return new r(function(p,g){q.call(t,new d(A,x,p,g))})};r.all=function(){var A=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new r(function(x,t){function p(v,y){try{if(y&&("object"===typeof y||"function"===typeof y)){var C=y.then;if("function"===typeof C){C.call(y,function(B){p(v,B)},t);return}}A[v]=y;0===--g&&x(A)}catch(B){t(B)}}if(0===A.length)return x([]);for(var g=A.length,e=0;e<A.length;e++)p(e,A[e])})};r.resolve=function(A){return A&&"object"===
typeof A&&A.constructor===r?A:new r(function(x){x(A)})};r.reject=function(A){return new r(function(x,t){t(A)})};r.race=function(A){return new r(function(x,t){for(var p=0,g=A.length;p<g;p++)A[p].then(x,t)})};return r});L("tinymce.core.util.Delay","global!clearInterval global!clearTimeout global!document global!setInterval global!setTimeout global!window tinymce.core.util.Promise".split(" "),function(u,r,q,l,b,c,d){var a,f=function(t,p){var g,e=c.requestAnimationFrame,v=["ms","moz","webkit"],y=function(C){c.setTimeout(C,
0)};for(g=0;g<v.length&&!e;g++)e=c[v[g]+"RequestAnimationFrame"];e||(e=y);e(t,p)},n=function(t,p){"number"!=typeof p&&(p=0);return b(t,p)},A=function(t,p){"number"!=typeof p&&(p=1);return l(t,p)},x=function(t,p){var g;var e=function(){var v=arguments;r(g);g=n(function(){t.apply(this,v)},p)};e.stop=function(){r(g)};return e};return{requestAnimationFrame:function(t,p){a?a.then(t):a=(new d(function(g){p||(p=q.body);f(g,p)})).then(t)},setTimeout:n,setInterval:A,setEditorTimeout:function(t,p,g){return n(function(){t.removed||
p()},g)},setEditorInterval:function(t,p,g){var e;return e=A(function(){t.removed?u(e):p()},g)},debounce:x,throttle:x,clearInterval:function(t){return u(t)},clearTimeout:function(t){return r(t)}}});L("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(u,r,q,l){var b=/^(?:mouse|contextmenu)|click/,c={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},d=function(){return!1},a=function(){return!0},
f=function(g,e,v,y){g.addEventListener?g.addEventListener(e,v,y||!1):g.attachEvent&&g.attachEvent("on"+e,v)},n=function(g,e,v,y){g.removeEventListener?g.removeEventListener(e,v,y||!1):g.detachEvent&&g.detachEvent("on"+e,v)},A=function(g,e){var v=e;(e=g.path)&&0<e.length&&(v=e[0]);g.deepPath&&(e=g.deepPath())&&0<e.length&&(v=e[0]);return v},x=function(g,e){var v=e||{};for(y in g)c[y]||(v[y]=g[y]);v.target||(v.target=v.srcElement||u);q.experimentalShadowDom&&(v.target=A(g,v.target));if(g&&b.test(g.type)&&
void 0===g.pageX&&void 0!==g.clientX){var y=v.target.ownerDocument||u;e=y.documentElement;y=y.body;v.pageX=g.clientX+(e&&e.scrollLeft||y&&y.scrollLeft||0)-(e&&e.clientLeft||y&&y.clientLeft||0);v.pageY=g.clientY+(e&&e.scrollTop||y&&y.scrollTop||0)-(e&&e.clientTop||y&&y.clientTop||0)}v.preventDefault=function(){v.isDefaultPrevented=a;g&&(g.preventDefault?g.preventDefault():g.returnValue=!1)};v.stopPropagation=function(){v.isPropagationStopped=a;g&&(g.stopPropagation?g.stopPropagation():g.cancelBubble=
!0)};v.stopImmediatePropagation=function(){v.isImmediatePropagationStopped=a;v.stopPropagation()};!1===(v.isDefaultPrevented===a||v.isDefaultPrevented===d)&&(v.isDefaultPrevented=d,v.isPropagationStopped=d,v.isImmediatePropagationStopped=d);"undefined"==typeof v.metaKey&&(v.metaKey=!1);return v},t=function(g,e,v){var y=g.document,C={type:"ready"};if(v.domLoaded)e(C);else{var B=function(){return"complete"===y.readyState||"interactive"===y.readyState&&y.body},h=function(){v.domLoaded||(v.domLoaded=
!0,e(C))},k=function(){B()&&(n(y,"readystatechange",k),h())},w=function(){try{y.documentElement.doScroll("left")}catch(z){l.setTimeout(w);return}h()};!y.addEventListener||q.ie&&11>q.ie?(f(y,"readystatechange",k),y.documentElement.doScroll&&g.self===g.top&&w()):B()?h():f(g,"DOMContentLoaded",h);f(g,"load",h)}},p=function(){var g=this,e={};var v="mce-data-"+(+new Date).toString(32);var y="onmouseenter"in u.documentElement;var C="onfocusin"in u.documentElement;var B={mouseenter:"mouseover",mouseleave:"mouseout"};
var h=1;g.domLoaded=!1;g.events=e;var k=function(w,z){var m,D;if(z=(z=e[z])&&z[w.type]){var F=0;for(m=z.length;F<m&&((D=z[F])&&!1===D.func.call(D.scope,w)&&w.preventDefault(),!w.isImmediatePropagationStopped());F++);}};g.bind=function(w,z,m,D){var F,G,I,H=function(Q){k(x(Q||r.event),E)};if(w&&3!==w.nodeType&&8!==w.nodeType){if(w[v])var E=w[v];else E=h++,w[v]=E,e[E]={};D=D||w;z=z.split(" ");for(G=z.length;G--;){var J=z[G];var M=H;var P=I=!1;"DOMContentLoaded"===J&&(J="ready");g.domLoaded&&"ready"===
J&&"complete"==w.readyState?m.call(D,x({type:J})):(y||(P=B[J])&&(M=function(Q){var V;var W=Q.currentTarget;if((V=Q.relatedTarget)&&W.contains)V=W.contains(V);else for(;V&&V!==W;)V=V.parentNode;V||(Q=x(Q||r.event),Q.type="mouseout"===Q.type?"mouseleave":"mouseenter",Q.target=W,k(Q,E))}),C||"focusin"!==J&&"focusout"!==J||(I=!0,P="focusin"===J?"focus":"blur",M=function(Q){Q=x(Q||r.event);Q.type="focus"===Q.type?"focusin":"focusout";k(Q,E)}),(F=e[E][J])?"ready"===J&&g.domLoaded?m({type:J}):F.push({func:m,
scope:D}):(e[E][J]=F=[{func:m,scope:D}],F.fakeName=P,F.capture=I,F.nativeHandler=M,"ready"===J?t(w,M,g):f(w,P||J,M,I)))}w=F=0;return m}};g.unbind=function(w,z,m){var D,F,G,I;if(!w||3===w.nodeType||8===w.nodeType)return g;if(D=w[v]){var H=e[D];if(z)for(z=z.split(" "),G=z.length;G--;){var E=z[G];if(F=H[E]){if(m)for(I=F.length;I--;)if(F[I].func===m){var J=F.nativeHandler,M=F.fakeName,P=F.capture;F=F.slice(0,I).concat(F.slice(I+1));F.nativeHandler=J;F.fakeName=M;F.capture=P;H[E]=F}m&&0!==F.length||(delete H[E],
n(w,F.fakeName||E,F.nativeHandler,F.capture))}}else{for(E in H)F=H[E],n(w,F.fakeName||E,F.nativeHandler,F.capture);H={}}for(E in H)return g;delete e[D];try{delete w[v]}catch(Q){w[v]=null}}return g};g.fire=function(w,z,m){if(!w||3===w.nodeType||8===w.nodeType)return g;m=x(null,m);m.type=z;m.target=w;do(z=w[v])&&k(m,z),w=w.parentNode||w.ownerDocument||w.defaultView||w.parentWindow;while(w&&!m.isPropagationStopped());return g};g.clean=function(w){var z,m=g.unbind;if(!w||3===w.nodeType||8===w.nodeType)return g;
w[v]&&m(w);w.getElementsByTagName||(w=w.document);if(w&&w.getElementsByTagName){m(w);var D=w.getElementsByTagName("*");for(z=D.length;z--;)w=D[z],w[v]&&m(w)}return g};g.destroy=function(){e={}};g.cancel=function(w){w&&(w.preventDefault(),w.stopImmediatePropagation());return!1}};p.Event=new p;p.Event.bind(r,"ready",function(){});return p});L("tinymce.core.dom.Sizzle",[],function(){function u(K,R,T,da){var Z,Y,ca,ka;(R?R.ownerDocument||R:G)!==h&&Ja(R);R=R||h;T=T||[];if(!K||"string"!==typeof K)return T;
if(1!==(ka=R.nodeType)&&9!==ka)return[];if(w&&!da){if(Z=na.exec(K))if(ca=Z[1])if(9===ka)if((Y=R.getElementById(ca))&&Y.parentNode){if(Y.id===ca)return T.push(Y),T}else return T;else{if(R.ownerDocument&&(Y=R.ownerDocument.getElementById(ca))&&D(R,Y)&&Y.id===ca)return T.push(Y),T}else{if(Z[2])return N.apply(T,R.getElementsByTagName(K)),T;if((ca=Z[3])&&za.getElementsByClassName)return N.apply(T,R.getElementsByClassName(ca)),T}if(za.qsa&&(!z||!z.test(K))){Y=Z=F;ca=R;var ja=9===ka&&K;if(1===ka&&"object"!==
R.nodeName.toLowerCase()){ka=Ka(K);(Z=R.getAttribute("id"))?Y=Z.replace(va,"\\$&"):R.setAttribute("id",Y);Y="[id='"+Y+"'] ";for(ca=ka.length;ca--;)ka[ca]=Y+n(ka[ca]);ca=ua.test(K)&&a(R.parentNode)||R;ja=ka.join(",")}if(ja)try{return N.apply(T,ca.querySelectorAll(ja)),T}catch(ma){}finally{Z||R.removeAttribute("id")}}}return Oa(K.replace(X,"$1"),R,T,da)}function r(){function K(T,da){R.push(T+" ")>xa.cacheLength&&delete K[R.shift()];return K[T+" "]=da}var R=[];return K}function q(K){K[F]=!0;return K}
function l(K,R){var T=R&&K,da=T&&1===K.nodeType&&1===R.nodeType&&(~R.sourceIndex||-2147483648)-(~K.sourceIndex||-2147483648);if(da)return da;if(T)for(;T=T.nextSibling;)if(T===R)return-1;return K?1:-1}function b(K){return function(R){return"input"===R.nodeName.toLowerCase()&&R.type===K}}function c(K){return function(R){var T=R.nodeName.toLowerCase();return("input"===T||"button"===T)&&R.type===K}}function d(K){return q(function(R){R=+R;return q(function(T,da){for(var Z,Y=K([],T.length,R),ca=Y.length;ca--;)T[Z=
Y[ca]]&&(T[Z]=!(da[Z]=T[Z]))})})}function a(K){return K&&"undefined"!==typeof K.getElementsByTagName&&K}function f(){}function n(K){for(var R=0,T=K.length,da="";R<T;R++)da+=K[R].value;return da}function A(K,R,T){var da=R.dir,Z=T&&"parentNode"===da,Y=H++;return R.first?function(ca,ka,ja){for(;ca=ca[da];)if(1===ca.nodeType||Z)return K(ca,ka,ja)}:function(ca,ka,ja){var ma,oa=[I,Y];if(ja)for(;ca=ca[da];){if((1===ca.nodeType||Z)&&K(ca,ka,ja))return!0}else for(;ca=ca[da];)if(1===ca.nodeType||Z){var sa=
ca[F]||(ca[F]={});if((ma=sa[da])&&ma[0]===I&&ma[1]===Y)return oa[2]=ma[2];sa[da]=oa;if(oa[2]=K(ca,ka,ja))return!0}}}function x(K){return 1<K.length?function(R,T,da){for(var Z=K.length;Z--;)if(!K[Z](R,T,da))return!1;return!0}:K[0]}function t(K,R,T,da,Z){for(var Y,ca=[],ka=0,ja=K.length,ma=null!=R;ka<ja;ka++)if(Y=K[ka])if(!T||T(Y,da,Z))ca.push(Y),ma&&R.push(ka);return ca}function p(K,R,T,da,Z,Y){da&&!da[F]&&(da=p(da));Z&&!Z[F]&&(Z=p(Z,Y));return q(function(ca,ka,ja,ma){var oa,sa=[],Ca=[],Ia=ka.length,
Aa;if(!(Aa=ca)){Aa=R||"*";for(var wa=ja.nodeType?[ja]:ja,Da=[],Ea=0,La=wa.length;Ea<La;Ea++)u(Aa,wa[Ea],Da);Aa=Da}Aa=!K||!ca&&R?Aa:t(Aa,sa,K,ja,ma);wa=T?Z||(ca?K:Ia||da)?[]:ka:Aa;T&&T(Aa,wa,ja,ma);if(da){var Ga=t(wa,Ca);da(Ga,[],ja,ma);for(ja=Ga.length;ja--;)if(oa=Ga[ja])wa[Ca[ja]]=!(Aa[Ca[ja]]=oa)}if(ca){if(Z||K){if(Z){Ga=[];for(ja=wa.length;ja--;)(oa=wa[ja])&&Ga.push(Aa[ja]=oa);Z(null,wa=[],Ga,ma)}for(ja=wa.length;ja--;)(oa=wa[ja])&&-1<(Ga=Z?U.call(ca,oa):sa[ja])&&(ca[Ga]=!(ka[Ga]=oa))}}else wa=
t(wa===ka?wa.splice(Ia,wa.length):wa),Z?Z(null,ka,wa,ma):N.apply(ka,wa)})}function g(K){var R,T,da=K.length,Z=xa.relative[K[0].type];var Y=Z||xa.relative[" "];for(var ca=Z?1:0,ka=A(function(oa){return oa===R},Y,!0),ja=A(function(oa){return-1<U.call(R,oa)},Y,!0),ma=[function(oa,sa,Ca){return!Z&&(Ca||sa!==y)||((R=sa).nodeType?ka(oa,sa,Ca):ja(oa,sa,Ca))}];ca<da;ca++)if(Y=xa.relative[K[ca].type])ma=[A(x(ma),Y)];else{Y=xa.filter[K[ca].type].apply(null,K[ca].matches);if(Y[F]){for(T=++ca;T<da&&!xa.relative[K[T].type];T++);
return p(1<ca&&x(ma),1<ca&&n(K.slice(0,ca-1).concat({value:" "===K[ca-2].type?"*":""})).replace(X,"$1"),Y,ca<T&&g(K.slice(ca,T)),T<da&&g(K=K.slice(T)),T<da&&n(K))}ma.push(Y)}return x(ma)}function e(K,R){var T=0<R.length,da=0<K.length,Z=function(Y,ca,ka,ja,ma){var oa,sa,Ca,Ia=0,Aa="0",wa=Y&&[],Da=[],Ea=y,La=Y||da&&xa.find.TAG("*",ma),Ga=I+=null==Ea?1:Math.random()||.1,Pa=La.length;for(ma&&(y=ca!==h&&ca);Aa!==Pa&&null!=(oa=La[Aa]);Aa++){if(da&&oa){for(sa=0;Ca=K[sa++];)if(Ca(oa,ca,ka)){ja.push(oa);break}ma&&
(I=Ga)}T&&((oa=!Ca&&oa)&&Ia--,Y&&wa.push(oa))}Ia+=Aa;if(T&&Aa!==Ia){for(sa=0;Ca=R[sa++];)Ca(wa,Da,ca,ka);if(Y){if(0<Ia)for(;Aa--;)wa[Aa]||Da[Aa]||(Da[Aa]=W.call(ja));Da=t(Da)}N.apply(ja,Da);ma&&!Y&&0<Da.length&&1<Ia+R.length&&u.uniqueSort(ja)}ma&&(I=Ga,y=Ea);return wa};return T?q(Z):Z}var v,y,C,B,h,k,w,z,m,D,F="sizzle"+-new Date,G=window.document,I=0,H=0,E=r(),J=r(),M=r(),P=function(K,R){K===R&&(B=!0);return 0},Q={}.hasOwnProperty,V=[],W=V.pop,ba=V.push,N=V.push,O=V.slice,U=V.indexOf||function(K){for(var R=
0,T=this.length;R<T;R++)if(this[R]===K)return R;return-1},X=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,S=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,aa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,fa=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ia=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
ta=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,pa={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ya=/^(?:input|select|textarea|button)$/i,ha=/^h\d$/i,ea=
/^[^{]+\{\s*\[native \w/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/[+~]/,va=/'|\\/g,Fa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Ba=function(K,R,T){K="0x"+R-65536;return K!==K||T?R:0>K?String.fromCharCode(K+65536):String.fromCharCode(K>>10|55296,K&1023|56320)};try{N.apply(V=O.call(G.childNodes),G.childNodes),V[G.childNodes.length].nodeType}catch(K){N={apply:V.length?function(R,T){ba.apply(R,O.call(T))}:function(R,T){for(var da=R.length,Z=0;R[da++]=T[Z++];);R.length=da-1}}}var za=u.support=
{};var Ha=u.isXML=function(K){return(K=K&&(K.ownerDocument||K).documentElement)?"HTML"!==K.nodeName:!1};var Ja=u.setDocument=function(K){var R=K?K.ownerDocument||K:G;K=R.defaultView;if(R===h||9!==R.nodeType||!R.documentElement)return h;h=R;k=R.documentElement;w=!Ha(R);var T;if(T=K){a:{try{var da=K.top;break a}catch(Z){}da=null}T=K!==da}T&&(K.addEventListener?K.addEventListener("unload",function(){Ja()},!1):K.attachEvent&&K.attachEvent("onunload",function(){Ja()}));za.attributes=!0;za.getElementsByTagName=
!0;za.getElementsByClassName=ea.test(R.getElementsByClassName);za.getById=!0;xa.find.ID=function(Z,Y){if("undefined"!==typeof Y.getElementById&&w)return(Z=Y.getElementById(Z))&&Z.parentNode?[Z]:[]};xa.filter.ID=function(Z){var Y=Z.replace(Fa,Ba);return function(ca){return ca.getAttribute("id")===Y}};xa.find.TAG=za.getElementsByTagName?function(Z,Y){if("undefined"!==typeof Y.getElementsByTagName)return Y.getElementsByTagName(Z)}:function(Z,Y){var ca=[],ka=0;Y=Y.getElementsByTagName(Z);if("*"===Z){for(;Z=
Y[ka++];)1===Z.nodeType&&ca.push(Z);return ca}return Y};xa.find.CLASS=za.getElementsByClassName&&function(Z,Y){if(w)return Y.getElementsByClassName(Z)};m=[];z=[];za.disconnectedMatch=!0;z=z.length&&new RegExp(z.join("|"));m=m.length&&new RegExp(m.join("|"));D=(da=ea.test(k.compareDocumentPosition))||ea.test(k.contains)?function(Z,Y){var ca=9===Z.nodeType?Z.documentElement:Z;Y=Y&&Y.parentNode;return Z===Y||!!(Y&&1===Y.nodeType&&(ca.contains?ca.contains(Y):Z.compareDocumentPosition&&Z.compareDocumentPosition(Y)&
16))}:function(Z,Y){if(Y)for(;Y=Y.parentNode;)if(Y===Z)return!0;return!1};P=da?function(Z,Y){if(Z===Y)return B=!0,0;var ca=!Z.compareDocumentPosition-!Y.compareDocumentPosition;if(ca)return ca;ca=(Z.ownerDocument||Z)===(Y.ownerDocument||Y)?Z.compareDocumentPosition(Y):1;return ca&1||!za.sortDetached&&Y.compareDocumentPosition(Z)===ca?Z===R||Z.ownerDocument===G&&D(G,Z)?-1:Y===R||Y.ownerDocument===G&&D(G,Y)?1:C?U.call(C,Z)-U.call(C,Y):0:ca&4?-1:1}:function(Z,Y){if(Z===Y)return B=!0,0;var ca=0,ka=Z.parentNode,
ja=Y.parentNode,ma=[Z],oa=[Y];if(!ka||!ja)return Z===R?-1:Y===R?1:ka?-1:ja?1:C?U.call(C,Z)-U.call(C,Y):0;if(ka===ja)return l(Z,Y);for(;Z=Z.parentNode;)ma.unshift(Z);for(Z=Y;Z=Z.parentNode;)oa.unshift(Z);for(;ma[ca]===oa[ca];)ca++;return ca?l(ma[ca],oa[ca]):ma[ca]===G?-1:oa[ca]===G?1:0};return R};u.matches=function(K,R){return u(K,null,null,R)};u.matchesSelector=function(K,R){(K.ownerDocument||K)!==h&&Ja(K);R=R.replace(fa,"='$1']");if(!(!za.matchesSelector||!w||m&&m.test(R)||z&&z.test(R)))try{var T=
(void 0).call(K,R);if(T||za.disconnectedMatch||K.document&&11!==K.document.nodeType)return T}catch(da){}return 0<u(R,h,null,[K]).length};u.contains=function(K,R){(K.ownerDocument||K)!==h&&Ja(K);return D(K,R)};u.attr=function(K,R){(K.ownerDocument||K)!==h&&Ja(K);var T=xa.attrHandle[R.toLowerCase()];T=T&&Q.call(xa.attrHandle,R.toLowerCase())?T(K,R,!w):void 0;return void 0!==T?T:za.attributes||!w?K.getAttribute(R):(T=K.getAttributeNode(R))&&T.specified?T.value:null};u.error=function(K){throw Error("Syntax error, unrecognized expression: "+
K);};u.uniqueSort=function(K){var R,T=[],da=0,Z=0;B=!za.detectDuplicates;C=!za.sortStable&&K.slice(0);K.sort(P);if(B){for(;R=K[Z++];)R===K[Z]&&(da=T.push(Z));for(;da--;)K.splice(T[da],1)}C=null;return K};var Ma=u.getText=function(K){var R="",T=0;var da=K.nodeType;if(!da)for(;da=K[T++];)R+=Ma(da);else if(1===da||9===da||11===da){if("string"===typeof K.textContent)return K.textContent;for(K=K.firstChild;K;K=K.nextSibling)R+=Ma(K)}else if(3===da||4===da)return K.nodeValue;return R};var xa=u.selectors=
{cacheLength:50,createPseudo:q,match:pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(K){K[1]=K[1].replace(Fa,Ba);K[3]=(K[3]||K[4]||K[5]||"").replace(Fa,Ba);"~="===K[2]&&(K[3]=" "+K[3]+" ");return K.slice(0,4)},CHILD:function(K){K[1]=K[1].toLowerCase();"nth"===K[1].slice(0,3)?(K[3]||u.error(K[0]),K[4]=+(K[4]?K[5]+(K[6]||1):2*("even"===K[3]||"odd"===K[3])),K[5]=+(K[7]+
K[8]||"odd"===K[3])):K[3]&&u.error(K[0]);return K},PSEUDO:function(K){var R,T=!K[6]&&K[2];if(pa.CHILD.test(K[0]))return null;K[3]?K[2]=K[4]||K[5]||"":T&&ia.test(T)&&(R=Ka(T,!0))&&(R=T.indexOf(")",T.length-R)-T.length)&&(K[0]=K[0].slice(0,R),K[2]=T.slice(0,R));return K.slice(0,3)}},filter:{TAG:function(K){var R=K.replace(Fa,Ba).toLowerCase();return"*"===K?function(){return!0}:function(T){return T.nodeName&&T.nodeName.toLowerCase()===R}},CLASS:function(K){var R=E[K+" "];return R||(R=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+
K+"([\\x20\\t\\r\\n\\f]|$)"),E(K,function(T){return R.test("string"===typeof T.className&&T.className||"undefined"!==typeof T.getAttribute&&T.getAttribute("class")||"")}))},ATTR:function(K,R,T){return function(da){da=u.attr(da,K);if(null==da)return"!="===R;if(!R)return!0;da+="";return"="===R?da===T:"!="===R?da!==T:"^="===R?T&&0===da.indexOf(T):"*="===R?T&&-1<da.indexOf(T):"$="===R?T&&da.slice(-T.length)===T:"~="===R?-1<(" "+da+" ").indexOf(T):"|="===R?da===T||da.slice(0,T.length+1)===T+"-":!1}},CHILD:function(K,
R,T,da,Z){var Y="nth"!==K.slice(0,3),ca="last"!==K.slice(-4),ka="of-type"===R;return 1===da&&0===Z?function(ja){return!!ja.parentNode}:function(ja,ma,oa){var sa;ma=Y!==ca?"nextSibling":"previousSibling";var Ca=ja.parentNode,Ia=ka&&ja.nodeName.toLowerCase();oa=!oa&&!ka;if(Ca){if(Y){for(;ma;){for(sa=ja;sa=sa[ma];)if(ka?sa.nodeName.toLowerCase()===Ia:1===sa.nodeType)return!1;var Aa=ma="only"===K&&!Aa&&"nextSibling"}return!0}Aa=[ca?Ca.firstChild:Ca.lastChild];if(ca&&oa){oa=Ca[F]||(Ca[F]={});var wa=oa[K]||
[];var Da=wa[0]===I&&wa[1];var Ea=wa[0]===I&&wa[2];for(sa=Da&&Ca.childNodes[Da];sa=++Da&&sa&&sa[ma]||(Ea=Da=0)||Aa.pop();)if(1===sa.nodeType&&++Ea&&sa===ja){oa[K]=[I,Da,Ea];break}}else if(oa&&(wa=(ja[F]||(ja[F]={}))[K])&&wa[0]===I)Ea=wa[1];else for(;(sa=++Da&&sa&&sa[ma]||(Ea=Da=0)||Aa.pop())&&((ka?sa.nodeName.toLowerCase()!==Ia:1!==sa.nodeType)||!++Ea||(oa&&((sa[F]||(sa[F]={}))[K]=[I,Ea]),sa!==ja)););Ea-=Z;return Ea===da||0===Ea%da&&0<=Ea/da}}},PSEUDO:function(K,R){var T=xa.pseudos[K]||xa.setFilters[K.toLowerCase()]||
u.error("unsupported pseudo: "+K);if(T[F])return T(R);if(1<T.length){var da=[K,K,"",R];return xa.setFilters.hasOwnProperty(K.toLowerCase())?q(function(Z,Y){for(var ca,ka=T(Z,R),ja=ka.length;ja--;)ca=U.call(Z,ka[ja]),Z[ca]=!(Y[ca]=ka[ja])}):function(Z){return T(Z,0,da)}}return T}},pseudos:{not:q(function(K){var R=[],T=[],da=Na(K.replace(X,"$1"));return da[F]?q(function(Z,Y,ca,ka){ka=da(Z,null,ka,[]);for(var ja=Z.length;ja--;)if(ca=ka[ja])Z[ja]=!(Y[ja]=ca)}):function(Z,Y,ca){R[0]=Z;da(R,null,ca,T);
return!T.pop()}}),has:q(function(K){return function(R){return 0<u(K,R).length}}),contains:q(function(K){K=K.replace(Fa,Ba);return function(R){return-1<(R.textContent||R.innerText||Ma(R)).indexOf(K)}}),lang:q(function(K){ta.test(K||"")||u.error("unsupported lang: "+K);K=K.replace(Fa,Ba).toLowerCase();return function(R){var T;do if(T=w?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return T=T.toLowerCase(),T===K||0===T.indexOf(K+"-");while((R=R.parentNode)&&1===R.nodeType);return!1}}),target:function(K){var R=
window.location&&window.location.hash;return R&&R.slice(1)===K.id},root:function(K){return K===k},focus:function(K){return K===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(K.type||K.href||~K.tabIndex)},enabled:function(K){return!1===K.disabled},disabled:function(K){return!0===K.disabled},checked:function(K){var R=K.nodeName.toLowerCase();return"input"===R&&!!K.checked||"option"===R&&!!K.selected},selected:function(K){K.parentNode&&K.parentNode.selectedIndex;return!0===K.selected},empty:function(K){for(K=
K.firstChild;K;K=K.nextSibling)if(6>K.nodeType)return!1;return!0},parent:function(K){return!xa.pseudos.empty(K)},header:function(K){return ha.test(K.nodeName)},input:function(K){return ya.test(K.nodeName)},button:function(K){var R=K.nodeName.toLowerCase();return"input"===R&&"button"===K.type||"button"===R},text:function(K){var R;return"input"===K.nodeName.toLowerCase()&&"text"===K.type&&(null==(R=K.getAttribute("type"))||"text"===R.toLowerCase())},first:d(function(){return[0]}),last:d(function(K,
R){return[R-1]}),eq:d(function(K,R,T){return[0>T?T+R:T]}),even:d(function(K,R){for(var T=0;T<R;T+=2)K.push(T);return K}),odd:d(function(K,R){for(var T=1;T<R;T+=2)K.push(T);return K}),lt:d(function(K,R,T){for(R=0>T?T+R:T;0<=--R;)K.push(R);return K}),gt:d(function(K,R,T){for(T=0>T?T+R:T;++T<R;)K.push(T);return K})}};xa.pseudos.nth=xa.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})xa.pseudos[v]=b(v);for(v in{submit:!0,reset:!0})xa.pseudos[v]=c(v);f.prototype=xa.filters=xa.pseudos;
xa.setFilters=new f;var Ka=u.tokenize=function(K,R){var T,da,Z,Y,ca;if(Y=J[K+" "])return R?0:Y.slice(0);Y=K;var ka=[];for(ca=xa.preFilter;Y;){if(!ja||(T=S.exec(Y)))T&&(Y=Y.slice(T[0].length)||Y),ka.push(da=[]);var ja=!1;if(T=aa.exec(Y))ja=T.shift(),da.push({value:ja,type:T[0].replace(X," ")}),Y=Y.slice(ja.length);for(Z in xa.filter)!(T=pa[Z].exec(Y))||ca[Z]&&!(T=ca[Z](T))||(ja=T.shift(),da.push({value:ja,type:Z,matches:T}),Y=Y.slice(ja.length));if(!ja)break}return R?Y.length:Y?u.error(K):J(K,ka).slice(0)};
var Na=u.compile=function(K,R){var T,da=[],Z=[],Y=M[K+" "];if(!Y){R||(R=Ka(K));for(T=R.length;T--;)Y=g(R[T]),Y[F]?da.push(Y):Z.push(Y);Y=M(K,e(Z,da));Y.selector=K}return Y};var Oa=u.select=function(K,R,T,da){var Z,Y,ca,ka="function"===typeof K&&K,ja=!da&&Ka(K=ka.selector||K);T=T||[];if(1===ja.length){var ma=ja[0]=ja[0].slice(0);if(2<ma.length&&"ID"===(Y=ma[0]).type&&za.getById&&9===R.nodeType&&w&&xa.relative[ma[1].type]){R=(xa.find.ID(Y.matches[0].replace(Fa,Ba),R)||[])[0];if(!R)return T;ka&&(R=R.parentNode);
K=K.slice(ma.shift().value.length)}for(Z=pa.needsContext.test(K)?0:ma.length;Z--;){Y=ma[Z];if(xa.relative[ca=Y.type])break;if(ca=xa.find[ca])if(da=ca(Y.matches[0].replace(Fa,Ba),ua.test(ma[0].type)&&a(R.parentNode)||R)){ma.splice(Z,1);K=da.length&&n(ma);if(!K)return N.apply(T,da),T;break}}}(ka||Na(K,ja))(da,R,!w,T,ua.test(K)&&a(R.parentNode)||R);return T};za.sortStable=F.split("").sort(P).join("")===F;za.detectDuplicates=!!B;Ja();za.sortDetached=!0;return u});L("tinymce.core.util.Arr",[],function(){var u=
Array.isArray||function(l){return"[object Array]"===Object.prototype.toString.call(l)},r=function(l,b,c){var d;if(!l)return 0;c=c||l;if(void 0!==l.length){var a=0;for(d=l.length;a<d;a++)if(!1===b.call(c,l[a],a,l))return 0}else for(a in l)if(l.hasOwnProperty(a)&&!1===b.call(c,l[a],a,l))return 0;return 1},q=function(l,b,c){var d;var a=0;for(d=l.length;a<d;a++)if(b.call(c,l[a],a,l))return a;return-1};return{isArray:u,toArray:function(l){var b=l,c;if(!u(l)){b=[];var d=0;for(c=l.length;d<c;d++)b[d]=l[d]}return b},
each:r,map:function(l,b){var c=[];r(l,function(d,a){c.push(b(d,a,l))});return c},filter:function(l,b){var c=[];r(l,function(d,a){b&&!b(d,a,l)||c.push(d)});return c},indexOf:function(l,b){var c;if(l){var d=0;for(c=l.length;d<c;d++)if(l[d]===b)return d}return-1},reduce:function(l,b,c,d){var a=0;for(3>arguments.length&&(c=l[0]);a<l.length;a++)c=b.call(d,c,l[a],a);return c},findIndex:q,find:function(l,b,c){b=q(l,b,c);if(-1!==b)return l[b]},last:function(l){return l[l.length-1]}}});L("tinymce.core.util.Tools",
["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(u,r,q){var l=/^\s*|\s*$/g,b=function(a){return null===a||void 0===a?"":(""+a).replace(l,"")},c=function(a,f){return f?"array"==f&&q.isArray(a)?!0:typeof a==f:void 0!==a},d=function(a,f,n,A){A=A||this;a&&(n&&(a=a[n]),q.each(a,function(x,t){if(!1===f.call(A,x,t,n))return!1;d(x,f,n,A)}))};return{trim:b,isArray:q.isArray,is:c,toArray:q.toArray,makeMap:function(a,f,n){a=a||[];"string"==typeof a&&(a=a.split(f||","));n=n||{};for(f=a.length;f--;)n[a[f]]=
{};return n},each:q.each,map:q.map,grep:q.filter,inArray:q.indexOf,hasOwn:function(a,f){return Object.prototype.hasOwnProperty.call(a,f)},extend:function(a,f){var n,A,x=arguments;var t=1;for(n=x.length;t<n;t++)for(A in f=x[t],f)if(f.hasOwnProperty(A)){var p=f[A];void 0!==p&&(a[A]=p)}return a},create:function(a,f,n){var A=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);var x=a[3].match(/(^|\.)(\w+)$/i)[2];var t=this.createNS(a[3].replace(/\.\w+$/,""),n);if(!t[x])if("static"==a[2]){if(t[x]=f,this.onCreate)this.onCreate(a[2],
a[3],t[x])}else{f[x]||(f[x]=function(){},A=1);t[x]=f[x];this.extend(t[x].prototype,f);if(a[5]){var p=this.resolve(a[5]).prototype;var g=a[5].match(/\.(\w+)$/i)[1];var e=t[x];t[x]=A?function(){return p[g].apply(this,arguments)}:function(){this.parent=p[g];return e.apply(this,arguments)};t[x].prototype[x]=t[x];this.each(p,function(v,y){t[x].prototype[y]=p[y]});this.each(f,function(v,y){p[y]?t[x].prototype[y]=function(){this.parent=p[y];return v.apply(this,arguments)}:y!=x&&(t[x].prototype[y]=v)})}this.each(f["static"],
function(v,y){t[x][y]=v})}},walk:d,createNS:function(a,f){var n;f=f||u;a=a.split(".");for(n=0;n<a.length;n++){var A=a[n];f[A]||(f[A]={});f=f[A]}return f},resolve:function(a,f){var n;f=f||u;a=a.split(".");var A=0;for(n=a.length;A<n&&(f=f[a[A]],f);A++);return f},explode:function(a,f){return!a||c(a,"array")?a:q.map(a.split(f||","),b)},_addCacheSuffix:function(a){var f=r.cacheSuffix;f&&(a+=(-1===a.indexOf("?")?"?":"&")+f);return a}}});L("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils",
"tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(u,r,q,l,b){var c=Array.prototype.push,d=Array.prototype.slice,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=r.Event,n=b.makeMap("children,contents,next,prev"),A=function(E){return"undefined"!==typeof E},x=function(E,J){J=J||u;var M=J.createElement("div");J=J.createDocumentFragment();for(M.innerHTML=E;E=M.firstChild;)J.appendChild(E);return J},t=function(E,J,M,P){var Q;if("string"===typeof J)J=x(J,F(E[0]));else if(J.length&&
!J.nodeType){J=k.makeArray(J);if(P)for(Q=J.length-1;0<=Q;Q--)t(E,J[Q],M,P);else for(Q=0;Q<J.length;Q++)t(E,J[Q],M,P);return E}if(J.nodeType)for(Q=E.length;Q--;)M.call(E[Q],J);return E},p=function(E,J){return E&&J&&-1!==(" "+E.className+" ").indexOf(" "+J+" ")},g=function(E,J,M){var P,Q;J=k(J)[0];E.each(function(){M&&P==this.parentNode||(P=this.parentNode,Q=J.cloneNode(!1),this.parentNode.insertBefore(Q,this));Q.appendChild(this)});return E},e=b.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom",
" "),v=b.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),y={"for":"htmlFor","class":"className",readonly:"readOnly"},C={"float":"cssFloat"},B={},h={},k=function(E,J){return new k.fn.init(E,J)},w=/^\s*|\s*$/g,z=function(E){return null===E||void 0===E?"":(""+E).replace(w,"")},m=function(E,J){var M;if(E){var P=E.length;if(void 0===P)for(M in E){if(E.hasOwnProperty(M)){var Q=E[M];if(!1===J.call(Q,M,Q))break}}else for(M=0;M<P&&(Q=E[M],!1!==J.call(Q,
M,Q));M++);}return E},D=function(E,J){var M=[];m(E,function(P,Q){J(Q,P)&&M.push(Q)});return M},F=function(E){return E?9==E.nodeType?E:E.ownerDocument:u};k.fn=k.prototype={constructor:k,selector:"",context:null,length:0,init:function(E,J){var M;if(!E)return this;if(E.nodeType)return this.context=this[0]=E,this.length=1,this;if(J&&J.nodeType)this.context=J;else{if(J)return k(E).attr(J);this.context=J=u}if("string"===typeof E)if(this.selector=E,M="<"===E.charAt(0)&&">"===E.charAt(E.length-1)&&3<=E.length?
[null,E,null]:a.exec(E))if(M[1])for(J=x(E,F(J)).firstChild;J;)c.call(this,J),J=J.nextSibling;else{J=F(J).getElementById(M[2]);if(!J)return this;if(J.id!==M[2])return this.find(E);this.length=1;this[0]=J}else return k(J).find(E);else this.add(E,!1);return this},toArray:function(){return b.toArray(this)},add:function(E,J){if("string"===typeof E)return this.add(k(E));if(!1!==J)for(E=k.unique(this.toArray().concat(k.makeArray(E))),this.length=E.length,J=0;J<E.length;J++)this[J]=E[J];else c.apply(this,
k.makeArray(E));return this},attr:function(E,J){var M=this,P;if("object"===typeof E)m(E,function(Q,V){M.attr(Q,V)});else if(A(J))this.each(function(){var Q;1===this.nodeType&&((Q=B[E])&&Q.set?Q.set(this,J):null===J?this.removeAttribute(E,2):this.setAttribute(E,J,2))});else{if(M[0]&&1===M[0].nodeType){if((P=B[E])&&P.get)return P.get(M[0],E);if(v[E])return M.prop(E)?E:void 0;J=M[0].getAttribute(E,2);null===J&&(J=void 0)}return J}return M},removeAttr:function(E){return this.attr(E,null)},prop:function(E,
J){var M=this;E=y[E]||E;if("object"===typeof E)m(E,function(P,Q){M.prop(P,Q)});else if(A(J))this.each(function(){1==this.nodeType&&(this[E]=J)});else return M[0]&&M[0].nodeType&&E in M[0]?M[0][E]:J;return M},css:function(E,J){var M=this,P,Q=function(ba){return ba.replace(/-(\D)/g,function(N,O){return O.toUpperCase()})},V=function(ba){return ba.replace(/[A-Z]/g,function(N){return"-"+N})};if("object"===typeof E)m(E,function(ba,N){M.css(ba,N)});else if(A(J))E=Q(E),"number"!==typeof J||e[E]||(J+="px"),
M.each(function(){var ba=this.style;if((P=h[E])&&P.set)P.set(this,J);else{try{this.style[C[E]||E]=J}catch(N){}if(null===J||""===J)ba.removeProperty?ba.removeProperty(V(E)):ba.removeAttribute(E)}});else{var W=M[0];if((P=h[E])&&P.get)return P.get(W);if(W.ownerDocument.defaultView)try{return W.ownerDocument.defaultView.getComputedStyle(W,null).getPropertyValue(V(E))}catch(ba){return}else if(W.currentStyle)return W.currentStyle[Q(E)]}return M},remove:function(){for(var E,J=this.length;J--;)E=this[J],
f.clean(E),E.parentNode&&E.parentNode.removeChild(E);return this},empty:function(){for(var E,J=this.length;J--;)for(E=this[J];E.firstChild;)E.removeChild(E.firstChild);return this},html:function(E){if(A(E)){var J=this.length;try{for(;J--;)this[J].innerHTML=E}catch(M){k(this[J]).empty().append(E)}return this}return this[0]?this[0].innerHTML:""},text:function(E){var J;if(A(E)){for(J=this.length;J--;)"innerText"in this[J]?this[J].innerText=E:this[0].textContent=E;return this}return this[0]?this[0].innerText||
this[0].textContent:""},append:function(){return t(this,arguments,function(E){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(E)})},prepend:function(){return t(this,arguments,function(E){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(E,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?t(this,arguments,function(E){this.parentNode.insertBefore(E,this)}):this},after:function(){return this[0]&&this[0].parentNode?t(this,arguments,
function(E){this.parentNode.insertBefore(E,this.nextSibling)},!0):this},appendTo:function(E){k(E).append(this);return this},prependTo:function(E){k(E).prepend(this);return this},replaceWith:function(E){return this.before(E).remove()},wrap:function(E){return g(this,E)},wrapAll:function(E){return g(this,E,!0)},wrapInner:function(E){this.each(function(){k(this).contents().wrapAll(E)});return this},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(this.childNodes)})},clone:function(){var E=
[];this.each(function(){E.push(this.cloneNode(!0))});return k(E)},addClass:function(E){return this.toggleClass(E,!0)},removeClass:function(E){return this.toggleClass(E,!1)},toggleClass:function(E,J){var M=this;if("string"!=typeof E)return M;-1!==E.indexOf(" ")?m(E.split(" "),function(){M.toggleClass(this,J)}):M.each(function(P,Q){var V=p(Q,E);V!==J&&(P=Q.className,Q.className=V?z((" "+P+" ").replace(" "+E+" "," ")):Q.className+(P?" "+E:E))});return M},hasClass:function(E){return p(this[0],E)},each:function(E){return m(this,
E)},on:function(E,J){return this.each(function(){f.bind(this,E,J)})},off:function(E,J){return this.each(function(){f.unbind(this,E,J)})},trigger:function(E){return this.each(function(){"object"==typeof E?f.fire(this,E.type,E):f.fire(this,E)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new k(d.apply(this,arguments))},eq:function(E){return-1===E?this.slice(E):this.slice(E,+E+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
find:function(E){var J,M=[];var P=0;for(J=this.length;P<J;P++)k.find(E,this[P],M);return k(M)},filter:function(E){return"function"==typeof E?k(D(this.toArray(),function(J,M){return E(M,J)})):k(k.filter(E,this.toArray()))},closest:function(E){var J=[];E instanceof k&&(E=E[0]);this.each(function(M,P){for(;P;){if("string"==typeof E&&k(P).is(E)){J.push(P);break}else if(P==E){J.push(P);break}P=P.parentNode}});return k(J)},offset:function(E){var J,M=0,P=0;if(!E){if(J=this[0]){E=J.ownerDocument;var Q=E.documentElement;
J.getBoundingClientRect&&(P=J.getBoundingClientRect(),M=P.left+(Q.scrollLeft||E.body.scrollLeft)-Q.clientLeft,P=P.top+(Q.scrollTop||E.body.scrollTop)-Q.clientTop)}return{left:M,top:P}}return this.css(E)},push:c,sort:[].sort,splice:[].splice};b.extend(k,{extend:b.extend,makeArray:function(E){return E&&E==E.window||E.nodeType?[E]:b.toArray(E)},inArray:function(E,J){var M;if(J.indexOf)return J.indexOf(E);for(M=J.length;M--;)if(J[M]===E)return M;return-1},isArray:b.isArray,each:m,trim:z,grep:D,find:q,
expr:q.selectors,unique:q.uniqueSort,text:q.getText,contains:q.contains,filter:function(E,J,M){var P=J.length;for(M&&(E=":not("+E+")");P--;)1!=J[P].nodeType&&J.splice(P,1);return J=1===J.length?k.find.matchesSelector(J[0],E)?[J[0]]:[]:k.find.matches(E,J)}});var G=function(E,J,M){var P=[];E=E[J];for("string"!=typeof M&&M instanceof k&&(M=M[0]);E&&9!==E.nodeType;){if(void 0!==M){if(E===M)break;if("string"==typeof M&&k(E).is(M))break}1===E.nodeType&&P.push(E);E=E[J]}return P},I=function(E,J,M,P){var Q=
[];for(P instanceof k&&(P=P[0]);E;E=E[J])if(!M||E.nodeType===M){if(void 0!==P){if(E===P)break;if("string"==typeof P&&k(E).is(P))break}Q.push(E)}return Q},H=function(E,J,M){for(E=E[J];E;E=E[J])if(E.nodeType==M)return E;return null};m({parent:function(E){return(E=E.parentNode)&&11!==E.nodeType?E:null},parents:function(E){return G(E,"parentNode")},next:function(E){return H(E,"nextSibling",1)},prev:function(E){return H(E,"previousSibling",1)},children:function(E){return I(E.firstChild,"nextSibling",1)},
contents:function(E){return b.toArray(("iframe"===E.nodeName?E.contentDocument||E.contentWindow.document:E).childNodes)}},function(E,J){k.fn[E]=function(M){var P=[];this.each(function(){var Q=J.call(P,this,M,P);Q&&(k.isArray(Q)?P.push.apply(P,Q):P.push(Q))});1<this.length&&(n[E]||(P=k.unique(P)),0===E.indexOf("parents")&&(P=P.reverse()));P=k(P);return M?P.filter(M):P}});m({parentsUntil:function(E,J){return G(E,"parentNode",J)},nextUntil:function(E,J){return I(E,"nextSibling",1,J).slice(1)},prevUntil:function(E,
J){return I(E,"previousSibling",1,J).slice(1)}},function(E,J){k.fn[E]=function(M,P){var Q=[];this.each(function(){var V=J.call(Q,this,M,Q);V&&(k.isArray(V)?Q.push.apply(Q,V):Q.push(V))});1<this.length&&(Q=k.unique(Q),0===E.indexOf("parents")||"prevUntil"===E)&&(Q=Q.reverse());Q=k(Q);return P?Q.filter(P):Q}});k.fn.is=function(E){return!!E&&0<this.filter(E).length};k.fn.init.prototype=k.fn;k.overrideDefaults=function(E){var J,M=function(P,Q){J=J||E();0===arguments.length&&(P=J.element);Q||(Q=J.context);
return new M.fn.init(P,Q)};k.extend(M,this);return M};r=function(E,J,M){m(M,function(P,Q){E[P]=E[P]||{};E[P][J]=Q})};l.ie&&8>l.ie&&(r(B,"get",{maxlength:function(E){E=E.maxLength;if(2147483647!==E)return E},size:function(E){E=E.size;if(20!==E)return E},"class":function(E){return E.className},style:function(E){E=E.style.cssText;if(0!==E.length)return E}}),r(B,"set",{"class":function(E,J){E.className=J},style:function(E,J){E.style.cssText=J}}));l.ie&&9>l.ie&&(C["float"]="styleFloat",r(h,"set",{opacity:function(E,
J){E=E.style;null===J||""===J?E.removeAttribute("filter"):(E.zoom=1,E.filter="alpha(opacity="+100*J+")")}}));k.attrHooks=B;k.cssHooks=h;return k});L("ephox.katamari.api.Thunk",[],function(){return{cached:function(u){var r=!1,q;return function(){r||(r=!0,q=u.apply(null,arguments));return q}}}});ra("global!Number",Number);L("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(u,r,q){var l=function(){return b(0,0)},b=function(c,d){return{major:c,minor:d}};return{nu:b,
detect:function(c,d){d=q(d).toLowerCase();if(0===c.length)c=l();else{a:{for(var a=0;a<c.length;a++){var f=c[a];if(f.test(d)){c=f;break a}}c=void 0}c=c?b(r(d.replace(c,"$1")),r(d.replace(c,"$2"))):{major:0,minor:0}}return c},unknown:l}});L("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(u,r){var q=function(b,c){return function(){return c===b}},l=function(b){var c=b.current;return{current:c,version:b.version,isEdge:q("Edge",c),isChrome:q("Chrome",c),isIE:q("IE",
c),isOpera:q("Opera",c),isFirefox:q("Firefox",c),isSafari:q("Safari",c)}};return{unknown:function(){return l({current:void 0,version:r.unknown()})},nu:l,edge:u.constant("Edge"),chrome:u.constant("Chrome"),ie:u.constant("IE"),opera:u.constant("Opera"),firefox:u.constant("Firefox"),safari:u.constant("Safari")}});L("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(u,r){var q=function(b,c){return function(){return c===b}},l=function(b){var c=b.current;return{current:c,
version:b.version,isWindows:q("Windows",c),isiOS:q("iOS",c),isAndroid:q("Android",c),isOSX:q("OSX",c),isLinux:q("Linux",c),isSolaris:q("Solaris",c),isFreeBSD:q("FreeBSD",c)}};return{unknown:function(){return l({current:void 0,version:r.unknown()})},nu:l,windows:u.constant("Windows"),ios:u.constant("iOS"),android:u.constant("Android"),linux:u.constant("Linux"),osx:u.constant("OSX"),solaris:u.constant("Solaris"),freebsd:u.constant("FreeBSD")}});L("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],
function(u){return function(r,q,l){var b=r.isiOS()&&!0===/ipad/i.test(l),c=r.isiOS()&&!b,d=r.isAndroid()&&3===r.version.major,a=r.isAndroid()&&4===r.version.major;d=b||d||a&&!0===/mobile/i.test(l);var f=(a=r.isiOS()||r.isAndroid())&&!d;q=q.isSafari()&&r.isiOS()&&!1===/safari/i.test(l);return{isiPad:u.constant(b),isiPhone:u.constant(c),isTablet:u.constant(d),isPhone:u.constant(f),isTouch:u.constant(a),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:u.constant(q)}}});L("ephox.sand.detect.UaString",["ephox.katamari.api.Arr",
"ephox.sand.detect.Version","global!String"],function(u,r,q){var l=function(b,c){var d=q(c).toLowerCase();return u.find(b,function(a){return a.search(d)})};return{detectBrowser:function(b,c){return l(b,c).map(function(d){var a=r.detect(d.versionRegexes,c);return{current:d.name,version:a}})},detectOs:function(b,c){return l(b,c).map(function(d){var a=r.detect(d.versionRegexes,c);return{current:d.name,version:a}})}}});L("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(u,r){return r+
u},addToEnd:function(u,r){return u+r},removeFromStart:function(u,r){return u.substring(r)},removeFromEnd:function(u,r){return u.substring(0,u.length-r)}}});L("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(u,r){return{first:function(q,l){return q.substr(0,l)},last:function(q,l){return q.substr(q.length-l,q.length)},head:function(q){return""===q?u.none():u.some(q.substr(0,1))},tail:function(q){return""===q?u.none():u.some(q.substring(1))}}});L("ephox.katamari.api.Strings",
["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(u,r,q){var l=function(d,a,f){return""===a?!0:d.length<a.length?!1:d.substr(f,f+a.length)===a},b=function(d,a){return l(d,a,0)},c=function(d,a){return l(d,a,d.length-a.length)};return{supplant:function(d,a){return d.replace(/\${([^{}]*)}/g,function(f,n){n=a[n];var A=typeof n;return"string"===A||"number"===A?n:f})},startsWith:b,removeLeading:function(d,a){return b(d,a)?u.removeFromStart(d,a.length):d},removeTrailing:function(d,
a){return c(d,a)?u.removeFromEnd(d,a.length):d},ensureLeading:function(d,a){return b(d,a)?d:u.addToStart(d,a)},ensureTrailing:function(d,a){return c(d,a)?d:u.addToEnd(d,a)},endsWith:c,contains:function(d,a){return-1!==d.indexOf(a)},trim:function(d){return d.replace(/^\s+|\s+$/g,"")},lTrim:function(d){return d.replace(/^\s+/g,"")},rTrim:function(d){return d.replace(/\s+$/g,"")},capitalize:function(d){return r.head(d).bind(function(a){return r.tail(d).map(function(f){return a.toUpperCase()+f})}).getOr(d)}}});
L("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(u,r){var q=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,l=function(b){return function(c){return r.contains(c,b)}};q=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(b){return r.contains(b,"edge/")&&r.contains(b,"chrome")&&r.contains(b,"safari")&&r.contains(b,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,q],search:function(b){return r.contains(b,
"chrome")&&!r.contains(b,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(b){return r.contains(b,"msie")||r.contains(b,"trident")}},{name:"Opera",versionRegexes:[q,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:l("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],search:l("firefox")},{name:"Safari",versionRegexes:[q,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(b){return(r.contains(b,"safari")||r.contains(b,
"mobile/"))&&r.contains(b,"applewebkit")}}];l=[{name:"Windows",search:l("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(b){return r.contains(b,"iphone")||r.contains(b,"ipad")},versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:l("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:l("os x"),versionRegexes:[/.*?os x ?([0-9]+)_([0-9]+).*/]},
{name:"Linux",search:l("linux"),versionRegexes:[]},{name:"Solaris",search:l("sunos"),versionRegexes:[]},{name:"FreeBSD",search:l("freebsd"),versionRegexes:[]}];return{browsers:u.constant(q),oses:u.constant(l)}});L("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(u,r,q,l,b){return{detect:function(c){var d=b.browsers(),a=b.oses();d=l.detectBrowser(d,c).fold(u.unknown,
u.nu);a=l.detectOs(a,c).fold(r.unknown,r.nu);c=q(a,d,c);return{browser:d,os:a,deviceType:c}}}});L("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(u,r,q){return{detect:u.cached(function(){return r.detect(q.userAgent)})}});L("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});L("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console",
"global!document"],function(u,r,q,l){var b=function(c){if(null===c||void 0===c)throw new r("Node cannot be null or undefined");return{dom:u.constant(c)}};return{fromHtml:function(c,d){d=(d||l).createElement("div");d.innerHTML=c;if(!d.hasChildNodes()||1<d.childNodes.length)throw q.error("HTML does not have a single root node",c),"HTML must have a single root node";return b(d.childNodes[0])},fromTag:function(c,d){c=(d||l).createElement(c);return b(c)},fromText:function(c,d){c=(d||l).createTextNode(c);
return b(c)},fromDom:b}});L("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});L("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(u){var r=function(d){return d.dom().nodeName.toLowerCase()},q=function(d){return d.dom().nodeType},l=function(d){return function(a){return q(a)===d}},b=l(u.ELEMENT),c=l(u.TEXT);
l=l(u.DOCUMENT);return{name:r,type:q,value:function(d){return d.dom().nodeValue},isElement:b,isText:c,isDocument:l,isComment:function(d){return q(d)===u.COMMENT||"#comment"===r(d)}}});L("ephox.katamari.api.Type",["global!Array","global!String"],function(u,r){var q=function(l){return function(b){if(null===b)b="null";else{var c=typeof b;b="object"===c&&u.prototype.isPrototypeOf(b)?"array":"object"===c&&r.prototype.isPrototypeOf(b)?"string":c}return b===l}};return{isString:q("string"),isObject:q("object"),
isArray:q("array"),isNull:q("null"),isBoolean:q("boolean"),isUndefined:q("undefined"),isFunction:q("function"),isNumber:q("number")}});L("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(u,r){var q=function(){var a=r.keys,f=function(n){var A=[],x;for(x in n)n.hasOwnProperty(x)&&A.push(x);return A};return void 0===a?f:a}(),l=function(a,f){for(var n=q(a),A=0,x=n.length;A<x;A++){var t=n[A];f(a[t],t,a)}},b=function(a,f){var n={};l(a,function(A,x){A=f(A,x,a);n[A.k]=A.v});
return n},c=function(a,f){var n=[];l(a,function(A,x){n.push(f(A,x))});return n},d=function(a){return c(a,function(f){return f})};return{bifilter:function(a,f){var n={},A={};l(a,function(x,t){(f(x,t)?n:A)[t]=x});return{t:n,f:A}},each:l,map:function(a,f){return b(a,function(n,A,x){return{k:A,v:f(n,A,x)}})},mapToArray:c,tupleMap:b,find:function(a,f){for(var n=q(a),A=0,x=n.length;A<x;A++){var t=n[A],p=a[t];if(f(p,t,a))return u.some(p)}return u.none()},keys:q,values:d,size:function(a){return d(a).length}}});
L("ephox.sugar.api.properties.Attr","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.node.Node global!Error global!console".split(" "),function(u,r,q,l,b,c){var d=function(A,x,t){if(u.isString(t)||u.isBoolean(t)||u.isNumber(t))A.setAttribute(x,t+"");else throw c.error("Invalid call to Attr.set. Key ",x,":: Value ",t,":: Element ",A),new b("Attribute value was not simple");},a=function(A,x,t){d(A.dom(),x,t)},f=function(A,x){A=A.dom().getAttribute(x);return null===
A?void 0:A},n=function(A,x){return(A=A.dom())&&A.hasAttribute?A.hasAttribute(x):!1};return{clone:function(A){return r.foldl(A.dom().attributes,function(x,t){x[t.name]=t.value;return x},{})},set:a,setAll:function(A,x){var t=A.dom();q.each(x,function(p,g){d(t,g,p)})},get:f,has:n,remove:function(A,x){A.dom().removeAttribute(x)},hasNone:function(A){A=A.dom().attributes;return void 0===A||null===A||0===A.length},transfer:function(A,x,t){l.isElement(A)&&l.isElement(x)&&r.each(t,function(p){n(A,p)&&!n(x,
p)&&a(x,p,f(A,p))})}}});L("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(u,r,q,l){var b=function(c){c=c.dom().body;if(null===c||void 0===c)throw"Body is not available yet";return r.fromDom(c)};return{body:u.cached(function(){return b(r.fromDom(l))}),getBody:b,inBody:function(c){c=q.isText(c)?c.dom().parentNode:c.dom();return void 0!==c&&null!==c&&c.ownerDocument.body.contains(c)}}});L("ephox.sugar.impl.Style",
[],function(){return{isSupported:function(u){return void 0!==u.style}}});L("ephox.sugar.api.properties.Css","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.properties.Attr ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.impl.Style ephox.katamari.api.Strings global!Error global!console global!window".split(" "),function(u,r,q,l,b,c,d,a,f,n,A,x,t){var p=function(C,B,h){if(!u.isString(h))throw x.error("Invalid call to CSS.set. Property ",
B,":: Value ",h,":: Element ",C),new A("CSS value must be a string: "+h);f.isSupported(C)&&C.style.setProperty(B,h)},g=function(C,B,h){C=C.dom();p(C,B,h)},e=function(C,B){return f.isSupported(C)?C.style.getPropertyValue(B):""},v=function(C,B){C=C.dom();B=e(C,B);return l.from(B).filter(function(h){return 0<h.length})},y=function(C,B,h){v(C,h).each(function(k){v(B,h).isNone()&&g(B,h,k)})};return{copy:function(C,B){C=C.dom();B=B.dom();f.isSupported(C)&&f.isSupported(B)&&(B.style.cssText=C.style.cssText)},
set:g,preserve:function(C,B){var h=b.get(C,"style");B=B(C);(void 0===h?b.remove:b.set)(C,"style",h);return B},setAll:function(C,B){var h=C.dom();q.each(B,function(k,w){p(h,w,k)})},setOptions:function(C,B){var h=C.dom();q.each(B,function(k,w){k.fold(function(){f.isSupported(h)&&h.style.removeProperty(w)},function(z){p(h,w,z)})})},remove:function(C,B){var h=C.dom();f.isSupported(h)&&h.style.removeProperty(B);b.has(C,"style")&&""===n.trim(b.get(C,"style"))&&b.remove(C,"style")},get:function(C,B){var h=
C.dom(),k=t.getComputedStyle(h).getPropertyValue(B);C=""!==k||c.inBody(C)?k:e(h,B);return null===C?void 0:C},getRaw:v,getAllRaw:function(C){var B={};C=C.dom();if(f.isSupported(C))for(var h=0;h<C.style.length;h++){var k=C.style.item(h);B[k]=C.style[k]}return B},isValidValue:function(C,B,h){C=d.fromTag(C);g(C,B,h);return v(C,B).isSome()},reflow:function(C){return C.dom().offsetWidth},transfer:function(C,B,h){a.isElement(C)&&a.isElement(B)&&r.each(h,function(k){y(C,B,k)})}}});L("ephox.katamari.data.Immutable",
["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(u,r,q,l){return function(){var b=arguments;return function(){for(var c=new q(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(b.length!==c.length)throw new l('Wrong number of arguments to struct. Expected "['+b.length+']", got '+c.length+" arguments");var a={};u.each(b,function(f,n){a[f]=r.constant(c[n])});return a}}});L("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type",
"global!Error"],function(u,r,q){var l=function(b){return b.slice(0).sort()};return{sort:l,reqMessage:function(b,c){throw new q("All required keys ("+l(b).join(", ")+") were not specified. Specified keys were: "+l(c).join(", ")+".");},unsuppMessage:function(b){throw new q("Unsupported keys for object: "+l(b).join(", "));},validateStrArr:function(b,c){if(!r.isArray(c))throw new q("The "+b+" fields must be an array. Was: "+c+".");u.each(c,function(d){if(!r.isString(d))throw new q("The value "+d+" in the "+
b+" fields was not a string.");})},invalidTypeMessage:function(b,c){throw new q("All values need to be of type: "+c+". Keys ("+l(b).join(", ")+") were not.");},checkDupes:function(b){var c=l(b);u.find(c,function(d,a){return a<c.length-1&&d===c[a+1]}).each(function(d){throw new q("The field: "+d+" occurs more than once in the combined fields: ["+c.join(", ")+"].");})}}});L("ephox.katamari.data.MixedBag","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.util.BagUtils global!Error global!Object".split(" "),
function(u,r,q,l,b,c,d){return function(a,f){var n=a.concat(f);if(0===n.length)throw new c("You must specify at least one required or optional field.");b.validateStrArr("required",a);b.validateStrArr("optional",f);b.checkDupes(n);return function(A){var x=q.keys(A);u.forall(a,function(g){return u.contains(x,g)})||b.reqMessage(a,x);var t=u.filter(x,function(g){return!u.contains(n,g)});0<t.length&&b.unsuppMessage(t);var p={};u.each(a,function(g){p[g]=r.constant(A[g])});u.each(f,function(g){p[g]=r.constant(d.prototype.hasOwnProperty.call(A,
g)?l.some(A[g]):l.none())});return p}}});L("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(u,r){return{immutable:u,immutableBag:r}});L("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(u,r){var q=[],l=function(b){q.push(b);return r(b)};u=r(u);do u=u.bind(l);while(u.isSome());return q}}});L("ephox.sand.api.Node",["ephox.sand.util.Global"],function(u){return{documentPositionPreceding:function(r,q){var l=u.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;
return 0!==(r.compareDocumentPosition(q)&l)},documentPositionContainedBy:function(r,q){var l=u.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;return 0!==(r.compareDocumentPosition(q)&l)}}});L("ephox.sugar.api.search.Selectors","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.node.NodeTypes global!Error global!document".split(" "),function(u,r,q,l,b,c){var d=l.ELEMENT,a=l.DOCUMENT;return{all:function(f,n){n=void 0===n?c:n.dom();return n.nodeType!==d&&
n.nodeType!==a||0===n.childElementCount?[]:u.map(n.querySelectorAll(f),q.fromDom)},is:function(f,n){f=f.dom();if(f.nodeType!==d)return!1;if(void 0!==f.matches)return f.matches(n);if(void 0!==f.msMatchesSelector)return f.msMatchesSelector(n);if(void 0!==f.webkitMatchesSelector)return f.webkitMatchesSelector(n);if(void 0!==f.mozMatchesSelector)return f.mozMatchesSelector(n);throw new b("Browser lacks native selectors");},one:function(f,n){n=void 0===n?c:n.dom();return n.nodeType!==d&&n.nodeType!==a||
0===n.childElementCount?r.none():r.from(n.querySelector(f)).map(q.fromDom)}}});L("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(u,r,q,l,b){var c=function(f,n){return f.dom()===n.dom()},d=function(f,n){f=f.dom();n=n.dom();return f===n?!1:f.contains(n)},a=function(f,n){return q.documentPositionContainedBy(f.dom(),n.dom())};l=l.detect().browser.isIE()?a:d;return{eq:c,
isEqualNode:function(f,n){return f.dom().isEqualNode(n.dom())},member:function(f,n){return u.exists(n,r.curry(c,f))},contains:l,is:b.is}});L("ephox.sugar.api.search.Traverse","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.alien.Recurse ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element".split(" "),function(u,r,q,l,b,c,d,a){var f=function(e){return a.fromDom(e.dom().ownerDocument)},n=function(e){e=e.dom();
return l.from(e.parentNode).map(a.fromDom)},A=function(e){e=e.dom();return l.from(e.previousSibling).map(a.fromDom)},x=function(e){e=e.dom();return l.from(e.nextSibling).map(a.fromDom)},t=function(e){e=e.dom();return r.map(e.childNodes,a.fromDom)},p=function(e,v){e=e.dom().childNodes;return l.from(e[v]).map(a.fromDom)},g=b.immutable("element","offset");return{owner:f,defaultView:function(e){e=e.dom().ownerDocument.defaultView;return a.fromDom(e)},documentElement:function(e){e=f(e);return a.fromDom(e.dom().documentElement)},
parent:n,findIndex:function(e){return n(e).bind(function(v){v=t(v);return r.findIndex(v,function(y){return d.eq(e,y)})})},parents:function(e,v){v=u.isFunction(v)?v:q.constant(!1);var y=e.dom();for(e=[];null!==y.parentNode&&void 0!==y.parentNode;){y=y.parentNode;var C=a.fromDom(y);e.push(C);if(!0===v(C))break}return e},siblings:function(e){return n(e).map(t).map(function(v){return r.filter(v,function(y){return!d.eq(e,y)})}).getOr([])},prevSibling:A,offsetParent:function(e){e=e.dom();return l.from(e.offsetParent).map(a.fromDom)},
prevSiblings:function(e){return r.reverse(c.toArray(e,A))},nextSibling:x,nextSiblings:function(e){return c.toArray(e,x)},children:t,child:p,firstChild:function(e){return p(e,0)},lastChild:function(e){return p(e,e.dom().childNodes.length-1)},childNodesCount:function(e,v){return e.dom().childNodes.length},leaf:function(e,v){var y=t(e);return 0<y.length&&v<y.length?g(y[v],0):g(e,v)}}});L("tinymce.core.dom.Position","ephox.katamari.api.Arr ephox.sand.api.PlatformDetection ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),
function(u,r,q,l,b,c){var d=r.detect().browser,a=function(f){return d.isFirefox()&&"table"===l.name(f)?u.find(c.children(f),l.isElement).filter(function(n){return"caption"===l.name(n)}).bind(function(n){return u.find(c.nextSiblings(n),l.isElement).map(function(A){A=A.dom().offsetTop;var x=n.dom().offsetTop,t=n.dom().offsetHeight;return A<=x?-t:0})}).getOr(0):0};return{getPos:function(f,n,A){var x=0,t=0,p=f.ownerDocument;A=A?A:f;if(n){if(A===f&&n.getBoundingClientRect&&"static"===b.get(q.fromDom(f),
"position"))return n=n.getBoundingClientRect(),x=n.left+(p.documentElement.scrollLeft||f.scrollLeft)-p.documentElement.clientLeft,t=n.top+(p.documentElement.scrollTop||f.scrollTop)-p.documentElement.clientTop,{x,y:t};for(f=n;f&&f!==A&&f.nodeType;)x+=f.offsetLeft||0,t+=f.offsetTop||0,f=f.offsetParent;for(f=n.parentNode;f&&f!==A&&f.nodeType;)x-=f.scrollLeft||0,t-=f.scrollTop||0,f=f.parentNode;t+=a(q.fromDom(n))}return{x,y:t}}}});L("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option",
"global!setTimeout"],function(u,r,q){var l=function(b){var c=r.none(),d=[],a=function(A){f()?n(A):d.push(A)},f=function(){return c.isSome()},n=function(A){c.each(function(x){q(function(){A(x)},0)})};b(function(A){c=r.some(A);u.each(d,n);d=[]});return{get:a,map:function(A){return l(function(x){a(function(t){x(A(t))})})},isReady:f}};return{nu:l,pure:function(b){return l(function(c){c(b)})}}});L("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(u,r){return{bounce:function(q){return function(){var l=
u.prototype.slice.call(arguments),b=this;r(function(){q.apply(b,l)},0)}}}});L("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(u,r){var q=function(l){var b=function(c){l(r.bounce(c))};return{map:function(c){return q(function(d){b(function(a){a=c(a);d(a)})})},bind:function(c){return q(function(d){b(function(a){c(a).get(d)})})},anonBind:function(c){return q(function(d){b(function(a){c.get(d)})})},toLazy:function(){return u.nu(b)},get:b}};return{nu:q,
pure:function(l){return q(function(b){b(l)})}}});L("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(u){return{par:function(r,q){return q(function(l){var b=[],c=0,d=function(a){return function(f){b[a]=f;c++;c>=r.length&&l(b)}};0===r.length?l([]):u.each(r,function(a,f){a.get(d(f))})})}}});L("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(u,r,q){var l=function(b){return q.par(b,r.nu)};return{par:l,mapM:function(b,
c){b=u.map(b,c);return l(b)},compose:function(b,c){return function(d){return c(d).bind(b)}}}});L("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(u,r){var q=function(b){return{is:function(c){return b===c},isValue:u.constant(!0),isError:u.constant(!1),getOr:u.constant(b),getOrThunk:u.constant(b),getOrDie:u.constant(b),or:function(c){return q(b)},orThunk:function(c){return q(b)},fold:function(c,d){return d(b)},map:function(c){return q(c(b))},each:function(c){c(b)},
bind:function(c){return c(b)},exists:function(c){return c(b)},forall:function(c){return c(b)},toOption:function(){return r.some(b)}}},l=function(b){return{is:u.constant(!1),isValue:u.constant(!1),isError:u.constant(!0),getOr:u.identity,getOrThunk:function(c){return c()},getOrDie:function(){return u.die(b)()},or:function(c){return c},orThunk:function(c){return c()},fold:function(c,d){return c(b)},map:function(c){return l(b)},each:u.noop,bind:function(c){return l(b)},exists:u.constant(!1),forall:u.constant(!0),
toOption:r.none}};return{value:q,error:l}});L("tinymce.core.dom.StyleSheetLoader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Future ephox.katamari.api.Futures ephox.katamari.api.Result global!navigator tinymce.core.util.Delay tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d,a){return function(f,n){var A=0,x={};n=n||{};var t=n.maxLoadTime||5E3;var p=function(y){f.getElementsByTagName("head")[0].appendChild(y)},g=function(y,C,B){var h=function(){for(var E=F.passed,J=
E.length;J--;)E[J]();F.status=2;F.passed=[];F.failed=[]},k=function(){for(var E=F.failed,J=E.length;J--;)E[J]();F.status=3;F.passed=[];F.failed=[]},w=function(){var E=c.userAgent.match(/WebKit\/(\d*)/);return!!(E&&536>E[1])},z=function(E,J){E()||((new Date).getTime()-I<t?d.setTimeout(J):k())},m=function(){z(function(){for(var E=f.styleSheets,J,M=E.length;M--;)if(J=E[M],(J=J.ownerNode?J.ownerNode:J.owningElement)&&J.id===G.id)return h(),!0},m)},D=function(){z(function(){try{var E=H.sheet.cssRules;
h();return!!E}catch(J){}},D)};y=a._addCacheSuffix(y);if(x[y])var F=x[y];else F={passed:[],failed:[]},x[y]=F;C&&F.passed.push(C);B&&F.failed.push(B);if(1!=F.status)if(2==F.status)h();else if(3==F.status)k();else{F.status=1;var G=f.createElement("link");G.rel="stylesheet";G.type="text/css";G.id="u"+A++;G.async=!1;G.defer=!1;var I=(new Date).getTime();if("onload"in G&&!w())G.onload=m,G.onerror=k;else{if(0<c.userAgent.indexOf("Firefox")){var H=f.createElement("style");H.textContent='@import "'+y+'"';
D();p(H);return}m()}p(G);G.href=y}},e=function(y){return q.nu(function(C){g(y,r.compose(C,r.constant(b.value(y))),r.compose(C,r.constant(b.error(y))))})},v=function(y){return y.fold(r.identity,r.identity)};return{load:g,loadAll:function(y,C,B){l.par(u.map(y,e)).get(function(h){h=u.partition(h,function(k){return k.isValue()});0<h.fail.length?B(h.fail.map(v)):C(h.pass.map(v))})}}}});L("tinymce.core.dom.TreeWalker",[],function(){return function(u,r){var q=u,l=function(b,c,d,a){if(b){if(!a&&b[c])return b[c];
if(b!=r){if(c=b[d])return c;for(b=b.parentNode;b&&b!=r;b=b.parentNode)if(c=b[d])return c}}};this.current=function(){return q};this.next=function(b){return q=l(q,"firstChild","nextSibling",b)};this.prev=function(b){return q=l(q,"lastChild","previousSibling",b)};this.prev2=function(b){a:{if(q){var c=q.previousSibling;if(r&&c===r){q=void 0;break a}if(c){if(!b)for(b=c.lastChild;b;b=b.lastChild)if(!b.lastChild){q=b;break a}q=c;break a}if((c=q.parentNode)&&c!==r){q=c;break a}}q=void 0}return q}}});L("tinymce.core.dom.ElementType",
["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(u,r,q){var l=function(d){var a;return function(f){a=a?a:u.mapToObject(d,r.constant(!0));return a.hasOwnProperty(q.name(f))}},b=l("h1 h2 h3 h4 h5 h6".split(" ")),c=l("article aside details div dt figcaption footer form fieldset header hgroup html main nav section summary body p dl multicol dd figure address center blockquote h1 h2 h3 h4 h5 h6 listing xmp pre plaintext menu dir ul ol li hr table tbody thead tfoot th tr td caption".split(" "));
return{isBlock:c,isInline:function(d){return q.isElement(d)&&!c(d)},isHeading:b,isTextBlock:l("h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure".split(" ")),isList:l(["ul","ol","dl"]),isListItem:l(["li","dd","dt"]),isVoid:l("area base basefont br col frame hr img input isindex link meta param embed source wbr track".split(" ")),isTableSection:l(["thead","tbody","tfoot"]),isTableCell:l(["td","th"]),isBr:function(d){return q.isElement(d)&&
"br"===q.name(d)}}});L("tinymce.core.dom.NodeType",[],function(){var u=function(b){return function(c){return!!c&&c.nodeType==b}},r=u(1),q=function(b){b=b.toLowerCase().split(" ");return function(c){if(c&&c.nodeType){var d=c.nodeName.toLowerCase();for(c=0;c<b.length;c++)if(d===b[c])return!0}return!1}},l=function(b){return function(c){return!r(c)||c.contentEditable!==b&&c.getAttribute("data-mce-contenteditable")!==b?!1:!0}};return{isText:u(3),isElement:r,isComment:u(8),isDocument:u(9),isBr:q("br"),
isContentEditableTrue:l("true"),isContentEditableFalse:l("false"),matchNodeNames:q,hasPropValue:function(b,c){return function(d){return r(d)&&d[b]===c}},hasAttribute:function(b,c){return function(d){return r(d)&&d.hasAttribute(b)}},hasAttributeValue:function(b,c){return function(d){return r(d)&&d.getAttribute(b)===c}},matchStyleValues:function(b,c){c=c.toLowerCase().split(" ");return function(d){var a;if(r(d))for(a=0;a<c.length;a++){var f=d.ownerDocument.defaultView.getComputedStyle(d,null).getPropertyValue(b);
if(f===c[a])return!0}return!1}},isBogus:function(b){return r(b)&&b.hasAttribute("data-mce-bogus")}}});L("tinymce.core.dom.TrimNode",["ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(u,r,q,l){var b=function(d){return d&&"SPAN"===d.tagName&&"bookmark"===d.getAttribute("data-mce-type")},c=function(d,a){var f,n=a.childNodes;if(!q.isElement(a)||!b(a)){for(f=n.length-1;0<=f;f--)c(d,n[f]);if(!1===q.isDocument(a)){if(q.isText(a)&&
0<a.nodeValue.length){f=l.trim(a.nodeValue).length;if(d.isBlock(a.parentNode)||0<f)return;if(f=0===f)f=a.nextSibling&&"SPAN"===a.nextSibling.nodeName,f=a.previousSibling&&"SPAN"===a.previousSibling.nodeName&&f;if(f)return}else if(q.isElement(a)&&(n=a.childNodes,1===n.length&&b(n[0])&&a.parentNode.insertBefore(n[0],a),n.length||r.isVoid(u.fromDom(a))))return;d.remove(a)}return a}};return{trimNode:c}});L("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(u,
r){var q=r.makeMap,l=/[&<>"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&"']/g,d=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,a={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",
155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};var f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};var n={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var A=function(p,g){var e,v={};if(p){p=p.split(",");g=g||10;for(e=0;e<p.length;e+=2){var y=String.fromCharCode(parseInt(p[e],g));if(!f[y]){var C="&"+p[e+1]+";";v[y]=C;v[C]=y}}return v}};var x=A("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);var t={encodeRaw:function(p,g){return p.replace(g?l:b,function(e){return f[e]||e})},encodeAllRaw:function(p){return(""+p).replace(c,function(g){return f[g]||g})},encodeNumeric:function(p,g){return p.replace(g?l:b,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":f[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(p,g,e){e=e||x;return p.replace(g?l:b,function(v){return f[v]||e[v]||v})},getEncodeFunc:function(p,g){g=A(g)||x;var e=function(y,C){return y.replace(C?
l:b,function(B){return void 0!==f[B]?f[B]:void 0!==g[B]?g[B]:1<B.length?"&#"+(1024*(B.charCodeAt(0)-55296)+(B.charCodeAt(1)-56320)+65536)+";":"&#"+B.charCodeAt(0)+";"})},v=function(y,C){return t.encodeNamed(y,C,g)};p=q(p.replace(/\+/g,","));return p.named&&p.numeric?e:p.named?g?v:t.encodeNamed:p.numeric?t.encodeNumeric:t.encodeRaw},decode:function(p){return p.replace(d,function(g,e){if(e)return e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10),65535<e?(e-=65536,String.fromCharCode(55296+
(e>>10),56320+(e&1023))):a[e]||String.fromCharCode(e);(e=n[g]||x[g])||(e=u.fromTag("div").dom(),e.innerHTML=g,e=e.textContent||e.innerText||g);return e})}};return t});L("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(u){var r={},q={},l=u.makeMap,b=u.each,c=u.extend,d=u.explode,a=u.inArray,f=function(x,t){return(x=u.trim(x))?x.split(t||" "):[]},n=function(x,t){var p={},g=function(k,w,z){var m,D=function(G,I){var H={},E;var J=0;for(E=G.length;J<E;J++)H[G[J]]=I||{};return H};z=z||[];
w=w||"";"string"===typeof z&&(z=f(z));k=f(k);for(m=k.length;m--;){var F=f([v,w].join(" "));F={attributes:D(F),attributesOrder:F,children:D(z,q)};p[k[m]]=F}},e=function(k,w){var z;k=f(k);var m=k.length;for(w=f(w);m--;){var D=p[k[m]];var F=0;for(z=w.length;F<z;F++)D.attributes[w[F]]={},D.attributesOrder.push(w[F])}};if(r[x])return r[x];var v="id accesskey class dir lang style tabindex title role";var y=f("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting");
var C="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";var B="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment";t.allow_events&&(v=v.concat(v,y));"html4"!=x&&(v+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",C+=" article aside details dialog figure header footer hgroup section nav",B+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen");
if("html5-strict"!=x){v+=" xml:lang";B=[B,"acronym applet basefont big font strike tt"].join(" ");b(f("acronym applet basefont big font strike tt"),function(k){g(k,"",B)});C=[C,"center dir isindex noframes"].join(" ");var h=[C,B].join(" ");b(f("center dir isindex noframes"),function(k){g(k,"",h)})}h=h||[C,B].join(" ");g("html","manifest","head body");g("head","","base command link meta noscript script style title");g("title hr noscript br");g("base","href target");g("link","href rel media hreflang type sizes hreflang");
g("meta","name http-equiv content charset");g("style","media type scoped");g("script","src async defer type charset");g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",h);g("address dt dd div caption","",h);g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",B);g("blockquote","cite",h);g("ol","reversed start type",
"li");g("ul","","li");g("li","value",h);g("dl","","dt dd");g("a","href target rel media hreflang type",B);g("q","cite",B);g("ins del","cite datetime",h);g("img","src sizes srcset alt usemap ismap width height");g("iframe","src name width height",h);g("embed","src type width height");g("object","data type typemustmatch name usemap form width height",[h,"param"].join(" "));g("param","name value");g("map","name",[h,"area"].join(" "));g("area","alt coords shape href target rel media hreflang type");g("table",
"border","caption colgroup thead tfoot tbody tr"+("html4"==x?" col":""));g("colgroup","span","col");g("col","span");g("tbody thead tfoot","","tr");g("tr","","td th");g("td","colspan rowspan headers",h);g("th","colspan rowspan headers scope abbr",h);g("form","accept-charset action autocomplete enctype method name novalidate target",h);g("fieldset","disabled form name",[h,"legend"].join(" "));g("label","form for",B);g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");
g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==x?h:B);g("select","disabled form multiple name required size","option optgroup");g("optgroup","disabled label","option");g("option","disabled label selected value");g("textarea","cols dirname disabled form maxlength name readonly required rows wrap");g("menu","type label",[h,"li"].join(" "));g("noscript","",h);"html4"!=x&&(g("wbr"),g("ruby","",[B,"rt rp"].join(" ")),g("figcaption","",h),
g("mark rt rp summary bdi","",B),g("canvas","width height",h),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[h,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[h,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[B,"option"].join(" ")),g("article section nav aside header footer",
"",h),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[h,"figcaption"].join(" ")),g("time","datetime",B),g("dialog","open",h),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",B),g("progress","value max",B),g("meter","value min max low high optimum",B),g("details","open",[h,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"));"html5-strict"!=x&&(e("script","language xml:space"),e("style","xml:space"),e("object","declare classid code codebase codetype archive standby align border hspace vspace"),
e("embed","align name hspace vspace"),e("param","valuetype type"),e("a","charset name rev shape coords"),e("br","clear"),e("applet","codebase archive code object alt name width height align hspace vspace"),e("img","name longdesc align border hspace vspace"),e("iframe","longdesc frameborder marginwidth marginheight scrolling align"),e("font basefont","size color face"),e("input","usemap align"),e("select","onchange"),e("textarea"),e("h1 h2 h3 h4 h5 h6 div p legend caption","align"),e("ul","type compact"),
e("li","type"),e("ol dl menu dir","compact"),e("pre","width xml:space"),e("hr","align noshade size width"),e("isindex","prompt"),e("table","summary width frame rules cellspacing cellpadding align bgcolor"),e("col","width align char charoff valign"),e("colgroup","width align char charoff valign"),e("thead","align char charoff valign"),e("tr","align char charoff valign bgcolor"),e("th","axis align char charoff valign nowrap bgcolor width height"),e("form","accept"),e("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),
e("tfoot","align char charoff valign"),e("tbody","align char charoff valign"),e("area","nohref"),e("body","background bgcolor text link vlink alink"));"html4"!=x&&(e("input button select textarea","autofocus"),e("input textarea","placeholder"),e("a","download"),e("link script img","crossorigin"),e("iframe","sandbox seamless allowfullscreen"));b(f("a form meter progress dfn"),function(k){p[k]&&delete p[k].children[k]});delete p.caption.children.table;delete p.script;return r[x]=p},A=function(x,t){if(x){var p=
{};"string"==typeof x&&(x={"*":x});b(x,function(g,e){p[e]=p[e.toUpperCase()]="map"==t?l(g,/[, ]/):d(g,/[, ]/)})}return p};return function(x){var t={},p={},g=[],e={},v={},y=function(W,ba,N){var O=x[W];O?O=l(O,/[, ]/,l(O.toUpperCase(),/[, ]/)):(O=r[W],O||(O=l(ba," ",l(ba.toUpperCase()," ")),O=c(O,N),r[W]=O));return O};x=x||{};var C=n(x.schema,x);!1===x.verify_html&&(x.valid_elements="*[*]");var B=A(x.valid_styles);var h=A(x.invalid_styles,"map");var k=A(x.valid_classes,"map");var w=y("whitespace_elements",
"pre script noscript style textarea video audio iframe object code");var z=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");var m=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");var D=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");var F=y("non_empty_elements","td th iframe video audio object script pre code",
m);var G=y("move_caret_before_on_enter_elements","table",F);var I=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");var H=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",I);var E=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");b((x.special||"script noscript noframes noembed title style textarea xmp").split(" "),
function(W){v[W]=new RegExp("</"+W+"[^>]*>","gi")});var J=function(W){return new RegExp("^"+W.replace(/([?+*])/g,".$1")+"$")},M=function(W){var ba,N,O,U,X=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,aa=/[*?+]/;if(W){W=f(W,",");if(t["@"]){var fa=t["@"].attributes;var ia=t["@"].attributesOrder}var ta=0;for(ba=W.length;ta<ba;ta++)if(O=X.exec(W[ta])){var pa=O[1];var ya=O[2];var ha=O[3];var ea=O[5];var na={};var ua=[];var va={attributes:na,
attributesOrder:ua};"#"===pa&&(va.paddEmpty=!0);"-"===pa&&(va.removeEmpty=!0);"!"===O[4]&&(va.removeEmptyAttrs=!0);if(fa){for(U in fa)na[U]=fa[U];ua.push.apply(ua,ia)}if(ea){ea=f(ea,"|");var Fa=0;for(N=ea.length;Fa<N;Fa++)if(O=S.exec(ea[Fa])){var Ba={};var za=O[1];var Ha=O[2].replace(/[\\:]:/g,":");pa=O[3];O=O[4];"!"===za&&(va.attributesRequired=va.attributesRequired||[],va.attributesRequired.push(Ha),Ba.required=!0);"-"===za?(delete na[Ha],ua.splice(a(ua,Ha),1)):(pa&&("="===pa&&(va.attributesDefault=
va.attributesDefault||[],va.attributesDefault.push({name:Ha,value:O}),Ba.defaultValue=O),":"===pa&&(va.attributesForced=va.attributesForced||[],va.attributesForced.push({name:Ha,value:O}),Ba.forcedValue=O),"<"===pa&&(Ba.validValues=l(O,"?"))),aa.test(Ha)?(va.attributePatterns=va.attributePatterns||[],Ba.pattern=J(Ha),va.attributePatterns.push(Ba)):(na[Ha]||ua.push(Ha),na[Ha]=Ba))}}fa||"@"!=ya||(fa=na,ia=ua);ha&&(va.outputName=ya,t[ha]=va);aa.test(ya)?(va.pattern=J(ya),g.push(va)):t[ya]=va}}};y=function(W){t=
{};g=[];M(W);b(C,function(ba,N){p[N]=ba.children})};var P=function(W){var ba=/^(~)?(.+)$/;W&&(r.text_block_elements=r.block_elements=null,b(f(W,","),function(N){N=ba.exec(N);var O="~"===N[1],U=O?"span":"div",X=N[2];p[X]=p[U];e[X]=U;O||(H[X.toUpperCase()]={},H[X]={});t[X]||(N=t[U],N=c({},N),delete N.removeEmptyAttrs,delete N.removeEmpty,t[X]=N);b(p,function(S,aa){S[U]&&(p[aa]=S=c({},p[aa]),S[X]=S[U])})}))},Q=function(W){var ba=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[x.schema]=null;W&&b(f(W,","),function(N){N=
ba.exec(N);var O;if(N){var U=(O=N[1])?p[N[2]]:p[N[2]]={"#comment":{}};U=p[N[2]];b(f(N[3],"|"),function(X){"-"===O?delete U[X]:U[X]={}})}})},V=function(W){var ba=t[W],N;if(ba)return ba;for(N=g.length;N--;)if(ba=g[N],ba.pattern.test(W))return ba};x.valid_elements?y(x.valid_elements):(b(C,function(W,ba){t[ba]={attributes:W.attributes,attributesOrder:W.attributesOrder};p[ba]=W.children}),"html5"!=x.schema&&b(f("strong/b em/i"),function(W){W=f(W,"/");t[W[1]].outputName=W[0]}),b(f("ol ul sub sup blockquote span font a table tbody tr strong em b i"),
function(W){t[W]&&(t[W].removeEmpty=!0)}),b(f("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(W){t[W].paddEmpty=!0}),b(f("span"),function(W){t[W].removeEmptyAttrs=!0}));P(x.custom_elements);Q(x.valid_children);M(x.extended_valid_elements);Q("+ol[ul|ol],+ul[ul|ol]");b({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(W,ba){t[ba]&&(t[ba].parentsRequired=f(W))});
x.invalid_elements&&b(d(x.invalid_elements),function(W){t[W]&&delete t[W]});V("span")||M("span[!data-mce-type|*]");this.children=p;this.getValidStyles=function(){return B};this.getInvalidStyles=function(){return h};this.getValidClasses=function(){return k};this.getBoolAttrs=function(){return D};this.getBlockElements=function(){return H};this.getTextBlockElements=function(){return I};this.getTextInlineElements=function(){return E};this.getShortEndedElements=function(){return m};this.getSelfClosingElements=
function(){return z};this.getNonEmptyElements=function(){return F};this.getMoveCaretBeforeOnEnterElements=function(){return G};this.getWhiteSpaceElements=function(){return w};this.getSpecialElements=function(){return v};this.isValidChild=function(W,ba){W=p[W.toLowerCase()];return!(!W||!W[ba.toLowerCase()])};this.isValid=function(W,ba){var N;if(N=V(W))if(ba){if(N.attributes[ba])return!0;if(ba=N.attributePatterns)for(N=ba.length;N--;)if(ba[N].pattern.test(W))return!0}else return!0;return!1};this.getElementRule=
V;this.getCustomElements=function(){return e};this.addValidElements=M;this.setValidElements=y;this.addCustomElements=P;this.addValidChildren=Q;this.elements=t}});L("tinymce.core.html.Styles",[],function(){return function(u,r){var q=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*"([^"]+)"\s*\))|(?:\(\s*'([^']+)'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:'([^']+)')|(?:"([^"]+)")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,d,a={};u=u||{};if(r){var f=r.getValidStyles();var n=r.getInvalidStyles()}r=
"\\\" \\' \\; \\: ; : \ufeff".split(" ");for(d=0;d<r.length;d++)a[r[d]]="\ufeff"+d,a["\ufeff"+d]=r[d];var A=function(x,t,p,g){x=function(e){e=parseInt(e,10).toString(16);return 1<e.length?e:"0"+e};return"#"+x(t)+x(p)+x(g)};return{toHex:function(x){return x.replace(q,A)},parse:function(x){var t={},p,g,e=u.url_converter,v=u.url_converter_scope||this,y=function(D,F,G){var I,H,E,J;if(I=t[D+"-top"+F])if(H=t[D+"-right"+F])if(E=t[D+"-bottom"+F])if(J=t[D+"-left"+F]){I=[I,H,E,J];for(d=I.length-1;d--&&I[d]===
I[d+1];);-1<d&&G||(t[D+F]=-1==d?I[0]:I.join(" "),delete t[D+"-top"+F],delete t[D+"-right"+F],delete t[D+"-bottom"+F],delete t[D+"-left"+F])}},C=function(D){var F=t[D],G;if(F){F=F.split(" ");for(G=F.length;G--;)if(F[G]!==F[0])return!1;t[D]=F[0];return!0}},B=function(D,F,G,I){C(F)&&C(G)&&C(I)&&(t[D]=t[F]+" "+t[G]+" "+t[I],delete t[F],delete t[G],delete t[I])},h=function(D){g=!0;return a[D]},k=function(D,F){g&&(D=D.replace(/\uFEFF[0-9]/g,function(G){return a[G]}));F||(D=D.replace(/\\(['";:])/g,"$1"));
return D},w=function(D){return String.fromCharCode(parseInt(D.slice(1),16))},z=function(D,F,G,I,H,E){if(H=H||E)return H=k(H),"'"+H.replace(/'/g,"\\'")+"'";F=k(F||G||I);if(!u.allow_script_urls&&(D=F.replace(/[\s\r\n]+/g,""),/(java|vb)script:/i.test(D)||!u.allow_svg_data_urls&&/^data:image\/svg/i.test(D)))return"";e&&(F=e.call(v,F,"style"));return"url('"+F.replace(/'/g,"\\'")+"')"};if(x){x=x.replace(/[\u0000-\u001F]/g,"");for(x=x.replace(/\\["';:\uFEFF]/g,h).replace(/"[^"]+"|'[^']+'/g,function(D){return D.replace(/[;:]/g,
h)});p=b.exec(x);){b.lastIndex=p.index+p[0].length;var m=p[1].replace(c,"").toLowerCase();p=p[2].replace(c,"");if(m&&p&&(m=m.replace(/\\[0-9a-f]+/gi,w),p=p.replace(/\\[0-9a-f]+/gi,w),-1===m.indexOf("\ufeff")&&-1===m.indexOf('"')&&(u.allow_script_urls||"behavior"!=m&&!/expression\s*\(|\/\*|\*\//.test(p)))){if("font-weight"===m&&"700"===p)p="bold";else if("color"===m||"background-color"===m)p=p.toLowerCase();p=p.replace(q,A);p=p.replace(l,z);t[m]=g?k(p,!0):p}}y("border","",!0);y("border","-width");
y("border","-color");y("border","-style");y("padding","");y("margin","");B("border","border-width","border-style","border-color");"medium none"===t.border&&delete t.border;"none"===t["border-image"]&&delete t["border-image"]}return t},serialize:function(x,t){var p="",g;var e=function(y){var C,B,h;if(C=f[y]){var k=0;for(B=C.length;k<B;k++)y=C[k],(h=x[y])&&(p+=(0<p.length?" ":"")+y+": "+h+";")}};var v=function(y,C){var B;return(B=n["*"])&&B[y]?!1:(B=n[C])&&B[y]?!1:!0};if(t&&f)e("*"),e(t);else for(g in x)e=
x[g],!e||n&&!v(g,t)||(p+=(0<p.length?" ":"")+g+": "+e+";");return p}}}});L("tinymce.core.dom.DOMUtils","global!document global!window tinymce.core.Env tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.Position tinymce.core.dom.Sizzle tinymce.core.dom.StyleSheetLoader tinymce.core.dom.TreeWalker tinymce.core.dom.TrimNode tinymce.core.html.Entities tinymce.core.html.Schema tinymce.core.html.Styles tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d,a,f,n,A,x,t,p){var g=p.each,
e=p.is,v=p.grep,y=q.ie,C=/^([a-z0-9],?)+$/i,B=/^[ \t\r\n]*$/,h=function(m,D){var F={},G=D.keep_values;var I={set:function(H,E,J){D.url_converter&&(E=D.url_converter.call(D.url_converter_scope||m,E,J,H[0]));H.attr("data-mce-"+J,E).attr(J,E)},get:function(H,E){return H.attr("data-mce-"+E)||H.attr(E)}};F={style:{set:function(H,E){null!==E&&"object"===typeof E?H.css(E):(G&&H.attr("data-mce-style",E),H.attr("style",E))},get:function(H){var E=H.attr("data-mce-style")||H.attr("style");return E=m.serializeStyle(m.parseStyle(E),
H[0].nodeName)}}};G&&(F.href=F.src=I);return F},k=function(m,D){var F=D.attr("style");(F=m.serializeStyle(m.parseStyle(F),D[0].nodeName))||(F=null);D.attr("data-mce-style",F)},w=function(m,D){var F=0;if(m){var G=m.nodeType;for(m=m.previousSibling;m;m=m.previousSibling){var I=m.nodeType;if(!D||3!=I||I!=G&&m.nodeValue.length)F++,G=I}}return F},z=function(m,D){var F=this;F.doc=m;F.win=r;F.files={};F.counter=0;F.stdMode=!y||8<=m.documentMode;F.boxModel=!y||"CSS1Compat"==m.compatMode||F.stdMode;F.styleSheetLoader=
new a(m);F.boundEvents=[];F.settings=D=D||{};F.schema=D.schema?D.schema:new x({});F.styles=new t({url_converter:D.url_converter,url_converter_scope:D.url_converter_scope},D.schema);F.fixDoc(m);F.events=D.ownEvents?new b(D.proxy):b.Event;F.attrHooks=h(F,D);var G=F.schema.getBlockElements();F.$=l.overrideDefaults(function(){return{context:m,element:F.getRoot()}});F.isBlock=function(I){if(!I)return!1;var H=I.nodeType;return H?!(1!==H||!G[I.nodeName]):!!G[I]}};z.prototype={$$:function(m){"string"==typeof m&&
(m=this.get(m));return this.$(m)},root:null,fixDoc:function(m){var D=this.settings,F;if(y&&D.schema)for(F in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(G){m.createElement(G)}),D.schema.getCustomElements())m.createElement(F)},clone:function(m,D){var F=this;if(!y||1!==m.nodeType||D)return m.cloneNode(D);var G=F.doc;if(!D){var I=G.createElement(m.nodeName);g(F.getAttribs(m),function(H){F.setAttrib(I,
H.nodeName,F.getAttrib(m,H.nodeName))});return I}return I.firstChild},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(m){m=m?m:this.win;var D=m.document;D=this.boxModel?D.documentElement:D.body;return{x:m.pageXOffset||D.scrollLeft,y:m.pageYOffset||D.scrollTop,w:m.innerWidth||D.clientWidth,h:m.innerHeight||D.clientHeight}},getRect:function(m){m=this.get(m);var D=this.getPos(m);m=this.getSize(m);return{x:D.x,y:D.y,w:m.w,h:m.h}},getSize:function(m){m=this.get(m);
var D=this.getStyle(m,"width");var F=this.getStyle(m,"height");-1===D.indexOf("px")&&(D=0);-1===F.indexOf("px")&&(F=0);return{w:parseInt(D,10)||m.offsetWidth||m.clientWidth,h:parseInt(F,10)||m.offsetHeight||m.clientHeight}},getParent:function(m,D,F){return this.getParents(m,D,F,!1)},getParents:function(m,D,F,G){var I=this,H=[];m=I.get(m);G=void 0===G;F=F||("BODY"!=I.getRoot().nodeName?I.getRoot().parentNode:null);if(e(D,"string")){var E=D;D="*"===D?function(J){return 1==J.nodeType}:function(J){return I.is(J,
E)}}for(;m&&m!=F&&m.nodeType&&9!==m.nodeType;){if(!D||D(m))if(G)H.push(m);else return m;m=m.parentNode}return G?H:null},get:function(m){if(m&&this.doc&&"string"==typeof m){var D=m;if((m=this.doc.getElementById(m))&&m.id!==D)return this.doc.getElementsByName(D)[1]}return m},getNext:function(m,D){return this._findSib(m,D,"nextSibling")},getPrev:function(m,D){return this._findSib(m,D,"previousSibling")},select:function(m,D){return d(m,this.get(D)||this.settings.root_element||this.doc,[])},is:function(m,
D){var F;if(!m)return!1;if(void 0===m.length){if("*"===D)return 1==m.nodeType;if(C.test(D)){D=D.toLowerCase().split(/,/);m=m.nodeName.toLowerCase();for(F=D.length-1;0<=F;F--)if(D[F]==m)return!0;return!1}}if(m.nodeType&&1!=m.nodeType)return!1;m=m.nodeType?[m]:m;return 0<d(D,m[0].ownerDocument||m[0],null,m).length},add:function(m,D,F,G,I){var H=this;return this.run(m,function(E){var J=e(D,"string")?H.doc.createElement(D):D;H.setAttribs(J,F);G&&(G.nodeType?J.appendChild(G):H.setHTML(J,G));return I?J:
E.appendChild(J)})},create:function(m,D,F){return this.add(this.doc.createElement(m),m,D,F,1)},createHTML:function(m,D,F){var G;var I="<"+m;for(G in D)D.hasOwnProperty(G)&&null!==D[G]&&"undefined"!=typeof D[G]&&(I+=" "+G+'="'+this.encode(D[G])+'"');return"undefined"!=typeof F?I+">"+F+"</"+m+">":I+" />"},createFragment:function(m){var D=this.doc;var F=D.createElement("div");D=D.createDocumentFragment();m&&(F.innerHTML=m);for(;m=F.firstChild;)D.appendChild(m);return D},remove:function(m,D){m=this.$$(m);
D?m.each(function(){for(var F;F=this.firstChild;)3==F.nodeType&&0===F.data.length?this.removeChild(F):this.parentNode.insertBefore(F,this)}).remove():m.remove();return 1<m.length?m.toArray():m[0]},setStyle:function(m,D,F){m=this.$$(m).css(D,F);this.settings.update_styles&&k(this,m)},getStyle:function(m,D,F){m=this.$$(m);if(F)return m.css(D);D=D.replace(/-(\D)/g,function(G,I){return I.toUpperCase()});"float"==D&&(D=q.ie&&12>q.ie?"styleFloat":"cssFloat");return m[0]&&m[0].style?m[0].style[D]:void 0},
setStyles:function(m,D){m=this.$$(m).css(D);this.settings.update_styles&&k(this,m)},removeAllAttribs:function(m){return this.run(m,function(D){var F,G=D.attributes;for(F=G.length-1;0<=F;F--)D.removeAttributeNode(G.item(F))})},setAttrib:function(m,D,F){var G,I=this.settings;""===F&&(F=null);m=this.$$(m);var H=m.attr(D);if(m.length&&((G=this.attrHooks[D])&&G.set?G.set(m,F,D):m.attr(D,F),H!=F&&I.onSetAttrib))I.onSetAttrib({attrElm:m,attrName:D,attrValue:F})},setAttribs:function(m,D){var F=this;F.$$(m).each(function(G,
I){g(D,function(H,E){F.setAttrib(I,E,H)})})},getAttrib:function(m,D,F){m=this.$$(m);if(m.length)var G=(G=this.attrHooks[D])&&G.get?G.get(m,D):m.attr(D);"undefined"==typeof G&&(G=F||"");return G},getPos:function(m,D){return c.getPos(this.doc.body,this.get(m),D)},parseStyle:function(m){return this.styles.parse(m)},serializeStyle:function(m,D){return this.styles.serialize(m,D)},addStyle:function(m){var D=this.doc;if(this!==z.DOM&&D===u){var F=(F=z.DOM.addedStyles)||[];if(F[m])return;F[m]=!0;z.DOM.addedStyles=
F}var G=D.getElementById("mceDefaultStyles");G||(G=D.createElement("style"),G.id="mceDefaultStyles",G.type="text/css",F=D.getElementsByTagName("head")[0],F.firstChild?F.insertBefore(G,F.firstChild):F.appendChild(G));G.styleSheet?G.styleSheet.cssText+=m:G.appendChild(D.createTextNode(m))},loadCSS:function(m){var D=this,F=D.doc;if(D!==z.DOM&&F===u)z.DOM.loadCSS(m);else{m||(m="");var G=F.getElementsByTagName("head")[0];g(m.split(","),function(I){I=p._addCacheSuffix(I);if(!D.files[I]){D.files[I]=!0;var H=
D.create("link",{rel:"stylesheet",href:I});y&&F.documentMode&&F.recalc&&(H.onload=function(){F.recalc&&F.recalc();H.onload=null});G.appendChild(H)}})}},addClass:function(m,D){this.$$(m).addClass(D)},removeClass:function(m,D){this.toggleClass(m,D,!1)},hasClass:function(m,D){return this.$$(m).hasClass(D)},toggleClass:function(m,D,F){this.$$(m).toggleClass(D,F).each(function(){""===this.className&&l(this).attr("class",null)})},show:function(m){this.$$(m).show()},hide:function(m){this.$$(m).hide()},isHidden:function(m){return"none"==
this.$$(m).css("display")},uniqueId:function(m){return(m?m:"mce_")+this.counter++},setHTML:function(m,D){m=this.$$(m);y?m.each(function(F,G){if(!1!==G.canHaveHTML){for(;G.firstChild;)G.removeChild(G.firstChild);try{G.innerHTML="<br>"+D,G.removeChild(G.firstChild)}catch(I){l("<div></div>").html("<br>"+D).contents().slice(1).appendTo(G)}return D}}):m.html(D)},getOuterHTML:function(m){m=this.get(m);return 1==m.nodeType&&"outerHTML"in m?m.outerHTML:l("<div></div>").append(l(m).clone()).html()},setOuterHTML:function(m,
D){var F=this;F.$$(m).each(function(){try{if("outerHTML"in this){this.outerHTML=D;return}}catch(G){}F.remove(l(this).html(D),!0)})},decode:A.decode,encode:A.encodeAllRaw,insertAfter:function(m,D){D=this.get(D);return this.run(m,function(F){var G;var I=D.parentNode;(G=D.nextSibling)?I.insertBefore(F,G):I.appendChild(F);return F})},replace:function(m,D,F){return this.run(D,function(G){e(G,"array")&&(m=m.cloneNode(!0));F&&g(v(G.childNodes),function(I){m.appendChild(I)});return G.parentNode.replaceChild(m,
G)})},rename:function(m,D){var F=this;if(m.nodeName!=D.toUpperCase()){var G=F.create(D);g(F.getAttribs(m),function(I){F.setAttrib(G,I.nodeName,F.getAttrib(m,I.nodeName))});F.replace(G,m,1)}return G||m},findCommonAncestor:function(m,D){for(var F=m,G;F;){for(G=D;G&&F!=G;)G=G.parentNode;if(F==G)break;F=F.parentNode}return!F&&m.ownerDocument?m.ownerDocument.documentElement:F},toHex:function(m){return this.styles.toHex(p.trim(m))},run:function(m,D,F){var G=this;"string"===typeof m&&(m=G.get(m));if(!m)return!1;
F=F||this;if(!m.nodeType&&(m.length||0===m.length)){var I=[];g(m,function(H,E){H&&("string"==typeof H&&(H=G.get(H)),I.push(D.call(F,H,E)))});return I}return D.call(F,m)},getAttribs:function(m){m=this.get(m);if(!m)return[];if(y){var D=[];if("OBJECT"==m.nodeName)return m.attributes;"OPTION"===m.nodeName&&this.getAttrib(m,"selected")&&D.push({specified:1,nodeName:"selected"});m.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=["][^"]+"|='[^']+'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(F){D.push({specified:1,
nodeName:F})});return D}return m.attributes},isEmpty:function(m,D){var F,G=0;if(m=m.firstChild){var I=new f(m,m.parentNode);D=D||(this.schema?this.schema.getNonEmptyElements():null);var H=this.schema?this.schema.getWhiteSpaceElements():{};do{var E=m.nodeType;if(1===E){if(F=m.getAttribute("data-mce-bogus")){m=I.next("all"===F);continue}var J=m.nodeName.toLowerCase();if(D&&D[J]){if("br"===J){G++;m=I.next();continue}return!1}var M=this.getAttribs(m);for(F=M.length;F--;)if(J=M[F].nodeName,"name"===J||
"data-mce-bookmark"===J)return!1}if(8==E||3===E&&!B.test(m.nodeValue)||3===E&&m.parentNode&&H[m.parentNode.nodeName]&&B.test(m.nodeValue))return!1;m=I.next()}while(m)}return 1>=G},createRng:function(){return this.doc.createRange()},nodeIndex:w,split:function(m,D,F){var G=this.createRng();if(m&&D){G.setStart(m.parentNode,this.nodeIndex(m));G.setEnd(D.parentNode,this.nodeIndex(D));var I=G.extractContents();G=this.createRng();G.setStart(D.parentNode,this.nodeIndex(D)+1);G.setEnd(m.parentNode,this.nodeIndex(m)+
1);G=G.extractContents();var H=m.parentNode;H.insertBefore(n.trimNode(this,I),m);F?H.insertBefore(F,m):H.insertBefore(D,m);H.insertBefore(n.trimNode(this,G),m);this.remove(m);return F||D}},bind:function(m,D,F,G){if(p.isArray(m)){for(var I=m.length;I--;)m[I]=this.bind(m[I],D,F,G);return m}!this.settings.collect||m!==this.doc&&m!==this.win||this.boundEvents.push([m,D,F,G]);return this.events.bind(m,D,F,G||this)},unbind:function(m,D,F){var G;if(p.isArray(m)){for(G=m.length;G--;)m[G]=this.unbind(m[G],
D,F);return m}if(this.boundEvents&&(m===this.doc||m===this.win))for(G=this.boundEvents.length;G--;){var I=this.boundEvents[G];m!=I[0]||D&&D!=I[1]||F&&F!=I[2]||this.events.unbind(I[0],I[1],I[2])}return this.events.unbind(m,D,F)},fire:function(m,D,F){return this.events.fire(m,D,F)},getContentEditable:function(m){var D;return m&&1==m.nodeType?(D=m.getAttribute("data-mce-contenteditable"))&&"inherit"!==D?D:"inherit"!==m.contentEditable?m.contentEditable:null:null},getContentEditableParent:function(m){for(var D=
this.getRoot(),F=null;m&&m!==D&&(F=this.getContentEditable(m),null===F);m=m.parentNode);return F},destroy:function(){if(this.boundEvents){for(var m=this.boundEvents.length;m--;){var D=this.boundEvents[m];this.events.unbind(D[0],D[1],D[2])}this.boundEvents=null}d.setDocument&&d.setDocument();this.win=this.doc=this.root=this.events=this.frag=null},isChildOf:function(m,D){for(;m;){if(D===m)return!0;m=m.parentNode}return!1},dumpRng:function(m){return"startContainer: "+m.startContainer.nodeName+", startOffset: "+
m.startOffset+", endContainer: "+m.endContainer.nodeName+", endOffset: "+m.endOffset},_findSib:function(m,D,F){var G=this,I=D;if(m)for("string"==typeof I&&(I=function(H){return G.is(H,D)}),m=m[F];m;m=m[F])if(I(m))return m;return null}};z.DOM=new z(u);z.nodeIndex=w;return z});L("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(u,r,q){var l=r.DOM,b=q.each,c=q.grep,d=function(a){return"function"===typeof a};r=function(){var a={},f=[],n=
{},A=[],x=0,t=function(p,g,e){var v=function(){l.remove(y);C&&(C.onreadystatechange=C.onload=C=null);g()};var y=l.uniqueId();var C=u.createElement("script");C.id=y;C.type="text/javascript";C.src=q._addCacheSuffix(p);"onreadystatechange"in C?C.onreadystatechange=function(){/loaded|complete/.test(C.readyState)&&v()}:C.onload=v;C.onerror=function(){d(e)?e():"undefined"!==typeof console&&console.log&&console.log("Failed to load script: "+p)};(u.getElementsByTagName("head")[0]||u.body).appendChild(C)};
this.isDone=function(p){return 2==a[p]};this.markDone=function(p){a[p]=2};this.add=this.load=function(p,g,e,v){void 0==a[p]&&(f.push(p),a[p]=0);g&&(n[p]||(n[p]=[]),n[p].push({success:g,failure:v,scope:e||this}))};this.remove=function(p){delete a[p];delete n[p]};this.loadQueue=function(p,g,e){this.loadScripts(f,p,g,e)};this.loadScripts=function(p,g,e,v){var y=[],C=function(h,k){b(n[k],function(w){d(w[h])&&w[h].call(w.scope)});n[k]=void 0};A.push({success:g,failure:v,scope:e||this});var B=function(){var h=
c(p);p.length=0;b(h,function(k){2===a[k]?C("success",k):3===a[k]?C("failure",k):1!==a[k]&&(a[k]=1,x++,t(k,function(){a[k]=2;x--;C("success",k);B()},function(){a[k]=3;x--;y.push(k);C("failure",k);B()}))});x||(h=A.slice(0),A.length=0,b(h,function(k){0===y.length?d(k.success)&&k.success.call(k.scope):d(k.failure)&&k.failure.call(k.scope,y)}))};B()}};r.ScriptLoader=new r;return r});L("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(u,
r,q){var l=q.each,b=function(){this.items=[];this.urls={};this.lookup={};this._listeners=[]};b.prototype={get:function(c){if(this.lookup[c])return this.lookup[c].instance},dependencies:function(c){if(this.lookup[c])var d=this.lookup[c].dependencies;return d||[]},requireLangPack:function(c,d){var a=b.language;if(a&&!1!==b.languageLoad){if(d)if(d=","+d+",",-1!=d.indexOf(","+a.substr(0,2)+","))a=a.substr(0,2);else if(-1==d.indexOf(","+a+","))return;r.ScriptLoader.add(this.urls[c]+"/langs/"+a+".js")}},
add:function(c,d,a){this.items.push(d);this.lookup[c]={instance:d,dependencies:a};a=u.partition(this._listeners,function(f){return f.name===c});this._listeners=a.fail;l(a.pass,function(f){f.callback()});return d},remove:function(c){delete this.urls[c];delete this.lookup[c]},createUrl:function(c,d){return"object"===typeof d?d:{prefix:c.prefix,resource:d,suffix:c.suffix}},addComponents:function(c,d){var a=this.urls[c];l(d,function(f){r.ScriptLoader.add(a+"/"+f)})},load:function(c,d,a,f,n){var A=this,
x=d,t=function(){var p=A.dependencies(c);l(p,function(g){g=A.createUrl(d,g);A.load(g.resource,g,void 0,void 0)});a&&(f?a.call(f):a.call(r))};A.urls[c]||("object"===typeof d&&(x=d.prefix+d.resource+d.suffix),0!==x.indexOf("/")&&-1==x.indexOf("://")&&(x=b.baseURL+"/"+x),A.urls[c]=x.substring(0,x.lastIndexOf("/")),A.lookup[c]?t():r.ScriptLoader.add(x,t,f,n))},waitFor:function(c,d){this.lookup.hasOwnProperty(c)?d():this._listeners.push({name:c,callback:d})}};b.PluginManager=new b;b.ThemeManager=new b;
return b});L("tinymce.core.text.Zwsp",[],function(){return{isZwsp:function(u){return"\ufeff"===u},ZWSP:"\ufeff",trim:function(u){return u.replace(/\ufeff/g,"")}}});L("tinymce.core.caret.CaretContainer",["global!document","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(u,r,q){var l=r.isElement,b=r.isText,c=function(x){b(x)&&(x=x.parentNode);return l(x)&&x.hasAttribute("data-mce-caret")},d=function(x){return b(x)&&q.isZwsp(x.data)},a=function(x){return c(x)||d(x)},f=function(){var x=
u.createElement("br");x.setAttribute("data-mce-bogus","1");return x},n=function(x){return b(x)&&x.data[0]==q.ZWSP},A=function(x){return b(x)&&x.data[x.data.length-1]==q.ZWSP};return{isCaretContainer:a,isCaretContainerBlock:c,isCaretContainerInline:d,showCaretContainerBlock:function(x){if(x&&x.hasAttribute("data-mce-caret")){var t=x.getElementsByTagName("br");t=t[t.length-1];r.isBogus(t)&&t.parentNode.removeChild(t);x.removeAttribute("data-mce-caret");x.removeAttribute("data-mce-bogus");x.removeAttribute("style");
x.removeAttribute("_moz_abspos");return x}return null},insertInline:function(x,t){var p=x.ownerDocument.createTextNode(q.ZWSP);var g=x.parentNode;if(t){t=x.previousSibling;if(b(t)){if(a(t))return t;if(A(t))return t.splitText(t.data.length-1)}g.insertBefore(p,x)}else{t=x.nextSibling;if(b(t)){if(a(t))return t;if(n(t))return t.splitText(1),t}x.nextSibling?g.insertBefore(p,x.nextSibling):g.appendChild(p)}return p},prependInline:function(x){if(r.isText(x)){var t=x.data;0<t.length&&t.charAt(0)!==q.ZWSP&&
x.insertData(0,q.ZWSP);return x}return null},appendInline:function(x){if(r.isText(x)){var t=x.data;0<t.length&&t.charAt(t.length-1)!==q.ZWSP&&x.insertData(t.length,q.ZWSP);return x}return null},isBeforeInline:function(x){return x&&r.isText(x.container())&&x.container().data.charAt(x.offset())===q.ZWSP},isAfterInline:function(x){return x&&r.isText(x.container())&&x.container().data.charAt(x.offset()-1)===q.ZWSP},insertBlock:function(x,t,p){x=t.ownerDocument.createElement(x);x.setAttribute("data-mce-caret",
p?"before":"after");x.setAttribute("data-mce-bogus","all");x.appendChild(f());var g=t.parentNode;p?g.insertBefore(x,t):t.nextSibling?g.insertBefore(x,t.nextSibling):g.appendChild(x);return x},hasContent:function(x){return x.firstChild!==x.lastChild||!r.isBr(x.firstChild)},startsWithCaretContainer:n,endsWithCaretContainer:A}});L("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(u,r,q){var l=u.isContentEditableTrue,
b=u.isContentEditableFalse,c=u.isBr,d=u.isText,a=u.matchNodeNames("script style textarea"),f=u.matchNodeNames("img input textarea hr iframe video audio object"),n=u.matchNodeNames("table"),A=q.isCaretContainer,x=function(g){return A(g)?!1:d(g)?a(g.parentNode)?!1:!0:f(g)||c(g)||n(g)||b(g)},t=function(g,e){for(g=g.parentNode;g&&g!=e;g=g.parentNode){if(b(g))return!1;if(l(g))break}return!0},p=function(g){return b(g)?!0!==r.reduce(g.getElementsByTagName("*"),function(e,v){return e||l(v)},!1):!1};return{isCaretCandidate:x,
isInEditable:t,isAtomic:function(g){return f(g)||p(g)},isEditableCaretCandidate:function(g,e){return x(g)&&t(g,e)}}});L("tinymce.core.geom.ClientRect",[],function(){var u=Math.round,r=function(a){return a?{left:u(a.left),top:u(a.top),bottom:u(a.bottom),right:u(a.right),width:u(a.width),height:u(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},q=function(a,f,n){return 0<=a&&a<=Math.min(f.height,n.height)/2},l=function(a,f){return a.bottom-a.height/2<f.top?!0:a.top>f.bottom?!1:q(f.top-a.bottom,
a,f)},b=function(a,f){return a.top>f.bottom?!0:a.bottom<f.top?!1:q(f.bottom-a.top,a,f)},c=function(a,f){return a.left<f.left},d=function(a,f){return a.right>f.right};return{clone:r,collapse:function(a,f){a=r(a);f||(a.left+=a.width);a.right=a.left;a.width=0;return a},isEqual:function(a,f){return a.left===f.left&&a.top===f.top&&a.bottom===f.bottom&&a.right===f.right},isAbove:l,isBelow:b,isLeft:c,isRight:d,compare:function(a,f){return l(a,f)?-1:b(a,f)?1:c(a,f)?-1:d(a,f)?1:0},containsXY:function(a,f,
n){return f>=a.left&&f<=a.right&&n>=a.top&&n<=a.bottom}}});L("tinymce.core.selection.RangeNodes",[],function(){return{getSelectedNode:function(u){var r=u.startContainer,q=u.startOffset;return r.hasChildNodes()&&u.endOffset==q+1?r.childNodes[q]:null},getNode:function(u,r){1===u.nodeType&&u.hasChildNodes()&&(r>=u.childNodes.length&&(r=u.childNodes.length-1),u=u.childNodes[r]);return u}}});L("tinymce.core.text.ExtendingChar",[],function(){var u=/[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]/;
return{isExtendingChar:function(r){return"string"==typeof r&&768<=r.charCodeAt(0)&&u.test(r)}}});L("tinymce.core.util.Fun",[],function(){var u=[].slice,r=function(q){var l=u.call(arguments);return l.length-1>=q.length?q.apply(this,l.slice(1)):function(){var b=l.concat([].slice.call(arguments));return r.apply(this,b)}};return{constant:function(q){return function(){return q}},negate:function(q){return function(l){return!q(l)}},and:function(){var q=u.call(arguments);return function(l){for(var b=0;b<
q.length;b++)if(!q[b](l))return!1;return!0}},or:function(){var q=u.call(arguments);return function(l){for(var b=0;b<q.length;b++)if(q[b](l))return!0;return!1}},curry:r,compose:function(q,l){return function(b){return q(l(b))}},noop:function(){}}});L("tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretCandidate tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.selection.RangeNodes tinymce.core.text.ExtendingChar tinymce.core.util.Fun".split(" "),function(u,
r,q,l,b,c,d){var a=q.isElement;u=u.isCaretCandidate;var f=q.matchStyleValues("display","block table"),n=q.matchStyleValues("float","left right"),A=d.and(a,u,d.negate(n)),x=d.negate(q.matchStyleValues("white-space","pre pre-line pre-wrap")),t=q.isText,p=q.isBr,g=r.nodeIndex,e=b.getNode,v=function(k){return"createRange"in k?k.createRange():r.DOM.createRng()},y=function(k){return k&&/[\r\n\t ]/.test(k)},C=function(k){var w=k.startContainer,z=k.startOffset;return y(k.toString())&&x(w.parentNode)&&(k=
w.data,y(k[z-1])||y(k[z+1]))?!0:!1},B=function(k){var w=[],z=function(I){var H=I.getClientRects();H=0<H.length?l.clone(H[0]):l.clone(I.getBoundingClientRect());if(p(I)&&0===H.left){var E=I.ownerDocument;H=v(E);E=E.createTextNode("\u00a0");var J=I.parentNode;J.insertBefore(E,I);H.setStart(E,0);H.setEnd(E,1);I=l.clone(H.getBoundingClientRect());J.removeChild(E);return I}return H},m=function(I,H){I=l.collapse(I,H);I.width=1;I.right=I.left+1;return I},D=function(I){0!==I.height&&(0<w.length&&l.isEqual(I,
w[w.length-1])||w.push(I))},F=function(I,H){var E=v(I.ownerDocument);if(H<I.data.length){if(c.isExtendingChar(I.data[H]))return w;if(c.isExtendingChar(I.data[H-1])&&(E.setStart(I,H),E.setEnd(I,H+1),!C(E)))return D(m(z(E),!1)),w}0<H&&(E.setStart(I,H-1),E.setEnd(I,H),C(E)||D(m(z(E),!1)));H<I.data.length&&(E.setStart(I,H),E.setEnd(I,H+1),C(E)||D(m(z(E),!0)))};if(t(k.container()))return F(k.container(),k.offset()),w;if(a(k.container()))if(k.isAtEnd()){var G=e(k.container(),k.offset());t(G)&&F(G,G.data.length);
A(G)&&!p(G)&&D(m(z(G),!1))}else{G=e(k.container(),k.offset());t(G)&&F(G,0);if(A(G)&&k.isAtEnd())return D(m(z(G),!1)),w;k=e(k.container(),k.offset()-1);A(k)&&!p(k)&&(f(k)||f(G)||!A(G))&&D(m(z(k),!1));A(G)&&D(m(z(G),!0))}return w},h=function(k,w,z){var m=function(){z||(z=B(new h(k,w)));return z};return{container:d.constant(k),offset:d.constant(w),toRange:function(){var D=v(k.ownerDocument);D.setStart(k,w);D.setEnd(k,w);return D},getClientRects:m,isVisible:function(){return 0<m().length},isAtStart:function(){t(k);
return 0===w},isAtEnd:function(){return t(k)?w>=k.data.length:w>=k.childNodes.length},isEqual:function(D){return D&&k===D.container()&&w===D.offset()},getNode:function(D){return e(k,D?w-1:w)}}};h.fromRangeStart=function(k){return new h(k.startContainer,k.startOffset)};h.fromRangeEnd=function(k){return new h(k.endContainer,k.endOffset)};h.after=function(k){return new h(k.parentNode,g(k)+1)};h.before=function(k){return new h(k.parentNode,g(k))};h.isAtStart=function(k){return k?k.isAtStart():!1};h.isAtEnd=
function(k){return k?k.isAtEnd():!1};h.isTextPosition=function(k){return k?q.isText(k.container()):!1};return h});L("tinymce.core.caret.CaretUtils","tinymce.core.util.Fun tinymce.core.dom.TreeWalker tinymce.core.dom.NodeType tinymce.core.caret.CaretPosition tinymce.core.caret.CaretContainer tinymce.core.caret.CaretCandidate".split(" "),function(u,r,q,l,b,c){var d=q.isContentEditableTrue,a=q.isContentEditableFalse,f=q.matchStyleValues("display","block table table-cell table-caption list-item"),n=b.isCaretContainer,
A=b.isCaretContainerBlock,x=u.curry,t=q.isElement,p=c.isCaretCandidate,g=function(h,k){for(var w;w=h(k);)if(!A(w))return w;return null},e=function(h,k){for(h=h.parentNode;h&&h!=k;h=h.parentNode)if(d(h))return h;return k},v=function(h,k){for(;h&&h!=k;){if(f(h))return h;h=h.parentNode}return null};u=function(h,k){var w=k.ownerDocument.createRange();h?(w.setStartBefore(k),w.setEndBefore(k)):(w.setStartAfter(k),w.setEndAfter(k));return w};var y=function(h,k,w){var z;for(z=h?"previousSibling":"nextSibling";w&&
w!=k;){h=w[z];n(h)&&(h=h[z]);if(a(h)){if(v(h,k)==v(w,k))return h;break}if(p(h))break;w=w.parentNode}return null},C=x(u,!0),B=x(u,!1);u=function(h,k){if(k){var w=k.container();k=k.offset();h=t(w)?w.childNodes[k+h]:null}else h=null;return a(h)};return{isForwards:function(h){return 0<h},isBackwards:function(h){return 0>h},findNode:function(h,k,w,z,m){z=new r(h,z);if(0>k){if(a(h)||A(h))if(h=g(z.prev,!0),w(h))return h;for(;h=g(z.prev,m);)if(w(h))return h}if(0<k){if(a(h)||A(h))if(h=g(z.next,!0),w(h))return h;
for(;h=g(z.next,m);)if(w(h))return h}return null},getEditingHost:e,getParentBlock:v,isInSameBlock:function(h,k,w){return v(h.container(),w)==v(k.container(),w)},isInSameEditingHost:function(h,k,w){return e(h.container(),w)==e(k.container(),w)},isBeforeContentEditableFalse:x(u,0),isAfterContentEditableFalse:x(u,-1),normalizeRange:function(h,k,w){var z=x(y,!0,k),m=x(y,!1,k);var D=w.startContainer;var F=w.startOffset;if(b.isCaretContainerBlock(D)){t(D)||(D=D.parentNode);var G=D.getAttribute("data-mce-caret");
if("before"==G&&(k=D.nextSibling,a(k)))return C(k);if("after"==G&&(k=D.previousSibling,a(k)))return B(k)}if(!w.collapsed)return w;if(q.isText(D)){if(n(D)){if(1===h){if(k=m(D))return C(k);if(k=z(D))return B(k)}if(-1===h){if(k=z(D))return B(k);if(k=m(D))return C(k)}return w}if(b.endsWithCaretContainer(D)&&F>=D.data.length-1)return 1===h&&(k=m(D))?C(k):w;if(b.startsWithCaretContainer(D)&&1>=F)return-1===h&&(k=z(D))?B(k):w;if(F===D.data.length)return(k=m(D))?C(k):w;if(0===F&&(k=z(D)))return B(k)}return w}}});
L("tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(u,r,q,l,b,c){var d=u.isContentEditableFalse,a=u.isText,f=u.isElement,n=u.isBr,A=l.isForwards,x=l.isBackwards,t=r.isCaretCandidate,p=r.isAtomic,g=r.isEditableCaretCandidate,e=function(B,h){for(var k=[];B&&B!=h;)k.push(B),B=B.parentNode;return k},v=function(B,h){return B.hasChildNodes()&&
h<B.childNodes.length?B.childNodes[h]:null},y=function(B,h){if(A(B)){if(t(h.previousSibling)&&!a(h.previousSibling))return q.before(h);if(a(h))return q(h,0)}if(x(B)){if(t(h.nextSibling)&&!a(h.nextSibling))return q.after(h);if(a(h))return q(h,h.data.length)}return x(B)?n(h)?q.before(h):q.after(h):q.before(h)},C=function(B,h,k){if(!f(k)||!h)return null;if(h.isEqual(q.after(k))&&k.lastChild){var w=q.after(k.lastChild);if(x(B)&&t(k.lastChild)&&f(k.lastChild))return n(k.lastChild)?q.before(k.lastChild):
w}else w=h;var z=w.container();var m=w.offset();if(a(z)){if(x(B)&&0<m)return q(z,--m);if(A(B)&&m<z.length)return q(z,++m);h=z}else{if(x(B)&&0<m&&(h=v(z,m-1),t(h)))return!p(h)&&(B=l.findNode(h,B,g,h))?a(B)?q(B,B.data.length):q.after(B):a(h)?q(h,h.data.length):q.before(h);if(A(B)&&m<z.childNodes.length&&(h=v(z,m),t(h)))return z=h,z=u.isBr(z)?(w=C(1,q.after(z),k))?!l.isInSameBlock(q.before(z),q.before(w),k):!1:!1,z?C(B,q.after(h),k):!p(h)&&(B=l.findNode(h,B,g,h))?a(B)?q(B,0):q.before(B):a(h)?q(h,0):
q.after(h);h=w.getNode()}if(A(B)&&w.isAtEnd()||x(B)&&w.isAtStart())if(h=l.findNode(h,B,c.constant(!0),k,!0),g(h))return y(B,h);h=l.findNode(h,B,g,k);return!(k=b.last(b.filter(e(z,k),d)))||h&&k.contains(h)?h?y(B,h):null:w=A(B)?q.after(k):q.before(k)};return function(B){return{next:function(h){return C(1,h,B)},prev:function(h){return C(-1,h,B)}}}});L("tinymce.core.InsertList",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],
function(u,r,q,l){var b=function(g,e,v){e=e.serialize(v);g=g.createFragment(e);e=g.firstChild;v=g.lastChild;e&&"META"===e.nodeName&&e.parentNode.removeChild(e);v&&"mce_marker"===v.id&&v.parentNode.removeChild(v);return g},c=function(g){return l.grep(g.childNodes,function(e){return"LI"===e.nodeName})},d=function(g){var e;if(e=0<g.length){e=g[g.length-1];var v;!(v=!e.firstChild)&&(v=e&&e.firstChild&&e.firstChild===e.lastChild)&&(e=e.firstChild,v="\u00a0"===e.data||q.isBr(e));e=v}return e?g.slice(0,
-1):g},a=function(g,e){return(g=g.getParent(e,g.isBlock))&&"LI"===g.nodeName?g:null},f=function(g,e){var v=e.cloneRange();e=e.cloneRange();v.setStartBefore(g);e.setEndAfter(g);return[v.cloneContents(),e.cloneContents()]},n=function(g,e){g=u.before(g);return(e=(new r(e)).next(g))?e.toRange():null},A=function(g,e){g=u.after(g);return(e=(new r(e)).prev(g))?e.toRange():null},x=function(g,e,v,y){y=f(g,y);var C=g.parentNode;C.insertBefore(y[0],g);l.each(e,function(B){C.insertBefore(B,g)});C.insertBefore(y[1],
g);C.removeChild(g);return A(e[e.length-1],v)},t=function(g,e,v){var y=g.parentNode;l.each(e,function(C){y.insertBefore(C,g)});return n(g,v)},p=function(g,e,v,y){y.insertAfter(e.reverse(),g);return A(e[0],v)};return{isListFragment:function(g,e){var v=e.firstChild;e=e.lastChild;v&&"meta"===v.name&&(v=v.next);e&&"mce_marker"===e.attr("id")&&(e=e.prev);var y=e,C=g.getNonEmptyElements(),B;if(B=y){if(!(C=y.isEmpty(C))){if(g=g.getBlockElements()[y.name]&&y.firstChild&&y.firstChild===y.lastChild)g=y.firstChild,
g="br"===g.name||"\u00a0"===g.value;C=g}B=C}B&&(e=e.prev);return v&&v===e?"ul"===v.name||"ol"===v.name:!1},insertAtCaret:function(g,e,v,y){g=b(e,g,y);var C=a(e,v.startContainer);g=d(c(g.firstChild));y=e.getRoot();var B=function(h){var k=u.fromRangeStart(v),w=new r(e.getRoot());return(h=1===h?w.prev(k):w.next(k))?a(e,h.getNode())!==C:!0};return B(1)?t(C,g,y):B(2)?p(C,g,y,e):x(C,g,y,v)},isParentBlockLi:function(g,e){return!!a(g,e)},trimListItems:d,listItems:c}});L("tinymce.core.caret.CaretBookmark",
["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(u,r,q,l,b){var c=u.isText,d=u.isBogus,a=r.nodeIndex,f=function(y){y=y.parentNode;return d(y)?f(y):y},n=function(y){return y?l.reduce(y.childNodes,function(C,B){d(B)&&"BR"!=B.nodeName?C=C.concat(n(B)):C.push(B);return C},[]):[]},A=function(y,C){for(;(y=y.previousSibling)&&c(y);)C+=y.data.length;return C},x=function(y){return function(C){return y===C}},
t=function(y){var C=n(f(y));var B=l.findIndex(C,x(y),y);C=C.slice(0,B+1);var h=l.reduce(C,function(k,w,z){c(w)&&c(C[z-1])&&k++;return k},0);C=l.filter(C,u.matchNodeNames(y.nodeName));B=l.findIndex(C,x(y),y);return B-h},p=function(y){return(c(y)?"text()":y.nodeName.toLowerCase())+"["+t(y)+"]"},g=function(y,C,B){var h=[];for(C=C.parentNode;!(C==y||B&&B(C));C=C.parentNode)h.push(C);return h},e=function(y,C,B){var h=n(y);h=l.filter(h,function(k,w){return!c(k)||!c(h[w-1])});h=l.filter(h,u.matchNodeNames(C));
return h[B]},v=function(y,C){for(var B=y,h=0,k;c(B);){k=B.data.length;if(C>=h&&C<=h+k){y=B;C-=h;break}if(!c(B.nextSibling)){y=B;C=k;break}h+=k;B=B.nextSibling}C>y.data.length&&(C=y.data.length);return new b(y,C)};return{create:function(y,C){var B=[];var h=C.container();var k=C.offset();c(h)?C=A(h,k):(h=h.childNodes,k>=h.length?(C="after",k=h.length-1):C="before",h=h[k]);B.push(p(h));y=g(y,h);y=l.filter(y,q.negate(u.isBogus));B=B.concat(l.map(y,function(w){return p(w)}));return B.reverse().join("/")+
","+C},resolve:function(y,C){if(!C)return null;var B=C.split(",");C=B[0].split("/");B=1<B.length?B[1]:"before";y=l.reduce(C,function(h,k){k=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(k);if(!k)return null;"text()"===k[1]&&(k[1]="#text");return e(h,k[1],parseInt(k[2],10))},y);return y?c(y)?v(y,parseInt(B,10)):(B="after"===B?a(y)+1:a(y),new b(y.parentNode,B)):null}}});L("tinymce.core.dom.GetBookmark","ephox.katamari.api.Fun tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.selection.RangeNodes tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a){var f=b.isContentEditableFalse,n=function(y,C,B){B=y(C.data.slice(0,B)).length;for(C=C.previousSibling;C&&b.isText(C);C=C.previousSibling)B+=y(C.data).length;return B},A=function(y,C,B,h,k){var w=h[k?"startContainer":"endContainer"];h=h[k?"startOffset":"endOffset"];k=[];var z=0,m=y.getRoot();b.isText(w)?k.push(B?n(C,w,h):h):(C=w.childNodes,h>=C.length&&C.length&&(z=1,h=Math.max(0,C.length-1)),k.push(y.nodeIndex(C[h],B)+z));for(;w&&w!==m;w=w.parentNode)k.push(y.nodeIndex(w,
B));return k},x=function(y){b.isText(y)&&0===y.data.length&&y.parentNode.removeChild(y)},t=function(y,C,B){var h=0;a.each(y.select(C),function(k){if("all"!==k.getAttribute("data-mce-bogus")){if(k===B)return!1;h++}});return h},p=function(y,C){var B=C?"start":"end";var h=y[B+"Container"];B=y[B+"Offset"];b.isElement(h)&&"TR"===h.nodeName&&(h=h.childNodes,h=h[Math.min(C?B:B-1,h.length-1)])&&(B=C?0:h.childNodes.length,y["set"+(C?"Start":"End")](h,B))},g=function(y){p(y,!0);p(y,!1);return y},e=function(y,
C){if(b.isElement(y)&&(y=c.getNode(y,C),f(y)))return y;if(q.isCaretContainer(y)){b.isText(y)&&q.isCaretContainerBlock(y)&&(y=y.parentNode);C=y.previousSibling;if(f(C))return C;C=y.nextSibling;if(f(C))return C}},v=function(y,C,B){var h=B.getNode(),k=h?h.nodeName:null,w=B.getRng();if(f(h)||"IMG"===k)return{name:k,index:t(B.dom,k,h)};if(h=e(w.startContainer,w.startOffset)||e(w.endContainer,w.endOffset))return k=h.tagName,{name:k,index:t(B.dom,k,h)};h=B.dom;k={};k.start=A(h,y,C,w,!0);B.isCollapsed()||
(k.end=A(h,y,C,w,!1));return k};return{getBookmark:function(y,C,B){if(2===C)return v(d.trim,B,y);if(3===C)return C=y.getRng(),{start:r.create(y.dom.getRoot(),l.fromRangeStart(C)),end:r.create(y.dom.getRoot(),l.fromRangeEnd(C))};if(C)return{rng:y.getRng()};var h=y.dom;C=y.getRng();B=h.uniqueId();var k=y.isCollapsed(),w=y.getNode(),z=w.nodeName;"IMG"===z?y={name:z,index:t(h,z,w)}:(w=g(C.cloneRange()),k||(w.collapse(!1),k=h.create("span",{"data-mce-type":"bookmark",id:B+"_end",style:"overflow:hidden;line-height:0px"},
"&#xFEFF;"),w.insertNode(k),x(k.nextSibling)),C=g(C),C.collapse(!0),h=h.create("span",{"data-mce-type":"bookmark",id:B+"_start",style:"overflow:hidden;line-height:0px"},"&#xFEFF;"),C.insertNode(h),x(h.previousSibling),y.moveToBookmark({id:B,keep:1}),y={id:B});return y},getUndoBookmark:u.curry(v,u.identity,!0)}});L("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(u){return{cat:function(r){for(var q=[],l=function(c){q.push(c)},b=0;b<r.length;b++)r[b].each(l);return q},findMap:function(r,
q){for(var l=0;l<r.length;l++){var b=q(r[l],l);if(b.isSome())return b}return u.none()},liftN:function(r,q){for(var l=[],b=0;b<r.length;b++){var c=r[b];if(c.isSome())l.push(c.getOrDie());else return u.none()}return u.some(q.apply(null,l))}}});L("tinymce.core.dom.ResolveBookmark","ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.Env tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d){var a=
function(g,e){!g.isBlock(e)||e.innerHTML||q.ie||(e.innerHTML='<br data-mce-bogus="1" />');return e},f=function(g,e){var v=g.createRng();var y=l.resolve(g.getRoot(),e.start);v.setStart(y.container(),y.offset());y=l.resolve(g.getRoot(),e.end);v.setEnd(y.container(),y.offset());return v},n=function(g,e,v,y){v=v[e?"start":"end"];var C=g.getRoot();if(v){g=v[0];var B=C;for(C=v.length-1;1<=C;C--){B=B.childNodes;if(v[C]>B.length-1)return;B=B[v[C]]}3===B.nodeType&&(g=Math.min(v[0],B.nodeValue.length));1===
B.nodeType&&(g=Math.min(v[0],B.childNodes.length));e?y.setStart(B,g):y.setEnd(B,g)}return!0},A=function(g,e,v){var y=g.get(v.id+"_"+e);var C=v.keep;if(y){var B=y.parentNode;if(C){B=y.firstChild;var h=1}else h=g.nodeIndex(y);if(!C){var k=y.previousSibling;C=y.nextSibling;for(d.each(d.grep(y.childNodes),function(w){c.isText(w)&&(w.nodeValue=w.nodeValue.replace(/\uFEFF/g,""))});y=g.get(v.id+"_"+e);)g.remove(y,1);k&&C&&k.nodeType===C.nodeType&&c.isText(k)&&!q.opera&&(h=k.nodeValue.length,k.appendData(C.nodeValue),
g.remove(C),B=k)}return u.some(b(B,h))}return u.none()},x=function(g,e){return g.isSome()?g:e},t=function(g,e){var v=A(g,"start",e);e=A(g,"end",e);return r.liftN([v,x(e,v)],function(y,C){var B=g.createRng();B.setStart(a(g,y.container()),y.offset());B.setEnd(a(g,C.container()),C.offset());return B})},p=function(g,e){return u.from(g.select(e.name)[e.index]).map(function(v){var y=g.createRng();y.selectNode(v);return y})};return{resolve:function(g,e){g=g.dom;if(e){if(d.isArray(e.start)){var v=g.createRng();
e=n(g,!0,e,v)&&n(g,!1,e,v)?u.some(v):u.none();return e}if("string"===typeof e.start)return u.some(f(g,e));if(e.id)return t(g,e);if(e.name)return p(g,e);if(e.rng)return u.some(e.rng)}return u.none()}}});L("tinymce.core.dom.Bookmarks",["tinymce.core.dom.GetBookmark","tinymce.core.dom.ResolveBookmark"],function(u,r){return{getBookmark:function(q,l,b){return u.getBookmark(q,l,b)},moveToBookmark:function(q,l){r.resolve(q,l).each(function(b){q.setRng(b)})},isBookmarkNode:function(q){return q&&"SPAN"===
q.tagName&&"bookmark"===q.getAttribute("data-mce-type")}}});L("tinymce.core.dom.ElementUtils",["tinymce.core.dom.Bookmarks","tinymce.core.util.Tools"],function(u,r){var q=r.each;return function(l){this.compare=function(b,c){if(b.nodeName!=c.nodeName)return!1;var d=function(f){var n={};q(l.getAttribs(f),function(A){A=A.nodeName.toLowerCase();0!==A.indexOf("_")&&"style"!==A&&0!==A.indexOf("data-")&&(n[A]=l.getAttrib(f,A))});return n},a=function(f,n){var A;for(A in f)if(f.hasOwnProperty(A)){var x=n[A];
if("undefined"==typeof x||f[A]!=x)return!1;delete n[A]}for(A in n)if(n.hasOwnProperty(A))return!1;return!0};return a(d(b),d(c))&&a(l.parseStyle(l.getAttrib(b,"style")),l.parseStyle(l.getAttrib(c,"style")))?!u.isBookmarkNode(b)&&!u.isBookmarkNode(c):!1}}});L("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(u){var r=function(l,b){u.parent(l).each(function(c){c.dom().insertBefore(b.dom(),l.dom())})},q=function(l,b){l.dom().appendChild(b.dom())};return{before:r,after:function(l,
b){u.nextSibling(l).fold(function(){u.parent(l).each(function(c){q(c,b)})},function(c){r(c,b)})},prepend:function(l,b){u.firstChild(l).fold(function(){q(l,b)},function(c){l.dom().insertBefore(b.dom(),c.dom())})},append:q,appendAt:function(l,b,c){u.child(l,c).fold(function(){q(l,b)},function(d){r(d,b)})},wrap:function(l,b){r(l,b);q(b,l)}}});L("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(u,r){return{before:function(q,l){u.each(l,function(b){r.before(q,
b)})},after:function(q,l){u.each(l,function(b,c){r.after(0===c?q:l[c-1],b)})},prepend:function(q,l){u.each(l.slice().reverse(),function(b){r.prepend(q,b)})},append:function(q,l){u.each(l,function(b){r.append(q,b)})}}});L("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(u,r,q){var l=function(b){b=b.dom();null!==b.parentNode&&b.parentNode.removeChild(b)};return{empty:function(b){b.dom().textContent="";u.each(q.children(b),
function(c){l(c)})},remove:l,unwrap:function(b){var c=q.children(b);0<c.length&&r.before(b,c);l(b)}}});L("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(u,r,q){return function(l,b){var c=function(n){try{return d(n)}catch(A){return r.none()}},d=function(n){return l(n)?r.from(n.dom().nodeValue):r.none()},a=u.detect().browser,f=a.isIE()&&10===a.version.major?c:d;return{get:function(n){if(!l(n))throw new q("Can only get "+b+" value of a "+
b+" node");return f(n).getOr("")},getOption:f,set:function(n,A){if(!l(n))throw new q("Can only set raw "+b+" value of a "+b+" node");n.dom().nodeValue=A}}}});L("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(u,r){var q=r(u.isText,"text");return{get:function(l){return q.get(l)},getOption:function(l){return q.getOption(l)},set:function(l,b){q.set(l,b)}}});L("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body",
"ephox.sugar.api.search.Traverse"],function(u,r,q){var l=function(b,c){var d=[];u.each(q.children(b),function(a){c(a)&&(d=d.concat([a]));d=d.concat(l(a,c))});return d};return{all:function(b){return l(r.body(),b)},ancestors:function(b,c,d){return u.filter(q.parents(b,d),c)},siblings:function(b,c){return u.filter(q.siblings(b),c)},children:function(b,c){return u.filter(q.children(b),c)},descendants:l}});L("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],
function(u,r){return{all:function(q){return r.all(q)},ancestors:function(q,l,b){return u.ancestors(q,function(c){return r.is(c,l)},b)},siblings:function(q,l){return u.siblings(q,function(b){return r.is(b,l)})},children:function(q,l){return u.children(q,function(b){return r.is(b,l)})},descendants:function(q,l){return r.all(l,q)}}});L("tinymce.core.dom.PaddingBr","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType".split(" "),
function(u,r,q,l,b,c,d,a,f){var n=function(x){var t=[];for(x=x.dom();x;)t.push(l.fromDom(x)),x=x.lastChild;return t},A=function(x){return b.isText(x)?"\u00a0"===c.get(x):f.isBr(x)};return{removeTrailingBr:function(x){var t=d.descendants(x,"br");x=u.filter(n(x).slice(-1),f.isBr);t.length===x.length&&u.each(x,q.remove)},fillWithPaddingBr:function(x){q.empty(x);r.append(x,l.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(x){return 1===u.filter(a.children(x),A).length},trimBlockTrailingBr:function(x){a.lastChild(x).each(function(t){a.prevSibling(t).each(function(p){f.isBlock(x)&&
f.isBr(t)&&f.isBlock(p)&&q.remove(t)})})}}});L("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(u,r){var q=r.makeMap;return function(l){var b=[];l=l||{};var c=l.indent;var d=q(l.indent_before||"");var a=q(l.indent_after||"");var f=u.getEncodeFunc(l.entity_encoding||"raw",l.entities);var n="html"==l.element_format;return{start:function(A,x,t){var p;if(c&&d[A]&&0<b.length){var g=b[b.length-1];0<g.length&&"\n"!==g&&b.push("\n")}b.push("<",A);if(x)for(g=0,p=
x.length;g<p;g++){var e=x[g];b.push(" ",e.name,'="',f(e.value,!0),'"')}b[b.length]=!t||n?">":" />";t&&c&&a[A]&&0<b.length&&(g=b[b.length-1],0<g.length&&"\n"!==g&&b.push("\n"))},end:function(A){b.push("</",A,">");c&&a[A]&&0<b.length&&(A=b[b.length-1],0<A.length&&"\n"!==A&&b.push("\n"))},text:function(A,x){0<A.length&&(b[b.length]=x?A:f(A))},cdata:function(A){b.push("<![CDATA[",A,"]]\x3e")},comment:function(A){b.push("\x3c!--",A,"--\x3e")},pi:function(A,x){x?b.push("<?",A," ",f(x),"?>"):b.push("<?",
A,"?>");c&&b.push("\n")},doctype:function(A){b.push("<!DOCTYPE",A,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}}});L("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(u,r){return function(q,l){var b=new u(q);q=q||{};q.validate="validate"in q?q.validate:!0;this.schema=l=l||new r;this.writer=b;this.serialize=function(c){var d=q.validate;var a={3:function(n){b.text(n.value,n.raw)},8:function(n){b.comment(n.value)},
7:function(n){b.pi(n.name,n.value)},10:function(n){b.doctype(n.value)},4:function(n){b.cdata(n.value)},11:function(n){if(n=n.firstChild){do f(n);while(n=n.next)}}};b.reset();var f=function(n){var A=a[n.type],x,t;if(A)A(n);else{A=n.name;var p=n.shortEnded;var g=n.attributes;if(d&&g&&1<g.length){var e=[];e.map={};if(t=l.getElementRule(n.name)){var v=0;for(x=t.attributesOrder.length;v<x;v++){var y=t.attributesOrder[v];if(y in g.map){var C=g.map[y];e.map[y]=C;e.push({name:y,value:C})}}v=0;for(x=g.length;v<
x;v++)y=g[v].name,y in e.map||(C=g.map[y],e.map[y]=C,e.push({name:y,value:C}));g=e}}b.start(n.name,g,p);if(!p){if(n=n.firstChild){do f(n);while(n=n.next)}b.end(A)}}};if(1!=c.type||q.inner)a[11](c);else f(c);return b.getContent()}}});L("tinymce.core.caret.CaretFinder","ephox.katamari.api.Fun ephox.katamari.api.Option tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.dom.NodeType".split(" "),function(u,r,q,l,
b,c,d){var a=function(p){return d.isBr(p)?l.before(p):l.after(p)},f=function(p){return l.isTextPosition(p)?0===p.offset():q.isCaretCandidate(p.getNode())},n=function(p){return l.isTextPosition(p)?p.offset()===p.container().data.length:q.isCaretCandidate(p.getNode(!0))},A=function(p,g){return!l.isTextPosition(p)&&!l.isTextPosition(g)&&p.getNode()===g.getNode(!0)},x=function(p,g,e){g=new c(g);return r.from(p?g.next(e):g.prev(e))},t=function(p,g){var e=p?g.firstChild:g.lastChild;if(d.isText(e))return r.some(new l(e,
p?0:e.data.length));if(e){if(q.isCaretCandidate(e))return r.some(p?l.before(e):a(e));e=p?l.before(e):l.after(e);return x(p,g,e)}return r.none()};return{fromPosition:x,nextPosition:u.curry(x,!0),prevPosition:u.curry(x,!1),navigate:function(p,g,e){return x(p,g,e).bind(function(v){var y;if(y=b.isInSameBlock(e,v,g))if(p){if(y=!A(e,v))y=!(!l.isTextPosition(e)&&d.isBr(e.getNode()));y=y&&n(e)&&f(v)}else y=!A(v,e)&&f(e)&&n(v);return y?x(p,g,v):r.some(v)})},positionIn:t,firstPositionIn:u.curry(t,!0),lastPositionIn:u.curry(t,
!1)}});L("tinymce.core.selection.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(u,r,q,l){var b=function(c){var d=q.fromRangeStart(c),a=q.fromRangeEnd(c),f=c.commonAncestorContainer;return r.fromPosition(!1,f,a).map(function(n){if(!l.isInSameBlock(d,a,f)&&l.isInSameBlock(d,n,f)){var A=d.container(),x=d.offset(),t=n.container();n=n.offset();var p=u.createRange();p.setStart(A,x);p.setEnd(t,n);return p}return c}).getOr(c)};
return{normalize:function(c){return c.collapsed?c:b(c)}}});L("tinymce.core.InsertContent","ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.InsertList tinymce.core.caret.CaretPosition tinymce.core.caret.CaretWalker tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.html.Serializer tinymce.core.selection.RangeNormalizer tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d,a,f,n,A,x){var t=a.matchNodeNames("td th"),
p=function(v,y,C){if("all"===C.getAttribute("data-mce-bogus"))C.parentNode.insertBefore(v.dom.createFragment(y),C);else{var B=C.firstChild,h=C.lastChild;!B||B===h&&"BR"===B.nodeName?v.dom.setHTML(C,y):v.selection.setContent(y)}},g=function(v,y){u.from(v.getParent(y,"td,th")).map(r.fromDom).each(f.trimBlockTrailingBr)},e=function(v,y,C){var B,h=v.schema.getTextInlineElements(),k=v.selection,w=v.dom;var z=function(Q){var V=k.getRng(!0);var W=V.startContainer;V=V.startOffset;var ba=function(N){return W[N]&&
3==W[N].nodeType};3==W.nodeType&&(0<V?Q=Q.replace(/^&nbsp;/," "):ba("previousSibling")||(Q=Q.replace(/^ /,"&nbsp;")),V<W.length?Q=Q.replace(/&nbsp;(<br>|)$/," "):ba("nextSibling")||(Q=Q.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")));return Q};var m=function(){var Q=k.getRng(!0);var V=Q.startContainer;var W=Q.startOffset;3==V.nodeType&&Q.collapsed&&("\u00a0"===V.data[W]?(V.deleteData(W,1),/[\u00a0| ]$/.test(y)||(y+=" ")):"\u00a0"===V.data[W-1]&&(V.deleteData(W-1,1),/[\u00a0| ]$/.test(y)||(y=" "+y)))};var D=
function(Q){return Q&&!v.schema.getShortEndedElements()[Q.nodeName]};/^ | $/.test(y)&&(y=z(y));z=v.parser;var F=C.merge;var G=new n({validate:v.settings.validate},v.schema);var I={content:y,format:"html",selection:!0,paste:C.paste};I=v.fire("BeforeSetContent",I);if(I.isDefaultPrevented())v.fire("SetContent",{content:I.content,format:"html",selection:!0,paste:C.paste});else{y=I.content;-1==y.indexOf("{$caret}")&&(y+="{$caret}");y=y.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
var H=k.getRng();var E=H.startContainer||(H.parentElement?H.parentElement():null),J=v.getBody();E===J&&k.isCollapsed()&&w.isBlock(J.firstChild)&&D(J.firstChild)&&w.isEmpty(J.firstChild)&&(H=w.createRng(),H.setStart(J.firstChild,0),H.setEnd(J.firstChild,0),k.setRng(H));k.isCollapsed()||(v.selection.setRng(A.normalize(v.selection.getRng())),v.getDoc().execCommand("Delete",!1,null),m());m=k.getNode();D={context:m.nodeName.toLowerCase(),data:C.data,insert:!0};var M=z.parse(y,D);if(!0===C.paste&&l.isListFragment(v.schema,
M)&&l.isParentBlockLi(w,m))H=l.insertAtCaret(G,w,v.selection.getRng(!0),M),v.selection.setRng(H),v.fire("SetContent",I);else{(function(Q){for(;Q=Q.walk();)1===Q.type&&Q.attr("data-mce-fragment","1")})(M);var P=M.lastChild;if("mce_marker"==P.attr("id"))for(C=P,P=P.prev;P;P=P.walk(!0))if(3==P.type||!w.isBlock(P.name)){v.schema.isValidChild(P.parent.name,"span")&&P.parent.insert(C,P,"br"===P.name);break}v._selectionOverrides.showBlockCaretContainer(m);if(D.invalid){k.setContent('<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
m=k.getNode();C=v.getBody();for(9==m.nodeType?m=P=C:P=m;P!==C;)m=P,P=P.parentNode;y=m==C?C.innerHTML:w.getOuterHTML(m);y=G.serialize(z.parse(y.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return G.serialize(M)})));m==C?w.setHTML(C,y):w.setOuterHTML(m,y)}else y=G.serialize(M),p(v,y,m);(function(){if(F){var Q=v.getBody(),V=new d(w);x.each(w.select("*[data-mce-fragment]"),function(W){for(var ba=W.parentNode;ba&&ba!=Q;ba=ba.parentNode)h[W.nodeName.toLowerCase()]&&V.compare(ba,
W)&&w.remove(W,!0)})}})();(function(Q){var V,W;if(Q)if(k.scrollIntoView(Q),V=function(N){for(var O=v.getBody();N&&N!==O;N=N.parentNode)if("false"===v.dom.getContentEditable(N))return N;return null}(Q))w.remove(Q),k.select(V);else{H=w.createRng();(P=Q.previousSibling)&&3==P.nodeType?(H.setStart(P,P.nodeValue.length),q.ie||(B=Q.nextSibling)&&3==B.nodeType&&(P.appendData(B.data),B.parentNode.removeChild(B))):(H.setStartBefore(Q),H.setEndBefore(Q));var ba=function(N){N=b.fromRangeStart(N);if(N=(new c(v.getBody())).next(N))return N.toRange()};
V=w.getParent(Q,w.isBlock);w.remove(Q);V&&w.isEmpty(V)&&(v.$(V).empty(),H.setStart(V,0),H.setEnd(V,0),t(V)||V.getAttribute("data-mce-fragment")||!(W=ba(H))?w.add(V,w.create("br",{"data-mce-bogus":"1"})):(H=W,w.remove(V)));k.setRng(H)}})(w.get("mce_marker"));(function(Q){x.each(Q.getElementsByTagName("*"),function(V){V.removeAttribute("data-mce-fragment")})})(v.getBody());g(v.dom,v.selection.getStart());v.fire("SetContent",I);v.addVisual()}}};return{insertAtCaret:function(v,y){if("string"!==typeof y){var C=
x.extend({paste:y.paste,data:{paste:y.paste}},y);y=y.content}else C={};e(v,y,C)}}});L("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(u,r){return function(q,l,b,c,d){return q(b,c)?r.some(b):u.isFunction(d)&&d(b)?r.none():l(b,c,d)}});L("ephox.sugar.api.search.PredicateFind","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Body ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.impl.ClosestOrAncestor".split(" "),
function(u,r,q,l,b,c,d,a){var f=function(x,t,p){x=x.dom();for(p=u.isFunction(p)?p:q.constant(!1);x.parentNode;){x=x.parentNode;var g=d.fromDom(x);if(t(g))return l.some(g);if(p(g))break}return l.none()},n=function(x,t){return r.find(x.dom().childNodes,q.compose(t,d.fromDom)).map(d.fromDom)},A=function(x,t){var p=function(g){for(var e=0;e<g.childNodes.length;e++){if(t(d.fromDom(g.childNodes[e])))return l.some(d.fromDom(g.childNodes[e]));var v=p(g.childNodes[e]);if(v.isSome())return v}return l.none()};
return p(x.dom())};return{first:function(x){return A(b.body(),x)},ancestor:f,closest:function(x,t,p){return a(function(g){return t(g)},f,x,t,p)},sibling:function(x,t){var p=x.dom();return p.parentNode?n(d.fromDom(p.parentNode),function(g){return!c.eq(x,g)&&t(g)}):l.none()},child:n,descendant:A}});L("tinymce.core.EditorSettings","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.api.Strings ephox.katamari.api.Struct ephox.katamari.api.Type ephox.sand.api.PlatformDetection tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f){var n=c.immutable("sections","settings"),A=a.detect().deviceType.isTouch(),x=["lists","autolink","autosave"],t={theme:"mobile"},p=function(B){B=d.isArray(B)?B.join(" "):B;B=u.map(d.isString(B)?B.split(" "):[],b.trim);return u.filter(B,function(h){return 0<h.length})},g=function(B,h){h=q.bifilter(h,function(k,w){return u.contains(B,w)});return n(h.t,h.f)},e=function(B,h,k){B=B.sections();h=B.hasOwnProperty(h)?B[h]:{};return f.extend({},k,h)},v=function(B,h){h=h.external_plugins?
h.external_plugins:{};return B&&B.external_plugins?f.extend({},B.external_plugins,h):h},y=function(B,h){var k=h.settings().inline;return B&&h.sections().hasOwnProperty("mobile")&&!k},C=function(B,h,k,w){w=g(["mobile"],w);h=f.extend(h,k,w.settings(),y(B,w)?e(w,"mobile",t):{},{validate:!0,content_editable:w.settings().inline,external_plugins:v(k,w.settings())});k=p(k.forced_plugins);var z=p(h.plugins);B=B&&w.sections().hasOwnProperty("mobile")?u.filter(z,r.curry(u.contains,x)):z;B=[].concat(p(k)).concat(p(B));
return f.extend(h,{plugins:B.join(" ")})};return{getEditorSettings:function(B,h,k,w,z){return C(A,{id:h,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:k,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",
forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",
entity_encoding:"named",url_converter:B.convertURL,url_converter_scope:B,ie7_compat:!0},w,z)},get:function(B,h){return l.from(B.settings[h])},getString:r.curry(function(B,h,k){return l.from(h.settings[k]).filter(B)},d.isString),combineSettings:C}});L("tinymce.core.text.Bidi",[],function(){var u=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(r){return u.test(r)}}});L("tinymce.core.keyboard.InlineUtils","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors tinymce.core.EditorSettings tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.text.Bidi".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x){var t=function(g,e){var v=e.container(),y=e.offset();return g?d.isCaretContainerInline(v)?A.isText(v.nextSibling)?new a(v.nextSibling,0):a.after(v):d.isBeforeInline(e)?new a(v,y+1):e:d.isCaretContainerInline(v)?A.isText(v.previousSibling)?new a(v.previousSibling,v.previousSibling.data.length):a.before(v):d.isAfterInline(e)?new a(v,y-1):e},p=r.curry(t,!0);r=r.curry(t,!1);return{isInlineTarget:function(g,e){g=c.getString(g,"inline_boundaries_selector").getOr("a[href],code");
return b.is(l.fromDom(e),g)},findRootInline:function(g,e,v){g=u.filter(n.DOM.getParents(v.container(),"*",e),g);return q.from(g[g.length-1])},isRtl:function(g){return"rtl"===n.DOM.getStyle(g,"direction",!0)||x.hasStrongRtl(g.textContent)},isAtZwsp:function(g){return d.isBeforeInline(g)||d.isAfterInline(g)},normalizePosition:t,normalizeForwards:p,normalizeBackwards:r,hasSameParentBlock:function(g,e,v){e=f.getParentBlock(e,g);g=f.getParentBlock(v,g);return e&&e===g}}});L("tinymce.core.delete.DeleteUtils",
"ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.keyboard.InlineUtils".split(" "),function(u,r,q,l,b,c,d,a){var f=function(n){return function(A){return q.eq(n,l.fromDom(A.dom().parentNode))}};return{getParentBlock:function(n,A){return q.contains(n,A)?b.closest(A,function(x){return d.isTextBlock(x)||d.isListItem(x)},f(n)):u.none()},
paddEmptyBody:function(n){if(n.dom.isEmpty(n.getBody())){n.setContent("");var A=n.getBody();A=A.firstChild&&n.dom.isBlock(A.firstChild)?A.firstChild:A;n.selection.setCursorLocation(A,0)}},willDeleteLastPositionInElement:function(n,A,x){return r.liftN([c.firstPositionIn(x),c.lastPositionIn(x)],function(t,p){var g=a.normalizePosition(!0,t),e=a.normalizePosition(!1,p);t=a.normalizePosition(!1,A);return n?c.nextPosition(x,t).map(function(v){return v.isEqual(e)&&A.isEqual(g)}).getOr(!1):c.prevPosition(x,
t).map(function(v){return v.isEqual(g)&&A.isEqual(e)}).getOr(!1)}).getOr(!0)}}});L("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(u,r,q){var l=function(b,c,d){return u.ancestor(b,function(a){return r.is(a,c)},d)};return{first:function(b){return r.one(b)},ancestor:l,sibling:function(b,c){return u.sibling(b,function(d){return r.is(d,c)})},child:function(b,c){return u.child(b,function(d){return r.is(d,
c)})},descendant:function(b,c){return r.one(c,b)},closest:function(b,c,d){return q(r.is,l,b,c,d)}}});L("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(u){return{any:function(r){return u.first(r).isSome()},ancestor:function(r,q,l){return u.ancestor(r,q,l).isSome()},sibling:function(r,q){return u.sibling(r,q).isSome()},child:function(r,q){return u.child(r,q).isSome()},descendant:function(r,q){return u.descendant(r,q).isSome()},closest:function(r,q,l){return u.closest(r,
q,l).isSome()}}});L("tinymce.core.dom.Empty","ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorExists tinymce.core.caret.CaretCandidate tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(u,r,q,l,b,c,d){var a=function(t,p){var g;if(g=b.isCaretCandidate(p)){if(g=c.isText(p)&&/^[ \t\r\n]*$/.test(p.data))t=q.fromDom(t),g=q.fromDom(p),g=!1===l.ancestor(g,"pre,code",u.curry(r.eq,t));g=!1===g}(t=g)||(t=c.isElement(p)&&
"A"===p.nodeName&&p.hasAttribute("name"));return t||f(p)},f=c.hasAttribute("data-mce-bookmark"),n=c.hasAttribute("data-mce-bogus"),A=c.hasAttributeValue("data-mce-bogus","all"),x=function(t){var p=0;if(a(t,t))return!1;var g=t.firstChild;if(!g)return!0;var e=new d(g,t);do if(A(g))g=e.next(!0);else{if(!n(g))if(c.isBr(g))p++;else if(a(t,g))return!1;g=e.next()}while(g);return 1>=p};return{isEmpty:function(t){return x(t.dom())}}});L("tinymce.core.delete.BlockBoundary","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g){var e=b.immutable("block","position"),v=b.immutable("from","to"),y=function(k,w){k=d.fromDom(k);var z=d.fromDom(w.container());return t.getParentBlock(k,z).map(function(m){return e(m,w)})},C=function(k){return n.parent(k.from().block()).bind(function(w){return n.parent(k.to().block()).filter(function(z){return c.eq(w,z)})}).isSome()},B=function(k,w,z){return g.isBr(z.position().getNode())&&!1===p.isEmpty(z.block())?A.positionIn(!1,z.block().dom()).bind(function(m){return m.isEqual(z.position())?
A.fromPosition(w,k,m).bind(function(D){return y(k,D)}):q.some(z)}).getOr(z):z},h=function(k,w,z){z=y(k,x.fromRangeStart(z));var m=z.bind(function(D){return A.fromPosition(w,k,D.position()).bind(function(F){return y(k,F).map(function(G){return B(k,w,G)})})});return l.liftN([z,m],v).filter(function(D){var F;if(F=!1===c.eq(D.from().block(),D.to().block())&&C(D))F=!1===g.isContentEditableFalse(D.from().block())&&!1===g.isContentEditableFalse(D.to().block());return F})};return{read:function(k,w,z){return z.collapsed?
h(k,w,z):q.none()}}});L("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(u,r,q){var l=function(c,d,a){return r.contains(d,c)?q.parents(c,function(f){return a(f)||r.eq(f,d)}).slice(0,-1):[]},b=function(c,d){return l(c,d,u.constant(!1))};return{parentsUntil:l,parents:b,parentsAndSelf:function(c,d){return[c].concat(b(c,d))}}});L("tinymce.core.delete.MergeBlocks","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.Parents".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p){var g=function(k){var w=d.children(k);return u.findIndex(w,n.isBlock).fold(function(){return w},function(z){return w.slice(0,z)})},e=function(k){k=g(k);u.each(k,function(w){b.remove(w)});return k},v=function(k,w){a.positionIn(k,w.dom()).each(function(z){z=z.getNode();x.isBr(z)&&b.remove(c.fromDom(z))})},y=function(k,w){k=p.parentsAndSelf(w,k);return u.find(k.reverse(),A.isEmpty).each(b.remove)},C=function(k,w){w=d.parents(w,function(z){return q.eq(z,k)});return r.from(w[w.length-
2])},B=function(k,w){return q.contains(w,k)?d.parent(k).bind(function(z){return q.eq(z,w)?r.some(k):C(w,k)}):r.none()},h=function(k,w,z){if(A.isEmpty(z))return b.remove(z),A.isEmpty(w)&&t.fillWithPaddingBr(w),a.firstPositionIn(w.dom());v(!0,w);v(!1,z);var m=e(w);return B(w,z).fold(function(){y(k,w);var D=a.lastPositionIn(z.dom());u.each(m,function(F){l.append(z,F)});return D},function(D){var F=a.prevPosition(z.dom(),f.before(D.dom()));u.each(m,function(G){l.before(D,G)});y(k,w);return F})};return{mergeBlocks:function(k,
w,z,m){return w?h(k,m,z):h(k,z,m)}}});L("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(u,r,q){return{backspaceDelete:function(l,b){var c=u.fromDom(l.getBody());var d=r.read(c.dom(),b,l.selection.getRng()).bind(function(a){return q.mergeBlocks(c,b,a.from().block(),a.to().block())});d.each(function(a){l.selection.setRng(a.toRange())});return d.isSome()}}});L("tinymce.core.delete.BlockRangeDelete",
"ephox.katamari.api.Fun ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.delete.MergeBlocks tinymce.core.dom.ElementType".split(" "),function(u,r,q,l,b,c,d,a,f,n){var A=function(t,p){var g=p.getRng();return r.liftN([a.getParentBlock(t,l.fromDom(g.startContainer)),a.getParentBlock(t,l.fromDom(g.endContainer))],function(e,
v){return!1===q.eq(e,v)?(g.deleteContents(),f.mergeBlocks(t,!0,e,v).each(function(y){p.setRng(y.toRange())}),!0):!1}).getOr(!1)},x=function(t,p){p=l.fromDom(p);t=u.curry(q.eq,t);return b.ancestor(p,n.isTableCell,t).isSome()};return{backspaceDelete:function(t,p){if(t.selection.isCollapsed())t=!1;else{t.selection.getRng();p=l.fromDom(t.getBody());var g=t.selection.getRng(),e=c.prevPosition(p.dom(),d.fromRangeStart(g)).isNone(),v=c.nextPosition(p.dom(),d.fromRangeEnd(g)).isNone();!x(p,g.startContainer)&&
!x(p,g.endContainer)&&e&&v?(t.setContent(""),t.selection.setCursorLocation(),t=!0):t=A(p,t.selection)}return t}}});L("ephox.katamari.api.Adt","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Type global!Array global!Error global!console".split(" "),function(u,r,q,l,b,c){return{generate:function(d){if(!q.isArray(d))throw new b("cases must be an array");if(0===d.length)throw new b("there must be at least one case");var a=[],f={};u.each(d,function(n,A){var x=r.keys(n);if(1!==x.length)throw new b("one and only one name per case");
var t=x[0],p=n[t];if(void 0!==f[t])throw new b("duplicate key detected:"+t);if("cata"===t)throw new b("cannot have a case named cata (sorry)");if(!q.isArray(p))throw new b("case arguments must be an array");a.push(t);f[t]=function(){var g=arguments.length;if(g!==p.length)throw new b("Wrong number of arguments to case "+t+". Expected "+p.length+" ("+p+"), got "+g);var e=new l(g);for(g=0;g<e.length;g++)e[g]=arguments[g];return{fold:function(){if(arguments.length!==d.length)throw new b("Wrong number of arguments to fold. Expected "+
d.length+", got "+arguments.length);return arguments[A].apply(null,e)},match:function(v){var y=r.keys(v);if(a.length!==y.length)throw new b("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+y.join(","));if(!u.forall(a,function(C){return u.contains(y,C)}))throw new b("Not all branches were specified when using match. Specified: "+y.join(", ")+"\nRequired: "+a.join(", "));return v[t].apply(null,e)},log:function(v){c.log(v,{constructors:a,constructor:t,params:e})}}}});return f}}});
L("tinymce.core.delete.CefDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),function(u,r,q,l,b,c,d,a,f){var n=u.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),A=function(v,y){y=y.getNode(!1===v);v=v?"after":"before";return f.isElement(y)&&
y.getAttribute("data-mce-caret")===v},x=function(v,y,C,B){var h=B.getNode(!1===y);return d.getParentBlock(q.fromDom(v),q.fromDom(C.getNode())).map(function(k){return a.isEmpty(k)?n.remove(k.dom()):n.moveToElement(h)}).orThunk(function(){return r.some(n.moveToElement(h))})},t=function(v,y,C){return l.fromPosition(y,v,C).bind(function(B){return y&&f.isContentEditableFalse(B.getNode())?x(v,y,C,B):!1===y&&f.isContentEditableFalse(B.getNode(!0))?x(v,y,C,B):y&&c.isAfterContentEditableFalse(C)?r.some(n.moveToPosition(B)):
!1===y&&c.isBeforeContentEditableFalse(C)?r.some(n.moveToPosition(B)):r.none()})},p=function(v,y){return v&&f.isContentEditableFalse(y.nextSibling)?r.some(n.moveToElement(y.nextSibling)):!1===v&&f.isContentEditableFalse(y.previousSibling)?r.some(n.moveToElement(y.previousSibling)):r.none()},g=function(v,y,C){return C.fold(function(B){return r.some(n.remove(B))},function(B){return r.some(n.moveToElement(B))},function(B){return c.isInSameBlock(y,B,v)?r.none():r.some(n.moveToPosition(B))})},e=function(v,
y,C){return A(y,C)?p(y,C.getNode(!1===y)).fold(function(){return t(v,y,C)},r.some):t(v,y,C).bind(function(B){return g(v,C,B)})};return{read:function(v,y,C){C=c.normalizeRange(y?1:-1,v,C);C=b.fromRangeStart(C);return!1===y&&c.isAfterContentEditableFalse(C)?r.some(n.remove(C.getNode(!0))):y&&c.isBeforeContentEditableFalse(C)?r.some(n.remove(C.getNode())):e(v,y,C)}}});L("tinymce.core.delete.DeleteElement","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p){var g=function(H,E){var J=E.container(),M=E.offset();return!1===x.isTextPosition(E)&&J===H.parentNode&&M>x.before(H).offset()?new x(E.container(),E.offset()-1):E},e=function(H){return p.isText(H)?new x(H,0):x.before(H)},v=function(H){return p.isText(H)?new x(H,H.data.length):x.after(H)},y=function(H){return n.isCaretCandidate(H.previousSibling)?r.some(v(H.previousSibling)):H.previousSibling?A.lastPositionIn(H.previousSibling):r.none()},C=function(H){return n.isCaretCandidate(H.nextSibling)?
r.some(e(H.nextSibling)):H.nextSibling?A.firstPositionIn(H.nextSibling):r.none()},B=function(H,E){var J=x.before(E.previousSibling?E.previousSibling:E.parentNode);return A.prevPosition(H,J).fold(function(){return A.nextPosition(H,x.after(E))},r.some)},h=function(H,E){return A.nextPosition(H,x.after(E)).fold(function(){return A.prevPosition(H,x.before(E))},r.some)},k=function(H,E){return y(E).orThunk(function(){return C(E)}).orThunk(function(){return B(H,E)})},w=function(H,E){return C(E).orThunk(function(){return y(E)}).orThunk(function(){return h(H,
E)})},z=function(H,E,J){return(H?w(E,J):k(E,J)).map(u.curry(g,J))},m=function(H,E,J){J.fold(function(){H.focus()},function(M){H.selection.setRng(M.toRange(),E)})},D=function(H){return function(E){return E.dom()===H}},F=function(H,E){return E&&H.schema.getBlockElements().hasOwnProperty(d.name(E))},G=function(H){if(t.isEmpty(H)){var E=c.fromHtml('<br data-mce-bogus="1">');b.empty(H);l.append(H,E);return r.some(x.before(E.dom()))}return r.none()},I=function(H,E){return q.liftN([f.prevSibling(H),f.nextSibling(H),
E],function(J,M,P){var Q=J.dom(),V=M.dom();if(p.isText(Q)&&p.isText(V))return J=Q.data.length,Q.appendData(V.data),b.remove(M),b.remove(H),P.container()===V?new x(Q,J):P;b.remove(H);return P}).orThunk(function(){b.remove(H);return E})};return{deleteElement:function(H,E,J){var M=z(E,H.getBody(),J.dom()),P=a.ancestor(J,u.curry(F,H),D(H.getBody())),Q=I(J,M);H.dom.isEmpty(H.getBody())?(H.setContent(""),H.selection.setCursorLocation()):P.bind(G).fold(function(){m(H,E,Q)},function(V){m(H,E,r.some(V))})}}});
L("tinymce.core.delete.CefDelete","ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter tinymce.core.caret.CaretPosition tinymce.core.delete.CefDeleteAction tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.NodeType".split(" "),function(u,r,q,l,b,c,d,a,f){var n=function(p,g){return function(e){p._selectionOverrides.hideFakeCaret();d.deleteElement(p,g,q.fromDom(e));return!0}},A=function(p,g){return function(e){e=
g?b.before(e):b.after(e);p.selection.setRng(e.toRange());return!0}},x=function(p){return function(g){p.selection.setRng(g.toRange());return!0}},t=function(p,g){return c.read(p.getBody(),g,p.selection.getRng()).map(function(e){return e.fold(n(p,g),A(p,g),x(p))}).getOr(!1)};return{backspaceDelete:function(p,g){if(p.selection.isCollapsed())return t(p,g);var e=p.selection.getNode();f.isContentEditableFalse(e)?(u.each(l.descendants(q.fromDom(p.getBody()),".mce-offscreen-selection"),r.remove),d.deleteElement(p,
g,q.fromDom(p.selection.getNode())),a.paddEmptyBody(p),p=!0):p=!1;return p},paddEmptyElement:function(p){var g;a:{var e=p.getBody();for(g=p.selection.getNode();g&&g!==e;){if(f.isContentEditableTrue(g)||f.isContentEditableFalse(g))break a;g=g.parentNode}g=null}f.isContentEditableTrue(g)&&p.dom.isBlock(g)&&p.dom.isEmpty(g)&&(e=p.dom.create("br",{"data-mce-bogus":"1"}),p.dom.setHTML(g,""),g.appendChild(e),p.selection.setRng(b.before(e).toRange()));return!0}}});L("tinymce.core.caret.CaretContainerInline",
["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(u,r,q){var l=r.isText,b=function(d){return l(d)&&d.data[0]===q.ZWSP},c=function(d){return l(d)&&d.data[d.data.length-1]===q.ZWSP};r=function(d,a){d?l(a.previousSibling)?(c(a.previousSibling)||a.previousSibling.appendData(q.ZWSP),a=a.previousSibling):l(a)?b(a)||a.insertData(0,q.ZWSP):(d=a.ownerDocument.createTextNode(q.ZWSP),a.parentNode.insertBefore(d,a),a=d):l(a.nextSibling)?(b(a.nextSibling)||a.nextSibling.insertData(0,
q.ZWSP),a=a.nextSibling):l(a)?c(a)||a.appendData(q.ZWSP):(d=a.ownerDocument.createTextNode(q.ZWSP),a.nextSibling?a.parentNode.insertBefore(d,a.nextSibling):a.parentNode.appendChild(d),a=d);return a};return{insertInline:r,insertInlineBefore:u.curry(r,!0),insertInlineAfter:u.curry(r,!1)}});L("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(u,r,q,l,
b){var c=l.isElement,d=l.isText,a=function(t){var p=t.parentNode;p&&p.removeChild(t)},f=function(t){try{return t.nodeValue}catch(p){return""}},n=function(t){var p=b.trim(t);return{count:t.length-p.length,text:p}},A=function(t,p){var g=p.container(),e=u.indexOf(g.childNodes,t).map(function(v){return v<p.offset()?new q(g,p.offset()-1):p}).getOr(p);x(t);return e},x=function(t){c(t)&&r.isCaretContainer(t)&&(r.hasContent(t)?t.removeAttribute("data-mce-caret"):a(t));if(d(t)){var p=b.trim(f(t));0===p.length?
a(t):t.nodeValue=p}};return{removeAndReposition:function(t,p){if(q.isTextPosition(p))if(p.container()===t){var g=n(t.data.substr(0,p.offset())),e=n(t.data.substr(p.offset()));e=g.text+e.text;0<e.length?(0===e.length?a(t):t.nodeValue=e,t=new q(t,p.offset()-g.count)):t=p}else x(t),t=p;else p.container()===t.parentNode?t=A(t,p):(x(t),t=p);return t},remove:x}});L("tinymce.core.keyboard.BoundaryCaret","ephox.katamari.api.Option tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerInline tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.keyboard.InlineUtils".split(" "),
function(u,r,q,l,b,c,d,a){var f=function(A,x){return d.isText(A.container())?q.insertInline(x,A.container()):q.insertInline(x,A.getNode())},n=function(A,x){return(x=x.get())&&A.container()===x&&r.isCaretContainerInline(x)};return{renderCaret:function(A,x){return x.fold(function(t){l.remove(A.get());t=q.insertInlineBefore(t);A.set(t);return u.some(new c(t,t.length-1))},function(t){return b.firstPositionIn(t).map(function(p){if(n(p,A))return new c(A.get(),1);l.remove(A.get());p=f(p,!0);A.set(p);return new c(p,
1)})},function(t){return b.lastPositionIn(t).map(function(p){if(n(p,A))return new c(A.get(),A.get().length-1);l.remove(A.get());p=f(p,!1);A.set(p);return new c(p,p.length-1)})},function(t){l.remove(A.get());t=q.insertInlineAfter(t);A.set(t);return u.some(new c(t,1))})}}});L("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(u){var r=function(b){return b&&/^(IMG)$/.test(b.nodeName)},q=function(b){return b&&3===b.nodeType&&/^([\t \r\n]+|)$/.test(b.nodeValue)},l=function(b,c,d){if("color"===
d||"backgroundColor"===d)c=b.toHex(c);"fontWeight"===d&&700===c&&(c="bold");"fontFamily"===d&&(c=c.replace(/['"]/g,"").replace(/,\s+/g,","));return""+c};return{isInlineBlock:r,moveStart:function(b,c,d){var a=d.startContainer,f=d.startOffset;if(d.startContainer!==d.endContainer||!r(d.startContainer.childNodes[d.startOffset]))if(3===a.nodeType&&f>=a.nodeValue.length&&(f=b.nodeIndex(a),a=a.parentNode),1===a.nodeType)for(a=a.childNodes,f<a.length?(a=a[f],b=new u(a,b.getParent(a,b.isBlock))):(a=a[a.length-
1],b=new u(a,b.getParent(a,b.isBlock)),b.next(!0)),f=b.current();f;f=b.next())if(3===f.nodeType&&!q(f)){d.setStart(f,0);c.setRng(d);break}},getNonWhiteSpaceSibling:function(b,c,d){if(b)for(c=c?"nextSibling":"previousSibling",b=d?b:b[c];b;b=b[c])if(1===b.nodeType||!q(b))return b},isTextBlock:function(b,c){c.nodeType&&(c=c.nodeName);return!!b.schema.getTextBlockElements()[c.toLowerCase()]},isValid:function(b,c,d){return b.schema.isValidChild(c,d)},isWhiteSpaceNode:q,replaceVars:function(b,c){"string"!==
typeof b?b=b(c):c&&(b=b.replace(/%(\w+)/g,function(d,a){return c[a]||d}));return b},isEq:function(b,c){b=b||"";c=c||"";b=""+(b.nodeName||b);c=""+(c.nodeName||c);return b.toLowerCase()===c.toLowerCase()},normalizeStyleValue:l,getStyle:function(b,c,d){return l(b,b.getStyle(c,d),d)},getTextDecoration:function(b,c){var d;b.getParent(c,function(a){return(d=b.getStyle(a,"text-decoration"))&&"none"!==d});return d},getParents:function(b,c,d){return b.getParents(c,d,b.getRoot())}}});L("tinymce.core.fmt.ExpandRange",
["tinymce.core.dom.Bookmarks","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils","tinymce.core.selection.RangeNodes"],function(u,r,q,l){var b=u.isBookmarkNode,c=q.getParents,d=q.isWhiteSpaceNode,a=q.isTextBlock,f=function(e,v){for("undefined"===typeof v&&(v=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[v])&&(v=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:v}},n=function(e,v){for(var y=v;y;){if(1===y.nodeType&&e.getContentEditable(y))return"false"===
e.getContentEditable(y)?y:v;y=y.parentNode}return v},A=function(e,v,y,C){y=y.nodeValue;"undefined"===typeof C&&(C=e?y.length:0);e?(e=y.lastIndexOf(" ",C),C=y.lastIndexOf("\u00a0",C),e=e>C?e:C,-1===e||v||e++):(e=y.indexOf(" ",C),C=y.indexOf("\u00a0",C),e=-1!==e&&(-1===C||e<C)?e:C);return e},x=function(e,v,y,C,B,h){if(3===y.nodeType){C=A(B,h,y,C);if(-1!==C)return{container:y,offset:C};var k=y}for(v=new r(y,e.getParent(y,e.isBlock)||v);y=v[B?"prev":"next"]();)if(3===y.nodeType){if(k=y,C=A(B,h,y),-1!==
C)return{container:y,offset:C}}else if(e.isBlock(y))break;if(k)return C=B?0:k.length,{container:k,offset:C}},t=function(e,v,y,C,B){var h,k;3===C.nodeType&&0===C.nodeValue.length&&C[B]&&(C=C[B]);B=c(e,C);for(h=0;h<B.length;h++)for(k=0;k<v.length;k++){var w=v[k];if(!("collapsed"in w&&w.collapsed!==y.collapsed)&&e.is(B[h],w.selector))return B[h]}return C},p=function(e,v,y,C){var B,h=e.dom,k=h.getRoot();v[0].wrapper||(B=h.getParent(y,v[0].block,k));B||(B=h.getParent(y,"LI,TD,TH"),B=h.getParent(3===y.nodeType?
y.parentNode:y,function(w){return w!==k&&a(e,w)},B));B&&v[0].wrapper&&(B=c(h,B,"ul,ol").reverse()[0]||B);if(!B)for(B=y;B[C]&&!h.isBlock(B[C])&&(B=B[C],!q.isEq(B,"br")););return B||y},g=function(e,v,y,C,B,h,k){var w=y=k?y:B;B=k?"previousSibling":"nextSibling";var z=e.getRoot();if(3===w.nodeType&&!d(w)&&(k?0<C:h<w.nodeValue.length))return w;for(;;){if(!v[0].block_expand&&e.isBlock(y))return y;for(C=y[B];C;C=C[B]){if(h=!b(C)&&!d(C))h=C,h=!("BR"===h.nodeName&&h.getAttribute("data-mce-bogus")&&!h.nextSibling);
if(h)return y}if(y===z||y.parentNode===z)break;y=y.parentNode}return y};return{expandRng:function(e,v,y,C){var B,h=v.startContainer,k=v.startOffset,w=v.endContainer,z=v.endOffset,m=e.dom;1===h.nodeType&&h.hasChildNodes()&&(h=l.getNode(h,k),3===h.nodeType&&(k=0));1===w.nodeType&&w.hasChildNodes()&&(w=l.getNode(w,v.collapsed?z:z-1),3===w.nodeType&&(z=w.nodeValue.length));h=n(m,h);w=n(m,w);if(b(h.parentNode)||b(h))h=b(h)?h:h.parentNode,h=h.nextSibling||h,3===h.nodeType&&(k=0);if(b(w.parentNode)||b(w))w=
b(w)?w:w.parentNode,w=w.previousSibling||w,3===w.nodeType&&(z=w.length);if(y[0].inline){if(v.collapsed){if(B=x(m,e.getBody(),h,k,!0,C))h=B.container,k=B.offset;if(B=x(m,e.getBody(),w,z,!1,C))w=B.container,z=B.offset}if(C)C=w;else if(C=w,B=f(C,z),B.node){for(;B.node&&0===B.offset&&B.node.previousSibling;)B=f(B.node.previousSibling);B.node&&0<B.offset&&3===B.node.nodeType&&" "===B.node.nodeValue.charAt(B.offset-1)&&1<B.offset&&(C=B.node,C.splitText(B.offset-1))}w=C}if(y[0].inline||y[0].block_expand)y[0].inline&&
3===h.nodeType&&0!==k||(h=g(m,y,h,k,w,z,!0)),y[0].inline&&3===w.nodeType&&z!==w.nodeValue.length||(w=g(m,y,h,k,w,z,!1));y[0].selector&&!1!==y[0].expand&&!y[0].inline&&(h=t(m,y,v,h,"previousSibling"),w=t(m,y,v,w,"nextSibling"));if(y[0].block||y[0].selector)h=p(e,y,h,"previousSibling"),w=p(e,y,w,"nextSibling"),y[0].block&&(m.isBlock(h)||(h=g(m,y,h,k,w,z,!0)),m.isBlock(w)||(w=g(m,y,h,k,w,z,!1)));1===h.nodeType&&(k=m.nodeIndex(h),h=h.parentNode);1===w.nodeType&&(z=m.nodeIndex(w)+1,w=w.parentNode);return{startContainer:h,
startOffset:k,endContainer:w,endOffset:z}}}});L("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(u){var r=u.isEq,q=function(a,f,n){if(n=a.formatter.get(n))for(var A=0;A<n.length;A++)if(!1===n[A].inherit&&a.dom.is(f,n[A].selector))return!0;return!1},l=function(a,f,n,A){var x=a.dom.getRoot();if(f===x)return!1;f=a.dom.getParent(f,function(t){return q(a,t,n)?!0:t.parentNode===x||!!d(a,t,n,A,!0)});return d(a,f,n,A)},b=function(a,f,n){if(r(f,n.inline)||r(f,n.block))return!0;if(n.selector)return 1===
f.nodeType&&a.is(f,n.selector)},c=function(a,f,n,A,x,t){var p,g=n[A];if(n.onmatch)return n.onmatch(f,n,A);if(g)if("undefined"===typeof g.length)for(p in g){if(g.hasOwnProperty(p)){var e="attributes"===A?a.getAttrib(f,p):u.getStyle(a,f,p);if(x&&!e&&!n.exact||(!x||n.exact)&&!r(e,u.normalizeStyleValue(a,u.replaceVars(g[p],t),p)))return}}else for(x=0;x<g.length&&("attributes"===A?!a.getAttrib(f,g[x]):!u.getStyle(a,f,g[x]));x++);return n},d=function(a,f,n,A,x){var t=a.formatter.get(n),p,g=a.dom;if(t&&
f)for(p=0;p<t.length;p++)if(n=t[p],b(a.dom,f,n)&&c(g,f,n,"attributes",x,A)&&c(g,f,n,"styles",x,A)){if(x=n.classes)for(A=0;A<x.length;A++)if(!a.dom.hasClass(f,x[A]))return;return n}};return{matchNode:d,matchName:b,match:function(a,f,n,A){if(A)return l(a,A,f,n);A=a.selection.getNode();if(l(a,A,f,n))return!0;var x=a.selection.getStart();return x!==A&&l(a,x,f,n)?!0:!1},matchAll:function(a,f,n){var A=[],x={};var t=a.selection.getStart();a.dom.getParent(t,function(p){var g;for(g=0;g<f.length;g++){var e=
f[g];!x[e]&&d(a,p,e,n)&&(x[e]=!0,A.push(e))}},a.dom.getRoot());return A},canApply:function(a,f){f=a.formatter.get(f);var n,A,x=a.dom;if(f)for(a=a.selection.getStart(),a=u.getParents(x,a),A=f.length-1;0<=A;A--){var t=f[A].selector;if(!t||f[A].defaultBlock)return!0;for(n=a.length-1;0<=n;n--)if(x.is(a[n],t))return!0}return!1},matchesUnInheritedFormatSelector:q}});L("tinymce.core.selection.SplitRange",["tinymce.core.dom.NodeType"],function(u){return{split:function(r){var q=r.startContainer,l=r.startOffset,
b=r.endContainer;r=r.endOffset;q===b&&u.isText(q)?0<l&&l<q.nodeValue.length&&(b=q.splitText(l),q=b.previousSibling,r>l?(q=b=b.splitText(r-l).previousSibling,r=b.nodeValue.length,l=0):r=0):(u.isText(q)&&0<l&&l<q.nodeValue.length&&(q=q.splitText(l),l=0),u.isText(b)&&0<r&&r<b.nodeValue.length&&(b=b.splitText(r).previousSibling,r=b.nodeValue.length));return{startContainer:q,startOffset:l,endContainer:b,endOffset:r}}}});L("tinymce.core.fmt.CaretFormat","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.TreeWalker tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.SplitRange tinymce.core.text.Zwsp tinymce.core.util.Fun".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e){var v=g.ZWSP,y=function(F){return 1===F.nodeType&&"_mce_caret"===F.id},C=function(F){if(F){var G=new n(F,F);for(F=G.current();F;F=G.next())if(3===F.nodeType)return F}return null},B=function(F){var G=l.fromTag("span");c.setAll(G,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"});F&&r.append(G,l.fromText(v));return G},h=function(F,G){for(;G&&G!==F;){if("_mce_caret"===G.id)return G;G=G.parentNode}return null},k=function(F,G,I,H){var E=G.getRng(!0);
var J=F.getParent(I,F.isBlock);a:{var M=I;for(var P=[];M;){if(3===M.nodeType&&M.nodeValue!==v||1<M.childNodes.length){M=[];break a}1===M.nodeType&&P.push(M);M=M.firstChild}M=P}0<M.length?(!1!==H&&(E.setStartBefore(I),E.setEndBefore(I)),F.remove(I)):((H=C(I))&&H.nodeValue.charAt(0)===v&&H.deleteData(0,1),E.startContainer===H&&0<E.startOffset&&E.setStart(H,E.startOffset-1),E.endContainer===H&&0<E.endOffset&&E.setEnd(H,E.endOffset-1),F.remove(I,!0));J&&F.isEmpty(J)&&f.fillWithPaddingBr(l.fromDom(J));
G.setRng(E)},w=function(F,G,I,H,E){if(H)k(G,I,H,E);else if(H=h(F,I.getStart()),!H)for(;H=G.get("_mce_caret");)k(G,I,H,!1)},z=function(F,G,I){var H=F.dom;(F=H.getParent(I,e.curry(x.isTextBlock,F)))&&H.isEmpty(F)?I.parentNode.replaceChild(G,I):(f.removeTrailingBr(l.fromDom(I)),H.isEmpty(I)?I.parentNode.replaceChild(G,I):H.insertAfter(G,I))},m=function(F,G){F.appendChild(G);return G},D=function(F,G){F=u.foldr(F,function(I,H){return m(I,H.cloneNode(!1))},G);return m(F,F.ownerDocument.createTextNode(v))};
return{setup:function(F){var G=F.dom,I=F.selection,H=F.getBody();F.on("mouseup keydown",function(E){E=E.keyCode;w(H,G,I,null,!1);8===E&&I.isCollapsed()&&I.getStart().innerHTML===v&&w(H,G,I,h(H,I.getStart()));37!==E&&39!==E||w(H,G,I,h(H,I.getStart()))})},applyCaretFormat:function(F,G,I){var H,E,J=F.selection;var M=J.getRng(!0);var P=M.startOffset;var Q=M.startContainer.nodeValue;(H=h(F.getBody(),J.getStart()))&&(E=C(H));var V=/[^\s\u00a0\u00ad\u200b\ufeff]/;Q&&0<P&&P<Q.length&&V.test(Q.charAt(P))&&
V.test(Q.charAt(P-1))?(H=J.getBookmark(),M.collapse(!0),M=A.expandRng(F,M,F.formatter.get(G)),M=p.split(M),F.formatter.apply(G,I,M),J.moveToBookmark(H)):(H&&E.nodeValue===v||(H=F.getDoc(),E=B(!0).dom(),H=H.importNode(E,!0),E=H.firstChild,M.insertNode(H),P=1),F.formatter.apply(G,I,H),J.setCursorLocation(E,P))},removeCaretFormat:function(F,G,I,H){var E=F.dom,J=F.selection,M=J.getRng(!0),P,Q=[];var V=M.startContainer;var W=M.startOffset;var ba=V;3===V.nodeType&&(W!==V.nodeValue.length&&(P=!0),ba=ba.parentNode);
for(;ba;){if(t.matchNode(F,ba,G,I,H)){var N=ba;break}ba.nextSibling&&(P=!0);Q.push(ba);ba=ba.parentNode}N&&(P?(E=J.getBookmark(),M.collapse(!0),M=A.expandRng(F,M,F.formatter.get(G),!0),M=p.split(M),F.formatter.remove(G,I,M),J.moveToBookmark(E)):(G=h(F.getBody(),N),I=B(!1).dom(),Q=D(Q,I),G?z(F,I,G):z(F,I,N),k(E,J,G,!1),J.setCursorLocation(Q,1),E.isEmpty(N)&&E.remove(N)))},isCaretNode:y,getParentCaretContainer:h,replaceWithCaretFormat:function(F,G){var I=B(!1);G=D(G,I.dom());r.before(l.fromDom(F),I);
q.remove(l.fromDom(F));return d(G,0)},isFormatElement:function(F,G){return F.schema.getTextInlineElements().hasOwnProperty(b.name(G))&&!y(G.dom())&&!a.isBogus(G.dom())}}});L("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(u){return{evaluateUntil:function(r,q){for(var l=0;l<r.length;l++){var b=r[l].apply(null,q);if(b.isSome())return b}return u.none()}}});L("tinymce.core.keyboard.BoundaryLocation","ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.caret.CaretFinder tinymce.core.caret.CaretUtils tinymce.core.fmt.CaretFormat tinymce.core.keyboard.InlineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(u,r,q,l,b,c,d,a,f){var n=u.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),A=function(F,G){return(G=c.getParentBlock(G,F))?G:F},x=function(F,G,I){var H=a.normalizeForwards(I),E=A(G,H.container());return a.findRootInline(F,E,H).fold(function(){return b.nextPosition(E,H).bind(r.curry(a.findRootInline,F,E)).map(function(J){return n.before(J)})},q.none)},t=function(F,G){return null===d.getParentCaretContainer(F,G)},p=function(F,G,I){return a.findRootInline(F,
G,I).filter(r.curry(t,G))},g=function(F,G,I){var H=a.normalizeBackwards(I);return p(F,G,H).bind(function(E){return b.prevPosition(E,H).isNone()?q.some(n.start(E)):q.none()})},e=function(F,G,I){var H=a.normalizeForwards(I);return p(F,G,H).bind(function(E){return b.nextPosition(E,H).isNone()?q.some(n.end(E)):q.none()})},v=function(F,G,I){var H=a.normalizeBackwards(I),E=A(G,H.container());return a.findRootInline(F,E,H).fold(function(){return b.prevPosition(E,H).bind(r.curry(a.findRootInline,F,E)).map(function(J){return n.after(J)})},
q.none)},y=function(F){return!1===a.isRtl(B(F))},C=function(F,G,I){return f.evaluateUntil([x,g,e,v],[F,G,I]).filter(y)},B=function(F){return F.fold(r.identity,r.identity,r.identity,r.identity)},h=function(F){return F.fold(r.constant("before"),r.constant("start"),r.constant("end"),r.constant("after"))},k=function(F){return F.fold(n.before,n.before,n.after,n.after)},w=function(F,G,I,H,E,J){return l.liftN([a.findRootInline(G,I,H),a.findRootInline(G,I,E)],function(M,P){return M!==P&&a.hasSameParentBlock(I,
M,P)?n.after(F?M:P):J}).getOr(J)},z=function(F,G){return F.fold(r.constant(!0),function(I){return!(h(I)===h(G)&&B(I)===B(G))})},m=function(F,G,I,H,E){var J=a.normalizePosition(F,E);return b.fromPosition(F,I,J).map(r.curry(a.normalizePosition,F)).fold(function(){return H.map(k)},function(M){return C(G,I,M).map(r.curry(w,F,G,I,J,M)).filter(r.curry(z,H))}).filter(y)},D=function(F,G){return F?G.fold(r.compose(q.some,n.start),q.none,r.compose(q.some,n.after),q.none):G.fold(q.none,r.compose(q.some,n.before),
q.none,r.compose(q.some,n.end))};u=function(F,G,I,H){var E=a.normalizePosition(F,H),J=C(G,I,E);return C(G,I,E).bind(r.curry(D,F)).orThunk(function(){return m(F,G,I,J,H)})};return{readLocation:C,findLocation:u,prevLocation:r.curry(u,!1),nextLocation:r.curry(u,!0),getElement:B,outside:k,inside:function(F){return F.fold(n.start,n.start,n.end,n.end)}}});L("ephox.katamari.api.Cell",[],function(){var u=function(r){var q=r;return{get:function(){return q},set:function(l){q=l},clone:function(){return u(q)}}};
return u});L("tinymce.core.selection.WordSelection",["ephox.katamari.api.Type","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition"],function(u,r,q){var l=function(c){return u.isFunction(c.selection.getSel().modify)},b=function(c,d,a){var f=c?1:-1;d.setRng(q(a.container(),a.offset()+f).toRange());d.getSel().modify("move",c?"forward":"backward","word");return!0};return{hasSelectionModifyApi:l,moveByWord:function(c,d){var a=d.selection.getRng();a=c?q.fromRangeEnd(a):q.fromRangeStart(a);
return l(d)?c&&r.isBeforeInline(a)?b(!0,d.selection,a):!c&&r.isAfterInline(a)?b(!1,d.selection,a):!1:!1}}});L("tinymce.core.keyboard.BoundarySelection","ephox.katamari.api.Arr ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretPosition tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.WordSelection".split(" "),function(u,r,q,l,b,c,d,a,f){var n=function(e,v){var y=
e.dom.createRng();y.setStart(v.container(),v.offset());y.setEnd(v.container(),v.offset());e.selection.setRng(y)},A=function(e,v){e?v.setAttribute("data-mce-selected","inline-boundary"):v.removeAttribute("data-mce-selected")},x=function(e,v,y){return c.renderCaret(v,y).map(function(C){n(e,C);return y})},t=function(e,v,y){var C=e.getBody(),B=b.fromRangeStart(e.selection.getRng()),h=q.curry(a.isInlineTarget,e);return d.findLocation(y,h,C,B).bind(function(k){return x(e,v,k)})},p=function(e,v,y,C){v.selection.isCollapsed()&&
(C=u.filter(C,e),u.each(C,function(B){B=b.fromRangeStart(v.selection.getRng());d.readLocation(e,v.getBody(),B).bind(function(h){return x(v,y,h)})}))},g=function(e,v,y){return function(){return!1!==v.settings.inline_boundaries?f.moveByWord(e,v):!1}};return{move:function(e,v,y){return function(){return!1!==e.settings.inline_boundaries?t(e,v,y).isSome():!1}},moveNextWord:q.curry(g,!0),movePrevWord:q.curry(g,!1),setupSelectedState:function(e){var v=new r(null),y=q.curry(a.isInlineTarget,e);e.on("NodeChange",
function(C){if(!1!==e.settings.inline_boundaries){var B=C.parents,h=u.filter(e.dom.select('*[data-mce-selected="inline-boundary"]'),y);B=u.filter(B,y);u.each(u.difference(h,B),q.curry(A,!1));u.each(u.difference(B,h),q.curry(A,!0));e.selection.isCollapsed()&&!0!==e.composing&&v.get()&&(h=b.fromRangeStart(e.selection.getRng()),b.isTextPosition(h)&&!1===a.isAtZwsp(h)&&(n(e,l.removeAndReposition(v.get(),h)),v.set(null)));p(y,e,v,C.parents)}});return v},setCaretPosition:n}});L("tinymce.core.delete.InlineBoundaryDelete",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.node.Element global!document tinymce.core.caret.CaretContainer tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteElement tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.BoundarySelection tinymce.core.keyboard.InlineUtils".split(" "),function(u,r,q,l,b,c,d,a,f,n,A,x,t,p){var g=function(h,k){var w=
b.createRange();w.setStart(h.container(),h.offset());w.setEnd(k.container(),k.offset());return w},e=function(h){return q.liftN([d.firstPositionIn(h),d.lastPositionIn(h)],function(k,w){k=p.normalizePosition(!0,k);var z=p.normalizePosition(!1,w);return d.nextPosition(h,k).map(function(m){return m.isEqual(z)}).getOr(!0)}).getOr(!0)},v=function(h,k){return function(w){return A.renderCaret(k,w).map(function(z){t.setCaretPosition(h,z);return!0}).getOr(!1)}},y=function(h,k,w,z){var m=h.getBody(),D=u.curry(p.isInlineTarget,
h);h.undoManager.ignore(function(){h.selection.setRng(g(w,z));h.execCommand("Delete");x.readLocation(D,m,a.fromRangeStart(h.selection.getRng())).map(x.inside).map(v(h,k))});h.nodeChanged()},C=function(h,k){return(k=f.getParentBlock(k,h))?k:h},B=function(h,k,w,z){var m=C(h.getBody(),z.container()),D=u.curry(p.isInlineTarget,h),F=x.readLocation(D,m,z);return F.bind(function(G){return w?G.fold(u.constant(r.some(x.inside(G))),r.none,u.constant(r.some(x.outside(G))),r.none):G.fold(r.none,u.constant(r.some(x.outside(G))),
r.none,u.constant(r.some(x.inside(G))))}).map(v(h,k)).getOrThunk(function(){var G=d.navigate(w,m,z),I=G.bind(function(H){return x.readLocation(D,m,H)});return F.isSome()&&I.isSome()?p.findRootInline(D,m,z).map(function(H){return e(H)?(n.deleteElement(h,w,l.fromDom(H)),!0):!1}).getOr(!1):I.bind(function(H){return G.map(function(E){w?y(h,k,z,E):y(h,k,E,z);return!0})}).getOr(!1)})};return{backspaceDelete:function(h,k,w){if(h.selection.isCollapsed()&&!1!==h.settings.inline_boundaries){var z=a.fromRangeStart(h.selection.getRng());
return B(h,k,w,z)}return!1}}});L("tinymce.core.delete.TableDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind".split(" "),function(u,r,q,l,b,c,d,a,f,n){var A=c.immutable("start","end"),x=c.immutable("rng","table","cells"),t=u.generate([{removeTable:["element"]},
{emptyCells:["cells"]}]),p=function(z,m){return n.closest(a.fromDom(z),"td,th",m)},g=function(z,m){return n.ancestor(z,"table",m)},e=function(z){return!1===d.eq(z.start(),z.end())},v=function(z,m){return g(z.start(),m).bind(function(D){return g(z.end(),m).bind(function(F){return d.eq(D,F)?l.some(D):l.none()})})},y=function(z,m){return b.liftN([p(z.startContainer,m),p(z.endContainer,m)],A).filter(e)},C=function(z,m){return v(z,m).bind(function(D){var F=f.descendants(D,"td,th");return x(z,D,F)})},B=
function(z,m){var D=q.curry(d.eq,z);return y(m,D).map(function(F){return C(F,D)})},h=function(z,m){return r.findIndex(z,function(D){return d.eq(D,m)})},k=function(z){return b.liftN([h(z.cells(),z.rng().start()),h(z.cells(),z.rng().end())],function(m,D){return z.cells().slice(m,D+1)})},w=function(z){return k(z).bind(function(m){var D=z.cells();return m.length===D.length?t.removeTable(z.table()):t.emptyCells(m)})};return{getActionFromRange:function(z,m){return B(z,m).map(w)},getActionFromCells:function(z){return t.emptyCells(z)}}});
L("tinymce.core.selection.MultiRange",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.selection.RangeNodes"],function(u,r,q){var l=function(b){for(var c=[],d=0;d<b.rangeCount;d++)c.push(b.getRangeAt(d));return c};return{getRanges:l,getSelectedNodes:function(b){return u.bind(b,function(c){return(c=q.getSelectedNode(c))?[r.fromDom(c)]:[]})},hasMultipleRanges:function(b){return 1<l(b).length}}});L("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element",
"ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(u,r,q,l,b){var c=function(f){return u.filter(b.getSelectedNodes(f),l.isTableCell)},d=function(f){return q.descendants(f,"td[data-mce-selected],th[data-mce-selected]")},a=function(f,n){n=d(n);f=c(f);return 0<n.length?n:f};return{getCellsFromRanges:c,getCellsFromElement:d,getCellsFromElementOrRanges:a,getCellsFromEditor:function(f){return a(b.getRanges(f.selection.getSel()),r.fromDom(f.getBody()))}}});
L("tinymce.core.delete.TableDelete","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.TableDeleteAction tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.PaddingBr tinymce.core.dom.Parents tinymce.core.selection.TableCellSelection".split(" "),function(u,r,q,
l,b,c,d,a,f,n,A,x,t,p,g){var e=function(I,H){u.each(H,t.fillWithPaddingBr);I.selection.setCursorLocation(H[0].dom(),0);return!0},v=function(I,H){f.deleteElement(I,!1,H);return!0},y=function(I,H,E){return n.getActionFromRange(H,E).map(function(J){return J.fold(r.curry(v,I),r.curry(e,I))})},C=function(I,H,E,J){return h(H,J).fold(function(){return y(I,H,E)},function(M){return w(I,M)}).getOr(!1)},B=function(I,H){return u.find(p.parentsAndSelf(H,I),A.isTableCell)},h=function(I,H){return u.find(p.parentsAndSelf(H,
I),function(E){return"caption"===c.name(E)})},k=function(I,H,E,J,M){return d.navigate(E,I.getBody(),M).bind(function(P){return B(H,b.fromDom(P.getNode())).map(function(Q){return!1===l.eq(Q,J)})})},w=function(I,H){t.fillWithPaddingBr(H);I.selection.setCursorLocation(H.dom(),0);return q.some(!0)},z=function(I,H,E,J){return d.firstPositionIn(I.dom()).bind(function(M){return d.lastPositionIn(I.dom()).map(function(P){return H?E.isEqual(M)&&J.isEqual(P):E.isEqual(P)&&J.isEqual(M)})}).getOr(!0)},m=function(I,
H,E){return h(I,b.fromDom(E.getNode())).map(function(J){return!1===l.eq(J,H)})},D=function(I,H,E,J,M){return d.navigate(E,I.getBody(),M).bind(function(P){return z(J,E,M,P)?w(I,J):m(H,J,P)}).or(q.some(!0))},F=function(I,H,E,J){var M=a.fromRangeStart(I.selection.getRng());return B(E,J).bind(function(P){return x.isEmpty(P)?w(I,P):k(I,E,H,P,M)})},G=function(I,H,E){var J=b.fromDom(I.getBody());return h(J,E).fold(function(){return F(I,H,J,E)},function(M){var P=a.fromRangeStart(I.selection.getRng());return x.isEmpty(M)?
w(I,M):D(I,J,H,M,P)}).getOr(!1)};return{backspaceDelete:function(I,H){var E=b.fromDom(I.selection.getStart(!0));if(I.selection.isCollapsed())I=G(I,H,E);else{H=b.fromDom(I.getBody());var J=I.selection.getRng(),M=g.getCellsFromEditor(I);I=0!==M.length?e(I,M):C(I,H,J,E)}return I}}});L("tinymce.core.delete.DeleteCommands","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.DeleteUtils tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.TableDelete".split(" "),
function(u,r,q,l,b,c){return{deleteCommand:function(d){q.backspaceDelete(d,!1)||b.backspaceDelete(d,!1)||u.backspaceDelete(d,!1)||c.backspaceDelete(d)||r.backspaceDelete(d,!1)||(d.getDoc().execCommand("Delete",!1,null),l.paddEmptyBody(d))},forwardDeleteCommand:function(d){q.backspaceDelete(d,!0)||b.backspaceDelete(d,!0)||u.backspaceDelete(d,!0)||c.backspaceDelete(d)||r.backspaceDelete(d,!0)||d.getDoc().execCommand("ForwardDelete",!1,null)}}});L("tinymce.core.selection.RangeCompare",[],function(){return{isEq:function(u,
r){return u&&r&&u.startContainer===r.startContainer&&u.startOffset===r.startOffset&&u.endContainer===r.endContainer&&u.endOffset===r.endOffset}}});L("tinymce.core.selection.NormalizeRange","ephox.katamari.api.Option ephox.katamari.api.Struct tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.selection.RangeCompare".split(" "),function(u,r,q,l,b,c,d){var a=r.immutable("container","offset"),f=function(g,e,v){a:{for(;g&&g!==
e;){if(v(g)){e=g;break a}g=g.parentNode}e=null}return null!==e},n=function(g,e,v){return f(g,e,function(y){return y.nodeName===v})},A=function(g,e,v){for(g=new b(e,g.getParent(e.parentNode,g.isBlock)||g.getRoot());e=g[v?"prev":"next"]();)if(l.isBr(e))return!0},x=function(g,e){for(;e&&e!==g;){if(l.isContentEditableFalse(e))return!0;e=e.parentNode}return!1},t=function(g,e,v,y,C){var B,h=g.getRoot(),k=g.schema.getNonEmptyElements();var w=g.getParent(C.parentNode,g.isBlock)||h;if(y&&l.isBr(C)&&e&&g.isEmpty(w))return u.some(a(C.parentNode,
g.nodeIndex(C)));for(e=new b(C,w);C=e[y?"prev":"next"]();){(B="false"===g.getContentEditableParent(C))||(B=C,w=h,B=q.isCaretContainer(B)&&!1===f(B,w,c.isCaretNode));if(B)return u.none();if(l.isText(C)&&0<C.nodeValue.length)return!1===n(C,h,"A")?u.some(a(C,y?C.nodeValue.length:0)):u.none();if(g.isBlock(C)||k[C.nodeName.toLowerCase()])return u.none();B=C}return v&&B?u.some(a(B,0)):u.none()},p=function(g,e,v,y){var C=g.getRoot();var B=!1;var h=y[(v?"start":"end")+"Container"];var k=y[(v?"start":"end")+
"Offset"];var w=l.isElement(h)&&k===h.childNodes.length;y=g.schema.getNonEmptyElements();var z=v;if(q.isCaretContainer(h))return u.none();l.isElement(h)&&k>h.childNodes.length-1&&(z=!1);l.isDocument(h)&&(h=C,k=0);if(h===C){if(z&&(v=h.childNodes[0<k?k-1:0])&&(q.isCaretContainer(v)||y[v.nodeName]||v&&"TABLE"===v.nodeName))return u.none();if(h.hasChildNodes()){k=Math.min(!z&&0<k?k-1:k,h.childNodes.length-1);h=h.childNodes[k];k=l.isText(h)&&w?h.data.length:0;if(!e&&h===C.lastChild&&h&&"TABLE"===h.nodeName||
x(C,h)||q.isCaretContainer(h))return u.none();if(h.hasChildNodes()&&!1===(h&&"TABLE"===h.nodeName)){v=h;C=new b(h,C);do{if(l.isContentEditableFalse(v)||q.isCaretContainer(v)){B=!1;break}if(l.isText(v)&&0<v.nodeValue.length){k=z?0:v.nodeValue.length;h=v;B=!0;break}if(y[v.nodeName.toLowerCase()]&&(!v||!/^(TD|TH|CAPTION)$/.test(v.nodeName))){k=g.nodeIndex(v);h=v.parentNode;"IMG"!==v.nodeName&&"PRE"!==v.nodeName||z||k++;B=!0;break}}while(v=z?C.next():C.prev())}}}e&&(l.isText(h)&&0===k&&t(g,w,e,!0,h).each(function(m){h=
m.container();k=m.offset();B=!0}),l.isElement(h)&&((v=h.childNodes[k])||(v=h.childNodes[k-1]),!v||!l.isBr(v)||v.previousSibling&&"A"===v.previousSibling.nodeName||A(g,v,!1)||A(g,v,!0)||t(g,w,e,!0,v).each(function(m){h=m.container();k=m.offset();B=!0})));z&&!e&&l.isText(h)&&k===h.nodeValue.length&&t(g,w,e,!1,h).each(function(m){h=m.container();k=m.offset();B=!0});return B?u.some(a(h,k)):u.none()};return{normalize:function(g,e){var v=e.collapsed,y=e.cloneRange();p(g,v,!0,y).each(function(C){y.setStart(C.container(),
C.offset())});v||p(g,v,!1,y).each(function(C){y.setEnd(C.container(),C.offset())});v&&y.collapse(!0);return d.isEq(e,y)?u.none():u.some(y)}}});L("tinymce.core.newline.InsertBr","ephox.katamari.api.Fun ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.NormalizeRange".split(" "),function(u,
r,q,l,b,c,d,a,f,n){var A=function(h,k,w){k=new d(k,w);for(w=h.getNonEmptyElements();h=k.next();)if(w[h.nodeName.toLowerCase()]||0<h.length)return!0},x=function(h,k,w){var z=h.create("span",{},"&nbsp;");w.parentNode.insertBefore(z,w);k.scrollIntoView(z);h.remove(z)},t=function(h,k,w,z){h=h.createRng();z?(h.setStartBefore(w),h.setEndBefore(w)):(h.setStartAfter(w),h.setEndAfter(w));k.setRng(h)},p=function(h,k){var w=h.selection,z=h.dom,m=w.getRng(!0);n.normalize(z,m).each(function(J){m.setStart(J.startContainer,
J.startOffset);m.setEnd(J.endContainer,J.endOffset)});var D=m.startOffset;var F=m.startContainer;if(1===F.nodeType&&F.hasChildNodes()){var G=D>F.childNodes.length-1;F=F.childNodes[Math.min(D,F.childNodes.length-1)]||F;D=G&&3===F.nodeType?F.nodeValue.length:0}var I=(G=z.getParent(F,z.isBlock))?z.getParent(G.parentNode,z.isBlock):null,H=I?I.nodeName.toUpperCase():"";k=k&&k.ctrlKey;"LI"!==H||k||(G=I);if(F&&3===F.nodeType&&D>=F.nodeValue.length&&!A(h.schema,F,G)){D=z.create("br");m.insertNode(D);m.setStartAfter(D);
m.setEndAfter(D);var E=!0}D=z.create("br");m.insertNode(D);x(z,w,D);t(z,w,D,E);h.undoManager.add()},g=function(h,k){var w=q.fromTag("br");r.before(q.fromDom(k),w);h.undoManager.add()},e=function(h,k){v(h.getBody(),k)||r.after(q.fromDom(k),q.fromTag("br"));var w=q.fromTag("br");r.after(q.fromDom(k),w);x(h.dom,h.selection,w.dom());t(h.dom,h.selection,w.dom(),!1);h.undoManager.add()},v=function(h,k){return c.isBr(b.after(k).getNode())?!0:l.nextPosition(h,b.after(k)).map(function(w){return c.isBr(w.getNode())}).getOr(!1)},
y=function(h){return h&&"A"===h.nodeName&&"href"in h},C=function(h){return h.fold(u.constant(!1),y,y,u.constant(!1))},B=function(h,k){k.fold(u.noop,u.curry(g,h),u.curry(e,h),u.noop)};return{insert:function(h,k){var w=u.curry(f.isInlineTarget,h);var z=b.fromRangeStart(h.selection.getRng());w=a.readLocation(w,h.getBody(),z).filter(C);w.isSome()?w.each(u.curry(B,h)):p(h,k)}}});L("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(u,r){u=u.generate([{before:["element"]},
{on:["element","offset"]},{after:["element"]}]);return{before:u.before,on:u.on,after:u.after,cata:function(q,l,b,c){return q.fold(l,b,c)},getStart:function(q){return q.fold(r.identity,r.identity,r.identity)}}});L("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(u,r,q,l,b){var c=u.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start",
"soffset","finish","foffset"]}]);u=r.immutable("start","soffset","finish","foffset");var d=function(a){return a.match({domRange:function(f){return q.fromDom(f.startContainer)},relative:function(f,n){return b.getStart(f)},exact:function(f,n,A,x){return f}})};return{domRange:c.domRange,relative:c.relative,exact:c.exact,exactFromRange:function(a){return c.exact(a.start(),a.soffset(),a.finish(),a.foffset())},range:u,getWin:function(a){a=d(a);return l.defaultView(a)}}});L("tinymce.core.selection.SelectionBookmark",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection global!document".split(" "),function(u,r,q,l,b,c,d,a,f,n){var A=q.detect().browser,x=function(k,w){w=c.isText(w)?d.get(w).length:a.children(w).length+1;return k>w?w:0>k?0:k},t=function(k){return f.range(k.start(),x(k.soffset(),k.start()),k.finish(),
x(k.foffset(),k.finish()))},p=function(k,w){return l.contains(k,w)||l.eq(k,w)},g=function(k){return function(w){return p(k,w.start())&&p(k,w.finish())}},e=function(k){return f.range(b.fromDom(k.startContainer),k.startOffset,b.fromDom(k.endContainer),k.endOffset)},v=function(k){k=k.getSelection();return(k&&0!==k.rangeCount?r.from(k.getRangeAt(0)):r.none()).map(e)},y=function(k){var w=a.defaultView(k);return v(w.dom()).filter(g(k))},C=function(k,w){return r.from(w).filter(g(k)).map(t)},B=function(k){var w=
n.createRange();w.setStart(k.start().dom(),k.soffset());w.setEnd(k.finish().dom(),k.foffset());return r.some(w)},h=function(k){return(k.bookmark?k.bookmark:r.none()).bind(u.curry(C,b.fromDom(k.getBody()))).bind(B)};return{store:function(k){var w=!0===k.inline||A.isIE()?y(b.fromDom(k.getBody())):r.none();k.bookmark=w.isSome()?w:k.bookmark},storeNative:function(k,w){var z=b.fromDom(k.getBody());w=(!0===k.inline||A.isIE()?r.from(w):r.none()).map(e).filter(g(z));k.bookmark=w.isSome()?w:k.bookmark},readRange:v,
restore:function(k){h(k).each(function(w){k.selection.setRng(w)})},getRng:h,getBookmark:y,validate:C}});L("tinymce.core.EditorCommands","tinymce.core.Env tinymce.core.InsertContent tinymce.core.delete.DeleteCommands tinymce.core.dom.NodeType tinymce.core.newline.InsertBr tinymce.core.selection.SelectionBookmark tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d){var a=d.each,f=d.extend,n=d.map,A=d.inArray,x=d.explode;return function(t){var p,g,e,v={state:{},exec:{},value:{}},y=t.settings,
C;t.on("PreInit",function(){p=t.dom;g=t.selection;y=t.settings;e=t.formatter});var B=function(z){var m;if(!t.quirks.isHidden()&&!t.removed){z=z.toLowerCase();if(m=v.state[z])return m(z);try{return t.getDoc().queryCommandState(z)}catch(D){}return!1}},h=function(z,m){m=m||"exec";a(z,function(D,F){a(F.toLowerCase().split(","),function(G){v[m][G]=D})})};f(this,{execCommand:function(z,m,D,F){var G=0;if(!t.removed){/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(z)||F&&F.skip_focus?
c.restore(t):t.focus();F=t.fire("BeforeExecCommand",{command:z,ui:m,value:D});if(F.isDefaultPrevented())return!1;var I=z.toLowerCase();if(F=v.exec[I])return F(I,m,D),t.fire("ExecCommand",{command:z,ui:m,value:D}),!0;a(t.plugins,function(H){if(H.execCommand&&H.execCommand(z,m,D))return t.fire("ExecCommand",{command:z,ui:m,value:D}),G=!0,!1});if(G)return G;if(t.theme&&t.theme.execCommand&&t.theme.execCommand(z,m,D))return t.fire("ExecCommand",{command:z,ui:m,value:D}),!0;try{G=t.getDoc().execCommand(z,
m,D)}catch(H){}return G?(t.fire("ExecCommand",{command:z,ui:m,value:D}),!0):!1}},queryCommandState:B,queryCommandValue:function(z){var m;if(!t.quirks.isHidden()&&!t.removed){z=z.toLowerCase();if(m=v.value[z])return m(z);try{return t.getDoc().queryCommandValue(z)}catch(D){}}},queryCommandSupported:function(z){z=z.toLowerCase();if(v.exec[z])return!0;try{return t.getDoc().queryCommandSupported(z)}catch(m){}return!1},addCommands:h,addCommand:function(z,m,D){z=z.toLowerCase();v.exec[z]=function(F,G,I,
H){return m.call(D||t,G,I,H)}},addQueryStateHandler:function(z,m,D){z=z.toLowerCase();v.state[z]=function(){return m.call(D||t)}},addQueryValueHandler:function(z,m,D){z=z.toLowerCase();v.value[z]=function(){return m.call(D||t)}},hasCustomCommand:function(z){z=z.toLowerCase();return!!v.exec[z]}});var k=function(z,m,D){void 0===m&&(m=!1);void 0===D&&(D=null);return t.getDoc().execCommand(z,m,D)},w=function(z,m){e.toggle(z,m?{value:m}:void 0);t.nodeChanged()};h({"mceResetDesignMode,mceBeginUndoLevel":function(){},
"mceEndUndoLevel,mceAddUndoLevel":function(){t.undoManager.add()},"Cut,Copy,Paste":function(z){var m=t.getDoc();try{k(z)}catch(F){var D=!0}"paste"!==z||m.queryCommandEnabled(z)||(D=!0);if(D||!m.queryCommandSupported(z))z=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),u.mac&&(z=z.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:z,type:"error"})},unlink:function(){if(g.isCollapsed()){var z=t.dom.getParent(t.selection.getStart(),
"a");z&&t.dom.remove(z,!0)}else e.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(z){var m=z.substring(7);"full"==m&&(m="justify");a(["left","center","right","justify"],function(D){m!=D&&e.remove("align"+D)});"none"!=m&&w("align"+m)},"InsertUnorderedList,InsertOrderedList":function(z){k(z);if(z=p.getParent(g.getNode(),"ol,ul")){var m=z.parentNode;/^(H[1-6]|P|ADDRESS|PRE)$/.test(m.nodeName)&&(C=g.getBookmark(void 0),p.split(m,z),g.moveToBookmark(C))}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(z){w(z)},
"ForeColor,HiliteColor,FontName":function(z,m,D){w(z,D)},FontSize:function(z,m,D){if(1<=D&&7>=D){var F=x(y.font_size_style_values);D=(m=x(y.font_size_classes))?m[D-1]||D:F[D-1]||D}w(z,D)},RemoveFormat:function(z){e.remove(z)},mceBlockQuote:function(){w("blockquote")},FormatBlock:function(z,m,D){return w(D||"p")},mceCleanup:function(){var z=g.getBookmark();t.setContent(t.getContent({cleanup:!0}),{cleanup:!0});g.moveToBookmark(z)},mceRemoveNode:function(z,m,D){z=D||g.getNode();z!=t.getBody()&&(C=g.getBookmark(void 0),
t.dom.remove(z,!0),g.moveToBookmark(C))},mceSelectNodeDepth:function(z,m,D){var F=0;p.getParent(g.getNode(),function(G){if(1==G.nodeType&&F++==D)return g.select(G),!1},t.getBody())},mceSelectNode:function(z,m,D){g.select(D)},mceInsertContent:function(z,m,D){r.insertAtCaret(t,D)},mceInsertRawHTML:function(z,m,D){g.setContent("tiny_mce_marker");t.setContent(t.getContent().replace(/tiny_mce_marker/g,function(){return D}))},mceToggleFormat:function(z,m,D){w(D)},mceSetContent:function(z,m,D){t.setContent(D)},
"Indent,Outdent":function(z){var m;var D=y.indentation;var F=/[a-z%]+$/i.exec(D);D=parseInt(D,10);B("InsertUnorderedList")||B("InsertOrderedList")?k(z):(y.forced_root_block||p.getParent(g.getNode(),p.isBlock)||e.apply("div"),a(g.getSelectedBlocks(),function(G){if("false"!==p.getContentEditable(G)&&"LI"!==G.nodeName){var I=t.getParam("indent_use_margin",!1)?"margin":"padding";I="TABLE"===G.nodeName?"margin":I;I+="rtl"==p.getStyle(G,"direction",!0)?"Right":"Left";"outdent"==z?(m=Math.max(0,parseInt(G.style[I]||
0,10)-D),p.setStyle(G,I,m?m+F:"")):(m=parseInt(G.style[I]||0,10)+D+F,p.setStyle(G,I,m))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){t.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){t.hasVisual=!t.hasVisual;t.addVisual()},mceReplaceContent:function(z,m,D){t.execCommand("mceInsertContent",!1,D.replace(/\{\$selection\}/g,g.getContent({format:"text"})))},mceInsertLink:function(z,m,D){"string"==typeof D&&(D={href:D});z=p.getParent(g.getNode(),"a");D.href=D.href.replace(" ",
"%20");z&&D.href||e.remove("link");D.href&&e.apply("link",D,z)},selectAll:function(){var z=p.getParent(g.getStart(),l.isContentEditableTrue);if(z){var m=p.createRng();m.selectNodeContents(z);g.setRng(m)}},"delete":function(){q.deleteCommand(t)},forwardDelete:function(){q.forwardDeleteCommand(t)},mceNewDocument:function(){t.setContent("")},InsertLineBreak:function(z,m,D){b.insert(t,D);return!0}});h({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(z){var m="align"+z.substring(7);z=g.isCollapsed()?
[p.getParent(g.getNode(),p.isBlock)]:g.getSelectedBlocks();z=n(z,function(D){return!!e.matchNode(D,m)});return-1!==A(z,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(z){return e.match(z)},mceBlockQuote:function(){return e.match("blockquote")},Outdent:function(){var z;return y.inline_styles&&((z=p.getParent(g.getStart(),p.isBlock))&&0<parseInt(z.style.paddingLeft,10)||(z=p.getParent(g.getEnd(),p.isBlock))&&0<parseInt(z.style.paddingLeft,10))?!0:B("InsertUnorderedList")||
B("InsertOrderedList")||!y.inline_styles&&!!p.getParent(g.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(z){var m=p.getParent(g.getNode(),"ul,ol");return m&&("insertunorderedlist"===z&&"UL"===m.tagName||"insertorderedlist"===z&&"OL"===m.tagName)}},"state");h({"FontSize,FontName":function(z){var m=0,D;if(D=p.getParent(g.getNode(),"span"))m="fontsize"==z?D.style.fontSize:D.style.fontFamily.replace(/, /g,",").replace(/['"]/g,"").toLowerCase();return m}},"value");h({Undo:function(){t.undoManager.undo()},
Redo:function(){t.undoManager.redo()}})}});L("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(u){var r=u.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),q=function(l){var b=
this,c={},d=function(){return!1},a=function(){return!0};l=l||{};var f=l.scope||b;var n=l.toggleEvent||d;var A=function(t,p,g,e){var v;!1===p&&(p=d);if(p){p={func:p};e&&u.extend(p,e);var y=t.toLowerCase().split(" ");for(v=y.length;v--;)t=y[v],e=c[t],e||(e=c[t]=[],n(t,!0)),g?e.unshift(p):e.push(p)}return b},x=function(t,p){var g,e,v;if(t){var y=t.toLowerCase().split(" ");for(g=y.length;g--;){t=y[g];var C=c[t];if(!t){for(e in c)n(e,!1),delete c[e];break}if(C){if(p)for(v=C.length;v--;)C[v].func===p&&
(C=C.slice(0,v).concat(C.slice(v+1)),c[t]=C);else C.length=0;C.length||(n(t,!1),delete c[t])}}}else{for(t in c)n(t,!1);c={}}return b};b.fire=function(t,p){var g,e;t=t.toLowerCase();p=p||{};p.type=t;p.target||(p.target=f);p.preventDefault||(p.preventDefault=function(){p.isDefaultPrevented=a},p.stopPropagation=function(){p.isPropagationStopped=a},p.stopImmediatePropagation=function(){p.isImmediatePropagationStopped=a},p.isDefaultPrevented=d,p.isPropagationStopped=d,p.isImmediatePropagationStopped=d);
l.beforeFire&&l.beforeFire(p);if(g=c[t]){var v=0;for(e=g.length;v<e;v++){var y=g[v];y.once&&x(t,y.func);if(p.isImmediatePropagationStopped()){p.stopPropagation();break}if(!1===y.func.call(f,p)){p.preventDefault();break}}}return p};b.on=A;b.off=x;b.once=function(t,p,g){return A(t,p,g,{once:!0})};b.has=function(t){t=t.toLowerCase();return!(!c[t]||0===c[t].length)}};q.isNative=function(l){return!!r[l.toLowerCase()]};return q});L("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(u){var r=
function(q){q._eventDispatcher||(q._eventDispatcher=new u({scope:q,toggleEvent:function(l,b){u.isNative(l)&&q.toggleNativeEvent&&q.toggleNativeEvent(l,b)}}));return q._eventDispatcher};return{fire:function(q,l,b){if(this.removed&&"remove"!==q)return l;l=r(this).fire(q,l,b);if(!1!==b&&this.parent)for(b=this.parent();b&&!l.isPropagationStopped();)b.fire(q,l,!1),b=b.parent();return l},on:function(q,l,b){return r(this).on(q,l,b)},off:function(q,l){return r(this).off(q,l)},once:function(q,l){return r(this).once(q,
l)},hasEventListeners:function(q){return r(this).has(q)}}});L("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(u,r,q){var l=r.DOM,b,c=function(a,f){return"selectionchange"==f?a.getDoc():!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(f)?a.getDoc().documentElement:a.settings.event_root?(a.eventRoot||(a.eventRoot=l.select(a.settings.event_root)[0]),a.eventRoot):a.getBody()},d=function(a,f){a.delegates||
(a.delegates={});if(!a.delegates[f]&&!a.removed){var n=c(a,f);if(a.settings.event_root){if(b||(b={},a.editorManager.on("removeEditor",function(){var x;if(!a.editorManager.activeEditor&&b){for(x in b)a.dom.unbind(c(a,x));b=null}})),!b[f]){var A=function(x){for(var t=x.target,p=a.editorManager.get(),g=p.length;g--;){var e=p[g].getBody();if(e===t||l.isChildOf(t,e))e=p[g],e.hidden||e.readonly||p[g].fire(f,x)}};b[f]=A;l.bind(n,f,A)}}else A=function(x){a.hidden||a.readonly||a.fire(f,x)},l.bind(n,f,A),a.delegates[f]=
A}};r={bindPendingEventDelegates:function(){var a=this;q.each(a._pendingNativeEvents,function(f){d(a,f)})},toggleNativeEvent:function(a,f){"focus"!=a&&"blur"!=a&&(f?this.initialized?d(this,a):this._pendingNativeEvents?this._pendingNativeEvents.push(a):this._pendingNativeEvents=[a]:this.initialized&&(this.dom.unbind(c(this,a),a,this.delegates[a]),delete this.delegates[a]))},unbindAllNativeEvents:function(){var a;if(this.delegates){for(a in this.delegates)this.dom.unbind(c(this,a),a,this.delegates[a]);
delete this.delegates}this.inline||(this.getBody().onload=null,this.dom.unbind(this.getWin()),this.dom.unbind(this.getDoc()));this.dom.unbind(this.getBody());this.dom.unbind(this.getContainer())}};return r=q.extend({},u,r)});L("tinymce.core.Mode",[],function(){var u=function(l,b,c){try{l.getDoc().execCommand(b,!1,c)}catch(d){}},r=function(l){var b=l.getBody();var c=function(d){0<l.dom.getParents(d.target,"a").length&&d.preventDefault()};l.dom.bind(b,"click",c);return{unbind:function(){l.dom.unbind(b,
"click",c)}}},q=function(l,b){l._clickBlocker&&(l._clickBlocker.unbind(),l._clickBlocker=null);b?(l._clickBlocker=r(l),l.selection.controlSelection.hideResizeRect(),l.readonly=!0,l.getBody().contentEditable=!1):(l.readonly=!1,l.getBody().contentEditable=!0,u(l,"StyleWithCSS",!1),u(l,"enableInlineTableEditing",!1),u(l,"enableObjectResizing",!1),l.focus(),l.nodeChanged())};return{setMode:function(l,b){if(b!=(l.readonly?"readonly":"design")){if(l.initialized)q(l,"readonly"==b);else l.on("init",function(){q(l,
"readonly"==b)});l.fire("SwitchMode",{mode:b})}}}});L("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(u,r){var q=u.each,l=u.explode,b={f9:120,f10:121,f11:122},c=u.makeMap("alt,ctrl,shift,meta,access");return function(d){var a={},f=[],n=function(p){var g,e={};q(l(p,"+"),function(v){v in c?e[v]=!0:/^[0-9]{2,}$/.test(v)?e.keyCode=parseInt(v,10):(e.charCode=v.charCodeAt(0),e.keyCode=b[v]||v.toUpperCase().charCodeAt(0))});p=[e.keyCode];for(g in c)e[g]?p.push(g):e[g]=!1;
e.id=p.join(",");e.access&&(e.alt=!0,r.mac?e.ctrl=!0:e.shift=!0);e.meta&&(r.mac?e.meta=!0:(e.ctrl=!0,e.meta=!1));return e},A=function(p,g,e,v){p=u.map(l(p,">"),n);p[p.length-1]=u.extend(p[p.length-1],{func:e,scope:v||d});return u.extend(p[0],{desc:d.translate(g),subpatterns:p.slice(1)})},x=function(p,g){return g&&g.ctrl==p.ctrlKey&&g.meta==p.metaKey&&g.alt==p.altKey&&g.shift==p.shiftKey?p.keyCode==g.keyCode||p.charCode&&p.charCode==g.charCode?(p.preventDefault(),!0):!1:!1},t=function(p){return p.func?
p.func.call(p.scope):null};d.on("keyup keypress keydown",function(p){(p.altKey||p.ctrlKey||p.metaKey||"keydown"===p.type&&112<=p.keyCode&&123>=p.keyCode)&&!p.isDefaultPrevented()&&(q(a,function(g){if(x(p,g))return f=g.subpatterns.slice(0),"keydown"==p.type&&t(g),!0}),x(p,f[0])&&(1===f.length&&"keydown"==p.type&&t(f[0]),f.shift()))});this.add=function(p,g,e,v){var y=e;"string"===typeof e?e=function(){d.execCommand(y,!1,null)}:u.isArray(y)&&(e=function(){d.execCommand(y[0],y[1],y[2])});q(l(u.trim(p.toLowerCase())),
function(C){C=A(C,g,e,v);a[C.id]=C});return!0};this.remove=function(p){p=A(p);return a[p.id]?(delete a[p.id],!0):!1}}});L("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(u,r,q){var l=q.each,b=function(d,a,f){var n=1,A;var x=d.getShortEndedElements();d=/<([!?\/])?([A-Za-z0-9\-_:\.]+)((?:\s+[^"'>]+(?:(?:"[^"]*")|(?:'[^']*')|[^>]*))*|\/|\s+)>/g;for(d.lastIndex=f;A=d.exec(a);){f=d.lastIndex;if("/"===A[1])n--;else if(!A[1]){if(A[2]in
x)continue;n++}if(0===n)break}return f},c=function(d,a){var f=this,n=function(){};d=d||{};f.schema=a=a||new u;!1!==d.fix_self_closing&&(d.fix_self_closing=!0);l("comment cdata text start end pi doctype".split(" "),function(A){A&&(f[A]=d[A]||n)});f.parse=function(A){var x=this,t,p=0,g,e=[],v,y,C,B,h,k,w=0,z=r.decode,m=q.makeMap("src,href,data,background,formaction,poster"),D=/((java|vb)script|mhtml):/i,F=/^data:/i,G=function(pa){var ya,ha;for(ya=e.length;ya--&&e[ya].name!==pa;);if(0<=ya){for(ha=e.length-
1;ha>=ya;ha--)pa=e[ha],pa.valid&&x.end(pa.name);e.length=ya}},I=function(pa,ya,ha,ea,na){pa=/[\s\u0000-\u001F]+/g;ya=ya.toLowerCase();ha=ya in P?ya:z(ha||ea||na||"");if(ea=Q&&!C)ea=ya,ea=!1===(0===ea.indexOf("data-")||0===ea.indexOf("aria-"));if(ea){ea=O[ya];if(!ea&&U){for(na=U.length;na--&&(ea=U[na],!ea.pattern.test(ya)););-1===na&&(ea=null)}if(!ea||ea.validValues&&!(ha in ea.validValues))return}if(m[ya]&&!d.allow_script_urls){pa=ha.replace(pa,"");try{pa=decodeURIComponent(pa)}catch(ua){pa=unescape(pa)}if(D.test(pa)||
!d.allow_html_data_urls&&F.test(pa)&&!/^data:image\//i.test(pa))return}C&&(ya in m||0===ya.indexOf("on"))||(X.map[ya]=ha,X.push({name:ya,value:ha}))};var H=/<(?:(?:!--([\w\W]*?)--\x3e)|(?:!\[CDATA\[([\w\W]*?)\]\]>)|(?:!DOCTYPE([\w\W]*?)>)|(?:\?([^\s\/<>]+) ?([\w\W]*?)[?/]>)|(?:\/([A-Za-z][A-Za-z0-9\-_\:\.]*)>)|(?:([A-Za-z][A-Za-z0-9\-_\:\.]*)((?:\s+[^"'>]+(?:(?:"[^"]*")|(?:'[^']*')|[^>]*))*|\/|\s+)>))/g;var E=/([\w:\-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g;var J=a.getShortEndedElements();
var M=d.self_closing_elements||a.getSelfClosingElements();var P=a.getBoolAttrs();var Q=d.validate;var V=d.remove_internals;var W=d.fix_self_closing;var ba=a.getSpecialElements();for(k=A+">";t=H.exec(k);){p<t.index&&x.text(z(A.substr(p,t.index-p)));if(g=t[6])g=g.toLowerCase(),":"===g.charAt(0)&&(g=g.substr(1)),G(g);else if(g=t[7]){if(t.index+t[0].length>A.length){x.text(z(A.substr(t.index)));p=t.index+t[0].length;continue}g=g.toLowerCase();":"===g.charAt(0)&&(g=g.substr(1));p=g in J;W&&M[g]&&0<e.length&&
e[e.length-1].name===g&&G(g);if(!Q||(B=a.getElementRule(g))){var N=!0;if(Q){var O=B.attributes;var U=B.attributePatterns}if(h=t[8]){(C=-1!==h.indexOf("data-mce-type"))&&V&&(N=!1);var X=[];X.map={};h.replace(E,I)}else X=[],X.map={};if(Q&&!C){var S=B.attributesRequired;var aa=B.attributesDefault;var fa=B.attributesForced;(v=B.removeEmptyAttrs)&&!X.length&&(N=!1);if(fa)for(v=fa.length;v--;){var ia=fa[v];var ta=ia.name;ia=ia.value;"{$uid}"===ia&&(ia="mce_"+w++);X.map[ta]=ia;X.push({name:ta,value:ia})}if(aa)for(v=
aa.length;v--;)ia=aa[v],ta=ia.name,ta in X.map||(ia=ia.value,"{$uid}"===ia&&(ia="mce_"+w++),X.map[ta]=ia,X.push({name:ta,value:ia}));if(S){for(v=S.length;v--&&!(S[v]in X.map););-1===v&&(N=!1)}if(ia=X.map["data-mce-bogus"]){if("all"===ia){p=b(a,A,H.lastIndex);H.lastIndex=p;continue}N=!1}}N&&x.start(g,X,p)}else N=!1;if(S=ba[g]){S.lastIndex=p=t.index+t[0].length;(t=S.exec(A))?(N&&(y=A.substr(p,t.index-p)),p=t.index+t[0].length):(y=A.substr(p),p=A.length);N&&(0<y.length&&x.text(y,!0),x.end(g));H.lastIndex=
p;continue}p||(h&&h.indexOf("/")==h.length-1?N&&x.end(g):e.push({name:g,valid:N}))}else(g=t[1])?(">"===g.charAt(0)&&(g=" "+g),d.allow_conditional_comments||"[if"!==g.substr(0,3).toLowerCase()||(g=" "+g),x.comment(g)):(g=t[2])?x.cdata(g.replace(/\x3c!--|--\x3e/g,"")):(g=t[3])?x.doctype(g):(g=t[4])&&x.pi(g,t[5]);p=t.index+t[0].length}p<A.length&&x.text(z(A.substr(p)));for(v=e.length-1;0<=v;v--)g=e[v],g.valid&&x.end(g.name)}};c.findEndTag=b;return c});L("tinymce.core.dom.TrimHtml",["tinymce.core.html.SaxParser",
"tinymce.core.text.Zwsp"],function(u,r){var q=function(l,b){var c=b;b=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var d,a,f=l.schema;l=l.getTempAttrs();l=new RegExp(["\\s?("+l.join("|")+')="[^"]+"'].join("|"),"gi");c=c.replace(l,"");for(a=f.getShortEndedElements();d=b.exec(c);){l=b.lastIndex;var n=d[0].length;d=a[d[1]]?l:u.findEndTag(f,c,l);c=c.substring(0,l-n)+c.substring(d);b.lastIndex=l-n}return c};return{trimExternal:function(l,b){return r.trim(q(l,b))},trimInternal:q}});L("ephox.sugar.api.search.PredicateExists",
["ephox.sugar.api.search.PredicateFind"],function(u){return{any:function(r){return u.first(r).isSome()},ancestor:function(r,q,l){return u.ancestor(r,q,l).isSome()},closest:function(r,q,l){return u.closest(r,q,l).isSome()},sibling:function(r,q){return u.sibling(r,q).isSome()},child:function(r,q){return u.child(r,q).isSome()},descendant:function(r,q){return u.descendant(r,q).isSome()}}});L("ephox.sugar.api.dom.Focus","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateExists ephox.sugar.api.search.Traverse global!document".split(" "),
function(u,r,q,l,b,c,d){var a=function(n){n.dom().focus()},f=function(n){n=void 0!==n?n.dom():d;return r.from(n.activeElement).map(l.fromDom)};return{hasFocus:function(n){var A=c.owner(n).dom();return n.dom()===A.activeElement},focus:a,blur:function(n){n.dom().blur()},active:f,search:function(n){return f(c.owner(n)).filter(function(A){return n.dom().contains(A.dom())})},focusInside:function(n){var A=c.owner(n);f(A).filter(function(x){return b.closest(x,u.curry(q.eq,n))}).fold(function(){a(n)},u.noop)}}});
L("tinymce.core.focus.EditorFocus","ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Focus ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.selection.RangeNodes tinymce.core.selection.SelectionBookmark".split(" "),function(u,r,q,l,b,c,d,a,f){var n=function(e,v){return e.dom.getParent(v,function(y){return"true"===e.dom.getContentEditable(y)})},A=function(e,v){return(v.collapsed?u.from(a.getNode(v.startContainer,
v.startOffset)).map(l.fromDom):u.none()).bind(function(y){return d.isTableSection(y)?u.some(y):!1===r.contains(e,y)?u.some(e):u.none()})},x=function(e,v){A(l.fromDom(e.getBody()),v).bind(function(y){return c.firstPositionIn(y.dom())}).fold(function(){e.selection.normalize()},function(y){e.selection.setRng(y.toRange())})},t=function(e){if(e.setActive)try{e.setActive()}catch(v){e.focus()}else e.focus()},p=function(e){if(e.inline){e=e.getBody();var v;if(v=e)e=l.fromDom(e),v=q.hasFocus(e)||q.search(e).isSome();
e=v}else e=e.iframeElement&&q.hasFocus(l.fromDom(e.iframeElement));return e},g=function(e){var v=e.selection,y=e.settings.content_editable,C=e.getBody(),B=v.getRng();e.quirks.refreshContentEditable();v=n(e,v.getNode());if(e.$.contains(C,v))t(v),x(e,B);else if(void 0!==e.bookmark&&!1===p(e)&&f.getRng(e).each(function(h){e.selection.setRng(h);B=h}),y||(b.opera||t(C),e.getWin().focus()),b.gecko||y)t(C),x(e,B);e.editorManager.setActive(e)};return{focus:function(e,v){e.removed||(v?e.editorManager.setActive(e):
g(e))},hasFocus:p}});L("tinymce.core.EditorView","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),function(u,r,q,l,b,c){var d=function(t,p){return p.dom()[t]},a=function(t,p){return parseInt(b.get(p,t),10)},f=u.curry(d,"clientWidth"),n=u.curry(d,"clientHeight"),A=u.curry(a,"margin-top"),x=u.curry(a,"margin-left");return{isXYInContentArea:function(t,p,g){var e=l.fromDom(t.getBody());
e=t.inline?e:c.documentElement(e);var v=t.inline,y=e.dom().getBoundingClientRect();t=v?y.left+e.dom().clientLeft+x(e):0;v=v?y.top+e.dom().clientTop+A(e):0;p-=t;g-=v;t=f(e);e=n(e);return 0<=p&&0<=g&&p<=t&&g<=e},isEditorAttachedToDom:function(t){t=t.inline?t.getBody():t.getContentAreaContainer();return r.from(t).map(l.fromDom).map(function(p){return q.contains(c.owner(p),p)}).getOr(!1)}}});L("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var u=function(){throw Error("Theme did not provide a NotificationManager implementation.");
};return{open:u,close:u,reposition:u,getArgs:u}}});L("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(u,r,q,l,b){return function(c){var d=[],a=function(){var x=c.theme;return x&&x.getNotificationManagerImpl?x.getNotificationManagerImpl():l()},f=function(){0<d.length&&a().reposition(d)},n=function(x){u.findIndex(d,function(t){return t===x}).each(function(t){d.splice(t,
1)})},A=function(x){if(!c.removed&&q.isEditorAttachedToDom(c))return u.find(d,function(t){t=a().getArgs(t);return t.type===x.type&&t.text===x.text&&!t.progressBar&&!t.timeout&&!x.progressBar&&!x.timeout}).getOrThunk(function(){c.editorManager.setActive(c);var t=a().open(x,function(){n(t);f()});d.push(t);f();return t})};(function(x){x.on("SkinLoaded",function(){var t=x.settings.service_message;t&&A({text:t,type:"warning",timeout:0,icon:""})});x.on("ResizeEditor ResizeWindow",function(){b.requestAnimationFrame(f)});
x.on("remove",function(){u.each(d,function(t){a().close(t)})})})(c);return{open:A,close:function(){r.from(d[0]).each(function(x){a().close(x);n(x);f()})},getNotifications:function(){return d}}}});L("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var u=function(){throw Error("Theme did not provide a WindowManager implementation.");};return{open:u,alert:u,confirm:u,close:u,getParams:u,setParams:u}}});L("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option",
"tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(u,r,q,l){return function(b){var c=[],d=function(){var x=b.theme;return x&&x.getWindowManagerImpl?x.getWindowManagerImpl():l()},a=function(x,t){return function(){return t?t.apply(x,arguments):void 0}},f=function(x){b.fire("OpenWindow",{win:x})},n=function(x){u.findIndex(c,function(t){return t===x}).each(function(t){c.splice(t,1);b.fire("CloseWindow",{win:x});0===c.length&&b.focus()})},A=function(){return r.from(c[c.length-
1])};b.on("remove",function(){u.each(c.slice(0),function(x){d().close(x)})});return{windows:c,open:function(x,t){b.editorManager.setActive(b);q.store(b);x=d().open(x,t,n);c.push(x);f(x);return x},alert:function(x,t,p){x=d().alert(x,a(p?p:this,t),n);c.push(x);f(x)},confirm:function(x,t,p){x=d().confirm(x,a(p?p:this,t),n);c.push(x);f(x)},close:function(){A().each(function(x){d().close(x);n(x)})},getParams:function(){return A().map(d().getParams).getOr(null)},setParams:function(x){A().each(function(t){d().setParams(t,
x)})},getWindows:function(){return c}}}});L("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(u,r){var q=r.PluginManager,l=function(b,c){if(b._skinLoaded)b.notificationManager.open({type:"error",text:c});else b.on("SkinLoaded",function(){b.notificationManager.open({type:"error",text:c})})};return{pluginLoadError:function(b,c){a:{for(d in q.urls)if(q.urls[d]+"/plugin"+b.suffix+".js"===c)break a;var d=null}l(b,d?"Failed to load plugin: "+d+" from url "+c:"Failed to load plugin url: "+
c)},uploadError:function(b,c){l(b,"Failed to upload image: "+c)},displayError:l,initError:function(b){var c=u.console;c&&!u.test&&(c.error?c.error.apply(c,arguments):c.log.apply(c,arguments))}}});L("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(u){return u.PluginManager});L("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(u){return u.ThemeManager});L("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(u){return function(){return new (u.getOrDie("XMLHttpRequest"))}});
L("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(u,r,q,l,b){return function(c,d){var a={},f=function(e,v,y,C){var B=new u;B.open("POST",d.url);B.withCredentials=d.credentials;B.upload.onprogress=function(k){C(k.loaded/k.total*100)};B.onerror=function(){y("Image upload failed due to a XHR Transport error. Code: "+B.status)};B.onload=function(){var k;if(200>B.status||300<=B.status)y("HTTP Error: "+
B.status);else if((k=JSON.parse(B.responseText))&&"string"==typeof k.location){var w=d.basePath;k=k.location;w=w?w.replace(/\/$/,"")+"/"+k.replace(/^\//,""):k;v(w)}else y("Invalid JSON: "+B.responseText)};var h=new r.FormData;h.append("file",e.blob(),e.filename());B.send(h)},n=function(){return new l(function(e){e([])})},A=function(e,v){return{url:"",blobInfo:e,status:!1,error:v}},x=function(e,v){b.each(a[e],function(y){y(v)});delete a[e]},t=function(e,v,y){c.markPending(e.blobUri());return new l(function(C){var B,
h=function(){};try{var k=function(w){0>w||100<w||(B||(B=y()),B.progressBar.value(w))};v(e,function(w){B&&(B.close(),k=h);c.markUploaded(e.blobUri(),w);x(e.blobUri(),{url:w,blobInfo:e,status:!0});C({url:w,blobInfo:e,status:!0})},function(w){B&&(B.close(),k=h);c.removeFailed(e.blobUri());x(e.blobUri(),A(e,w));C(A(e,w))},k)}catch(w){C(A(e,w.message))}})},p=function(e){var v=e.blobUri();return new l(function(y){a[v]=a[v]||[];a[v].push(y)})},g=function(e,v){e=b.grep(e,function(y){return!c.isUploaded(y.blobUri())});
return l.all(b.map(e,function(y){return c.isPending(y.blobUri())?p(y):t(y,d.handler,v)}))};d=b.extend({credentials:!1,handler:f},d);return{upload:function(e,v){return d.url||d.handler!==f?g(e,v):n()}}}});L("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(u){return function(r,q){return new (u.getOrDie("Blob"))(r,q)}});L("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(u){return function(){return new (u.getOrDie("FileReader"))}});L("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],
function(u){return function(r){return new (u.getOrDie("Uint8Array"))(r)}});L("ephox.sand.api.Window",["ephox.sand.util.Global"],function(u){return{atob:function(r){return u.getOrDie("atob")(r)},requestAnimationFrame:function(r){u.getOrDie("requestAnimationFrame")(r)}}});L("tinymce.core.file.Conversions","ephox.sand.api.Blob ephox.sand.api.FileReader ephox.sand.api.Uint8Array ephox.sand.api.Window ephox.sand.api.XMLHttpRequest tinymce.core.util.Promise".split(" "),function(u,r,q,l,b,c){var d=function(n){return new c(function(A,
x){var t=function(){x("Cannot convert "+n+" to Blob. Resource might not exist or is inaccessible.")};try{var p=new b;p.open("GET",n,!0);p.responseType="blob";p.onload=function(){200==this.status?A(this.response):t()};p.onerror=t;p.send()}catch(g){t()}})},a=function(n){var A,x;n=decodeURIComponent(n).split(",");(x=/data:([^;]+)/.exec(n[0]))&&(A=x[1]);return{type:A,data:n[1]}},f=function(n){return new c(function(A){var x;n=a(n);try{var t=l.atob(n.data)}catch(g){A(new u([]));return}var p=new q(t.length);
for(x=0;x<p.length;x++)p[x]=t.charCodeAt(x);A(new u([p],{type:n.type}))})};return{uriToBlob:function(n){return 0===n.indexOf("blob:")?d(n):0===n.indexOf("data:")?f(n):null},blobToDataUri:function(n){return new c(function(A){var x=new r;x.onloadend=function(){A(x.result)};x.readAsDataURL(n)})},parseDataUri:a}});L("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(u,r,q,l,b){var c=
0,d=function(a,f,n,A){var x;if(0===f.src.indexOf("blob:"))(x=a.getByUri(f.src))?n({image:f,blobInfo:x}):l.uriToBlob(f.src).then(function(p){l.blobToDataUri(p).then(function(g){t=l.parseDataUri(g).data;x=a.create("blobid"+c++,p,t);a.add(x);n({image:f,blobInfo:x})})},function(p){A(p)});else{var t=l.parseDataUri(f.src).data;(x=a.findFirst(function(p){return p.base64()===t}))?n({image:f,blobInfo:x}):l.uriToBlob(f.src).then(function(p){x=a.create("blobid"+c++,p,t);a.add(x);n({image:f,blobInfo:x})},function(p){A(p)})}};
return function(a,f){var n={};return{findAll:function(A,x){x||(x=q.constant(!0));A=r.filter(A?A.getElementsByTagName("img"):[],function(t){var p=t.src;return!b.fileApi||t.hasAttribute("data-mce-bogus")||t.hasAttribute("data-mce-placeholder")||!p||p==b.transparentSrc?!1:0===p.indexOf("blob:")?!a.isUploaded(p):0===p.indexOf("data:")?x(t):!1});A=r.map(A,function(t){if(n[t.src])return new u(function(g){n[t.src].then(function(e){if("string"===typeof e)return e;g({image:t,blobInfo:e.blobInfo})})});var p=
(new u(function(g,e){d(f,t,g,e)})).then(function(g){delete n[g.image.src];return g})["catch"](function(g){delete n[t.src];return g});return n[t.src]=p});return u.all(A)}}}});L("tinymce.core.util.Uuid",[],function(){var u=0,r=function(){var q=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+q()+q()+q()};return{uuid:function(q){return q+u++ +r()}}});L("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun",
"tinymce.core.util.Uuid"],function(u,r,q,l){return function(){var b=[],c=q.constant,d=function(n){if(!n.blob||!n.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";var A=n.id||l.uuid("blobid");var x=n.name||A;A=c(A);var t=c(x);x+=".";var p={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[n.blob.type.toLowerCase()]||"dat";return{id:A,name:t,filename:c(x+p),blob:c(n.blob),base64:c(n.base64),blobUri:c(n.blobUri||u.createObjectURL(n.blob)),
uri:c(n.uri)}},a=function(n){return f(function(A){return A.id()===n})},f=function(n){return r.filter(b,n)[0]};return{create:function(n,A,x,t){return"object"===typeof n?d(n):d({id:n,name:t,blob:A,base64:x})},add:function(n){a(n.id())||b.push(n)},get:a,getByUri:function(n){return f(function(A){return A.blobUri()==n})},findFirst:f,removeByUri:function(n){b=r.filter(b,function(A){return A.blobUri()===n?(u.revokeObjectURL(A.blobUri()),!1):!0})},destroy:function(){r.each(b,function(n){u.revokeObjectURL(n.blobUri())});
b=[]}}}});L("tinymce.core.file.UploadStatus",[],function(){return function(){var u={},r=function(q){return q in u};return{hasBlobUri:r,getResultUri:function(q){return(q=u[q])?q.resultUri:null},isPending:function(q){return r(q)?1===u[q].status:!1},isUploaded:function(q){return r(q)?2===u[q].status:!1},markPending:function(q){u[q]={status:1,resultUri:null}},markUploaded:function(q,l){u[q]={status:2,resultUri:l}},removeFailed:function(q){delete u[q]},destroy:function(){u={}}}}});L("tinymce.core.EditorUpload",
"tinymce.core.util.Arr tinymce.core.file.Uploader tinymce.core.file.ImageScanner tinymce.core.file.BlobCache tinymce.core.file.UploadStatus tinymce.core.ErrorReporter".split(" "),function(u,r,q,l,b,c){return function(d){var a=new l,f,n,A=d.settings,x=new b,t=function(w){return function(z){return d.selection?w(z):[]}},p=function(w,z,m){var D=0;do D=w.indexOf(z,D),-1!==D&&(w=w.substring(0,D)+m+w.substr(D+z.length),D+=m.length-z.length+1);while(-1!==D);return w},g=function(w,z,m){w=p(w,'src="'+z+'"',
'src="'+m+'"');return w=p(w,'data-mce-src="'+z+'"','data-mce-src="'+m+'"')},e=function(w,z){u.each(d.undoManager.data,function(m){"fragmented"===m.type?m.fragments=u.map(m.fragments,function(D){return g(D,w,z)}):m.content=g(m.content,w,z)})},v=function(){return d.notificationManager.open({text:d.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},y=function(w){f||(f=new r(x,{url:A.images_upload_url,basePath:A.images_upload_base_path,credentials:A.images_upload_credentials,handler:A.images_upload_handler}));
return h().then(t(function(z){var m=u.map(z,function(D){return D.blobInfo});return f.upload(m,v).then(t(function(D){D=u.map(D,function(F,G){G=z[G].image;if(F.status&&!1!==d.settings.images_replace_blob_uris){var I=F.url;a.removeByUri(G.src);e(G.src,I);d.$(G).attr({src:A.images_reuse_filename?I+("?"+(new Date).getTime()):I,"data-mce-src":d.convertURL(I,"src")})}else F.error&&c.uploadError(d,F.error);return{element:G,status:F.status}});w&&w(D);return D}))}))},C=function(w){if(!1!==A.automatic_uploads)return y(w)},
B=function(w){return A.images_dataimg_filter?A.images_dataimg_filter(w):!0},h=function(){n||(n=new q(x,a));return n.findAll(d.getBody(),B).then(t(function(w){w=u.filter(w,function(z){return"string"===typeof z?(c.displayError(d,z),!1):!0});u.each(w,function(z){e(z.image.src,z.blobInfo.blobUri());z.image.src=z.blobInfo.blobUri();z.image.removeAttribute("data-mce-src")});return w}))},k=function(w){return w.replace(/src="(blob:[^"]+)"/g,function(z,m){var D=x.getResultUri(m);if(D)return'src="'+D+'"';(D=
a.getByUri(m))||(D=u.reduce(d.editorManager.get(),function(F,G){return F||G.editorUpload&&G.editorUpload.blobCache.getByUri(m)},null));return D?'src="data:'+D.blob().type+";base64,"+D.base64()+'"':z})};d.on("setContent",function(){!1!==d.settings.automatic_uploads?C():h()});d.on("RawSaveContent",function(w){w.content=k(w.content)});d.on("getContent",function(w){w.source_view||"raw"==w.format||(w.content=k(w.content))});d.on("PostRender",function(){d.parser.addNodeFilter("img",function(w){u.each(w,
function(z){var m=z.attr("src");a.getByUri(m)||(m=x.getResultUri(m))&&z.attr("src",m)})})});return{blobCache:a,uploadImages:y,uploadImagesAuto:C,scanForImages:h,destroy:function(){a.destroy();x.destroy();n=f=null}}}});L("tinymce.core.ForceBlocks","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.Parents tinymce.core.focus.EditorFocus".split(" "),function(u,r,q,l,b,c,d){var a=function(n,A,x){return u.exists(c.parents(q.fromDom(x),
q.fromDom(A)),function(t){t=t.dom();return n.hasOwnProperty(t.nodeName)})},f=function(n){var A=n.settings,x=n.dom,t=n.selection,p=n.schema,g=p.getBlockElements(),e=t.getStart(),v=n.getBody();A=A.forced_root_block;if(e&&b.isElement(e)&&A){var y=v.nodeName.toLowerCase();if(p.isValidChild(y,A.toLowerCase())&&!a(g,v,e)){p=t.getRng();y=p.startContainer;var C=p.startOffset;var B=p.endContainer;var h=p.endOffset;var k=d.hasFocus(n);for(e=v.firstChild;e;){v=g;var w=e;v=b.isText(w)?!0:b.isElement(w)?!v.hasOwnProperty(w.nodeName)&&
!l.isBookmarkNode(w):!1;if(v)if(b.isText(e)&&0===e.nodeValue.length)v=e,e=e.nextSibling,x.remove(v);else{if(!z){var z=x.create(A,n.settings.forced_root_block_attrs);e.parentNode.insertBefore(z,e);var m=!0}v=e;e=e.nextSibling;z.appendChild(v)}else z=null,e=e.nextSibling}m&&k&&(p.setStart(y,C),p.setEnd(B,h),t.setRng(p),n.nodeChanged())}}};return{setup:function(n){if(n.settings.forced_root_block)n.on("NodeChange",r.curry(f,n))}}});L("tinymce.core.NodeChange",["tinymce.core.Env","tinymce.core.selection.RangeCompare",
"tinymce.core.util.Delay"],function(u,r,q){return function(l){var b,c=[];if(!("onselectionchange"in l.getDoc()))l.on("NodeChange Click MouseUp KeyUp Focus",function(d){var a=l.selection.getRng();a={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!=d.type&&r.isEq(a,b)||l.fire("SelectionChange");b=a});l.on("contextmenu",function(){l.fire("SelectionChange")});l.on("SelectionChange",function(){var d=l.selection.getStart(!0);if(d&&
(u.range||!l.selection.isCollapsed())){var a;a:{var f=l.$(d).parentsUntil(l.getBody()).add(d);if(f.length===c.length){for(a=f.length;0<=a&&f[a]===c[a];a--);if(-1===a){c=f;a=!0;break a}}c=f;a=!1}!a&&l.dom.isChildOf(d,l.getBody())&&l.nodeChanged({selectionChange:!0})}});l.on("MouseUp",function(d){d.isDefaultPrevented()||("IMG"==l.selection.getNode().nodeName?q.setEditorTimeout(l,function(){l.nodeChanged()}):l.nodeChanged())});this.nodeChanged=function(d){var a=l.selection;if(l.initialized&&a&&!l.settings.disable_nodechange&&
!l.readonly){var f=l.getBody();a=a.getStart(!0)||f;a.ownerDocument==l.getDoc()&&l.dom.isChildOf(a,f)||(a=f);var n=[];l.dom.getParent(a,function(A){if(A===f)return!0;n.push(A)});d=d||{};d.element=a;d.parents=n;l.fire("NodeChange",d)}}}});L("tinymce.core.dom.MousePosition",[],function(){var u=function(r){var q=r.getBoundingClientRect();var l=r.ownerDocument;r=l.documentElement;l=l.defaultView;return{top:q.top+l.pageYOffset-r.clientTop,left:q.left+l.pageXOffset-r.clientLeft}};return{calc:function(r,
q){var l=r.inline?u(r.getBody()):{left:0,top:0};var b=r.getBody();b=r.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0};if(q.target.ownerDocument!==r.getDoc()){var c=u(r.getContentAreaContainer()),d=r.getBody(),a=r.getDoc().documentElement;var f={left:d.scrollLeft,top:d.scrollTop};d={left:d.scrollLeft||a.scrollLeft,top:d.scrollTop||a.scrollTop};f=r.inline?f:d;r=q.pageX-c.left+f.left;q=q.pageY-c.top+f.top}else r=q.pageX,q=q.pageY;return{pageX:r-l.left+b.left,pageY:q-l.top+b.top}}}});L("tinymce.core.DragDropOverrides",
"global!document tinymce.core.dom.DOMUtils tinymce.core.dom.MousePosition tinymce.core.dom.NodeType tinymce.core.util.Arr tinymce.core.util.Delay tinymce.core.util.Fun".split(" "),function(u,r,q,l,b,c,d){var a=l.isContentEditableFalse,f=l.isContentEditableTrue,n=function(B,h,k){return h===k||B.dom.isChildOf(h,k)||a(h)?!1:!0},A=function(B){B=B.cloneNode(!0);B.removeAttribute("data-mce-selected");return B},x=function(B,h){return function(k){if(0===k.button){var w=b.find(h.dom.getParents(k.target),d.or(a,
f)),z=h.getBody();if(a(w)&&w!==z){z=h.dom.getPos(w);var m=h.getBody(),D=h.getDoc().documentElement;B.element=w;B.screenX=k.screenX;B.screenY=k.screenY;B.maxX=(h.inline?m.scrollWidth:D.offsetWidth)-2;B.maxY=(h.inline?m.scrollHeight:D.offsetHeight)-2;B.relX=k.pageX-z.x;B.relY=k.pageY-z.y;B.width=w.offsetWidth;B.height=w.offsetHeight;k=B.width;z=B.height;w=w.cloneNode(!0);h.dom.setStyles(w,{width:k,height:z});h.dom.setAttrib(w,"data-mce-selected",null);m=h.dom.create("div",{"class":"mce-drag-container",
"data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});h.dom.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:k,height:z});h.dom.setStyles(w,{margin:0,boxSizing:"border-box"});m.appendChild(w);B.ghost=m}}}},t=function(B,h){var k=c.throttle(function(w,z){h._selectionOverrides.hideFakeCaret();h.selection.placeCaretAt(w,z)},0);return function(w){var z=Math.max(Math.abs(w.screenX-B.screenX),Math.abs(w.screenY-B.screenY));if(B.element&&!B.dragging&&
10<z){if(h.fire("dragstart",{target:B.element}).isDefaultPrevented())return;B.dragging=!0;h.focus()}if(B.dragging){var m=q.calc(h,w);z=m.pageX-B.relX;m=m.pageY+5;var D=B.ghost,F=h.getBody();D.parentNode!==F&&F.appendChild(D);D=B.ghost;F=B.width;var G=B.height,I=B.maxX,H=B.maxY,E=0,J=0;D.style.left=z+"px";D.style.top=m+"px";z+F>I&&(E=z+F-I);m+G>H&&(J=m+G-H);D.style.width=F-E+"px";D.style.height=G-J+"px";k(w.clientX,w.clientY)}}},p=function(B){B=B.getSel().getRangeAt(0).startContainer;return 3===B.nodeType?
B.parentNode:B},g=function(B,h){return function(k){if(B.dragging&&n(h,p(h.selection),B.element)){var w=A(B.element);k=h.fire("drop",{targetClone:w,clientX:k.clientX,clientY:k.clientY});k.isDefaultPrevented()||(w=k.targetClone,h.undoManager.transact(function(){var z=B.element;z&&z.parentNode&&z.parentNode.removeChild(z);h.insertContent(h.dom.getOuterHTML(w));h._selectionOverrides.hideFakeCaret()}))}v(B)}},e=function(B,h){return function(){v(B);B.dragging&&h.fire("dragend")}},v=function(B){B.dragging=
!1;B.element=null;(B=B.ghost)&&B.parentNode&&B.parentNode.removeChild(B)},y=function(B){var h={};var k=r.DOM;var w=x(h,B);var z=t(h,B);var m=g(h,B);var D=e(h,B);B.on("mousedown",w);B.on("mousemove",z);B.on("mouseup",m);k.bind(u,"mousemove",z);k.bind(u,"mouseup",D);B.on("remove",function(){k.unbind(u,"mousemove",z);k.unbind(u,"mouseup",D)})},C=function(B){B.on("drop",function(h){var k="undefined"!==typeof h.clientX?B.getDoc().elementFromPoint(h.clientX,h.clientY):null;(a(k)||a(B.dom.getContentEditableParent(k)))&&
h.preventDefault()})};return{init:function(B){y(B);C(B)}}});L("tinymce.core.caret.FakeCaret","global!clearInterval tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerRemove tinymce.core.dom.DomQuery tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.util.Delay".split(" "),function(u,r,q,l,b,c,d){var a=b.isContentEditableFalse;return function(f,n){var A,x=null,t,p=function(){var e;var v=l("*[contentEditable=false]",f);for(e=0;e<v.length;e++){var y=v[e];var C=y.previousSibling;
if(r.endsWithCaretContainer(C)){var B=C.data;1==B.length?C.parentNode.removeChild(C):C.deleteData(B.length-1,1)}C=y.nextSibling;r.startsWithCaretContainer(C)&&(B=C.data,1==B.length?C.parentNode.removeChild(C):C.deleteData(0,1))}t&&(q.remove(t),t=null);x&&(x.remove(),x=null);u(A)},g=function(){A=d.setInterval(function(){f.ownerDocument.activeElement===f?l("div.mce-visual-caret",f).toggleClass("mce-visual-caret-hidden"):l("div.mce-visual-caret",f).addClass("mce-visual-caret-hidden")},500)};return{show:function(e,
v){p();if(v&&/^(TD|TH)$/i.test(v.nodeName))return null;if(n(v)){t=r.insertBlock("p",v,e);var y=c.collapse(v.getBoundingClientRect(),e);if("BODY"==f.tagName){var C=f.ownerDocument.documentElement;var B=f.scrollLeft||C.scrollLeft;C=f.scrollTop||C.scrollTop}else C=f.getBoundingClientRect(),B=f.scrollLeft-C.left,C=f.scrollTop-C.top;y.left+=B;y.right+=B;y.top+=C;y.bottom+=C;y.width=1;B=v.offsetWidth-v.clientWidth;0<B&&(e&&(B*=-1),y.left+=B,y.right+=B);l(t).css("top",y.top);x=l('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(y).appendTo(f);
e&&x.addClass("mce-visual-caret-before");g();e=v.ownerDocument.createRange();e.setStart(t,0);e.setEnd(t,0)}else t=r.insertInline(v,e),e=v.ownerDocument.createRange(),a(t.nextSibling)?(e.setStart(t,0),e.setEnd(t,0)):(e.setStart(t,1),e.setEnd(t,1));return e},hide:p,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},
destroy:function(){d.clearInterval(A)}}}});L("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(u,r,q){var l=function(b){var c=function(a){return u.map(a,function(f){f=q.clone(f);f.node=b;return f})};if(u.isArray(b))return u.reduce(b,function(a,f){return a.concat(l(f))},[]);if(r.isElement(b))return c(b.getClientRects());if(r.isText(b)){var d=b.ownerDocument.createRange();d.setStart(b,0);d.setEnd(b,b.data.length);return c(d.getClientRects())}};
return{getClientRects:l}});L("tinymce.core.caret.LineUtils","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.NodeType tinymce.core.dom.Dimensions tinymce.core.geom.ClientRect tinymce.core.caret.CaretUtils tinymce.core.caret.CaretCandidate".split(" "),function(u,r,q,l,b,c,d){var a=q.isContentEditableFalse,f=c.findNode,n=u.curry,A=function(p,g){return r.reduce(p,function(e,v){var y=Math.min(Math.abs(e.left-g),Math.abs(e.right-g));var C=Math.min(Math.abs(v.left-g),Math.abs(v.right-g));return g>=
v.left&&g<=v.right?v:g>=e.left&&g<=e.right?e:C==y&&a(v.node)||C<y?v:e})},x=function(p,g,e,v){for(;(v=f(v,p,d.isEditableCaretCandidate,g))&&!e(v););},t=function(p,g){var e=[],v=function(y,C){C=r.filter(l.getClientRects(C),function(B){return!y(B,g)});e=e.concat(C);return 0===C.length};e.push(g);x(-1,p,n(v,b.isAbove),g.node);x(1,p,n(v,b.isBelow),g.node);return e};return{findClosestClientRect:A,findLineNodeRects:t,closestCaret:function(p,g,e){var v=l.getClientRects(r.filter(r.toArray(p.getElementsByTagName("*")),
a));v=r.filter(v,function(y){return e>=y.top&&e<=y.bottom});return(v=A(v,g))&&(v=A(t(p,v),g))&&a(v.node)?{node:v.node,before:Math.abs(v.left-g)<Math.abs(v.right-g)}:null}}});L("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(u,r){return{isXYWithinRange:function(q,l,b){return b.collapsed?!1:u.foldl(b.getClientRects(),function(c,d){return c||r.containsXY(d,q,l)},!1)}}});L("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(u,
r){return{adaptable:function(q,l){var b=null,c=null;return{cancel:function(){null!==b&&(u(b),c=b=null)},throttle:function(){c=arguments;null===b&&(b=r(function(){q.apply(null,c);c=b=null},l))}}},first:function(q,l){var b=null;return{cancel:function(){null!==b&&(u(b),b=null)},throttle:function(){var c=arguments;null===b&&(b=r(function(){q.apply(null,c);c=b=null},l))}}},last:function(q,l){var b=null;return{cancel:function(){null!==b&&(u(b),b=null)},throttle:function(){var c=arguments;null!==b&&u(b);
b=r(function(){q.apply(null,c);c=b=null},l)}}}}});L("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(u,r,q,l){var b=q.isContentEditableTrue,c=q.isContentEditableFalse,d=function(f,n,A,x){return n._selectionOverrides.showCaret(f,A,x)},a=function(f,n){n=r.normalizeRange(1,f.getBody(),n);n=u.fromRangeStart(n);if(c(n.getNode()))return d(1,f,n.getNode(),!n.isAtEnd());if(c(n.getNode(!0)))return d(1,
f,n.getNode(!0),!1);n=f.dom.getParent(n.getNode(),l.or(c,b));return c(n)?d(1,f,n,!1):null};return{showCaret:d,selectNode:function(f,n){if(f.fire("BeforeObjectSelected",{target:n}).isDefaultPrevented())return null;f=n.ownerDocument.createRange();f.selectNode(n);return f},renderCaretAtRange:a,renderRangeCaret:function(f,n){return n&&n.collapsed?(f=a(f,n))?f:n:n}}});L("tinymce.core.focus.CefFocus",["ephox.katamari.api.Throttler","tinymce.core.keyboard.CefUtils"],function(u,r){return{setup:function(q){var l=
u.first(function(){if(!q.removed){var b=r.renderRangeCaret(q,q.selection.getRng());q.selection.setRng(b)}},0);q.on("focus",function(){l.throttle()});q.on("blur",function(){l.cancel()})}}});L("tinymce.core.util.VK",["tinymce.core.Env"],function(u){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(r){return r.shiftKey||r.ctrlKey||r.altKey||this.metaKeyPressed(r)},metaKeyPressed:function(r){return u.mac?r.metaKey:r.ctrlKey&&!r.altKey}}});
L("tinymce.core.SelectionOverrides","ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind tinymce.core.DragDropOverrides tinymce.core.EditorView tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.FakeCaret tinymce.core.caret.LineUtils tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.focus.CefFocus tinymce.core.keyboard.CefUtils tinymce.core.util.VK".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e,v,y,C,B){var h=e.isContentEditableTrue,k=e.isContentEditableFalse,w=x.isAfterContentEditableFalse,z=x.isBeforeContentEditableFalse;return function(m){var D=m.getBody(),F=new p(m.getBody(),function(N){return m.dom.isBlock(N)}),G="sel-"+m.dom.uniqueId(),I,H=function(N,O,U){if(m.fire("ShowCaret",{target:O,direction:N,before:U}).isDefaultPrevented())return null;m.selection.scrollIntoView(O,-1===N);return F.show(U,O)},E=function(N,O){O=x.normalizeRange(N,D,O);return-1==
N?A.fromRangeStart(O):A.fromRangeEnd(O)},J=function(){var N=function(O){for(var U=m.getBody();O&&O!=U;){if(h(O)||k(O))return O;O=O.parentNode}return null};m.on("mouseup",function(O){var U=m.selection.getRng();U.collapsed&&a.isXYInContentArea(m,O.clientX,O.clientY)&&(O=C.renderCaretAtRange(m,U))&&m.selection.setRng(O)});m.on("click",function(O){var U;if(U=N(O.target))k(U)&&(O.preventDefault(),m.focus()),h(U)&&m.dom.isChildOf(U,m.selection.getNode())&&W()});m.on("blur NewBlock",function(){W()});(function(O){var U=
!1;O.on("touchstart",function(){U=!1});O.on("touchmove",function(){U=!0});O.on("touchend",function(X){var S=N(X.target);k(S)&&!U&&(X.preventDefault(),V(C.selectNode(O,S)))})})(m);m.on("mousedown",function(O){var U;if(!1!==a.isXYInContentArea(m,O.clientX,O.clientY))if(U=N(O.target))k(U)?(O.preventDefault(),V(C.selectNode(m,U))):(W(),h(U)&&O.shiftKey||v.isXYWithinRange(O.clientX,O.clientY,m.selection.getRng())||m.selection.placeCaretAt(O.clientX,O.clientY));else if(W(),ba(),U=g.closestCaret(D,O.clientX,
O.clientY)){var X=U.node,S=m.dom.getParent(O.target,m.dom.isBlock);X=m.dom.getParent(X,m.dom.isBlock);var aa;if(aa=S)aa=m.dom.getParent(S,m.dom.isBlock),X=m.dom.getParent(X,m.dom.isBlock),aa=aa!==X;if(X=aa)X=new t(S),S.firstChild?(S=A.before(S.firstChild),X=(S=X.next(S))&&!z(S)&&!w(S)):X=!1;X||(O.preventDefault(),m.getBody().focus(),(O=H(1,U.node,U.before))&&m.selection.setRng(O))}});m.on("keypress",function(O){B.modifierPressed(O)||k(m.selection.getNode())&&O.preventDefault()});m.on("getSelectionRange",
function(O){var U=O.range;I&&(I.parentNode?(U=U.cloneRange(),U.selectNode(I),O.range=U):I=null)});m.on("setSelectionRange",function(O){var U;if(U=V(O.range,O.forward))O.range=U});m.on("AfterSetSelectionRange",function(O){O=O.range;Q(O)||ba();m.dom.hasClass(O.startContainer.parentNode,"mce-offscreen-selection")||W()});m.on("copy",function(O){var U=O.clipboardData;if(!O.isDefaultPrevented()&&O.clipboardData&&!f.ie){var X;if(X=(X=m.dom.get(G))?X.getElementsByTagName("*")[0]:X)O.preventDefault(),U.clearData(),
U.setData("text/html",X.outerHTML),U.setData("text/plain",X.outerText)}});d.init(m);y.setup(m)},M=function(){var N=m.contentStyles;N.push(F.getCss());N.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")},P=function(N){return n.isCaretContainer(N)||n.startsWithCaretContainer(N)||n.endsWithCaretContainer(N)},Q=function(N){return P(N.startContainer)||
P(N.endContainer)},V=function(N,O){var U=m.$,X=m.dom;if(!N)return null;if(N.collapsed){if(!Q(N))if(!1===O){var S=E(-1,N);if(k(S.getNode(!0)))return H(-1,S.getNode(!0),!1);if(k(S.getNode()))return H(-1,S.getNode(),!S.isAtEnd())}else{S=E(1,N);if(k(S.getNode()))return H(1,S.getNode(),!S.isAtEnd());if(k(S.getNode(!0)))return H(1,S.getNode(!0),!1)}return null}O=N.startContainer;var aa=N.startOffset;N=N.endOffset;3===O.nodeType&&0===aa&&k(O.parentNode)&&(O=O.parentNode,aa=X.nodeIndex(O),O=O.parentNode);
if(1!=O.nodeType)return null;N==aa+1&&(S=O.childNodes[aa]);if(!k(S))return null;var fa=aa=S.cloneNode(!0);N=m.fire("ObjectSelected",{target:S,targetClone:fa});if(N.isDefaultPrevented())return null;O=c.descendant(q.fromDom(m.getBody()),"#"+G).fold(function(){return U([])},function(ia){return U([ia.dom()])});fa=N.targetClone;0===O.length&&(O=U('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",G),O.appendTo(m.getBody()));N=m.dom.createRng();fa===aa&&f.ie?(O.empty().append('<p style="font-size: 0" data-mce-bogus="all">\u00a0</p>').append(fa),
N.setStartAfter(O[0].firstChild.firstChild),N.setEndAfter(fa)):(O.empty().append("\u00a0").append(fa).append("\u00a0"),N.setStart(O[0].firstChild,1),N.setEnd(O[0].lastChild,0));O.css({top:X.getPos(S,m.getBody()).y});O[0].focus();X=m.selection.getSel();X.removeAllRanges();X.addRange(N);u.each(b.descendants(q.fromDom(m.getBody()),"*[data-mce-selected]"),function(ia){l.remove(ia,"data-mce-selected")});S.setAttribute("data-mce-selected",1);I=S;ba();return N},W=function(){I&&(I.removeAttribute("data-mce-selected"),
c.descendant(q.fromDom(m.getBody()),"#"+G).each(r.remove),I=null)},ba=function(){F.hide()};f.ceFalse&&(J(),M());return{showCaret:H,showBlockCaretContainer:function(N){if(N.hasAttribute("data-mce-caret")){n.showCaretContainerBlock(N);var O=m.selection.getRng();O&&m.selection.setRng(O);m.selection.scrollIntoView(N[0],void 0)}},hideFakeCaret:ba,destroy:function(){F.destroy();I=null}}}});L("tinymce.core.undo.Diff",[],function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(u,r){var q=u.length+r.length+
2,l=Array(q),b=Array(q),c=function(a,f,n,A,x){a:{var t=f-a,p=A-n;if(0===t||0===p)var g=null;else{g=t-p;t=p+t;t=(0===t%2?t:t+1)/2;l[1+t]=a;b[1+t]=f+1;for(p=0;p<=t;++p){for(var e=-p;e<=p;e+=2){var v=e+t;l[v]=e===-p||e!=p&&l[v-1]<l[v+1]?l[v+1]:l[v-1]+1;for(var y=l[v],C=y-a+n-e;y<f&&C<A&&u[y]===r[C];)l[v]=++y,++C;if(0!=g%2&&g-p<=e&&e<=g+p&&b[v-g]<=l[v]){g=d(b[v-g],e+a-n,f,A);break a}}for(e=g-p;e<=g+p;e+=2){v=e+t-g;b[v]=e===g-p||e!=g+p&&b[v+1]<=b[v-1]?b[v+1]-1:b[v-1];y=b[v]-1;for(C=y-a+n-e;y>=a&&C>=n&&
u[y]===r[C];)b[v]=y--,C--;if(0===g%2&&-p<=e&&e<=p&&b[v]<=l[v+g]){g=d(b[v],e+a-n,f,A);break a}}}g=void 0}}if(null===g||g.start===f&&g.diag===f-A||g.end===a&&g.diag===a-n)for(g=a,t=n;g<f||t<A;)g<f&&t<A&&u[g]===r[t]?(x.push([0,u[g]]),++g,++t):f-a>A-n?(x.push([2,u[g]]),++g):(x.push([1,r[t]]),++t);else{c(a,g.start,n,g.start-g.diag,x);for(a=g.start;a<g.end;++a)x.push([0,u[a]]);c(g.end,f,g.end-g.diag,A,x)}},d=function(a,f,n,A){for(var x=a;x-f<A&&x<n&&u[x]===r[x-f];)++x;return{start:a,end:x,diag:f}};q=[];
c(0,u.length,0,r.length,q);return q}}});L("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(u,r,q,l){var b=function(d){return 1===d.nodeType?d.outerHTML:3===d.nodeType?r.encodeRaw(d.data,!1):8===d.nodeType?"\x3c!--"+d.data+"--\x3e":""},c=function(d,a){var f=0;l.each(d,function(n){if(n[0]===q.KEEP)f++;else if(n[0]===q.INSERT){var A=f,x=n[1];var t=u.createElement("div");n=u.createDocumentFragment();x&&(t.innerHTML=
x);for(;x=t.firstChild;)n.appendChild(x);a.hasChildNodes()&&A<a.childNodes.length?(A=a.childNodes[A],A.parentNode.insertBefore(n,A)):a.appendChild(n);f++}else n[0]===q.DELETE&&(A=f,a.hasChildNodes()&&A<a.childNodes.length&&(A=a.childNodes[A],A.parentNode.removeChild(A)))})};return{read:function(d){return l.filter(l.map(d.childNodes,b),function(a){return 0<a.length})},write:function(d,a){var f=l.map(a.childNodes,b);c(q.diff(f,d),a);return a}}});L("tinymce.core.undo.Levels",["ephox.katamari.api.Arr",
"tinymce.core.dom.TrimHtml","tinymce.core.undo.Fragments"],function(u,r,q){var l=function(d){return{type:"fragmented",fragments:d,content:"",bookmark:null,beforeBookmark:null}},b=function(d){return{type:"complete",fragments:null,content:d,bookmark:null,beforeBookmark:null}},c=function(d){return"fragmented"===d.type?d.fragments.join(""):d.content};return{createFragmentedLevel:l,createCompleteLevel:b,createFromEditor:function(d){var a=q.read(d.getBody());var f=u.bind(a,function(n){n=r.trimInternal(d.serializer,
n);return 0<n.length?[n]:[]});a=f.join("");return-1!==a.indexOf("</iframe>")?l(f):b(a)},applyToEditor:function(d,a,f){"fragmented"===a.type?q.write(a.fragments,d.getBody()):d.setContent(a.content,{format:"raw"});d.selection.moveToBookmark(f?a.beforeBookmark:a.bookmark)},isEq:function(d,a){return!!d&&!!a&&c(d)===c(a)}}});L("tinymce.core.UndoManager",["tinymce.core.dom.GetBookmark","tinymce.core.undo.Levels","tinymce.core.util.Tools"],function(u,r,q){return function(l){var b=this,c=0,d=[],a,f,n=0,A=
function(p){0===n&&(b.typing=p)},x=function(p){A(!1);b.add({},p)},t=function(){b.typing&&(A(!1),b.add())};l.on("init",function(){b.add()});l.on("BeforeExecCommand",function(p){p=p.command;"Undo"!==p&&"Redo"!==p&&"mceRepaint"!==p&&(t(),b.beforeChange())});l.on("ExecCommand",function(p){var g=p.command;"Undo"!==g&&"Redo"!==g&&"mceRepaint"!==g&&x(p)});l.on("ObjectResizeStart Cut",function(){b.beforeChange()});l.on("SaveContent ObjectResized blur",x);l.on("DragEnd",x);l.on("KeyUp",function(p){var g=p.keyCode;
if(!p.isDefaultPrevented()){if(33<=g&&36>=g||37<=g&&40>=g||45===g||p.ctrlKey)x(),l.nodeChanged();46!==g&&8!==g||l.nodeChanged();f&&b.typing&&!1===r.isEq(r.createFromEditor(l),d[0])&&(!1===l.isDirty()&&(l.setDirty(!0),l.fire("change",{level:d[0],lastLevel:null})),l.fire("TypingUndo"),f=!1,l.nodeChanged())}});l.on("KeyDown",function(p){var g=p.keyCode;if(!p.isDefaultPrevented())if(33<=g&&36>=g||37<=g&&40>=g||45===g)b.typing&&x(p);else{var e=p.ctrlKey&&!p.altKey||p.metaKey;!(16>g||20<g)||224===g||91===
g||b.typing||e||(b.beforeChange(),A(!0),b.add({},p),f=!0)}});l.on("MouseDown",function(p){b.typing&&x(p)});l.addShortcut("meta+z","","Undo");l.addShortcut("meta+y,meta+shift+z","","Redo");l.on("AddUndo Undo Redo ClearUndos",function(p){p.isDefaultPrevented()||l.nodeChanged()});return b={data:d,typing:!1,beforeChange:function(){0===n&&(a=u.getUndoBookmark(l.selection))},add:function(p,g){var e=l.settings;var v=r.createFromEditor(l);p=p||{};p=q.extend(p,v);if(0===n===!1||l.removed)return null;v=d[c];
if(l.fire("BeforeAddUndo",{level:p,lastLevel:v,originalEvent:g}).isDefaultPrevented()||v&&r.isEq(v,p))return null;d[c]&&(d[c].beforeBookmark=a);if(e.custom_undo_redo_levels&&d.length>e.custom_undo_redo_levels){for(e=0;e<d.length-1;e++)d[e]=d[e+1];d.length--;c=d.length}p.bookmark=u.getUndoBookmark(l.selection);c<d.length-1&&(d.length=c+1);d.push(p);c=d.length-1;g={level:p,lastLevel:v,originalEvent:g};l.fire("AddUndo",g);0<c&&(l.setDirty(!0),l.fire("change",g));return p},undo:function(){b.typing&&(b.add(),
b.typing=!1,A(!1));if(0<c){var p=d[--c];r.applyToEditor(l,p,!0);l.setDirty(!0);l.fire("undo",{level:p})}return p},redo:function(){if(c<d.length-1){var p=d[++c];r.applyToEditor(l,p,!1);l.setDirty(!0);l.fire("redo",{level:p})}return p},clear:function(){d=[];c=0;b.typing=!1;b.data=d;l.fire("ClearUndos")},hasUndo:function(){return 0<c||b.typing&&d[0]&&!r.isEq(r.createFromEditor(l),d[0])},hasRedo:function(){return c<d.length-1&&!b.typing},transact:function(p){t();b.beforeChange();b.ignore(p);return b.add()},
ignore:function(p){try{n++,p()}finally{n--}},extra:function(p,g){if(b.transact(p)){var e=d[c].bookmark;p=d[c-1];r.applyToEditor(l,p,!0);b.transact(g)&&(d[c-1].beforeBookmark=e)}}}}});L("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(u,r,q){var l={},b=u.filter,c=u.each;(function(d,a){l[d]||(l[d]=[]);l[d].push(a)})("pre",function(d){var a=d.selection.getRng(),f=function(x){return n(x.previousSibling)&&-1!==u.indexOf(A,x.previousSibling)};
var n=r.matchNodeNames("pre");if(!a.collapsed){var A=d.selection.getSelectedBlocks();c(b(b(A,n),f),function(x){var t=x.previousSibling;q(x).remove();q(t).append("<br><br>").append(x.childNodes)})}});return{postProcess:function(d,a){c(l[d],function(f){f(a)})}}});L("tinymce.core.selection.RangeWalk",["tinymce.core.util.Tools"],function(u){var r=u.each,q=function(l,b){var c=l.childNodes;b--;b>c.length-1?b=c.length-1:0>b&&(b=0);return c[b]||l};return{walk:function(l,b,c){var d=b.startContainer,a=b.startOffset,
f=b.endContainer,n=b.endOffset,A,x;b=l.select("td[data-mce-selected],th[data-mce-selected]");if(0<b.length)r(b,function(y){c([y])});else{var t=function(y){var C=y[0];3===C.nodeType&&C===d&&a>=C.nodeValue.length&&y.splice(0,1);C=y[y.length-1];0===n&&0<y.length&&C===f&&3===C.nodeType&&y.splice(y.length-1,1);return y},p=function(y,C,B){for(var h=[];y&&y!=B;y=y[C])h.push(y);return h};var g=function(y,C){do{if(y.parentNode===C)return y;y=y.parentNode}while(y)};b=function(y,C,B){var h=B?"nextSibling":"previousSibling";
A=y;for(x=A.parentNode;A&&A!=C;A=x)x=A.parentNode,v=p(A===y?A:A[h],h),v.length&&(B||v.reverse(),c(t(v)))};1===d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[a]);1===f.nodeType&&f.hasChildNodes()&&(f=q(f,n));if(d===f)return c(t([d]));var e=l.findCommonAncestor(d,f);for(A=d;A;A=A.parentNode){if(A===f)return b(d,e,!0);if(A===e)break}for(A=f;A;A=A.parentNode){if(A===d)return b(f,e);if(A===e)break}l=g(d,e)||d;g=g(f,e)||f;b(d,l,!0);var v=p(l===d?l:l.nextSibling,"nextSibling",g===f?g.nextSibling:g);v.length&&
c(t(v));b(f,g)}}}});L("tinymce.core.fmt.RemoveFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),function(u,r,q,l,b,c,d,a,f){var n=/^(src|href|style)$/,A=f.each,x=c.isEq,t=function(B,h,k){var w=h[k?"startContainer":"endContainer"];h=h[k?"startOffset":"endOffset"];if(r.isElement(w)){var z=
w.childNodes.length-1;!k&&h&&h--;w=w.childNodes[h>z?z:h]}r.isText(w)&&k&&h>=w.nodeValue.length&&(w=(new q(w,B.getBody())).next()||w);r.isText(w)&&!k&&0===h&&(w=(new q(w,B.getBody())).prev()||w);return w},p=function(B,h,k,w){B=B.create(k,w);h.parentNode.insertBefore(B,h);B.appendChild(h);return B},g=function(B,h,k){if(x(h,k.inline)||x(h,k.block))return!0;if(k.selector)return r.isElement(h)&&B.is(h,k.selector)},e=function(B,h,k,w){h=c.getNonWhiteSpaceSibling(h,k,w);return!h||"BR"===h.nodeName||B.isBlock(h)},
v=function(B,h,k){var w=h.parentNode,z,m=B.dom,D=B.settings.forced_root_block;k.block&&(D?w===m.getRoot()&&(k.list_block&&x(h,k.list_block)||A(f.grep(h.childNodes),function(F){c.isValid(B,D,F.nodeName.toLowerCase())?z?z.appendChild(F):(z=p(m,F,D),m.setAttribs(z,B.settings.forced_root_block_attrs)):z=0})):m.isBlock(h)&&!m.isBlock(w)&&(e(m,h,!1)||e(m,h.firstChild,!0,1)||h.insertBefore(m.create("br"),h.firstChild),e(m,h,!0)||e(m,h.lastChild,!1,1)||h.appendChild(m.create("br"))));k.selector&&k.inline&&
!x(k.inline,h)||m.remove(h,1)},y=function(B,h,k,w,z){var m,D,F=B.dom;if(!(g(F,w,h)||h.links&&"A"===w.tagName))return!1;if("all"!==h.remove){A(h.styles,function(H,E){H=c.normalizeStyleValue(F,c.replaceVars(H,k),E);"number"===typeof E&&(E=H,z=0);(h.remove_similar||!z||x(c.getStyle(F,z,E),H))&&F.setStyle(w,E,"");D=1});D&&""===F.getAttrib(w,"style")&&(w.removeAttribute("style"),w.removeAttribute("data-mce-style"));A(h.attributes,function(H,E){H=c.replaceVars(H,k);"number"===typeof E&&(E=H,z=0);if(!z||
x(F.getAttrib(z,E),H)){if("class"===E&&(H=F.getAttrib(w,E))){var J="";A(H.split(/\s+/),function(M){/mce\-\w+/.test(M)&&(J+=(J?" ":"")+M)});if(J){F.setAttrib(w,E,J);return}}"class"===E&&w.removeAttribute("className");n.test(E)&&w.removeAttribute("data-mce-"+E);w.removeAttribute(E)}});A(h.classes,function(H){H=c.replaceVars(H,k);z&&!F.hasClass(z,H)||F.removeClass(w,H)});var G=F.getAttribs(w);for(m=0;m<G.length;m++){var I=G[m].nodeName;if(0!==I.indexOf("_")&&0!==I.indexOf("data-"))return!1}}if("none"!==
h.remove)return v(B,w,h),!0},C=function(B,h,k,w,z){var m;A(c.getParents(B.dom,h.parentNode).reverse(),function(D){var F;m||"_start"===D.id||"_end"===D.id||(F=d.matchNode(B,D,k,w,z))&&!1!==F.split&&(m=D)});return m};return{removeFormat:y,remove:function(B,h,k,w,z){var m=B.formatter.get(h),D=m[0],F=!0,G=B.dom;var I=B.selection;var H=function(P){var Q=C(B,P,h,k,z),V=P,W,ba,N,O=B.dom;if(Q){var U=Q.parentNode;for(W=V.parentNode;W&&W!==U;W=W.parentNode){var X=O.clone(W,!1);for(N=0;N<m.length;N++)if(y(B,
m[N],k,X,X)){X=0;break}if(X){S&&X.appendChild(S);ba||(ba=X);var S=X}}D.mixed&&O.isBlock(Q)||(V=O.split(Q,V));S&&(P.parentNode.insertBefore(S,P),ba.appendChild(P))}return V},E=function(P){var Q;if(r.isElement(P)&&G.getContentEditable(P)){var V=F;F="true"===G.getContentEditable(P);var W=!0}var ba=f.grep(P.childNodes);if(F&&!W){var N=0;for(Q=m.length;N<Q&&!y(B,m[N],k,P,P);N++);}if(D.deep&&ba.length){N=0;for(Q=ba.length;N<Q;N++)E(ba[N]);W&&(F=V)}},J=function(P){var Q=G.get(P?"_start":"_end"),V=Q[P?"firstChild":
"lastChild"];u.isBookmarkNode(V)&&(V=V[P?"firstChild":"lastChild"]);r.isText(V)&&0===V.data.length&&(V=P?Q.previousSibling||Q.nextSibling:Q.nextSibling||Q.previousSibling);G.remove(Q,!0);return V},M=function(P){var Q=P.commonAncestorContainer;P=b.expandRng(B,P,m,!0);if(D.split){var V=t(B,P,!0);var W=t(B,P);if(V!==W){/^(TR|TH|TD)$/.test(V.nodeName)&&V.firstChild&&(V="TR"===V.nodeName?V.firstChild.firstChild||V:V.firstChild||V);Q&&/^T(HEAD|BODY|FOOT|R)$/.test(Q.nodeName)&&/^(TH|TD)$/.test(W.nodeName)&&
W.firstChild&&(W=W.firstChild||W);if(G.isChildOf(V,W)&&V!==W&&!G.isBlock(W)&&!/^(TH|TD)$/.test(V.nodeName)&&!/^(TH|TD)$/.test(W.nodeName)){V=p(G,V,"span",{id:"_start","data-mce-type":"bookmark"});H(V);V=J(!0);return}V=p(G,V,"span",{id:"_start","data-mce-type":"bookmark"});W=p(G,W,"span",{id:"_end","data-mce-type":"bookmark"});H(V);H(W);V=J(!0);W=J()}else V=W=H(V);P.startContainer=V.parentNode?V.parentNode:V;P.startOffset=G.nodeIndex(V);P.endContainer=W.parentNode?W.parentNode:W;P.endOffset=G.nodeIndex(W)+
1}a.walk(G,P,function(ba){A(ba,function(N){E(N);r.isElement(N)&&"underline"===B.dom.getStyle(N,"text-decoration")&&N.parentNode&&"underline"===c.getTextDecoration(G,N.parentNode)&&y(B,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,N)})})};if(w)w.nodeType?(I=G.createRng(),I.setStartBefore(w),I.setEndAfter(w),M(I)):M(w);else if("false"===G.getContentEditable(I.getNode()))for(w=I.getNode(),M=0,I=m.length;M<I&&(!m[M].ceFalseOverride||!y(B,m[M],k,w,w));M++);else I.isCollapsed()&&
D.inline&&!G.select("td[data-mce-selected],th[data-mce-selected]").length?l.removeCaretFormat(B,h,k,z):(w=I.getBookmark(),M(I.getRng(!0)),I.moveToBookmark(w),D.inline&&d.match(B,h,k,I.getStart())&&c.moveStart(G,I,I.getRng(!0)),B.nodeChanged())}}});L("tinymce.core.fmt.MergeFormats","ephox.katamari.api.Fun tinymce.core.dom.Bookmarks tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.fmt.RemoveFormat tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f){var n=f.each,A=function(C){return C&&1===C.nodeType&&!r.isBookmarkNode(C)&&!b.isCaretNode(C)&&!l.isBogus(C)},x=function(C,B){var h;for(h=C;h&&(3!==h.nodeType||0===h.nodeValue.length);h=h[B])if(1===h.nodeType&&!r.isBookmarkNode(h))return h;return C},t=function(C,B,h){var k=new q(C);if(B&&h&&(B=x(B,"previousSibling"),h=x(h,"nextSibling"),k.compare(B,h))){for(k=B.nextSibling;k&&k!==h;){var w=k;k=k.nextSibling;B.appendChild(w)}C.remove(h);f.each(f.grep(h.childNodes),function(z){B.appendChild(z)});
return B}return h},p=function(C,B,h){n(C.childNodes,function(k){A(k)&&(B(k)&&h(k),k.hasChildNodes()&&p(k,B,h))})},g=function(C,B){return u.curry(function(h,k){return!(!k||!c.getStyle(C,k,h))},B)},e=function(C,B,h){return u.curry(function(k,w,z){C.setStyle(z,k,w);""===z.getAttribute("style")&&z.removeAttribute("style");"SPAN"===z.nodeName&&0===C.getAttribs(z).length&&C.remove(z,!0)},B,h)},v=function(C,B){if(1===B.nodeType&&B.parentNode&&1===B.parentNode.nodeType){var h=c.getTextDecoration(C,B.parentNode);
C.getStyle(B,"color")&&h?C.setStyle(B,"text-decoration",h):C.getStyle(B,"text-decoration")===h&&C.setStyle(B,"text-decoration",null)}},y=function(C,B,h){B.clear_child_styles&&n(C.select(B.links?"*:not(a)":"*",h),function(k){A(k)&&n(B.styles,function(w,z){C.setStyle(k,z,"")})})};return{mergeWithChildren:function(C,B,h,k){n(B,function(w){n(C.dom.select(w.inline,k),function(z){A(z)&&a.removeFormat(C,w,h,z,w.exact?z:null)});y(C.dom,w,k)})},mergeUnderlineAndColor:function(C,B,h,k){if(B.styles.color||B.styles.textDecoration)f.walk(k,
u.curry(v,C),"childNodes"),v(C,k)},mergeBackgroundColorAndFontSize:function(C,B,h,k){B.styles&&B.styles.backgroundColor&&p(k,g(C,"fontSize"),e(C,"backgroundColor",c.replaceVars(B.styles.backgroundColor,h)))},mergeSubSup:function(C,B,h,k){if("sub"===B.inline||"sup"===B.inline)p(k,g(C,"fontSize"),e(C,"fontSize","")),C.remove(C.select("sup"===B.inline?"sub":"sup",k),!0)},mergeSiblings:function(C,B,h,k){k&&!1!==B.merge_siblings&&(k=t(C,c.getNonWhiteSpaceSibling(k),k),t(C,k,c.getNonWhiteSpaceSibling(k,
!0)))},mergeWithParents:function(C,B,h,k,w){d.matchNode(C,w.parentNode,h,k)&&a.removeFormat(C,B,k,w)||B.merge_with_parents&&C.dom.getParent(w.parentNode,function(z){if(d.matchNode(C,z,h,k))return a.removeFormat(C,B,k,w),!0})}}});L("tinymce.core.fmt.ApplyFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.Hooks tinymce.core.fmt.MatchFormat tinymce.core.fmt.MergeFormats tinymce.core.selection.RangeNormalizer tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A){var x=A.each,t=function(p,g,e,v){var y=p.formatter.get(g),C=y[0],B,h=!v&&p.selection.isCollapsed(),k=p.dom,w=p.selection,z=function(G,I){I=I||C;if(G){if(I.onformat)I.onformat(G,I,e,v);x(I.styles,function(E,J){k.setStyle(G,J,b.replaceVars(E,e))});if(I.styles){var H=k.getAttrib(G,"style");H&&G.setAttribute("data-mce-style",H)}x(I.attributes,function(E,J){k.setAttrib(G,J,b.replaceVars(E,e))});x(I.classes,function(E){E=b.replaceVars(E,e);k.hasClass(G,E)||k.addClass(G,E)})}},
m=function(G,I){var H=!1;if(!C.selector)return!1;x(G,function(E){if(!("collapsed"in E&&E.collapsed!==h)&&k.is(I,E.selector)&&!q.isCaretNode(I))return z(I,E),H=!0,!1});return H},D=function(G,I,H,E){var J=[],M=!0;var P=C.inline||C.block;var Q=G.create(P);z(Q);n.walk(G,I,function(V){var W,ba=function(N){var O=M;var U=N.nodeName.toLowerCase();var X=N.parentNode.nodeName.toLowerCase();if(1===N.nodeType&&G.getContentEditable(N)){O=M;M="true"===G.getContentEditable(N);var S=!0}if(b.isEq(U,"br"))W=0,C.block&&
G.remove(N);else if(C.wrapper&&d.matchNode(p,N,g,e))W=0;else if(M&&!S&&C.block&&!C.wrapper&&b.isTextBlock(p,U)&&b.isValid(p,X,P))N=G.rename(N,P),z(N),J.push(N),W=0;else{if(C.selector){var aa=m(y,N);if(!C.inline||aa){W=0;return}}!M||S||!b.isValid(p,P,U)||!b.isValid(p,X,P)||!E&&3===N.nodeType&&1===N.nodeValue.length&&65279===N.nodeValue.charCodeAt(0)||q.isCaretNode(N)||C.inline&&G.isBlock(N)?(W=0,x(A.grep(N.childNodes),ba),S&&(M=O),W=0):(W||(W=G.clone(Q,!1),N.parentNode.insertBefore(W,N),J.push(W)),
W.appendChild(N))}};x(V,ba)});!0===C.links&&x(J,function(V){var W=function(ba){"A"===ba.nodeName&&z(ba,C);x(A.grep(ba.childNodes),W)};W(V)});x(J,function(V){var W=function(O){var U=!1;x(O.childNodes,function(X){if(X&&1===X.nodeType&&!u.isBookmarkNode(X)&&!q.isCaretNode(X)&&!r.isBogus(X))return U=X,!1});return U},ba=function(O){var U;if((U=W(O))&&!u.isBookmarkNode(U)&&d.matchName(G,U,C)){var X=G.clone(U,!1);z(X);G.replace(X,O,!0);G.remove(U,1)}return X||O};var N=function(O){var U=0;x(O.childNodes,
function(X){b.isWhiteSpaceNode(X)||u.isBookmarkNode(X)||U++});return U}(V);if((1<J.length||!G.isBlock(V))&&0===N)G.remove(V,1);else if(C.inline||C.wrapper)C.exact||1!==N||(V=ba(V)),a.mergeWithChildren(p,y,e,V),a.mergeWithParents(p,C,g,e,V),a.mergeBackgroundColorAndFontSize(G,C,e,V),a.mergeSubSup(G,C,e,V),a.mergeSiblings(G,C,e,V)})};if("false"===k.getContentEditable(w.getNode()))for(v=w.getNode(),D=0,B=y.length;D<B;D++){if(y[D].ceFalseOverride&&k.is(v,y[D].selector)){z(v,y[D]);break}}else if(C){if(v)v.nodeType?
m(y,v)||(B=k.createRng(),B.setStartBefore(v),B.setEndAfter(v),D(k,l.expandRng(p,B,y),null,!0)):D(k,v,null,!0);else if(h&&C.inline&&!k.select("td[data-mce-selected],th[data-mce-selected]").length)q.applyCaretFormat(p,g,e);else{var F=p.selection.getNode();p.settings.forced_root_block||!y[0].defaultBlock||k.getParent(F,k.isBlock)||t(p,y[0].defaultBlock);p.selection.setRng(f.normalize(p.selection.getRng()));B=w.getBookmark();D(k,l.expandRng(p,w.getRng(!0),y),B);C.styles&&a.mergeUnderlineAndColor(k,C,
e,F);w.moveToBookmark(B);b.moveStart(k,w,w.getRng(!0));p.nodeChanged()}c.postProcess(g,p)}};return{applyFormat:t}});L("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(u,r,q,l){var b=l.each,c=function(a,f){var n={};a.set({});f.on("NodeChange",function(A){var x=r.getParents(f.dom,A.element),t={};x=l.grep(x,function(p){return 1===p.nodeType&&!p.getAttribute("data-mce-bogus")});b(a.get(),function(p,
g){b(x,function(e){if(f.formatter.matchNode(e,g,{},p.similar))return n[g]||(b(p,function(v){v(!0,{node:e,format:g,parents:x})}),n[g]=p),t[g]=p,!1;if(q.matchesUnInheritedFormatSelector(f,e,g))return!1})});b(n,function(p,g){t[g]||(delete n[g],b(p,function(e){e(!1,{node:A.element,format:g,parents:x})}))})})},d=function(a,f,n,A){var x=a.get();b(f.split(","),function(t){x[t]||(x[t]=[],x[t].similar=A);x[t].push(n)});a.set(x)};return{formatChanged:function(a,f,n,A,x){null===f.get()&&c(f,a);d(f,n,A,x)}}});
L("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],function(u){return{get:function(r){var q={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},
inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},
preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",
styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",
remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},
superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(l,b,c){u.each(c,function(d,a){r.setAttrib(l,a,d)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],
split:!1,expand:!1,deep:!0}]};u.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(l){q[l]={block:l,remove:"all"}});return q}}});L("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(u,r){return function(q){var l={},b=function(c,d){c&&("string"!==typeof c?r.each(c,function(a,f){b(f,a)}):(d=d.length?d:[d],r.each(d,function(a){"undefined"===typeof a.deep&&(a.deep=!a.selector);"undefined"===typeof a.split&&(a.split=!a.selector||
a.inline);"undefined"===typeof a.remove&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),l[c]=d))};b(u.get(q.dom));b(q.settings.formats);return{get:function(c){return c?l[c]:l},register:b,unregister:function(c){c&&l[c]&&delete l[c];return l}}}});L("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(u,r,q){var l=r.each,b=
u.DOM,c=function(f,n){var A=n&&n.schema||new q({}),x=function(v){g="string"===typeof v?{name:v,classes:[],attrs:{}}:v;v=b.create(g.name);var y=g;y.classes.length&&b.addClass(v,y.classes.join(" "));b.setAttribs(v,y.attrs);return v},t=function(v,y){v="string"!==typeof v?v.nodeName.toLowerCase():v;return(v=(v=A.getElementRule(v))&&v.parentsRequired)&&v.length?y&&-1!==r.inArray(v,y)?y:v[0]:!1},p=function(v,y,C){var B,h=0<y.length&&y[0],k=h&&h.name;if(B=t(v,k))if(k===B){var w=y[0];y=y.slice(1)}else w=
B;else if(h)w=y[0],y=y.slice(1);else if(!C)return v;if(w){var z=x(w);z.appendChild(v)}C&&(z||(z=b.create("div"),z.appendChild(v)),r.each(C,function(m){m=x(m);z.insertBefore(m,v)}));return p(z,y,w&&w.siblings)};if(f&&f.length){var g=f[0];n=x(g);var e=b.create("div");e.appendChild(p(n,f.slice(1),g.siblings));return e}return""},d=function(f){var n,A={classes:[],attrs:{}};f=A.selector=r.trim(f);"*"!==f&&(n=f.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(x,t,p,g,e){switch(t){case "#":A.attrs.id=
p;break;case ".":A.classes.push(p);break;case ":":-1!==r.inArray(["checked","disabled","enabled","read-only","required"],p)&&(A.attrs[p]=p)}"["===g&&(x=e.match(/([\w\-]+)(?:="([^"]+))?/))&&(A.attrs[x[1]]=x[2]);return""}));A.name=n||"div";return A},a=function(f){if(!f||"string"!==typeof f)return[];f=f.split(/\s*,\s*/)[0];f=f.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return r.map(f.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){n=r.map(n.split(/(?:~\+|~|\+)/),d);var A=n.pop();n.length&&(A.siblings=n);return A}).reverse()};
return{getCssText:function(f,n){var A="";var x=f.settings.preview_styles;if(!1===x)return"";"string"!==typeof x&&(x="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");if("string"===typeof n){n=f.formatter.get(n);if(!n)return;n=n[0]}if("preview"in n&&(x=n.preview,!1===x))return"";var t=n.block||n.inline||"span";var p=a(n.selector);p.length?(p[0].name||(p[0].name=t),t=n.selector,p=c(p,f)):p=c([t],f);var g=b.select(t,
p)[0]||p.firstChild;l(n.styles,function(v,y){(v=v.replace(/%(\w+)/g,""))&&b.setStyle(g,y,v)});l(n.attributes,function(v,y){(v=v.replace(/%(\w+)/g,""))&&b.setAttrib(g,y,v)});l(n.classes,function(v){v=v.replace(/%(\w+)/g,"");b.hasClass(g,v)||b.addClass(g,v)});f.fire("PreviewFormats");b.setStyles(p,{position:"absolute",left:-65535});f.getBody().appendChild(p);var e=b.getStyle(f.getBody(),"fontSize",!0);e=/px$/.test(e)?parseInt(e,10):0;l(x.split(" "),function(v){var y=b.getStyle(g,v,!0);if("background-color"===
v&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(y)&&(y=b.getStyle(f.getBody(),v,!0),"#ffffff"===b.toHex(y).toLowerCase()))return;if("color"!==v||"#000000"!==b.toHex(y).toLowerCase()){if("font-size"===v&&/em|%$/.test(y)){if(0===e)return;y=parseFloat(y,10)/(/%$/.test(y)?100:1);y=y*e+"px"}"border"===v&&y&&(A+="padding:0 2px;");A+=v+":"+y+";"}});f.fire("AfterPreviewFormats");b.remove(p);return A},parseSelector:a,selectorToHtml:function(f,n){return c(a(f),n)}}});L("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat",
"tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat"],function(u,r,q){return{toggle:function(l,b,c,d,a){b=b.get(c);!r.match(l,c,d,a)||"toggle"in b[0]&&!b[0].toggle?u.applyFormat(l,c,d,a):q.remove(l,c,d,a)}}});L("tinymce.core.keyboard.FormatShortcuts",[],function(){return{setup:function(u){u.addShortcut("meta+b","","Bold");u.addShortcut("meta+i","","Italic");u.addShortcut("meta+u","","Underline");for(var r=1;6>=r;r++)u.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);u.addShortcut("access+7",
"",["FormatBlock",!1,"p"]);u.addShortcut("access+8","",["FormatBlock",!1,"div"]);u.addShortcut("access+9","",["FormatBlock",!1,"address"])}}});L("tinymce.core.api.Formatter","ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.fmt.ApplyFormat tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatChanged tinymce.core.fmt.FormatRegistry tinymce.core.fmt.MatchFormat tinymce.core.fmt.Preview tinymce.core.fmt.RemoveFormat tinymce.core.fmt.ToggleFormat tinymce.core.keyboard.FormatShortcuts".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A){return function(x){var t=c(x),p=u(null);A.setup(x);l.setup(x);return{get:t.get,register:t.register,unregister:t.unregister,apply:r.curry(q.applyFormat,x),remove:r.curry(f.remove,x),toggle:r.curry(n.toggle,x,t),match:r.curry(d.match,x),matchAll:r.curry(d.matchAll,x),matchNode:r.curry(d.matchNode,x),canApply:r.curry(d.canApply,x),formatChanged:r.curry(b.formatChanged,x,p),getCssText:r.curry(a.getCssText,x)}}});L("ephox.katamari.api.Merger",["ephox.katamari.api.Type",
"global!Array","global!Error"],function(u,r,q){var l=function(c){return function(){for(var d=new r(arguments.length),a=0;a<d.length;a++)d[a]=arguments[a];if(0===d.length)throw new q("Can't merge zero objects");a={};for(var f=0;f<d.length;f++){var n=d[f],A;for(A in n)n.hasOwnProperty(A)&&(a[A]=c(a[A],n[A]))}return a}},b=l(function(c,d){return u.isObject(c)&&u.isObject(d)?b(c,d):d});l=l(function(c,d){return d});return{deepMerge:b,merge:l}});L("tinymce.core.api.Events",[],function(){return{firePreProcess:function(u,
r){return u.fire("PreProcess",r)},firePostProcess:function(u,r){return u.fire("PostProcess",r)}}});L("tinymce.core.dom.DomSerializerFilters",["ephox.katamari.api.Arr","tinymce.core.html.Entities"],function(u,r){return{register:function(q,l,b){q.addAttributeFilter("data-mce-tabindex",function(c,d){for(var a=c.length,f;a--;)f=c[a],f.attr("tabindex",f.attributes.map["data-mce-tabindex"]),f.attr(d,null)});q.addAttributeFilter("src,href,style",function(c,d){for(var a=c.length,f,n,A="data-mce-"+d,x=l.url_converter,
t=l.url_converter_scope;a--;)f=c[a],n=f.attributes.map[A],void 0!==n?(f.attr(d,0<n.length?n:null),f.attr(A,null)):(n=f.attributes.map[d],"style"===d?n=b.serializeStyle(b.parseStyle(n),f.name):x&&(n=x.call(t,n,d,f.name)),f.attr(d,0<n.length?n:null))});q.addAttributeFilter("class",function(c){for(var d=c.length,a,f;d--;)if(a=c[d],f=a.attr("class"))f=a.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),a.attr("class",0<f.length?f:null)});q.addAttributeFilter("data-mce-type",function(c,d,a){d=c.length;
for(var f;d--;)f=c[d],"bookmark"!==f.attributes.map["data-mce-type"]||a.cleanup||f.remove()});q.addNodeFilter("noscript",function(c){for(var d=c.length,a;d--;)if(a=c[d].firstChild)a.value=r.decode(a.value)});q.addNodeFilter("script,style",function(c,d){for(var a=c.length,f,n,A,x=function(t){return t.replace(/(\x3c!--\[CDATA\[|\]\]--\x3e)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((\x3c!--)?(\s*\/\/)?\s*<!\[CDATA\[|(\x3c!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*\x3c!--|\/\*\s*\x3c!--\s*\*\/)\s*[\r\n]*/gi,
"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\x3e)?|\s*\/\/\s*\]\]>(--\x3e)?|\/\/\s*(--\x3e)?|\]\]>|\/\*\s*--\x3e\s*\*\/|\s*--\x3e\s*)\s*$/g,"")};a--;)f=c[a],n=f.firstChild?f.firstChild.value:"","script"===d?((A=f.attr("type"))&&f.attr("type","mce-no/type"===A?null:A.replace(/^mce\-/,"")),"xhtml"===l.element_format&&0<n.length&&(f.firstChild.value="// <![CDATA[\n"+x(n)+"\n// ]]\x3e")):"xhtml"===l.element_format&&0<n.length&&(f.firstChild.value="\x3c!--\n"+x(n)+"\n--\x3e")});q.addNodeFilter("#comment",function(c){for(var d=
c.length,a;d--;)a=c[d],0===a.value.indexOf("[CDATA[")?(a.name="#cdata",a.type=4,a.value=a.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===a.value.indexOf("mce:protected ")&&(a.name="#text",a.type=3,a.raw=!0,a.value=unescape(a.value).substr(14))});q.addNodeFilter("xml:namespace,input",function(c,d){for(var a=c.length,f;a--;)f=c[a],7===f.type?f.remove():1===f.type&&("input"!==d||"type"in f.attributes.map||f.attr("type","text"))});q.addAttributeFilter("data-mce-type",function(c){u.each(c,function(d){"format-caret"===
d.attr("data-mce-type")&&(d.isEmpty(q.schema.getNonEmptyElements())?d.remove():d.unwrap())})});q.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(c,d){for(var a=c.length;a--;)c[a].attr(d,null)})},trimTrailingBr:function(q){var l;(q=q.lastChild)&&"br"===q.name&&(l=q.prev)&&"br"===l.name&&(q.remove(),l.remove())}}});L("tinymce.core.dom.DomSerializerPreProcess",["ephox.katamari.api.Merger","global!document","tinymce.core.api.Events",
"tinymce.core.util.Tools"],function(u,r,q,l){var b=function(c,d,a){var f=c.dom;d=d.cloneNode(!0);var n=r.implementation;if(n.createHTMLDocument){var A=n.createHTMLDocument("");l.each("BODY"===d.nodeName?d.childNodes:[d],function(t){A.body.appendChild(A.importNode(t,!0))});d="BODY"!==d.nodeName?A.body.firstChild:A.body;var x=f.doc;f.doc=A}q.firePreProcess(c,u.merge(a,{node:d}));x&&(f.doc=x);return d};return{process:function(c,d,a){return c&&c.hasEventListeners("PreProcess")&&!a.no_events?b(c,d,a):
d}}});L("tinymce.core.html.LegacyFilter",["ephox.katamari.api.Arr","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(u,r,q){var l=function(d,a){u.each(a,function(f){d.attr(f,null)})},b=function(d,a,f){d.addNodeFilter("font",function(n){u.each(n,function(A){var x=a.parse(A.attr("style")),t=A.attr("color"),p=A.attr("face"),g=A.attr("size");t&&(x.color=t);p&&(x["font-family"]=p);g&&(x["font-size"]=f[parseInt(A.attr("size"),10)-1]);A.name="span";A.attr("style",a.serialize(x));l(A,["color",
"face","size"])})})},c=function(d,a){d.addNodeFilter("strike",function(f){u.each(f,function(n){var A=a.parse(n.attr("style"));A["text-decoration"]="line-through";n.name="span";n.attr("style",a.serialize(A))})})};return{register:function(d,a){if(a.inline_styles){var f=r();a.convert_fonts_to_spans&&b(d,f,q.explode(a.font_size_legacy_values));c(d,f)}}}});L("tinymce.core.html.Node",[],function(){var u=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},q=
function(b,c,d){var a=d?"lastChild":"firstChild";d=d?"prev":"next";if(b[a])return b[a];if(b!==c){if(a=b[d])return a;for(b=b.parent;b&&b!==c;b=b.parent)if(a=b[d])return a}},l=function(b,c){this.name=b;this.type=c;1===c&&(this.attributes=[],this.attributes.map={})};l.prototype={replace:function(b){b.parent&&b.remove();this.insert(b,this);this.remove();return this},attr:function(b,c){var d,a;if("string"!==typeof b){for(a in b)this.attr(a,b[a]);return this}if(d=this.attributes){if(void 0!==c){if(null===
c){if(b in d.map)for(delete d.map[b],a=d.length;a--;)if(d[a].name===b){d.splice(a,1);break}return this}if(b in d.map)for(a=d.length;a--;){if(d[a].name===b){d[a].value=c;break}}else d.push({name:b,value:c});d.map[b]=c;return this}return d.map[b]}},clone:function(){var b=new l(this.name,this.type),c,d;if(d=this.attributes){var a=[];a.map={};var f=0;for(c=d.length;f<c;f++){var n=d[f];"id"!==n.name&&(a[a.length]={name:n.name,value:n.value},a.map[n.name]=n.value)}b.attributes=a}b.value=this.value;b.shortEnded=
this.shortEnded;return b},wrap:function(b){this.parent.insert(b,this);b.append(this);return this},unwrap:function(){var b;for(b=this.firstChild;b;){var c=b.next;this.insert(b,this,!0);b=c}this.remove()},remove:function(){var b=this.parent,c=this.next,d=this.prev;if(b){if(b.firstChild===this){if(b.firstChild=c)c.prev=null}else d.next=c;if(b.lastChild===this){if(b.lastChild=d)d.next=null}else c.prev=d;this.parent=this.next=this.prev=null}return this},append:function(b){var c;b.parent&&b.remove();(c=
this.lastChild)?(c.next=b,b.prev=c,this.lastChild=b):this.lastChild=this.firstChild=b;b.parent=this;return b},insert:function(b,c,d){b.parent&&b.remove();var a=c.parent||this;d?(c===a.firstChild?a.firstChild=b:c.prev.next=b,b.prev=c.prev,b.next=c,c.prev=b):(c===a.lastChild?a.lastChild=b:c.next.prev=b,b.next=c.next,b.prev=c,c.next=b);b.parent=a;return b},getAll:function(b){var c,d=[];for(c=this.firstChild;c;c=q(c,this))c.name===b&&d.push(c);return d},empty:function(){var b,c;if(this.firstChild){var d=
[];for(c=this.firstChild;c;c=q(c,this))d.push(c);for(b=d.length;b--;)c=d[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(b,c,d){var a=this.firstChild,f;c=c||{};if(a){do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(b[a.name])return!1;for(f=a.attributes.length;f--;){var n=a.attributes[f].name;if("name"===n||0===n.indexOf("data-mce-bookmark"))return!1}}if(8===a.type||3===a.type&&!u.test(a.value)||3===a.type&&
a.parent&&c[a.parent.name]&&u.test(a.value)||d&&d(a))return!1}while(a=q(a,this))}return!0},walk:function(b){return q(this,null,b)}};l.create=function(b,c){var d;b=new l(b,r[b]||1);if(c)for(d in c)b.attr(d,c[d]);return b};return l});L("tinymce.core.html.DomParser",["tinymce.core.html.LegacyFilter","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(u,r,q,l,b){var c=b.makeMap,d=b.each,a=b.explode,f=b.extend,n=function(x,t,p,g){(x.padd_empty_with_br||
t.insert)&&p[g.name]?g.empty().append(new r("br","1")).shortEnded=!0:g.empty().append(new r("#text","3")).value="\u00a0"},A=function(x,t,p,g){return g.isEmpty(t,p,function(e){return(e=x.getElementRule(e.name))&&e.paddEmpty})};return function(x,t){var p=this,g={},e=[],v={},y={};x=x||{};x.validate="validate"in x?x.validate:!0;x.root_name=x.root_name||"body";p.schema=t=t||new l;var C=function(B){var h,k,w,z;var m=c("tr,td,th,tbody,thead,tfoot,table");var D=t.getNonEmptyElements();var F=t.getWhiteSpaceElements();
var G=t.getTextBlockElements();var I=t.getSpecialElements();for(h=0;h<B.length;h++){var H=B[h];if(H.parent&&!H.fixed)if(G[H.name]&&"li"==H.parent.name){for(k=H.next;k;){if(G[k.name])k.name="li",k.fixed=!0,H.parent.insert(k,H.parent);else break;k=k.next}H.unwrap(H)}else{var E=[H];for(k=H.parent;k&&!t.isValidChild(k.name,H.name)&&!m[k.name];k=k.parent)E.push(k);if(k&&1<E.length){E.reverse();var J=w=p.filterNode(E[0].clone());for(z=0;z<E.length-1;z++){if(t.isValidChild(w.name,E[z].name)){var M=p.filterNode(E[z].clone());
w.append(M)}else M=w;for(w=E[z].firstChild;w&&w!=E[z+1];){var P=w.next;M.append(w);w=P}w=M}A(t,D,F,J)?k.insert(H,E[0],!0):(k.insert(J,E[0],!0),k.insert(H,J));k=E[0];(A(t,D,F,k)||k&&k.firstChild&&k.firstChild===k.lastChild&&"br"===k.firstChild.name)&&k.empty().remove()}else H.parent&&("li"===H.name?(k=H.prev,!k||"ul"!==k.name&&"ul"!==k.name?(k=H.next,!k||"ul"!==k.name&&"ul"!==k.name?H.wrap(p.filterNode(new r("ul",1))):k.insert(H,k.firstChild,!0)):k.append(H)):t.isValidChild(H.parent.name,"div")&&t.isValidChild("div",
H.name)?H.wrap(p.filterNode(new r("div",1))):I[H.name]?H.empty().remove():H.unwrap())}}};p.filterNode=function(B){var h,k;w in g&&((k=v[w])?k.push(B):v[w]=[B]);for(h=e.length;h--;){var w=e[h].name;w in B.attributes.map&&((k=y[w])?k.push(B):y[w]=[B])}return B};p.addNodeFilter=function(B,h){d(a(B),function(k){var w=g[k];w||(g[k]=w=[]);w.push(h)})};p.addAttributeFilter=function(B,h){d(a(B),function(k){var w;for(w=0;w<e.length;w++)if(e[w].name===k){e[w].callbacks.push(h);return}e.push({name:k,callbacks:[h]})})};
p.parse=function(B,h){var k,w,z,m=[],D;h=h||{};v={};y={};var F=f(c("script,style,head,html,body,title,meta,param"),t.getBlockElements());var G=t.getNonEmptyElements();var I=t.children;var H=x.validate;var E="forced_root_block"in h?h.forced_root_block:x.forced_root_block;var J=t.getWhiteSpaceElements();var M=/^[ \t\r\n]+/;var P=/[ \t\r\n]+$/;var Q=/[ \t\r\n]+/g;var V=/^[ \t\r\n]+$/;var W=function(){var S=U.firstChild,aa=function(ta){ta&&((S=ta.firstChild)&&3==S.type&&(S.value=S.value.replace(M,"")),
(S=ta.lastChild)&&3==S.type&&(S.value=S.value.replace(P,"")))};if(t.isValidChild(U.name,E.toLowerCase())){for(;S;){var fa=S.next;if(3==S.type||1==S.type&&"p"!==S.name&&!F[S.name]&&!S.attr("data-mce-type")){if(!ia){var ia=ba(E,1);ia.attr(x.forced_root_block_attrs);U.insert(ia,S)}ia.append(S)}else aa(ia),ia=null;S=fa}aa(ia)}};var ba=function(S,aa){aa=new r(S,aa);var fa;S in g&&((fa=v[S])?fa.push(aa):v[S]=[aa]);return aa},N=function(S){var aa=t.getBlockElements();for(S=S.prev;S&&3===S.type;){var fa=
S.value.replace(P,"");if(0<fa.length){S.value=fa;break}if(fa=S.next){if(3==fa.type&&fa.value.length){S=S.prev;continue}if(!aa[fa.name]&&"script"!=fa.name&&"style"!=fa.name){S=S.prev;continue}}fa=S.prev;S.remove();S=fa}};var O=new q({validate:H,allow_script_urls:x.allow_script_urls,allow_conditional_comments:x.allow_conditional_comments,self_closing_elements:function(S){var aa,fa={};for(aa in S)"li"!==aa&&"p"!=aa&&(fa[aa]=S[aa]);return fa}(t.getSelfClosingElements()),cdata:function(S){k.append(ba("#cdata",
4)).value=S},text:function(S,aa){D||(S=S.replace(Q," "),k.lastChild&&F[k.lastChild.name]&&(S=S.replace(M,"")));if(0!==S.length){var fa=ba("#text",3);fa.raw=!!aa;k.append(fa).value=S}},comment:function(S){k.append(ba("#comment",8)).value=S},pi:function(S,aa){k.append(ba(S,7)).value=aa;N(k)},doctype:function(S){k.append(ba("#doctype",10)).value=S;N(k)},start:function(S,aa,fa){var ia,ta;if(ia=H?t.getElementRule(S):{}){ia=ba(ia.outputName||S,1);ia.attributes=aa;ia.shortEnded=fa;k.append(ia);(ta=I[k.name])&&
I[ia.name]&&!ta[ia.name]&&m.push(ia);for(ta=e.length;ta--;){var pa=e[ta].name;pa in aa.map&&((X=y[pa])?X.push(ia):y[pa]=[ia])}F[S]&&N(ia);fa||(k=ia);!D&&J[S]&&(D=!0)}},end:function(S){var aa,fa;if(fa=H?t.getElementRule(S):{}){if(F[S]&&!D){if((aa=k.firstChild)&&3===aa.type){var ia=aa.value.replace(M,"");if(0<ia.length)aa.value=ia;else{var ta=aa.next;aa.remove();for(aa=ta;aa&&3===aa.type;)ia=aa.value,ta=aa.next,(0===ia.length||V.test(ia))&&aa.remove(),aa=ta}}if((aa=k.lastChild)&&3===aa.type)if(ia=aa.value.replace(P,
""),0<ia.length)aa.value=ia;else for(ta=aa.prev,aa.remove(),aa=ta;aa&&3===aa.type;)ia=aa.value,ta=aa.prev,(0===ia.length||V.test(ia))&&aa.remove(),aa=ta}D&&J[S]&&(D=!1);if(fa.removeEmpty&&A(t,G,J,k)&&!k.attributes.map.name&&!k.attributes.map.id)S=k.parent,F[k.name]?k.empty().remove():k.unwrap(),k=S;else{if(S=fa.paddEmpty)S=(S=k)&&S.firstChild&&S.firstChild===S.lastChild&&"#text"===S.firstChild.name&&"\u00a0"===S.firstChild.value||A(t,G,J,k);S&&n(x,h,F,k);k=k.parent}}}},t);var U=k=new r(h.context||
x.root_name,11);O.parse(B);H&&m.length&&(h.context?h.invalid=!0:C(m));E&&("body"==U.name||h.isRootContent)&&W();if(!h.invalid){for(z in v){var X=g[z];B=v[z];for(w=B.length;w--;)B[w].parent||B.splice(w,1);O=0;for(W=X.length;O<W;O++)X[O](B,z,h)}O=0;for(W=e.length;O<W;O++)if(X=e[O],X.name in y){B=y[X.name];for(w=B.length;w--;)B[w].parent||B.splice(w,1);w=0;for(z=X.callbacks.length;w<z;w++)X.callbacks[w](B,X.name,h)}}return U};x.remove_trailing_brs&&p.addNodeFilter("br",function(B,h,k){var w=B.length,
z=f({},t.getBlockElements()),m=t.getNonEmptyElements(),D,F=t.getNonEmptyElements();z.body=1;for(h=0;h<w;h++){var G=B[h];var I=G.parent;if(z[G.parent.name]&&G===I.lastChild){for(D=G.prev;D;){var H=D.name;if("span"!==H||"bookmark"!==D.attr("data-mce-type")){if("br"!==H)break;if("br"===H){G=null;break}}D=D.prev}G&&(G.remove(),A(t,m,F,I)&&(G=t.getElementRule(I.name))&&(G.removeEmpty?I.remove():G.paddEmpty&&n(x,k,z,I)))}else{for(D=G;I&&I.firstChild===D&&I.lastChild===D;){D=I;if(z[I.name])break;I=I.parent}D===
I&&!0!==x.padd_empty_with_br&&(I=new r("#text",3),I.value="\u00a0",G.replace(I))}}});p.addAttributeFilter("href",function(B){var h=B.length,k=function(m){return m.split(" ").filter(function(D){return 0<D.length}).concat(["noopener"]).sort().join(" ")},w=function(m){m=m?b.trim(m):"";return/\b(noopener)\b/g.test(m)?m:k(m)};if(!x.allow_unsafe_link_target)for(;h--;){var z=B[h];"a"===z.name&&"_blank"===z.attr("target")&&z.attr("rel",w(z.attr("rel")))}});x.allow_html_in_named_anchor||p.addAttributeFilter("id,name",
function(B){for(var h=B.length,k,w,z,m;h--;)if(m=B[h],"a"===m.name&&m.firstChild&&!m.attr("href")){z=m.parent;k=m.lastChild;do w=k.prev,z.insert(k,m),k=w;while(k)}});x.fix_list_elements&&p.addNodeFilter("ul,ol",function(B){for(var h=B.length,k,w;h--;)if(k=B[h],w=k.parent,"ul"===w.name||"ol"===w.name)k.prev&&"li"===k.prev.name?k.prev.append(k):(w=new r("li",1),w.attr("style","list-style-type: none"),k.wrap(w))});x.validate&&t.getValidClasses()&&p.addAttributeFilter("class",function(B){for(var h=B.length,
k,w,z,m,D,F=t.getValidClasses(),G,I;h--;){k=B[h];w=k.attr("class").split(" ");D="";for(z=0;z<w.length;z++)m=w[z],I=!1,(G=F["*"])&&G[m]&&(I=!0),G=F[k.name],!I&&G&&G[m]&&(I=!0),I&&(D&&(D+=" "),D+=m);D.length||(D=null);k.attr("class",D)}});u.register(this,x)}});L("tinymce.core.dom.DomSerializer","ephox.katamari.api.Fun ephox.katamari.api.Merger tinymce.core.api.Events tinymce.core.dom.DOMUtils tinymce.core.dom.DomSerializerFilters tinymce.core.dom.DomSerializerPreProcess tinymce.core.html.DomParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A){var x=function(t,p,g){-1===A.inArray(p,g)&&(t.addAttributeFilter(g,function(e,v){for(var y=e.length;y--;)e[y].attr(v,null)}),p.push(g))};return function(t,p){var g=["data-mce-selected"];var e=p&&p.dom?p.dom:l.DOM;var v=p&&p.schema?p.schema:new a(t);t.entity_encoding=t.entity_encoding||"named";t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0;var y=new d(t,v);b.register(y,t,e);return{schema:v,addNodeFilter:y.addNodeFilter,addAttributeFilter:y.addAttributeFilter,
serialize:function(C,B){B=r.merge({format:"html"},B?B:{});C=c.process(p,C,B);C=n.trim(B.getInner?C.innerHTML:e.getOuterHTML(C));C=B.selection?C:A.trim(C);var h=B.selection?r.merge({forced_root_block:!1},B):B;C=y.parse(C,h);b.trimTrailingBr(C);"tree"===B.format?B=C:(C=(new f(t,v)).serialize(C),B=!B.no_events&&p?q.firePostProcess(p,r.merge(B,{content:C})).content:C);return B},addRules:function(C){v.addValidElements(C)},setRules:function(C){v.setValidElements(C)},addTempAttr:u.curry(x,y,g),getTempAttrs:function(){return g}}}});
L("tinymce.core.api.dom.Serializer",["tinymce.core.dom.DomSerializer"],function(u){return function(r,q){r=new u(r,q);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs}}});L("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],
function(u,r,q,l){var b=function(a){return q.descendant(r.fromDom(a.getBody()),"*[data-mce-caret]").fold(u.constant(null),function(f){return f.dom()})},c=function(a,f){f.hasAttribute("data-mce-caret")&&(l.showCaretContainerBlock(f),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(f))},d=function(a,f){var n=b(a);n&&("compositionstart"===f.type?(f.preventDefault(),f.stopPropagation(),c(n)):l.hasContent(n)&&c(a,n))};return{setup:function(a){a.on("keyup compositionstart",u.curry(d,
a))}}});L("tinymce.core.api.dom.BookmarkManager",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks"],function(u,r){var q=function(l){return{getBookmark:u.curry(r.getBookmark,l),moveToBookmark:u.curry(r.moveToBookmark,l)}};q.isBookmarkNode=r.isBookmarkNode;return q});L("tinymce.core.dom.ControlSelection","ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors global!document tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.Env tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),
function(u,r,q,l,b,c,d,a,f,n){var A=b.isContentEditableFalse,x=b.isContentEditableTrue;return function(t,p){var g=p.dom,e=f.each,v,y,C,B,h,k,w,z,m,D,F,G,I,H,E=p.getDoc(),J=Math.abs,M=Math.round,P=p.getBody(),Q,V;var W={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};p.contentStyles.push(".mce-content-body div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: "+(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resizehandle:hover {background: #000}.mce-content-body img[data-mce-selected],.mce-content-body hr[data-mce-selected] {outline: 1px solid black;resize: none}.mce-content-body .mce-clonedresizable {position: absolute;"+
(d.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: "+(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var ba=function(ha){return ha&&("IMG"===ha.nodeName||p.dom.is(ha,"figure.image"))},N=function(ha){var ea=
ha.target,na=p.selection.getRng();!ba(ha.target)||c.isXYWithinRange(ha.clientX,ha.clientY,na)||ha.isDefaultPrevented()||(ha.preventDefault(),p.selection.select(ea))},O=function(ha){return p.dom.is(ha,"figure.image")?ha.querySelector("img"):ha},U=function(ha){var ea=p.settings.object_resizing;if(!1===ea||d.iOS)return!1;"string"!=typeof ea&&(ea="table,img,figure.image,div");return"false"===ha.getAttribute("data-mce-resize")||ha==p.getBody()?!1:q.is(r.fromDom(ha),ea)},X=function(ha){var ea=ha.screenX-
h;var na=ha.screenY-k;I=ea*B[2]+m;H=na*B[3]+D;I=5>I?5:I;H=5>H?5:H;if(ba(v)&&!1!==p.settings.resize_img_proportional?!n.modifierPressed(ha):n.modifierPressed(ha)||ba(v)&&0!==B[2]*B[3])J(ea)>J(na)?(H=M(I*F),I=M(H/F)):(I=M(H/F),H=M(I*F));g.setStyles(O(y),{width:I,height:H});ha=B.startPos.x+ea;var ua=B.startPos.y+na;ha=0<ha?ha:0;ua=0<ua?ua:0;g.setStyles(C,{left:ha,top:ua,display:"block"});C.innerHTML=I+" &times; "+H;0>B[2]&&y.clientWidth<=I&&g.setStyle(y,"left",w+(m-I));0>B[3]&&y.clientHeight<=H&&g.setStyle(y,
"top",z+(D-H));ea=P.scrollWidth-Q;na=P.scrollHeight-V;0!==ea+na&&g.setStyles(C,{left:ha-ea,top:ua-na});G||(p.fire("ObjectResizeStart",{target:v,width:m,height:D}),G=!0)},S=function(){G=!1;var ha=function(ea,na){na&&(v.style[ea]||!p.schema.isValid(v.nodeName.toLowerCase(),ea)?g.setStyle(O(v),ea,na):g.setAttrib(O(v),ea,na))};ha("width",I);ha("height",H);g.unbind(E,"mousemove",X);g.unbind(E,"mouseup",S);l!=E&&(g.unbind(l,"mousemove",X),g.unbind(l,"mouseup",S));g.remove(y);g.remove(C);aa(v);p.fire("ObjectResized",
{target:v,width:I,height:H});g.setAttrib(v,"style",g.getAttrib(v,"style"));p.nodeChanged()},aa=function(ha){fa();pa();var ea=g.getPos(ha,P);w=ea.x;z=ea.y;ea=ha.getBoundingClientRect();var na=ea.width||ea.right-ea.left;var ua=ea.height||ea.bottom-ea.top;v!=ha&&(v=ha,I=H=0);ea=p.fire("ObjectSelected",{target:ha});U(ha)&&!ea.isDefaultPrevented()?e(W,function(va,Fa){var Ba;(Ba=g.get("mceResizeHandle"+Fa))&&g.remove(Ba);Ba=g.add(P,"div",{id:"mceResizeHandle"+Fa,"data-mce-bogus":"all","class":"mce-resizehandle",
unselectable:!0,style:"cursor:"+Fa+"-resize; margin:0; padding:0"});d.ie&&(Ba.contentEditable=!1);g.bind(Ba,"mousedown",function(za){za.stopImmediatePropagation();za.preventDefault();h=za.screenX;k=za.screenY;m=O(v).clientWidth;D=O(v).clientHeight;F=D/m;B=va;va.startPos={x:na*va[0]+w,y:ua*va[1]+z};Q=P.scrollWidth;V=P.scrollHeight;y=v.cloneNode(!0);g.addClass(y,"mce-clonedresizable");g.setAttrib(y,"data-mce-bogus","all");y.contentEditable=!1;y.unSelectabe=!0;g.setStyles(y,{left:w,top:z,margin:0});
y.removeAttribute("data-mce-selected");P.appendChild(y);g.bind(E,"mousemove",X);g.bind(E,"mouseup",S);l!=E&&(g.bind(l,"mousemove",X),g.bind(l,"mouseup",S));C=g.add(P,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+D)});va.elm=Ba;g.setStyles(Ba,{left:na*va[0]+w-Ba.offsetWidth/2,top:ua*va[1]+z-Ba.offsetHeight/2})}):fa();v.setAttribute("data-mce-selected","1")},fa=function(){var ha,ea;pa();v&&v.removeAttribute("data-mce-selected");for(ha in W)if(ea=g.get("mceResizeHandle"+ha))g.unbind(ea),
g.remove(ea)},ia=function(ha){var ea=function(ua,va){if(ua){do if(ua===va)return!0;while(ua=ua.parentNode)}};if(!G&&!p.removed){e(g.select("img[data-mce-selected],hr[data-mce-selected]"),function(ua){ua.removeAttribute("data-mce-selected")});var na="mousedown"==ha.type?ha.target:t.getNode();na=g.$(na).closest("table,img,figure.image,hr")[0];if(ea(na,P)&&(ya(),ha=t.getStart(!0),ea(ha,na)&&ea(t.getEnd(!0),na))){aa(na);return}fa()}},ta=function(ha){var ea;a:{for(ea=p.getBody();ha&&ha!=ea;){if(x(ha)||
A(ha)){ea=ha;break a}ha=ha.parentNode}ea=null}return A(ea)},pa=function(){for(var ha in W){var ea=W[ha];ea.elm&&(g.unbind(ea.elm),delete ea.elm)}},ya=function(){try{p.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ha){}};p.on("init",function(){ya();d.ie&&11<=d.ie&&(p.on("mousedown click",function(ea){var na=ea.target,ua=na.nodeName;G||!/^(TABLE|IMG|HR)$/.test(ua)||ta(na)||(2!==ea.button&&p.selection.select(na,"TABLE"==ua),"mousedown"==ea.type&&p.nodeChanged())}),p.dom.bind(P,"mscontrolselect",
function(ea){var na=function(ua){a.setEditorTimeout(p,function(){p.selection.select(ua)})};ta(ea.target)?(ea.preventDefault(),na(ea.target)):/^(TABLE|IMG|HR)$/.test(ea.target.nodeName)&&(ea.preventDefault(),"IMG"==ea.target.tagName&&na(ea.target))}));var ha=a.throttle(function(ea){p.composing||ia(ea)});p.on("nodechange ResizeEditor ResizeWindow drop",ha);p.on("keyup compositionend",function(ea){v&&"TABLE"==v.nodeName&&ha(ea)});p.on("hide blur",fa);p.on("contextmenu",N)});p.on("remove",pa);return{isResizable:U,
showResizeRect:aa,hideResizeRect:fa,updateResizeRect:ia,destroy:function(){v=y=null}}}});L("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(u){var r=function(q){for(var l=0,b=0;q&&q.nodeType;)l+=q.offsetLeft||0,b+=q.offsetTop||0,q=q.offsetParent;return{x:l,y:b}};return{scrollIntoView:function(q,l,b){var c=q.dom,d=c.getRoot();var a=0;var f={elm:l,alignToTop:b};q.fire("scrollIntoView",f);if(!f.isDefaultPrevented()&&u.isElement(l)){!1===b&&(a=l.offsetHeight);if("BODY"!==d.nodeName&&
(b=q.selection.getScrollContainer())){l=r(l).y-r(b).y+a;a=b.clientHeight;c=b.scrollTop;if(l<c||l+25>c+a)b.scrollTop=l<c?l:l-a+25;return}b=c.getViewPort(q.getWin());l=c.getPos(l).y+a;c=b.y;a=b.h;(l<b.y||l+25>c+a)&&q.getWin().scrollTo(0,l<c?l:l-a+25)}}}});L("tinymce.core.selection.CaretRangeFromPoint",["tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(u,r){var q=function(c){return u.isContentEditableTrue(c)||u.isContentEditableFalse(c)},l=function(c,d,a){for(;c&&c!==d;){if(a(c))return c;
c=c.parentNode}return null},b=function(c,d,a){var f=a.elementFromPoint(c,d);var n=a.body.createTextRange();f&&"HTML"!==f.tagName||(f=a.body);n.moveToElementText(f);a=r.toArray(n.getClientRects());a=a.sort(function(A,x){A=Math.abs(Math.max(A.top-d,A.bottom-d));x=Math.abs(Math.max(x.top-d,x.bottom-d));return A-x});if(0<a.length){d=(a[0].bottom+a[0].top)/2;try{return n.moveToPoint(c,d),n.collapse(!0),n}catch(A){}}return null};return{fromPoint:function(c,d,a){if(a.caretPositionFromPoint){if(c=a.caretPositionFromPoint(c,
d)){var f=a.createRange();f.setStart(c.offsetNode,c.offset);f.collapse(!0)}}else if(a.caretRangeFromPoint)f=a.caretRangeFromPoint(c,d);else if(a.body.createTextRange){f=a.body.createTextRange();try{f.moveToPoint(c,d),f.collapse(!0)}catch(n){f=b(c,d,a)}a=a.body;c=f&&f.parentElement?f.parentElement():null;return u.isContentEditableFalse(l(c,a,q))?null:f}return f}}});L("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(u){return{processRanges:function(r,q){return u.map(q,
function(l){var b=r.fire("GetSelectionRange",{range:l});return b.range!==l?b.range:l})}}});L("ephox.sugar.api.dom.Replication","ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(u,r,q,l,b,c){var d=function(f){return r.fromDom(f.dom().cloneNode(!0))},a=function(f,n){n=r.fromTag(n);f=u.clone(f);u.setAll(n,f);return n};return{shallow:function(f){return r.fromDom(f.dom().cloneNode(!1))},
shallowAs:a,deep:d,copy:function(f,n){n=a(f,n);f=c.children(d(f));l.append(n,f);return n},mutate:function(f,n){n=a(f,n);q.before(f,n);var A=c.children(f);l.append(n,A);b.remove(f);return n}}});L("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(u,r,q){return{fromElements:function(l,b){var c=(b||q).createDocumentFragment();u.each(l,function(d){c.appendChild(d.dom())});return r.fromDom(c)}}});L("tinymce.core.selection.SelectionUtils",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse tinymce.core.dom.NodeType".split(" "),function(u,r,q,l,b,c,d,a,f){var n=function(p){var g=p.startContainer;p=p.startOffset;return f.isText(g)?0===p?q.some(c.fromDom(g)):q.none():q.from(g.childNodes[p]).map(c.fromDom)},A=function(p){var g=p.endContainer;p=p.endOffset;return f.isText(g)?
p===g.data.length?q.some(c.fromDom(g)):q.none():q.from(g.childNodes[p-1]).map(c.fromDom)},x=function(p){return a.firstChild(p).fold(r.constant([p]),function(g){return[p].concat(x(g))})},t=function(p){return a.lastChild(p).fold(r.constant([p]),function(g){return"br"===d.name(g)?a.prevSibling(g).map(function(e){return[p].concat(t(e))}).getOr([]):[p].concat(t(g))})};return{hasAllContentsSelected:function(p,g){return l.liftN([n(g),A(g)],function(e,v){e=u.find(x(p),r.curry(b.eq,e));v=u.find(t(p),r.curry(b.eq,
v));return e.isSome()&&v.isSome()}).getOr(!1)}}});L("tinymce.core.selection.SimpleTableModel","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter".split(" "),function(u,r,q,l,b,c,d,a,f,n){var A=q.immutable("element","width","rows"),x=q.immutable("element","cells"),
t=q.immutable("x","y"),p=function(B,h){B=parseInt(f.get(B,h),10);return isNaN(B)?1:B},g=function(B,h,k){B=B.rows();return!!(B[k]?B[k].cells():[])[h]},e=function(B){return u.foldl(B,function(h,k){return k.cells().length>h?k.cells().length:h},0)},v=function(B,h){B=B.rows();for(var k=0;k<B.length;k++)for(var w=B[k].cells(),z=0;z<w.length;z++)if(l.eq(w[z],h))return r.some(t(z,k));return r.none()},y=function(B,h,k,w,z){var m=[];for(B=B.rows();k<=z;k++){var D=B[k].cells();D=h<w?D.slice(h,w+1):D.slice(w,
h+1);m.push(x(B[k].element(),D))}return m},C=function(B){return u.map(B.rows(),function(h){var k=u.map(h.cells(),function(w){w=d.deep(w);f.remove(w,"colspan");f.remove(w,"rowspan");return w});h=d.shallow(h.element());c.append(h,k);return h})};return{fromDom:function(B){var h=A(d.shallow(B),0,[]);u.each(n.descendants(B,"tr"),function(k,w){u.each(n.descendants(k,"td,th"),function(z,m){for(;g(h,m,w);)m++;for(var D=p(z,"rowspan"),F=p(z,"colspan"),G=h.rows(),I=w;I<w+D;I++){G[I]||(G[I]=x(d.deep(k),[]));
for(var H=m;H<m+F;H++)G[I].cells()[H]=I==w&&H==m?z:d.shallow(z)}})});return A(h.element(),e(h.rows()),h.rows())},toDom:function(B){var h=C(B);B=d.shallow(B.element());var k=a.fromTag("tbody");c.append(k,h);b.append(B,k);return B},subsection:function(B,h,k){return v(B,h).bind(function(w){return v(B,k).map(function(z){var m=w.x(),D=w.y(),F=z.x();z=z.y();m=D<z?y(B,m,D,F,z):y(B,m,z,F,D);return A(B.element(),e(m),m)})})}}});L("tinymce.core.selection.FragmentReader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Fragment ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.selection.SelectionUtils tinymce.core.selection.SimpleTableModel tinymce.core.selection.TableCellSelection".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g){var e=function(w){return u.find(w,function(z){return"ul"===a.name(z)||"ol"===a.name(z)})},v=function(w,z){return u.find(w,function(m){return"li"===a.name(m)&&t.hasAllContentsSelected(m,z)}).fold(r.constant([]),function(m){return e(w).map(function(D){return[c.fromTag("li"),c.fromTag(a.name(D))]}).getOr([])})},y=function(w,z){w=u.foldl(z,function(m,D){l.append(D,m);return D},w);return 0<z.length?d.fromElements([w]):w},C=function(w){return A.isListItem(w)?n.parent(w).filter(A.isList).fold(r.constant([]),
function(z){return[w,z]}):A.isList(w)?[w]:[]},B=function(w,z){var m=c.fromDom(z.commonAncestorContainer),D=x.parentsAndSelf(m,w);w=u.filter(D,function(F){return A.isInline(F)||A.isHeading(F)});z=v(D,z);m=w.concat(z.length?z:C(m));return u.map(m,b.shallow)},h=function(){return d.fromElements([])},k=function(w,z){return f.ancestor(z[0],"table",r.curry(q.eq,w)).bind(function(m){var D=z[0],F=z[z.length-1];m=p.fromDom(m);return p.subsection(m,D,F).map(function(G){return d.fromElements([p.toDom(G)])})}).getOrThunk(h)};
return{read:function(w,z){var m=g.getCellsFromElementOrRanges(z,w);0<m.length?w=k(w,m):0<z.length&&z[0].collapsed?w=h():(z=z[0],w=y(c.fromDom(z.cloneContents()),B(w,z)));return w}}});L("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(u,r,q,l,b){return{getContent:function(c,d){var a=c.selection.getRng(),f=c.dom.create("body"),
n=c.selection.getSel(),A=r.processRanges(c,l.getRanges(n));d=d||{};d.get=!0;d.format=d.format||"html";d.selection=!0;d=c.fire("BeforeGetContent",d);if(d.isDefaultPrevented())return c.fire("GetContent",d),d.content;if("text"===d.format)return c.selection.isCollapsed()?"":b.trim(a.text||(n.toString?n.toString():""));a.cloneContents?(a=d.contextual?q.read(u.fromDom(c.getBody()),A).dom():a.cloneContents())&&f.appendChild(a):void 0!==a.item||void 0!==a.htmlText?(f.innerHTML="<br>"+(a.item?a.item(0).outerHTML:
a.htmlText),f.removeChild(f.firstChild)):f.innerHTML=a.toString();d.getInner=!0;f=c.selection.serializer.serialize(f,d);if("tree"===d.format)return f;d.content=c.selection.isCollapsed()?"":f;c.fire("GetContent",d);return d.content}}});L("tinymce.core.selection.SetSelectionContent",[],function(){return{setContent:function(u,r,q){var l=u.selection.getRng(),b=u.getDoc();q=q||{format:"html"};q.set=!0;q.selection=!0;q.content=r;if(!q.no_events&&(q=u.fire("BeforeSetContent",q),q.isDefaultPrevented())){u.fire("SetContent",
q);return}r=q.content;if(l.insertNode){r+='<span id="__caret">_</span>';if(l.startContainer==b&&l.endContainer==b)b.body.innerHTML=r;else if(l.deleteContents(),0===b.body.childNodes.length)b.body.innerHTML=r;else if(l.createContextualFragment)l.insertNode(l.createContextualFragment(r));else{var c=b.createDocumentFragment();var d=b.createElement("div");c.appendChild(d);d.outerHTML=r;l.insertNode(c)}r=u.dom.get("__caret");l=b.createRange();l.setStartBefore(r);l.setEndBefore(r);u.selection.setRng(l);
u.dom.remove("__caret");try{u.selection.setRng(l)}catch(a){}}else l.item&&(b.execCommand("Delete",!1,null),l=u.getRng()),/^\s+/.test(r)?(l.pasteHTML('<span id="__mce_tmp">_</span>'+r),u.dom.remove("__mce_tmp")):l.pasteHTML(r);q.no_events||u.fire("SetContent",q)}}});L("tinymce.core.dom.Selection","ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.api.dom.BookmarkManager tinymce.core.caret.CaretPosition tinymce.core.dom.ControlSelection tinymce.core.dom.ScrollIntoView tinymce.core.dom.TreeWalker tinymce.core.focus.EditorFocus tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.EventProcessRanges tinymce.core.selection.GetSelectionContent tinymce.core.selection.MultiRange tinymce.core.selection.NormalizeRange tinymce.core.selection.SelectionBookmark tinymce.core.selection.SetSelectionContent tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e,v){var y=v.each,C=v.trim,B=function(h){return!(!h||!h.ownerDocument)&&u.contains(r.fromDom(h.ownerDocument),r.fromDom(h))};v=function(h,k,w,z){this.dom=h;this.win=k;this.serializer=w;this.editor=z;this.bookmarkManager=new l(this);this.controlSelection=new c(this,z)};v.prototype={setCursorLocation:function(h,k){var w=this.dom.createRng();h?(w.setStart(h,k),w.setEnd(h,k),this.setRng(w),this.collapse(!1)):(this._moveEndPoint(w,this.editor.getBody(),!0),this.setRng(w))},
getContent:function(h){return x.getContent(this.editor,h)},setContent:function(h,k){e.setContent(this.editor,h,k)},getStart:function(h){var k=this.getRng();var w=k.startContainer;1==w.nodeType&&w.hasChildNodes()&&(h&&k.collapsed||(w=w.childNodes[Math.min(w.childNodes.length-1,k.startOffset)]));return w&&3==w.nodeType?w.parentNode:w},getEnd:function(h){var k=this.getRng();var w=k.endContainer;var z=k.endOffset;1==w.nodeType&&w.hasChildNodes()&&(h&&k.collapsed||(w=w.childNodes[0<z?z-1:z]));return w&&
3==w.nodeType?w.parentNode:w},getBookmark:function(h,k){return this.bookmarkManager.getBookmark(h,k)},moveToBookmark:function(h){return this.bookmarkManager.moveToBookmark(h)},select:function(h,k){var w=this.dom,z=w.createRng();h&&(w=w.nodeIndex(h),z.setStart(h.parentNode,w),z.setEnd(h.parentNode,w+1),k&&(this._moveEndPoint(z,h,!0),this._moveEndPoint(z,h)),this.setRng(z));return h},isCollapsed:function(){var h=this.getRng(),k=this.getSel();return!h||h.item?!1:h.compareEndPoints?0===h.compareEndPoints("StartToEnd",
h):!k||h.collapsed},collapse:function(h){var k=this.getRng();k.collapse(!!h);this.setRng(k)},getSel:function(){var h=this.win;return h.getSelection?h.getSelection():h.document.selection},getRng:function(h){var k;h=function(D,F,G){try{return F.compareBoundaryPoints(D,G)}catch(I){return-1}};if(!this.win)return null;var w=this.win.document;if("undefined"===typeof w||null===w)return null;if(void 0!==this.editor.bookmark&&!1===f.hasFocus(this.editor)){var z=g.getRng(this.editor);if(z.isSome())return z.getOr(w.createRange())}try{if(k=
this.getSel())var m=0<k.rangeCount?k.getRangeAt(0):k.createRange?k.createRange():w.createRange()}catch(D){}(m=A.processRanges(this.editor,[m])[0])||(m=w.createRange?w.createRange():w.body.createTextRange());m.setStart&&9===m.startContainer.nodeType&&m.collapsed&&(k=this.dom.getRoot(),m.setStart(k,0),m.setEnd(k,0));this.selectedRange&&this.explicitRange&&(0===h(m.START_TO_START,m,this.selectedRange)&&0===h(m.END_TO_END,m,this.selectedRange)?m=this.explicitRange:this.explicitRange=this.selectedRange=
null);return m},setRng:function(h,k){var w;var z=(z=h)?z.select?!0:B(z.startContainer)&&B(z.endContainer):!1;if(z)if(h.select){this.explicitRange=null;try{h.select()}catch(m){}}else{z=this.getSel();h=this.editor.fire("SetSelectionRange",{range:h,forward:k}).range;if(z){this.explicitRange=h;try{z.removeAllRanges(),z.addRange(h)}catch(m){}!1===k&&z.extend&&(z.collapse(h.endContainer,h.endOffset),z.extend(h.startContainer,h.startOffset));this.selectedRange=0<z.rangeCount?z.getRangeAt(0):null}!h.collapsed&&
h.startContainer===h.endContainer&&z.setBaseAndExtent&&!q.ie&&2>h.endOffset-h.startOffset&&h.startContainer.hasChildNodes()&&(w=h.startContainer.childNodes[h.startOffset])&&"IMG"===w.tagName&&(z.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),z.anchorNode===h.startContainer&&z.focusNode===h.endContainer||z.setBaseAndExtent(w,0,w,1));this.editor.fire("AfterSetSelectionRange",{range:h,forward:k})}},setNode:function(h){this.setContent(this.dom.getOuterHTML(h));return h},getNode:function(){var h=
this.getRng();var k=this.dom.getRoot();var w=function(G,I){for(var H=G;G&&3===G.nodeType&&0===G.length;)G=I?G.nextSibling:G.previousSibling;return G||H};if(!h)return k;var z=h.startContainer;var m=h.endContainer;var D=h.startOffset;var F=h.endOffset;k=h.commonAncestorContainer;return!h.collapsed&&(z==m&&2>F-D&&z.hasChildNodes()&&(k=z.childNodes[D]),3===z.nodeType&&3===m.nodeType&&(z=z.length===D?w(z.nextSibling,!0):z.parentNode,m=0===F?w(m.previousSibling,!1):m.parentNode,z&&z===m))?z:k&&3==k.nodeType?
k.parentNode:k},getSelectedBlocks:function(h,k){var w=this.dom,z=[];var m=w.getRoot();h=w.getParent(h||this.getStart(),w.isBlock);k=w.getParent(k||this.getEnd(),w.isBlock);h&&h!=m&&z.push(h);if(h&&k&&h!=k){var D=h;for(var F=new a(h,m);(D=F.next())&&D!=k;)w.isBlock(D)&&z.push(D)}k&&h!=k&&k!=m&&z.push(k);return z},isForward:function(){var h=this.dom,k=this.getSel();if(!k||!k.anchorNode||!k.focusNode)return!0;var w=h.createRng();w.setStart(k.anchorNode,k.anchorOffset);w.collapse(!0);h=h.createRng();
h.setStart(k.focusNode,k.focusOffset);h.collapse(!0);return 0>=w.compareBoundaryPoints(w.START_TO_START,h)},normalize:function(){var h=this,k=h.getRng();if(!t.hasMultipleRanges(h.getSel())){var w=p.normalize(h.dom,k);w.each(function(z){h.setRng(z,h.isForward())});return w.getOr(k)}return k},selectorChanged:function(h,k){var w=this;if(!w.selectorChangedData){w.selectorChangedData={};var z={};w.editor.on("NodeChange",function(m){var D=m.element,F=w.dom,G=F.getParents(D,null,F.getRoot()),I={};y(w.selectorChangedData,
function(H,E){y(G,function(J){if(F.is(J,E))return z[E]||(y(H,function(M){M(!0,{node:J,selector:E,parents:G})}),z[E]=H),I[E]=H,!1})});y(z,function(H,E){I[E]||(delete z[E],y(H,function(J){J(!1,{node:D,selector:E,parents:G})}))})})}w.selectorChangedData[h]||(w.selectorChangedData[h]=[]);w.selectorChangedData[h].push(k);return w},getScrollContainer:function(){for(var h,k=this.dom.getRoot();k&&"BODY"!=k.nodeName;){if(k.scrollHeight>k.clientHeight){h=k;break}k=k.parentNode}return h},scrollIntoView:function(h,
k){d.scrollIntoView(this.editor,h,k)},placeCaretAt:function(h,k){this.setRng(n.fromPoint(h,k,this.editor.getDoc()))},_moveEndPoint:function(h,k,w){var z=k,m=new a(k,z),D=this.dom.schema.getNonEmptyElements();do{if(3==k.nodeType&&0!==C(k.nodeValue).length){w?h.setStart(k,0):h.setEnd(k,k.nodeValue.length);return}if(D[k.nodeName]&&!/^(TD|TH)$/.test(k.nodeName)){w?h.setStartBefore(k):"BR"==k.nodeName?h.setEndBefore(k):h.setEndAfter(k);return}if(q.ie&&11>q.ie&&this.dom.isBlock(k)&&this.dom.isEmpty(k)){w?
h.setStart(k,0):h.setEnd(k,0);return}}while(k=w?m.next():m.prev());"BODY"==z.nodeName&&(w?h.setStart(z,0):h.setEnd(z,z.childNodes.length))},getBoundingClientRect:function(){var h=this.getRng();return h.collapsed?b.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:function(){this.win=null;this.controlSelection.destroy()}};return v});L("tinymce.core.caret.LineWalker","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.Dimensions tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.CaretPosition tinymce.core.geom.ClientRect".split(" "),
function(u,r,q,l,b,c,d,a){u=u.curry;var f=function(x,t,p,g){for(;(g=b.findNode(g,x,l.isEditableCaretCandidate,t))&&!p(g););},n=function(x,t,p,g,e,v){var y=0,C=[],B=function(k){var w=q.getClientRects(k);-1==x&&(w=w.reverse());for(k=0;k<w.length;k++){var z=w[k];if(!p(z,h)){0<C.length&&t(z,r.last(C))&&y++;z.line=y;if(e(z))return!0;C.push(z)}}};var h=r.last(v.getClientRects());if(!h)return C;v=v.getNode();B(v);f(x,g,B,v);return C},A=u(n,-1,a.isAbove,a.isBelow);n=u(n,1,a.isBelow,a.isAbove);return{upUntil:A,
downUntil:n,positionsUntil:function(x,t,p,g){var e=new c(t);t=[];var v=0;if(1==x){x=e.next;e=a.isBelow;var y=a.isAbove;g=d.after(g)}else x=e.prev,e=a.isAbove,y=a.isBelow,g=d.before(g);var C=r.last(g.getClientRects());do if(g.isVisible()){var B=r.last(g.getClientRects());if(!y(B,C)){0<t.length&&e(B,r.last(t))&&v++;B=a.clone(B);B.position=g;B.line=v;if(p(B))break;t.push(B)}}while(g=x(g));return t},isAboveLine:u(function(x,t){return t.line>x}),isLine:u(function(x,t){return t.line===x})}});L("tinymce.core.keyboard.CefNavigation",
"tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.LineUtils tinymce.core.caret.LineWalker tinymce.core.dom.NodeType tinymce.core.keyboard.CefUtils tinymce.core.selection.RangeNodes tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(u,r,q,l,b,c,d,a,f,n,A,x){var t=a.isContentEditableFalse,p=n.getSelectedNode,g=l.isAfterContentEditableFalse,e=l.isBeforeContentEditableFalse,
v=function(h,k){for(;(k=h(k))&&!k.isVisible(););return k},y=function(h,k,w){w=l.normalizeRange(h,k,w);return-1===h?q.fromRangeStart(w):q.fromRangeEnd(w)},C=function(h,k,w,z,m){if(!m.collapsed){var D=p(m);if(t(D))return f.showCaret(h,k,D,-1===h)}var F=r.isCaretContainerBlock(m.startContainer);D=y(h,k.getBody(),m);if(z(D))return f.selectNode(k,D.getNode(-1===h));D=w(D);if(!D)return F?m:null;if(z(D))return f.showCaret(h,k,D.getNode(-1===h),1===h);w=w(D);return z(w)&&(z=D,m=l.isInSameBlock(z,w),z=!m&&
a.isBr(z.getNode())?!0:m,z)?f.showCaret(h,k,w.getNode(-1===h),1===h):F?f.renderRangeCaret(k,D.toRange()):null},B=function(h,k,w){var z=new b(h.getBody());var m=x.curry(v,z.next),D=x.curry(v,z.prev);if(w.collapsed&&h.settings.forced_root_block&&(z=h.dom.getParent(w.startContainer,"PRE"))&&(w=1===k?m(q.fromRangeStart(w)):D(q.fromRangeStart(w)),!w)){w=h.dom.create(h.settings.forced_root_block);if(!u.ie||11<=u.ie)w.innerHTML='<br data-mce-bogus="1">';1===k?h.$(z).after(w):h.$(z).before(w);h.selection.select(w,
!0);h.selection.collapse()}};return{moveH:function(h,k){return function(){var w=new b(h.getBody());var z=x.curry(v,w.next),m=x.curry(v,w.prev);w=k?1:-1;m=k?z:m;var D=k?e:g;z=h.selection.getRng();w=(m=C(w,h,m,D,z))?m:(m=B(h,w,z))?m:null;return w?(h.selection.setRng(w),!0):!1}},moveV:function(h,k){return function(){var w=k?1:-1;var z=k?d.downUntil:d.upUntil,m=h.selection.getRng();b:{var D=p(m);var F=y(w,h.getBody(),m);z=z(h.getBody(),d.isAboveLine(1),F);var G=A.filter(z,d.isLine(1));z=A.last(F.getClientRects());
e(F)&&(D=F.getNode());g(F)&&(D=F.getNode(!0));if(z)if(z=z.left,(F=c.findClosestClientRect(G,z))&&t(F.node))D=Math.abs(z-F.left),z=Math.abs(z-F.right),D=f.showCaret(w,h,F.node,D<z);else{if(D){D=d.positionsUntil(w,h.getBody(),d.isAboveLine(1),D);if(F=c.findClosestClientRect(A.filter(D,d.isLine(1)),z)){D=f.renderRangeCaret(h,F.position.toRange());break b}if(F=A.last(A.filter(D,d.isLine(0)))){D=f.renderRangeCaret(h,F.position.toRange());break b}}D=void 0}else D=null}w=D?D:(D=B(h,w,m))?D:null;return w?
(h.selection.setRng(w),!0):!1}}}});L("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(u,r,q){var l=function(c){return u.map(c,function(d){return q.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:r.noop},d)})},b=function(c,d){return u.bind(l(c),function(a){return d.keyCode===a.keyCode&&d.shiftKey===a.shiftKey&&d.altKey===a.altKey&&d.ctrlKey===a.ctrlKey&&d.metaKey===a.metaKey?[a]:[]})};return{match:b,action:function(c){var d=
Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,d)}},execute:function(c,d){return u.find(b(c,d),function(a){return a.action()})}}});L("tinymce.core.keyboard.ArrowKeys",["ephox.sand.api.PlatformDetection","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(u,r,q,l,b){var c=function(d,a,f){var n=u.detect().os;l.execute([{keyCode:b.RIGHT,action:q.moveH(d,!0)},{keyCode:b.LEFT,action:q.moveH(d,
!1)},{keyCode:b.UP,action:q.moveV(d,!1)},{keyCode:b.DOWN,action:q.moveV(d,!0)},{keyCode:b.RIGHT,action:r.move(d,a,!0)},{keyCode:b.LEFT,action:r.move(d,a,!1)},{keyCode:b.RIGHT,ctrlKey:!n.isOSX(),altKey:n.isOSX(),action:r.moveNextWord(d,a)},{keyCode:b.LEFT,ctrlKey:!n.isOSX(),altKey:n.isOSX(),action:r.movePrevWord(d,a)}],f).each(function(A){f.preventDefault()})};return{setup:function(d,a){d.on("keydown",function(f){!1===f.isDefaultPrevented()&&c(d,a,f)})}}});L("tinymce.core.delete.InlineFormatDelete",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.fmt.CaretFormat".split(" "),function(u,r,q,l,b,c,d,a,f,n){var A=function(g,e){var v=f.parentsAndSelf(e,g);return u.findIndex(v,a.isBlock).fold(r.constant(v),function(y){return v.slice(0,y)})},x=function(g){return 1===l.children(g).length},
t=function(g,e,v,y){var C=r.curry(n.isFormatElement,e);y=u.map(u.filter(y,C),function(B){return B.dom()});0===y.length?c.deleteElement(e,g,v):(g=n.replaceWithCaretFormat(v.dom(),y),e.selection.setRng(g.toRange()))},p=function(g,e){var v=q.fromDom(g.getBody()),y=q.fromDom(g.selection.getStart()),C=u.filter(A(v,y),x);return u.last(C).map(function(B){var h=b.fromRangeStart(g.selection.getRng());return d.willDeleteLastPositionInElement(e,h,B.dom())?(t(e,g,B,C),!0):!1}).getOr(!1)};return{backspaceDelete:function(g,
e){return g.selection.isCollapsed()?p(g,e):!1}}});L("tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.InlineFormatDelete tinymce.core.delete.TableDelete tinymce.core.keyboard.MatchKeys tinymce.core.util.VK".split(" "),function(u,r,q,l,b,c,d,a){var f=function(n,A,x){d.execute([{keyCode:a.BACKSPACE,action:d.action(q.backspaceDelete,n,!1)},
{keyCode:a.DELETE,action:d.action(q.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(l.backspaceDelete,n,A,!1)},{keyCode:a.DELETE,action:d.action(l.backspaceDelete,n,A,!0)},{keyCode:a.BACKSPACE,action:d.action(r.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(r.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(u.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(u.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(c.backspaceDelete,n,!1)},{keyCode:a.DELETE,
action:d.action(c.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(b.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(b.backspaceDelete,n,!0)}],x).each(function(t){x.preventDefault()})};return{setup:function(n,A){n.on("keydown",function(x){!1===x.isDefaultPrevented()&&f(n,A,x)});n.on("keyup",function(x){!1===x.isDefaultPrevented()&&d.execute([{keyCode:a.BACKSPACE,action:d.action(q.paddEmptyElement,n)},{keyCode:a.DELETE,action:d.action(q.paddEmptyElement,n)}],x)})}}});L("tinymce.core.api.Settings",
[],function(){var u=function(r,q,l){var b=r.getParam(q,l);return-1!==b.indexOf("=")?(q=r.getParam(q,"","hash"),q.hasOwnProperty(r.id)?q[r.id]:l):b};return{getIframeAttrs:function(r){return r.getParam("iframe_attrs",{})},getDocType:function(r){return r.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(r){return r.getParam("document_base_url","")},getBodyId:function(r){return u(r,"body_id","tinymce")},getBodyClass:function(r){return u(r,"body_class","")},getContentSecurityPolicy:function(r){return r.getParam("content_security_policy",
"")},shouldPutBrInPre:function(r){return r.getParam("br_in_pre",!0)},getForcedRootBlock:function(r){if(r.getParam("force_p_newlines",!1))return"p";r=r.getParam("forced_root_block","p");return!1===r?"":r},getForcedRootBlockAttrs:function(r){return r.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(r){return r.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(r){return r.getParam("no_newline_selector","")},shouldKeepStyles:function(r){return r.getParam("keep_styles",
!0)},shouldEndContainerOnEmtpyBlock:function(r){return r.getParam("end_container_on_empty_block",!1)}}});L("tinymce.core.newline.NewLineUtils","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.dom.ElementType tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(u,r,q,l,b,c){var d=function(a){return r.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))};return{moveToCaretPosition:function(a,f){var n,A,x=f,t=a.dom,p=a.schema.getMoveCaretBeforeOnEnterElements();
if(f){if(/^(LI|DT|DD)$/.test(f.nodeName)){a:{for(n=f.firstChild;n;){if(1===n.nodeType||3===n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))break a;n=n.nextSibling}n=void 0}n&&/^(UL|OL|DL)$/.test(n.nodeName)&&f.insertBefore(t.doc.createTextNode("\u00a0"),f.firstChild)}var g=t.createRng();f.normalize();if(f.hasChildNodes()){for(n=new c(f,f);A=n.current();){if(b.isText(A)){g.setStart(A,0);g.setEnd(A,0);break}if(p[A.nodeName.toLowerCase()]){g.setStartBefore(A);g.setEndBefore(A);break}x=A;n.next()}A||(g.setStart(x,
0),g.setEnd(x,0))}else b.isBr(f)?f.nextSibling&&t.isBlock(f.nextSibling)?(g.setStartBefore(f),g.setEndBefore(f)):(g.setStartAfter(f),g.setEndAfter(f)):(g.setStart(f,0),g.setEnd(f,0));a.selection.setRng(g);t.remove(void 0);a.selection.scrollIntoView(f)}},getEditableRoot:function(a,f){for(var n=a.getRoot(),A;f!==n&&"false"!==a.getContentEditable(f);)"true"===a.getContentEditable(f)&&(A=f),f=f.parentNode;return f!==n?A:n},getParentBlock:d,getParentBlockName:function(a){return d(a).fold(u.constant(""),
function(f){return f.nodeName.toUpperCase()})},isListItemParentBlock:function(a){return d(a).filter(function(f){return l.isListItem(q.fromDom(f))}).isSome()}}});L("tinymce.core.newline.InsertLi",["tinymce.core.dom.NodeType","tinymce.core.newline.NewLineUtils"],function(u,r){var q=function(c){return c&&/^(OL|UL|LI)$/.test(c.nodeName)},l=function(c){var d=c.parentNode;return/^(LI|DT|DD)$/.test(d.nodeName)?d:c},b=function(c,d,a){for(c=c[a?"firstChild":"lastChild"];c&&!u.isElement(c);)c=c[a?"nextSibling":
"previousSibling"];return c===d};return{insert:function(c,d,a,f,n){var A=c.dom,x=c.selection.getRng();if(a!==c.getBody()){var t=a;q(t)&&q(t.parentNode)&&(n="LI");d=n?d(n):A.create("BR");b(a,f,!0)&&b(a,f,!1)?a&&a.parentNode&&"LI"===a.parentNode.nodeName?A.insertAfter(d,l(a)):A.replace(d,a):b(a,f,!0)?a&&a.parentNode&&"LI"===a.parentNode.nodeName?(A.insertAfter(d,l(a)),d.appendChild(A.doc.createTextNode(" ")),d.appendChild(a)):a.parentNode.insertBefore(d,a):b(a,f,!1)?A.insertAfter(d,l(a)):(a=l(a),x=
x.cloneRange(),x.setStartAfter(f),x.setEndAfter(a),x=x.extractContents(),"LI"===n&&x.firstChild&&"LI"===x.firstChild.nodeName?(d=x.firstChild,A.insertAfter(x,a)):(A.insertAfter(x,a),A.insertAfter(d,a)));A.remove(f);r.moveToCaretPosition(c,d)}}}});L("tinymce.core.newline.InsertBlock","tinymce.core.api.Settings tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.newline.InsertLi tinymce.core.newline.NewLineUtils tinymce.core.selection.NormalizeRange tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n){var A=function(k){k.innerHTML='<br data-mce-bogus="1">'},x=function(k,w){return k.nodeName===w||k.previousSibling&&k.previousSibling.nodeName===w},t=function(k,w){return w&&k.isBlock(w)&&!/^(TD|TH|CAPTION|FORM)$/.test(w.nodeName)&&!/^(fixed|absolute)/i.test(w.style.position)&&"true"!==k.getContentEditable(w)},p=function(k,w,z){var m=[];if(z){for(;z=z.firstChild;){if(k.isBlock(z))return;q.isElement(z)&&!w[z.nodeName.toLowerCase()]&&m.push(z)}for(w=m.length;w--;)z=m[w],
!z.hasChildNodes()||z.firstChild===z.lastChild&&""===z.firstChild.nodeValue?k.remove(z):z&&"A"===z.nodeName&&0===n.trim(f.trim(z.innerText||z.textContent)).length&&k.remove(z)}},g=function(k,w,z){return!1===q.isText(w)?z:k?1===z&&w.data.charAt(z-1)===f.ZWSP?0:z:z===w.data.length-1&&w.data.charAt(z)===f.ZWSP?w.data.length:z},e=function(k){var w=k.cloneRange();w.setStart(k.startContainer,g(!0,k.startContainer,k.startOffset));w.setEnd(k.endContainer,g(!1,k.endContainer,k.endOffset));return w},v=function(k){do q.isText(k)&&
(k.nodeValue=k.nodeValue.replace(/^[\r\n]+/,"")),k=k.firstChild;while(k)},y=function(k,w){for(var z=k.getRoot(),m;w!==z&&"false"!==k.getContentEditable(w);)"true"===k.getContentEditable(w)&&(m=w),w=w.parentNode;return w!==z?m:z},C=function(k,w){var z=u.getForcedRootBlock(k);z&&z.toLowerCase()===w.tagName.toLowerCase()&&k.dom.setAttribs(w,u.getForcedRootBlockAttrs(k))},B=function(k,w,z,m,D){var F=w||"P";w=k.dom;var G=y(w,m);var I=w.getParent(m,w.isBlock);if(!I||!t(w,I)){I=I||G;var H=I===k.getBody()||
I&&/^(TD|TH|CAPTION)$/.test(I.nodeName)?I.nodeName.toLowerCase():I.parentNode.nodeName.toLowerCase();if(!I.hasChildNodes())return F=w.create(F),C(k,F),I.appendChild(F),z.setStart(F,0),z.setEnd(F,0),F;for(G=m;G.parentNode!==I;)G=G.parentNode;for(;G&&!w.isBlock(G);){var E=G;G=G.previousSibling}if(E&&k.schema.isValidChild(H,F.toLowerCase())){F=w.create(F);C(k,F);E.parentNode.insertBefore(F,E);for(G=E;G&&!w.isBlock(G);)k=G.nextSibling,F.appendChild(G),G=k;z.setStart(m,D);z.setEnd(m,D)}}return m},h=function(k,
w){var z;w.normalize();(z=w.lastChild)&&!/^(left|right)$/gi.test(k.getStyle(z,"float",!0))||k.add(w,"br")};return{insert:function(k,w){var z,m,D=k.dom,F=k.schema,G=F.getNonEmptyElements(),I=k.selection.getRng(),H=function(X){var S=M,aa=F.getTextInlineElements();X||"TABLE"===N||"HR"===N?(X=D.create(X||Q),C(k,X)):X=m.cloneNode(!1);var fa=X;if(!1===u.shouldKeepStyles(k))D.setAttrib(X,"style",null),D.setAttrib(X,"class",null);else{do if(aa[S.nodeName]&&!b.isCaretNode(S)){var ia=S.cloneNode(!1);D.setAttrib(ia,
"id","");X.hasChildNodes()?ia.appendChild(X.firstChild):fa=ia;X.appendChild(ia)}while((S=S.parentNode)&&S!==z)}A(fa);return X},E=function(X){var S=g(X,M,P);if(q.isText(M)&&(X?0<S:S<M.nodeValue.length))return!1;if(M.parentNode===m&&W&&!X||X&&q.isElement(M)&&M===m.firstChild)return!0;if(x(M,"TABLE")||x(M,"HR"))return W&&!X||!W&&X;var aa=new l(M,m);for(q.isText(M)&&(X&&0===S?aa.prev():X||S!==M.nodeValue.length||aa.next());S=aa.current();){if(q.isElement(S)){if(!S.getAttribute("data-mce-bogus")&&(S=S.nodeName.toLowerCase(),
G[S]&&"br"!==S))return!1}else if(q.isText(S)&&!/^[ \t\r\n]*$/.test(S.nodeValue))return!1;X?aa.prev():aa.next()}return!0},J=function(){U=/^(H[1-6]|PRE|FIGURE)$/.test(N)&&"HGROUP"!==O?H(Q):H();u.shouldEndContainerOnEmtpyBlock(k)&&t(D,ba)&&D.isEmpty(m)?U=D.split(ba,m):D.insertAfter(U,m);d.moveToCaretPosition(k,U)};a.normalize(D,I).each(function(X){I.setStart(X.startContainer,X.startOffset);I.setEnd(X.endContainer,X.endOffset)});var M=I.startContainer;var P=I.startOffset;var Q=u.getForcedRootBlock(k);
var V=w.shiftKey;if(q.isElement(M)&&M.hasChildNodes()){var W=P>M.childNodes.length-1;M=M.childNodes[Math.min(P,M.childNodes.length-1)]||M;P=W&&q.isText(M)?M.nodeValue.length:0}if(z=y(D,M)){if(Q&&!V||!Q&&V)M=B(k,Q,I,M,P);var ba=(m=D.getParent(M,D.isBlock))?D.getParent(m.parentNode,D.isBlock):null;var N=m?m.nodeName.toUpperCase():"";var O=ba?ba.nodeName.toUpperCase():"";"LI"!==O||w.ctrlKey||(m=ba,ba=ba.parentNode,N=O);if(/^(LI|DT|DD)$/.test(N)&&D.isEmpty(m))c.insert(k,H,ba,m,Q);else if(!Q||m!==k.getBody()){Q=
Q||"P";if(r.isCaretContainerBlock(m)){var U=r.showCaretContainerBlock(m);D.isEmpty(m)&&A(m);d.moveToCaretPosition(k,U)}else E()?J():E(!0)?(U=m.parentNode.insertBefore(H(),m),d.moveToCaretPosition(k,x(m,"HR")?U:m)):(w=e(I).cloneRange(),w.setEndAfter(m),w=w.extractContents(),v(w),U=w.firstChild,D.insertAfter(w,m),p(D,G,U),h(D,m),D.isEmpty(m)&&A(m),U.normalize(),D.isEmpty(U)?(D.remove(U),J()):d.moveToCaretPosition(k,U));D.setAttrib(U,"id","");k.fire("NewBlock",{newBlock:U})}}}}});L("tinymce.core.newline.ContextSelectors",
["ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.api.Settings","tinymce.core.newline.NewLineUtils"],function(u,r,q,l){var b=function(c,d){return l.getParentBlock(c).filter(function(a){return 0<d.length&&r.is(u.fromDom(a),d)}).isSome()};return{shouldInsertBr:function(c){return b(c,q.getBrNewLineSelector(c))},shouldBlockNewLine:function(c){return b(c,q.getNoNewLineSelector(c))}}});L("tinymce.core.newline.NewLineAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Option tinymce.core.api.Settings tinymce.core.newline.ContextSelectors tinymce.core.newline.NewLineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(u,r,q,l,b,c,d){var a=u.generate([{br:[]},{block:[]},{none:[]}]),f=function(y,C){return b.shouldBlockNewLine(y)},n=function(y){return function(C,B){return""===l.getForcedRootBlock(C)===y}},A=function(y){return function(C,B){return c.isListItemParentBlock(C)===y}},x=function(y){return function(C,B){return"PRE"===c.getParentBlockName(C)===y}},t=function(y){return function(C,B){return l.shouldPutBrInPre(C)===y}},p=function(y,C){return b.shouldInsertBr(y)},g=function(y,C){return C},e=function(y){var C=
l.getForcedRootBlock(y),B=c.getEditableRoot(y.dom,y.selection.getStart());return B&&y.schema.isValidChild(B.nodeName,C?C:"P")},v=function(y,C){return function(B,h){return r.foldl(y,function(k,w){return k&&w(B,h)},!0)?q.some(C):q.none()}};return{getAction:function(y,C){return d.evaluateUntil([v([f],a.none()),v([x(!0),t(!1),g],a.br()),v([x(!0),t(!1)],a.block()),v([x(!0),t(!0),g],a.block()),v([x(!0),t(!0)],a.br()),v([A(!0),g],a.br()),v([A(!0)],a.block()),v([n(!0),g,e],a.block()),v([n(!0)],a.br()),v([p],
a.br()),v([n(!1),g],a.br()),v([e],a.block())],[y,C.shiftKey]).getOr(a.none())}}});L("tinymce.core.newline.InsertNewLine",["ephox.katamari.api.Fun","tinymce.core.newline.InsertBlock","tinymce.core.newline.InsertBr","tinymce.core.newline.NewLineAction"],function(u,r,q,l){return{insert:function(b,c){l.getAction(b,c).fold(function(){q.insert(b,c)},function(){r.insert(b,c)},u.noop)}}});L("tinymce.core.keyboard.EnterKey",["tinymce.core.newline.InsertNewLine","tinymce.core.util.VK"],function(u,r){var q=
function(b){b.typing&&(b.typing=!1,b.add())},l=function(b,c){c.isDefaultPrevented()||(c.preventDefault(),q(b.undoManager),b.undoManager.transact(function(){!1===b.selection.isCollapsed()&&b.execCommand("Delete");u.insert(b,c)}))};return{setup:function(b){b.on("keydown",function(c){c.keyCode===r.ENTER&&l(b,c)})}}});L("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],
function(u,r,q,l,b){var c=function(d,a,f){return f.fold(u.constant(!1),u.constant(!0),u.constant(!0),u.constant(!1))&&q.isText(a.container())?(f=a.container(),a=a.offset(),f.insertData(a,"\u00a0"),d.selection.setCursorLocation(f,a+1),!0):!1};return{insertAtSelection:function(d){if(d.selection.isCollapsed()){var a=u.curry(b.isInlineTarget,d),f=r.fromRangeStart(d.selection.getRng());d=l.readLocation(a,d.getBody(),f).map(u.curry(c,d,f)).getOr(!1)}else d=!1;return d}}});L("tinymce.core.keyboard.SpaceKey",
["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(u,r,q){var l=function(b,c){r.execute([{keyCode:q.SPACEBAR,action:r.action(u.insertAtSelection,b)}],c).each(function(d){c.preventDefault()})};return{setup:function(b){b.on("keydown",function(c){!1===c.isDefaultPrevented()&&l(b,c)})}}});L("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys",
"tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(u,r,q,l,b){return{setup:function(c){var d=r.setupSelectedState(c);u.setup(c,d);q.setup(c,d);l.setup(c);b.setup(c)}}});L("tinymce.core.util.Quirks","global!document global!window tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.selection.CaretRangeFromPoint tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),function(u,r,q,l,b,c,d,a){return function(f){var n=d.each,A=a.BACKSPACE,
x=a.DELETE,t=f.dom,p=f.selection,g=f.settings,e=f.parser,v=q.gecko,y=q.webkit,C=q.ie?"Text":"URL",B=function(N,O){try{f.getDoc().execCommand(N,!1,O)}catch(U){}},h=function(){f.shortcuts.add("meta+a",null,"SelectAll")},k=function(){f.settings.content_editable||t.bind(f.getDoc(),"mousedown mouseup",function(N){if(N.target==f.getDoc().documentElement){var O=p.getRng();f.getBody().focus();"mousedown"==N.type?l.isCaretContainer(O.startContainer)||p.placeCaretAt(N.clientX,N.clientY):p.setRng(O)}})},w=function(){f.on("keydown",
function(N){if(!N.isDefaultPrevented()&&N.keyCode===A&&f.getBody().getElementsByTagName("hr").length&&p.isCollapsed()&&0===p.getRng(!0).startOffset){var O=p.getNode(),U=O.previousSibling;"HR"==O.nodeName?(t.remove(O),N.preventDefault()):U&&U.nodeName&&"hr"===U.nodeName.toLowerCase()&&(t.remove(U),N.preventDefault())}})},z=function(){if(!r.Range.prototype.getClientRects)f.on("mousedown",function(N){if(!N.isDefaultPrevented()&&"HTML"===N.target.nodeName){var O=f.getBody();O.blur();c.setEditorTimeout(f,
function(){O.focus()})}})},m=function(){f.on("click",function(N){var O=N.target;/^(IMG|HR)$/.test(O.nodeName)&&"false"!==t.getContentEditableParent(O)&&(N.preventDefault(),f.selection.select(O),f.nodeChanged());"A"==O.nodeName&&t.hasClass(O,"mce-item-anchor")&&(N.preventDefault(),p.select(O))})},D=function(){var N=function(){var U=t.getAttribs(p.getStart().cloneNode(!1));return function(){var X=p.getStart();X!==f.getBody()&&(t.setAttrib(X,"style",null),n(U,function(S){X.setAttributeNode(S.cloneNode(!0))}))}},
O=function(){return!p.isCollapsed()&&t.getParent(p.getStart(),t.isBlock)!=t.getParent(p.getEnd(),t.isBlock)};f.on("keypress",function(U){if(!U.isDefaultPrevented()&&(8==U.keyCode||46==U.keyCode)&&O()){var X=N();f.getDoc().execCommand("delete",!1,null);X();U.preventDefault();return!1}});t.bind(f.getDoc(),"cut",function(U){if(!U.isDefaultPrevented()&&O()){var X=N();c.setEditorTimeout(f,function(){X()})}})},F=function(){f.on("keydown",function(N){if(!N.isDefaultPrevented()&&N.keyCode===A&&p.isCollapsed()&&
0===p.getRng(!0).startOffset){var O=p.getNode().previousSibling;if(O&&O.nodeName&&"table"===O.nodeName.toLowerCase())return N.preventDefault(),!1}})},G=function(){if(!g.readonly)f.on("BeforeExecCommand MouseDown",function(){B("StyleWithCSS",!1);B("enableInlineTableEditing",!1);g.object_resizing||B("enableObjectResizing",!1)})},I=function(){var N=function(){n(t.select("a"),function(O){var U=O.parentNode,X=t.getRoot();if(U.lastChild===O){for(;U&&!t.isBlock(U);){if(U.parentNode.lastChild!==U||U===X)return;
U=U.parentNode}t.add(U,"br",{"data-mce-bogus":1})}})};f.on("SetContent ExecCommand",function(O){"setcontent"!=O.type&&"mceInsertLink"!==O.command||N()})},H=function(){if(g.forced_root_block)f.on("init",function(){B("DefaultParagraphSeparator",g.forced_root_block)})},E=function(){f.on("keyup focusin mouseup",function(N){a.modifierPressed(N)||p.normalize()},!0)},J=function(){if(!f.inline)f.on("keydown",function(){u.activeElement==u.body&&f.getWin().focus()})},M=function(){f.inline||(f.contentStyles.push("body {min-height: 150px}"),
f.on("click",function(N){"HTML"==N.target.nodeName&&(11<q.ie?f.getBody().focus():(N=f.selection.getRng(),f.getBody().focus(),f.selection.setRng(N),f.selection.normalize(),f.nodeChanged()))}))},P=function(){if(q.mac)f.on("keydown",function(N){!a.metaKeyPressed(N)||N.shiftKey||37!=N.keyCode&&39!=N.keyCode||(N.preventDefault(),f.selection.getSel().modify("move",37==N.keyCode?"backward":"forward","lineboundary"))})},Q=function(){f.on("click",function(N){var O=N.target;do if("A"===O.tagName){N.preventDefault();
break}while(O=O.parentNode)});f.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},V=function(){f.on("init",function(){f.dom.bind(f.getBody(),"submit",function(N){N.preventDefault()})})},W=function(){e.addNodeFilter("br",function(N){for(var O=N.length;O--;)"Apple-interchange-newline"==N[O].attr("class")&&N[O].remove()})},ba=function(){f.on("dragstart",function(N){if(N.dataTransfer){f.selection.isCollapsed()&&"IMG"==N.target.tagName&&p.select(N.target);var O=f.selection.getContent();
0<O.length&&(O="data:text/mce-internal,"+escape(f.id)+","+escape(O),N.dataTransfer.setData(C,O))}});f.on("drop",function(N){if(!N.isDefaultPrevented()){var O;a:{if(N.dataTransfer&&(O=N.dataTransfer.getData(C))&&0<=O.indexOf("data:text/mce-internal,")){O=O.substr(23).split(",");O={id:unescape(O[0]),html:unescape(O[1])};break a}O=null}O&&O.id!=f.id&&(N.preventDefault(),N=b.fromPoint(N.x,N.y,f.getDoc()),p.setRng(N),N=O.html,f.queryCommandSupported("mceInsertClipboardContent")?f.execCommand("mceInsertClipboardContent",
!1,{content:N,internal:!0}):f.execCommand("mceInsertContent",!1,N))}})};(function(){f.on("keydown",function(N){if(!N.isDefaultPrevented()&&N.keyCode==a.BACKSPACE){N=p.getRng();var O=N.startContainer;var U=N.startOffset;var X=t.getRoot();var S=O;if(N.collapsed&&0===U){for(;S&&S.parentNode&&S.parentNode.firstChild==S&&S.parentNode!=X;)S=S.parentNode;"BLOCKQUOTE"===S.tagName&&(f.formatter.toggle("blockquote",null,S),N=t.createRng(),N.setStart(O,0),N.setEnd(O,0),p.setRng(N))}}})})();(function(){var N=
function(O){var U=t.create("body");O=O.cloneContents();U.appendChild(O);return p.serializer.serialize(U,{format:"html"})};f.on("keydown",function(O){var U=O.keyCode;if(!O.isDefaultPrevented()&&(U==x||U==A)){var X=f.selection.isCollapsed();U=f.getBody();if(!X||t.isEmpty(U)){if(X=!X){X=f.selection.getRng();X=N(X);var S=t.createRng();S.selectNode(f.getBody());S=N(S);X=X!==S}X||(O.preventDefault(),f.setContent(""),U.firstChild&&t.isBlock(U.firstChild)?f.selection.setCursorLocation(U.firstChild,0):f.selection.setCursorLocation(U,
0),f.nodeChanged())}}})})();q.windowsPhone||E();y&&(k(),m(),H(),V(),F(),W(),q.iOS?(J(),M(),Q()):h());11<=q.ie&&(M(),F());q.ie&&(h(),B("AutoUrlDetect",!1),ba());v&&(w(),z(),D(),G(),I(),f.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),P(),F());return{refreshContentEditable:function(){},isHidden:function(){if(!v||f.removed)return 0;var N=f.selection.getSel();return!N||!N.rangeCount||0===N.rangeCount}}}});L("tinymce.core.init.InitContentBody","ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr global!document global!window tinymce.core.EditorUpload tinymce.core.ForceBlocks tinymce.core.NodeChange tinymce.core.SelectionOverrides tinymce.core.UndoManager tinymce.core.api.Formatter tinymce.core.api.dom.Serializer tinymce.core.caret.CaretContainerInput tinymce.core.dom.DOMUtils tinymce.core.dom.Selection tinymce.core.html.DomParser tinymce.core.html.Node tinymce.core.html.Schema tinymce.core.keyboard.KeyboardOverrides tinymce.core.util.Delay tinymce.core.util.Quirks tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e,v,y,C,B,h,k){var w=p.DOM,z=function(G,I){G=r.fromDom(G.getDoc().head);var H=r.fromTag("style");q.set(H,"type","text/css");u.append(H,r.fromText(I));u.append(G,H)},m=function(G){var I=new e(G.settings,G.schema);I.addAttributeFilter("src,href,style,tabindex",function(H,E){for(var J=H.length,M,P=G.dom,Q,V;J--;)M=H[J],Q=M.attr(E),V="data-mce-"+E,M.attributes.map[V]||0===Q.indexOf("data:")||0===Q.indexOf("blob:")||("style"===E?(Q=P.serializeStyle(P.parseStyle(Q),
M.name),Q.length||(Q=null),M.attr(V,Q),M.attr(E,Q)):"tabindex"===E?(M.attr(V,Q),M.attr(E,null)):M.attr(V,G.convertURL(Q,E,M.name)))});I.addNodeFilter("script",function(H){for(var E=H.length,J,M;E--;)J=H[E],M=J.attr("type")||"no/type",0!==M.indexOf("mce-")&&J.attr("type","mce-"+M)});I.addNodeFilter("#cdata",function(H){for(var E=H.length,J;E--;)J=H[E],J.type=8,J.name="#comment",J.value="[CDATA["+J.value+"]]"});I.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(H){for(var E=H.length,J,M=G.schema.getNonEmptyElements();E--;)J=
H[E],J.isEmpty(M)&&0===J.getAll("br").length&&(J.append(new v("br",1)).shortEnded=!0)});return I},D=function(G){G.settings.auto_focus&&B.setEditorTimeout(G,function(){var I=!0===G.settings.auto_focus?G:G.editorManager.get(G.settings.auto_focus);I.destroyed||I.focus()},100)},F=function(G){G.bindPendingEventDelegates();G.initialized=!0;G.fire("init");G.focus(!0);G.nodeChanged({initial:!0});G.execCallback("init_instance_callback",G);D(G)};return{initContentBody:function(G,I){var H=G.settings,E=G.getElement(),
J=G.getDoc();H.inline||(G.getElement().style.visibility=G.orgVisibility);I||H.content_editable||(J.open(),J.write(G.iframeHTML),J.close());H.content_editable&&(G.on("remove",function(){var P=this.getBody();w.removeClass(P,"mce-content-body");w.removeClass(P,"mce-edit-focus");w.setAttrib(P,"contentEditable",null)}),w.addClass(E,"mce-content-body"),G.contentDocument=J=H.content_document||l,G.contentWindow=H.content_window||b,G.bodyElement=E,H.content_document=H.content_window=null,H.root_name=E.nodeName.toLowerCase());
I=G.getBody();I.disabled=!0;G.readonly=H.readonly;G.readonly||(G.inline&&"static"===w.getStyle(I,"position",!0)&&(I.style.position="relative"),I.contentEditable=G.getParam("content_editable_state",!0));I.disabled=!1;G.editorUpload=new c(G);G.schema=new y(H);G.dom=new p(J,{keep_values:!0,url_converter:G.convertURL,url_converter_scope:G,hex_colors:H.force_hex_style_colors,class_filter:H.class_filter,update_styles:!0,root_element:G.inline?G.getBody():null,collect:H.content_editable,schema:G.schema,onSetAttrib:function(P){G.fire("SetAttrib",
P)}});G.parser=m(G);G.serializer=new x(H,G);G.selection=new g(G.dom,G.getWin(),G.serializer,G);G.formatter=new A(G);G.undoManager=new n(G);G._nodeChangeDispatcher=new a(G);G._selectionOverrides=new f(G);t.setup(G);C.setup(G);d.setup(G);G.fire("PreInit");H.browser_spellcheck||H.gecko_spellcheck||(J.body.spellcheck=!1,w.setAttrib(I,"spellcheck","false"));G.quirks=new h(G);G.fire("PostRender");H.directionality&&(I.dir=H.directionality);H.nowrap&&(I.style.whiteSpace="nowrap");if(H.protect)G.on("BeforeSetContent",
function(P){k.each(H.protect,function(Q){P.content=P.content.replace(Q,function(V){return"\x3c!--mce:protected "+escape(V)+"--\x3e"})})});G.on("SetContent",function(){G.addVisual(G.getBody())});if(H.padd_empty_editor)G.on("PostProcess",function(P){P.content=P.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});G.load({initial:!0,format:"html"});G.startContent=G.getContent({format:"raw"});G.on("compositionstart compositionend",function(P){G.composing="compositionstart"===
P.type});if(0<G.contentStyles.length){var M="";k.each(G.contentStyles,function(P){M+=P+"\r\n"});G.dom.addStyle(M)}(G.inline?w.styleSheetLoader:G.dom.styleSheetLoader).loadAll(G.contentCSS,function(P){F(G)},function(P){F(G)});H.content_style&&z(G,H.content_style)}}});L("tinymce.core.init.InitIframe","ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css global!document global!window tinymce.core.Env tinymce.core.api.Settings tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.util.Uuid".split(" "),
function(u,r,q,l,b,c,d,a,f,n){var A=a.DOM,x=function(v,y){if(l.domain!==b.location.hostname&&c.ie&&12>c.ie){var C=n.uuid("mce");v[C]=function(){f.initContentBody(v)};A.setAttrib(y,"src",'javascript:(function(){document.open();document.domain="'+l.domain+'";var ed = window.parent.tinymce.get("'+v.id+'");document.write(ed.iframeHTML);document.close();ed.'+C+"(true);})()");return!0}return!1},t=function(v){return(v="number"===typeof v?v+"px":v)?v:""},p=function(v,y,C,B){var h=u.fromTag("iframe");r.setAll(h,
B);r.setAll(h,{id:v+"_ifr",frameBorder:"0",allowTransparency:"true",title:y});q.setAll(h,{width:"100%",height:t(C),display:"block"});return h},g=function(v){var y=d.getDocType(v)+"<html><head>";d.getDocumentBaseUrl(v)!==v.documentBaseUrl&&(y+='<base href="'+v.documentBaseURI.getURI()+'" />');y+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var C=d.getBodyId(v);var B=d.getBodyClass(v);d.getContentSecurityPolicy(v)&&(y+='<meta http-equiv="Content-Security-Policy" content="'+
d.getContentSecurityPolicy(v)+'" />');return y+='</head><body id="'+C+'" class="mce-content-body '+B+'" data-id="'+v.id+'"><br></body></html>'},e=function(v,y){var C=v.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),B=p(v.id,C,y.height,d.getIframeAttrs(v)).dom();B.onload=function(){B.onload=null;v.fire("load")};C=x(v,B);v.contentAreaContainer=y.iframeContainer;v.iframeElement=B;v.iframeHTML=g(v);A.add(y.iframeContainer,B);return C};
return{init:function(v,y){var C=e(v,y);y.editorContainer&&(A.get(y.editorContainer).style.display=v.orgDisplay,v.hidden=A.isHidden(y.editorContainer));v.getElement().style.display="none";A.setAttrib(v.id,"aria-hidden",!0);C||f.initContentBody(v)}}});L("tinymce.core.init.Init","ephox.katamari.api.Type global!document global!window tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.init.InitIframe tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f){var n=c.DOM,A=function(e,v,y){var C=l.get(y);var B=l.urls[y]||e.documentBaseUrl.replace(/\/$/,"");y=f.trim(y);C&&-1===f.inArray(v,y)&&(f.each(l.dependencies(y),function(h){A(e,v,h)}),e.plugins[y]||(C=new C(e,B,e.$),e.plugins[y]=C,C.init&&(C.init(e,B),v.push(y))))},x=function(e){var v=[];f.each(e.settings.plugins.split(/[ ,]/),function(y){A(e,v,y.replace(/^\-/,""))})},t=function(e){var v=e.settings.theme;if(u.isString(v)){e.settings.theme=v.replace(/^\-/,"");var y=b.get(v);
e.theme=new y(e,b.urls[v]);e.theme.init&&e.theme.init(e,b.urls[v]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},p=function(e){return{editorContainer:e,iframeContainer:e}},g=function(e){var v=e.settings,y=e.getElement();e.orgDisplay=y.style.display;if(u.isString(v.theme)){var C=e.settings,B=e.getElement();var h=C.width||n.getStyle(B,"width")||"100%";v=C.height||n.getStyle(B,"height")||B.offsetHeight;y=C.min_height||100;var k=/^[0-9\.]+(|px)$/i;k.test(""+h)&&(h=Math.max(parseInt(h,10),
100));k.test(""+v)&&(v=Math.max(parseInt(v,10),y));e=e.theme.renderUI({targetNode:B,width:h,height:v,deltaWidth:C.delta_width,deltaHeight:C.delta_height});C.content_editable||(v=(e.iframeHeight||v)+("number"===typeof v?e.deltaHeight||0:""),v<y&&(v=y));e.height=v;return e}if(u.isFunction(v.theme))return y=e.getElement(),v=e.settings.theme(e,y),v.editorContainer.nodeType&&(v.editorContainer.id=v.editorContainer.id||e.id+"_parent"),v.iframeContainer&&v.iframeContainer.nodeType&&(v.iframeContainer.id=
v.iframeContainer.id||e.id+"_iframecontainer"),v.height=v.iframeHeight?v.iframeHeight:y.offsetHeight,v;v=e.getElement();e.inline?e=p(null):(e=n.create("div"),n.insertAfter(e,v),e=p(e));return e};return{init:function(e){var v=e.settings,y=e.getElement();e.rtl=v.rtl_ui||e.editorManager.i18n.rtl;e.editorManager.i18n.setCode(v.language);v.aria_label=v.aria_label||n.getAttrib(y,"aria-label",e.getLang("aria.rich_text_area"));e.fire("ScriptsLoaded");t(e);x(e);y=g(e);e.editorContainer=y.editorContainer?y.editorContainer:
null;v.content_css&&f.each(f.explode(v.content_css),function(C){e.contentCSS.push(e.documentBaseURI.toAbsolute(C))});return v.content_editable?d.initContentBody(e):a.init(e,y)}}});L("tinymce.core.init.Render","ephox.katamari.api.Type global!window tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.dom.DOMUtils tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.init.Init tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.util.Tools".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t){var p=b.DOM,g=function(C,B){var h=B.settings;h.language&&"en"!==h.language&&!h.language_url&&(h.language_url=B.editorManager.baseURL+"/langs/"+h.language+".js");h.language_url&&!B.editorManager.i18n.data[h.language]&&C.add(h.language_url)},e=function(C,B,h,k){var w=B.settings,z=w.theme;u.isString(z)?("-"===z.charAt(0)||x.urls.hasOwnProperty(z)||((w=w.theme_url)?x.load(z,B.documentBaseURI.toAbsolute(w)):x.load(z,"themes/"+z+"/theme"+h+".js")),C.loadQueue(function(){x.waitFor(z,
k)})):k()},v=function(C,B){t.isArray(C.plugins)&&(C.plugins=C.plugins.join(" "));t.each(C.external_plugins,function(h,k){A.load(k,h);C.plugins+=" "+k});t.each(C.plugins.split(/[ ,]/),function(h){(h=t.trim(h))&&!A.urls[h]&&("-"===h.charAt(0)?(h=h.substr(1,h.length),h=A.dependencies(h),t.each(h,function(k){k=A.createUrl({prefix:"plugins/",resource:k,suffix:"/plugin"+B+".js"},k);A.load(k.resource,k)})):A.load(h,{prefix:"plugins/",resource:h,suffix:"/plugin"+B+".js"}))})},y=function(C,B){var h=d.ScriptLoader;
e(h,C,B,function(){g(h,C);v(C.settings,B);h.loadQueue(function(){C.removed||n.init(C)},C,function(k){f.pluginLoadError(C,k[0]);C.removed||n.init(C)})})};return{render:function(C){var B=C.settings,h=C.id,k=function(){p.unbind(r,"ready",k);C.render()};if(!c.Event.domLoaded)p.bind(r,"ready",k);else if(C.getElement()&&a.contentEditable){B.inline?C.inline=!0:(C.orgVisibility=C.getElement().style.visibility,C.getElement().style.visibility="hidden");var w=C.getElement().form||p.getParent(h,"form");w&&(C.formElement=
w,B.hidden_input&&!/TEXTAREA|INPUT/i.test(C.getElement().nodeName)&&(p.insertAfter(p.create("input",{type:"hidden",name:h}),h),C.hasHiddenInput=!0),C.formEventDelegate=function(z){C.fire(z.type,z)},p.bind(w,"submit reset",C.formEventDelegate),C.on("reset",function(){C.setContent(C.startContent,{format:"raw"})}),!B.submit_patch||w.submit.nodeType||w.submit.length||w._mceOldSubmit||(w._mceOldSubmit=w.submit,w.submit=function(){C.editorManager.triggerSave();C.setDirty(!1);return w._mceOldSubmit(w)}));
C.windowManager=new l(C);C.notificationManager=new q(C);if("xml"===B.encoding)C.on("GetContent",function(z){z.save&&(z.content=p.encode(z.content))});if(B.add_form_submit_trigger)C.on("submit",function(){C.initialized&&C.save()});B.add_unload_trigger&&(C._beforeUnload=function(){!C.initialized||C.destroyed||C.isHidden()||C.save({format:"raw",no_events:!0,set_dirty:!1})},C.editorManager.on("BeforeUnload",C._beforeUnload));C.editorManager.add(C);y(C,C.suffix)}}}});L("tinymce.core.ui.Sidebar",[],function(){return{add:function(u,
r,q){var l=u.sidebars?u.sidebars:[];l.push({name:r,settings:q});u.sidebars=l}}});L("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(u,r){var q=r.each,l=r.trim,b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),c={ftp:21,http:80,https:443,mailto:25},d=function(a,f){var n=this;a=l(a);f=n.settings=f||{};var A=f.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))n.source=a;else{var x=0===a.indexOf("//");
0!==a.indexOf("/")||x||(a=(A?A.protocol||"http":"http")+"://mce_host"+a);if(!/^[\w\-]*:?\/\//.test(a)){var t=f.base_uri?f.base_uri.path:(new d(u.location.href)).directory;""===f.base_uri.protocol?a="//mce_host"+n.toAbsPath(t,a):(a=/([^#?]*)([#?]?.*)/.exec(a),a=(A&&A.protocol||"http")+"://mce_host"+n.toAbsPath(t,a[1])+a[2])}a=a.replace(/@@/g,"(mce_at)");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);
q(b,function(p,g){(g=a[g])&&(g=g.replace(/\(mce_at\)/g,"@@"));n[p]=g});A&&(n.protocol||(n.protocol=A.protocol),n.userInfo||(n.userInfo=A.userInfo),n.port||"mce_host"!==n.host||(n.port=A.port),n.host&&"mce_host"!==n.host||(n.host=A.host),n.source="");x&&(n.protocol="")}};d.prototype={setPath:function(a){a=/^(.*?)\/?(\w+)?$/.exec(a);this.path=a[0];this.directory=a[1];this.file=a[2];this.source="";this.getURI()},toRelative:function(a){if("./"===a)return a;a=new d(a,{base_uri:this});if("mce_host"!=a.host&&
this.host!=a.host&&a.host||this.port!=a.port||this.protocol!=a.protocol&&""!==a.protocol)return a.getURI();var f=this.getURI();var n=a.getURI();if(f==n||"/"==f.charAt(f.length-1)&&f.substr(0,f.length-1)==n)return f;f=this.toRelPath(this.path,a.path);a.query&&(f+="?"+a.query);a.anchor&&(f+="#"+a.anchor);return f},toAbsolute:function(a,f){a=new d(a,{base_uri:this});return a.getURI(f&&this.isSameOrigin(a))},isSameOrigin:function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;
var f=c[this.protocol];if(f&&(this.port||f)==(a.port||f))return!0}return!1},toRelPath:function(a,f){var n=0,A="",x;a=a.substring(0,a.lastIndexOf("/"));a=a.split("/");var t=f.split("/");if(a.length>=t.length){var p=0;for(x=a.length;p<x;p++)if(p>=t.length||a[p]!=t[p]){n=p+1;break}}if(a.length<t.length)for(p=0,x=t.length;p<x;p++)if(p>=a.length||a[p]!=t[p]){n=p+1;break}if(1===n)return f;p=0;for(x=a.length-(n-1);p<x;p++)A+="../";p=n-1;for(x=t.length;p<x;p++)A=p!=n-1?A+("/"+t[p]):A+t[p];return A},toAbsPath:function(a,
f){var n=0,A=[];var x=/\/$/.test(f)?"/":"";a=a.split("/");f=f.split("/");q(a,function(p){p&&A.push(p)});a=A;var t=f.length-1;for(A=[];0<=t;t--)0!==f[t].length&&"."!==f[t]&&(".."===f[t]?n++:0<n?n--:A.push(f[t]));t=a.length-n;a=0>=t?A.reverse().join("/"):a.slice(0,t).join("/")+"/"+A.reverse().join("/");0!==a.indexOf("/")&&(a="/"+a);x&&a.lastIndexOf("/")!==a.length-1&&(a+=x);return a},getURI:function(a){if(!this.source||a){var f="";a||(f=this.protocol?f+(this.protocol+"://"):f+"//",this.userInfo&&(f+=
this.userInfo+"@"),this.host&&(f+=this.host),this.port&&(f+=":"+this.port));this.path&&(f+=this.path);this.query&&(f+="?"+this.query);this.anchor&&(f+="#"+this.anchor);this.source=f}return this.source}};d.parseDataUri=function(a){var f,n;a=decodeURIComponent(a).split(",");(n=/data:([^;]+)/.exec(a[0]))&&(f=n[1]);return{type:f,data:a[1]}};d.getDocumentBaseUrl=function(a){a=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname;/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&
(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));return a};return d});L("tinymce.core.Editor","tinymce.core.AddOnManager tinymce.core.EditorCommands tinymce.core.EditorObservable tinymce.core.EditorSettings tinymce.core.Env tinymce.core.Mode tinymce.core.Shortcuts tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.TrimHtml tinymce.core.focus.EditorFocus tinymce.core.html.Serializer tinymce.core.init.Render tinymce.core.ui.Sidebar tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.Uuid".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e,v){var y=a.DOM,C=g.extend,B=g.each,h=g.trim,k=g.resolve,w=b.ie;a=function(z,m,D){var F=this;var G=F.documentBaseUrl=D.documentBaseURL;var I=D.baseURI;m=l.getEditorSettings(F,z,G,D.defaultSettings,m);F.settings=m;u.language=m.language||"en";u.languageLoad=m.language_load;u.baseURL=D.baseURL;F.id=z;F.setDirty(!1);F.plugins={};F.documentBaseURI=new e(m.document_base_url,{base_uri:I});F.baseURI=I;F.contentCSS=[];F.contentStyles=[];F.shortcuts=new d(F);F.loadedCSS=
{};F.editorCommands=new r(F);F.suffix=D.suffix;F.editorManager=D;F.inline=m.inline;F.buttons={};F.menuItems={};m.cache_suffix&&(b.cacheSuffix=m.cache_suffix.replace(/^[\?&]+/,""));!1===m.override_viewport&&(b.overrideViewPort=!1);D.fire("SetupEditor",F);F.execCallback("setup",F);F.$=f.overrideDefaults(function(){return{context:F.inline?F.getBody():F.getDoc(),element:F.getBody()}})};a.prototype={render:function(){t.render(this)},focus:function(z){A.focus(this,z)},execCallback:function(z){var m=this.settings[z],
D;if(m)return this.callbackLookup&&(D=this.callbackLookup[z])&&(m=D.func,D=D.scope),"string"===typeof m&&(D=(D=m.replace(/\.\w+$/,""))?k(D):0,m=k(m),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[z]={func:m,scope:D}),m.apply(D||this,Array.prototype.slice.call(arguments,1))},translate:function(z){if(z&&g.is(z,"string")){var m=this.settings.language||"en",D=this.editorManager.i18n;z=D.data[m+"."+z]||z.replace(/\{#([^\}]+)\}/g,function(F,G){return D.data[m+"."+G]||"{#"+G+"}"})}return this.editorManager.translate(z)},
getLang:function(z,m){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+z]||(void 0!==m?m:"{#"+z+"}")},getParam:function(z,m,D){z=z in this.settings?this.settings[z]:m;if("hash"===D){var F={};"string"===typeof z?B(0<z.indexOf("=")?z.split(/[;,](?![^=;,]*(?:[;,]|$))/):z.split(","),function(G){G=G.split("=");1<G.length?F[h(G[0])]=h(G[1]):F[h(G[0])]=h(G)}):F=z;return F}return z},nodeChanged:function(z){this._nodeChangeDispatcher.nodeChanged(z)},addButton:function(z,m){var D=this;
m.cmd&&(m.onclick=function(){D.execCommand(m.cmd)});m.stateSelector&&"undefined"===typeof m.active&&(m.active=!1);m.text||m.icon||(m.icon=z);D.buttons=D.buttons;m.tooltip=m.tooltip||m.title;D.buttons[z]=m},addSidebar:function(z,m){return p.add(this,z,m)},addMenuItem:function(z,m){var D=this;m.cmd&&(m.onclick=function(){D.execCommand(m.cmd)});D.menuItems=D.menuItems;D.menuItems[z]=m},addContextToolbar:function(z,m){var D=this;D.contextToolbars=D.contextToolbars||[];if("string"==typeof z){var F=z;z=
function(G){return D.dom.is(G,F)}}D.contextToolbars.push({id:v.uuid("mcet"),predicate:z,items:m})},addCommand:function(z,m,D){this.editorCommands.addCommand(z,m,D)},addQueryStateHandler:function(z,m,D){this.editorCommands.addQueryStateHandler(z,m,D)},addQueryValueHandler:function(z,m,D){this.editorCommands.addQueryValueHandler(z,m,D)},addShortcut:function(z,m,D,F){this.shortcuts.add(z,m,D,F)},execCommand:function(z,m,D,F){return this.editorCommands.execCommand(z,m,D,F)},queryCommandState:function(z){return this.editorCommands.queryCommandState(z)},
queryCommandValue:function(z){return this.editorCommands.queryCommandValue(z)},queryCommandSupported:function(z){return this.editorCommands.queryCommandSupported(z)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(y.show(this.getContainer()),y.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var z=this.getDoc();this.hidden||(w&&z&&!this.inline&&z.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this==this.editorManager.focusedEditor&&
(this.editorManager.focusedEditor=null)):(y.hide(this.getContainer()),y.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(z,m){this.fire("ProgressState",{state:z,time:m})},load:function(z){var m=this.getElement();if(this.removed)return"";if(m){z=z||{};z.load=!0;var D=this.setContent(void 0!==m.value?m.value:m.innerHTML,z);z.element=m;z.no_events||this.fire("LoadContent",z);z.element=null;return D}},save:function(z){var m=
this,D=m.getElement(),F;if(D&&m.initialized&&!m.removed){z=z||{};z.save=!0;z.element=D;var G=z.content=m.getContent(z);z.no_events||m.fire("SaveContent",z);"raw"==z.format&&m.fire("RawSaveContent",z);G=z.content;/TEXTAREA|INPUT/i.test(D.nodeName)?D.value=G:(m.inline||(D.innerHTML=G),(F=y.getParent(m.id,"form"))&&B(F.elements,function(I){if(I.name==m.id)return I.value=G,!1}));z.element=D=null;!1!==z.set_dirty&&m.setDirty(!1);return G}},setContent:function(z,m){var D=this.getBody(),F;m=m||{};m.format=
m.format||"html";m.set=!0;m.content=z;m.no_events||this.fire("BeforeSetContent",m);z=m.content;if(0===z.length||/^\s+$/.test(z)){var G=w&&11>w?"":'<br data-mce-bogus="1">';"TABLE"==D.nodeName?z="<tr><td>"+G+"</td></tr>":/^(UL|OL)$/.test(D.nodeName)&&(z="<li>"+G+"</li>");(F=this.settings.forced_root_block)&&this.schema.isValidChild(D.nodeName.toLowerCase(),F.toLowerCase())?z=this.dom.createHTML(F,this.settings.forced_root_block_attrs,G):w||z||(z='<br data-mce-bogus="1">');this.dom.setHTML(D,z);this.fire("SetContent",
m)}else"raw"!==m.format&&(z=(new x({validate:this.validate},this.schema)).serialize(this.parser.parse(z,{isRootContent:!0,insert:!0}))),m.content=h(z),this.dom.setHTML(D,m.content),m.no_events||this.fire("SetContent",m);return m.content},getContent:function(z){var m=this.getBody();if(this.removed)return"";z=z||{};z.format=z.format||"html";z.get=!0;z.getInner=!0;z.no_events||this.fire("BeforeGetContent",z);if("raw"===z.format)m=g.trim(n.trimExternal(this.serializer,m.innerHTML));else if("text"===z.format)m=
m.innerText||m.textContent;else{if("tree"===z.format)return this.serializer.serialize(m,z);m=this.serializer.serialize(m,z)}z.content="text"!==z.format?h(m):m;z.no_events||this.fire("GetContent",z);return z.content},insertContent:function(z,m){m&&(z=C({content:z},m));this.execCommand("mceInsertContent",!1,z)},isDirty:function(){return!this.isNotDirty},setDirty:function(z){var m=!this.isNotDirty;this.isNotDirty=!z;z&&z!=m&&this.fire("dirty")},setMode:function(z){c.setMode(this,z)},getContainer:function(){this.container||
(this.container=y.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){this.targetElm||(this.targetElm=y.get(this.id));return this.targetElm},getWin:function(){var z;!this.contentWindow&&(z=this.iframeElement)&&(this.contentWindow=z.contentWindow);return this.contentWindow},getDoc:function(){var z;!this.contentDocument&&(z=this.getWin())&&(this.contentDocument=z.document);return this.contentDocument},
getBody:function(){var z=this.getDoc();return this.bodyElement||(z?z.body:null)},convertURL:function(z,m,D){var F=this.settings;return F.urlconverter_callback?this.execCallback("urlconverter_callback",z,D,!0,m):!F.convert_urls||D&&"LINK"==D.nodeName||0===z.indexOf("file:")||0===z.length?z:F.relative_urls?this.documentBaseURI.toRelative(z):z=this.documentBaseURI.toAbsolute(z,F.remove_script_host)},addVisual:function(z){var m=this,D=m.settings,F=m.dom,G;z=z||m.getBody();void 0===m.hasVisual&&(m.hasVisual=
D.visual);B(F.select("table,a",z),function(I){var H;switch(I.nodeName){case "TABLE":G=D.visual_table_class||"mce-item-table";(H=F.getAttrib(I,"border"))&&"0"!=H||!m.hasVisual?F.removeClass(I,G):F.addClass(I,G);break;case "A":F.getAttrib(I,"href",!1)||(H=F.getAttrib(I,"name")||I.id,G=D.visual_anchor_class||"mce-item-anchor",H&&m.hasVisual?F.addClass(I,G):F.removeClass(I,G))}});m.fire("VisualAid",{element:z,hasVisual:m.hasVisual})},remove:function(){this.removed||(this.save(),this.removed=1,this.unbindAllNativeEvents(),
this.hasHiddenInput&&y.remove(this.getElement().nextSibling),this.inline||(w&&10>w&&this.getDoc().execCommand("SelectAll",!1,null),y.setStyle(this.id,"display",this.orgDisplay),this.getBody().onload=null),this.fire("remove"),this.editorManager.remove(this),y.remove(this.getContainer()),this._selectionOverrides.destroy(),this.editorUpload.destroy(),this.destroy())},destroy:function(z){if(!this.destroyed)if(z||this.removed){z||(this.editorManager.off("beforeunload",this._beforeUnload),this.theme&&this.theme.destroy&&
this.theme.destroy(),this.selection.destroy(),this.dom.destroy());if(z=this.formElement)z._mceOldSubmit&&(z.submit=z._mceOldSubmit,z._mceOldSubmit=null),y.unbind(z,"submit reset",this.formEventDelegate);this.iframeElement=this.targetElm=this.bodyElement=this.contentDocument=this.contentWindow=this.contentAreaContainer=this.formElement=this.container=this.editorContainer=null;this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null);this.destroyed=1}else this.remove()},
uploadImages:function(z){return this.editorUpload.uploadImages(z)},_scanForImages:function(){return this.editorUpload.scanForImages()}};C(a.prototype,q);return a});L("tinymce.core.api.FocusManager",["global!document"],function(u){return{isEditorUIElement:function(r){return-1!==r.className.toString().indexOf("mce-")}}});L("tinymce.core.selection.SelectionRestore",["ephox.katamari.api.Throttler","ephox.sand.api.PlatformDetection","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark"],
function(u,r,q,l,b){var c=function(n,A){var x=function(){A.throttle()};l.DOM.bind(q,"mouseup",x);n.on("remove",function(){l.DOM.unbind(q,"mouseup",x)})},d=function(n){n.on("focusout",function(){b.store(n)})},a=function(n,A){n.on("mouseup touchend",function(x){A.throttle()})},f=function(n,A){var x=r.detect().browser;x.isIE()||x.isEdge()?d(n):a(n,A);n.on("keyup nodechange",function(t){"nodechange"===t.type&&t.selectionChange||b.store(n)})};return{register:function(n){var A=u.first(function(){b.store(n)},
0);n.inline&&c(n,A);n.on("init",function(){f(n,A)});n.on("remove",function(){A.cancel()})}}});L("tinymce.core.focus.FocusController","ephox.katamari.api.Fun global!document tinymce.core.api.FocusManager tinymce.core.dom.DOMUtils tinymce.core.selection.SelectionRestore tinymce.core.util.Delay".split(" "),function(u,r,q,l,b,c){var d,a=l.DOM,f=function(t){return q.isEditorUIElement(t)},n=function(t,p){var g=t?t.settings.custom_ui_selector:"";return null!==a.getParent(p,function(e){return f(e)||(g?t.dom.is(e,
g):!1)})},A=function(t,p){var g=p.editor;b.register(g);g.on("focusin",function(){var e=t.focusedEditor;e!=g&&(e&&e.fire("blur",{focusedEditor:g}),t.setActive(g),t.focusedEditor=g,g.fire("focus",{blurredEditor:e}),g.focus(!0))});g.on("focusout",function(){c.setEditorTimeout(g,function(){var e=t.focusedEditor;try{var v=r.activeElement}catch(y){v=r.body}n(g,v)||e!=g||(g.fire("blur",{focusedEditor:null}),t.focusedEditor=null)})});d||(d=function(e){var v=t.activeEditor;e=e.target;v&&e.ownerDocument===
r&&e!==r.body&&!n(v,e)&&t.focusedEditor===v&&(v.fire("blur",{focusedEditor:null}),t.focusedEditor=null)},a.bind(r,"focusin",d))},x=function(t,p){t.focusedEditor==p.editor&&(t.focusedEditor=null);t.activeEditor||(a.unbind(r,"focusin",d),d=null)};return{setup:function(t){t.on("AddEditor",u.curry(A,t));t.on("RemoveEditor",u.curry(x,t))},isEditorUIElement:f,isUIElement:n}});L("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(u){var r={},q="en";return{setCode:function(l){l&&(q=l,this.rtl=this.data[l]?
"rtl"===this.data[l]._dir:!1)},getCode:function(){return q},rtl:!1,add:function(l,b){var c=r[l];c||(r[l]=c={});for(var d in b)c[d]=b[d];this.setCode(l)},translate:function(l){var b=r[q]||{},c=function(n){return u.is(n,"function")?Object.prototype.toString.call(n):d(n)?"":""+n},d=function(n){return""===n||null===n||u.is(n,"undefined")},a=function(n){n=c(n);return u.hasOwn(b,n)?c(b[n]):n};if(d(l))return"";if(u.is(l,"object")&&u.hasOwn(l,"raw"))return c(l.raw);if(u.is(l,"array")){var f=l.slice(1);l=
a(l[0]).replace(/\{([0-9]+)\}/g,function(n,A){return u.hasOwn(f,A)?c(f[A]):n})}return a(l).replace(/{context:\w+}$/,"")},data:r}});L("tinymce.core.EditorManager","ephox.katamari.api.Arr ephox.katamari.api.Type global!document global!window tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.focus.FocusController tinymce.core.util.I18n tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e){var v=f.DOM,y=g.explode,C=g.each,B=g.extend,h=0,k,w=!1,z=[],m=[],D=function(H){C(I.get(),function(E){"scroll"===H.type?E.fire("ScrollWindow",H):E.fire("ResizeWindow",H)})},F=function(H){if(H!==w){if(H)n(l).on("resize scroll",D);else n(l).off("resize scroll",D);w=H}},G=function(H){var E=m;delete z[H.id];for(var J=0;J<z.length;J++)if(z[J]===H){z.splice(J,1);break}m=u.filter(m,function(M){return H!==M});I.activeEditor===H&&(I.activeEditor=0<m.length?m[0]:null);
I.focusedEditor===H&&(I.focusedEditor=null);return E.length!==m.length};var I={defaultSettings:{},$:n,majorVersion:"4",minorVersion:"7.3",releaseDate:"2017-11-23",editors:z,i18n:x,activeEditor:null,settings:{},setup:function(){var H="",E;var J=e.getDocumentBaseUrl(q.location);/^[^:]+:\/\/\/?[^\/]+\//.test(J)&&(J=J.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(J)||(J+="/"));if(E=l.tinymce||l.tinyMCEPreInit){var M=E.base||E.baseURL;H=E.suffix}else{for(var P=q.getElementsByTagName("script"),
Q=0;Q<P.length;Q++){E=P[Q].src;var V=E.substring(E.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(E)){-1!=V.indexOf(".min")&&(H=".min");M=E.substring(0,E.lastIndexOf("/"));break}}!M&&q.currentScript&&(E=q.currentScript.src,-1!=E.indexOf(".min")&&(H=".min"),M=E.substring(0,E.lastIndexOf("/")))}this.baseURL=(new e(J)).toAbsolute(M);this.documentBaseURL=J;this.baseURI=new e(this.baseURL);this.suffix=H;A.setup(this)},overrideDefaults:function(H){var E;if(E=H.base_url)this.baseURL=
(new e(this.documentBaseURL)).toAbsolute(E.replace(/\/+$/,"")),this.baseURI=new e(this.baseURL);if(E=H.suffix)this.suffix=E;this.defaultSettings=H;H=H.plugin_base_urls;for(var J in H)b.PluginManager.urls[J]=H[J]},init:function(H){var E=this,J;var M=g.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var P=function(O){var U=O.id;U||(U=(U=O.name)&&
!v.get(U)?O.name:v.uniqueId(),O.setAttribute("id",U));return U},Q=function(O){var U=H[O];if(U)return U.apply(E,Array.prototype.slice.call(arguments,2))},V=function(O,U){return U.constructor===RegExp?U.test(O.className):v.hasClass(O,U)},W=function(O){var U=[];if(d.ie&&11>d.ie)return a.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(O.types)return C(O.types,function(S){U=
U.concat(v.select(S.selector))}),U;if(O.selector)return v.select(O.selector);if(O.target)return[O.target];switch(O.mode){case "exact":var X=O.elements||"";0<X.length&&C(y(X),function(S){var aa;(aa=v.get(S))?U.push(aa):C(q.forms,function(fa){C(fa.elements,function(ia){ia.name===S&&(S="mce_editor_"+h++,v.setAttrib(ia,"id",S),U.push(ia))})})});break;case "textareas":case "specific_textareas":C(v.select("textarea"),function(S){O.editor_deselector&&V(S,O.editor_deselector)||O.editor_selector&&!V(S,O.editor_selector)||
U.push(S)})}return U},ba=function(O){J=O},N=function(){var O=0,U=[],X=function(aa,fa,ia){aa=new c(aa,fa,E);U.push(aa);aa.on("init",function(){++O===S.length&&ba(U)});aa.targetElm=aa.targetElm||ia;aa.render()};v.unbind(l,"ready",N);Q("onpageload");var S=n.unique(W(H));H.types?C(H.types,function(aa){g.each(S,function(fa){return v.is(fa,aa.selector)?(X(P(fa),B({},H,aa),fa),!1):!0})}):(g.each(S,function(aa){(aa=E.get(aa.id))&&aa.initialized&&!(aa.getContainer()||aa.getBody()).parentNode&&(G(aa),aa.unbindAllNativeEvents(),
aa.destroy(!0),aa.removed=!0)}),S=g.grep(S,function(aa){return!E.get(aa.id)}),0===S.length?ba([]):C(S,function(aa){H.inline&&aa.tagName.toLowerCase()in M?a.initError("Could not initialize inline editor on invalid inline target element",aa):X(P(aa),H,aa)}))};E.settings=H;v.bind(l,"ready",N);return new p(function(O){J?O(J):ba=function(U){O(U)}})},get:function(H){return 0===arguments.length?m.slice(0):r.isString(H)?u.find(m,function(E){return E.id===H}).getOr(null):r.isNumber(H)?m[H]?m[H]:null:null},
add:function(H){var E=this;if(z[H.id]===H)return H;null===E.get(H.id)&&("length"!==H.id&&(z[H.id]=H),z.push(H),m.push(H));F(!0);E.activeEditor=H;E.fire("AddEditor",{editor:H});k||(k=function(){E.fire("BeforeUnload")},v.bind(l,"beforeunload",k));return H},createEditor:function(H,E){return this.add(new c(H,E,this))},remove:function(H){var E=this;if(H)if(r.isString(H))H=H.selector||H,C(v.select(H),function(M){(J=E.get(M.id))&&E.remove(J)});else{var J=H;if(r.isNull(E.get(J.id)))return null;G(J)&&E.fire("RemoveEditor",
{editor:J});0===m.length&&v.unbind(l,"beforeunload",k);J.remove();F(0<m.length);return J}else for(H=m.length-1;0<=H;H--)E.remove(m[H])},execCommand:function(H,E,J){var M=this.get(J);switch(H){case "mceAddEditor":return this.get(J)||(new c(J,this.settings,this)).render(),!0;case "mceRemoveEditor":return M&&M.remove(),!0;case "mceToggleEditor":if(!M)return this.execCommand("mceAddEditor",0,J),!0;M.isHidden()?M.show():M.hide();return!0}return this.activeEditor?this.activeEditor.execCommand(H,E,J):!1},
triggerSave:function(){C(m,function(H){H.save()})},addI18n:function(H,E){x.add(H,E)},translate:function(H){return x.translate(H)},setActive:function(H){var E=this.activeEditor;this.activeEditor!=H&&(E&&E.fire("deactivate",{relatedTarget:H}),H.fire("activate",{relatedTarget:E}));this.activeEditor=H}};B(I,t);I.setup();return I});L("tinymce.core.api.dom.RangeUtils","ephox.katamari.api.Fun tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.NormalizeRange tinymce.core.selection.RangeCompare tinymce.core.selection.RangeNodes tinymce.core.selection.RangeWalk tinymce.core.selection.SplitRange".split(" "),
function(u,r,q,l,b,c,d){var a=function(f){return{walk:function(n,A){return c.walk(f,n,A)},split:d.split,normalize:function(n){return q.normalize(f,n).fold(u.constant(!1),function(A){n.setStart(A.startContainer,A.startOffset);n.setEnd(A.endContainer,A.endOffset);return!0})}}};a.compareRanges=l.isEq;a.getCaretRangeFromPoint=r.fromPoint;a.getSelectedNode=b.getSelectedNode;a.getNode=b.getNode;return a});L("tinymce.core.geom.Rect",[],function(){var u=Math.min,r=Math.max,q=Math.round,l=function(c,d,a){var f=
d.x;var n=d.y;var A=c.w;c=c.h;var x=d.w;d=d.h;a=(a||"").split("");"b"===a[0]&&(n+=d);"r"===a[1]&&(f+=x);"c"===a[0]&&(n+=q(d/2));"c"===a[1]&&(f+=q(x/2));"b"===a[3]&&(n-=c);"r"===a[4]&&(f-=A);"c"===a[3]&&(n-=q(c/2));"c"===a[4]&&(f-=q(A/2));return b(f,n,A,c)},b=function(c,d,a,f){return{x:c,y:d,w:a,h:f}};return{inflate:function(c,d,a){return b(c.x-d,c.y-a,c.w+2*d,c.h+2*a)},relativePosition:l,findBestRelativePosition:function(c,d,a,f){var n;for(n=0;n<f.length;n++){var A=l(c,d,f[n]);if(A.x>=a.x&&A.x+A.w<=
a.w+a.x&&A.y>=a.y&&A.y+A.h<=a.h+a.y)return f[n]}return null},intersect:function(c,d){var a=r(c.x,d.x);var f=r(c.y,d.y);var n=u(c.x+c.w,d.x+d.w);c=u(c.y+c.h,d.y+d.h);return 0>n-a||0>c-f?null:b(a,f,n-a,c-f)},clamp:function(c,d,a){var f=c.x;var n=c.y;var A=c.x+c.w;var x=c.y+c.h;var t=d.x+d.w;var p=d.y+d.h;c=r(0,d.x-f);d=r(0,d.y-n);t=r(0,A-t);p=r(0,x-p);f+=c;n+=d;a&&(A+=c,x+=d,f-=t,n-=p);return b(f,n,A-t-f,x-p-n)},create:b,fromClientRect:function(c){return b(c.left,c.top,c.width,c.height)}}});L("tinymce.core.ui.Factory",
[],function(){var u={};return{add:function(r,q){u[r.toLowerCase()]=q},has:function(r){return!!u[r.toLowerCase()]},get:function(r){var q=r.toLowerCase();q=u.hasOwnProperty(q)?u[q]:null;if(null===q)throw Error("Could not find module for type: "+r);return q},create:function(r,q){"string"==typeof r?(q=q||{},q.type=r):(q=r,r=q.type);r=r.toLowerCase();var l=u[r];if(!l)throw Error("Could not find control by type: "+r);l=new l(q);l.type=r;return l}}});L("tinymce.core.util.Class",["tinymce.core.util.Tools"],
function(u){var r=u.each,q=u.extend,l,b;u=function(){};u.extend=l=function(c){var d=this.prototype,a,f=function(){var p,g;if(!b&&(this.init&&this.init.apply(this,arguments),g=this.Mixins))for(p=g.length;p--;){var e=g[p];e.init&&e.init.apply(this,arguments)}},n=function(){return this},A=function(p,g){return function(){var e=this._super;this._super=d[p];var v=g.apply(this,arguments);this._super=e;return v}};b=!0;var x=new this;b=!1;c.Mixins&&(r(c.Mixins,function(p){for(var g in p)"init"!==g&&(c[g]=
p[g])}),d.Mixins&&(c.Mixins=d.Mixins.concat(c.Mixins)));c.Methods&&r(c.Methods.split(","),function(p){c[p]=n});c.Properties&&r(c.Properties.split(","),function(p){var g="_"+p;c[p]=function(e){return void 0!==e?(this[g]=e,this):this[g]}});c.Statics&&r(c.Statics,function(p,g){f[g]=p});c.Defaults&&d.Defaults&&(c.Defaults=q({},d.Defaults,c.Defaults));for(a in c){var t=c[a];x[a]="function"==typeof t&&d[a]?A(a,t):t}f.prototype=x;f.constructor=f;f.extend=l;return f};return u});L("tinymce.core.util.Color",
[],function(){var u=Math.min,r=Math.max,q=Math.round;return function(l){var b=this,c=0,d=0,a=0,f=function(n){if("object"==typeof n)if("r"in n)c=n.r,d=n.g,a=n.b;else{if("v"in n){var A=n.h;var x=n.s;n=n.v;A=(parseInt(A,10)||0)%360;x=parseInt(x,10)/100;n=parseInt(n,10)/100;x=r(0,u(x,1));n=r(0,u(n,1));if(0===x)c=d=a=q(255*n);else{A/=60;x*=n;var t=x*(1-Math.abs(A%2-1));n-=x;switch(Math.floor(A)){case 0:c=x;d=t;a=0;break;case 1:c=t;d=x;a=0;break;case 2:c=0;d=x;a=t;break;case 3:c=0;d=t;a=x;break;case 4:c=
t;d=0;a=x;break;case 5:c=x;d=0;a=t;break;default:c=d=a=0}c=q(255*(c+n));d=q(255*(d+n));a=q(255*(a+n))}}}else if(A=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))c=parseInt(A[1],10),d=parseInt(A[2],10),a=parseInt(A[3],10);else if(A=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))c=parseInt(A[1],16),d=parseInt(A[2],16),a=parseInt(A[3],16);else if(A=/#([0-F])([0-F])([0-F])/gi.exec(n))c=parseInt(A[1]+A[1],16),d=parseInt(A[2]+A[2],16),a=parseInt(A[3]+A[3],16);c=0>c?0:255<c?255:c;d=0>
d?0:255<d?255:d;a=0>a?0:255<a?255:a;return b};l&&f(l);b.toRgb=function(){return{r:c,g:d,b:a}};b.toHsv=function(){var n=c;var A=d,x=a;n/=255;A/=255;x/=255;var t=u(n,u(A,x));var p=r(n,r(A,x));if(t==p)n={h:0,s:0,v:100*t};else{var g=(p-t)/p;n={h:q(60*((n==t?3:x==t?1:5)-(n==t?A-x:x==t?n-A:x-n)/(p-t))),s:q(100*g),v:q(100*p)}}return n};b.toHex=function(){var n=function(A){A=parseInt(A,10).toString(16);return 1<A.length?A:"0"+A};return"#"+n(c)+n(d)+n(a)};b.parse=f}});L("tinymce.core.util.JSON",["global!window"],
function(u){var r=function(q,l){var b;l=l||'"';if(null===q)return"null";var c=typeof q;if("string"==c){var d="\bb\tt\nn\ff\rr\"\"''\\\\";return l+q.replace(/([\u0080-\uFFFF\x00-\x1f"'\\])/g,function(f,n){if('"'===l&&"'"===f)return f;a=d.indexOf(n);if(a+1)return"\\"+d.charAt(a+1);f=n.charCodeAt().toString(16);return"\\u"+"0000".substring(f.length)+f})+l}if("object"==c){if(q.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(q)){var a=0;for(d="[";a<q.length;a++)d+=(0<a?",":"")+r(q[a],
l);return d+"]"}d="{";for(b in q)q.hasOwnProperty(b)&&(d+="function"!=typeof q[b]?(1<d.length?","+l:l)+b+l+":"+r(q[b],l):"");return d+"}"}return""+q};return{serialize:r,parse:function(q){try{return u[String.fromCharCode(101)+"val"]("("+q+")")}catch(l){}}}});L("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(u){return{callbacks:{},count:0,send:function(r){var q=this,l=u.DOM,b=void 0!==r.count?r.count:q.count,c="tinymce_jsonp_"+b;q.callbacks[b]=function(d){l.remove(c);delete q.callbacks[b];
r.callback(d)};l.add(l.doc.body,"script",{id:c,src:r.url,type:"text/javascript"});q.count++}}});L("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(u,r,q,l){var b={send:function(c){var d=0,a=function(){!c.async||4==f.readyState||1E4<d++?(c.success&&1E4>d&&200==f.status?c.success.call(c.success_scope,""+f.responseText,f,c):c.error&&c.error.call(c.error_scope,1E4<d?"TIMED_OUT":"GENERAL",f,c),f=null):r(a,10)};
c.scope=c.scope||this;c.success_scope=c.success_scope||c.scope;c.error_scope=c.error_scope||c.scope;c.async=!1===c.async?!1:!0;c.data=c.data||"";b.fire("beforeInitialize",{settings:c});var f=new u;f.overrideMimeType&&f.overrideMimeType(c.content_type);f.open(c.type||(c.data?"POST":"GET"),c.url,c.async);c.crossDomain&&(f.withCredentials=!0);c.content_type&&f.setRequestHeader("Content-Type",c.content_type);c.requestheaders&&l.each(c.requestheaders,function(n){f.setRequestHeader(n.key,n.value)});f.setRequestHeader("X-Requested-With",
"XMLHttpRequest");f=b.fire("beforeSend",{xhr:f,settings:c}).xhr;f.send(c.data);if(!c.async)return a();r(a,10)}};l.extend(b,q);return b});L("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(u,r,q){var l=q.extend,b=function(c){this.settings=l({},c);this.count=0};b.sendRPC=function(c){return(new b).send(c)};b.prototype={send:function(c){var d=c.error,a=c.success;c=l(this.settings,c);c.success=function(f,n){f=u.parse(f);"undefined"==
typeof f&&(f={error:"JSON Parse error."});f.error?d.call(c.error_scope||c.scope,f.error,n):a.call(c.success_scope||c.scope,f.result)};c.error=function(f,n){d&&d.call(c.error_scope||c.scope,f,n)};c.data=u.serialize({id:c.id||"c"+this.count++,method:c.method,params:c.params});c.content_type="application/json";r.send(c)}};return b});L("tinymce.core.util.LocalStorage",["global!document","global!window"],function(u,r){var q,l,b;try{if(r.localStorage)return r.localStorage}catch(n){}var c=u.documentElement;
(b=!!c.addBehavior)&&c.addBehavior("#default#userData");var d=function(){l=[];for(var n in q)l.push(n);f.length=l.length},a=function(){var n="";if(b){for(var A in q){var x=q[A];n+=(n?",":"")+A.length.toString(32)+","+A+","+x.length.toString(32)+","+x}c.setAttribute("tinymce",n);try{c.save("tinymce")}catch(t){}d()}};var f={key:function(n){return l[n]},getItem:function(n){return n in q?q[n]:null},setItem:function(n,A){q[n]=""+A;a()},removeItem:function(n){delete q[n];a()},clear:function(){q={};a()}};
(function(){var n=0;q={};if(b){var A=function(g){var e=void 0!==g?n+g:x.indexOf(",",n);if(-1===e||e>x.length)return null;g=x.substring(n,e);n=e+1;return g};c.load("tinymce");var x=c.getAttribute("tinymce")||"";do{var t=A();if(null===t)break;var p=A(parseInt(t,32)||0);if(null!==p){t=A();if(null===t)break;t=A(parseInt(t,32)||0);p&&(q[p]=t)}}while(null!==p);d()}})();return f});L("tinymce.core.api.Tinymce","tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.EditorCommands tinymce.core.EditorManager tinymce.core.EditorObservable tinymce.core.Env tinymce.core.Shortcuts tinymce.core.UndoManager tinymce.core.api.FocusManager tinymce.core.api.Formatter tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.api.dom.BookmarkManager tinymce.core.api.dom.RangeUtils tinymce.core.api.dom.Serializer tinymce.core.dom.ControlSelection tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.dom.Selection tinymce.core.dom.Sizzle tinymce.core.dom.TreeWalker tinymce.core.geom.Rect tinymce.core.html.DomParser tinymce.core.html.Entities tinymce.core.html.Node tinymce.core.html.SaxParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.html.Styles tinymce.core.html.Writer tinymce.core.ui.Factory tinymce.core.util.Class tinymce.core.util.Color tinymce.core.util.Delay tinymce.core.util.EventDispatcher tinymce.core.util.I18n tinymce.core.util.JSON tinymce.core.util.JSONP tinymce.core.util.JSONRequest tinymce.core.util.LocalStorage tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.VK tinymce.core.util.XHR".split(" "),
function(u,r,q,l,b,c,d,a,f,n,A,x,t,p,g,e,v,y,C,B,h,k,w,z,m,D,F,G,I,H,E,J,M,P,Q,V,W,ba,N,O,U,X,S,aa,fa,ia,ta,pa){return fa.extend(l,{geom:{Rect:z},util:{Promise:aa,Delay:V,Tools:fa,VK:ta,URI:ia,Class:P,EventDispatcher:W,Observable:S,I18n:ba,XHR:pa,JSON:N,JSONRequest:U,JSONP:O,LocalStorage:X,Color:Q},dom:{EventUtils:C,Sizzle:k,DomQuery:y,TreeWalker:w,DOMUtils:v,ScriptLoader:B,RangeUtils:p,Serializer:g,ControlSelection:e,BookmarkManager:t,Selection:h,Event:C.Event},html:{Styles:E,Entities:D,Node:F,Schema:I,
SaxParser:G,DomParser:m,Writer:J,Serializer:H},ui:{Factory:M},Env:c,AddOnManager:u,Formatter:n,UndoManager:a,EditorCommands:q,WindowManager:x,NotificationManager:A,EditorObservable:b,Shortcuts:d,Editor:r,FocusManager:f,EditorManager:l,DOM:v.DOM,ScriptLoader:B.ScriptLoader,PluginManager:u.PluginManager,ThemeManager:u.ThemeManager,trim:fa.trim,isArray:fa.isArray,is:fa.is,toArray:fa.toArray,makeMap:fa.makeMap,each:fa.each,map:fa.map,grep:fa.grep,inArray:fa.inArray,extend:fa.extend,create:fa.create,walk:fa.walk,
createNS:fa.createNS,resolve:fa.resolve,explode:fa.explode,_addCacheSuffix:fa._addCacheSuffix,isOpera:c.opera,isWebKit:c.webkit,isIE:c.ie,isGecko:c.gecko,isMac:c.mac})});L("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(u,r,q){var l=this||r;return function(){r.tinymce=q;r.tinyMCE=q;"function"!==typeof l.define||l.define.amd||(l.define("ephox/tinymce",[],u.constant(q)),l.define("tinymce.core.EditorManager",[],u.constant(q)));"object"===typeof module&&
(module.exports=q);return q}});qa("tinymce.core.api.Main")()})();

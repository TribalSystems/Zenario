(function(){var ba={},ea=function(g){var f=ba[g];if(void 0===f)throw"module ["+g+"] was undefined";if(void 0===f.instance){for(var h=ba[g],e=h.deps,c=h.defn,b=e.length,d=Array(b),a=0;a<b;++a)d[a]=ea(e[a]);e=c.apply(null,d);if(void 0===e)throw"module ["+g+"] returned undefined";h.instance=e}return f.instance},s=function(g,f,h){if("string"!==typeof g)throw"module id must be a string";if(void 0===f)throw"no dependencies for "+g;if(void 0===h)throw"no definition function for "+g;ba[g]={deps:f,defn:h,
instance:void 0}},S=function(g,f){s(g,[],function(){return f})};S("global!Array",Array);S("global!Error",Error);s("ephox.katamari.api.Fun",["global!Array","global!Error"],function(g,f){var h=function(b){return function(){return b}},e=h(!1),c=h(!0);return{noop:function(){},compose:function(b,c){return function(){return b(c.apply(null,arguments))}},constant:h,identity:function(b){return b},tripleEquals:function(b,c){return b===c},curry:function(b){for(var c=new g(arguments.length-1),a=1;a<arguments.length;a++)c[a-
1]=arguments[a];return function(){for(var a=new g(arguments.length),e=0;e<a.length;e++)a[e]=arguments[e];a=c.concat(a);return b.apply(null,a)}},not:function(b){return function(){return!b.apply(null,arguments)}},die:function(b){return function(){throw new f(b);}},apply:function(b){return b()},call:function(b){b()},never:e,always:c}});S("global!window",window);S("global!Object",Object);s("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(g,f){var h=g.never,e=g.always,c=
function(){return b},b=function(){var a=function(a){return a.isNone()},b=function(a){return a()},d=function(a){return a},a={fold:function(a,b){return a()},is:h,isSome:h,isNone:e,getOr:d,getOrThunk:b,getOrDie:function(a){throw Error(a||"error: getOrDie called on none.");},or:d,orThunk:b,map:c,ap:c,each:function(){},bind:c,flatten:c,exists:h,forall:e,filter:c,equals:a,equals_:a,toArray:function(){return[]},toString:g.constant("none()")};f.freeze&&f.freeze(a);return a}(),d=function(a){var k=function(){return a},
l=function(){return n},f=function(b){return b(a)},n={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:e,isNone:h,getOr:k,getOrThunk:k,getOrDie:k,or:l,orThunk:l,map:function(b){return d(b(a))},ap:function(b){return b.fold(c,function(b){return d(b(a))})},each:function(b){b(a)},bind:f,flatten:k,exists:f,forall:f,filter:function(c){return c(a)?n:b},equals:function(b){return b.is(a)},equals_:function(b,c){return b.fold(h,function(b){return c(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+
a+")"}};return n};return{some:d,none:c,from:function(a){return null===a||void 0===a?b:d(a)}}});S("global!String",String);s("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(g,f,h,e){var c=function(){var a=f.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){var c;a:{c=0;for(var d=a.length;c<d;++c)if(a[c]===b)break a;c=-1}return c};return void 0===a?c:b}(),b=function(a,b){return-1<c(a,b)},d=function(a,b){for(var c=a.length,
d=new f(c),e=0;e<c;e++)d[e]=b(a[e],e,a);return d},a=function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)},k=function(a,b){for(var c=a.length-1;0<=c;c--)b(a[c],c,a)},l=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var k=a[d];b(k,d,a)&&c.push(k)}return c},p=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c],c,a))return g.some(c);return g.none()},n=f.prototype.push,m=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!f.prototype.isPrototypeOf(a[c]))throw new h("Arr.flatten item "+c+" was not an array, input: "+
a);n.apply(b,a[c])}return b},q=function(a,b){for(var c=0,d=a.length;c<d;++c)if(!0!==b(a[c],c,a))return!1;return!0},t=f.prototype.slice;return{map:d,each:a,eachr:k,partition:function(a,b){for(var c=[],d=[],e=0,k=a.length;e<k;e++){var y=a[e];(b(y,e,a)?c:d).push(y)}return{pass:c,fail:d}},filter:l,groupBy:function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],k=0,y=a.length;k<y;k++){var m=a[k],l=b(m);l!==c&&(d.push(e),e=[]);c=l;e.push(m)}0!==e.length&&d.push(e);return d},indexOf:function(a,
b){var d=c(a,b);return-1===d?g.none():g.some(d)},foldr:function(a,b,c){k(a,function(a){c=b(c,a)});return c},foldl:function(b,c,d){a(b,function(a){d=c(d,a)});return d},find:function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return g.some(e)}return g.none()},findIndex:p,flatten:m,bind:function(a,b){var c=d(a,b);return m(c)},forall:q,exists:function(a,b){return p(a,b).isSome()},contains:b,equal:function(a,b){return a.length===b.length&&q(a,function(a,c){return a===b[c]})},reverse:function(a){a=
t.call(a,0);a.reverse();return a},chunk:function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},difference:function(a,c){return l(a,function(a){return!b(c,a)})},mapToObject:function(a,b){for(var c={},d=0,k=a.length;d<k;d++){var m=a[d];c[e(m)]=b(m,d)}return c},pure:function(a){return[a]},sort:function(a,b){var c=t.call(a,0);c.sort(b);return c},range:function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},head:function(a){return 0===a.length?g.none():g.some(a[0])},
last:function(a){return 0===a.length?g.none():g.some(a[a.length-1])}}});S("global!document",document);s("ephox.katamari.api.Global",[],function(){return"undefined"!==typeof window?window:Function("return this;")()});s("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(g){var f=function(e,c){for(var b=void 0!==c?c:g,d=0;d<e.length&&void 0!==b&&null!==b;++d)b=b[e[d]];return b},h=function(e,c){for(var b=void 0!==c?c:g,d=0;d<e.length;++d){var a=e[d];if(void 0===b[a]||null===b[a])b[a]=
{};b=b[a]}return b};return{path:f,resolve:function(e,c){var b=e.split(".");return f(b,c)},forge:h,namespace:function(e,c){var b=e.split(".");return h(b,c)}}});s("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(g){return{getOrDie:function(f,h){var e=g.resolve(f,h);if(void 0===e)throw f+" not available on this browser";return e}}});s("ephox.sand.api.URL",["ephox.sand.util.Global"],function(g){return{createObjectURL:function(f){return g.getOrDie("URL").createObjectURL(f)},revokeObjectURL:function(f){g.getOrDie("URL").revokeObjectURL(f)}}});
S("global!matchMedia",matchMedia);S("global!navigator",navigator);s("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(g,f,h,e,c){var b=e.userAgent,d,a,k,l,p,n,m,q,t;d=c.opera&&c.opera.buildNumber;m=/Android/.test(b);a=/WebKit/.test(b);k=(k=!a&&!d&&/MSIE/gi.test(b)&&/Explorer/gi.test(e.appName))&&/MSIE (\w+)\./.exec(b)[1];l=-1==b.indexOf("Trident/")||-1==b.indexOf("rv:")&&-1==e.appName.indexOf("Netscape")?!1:11;e=-1==b.indexOf("Edge/")||
k||l?!1:12;k=k||l||e;l=!a&&!l&&/Gecko/.test(b);p=-1!=b.indexOf("Mac");n=/(iPad|iPhone)/.test(b);g="FormData"in c&&"FileReader"in c&&"URL"in c&&!!g.createObjectURL;q=("matchMedia"in c?h("only screen and (max-device-width: 480px)").matches:!1)&&(m||n);h=("matchMedia"in c?h("only screen and (min-width: 800px)").matches:!1)&&(m||n);t=-1!=b.indexOf("Windows Phone");e&&(a=!1);b=!n||g||534<=b.match(/AppleWebKit\/(\d*)/)[1];return{opera:d,webkit:a,ie:k,gecko:l,mac:p,iOS:n,android:m,contentEditable:b,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
caretAfter:8!=k,range:c.getSelection&&"Range"in c,documentMode:k&&!e?f.documentMode||7:10,fileApi:g,ceFalse:!1===k||8<k,canHaveCSP:!1===k||11<k,desktop:!q&&!h,windowsPhone:t}});S("global!clearInterval",clearInterval);S("global!clearTimeout",clearTimeout);S("global!setInterval",setInterval);S("global!setTimeout",setTimeout);s("tinymce.core.util.Promise",[],function(){function g(a,b){return function(){a.apply(b,arguments)}}function f(b){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");
if("function"!==typeof b)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];a(b,g(e,this),g(c,this))}function h(a){var b=this;null===this._state?this._deferreds.push(a):k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)(b._state?a.resolve:a.reject)(b._value);else{var d;try{d=c(b._value)}catch(e){a.reject(e);return}a.resolve(d)}})}function e(d){try{if(d===this)throw new TypeError("A promise cannot be resolved with itself.");if(d&&("object"===typeof d||
"function"===typeof d)){var k=d.then;if("function"===typeof k){a(g(k,d),g(e,this),g(c,this));return}}this._state=!0;this._value=d;b.call(this)}catch(m){c.call(this,m)}}function c(a){this._state=!1;this._value=a;b.call(this)}function b(){for(var a=0,b=this._deferreds.length;a<b;a++)h.call(this,this._deferreds[a]);this._deferreds=null}function d(a,b,c,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=c;this.reject=d}function a(a,b,c){var d=!1;
try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){d||(d=!0,c(e))}}if(window.Promise)return window.Promise;var k=f.immediateFn||"function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};f.prototype["catch"]=function(a){return this.then(null,a)};f.prototype.then=function(a,b){var c=this;return new f(function(e,k){h.call(c,new d(a,b,e,k))})};f.all=function(){var a=Array.prototype.slice.call(1===
arguments.length&&l(arguments[0])?arguments[0]:arguments);return new f(function(b,c){function d(k,r){try{if(r&&("object"===typeof r||"function"===typeof r)){var l=r.then;if("function"===typeof l){l.call(r,function(a){d(k,a)},c);return}}a[k]=r;0===--e&&b(a)}catch(h){c(h)}}if(0===a.length)return b([]);for(var e=a.length,k=0;k<a.length;k++)d(k,a[k])})};f.resolve=function(a){return a&&"object"===typeof a&&a.constructor===f?a:new f(function(b){b(a)})};f.reject=function(a){return new f(function(b,c){c(a)})};
f.race=function(a){return new f(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};return f});s("tinymce.core.util.Delay","global!clearInterval global!clearTimeout global!document global!setInterval global!setTimeout global!window tinymce.core.util.Promise".split(" "),function(g,f,h,e,c,b,d){var a,k=function(a,c){var d,e=b.requestAnimationFrame,k=["ms","moz","webkit"],l=function(a){b.setTimeout(a,0)};for(d=0;d<k.length&&!e;d++)e=b[k[d]+"RequestAnimationFrame"];e||(e=l);e(a,c)},l=function(a,
b){"number"!=typeof b&&(b=0);return c(a,b)},p=function(a,b){"number"!=typeof b&&(b=1);return e(a,b)},n=function(a,b){var c,d;d=function(){var d=arguments;f(c);c=l(function(){a.apply(this,d)},b)};d.stop=function(){f(c)};return d};return{requestAnimationFrame:function(b,c){a?a.then(b):a=(new d(function(a){c||(c=h.body);k(a,c)})).then(b)},setTimeout:l,setInterval:p,setEditorTimeout:function(a,b,c){return l(function(){a.removed||b()},c)},setEditorInterval:function(a,b,c){var d;return d=p(function(){a.removed?
g(d):b()},c)},debounce:n,throttle:n,clearInterval:function(a){return g(a)},clearTimeout:function(a){return f(a)}}});s("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(g,f,h,e){var c=/^(?:mouse|contextmenu)|click/,b={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},d=function(){return!1},a=function(){return!0},k=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):
a.attachEvent&&a.attachEvent("on"+b,c)},l=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)},p=function(a,b){var c,d=b;(c=a.path)&&0<c.length&&(d=c[0]);a.deepPath&&(c=a.deepPath())&&0<c.length&&(d=c[0]);return d},n=function(e,k){var m,l=k||{};for(m in e)b[m]||(l[m]=e[m]);l.target||(l.target=l.srcElement||g);h.experimentalShadowDom&&(l.target=p(e,l.target));if(e&&c.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var f=l.target.ownerDocument||
g;m=f.documentElement;f=f.body;l.pageX=e.clientX+(m&&m.scrollLeft||f&&f.scrollLeft||0)-(m&&m.clientLeft||f&&f.clientLeft||0);l.pageY=e.clientY+(m&&m.scrollTop||f&&f.scrollTop||0)-(m&&m.clientTop||f&&f.clientTop||0)}l.preventDefault=function(){l.isDefaultPrevented=a;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)};l.stopPropagation=function(){l.isPropagationStopped=a;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)};l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=
a;l.stopPropagation()};!1===(l.isDefaultPrevented===a||l.isDefaultPrevented===d)&&(l.isDefaultPrevented=d,l.isPropagationStopped=d,l.isImmediatePropagationStopped=d);"undefined"==typeof l.metaKey&&(l.metaKey=!1);return l},m=function(a,b,c){var d=a.document,m={type:"ready"};if(c.domLoaded)b(m);else{var f=function(){return"complete"===d.readyState||"interactive"===d.readyState&&d.body},u=function(){c.domLoaded||(c.domLoaded=!0,b(m))},y=function(){f()&&(l(d,"readystatechange",y),u())},B=function(){try{d.documentElement.doScroll("left")}catch(a){e.setTimeout(B);
return}u()};!d.addEventListener||h.ie&&11>h.ie?(k(d,"readystatechange",y),d.documentElement.doScroll&&a.self===a.top&&B()):f()?u():k(a,"DOMContentLoaded",u);k(a,"load",u)}},q=function(){var a=this,b={},c,d,e,h,u;d="mce-data-"+(+new Date).toString(32);h="onmouseenter"in g.documentElement;e="onfocusin"in g.documentElement;u={mouseenter:"mouseover",mouseleave:"mouseout"};c=1;a.domLoaded=!1;a.events=b;var y=function(a,c){var d,e,k,y;if(d=(d=b[c])&&d[a.type])for(e=0,k=d.length;e<k&&((y=d[e])&&!1===y.func.call(y.scope,
a)&&a.preventDefault(),!a.isImmediatePropagationStopped());e++);};a.bind=function(l,A,C,q){var g,p,E,H,F,L,K,s=function(a){y(n(a||f.event),g)};if(l&&3!==l.nodeType&&8!==l.nodeType){l[d]?g=l[d]:(g=c++,l[d]=g,b[g]={});q=q||l;A=A.split(" ");for(E=A.length;E--;)H=A[E],L=s,F=K=!1,"DOMContentLoaded"===H&&(H="ready"),a.domLoaded&&"ready"===H&&"complete"==l.readyState?C.call(q,n({type:H})):(h||(F=u[H])&&(L=function(a){var b,c;b=a.currentTarget;if((c=a.relatedTarget)&&b.contains)c=b.contains(c);else for(;c&&
c!==b;)c=c.parentNode;c||(a=n(a||f.event),a.type="mouseout"===a.type?"mouseleave":"mouseenter",a.target=b,y(a,g))}),e||"focusin"!==H&&"focusout"!==H||(K=!0,F="focusin"===H?"focus":"blur",L=function(a){a=n(a||f.event);a.type="focus"===a.type?"focusin":"focusout";y(a,g)}),(p=b[g][H])?"ready"===H&&a.domLoaded?C({type:H}):p.push({func:C,scope:q}):(b[g][H]=p=[{func:C,scope:q}],p.fakeName=F,p.capture=K,p.nativeHandler=L,"ready"===H?m(l,L,a):k(l,F||H,L,K)));l=p=0;return C}};a.unbind=function(c,e,k){var y,
m,u,h,f,q;if(!c||3===c.nodeType||8===c.nodeType)return a;if(y=c[d]){q=b[y];if(e)for(e=e.split(" "),u=e.length;u--;){if(f=e[u],m=q[f]){if(k)for(h=m.length;h--;)if(m[h].func===k){var g=m.nativeHandler,n=m.fakeName,v=m.capture;m=m.slice(0,h).concat(m.slice(h+1));m.nativeHandler=g;m.fakeName=n;m.capture=v;q[f]=m}k&&0!==m.length||(delete q[f],l(c,m.fakeName||f,m.nativeHandler,m.capture))}}else{for(f in q)m=q[f],l(c,m.fakeName||f,m.nativeHandler,m.capture);q={}}for(f in q)return a;delete b[y];try{delete c[d]}catch(p){c[d]=
null}}return a};a.fire=function(b,c,e){if(!b||3===b.nodeType||8===b.nodeType)return a;e=n(null,e);e.type=c;e.target=b;do(c=b[d])&&y(e,c),b=b.parentNode||b.ownerDocument||b.defaultView||b.parentWindow;while(b&&!e.isPropagationStopped());return a};a.clean=function(b){var c,e,k=a.unbind;if(!b||3===b.nodeType||8===b.nodeType)return a;b[d]&&k(b);b.getElementsByTagName||(b=b.document);if(b&&b.getElementsByTagName)for(k(b),e=b.getElementsByTagName("*"),c=e.length;c--;)b=e[c],b[d]&&k(b);return a};a.destroy=
function(){b={}};a.cancel=function(a){a&&(a.preventDefault(),a.stopImmediatePropagation());return!1}};q.Event=new q;q.Event.bind(f,"ready",function(){});return q});s("tinymce.core.dom.Sizzle",[],function(){function g(b,c,d,e){var k,m,u,h,f;(c?c.ownerDocument||c:M)!==E&&G(c);c=c||E;d=d||[];if(!b||"string"!==typeof b)return d;if(1!==(h=c.nodeType)&&9!==h)return[];if(F&&!e){if(k=la.exec(b))if(u=k[1])if(9===h)if((m=c.getElementById(u))&&m.parentNode){if(m.id===u)return d.push(m),d}else return d;else{if(c.ownerDocument&&
(m=c.ownerDocument.getElementById(u))&&s(c,m)&&m.id===u)return d.push(m),d}else{if(k[2])return Y.apply(d,c.getElementsByTagName(b)),d;if((u=k[3])&&x.getElementsByClassName)return Y.apply(d,c.getElementsByClassName(u)),d}if(x.qsa&&(!L||!L.test(b))){m=k=I;u=c;f=9===h&&b;if(1===h&&"object"!==c.nodeName.toLowerCase()){h=y(b);(k=c.getAttribute("id"))?m=k.replace(ma,"\\$&"):c.setAttribute("id",m);m="[id='"+m+"'] ";for(u=h.length;u--;)h[u]=m+l(h[u]);u=ha.test(b)&&a(c.parentNode)||c;f=h.join(",")}if(f)try{return Y.apply(d,
u.querySelectorAll(f)),d}catch(r){}finally{k||c.removeAttribute("id")}}}return A(b.replace(fa,"$1"),c,d,e)}function f(){function a(c,d){b.push(c+" ")>v.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function h(a){a[I]=!0;return a}function e(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Z)-(~a.sourceIndex||Z);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function c(a){return function(b){return"input"===b.nodeName.toLowerCase()&&
b.type===a}}function b(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function d(a){return h(function(b){b=+b;return h(function(c,d){for(var e,k=a([],c.length,b),m=k.length;m--;)c[e=k[m]]&&(c[e]=!(d[e]=c[e]))})})}function a(a){return a&&typeof a.getElementsByTagName!==W&&a}function k(){}function l(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=c&&"parentNode"===d,k=Q++;return b.first?function(b,c,k){for(;b=
b[d];)if(1===b.nodeType||e)return a(b,c,k)}:function(b,c,m){var y,l,u=[N,k];if(m)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,m))return!0}else for(;b=b[d];)if(1===b.nodeType||e){l=b[I]||(b[I]={});if((y=l[d])&&y[0]===N&&y[1]===k)return u[2]=y[2];l[d]=u;if(u[2]=a(b,c,m))return!0}}}function n(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function m(a,b,c,d,e){for(var k,m=[],y=0,l=a.length,u=null!=b;y<l;y++)if(k=a[y])if(!c||c(k,d,e))m.push(k),u&&b.push(y);
return m}function q(a,b,c,d,e,k){d&&!d[I]&&(d=q(d));e&&!e[I]&&(e=q(e,k));return h(function(k,y,l,u){var h,f,r=[],A=[],q=y.length,C;if(!(C=k)){C=b||"*";for(var n=l.nodeType?[l]:l,v=[],t=0,B=n.length;t<B;t++)g(C,n[t],v);C=v}C=!a||!k&&b?C:m(C,r,a,l,u);n=c?e||(k?a:q||d)?[]:y:C;c&&c(C,n,l,u);if(d)for(h=m(n,A),d(h,[],l,u),l=h.length;l--;)if(f=h[l])n[A[l]]=!(C[A[l]]=f);if(k){if(e||a){if(e){h=[];for(l=n.length;l--;)(f=n[l])&&h.push(C[l]=f);e(null,n=[],h,u)}for(l=n.length;l--;)(f=n[l])&&-1<(h=e?ca.call(k,
f):r[l])&&(k[h]=!(y[h]=f))}}else n=m(n===y?n.splice(q,n.length):n),e?e(null,y,n,u):Y.apply(y,n)})}function t(a){var b,c,d,e=a.length,k=v.relative[a[0].type];c=k||v.relative[" "];for(var m=k?1:0,y=p(function(a){return a===b},c,!0),u=p(function(a){return-1<ca.call(b,a)},c,!0),h=[function(a,c,d){return!k&&(d||c!==C)||((b=c).nodeType?y(a,c,d):u(a,c,d))}];m<e;m++)if(c=v.relative[a[m].type])h=[p(n(h),c)];else{c=v.filter[a[m].type].apply(null,a[m].matches);if(c[I]){for(d=++m;d<e&&!v.relative[a[d].type];d++);
return q(1<m&&n(h),1<m&&l(a.slice(0,m-1).concat({value:" "===a[m-2].type?"*":""})).replace(fa,"$1"),c,m<d&&t(a.slice(m,d)),d<e&&t(a=a.slice(d)),d<e&&l(a))}h.push(c)}return n(h)}function r(a,b){var c=0<b.length,d=0<a.length,e=function(e,k,y,l,u){var h,f,r,A=0,q="0",n=e&&[],t=[],B=C,x=e||d&&v.find.TAG("*",u),p=N+=null==B?1:Math.random()||0.1,z=x.length;for(u&&(C=k!==E&&k);q!==z&&null!=(h=x[q]);q++){if(d&&h){for(f=0;r=a[f++];)if(r(h,k,y)){l.push(h);break}u&&(N=p)}c&&((h=!r&&h)&&A--,e&&n.push(h))}A+=
q;if(c&&q!==A){for(f=0;r=b[f++];)r(n,t,k,y);if(e){if(0<A)for(;q--;)n[q]||t[q]||(t[q]=ia.call(l));t=m(t)}Y.apply(l,t);u&&!e&&0<t.length&&1<A+b.length&&g.uniqueSort(l)}u&&(N=p,C=B);return n};return c?h(e):e}var w,x,v,z,u,y,B,A,C,D,J,G,E,H,F,L,K,s,I="sizzle"+-new Date,M=window.document,N=0,Q=0,T=f(),X=f(),R=f(),U=function(a,b){a===b&&(J=!0);return 0},W="undefined",Z=-2147483648,P={}.hasOwnProperty,V=[],ia=V.pop,da=V.push,Y=V.push,ka=V.slice,ca=V.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===
a)return b;return-1},fa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,na=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,oa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,S=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,pa=RegExp(":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
qa=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ga={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},ba=/^(?:input|select|textarea|button)$/i,ea=/^h\d$/i,ja=/^[^{]+\{\s*\[native \w/,la=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ha=/[+~]/,ma=/'|\\/g,$=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,aa=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{Y.apply(V=ka.call(M.childNodes),M.childNodes),V[M.childNodes.length].nodeType}catch(ra){Y={apply:V.length?function(a,b){da.apply(a,ka.call(b))}:function(a,b){for(var c=
a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=g.support={};u=g.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};G=g.setDocument=function(a){var b,c=a?a.ownerDocument||a:M;a=c.defaultView;if(c===E||9!==c.nodeType||!c.documentElement)return E;E=c;H=c.documentElement;F=!u(c);var d;if(d=a){a:{try{b=a.top;break a}catch(k){}b=null}d=a!==b}d&&(a.addEventListener?a.addEventListener("unload",function(){G()},!1):a.attachEvent&&a.attachEvent("onunload",function(){G()}));
x.attributes=!0;x.getElementsByTagName=!0;x.getElementsByClassName=ja.test(c.getElementsByClassName);x.getById=!0;v.find.ID=function(a,b){if(typeof b.getElementById!==W&&F){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}};v.filter.ID=function(a){var b=a.replace($,aa);return function(a){return a.getAttribute("id")===b}};v.find.TAG=x.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==W)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,k=b.getElementsByTagName(a);
if("*"===a){for(;c=k[e++];)1===c.nodeType&&d.push(c);return d}return k};v.find.CLASS=x.getElementsByClassName&&function(a,b){if(F)return b.getElementsByClassName(a)};K=[];L=[];x.disconnectedMatch=!0;L=L.length&&RegExp(L.join("|"));K=K.length&&RegExp(K.join("|"));s=(b=ja.test(H.compareDocumentPosition))||ja.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&
16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};U=b?function(a,b){if(a===b)return J=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;if(d)return d;d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return d&1||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===M&&s(M,a)?-1:b===c||b.ownerDocument===M&&s(M,b)?1:D?ca.call(D,a)-ca.call(D,b):0:d&4?-1:1}:function(a,b){if(a===b)return J=!0,0;var d,k=0;d=a.parentNode;
var m=b.parentNode,y=[a],l=[b];if(!d||!m)return a===c?-1:b===c?1:d?-1:m?1:D?ca.call(D,a)-ca.call(D,b):0;if(d===m)return e(a,b);for(d=a;d=d.parentNode;)y.unshift(d);for(d=b;d=d.parentNode;)l.unshift(d);for(;y[k]===l[k];)k++;return k?e(y[k],l[k]):y[k]===M?-1:l[k]===M?1:0};return c};g.matches=function(a,b){return g(a,null,null,b)};g.matchesSelector=function(a,b){(a.ownerDocument||a)!==E&&G(a);b=b.replace(S,"='$1']");if(x.matchesSelector&&F&&!(K&&K.test(b)||L&&L.test(b)))try{var c=(void 0).call(a,b);
if(c||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<g(b,E,null,[a]).length};g.contains=function(a,b){(a.ownerDocument||a)!==E&&G(a);return s(a,b)};g.attr=function(a,b){(a.ownerDocument||a)!==E&&G(a);var c=v.attrHandle[b.toLowerCase()],c=c&&P.call(v.attrHandle,b.toLowerCase())?c(a,b,!F):void 0;return void 0!==c?c:x.attributes||!F?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};g.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};g.uniqueSort=function(a){var b,c=[],d=0,e=0;J=!x.detectDuplicates;D=!x.sortStable&&a.slice(0);a.sort(U);if(J){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}D=null;return a};z=g.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d++];)c+=z(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===b||4===b)return a.nodeValue;return c};v=g.selectors={cacheLength:50,createPseudo:h,
match:ga,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace($,aa);a[3]=(a[3]||a[4]||a[5]||"").replace($,aa);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]);
return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(ga.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&pa.test(c)&&(b=y(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace($,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=T[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&
T(a,function(a){return b.test("string"===typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){d=g.attr(d,a);if(null==d)return"!="===b;if(!b)return!0;d+="";return"="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.slice(-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,d,e){var k="nth"!==a.slice(0,3),m=
"last"!==a.slice(-4),y="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,l){var u,h,f,r,A;c=k!==m?"nextSibling":"previousSibling";var q=b.parentNode,C=y&&b.nodeName.toLowerCase();l=!l&&!y;if(q){if(k){for(;c;){for(h=b;h=h[c];)if(y?h.nodeName.toLowerCase()===C:1===h.nodeType)return!1;A=c="only"===a&&!A&&"nextSibling"}return!0}A=[m?q.firstChild:q.lastChild];if(m&&l)for(l=q[I]||(q[I]={}),u=l[a]||[],r=u[0]===N&&u[1],f=u[0]===N&&u[2],h=r&&q.childNodes[r];h=++r&&h&&h[c]||(f=
r=0)||A.pop();){if(1===h.nodeType&&++f&&h===b){l[a]=[N,r,f];break}}else if(l&&(u=(b[I]||(b[I]={}))[a])&&u[0]===N)f=u[1];else for(;(h=++r&&h&&h[c]||(f=r=0)||A.pop())&&((y?h.nodeName.toLowerCase()!==C:1!==h.nodeType)||!++f||(l&&((h[I]||(h[I]={}))[a]=[N,f]),h!==b)););f-=e;return f===d||0===f%d&&0<=f/d}}},PSEUDO:function(a,b){var c,d=v.pseudos[a]||v.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[I]?d(b):1<d.length?(c=[a,a,"",b],v.setFilters.hasOwnProperty(a.toLowerCase())?h(function(a,
c){for(var e,k=d(a,b),m=k.length;m--;)e=ca.call(a,k[m]),a[e]=!(c[e]=k[m])}):function(a){return d(a,0,c)}):d}},pseudos:{not:h(function(a){var b=[],c=[],d=B(a.replace(fa,"$1"));return d[I]?h(function(a,b,c,e){e=d(a,null,e,[]);for(var k=a.length;k--;)if(c=e[k])a[k]=!(b[k]=c)}):function(a,e,k){b[0]=a;d(b,null,k,c);return!c.pop()}}),has:h(function(a){return function(b){return 0<g(a,b).length}}),contains:h(function(a){a=a.replace($,aa);return function(b){return-1<(b.textContent||b.innerText||z(b)).indexOf(a)}}),
lang:h(function(a){qa.test(a||"")||g.error("unsupported lang: "+a);a=a.replace($,aa).toLowerCase();return function(b){var c;do if(c=F?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===H},focus:function(a){return a===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(a.type||
a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return ea.test(a.nodeName)},input:function(a){return ba.test(a.nodeName)},
button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:d(function(){return[0]}),last:d(function(a,b){return[b-1]}),eq:d(function(a,b,c){return[0>c?c+b:c]}),even:d(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:d(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:d(function(a,b,c){for(b=
0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:d(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};v.pseudos.nth=v.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[w]=c(w);for(w in{submit:!0,reset:!0})v.pseudos[w]=b(w);k.prototype=v.filters=v.pseudos;v.setFilters=new k;y=g.tokenize=function(a,b){var c,d,e,k,m,y,l;if(m=X[a+" "])return b?0:m.slice(0);m=a;y=[];for(l=v.preFilter;m;){if(!c||(d=na.exec(m)))d&&(m=m.slice(d[0].length)||m),y.push(e=[]);c=!1;if(d=oa.exec(m))c=
d.shift(),e.push({value:c,type:d[0].replace(fa," ")}),m=m.slice(c.length);for(k in v.filter)!(d=ga[k].exec(m))||l[k]&&!(d=l[k](d))||(c=d.shift(),e.push({value:c,type:k,matches:d}),m=m.slice(c.length));if(!c)break}return b?m.length:m?g.error(a):X(a,y).slice(0)};B=g.compile=function(a,b){var c,d=[],e=[],k=R[a+" "];if(!k){b||(b=y(a));for(c=b.length;c--;)k=t(b[c]),k[I]?d.push(k):e.push(k);k=R(a,r(e,d));k.selector=a}return k};A=g.select=function(b,c,d,e){var k,m,u,h,f="function"===typeof b&&b,r=!e&&y(b=
f.selector||b);d=d||[];if(1===r.length){m=r[0]=r[0].slice(0);if(2<m.length&&"ID"===(u=m[0]).type&&x.getById&&9===c.nodeType&&F&&v.relative[m[1].type]){c=(v.find.ID(u.matches[0].replace($,aa),c)||[])[0];if(!c)return d;f&&(c=c.parentNode);b=b.slice(m.shift().value.length)}for(k=ga.needsContext.test(b)?0:m.length;k--;){u=m[k];if(v.relative[h=u.type])break;if(h=v.find[h])if(e=h(u.matches[0].replace($,aa),ha.test(m[0].type)&&a(c.parentNode)||c)){m.splice(k,1);b=e.length&&l(m);if(!b)return Y.apply(d,e),
d;break}}}(f||B(b,r))(e,c,!F,d,ha.test(b)&&a(c.parentNode)||c);return d};x.sortStable=I.split("").sort(U).join("")===I;x.detectDuplicates=!!J;G();x.sortDetached=!0;return g});s("tinymce.core.util.Arr",[],function(){var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=function(e,c,b){var d,a;if(!e)return 0;b=b||e;if(void 0!==e.length)for(d=0,a=e.length;d<a;d++){if(!1===c.call(b,e[d],d,e))return 0}else for(d in e)if(e.hasOwnProperty(d)&&!1===c.call(b,e[d],d,
e))return 0;return 1},h=function(e,c,b){var d,a;d=0;for(a=e.length;d<a;d++)if(c.call(b,e[d],d,e))return d;return-1};return{isArray:g,toArray:function(e){var c=e,b,d;if(!g(e))for(c=[],b=0,d=e.length;b<d;b++)c[b]=e[b];return c},each:f,map:function(e,c){var b=[];f(e,function(d,a){b.push(c(d,a,e))});return b},filter:function(e,c){var b=[];f(e,function(d,a){c&&!c(d,a,e)||b.push(d)});return b},indexOf:function(e,c){var b,d;if(e)for(b=0,d=e.length;b<d;b++)if(e[b]===c)return b;return-1},reduce:function(e,
c,b,d){var a=0;for(3>arguments.length&&(b=e[0]);a<e.length;a++)b=c.call(d,b,e[a],a);return b},findIndex:h,find:function(e,c,b){c=h(e,c,b);if(-1!==c)return e[c]},last:function(e){return e[e.length-1]}}});s("tinymce.core.util.Tools",["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(g,f,h){var e=/^\s*|\s*$/g,c=function(a){return null===a||void 0===a?"":(""+a).replace(e,"")},b=function(a,b){return b?"array"==b&&h.isArray(a)?!0:typeof a==b:void 0!==a},d=function(a,b,c,e){e=e||this;
a&&(c&&(a=a[c]),h.each(a,function(a,m){if(!1===b.call(e,a,m,c))return!1;d(a,b,c,e)}))};return{trim:c,isArray:h.isArray,is:b,toArray:h.toArray,makeMap:function(a,b,c){a=a||[];"string"==typeof a&&(a=a.split(b||","));c=c||{};for(b=a.length;b--;)c[a[b]]={};return c},each:h.each,map:h.map,grep:h.filter,inArray:h.indexOf,hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},extend:function(a,b){var c,d,e,m=arguments,h;c=1;for(d=m.length;c<d;c++)for(e in b=m[c],b)b.hasOwnProperty(e)&&(h=
b[e],void 0!==h&&(a[e]=h));return a},create:function(a,b,c){var d,e,m,h,f,r=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);m=a[3].match(/(^|\.)(\w+)$/i)[2];e=this.createNS(a[3].replace(/\.\w+$/,""),c);if(!e[m])if("static"==a[2]){if(e[m]=b,this.onCreate)this.onCreate(a[2],a[3],e[m])}else b[m]||(b[m]=function(){},r=1),e[m]=b[m],this.extend(e[m].prototype,b),a[5]&&(d=this.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],f=e[m],e[m]=r?function(){return d[h].apply(this,arguments)}:function(){this.parent=
d[h];return f.apply(this,arguments)},e[m].prototype[m]=e[m],this.each(d,function(a,b){e[m].prototype[b]=d[b]}),this.each(b,function(a,b){d[b]?e[m].prototype[b]=function(){this.parent=d[b];return a.apply(this,arguments)}:b!=m&&(e[m].prototype[b]=a)})),this.each(b["static"],function(a,b){e[m][b]=a})},walk:d,createNS:function(a,b){var c,d;b=b||g;a=a.split(".");for(c=0;c<a.length;c++)d=a[c],b[d]||(b[d]={}),b=b[d];return b},resolve:function(a,b){var c,d;b=b||g;a=a.split(".");c=0;for(d=a.length;c<d&&(b=
b[a[c]],b);c++);return b},explode:function(a,d){return!a||b(a,"array")?a:h.map(a.split(d||","),c)},_addCacheSuffix:function(a){var b=f.cacheSuffix;b&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}}});s("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(g,f,h,e,c){var b=Array.prototype.push,d=Array.prototype.slice,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=f.Event,l=c.makeMap("children,contents,next,prev"),
p=function(a){return"undefined"!==typeof a},n=function(a,b){var c,d,e;b=b||g;e=b.createElement("div");c=b.createDocumentFragment();for(e.innerHTML=a;d=e.firstChild;)c.appendChild(d);return c},m=function(a,b,c,d){var e;if("string"===typeof b)b=n(b,D(a[0]));else if(b.length&&!b.nodeType){b=u.makeArray(b);if(d)for(e=b.length-1;0<=e;e--)m(a,b[e],c,d);else for(e=0;e<b.length;e++)m(a,b[e],c,d);return a}if(b.nodeType)for(e=a.length;e--;)c.call(a[e],b);return a},q=function(a,b,c){var d,e;b=u(b)[0];a.each(function(){c&&
d==this.parentNode||(d=this.parentNode,e=b.cloneNode(!1),this.parentNode.insertBefore(e,this));e.appendChild(this)});return a},t=c.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),r=c.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),w={"for":"htmlFor","class":"className",readonly:"readOnly"},x={"float":"cssFloat"},v={},z={},u=function(a,b){return new u.fn.init(a,b)},y=/^\s*|\s*$/g,B=function(a){return null===
a||void 0===a?"":(""+a).replace(y,"")},A=function(a,b){var c,d,e;if(a)if(c=a.length,void 0===c)for(d in a){if(a.hasOwnProperty(d)&&(e=a[d],!1===b.call(e,d,e)))break}else for(d=0;d<c&&(e=a[d],!1!==b.call(e,d,e));d++);return a},C=function(a,b){var c=[];A(a,function(a,d){b(d,a)&&c.push(d)});return c},D=function(a){return a?9==a.nodeType?a:a.ownerDocument:g};u.fn=u.prototype={constructor:u,selector:"",context:null,length:0,init:function(c,d){var e,k;if(!c)return this;if(c.nodeType)return this.context=
this[0]=c,this.length=1,this;if(d&&d.nodeType)this.context=d;else{if(d)return u(c).attr(d);this.context=d=g}if("string"===typeof c)if(this.selector=c,e="<"===c.charAt(0)&&">"===c.charAt(c.length-1)&&3<=c.length?[null,c,null]:a.exec(c))if(e[1])for(k=n(c,D(d)).firstChild;k;)b.call(this,k),k=k.nextSibling;else{k=D(d).getElementById(e[2]);if(!k)return this;if(k.id!==e[2])return this.find(c);this.length=1;this[0]=k}else return u(d).find(c);else this.add(c,!1);return this},toArray:function(){return c.toArray(this)},
add:function(a,c){var d,e;if("string"===typeof a)return this.add(u(a));if(!1!==c)for(d=u.unique(this.toArray().concat(u.makeArray(a))),this.length=d.length,e=0;e<d.length;e++)this[e]=d[e];else b.apply(this,u.makeArray(a));return this},attr:function(a,b){var c=this,d;if("object"===typeof a)A(a,function(a,b){c.attr(a,b)});else if(p(b))this.each(function(){var c;1===this.nodeType&&((c=v[a])&&c.set?c.set(this,b):null===b?this.removeAttribute(a,2):this.setAttribute(a,b,2))});else{if(c[0]&&1===c[0].nodeType){if((d=
v[a])&&d.get)return d.get(c[0],a);if(r[a])return c.prop(a)?a:void 0;b=c[0].getAttribute(a,2);null===b&&(b=void 0)}return b}return c},removeAttr:function(a){return this.attr(a,null)},prop:function(a,b){var c=this;a=w[a]||a;if("object"===typeof a)A(a,function(a,b){c.prop(a,b)});else if(p(b))this.each(function(){1==this.nodeType&&(this[a]=b)});else return c[0]&&c[0].nodeType&&a in c[0]?c[0][a]:b;return c},css:function(a,b){var c=this,d,e,k=function(a){return a.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},
m=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"===typeof a)A(a,function(a,b){c.css(a,b)});else if(p(b))a=k(a),"number"!==typeof b||t[a]||(b+="px"),c.each(function(){var c=this.style;if((e=z[a])&&e.set)e.set(this,b);else{try{this.style[x[a]||a]=b}catch(d){}if(null===b||""===b)c.removeProperty?c.removeProperty(m(a)):c.removeAttribute(a)}});else{d=c[0];if((e=z[a])&&e.get)return e.get(d);if(d.ownerDocument.defaultView)try{return d.ownerDocument.defaultView.getComputedStyle(d,
null).getPropertyValue(m(a))}catch(y){return}else if(d.currentStyle)return d.currentStyle[k(a)]}return c},remove:function(){for(var a,b=this.length;b--;)a=this[b],k.clean(a),a.parentNode&&a.parentNode.removeChild(a);return this},empty:function(){for(var a,b=this.length;b--;)for(a=this[b];a.firstChild;)a.removeChild(a.firstChild);return this},html:function(a){var b;if(p(a)){b=this.length;try{for(;b--;)this[b].innerHTML=a}catch(c){u(this[b]).empty().append(a)}return this}return this[0]?this[0].innerHTML:
""},text:function(a){var b;if(p(a)){for(b=this.length;b--;)"innerText"in this[b]?this[b].innerText=a:this[0].textContent=a;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return m(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(a)})},prepend:function(){return m(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(a,this.firstChild)},!0)},before:function(){return this[0]&&
this[0].parentNode?m(this,arguments,function(a){this.parentNode.insertBefore(a,this)}):this},after:function(){return this[0]&&this[0].parentNode?m(this,arguments,function(a){this.parentNode.insertBefore(a,this.nextSibling)},!0):this},appendTo:function(a){u(a).append(this);return this},prependTo:function(a){u(a).prepend(this);return this},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return q(this,a)},wrapAll:function(a){return q(this,a,!0)},wrapInner:function(a){this.each(function(){u(this).contents().wrapAll(a)});
return this},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(this.childNodes)})},clone:function(){var a=[];this.each(function(){a.push(this.cloneNode(!0))});return u(a)},addClass:function(a){return this.toggleClass(a,!0)},removeClass:function(a){return this.toggleClass(a,!1)},toggleClass:function(a,b){var c=this;if("string"!=typeof a)return c;-1!==a.indexOf(" ")?A(a.split(" "),function(){c.toggleClass(this,b)}):c.each(function(c,d){var e,k;k=d&&a&&-1!==(" "+d.className+
" ").indexOf(" "+a+" ");k!==b&&(e=d.className,d.className=k?B((" "+e+" ").replace(" "+a+" "," ")):d.className+(e?" "+a:a))});return c},hasClass:function(a){return this[0]&&a&&-1!==(" "+this[0].className+" ").indexOf(" "+a+" ")},each:function(a){return A(this,a)},on:function(a,b){return this.each(function(){k.bind(this,a,b)})},off:function(a,b){return this.each(function(){k.unbind(this,a,b)})},trigger:function(a){return this.each(function(){"object"==typeof a?k.fire(this,a.type,a):k.fire(this,a)})},
show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new u(d.apply(this,arguments))},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(a){var b,c,d=[];b=0;for(c=this.length;b<c;b++)u.find(a,this[b],d);return u(d)},filter:function(a){return"function"==typeof a?u(C(this.toArray(),function(b,c){return a(c,b)})):u(u.filter(a,this.toArray()))},
closest:function(a){var b=[];a instanceof u&&(a=a[0]);this.each(function(c,d){for(;d;){if("string"==typeof a&&u(d).is(a)){b.push(d);break}else if(d==a){b.push(d);break}d=d.parentNode}});return u(b)},offset:function(a){var b,c,d=0,e=0;if(!a){if(b=this[0])a=b.ownerDocument,c=a.documentElement,b.getBoundingClientRect&&(e=b.getBoundingClientRect(),d=e.left+(c.scrollLeft||a.body.scrollLeft)-c.clientLeft,e=e.top+(c.scrollTop||a.body.scrollTop)-c.clientTop);return{left:d,top:e}}return this.css(a)},push:b,
sort:[].sort,splice:[].splice};c.extend(u,{extend:c.extend,makeArray:function(a){return a&&a==a.window||a.nodeType?[a]:c.toArray(a)},inArray:function(a,b){var c;if(b.indexOf)return b.indexOf(a);for(c=b.length;c--;)if(b[c]===a)return c;return-1},isArray:c.isArray,each:A,trim:B,grep:C,find:h,expr:h.selectors,unique:h.uniqueSort,text:h.getText,contains:h.contains,filter:function(a,b,c){var d=b.length;for(c&&(a=":not("+a+")");d--;)1!=b[d].nodeType&&b.splice(d,1);return b=1===b.length?u.find.matchesSelector(b[0],
a)?[b[0]]:[]:u.find.matches(a,b)}});var J=function(a,b,c){var d=[];a=a[b];for("string"!=typeof c&&c instanceof u&&(c=c[0]);a&&9!==a.nodeType;){if(void 0!==c){if(a===c)break;if("string"==typeof c&&u(a).is(c))break}1===a.nodeType&&d.push(a);a=a[b]}return d},G=function(a,b,c,d){var e=[];for(d instanceof u&&(d=d[0]);a;a=a[b])if(!c||a.nodeType===c){if(void 0!==d){if(a===d)break;if("string"==typeof d&&u(a).is(d))break}e.push(a)}return e},E=function(a,b,c){for(a=a[b];a;a=a[b])if(a.nodeType==c)return a;return null};
A({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return J(a,"parentNode")},next:function(a){return E(a,"nextSibling",1)},prev:function(a){return E(a,"previousSibling",1)},children:function(a){return G(a.firstChild,"nextSibling",1)},contents:function(a){return c.toArray(("iframe"===a.nodeName?a.contentDocument||a.contentWindow.document:a).childNodes)}},function(a,b){u.fn[a]=function(c){var d=[];this.each(function(){var a=b.call(d,this,c,d);a&&(u.isArray(a)?
d.push.apply(d,a):d.push(a))});1<this.length&&(l[a]||(d=u.unique(d)),0===a.indexOf("parents")&&(d=d.reverse()));d=u(d);return c?d.filter(c):d}});A({parentsUntil:function(a,b){return J(a,"parentNode",b)},nextUntil:function(a,b){return G(a,"nextSibling",1,b).slice(1)},prevUntil:function(a,b){return G(a,"previousSibling",1,b).slice(1)}},function(a,b){u.fn[a]=function(c,d){var e=[];this.each(function(){var a=b.call(e,this,c,e);a&&(u.isArray(a)?e.push.apply(e,a):e.push(a))});1<this.length&&(e=u.unique(e),
0===a.indexOf("parents")||"prevUntil"===a)&&(e=e.reverse());e=u(e);return d?e.filter(d):e}});u.fn.is=function(a){return!!a&&0<this.filter(a).length};u.fn.init.prototype=u.fn;u.overrideDefaults=function(a){var b,c=function(d,e){b=b||a();0===arguments.length&&(d=b.element);e||(e=b.context);return new c.fn.init(d,e)};u.extend(c,this);return c};f=function(a,b,c){A(c,function(c,d){a[c]=a[c]||{};a[c][b]=d})};e.ie&&8>e.ie&&(f(v,"get",{maxlength:function(a){a=a.maxLength;return 2147483647===a?void 0:a},size:function(a){a=
a.size;return 20===a?void 0:a},"class":function(a){return a.className},style:function(a){a=a.style.cssText;return 0===a.length?void 0:a}}),f(v,"set",{"class":function(a,b){a.className=b},style:function(a,b){a.style.cssText=b}}));e.ie&&9>e.ie&&(x["float"]="styleFloat",f(z,"set",{opacity:function(a,b){var c=a.style;null===b||""===b?c.removeAttribute("filter"):(c.zoom=1,c.filter="alpha(opacity="+100*b+")")}}));u.attrHooks=v;u.cssHooks=z;return u});s("ephox.katamari.api.Thunk",[],function(){return{cached:function(g){var f=
!1,h;return function(){f||(f=!0,h=g.apply(null,arguments));return h}}}});S("global!Number",Number);s("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(g,f,h){var e=function(){return c(0,0)},c=function(b,c){return{major:b,minor:c}};return{nu:c,detect:function(b,d){var a=h(d).toLowerCase();if(0===b.length)a=e();else{var k;a:{for(k=0;k<b.length;k++){var l=b[k];if(l.test(a)){k=l;break a}}k=void 0}a=k?c(f(a.replace(k,"$1")),f(a.replace(k,"$2"))):{major:0,minor:0}}return a},
unknown:e}});s("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(g,f){var h=function(c,b){return function(){return b===c}},e=function(c){var b=c.current;return{current:b,version:c.version,isEdge:h("Edge",b),isChrome:h("Chrome",b),isIE:h("IE",b),isOpera:h("Opera",b),isFirefox:h("Firefox",b),isSafari:h("Safari",b)}};return{unknown:function(){return e({current:void 0,version:f.unknown()})},nu:e,edge:g.constant("Edge"),chrome:g.constant("Chrome"),ie:g.constant("IE"),
opera:g.constant("Opera"),firefox:g.constant("Firefox"),safari:g.constant("Safari")}});s("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(g,f){var h=function(c,b){return function(){return b===c}},e=function(c){var b=c.current;return{current:b,version:c.version,isWindows:h("Windows",b),isiOS:h("iOS",b),isAndroid:h("Android",b),isOSX:h("OSX",b),isLinux:h("Linux",b),isSolaris:h("Solaris",b),isFreeBSD:h("FreeBSD",b)}};return{unknown:function(){return e({current:void 0,
version:f.unknown()})},nu:e,windows:g.constant("Windows"),ios:g.constant("iOS"),android:g.constant("Android"),linux:g.constant("Linux"),osx:g.constant("OSX"),solaris:g.constant("Solaris"),freebsd:g.constant("FreeBSD")}});s("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(g){return function(f,h,e){var c=f.isiOS()&&!0===/ipad/i.test(e),b=f.isiOS()&&!c,d=f.isAndroid()&&3===f.version.major,a=f.isAndroid()&&4===f.version.major,d=c||d||a&&!0===/mobile/i.test(e),k=(a=f.isiOS()||f.isAndroid())&&
!d;h=h.isSafari()&&f.isiOS()&&!1===/safari/i.test(e);return{isiPad:g.constant(c),isiPhone:g.constant(b),isTablet:g.constant(d),isPhone:g.constant(k),isTouch:g.constant(a),isAndroid:f.isAndroid,isiOS:f.isiOS,isWebView:g.constant(h)}}});s("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(g,f,h){var e=function(c,b){var d=h(b).toLowerCase();return g.find(c,function(a){return a.search(d)})};return{detectBrowser:function(c,b){return e(c,b).map(function(c){var a=
f.detect(c.versionRegexes,b);return{current:c.name,version:a}})},detectOs:function(c,b){return e(c,b).map(function(c){var a=f.detect(c.versionRegexes,b);return{current:c.name,version:a}})}}});s("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(g,f){return f+g},addToEnd:function(g,f){return g+f},removeFromStart:function(g,f){return g.substring(f)},removeFromEnd:function(g,f){return g.substring(0,g.length-f)}}});s("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],
function(g,f){return{first:function(h,e){return h.substr(0,e)},last:function(h,e){return h.substr(h.length-e,h.length)},head:function(h){return""===h?g.none():g.some(h.substr(0,1))},tail:function(h){return""===h?g.none():g.some(h.substring(1))}}});s("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(g,f,h){var e=function(b,c){return""===c?!0:b.length<c.length?!1:b.substr(0,0+c.length)===c},c=function(b,c){return""===c?!0:b.length<
c.length?!1:b.substr(b.length-c.length,b.length-c.length+c.length)===c};return{supplant:function(b,c){return b.replace(/\${([^{}]*)}/g,function(a,b){var e=c[b],h=typeof e;return"string"===h||"number"===h?e:a})},startsWith:e,removeLeading:function(b,c){return e(b,c)?g.removeFromStart(b,c.length):b},removeTrailing:function(b,d){return c(b,d)?g.removeFromEnd(b,d.length):b},ensureLeading:function(b,c){return e(b,c)?b:g.addToStart(b,c)},ensureTrailing:function(b,d){return c(b,d)?b:g.addToEnd(b,d)},endsWith:c,
contains:function(b,c){return-1!==b.indexOf(c)},trim:function(b){return b.replace(/^\s+|\s+$/g,"")},lTrim:function(b){return b.replace(/^\s+/g,"")},rTrim:function(b){return b.replace(/\s+$/g,"")},capitalize:function(b){return f.head(b).bind(function(c){return f.tail(b).map(function(a){return c.toUpperCase()+a})}).getOr(b)}}});s("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(g,f){var h=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e=function(c){return function(b){return f.contains(b,
c)}},h=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(c){return f.contains(c,"edge/")&&f.contains(c,"chrome")&&f.contains(c,"safari")&&f.contains(c,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,h],search:function(c){return f.contains(c,"chrome")&&!f.contains(c,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(c){return f.contains(c,"msie")||f.contains(c,"trident")}},
{name:"Opera",versionRegexes:[h,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[h,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(c){return(f.contains(c,"safari")||f.contains(c,"mobile/"))&&f.contains(c,"applewebkit")}}],e=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(c){return f.contains(c,"iphone")||
f.contains(c,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]}];return{browsers:g.constant(h),
oses:g.constant(e)}});s("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(g,f,h,e,c){return{detect:function(b){var d=c.browsers(),a=c.oses(),d=e.detectBrowser(d,b).fold(g.unknown,g.nu),a=e.detectOs(a,b).fold(f.unknown,f.nu);b=h(a,d,b);return{browser:d,os:a,deviceType:b}}}});s("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection",
"global!navigator"],function(g,f,h){return{detect:g.cached(function(){return f.detect(h.userAgent)})}});s("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});s("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(g,f,h,e){var c=function(b){if(null===b||void 0===b)throw new f("Node cannot be null or undefined");return{dom:g.constant(b)}};return{fromHtml:function(b,d){var a=(d||e).createElement("div");
a.innerHTML=b;if(!a.hasChildNodes()||1<a.childNodes.length)throw h.error("HTML does not have a single root node",b),"HTML must have a single root node";return c(a.childNodes[0])},fromTag:function(b,d){var a=(d||e).createElement(b);return c(a)},fromText:function(b,d){var a=(d||e).createTextNode(b);return c(a)},fromDom:c}});s("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,
ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});s("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(g){var f=function(b){return b.dom().nodeName.toLowerCase()},h=function(b){return b.dom().nodeType},e=function(b){return function(a){return h(a)===b}},c=e(g.ELEMENT),b=e(g.TEXT),e=e(g.DOCUMENT);return{name:f,type:h,value:function(b){return b.dom().nodeValue},isElement:c,isText:b,isDocument:e,isComment:function(b){return h(b)===g.COMMENT||"#comment"===f(b)}}});s("ephox.katamari.api.Type",
["global!Array","global!String"],function(g,f){var h=function(e){return function(c){if(null===c)c="null";else{var b=typeof c;c="object"===b&&g.prototype.isPrototypeOf(c)?"array":"object"===b&&f.prototype.isPrototypeOf(c)?"string":b}return c===e}};return{isString:h("string"),isObject:h("object"),isArray:h("array"),isNull:h("null"),isBoolean:h("boolean"),isUndefined:h("undefined"),isFunction:h("function"),isNumber:h("number")}});s("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],
function(g,f){var h=function(){var a=f.keys,b=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),e=function(a,b){for(var c=h(a),d=0,e=c.length;d<e;d++){var m=c[d];b(a[m],m,a)}},c=function(a,b){var c={};e(a,function(d,e){var m=b(d,e,a);c[m.k]=m.v});return c},b=function(a,b){var c=[];e(a,function(a,d){c.push(b(a,d))});return c},d=function(a){return b(a,function(a){return a})};return{bifilter:function(a,b){var c={},d={};e(a,function(a,e){(b(a,e)?c:d)[e]=
a});return{t:c,f:d}},each:e,map:function(a,b){return c(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},mapToArray:b,tupleMap:c,find:function(a,b){for(var c=h(a),d=0,e=c.length;d<e;d++){var m=c[d],f=a[m];if(b(f,m,a))return g.some(f)}return g.none()},keys:h,values:d,size:function(a){return d(a).length}}});s("ephox.sugar.api.properties.Attr","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.node.Node global!Error global!console".split(" "),function(g,f,h,e,c,b){var d=
function(a,d,e){if(g.isString(e)||g.isBoolean(e)||g.isNumber(e))a.setAttribute(d,e+"");else throw b.error("Invalid call to Attr.set. Key ",d,":: Value ",e,":: Element ",a),new c("Attribute value was not simple");},a=function(a,b,c){d(a.dom(),b,c)},k=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},l=function(a,b){var c=a.dom();return c&&c.hasAttribute?c.hasAttribute(b):!1};return{clone:function(a){return f.foldl(a.dom().attributes,function(a,b){a[b.name]=b.value;return a},{})},
set:a,setAll:function(a,b){var c=a.dom();h.each(b,function(a,b){d(c,b,a)})},get:k,has:l,remove:function(a,b){a.dom().removeAttribute(b)},hasNone:function(a){a=a.dom().attributes;return void 0===a||null===a||0===a.length},transfer:function(b,c,d){e.isElement(b)&&e.isElement(c)&&f.each(d,function(d){l(b,d)&&!l(c,d)&&a(c,d,k(b,d))})}}});s("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(g,f,h,e){var c=function(b){b=
b.dom().body;if(null===b||void 0===b)throw"Body is not available yet";return f.fromDom(b)};return{body:g.cached(function(){return c(f.fromDom(e))}),getBody:c,inBody:function(b){b=h.isText(b)?b.dom().parentNode:b.dom();return void 0!==b&&null!==b&&b.ownerDocument.body.contains(b)}}});s("ephox.sugar.impl.Style",[],function(){return{isSupported:function(g){return void 0!==g.style}}});s("ephox.sugar.api.properties.Css","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.properties.Attr ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.impl.Style ephox.katamari.api.Strings global!Error global!console global!window".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m){var q=function(a,b,c){if(!g.isString(c))throw n.error("Invalid call to CSS.set. Property ",b,":: Value ",c,":: Element ",a),new p("CSS value must be a string: "+c);k.isSupported(a)&&a.style.setProperty(b,c)},t=function(a,b,c){a=a.dom();q(a,b,c)},r=function(a,b){var c=a.dom(),c=k.isSupported(c)?c.style.getPropertyValue(b):"";return e.from(c).filter(function(a){return 0<a.length})},w=function(a,b,c){r(a,c).each(function(a){r(b,c).isNone()&&t(b,c,a)})};return{copy:function(a,
b){var c=a.dom(),d=b.dom();k.isSupported(c)&&k.isSupported(d)&&(d.style.cssText=c.style.cssText)},set:t,preserve:function(a,b){var d=c.get(a,"style"),e=b(a);(void 0===d?c.remove:c.set)(a,"style",d);return e},setAll:function(a,b){var c=a.dom();h.each(b,function(a,b){q(c,b,a)})},setOptions:function(a,b){var c=a.dom();h.each(b,function(a,b){a.fold(function(){k.isSupported(c)&&c.style.removeProperty(b)},function(a){q(c,b,a)})})},remove:function(a,b){var d=a.dom();k.isSupported(d)&&d.style.removeProperty(b);
c.has(a,"style")&&""===l.trim(c.get(a,"style"))&&c.remove(a,"style")},get:function(a,c){var d=a.dom(),e=m.getComputedStyle(d).getPropertyValue(c),d=""!==e||b.inBody(a)?e:k.isSupported(d)?d.style.getPropertyValue(c):"";return null===d?void 0:d},getRaw:r,getAllRaw:function(a){var b={};a=a.dom();if(k.isSupported(a))for(var c=0;c<a.style.length;c++){var d=a.style.item(c);b[d]=a.style[d]}return b},isValidValue:function(a,b,c){a=d.fromTag(a);t(a,b,c);return r(a,b).isSome()},reflow:function(a){return a.dom().offsetWidth},
transfer:function(b,c,d){a.isElement(b)&&a.isElement(c)&&f.each(d,function(a){w(b,c,a)})}}});s("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(g,f,h,e){return function(){var c=arguments;return function(){for(var b=new h(arguments.length),d=0;d<b.length;d++)b[d]=arguments[d];if(c.length!==b.length)throw new e('Wrong number of arguments to struct. Expected "['+c.length+']", got '+b.length+" arguments");var a={};g.each(c,function(c,
d){a[c]=f.constant(b[d])});return a}}});s("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(g,f,h){var e=function(c){return c.slice(0).sort()};return{sort:e,reqMessage:function(c,b){throw new h("All required keys ("+e(c).join(", ")+") were not specified. Specified keys were: "+e(b).join(", ")+".");},unsuppMessage:function(c){throw new h("Unsupported keys for object: "+e(c).join(", "));},validateStrArr:function(c,b){if(!f.isArray(b))throw new h("The "+
c+" fields must be an array. Was: "+b+".");g.each(b,function(b){if(!f.isString(b))throw new h("The value "+b+" in the "+c+" fields was not a string.");})},invalidTypeMessage:function(c,b){throw new h("All values need to be of type: "+b+". Keys ("+e(c).join(", ")+") were not.");},checkDupes:function(c){var b=e(c);g.find(b,function(c,a){return a<b.length-1&&c===b[a+1]}).each(function(c){throw new h("The field: "+c+" occurs more than once in the combined fields: ["+b.join(", ")+"].");})}}});s("ephox.katamari.data.MixedBag",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.util.BagUtils global!Error global!Object".split(" "),function(g,f,h,e,c,b,d){return function(a,k){var l=a.concat(k);if(0===l.length)throw new b("You must specify at least one required or optional field.");c.validateStrArr("required",a);c.validateStrArr("optional",k);c.checkDupes(l);return function(b){var n=h.keys(b);g.forall(a,function(a){return g.contains(n,a)})||c.reqMessage(a,n);var m=
g.filter(n,function(a){return!g.contains(l,a)});0<m.length&&c.unsuppMessage(m);var q={};g.each(a,function(a){q[a]=f.constant(b[a])});g.each(k,function(a){q[a]=f.constant(d.prototype.hasOwnProperty.call(b,a)?e.some(b[a]):e.none())});return q}}});s("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(g,f){return{immutable:g,immutableBag:f}});s("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(g,f){var h=[],e=function(b){h.push(b);return f(b)},
c=f(g);do c=c.bind(e);while(c.isSome());return h}}});s("ephox.sand.api.Node",["ephox.sand.util.Global"],function(g){return{documentPositionPreceding:function(f,h){var e=g.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(f.compareDocumentPosition(h)&e)},documentPositionContainedBy:function(f,h){var e=g.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;return 0!==(f.compareDocumentPosition(h)&e)}}});s("ephox.sugar.api.search.Selectors","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.node.NodeTypes global!Error global!document".split(" "),
function(g,f,h,e,c,b){var d=e.ELEMENT,a=e.DOCUMENT;return{all:function(c,e){var f=void 0===e?b:e.dom();return f.nodeType!==d&&f.nodeType!==a||0===f.childElementCount?[]:g.map(f.querySelectorAll(c),h.fromDom)},is:function(a,b){var e=a.dom();if(e.nodeType!==d)return!1;if(void 0!==e.matches)return e.matches(b);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(b);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(b);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(b);
throw new c("Browser lacks native selectors");},one:function(c,e){var g=void 0===e?b:e.dom();return g.nodeType!==d&&g.nodeType!==a||0===g.childElementCount?f.none():f.from(g.querySelector(c)).map(h.fromDom)}}});s("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(g,f,h,e,c){var b=function(a,b){return a.dom()===b.dom()},d=function(a,b){var c=a.dom(),d=b.dom();return c===
d?!1:c.contains(d)},a=function(a,b){return h.documentPositionContainedBy(a.dom(),b.dom())};e=e.detect().browser.isIE()?a:d;return{eq:b,isEqualNode:function(a,b){return a.dom().isEqualNode(b.dom())},member:function(a,c){return g.exists(c,f.curry(b,a))},contains:e,is:c.is}});s("ephox.sugar.api.search.Traverse","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.alien.Recurse ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element".split(" "),
function(g,f,h,e,c,b,d,a){var k=function(b){return a.fromDom(b.dom().ownerDocument)},l=function(b){b=b.dom();return e.from(b.parentNode).map(a.fromDom)},p=function(b){b=b.dom();return e.from(b.previousSibling).map(a.fromDom)},n=function(b){b=b.dom();return e.from(b.nextSibling).map(a.fromDom)},m=function(b){b=b.dom();return f.map(b.childNodes,a.fromDom)},q=function(b,c){var d=b.dom().childNodes;return e.from(d[c]).map(a.fromDom)},t=c.immutable("element","offset");return{owner:k,defaultView:function(b){b=
b.dom().ownerDocument.defaultView;return a.fromDom(b)},documentElement:function(b){b=k(b);return a.fromDom(b.dom().documentElement)},parent:l,findIndex:function(a){return l(a).bind(function(b){b=m(b);return f.findIndex(b,function(b){return d.eq(a,b)})})},parents:function(b,c){for(var d=g.isFunction(c)?c:h.constant(!1),e=b.dom(),k=[];null!==e.parentNode&&void 0!==e.parentNode;){var e=e.parentNode,m=a.fromDom(e);k.push(m);if(!0===d(m))break}return k},siblings:function(a){return l(a).map(m).map(function(b){return f.filter(b,
function(b){return!d.eq(a,b)})}).getOr([])},prevSibling:p,offsetParent:function(b){b=b.dom();return e.from(b.offsetParent).map(a.fromDom)},prevSiblings:function(a){return f.reverse(b.toArray(a,p))},nextSibling:n,nextSiblings:function(a){return b.toArray(a,n)},children:m,child:q,firstChild:function(a){return q(a,0)},lastChild:function(a){return q(a,a.dom().childNodes.length-1)},childNodesCount:function(a,b){return a.dom().childNodes.length},leaf:function(a,b){var c=m(a);return 0<c.length&&b<c.length?
t(c[b],0):t(a,b)}}});s("tinymce.core.dom.Position","ephox.katamari.api.Arr ephox.sand.api.PlatformDetection ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),function(g,f,h,e,c,b){var d=f.detect().browser,a=function(a){return g.find(a,e.isElement)},k=function(c){return d.isFirefox()&&"table"===e.name(c)?a(b.children(c)).filter(function(a){return"caption"===e.name(a)}).bind(function(c){return a(b.nextSiblings(c)).map(function(a){a=
a.dom().offsetTop;var b=c.dom().offsetTop,d=c.dom().offsetHeight;return a<=b?-d:0})}).getOr(0):0};return{getPos:function(a,b,d){var e=0,f=0,g=a.ownerDocument;d=d?d:a;if(b){if(d===a&&b.getBoundingClientRect&&"static"===c.get(h.fromDom(a),"position"))return b=b.getBoundingClientRect(),e=b.left+(g.documentElement.scrollLeft||a.scrollLeft)-g.documentElement.clientLeft,f=b.top+(g.documentElement.scrollTop||a.scrollTop)-g.documentElement.clientTop,{x:e,y:f};for(a=b;a&&a!==d&&a.nodeType;)e+=a.offsetLeft||
0,f+=a.offsetTop||0,a=a.offsetParent;for(a=b.parentNode;a&&a!==d&&a.nodeType;)e-=a.scrollLeft||0,f-=a.scrollTop||0,a=a.parentNode;f+=k(h.fromDom(b))}return{x:e,y:f}}}});s("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(g,f,h){var e=function(c){var b=f.none(),d=[],a=function(a){k()?l(a):d.push(a)},k=function(){return b.isSome()},l=function(a){b.each(function(b){h(function(){a(b)},0)})};c(function(a){b=f.some(a);g.each(d,l);d=[]});return{get:a,
map:function(b){return e(function(c){a(function(a){c(b(a))})})},isReady:k}};return{nu:e,pure:function(c){return e(function(b){b(c)})}}});s("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(g,f){return{bounce:function(h){return function(){var e=g.prototype.slice.call(arguments),c=this;f(function(){h.apply(c,e)},0)}}}});s("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(g,f){var h=function(e){var c=function(b){e(f.bounce(b))};
return{map:function(b){return h(function(d){c(function(a){a=b(a);d(a)})})},bind:function(b){return h(function(d){c(function(a){b(a).get(d)})})},anonBind:function(b){return h(function(d){c(function(a){b.get(d)})})},toLazy:function(){return g.nu(c)},get:c}};return{nu:h,pure:function(e){return h(function(c){c(e)})}}});s("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(g){return{par:function(f,h){return h(function(e){var c=[],b=0,d=function(a){return function(d){c[a]=d;b++;b>=f.length&&
e(c)}};0===f.length?e([]):g.each(f,function(a,b){a.get(d(b))})})}}});s("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(g,f,h){var e=function(c){return h.par(c,f.nu)};return{par:e,mapM:function(c,b){var d=g.map(c,b);return e(d)},compose:function(c,b){return function(d){return b(d).bind(c)}}}});s("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(g,f){var h=function(c){return{is:function(b){return c===
b},isValue:g.constant(!0),isError:g.constant(!1),getOr:g.constant(c),getOrThunk:g.constant(c),getOrDie:g.constant(c),or:function(b){return h(c)},orThunk:function(b){return h(c)},fold:function(b,d){return d(c)},map:function(b){return h(b(c))},each:function(b){b(c)},bind:function(b){return b(c)},exists:function(b){return b(c)},forall:function(b){return b(c)},toOption:function(){return f.some(c)}}},e=function(c){return{is:g.constant(!1),isValue:g.constant(!1),isError:g.constant(!0),getOr:g.identity,
getOrThunk:function(b){return b()},getOrDie:function(){return g.die(c)()},or:function(b){return b},orThunk:function(b){return b()},fold:function(b,d){return b(c)},map:function(b){return e(c)},each:g.noop,bind:function(b){return e(c)},exists:g.constant(!1),forall:g.constant(!0),toOption:f.none}};return{value:h,error:e}});s("tinymce.core.dom.StyleSheetLoader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Future ephox.katamari.api.Futures ephox.katamari.api.Result global!navigator tinymce.core.util.Delay tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a){return function(k,l){var p=0,n={},m;l=l||{};m=l.maxLoadTime||5E3;var q=function(a){k.getElementsByTagName("head")[0].appendChild(a)},t=function(c,e,h){var f,y,l,A,C=function(){for(var a=A.passed,b=a.length;b--;)a[b]();A.status=2;A.passed=[];A.failed=[]},r=function(){for(var a=A.failed,b=a.length;b--;)a[b]();A.status=3;A.passed=[];A.failed=[]},g=function(){var a=b.userAgent.match(/WebKit\/(\d*)/);return!!(a&&536>a[1])},t=function(a,b){a()||((new Date).getTime()-l<m?d.setTimeout(b):
r())},w=function(){t(function(){for(var a=k.styleSheets,b,c=a.length;c--;)if(b=a[c],(b=b.ownerNode?b.ownerNode:b.owningElement)&&b.id===f.id)return C(),!0},w)},H=function(){t(function(){try{var a=y.sheet.cssRules;C();return!!a}catch(b){}},H)};c=a._addCacheSuffix(c);n[c]?A=n[c]:(A={passed:[],failed:[]},n[c]=A);e&&A.passed.push(e);h&&A.failed.push(h);if(1!=A.status)if(2==A.status)C();else if(3==A.status)r();else{A.status=1;f=k.createElement("link");f.rel="stylesheet";f.type="text/css";f.id="u"+p++;
f.async=!1;f.defer=!1;l=(new Date).getTime();if("onload"in f&&!g())f.onload=w,f.onerror=r;else{if(0<b.userAgent.indexOf("Firefox")){y=k.createElement("style");y.textContent='@import "'+c+'"';H();q(y);return}w()}q(f);f.href=c}},r=function(a){return h.nu(function(b){t(a,f.compose(b,f.constant(c.value(a))),f.compose(b,f.constant(c.error(a))))})},w=function(a){return a.fold(f.identity,f.identity)};return{load:t,loadAll:function(a,b,c){e.par(g.map(a,r)).get(function(a){a=g.partition(a,function(a){return a.isValue()});
0<a.fail.length?c(a.fail.map(w)):b(a.pass.map(w))})}}}});s("tinymce.core.dom.TreeWalker",[],function(){return function(g,f){var h=g,e=function(c,b,d,a){if(c){if(!a&&c[b])return c[b];if(c!=f){if(b=c[d])return b;for(c=c.parentNode;c&&c!=f;c=c.parentNode)if(b=c[d])return b}}};this.current=function(){return h};this.next=function(c){return h=e(h,"firstChild","nextSibling",c)};this.prev=function(c){return h=e(h,"lastChild","previousSibling",c)};this.prev2=function(c){a:{var b;if(h){b=h.previousSibling;
if(f&&b===f){h=void 0;break a}if(b){if(!c)for(c=b.lastChild;c;c=c.lastChild)if(!c.lastChild){h=c;break a}h=b;break a}if((b=h.parentNode)&&b!==f){h=b;break a}}h=void 0}return h}}});s("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(g,f,h){var e=function(b){var a;return function(c){a=a?a:g.mapToObject(b,f.constant(!0));return a.hasOwnProperty(h.name(c))}},c=e("h1 h2 h3 h4 h5 h6".split(" ")),b=e("article aside details div dt figcaption footer form fieldset header hgroup html main nav section summary body p dl multicol dd figure address center blockquote h1 h2 h3 h4 h5 h6 listing xmp pre plaintext menu dir ul ol li hr table tbody thead tfoot th tr td caption".split(" "));
return{isBlock:b,isInline:function(c){return h.isElement(c)&&!b(c)},isHeading:c,isTextBlock:e("h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure".split(" ")),isList:e(["ul","ol","dl"]),isListItem:e(["li","dd","dt"]),isVoid:e("area base basefont br col frame hr img input isindex link meta param embed source wbr track".split(" ")),isTableSection:e(["thead","tbody","tfoot"]),isTableCell:e(["td","th"]),isBr:function(b){return h.isElement(b)&&
"br"===h.name(b)}}});s("tinymce.core.dom.NodeType",[],function(){var g=function(c){return function(b){return!!b&&b.nodeType==c}},f=g(1),h=function(c){c=c.toLowerCase().split(" ");return function(b){var d;if(b&&b.nodeType)for(d=b.nodeName.toLowerCase(),b=0;b<c.length;b++)if(d===c[b])return!0;return!1}},e=function(c){return function(b){return!f(b)||b.contentEditable!==c&&b.getAttribute("data-mce-contenteditable")!==c?!1:!0}};return{isText:g(3),isElement:f,isComment:g(8),isDocument:g(9),isBr:h("br"),
isContentEditableTrue:e("true"),isContentEditableFalse:e("false"),matchNodeNames:h,hasPropValue:function(c,b){return function(d){return f(d)&&d[c]===b}},hasAttribute:function(c,b){return function(b){return f(b)&&b.hasAttribute(c)}},hasAttributeValue:function(c,b){return function(d){return f(d)&&d.getAttribute(c)===b}},matchStyleValues:function(c,b){b=b.toLowerCase().split(" ");return function(d){var a,e;if(f(d))for(a=0;a<b.length;a++)if(e=d.ownerDocument.defaultView.getComputedStyle(d,null).getPropertyValue(c),
e===b[a])return!0;return!1}},isBogus:function(c){return f(c)&&c.hasAttribute("data-mce-bogus")}}});s("tinymce.core.dom.TrimNode",["ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(g,f,h,e){var c=function(b){return b&&"SPAN"===b.tagName&&"bookmark"===b.getAttribute("data-mce-type")},b=function(d,a){var k,l=a.childNodes;if(!h.isElement(a)||!c(a)){for(k=l.length-1;0<=k;k--)b(d,l[k]);if(!1===h.isDocument(a)){if(h.isText(a)&&0<
a.nodeValue.length){k=e.trim(a.nodeValue).length;if(d.isBlock(a.parentNode)||0<k)return;if(k=0===k)k=a.nextSibling&&"SPAN"===a.nextSibling.nodeName,k=a.previousSibling&&"SPAN"===a.previousSibling.nodeName&&k;if(k)return}else if(h.isElement(a)&&(l=a.childNodes,1===l.length&&c(l[0])&&a.parentNode.insertBefore(l[0],a),l.length||f.isVoid(g.fromDom(a))))return;d.remove(a)}return a}};return{trimNode:b}});s("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(g,
f){var h=f.makeMap,e,c,b,d=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=/[<>&\"\']/g,l=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,p={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",
154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var n=function(a,b){var d,e,k,m={};if(a){a=a.split(",");b=b||10;for(d=0;d<a.length;d+=2)e=String.fromCharCode(parseInt(a[d],b)),c[e]||(k="&"+a[d+1]+";",m[e]=k,m[k]=e);return m}};e=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);var m={encodeRaw:function(b,e){return b.replace(e?d:a,function(a){return c[a]||a})},encodeAllRaw:function(a){return(""+a).replace(k,function(a){return c[a]||a})},encodeNumeric:function(b,e){return b.replace(e?d:a,function(a){return 1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":c[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(b,k,m){m=m||e;return b.replace(k?d:a,function(a){return c[a]||m[a]||a})},getEncodeFunc:function(b,k){k=n(k)||e;var f=function(b,e){return b.replace(e?
d:a,function(a){return void 0!==c[a]?c[a]:void 0!==k[a]?k[a]:1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"})},l=function(a,b){return m.encodeNamed(a,b,k)};b=h(b.replace(/\+/g,","));return b.named&&b.numeric?f:b.named?k?l:m.encodeNamed:b.numeric?m.encodeNumeric:m.encodeRaw},decode:function(a){return a.replace(l,function(a,c){if(c)return c="x"===c.charAt(0).toLowerCase()?parseInt(c.substr(1),16):parseInt(c,10),65535<c?(c-=65536,String.fromCharCode(55296+
(c>>10),56320+(c&1023))):p[c]||String.fromCharCode(c);var d;(d=b[a])||(d=e[a])||(d=g.fromTag("div").dom(),d.innerHTML=a,d=d.textContent||d.innerText||a);return d})}};return m});s("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(g){var f={},h={},e=g.makeMap,c=g.each,b=g.extend,d=g.explode,a=g.inArray,k=function(a,b){return(a=g.trim(a))?a.split(b||" "):[]},l=function(a,b){var d={},e,l,g,x,v=function(a,b,c){var m,f,l=function(a,b){var c={},d,e;d=0;for(e=a.length;d<e;d++)c[a[d]]=b||{};
return c};c=c||[];b=b||"";"string"===typeof c&&(c=k(c));a=k(a);for(m=a.length;m--;)f=k([e,b].join(" ")),f={attributes:l(f),attributesOrder:f,children:l(c,h)},d[a[m]]=f},z=function(a,b){var c,e,m,h;a=k(a);c=a.length;for(b=k(b);c--;)for(e=d[a[c]],m=0,h=b.length;m<h;m++)e.attributes[b[m]]={},e.attributesOrder.push(b[m])};if(f[a])return f[a];e="id accesskey class dir lang style tabindex title role";eventAttributes=k("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting");
l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";g="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment";b.allow_events&&(e=e.concat(e,eventAttributes));"html4"!=a&&(e+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure header footer hgroup section nav",g+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen");
"html5-strict"!=a&&(e+=" xml:lang",g=[g,"acronym applet basefont big font strike tt"].join(" "),c(k("acronym applet basefont big font strike tt"),function(a){v(a,"",g)}),l=[l,"center dir isindex noframes"].join(" "),x=[l,g].join(" "),c(k("center dir isindex noframes"),function(a){v(a,"",x)}));x=x||[l,g].join(" ");v("html","manifest","head body");v("head","","base command link meta noscript script style title");v("title hr noscript br");v("base","href target");v("link","href rel media hreflang type sizes hreflang");
v("meta","name http-equiv content charset");v("style","media type scoped");v("script","src async defer type charset");v("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",x);v("address dt dd div caption","",x);v("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",g);v("blockquote","cite",x);v("ol","reversed start type",
"li");v("ul","","li");v("li","value",x);v("dl","","dt dd");v("a","href target rel media hreflang type",g);v("q","cite",g);v("ins del","cite datetime",x);v("img","src sizes srcset alt usemap ismap width height");v("iframe","src name width height",x);v("embed","src type width height");v("object","data type typemustmatch name usemap form width height",[x,"param"].join(" "));v("param","name value");v("map","name",[x,"area"].join(" "));v("area","alt coords shape href target rel media hreflang type");v("table",
"border","caption colgroup thead tfoot tbody tr"+("html4"==a?" col":""));v("colgroup","span","col");v("col","span");v("tbody thead tfoot","","tr");v("tr","","td th");v("td","colspan rowspan headers",x);v("th","colspan rowspan headers scope abbr",x);v("form","accept-charset action autocomplete enctype method name novalidate target",x);v("fieldset","disabled form name",[x,"legend"].join(" "));v("label","form for",g);v("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");
v("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==a?x:g);v("select","disabled form multiple name required size","option optgroup");v("optgroup","disabled label","option");v("option","disabled label selected value");v("textarea","cols dirname disabled form maxlength name readonly required rows wrap");v("menu","type label",[x,"li"].join(" "));v("noscript","",x);"html4"!=a&&(v("wbr"),v("ruby","",[g,"rt rp"].join(" ")),v("figcaption","",x),
v("mark rt rp summary bdi","",g),v("canvas","width height",x),v("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[x,"track source"].join(" ")),v("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[x,"track source"].join(" ")),v("picture","","img source"),v("source","src srcset type media sizes"),v("track","kind src srclang label default"),v("datalist","",[g,"option"].join(" ")),v("article section nav aside header footer",
"",x),v("hgroup","","h1 h2 h3 h4 h5 h6"),v("figure","",[x,"figcaption"].join(" ")),v("time","datetime",g),v("dialog","open",x),v("command","type label icon disabled checked radiogroup command"),v("output","for form name",g),v("progress","value max",g),v("meter","value min max low high optimum",g),v("details","open",[x,"summary"].join(" ")),v("keygen","autofocus challenge disabled form keytype name"));"html5-strict"!=a&&(z("script","language xml:space"),z("style","xml:space"),z("object","declare classid code codebase codetype archive standby align border hspace vspace"),
z("embed","align name hspace vspace"),z("param","valuetype type"),z("a","charset name rev shape coords"),z("br","clear"),z("applet","codebase archive code object alt name width height align hspace vspace"),z("img","name longdesc align border hspace vspace"),z("iframe","longdesc frameborder marginwidth marginheight scrolling align"),z("font basefont","size color face"),z("input","usemap align"),z("select","onchange"),z("textarea"),z("h1 h2 h3 h4 h5 h6 div p legend caption","align"),z("ul","type compact"),
z("li","type"),z("ol dl menu dir","compact"),z("pre","width xml:space"),z("hr","align noshade size width"),z("isindex","prompt"),z("table","summary width frame rules cellspacing cellpadding align bgcolor"),z("col","width align char charoff valign"),z("colgroup","width align char charoff valign"),z("thead","align char charoff valign"),z("tr","align char charoff valign bgcolor"),z("th","axis align char charoff valign nowrap bgcolor width height"),z("form","accept"),z("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),
z("tfoot","align char charoff valign"),z("tbody","align char charoff valign"),z("area","nohref"),z("body","background bgcolor text link vlink alink"));"html4"!=a&&(z("input button select textarea","autofocus"),z("input textarea","placeholder"),z("a","download"),z("link script img","crossorigin"),z("iframe","sandbox seamless allowfullscreen"));c(k("a form meter progress dfn"),function(a){d[a]&&delete d[a].children[a]});delete d.caption.children.table;delete d.script;return f[a]=d},p=function(a,b){var k;
a&&(k={},"string"==typeof a&&(a={"*":a}),c(a,function(a,c){k[c]=k[c.toUpperCase()]="map"==b?e(a,/[, ]/):d(a,/[, ]/)}));return k};return function(h){var m={},g={},t=[],r,w,x,v,z,u,y,B,A,C,D,J,G,E={},H={},F=function(a,c,d){var k=h[a];k?k=e(k,/[, ]/,e(k.toUpperCase(),/[, ]/)):(k=f[a],k||(k=e(c," ",e(c.toUpperCase()," ")),k=b(k,d),f[a]=k));return k};h=h||{};x=l(h.schema,h);!1===h.verify_html&&(h.valid_elements="*[*]");r=p(h.valid_styles);w=p(h.invalid_styles,"map");B=p(h.valid_classes,"map");v=F("whitespace_elements",
"pre script noscript style textarea video audio iframe object code");z=F("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");u=F("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");y=F("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");C=F("non_empty_elements","td th iframe video audio object script pre code",u);
D=F("move_caret_before_on_enter_elements","table",C);J=F("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");A=F("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",J);G=F("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");c((h.special||"script noscript noframes noembed title style textarea xmp").split(" "),
function(a){H[a]=RegExp("</"+a+"[^>]*>","gi")});var s=function(b){var c,d,h,y,f,l,u,A,g,C,r,q,B,v,n,z,x,w,p=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,D=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,G=/[*?+]/;if(b)for(b=k(b,","),m["@"]&&(z=m["@"].attributes,x=m["@"].attributesOrder),c=0,d=b.length;c<d;c++)if(f=p.exec(b[c])){v=f[1];g=f[2];n=f[3];A=f[5];q={};B=[];l={attributes:q,attributesOrder:B};"#"===v&&(l.paddEmpty=!0);"-"===v&&(l.removeEmpty=!0);"!"===f[4]&&(l.removeEmptyAttrs=
!0);if(z){for(w in z)q[w]=z[w];B.push.apply(B,x)}if(A)for(A=k(A,"|"),h=0,y=A.length;h<y;h++)if(f=D.exec(A[h]))u={},r=f[1],C=f[2].replace(/[\\:]:/g,":"),v=f[3],f=f[4],"!"===r&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(C),u.required=!0),"-"===r?(delete q[C],B.splice(a(B,C),1)):(v&&("="===v&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:C,value:f}),u.defaultValue=f),":"===v&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:C,
value:f}),u.forcedValue=f),"<"===v&&(u.validValues=e(f,"?"))),G.test(C)?(l.attributePatterns=l.attributePatterns||[],u.pattern=RegExp("^"+C.replace(/([?+*])/g,".$1")+"$"),l.attributePatterns.push(u)):(q[C]||B.push(C),q[C]=u));z||"@"!=g||(z=q,x=B);n&&(l.outputName=g,m[n]=l);G.test(g)?(l.pattern=RegExp("^"+g.replace(/([?+*])/g,".$1")+"$"),t.push(l)):m[g]=l}},F=function(a){m={};t=[];s(a);c(x,function(a,b){g[b]=a.children})},K=function(a){var d=/^(~)?(.+)$/;a&&(f.text_block_elements=f.block_elements=
null,c(k(a,","),function(a){a=d.exec(a);var e="~"===a[1],k=e?"span":"div",h=a[2];g[h]=g[k];E[h]=k;e||(A[h.toUpperCase()]={},A[h]={});m[h]||(a=m[k],a=b({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,m[h]=a);c(g,function(a,c){a[k]&&(g[c]=a=b({},g[c]),a[h]=a[k])})}))},O=function(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;f[h.schema]=null;a&&c(k(a,","),function(a){a=b.exec(a);var d,e;a&&(d=(e=a[1])?g[a[2]]:g[a[2]]={"#comment":{}},d=g[a[2]],c(k(a[3],"|"),function(a){"-"===e?delete d[a]:d[a]={}}))})},
I=function(a){var b=m[a],c;if(b)return b;for(c=t.length;c--;)if(b=t[c],b.pattern.test(a))return b};h.valid_elements?F(h.valid_elements):(c(x,function(a,b){m[b]={attributes:a.attributes,attributesOrder:a.attributesOrder};g[b]=a.children}),"html5"!=h.schema&&c(k("strong/b em/i"),function(a){a=k(a,"/");m[a[1]].outputName=a[0]}),c(k("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(a){m[a]&&(m[a].removeEmpty=!0)}),c(k("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),
function(a){m[a].paddEmpty=!0}),c(k("span"),function(a){m[a].removeEmptyAttrs=!0}));K(h.custom_elements);O(h.valid_children);s(h.extended_valid_elements);O("+ol[ul|ol],+ul[ul|ol]");c({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(a,b){m[b]&&(m[b].parentsRequired=k(a))});h.invalid_elements&&c(d(h.invalid_elements),function(a){m[a]&&delete m[a]});I("span")||s("span[!data-mce-type|*]");
this.children=g;this.getValidStyles=function(){return r};this.getInvalidStyles=function(){return w};this.getValidClasses=function(){return B};this.getBoolAttrs=function(){return y};this.getBlockElements=function(){return A};this.getTextBlockElements=function(){return J};this.getTextInlineElements=function(){return G};this.getShortEndedElements=function(){return u};this.getSelfClosingElements=function(){return z};this.getNonEmptyElements=function(){return C};this.getMoveCaretBeforeOnEnterElements=
function(){return D};this.getWhiteSpaceElements=function(){return v};this.getSpecialElements=function(){return H};this.isValidChild=function(a,b){var c=g[a.toLowerCase()];return!(!c||!c[b.toLowerCase()])};this.isValid=function(a,b){var c,d;if(c=I(a))if(b){if(c.attributes[b])return!0;if(c=c.attributePatterns)for(d=c.length;d--;)if(c[d].pattern.test(a))return!0}else return!0;return!1};this.getElementRule=I;this.getCustomElements=function(){return E};this.addValidElements=s;this.setValidElements=F;this.addCustomElements=
K;this.addValidChildren=O;this.elements=m}});s("tinymce.core.html.Styles",[],function(){return function(g,f){var h=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,b=/\s+$/,d,a={},k,l,p;g=g||{};f&&(l=f.getValidStyles(),p=f.getInvalidStyles());k="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(d=0;d<k.length;d++)a[k[d]]="\ufeff"+d,a["\ufeff"+
d]=k[d];var n=function(a,b,c,d){a=function(a){a=parseInt(a,10).toString(16);return 1<a.length?a:"0"+a};return"#"+a(b)+a(c)+a(d)};return{toHex:function(a){return a.replace(h,n)},parse:function(k){var f={},l,r,w,x=g.url_converter,v=g.url_converter_scope||this,z=function(a,b,c){var e,k,h,m;if(e=f[a+"-top"+b])if(k=f[a+"-right"+b])if(h=f[a+"-bottom"+b])if(m=f[a+"-left"+b]){e=[e,k,h,m];for(d=e.length-1;d--&&e[d]===e[d+1];);-1<d&&c||(f[a+b]=-1==d?e[0]:e.join(" "),delete f[a+"-top"+b],delete f[a+"-right"+
b],delete f[a+"-bottom"+b],delete f[a+"-left"+b])}},u=function(a){var b=f[a],c;if(b){b=b.split(" ");for(c=b.length;c--;)if(b[c]!==b[0])return!1;f[a]=b[0];return!0}},y=function(a,b,c,d){u(b)&&u(c)&&u(d)&&(f[a]=f[b]+" "+f[c]+" "+f[d],delete f[b],delete f[c],delete f[d])},B=function(b){w=!0;return a[b]},A=function(b,c){w&&(b=b.replace(/\uFEFF[0-9]/g,function(b){return a[b]}));c||(b=b.replace(/\\([\'\";:])/g,"$1"));return b},C=function(a){return String.fromCharCode(parseInt(a.slice(1),16))},p=function(a,
b,c,d,e,k){if(e=e||k)return e=A(e),"'"+e.replace(/\'/g,"\\'")+"'";b=A(b||c||d);if(!g.allow_script_urls&&(a=b.replace(/[\s\r\n]+/g,""),/(java|vb)script:/i.test(a)||!g.allow_svg_data_urls&&/^data:image\/svg/i.test(a)))return"";x&&(b=x.call(v,b,"style"));return"url('"+b.replace(/\'/g,"\\'")+"')"};if(k){k=k.replace(/[\u0000-\u001F]/g,"");for(k=k.replace(/\\[\"\';:\uFEFF]/g,B).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,B)});l=c.exec(k);)if(c.lastIndex=l.index+l[0].length,r=l[1].replace(b,
"").toLowerCase(),l=l[2].replace(b,""),r&&l&&(r=r.replace(/\\[0-9a-f]+/gi,C),l=l.replace(/\\[0-9a-f]+/gi,C),-1===r.indexOf("\ufeff")&&-1===r.indexOf('"')&&(g.allow_script_urls||"behavior"!=r&&!/expression\s*\(|\/\*|\*\//.test(l)))){if("font-weight"===r&&"700"===l)l="bold";else if("color"===r||"background-color"===r)l=l.toLowerCase();l=l.replace(h,n);l=l.replace(e,p);f[r]=w?A(l,!0):l}z("border","",!0);z("border","-width");z("border","-color");z("border","-style");z("padding","");z("margin","");y("border",
"border-width","border-style","border-color");"medium none"===f.border&&delete f.border;"none"===f["border-image"]&&delete f["border-image"]}return f},serialize:function(a,b){var c="",d,e;e=function(b){var d,e,k,f;if(d=l[b])for(e=0,k=d.length;e<k;e++)b=d[e],(f=a[b])&&(c+=(0<c.length?" ":"")+b+": "+f+";")};var k=function(a,b){var c;return(c=p["*"])&&c[a]?!1:(c=p[b])&&c[a]?!1:!0};if(b&&l)e("*"),e(b);else for(d in a)e=a[d],!e||p&&!k(d,b)||(c+=(0<c.length?" ":"")+d+": "+e+";");return c}}}});s("tinymce.core.dom.DOMUtils",
"global!document global!window tinymce.core.Env tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.Position tinymce.core.dom.Sizzle tinymce.core.dom.StyleSheetLoader tinymce.core.dom.TreeWalker tinymce.core.dom.TrimNode tinymce.core.html.Entities tinymce.core.html.Schema tinymce.core.html.Styles tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n,m,q){var t=q.each,r=q.is,w=q.grep,x=h.ie,v=/^([a-z0-9],?)+$/i,z=/^[ \t\r\n]*$/,u=function(a,b){var c={},d=b.keep_values,
e;e={set:function(c,d,e){b.url_converter&&(d=b.url_converter.call(b.url_converter_scope||a,d,e,c[0]));c.attr("data-mce-"+e,d).attr(e,d)},get:function(a,b){return a.attr("data-mce-"+b)||a.attr(b)}};c={style:{set:function(a,b){null!==b&&"object"===typeof b?a.css(b):(d&&a.attr("data-mce-style",b),a.attr("style",b))},get:function(b){var c=b.attr("data-mce-style")||b.attr("style");return c=a.serializeStyle(a.parseStyle(c),b[0].nodeName)}}};d&&(c.href=c.src=e);return c},y=function(a,b){var c=b.attr("style");
(c=a.serializeStyle(a.parseStyle(c),b[0].nodeName))||(c=null);b.attr("data-mce-style",c)},B=function(a,b){var c=0,d,e;if(a)for(d=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)if(e=a.nodeType,!b||3!=e||e!=d&&a.nodeValue.length)c++,d=e;return c},A=function(b,d){var k=this,h;k.doc=b;k.win=f;k.files={};k.counter=0;k.stdMode=!x||8<=b.documentMode;k.boxModel=!x||"CSS1Compat"==b.compatMode||k.stdMode;k.styleSheetLoader=new a(b);k.boundEvents=[];k.settings=d=d||{};k.schema=d.schema?d.schema:new n({});
k.styles=new m({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema);k.fixDoc(b);k.events=d.ownEvents?new c(d.proxy):c.Event;k.attrHooks=u(k,d);h=k.schema.getBlockElements();k.$=e.overrideDefaults(function(){return{context:b,element:k.getRoot()}});k.isBlock=function(a){if(!a)return!1;var b=a.nodeType;return b?!(1!==b||!h[a.nodeName]):!!h[a]}};A.prototype={$$:function(a){"string"==typeof a&&(a=this.get(a));return this.$(a)},root:null,fixDoc:function(a){var b=this.settings,
c;if(x&&b.schema)for(c in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(b){a.createElement(b)}),b.schema.getCustomElements())a.createElement(c)},clone:function(a,b){var c=this,d,e;if(!x||1!==a.nodeType||b)return a.cloneNode(b);e=c.doc;return b?d.firstChild:(d=e.createElement(a.nodeName),t(c.getAttribs(a),function(b){c.setAttrib(d,b.nodeName,c.getAttrib(a,b.nodeName))}),d)},getRoot:function(){return this.settings.root_element||
this.doc.body},getViewPort:function(a){var b;a=a?a:this.win;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b;a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,c;a=this.get(a);b=this.getStyle(a,"width");c=this.getStyle(a,"height");-1===b.indexOf("px")&&(b=0);-1===c.indexOf("px")&&(c=
0);return{w:parseInt(b,10)||a.offsetWidth||a.clientWidth,h:parseInt(c,10)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,c,d){var e=this,k,f=[];a=e.get(a);d=void 0===d;c=c||("BODY"!=e.getRoot().nodeName?e.getRoot().parentNode:null);r(b,"string")&&(k=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return e.is(a,k)});for(;a&&a!=c&&a.nodeType&&9!==a.nodeType;){if(!b||b(a))if(d)f.push(a);else return a;a=a.parentNode}return d?
f:null},get:function(a){var b;return a&&this.doc&&"string"==typeof a&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(a,b){return d(a,this.get(b)||this.settings.root_element||this.doc,[])},is:function(a,b){var c;if(!a)return!1;if(void 0===a.length){if("*"===b)return 1==a.nodeType;if(v.test(b)){b=b.toLowerCase().split(/,/);
a=a.nodeName.toLowerCase();for(c=b.length-1;0<=c;c--)if(b[c]==a)return!0;return!1}}if(a.nodeType&&1!=a.nodeType)return!1;c=a.nodeType?[a]:a;return 0<d(b,c[0].ownerDocument||c[0],null,c).length},add:function(a,b,c,d,e){var k=this;return this.run(a,function(a){var f;f=r(b,"string")?k.doc.createElement(b):b;k.setAttribs(f,c);d&&(d.nodeType?f.appendChild(d):k.setHTML(f,d));return e?f:a.appendChild(f)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,
c){var d,e;d="<"+a;for(e in b)b.hasOwnProperty(e)&&null!==b[e]&&"undefined"!=typeof b[e]&&(d+=" "+e+'="'+this.encode(b[e])+'"');return"undefined"!=typeof c?d+">"+c+"</"+a+">":d+" />"},createFragment:function(a){var b;b=this.doc;var c;c=b.createElement("div");b=b.createDocumentFragment();a&&(c.innerHTML=a);for(;a=c.firstChild;)b.appendChild(a);return b},remove:function(a,b){a=this.$$(a);b?a.each(function(){for(var a;a=this.firstChild;)3==a.nodeType&&0===a.data.length?this.removeChild(a):this.parentNode.insertBefore(a,
this)}).remove():a.remove();return 1<a.length?a.toArray():a[0]},setStyle:function(a,b,c){a=this.$$(a).css(b,c);this.settings.update_styles&&y(this,a)},getStyle:function(a,b,c){a=this.$$(a);if(c)return a.css(b);b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});"float"==b&&(b=h.ie&&12>h.ie?"styleFloat":"cssFloat");return a[0]&&a[0].style?a[0].style[b]:void 0},setStyles:function(a,b){a=this.$$(a).css(b);this.settings.update_styles&&y(this,a)},removeAllAttribs:function(a){return this.run(a,
function(a){var b,c=a.attributes;for(b=c.length-1;0<=b;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,b,c){var d,e,k=this.settings;""===c&&(c=null);a=this.$$(a);d=a.attr(b);if(a.length&&((e=this.attrHooks[b])&&e.set?e.set(a,c,b):a.attr(b,c),d!=c&&k.onSetAttrib))k.onSetAttrib({attrElm:a,attrName:b,attrValue:c})},setAttribs:function(a,b){var c=this;c.$$(a).each(function(a,d){t(b,function(a,b){c.setAttrib(d,b,a)})})},getAttrib:function(a,b,c){var d;a=this.$$(a);a.length&&(d=(d=this.attrHooks[b])&&
d.get?d.get(a,b):a.attr(b));"undefined"==typeof d&&(d=c||"");return d},getPos:function(a,c){return b.getPos(this.doc.body,this.get(a),c)},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},addStyle:function(a){var b=this.doc,c,d;if(this!==A.DOM&&b===g){c=(c=A.DOM.addedStyles)||[];if(c[a])return;c[a]=!0;A.DOM.addedStyles=c}d=b.getElementById("mceDefaultStyles");d||(d=b.createElement("style"),d.id="mceDefaultStyles",d.type="text/css",
c=b.getElementsByTagName("head")[0],c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d));d.styleSheet?d.styleSheet.cssText+=a:d.appendChild(b.createTextNode(a))},loadCSS:function(a){var b=this,c=b.doc,d;b!==A.DOM&&c===g?A.DOM.loadCSS(a):(a||(a=""),d=c.getElementsByTagName("head")[0],t(a.split(","),function(a){var e;a=q._addCacheSuffix(a);b.files[a]||(b.files[a]=!0,e=b.create("link",{rel:"stylesheet",href:a}),x&&c.documentMode&&c.recalc&&(e.onload=function(){c.recalc&&c.recalc();e.onload=
null}),d.appendChild(e))}))},addClass:function(a,b){this.$$(a).addClass(b)},removeClass:function(a,b){this.toggleClass(a,b,!1)},hasClass:function(a,b){return this.$$(a).hasClass(b)},toggleClass:function(a,b,c){this.$$(a).toggleClass(b,c).each(function(){""===this.className&&e(this).attr("class",null)})},show:function(a){this.$$(a).show()},hide:function(a){this.$$(a).hide()},isHidden:function(a){return"none"==this.$$(a).css("display")},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,
b){a=this.$$(a);x?a.each(function(a,c){if(!1!==c.canHaveHTML){for(;c.firstChild;)c.removeChild(c.firstChild);try{c.innerHTML="<br>"+b,c.removeChild(c.firstChild)}catch(d){e("<div></div>").html("<br>"+b).contents().slice(1).appendTo(c)}return b}}):a.html(b)},getOuterHTML:function(a){a=this.get(a);return 1==a.nodeType&&"outerHTML"in a?a.outerHTML:e("<div></div>").append(e(a).clone()).html()},setOuterHTML:function(a,b){var c=this;c.$$(a).each(function(){try{if("outerHTML"in this){this.outerHTML=b;return}}catch(a){}c.remove(e(this).html(b),
!0)})},decode:p.decode,encode:p.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var c,d;c=b.parentNode;(d=b.nextSibling)?c.insertBefore(a,d):c.appendChild(a);return a})},replace:function(a,b,c){return this.run(b,function(b){r(b,"array")&&(a=a.cloneNode(!0));c&&t(w(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,b)})},rename:function(a,b){var c=this,d;a.nodeName!=b.toUpperCase()&&(d=c.create(b),t(c.getAttribs(a),function(b){c.setAttrib(d,
b.nodeName,c.getAttrib(a,b.nodeName))}),c.replace(d,a,1));return d||a},findCommonAncestor:function(a,b){for(var c=a,d;c;){for(d=b;d&&c!=d;)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){return this.styles.toHex(q.trim(a))},run:function(a,b,c){var d=this,e;"string"===typeof a&&(a=d.get(a));if(!a)return!1;c=c||this;return a.nodeType||!a.length&&0!==a.length?b.call(c,a):(e=[],t(a,function(a,k){a&&("string"==typeof a&&(a=d.get(a)),
e.push(b.call(c,a,k)))}),e)},getAttribs:function(a){var b;a=this.get(a);if(!a)return[];if(x){b=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})});return b}return a.attributes},isEmpty:function(a,b){var c,d,e,f,h,m,y=0;if(a=a.firstChild){h=new k(a,a.parentNode);
b=b||(this.schema?this.schema.getNonEmptyElements():null);f=this.schema?this.schema.getWhiteSpaceElements():{};do{e=a.nodeType;if(1===e){if(c=a.getAttribute("data-mce-bogus")){a=h.next("all"===c);continue}m=a.nodeName.toLowerCase();if(b&&b[m]){if("br"===m){y++;a=h.next();continue}return!1}d=this.getAttribs(a);for(c=d.length;c--;)if(m=d[c].nodeName,"name"===m||"data-mce-bookmark"===m)return!1}if(8==e||3===e&&!z.test(a.nodeValue)||3===e&&a.parentNode&&f[a.parentNode.nodeName]&&z.test(a.nodeValue))return!1;
a=h.next()}while(a)}return 1>=y},createRng:function(){return this.doc.createRange()},nodeIndex:B,split:function(a,b,c){var d=this.createRng(),e,k;if(a&&b)return d.setStart(a.parentNode,this.nodeIndex(a)),d.setEnd(b.parentNode,this.nodeIndex(b)),e=d.extractContents(),d=this.createRng(),d.setStart(b.parentNode,this.nodeIndex(b)+1),d.setEnd(a.parentNode,this.nodeIndex(a)+1),d=d.extractContents(),k=a.parentNode,k.insertBefore(l.trimNode(this,e),a),c?k.insertBefore(c,a):k.insertBefore(b,a),k.insertBefore(l.trimNode(this,
d),a),this.remove(a),c||b},bind:function(a,b,c,d){if(q.isArray(a)){for(var e=a.length;e--;)a[e]=this.bind(a[e],b,c,d);return a}!this.settings.collect||a!==this.doc&&a!==this.win||this.boundEvents.push([a,b,c,d]);return this.events.bind(a,b,c,d||this)},unbind:function(a,b,c){var d;if(q.isArray(a)){for(d=a.length;d--;)a[d]=this.unbind(a[d],b,c);return a}if(this.boundEvents&&(a===this.doc||a===this.win))for(d=this.boundEvents.length;d--;){var e=this.boundEvents[d];a!=e[0]||b&&b!=e[1]||c&&c!=e[2]||this.events.unbind(e[0],
e[1],e[2])}return this.events.unbind(a,b,c)},fire:function(a,b,c){return this.events.fire(a,b,c)},getContentEditable:function(a){var b;return a&&1==a.nodeType?(b=a.getAttribute("data-mce-contenteditable"))&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null:null},getContentEditableParent:function(a){for(var b=this.getRoot(),c=null;a&&a!==b&&(c=this.getContentEditable(a),null===c);a=a.parentNode);return c},destroy:function(){if(this.boundEvents){for(var a=this.boundEvents.length;a--;){var b=
this.boundEvents[a];this.events.unbind(b[0],b[1],b[2])}this.boundEvents=null}d.setDocument&&d.setDocument();this.win=this.doc=this.root=this.events=this.frag=null},isChildOf:function(a,b){for(;a;){if(b===a)return!0;a=a.parentNode}return!1},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,c){var d=this,e=b;if(a)for("string"==typeof e&&(e=function(a){return d.is(a,
b)}),a=a[c];a;a=a[c])if(e(a))return a;return null}};A.DOM=new A(g);A.nodeIndex=B;return A});s("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(g,f,h){var e=f.DOM,c=h.each,b=h.grep,d=function(a){return"function"===typeof a};f=function(){var a={},k=[],f={},p=[],n=0,m=function(a,b,c){var k,f,m=function(){e.remove(f);k&&(k.onreadystatechange=k.onload=k=null);b()};f=e.uniqueId();k=g.createElement("script");k.id=f;k.type="text/javascript";
k.src=h._addCacheSuffix(a);"onreadystatechange"in k?k.onreadystatechange=function(){/loaded|complete/.test(k.readyState)&&m()}:k.onload=m;k.onerror=function(){d(c)?c():"undefined"!==typeof console&&console.log&&console.log("Failed to load script: "+a)};(g.getElementsByTagName("head")[0]||g.body).appendChild(k)};this.isDone=function(b){return 2==a[b]};this.markDone=function(b){a[b]=2};this.add=this.load=function(b,c,d,e){void 0==a[b]&&(k.push(b),a[b]=0);c&&(f[b]||(f[b]=[]),f[b].push({success:c,failure:e,
scope:d||this}))};this.remove=function(b){delete a[b];delete f[b]};this.loadQueue=function(a,b,c){this.loadScripts(k,a,b,c)};this.loadScripts=function(e,k,h,g){var x,v=[],z=function(a,b){c(f[b],function(b){d(b[a])&&b[a].call(b.scope)});f[b]=void 0};p.push({success:k,failure:g,scope:h||this});x=function(){var k=b(e);e.length=0;c(k,function(b){2===a[b]?z("success",b):3===a[b]?z("failure",b):1!==a[b]&&(a[b]=1,n++,m(b,function(){a[b]=2;n--;z("success",b);x()},function(){a[b]=3;n--;v.push(b);z("failure",
b);x()}))});n||(k=p.slice(0),p.length=0,c(k,function(a){0===v.length?d(a.success)&&a.success.call(a.scope):d(a.failure)&&a.failure.call(a.scope,v)}))};x()}};f.ScriptLoader=new f;return f});s("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(g,f,h){var e=h.each,c=function(){this.items=[];this.urls={};this.lookup={};this._listeners=[]};c.prototype={get:function(b){if(this.lookup[b])return this.lookup[b].instance},dependencies:function(b){var c;
this.lookup[b]&&(c=this.lookup[b].dependencies);return c||[]},requireLangPack:function(b,d){var a=c.language;if(a&&!1!==c.languageLoad){if(d)if(d=","+d+",",-1!=d.indexOf(","+a.substr(0,2)+","))a=a.substr(0,2);else if(-1==d.indexOf(","+a+","))return;f.ScriptLoader.add(this.urls[b]+"/langs/"+a+".js")}},add:function(b,c,a){this.items.push(c);this.lookup[b]={instance:c,dependencies:a};a=g.partition(this._listeners,function(a){return a.name===b});this._listeners=a.fail;e(a.pass,function(a){a.callback()});
return c},remove:function(b){delete this.urls[b];delete this.lookup[b]},createUrl:function(b,c){return"object"===typeof c?c:{prefix:b.prefix,resource:c,suffix:b.suffix}},addComponents:function(b,c){var a=this.urls[b];e(c,function(b){f.ScriptLoader.add(a+"/"+b)})},load:function(b,d,a,k,h){var g=this,n=d,m=function(){var c=g.dependencies(b);e(c,function(a){a=g.createUrl(d,a);g.load(a.resource,a,void 0,void 0)});a&&(k?a.call(k):a.call(f))};g.urls[b]||("object"===typeof d&&(n=d.prefix+d.resource+d.suffix),
0!==n.indexOf("/")&&-1==n.indexOf("://")&&(n=c.baseURL+"/"+n),g.urls[b]=n.substring(0,n.lastIndexOf("/")),g.lookup[b]?m():f.ScriptLoader.add(n,m,k,h))},waitFor:function(b,c){this.lookup.hasOwnProperty(b)?c():this._listeners.push({name:b,callback:c})}};c.PluginManager=new c;c.ThemeManager=new c;return c});s("tinymce.core.text.Zwsp",[],function(){return{isZwsp:function(g){return"\ufeff"===g},ZWSP:"\ufeff",trim:function(g){return g.replace(/\ufeff/g,"")}}});s("tinymce.core.caret.CaretContainer",["global!document",
"tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(g,f,h){var e=f.isElement,c=f.isText,b=function(a){c(a)&&(a=a.parentNode);return e(a)&&a.hasAttribute("data-mce-caret")},d=function(a){return c(a)&&h.isZwsp(a.data)},a=function(a){return b(a)||d(a)},k=function(){var a=g.createElement("br");a.setAttribute("data-mce-bogus","1");return a},l=function(a){return c(a)&&a.data[0]==h.ZWSP},p=function(a){return c(a)&&a.data[a.data.length-1]==h.ZWSP};return{isCaretContainer:a,isCaretContainerBlock:b,
isCaretContainerInline:d,showCaretContainerBlock:function(a){if(a&&a.hasAttribute("data-mce-caret")){var b=a.getElementsByTagName("br"),b=b[b.length-1];f.isBogus(b)&&b.parentNode.removeChild(b);a.removeAttribute("data-mce-caret");a.removeAttribute("data-mce-bogus");a.removeAttribute("style");a.removeAttribute("_moz_abspos");return a}return null},insertInline:function(b,d){var e,k,f;k=b.ownerDocument.createTextNode(h.ZWSP);f=b.parentNode;if(d){e=b.previousSibling;if(c(e)){if(a(e))return e;if(p(e))return e.splitText(e.data.length-
1)}f.insertBefore(k,b)}else{e=b.nextSibling;if(c(e)){if(a(e))return e;if(l(e))return e.splitText(1),e}b.nextSibling?f.insertBefore(k,b.nextSibling):f.appendChild(k)}return k},prependInline:function(a){if(f.isText(a)){var b=a.data;0<b.length&&b.charAt(0)!==h.ZWSP&&a.insertData(0,h.ZWSP);return a}return null},appendInline:function(a){if(f.isText(a)){var b=a.data;0<b.length&&b.charAt(b.length-1)!==h.ZWSP&&a.insertData(b.length,h.ZWSP);return a}return null},isBeforeInline:function(a){return a&&f.isText(a.container())&&
a.container().data.charAt(a.offset())===h.ZWSP},isAfterInline:function(a){return a&&f.isText(a.container())&&a.container().data.charAt(a.offset()-1)===h.ZWSP},insertBlock:function(a,b,c){var d;a=b.ownerDocument.createElement(a);a.setAttribute("data-mce-caret",c?"before":"after");a.setAttribute("data-mce-bogus","all");a.appendChild(k());d=b.parentNode;c?d.insertBefore(a,b):b.nextSibling?d.insertBefore(a,b.nextSibling):d.appendChild(a);return a},hasContent:function(a){return a.firstChild!==a.lastChild||
!f.isBr(a.firstChild)},startsWithCaretContainer:l,endsWithCaretContainer:p}});s("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(g,f,h){var e=g.isContentEditableTrue,c=g.isContentEditableFalse,b=g.isBr,d=g.isText,a=g.matchNodeNames("script style textarea"),k=g.matchNodeNames("img input textarea hr iframe video audio object"),l=g.matchNodeNames("table"),p=h.isCaretContainer,n=function(e){return p(e)?!1:d(e)?a(e.parentNode)?
!1:!0:k(e)||b(e)||l(e)||c(e)},m=function(a,b){for(a=a.parentNode;a&&a!=b;a=a.parentNode){if(c(a))return!1;if(e(a))break}return!0},q=function(a){return c(a)?!0!==f.reduce(a.getElementsByTagName("*"),function(a,b){return a||e(b)},!1):!1};return{isCaretCandidate:n,isInEditable:m,isAtomic:function(a){return k(a)||q(a)},isEditableCaretCandidate:function(a,b){return n(a)&&m(a,b)}}});s("tinymce.core.geom.ClientRect",[],function(){var g=Math.round,f=function(b){return b?{left:g(b.left),top:g(b.top),bottom:g(b.bottom),
right:g(b.right),width:g(b.width),height:g(b.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},h=function(b,a){return b.bottom-b.height/2<a.top?!0:b.top>a.bottom?!1:0<=a.top-b.bottom&&a.top-b.bottom<=Math.min(b.height,a.height)/2},e=function(b,a){return b.top>a.bottom?!0:b.bottom<a.top?!1:0<=a.bottom-b.top&&a.bottom-b.top<=Math.min(b.height,a.height)/2},c=function(b,a){return b.left<a.left},b=function(b,a){return b.right>a.right};return{clone:f,collapse:function(b,a){b=f(b);a||(b.left+=b.width);
b.right=b.left;b.width=0;return b},isEqual:function(b,a){return b.left===a.left&&b.top===a.top&&b.bottom===a.bottom&&b.right===a.right},isAbove:h,isBelow:e,isLeft:c,isRight:b,compare:function(d,a){return h(d,a)?-1:e(d,a)?1:c(d,a)?-1:b(d,a)?1:0},containsXY:function(b,a,c){return a>=b.left&&a<=b.right&&c>=b.top&&c<=b.bottom}}});s("tinymce.core.selection.RangeNodes",[],function(){return{getSelectedNode:function(g){var f=g.startContainer,h=g.startOffset;return f.hasChildNodes()&&g.endOffset==h+1?f.childNodes[h]:
null},getNode:function(g,f){1===g.nodeType&&g.hasChildNodes()&&(f>=g.childNodes.length&&(f=g.childNodes.length-1),g=g.childNodes[f]);return g}}});s("tinymce.core.text.ExtendingChar",[],function(){var g=RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");
return{isExtendingChar:function(f){return"string"==typeof f&&768<=f.charCodeAt(0)&&g.test(f)}}});s("tinymce.core.util.Fun",[],function(){var g=[].slice,f=function(h){var e=g.call(arguments);return e.length-1>=h.length?h.apply(this,e.slice(1)):function(){var c=e.concat([].slice.call(arguments));return f.apply(this,c)}};return{constant:function(f){return function(){return f}},negate:function(f){return function(e){return!f(e)}},and:function(){var f=g.call(arguments);return function(e){for(var c=0;c<
f.length;c++)if(!f[c](e))return!1;return!0}},or:function(){var f=g.call(arguments);return function(e){for(var c=0;c<f.length;c++)if(f[c](e))return!0;return!1}},curry:f,compose:function(f,e){return function(c){return f(e(c))}},noop:function(){}}});s("tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretCandidate tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.selection.RangeNodes tinymce.core.text.ExtendingChar tinymce.core.util.Fun".split(" "),function(g,
f,h,e,c,b,d){var a=h.isElement;g=g.isCaretCandidate;var k=h.matchStyleValues("display","block table"),l=h.matchStyleValues("float","left right"),p=d.and(a,g,d.negate(l)),n=d.negate(h.matchStyleValues("white-space","pre pre-line pre-wrap")),m=h.isText,q=h.isBr,t=f.nodeIndex,r=c.getNode,w=function(a){return"createRange"in a?a.createRange():f.DOM.createRng()},x=function(a){return a&&/[\r\n\t ]/.test(a)},v=function(a){var b=a.startContainer,c=a.startOffset;return x(a.toString())&&n(b.parentNode)&&(a=
b.data,x(a[c-1])||x(a[c+1]))?!0:!1},z=function(c){var d=[],f,h=function(a){var b;b=a.getClientRects();b=0<b.length?e.clone(b[0]):e.clone(a.getBoundingClientRect());if(q(a)&&0===b.left){var c=a.ownerDocument;b=w(c);var c=c.createTextNode("\u00a0"),d=a.parentNode;d.insertBefore(c,a);b.setStart(c,0);b.setEnd(c,1);a=e.clone(b.getBoundingClientRect());d.removeChild(c);return a}return b},l=function(a,b){a=e.collapse(a,b);a.width=1;a.right=a.left+1;return a},g=function(a){0===a.height||0<d.length&&e.isEqual(a,
d[d.length-1])||d.push(a)},u=function(a,c){var e=w(a.ownerDocument);if(c<a.data.length){if(b.isExtendingChar(a.data[c]))return d;if(b.isExtendingChar(a.data[c-1])&&(e.setStart(a,c),e.setEnd(a,c+1),!v(e)))return g(l(h(e),!1)),d}0<c&&(e.setStart(a,c-1),e.setEnd(a,c),v(e)||g(l(h(e),!1)));c<a.data.length&&(e.setStart(a,c),e.setEnd(a,c+1),v(e)||g(l(h(e),!0)))};if(m(c.container()))return u(c.container(),c.offset()),d;if(a(c.container()))if(c.isAtEnd())f=r(c.container(),c.offset()),m(f)&&u(f,f.data.length),
p(f)&&!q(f)&&g(l(h(f),!1));else{f=r(c.container(),c.offset());m(f)&&u(f,0);if(p(f)&&c.isAtEnd())return g(l(h(f),!1)),d;c=r(c.container(),c.offset()-1);p(c)&&!q(c)&&(k(c)||k(f)||!p(f))&&g(l(h(c),!1));p(f)&&g(l(h(f),!0))}return d},u=function(a,b,c){var e=function(){c||(c=z(new u(a,b)));return c};return{container:d.constant(a),offset:d.constant(b),toRange:function(){var c;c=w(a.ownerDocument);c.setStart(a,b);c.setEnd(a,b);return c},getClientRects:e,isVisible:function(){return 0<e().length},isAtStart:function(){m(a);
return 0===b},isAtEnd:function(){return m(a)?b>=a.data.length:b>=a.childNodes.length},isEqual:function(c){return c&&a===c.container()&&b===c.offset()},getNode:function(c){return r(a,c?b-1:b)}}};u.fromRangeStart=function(a){return new u(a.startContainer,a.startOffset)};u.fromRangeEnd=function(a){return new u(a.endContainer,a.endOffset)};u.after=function(a){return new u(a.parentNode,t(a)+1)};u.before=function(a){return new u(a.parentNode,t(a))};u.isAtStart=function(a){return a?a.isAtStart():!1};u.isAtEnd=
function(a){return a?a.isAtEnd():!1};u.isTextPosition=function(a){return a?h.isText(a.container()):!1};return u});s("tinymce.core.caret.CaretUtils","tinymce.core.util.Fun tinymce.core.dom.TreeWalker tinymce.core.dom.NodeType tinymce.core.caret.CaretPosition tinymce.core.caret.CaretContainer tinymce.core.caret.CaretCandidate".split(" "),function(g,f,h,e,c,b){var d=h.isContentEditableTrue,a=h.isContentEditableFalse,k=h.matchStyleValues("display","block table table-cell table-caption list-item"),l=c.isCaretContainer,
p=c.isCaretContainerBlock,n=g.curry,m=h.isElement,q=b.isCaretCandidate,t=function(a,b){for(var c;c=a(b);)if(!p(c))return c;return null},r=function(a,b){for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(d(a))return a;return b},w=function(a,b){for(;a&&a!=b;){if(k(a))return a;a=a.parentNode}return null};g=function(a,b){var c=b.ownerDocument.createRange();a?(c.setStartBefore(b),c.setEndBefore(b)):(c.setStartAfter(b),c.setEndAfter(b));return c};var x=function(b,c,d){var e;for(e=b?"previousSibling":"nextSibling";d&&
d!=c;){b=d[e];l(b)&&(b=b[e]);if(a(b)){if(w(b,c)==w(d,c))return b;break}if(q(b))break;d=d.parentNode}return null},v=n(g,!0),z=n(g,!1);g=function(b,c){var d;var e;c?(d=c.container(),e=c.offset(),d=m(d)?d.childNodes[e+b]:null):d=null;return a(d)};return{isForwards:function(a){return 0<a},isBackwards:function(a){return 0>a},findNode:function(b,c,d,e,k){e=new f(b,e);if(0>c){if(a(b)||p(b))if(b=t(e.prev,!0),d(b))return b;for(;b=t(e.prev,k);)if(d(b))return b}if(0<c){if(a(b)||p(b))if(b=t(e.next,!0),d(b))return b;
for(;b=t(e.next,k);)if(d(b))return b}return null},getEditingHost:r,getParentBlock:w,isInSameBlock:function(a,b,c){return w(a.container(),c)==w(b.container(),c)},isInSameEditingHost:function(a,b,c){return r(a.container(),c)==r(b.container(),c)},isBeforeContentEditableFalse:n(g,0),isAfterContentEditableFalse:n(g,-1),normalizeRange:function(b,d,e){var k,f,g,r=n(x,!0,d),q=n(x,!1,d);k=e.startContainer;f=e.startOffset;if(c.isCaretContainerBlock(k)){m(k)||(k=k.parentNode);g=k.getAttribute("data-mce-caret");
if("before"==g&&(d=k.nextSibling,a(d)))return v(d);if("after"==g&&(d=k.previousSibling,a(d)))return z(d)}if(!e.collapsed)return e;if(h.isText(k)){if(l(k)){if(1===b){if(d=q(k))return v(d);if(d=r(k))return z(d)}if(-1===b){if(d=r(k))return z(d);if(d=q(k))return v(d)}return e}if(c.endsWithCaretContainer(k)&&f>=k.data.length-1)return 1===b&&(d=q(k))?v(d):e;if(c.startsWithCaretContainer(k)&&1>=f)return-1===b&&(d=r(k))?z(d):e;if(f===k.data.length)return(d=q(k))?v(d):e;if(0===f&&(d=r(k)))return z(d)}return e}}});
s("tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(g,f,h,e,c,b){var d=g.isContentEditableFalse,a=g.isText,k=g.isElement,l=g.isBr,p=e.isForwards,n=e.isBackwards,m=f.isCaretCandidate,q=f.isAtomic,t=f.isEditableCaretCandidate,r=function(a,b){for(var c=[];a&&a!=b;)c.push(a),a=a.parentNode;return c},w=function(b,c){if(p(b)){if(m(c.previousSibling)&&
!a(c.previousSibling))return h.before(c);if(a(c))return h(c,0)}if(n(b)){if(m(c.nextSibling)&&!a(c.nextSibling))return h.after(c);if(a(c))return h(c,c.data.length)}return n(b)?l(c)?h.before(c):h.after(c):h.before(c)},x=function(f,z,u){var y,B,A;if(!k(u)||!z)return null;if(z.isEqual(h.after(u))&&u.lastChild){if(A=h.after(u.lastChild),n(f)&&m(u.lastChild)&&k(u.lastChild))return l(u.lastChild)?h.before(u.lastChild):A}else A=z;y=A.container();B=A.offset();if(a(y)){if(n(f)&&0<B)return h(y,--B);if(p(f)&&
B<y.length)return h(y,++B);z=y}else{if(n(f)&&0<B&&(z=y.hasChildNodes()&&B-1<y.childNodes.length?y.childNodes[B-1]:null,m(z)))return!q(z)&&(f=e.findNode(z,f,t,z))?a(f)?h(f,f.data.length):h.after(f):a(z)?h(z,z.data.length):h.before(z);if(p(f)&&B<y.childNodes.length&&(z=y.hasChildNodes()&&B<y.childNodes.length?y.childNodes[B]:null,m(z)))return y=z,y=g.isBr(y)?(A=x(1,h.after(y),u))?!e.isInSameBlock(h.before(y),h.before(A),u):!1:!1,y?x(f,h.after(z),u):!q(z)&&(f=e.findNode(z,f,t,z))?a(f)?h(f,0):h.before(f):
a(z)?h(z,0):h.after(z);z=A.getNode()}if(p(f)&&A.isAtEnd()||n(f)&&A.isAtStart())if(z=e.findNode(z,f,b.constant(!0),u,!0),t(z))return w(f,z);z=e.findNode(z,f,t,u);return!(u=c.last(c.filter(r(y,u),d)))||z&&u.contains(z)?z?w(f,z):null:A=p(f)?h.after(u):h.before(u)};return function(a){return{next:function(b){return x(1,b,a)},prev:function(b){return x(-1,b,a)}}}});s("tinymce.core.InsertList",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],
function(g,f,h,e){var c=function(a,b,c){b=b.serialize(c);a=a.createFragment(b);b=a.firstChild;c=a.lastChild;b&&"META"===b.nodeName&&b.parentNode.removeChild(b);c&&"mce_marker"===c.id&&c.parentNode.removeChild(c);return a},b=function(a){return e.grep(a.childNodes,function(a){return"LI"===a.nodeName})},d=function(a){return 0<a.length&&(!a[a.length-1].firstChild||a[a.length-1]&&a[a.length-1].firstChild&&a[a.length-1].firstChild===a[a.length-1].lastChild&&("\u00a0"===a[a.length-1].firstChild.data||h.isBr(a[a.length-
1].firstChild)))?a.slice(0,-1):a},a=function(a,b){var c=a.getParent(b,a.isBlock);return c&&"LI"===c.nodeName?c:null},k=function(a,b){var c=b.cloneRange(),d=b.cloneRange();c.setStartBefore(a);d.setEndAfter(a);return[c.cloneContents(),d.cloneContents()]},l=function(a,b){var c=g.before(a);return(c=(new f(b)).next(c))?c.toRange():null},p=function(a,b){var c=g.after(a);return(c=(new f(b)).prev(c))?c.toRange():null},n=function(a,b,c,d){d=k(a,d);var f=a.parentNode;f.insertBefore(d[0],a);e.each(b,function(b){f.insertBefore(b,
a)});f.insertBefore(d[1],a);f.removeChild(a);return p(b[b.length-1],c)},m=function(a,b,c){var d=a.parentNode;e.each(b,function(b){d.insertBefore(b,a)});return l(a,c)},q=function(a,b,c,d){d.insertAfter(b.reverse(),a);return p(b[0],c)};return{isListFragment:function(a,b){var c=b.firstChild,d=b.lastChild;c&&"meta"===c.name&&(c=c.next);d&&"mce_marker"===d.attr("id")&&(d=d.prev);var e=d,k=a.getNonEmptyElements();e&&(e.isEmpty(k)||a.getBlockElements()[e.name]&&e.firstChild&&e.firstChild===e.lastChild&&
("br"===e.firstChild.name||"\u00a0"===e.firstChild.value))&&(d=d.prev);return c&&c===d?"ul"===c.name||"ol"===c.name:!1},insertAtCaret:function(e,k,h,l){e=c(k,e,l);var v=a(k,h.startContainer);e=d(b(e.firstChild));l=k.getRoot();var z=function(b){var c=g.fromRangeStart(h),d=new f(k.getRoot());return(b=1===b?d.prev(c):d.next(c))?a(k,b.getNode())!==v:!0};return z(1)?m(v,e,l):z(2)?q(v,e,l,k):n(v,e,l,h)},isParentBlockLi:function(b,c){return!!a(b,c)},trimListItems:d,listItems:b}});s("tinymce.core.caret.CaretBookmark",
["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(g,f,h,e,c){var b=g.isText,d=g.isBogus,a=f.nodeIndex,k=function(a){a=a.parentNode;return d(a)?k(a):a},l=function(a){return a?e.reduce(a.childNodes,function(a,b){d(b)&&"BR"!=b.nodeName?a=a.concat(l(b)):a.push(b);return a},[]):[]},p=function(a,c){for(;(a=a.previousSibling)&&b(a);)c+=a.data.length;return c},n=function(a){return function(b){return a===b}},
m=function(a){var c,d,f;c=l(k(a));d=e.findIndex(c,n(a),a);c=c.slice(0,d+1);f=e.reduce(c,function(a,d,e){b(d)&&b(c[e-1])&&a++;return a},0);c=e.filter(c,g.matchNodeNames(a.nodeName));d=e.findIndex(c,n(a),a);return d-f},q=function(a){return(b(a)?"text()":a.nodeName.toLowerCase())+"["+m(a)+"]"},t=function(a,b,c){var d=[];for(b=b.parentNode;!(b==a||c&&c(b));b=b.parentNode)d.push(b);return d},r=function(a,c,d){var k=l(a),k=e.filter(k,function(a,c){return!b(a)||!b(k[c-1])}),k=e.filter(k,g.matchNodeNames(c));
return k[d]},w=function(a,d){for(var e=a,k=0,f;b(e);){f=e.data.length;if(d>=k&&d<=k+f){a=e;d-=k;break}if(!b(e.nextSibling)){a=e;d=f;break}k+=f;e=e.nextSibling}d>a.data.length&&(d=a.data.length);return new c(a,d)};return{create:function(a,c){var d,k,f=[],m;d=c.container();k=c.offset();b(d)?m=p(d,k):(d=d.childNodes,k>=d.length?(m="after",k=d.length-1):m="before",d=d[k]);f.push(q(d));k=t(a,d);k=e.filter(k,h.negate(g.isBogus));f=f.concat(e.map(k,function(a){return q(a)}));return f.reverse().join("/")+
","+m},resolve:function(d,k){var f,h;if(!k)return null;f=k.split(",");k=f[0].split("/");h=1<f.length?f[1]:"before";f=e.reduce(k,function(a,b){b=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);if(!b)return null;"text()"===b[1]&&(b[1]="#text");return r(a,b[1],parseInt(b[2],10))},d);return f?b(f)?w(f,parseInt(h,10)):(h="after"===h?a(f)+1:a(f),new c(f.parentNode,h)):null}}});s("tinymce.core.dom.GetBookmark","ephox.katamari.api.Fun tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.selection.RangeNodes tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a){var k=c.isContentEditableFalse,l=function(a,b,d){d=a(b.data.slice(0,d)).length;for(b=b.previousSibling;b&&c.isText(b);b=b.previousSibling)d+=a(b.data).length;return d},p=function(a,b,d,e,k){var f=e[k?"startContainer":"endContainer"];e=e[k?"startOffset":"endOffset"];k=[];var h=0,m=a.getRoot();c.isText(f)?k.push(d?l(b,f,e):e):(b=f.childNodes,e>=b.length&&b.length&&(h=1,e=Math.max(0,b.length-1)),k.push(a.nodeIndex(b[e],d)+h));for(;f&&f!==m;f=f.parentNode)k.push(a.nodeIndex(f,
d));return k},n=function(a){c.isText(a)&&0===a.data.length&&a.parentNode.removeChild(a)},m=function(b,c,d){var e=0;a.each(b.select(c),function(a){if("all"!==a.getAttribute("data-mce-bogus")){if(a===d)return!1;e++}});return e},q=function(a,b){var d,e;e=b?"start":"end";d=a[e+"Container"];e=a[e+"Offset"];c.isElement(d)&&"TR"===d.nodeName&&(d=d.childNodes,d=d[Math.min(b?e:e-1,d.length-1)])&&(e=b?0:d.childNodes.length,a["set"+(b?"Start":"End")](d,e))},t=function(a){q(a,!0);q(a,!1);return a},r=function(a,
d){var e;if(c.isElement(a)&&(a=b.getNode(a,d),k(a)))return a;if(h.isCaretContainer(a)){c.isText(a)&&h.isCaretContainerBlock(a)&&(a=a.parentNode);e=a.previousSibling;if(k(e))return e;e=a.nextSibling;if(k(e))return e}},w=function(a,b,c){var d=c.getNode(),e=d?d.nodeName:null,f=c.getRng();if(k(d)||"IMG"===e)return{name:e,index:m(c.dom,e,d)};if(d=r(f.startContainer,f.startOffset)||r(f.endContainer,f.endOffset))return e=d.tagName,{name:e,index:m(c.dom,e,d)};d=c.dom;e={};e.start=p(d,a,b,f,!0);c.isCollapsed()||
(e.end=p(d,a,b,f,!1));return e};return{getBookmark:function(a,b,c){if(2===b)return w(d.trim,c,a);if(3===b)return b=a.getRng(),{start:f.create(a.dom.getRoot(),e.fromRangeStart(b)),end:f.create(a.dom.getRoot(),e.fromRangeEnd(b))};if(b)return{rng:a.getRng()};var k=a.dom;b=a.getRng();c=k.uniqueId();var h=a.isCollapsed(),l=a.getNode(),g=l.nodeName;"IMG"===g?a={name:g,index:m(k,g,l)}:(l=t(b.cloneRange()),h||(l.collapse(!1),h=k.create("span",{"data-mce-type":"bookmark",id:c+"_end",style:"overflow:hidden;line-height:0px"},
"&#xFEFF;"),l.insertNode(h),n(h.nextSibling)),b=t(b),b.collapse(!0),k=k.create("span",{"data-mce-type":"bookmark",id:c+"_start",style:"overflow:hidden;line-height:0px"},"&#xFEFF;"),b.insertNode(k),n(k.previousSibling),a.moveToBookmark({id:c,keep:1}),a={id:c});return a},getUndoBookmark:g.curry(w,g.identity,!0)}});s("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(g){return{cat:function(f){for(var h=[],e=function(b){h.push(b)},c=0;c<f.length;c++)f[c].each(e);return h},findMap:function(f,
h){for(var e=0;e<f.length;e++){var c=h(f[e],e);if(c.isSome())return c}return g.none()},liftN:function(f,h){for(var e=[],c=0;c<f.length;c++){var b=f[c];if(b.isSome())e.push(b.getOrDie());else return g.none()}return g.some(h.apply(null,e))}}});s("tinymce.core.dom.ResolveBookmark","ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.Env tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d){var a=
function(a,b){!a.isBlock(b)||b.innerHTML||h.ie||(b.innerHTML='<br data-mce-bogus="1" />');return b},k=function(a,b){var c,d;c=a.createRng();d=e.resolve(a.getRoot(),b.start);c.setStart(d.container(),d.offset());d=e.resolve(a.getRoot(),b.end);c.setEnd(d.container(),d.offset());return c},l=function(a,b,c,d){c=c[b?"start":"end"];var e,k;e=a.getRoot();if(c){a=c[0];k=e;for(e=c.length-1;1<=e;e--){k=k.childNodes;if(c[e]>k.length-1)return;k=k[c[e]]}3===k.nodeType&&(a=Math.min(c[0],k.nodeValue.length));1===
k.nodeType&&(a=Math.min(c[0],k.childNodes.length));b?d.setStart(k,a):d.setEnd(k,a)}return!0},p=function(a,e,k){var f=a.get(k.id+"_"+e),m,l,n,u;n=k.keep;if(f){m=f.parentNode;n?(m=f.firstChild,l=1):l=a.nodeIndex(f);if(!n){u=f.previousSibling;n=f.nextSibling;for(d.each(d.grep(f.childNodes),function(a){b.isText(a)&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});f=a.get(k.id+"_"+e);)a.remove(f,1);u&&n&&u.nodeType===n.nodeType&&b.isText(u)&&!h.opera&&(l=u.nodeValue.length,u.appendData(n.nodeValue),a.remove(n),
m=u)}return g.some(c(m,l))}return g.none()},n=function(b,c){var d=p(b,"start",c),e=p(b,"end",c);return f.liftN([d,e.isSome()?e:d],function(c,d){var e=b.createRng();e.setStart(a(b,c.container()),c.offset());e.setEnd(a(b,d.container()),d.offset());return e})},m=function(a,b){return g.from(a.select(b.name)[b.index]).map(function(b){var c=a.createRng();c.selectNode(b);return c})};return{resolve:function(a,b){var c=a.dom;if(b){if(d.isArray(b.start)){var e=c.createRng(),c=l(c,!0,b,e)&&l(c,!1,b,e)?g.some(e):
g.none();return c}if("string"===typeof b.start)return g.some(k(c,b));if(b.id)return n(c,b);if(b.name)return m(c,b);if(b.rng)return g.some(b.rng)}return g.none()}}});s("tinymce.core.dom.Bookmarks",["tinymce.core.dom.GetBookmark","tinymce.core.dom.ResolveBookmark"],function(g,f){return{getBookmark:function(f,e,c){return g.getBookmark(f,e,c)},moveToBookmark:function(h,e){f.resolve(h,e).each(function(c){h.setRng(c)})},isBookmarkNode:function(f){return f&&"SPAN"===f.tagName&&"bookmark"===f.getAttribute("data-mce-type")}}});
s("tinymce.core.dom.ElementUtils",["tinymce.core.dom.Bookmarks","tinymce.core.util.Tools"],function(g,f){var h=f.each;return function(e){this.compare=function(c,b){if(c.nodeName!=b.nodeName)return!1;var d=function(a){var b={};h(e.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&"style"!==c&&0!==c.indexOf("data-")&&(b[c]=e.getAttrib(a,c))});return b},a=function(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if("undefined"==typeof c||a[d]!=c)return!1;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return!1;
return!0};return a(d(c),d(b))&&a(e.parseStyle(e.getAttrib(c,"style")),e.parseStyle(e.getAttrib(b,"style")))?!g.isBookmarkNode(c)&&!g.isBookmarkNode(b):!1}}});s("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(g){var f=function(e,c){g.parent(e).each(function(b){b.dom().insertBefore(c.dom(),e.dom())})},h=function(e,c){e.dom().appendChild(c.dom())};return{before:f,after:function(e,c){g.nextSibling(e).fold(function(){g.parent(e).each(function(b){h(b,c)})},function(b){f(b,c)})},
prepend:function(e,c){g.firstChild(e).fold(function(){h(e,c)},function(b){e.dom().insertBefore(c.dom(),b.dom())})},append:h,appendAt:function(e,c,b){g.child(e,b).fold(function(){h(e,c)},function(b){f(b,c)})},wrap:function(e,c){f(e,c);h(c,e)}}});s("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(g,f){return{before:function(h,e){g.each(e,function(c){f.before(h,c)})},after:function(h,e){g.each(e,function(c,b){f.after(0===b?h:e[b-1],c)})},prepend:function(h,
e){g.each(e.slice().reverse(),function(c){f.prepend(h,c)})},append:function(h,e){g.each(e,function(c){f.append(h,c)})}}});s("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(g,f,h){var e=function(c){c=c.dom();null!==c.parentNode&&c.parentNode.removeChild(c)};return{empty:function(c){c.dom().textContent="";g.each(h.children(c),function(b){e(b)})},remove:e,unwrap:function(c){var b=h.children(c);0<b.length&&f.before(c,b);
e(c)}}});s("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(g,f,h){return function(e,c){var b=function(a){try{return d(a)}catch(b){return f.none()}},d=function(a){return e(a)?f.from(a.dom().nodeValue):f.none()},a=g.detect().browser,k=a.isIE()&&10===a.version.major?b:d;return{get:function(a){if(!e(a))throw new h("Can only get "+c+" value of a "+c+" node");return k(a).getOr("")},getOption:k,set:function(a,b){if(!e(a))throw new h("Can only set raw "+
c+" value of a "+c+" node");a.dom().nodeValue=b}}}});s("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(g,f){var h=f(g.isText,"text");return{get:function(e){return h.get(e)},getOption:function(e){return h.getOption(e)},set:function(e,c){h.set(e,c)}}});s("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(g,f,h){var e=function(c,b){var d=[];g.each(h.children(c),function(a){b(a)&&
(d=d.concat([a]));d=d.concat(e(a,b))});return d};return{all:function(c){return e(f.body(),c)},ancestors:function(c,b,d){return g.filter(h.parents(c,d),b)},siblings:function(c,b){return g.filter(h.siblings(c),b)},children:function(c,b){return g.filter(h.children(c),b)},descendants:e}});s("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(g,f){return{all:function(h){return f.all(h)},ancestors:function(h,e,c){return g.ancestors(h,
function(b){return f.is(b,e)},c)},siblings:function(h,e){return g.siblings(h,function(c){return f.is(c,e)})},children:function(h,e){return g.children(h,function(c){return f.is(c,e)})},descendants:function(h,e){return f.all(e,h)}}});s("tinymce.core.dom.PaddingBr","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType".split(" "),
function(g,f,h,e,c,b,d,a,k){var l=function(a){var b=[];for(a=a.dom();a;)b.push(e.fromDom(a)),a=a.lastChild;return b},p=function(a){return c.isText(a)?"\u00a0"===b.get(a):k.isBr(a)};return{removeTrailingBr:function(a){var b=d.descendants(a,"br");a=g.filter(l(a).slice(-1),k.isBr);b.length===a.length&&g.each(a,h.remove)},fillWithPaddingBr:function(a){h.empty(a);f.append(a,e.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(b){return 1===g.filter(a.children(b),p).length},trimBlockTrailingBr:function(b){a.lastChild(b).each(function(c){a.prevSibling(c).each(function(a){k.isBlock(b)&&
k.isBr(c)&&k.isBlock(a)&&h.remove(c)})})}}});s("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(g,f){var h=f.makeMap;return function(e){var c=[],b,d,a,k,f;e=e||{};b=e.indent;d=h(e.indent_before||"");a=h(e.indent_after||"");k=g.getEncodeFunc(e.entity_encoding||"raw",e.entities);f="html"==e.element_format;return{start:function(e,h,m){var g,t,r;b&&d[e]&&0<c.length&&(g=c[c.length-1],0<g.length&&"\n"!==g&&c.push("\n"));c.push("<",e);if(h)for(g=0,t=h.length;g<
t;g++)r=h[g],c.push(" ",r.name,'="',k(r.value,!0),'"');c[c.length]=!m||f?">":" />";m&&b&&a[e]&&0<c.length&&(g=c[c.length-1],0<g.length&&"\n"!==g&&c.push("\n"))},end:function(d){c.push("</",d,">");b&&a[d]&&0<c.length&&(d=c[c.length-1],0<d.length&&"\n"!==d&&c.push("\n"))},text:function(a,b){0<a.length&&(c[c.length]=b?a:k(a))},cdata:function(a){c.push("<![CDATA[",a,"]]\x3e")},comment:function(a){c.push("\x3c!--",a,"--\x3e")},pi:function(a,d){d?c.push("<?",a," ",k(d),"?>"):c.push("<?",a,"?>");b&&c.push("\n")},
doctype:function(a){c.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}}});s("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(g,f){return function(h,e){var c=new g(h);h=h||{};h.validate="validate"in h?h.validate:!0;this.schema=e=e||new f;this.writer=c;this.serialize=function(b){var d,a;a=h.validate;d={3:function(a){c.text(a.value,a.raw)},8:function(a){c.comment(a.value)},7:function(a){c.pi(a.name,
a.value)},10:function(a){c.doctype(a.value)},4:function(a){c.cdata(a.value)},11:function(a){if(a=a.firstChild){do k(a);while(a=a.next)}}};c.reset();var k=function(b){var f=d[b.type],h,m,g,t,r,w,x,v;if(f)f(b);else{f=b.name;h=b.shortEnded;m=b.attributes;if(a&&m&&1<m.length&&(r=[],r.map={},v=e.getElementRule(b.name))){w=0;for(x=v.attributesOrder.length;w<x;w++)g=v.attributesOrder[w],g in m.map&&(t=m.map[g],r.map[g]=t,r.push({name:g,value:t}));w=0;for(x=m.length;w<x;w++)g=m[w].name,g in r.map||(t=m.map[g],
r.map[g]=t,r.push({name:g,value:t}));m=r}c.start(b.name,m,h);if(!h){if(b=b.firstChild){do k(b);while(b=b.next)}c.end(f)}}};if(1!=b.type||h.inner)d[11](b);else k(b);return c.getContent()}}});s("tinymce.core.caret.CaretFinder","ephox.katamari.api.Fun ephox.katamari.api.Option tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d){var a=function(a){return e.isTextPosition(a)?
a.offset()===a.container().data.length:h.isCaretCandidate(a.getNode(!0))},k=function(a,c,d){c=new b(c);return f.from(a?c.next(d):c.prev(d))},l=function(a,b){var c=a?b.firstChild:b.lastChild;if(d.isText(c))return f.some(new e(c,a?0:c.data.length));if(c){if(h.isCaretCandidate(c))return f.some(a?e.before(c):d.isBr(c)?e.before(c):e.after(c));c=a?e.before(c):e.after(c);return k(a,b,c)}return f.none()};return{fromPosition:k,nextPosition:g.curry(k,!0),prevPosition:g.curry(k,!1),navigate:function(b,g,m){return k(b,
g,m).bind(function(l){var t;if(t=c.isInSameBlock(m,l,g))t=b?!(!e.isTextPosition(m)&&!e.isTextPosition(l)&&m.getNode()===l.getNode(!0))&&!(!e.isTextPosition(m)&&d.isBr(m.getNode()))&&a(m)&&(e.isTextPosition(l)?0===l.offset():h.isCaretCandidate(l.getNode())):!(!e.isTextPosition(l)&&!e.isTextPosition(m)&&l.getNode()===m.getNode(!0))&&(e.isTextPosition(m)?0===m.offset():h.isCaretCandidate(m.getNode()))&&a(l);return t?k(b,g,l):f.some(l)})},positionIn:l,firstPositionIn:g.curry(l,!0),lastPositionIn:g.curry(l,
!1)}});s("tinymce.core.selection.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(g,f,h,e){var c=function(b){var c=h.fromRangeStart(b),a=h.fromRangeEnd(b),k=b.commonAncestorContainer;return f.fromPosition(!1,k,a).map(function(f){if(!e.isInSameBlock(c,a,k)&&e.isInSameBlock(c,f,k)){var h=c.container(),n=c.offset(),m=f.container();f=f.offset();var q=g.createRange();q.setStart(h,n);q.setEnd(m,f);return q}return b}).getOr(b)};
return{normalize:function(b){return b.collapsed?b:c(b)}}});s("tinymce.core.InsertContent","ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.InsertList tinymce.core.caret.CaretPosition tinymce.core.caret.CaretWalker tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.html.Serializer tinymce.core.selection.RangeNormalizer tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n){var m=a.matchNodeNames("td th"),
q=function(a,b,c){if("all"===c.getAttribute("data-mce-bogus"))c.parentNode.insertBefore(a.dom.createFragment(b),c);else{var d=c.firstChild,e=c.lastChild;!d||d===e&&"BR"===d.nodeName?a.dom.setHTML(c,b):a.selection.setContent(b)}},t=function(a,b){g.from(a.getParent(b,"td,th")).map(f.fromDom).each(k.trimBlockTrailingBr)},r=function(a,k,f){var g,u,y,r,A,C,D,J,G,E=a.schema.getTextInlineElements(),H=a.selection,F=a.dom;g=function(a){var b,c;b=H.getRng(!0);c=b.startContainer;b=b.startOffset;3==c.nodeType&&
(0<b?a=a.replace(/^&nbsp;/," "):c.previousSibling&&3==c.previousSibling.nodeType||(a=a.replace(/^ /,"&nbsp;")),b<c.length?a=a.replace(/&nbsp;(<br>|)$/," "):c.nextSibling&&3==c.nextSibling.nodeType||(a=a.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")));return a};y=function(){var a,b,c;a=H.getRng(!0);b=a.startContainer;c=a.startOffset;3==b.nodeType&&a.collapsed&&("\u00a0"===b.data[c]?(b.deleteData(c,1),/[\u00a0| ]$/.test(k)||(k+=" ")):"\u00a0"===b.data[c-1]&&(b.deleteData(c-1,1),/[\u00a0| ]$/.test(k)||(k=" "+
k)))};var s=function(){if(G){var b=a.getBody(),c=new d(F);n.each(F.select("*[data-mce-fragment]"),function(a){for(var d=a.parentNode;d&&d!=b;d=d.parentNode)E[a.nodeName.toLowerCase()]&&c.compare(d,a)&&F.remove(a,!0)})}},K=function(a){for(;a=a.walk();)1===a.type&&a.attr("data-mce-fragment","1")},O=function(a){n.each(a.getElementsByTagName("*"),function(a){a.removeAttribute("data-mce-fragment")})},I=function(d){var e,k;e=function(b){for(var c=a.getBody();b&&b!==c;b=b.parentNode)if("false"===a.dom.getContentEditable(b))return b;
return null};if(d)if(H.scrollIntoView(d),e=e(d))F.remove(d),H.select(e);else{C=F.createRng();(D=d.previousSibling)&&3==D.nodeType?(C.setStart(D,D.nodeValue.length),h.ie||(J=d.nextSibling)&&3==J.nodeType&&(D.appendData(J.data),J.parentNode.removeChild(J))):(C.setStartBefore(d),C.setEndBefore(d));var f=function(d){d=c.fromRangeStart(d);if(d=(new b(a.getBody())).next(d))return d.toRange()};e=F.getParent(d,F.isBlock);F.remove(d);e&&F.isEmpty(e)&&(a.$(e).empty(),C.setStart(e,0),C.setEnd(e,0),m(e)||e.getAttribute("data-mce-fragment")||
!(k=f(C))?F.add(e,F.create("br",{"data-mce-bogus":"1"})):(C=k,F.remove(e)));H.setRng(C)}};/^ | $/.test(k)&&(k=g(k));g=a.parser;G=f.merge;u=new l({validate:a.settings.validate},a.schema);A={content:k,format:"html",selection:!0,paste:f.paste};A=a.fire("BeforeSetContent",A);if(A.isDefaultPrevented())a.fire("SetContent",{content:A.content,format:"html",selection:!0,paste:f.paste});else{k=A.content;-1==k.indexOf("{$caret}")&&(k+="{$caret}");k=k.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
C=H.getRng();var M=C.startContainer||(C.parentElement?C.parentElement():null),N=a.getBody();M===N&&H.isCollapsed()&&F.isBlock(N.firstChild)&&N.firstChild&&!a.schema.getShortEndedElements()[N.firstChild.nodeName]&&F.isEmpty(N.firstChild)&&(C=F.createRng(),C.setStart(N.firstChild,0),C.setEnd(N.firstChild,0),H.setRng(C));H.isCollapsed()||(a.selection.setRng(p.normalize(a.selection.getRng())),a.getDoc().execCommand("Delete",!1,null),y());y=H.getNode();M={context:y.nodeName.toLowerCase(),data:f.data,insert:!0};
r=g.parse(k,M);if(!0===f.paste&&e.isListFragment(a.schema,r)&&e.isParentBlockLi(F,y))C=e.insertAtCaret(u,F,a.selection.getRng(!0),r),a.selection.setRng(C),a.fire("SetContent",A);else{K(r);D=r.lastChild;if("mce_marker"==D.attr("id"))for(f=D,D=D.prev;D;D=D.walk(!0))if(3==D.type||!F.isBlock(D.name)){a.schema.isValidChild(D.parent.name,"span")&&D.parent.insert(f,D,"br"===D.name);break}a._selectionOverrides.showBlockCaretContainer(y);if(M.invalid){H.setContent('<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
y=H.getNode();f=a.getBody();for(9==y.nodeType?y=D=f:D=y;D!==f;)y=D,D=D.parentNode;k=y==f?f.innerHTML:F.getOuterHTML(y);k=u.serialize(g.parse(k.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(r)})));y==f?F.setHTML(f,k):F.setOuterHTML(y,k)}else k=u.serialize(r),q(a,k,y);s();I(F.get("mce_marker"));O(a.getBody());t(a.dom,a.selection.getStart());a.fire("SetContent",A);a.addVisual()}}};return{insertAtCaret:function(a,b){var c,d;"string"!==typeof b?(d=n.extend({paste:b.paste,
data:{paste:b.paste}},b),c=b.content):(c=b,d={});r(a,c,d)}}});s("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(g,f){return function(h,e,c,b,d){return h(c,b)?f.some(c):g.isFunction(d)&&d(c)?f.none():e(c,b,d)}});s("ephox.sugar.api.search.PredicateFind","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Body ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.impl.ClosestOrAncestor".split(" "),
function(g,f,h,e,c,b,d,a){var k=function(a,b,c){a=a.dom();for(c=g.isFunction(c)?c:h.constant(!1);a.parentNode;){a=a.parentNode;var k=d.fromDom(a);if(b(k))return e.some(k);if(c(k))break}return e.none()},l=function(a,b){return f.find(a.dom().childNodes,h.compose(b,d.fromDom)).map(d.fromDom)},p=function(a,b){var c=function(a){for(var k=0;k<a.childNodes.length;k++){if(b(d.fromDom(a.childNodes[k])))return e.some(d.fromDom(a.childNodes[k]));var f=c(a.childNodes[k]);if(f.isSome())return f}return e.none()};
return c(a.dom())};return{first:function(a){return p(c.body(),a)},ancestor:k,closest:function(b,c,d){return a(function(a){return c(a)},k,b,c,d)},sibling:function(a,c){var k=a.dom();return k.parentNode?l(d.fromDom(k.parentNode),function(d){return!b.eq(a,d)&&c(d)}):e.none()},child:l,descendant:p}});s("tinymce.core.EditorSettings","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.api.Strings ephox.katamari.api.Struct ephox.katamari.api.Type ephox.sand.api.PlatformDetection tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k){var l=b.immutable("sections","settings"),p=a.detect().deviceType.isTouch(),n=["lists","autolink","autosave"],m={theme:"mobile"},q=function(a){a=d.isArray(a)?a.join(" "):a;a=g.map(d.isString(a)?a.split(" "):[],c.trim);return g.filter(a,function(a){return 0<a.length})},t=function(a,b){var c=h.bifilter(b,function(b,c){return g.contains(a,c)});return l(c.t,c.f)},r=function(a,b,c){a=a.sections();b=a.hasOwnProperty(b)?a[b]:{};return k.extend({},c,b)},w=function(a,b){var c=b.external_plugins?
b.external_plugins:{};return a&&a.external_plugins?k.extend({},a.external_plugins,c):c},x=function(a,b){var c=b.settings().inline;return a&&b.sections().hasOwnProperty("mobile")&&!c},v=function(a,b,c,d){d=t(["mobile"],d);b=k.extend(b,c,d.settings(),x(a,d)?r(d,"mobile",m):{},{validate:!0,content_editable:d.settings().inline,external_plugins:w(c,d.settings())});c=q(c.forced_plugins);var e=q(b.plugins);a=a&&d.sections().hasOwnProperty("mobile")?g.filter(e,f.curry(g.contains,n)):e;a=[].concat(q(c)).concat(q(a));
return k.extend(b,{plugins:a.join(" ")})};return{getEditorSettings:function(a,b,c,d,e){return v(p,{id:b,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:c,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",
forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",
entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a,ie7_compat:!0},d,e)},get:function(a,b){return e.from(a.settings[b])},getString:f.curry(function(a,b,c){return e.from(b.settings[c]).filter(a)},d.isString),combineSettings:v}});s("tinymce.core.text.Bidi",[],function(){var g=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(f){return g.test(f)}}});s("tinymce.core.keyboard.InlineUtils","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors tinymce.core.EditorSettings tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.text.Bidi".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n){var m=function(b,c){var e=c.container(),k=c.offset();return b?d.isCaretContainerInline(e)?p.isText(e.nextSibling)?new a(e.nextSibling,0):a.after(e):d.isBeforeInline(c)?new a(e,k+1):c:d.isCaretContainerInline(e)?p.isText(e.previousSibling)?new a(e.previousSibling,e.previousSibling.data.length):a.before(e):d.isAfterInline(c)?new a(e,k-1):c},q=f.curry(m,!0);f=f.curry(m,!1);return{isInlineTarget:function(a,d){var k=b.getString(a,"inline_boundaries_selector").getOr("a[href],code");
return c.is(e.fromDom(d),k)},findRootInline:function(a,b,c){a=g.filter(l.DOM.getParents(c.container(),"*",b),a);return h.from(a[a.length-1])},isRtl:function(a){return"rtl"===l.DOM.getStyle(a,"direction",!0)||n.hasStrongRtl(a.textContent)},isAtZwsp:function(a){return d.isBeforeInline(a)||d.isAfterInline(a)},normalizePosition:m,normalizeForwards:q,normalizeBackwards:f,hasSameParentBlock:function(a,b,c){b=k.getParentBlock(b,a);a=k.getParentBlock(c,a);return b&&b===a}}});s("tinymce.core.delete.DeleteUtils",
"ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.keyboard.InlineUtils".split(" "),function(g,f,h,e,c,b,d,a){var k=function(a){return function(b){return h.eq(a,e.fromDom(b.dom().parentNode))}};return{getParentBlock:function(a,b){return h.contains(a,b)?c.closest(b,function(a){return d.isTextBlock(a)||d.isListItem(a)},k(a)):g.none()},
paddEmptyBody:function(a){if(a.dom.isEmpty(a.getBody())){a.setContent("");var b=a.getBody(),b=b.firstChild&&a.dom.isBlock(b.firstChild)?b.firstChild:b;a.selection.setCursorLocation(b,0)}},willDeleteLastPositionInElement:function(c,d,e){return f.liftN([b.firstPositionIn(e),b.lastPositionIn(e)],function(k,f){var h=a.normalizePosition(!0,k),g=a.normalizePosition(!1,f),w=a.normalizePosition(!1,d);return c?b.nextPosition(e,w).map(function(a){return a.isEqual(g)&&d.isEqual(h)}).getOr(!1):b.prevPosition(e,
w).map(function(a){return a.isEqual(h)&&d.isEqual(g)}).getOr(!1)}).getOr(!0)}}});s("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(g,f,h){var e=function(c,b,d){return g.ancestor(c,function(a){return f.is(a,b)},d)};return{first:function(c){return f.one(c)},ancestor:e,sibling:function(c,b){return g.sibling(c,function(c){return f.is(c,b)})},child:function(c,b){return g.child(c,function(c){return f.is(c,
b)})},descendant:function(c,b){return f.one(b,c)},closest:function(c,b,d){return h(f.is,e,c,b,d)}}});s("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(g){return{any:function(f){return g.first(f).isSome()},ancestor:function(f,h,e){return g.ancestor(f,h,e).isSome()},sibling:function(f,h){return g.sibling(f,h).isSome()},child:function(f,h){return g.child(f,h).isSome()},descendant:function(f,h){return g.descendant(f,h).isSome()},closest:function(f,h,e){return g.closest(f,
h,e).isSome()}}});s("tinymce.core.dom.Empty","ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorExists tinymce.core.caret.CaretCandidate tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(g,f,h,e,c,b,d){var a=function(a,c){var d;if(d=b.isText(c))if(d=/^[ \t\r\n]*$/.test(c.data)){d=h.fromDom(a);var k=h.fromDom(c);d=!1===e.ancestor(k,"pre,code",g.curry(f.eq,d))}return d},k=function(a){return b.isElement(a)&&"A"===a.nodeName&&
a.hasAttribute("name")},l=b.hasAttribute("data-mce-bookmark"),p=b.hasAttribute("data-mce-bogus"),n=b.hasAttributeValue("data-mce-bogus","all"),m=function(e){var f,h,m=0;if(c.isCaretCandidate(e)&&!1===a(e,e)||k(e)||l(e))return!1;h=e.firstChild;if(!h)return!0;f=new d(h,e);do if(n(h))h=f.next(!0);else{if(!p(h))if(b.isBr(h))m++;else if(c.isCaretCandidate(h)&&!1===a(e,h)||k(h)||l(h))return!1;h=f.next()}while(h);return 1>=m};return{isEmpty:function(a){return m(a.dom())}}});s("tinymce.core.delete.BlockBoundary",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t){var r=c.immutable("block",
"position"),w=c.immutable("from","to"),x=function(a,b){var c=d.fromDom(a),e=d.fromDom(b.container());return m.getParentBlock(c,e).map(function(a){return r(a,b)})},v=function(a){return l.parent(a.from().block()).bind(function(c){return l.parent(a.to().block()).filter(function(a){return b.eq(c,a)})}).isSome()},z=function(a,b,c){return t.isBr(c.position().getNode())&&!1===q.isEmpty(c.block())?p.positionIn(!1,c.block().dom()).bind(function(d){return d.isEqual(c.position())?p.fromPosition(b,a,d).bind(function(b){return x(a,
b)}):h.some(c)}).getOr(c):c},u=function(a,c,d){d=x(a,n.fromRangeStart(d));var k=d.bind(function(b){return p.fromPosition(c,a,b.position()).bind(function(b){return x(a,b).map(function(b){return z(a,c,b)})})});return e.liftN([d,k],w).filter(function(a){return!1===b.eq(a.from().block(),a.to().block())&&v(a)&&!1===t.isContentEditableFalse(a.from().block())&&!1===t.isContentEditableFalse(a.to().block())})};return{read:function(a,b,c){return c.collapsed?u(a,b,c):h.none()}}});s("tinymce.core.dom.Parents",
["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(g,f,h){var e=function(b){return b.slice(0,-1)},c=function(b,a,c){return f.contains(a,b)?e(h.parents(b,function(b){return c(b)||f.eq(b,a)})):[]},b=function(b,a){return c(b,a,g.constant(!1))};return{parentsUntil:c,parents:b,parentsAndSelf:function(c,a){return[c].concat(b(c,a))}}});s("tinymce.core.delete.MergeBlocks","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.Parents".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q){var t=function(a){var b=d.children(a);return g.findIndex(b,l.isBlock).fold(function(){return b},function(a){return b.slice(0,a)})},r=function(a){a=t(a);g.each(a,function(a){c.remove(a)});return a},w=function(d,e){a.positionIn(d,e.dom()).each(function(a){a=a.getNode();n.isBr(a)&&c.remove(b.fromDom(a))})},x=function(a,b){var d=q.parentsAndSelf(b,a);return g.find(d.reverse(),p.isEmpty).each(c.remove)},v=function(a,b){var c=d.parents(b,function(b){return h.eq(b,a)});
return f.from(c[c.length-2])},z=function(a,b){return h.contains(b,a)?d.parent(a).bind(function(c){return h.eq(c,b)?f.some(a):v(b,a)}):f.none()},u=function(b,d,f){if(p.isEmpty(f))return c.remove(f),p.isEmpty(d)&&m.fillWithPaddingBr(d),a.firstPositionIn(d.dom());w(!0,d);w(!1,f);var h=r(d);return z(d,f).fold(function(){x(b,d);var c=a.lastPositionIn(f.dom());g.each(h,function(a){e.append(f,a)});return c},function(c){var m=a.prevPosition(f.dom(),k.before(c.dom()));g.each(h,function(a){e.before(c,a)});
x(b,d);return m})};return{mergeBlocks:function(a,b,c,d){return b?u(a,d,c):u(a,c,d)}}});s("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(g,f,h){return{backspaceDelete:function(e,c){var b,d=g.fromDom(e.getBody());b=f.read(d.dom(),c,e.selection.getRng()).bind(function(a){return h.mergeBlocks(d,c,a.from().block(),a.to().block())});b.each(function(a){e.selection.setRng(a.toRange())});return b.isSome()}}});
s("tinymce.core.delete.BlockRangeDelete","ephox.katamari.api.Fun ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.delete.MergeBlocks tinymce.core.dom.ElementType".split(" "),function(g,f,h,e,c,b,d,a,k,l){var p=function(b,c){var d=c.getRng();return f.liftN([a.getParentBlock(b,e.fromDom(d.startContainer)),a.getParentBlock(b,
e.fromDom(d.endContainer))],function(a,e){return!1===h.eq(a,e)?(d.deleteContents(),k.mergeBlocks(b,!0,a,e).each(function(a){c.setRng(a.toRange())}),!0):!1}).getOr(!1)},n=function(a,b){var d=e.fromDom(b),k=g.curry(h.eq,a);return c.ancestor(d,l.isTableCell,k).isSome()};return{backspaceDelete:function(a,c){var k;if(a.selection.isCollapsed())k=!1;else{a.selection.getRng();k=e.fromDom(a.getBody());var f=a.selection.getRng(),h=b.prevPosition(k.dom(),d.fromRangeStart(f)).isNone(),g=b.nextPosition(k.dom(),
d.fromRangeEnd(f)).isNone();!n(k,f.startContainer)&&!n(k,f.endContainer)&&h&&g?(a.setContent(""),a.selection.setCursorLocation(),k=!0):k=p(k,a.selection)}return k}}});s("ephox.katamari.api.Adt","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Type global!Array global!Error global!console".split(" "),function(g,f,h,e,c,b){return{generate:function(d){if(!h.isArray(d))throw new c("cases must be an array");if(0===d.length)throw new c("there must be at least one case");var a=[],k={};g.each(d,
function(l,p){var n=f.keys(l);if(1!==n.length)throw new c("one and only one name per case");var m=n[0],q=l[m];if(void 0!==k[m])throw new c("duplicate key detected:"+m);if("cata"===m)throw new c("cannot have a case named cata (sorry)");if(!h.isArray(q))throw new c("case arguments must be an array");a.push(m);k[m]=function(){var k=arguments.length;if(k!==q.length)throw new c("Wrong number of arguments to case "+m+". Expected "+q.length+" ("+q+"), got "+k);for(var h=new e(k),k=0;k<h.length;k++)h[k]=
arguments[k];return{fold:function(){if(arguments.length!==d.length)throw new c("Wrong number of arguments to fold. Expected "+d.length+", got "+arguments.length);return arguments[p].apply(null,h)},match:function(b){var d=f.keys(b);if(a.length!==d.length)throw new c("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+d.join(","));if(!g.forall(a,function(a){return g.contains(d,a)}))throw new c("Not all branches were specified when using match. Specified: "+d.join(", ")+"\nRequired: "+
a.join(", "));return b[m].apply(null,h)},log:function(c){b.log(c,{constructors:a,constructor:m,params:h})}}}});return k}}});s("tinymce.core.delete.CefDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d,a,k){var l=g.generate([{remove:["element"]},{moveToElement:["element"]},
{moveToPosition:["position"]}]),p=function(a,b){var c=b.getNode(!1===a),d=a?"after":"before";return k.isElement(c)&&c.getAttribute("data-mce-caret")===d},n=function(b,c,e,k){var g=k.getNode(!1===c);return d.getParentBlock(h.fromDom(b),h.fromDom(e.getNode())).map(function(b){return a.isEmpty(b)?l.remove(b.dom()):l.moveToElement(g)}).orThunk(function(){return f.some(l.moveToElement(g))})},m=function(a,c,d){return e.fromPosition(c,a,d).bind(function(e){return c&&k.isContentEditableFalse(e.getNode())?
n(a,c,d,e):!1===c&&k.isContentEditableFalse(e.getNode(!0))?n(a,c,d,e):c&&b.isAfterContentEditableFalse(d)?f.some(l.moveToPosition(e)):!1===c&&b.isBeforeContentEditableFalse(d)?f.some(l.moveToPosition(e)):f.none()})},q=function(a,b){return a&&k.isContentEditableFalse(b.nextSibling)?f.some(l.moveToElement(b.nextSibling)):!1===a&&k.isContentEditableFalse(b.previousSibling)?f.some(l.moveToElement(b.previousSibling)):f.none()},t=function(a,c,d){return d.fold(function(a){return f.some(l.remove(a))},function(a){return f.some(l.moveToElement(a))},
function(d){return b.isInSameBlock(c,d,a)?f.none():f.some(l.moveToPosition(d))})},r=function(a,b,c){return p(b,c)?q(b,c.getNode(!1===b)).fold(function(){return m(a,b,c)},f.some):m(a,b,c).bind(function(b){return t(a,c,b)})};return{read:function(a,d,e){e=b.normalizeRange(d?1:-1,a,e);e=c.fromRangeStart(e);return!1===d&&b.isAfterContentEditableFalse(e)?f.some(l.remove(e.getNode(!0))):d&&b.isBeforeContentEditableFalse(e)?f.some(l.remove(e.getNode())):r(a,d,e)}}});s("tinymce.core.delete.DeleteElement",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n,m,q){var t=function(a,b){var c=b.container(),d=b.offset();
return!1===n.isTextPosition(b)&&c===a.parentNode&&d>n.before(a).offset()?new n(b.container(),b.offset()-1):b},r=function(a){return l.isCaretCandidate(a.previousSibling)?f.some(q.isText(a.previousSibling)?new n(a.previousSibling,a.previousSibling.data.length):n.after(a.previousSibling)):a.previousSibling?p.lastPositionIn(a.previousSibling):f.none()},w=function(a){return l.isCaretCandidate(a.nextSibling)?f.some(q.isText(a.nextSibling)?new n(a.nextSibling,0):n.before(a.nextSibling)):a.nextSibling?p.firstPositionIn(a.nextSibling):
f.none()},x=function(a,b){var c=n.before(b.previousSibling?b.previousSibling:b.parentNode);return p.prevPosition(a,c).fold(function(){return p.nextPosition(a,n.after(b))},f.some)},v=function(a,b){return p.nextPosition(a,n.after(b)).fold(function(){return p.prevPosition(a,n.before(b))},f.some)},z=function(a,b){return r(b).orThunk(function(){return w(b)}).orThunk(function(){return x(a,b)})},u=function(a,b){return w(b).orThunk(function(){return r(b)}).orThunk(function(){return v(a,b)})},y=function(a,
b,c){return(a?u(b,c):z(b,c)).map(g.curry(t,c))},B=function(a,b,c){c.fold(function(){a.focus()},function(c){a.selection.setRng(c.toRange(),b)})},A=function(a){return function(b){return b.dom()===a}},C=function(a,b){return b&&a.schema.getBlockElements().hasOwnProperty(d.name(b))},D=function(a){if(m.isEmpty(a)){var d=b.fromHtml('<br data-mce-bogus="1">');c.empty(a);e.append(a,d);return f.some(n.before(d.dom()))}return f.none()},J=function(a,b){return h.liftN([k.prevSibling(a),k.nextSibling(a),b],function(b,
d,e){var k=b.dom(),f=d.dom();if(q.isText(k)&&q.isText(f))return b=k.data.length,k.appendData(f.data),c.remove(d),c.remove(a),e.container()===f?new n(k,b):e;c.remove(a);return e}).orThunk(function(){c.remove(a);return b})};return{deleteElement:function(b,c,d){var e=y(c,b.getBody(),d.dom()),k=a.ancestor(d,g.curry(C,b),A(b.getBody())),h=J(d,e);b.dom.isEmpty(b.getBody())?(b.setContent(""),b.selection.setCursorLocation()):k.bind(D).fold(function(){B(b,c,h)},function(a){B(b,c,f.some(a))})}}});s("tinymce.core.delete.CefDelete",
"ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter tinymce.core.caret.CaretPosition tinymce.core.delete.CefDeleteAction tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d,a,k){var l=function(a,b){return function(c){a._selectionOverrides.hideFakeCaret();d.deleteElement(a,b,h.fromDom(c));return!0}},p=function(a,b){return function(d){d=b?c.before(d):c.after(d);
a.selection.setRng(d.toRange());return!0}},n=function(a){return function(b){a.selection.setRng(b.toRange());return!0}},m=function(a,c){return b.read(a.getBody(),c,a.selection.getRng()).map(function(b){return b.fold(l(a,c),p(a,c),n(a))}).getOr(!1)};return{backspaceDelete:function(b,c){if(b.selection.isCollapsed())return m(b,c);var l;l=b.selection.getNode();k.isContentEditableFalse(l)?(l=h.fromDom(b.getBody()),g.each(e.descendants(l,".mce-offscreen-selection"),f.remove),d.deleteElement(b,c,h.fromDom(b.selection.getNode())),
a.paddEmptyBody(b),l=!0):l=!1;return l},paddEmptyElement:function(a){var b,d;a:{b=a.getBody();for(d=a.selection.getNode();d&&d!==b;){if(k.isContentEditableTrue(d)||k.isContentEditableFalse(d))break a;d=d.parentNode}d=null}k.isContentEditableTrue(d)&&a.dom.isBlock(d)&&a.dom.isEmpty(d)&&(b=a.dom.create("br",{"data-mce-bogus":"1"}),a.dom.setHTML(d,""),d.appendChild(b),a.selection.setRng(c.before(b).toRange()));return!0}}});s("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType",
"tinymce.core.text.Zwsp"],function(g,f,h){var e=f.isText;f=function(c,b){var d;c?e(b.previousSibling)?(e(b.previousSibling)&&b.previousSibling.data[b.previousSibling.data.length-1]===h.ZWSP||b.previousSibling.appendData(h.ZWSP),d=b.previousSibling):e(b)?(e(b)&&b.data[0]===h.ZWSP||b.insertData(0,h.ZWSP),d=b):(d=b.ownerDocument.createTextNode(h.ZWSP),b.parentNode.insertBefore(d,b)):e(b.nextSibling)?(e(b.nextSibling)&&b.nextSibling.data[0]===h.ZWSP||b.nextSibling.insertData(0,h.ZWSP),d=b.nextSibling):
e(b)?(e(b)&&b.data[b.data.length-1]===h.ZWSP||b.appendData(h.ZWSP),d=b):(d=b.ownerDocument.createTextNode(h.ZWSP),b.nextSibling?b.parentNode.insertBefore(d,b.nextSibling):b.parentNode.appendChild(d));return d};return{insertInline:f,insertInlineBefore:g.curry(f,!0),insertInlineAfter:g.curry(f,!1)}});s("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(g,
f,h,e,c){var b=e.isElement,d=e.isText,a=function(a){var b=a.parentNode;b&&b.removeChild(a)},k=function(a){try{return a.nodeValue}catch(b){return""}},l=function(a){var b=c.trim(a);return{count:a.length-b.length,text:b}},p=function(a,b){var c=b.container(),d=g.indexOf(c.childNodes,a).map(function(a){return a<b.offset()?new h(c,b.offset()-1):b}).getOr(b);n(a);return d},n=function(e){b(e)&&f.isCaretContainer(e)&&(f.hasContent(e)?e.removeAttribute("data-mce-caret"):a(e));if(d(e)){var h=c.trim(k(e));0===
h.length?a(e):e.nodeValue=h}};return{removeAndReposition:function(b,c){var d;if(h.isTextPosition(c))if(c.container()===b){d=l(b.data.substr(0,c.offset()));var e=l(b.data.substr(c.offset())),e=d.text+e.text;0<e.length?(0===e.length?a(b):b.nodeValue=e,d=new h(b,c.offset()-d.count)):d=c}else n(b),d=c;else c.container()===b.parentNode?d=p(b,c):(n(b),d=c);return d},remove:n}});s("tinymce.core.keyboard.BoundaryCaret","ephox.katamari.api.Option tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerInline tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.keyboard.InlineUtils".split(" "),
function(g,f,h,e,c,b,d,a){var k=function(a,b){return d.isText(a.container())?h.insertInline(b,a.container()):h.insertInline(b,a.getNode())},l=function(a,b){var c=b.get();return c&&a.container()===c&&f.isCaretContainerInline(c)};return{renderCaret:function(a,d){return d.fold(function(c){e.remove(a.get());c=h.insertInlineBefore(c);a.set(c);return g.some(new b(c,c.length-1))},function(d){return c.firstPositionIn(d).map(function(c){if(l(c,a))return new b(a.get(),1);e.remove(a.get());c=k(c,!0);a.set(c);
return new b(c,1)})},function(d){return c.lastPositionIn(d).map(function(c){if(l(c,a))return new b(a.get(),a.get().length-1);e.remove(a.get());c=k(c,!1);a.set(c);return new b(c,c.length-1)})},function(c){e.remove(a.get());c=h.insertInlineAfter(c);a.set(c);return g.some(new b(c,1))})}}});s("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(g){var f=function(c){return c&&/^(IMG)$/.test(c.nodeName)},h=function(c){return c&&3===c.nodeType&&/^([\t \r\n]+|)$/.test(c.nodeValue)},e=function(c,
b,d){if("color"===d||"backgroundColor"===d)b=c.toHex(b);"fontWeight"===d&&700===b&&(b="bold");"fontFamily"===d&&(b=b.replace(/[\'\"]/g,"").replace(/,\s+/g,","));return""+b};return{isInlineBlock:f,moveStart:function(c,b,d){var a=d.startContainer,e=d.startOffset;if(d.startContainer!==d.endContainer||!f(d.startContainer.childNodes[d.startOffset]))if(3===a.nodeType&&e>=a.nodeValue.length&&(e=c.nodeIndex(a),a=a.parentNode),1===a.nodeType)for(a=a.childNodes,e<a.length?(a=a[e],c=new g(a,c.getParent(a,c.isBlock))):
(a=a[a.length-1],c=new g(a,c.getParent(a,c.isBlock)),c.next(!0)),e=c.current();e;e=c.next())if(3===e.nodeType&&!h(e)){d.setStart(e,0);b.setRng(d);break}},getNonWhiteSpaceSibling:function(c,b,d){if(c)for(b=b?"nextSibling":"previousSibling",c=d?c:c[b];c;c=c[b])if(1===c.nodeType||!h(c))return c},isTextBlock:function(c,b){b.nodeType&&(b=b.nodeName);return!!c.schema.getTextBlockElements()[b.toLowerCase()]},isValid:function(c,b,d){return c.schema.isValidChild(b,d)},isWhiteSpaceNode:h,replaceVars:function(c,
b){"string"!==typeof c?c=c(b):b&&(c=c.replace(/%(\w+)/g,function(c,a){return b[a]||c}));return c},isEq:function(c,b){c=c||"";b=b||"";c=""+(c.nodeName||c);b=""+(b.nodeName||b);return c.toLowerCase()===b.toLowerCase()},normalizeStyleValue:e,getStyle:function(c,b,d){return e(c,c.getStyle(b,d),d)},getTextDecoration:function(c,b){var d;c.getParent(b,function(a){return(d=c.getStyle(a,"text-decoration"))&&"none"!==d});return d},getParents:function(c,b,d){return c.getParents(b,d,c.getRoot())}}});s("tinymce.core.fmt.ExpandRange",
["tinymce.core.dom.Bookmarks","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils","tinymce.core.selection.RangeNodes"],function(g,f,h,e){var c=g.isBookmarkNode,b=h.getParents,d=h.isWhiteSpaceNode,a=h.isTextBlock,k=function(a,b){for("undefined"===typeof b&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}},l=function(a,b){for(var c=b;c;){if(1===c.nodeType&&a.getContentEditable(c))return"false"===
a.getContentEditable(c)?c:b;c=c.parentNode}return b},p=function(a,b,c,d){c=c.nodeValue;"undefined"===typeof d&&(d=a?c.length:0);a?(a=c.lastIndexOf(" ",d),d=c.lastIndexOf("\u00a0",d),a=a>d?a:d,-1===a||b||a++):(a=c.indexOf(" ",d),d=c.indexOf("\u00a0",d),a=-1!==a&&(-1===d||a<d)?a:d);return a},n=function(a,b,c,d,e,k){var h;if(3===c.nodeType){d=p(e,k,c,d);if(-1!==d)return{container:c,offset:d};h=c}for(b=new f(c,a.getParent(c,a.isBlock)||b);c=b[e?"prev":"next"]();)if(3===c.nodeType){if(h=c,d=p(e,k,c),-1!==
d)return{container:c,offset:d}}else if(a.isBlock(c))break;if(h)return d=e?0:h.length,{container:h,offset:d}},m=function(a,c,d,e,k){var f,h,g;3===e.nodeType&&0===e.nodeValue.length&&e[k]&&(e=e[k]);k=b(a,e);for(f=0;f<k.length;f++)for(h=0;h<c.length;h++)if(g=c[h],!("collapsed"in g&&g.collapsed!==d.collapsed)&&a.is(k[f],g.selector))return k[f];return e},q=function(c,d,e,k){var f,g=c.dom,l=g.getRoot();d[0].wrapper||(f=g.getParent(e,d[0].block,l));f||(f=g.getParent(e,"LI,TD,TH"),f=g.getParent(3===e.nodeType?
e.parentNode:e,function(b){return b!==l&&a(c,b)},f));f&&d[0].wrapper&&(f=b(g,f,"ul,ol").reverse()[0]||f);if(!f)for(f=e;f[k]&&!g.isBlock(f[k])&&(f=f[k],!h.isEq(f,"br")););return f||e},t=function(a,b,e,k,f,h,g){var l,m;e=f=g?e:f;l=g?"previousSibling":"nextSibling";m=a.getRoot();if(3===e.nodeType&&!d(e)&&(g?0<k:h<e.nodeValue.length))return e;for(;;){if(!b[0].block_expand&&a.isBlock(f))return f;for(k=f[l];k;k=k[l])if(!(c(k)||d(k)||"BR"===k.nodeName&&k.getAttribute("data-mce-bogus")&&!k.nextSibling))return f;
if(f===m||f.parentNode===m){e=f;break}f=f.parentNode}return e};return{expandRng:function(a,b,d,f){var h,g=b.startContainer,y=b.startOffset,B=b.endContainer,A=b.endOffset,p=a.dom;1===g.nodeType&&g.hasChildNodes()&&(g=e.getNode(g,y),3===g.nodeType&&(y=0));1===B.nodeType&&B.hasChildNodes()&&(B=e.getNode(B,b.collapsed?A:A-1),3===B.nodeType&&(A=B.nodeValue.length));g=l(p,g);B=l(p,B);if(c(g.parentNode)||c(g))g=c(g)?g:g.parentNode,g=g.nextSibling||g,3===g.nodeType&&(y=0);if(c(B.parentNode)||c(B))B=c(B)?
B:B.parentNode,B=B.previousSibling||B,3===B.nodeType&&(A=B.length);if(d[0].inline){if(b.collapsed){if(h=n(p,a.getBody(),g,y,!0,f))g=h.container,y=h.offset;if(h=n(p,a.getBody(),B,A,!1,f))B=h.container,A=h.offset}if(f)f=B;else if(f=B,h=k(f,A),h.node){for(;h.node&&0===h.offset&&h.node.previousSibling;)h=k(h.node.previousSibling);h.node&&0<h.offset&&3===h.node.nodeType&&" "===h.node.nodeValue.charAt(h.offset-1)&&1<h.offset&&(f=h.node,f.splitText(h.offset-1))}B=f}if(d[0].inline||d[0].block_expand)d[0].inline&&
3===g.nodeType&&0!==y||(g=t(p,d,g,y,B,A,!0)),d[0].inline&&3===B.nodeType&&A!==B.nodeValue.length||(B=t(p,d,g,y,B,A,!1));d[0].selector&&!1!==d[0].expand&&!d[0].inline&&(g=m(p,d,b,g,"previousSibling"),B=m(p,d,b,B,"nextSibling"));if(d[0].block||d[0].selector)g=q(a,d,g,"previousSibling"),B=q(a,d,B,"nextSibling"),d[0].block&&(p.isBlock(g)||(g=t(p,d,g,y,B,A,!0)),p.isBlock(B)||(B=t(p,d,g,y,B,A,!1)));1===g.nodeType&&(y=p.nodeIndex(g),g=g.parentNode);1===B.nodeType&&(A=p.nodeIndex(B)+1,B=B.parentNode);return{startContainer:g,
startOffset:y,endContainer:B,endOffset:A}}}});s("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(g){var f=g.isEq,h=function(a,b,c){if(c=a.formatter.get(c))for(var d=0;d<c.length;d++)if(!1===c[d].inherit&&a.dom.is(b,c[d].selector))return!0;return!1},e=function(a,b,c,e){var f=a.dom.getRoot();if(b===f)return!1;b=a.dom.getParent(b,function(b){return h(a,b,c)?!0:b.parentNode===f||!!d(a,b,c,e,!0)});return d(a,b,c,e)},c=function(a,b,c){if(f(b,c.inline)||f(b,c.block))return!0;if(c.selector)return 1===
b.nodeType&&a.is(b,c.selector)},b=function(a,b,c,d,e,h){var q,t,r=c[d];if(c.onmatch)return c.onmatch(b,c,d);if(r)if("undefined"===typeof r.length)for(q in r){if(r.hasOwnProperty(q)&&(t="attributes"===d?a.getAttrib(b,q):g.getStyle(a,b,q),e&&!t&&!c.exact||(!e||c.exact)&&!f(t,g.normalizeStyleValue(a,g.replaceVars(r[q],h),q))))return}else for(e=0;e<r.length&&("attributes"===d?!a.getAttrib(b,r[e]):!g.getStyle(a,b,r[e]));e++);return c},d=function(a,d,e,f,h){var g=a.formatter.get(e),q,t=a.dom;if(g&&d)for(q=
0;q<g.length;q++)if(e=g[q],c(a.dom,d,e)&&b(t,d,e,"attributes",h,f)&&b(t,d,e,"styles",h,f)){if(h=e.classes)for(f=0;f<h.length;f++)if(!a.dom.hasClass(d,h[f]))return;return e}};return{matchNode:d,matchName:c,match:function(a,b,c,d){var f;if(d)return e(a,d,b,c);d=a.selection.getNode();if(e(a,d,b,c))return!0;f=a.selection.getStart();return f!==d&&e(a,f,b,c)?!0:!1},matchAll:function(a,b,c){var e,f=[],h={};e=a.selection.getStart();a.dom.getParent(e,function(e){var g,r;for(g=0;g<b.length;g++)r=b[g],!h[r]&&
d(a,e,r,c)&&(h[r]=!0,f.push(r))},a.dom.getRoot());return f},canApply:function(a,b){var c=a.formatter.get(b),d,e,f,h,t=a.dom;if(c)for(d=a.selection.getStart(),d=g.getParents(t,d),f=c.length-1;0<=f;f--){h=c[f].selector;if(!h||c[f].defaultBlock)return!0;for(e=d.length-1;0<=e;e--)if(t.is(d[e],h))return!0}return!1},matchesUnInheritedFormatSelector:h}});s("tinymce.core.selection.SplitRange",["tinymce.core.dom.NodeType"],function(g){return{split:function(f){var h=f.startContainer,e=f.startOffset,c=f.endContainer;
f=f.endOffset;h===c&&g.isText(h)?0<e&&e<h.nodeValue.length&&(c=h.splitText(e),h=c.previousSibling,f>e?(h=c=c.splitText(f-e).previousSibling,f=c.nodeValue.length,e=0):f=0):(g.isText(h)&&0<e&&e<h.nodeValue.length&&(h=h.splitText(e),e=0),g.isText(c)&&0<f&&f<c.nodeValue.length&&(c=c.splitText(f).previousSibling,f=c.nodeValue.length));return{startContainer:h,startOffset:e,endContainer:c,endOffset:f}}}});s("tinymce.core.fmt.CaretFormat","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.TreeWalker tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.SplitRange tinymce.core.text.Zwsp tinymce.core.util.Fun".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t,r){var w=t.ZWSP,x=function(a){return 1===a.nodeType&&"_mce_caret"===a.id},v=function(a){var b;if(a)for(b=new l(a,a),a=b.current();a;a=b.next())if(3===a.nodeType)return a;return null},z=function(a){var c=e.fromTag("span");b.setAll(c,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"});a&&f.append(c,e.fromText(w));return c},u=function(a,b){for(;b&&b!==a;){if("_mce_caret"===b.id)return b;b=b.parentNode}return null},y=function(a,b,c,d){var f,h;
f=b.getRng(!0);h=a.getParent(c,a.isBlock);var g;a:{g=c;for(var m=[];g;){if(3===g.nodeType&&g.nodeValue!==w||1<g.childNodes.length){g=[];break a}1===g.nodeType&&m.push(g);g=g.firstChild}g=m}0<g.length?(!1!==d&&(f.setStartBefore(c),f.setEndBefore(c)),a.remove(c)):((d=v(c))&&d.nodeValue.charAt(0)===w&&d.deleteData(0,1),f.startContainer===d&&0<f.startOffset&&f.setStart(d,f.startOffset-1),f.endContainer===d&&0<f.endOffset&&f.setEnd(d,f.endOffset-1),a.remove(c,!0));h&&a.isEmpty(h)&&k.fillWithPaddingBr(e.fromDom(h));
b.setRng(f)},B=function(a,b,c,d,e){if(d)y(b,c,d,e);else if(d=u(a,c.getStart()),!d)for(;d=b.get("_mce_caret");)y(b,c,d,!1)},A=function(a,b,c){var d=a.dom;(a=d.getParent(c,r.curry(n.isTextBlock,a)))&&d.isEmpty(a)?c.parentNode.replaceChild(b,c):(k.removeTrailingBr(e.fromDom(c)),d.isEmpty(c)?c.parentNode.replaceChild(b,c):d.insertAfter(b,c))},C=function(a,b){a.appendChild(b);return b},D=function(a,b){var c=g.foldr(a,function(a,b){return C(a,b.cloneNode(!1))},b);return C(c,c.ownerDocument.createTextNode(w))};
return{setup:function(a){var b=a.dom,c=a.selection,d=a.getBody();a.on("mouseup keydown",function(a){a=a.keyCode;B(d,b,c,null,!1);8===a&&c.isCollapsed()&&c.getStart().innerHTML===w&&B(d,b,c,u(d,c.getStart()));37!==a&&39!==a||B(d,b,c,u(d,c.getStart()))})},applyCaretFormat:function(a,b,c){var d,e,f,k,h,g=a.selection;d=g.getRng(!0);k=d.startOffset;h=d.startContainer.nodeValue;(e=u(a.getBody(),g.getStart()))&&(f=v(e));var m=/[^\s\u00a0\u00ad\u200b\ufeff]/;h&&0<k&&k<h.length&&m.test(h.charAt(k))&&m.test(h.charAt(k-
1))?(e=g.getBookmark(),d.collapse(!0),d=p.expandRng(a,d,a.formatter.get(b)),d=q.split(d),a.formatter.apply(b,c,d),g.moveToBookmark(e)):(e&&f.nodeValue===w||(e=a.getDoc(),f=z(!0).dom(),e=e.importNode(f,!0),f=e.firstChild,d.insertNode(e),k=1),a.formatter.apply(b,c,e),g.setCursorLocation(f,k))},removeCaretFormat:function(a,b,c,d){var e=a.dom,f=a.selection,k=f.getRng(!0),h,g,l,B,r,n=[];h=k.startContainer;g=k.startOffset;B=h;3===h.nodeType&&(g!==h.nodeValue.length&&(l=!0),B=B.parentNode);for(;B;){if(m.matchNode(a,
B,b,c,d)){r=B;break}B.nextSibling&&(l=!0);n.push(B);B=B.parentNode}r&&(l?(e=f.getBookmark(),k.collapse(!0),k=p.expandRng(a,k,a.formatter.get(b),!0),k=q.split(k),a.formatter.remove(b,c,k),f.moveToBookmark(e)):(b=u(a.getBody(),r),c=z(!1).dom(),n=D(n,c),b?A(a,c,b):A(a,c,r),y(e,f,b,!1),f.setCursorLocation(n,1),e.isEmpty(r)&&e.remove(r)))},isCaretNode:x,getParentCaretContainer:u,replaceWithCaretFormat:function(a,b){var c=z(!1),k=D(b,c.dom());f.before(e.fromDom(a),c);h.remove(e.fromDom(a));return d(k,0)},
isFormatElement:function(b,d){return b.schema.getTextInlineElements().hasOwnProperty(c.name(d))&&!x(d.dom())&&!a.isBogus(d.dom())}}});s("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(g){return{evaluateUntil:function(f,h){for(var e=0;e<f.length;e++){var c=f[e].apply(null,h);if(c.isSome())return c}return g.none()}}});s("tinymce.core.keyboard.BoundaryLocation","ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.caret.CaretFinder tinymce.core.caret.CaretUtils tinymce.core.fmt.CaretFormat tinymce.core.keyboard.InlineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(g,f,h,e,c,b,d,a,k){var l=g.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),p=function(a,c){var d=b.getParentBlock(c,a);return d?d:a},n=function(b,d,e){var k=a.normalizeForwards(e),g=p(d,k.container());return a.findRootInline(b,g,k).fold(function(){return c.nextPosition(g,k).bind(f.curry(a.findRootInline,b,g)).map(function(a){return l.before(a)})},h.none)},m=function(a,b){return null===d.getParentCaretContainer(a,b)},q=function(b,d,e){var k=a.normalizeBackwards(e);
return a.findRootInline(b,d,k).filter(f.curry(m,d)).bind(function(a){return c.prevPosition(a,k).isNone()?h.some(l.start(a)):h.none()})},t=function(b,d,e){var k=a.normalizeForwards(e);return a.findRootInline(b,d,k).filter(f.curry(m,d)).bind(function(a){return c.nextPosition(a,k).isNone()?h.some(l.end(a)):h.none()})},r=function(b,d,e){var k=a.normalizeBackwards(e),g=p(d,k.container());return a.findRootInline(b,g,k).fold(function(){return c.prevPosition(g,k).bind(f.curry(a.findRootInline,b,g)).map(function(a){return l.after(a)})},
h.none)},w=function(b){return!1===a.isRtl(v(b))},x=function(a,b,c){return k.evaluateUntil([n,q,t,r],[a,b,c]).filter(w)},v=function(a){return a.fold(f.identity,f.identity,f.identity,f.identity)},z=function(a){return a.fold(f.constant("before"),f.constant("start"),f.constant("end"),f.constant("after"))},u=function(a){return a.fold(l.before,l.before,l.after,l.after)},y=function(b,c,d,f,k,h){return e.liftN([a.findRootInline(c,d,f),a.findRootInline(c,d,k)],function(c,e){return c!==e&&a.hasSameParentBlock(d,
c,e)?l.after(b?c:e):h}).getOr(h)},B=function(a,b){return a.fold(f.constant(!0),function(a){return!(z(a)===z(b)&&v(a)===v(b))})},A=function(b,d,e,k,h){var g=a.normalizePosition(b,h);return c.fromPosition(b,e,g).map(f.curry(a.normalizePosition,b)).fold(function(){return k.map(u)},function(a){return x(d,e,a).map(f.curry(y,b,d,e,g,a)).filter(f.curry(B,k))}).filter(w)},C=function(a,b){return a?b.fold(f.compose(h.some,l.start),h.none,f.compose(h.some,l.after),h.none):b.fold(h.none,f.compose(h.some,l.before),
h.none,f.compose(h.some,l.end))};g=function(b,c,d,e){var k=a.normalizePosition(b,e),h=x(c,d,k);return x(c,d,k).bind(f.curry(C,b)).orThunk(function(){return A(b,c,d,h,e)})};return{readLocation:x,findLocation:g,prevLocation:f.curry(g,!1),nextLocation:f.curry(g,!0),getElement:v,outside:u,inside:function(a){return a.fold(l.start,l.start,l.end,l.end)}}});s("ephox.katamari.api.Cell",[],function(){var g=function(f){var h=f;return{get:function(){return h},set:function(e){h=e},clone:function(){return g(h)}}};
return g});s("tinymce.core.selection.WordSelection",["ephox.katamari.api.Type","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition"],function(g,f,h){var e=function(b){return g.isFunction(b.selection.getSel().modify)},c=function(b,c,a){var e=b?1:-1;c.setRng(h(a.container(),a.offset()+e).toRange());c.getSel().modify("move",b?"forward":"backward","word");return!0};return{hasSelectionModifyApi:e,moveByWord:function(b,d){var a=d.selection.getRng(),a=b?h.fromRangeEnd(a):h.fromRangeStart(a);
return e(d)?b&&f.isBeforeInline(a)?c(!0,d.selection,a):!b&&f.isAfterInline(a)?c(!1,d.selection,a):!1:!1}}});s("tinymce.core.keyboard.BoundarySelection","ephox.katamari.api.Arr ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretPosition tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.WordSelection".split(" "),function(g,f,h,e,c,b,d,a,k){var l=function(a,b){var c=
a.dom.createRng();c.setStart(b.container(),b.offset());c.setEnd(b.container(),b.offset());a.selection.setRng(c)},p=function(a,b){a?b.setAttribute("data-mce-selected","inline-boundary"):b.removeAttribute("data-mce-selected")},n=function(a,c,d){return b.renderCaret(c,d).map(function(b){l(a,b);return d})},m=function(b,e,k){var f=b.getBody(),g=c.fromRangeStart(b.selection.getRng()),m=h.curry(a.isInlineTarget,b);return d.findLocation(k,m,f,g).bind(function(a){return n(b,e,a)})},q=function(a,b,e,k){b.selection.isCollapsed()&&
(k=g.filter(k,a),g.each(k,function(k){k=c.fromRangeStart(b.selection.getRng());d.readLocation(a,b.getBody(),k).bind(function(a){return n(b,e,a)})}))},t=function(a,b,c){return function(){return!1!==b.settings.inline_boundaries?k.moveByWord(a,b):!1}};return{move:function(a,b,c){return function(){return!1!==a.settings.inline_boundaries?m(a,b,c).isSome():!1}},moveNextWord:h.curry(t,!0),movePrevWord:h.curry(t,!1),setupSelectedState:function(b){var d=new f(null),k=h.curry(a.isInlineTarget,b);b.on("NodeChange",
function(f){if(!1!==b.settings.inline_boundaries){var m=f.parents,u=g.filter(b.dom.select('*[data-mce-selected="inline-boundary"]'),k),m=g.filter(m,k);g.each(g.difference(u,m),h.curry(p,!1));g.each(g.difference(m,u),h.curry(p,!0));b.selection.isCollapsed()&&!0!==b.composing&&d.get()&&(u=c.fromRangeStart(b.selection.getRng()),c.isTextPosition(u)&&!1===a.isAtZwsp(u)&&(l(b,e.removeAndReposition(d.get(),u)),d.set(null)));q(k,b,d,f.parents)}});return d},setCaretPosition:l}});s("tinymce.core.delete.InlineBoundaryDelete",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.node.Element global!document tinymce.core.caret.CaretContainer tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteElement tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.BoundarySelection tinymce.core.keyboard.InlineUtils".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n,m,q){var t=function(a,b){var d=
c.createRange();d.setStart(a.container(),a.offset());d.setEnd(b.container(),b.offset());return d},r=function(a){return h.liftN([d.firstPositionIn(a),d.lastPositionIn(a)],function(b,c){var e=q.normalizePosition(!0,b),k=q.normalizePosition(!1,c);return d.nextPosition(a,e).map(function(a){return a.isEqual(k)}).getOr(!0)}).getOr(!0)},w=function(a,b){return function(c){return p.renderCaret(b,c).map(function(b){m.setCaretPosition(a,b);return!0}).getOr(!1)}},x=function(b,c,d,e){var k=b.getBody(),f=g.curry(q.isInlineTarget,
b);b.undoManager.ignore(function(){b.selection.setRng(t(d,e));b.execCommand("Delete");n.readLocation(f,k,a.fromRangeStart(b.selection.getRng())).map(n.inside).map(w(b,c))});b.nodeChanged()},v=function(a,b){var c=k.getParentBlock(b,a);return c?c:a},z=function(a,b,c,k){var h=v(a.getBody(),k.container()),m=g.curry(q.isInlineTarget,a),p=n.readLocation(m,h,k);return p.bind(function(a){return c?a.fold(g.constant(f.some(n.inside(a))),f.none,g.constant(f.some(n.outside(a))),f.none):a.fold(f.none,g.constant(f.some(n.outside(a))),
f.none,g.constant(f.some(n.inside(a))))}).map(w(a,b)).getOrThunk(function(){var f=d.navigate(c,h,k),g=f.bind(function(a){return n.readLocation(m,h,a)});return p.isSome()&&g.isSome()?q.findRootInline(m,h,k).map(function(b){return r(b)?(l.deleteElement(a,c,e.fromDom(b)),!0):!1}).getOr(!1):g.bind(function(d){return f.map(function(d){c?x(a,b,k,d):x(a,b,d,k);return!0})}).getOr(!1)})};return{backspaceDelete:function(b,c,d){if(b.selection.isCollapsed()&&!1!==b.settings.inline_boundaries){var e=a.fromRangeStart(b.selection.getRng());
return z(b,c,d,e)}return!1}}});s("tinymce.core.delete.TableDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind".split(" "),function(g,f,h,e,c,b,d,a,k,l){var p=b.immutable("start","end"),n=b.immutable("rng","table","cells"),m=g.generate([{removeTable:["element"]},
{emptyCells:["cells"]}]),q=function(a,b){return l.ancestor(a,"table",b)},t=function(a){return!1===d.eq(a.start(),a.end())},r=function(a,b){return q(a.start(),b).bind(function(c){return q(a.end(),b).bind(function(a){return d.eq(c,a)?e.some(c):e.none()})})},w=function(a,b){return r(a,b).bind(function(b){var c=k.descendants(b,"td,th");return n(a,b,c)})},x=function(b,e){var k=h.curry(d.eq,b);return c.liftN([l.closest(a.fromDom(e.startContainer),"td,th",k),l.closest(a.fromDom(e.endContainer),"td,th",k)],
p).filter(t).map(function(a){return w(a,k)})},v=function(a,b){return f.findIndex(a,function(a){return d.eq(a,b)})},z=function(a){return c.liftN([v(a.cells(),a.rng().start()),v(a.cells(),a.rng().end())],function(b,c){return a.cells().slice(b,c+1)})},u=function(a){return z(a).bind(function(b){var c=a.cells();return b.length===c.length?m.removeTable(a.table()):m.emptyCells(b)})};return{getActionFromRange:function(a,b){return x(a,b).map(u)},getActionFromCells:function(a){return m.emptyCells(a)}}});s("tinymce.core.selection.MultiRange",
["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.selection.RangeNodes"],function(g,f,h){var e=function(c){for(var b=[],d=0;d<c.rangeCount;d++)b.push(c.getRangeAt(d));return b};return{getRanges:e,getSelectedNodes:function(c){return g.bind(c,function(b){return(b=h.getSelectedNode(b))?[f.fromDom(b)]:[]})},hasMultipleRanges:function(c){return 1<e(c).length}}});s("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter",
"tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(g,f,h,e,c){var b=function(a){return g.filter(c.getSelectedNodes(a),e.isTableCell)},d=function(a){return h.descendants(a,"td[data-mce-selected],th[data-mce-selected]")},a=function(a,c){var e=d(c),f=b(a);return 0<e.length?e:f};return{getCellsFromRanges:b,getCellsFromElement:d,getCellsFromElementOrRanges:a,getCellsFromEditor:function(b){return a(c.getRanges(b.selection.getSel()),f.fromDom(b.getBody()))}}});s("tinymce.core.delete.TableDelete",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.TableDeleteAction tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.PaddingBr tinymce.core.dom.Parents tinymce.core.selection.TableCellSelection".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t){var r=function(a,
b){g.each(b,m.fillWithPaddingBr);a.selection.setCursorLocation(b[0].dom(),0);return!0},w=function(a,b){k.deleteElement(a,!1,b);return!0},x=function(a,b,c){return l.getActionFromRange(b,c).map(function(b){return b.fold(f.curry(w,a),f.curry(r,a))})},v=function(a,b,c,d){return u(b,d).fold(function(){return x(a,b,c)},function(b){return B(a,b)}).getOr(!1)},z=function(a,b){return g.find(q.parentsAndSelf(b,a),p.isTableCell)},u=function(a,c){return g.find(q.parentsAndSelf(c,a),function(a){return"caption"===
b.name(a)})},y=function(a,b,k,f,h){return d.navigate(k,a.getBody(),h).bind(function(a){return z(b,c.fromDom(a.getNode())).map(function(a){return!1===e.eq(a,f)})})},B=function(a,b){m.fillWithPaddingBr(b);a.selection.setCursorLocation(b.dom(),0);return h.some(!0)},A=function(a,b,c,e){return d.firstPositionIn(a.dom()).bind(function(k){return d.lastPositionIn(a.dom()).map(function(a){return b?c.isEqual(k)&&e.isEqual(a):c.isEqual(a)&&e.isEqual(k)})}).getOr(!0)},C=function(a,b,d){return u(a,c.fromDom(d.getNode())).map(function(a){return!1===
e.eq(a,b)})},D=function(a,b,c,e,k){return d.navigate(c,a.getBody(),k).bind(function(d){return A(e,c,k,d)?B(a,e):C(b,e,d)}).or(h.some(!0))},J=function(b,c,d,e){var k=a.fromRangeStart(b.selection.getRng());return z(d,e).bind(function(a){return n.isEmpty(a)?B(b,a):y(b,d,c,a,k)})},G=function(b,d,e){var k=c.fromDom(b.getBody());return u(k,e).fold(function(){return J(b,d,k,e)},function(c){var e=a.fromRangeStart(b.selection.getRng());return n.isEmpty(c)?B(b,c):D(b,k,d,c,e)}).getOr(!1)};return{backspaceDelete:function(a,
b){var d=c.fromDom(a.selection.getStart(!0));if(a.selection.isCollapsed())d=G(a,b,d);else var e=c.fromDom(a.getBody()),k=a.selection.getRng(),f=t.getCellsFromEditor(a),d=0!==f.length?r(a,f):v(a,e,k,d);return d}}});s("tinymce.core.delete.DeleteCommands","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.DeleteUtils tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.TableDelete".split(" "),function(g,f,h,e,c,b){return{deleteCommand:function(d){h.backspaceDelete(d,
!1)||c.backspaceDelete(d,!1)||g.backspaceDelete(d,!1)||b.backspaceDelete(d)||f.backspaceDelete(d,!1)||(d.getDoc().execCommand("Delete",!1,null),e.paddEmptyBody(d))},forwardDeleteCommand:function(d){h.backspaceDelete(d,!0)||c.backspaceDelete(d,!0)||g.backspaceDelete(d,!0)||b.backspaceDelete(d)||f.backspaceDelete(d,!0)||d.getDoc().execCommand("ForwardDelete",!1,null)}}});s("tinymce.core.selection.RangeCompare",[],function(){return{isEq:function(g,f){return g&&f&&g.startContainer===f.startContainer&&
g.startOffset===f.startOffset&&g.endContainer===f.endContainer&&g.endOffset===f.endOffset}}});s("tinymce.core.selection.NormalizeRange","ephox.katamari.api.Option ephox.katamari.api.Struct tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.selection.RangeCompare".split(" "),function(g,f,h,e,c,b,d){var a=f.immutable("container","offset"),k=function(a,b,c){for(;a&&a!==b;){if(c(a))return a;a=a.parentNode}return null},l=function(a,
b,c){return null!==k(a,b,function(a){return a.nodeName===c})},p=function(a,b,d){for(a=new c(b,a.getParent(b.parentNode,a.isBlock)||a.getRoot());b=a[d?"prev":"next"]();)if(e.isBr(b))return!0},n=function(a,b){for(;b&&b!==a;){if(e.isContentEditableFalse(b))return!0;b=b.parentNode}return!1},m=function(d,f,m,q,n){var p,u,y=d.getRoot(),B=d.schema.getNonEmptyElements();u=d.getParent(n.parentNode,d.isBlock)||y;if(q&&e.isBr(n)&&f&&d.isEmpty(u))return g.some(a(n.parentNode,d.nodeIndex(n)));for(f=new c(n,u);n=
f[q?"prev":"next"]();){if("false"===d.getContentEditableParent(n)||h.isCaretContainer(n)&&!1===(null!==k(n,y,b.isCaretNode)))return g.none();if(e.isText(n)&&0<n.nodeValue.length)return!1===l(n,y,"A")?g.some(a(n,q?n.nodeValue.length:0)):g.none();if(d.isBlock(n)||B[n.nodeName.toLowerCase()])return g.none();p=n}return m&&p?g.some(a(p,0)):g.none()},q=function(b,d,k,f){var l,q,u;u=b.getRoot();var y,B,A=!1;l=f[(k?"start":"end")+"Container"];q=f[(k?"start":"end")+"Offset"];B=e.isElement(l)&&q===l.childNodes.length;
f=b.schema.getNonEmptyElements();y=k;if(h.isCaretContainer(l))return g.none();e.isElement(l)&&q>l.childNodes.length-1&&(y=!1);e.isDocument(l)&&(l=u,q=0);if(l===u){if(y&&(k=l.childNodes[0<q?q-1:0])&&(h.isCaretContainer(k)||f[k.nodeName]||k&&"TABLE"===k.nodeName))return g.none();if(l.hasChildNodes()){q=Math.min(!y&&0<q?q-1:q,l.childNodes.length-1);l=l.childNodes[q];q=e.isText(l)&&B?l.data.length:0;if(!d&&l===u.lastChild&&l&&"TABLE"===l.nodeName||n(u,l)||h.isCaretContainer(l))return g.none();if(l.hasChildNodes()&&
!1===(l&&"TABLE"===l.nodeName)){k=l;u=new c(l,u);do{if(e.isContentEditableFalse(k)||h.isCaretContainer(k)){A=!1;break}if(e.isText(k)&&0<k.nodeValue.length){q=y?0:k.nodeValue.length;l=k;A=!0;break}if(f[k.nodeName.toLowerCase()]&&(!k||!/^(TD|TH|CAPTION)$/.test(k.nodeName))){q=b.nodeIndex(k);l=k.parentNode;"IMG"!==k.nodeName&&"PRE"!==k.nodeName||y||q++;A=!0;break}}while(k=y?u.next():u.prev())}}}d&&(e.isText(l)&&0===q&&m(b,B,d,!0,l).each(function(a){l=a.container();q=a.offset();A=!0}),e.isElement(l)&&
((k=l.childNodes[q])||(k=l.childNodes[q-1]),!k||!e.isBr(k)||k.previousSibling&&"A"===k.previousSibling.nodeName||p(b,k,!1)||p(b,k,!0)||m(b,B,d,!0,k).each(function(a){l=a.container();q=a.offset();A=!0})));y&&!d&&e.isText(l)&&q===l.nodeValue.length&&m(b,B,d,!1,l).each(function(a){l=a.container();q=a.offset();A=!0});return A?g.some(a(l,q)):g.none()};return{normalize:function(a,b){var c=b.collapsed,e=b.cloneRange();q(a,c,!0,e).each(function(a){e.setStart(a.container(),a.offset())});c||q(a,c,!1,e).each(function(a){e.setEnd(a.container(),
a.offset())});c&&e.collapse(!0);return d.isEq(b,e)?g.none():g.some(e)}}});s("tinymce.core.newline.InsertBr","ephox.katamari.api.Fun ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.NormalizeRange".split(" "),function(g,f,h,e,c,b,d,a,k,l){var p=function(a,b,c){b=new d(b,c);for(c=a.getNonEmptyElements();a=
b.next();)if(c[a.nodeName.toLowerCase()]||0<a.length)return!0},n=function(a,b,c){var d=a.create("span",{},"&nbsp;");c.parentNode.insertBefore(d,c);b.scrollIntoView(d);a.remove(d)},m=function(a,b,c,d){a=a.createRng();d?(a.setStartBefore(c),a.setEndBefore(c)):(a.setStartAfter(c),a.setEndAfter(c));b.setRng(a)},q=function(a,b){var c=a.selection,d=a.dom,e,k,f=c.getRng(!0);l.normalize(d,f).each(function(a){f.setStart(a.startContainer,a.startOffset);f.setEnd(a.endContainer,a.endOffset)});e=f.startOffset;
var h=f.startContainer;if(1===h.nodeType&&h.hasChildNodes()){var g=e>h.childNodes.length-1,h=h.childNodes[Math.min(e,h.childNodes.length-1)]||h;e=g&&3===h.nodeType?h.nodeValue.length:0}var u=(g=d.getParent(h,d.isBlock))?d.getParent(g.parentNode,d.isBlock):null,q=u?u.nodeName.toUpperCase():"",r=b&&b.ctrlKey;"LI"!==q||r||(g=u);h&&3===h.nodeType&&e>=h.nodeValue.length&&!p(a.schema,h,g)&&(e=d.create("br"),f.insertNode(e),f.setStartAfter(e),f.setEndAfter(e),k=!0);e=d.create("br");f.insertNode(e);n(d,c,
e);m(d,c,e,k);a.undoManager.add()},t=function(a,b){var c=h.fromTag("br");f.before(h.fromDom(b),c);a.undoManager.add()},r=function(a,b){x(a.getBody(),b)||f.after(h.fromDom(b),h.fromTag("br"));var c=h.fromTag("br");f.after(h.fromDom(b),c);n(a.dom,a.selection,c.dom());m(a.dom,a.selection,c.dom(),!1);a.undoManager.add()},w=function(a){return b.isBr(a.getNode())},x=function(a,d){return w(c.after(d))?!0:e.nextPosition(a,c.after(d)).map(function(a){return b.isBr(a.getNode())}).getOr(!1)},v=function(a){return a&&
"A"===a.nodeName&&"href"in a},z=function(a){return a.fold(g.constant(!1),v,v,g.constant(!1))},u=function(a,b){b.fold(g.noop,g.curry(t,a),g.curry(r,a),g.noop)};return{insert:function(b,d){var e;e=g.curry(k.isInlineTarget,b);var f=c.fromRangeStart(b.selection.getRng());e=a.readLocation(e,b.getBody(),f).filter(z);e.isSome()?e.each(g.curry(u,b)):q(b,d)}}});s("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(g,f){var h=g.generate([{before:["element"]},{on:["element",
"offset"]},{after:["element"]}]);return{before:h.before,on:h.on,after:h.after,cata:function(e,c,b,d){return e.fold(c,b,d)},getStart:function(e){return e.fold(f.identity,f.identity,f.identity)}}});s("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(g,f,h,e,c){var b=g.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset",
"finish","foffset"]}]);g=f.immutable("start","soffset","finish","foffset");var d=function(a){return a.match({domRange:function(a){return h.fromDom(a.startContainer)},relative:function(a,b){return c.getStart(a)},exact:function(a,b,c,d){return a}})};return{domRange:b.domRange,relative:b.relative,exact:b.exact,exactFromRange:function(a){return b.exact(a.start(),a.soffset(),a.finish(),a.foffset())},range:g,getWin:function(a){a=d(a);return e.defaultView(a)}}});s("tinymce.core.selection.SelectionBookmark",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection global!document".split(" "),function(g,f,h,e,c,b,d,a,k,l){var p=h.detect().browser,n=function(c,e){var k=b.isText(e)?d.get(e).length:a.children(e).length+1;return c>k?k:0>c?0:c},m=function(a){return k.range(a.start(),n(a.soffset(),a.start()),
a.finish(),n(a.foffset(),a.finish()))},q=function(a,b){return e.contains(a,b)||e.eq(a,b)},t=function(a){return function(b){return q(a,b.start())&&q(a,b.finish())}},r=function(a){return k.range(c.fromDom(a.startContainer),a.startOffset,c.fromDom(a.endContainer),a.endOffset)},w=function(a){a=a.getSelection();return(a&&0!==a.rangeCount?f.from(a.getRangeAt(0)):f.none()).map(r)},x=function(b){var c=a.defaultView(b);return w(c.dom()).filter(t(b))},v=function(a,b){return f.from(b).filter(t(a)).map(m)},z=
function(a){var b=l.createRange();b.setStart(a.start().dom(),a.soffset());b.setEnd(a.finish().dom(),a.foffset());return f.some(b)},u=function(a){return(a.bookmark?a.bookmark:f.none()).bind(g.curry(v,c.fromDom(a.getBody()))).bind(z)};return{store:function(a){var b=!0===a.inline||p.isIE()?x(c.fromDom(a.getBody())):f.none();a.bookmark=b.isSome()?b:a.bookmark},storeNative:function(a,b){var d=c.fromDom(a.getBody()),d=(!0===a.inline||p.isIE()?f.from(b):f.none()).map(r).filter(t(d));a.bookmark=d.isSome()?
d:a.bookmark},readRange:w,restore:function(a){u(a).each(function(b){a.selection.setRng(b)})},getRng:u,getBookmark:x,validate:v}});s("tinymce.core.EditorCommands","tinymce.core.Env tinymce.core.InsertContent tinymce.core.delete.DeleteCommands tinymce.core.dom.NodeType tinymce.core.newline.InsertBr tinymce.core.selection.SelectionBookmark tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d){var a=d.each,k=d.extend,l=d.map,p=d.inArray,n=d.explode;return function(d){var q,t,r,w={state:{},exec:{},
value:{}},x=d.settings,v;d.on("PreInit",function(){q=d.dom;t=d.selection;x=d.settings;r=d.formatter});var z=function(a){var b;if(!d.quirks.isHidden()&&!d.removed){a=a.toLowerCase();if(b=w.state[a])return b(a);try{return d.getDoc().queryCommandState(a)}catch(c){}return!1}},u=function(b,c){c=c||"exec";a(b,function(b,d){a(d.toLowerCase().split(","),function(a){w[c][a]=b})})};k(this,{execCommand:function(c,e,k,f){var h,g=0;if(!d.removed){/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(c)||
f&&f.skip_focus?b.restore(d):d.focus();f=d.fire("BeforeExecCommand",{command:c,ui:e,value:k});if(f.isDefaultPrevented())return!1;h=c.toLowerCase();if(f=w.exec[h])return f(h,e,k),d.fire("ExecCommand",{command:c,ui:e,value:k}),!0;a(d.plugins,function(a){if(a.execCommand&&a.execCommand(c,e,k))return d.fire("ExecCommand",{command:c,ui:e,value:k}),g=!0,!1});if(g)return g;if(d.theme&&d.theme.execCommand&&d.theme.execCommand(c,e,k))return d.fire("ExecCommand",{command:c,ui:e,value:k}),!0;try{g=d.getDoc().execCommand(c,
e,k)}catch(l){}return g?(d.fire("ExecCommand",{command:c,ui:e,value:k}),!0):!1}},queryCommandState:z,queryCommandValue:function(a){var b;if(!d.quirks.isHidden()&&!d.removed){a=a.toLowerCase();if(b=w.value[a])return b(a);try{return d.getDoc().queryCommandValue(a)}catch(c){}}},queryCommandSupported:function(a){a=a.toLowerCase();if(w.exec[a])return!0;try{return d.getDoc().queryCommandSupported(a)}catch(b){}return!1},addCommands:u,addCommand:function(a,b,c){a=a.toLowerCase();w.exec[a]=function(a,e,k,
f){return b.call(c||d,e,k,f)}},addQueryStateHandler:function(a,b,c){a=a.toLowerCase();w.state[a]=function(){return b.call(c||d)}},addQueryValueHandler:function(a,b,c){a=a.toLowerCase();w.value[a]=function(){return b.call(c||d)}},hasCustomCommand:function(a){a=a.toLowerCase();return!!w.exec[a]}});var y=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=null);return d.getDoc().execCommand(a,b,c)},B=function(a,b){r.toggle(a,b?{value:b}:void 0);d.nodeChanged()};u({"mceResetDesignMode,mceBeginUndoLevel":function(){},
"mceEndUndoLevel,mceAddUndoLevel":function(){d.undoManager.add()},"Cut,Copy,Paste":function(a){var b=d.getDoc(),c;try{y(a)}catch(e){c=!0}"paste"!==a||b.queryCommandEnabled(a)||(c=!0);if(c||!b.queryCommandSupported(a))a=d.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),g.mac&&(a=a.replace(/Ctrl\+/g,"\u2318+")),d.notificationManager.open({text:a,type:"error"})},unlink:function(){if(t.isCollapsed()){var a=d.dom.getParent(d.selection.getStart(),
"a");a&&d.dom.remove(a,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(b){var c=b.substring(7);"full"==c&&(c="justify");a(["left","center","right","justify"],function(a){c!=a&&r.remove("align"+a)});"none"!=c&&B("align"+c)},"InsertUnorderedList,InsertOrderedList":function(a){var b;y(a);if(a=q.getParent(t.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(v=t.getBookmark(void 0),q.split(b,a),t.moveToBookmark(v))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){B(a)},
"ForeColor,HiliteColor,FontName":function(a,b,c){B(a,c)},FontSize:function(a,b,c){var d;1<=c&&7>=c&&(d=n(x.font_size_style_values),c=(b=n(x.font_size_classes))?b[c-1]||c:d[c-1]||c);B(a,c)},RemoveFormat:function(a){r.remove(a)},mceBlockQuote:function(){B("blockquote")},FormatBlock:function(a,b,c){return B(c||"p")},mceCleanup:function(){var a=t.getBookmark();d.setContent(d.getContent({cleanup:!0}),{cleanup:!0});t.moveToBookmark(a)},mceRemoveNode:function(a,b,c){a=c||t.getNode();a!=d.getBody()&&(v=t.getBookmark(void 0),
d.dom.remove(a,!0),t.moveToBookmark(v))},mceSelectNodeDepth:function(a,b,c){var e=0;q.getParent(t.getNode(),function(a){if(1==a.nodeType&&e++==c)return t.select(a),!1},d.getBody())},mceSelectNode:function(a,b,c){t.select(c)},mceInsertContent:function(a,b,c){f.insertAtCaret(d,c)},mceInsertRawHTML:function(a,b,c){t.setContent("tiny_mce_marker");d.setContent(d.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceToggleFormat:function(a,b,c){B(c)},mceSetContent:function(a,b,c){d.setContent(c)},
"Indent,Outdent":function(b){var c,e,k;c=x.indentation;e=/[a-z%]+$/i.exec(c);c=parseInt(c,10);z("InsertUnorderedList")||z("InsertOrderedList")?y(b):(x.forced_root_block||q.getParent(t.getNode(),q.isBlock)||r.apply("div"),a(t.getSelectedBlocks(),function(a){if("false"!==q.getContentEditable(a)&&"LI"!==a.nodeName){var f=d.getParam("indent_use_margin",!1)?"margin":"padding",f="TABLE"===a.nodeName?"margin":f,f=f+("rtl"==q.getStyle(a,"direction",!0)?"Right":"Left");"outdent"==b?(k=Math.max(0,parseInt(a.style[f]||
0,10)-c),q.setStyle(a,f,k?k+e:"")):(k=parseInt(a.style[f]||0,10)+c+e,q.setStyle(a,f,k))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){d.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){d.hasVisual=!d.hasVisual;d.addVisual()},mceReplaceContent:function(a,b,c){d.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,t.getContent({format:"text"})))},mceInsertLink:function(a,b,c){"string"==typeof c&&(c={href:c});a=q.getParent(t.getNode(),"a");c.href=c.href.replace(" ",
"%20");a&&c.href||r.remove("link");c.href&&r.apply("link",c,a)},selectAll:function(){var a=q.getParent(t.getStart(),e.isContentEditableTrue);if(a){var b=q.createRng();b.selectNodeContents(a);t.setRng(b)}},"delete":function(){h.deleteCommand(d)},forwardDelete:function(){h.forwardDeleteCommand(d)},mceNewDocument:function(){d.setContent("")},InsertLineBreak:function(a,b,e){c.insert(d,e);return!0}});u({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b="align"+a.substring(7);a=t.isCollapsed()?
[q.getParent(t.getNode(),q.isBlock)]:t.getSelectedBlocks();a=l(a,function(a){return!!r.matchNode(a,b)});return-1!==p(a,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r.match(a)},mceBlockQuote:function(){return r.match("blockquote")},Outdent:function(){var a;return x.inline_styles&&((a=q.getParent(t.getStart(),q.isBlock))&&0<parseInt(a.style.paddingLeft,10)||(a=q.getParent(t.getEnd(),q.isBlock))&&0<parseInt(a.style.paddingLeft,10))?!0:z("InsertUnorderedList")||
z("InsertOrderedList")||!x.inline_styles&&!!q.getParent(t.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){var b=q.getParent(t.getNode(),"ul,ol");return b&&("insertunorderedlist"===a&&"UL"===b.tagName||"insertorderedlist"===a&&"OL"===b.tagName)}},"state");u({"FontSize,FontName":function(a){var b=0,c;if(c=q.getParent(t.getNode(),"span"))b="fontsize"==a?c.style.fontSize:c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");u({Undo:function(){d.undoManager.undo()},
Redo:function(){d.undoManager.redo()}})}});s("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(g){var f=g.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),h=function(e){var c=
this,b,d={},a,k=function(){return!1},f=function(){return!0};e=e||{};b=e.scope||c;a=e.toggleEvent||k;var h=function(b,e,f,h){var l,n;!1===e&&(e=k);if(e)for(e={func:e},h&&g.extend(e,h),l=b.toLowerCase().split(" "),n=l.length;n--;)b=l[n],h=d[b],h||(h=d[b]=[],a(b,!0)),f?h.unshift(e):h.push(e);return c},n=function(b,e){var k,f,h,g,l;if(b)for(g=b.toLowerCase().split(" "),k=g.length;k--;){b=g[k];f=d[b];if(!b){for(h in d)a(h,!1),delete d[h];break}if(f){if(e)for(l=f.length;l--;)f[l].func===e&&(f=f.slice(0,
l).concat(f.slice(l+1)),d[b]=f);else f.length=0;f.length||(a(b,!1),delete d[b])}}else{for(b in d)a(b,!1);d={}}return c};c.fire=function(a,c){var h,g,p,x;a=a.toLowerCase();c=c||{};c.type=a;c.target||(c.target=b);c.preventDefault||(c.preventDefault=function(){c.isDefaultPrevented=f},c.stopPropagation=function(){c.isPropagationStopped=f},c.stopImmediatePropagation=function(){c.isImmediatePropagationStopped=f},c.isDefaultPrevented=k,c.isPropagationStopped=k,c.isImmediatePropagationStopped=k);e.beforeFire&&
e.beforeFire(c);if(h=d[a])for(g=0,p=h.length;g<p;g++){x=h[g];x.once&&n(a,x.func);if(c.isImmediatePropagationStopped()){c.stopPropagation();break}if(!1===x.func.call(b,c)){c.preventDefault();break}}return c};c.on=h;c.off=n;c.once=function(a,b,c){return h(a,b,c,{once:!0})};c.has=function(a){a=a.toLowerCase();return!(!d[a]||0===d[a].length)}};h.isNative=function(e){return!!f[e.toLowerCase()]};return h});s("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(g){var f=function(f){f._eventDispatcher||
(f._eventDispatcher=new g({scope:f,toggleEvent:function(e,c){g.isNative(e)&&f.toggleNativeEvent&&f.toggleNativeEvent(e,c)}}));return f._eventDispatcher};return{fire:function(h,e,c){if(this.removed&&"remove"!==h)return e;e=f(this).fire(h,e,c);if(!1!==c&&this.parent)for(c=this.parent();c&&!e.isPropagationStopped();)c.fire(h,e,!1),c=c.parent();return e},on:function(h,e,c){return f(this).on(h,e,c)},off:function(h,e){return f(this).off(h,e)},once:function(h,e){return f(this).once(h,e)},hasEventListeners:function(h){return f(this).has(h)}}});
s("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(g,f,h){var e=f.DOM,c,b=function(a,b){return"selectionchange"==b?a.getDoc():!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(b)?a.getDoc().documentElement:a.settings.event_root?(a.eventRoot||(a.eventRoot=e.select(a.settings.event_root)[0]),a.eventRoot):a.getBody()},d=function(a,d){var f,h;a.delegates||(a.delegates={});a.delegates[d]||a.removed||(f=
b(a,d),a.settings.event_root?(c||(c={},a.editorManager.on("removeEditor",function(){var d;if(!a.editorManager.activeEditor&&c){for(d in c)a.dom.unbind(b(a,d));c=null}})),c[d]||(h=function(b){for(var c=b.target,f=a.editorManager.get(),h=f.length;h--;){var g=f[h].getBody();if(g===c||e.isChildOf(c,g))f[h].hidden||f[h].readonly||f[h].fire(d,b)}},c[d]=h,e.bind(f,d,h))):(h=function(b){a.hidden||a.readonly||a.fire(d,b)},e.bind(f,d,h),a.delegates[d]=h))};f={bindPendingEventDelegates:function(){var a=this;
h.each(a._pendingNativeEvents,function(b){d(a,b)})},toggleNativeEvent:function(a,c){"focus"!=a&&"blur"!=a&&(c?this.initialized?d(this,a):this._pendingNativeEvents?this._pendingNativeEvents.push(a):this._pendingNativeEvents=[a]:this.initialized&&(this.dom.unbind(b(this,a),a,this.delegates[a]),delete this.delegates[a]))},unbindAllNativeEvents:function(){var a;if(this.delegates){for(a in this.delegates)this.dom.unbind(b(this,a),a,this.delegates[a]);delete this.delegates}this.inline||(this.getBody().onload=
null,this.dom.unbind(this.getWin()),this.dom.unbind(this.getDoc()));this.dom.unbind(this.getBody());this.dom.unbind(this.getContainer())}};return f=h.extend({},g,f)});s("tinymce.core.Mode",[],function(){var g=function(e,c,b){try{e.getDoc().execCommand(c,!1,b)}catch(d){}},f=function(e){var c,b;c=e.getBody();b=function(b){0<e.dom.getParents(b.target,"a").length&&b.preventDefault()};e.dom.bind(c,"click",b);return{unbind:function(){e.dom.unbind(c,"click",b)}}},h=function(e,c){e._clickBlocker&&(e._clickBlocker.unbind(),
e._clickBlocker=null);c?(e._clickBlocker=f(e),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,g(e,"StyleWithCSS",!1),g(e,"enableInlineTableEditing",!1),g(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())};return{setMode:function(e,c){if(c!=(e.readonly?"readonly":"design")){if(e.initialized)h(e,"readonly"==c);else e.on("init",function(){h(e,"readonly"==c)});e.fire("SwitchMode",{mode:c})}}}});s("tinymce.core.Shortcuts",
["tinymce.core.util.Tools","tinymce.core.Env"],function(g,f){var h=g.each,e=g.explode,c={f9:120,f10:121,f11:122},b=g.makeMap("alt,ctrl,shift,meta,access");return function(d){var a={},k=[],l=function(a){var d,k={};h(e(a,"+"),function(a){a in b?k[a]=!0:/^[0-9]{2,}$/.test(a)?k.keyCode=parseInt(a,10):(k.charCode=a.charCodeAt(0),k.keyCode=c[a]||a.toUpperCase().charCodeAt(0))});a=[k.keyCode];for(d in b)k[d]?a.push(d):k[d]=!1;k.id=a.join(",");k.access&&(k.alt=!0,f.mac?k.ctrl=!0:k.shift=!0);k.meta&&(f.mac?
k.meta=!0:(k.ctrl=!0,k.meta=!1));return k},p=function(a,b,c,k){a=g.map(e(a,">"),l);a[a.length-1]=g.extend(a[a.length-1],{func:c,scope:k||d});return g.extend(a[0],{desc:d.translate(b),subpatterns:a.slice(1)})},n=function(a,b){return b&&b.ctrl==a.ctrlKey&&b.meta==a.metaKey&&b.alt==a.altKey&&b.shift==a.shiftKey?a.keyCode==b.keyCode||a.charCode&&a.charCode==b.charCode?(a.preventDefault(),!0):!1:!1};d.on("keyup keypress keydown",function(b){(b.altKey||b.ctrlKey||b.metaKey||"keydown"===b.type&&112<=b.keyCode&&
123>=b.keyCode)&&!b.isDefaultPrevented()&&(h(a,function(a){if(n(b,a))return k=a.subpatterns.slice(0),"keydown"==b.type&&a.func&&a.func.call(a.scope),!0}),n(b,k[0])&&(1===k.length&&"keydown"==b.type&&k[0].func&&k[0].func.call(k[0].scope),k.shift()))});this.add=function(b,c,k,f){var l;l=k;"string"===typeof k?k=function(){d.execCommand(l,!1,null)}:g.isArray(l)&&(k=function(){d.execCommand(l[0],l[1],l[2])});h(e(g.trim(b.toLowerCase())),function(b){b=p(b,c,k,f);a[b.id]=b});return!0};this.remove=function(b){b=
p(b);return a[b.id]?(delete a[b.id],!0):!1}}});s("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(g,f,h){var e=h.each,c=function(b,a,c){var e=1,f,h;h=b.getShortEndedElements();b=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(b.lastIndex=c;f=b.exec(a);){c=b.lastIndex;if("/"===f[1])e--;else if(!f[1]){if(f[2]in h)continue;e++}if(0===e)break}return c},b=function(b,a){var k=this,
l=function(){};b=b||{};k.schema=a=a||new g;!1!==b.fix_self_closing&&(b.fix_self_closing=!0);e("comment cdata text start end pi doctype".split(" "),function(a){a&&(k[a]=b[a]||l)});k.parse=function(e){var k=this,g,l=0,t,r,w=[],x,v,z,u,y,B,A,C,D,s,G,E,H,F,L,K,O,I,M,N,Q,T,X=0,R=f.decode,U,W=h.makeMap("src,href,data,background,formaction,poster"),Z=/((java|vb)script|mhtml):/i,P=/^data:/i,V=function(a){var b,c;for(b=w.length;b--&&w[b].name!==a;);if(0<=b){for(c=w.length-1;c>=b;c--)a=w[c],a.valid&&k.end(a.name);
w.length=b}},ia=function(a,c,e,k,f){a=/[\s\u0000-\u001F]+/g;c=c.toLowerCase();e=c in C?c:R(e||k||f||"");if(D&&!y&&!1===(0===c.indexOf("data-")||0===c.indexOf("aria-"))){k=F[c];if(!k&&L){for(f=L.length;f--&&(k=L[f],!k.pattern.test(c)););-1===f&&(k=null)}if(!k||k.validValues&&!(e in k.validValues))return}if(W[c]&&!b.allow_script_urls){a=e.replace(a,"");try{a=decodeURIComponent(a)}catch(h){a=unescape(a)}if(Z.test(a)||!b.allow_html_data_urls&&P.test(a)&&!/^data:image\//i.test(a))return}y&&(c in W||0===
c.indexOf("on"))||(x.map[c]=e,x.push({name:c,value:e}))};N=RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");Q=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;A=a.getShortEndedElements();M=b.self_closing_elements||a.getSelfClosingElements();
C=a.getBoolAttrs();D=b.validate;B=b.remove_internals;U=b.fix_self_closing;T=a.getSpecialElements();for(I=e+">";g=N.exec(I);){l<g.index&&k.text(R(e.substr(l,g.index-l)));if(t=g[6])t=t.toLowerCase(),":"===t.charAt(0)&&(t=t.substr(1)),V(t);else if(t=g[7]){if(g.index+g[0].length>e.length){k.text(R(e.substr(g.index)));l=g.index+g[0].length;continue}t=t.toLowerCase();":"===t.charAt(0)&&(t=t.substr(1));l=t in A;U&&M[t]&&0<w.length&&w[w.length-1].name===t&&V(t);if(!D||(s=a.getElementRule(t))){G=!0;D&&(F=
s.attributes,L=s.attributePatterns);(H=g[8])?((y=-1!==H.indexOf("data-mce-type"))&&B&&(G=!1),x=[],x.map={},H.replace(Q,ia)):(x=[],x.map={});if(D&&!y){r=s.attributesRequired;K=s.attributesDefault;O=s.attributesForced;(v=s.removeEmptyAttrs)&&!x.length&&(G=!1);if(O)for(v=O.length;v--;)E=O[v],u=E.name,E=E.value,"{$uid}"===E&&(E="mce_"+X++),x.map[u]=E,x.push({name:u,value:E});if(K)for(v=K.length;v--;)E=K[v],u=E.name,u in x.map||(E=E.value,"{$uid}"===E&&(E="mce_"+X++),x.map[u]=E,x.push({name:u,value:E}));
if(r){for(v=r.length;v--&&!(r[v]in x.map););-1===v&&(G=!1)}if(E=x.map["data-mce-bogus"]){if("all"===E){l=c(a,e,N.lastIndex);N.lastIndex=l;continue}G=!1}}G&&k.start(t,x,l)}else G=!1;if(r=T[t]){r.lastIndex=l=g.index+g[0].length;(g=r.exec(e))?(G&&(z=e.substr(l,g.index-l)),l=g.index+g[0].length):(z=e.substr(l),l=e.length);G&&(0<z.length&&k.text(z,!0),k.end(t));N.lastIndex=l;continue}l||(H&&H.indexOf("/")==H.length-1?G&&k.end(t):w.push({name:t,valid:G}))}else(t=g[1])?(">"===t.charAt(0)&&(t=" "+t),b.allow_conditional_comments||
"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),k.comment(t)):(t=g[2])?k.cdata(t.replace(/\x3c!--|--\x3e/g,"")):(t=g[3])?k.doctype(t):(t=g[4])&&k.pi(t,g[5]);l=g.index+g[0].length}l<e.length&&k.text(R(e.substr(l)));for(v=w.length-1;0<=v;v--)t=w[v],t.valid&&k.end(t.name)}};b.findEndTag=c;return b});s("tinymce.core.dom.TrimHtml",["tinymce.core.html.SaxParser","tinymce.core.text.Zwsp"],function(g,f){var h=function(e,c){var b=c,d=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,a,k,f,h,n=e.schema;k=e.getTempAttrs();
k=RegExp(""+("\\s?("+k.join("|")+')="[^"]+"'),"gi");b=b.replace(k,"");for(h=n.getShortEndedElements();a=d.exec(b);)k=d.lastIndex,f=a[0].length,a=h[a[1]]?k:g.findEndTag(n,b,k),b=b.substring(0,k-f)+b.substring(a),d.lastIndex=k-f;return b};return{trimExternal:function(e,c){return f.trim(h(e,c))},trimInternal:h}});s("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(g){return{any:function(f){return g.first(f).isSome()},ancestor:function(f,h,e){return g.ancestor(f,
h,e).isSome()},closest:function(f,h,e){return g.closest(f,h,e).isSome()},sibling:function(f,h){return g.sibling(f,h).isSome()},child:function(f,h){return g.child(f,h).isSome()},descendant:function(f,h){return g.descendant(f,h).isSome()}}});s("ephox.sugar.api.dom.Focus","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateExists ephox.sugar.api.search.Traverse global!document".split(" "),function(g,f,h,e,c,b,d){var a=
function(a){a.dom().focus()},k=function(a){a=void 0!==a?a.dom():d;return f.from(a.activeElement).map(e.fromDom)};return{hasFocus:function(a){var c=b.owner(a).dom();return a.dom()===c.activeElement},focus:a,blur:function(a){a.dom().blur()},active:k,search:function(a){return k(b.owner(a)).filter(function(b){return a.dom().contains(b.dom())})},focusInside:function(d){var e=b.owner(d);k(e).filter(function(a){return c.closest(a,g.curry(h.eq,d))}).fold(function(){a(d)},g.noop)}}});s("tinymce.core.focus.EditorFocus",
"ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Focus ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.selection.RangeNodes tinymce.core.selection.SelectionBookmark".split(" "),function(g,f,h,e,c,b,d,a,k){var l=function(a,b){return a.dom.getParent(b,function(b){return"true"===a.dom.getContentEditable(b)})},p=function(b,c){return(c.collapsed?g.from(a.getNode(c.startContainer,c.startOffset)).map(e.fromDom):
g.none()).bind(function(a){return d.isTableSection(a)?g.some(a):!1===f.contains(b,a)?g.some(b):g.none()})},n=function(a,c){p(e.fromDom(a.getBody()),c).bind(function(a){return b.firstPositionIn(a.dom())}).fold(function(){a.selection.normalize()},function(b){a.selection.setRng(b.toRange())})},m=function(a){if(a.setActive)try{a.setActive()}catch(b){a.focus()}else a.focus()},q=function(a){if(a.inline){a=a.getBody();var b;if(b=a)a=e.fromDom(a),b=h.hasFocus(a)||h.search(a).isSome();a=b}else a=a.iframeElement&&
h.hasFocus(e.fromDom(a.iframeElement));return a},t=function(a){var b=a.selection,d=a.settings.content_editable,e=a.getBody(),f=b.getRng();a.quirks.refreshContentEditable();b=l(a,b.getNode());if(a.$.contains(e,b))m(b),n(a,f);else if(void 0!==a.bookmark&&!1===q(a)&&k.getRng(a).each(function(b){a.selection.setRng(b);f=b}),d||(c.opera||m(e),a.getWin().focus()),c.gecko||d)m(e),n(a,f);a.editorManager.setActive(a)};return{focus:function(a,b){a.removed||(b?a.editorManager.setActive(a):t(a))},hasFocus:q}});
s("tinymce.core.EditorView","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),function(g,f,h,e,c,b){var d=function(a,b){return b.dom()[a]},a=function(a,b){return parseInt(c.get(b,a),10)},k=g.curry(d,"clientWidth"),l=g.curry(d,"clientHeight"),p=g.curry(a,"margin-top"),n=g.curry(a,"margin-left");return{isXYInContentArea:function(a,c,d){var f=e.fromDom(a.getBody()),f=a.inline?
f:b.documentElement(f),h=a.inline,g=f.dom().getBoundingClientRect();a=h?g.left+f.dom().clientLeft+n(f):0;h=h?g.top+f.dom().clientTop+p(f):0;c-=a;d-=h;a=k(f);f=l(f);return 0<=c&&0<=d&&c<=a&&d<=f},isEditorAttachedToDom:function(a){a=a.inline?a.getBody():a.getContentAreaContainer();return f.from(a).map(e.fromDom).map(function(a){return h.contains(b.owner(a),a)}).getOr(!1)}}});s("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var g=function(){throw Error("Theme did not provide a NotificationManager implementation.");
};return{open:g,close:g,reposition:g,getArgs:g}}});s("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(g,f,h,e,c){return function(b){var d=[],a=function(){var a=b.theme;return a&&a.getNotificationManagerImpl?a.getNotificationManagerImpl():e()},k=function(){0<d.length&&a().reposition(d)},l=function(a){g.findIndex(d,function(b){return b===a}).each(function(a){d.splice(a,
1)})},p=function(c){if(!b.removed&&h.isEditorAttachedToDom(b))return g.find(d,function(b){b=a().getArgs(b);return b.type===c.type&&b.text===c.text&&!b.progressBar&&!b.timeout&&!c.progressBar&&!c.timeout}).getOrThunk(function(){b.editorManager.setActive(b);var e=a().open(c,function(){l(e);k()});d.push(e);k();return e})};(function(b){b.on("SkinLoaded",function(){var a=b.settings.service_message;a&&p({text:a,type:"warning",timeout:0,icon:""})});b.on("ResizeEditor ResizeWindow",function(){c.requestAnimationFrame(k)});
b.on("remove",function(){g.each(d,function(b){a().close(b)})})})(b);return{open:p,close:function(){f.from(d[0]).each(function(b){a().close(b);l(b);k()})},getNotifications:function(){return d}}}});s("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var g=function(){throw Error("Theme did not provide a WindowManager implementation.");};return{open:g,alert:g,confirm:g,close:g,getParams:g,setParams:g}}});s("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option",
"tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(g,f,h,e){return function(c){var b=[],d=function(){var a=c.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():e()},a=function(a,b){return function(){return b?b.apply(a,arguments):void 0}},k=function(a){c.fire("OpenWindow",{win:a})},l=function(a){g.findIndex(b,function(b){return b===a}).each(function(d){b.splice(d,1);c.fire("CloseWindow",{win:a});0===b.length&&c.focus()})},p=function(){return f.from(b[b.length-
1])};c.on("remove",function(){g.each(b.slice(0),function(a){d().close(a)})});return{windows:b,open:function(a,e){c.editorManager.setActive(c);h.store(c);var f=d().open(a,e,l);b.push(f);k(f);return f},alert:function(c,e,f){c=d().alert(c,a(f?f:this,e),l);b.push(c);k(c)},confirm:function(c,e,f){c=d().confirm(c,a(f?f:this,e),l);b.push(c);k(c)},close:function(){p().each(function(a){d().close(a);l(a)})},getParams:function(){return p().map(d().getParams).getOr(null)},setParams:function(a){p().each(function(b){d().setParams(b,
a)})},getWindows:function(){return b}}}});s("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(g,f){var h=f.PluginManager,e=function(c,b){if(c._skinLoaded)c.notificationManager.open({type:"error",text:b});else c.on("SkinLoaded",function(){c.notificationManager.open({type:"error",text:b})})};return{pluginLoadError:function(c,b){var d;a:{for(d in h.urls)if(h.urls[d]+"/plugin"+c.suffix+".js"===b)break a;d=null}e(c,d?"Failed to load plugin: "+d+" from url "+b:"Failed to load plugin url: "+
b)},uploadError:function(c,b){e(c,"Failed to upload image: "+b)},displayError:e,initError:function(c){var b=g.console;b&&!g.test&&(b.error?b.error.apply(b,arguments):b.log.apply(b,arguments))}}});s("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(g){return g.PluginManager});s("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(g){return g.ThemeManager});s("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(g){return function(){return new (g.getOrDie("XMLHttpRequest"))}});
s("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(g,f,h,e,c){return function(b,d){var a={},k=function(a,b,c,e){var k,h;k=new g;k.open("POST",d.url);k.withCredentials=d.credentials;k.upload.onprogress=function(a){e(100*(a.loaded/a.total))};k.onerror=function(){c("Image upload failed due to a XHR Transport error. Code: "+k.status)};k.onload=function(){var a;if(200>k.status||300<=k.status)c("HTTP Error: "+
k.status);else if((a=JSON.parse(k.responseText))&&"string"==typeof a.location){var e;e=d.basePath;a=a.location;e=e?e.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a;b(e)}else c("Invalid JSON: "+k.responseText)};h=new f.FormData;h.append("file",a.blob(),a.filename());k.send(h)},h=function(){return new e(function(a){a([])})},p=function(a,b){return{url:"",blobInfo:a,status:!1,error:b}},n=function(b,d){c.each(a[b],function(a){a(d)});delete a[b]},m=function(a,c,d){b.markPending(a.blobUri());return new e(function(e){var k,
f,h=function(){};try{f=function(a){0>a||100<a||(k||(k=d()),k.progressBar.value(a))},c(a,function(c){k&&(k.close(),f=h);b.markUploaded(a.blobUri(),c);n(a.blobUri(),{url:c,blobInfo:a,status:!0});e({url:c,blobInfo:a,status:!0})},function(c){k&&(k.close(),f=h);b.removeFailed(a.blobUri());n(a.blobUri(),p(a,c));e(p(a,c))},f)}catch(g){e(p(a,g.message))}})},q=function(b){var c=b.blobUri();return new e(function(b){a[c]=a[c]||[];a[c].push(b)})},t=function(a,k){a=c.grep(a,function(a){return!b.isUploaded(a.blobUri())});
return e.all(c.map(a,function(a){return b.isPending(a.blobUri())?q(a):m(a,d.handler,k)}))};d=c.extend({credentials:!1,handler:k},d);return{upload:function(a,b){return d.url||d.handler!==k?t(a,b):h()}}}});s("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(g){return function(f,h){return new (g.getOrDie("Blob"))(f,h)}});s("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(g){return function(){return new (g.getOrDie("FileReader"))}});s("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],
function(g){return function(f){return new (g.getOrDie("Uint8Array"))(f)}});s("ephox.sand.api.Window",["ephox.sand.util.Global"],function(g){return{atob:function(f){return g.getOrDie("atob")(f)},requestAnimationFrame:function(f){g.getOrDie("requestAnimationFrame")(f)}}});s("tinymce.core.file.Conversions","ephox.sand.api.Blob ephox.sand.api.FileReader ephox.sand.api.Uint8Array ephox.sand.api.Window ephox.sand.api.XMLHttpRequest tinymce.core.util.Promise".split(" "),function(g,f,h,e,c,b){var d=function(a){return new b(function(b,
d){var e=function(){d("Cannot convert "+a+" to Blob. Resource might not exist or is inaccessible.")};try{var k=new c;k.open("GET",a,!0);k.responseType="blob";k.onload=function(){200==this.status?b(this.response):e()};k.onerror=e;k.send()}catch(f){e()}})},a=function(a){var b,c;a=decodeURIComponent(a).split(",");(c=/data:([^;]+)/.exec(a[0]))&&(b=c[1]);return{type:b,data:a[1]}},k=function(c){return new b(function(b){var d,k,f;c=a(c);try{d=e.atob(c.data)}catch(t){b(new g([]));return}k=new h(d.length);
for(f=0;f<k.length;f++)k[f]=d.charCodeAt(f);b(new g([k],{type:c.type}))})};return{uriToBlob:function(a){return 0===a.indexOf("blob:")?d(a):0===a.indexOf("data:")?k(a):null},blobToDataUri:function(a){return new b(function(b){var c=new f;c.onloadend=function(){b(c.result)};c.readAsDataURL(a)})},parseDataUri:a}});s("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(g,f,h,e,c){var b=
0,d=function(a,c,d,f){var h,g;0===c.src.indexOf("blob:")?(g=a.getByUri(c.src))?d({image:c,blobInfo:g}):e.uriToBlob(c.src).then(function(f){e.blobToDataUri(f).then(function(p){h=e.parseDataUri(p).data;g=a.create("blobid"+b++,f,h);a.add(g);d({image:c,blobInfo:g})})},function(a){f(a)}):(h=e.parseDataUri(c.src).data,(g=a.findFirst(function(a){return a.base64()===h}))?d({image:c,blobInfo:g}):e.uriToBlob(c.src).then(function(e){g=a.create("blobid"+b++,e,h);a.add(g);d({image:c,blobInfo:g})},function(a){f(a)}))};
return function(a,b){var e={};return{findAll:function(p,n){var m;n||(n=h.constant(!0));m=f.filter(p?p.getElementsByTagName("img"):[],function(b){var d=b.src;return!c.fileApi||b.hasAttribute("data-mce-bogus")||b.hasAttribute("data-mce-placeholder")||!d||d==c.transparentSrc?!1:0===d.indexOf("blob:")?!a.isUploaded(d):0===d.indexOf("data:")?n(b):!1});m=f.map(m,function(a){var c;if(e[a.src])return new g(function(b){e[a.src].then(function(c){if("string"===typeof c)return c;b({image:a,blobInfo:c.blobInfo})})});
c=(new g(function(c,e){d(b,a,c,e)})).then(function(a){delete e[a.image.src];return a})["catch"](function(b){delete e[a.src];return b});return e[a.src]=c});return g.all(m)}}}});s("tinymce.core.util.Uuid",[],function(){var g=0,f=function(){var f=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+f()+f()+f()};return{uuid:function(h){return h+g++ +f()}}});s("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun",
"tinymce.core.util.Uuid"],function(g,f,h,e){return function(){var c=[],b=h.constant,d=function(a){var c,d;if(!a.blob||!a.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";c=a.id||e.uuid("blobid");d=a.name||c;c=b(c);var f=b(d);d+=".";var k;k={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[a.blob.type.toLowerCase()]||"dat";return{id:c,name:f,filename:b(d+k),blob:b(a.blob),base64:b(a.base64),blobUri:b(a.blobUri||g.createObjectURL(a.blob)),
uri:b(a.uri)}},a=function(a){return k(function(b){return b.id()===a})},k=function(a){return f.filter(c,a)[0]};return{create:function(a,b,c,e){return"object"===typeof a?d(a):d({id:a,name:e,blob:b,base64:c})},add:function(b){a(b.id())||c.push(b)},get:a,getByUri:function(a){return k(function(b){return b.blobUri()==a})},findFirst:k,removeByUri:function(a){c=f.filter(c,function(b){return b.blobUri()===a?(g.revokeObjectURL(b.blobUri()),!1):!0})},destroy:function(){f.each(c,function(a){g.revokeObjectURL(a.blobUri())});
c=[]}}}});s("tinymce.core.file.UploadStatus",[],function(){return function(){var g={},f=function(f){return f in g};return{hasBlobUri:f,getResultUri:function(f){return(f=g[f])?f.resultUri:null},isPending:function(h){return f(h)?1===g[h].status:!1},isUploaded:function(h){return f(h)?2===g[h].status:!1},markPending:function(f){g[f]={status:1,resultUri:null}},markUploaded:function(f,e){g[f]={status:2,resultUri:e}},removeFailed:function(f){delete g[f]},destroy:function(){g={}}}}});s("tinymce.core.EditorUpload",
"tinymce.core.util.Arr tinymce.core.file.Uploader tinymce.core.file.ImageScanner tinymce.core.file.BlobCache tinymce.core.file.UploadStatus tinymce.core.ErrorReporter".split(" "),function(g,f,h,e,c,b){return function(d){var a=new e,k,l,p=d.settings,n=new c,m=function(a){return function(b){return d.selection?a(b):[]}},q=function(a,b,c){var d=0;do d=a.indexOf(b,d),-1!==d&&(a=a.substring(0,d)+c+a.substr(d+b.length),d+=c.length-b.length+1);while(-1!==d);return a},t=function(a,b,c){a=q(a,'src="'+b+'"',
'src="'+c+'"');return a=q(a,'data-mce-src="'+b+'"','data-mce-src="'+c+'"')},r=function(a,b){g.each(d.undoManager.data,function(c){"fragmented"===c.type?c.fragments=g.map(c.fragments,function(c){return t(c,a,b)}):c.content=t(c.content,a,b)})},w=function(){return d.notificationManager.open({text:d.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},x=function(c){k||(k=new f(n,{url:p.images_upload_url,basePath:p.images_upload_base_path,credentials:p.images_upload_credentials,handler:p.images_upload_handler}));
return u().then(m(function(e){var f;f=g.map(e,function(a){return a.blobInfo});return k.upload(f,w).then(m(function(f){f=g.map(f,function(c,f){var k=e[f].image;if(c.status&&!1!==d.settings.images_replace_blob_uris){var h=c.url;a.removeByUri(k.src);r(k.src,h);d.$(k).attr({src:p.images_reuse_filename?h+("?"+(new Date).getTime()):h,"data-mce-src":d.convertURL(h,"src")})}else c.error&&b.uploadError(d,c.error);return{element:k,status:c.status}});c&&c(f);return f}))}))},v=function(a){if(!1!==p.automatic_uploads)return x(a)},
z=function(a){return p.images_dataimg_filter?p.images_dataimg_filter(a):!0},u=function(){l||(l=new h(n,a));return l.findAll(d.getBody(),z).then(m(function(a){a=g.filter(a,function(a){return"string"===typeof a?(b.displayError(d,a),!1):!0});g.each(a,function(a){r(a.image.src,a.blobInfo.blobUri());a.image.src=a.blobInfo.blobUri();a.image.removeAttribute("data-mce-src")});return a}))},y=function(b){return b.replace(/src="(blob:[^"]+)"/g,function(b,c){var e=n.getResultUri(c);if(e)return'src="'+e+'"';(e=
a.getByUri(c))||(e=g.reduce(d.editorManager.get(),function(a,b){return a||b.editorUpload&&b.editorUpload.blobCache.getByUri(c)},null));return e?'src="data:'+e.blob().type+";base64,"+e.base64()+'"':b})};d.on("setContent",function(){!1!==d.settings.automatic_uploads?v():u()});d.on("RawSaveContent",function(a){a.content=y(a.content)});d.on("getContent",function(a){a.source_view||"raw"==a.format||(a.content=y(a.content))});d.on("PostRender",function(){d.parser.addNodeFilter("img",function(b){g.each(b,
function(b){var c=b.attr("src");a.getByUri(c)||(c=n.getResultUri(c))&&b.attr("src",c)})})});return{blobCache:a,uploadImages:x,uploadImagesAuto:v,scanForImages:u,destroy:function(){a.destroy();n.destroy();l=k=null}}}});s("tinymce.core.ForceBlocks","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.Parents tinymce.core.focus.EditorFocus".split(" "),function(g,f,h,e,c,b,d){var a=function(a,c,d){return g.exists(b.parents(h.fromDom(d),
h.fromDom(c)),function(b){b=b.dom();return a.hasOwnProperty(b.nodeName)})},k=function(b){var f=b.settings,k=b.dom,h=b.selection,g=b.schema,t=g.getBlockElements(),r=h.getStart(),w=b.getBody(),x,v,z,u,y,B,A,f=f.forced_root_block;if(r&&c.isElement(r)&&f&&(x=w.nodeName.toLowerCase(),g.isValidChild(x,f.toLowerCase())&&!a(t,w,r))){g=h.getRng();x=g.startContainer;v=g.startOffset;z=g.endContainer;u=g.endOffset;A=d.hasFocus(b);for(r=w.firstChild;r;){var w=t,C=r,w=c.isText(C)?!0:c.isElement(C)?!w.hasOwnProperty(C.nodeName)&&
!e.isBookmarkNode(C):!1;w?c.isText(r)&&0===r.nodeValue.length?(w=r,r=r.nextSibling,k.remove(w)):(y||(y=k.create(f,b.settings.forced_root_block_attrs),r.parentNode.insertBefore(y,r),B=!0),w=r,r=r.nextSibling,y.appendChild(w)):(y=null,r=r.nextSibling)}B&&A&&(g.setStart(x,v),g.setEnd(z,u),h.setRng(g),b.nodeChanged())}};return{setup:function(a){if(a.settings.forced_root_block)a.on("NodeChange",f.curry(k,a))}}});s("tinymce.core.NodeChange",["tinymce.core.Env","tinymce.core.selection.RangeCompare","tinymce.core.util.Delay"],
function(g,f,h){return function(e){var c,b=[];if(!("onselectionchange"in e.getDoc()))e.on("NodeChange Click MouseUp KeyUp Focus",function(b){var a;a=e.selection.getRng();a={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!=b.type&&f.isEq(a,c)||e.fire("SelectionChange");c=a});e.on("contextmenu",function(){e.fire("SelectionChange")});e.on("SelectionChange",function(){var c=e.selection.getStart(!0);if(c&&(g.range||!e.selection.isCollapsed())){var a;
a:{var f;f=e.$(c).parentsUntil(e.getBody()).add(c);if(f.length===b.length){for(a=f.length;0<=a&&f[a]===b[a];a--);if(-1===a){b=f;a=!0;break a}}b=f;a=!1}!a&&e.dom.isChildOf(c,e.getBody())&&e.nodeChanged({selectionChange:!0})}});e.on("MouseUp",function(b){b.isDefaultPrevented()||("IMG"==e.selection.getNode().nodeName?h.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())});this.nodeChanged=function(b){var a=e.selection,c,f;e.initialized&&a&&!e.settings.disable_nodechange&&!e.readonly&&(f=
e.getBody(),a=a.getStart(!0)||f,a.ownerDocument==e.getDoc()&&e.dom.isChildOf(a,f)||(a=f),c=[],e.dom.getParent(a,function(a){if(a===f)return!0;c.push(a)}),b=b||{},b.element=a,b.parents=c,e.fire("NodeChange",b))}}});s("tinymce.core.dom.MousePosition",[],function(){var g=function(f){var h,e;e=f.getBoundingClientRect();h=f.ownerDocument;f=h.documentElement;h=h.defaultView;return{top:e.top+h.pageYOffset-f.clientTop,left:e.left+h.pageXOffset-f.clientLeft}};return{calc:function(f,h){var e,c,b=f.inline?g(f.getBody()):
{left:0,top:0},d;d=f.getBody();d=f.inline?{left:d.scrollLeft,top:d.scrollTop}:{left:0,top:0};if(h.target.ownerDocument!==f.getDoc()){c=g(f.getContentAreaContainer());var a;a=f.getBody();var k=f.getDoc().documentElement;e={left:a.scrollLeft,top:a.scrollTop};a={left:a.scrollLeft||k.scrollLeft,top:a.scrollTop||k.scrollTop};a=f.inline?e:a;e=h.pageX-c.left+a.left;c=h.pageY-c.top+a.top}else e=h.pageX,c=h.pageY;return{pageX:e-b.left+d.left,pageY:c-b.top+d.top}}}});s("tinymce.core.DragDropOverrides","global!document tinymce.core.dom.DOMUtils tinymce.core.dom.MousePosition tinymce.core.dom.NodeType tinymce.core.util.Arr tinymce.core.util.Delay tinymce.core.util.Fun".split(" "),
function(g,f,h,e,c,b,d){var a=e.isContentEditableFalse,k=e.isContentEditableTrue,l=function(b,c,d){return c===d||b.dom.isChildOf(c,d)||a(c)?!1:!0},p=function(a){a=a.cloneNode(!0);a.removeAttribute("data-mce-selected");return a},n=function(b,e){return function(f){if(0===f.button){var h=c.find(e.dom.getParents(f.target),d.or(a,k)),g=e.getBody();if(a(h)&&h!==g){var g=e.dom.getPos(h),l=e.getBody(),m=e.getDoc().documentElement;b.element=h;b.screenX=f.screenX;b.screenY=f.screenY;b.maxX=(e.inline?l.scrollWidth:
m.offsetWidth)-2;b.maxY=(e.inline?l.scrollHeight:m.offsetHeight)-2;b.relX=f.pageX-g.x;b.relY=f.pageY-g.y;b.width=h.offsetWidth;b.height=h.offsetHeight;f=b.width;g=b.height;h=h.cloneNode(!0);e.dom.setStyles(h,{width:f,height:g});e.dom.setAttrib(h,"data-mce-selected",null);l=e.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});e.dom.setStyles(l,{position:"absolute",opacity:0.5,overflow:"hidden",border:0,padding:0,margin:0,width:f,height:g});
e.dom.setStyles(h,{margin:0,boxSizing:"border-box"});l.appendChild(h);b.ghost=l}}}},m=function(a,c){var d=b.throttle(function(a,b){c._selectionOverrides.hideFakeCaret();c.selection.placeCaretAt(a,b)},0);return function(b){var e,f;e=Math.max(Math.abs(b.screenX-a.screenX),Math.abs(b.screenY-a.screenY));if(a.element&&!a.dragging&&10<e){if(c.fire("dragstart",{target:a.element}).isDefaultPrevented())return;a.dragging=!0;c.focus()}if(a.dragging){f=h.calc(c,b);e=f.pageX-a.relX;f=f.pageY+5;var k=a.ghost,
g=c.getBody();k.parentNode!==g&&g.appendChild(k);var k=a.ghost,g=a.width,l=a.height,m=a.maxX,p=a.maxY,n=0,q=0;k.style.left=e+"px";k.style.top=f+"px";e+g>m&&(n=e+g-m);f+l>p&&(q=f+l-p);k.style.width=g-n+"px";k.style.height=l-q+"px";d(b.clientX,b.clientY)}}},q=function(a){a=a.getSel().getRangeAt(0).startContainer;return 3===a.nodeType?a.parentNode:a},t=function(a,b){return function(c){if(a.dragging&&l(b,q(b.selection),a.element)){var d=p(a.element);c=b.fire("drop",{targetClone:d,clientX:c.clientX,clientY:c.clientY});
c.isDefaultPrevented()||(d=c.targetClone,b.undoManager.transact(function(){var c=a.element;c&&c.parentNode&&c.parentNode.removeChild(c);b.insertContent(b.dom.getOuterHTML(d));b._selectionOverrides.hideFakeCaret()}))}w(a)}},r=function(a,b){return function(){w(a);a.dragging&&b.fire("dragend")}},w=function(a){a.dragging=!1;a.element=null;(a=a.ghost)&&a.parentNode&&a.parentNode.removeChild(a)},x=function(a){var b={},c,d,e,k,h;c=f.DOM;d=n(b,a);e=m(b,a);k=t(b,a);h=r(b,a);a.on("mousedown",d);a.on("mousemove",
e);a.on("mouseup",k);c.bind(g,"mousemove",e);c.bind(g,"mouseup",h);a.on("remove",function(){c.unbind(g,"mousemove",e);c.unbind(g,"mouseup",h)})},v=function(b){b.on("drop",function(c){var d="undefined"!==typeof c.clientX?b.getDoc().elementFromPoint(c.clientX,c.clientY):null;(a(d)||a(b.dom.getContentEditableParent(d)))&&c.preventDefault()})};return{init:function(a){x(a);v(a)}}});s("tinymce.core.caret.FakeCaret","global!clearInterval tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerRemove tinymce.core.dom.DomQuery tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.util.Delay".split(" "),
function(g,f,h,e,c,b,d){var a=c.isContentEditableFalse;return function(c,l){var p,n=null,m,q=function(){var a,b,d,l,q;a=e("*[contentEditable=false]",c);for(l=0;l<a.length;l++)b=a[l],d=b.previousSibling,f.endsWithCaretContainer(d)&&(q=d.data,1==q.length?d.parentNode.removeChild(d):d.deleteData(q.length-1,1)),d=b.nextSibling,f.startsWithCaretContainer(d)&&(q=d.data,1==q.length?d.parentNode.removeChild(d):d.deleteData(0,1));m&&(h.remove(m),m=null);n&&(n.remove(),n=null);g(p)},t=function(){p=d.setInterval(function(){c.ownerDocument.activeElement===
c?e("div.mce-visual-caret",c).toggleClass("mce-visual-caret-hidden"):e("div.mce-visual-caret",c).addClass("mce-visual-caret-hidden")},500)};return{show:function(d,h){var g;q();if(h&&/^(TD|TH)$/i.test(h.nodeName))return null;if(l(h)){m=f.insertBlock("p",h,d);g=b.collapse(h.getBoundingClientRect(),d);var p,z;"BODY"==c.tagName?(p=c.ownerDocument.documentElement,z=c.scrollLeft||p.scrollLeft,p=c.scrollTop||p.scrollTop):(p=c.getBoundingClientRect(),z=c.scrollLeft-p.left,p=c.scrollTop-p.top);g.left+=z;g.right+=
z;g.top+=p;g.bottom+=p;g.width=1;z=h.offsetWidth-h.clientWidth;0<z&&(d&&(z*=-1),g.left+=z,g.right+=z);e(m).css("top",g.top);n=e('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(g).appendTo(c);d&&n.addClass("mce-visual-caret-before");t();g=h.ownerDocument.createRange();g.setStart(m,0);g.setEnd(m,0)}else m=f.insertInline(h,d),g=h.ownerDocument.createRange(),a(m.nextSibling)?(g.setStart(m,0),g.setEnd(m,0)):(g.setStart(m,1),g.setEnd(m,1));return g},hide:q,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},
destroy:function(){d.clearInterval(p)}}}});s("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(g,f,h){var e=function(c){var b=function(a){return g.map(a,function(a){a=h.clone(a);a.node=c;return a})};if(g.isArray(c))return g.reduce(c,function(a,b){return a.concat(e(b))},[]);if(f.isElement(c))return b(c.getClientRects());if(f.isText(c)){var d=c.ownerDocument.createRange();d.setStart(c,0);d.setEnd(c,c.data.length);return b(d.getClientRects())}};
return{getClientRects:e}});s("tinymce.core.caret.LineUtils","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.NodeType tinymce.core.dom.Dimensions tinymce.core.geom.ClientRect tinymce.core.caret.CaretUtils tinymce.core.caret.CaretCandidate".split(" "),function(g,f,h,e,c,b,d){var a=h.isContentEditableFalse,k=b.findNode,l=g.curry,p=function(b,c){return f.reduce(b,function(b,d){var e,f;e=Math.min(Math.abs(b.left-c),Math.abs(b.right-c));f=Math.min(Math.abs(d.left-c),Math.abs(d.right-c));return c>=
d.left&&c<=d.right?d:c>=b.left&&c<=b.right?b:f==e&&a(d.node)||f<e?d:b})},n=function(a,b,c,e){for(;(e=k(e,a,d.isEditableCaretCandidate,b))&&!c(e););},m=function(a,b){var d=[],k=function(a,c){var k;k=f.filter(e.getClientRects(c),function(c){return!a(c,b)});d=d.concat(k);return 0===k.length};d.push(b);n(-1,a,l(k,c.isAbove),b.node);n(1,a,l(k,c.isBelow),b.node);return d};return{findClosestClientRect:p,findLineNodeRects:m,closestCaret:function(b,c,d){var k;k=e.getClientRects(f.filter(f.toArray(b.getElementsByTagName("*")),
a));k=f.filter(k,function(a){return d>=a.top&&d<=a.bottom});return(k=p(k,c))&&(k=p(m(b,k),c))&&a(k.node)?{node:k.node,before:Math.abs(k.left-c)<Math.abs(k.right-c)}:null}}});s("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(g,f){return{isXYWithinRange:function(h,e,c){return c.collapsed?!1:g.foldl(c.getClientRects(),function(b,c){return b||f.containsXY(c,h,e)},!1)}}});s("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(g,
f){return{adaptable:function(h,e){var c=null,b=null;return{cancel:function(){null!==c&&(g(c),b=c=null)},throttle:function(){b=arguments;null===c&&(c=f(function(){h.apply(null,b);b=c=null},e))}}},first:function(h,e){var c=null;return{cancel:function(){null!==c&&(g(c),c=null)},throttle:function(){var b=arguments;null===c&&(c=f(function(){h.apply(null,b);b=c=null},e))}}},last:function(h,e){var c=null;return{cancel:function(){null!==c&&(g(c),c=null)},throttle:function(){var b=arguments;null!==c&&g(c);
c=f(function(){h.apply(null,b);b=c=null},e)}}}}});s("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(g,f,h,e){var c=h.isContentEditableTrue,b=h.isContentEditableFalse,d=function(a,b,c,d){return b._selectionOverrides.showCaret(a,c,d)},a=function(a,h){var p;h=f.normalizeRange(1,a.getBody(),h);p=g.fromRangeStart(h);if(b(p.getNode()))return d(1,a,p.getNode(),!p.isAtEnd());if(b(p.getNode(!0)))return d(1,
a,p.getNode(!0),!1);p=a.dom.getParent(p.getNode(),e.or(b,c));return b(p)?d(1,a,p,!1):null};return{showCaret:d,selectNode:function(a,b){if(a.fire("BeforeObjectSelected",{target:b}).isDefaultPrevented())return null;var c=b.ownerDocument.createRange();c.selectNode(b);return c},renderCaretAtRange:a,renderRangeCaret:function(b,c){var d;return c&&c.collapsed?(d=a(b,c))?d:c:c}}});s("tinymce.core.focus.CefFocus",["ephox.katamari.api.Throttler","tinymce.core.keyboard.CefUtils"],function(g,f){return{setup:function(h){var e=
g.first(function(){if(!h.removed){var c=f.renderRangeCaret(h,h.selection.getRng());h.selection.setRng(c)}},0);h.on("focus",function(){e.throttle()});h.on("blur",function(){e.cancel()})}}});s("tinymce.core.util.VK",["tinymce.core.Env"],function(g){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(f){return f.shiftKey||f.ctrlKey||f.altKey||this.metaKeyPressed(f)},metaKeyPressed:function(f){return g.mac?f.metaKey:f.ctrlKey&&!f.altKey}}});
s("tinymce.core.SelectionOverrides","ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind tinymce.core.DragDropOverrides tinymce.core.EditorView tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.FakeCaret tinymce.core.caret.LineUtils tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.focus.CefFocus tinymce.core.keyboard.CefUtils tinymce.core.util.VK".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t,r,w,x,v,z){var u=r.isContentEditableTrue,y=r.isContentEditableFalse,B=n.isAfterContentEditableFalse,A=n.isBeforeContentEditableFalse;return function(r){var D=r.getBody(),s=new q(r.getBody(),function(a){return r.dom.isBlock(a)}),G="sel-"+r.dom.uniqueId(),E,H=function(a,b,c){if(r.fire("ShowCaret",{target:b,direction:a,before:c}).isDefaultPrevented())return null;r.selection.scrollIntoView(b,-1===a);return s.show(c,b)},F=function(a,b){b=n.normalizeRange(a,D,b);return-1==
a?p.fromRangeStart(b):p.fromRangeEnd(b)},L=function(){var a=r.contentStyles;a.push(s.getCss());a.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")},K=function(a){return l.isCaretContainer(a)||l.startsWithCaretContainer(a)||l.endsWithCaretContainer(a)},O=function(a,d){var f,l=r.$,m=r.dom,u,A,p;if(!a)return null;if(a.collapsed){if(!K(a.startContainer)&&
!K(a.endContainer))if(!1===d){f=F(-1,a);if(y(f.getNode(!0)))return H(-1,f.getNode(!0),!1);if(y(f.getNode()))return H(-1,f.getNode(),!f.isAtEnd())}else{f=F(1,a);if(y(f.getNode()))return H(1,f.getNode(),!f.isAtEnd());if(y(f.getNode(!0)))return H(1,f.getNode(!0),!1)}return null}u=a.startContainer;A=a.startOffset;p=a.endOffset;3===u.nodeType&&0===A&&y(u.parentNode)&&(u=u.parentNode,A=m.nodeIndex(u),u=u.parentNode);if(1!=u.nodeType)return null;p==A+1&&(f=u.childNodes[A]);if(!y(f))return null;p=A=f.cloneNode(!0);
p=r.fire("ObjectSelected",{target:f,targetClone:p});if(p.isDefaultPrevented())return null;u=b.descendant(h.fromDom(r.getBody()),"#"+G).fold(function(){return l([])},function(a){return l([a.dom()])});p=p.targetClone;0===u.length&&(u=l('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",G),u.appendTo(r.getBody()));a=r.dom.createRng();p===A&&k.ie?(u.empty().append('<p style="font-size: 0" data-mce-bogus="all">\u00a0</p>').append(p),a.setStartAfter(u[0].firstChild.firstChild),
a.setEndAfter(p)):(u.empty().append("\u00a0").append(p).append("\u00a0"),a.setStart(u[0].firstChild,1),a.setEnd(u[0].lastChild,0));u.css({top:m.getPos(f,r.getBody()).y});u[0].focus();m=r.selection.getSel();m.removeAllRanges();m.addRange(a);g.each(c.descendants(h.fromDom(r.getBody()),"*[data-mce-selected]"),function(a){e.remove(a,"data-mce-selected")});f.setAttribute("data-mce-selected",1);E=f;M();return a},I=function(){E&&(E.removeAttribute("data-mce-selected"),b.descendant(h.fromDom(r.getBody()),
"#"+G).each(f.remove),E=null)},M=function(){s.hide()};k.ceFalse&&(function(){var b=function(a){for(var b=r.getBody();a&&a!=b;){if(u(a)||y(a))return a;a=a.parentNode}return null};r.on("mouseup",function(b){var c=r.selection.getRng();c.collapsed&&a.isXYInContentArea(r,b.clientX,b.clientY)&&(b=v.renderCaretAtRange(r,c))&&r.selection.setRng(b)});r.on("click",function(a){var c;if(c=b(a.target))y(c)&&(a.preventDefault(),r.focus()),u(c)&&r.dom.isChildOf(c,r.selection.getNode())&&I()});r.on("blur NewBlock",
function(){I()});(function(a){var c=!1;a.on("touchstart",function(){c=!1});a.on("touchmove",function(){c=!0});a.on("touchend",function(d){var e=b(d.target);y(e)&&!c&&(d.preventDefault(),O(v.selectNode(a,e)))})})(r);r.on("mousedown",function(c){var d;if(!1!==a.isXYInContentArea(r,c.clientX,c.clientY))if(d=b(c.target))y(d)?(c.preventDefault(),O(v.selectNode(r,d))):(I(),u(d)&&c.shiftKey||w.isXYWithinRange(c.clientX,c.clientY,r.selection.getRng())||r.selection.placeCaretAt(c.clientX,c.clientY));else if(I(),
M(),d=t.closestCaret(D,c.clientX,c.clientY)){var e=d.node,f=r.dom.getParent(c.target,r.dom.isBlock),e=r.dom.getParent(e,r.dom.isBlock),k;(k=!f)||(k=r.dom.getParent(f,r.dom.isBlock),e=r.dom.getParent(e,r.dom.isBlock),(e=k===e)||(e=new m(f),f.firstChild?(f=p.before(f.firstChild),f=(f=e.next(f))&&!A(f)&&!B(f)):f=!1,e=!f),k=e);k&&(c.preventDefault(),r.getBody().focus(),(c=H(1,d.node,d.before))&&r.selection.setRng(c))}});r.on("keypress",function(a){if(!z.modifierPressed(a))switch(a.keyCode){default:y(r.selection.getNode())&&
a.preventDefault()}});r.on("getSelectionRange",function(a){var b=a.range;E&&(E.parentNode?(b=b.cloneRange(),b.selectNode(E),a.range=b):E=null)});r.on("setSelectionRange",function(a){var b;if(b=O(a.range,a.forward))a.range=b});r.on("AfterSetSelectionRange",function(a){a=a.range;K(a.startContainer)||K(a.endContainer)||M();r.dom.hasClass(a.startContainer.parentNode,"mce-offscreen-selection")||I()});r.on("copy",function(a){var b=a.clipboardData;if(!a.isDefaultPrevented()&&a.clipboardData&&!k.ie){var c;
if(c=(c=r.dom.get(G))?c.getElementsByTagName("*")[0]:c)a.preventDefault(),b.clearData(),b.setData("text/html",c.outerHTML),b.setData("text/plain",c.outerText)}});d.init(r);x.setup(r)}(),L());return{showCaret:H,showBlockCaretContainer:function(a){if(a.hasAttribute("data-mce-caret")){l.showCaretContainerBlock(a);var b=r.selection.getRng();b&&r.selection.setRng(b);r.selection.scrollIntoView(a[0],void 0)}},hideFakeCaret:M,destroy:function(){s.destroy();E=null}}}});s("tinymce.core.undo.Diff",[],function(){return{KEEP:0,
DELETE:2,INSERT:1,diff:function(g,f){var h=g.length+f.length+2,e=Array(h),c=Array(h),b=function(a,k,h,p,n){var m;a:{var q=k-a,t=p-h;if(0===q||0===t)m=null;else{m=q-t;q=t+q;q=(0===q%2?q:q+1)/2;e[1+q]=a;c[1+q]=k+1;for(t=0;t<=q;++t){for(var r=-t;r<=t;r+=2){var w=r+q;e[w]=r===-t||r!=t&&e[w-1]<e[w+1]?e[w+1]:e[w-1]+1;for(var x=e[w],v=x-a+h-r;x<k&&v<p&&g[x]===f[v];)e[w]=++x,++v;if(0!=m%2&&m-t<=r&&r<=m+t&&c[w-m]<=e[w]){m=d(c[w-m],r+a-h,k,p);break a}}for(r=m-t;r<=m+t;r+=2){w=r+q-m;c[w]=r===m-t||r!=m+t&&c[w+
1]<=c[w-1]?c[w+1]-1:c[w-1];x=c[w]-1;for(v=x-a+h-r;x>=a&&v>=h&&g[x]===f[v];)c[w]=x--,v--;if(0===m%2&&-t<=r&&r<=t&&c[w]<=e[w+m]){m=d(c[w],r+a-h,k,p);break a}}}m=void 0}}if(null===m||m.start===k&&m.diag===k-p||m.end===a&&m.diag===a-h)for(m=a,q=h;m<k||q<p;)m<k&&q<p&&g[m]===f[q]?(n.push([0,g[m]]),++m,++q):k-a>p-h?(n.push([2,g[m]]),++m):(n.push([1,f[q]]),++q);else{b(a,m.start,h,m.start-m.diag,n);for(a=m.start;a<m.end;++a)n.push([0,g[a]]);b(m.end,k,m.end-m.diag,p,n)}},d=function(a,b,c,d){for(var e=a;e-b<
d&&e<c&&g[e]===f[e-b];)++e;return{start:a,end:e,diag:b}},h=[];b(0,g.length,0,f.length,h);return h}}});s("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(g,f,h,e){var c=function(b){return 1===b.nodeType?b.outerHTML:3===b.nodeType?f.encodeRaw(b.data,!1):8===b.nodeType?"\x3c!--"+b.data+"--\x3e":""},b=function(b,a){var c=0;e.each(b,function(b){if(b[0]===h.KEEP)c++;else if(b[0]===h.INSERT){var d=c,e=b[1],f;f=g.createElement("div");
b=g.createDocumentFragment();e&&(f.innerHTML=e);for(;e=f.firstChild;)b.appendChild(e);a.hasChildNodes()&&d<a.childNodes.length?(d=a.childNodes[d],d.parentNode.insertBefore(b,d)):a.appendChild(b);c++}else b[0]===h.DELETE&&(d=c,a.hasChildNodes()&&d<a.childNodes.length&&(d=a.childNodes[d],d.parentNode.removeChild(d)))})};return{read:function(b){return e.filter(e.map(b.childNodes,c),function(a){return 0<a.length})},write:function(d,a){var f=e.map(a.childNodes,c);b(h.diff(f,d),a);return a}}});s("tinymce.core.undo.Levels",
["ephox.katamari.api.Arr","tinymce.core.dom.TrimHtml","tinymce.core.undo.Fragments"],function(g,f,h){var e=function(b){return{type:"fragmented",fragments:b,content:"",bookmark:null,beforeBookmark:null}},c=function(b){return{type:"complete",fragments:null,content:b,bookmark:null,beforeBookmark:null}},b=function(b){return"fragmented"===b.type?b.fragments.join(""):b.content};return{createFragmentedLevel:e,createCompleteLevel:c,createFromEditor:function(b){var a,k;a=h.read(b.getBody());k=g.bind(a,function(a){a=
f.trimInternal(b.serializer,a);return 0<a.length?[a]:[]});a=k.join("");return-1!==a.indexOf("</iframe>")?e(k):c(a)},applyToEditor:function(b,a,c){"fragmented"===a.type?h.write(a.fragments,b.getBody()):b.setContent(a.content,{format:"raw"});b.selection.moveToBookmark(c?a.beforeBookmark:a.bookmark)},isEq:function(c,a){return!!c&&!!a&&b(c)===b(a)}}});s("tinymce.core.UndoManager",["tinymce.core.dom.GetBookmark","tinymce.core.undo.Levels","tinymce.core.util.Tools"],function(g,f,h){return function(e){var c=
this,b=0,d=[],a,k,l=0,p=function(a){0===l&&(c.typing=a)},n=function(a){p(!1);c.add({},a)},m=function(){c.typing&&(p(!1),c.add())};e.on("init",function(){c.add()});e.on("BeforeExecCommand",function(a){a=a.command;"Undo"!==a&&"Redo"!==a&&"mceRepaint"!==a&&(m(),c.beforeChange())});e.on("ExecCommand",function(a){var b=a.command;"Undo"!==b&&"Redo"!==b&&"mceRepaint"!==b&&n(a)});e.on("ObjectResizeStart Cut",function(){c.beforeChange()});e.on("SaveContent ObjectResized blur",n);e.on("DragEnd",n);e.on("KeyUp",
function(a){var b=a.keyCode;if(!a.isDefaultPrevented()){if(33<=b&&36>=b||37<=b&&40>=b||45===b||a.ctrlKey)n(),e.nodeChanged();46!==b&&8!==b||e.nodeChanged();k&&c.typing&&!1===f.isEq(f.createFromEditor(e),d[0])&&(!1===e.isDirty()&&(e.setDirty(!0),e.fire("change",{level:d[0],lastLevel:null})),e.fire("TypingUndo"),k=!1,e.nodeChanged())}});e.on("KeyDown",function(a){var b=a.keyCode;if(!a.isDefaultPrevented())if(33<=b&&36>=b||37<=b&&40>=b||45===b)c.typing&&n(a);else{var d=a.ctrlKey&&!a.altKey||a.metaKey;
!(16>b||20<b)||224===b||91===b||c.typing||d||(c.beforeChange(),p(!0),c.add({},a),k=!0)}});e.on("MouseDown",function(a){c.typing&&n(a)});e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo");e.on("AddUndo Undo Redo ClearUndos",function(a){a.isDefaultPrevented()||e.nodeChanged()});return c={data:d,typing:!1,beforeChange:function(){0===l&&(a=g.getUndoBookmark(e.selection))},add:function(c,k){var m;m=e.settings;var p;p=f.createFromEditor(e);c=c||{};c=h.extend(c,p);if(!1===(0===
l)||e.removed)return null;p=d[b];if(e.fire("BeforeAddUndo",{level:c,lastLevel:p,originalEvent:k}).isDefaultPrevented()||p&&f.isEq(p,c))return null;d[b]&&(d[b].beforeBookmark=a);if(m.custom_undo_redo_levels&&d.length>m.custom_undo_redo_levels){for(m=0;m<d.length-1;m++)d[m]=d[m+1];d.length--;b=d.length}c.bookmark=g.getUndoBookmark(e.selection);b<d.length-1&&(d.length=b+1);d.push(c);b=d.length-1;m={level:c,lastLevel:p,originalEvent:k};e.fire("AddUndo",m);0<b&&(e.setDirty(!0),e.fire("change",m));return c},
undo:function(){var a;c.typing&&(c.add(),c.typing=!1,p(!1));0<b&&(a=d[--b],f.applyToEditor(e,a,!0),e.setDirty(!0),e.fire("undo",{level:a}));return a},redo:function(){var a;b<d.length-1&&(a=d[++b],f.applyToEditor(e,a,!1),e.setDirty(!0),e.fire("redo",{level:a}));return a},clear:function(){d=[];b=0;c.typing=!1;c.data=d;e.fire("ClearUndos")},hasUndo:function(){return 0<b||c.typing&&d[0]&&!f.isEq(f.createFromEditor(e),d[0])},hasRedo:function(){return b<d.length-1&&!c.typing},transact:function(a){m();c.beforeChange();
c.ignore(a);return c.add()},ignore:function(a){try{l++,a()}finally{l--}},extra:function(a,k){var h,g;c.transact(a)&&(g=d[b].bookmark,h=d[b-1],f.applyToEditor(e,h,!0),c.transact(k)&&(d[b-1].beforeBookmark=g))}}}});s("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(g,f,h){var e={},c=g.filter,b=g.each;(function(b,a){e[b]||(e[b]=[]);e[b].push(a)})("pre",function(d){var a=d.selection.getRng(),e,l,p=function(a){return e(a.previousSibling)&&
-1!==g.indexOf(l,a.previousSibling)};e=f.matchNodeNames("pre");a.collapsed||(l=d.selection.getSelectedBlocks(),b(c(c(l,e),p),function(a){var b=a.previousSibling;h(a).remove();h(b).append("<br><br>").append(a.childNodes)}))});return{postProcess:function(c,a){b(e[c],function(b){b(a)})}}});s("tinymce.core.selection.RangeWalk",["tinymce.core.util.Tools"],function(g){var f=g.each,h=function(e,c){var b=e.childNodes;c--;c>b.length-1?c=b.length-1:0>c&&(c=0);return b[c]||e};return{walk:function(e,c,b){var d=
c.startContainer,a=c.startOffset,k=c.endContainer,g=c.endOffset,p,n,m,q,t;c=e.select("td[data-mce-selected],th[data-mce-selected]");if(0<c.length)f(c,function(a){b([a])});else{var r=function(b){var c;c=b[0];3===c.nodeType&&c===d&&a>=c.nodeValue.length&&b.splice(0,1);c=b[b.length-1];0===g&&0<b.length&&c===k&&3===c.nodeType&&b.splice(b.length-1,1);return b},w=function(a,b,c){for(var d=[];a&&a!=c;a=a[b])d.push(a);return d};n=function(a,b){do{if(a.parentNode===b)return a;a=a.parentNode}while(a)};c=function(a,
c,d){var e=d?"nextSibling":"previousSibling";m=a;for(q=m.parentNode;m&&m!=c;m=q)q=m.parentNode,t=w(m===a?m:m[e],e),t.length&&(d||t.reverse(),b(r(t)))};1===d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[a]);1===k.nodeType&&k.hasChildNodes()&&(k=h(k,g));if(d===k)return b(r([d]));p=e.findCommonAncestor(d,k);for(m=d;m;m=m.parentNode){if(m===k)return c(d,p,!0);if(m===p)break}for(m=k;m;m=m.parentNode){if(m===d)return c(k,p);if(m===p)break}e=n(d,p)||d;n=n(k,p)||k;c(d,e,!0);t=w(e===d?e:e.nextSibling,"nextSibling",
n===k?n.nextSibling:n);t.length&&b(r(t));c(k,n)}}}});s("tinymce.core.fmt.RemoveFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d,a,k){var l=/^(src|href|style)$/,p=k.each,n=b.isEq,m=function(a,b,c){var d,e;d=b[c?"startContainer":"endContainer"];b=b[c?"startOffset":
"endOffset"];f.isElement(d)&&(e=d.childNodes.length-1,!c&&b&&b--,d=d.childNodes[b>e?e:b]);f.isText(d)&&c&&b>=d.nodeValue.length&&(d=(new h(d,a.getBody())).next()||d);f.isText(d)&&!c&&0===b&&(d=(new h(d,a.getBody())).prev()||d);return d},q=function(a,b,c,d){a=a.create(c,d);b.parentNode.insertBefore(a,b);a.appendChild(b);return a},t=function(a,b,c){if(n(b,c.inline)||n(b,c.block))return!0;if(c.selector)return f.isElement(b)&&a.is(b,c.selector)},r=function(a,c,d,e){c=b.getNonWhiteSpaceSibling(c,d,e);
return!c||"BR"===c.nodeName||a.isBlock(c)},w=function(a,c,d){var e=c.parentNode,f,h=a.dom,g=a.settings.forced_root_block;d.block&&(g?e===h.getRoot()&&(d.list_block&&n(c,d.list_block)||p(k.grep(c.childNodes),function(c){b.isValid(a,g,c.nodeName.toLowerCase())?f?f.appendChild(c):(f=q(h,c,g),h.setAttribs(f,a.settings.forced_root_block_attrs)):f=0})):h.isBlock(c)&&!h.isBlock(e)&&(r(h,c,!1)||r(h,c.firstChild,!0,1)||c.insertBefore(h.create("br"),c.firstChild),r(h,c,!0)||r(h,c.lastChild,!1,1)||c.appendChild(h.create("br"))));
d.selector&&d.inline&&!n(d.inline,c)||h.remove(c,1)},x=function(a,c,d,e,f){var k,h,g,m=a.dom;if(!(t(m,e,c)||c.links&&"A"===e.tagName))return!1;if("all"!==c.remove)for(p(c.styles,function(a,k){a=b.normalizeStyleValue(m,b.replaceVars(a,d),k);"number"===typeof k&&(k=a,f=0);(c.remove_similar||!f||n(b.getStyle(m,f,k),a))&&m.setStyle(e,k,"");g=1}),g&&""===m.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style")),p(c.attributes,function(a,c){var k;a=b.replaceVars(a,d);"number"===
typeof c&&(c=a,f=0);if(!f||n(m.getAttrib(f,c),a)){if("class"===c&&(a=m.getAttrib(e,c))&&(k="",p(a.split(/\s+/),function(a){/mce\-\w+/.test(a)&&(k+=(k?" ":"")+a)}),k)){m.setAttrib(e,c,k);return}"class"===c&&e.removeAttribute("className");l.test(c)&&e.removeAttribute("data-mce-"+c);e.removeAttribute(c)}}),p(c.classes,function(a){a=b.replaceVars(a,d);f&&!m.hasClass(f,a)||m.removeClass(e,a)}),h=m.getAttribs(e),k=0;k<h.length;k++){var r=h[k].nodeName;if(0!==r.indexOf("_")&&0!==r.indexOf("data-"))return!1}if("none"!==
c.remove)return w(a,e,c),!0},v=function(a,c,e,f,k){var h;p(b.getParents(a.dom,c.parentNode).reverse(),function(b){var c;h||"_start"===b.id||"_end"===b.id||(c=d.matchNode(a,b,e,f,k))&&!1!==c.split&&(h=b)});return h};return{removeFormat:x,remove:function(h,l,y,n,A){var r=h.formatter.get(l),t=r[0],w,G=!0,s=h.dom;w=h.selection;var H=function(a){var b=v(h,a,l,y,A),c=a,d,e,f,k,g,m,p=h.dom;if(b){m=b.parentNode;for(d=c.parentNode;d&&d!==m;d=d.parentNode){e=p.clone(d,!1);for(g=0;g<r.length;g++)if(x(h,r[g],
y,e,e)){e=0;break}e&&(f&&e.appendChild(f),k||(k=e),f=e)}t.mixed&&p.isBlock(b)||(c=p.split(b,c));f&&(a.parentNode.insertBefore(f,a),k.appendChild(a))}return c},F=function(a){var b,c,d,e,g;f.isElement(a)&&s.getContentEditable(a)&&(e=G,G="true"===s.getContentEditable(a),g=!0);b=k.grep(a.childNodes);if(G&&!g)for(c=0,d=r.length;c<d&&!x(h,r[c],y,a,a);c++);if(t.deep&&b.length){c=0;for(d=b.length;c<d;c++)F(b[c]);g&&(G=e)}},L=function(a){var b=s.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];g.isBookmarkNode(c)&&
(c=c[a?"firstChild":"lastChild"]);f.isText(c)&&0===c.data.length&&(c=a?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling);s.remove(b,!0);return c},K=function(d){var e,k,g=d.commonAncestorContainer;d=c.expandRng(h,d,r,!0);if(t.split){e=m(h,d,!0);k=m(h,d);if(e!==k){/^(TR|TH|TD)$/.test(e.nodeName)&&e.firstChild&&(e="TR"===e.nodeName?e.firstChild.firstChild||e:e.firstChild||e);g&&/^T(HEAD|BODY|FOOT|R)$/.test(g.nodeName)&&/^(TH|TD)$/.test(k.nodeName)&&k.firstChild&&(k=k.firstChild||k);
if(s.isChildOf(e,k)&&e!==k&&!s.isBlock(k)&&!/^(TH|TD)$/.test(e.nodeName)&&!/^(TH|TD)$/.test(k.nodeName)){e=q(s,e,"span",{id:"_start","data-mce-type":"bookmark"});H(e);e=L(!0);return}e=q(s,e,"span",{id:"_start","data-mce-type":"bookmark"});k=q(s,k,"span",{id:"_end","data-mce-type":"bookmark"});H(e);H(k);e=L(!0);k=L()}else e=k=H(e);d.startContainer=e.parentNode?e.parentNode:e;d.startOffset=s.nodeIndex(e);d.endContainer=k.parentNode?k.parentNode:k;d.endOffset=s.nodeIndex(k)+1}a.walk(s,d,function(a){p(a,
function(a){F(a);f.isElement(a)&&"underline"===h.dom.getStyle(a,"text-decoration")&&a.parentNode&&"underline"===b.getTextDecoration(s,a.parentNode)&&x(h,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})};if(n)n.nodeType?(w=s.createRng(),w.setStartBefore(n),w.setEndAfter(n),K(w)):K(n);else if("false"===s.getContentEditable(w.getNode()))for(n=w.getNode(),K=0,w=r.length;K<w&&(!r[K].ceFalseOverride||!x(h,r[K],y,n,n));K++);else w.isCollapsed()&&t.inline&&!s.select("td[data-mce-selected],th[data-mce-selected]").length?
e.removeCaretFormat(h,l,y,A):(n=w.getBookmark(),K(w.getRng(!0)),w.moveToBookmark(n),t.inline&&d.match(h,l,y,w.getStart())&&b.moveStart(s,w,w.getRng(!0)),h.nodeChanged())}}});s("tinymce.core.fmt.MergeFormats","ephox.katamari.api.Fun tinymce.core.dom.Bookmarks tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.fmt.RemoveFormat tinymce.core.util.Tools".split(" "),function(g,f,h,e,c,b,d,a,k){var l=
k.each,p=function(a){return a&&1===a.nodeType&&!f.isBookmarkNode(a)&&!c.isCaretNode(a)&&!e.isBogus(a)},n=function(a,b){var c;for(c=a;c&&(3!==c.nodeType||0===c.nodeValue.length);c=c[b])if(1===c.nodeType&&!f.isBookmarkNode(c))return c;return a},m=function(a,b,c){var d,e;d=new h(a);if(b&&c&&(b=n(b,"previousSibling"),c=n(c,"nextSibling"),d.compare(b,c))){for(d=b.nextSibling;d&&d!==c;)e=d,d=d.nextSibling,b.appendChild(e);a.remove(c);k.each(k.grep(c.childNodes),function(a){b.appendChild(a)});return b}return c},
q=function(a,b,c){l(a.childNodes,function(a){p(a)&&(b(a)&&c(a),a.hasChildNodes()&&q(a,b,c))})},t=function(a,c){return g.curry(function(c,d){return!(!d||!b.getStyle(a,d,c))},c)},r=function(a,b,c){return g.curry(function(b,c,d){a.setStyle(d,b,c);""===d.getAttribute("style")&&d.removeAttribute("style");"SPAN"===d.nodeName&&0===a.getAttribs(d).length&&a.remove(d,!0)},b,c)},w=function(a,c){var d;1===c.nodeType&&c.parentNode&&1===c.parentNode.nodeType&&(d=b.getTextDecoration(a,c.parentNode),a.getStyle(c,
"color")&&d?a.setStyle(c,"text-decoration",d):a.getStyle(c,"text-decoration")===d&&a.setStyle(c,"text-decoration",null))},x=function(a,b,c){b.clear_child_styles&&l(a.select(b.links?"*:not(a)":"*",c),function(c){p(c)&&l(b.styles,function(b,d){a.setStyle(c,d,"")})})};return{mergeWithChildren:function(b,c,d,e){l(c,function(c){l(b.dom.select(c.inline,e),function(e){p(e)&&a.removeFormat(b,c,d,e,c.exact?e:null)});x(b.dom,c,e)})},mergeUnderlineAndColor:function(a,b,c,d){if(b.styles.color||b.styles.textDecoration)k.walk(d,
g.curry(w,a),"childNodes"),w(a,d)},mergeBackgroundColorAndFontSize:function(a,c,d,e){c.styles&&c.styles.backgroundColor&&q(e,t(a,"fontSize"),r(a,"backgroundColor",b.replaceVars(c.styles.backgroundColor,d)))},mergeSubSup:function(a,b,c,d){if("sub"===b.inline||"sup"===b.inline)q(d,t(a,"fontSize"),r(a,"fontSize","")),a.remove(a.select("sup"===b.inline?"sub":"sup",d),!0)},mergeSiblings:function(a,c,d,e){e&&!1!==c.merge_siblings&&(e=m(a,b.getNonWhiteSpaceSibling(e),e),m(a,e,b.getNonWhiteSpaceSibling(e,
!0)))},mergeWithParents:function(b,c,e,f,k){d.matchNode(b,k.parentNode,e,f)&&a.removeFormat(b,c,f,k)||c.merge_with_parents&&b.dom.getParent(k.parentNode,function(h){if(d.matchNode(b,h,e,f))return a.removeFormat(b,c,f,k),!0})}}});s("tinymce.core.fmt.ApplyFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.Hooks tinymce.core.fmt.MatchFormat tinymce.core.fmt.MergeFormats tinymce.core.selection.RangeNormalizer tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p){var n=p.each,m=function(q,t,r,w){var x=q.formatter.get(t),v=x[0],z,u=!w&&q.selection.isCollapsed(),y=q.dom,B=q.selection,A=function(a,b){b=b||v;if(a){if(b.onformat)b.onformat(a,b,r,w);n(b.styles,function(b,d){y.setStyle(a,d,c.replaceVars(b,r))});if(b.styles){var d=y.getAttrib(a,"style");d&&a.setAttribute("data-mce-style",d)}n(b.attributes,function(b,d){y.setAttrib(a,d,c.replaceVars(b,r))});n(b.classes,function(b){b=c.replaceVars(b,r);y.hasClass(a,b)||y.addClass(a,b)})}},
C=function(a,b){var c=!1;if(!v.selector)return!1;n(a,function(a){if(!("collapsed"in a&&a.collapsed!==u)&&y.is(b,a.selector)&&!h.isCaretNode(b))return A(b,a),c=!0,!1});return c},s=function(b,e,k,m){var u=[],y,B,w=!0;y=v.inline||v.block;B=b.create(y);A(B);l.walk(b,e,function(a){var e,f=function(a){var k,g,l,z;z=w;k=a.nodeName.toLowerCase();g=a.parentNode.nodeName.toLowerCase();1===a.nodeType&&b.getContentEditable(a)&&(z=w,w="true"===b.getContentEditable(a),l=!0);if(c.isEq(k,"br"))e=0,v.block&&b.remove(a);
else if(v.wrapper&&d.matchNode(q,a,t,r))e=0;else if(w&&!l&&v.block&&!v.wrapper&&c.isTextBlock(q,k)&&c.isValid(q,g,y))a=b.rename(a,y),A(a),u.push(a),e=0;else{if(v.selector){var s=C(x,a);if(!v.inline||s){e=0;return}}!w||l||!c.isValid(q,y,k)||!c.isValid(q,g,y)||!m&&3===a.nodeType&&1===a.nodeValue.length&&65279===a.nodeValue.charCodeAt(0)||h.isCaretNode(a)||v.inline&&b.isBlock(a)?(e=0,n(p.grep(a.childNodes),f),l&&(w=z),e=0):(e||(e=b.clone(B,!1),a.parentNode.insertBefore(e,a),u.push(e)),e.appendChild(a))}};
n(a,f)});!0===v.links&&n(u,function(a){var b=function(a){"A"===a.nodeName&&A(a,v);n(p.grep(a.childNodes),b)};b(a)});n(u,function(e){var k,l=function(a){var b=!1;n(a.childNodes,function(a){if(a&&1===a.nodeType&&!g.isBookmarkNode(a)&&!h.isCaretNode(a)&&!f.isBogus(a))return b=a,!1});return b},m=function(a){var c,e;(c=l(a))&&!g.isBookmarkNode(c)&&d.matchName(b,c,v)&&(e=b.clone(c,!1),A(e),b.replace(e,a,!0),b.remove(c,1));return e||a};k=function(a){var b=0;n(a.childNodes,function(a){c.isWhiteSpaceNode(a)||
g.isBookmarkNode(a)||b++});return b}(e);if((1<u.length||!b.isBlock(e))&&0===k)b.remove(e,1);else if(v.inline||v.wrapper)v.exact||1!==k||(e=m(e)),a.mergeWithChildren(q,x,r,e),a.mergeWithParents(q,v,t,r,e),a.mergeBackgroundColorAndFontSize(b,v,r,e),a.mergeSubSup(b,v,r,e),a.mergeSiblings(b,v,r,e)})};if("false"===y.getContentEditable(B.getNode()))for(w=B.getNode(),s=0,z=x.length;s<z;s++){if(x[s].ceFalseOverride&&y.is(w,x[s].selector)){A(w,x[s]);break}}else if(v){if(w)w.nodeType?C(x,w)||(z=y.createRng(),
z.setStartBefore(w),z.setEndAfter(w),s(y,e.expandRng(q,z,x),null,!0)):s(y,w,null,!0);else if(u&&v.inline&&!y.select("td[data-mce-selected],th[data-mce-selected]").length)h.applyCaretFormat(q,t,r);else{var J=q.selection.getNode();q.settings.forced_root_block||!x[0].defaultBlock||y.getParent(J,y.isBlock)||m(q,x[0].defaultBlock);q.selection.setRng(k.normalize(q.selection.getRng()));z=B.getBookmark();s(y,e.expandRng(q,B.getRng(!0),x),z);v.styles&&a.mergeUnderlineAndColor(y,v,r,J);B.moveToBookmark(z);
c.moveStart(y,B,B.getRng(!0));q.nodeChanged()}b.postProcess(t,q)}};return{applyFormat:m}});s("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(g,f,h,e){var c=e.each,b=function(a,b){var d={};a.set({});b.on("NodeChange",function(g){var n=f.getParents(b.dom,g.element),m={},n=e.grep(n,function(a){return 1===a.nodeType&&!a.getAttribute("data-mce-bogus")});c(a.get(),function(a,e){c(n,function(f){if(b.formatter.matchNode(f,
e,{},a.similar))return d[e]||(c(a,function(a){a(!0,{node:f,format:e,parents:n})}),d[e]=a),m[e]=a,!1;if(h.matchesUnInheritedFormatSelector(b,f,e))return!1})});c(d,function(a,b){m[b]||(delete d[b],c(a,function(a){a(!1,{node:g.element,format:b,parents:n})}))})})},d=function(a,b,d,e){var f=a.get();c(b.split(","),function(a){f[a]||(f[a]=[],f[a].similar=e);f[a].push(d)});a.set(f)};return{formatChanged:function(a,c,e,f,h){null===c.get()&&b(c,a);d(c,e,f,h)}}});s("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],
function(g){return{get:function(f){var h={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",
collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",
marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},
inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",
styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},
code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,c,b){g.each(b,function(b,a){f.setAttrib(e,a,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};
g.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){h[e]={block:e,remove:"all"}});return h}}});s("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(g,f){return function(h){var e={},c=function(b,d){b&&("string"!==typeof b?f.each(b,function(a,b){c(b,a)}):(d=d.length?d:[d],f.each(d,function(a){"undefined"===typeof a.deep&&(a.deep=!a.selector);"undefined"===typeof a.split&&(a.split=!a.selector||a.inline);"undefined"===
typeof a.remove&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),e[b]=d))};c(g.get(h.dom));c(h.settings.formats);return{get:function(b){return b?e[b]:e},register:c,unregister:function(b){b&&e[b]&&delete e[b];return e}}}});s("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(g,f,h){var e=f.each,c=g.DOM,b=function(a,b){var d,
e,g,q=b&&b.schema||new h({}),t=function(a){e="string"===typeof a?{name:a,classes:[],attrs:{}}:a;a=c.create(e.name);var b=e;b.classes.length&&c.addClass(a,b.classes.join(" "));c.setAttribs(a,b.attrs);return a},r=function(a,b){var c="string"!==typeof a?a.nodeName.toLowerCase():a;return(c=(c=q.getElementRule(c))&&c.parentsRequired)&&c.length?b&&-1!==f.inArray(c,b)?b:c[0]:!1},w=function(a,b,d){var e,k,h,g=0<b.length&&b[0],l=g&&g.name;if(h=r(a,l))l===h?(k=b[0],b=b.slice(1)):k=h;else if(g)k=b[0],b=b.slice(1);
else if(!d)return a;k&&(e=t(k),e.appendChild(a));d&&(e||(e=c.create("div"),e.appendChild(a)),f.each(d,function(b){b=t(b);e.insertBefore(b,a)}));return w(e,b,k&&k.siblings)};return a&&a.length?(e=a[0],d=t(e),g=c.create("div"),g.appendChild(w(d,a.slice(1),e.siblings)),g):""},d=function(a){var b,c={classes:[],attrs:{}};a=c.selector=f.trim(a);"*"!==a&&(b=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(a,b,d,e,k){switch(b){case "#":c.attrs.id=d;break;case ".":c.classes.push(d);break;case ":":-1!==
f.inArray(["checked","disabled","enabled","read-only","required"],d)&&(c.attrs[d]=d)}"["===e&&(a=k.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(c.attrs[a[1]]=a[2]);return""}));c.name=b||"div";return c},a=function(a){if(!a||"string"!==typeof a)return[];a=a.split(/\s*,\s*/)[0];a=a.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return f.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(a){a=f.map(a.split(/(?:~\+|~|\+)/),d);var b=a.pop();a.length&&(b.siblings=a);return b}).reverse()};return{getCssText:function(d,f){var h,
g,m,q="",t,r;r=d.settings.preview_styles;if(!1===r)return"";"string"!==typeof r&&(r="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");if("string"===typeof f){f=d.formatter.get(f);if(!f)return;f=f[0]}if("preview"in f&&(r=f.preview,!1===r))return"";h=f.block||f.inline||"span";g=a(f.selector);g.length?(g[0].name||(g[0].name=h),h=f.selector,g=b(g,d)):g=b([h],d);m=c.select(h,g)[0]||g.firstChild;e(f.styles,function(a,
b){(a=a.replace(/%(\w+)/g,""))&&c.setStyle(m,b,a)});e(f.attributes,function(a,b){(a=a.replace(/%(\w+)/g,""))&&c.setAttrib(m,b,a)});e(f.classes,function(a){a=a.replace(/%(\w+)/g,"");c.hasClass(m,a)||c.addClass(m,a)});d.fire("PreviewFormats");c.setStyles(g,{position:"absolute",left:-65535});d.getBody().appendChild(g);t=c.getStyle(d.getBody(),"fontSize",!0);t=/px$/.test(t)?parseInt(t,10):0;e(r.split(" "),function(a){var b=c.getStyle(m,a,!0);if("background-color"===a&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(b)&&
(b=c.getStyle(d.getBody(),a,!0),"#ffffff"===c.toHex(b).toLowerCase()))return;if("color"!==a||"#000000"!==c.toHex(b).toLowerCase()){if("font-size"===a&&/em|%$/.test(b)){if(0===t)return;b=parseFloat(b,10)/(/%$/.test(b)?100:1);b=b*t+"px"}"border"===a&&b&&(q+="padding:0 2px;");q+=a+":"+b+";"}});d.fire("AfterPreviewFormats");c.remove(g);return q},parseSelector:a,selectorToHtml:function(c,d){return b(a(c),d)}}});s("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.MatchFormat",
"tinymce.core.fmt.RemoveFormat"],function(g,f,h){return{toggle:function(e,c,b,d,a){c=c.get(b);!f.match(e,b,d,a)||"toggle"in c[0]&&!c[0].toggle?g.applyFormat(e,b,d,a):h.remove(e,b,d,a)}}});s("tinymce.core.keyboard.FormatShortcuts",[],function(){return{setup:function(g){g.addShortcut("meta+b","","Bold");g.addShortcut("meta+i","","Italic");g.addShortcut("meta+u","","Underline");for(var f=1;6>=f;f++)g.addShortcut("access+"+f,"",["FormatBlock",!1,"h"+f]);g.addShortcut("access+7","",["FormatBlock",!1,"p"]);
g.addShortcut("access+8","",["FormatBlock",!1,"div"]);g.addShortcut("access+9","",["FormatBlock",!1,"address"])}}});s("tinymce.core.api.Formatter","ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.fmt.ApplyFormat tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatChanged tinymce.core.fmt.FormatRegistry tinymce.core.fmt.MatchFormat tinymce.core.fmt.Preview tinymce.core.fmt.RemoveFormat tinymce.core.fmt.ToggleFormat tinymce.core.keyboard.FormatShortcuts".split(" "),function(g,f,h,e,c,b,
d,a,k,l,p){return function(n){var m=b(n),q=g(null);p.setup(n);e.setup(n);return{get:m.get,register:m.register,unregister:m.unregister,apply:f.curry(h.applyFormat,n),remove:f.curry(k.remove,n),toggle:f.curry(l.toggle,n,m),match:f.curry(d.match,n),matchAll:f.curry(d.matchAll,n),matchNode:f.curry(d.matchNode,n),canApply:f.curry(d.canApply,n),formatChanged:f.curry(c.formatChanged,n,q),getCssText:f.curry(a.getCssText,n)}}});s("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],
function(g,f,h){var e=function(b){return function(){for(var c=new f(arguments.length),a=0;a<c.length;a++)c[a]=arguments[a];if(0===c.length)throw new h("Can't merge zero objects");for(var a={},e=0;e<c.length;e++){var g=c[e],p;for(p in g)g.hasOwnProperty(p)&&(a[p]=b(a[p],g[p]))}return a}},c=e(function(b,d){return g.isObject(b)&&g.isObject(d)?c(b,d):d}),e=e(function(b,c){return c});return{deepMerge:c,merge:e}});s("tinymce.core.api.Events",[],function(){return{firePreProcess:function(g,f){return g.fire("PreProcess",
f)},firePostProcess:function(g,f){return g.fire("PostProcess",f)}}});s("tinymce.core.dom.DomSerializerFilters",["ephox.katamari.api.Arr","tinymce.core.html.Entities"],function(g,f){return{register:function(h,e,c){h.addAttributeFilter("data-mce-tabindex",function(b,c){for(var a=b.length,e;a--;)e=b[a],e.attr("tabindex",e.attributes.map["data-mce-tabindex"]),e.attr(c,null)});h.addAttributeFilter("src,href,style",function(b,d){for(var a=b.length,f,h,g="data-mce-"+d,n=e.url_converter,m=e.url_converter_scope;a--;)f=
b[a],h=f.attributes.map[g],void 0!==h?(f.attr(d,0<h.length?h:null),f.attr(g,null)):(h=f.attributes.map[d],"style"===d?h=c.serializeStyle(c.parseStyle(h),f.name):n&&(h=n.call(m,h,d,f.name)),f.attr(d,0<h.length?h:null))});h.addAttributeFilter("class",function(b){for(var c=b.length,a,e;c--;)if(a=b[c],e=a.attr("class"))e=a.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),a.attr("class",0<e.length?e:null)});h.addAttributeFilter("data-mce-type",function(b,c,a){c=b.length;for(var e;c--;)e=b[c],"bookmark"!==
e.attributes.map["data-mce-type"]||a.cleanup||e.remove()});h.addNodeFilter("noscript",function(b){for(var c=b.length,a;c--;)if(a=b[c].firstChild)a.value=f.decode(a.value)});h.addNodeFilter("script,style",function(b,c){for(var a=b.length,f,h,g,n=function(a){return a.replace(/(\x3c!--\[CDATA\[|\]\]--\x3e)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((\x3c!--)?(\s*\/\/)?\s*<!\[CDATA\[|(\x3c!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*\x3c!--|\/\*\s*\x3c!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\x3e)?|\s*\/\/\s*\]\]>(--\x3e)?|\/\/\s*(--\x3e)?|\]\]>|\/\*\s*--\x3e\s*\*\/|\s*--\x3e\s*)\s*$/g,
"")};a--;)f=b[a],h=f.firstChild?f.firstChild.value:"","script"===c?((g=f.attr("type"))&&f.attr("type","mce-no/type"===g?null:g.replace(/^mce\-/,"")),"xhtml"===e.element_format&&0<h.length&&(f.firstChild.value="// <![CDATA[\n"+n(h)+"\n// ]]\x3e")):"xhtml"===e.element_format&&0<h.length&&(f.firstChild.value="\x3c!--\n"+n(h)+"\n--\x3e")});h.addNodeFilter("#comment",function(b){for(var c=b.length,a;c--;)a=b[c],0===a.value.indexOf("[CDATA[")?(a.name="#cdata",a.type=4,a.value=a.value.replace(/^\[CDATA\[|\]\]$/g,
"")):0===a.value.indexOf("mce:protected ")&&(a.name="#text",a.type=3,a.raw=!0,a.value=unescape(a.value).substr(14))});h.addNodeFilter("xml:namespace,input",function(b,c){for(var a=b.length,e;a--;)e=b[a],7===e.type?e.remove():1===e.type&&("input"!==c||"type"in e.attributes.map||e.attr("type","text"))});h.addAttributeFilter("data-mce-type",function(b){g.each(b,function(b){"format-caret"===b.attr("data-mce-type")&&(b.isEmpty(h.schema.getNonEmptyElements())?b.remove():b.unwrap())})});h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",
function(b,c){for(var a=b.length;a--;)b[a].attr(c,null)})},trimTrailingBr:function(f){var e;(f=f.lastChild)&&"br"===f.name&&(e=f.prev)&&"br"===e.name&&(f.remove(),e.remove())}}});s("tinymce.core.dom.DomSerializerPreProcess",["ephox.katamari.api.Merger","global!document","tinymce.core.api.Events","tinymce.core.util.Tools"],function(g,f,h,e){var c=function(b,c,a){var k,l,p,n=b.dom;c=c.cloneNode(!0);k=f.implementation;k.createHTMLDocument&&(l=k.createHTMLDocument(""),e.each("BODY"===c.nodeName?c.childNodes:
[c],function(a){l.body.appendChild(l.importNode(a,!0))}),c="BODY"!==c.nodeName?l.body.firstChild:l.body,p=n.doc,n.doc=l);h.firePreProcess(b,g.merge(a,{node:c}));p&&(n.doc=p);return c};return{process:function(b,d,a){return b&&b.hasEventListeners("PreProcess")&&!a.no_events?c(b,d,a):d}}});s("tinymce.core.html.LegacyFilter",["ephox.katamari.api.Arr","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(g,f,h){var e=function(b,a){g.each(a,function(a){b.attr(a,null)})},c=function(b,a,c){b.addNodeFilter("font",
function(b){g.each(b,function(b){var d=a.parse(b.attr("style")),f=b.attr("color"),h=b.attr("face"),g=b.attr("size");f&&(d.color=f);h&&(d["font-family"]=h);g&&(d["font-size"]=c[parseInt(b.attr("size"),10)-1]);b.name="span";b.attr("style",a.serialize(d));e(b,["color","face","size"])})})},b=function(b,a){b.addNodeFilter("strike",function(b){g.each(b,function(b){var c=a.parse(b.attr("style"));c["text-decoration"]="line-through";b.name="span";b.attr("style",a.serialize(c))})})};return{register:function(d,
a){if(a.inline_styles){var e=f();a.convert_fonts_to_spans&&c(d,e,h.explode(a.font_size_legacy_values));b(d,e)}}}});s("tinymce.core.html.Node",[],function(){var g=/^[ \t\r\n]*$/,f={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},h=function(c,b,d){var a;a=d?"lastChild":"firstChild";d=d?"prev":"next";if(c[a])return c[a];if(c!==b){if(a=c[d])return a;for(c=c.parent;c&&c!==b;c=c.parent)if(a=c[d])return a}},e=function(c,b){this.name=c;this.type=b;1===b&&(this.attributes=
[],this.attributes.map={})};e.prototype={replace:function(c){c.parent&&c.remove();this.insert(c,this);this.remove();return this},attr:function(c,b){var d,a;if("string"!==typeof c){for(a in c)this.attr(a,c[a]);return this}if(d=this.attributes){if(void 0!==b){if(null===b){if(c in d.map)for(delete d.map[c],a=d.length;a--;)if(d[a].name===c){d.splice(a,1);break}return this}if(c in d.map)for(a=d.length;a--;){if(d[a].name===c){d[a].value=b;break}}else d.push({name:c,value:b});d.map[c]=b;return this}return d.map[c]}},
clone:function(){var c=new e(this.name,this.type),b,d,a,f,h;if(a=this.attributes){h=[];h.map={};b=0;for(d=a.length;b<d;b++)f=a[b],"id"!==f.name&&(h[h.length]={name:f.name,value:f.value},h.map[f.name]=f.value);c.attributes=h}c.value=this.value;c.shortEnded=this.shortEnded;return c},wrap:function(c){this.parent.insert(c,this);c.append(this);return this},unwrap:function(){var c,b;for(c=this.firstChild;c;)b=c.next,this.insert(c,this,!0),c=b;this.remove()},remove:function(){var c=this.parent,b=this.next,
d=this.prev;if(c){if(c.firstChild===this){if(c.firstChild=b)b.prev=null}else d.next=b;if(c.lastChild===this){if(c.lastChild=d)d.next=null}else b.prev=d;this.parent=this.next=this.prev=null}return this},append:function(c){var b;c.parent&&c.remove();(b=this.lastChild)?(b.next=c,c.prev=b,this.lastChild=c):this.lastChild=this.firstChild=c;c.parent=this;return c},insert:function(c,b,d){var a;c.parent&&c.remove();a=b.parent||this;d?(b===a.firstChild?a.firstChild=c:b.prev.next=c,c.prev=b.prev,c.next=b,b.prev=
c):(b===a.lastChild?a.lastChild=c:b.next.prev=c,c.next=b.next,c.prev=b,b.next=c);c.parent=a;return c},getAll:function(c){var b,d=[];for(b=this.firstChild;b;b=h(b,this))b.name===c&&d.push(b);return d},empty:function(){var c,b,d;if(this.firstChild){c=[];for(d=this.firstChild;d;d=h(d,this))c.push(d);for(b=c.length;b--;)d=c[b],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(c,b,d){var a=this.firstChild,e,f;b=b||{};if(a){do{if(1===
a.type){if(a.attributes.map["data-mce-bogus"])continue;if(c[a.name])return!1;for(e=a.attributes.length;e--;)if(f=a.attributes[e].name,"name"===f||0===f.indexOf("data-mce-bookmark"))return!1}if(8===a.type||3===a.type&&!g.test(a.value)||3===a.type&&a.parent&&b[a.parent.name]&&g.test(a.value)||d&&d(a))return!1}while(a=h(a,this))}return!0},walk:function(c){return h(this,null,c)}};e.create=function(c,b){var d,a;d=new e(c,f[c]||1);if(b)for(a in b)d.attr(a,b[a]);return d};return e});s("tinymce.core.html.DomParser",
["tinymce.core.html.LegacyFilter","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(g,f,h,e,c){var b=c.makeMap,d=c.each,a=c.explode,k=c.extend,l=function(a,b,c,d){(a.padd_empty_with_br||b.insert)&&c[d.name]?d.empty().append(new f("br","1")).shortEnded=!0:d.empty().append(new f("#text","3")).value="\u00a0"},p=function(a,b,c,d){return d.isEmpty(b,c,function(b){return(b=a.getElementRule(b.name))&&b.paddEmpty})};return function(n,m){var q=
this,t={},r=[],w={},x={};n=n||{};n.validate="validate"in n?n.validate:!0;n.root_name=n.root_name||"body";q.schema=m=m||new e;var v=function(a){var c,d,e,k,h,g,l,n,r,t,v,w,x,s;v=b("tr,td,th,tbody,thead,tfoot,table");r=m.getNonEmptyElements();t=m.getWhiteSpaceElements();w=m.getTextBlockElements();x=m.getSpecialElements();for(c=0;c<a.length;c++)if(d=a[c],d.parent&&!d.fixed)if(w[d.name]&&"li"==d.parent.name){for(e=d.next;e;){if(w[e.name])e.name="li",e.fixed=!0,d.parent.insert(e,d.parent);else break;e=
e.next}d.unwrap(d)}else{k=[d];for(e=d.parent;e&&!m.isValidChild(e.name,d.name)&&!v[e.name];e=e.parent)k.push(e);if(e&&1<k.length){k.reverse();h=g=q.filterNode(k[0].clone());for(n=0;n<k.length-1;n++){m.isValidChild(g.name,k[n].name)?(l=q.filterNode(k[n].clone()),g.append(l)):l=g;for(g=k[n].firstChild;g&&g!=k[n+1];)s=g.next,l.append(g),g=s;g=l}p(m,r,t,h)?e.insert(d,k[0],!0):(e.insert(h,k[0],!0),e.insert(d,h));e=k[0];(p(m,r,t,e)||e&&e.firstChild&&e.firstChild===e.lastChild&&"br"===e.firstChild.name)&&
e.empty().remove()}else d.parent&&("li"===d.name?(e=d.prev,!e||"ul"!==e.name&&"ul"!==e.name?(e=d.next,!e||"ul"!==e.name&&"ul"!==e.name?d.wrap(q.filterNode(new f("ul",1))):e.insert(d,e.firstChild,!0)):e.append(d)):m.isValidChild(d.parent.name,"div")&&m.isValidChild("div",d.name)?d.wrap(q.filterNode(new f("div",1))):x[d.name]?d.empty().remove():d.unwrap())}};q.filterNode=function(a){var b,c,d;c in t&&((d=w[c])?d.push(a):w[c]=[a]);for(b=r.length;b--;)c=r[b].name,c in a.attributes.map&&((d=x[c])?d.push(a):
x[c]=[a]);return a};q.addNodeFilter=function(b,c){d(a(b),function(a){var b=t[a];b||(t[a]=b=[]);b.push(c)})};q.addAttributeFilter=function(b,c){d(a(b),function(a){var b;for(b=0;b<r.length;b++)if(r[b].name===a){r[b].callbacks.push(c);return}r.push({name:a,callbacks:[c]})})};q.parse=function(a,c){var d,e,g,q,s,J,G,E,H,F,L,K=[],O,I,M,N,Q,T,X,R;c=c||{};w={};x={};F=k(b("script,style,head,html,body,title,meta,param"),m.getBlockElements());X=m.getNonEmptyElements();T=m.children;H=n.validate;R="forced_root_block"in
c?c.forced_root_block:n.forced_root_block;Q=m.getWhiteSpaceElements();L=/^[ \t\r\n]+/;I=/[ \t\r\n]+$/;M=/[ \t\r\n]+/g;N=/^[ \t\r\n]+$/;q=function(){var a=e.firstChild,b,c,d=function(b){b&&((a=b.firstChild)&&3==a.type&&(a.value=a.value.replace(L,"")),(a=b.lastChild)&&3==a.type&&(a.value=a.value.replace(I,"")))};if(m.isValidChild(e.name,R.toLowerCase())){for(;a;)b=a.next,3==a.type||1==a.type&&"p"!==a.name&&!F[a.name]&&!a.attr("data-mce-type")?(c||(c=U(R,1),c.attr(n.forced_root_block_attrs),e.insert(c,
a)),c.append(a)):(d(c),c=null),a=b;d(c)}};var U=function(a,b){var c=new f(a,b),d;a in t&&((d=w[a])?d.push(c):w[a]=[c]);return c},W=function(a){var b,c=m.getBlockElements();for(a=a.prev;a&&3===a.type;){b=a.value.replace(I,"");if(0<b.length){a.value=b;break}if(b=a.next){if(3==b.type&&b.value.length){a=a.prev;continue}if(!c[b.name]&&"script"!=b.name&&"style"!=b.name){a=a.prev;continue}}b=a.prev;a.remove();a=b}};d=new h({validate:H,allow_script_urls:n.allow_script_urls,allow_conditional_comments:n.allow_conditional_comments,
self_closing_elements:function(a){var b,c={};for(b in a)"li"!==b&&"p"!=b&&(c[b]=a[b]);return c}(m.getSelfClosingElements()),cdata:function(a){g.append(U("#cdata",4)).value=a},text:function(a,b){var c;O||(a=a.replace(M," "),g.lastChild&&F[g.lastChild.name]&&(a=a.replace(L,"")));0!==a.length&&(c=U("#text",3),c.raw=!!b,g.append(c).value=a)},comment:function(a){g.append(U("#comment",8)).value=a},pi:function(a,b){g.append(U(a,7)).value=b;W(g)},doctype:function(a){g.append(U("#doctype",10)).value=a;W(g)},
start:function(a,b,c){var d,e,f;if(d=H?m.getElementRule(a):{}){d=U(d.outputName||a,1);d.attributes=b;d.shortEnded=c;g.append(d);(e=T[g.name])&&T[d.name]&&!e[d.name]&&K.push(d);for(e=r.length;e--;)f=r[e].name,f in b.map&&((E=x[f])?E.push(d):x[f]=[d]);F[a]&&W(d);c||(g=d);!O&&Q[a]&&(O=!0)}},end:function(a){var b,d,e,f;if(d=H?m.getElementRule(a):{}){if(F[a]&&!O){if((b=g.firstChild)&&3===b.type)if(e=b.value.replace(L,""),0<e.length)b.value=e;else for(f=b.next,b.remove(),b=f;b&&3===b.type;)e=b.value,f=
b.next,(0===e.length||N.test(e))&&b.remove(),b=f;if((b=g.lastChild)&&3===b.type)if(e=b.value.replace(I,""),0<e.length)b.value=e;else for(f=b.prev,b.remove(),b=f;b&&3===b.type;)e=b.value,f=b.prev,(0===e.length||N.test(e))&&b.remove(),b=f}O&&Q[a]&&(O=!1);d.removeEmpty&&p(m,X,Q,g)&&!g.attributes.map.name&&!g.attributes.map.id?(a=g.parent,F[g.name]?g.empty().remove():g.unwrap(),g=a):(d.paddEmpty&&(g&&g.firstChild&&g.firstChild===g.lastChild&&"#text"===g.firstChild.name&&"\u00a0"===g.firstChild.value||
p(m,X,Q,g))&&l(n,c,F,g),g=g.parent)}}},m);e=g=new f(c.context||n.root_name,11);d.parse(a);H&&K.length&&(c.context?c.invalid=!0:v(K));R&&("body"==e.name||c.isRootContent)&&q();if(!c.invalid){for(G in w){E=t[G];d=w[G];for(J=d.length;J--;)d[J].parent||d.splice(J,1);q=0;for(s=E.length;q<s;q++)E[q](d,G,c)}q=0;for(s=r.length;q<s;q++)if(E=r[q],E.name in x){d=x[E.name];for(J=d.length;J--;)d[J].parent||d.splice(J,1);J=0;for(G=E.callbacks.length;J<G;J++)E.callbacks[J](d,E.name,c)}}return e};n.remove_trailing_brs&&
q.addNodeFilter("br",function(a,b,c){var d=a.length,e,h=k({},m.getBlockElements()),g=m.getNonEmptyElements(),r,q,t,v=m.getNonEmptyElements();h.body=1;for(b=0;b<d;b++)if(e=a[b],r=e.parent,h[e.parent.name]&&e===r.lastChild){for(q=e.prev;q;){t=q.name;if("span"!==t||"bookmark"!==q.attr("data-mce-type")){if("br"!==t)break;if("br"===t){e=null;break}}q=q.prev}e&&(e.remove(),p(m,g,v,r)&&(e=m.getElementRule(r.name))&&(e.removeEmpty?r.remove():e.paddEmpty&&l(n,c,h,r)))}else{for(q=e;r&&r.firstChild===q&&r.lastChild===
q;){q=r;if(h[r.name])break;r=r.parent}q===r&&!0!==n.padd_empty_with_br&&(r=new f("#text",3),r.value="\u00a0",e.replace(r))}});q.addAttributeFilter("href",function(a){var b=a.length,d,e=function(a){return a.split(" ").filter(function(a){return 0<a.length}).concat(["noopener"]).sort().join(" ")},f=function(a){a=a?c.trim(a):"";return/\b(noopener)\b/g.test(a)?a:e(a)};if(!n.allow_unsafe_link_target)for(;b--;)d=a[b],"a"===d.name&&"_blank"===d.attr("target")&&d.attr("rel",f(d.attr("rel")))});n.allow_html_in_named_anchor||
q.addAttributeFilter("id,name",function(a){for(var b=a.length,c,d,e,f;b--;)if(f=a[b],"a"===f.name&&f.firstChild&&!f.attr("href")){e=f.parent;c=f.lastChild;do d=c.prev,e.insert(c,f),c=d;while(c)}});n.fix_list_elements&&q.addNodeFilter("ul,ol",function(a){for(var b=a.length,c,d;b--;)if(c=a[b],d=c.parent,"ul"===d.name||"ol"===d.name)c.prev&&"li"===c.prev.name?c.prev.append(c):(d=new f("li",1),d.attr("style","list-style-type: none"),c.wrap(d))});n.validate&&m.getValidClasses()&&q.addAttributeFilter("class",
function(a){for(var b=a.length,c,d,e,f,k,h=m.getValidClasses(),g,l;b--;){c=a[b];d=c.attr("class").split(" ");k="";for(e=0;e<d.length;e++)f=d[e],l=!1,(g=h["*"])&&g[f]&&(l=!0),g=h[c.name],!l&&g&&g[f]&&(l=!0),l&&(k&&(k+=" "),k+=f);k.length||(k=null);c.attr("class",k)}});g.register(this,n)}});s("tinymce.core.dom.DomSerializer","ephox.katamari.api.Fun ephox.katamari.api.Merger tinymce.core.api.Events tinymce.core.dom.DOMUtils tinymce.core.dom.DomSerializerFilters tinymce.core.dom.DomSerializerPreProcess tinymce.core.html.DomParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p){var n=function(a,b,c){-1===p.inArray(b,c)&&(a.addAttributeFilter(c,function(a,b){for(var c=a.length;c--;)a[c].attr(b,null)}),b.push(c))};return function(m,q){var t,r,w,x=["data-mce-selected"];t=q&&q.dom?q.dom:e.DOM;r=q&&q.schema?q.schema:new a(m);m.entity_encoding=m.entity_encoding||"named";m.remove_trailing_brs="remove_trailing_brs"in m?m.remove_trailing_brs:!0;w=new d(m,r);c.register(w,m,t);return{schema:r,addNodeFilter:w.addNodeFilter,addAttributeFilter:w.addAttributeFilter,
serialize:function(a,d){var e=f.merge({format:"html"},d?d:{}),g=b.process(q,a,e),g=l.trim(e.getInner?g.innerHTML:t.getOuterHTML(g)),g=e.selection?g:p.trim(g),n=e.selection?f.merge({forced_root_block:!1},e):e,g=w.parse(g,n);c.trimTrailingBr(g);"tree"===e.format?e=g:(g=(new k(m,r)).serialize(g),e=!e.no_events&&q?h.firePostProcess(q,f.merge(e,{content:g})).content:g);return e},addRules:function(a){r.addValidElements(a)},setRules:function(a){r.setValidElements(a)},addTempAttr:g.curry(n,w,x),getTempAttrs:function(){return x}}}});
s("tinymce.core.api.dom.Serializer",["tinymce.core.dom.DomSerializer"],function(g){return function(f,h){var e=new g(f,h);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs}}});s("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],
function(g,f,h,e){var c=function(a){return h.descendant(f.fromDom(a.getBody()),"*[data-mce-caret]").fold(g.constant(null),function(a){return a.dom()})},b=function(a,b){b.hasAttribute("data-mce-caret")&&(e.showCaretContainerBlock(b),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(b))},d=function(a,d){var f=c(a);f&&("compositionstart"===d.type?(d.preventDefault(),d.stopPropagation(),b(f)):e.hasContent(f)&&b(a,f))};return{setup:function(a){a.on("keyup compositionstart",g.curry(d,
a))}}});s("tinymce.core.api.dom.BookmarkManager",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks"],function(g,f){var h=function(e){return{getBookmark:g.curry(f.getBookmark,e),moveToBookmark:g.curry(f.moveToBookmark,e)}};h.isBookmarkNode=f.isBookmarkNode;return h});s("tinymce.core.dom.ControlSelection","ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors global!document tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.Env tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),
function(g,f,h,e,c,b,d,a,k,l){var p=c.isContentEditableFalse,n=c.isContentEditableTrue,m=function(a,b){for(;b&&b!=a;){if(n(b)||p(b))return b;b=b.parentNode}return null};return function(c,g){var n=g.dom,w=k.each,x,v,s,u,y,B,A,C,D,J,G,E,H,F,L,K=g.getDoc(),O=Math.abs,I=Math.round,M=g.getBody(),N,Q;u={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};g.contentStyles.push(".mce-content-body div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: "+
(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resizehandle:hover {background: #000}.mce-content-body img[data-mce-selected],.mce-content-body hr[data-mce-selected] {outline: 1px solid black;resize: none}.mce-content-body .mce-clonedresizable {position: absolute;"+(d.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: "+(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");
var T=function(a){return a&&("IMG"===a.nodeName||g.dom.is(a,"figure.image"))},X=function(a){var c=a.target,d=g.selection.getRng();!T(a.target)||b.isXYWithinRange(a.clientX,a.clientY,d)||a.isDefaultPrevented()||(a.preventDefault(),g.selection.select(c))},R=function(a){return g.dom.is(a,"figure.image")?a.querySelector("img"):a},U=function(a){var b=g.settings.object_resizing;if(!1===b||d.iOS)return!1;"string"!=typeof b&&(b="table,img,figure.image,div");return"false"===a.getAttribute("data-mce-resize")||
a==g.getBody()?!1:h.is(f.fromDom(a),b)},W=function(a){var b,c,d;b=a.screenX-B;c=a.screenY-A;F=b*y[2]+J;L=c*y[3]+G;F=5>F?5:F;L=5>L?5:L;if(T(x)&&!1!==g.settings.resize_img_proportional?!l.modifierPressed(a):l.modifierPressed(a)||T(x)&&0!==y[2]*y[3])O(b)>O(c)?(L=I(F*E),F=I(L/E)):(F=I(L/E),L=I(F*E));n.setStyles(R(v),{width:F,height:L});a=y.startPos.x+b;d=y.startPos.y+c;a=0<a?a:0;d=0<d?d:0;n.setStyles(s,{left:a,top:d,display:"block"});s.innerHTML=F+" &times; "+L;0>y[2]&&v.clientWidth<=F&&n.setStyle(v,
"left",C+(J-F));0>y[3]&&v.clientHeight<=L&&n.setStyle(v,"top",D+(G-L));b=M.scrollWidth-N;c=M.scrollHeight-Q;0!==b+c&&n.setStyles(s,{left:a-b,top:d-c});H||(g.fire("ObjectResizeStart",{target:x,width:J,height:G}),H=!0)},Z=function(){H=!1;var a=function(a,b){b&&(x.style[a]||!g.schema.isValid(x.nodeName.toLowerCase(),a)?n.setStyle(R(x),a,b):n.setAttrib(R(x),a,b))};a("width",F);a("height",L);n.unbind(K,"mousemove",W);n.unbind(K,"mouseup",Z);e!=K&&(n.unbind(e,"mousemove",W),n.unbind(e,"mouseup",Z));n.remove(v);
n.remove(s);P(x);g.fire("ObjectResized",{target:x,width:F,height:L});n.setAttrib(x,"style",n.getAttrib(x,"style"));g.nodeChanged()},P=function(a){var b,c,f;V();da();b=n.getPos(a,M);C=b.x;D=b.y;b=a.getBoundingClientRect();c=b.width||b.right-b.left;f=b.height||b.bottom-b.top;x!=a&&(x=a,F=L=0);b=g.fire("ObjectSelected",{target:a});U(a)&&!b.isDefaultPrevented()?w(u,function(a,b){var k;(k=n.get("mceResizeHandle"+b))&&n.remove(k);k=n.add(M,"div",{id:"mceResizeHandle"+b,"data-mce-bogus":"all","class":"mce-resizehandle",
unselectable:!0,style:"cursor:"+b+"-resize; margin:0; padding:0"});d.ie&&(k.contentEditable=!1);n.bind(k,"mousedown",function(b){b.stopImmediatePropagation();b.preventDefault();B=b.screenX;A=b.screenY;J=R(x).clientWidth;G=R(x).clientHeight;E=G/J;y=a;a.startPos={x:c*a[0]+C,y:f*a[1]+D};N=M.scrollWidth;Q=M.scrollHeight;v=x.cloneNode(!0);n.addClass(v,"mce-clonedresizable");n.setAttrib(v,"data-mce-bogus","all");v.contentEditable=!1;v.unSelectabe=!0;n.setStyles(v,{left:C,top:D,margin:0});v.removeAttribute("data-mce-selected");
M.appendChild(v);n.bind(K,"mousemove",W);n.bind(K,"mouseup",Z);e!=K&&(n.bind(e,"mousemove",W),n.bind(e,"mouseup",Z));s=n.add(M,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},J+" &times; "+G)});a.elm=k;n.setStyles(k,{left:c*a[0]+C-k.offsetWidth/2,top:f*a[1]+D-k.offsetHeight/2})}):V();x.setAttribute("data-mce-selected","1")},V=function(){var a,b;da();x&&x.removeAttribute("data-mce-selected");for(a in u)if(b=n.get("mceResizeHandle"+a))n.unbind(b),n.remove(b)},S=function(a){var b,d=function(a,
b){if(a){do if(a===b)return!0;while(a=a.parentNode)}};if(!H&&!g.removed){w(n.select("img[data-mce-selected],hr[data-mce-selected]"),function(a){a.removeAttribute("data-mce-selected")});b="mousedown"==a.type?a.target:c.getNode();b=n.$(b).closest("table,img,figure.image,hr")[0];if(d(b,M)&&(Y(),a=c.getStart(!0),d(a,b)&&d(c.getEnd(!0),b))){P(b);return}V()}},da=function(){for(var a in u){var b=u[a];b.elm&&(n.unbind(b.elm),delete b.elm)}},Y=function(){try{g.getDoc().execCommand("enableObjectResizing",!1,
!1)}catch(a){}};g.on("init",function(){Y();d.ie&&11<=d.ie&&(g.on("mousedown click",function(a){var b=a.target,c=b.nodeName;H||!/^(TABLE|IMG|HR)$/.test(c)||p(m(g.getBody(),b))||(2!==a.button&&g.selection.select(b,"TABLE"==c),"mousedown"==a.type&&g.nodeChanged())}),g.dom.bind(M,"mscontrolselect",function(b){var c=function(b){a.setEditorTimeout(g,function(){g.selection.select(b)})};p(m(g.getBody(),b.target))?(b.preventDefault(),c(b.target)):/^(TABLE|IMG|HR)$/.test(b.target.nodeName)&&(b.preventDefault(),
"IMG"==b.target.tagName&&c(b.target))}));var b=a.throttle(function(a){g.composing||S(a)});g.on("nodechange ResizeEditor ResizeWindow drop",b);g.on("keyup compositionend",function(a){x&&"TABLE"==x.nodeName&&b(a)});g.on("hide blur",V);g.on("contextmenu",X)});g.on("remove",da);return{isResizable:U,showResizeRect:P,hideResizeRect:V,updateResizeRect:S,destroy:function(){x=v=null}}}});s("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(g){var f=function(f){for(var e=0,c=0;f&&f.nodeType;)e+=
f.offsetLeft||0,c+=f.offsetTop||0,f=f.offsetParent;return{x:e,y:c}};return{scrollIntoView:function(h,e,c){var b=h.dom,d=b.getRoot(),a;a=0;var k={elm:e,alignToTop:c};h.fire("scrollIntoView",k);if(!k.isDefaultPrevented()&&g.isElement(e)){!1===c&&(a=e.offsetHeight);if("BODY"!==d.nodeName&&(c=h.selection.getScrollContainer())){e=f(e).y-f(c).y+a;a=c.clientHeight;b=c.scrollTop;if(e<b||e+25>b+a)c.scrollTop=e<b?e:e-a+25;return}c=b.getViewPort(h.getWin());e=b.getPos(e).y+a;b=c.y;a=c.h;(e<c.y||e+25>b+a)&&h.getWin().scrollTo(0,
e<b?e:e-a+25)}}}});s("tinymce.core.selection.CaretRangeFromPoint",["tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(g,f){var h=function(b){return g.isContentEditableTrue(b)||g.isContentEditableFalse(b)},e=function(b,c,a){for(;b&&b!==c;){if(a(b))return b;b=b.parentNode}return null},c=function(b,c,a){var e,h;e=a.elementFromPoint(b,c);h=a.body.createTextRange();e&&"HTML"!==e.tagName||(e=a.body);h.moveToElementText(e);a=f.toArray(h.getClientRects());a=a.sort(function(a,b){a=Math.abs(Math.max(a.top-
c,a.bottom-c));b=Math.abs(Math.max(b.top-c,b.bottom-c));return a-b});if(0<a.length){c=(a[0].bottom+a[0].top)/2;try{return h.moveToPoint(b,c),h.collapse(!0),h}catch(g){}}return null};return{fromPoint:function(b,d,a){var f;if(a.caretPositionFromPoint){if(b=a.caretPositionFromPoint(b,d))f=a.createRange(),f.setStart(b.offsetNode,b.offset),f.collapse(!0)}else if(a.caretRangeFromPoint)f=a.caretRangeFromPoint(b,d);else if(a.body.createTextRange){f=a.body.createTextRange();try{f.moveToPoint(b,d),f.collapse(!0)}catch(l){f=
c(b,d,a)}a=a.body;b=f&&f.parentElement?f.parentElement():null;return g.isContentEditableFalse(e(b,a,h))?null:f}return f}}});s("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(g){return{processRanges:function(f,h){return g.map(h,function(e){var c=f.fire("GetSelectionRange",{range:e});return c.range!==e?c.range:e})}}});s("ephox.sugar.api.dom.Replication","ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),
function(g,f,h,e,c,b){var d=function(a){return f.fromDom(a.dom().cloneNode(!0))},a=function(a,b){var c=f.fromTag(b),d=g.clone(a);g.setAll(c,d);return c};return{shallow:function(a){return f.fromDom(a.dom().cloneNode(!1))},shallowAs:a,deep:d,copy:function(c,f){var h=a(c,f),g=b.children(d(c));e.append(h,g);return h},mutate:function(d,f){var g=a(d,f);h.before(d,g);var n=b.children(d);e.append(g,n);c.remove(d);return g}}});s("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element",
"global!document"],function(g,f,h){return{fromElements:function(e,c){var b=(c||h).createDocumentFragment();g.each(e,function(c){b.appendChild(c.dom())});return f.fromDom(b)}}});s("tinymce.core.selection.SelectionUtils","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse tinymce.core.dom.NodeType".split(" "),function(g,f,h,e,c,b,d,a,k){var l=
function(a){var c=a.startContainer;a=a.startOffset;return k.isText(c)?0===a?h.some(b.fromDom(c)):h.none():h.from(c.childNodes[a]).map(b.fromDom)},p=function(a){var c=a.endContainer;a=a.endOffset;return k.isText(c)?a===c.data.length?h.some(b.fromDom(c)):h.none():h.from(c.childNodes[a-1]).map(b.fromDom)},n=function(b){return a.firstChild(b).fold(f.constant([b]),function(a){return[b].concat(n(a))})},m=function(b){return a.lastChild(b).fold(f.constant([b]),function(c){return"br"===d.name(c)?a.prevSibling(c).map(function(a){return[b].concat(m(a))}).getOr([]):
[b].concat(m(c))})};return{hasAllContentsSelected:function(a,b){return e.liftN([l(b),p(b)],function(b,d){var e=g.find(n(a),f.curry(c.eq,b)),k=g.find(m(a),f.curry(c.eq,d));return e.isSome()&&k.isSome()}).getOr(!1)}}});s("tinymce.core.selection.SimpleTableModel","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter".split(" "),
function(g,f,h,e,c,b,d,a,k,l){var p=h.immutable("element","width","rows"),n=h.immutable("element","cells"),m=h.immutable("x","y"),q=function(a,b){var c=parseInt(k.get(a,b),10);return isNaN(c)?1:c},t=function(a,b,c){a=a.rows();return!!(a[c]?a[c].cells():[])[b]},r=function(a){return g.foldl(a,function(a,b){return b.cells().length>a?b.cells().length:a},0)},w=function(a,b){for(var c=a.rows(),d=0;d<c.length;d++)for(var k=c[d].cells(),h=0;h<k.length;h++)if(e.eq(k[h],b))return f.some(m(h,d));return f.none()},
x=function(a,b,c,d,e){var f=[];for(a=a.rows();c<=e;c++){var k=a[c].cells(),k=b<d?k.slice(b,d+1):k.slice(d,b+1);f.push(n(a[c].element(),k))}return f},v=function(a){return g.map(a.rows(),function(a){var c=g.map(a.cells(),function(a){a=d.deep(a);k.remove(a,"colspan");k.remove(a,"rowspan");return a});a=d.shallow(a.element());b.append(a,c);return a})};return{fromDom:function(a){var b=p(d.shallow(a),0,[]);g.each(l.descendants(a,"tr"),function(a,c){g.each(l.descendants(a,"td,th"),function(e,f){for(var k=
f;t(b,k,c);)k++;for(var h=q(e,"rowspan"),g=q(e,"colspan"),l=b.rows(),m=c;m<c+h;m++){l[m]||(l[m]=n(d.deep(a),[]));for(var p=k;p<k+g;p++)l[m].cells()[p]=m==c&&p==k?e:d.shallow(e)}})});return p(b.element(),r(b.rows()),b.rows())},toDom:function(e){var f=v(e);e=d.shallow(e.element());var k=a.fromTag("tbody");b.append(k,f);c.append(e,k);return e},subsection:function(a,b,c){return w(a,b).bind(function(b){return w(a,c).map(function(c){var d=b.x(),e=b.y(),f=c.x();c=c.y();d=e<c?x(a,d,e,f,c):x(a,d,c,f,e);return p(a.element(),
r(d),d)})})}}});s("tinymce.core.selection.FragmentReader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Fragment ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.selection.SelectionUtils tinymce.core.selection.SimpleTableModel tinymce.core.selection.TableCellSelection".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t){var r=function(b){return g.find(b,function(b){return"ul"===a.name(b)||"ol"===a.name(b)})},w=function(c,d){return g.find(c,function(b){return"li"===a.name(b)&&m.hasAllContentsSelected(b,d)}).fold(f.constant([]),function(d){return r(c).map(function(c){return[b.fromTag("li"),b.fromTag(a.name(c))]}).getOr([])})},x=function(a,b){var c=g.foldl(b,function(a,b){e.append(b,a);return b},a);return 0<b.length?d.fromElements([c]):c},v=function(a){return p.isListItem(a)?
l.parent(a).filter(p.isList).fold(f.constant([]),function(b){return[a,b]}):p.isList(a)?[a]:[]},s=function(a,d){var e=b.fromDom(d.commonAncestorContainer),f=n.parentsAndSelf(e,a),k=g.filter(f,function(a){return p.isInline(a)||p.isHeading(a)}),f=w(f,d),e=k.concat(f.length?f:v(e));return g.map(e,c.shallow)},u=function(){return d.fromElements([])},y=function(a,b){return k.ancestor(b[0],"table",f.curry(h.eq,a)).bind(function(a){var c=b[0],e=b[b.length-1];a=q.fromDom(a);return q.subsection(a,c,e).map(function(a){return d.fromElements([q.toDom(a)])})}).getOrThunk(u)};
return{read:function(a,c){var d=t.getCellsFromElementOrRanges(c,a);return 0<d.length?y(a,d):0<c.length&&c[0].collapsed?u():x(b.fromDom(c[0].cloneContents()),s(a,c[0]))}}});s("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(g,f,h,e,c){return{getContent:function(b,d){var a=b.selection.getRng(),k=b.dom.create("body"),l=
b.selection.getSel(),p=f.processRanges(b,e.getRanges(l));d=d||{};d.get=!0;d.format=d.format||"html";d.selection=!0;d=b.fire("BeforeGetContent",d);if(d.isDefaultPrevented())return b.fire("GetContent",d),d.content;if("text"===d.format)return b.selection.isCollapsed()?"":c.trim(a.text||(l.toString?l.toString():""));a.cloneContents?(a=d.contextual?h.read(g.fromDom(b.getBody()),p).dom():a.cloneContents())&&k.appendChild(a):void 0!==a.item||void 0!==a.htmlText?(k.innerHTML="<br>"+(a.item?a.item(0).outerHTML:
a.htmlText),k.removeChild(k.firstChild)):k.innerHTML=a.toString();d.getInner=!0;k=b.selection.serializer.serialize(k,d);if("tree"===d.format)return k;d.content=b.selection.isCollapsed()?"":k;b.fire("GetContent",d);return d.content}}});s("tinymce.core.selection.SetSelectionContent",[],function(){return{setContent:function(g,f,h){var e=g.selection.getRng(),c=g.getDoc(),b,d;h=h||{format:"html"};h.set=!0;h.selection=!0;h.content=f;if(!h.no_events&&(h=g.fire("BeforeSetContent",h),h.isDefaultPrevented())){g.fire("SetContent",
h);return}f=h.content;if(e.insertNode){f+='<span id="__caret">_</span>';e.startContainer==c&&e.endContainer==c?c.body.innerHTML=f:(e.deleteContents(),0===c.body.childNodes.length?c.body.innerHTML=f:e.createContextualFragment?e.insertNode(e.createContextualFragment(f)):(b=c.createDocumentFragment(),d=c.createElement("div"),b.appendChild(d),d.outerHTML=f,e.insertNode(b)));f=g.dom.get("__caret");e=c.createRange();e.setStartBefore(f);e.setEndBefore(f);g.selection.setRng(e);g.dom.remove("__caret");try{g.selection.setRng(e)}catch(a){}}else e.item&&
(c.execCommand("Delete",!1,null),e=g.getRng()),/^\s+/.test(f)?(e.pasteHTML('<span id="__mce_tmp">_</span>'+f),g.dom.remove("__mce_tmp")):e.pasteHTML(f);h.no_events||g.fire("SetContent",h)}}});s("tinymce.core.dom.Selection","ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.api.dom.BookmarkManager tinymce.core.caret.CaretPosition tinymce.core.dom.ControlSelection tinymce.core.dom.ScrollIntoView tinymce.core.dom.TreeWalker tinymce.core.focus.EditorFocus tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.EventProcessRanges tinymce.core.selection.GetSelectionContent tinymce.core.selection.MultiRange tinymce.core.selection.NormalizeRange tinymce.core.selection.SelectionBookmark tinymce.core.selection.SetSelectionContent tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t,r,w){var x=w.each,v=w.trim,s=function(a){return!(!a||!a.ownerDocument)&&g.contains(f.fromDom(a.ownerDocument),f.fromDom(a))};w=function(a,c,d,f){this.dom=a;this.win=c;this.serializer=d;this.editor=f;this.bookmarkManager=new e(this);this.controlSelection=new b(this,f)};w.prototype={setCursorLocation:function(a,b){var c=this.dom.createRng();a?(c.setStart(a,b),c.setEnd(a,b),this.setRng(c),this.collapse(!1)):(this._moveEndPoint(c,this.editor.getBody(),!0),this.setRng(c))},
getContent:function(a){return n.getContent(this.editor,a)},setContent:function(a,b){r.setContent(this.editor,a,b)},getStart:function(a){var b=this.getRng(),c;c=b.startContainer;1==c.nodeType&&c.hasChildNodes()&&(a&&b.collapsed||(c=c.childNodes[Math.min(c.childNodes.length-1,b.startOffset)]));return c&&3==c.nodeType?c.parentNode:c},getEnd:function(a){var b=this.getRng(),c,d;c=b.endContainer;d=b.endOffset;1==c.nodeType&&c.hasChildNodes()&&(a&&b.collapsed||(c=c.childNodes[0<d?d-1:d]));return c&&3==c.nodeType?
c.parentNode:c},getBookmark:function(a,b){return this.bookmarkManager.getBookmark(a,b)},moveToBookmark:function(a){return this.bookmarkManager.moveToBookmark(a)},select:function(a,b){var c=this.dom,d=c.createRng();a&&(c=c.nodeIndex(a),d.setStart(a.parentNode,c),d.setEnd(a.parentNode,c+1),b&&(this._moveEndPoint(d,a,!0),this._moveEndPoint(d,a)),this.setRng(d));return a},isCollapsed:function(){var a=this.getRng(),b=this.getSel();return!a||a.item?!1:a.compareEndPoints?0===a.compareEndPoints("StartToEnd",
a):!b||a.collapsed},collapse:function(a){var b=this.getRng();b.collapse(!!a);this.setRng(b)},getSel:function(){var a=this.win;return a.getSelection?a.getSelection():a.document.selection},getRng:function(a){var b,c,d;a=function(a,b,c){try{return b.compareBoundaryPoints(a,c)}catch(d){return-1}};if(!this.win)return null;d=this.win.document;if("undefined"===typeof d||null===d)return null;if(void 0!==this.editor.bookmark&&!1===k.hasFocus(this.editor)){var e=t.getRng(this.editor);if(e.isSome())return e.getOr(d.createRange())}try{if(b=
this.getSel())c=0<b.rangeCount?b.getRangeAt(0):b.createRange?b.createRange():d.createRange()}catch(f){}(c=p.processRanges(this.editor,[c])[0])||(c=d.createRange?d.createRange():d.body.createTextRange());c.setStart&&9===c.startContainer.nodeType&&c.collapsed&&(b=this.dom.getRoot(),c.setStart(b,0),c.setEnd(b,0));this.selectedRange&&this.explicitRange&&(0===a(c.START_TO_START,c,this.selectedRange)&&0===a(c.END_TO_END,c,this.selectedRange)?c=this.explicitRange:this.explicitRange=this.selectedRange=null);
return c},setRng:function(a,b){var c,d;c=(c=a)?c.select?!0:s(c.startContainer)&&s(c.endContainer):!1;if(c)if(a.select){this.explicitRange=null;try{a.select()}catch(e){}}else{c=this.getSel();d=this.editor.fire("SetSelectionRange",{range:a,forward:b});a=d.range;if(c){this.explicitRange=a;try{c.removeAllRanges(),c.addRange(a)}catch(f){}!1===b&&c.extend&&(c.collapse(a.endContainer,a.endOffset),c.extend(a.startContainer,a.startOffset));this.selectedRange=0<c.rangeCount?c.getRangeAt(0):null}!a.collapsed&&
a.startContainer===a.endContainer&&c.setBaseAndExtent&&!h.ie&&2>a.endOffset-a.startOffset&&a.startContainer.hasChildNodes()&&(d=a.startContainer.childNodes[a.startOffset])&&"IMG"===d.tagName&&(c.setBaseAndExtent(a.startContainer,a.startOffset,a.endContainer,a.endOffset),c.anchorNode===a.startContainer&&c.focusNode===a.endContainer||c.setBaseAndExtent(d,0,d,1));this.editor.fire("AfterSetSelectionRange",{range:a,forward:b})}},setNode:function(a){this.setContent(this.dom.getOuterHTML(a));return a},getNode:function(){var a=
this.getRng(),b,c,d,e,f;b=this.dom.getRoot();var k=function(a,b){for(var c=a;a&&3===a.nodeType&&0===a.length;)a=b?a.nextSibling:a.previousSibling;return a||c};if(!a)return b;c=a.startContainer;d=a.endContainer;e=a.startOffset;f=a.endOffset;b=a.commonAncestorContainer;return!a.collapsed&&(c==d&&2>f-e&&c.hasChildNodes()&&(b=c.childNodes[e]),3===c.nodeType&&3===d.nodeType&&(c=c.length===e?k(c.nextSibling,!0):c.parentNode,d=0===f?k(d.previousSibling,!1):d.parentNode,c&&c===d))?c:b&&3==b.nodeType?b.parentNode:
b},getSelectedBlocks:function(b,c){var d=this.dom,e,f,k=[];f=d.getRoot();b=d.getParent(b||this.getStart(),d.isBlock);c=d.getParent(c||this.getEnd(),d.isBlock);b&&b!=f&&k.push(b);if(b&&c&&b!=c){e=b;for(var h=new a(b,f);(e=h.next())&&e!=c;)d.isBlock(e)&&k.push(e)}c&&b!=c&&c!=f&&k.push(c);return k},isForward:function(){var a=this.dom,b=this.getSel(),c;if(!b||!b.anchorNode||!b.focusNode)return!0;c=a.createRng();c.setStart(b.anchorNode,b.anchorOffset);c.collapse(!0);a=a.createRng();a.setStart(b.focusNode,
b.focusOffset);a.collapse(!0);return 0>=c.compareBoundaryPoints(c.START_TO_START,a)},normalize:function(){var a=this,b=a.getRng();if(!m.hasMultipleRanges(a.getSel())){var c=q.normalize(a.dom,b);c.each(function(b){a.setRng(b,a.isForward())});return c.getOr(b)}return b},selectorChanged:function(a,b){var c=this,d;c.selectorChangedData||(c.selectorChangedData={},d={},c.editor.on("NodeChange",function(a){var b=a.element,e=c.dom,f=e.getParents(b,null,e.getRoot()),k={};x(c.selectorChangedData,function(a,
b){x(f,function(c){if(e.is(c,b))return d[b]||(x(a,function(a){a(!0,{node:c,selector:b,parents:f})}),d[b]=a),k[b]=a,!1})});x(d,function(a,c){k[c]||(delete d[c],x(a,function(a){a(!1,{node:b,selector:c,parents:f})}))})}));c.selectorChangedData[a]||(c.selectorChangedData[a]=[]);c.selectorChangedData[a].push(b);return c},getScrollContainer:function(){for(var a,b=this.dom.getRoot();b&&"BODY"!=b.nodeName;){if(b.scrollHeight>b.clientHeight){a=b;break}b=b.parentNode}return a},scrollIntoView:function(a,b){d.scrollIntoView(this.editor,
a,b)},placeCaretAt:function(a,b){this.setRng(l.fromPoint(a,b,this.editor.getDoc()))},_moveEndPoint:function(b,c,d){var e=c,f=new a(c,e),k=this.dom.schema.getNonEmptyElements();do{if(3==c.nodeType&&0!==v(c.nodeValue).length){d?b.setStart(c,0):b.setEnd(c,c.nodeValue.length);return}if(k[c.nodeName]&&!/^(TD|TH)$/.test(c.nodeName)){d?b.setStartBefore(c):"BR"==c.nodeName?b.setEndBefore(c):b.setEndAfter(c);return}if(h.ie&&11>h.ie&&this.dom.isBlock(c)&&this.dom.isEmpty(c)){d?b.setStart(c,0):b.setEnd(c,0);
return}}while(c=d?f.next():f.prev());"BODY"==e.nodeName&&(d?b.setStart(e,0):b.setEnd(e,e.childNodes.length))},getBoundingClientRect:function(){var a=this.getRng();return a.collapsed?c.fromRangeStart(a).getClientRects()[0]:a.getBoundingClientRect()},destroy:function(){this.win=null;this.controlSelection.destroy()}};return w});s("tinymce.core.caret.LineWalker","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.Dimensions tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.CaretPosition tinymce.core.geom.ClientRect".split(" "),
function(g,f,h,e,c,b,d,a){g=g.curry;var k=function(a,b,d,f){for(;(f=c.findNode(f,a,e.isEditableCaretCandidate,b))&&!d(f););},l=function(a,b,c,d,e,g){var l=0,p=[],s,u=function(d){var k,g;g=h.getClientRects(d);-1==a&&(g=g.reverse());for(d=0;d<g.length;d++)if(k=g[d],!c(k,s)){0<p.length&&b(k,f.last(p))&&l++;k.line=l;if(e(k))return!0;p.push(k)}};s=f.last(g.getClientRects());if(!s)return p;g=g.getNode();u(g);k(a,d,u,g);return p},p=g(l,-1,a.isAbove,a.isBelow),l=g(l,1,a.isBelow,a.isAbove);return{upUntil:p,
downUntil:l,positionsUntil:function(c,e,k,h){var g=new b(e),l;e=[];var p=0,v,s;1==c?(c=g.next,g=a.isBelow,l=a.isAbove,h=d.after(h)):(c=g.prev,g=a.isAbove,l=a.isBelow,h=d.before(h));s=f.last(h.getClientRects());do if(h.isVisible()&&(v=f.last(h.getClientRects()),!l(v,s))){0<e.length&&g(v,f.last(e))&&p++;v=a.clone(v);v.position=h;v.line=p;if(k(v))break;e.push(v)}while(h=c(h));return e},isAboveLine:g(function(a,b){return b.line>a}),isLine:g(function(a,b){return b.line===a})}});s("tinymce.core.keyboard.CefNavigation",
"tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.LineUtils tinymce.core.caret.LineWalker tinymce.core.dom.NodeType tinymce.core.keyboard.CefUtils tinymce.core.selection.RangeNodes tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(g,f,h,e,c,b,d,a,k,l,p,n){var m=a.isContentEditableFalse,q=l.getSelectedNode,t=e.isAfterContentEditableFalse,r=e.isBeforeContentEditableFalse,
w=function(a,b){for(;(b=a(b))&&!b.isVisible(););return b},x=function(a,b,c){c=e.normalizeRange(a,b,c);return-1===a?h.fromRangeStart(c):h.fromRangeEnd(c)},v=function(b,c,d,h,g){var l,p;if(!g.collapsed&&(l=q(g),m(l)))return k.showCaret(b,c,l,-1===b);p=f.isCaretContainerBlock(g.startContainer);l=x(b,c.getBody(),g);if(h(l))return k.selectNode(c,l.getNode(-1===b));l=d(l);if(!l)return p?g:null;if(h(l))return k.showCaret(b,c,l.getNode(-1===b),1===b);d=d(l);return h(d)&&(h=l,g=e.isInSameBlock(h,d),h=!g&&
a.isBr(h.getNode())?!0:g,h)?k.showCaret(b,c,d.getNode(-1===b),1===b):p?k.renderRangeCaret(c,l.toRange()):null},s=function(a,b,d){var e;e=new c(a.getBody());var f=n.curry(w,e.next),k=n.curry(w,e.prev);if(d.collapsed&&a.settings.forced_root_block&&(e=a.dom.getParent(d.startContainer,"PRE"))&&(d=1===b?f(h.fromRangeStart(d)):k(h.fromRangeStart(d)),!d)){d=a.dom.create(a.settings.forced_root_block);if(!g.ie||11<=g.ie)d.innerHTML='<br data-mce-bogus="1">';1===b?a.$(e).after(d):a.$(e).before(d);a.selection.select(d,
!0);a.selection.collapse()}};return{moveH:function(a,b){return function(){var d;d=new c(a.getBody());var e=n.curry(w,d.next),f=n.curry(w,d.prev);d=b?1:-1;var f=b?e:f,k=b?r:t,e=a.selection.getRng();d=(f=v(d,a,f,k,e))?f:(f=s(a,d,e))?f:null;return d?(a.selection.setRng(d),!0):!1}},moveV:function(a,c){return function(){var e;var f;e=c?1:-1;var h=c?d.downUntil:d.upUntil,g=a.selection.getRng();b:{var l,n;f=q(g);l=x(e,a.getBody(),g);h=h(a.getBody(),d.isAboveLine(1),l);n=p.filter(h,d.isLine(1));h=p.last(l.getClientRects());
r(l)&&(f=l.getNode());t(l)&&(f=l.getNode(!0));if(h)if(h=h.left,(l=b.findClosestClientRect(n,h))&&m(l.node))f=Math.abs(h-l.left),h=Math.abs(h-l.right),f=k.showCaret(e,a,l.node,f<h);else{if(f){f=d.positionsUntil(e,a.getBody(),d.isAboveLine(1),f);if(l=b.findClosestClientRect(p.filter(f,d.isLine(1)),h)){f=k.renderRangeCaret(a,l.position.toRange());break b}if(l=p.last(p.filter(f,d.isLine(0)))){f=k.renderRangeCaret(a,l.position.toRange());break b}}f=void 0}else f=null}e=f?f:(f=s(a,e,g))?f:null;return e?
(a.selection.setRng(e),!0):!1}}}});s("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(g,f,h){var e=function(b){return g.map(b,function(b){return h.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:f.noop},b)})},c=function(b,c){return g.bind(e(b),function(a){return c.keyCode===a.keyCode&&c.shiftKey===a.shiftKey&&c.altKey===a.altKey&&c.ctrlKey===a.ctrlKey&&c.metaKey===a.metaKey?[a]:[]})};return{match:c,action:function(b){var c=
Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,c)}},execute:function(b,d){return g.find(c(b,d),function(a){return a.action()})}}});s("tinymce.core.keyboard.ArrowKeys",["ephox.sand.api.PlatformDetection","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(g,f,h,e,c){var b=function(b,a,k){var l=g.detect().os;e.execute([{keyCode:c.RIGHT,action:h.moveH(b,!0)},{keyCode:c.LEFT,action:h.moveH(b,
!1)},{keyCode:c.UP,action:h.moveV(b,!1)},{keyCode:c.DOWN,action:h.moveV(b,!0)},{keyCode:c.RIGHT,action:f.move(b,a,!0)},{keyCode:c.LEFT,action:f.move(b,a,!1)},{keyCode:c.RIGHT,ctrlKey:!l.isOSX(),altKey:l.isOSX(),action:f.moveNextWord(b,a)},{keyCode:c.LEFT,ctrlKey:!l.isOSX(),altKey:l.isOSX(),action:f.movePrevWord(b,a)}],k).each(function(a){k.preventDefault()})};return{setup:function(c,a){c.on("keydown",function(e){!1===e.isDefaultPrevented()&&b(c,a,e)})}}});s("tinymce.core.delete.InlineFormatDelete",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.fmt.CaretFormat".split(" "),function(g,f,h,e,c,b,d,a,k,l){var p=function(b,c){var d=k.parentsAndSelf(c,b);return g.findIndex(d,a.isBlock).fold(f.constant(d),function(a){return d.slice(0,a)})},n=function(a){return 1===e.children(a).length},
m=function(a,c,d,e){var k=f.curry(l.isFormatElement,c);e=g.map(g.filter(e,k),function(a){return a.dom()});0===e.length?b.deleteElement(c,a,d):(a=l.replaceWithCaretFormat(d.dom(),e),c.selection.setRng(a.toRange()))},q=function(a,b){var e=h.fromDom(a.getBody()),f=h.fromDom(a.selection.getStart()),k=g.filter(p(e,f),n);return g.last(k).map(function(e){var f=c.fromRangeStart(a.selection.getRng());return d.willDeleteLastPositionInElement(b,f,e.dom())?(m(b,a,e,k),!0):!1}).getOr(!1)};return{backspaceDelete:function(a,
b){return a.selection.isCollapsed()?q(a,b):!1}}});s("tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.InlineFormatDelete tinymce.core.delete.TableDelete tinymce.core.keyboard.MatchKeys tinymce.core.util.VK".split(" "),function(g,f,h,e,c,b,d,a){var k=function(k,p,n){d.execute([{keyCode:a.BACKSPACE,action:d.action(h.backspaceDelete,k,!1)},
{keyCode:a.DELETE,action:d.action(h.backspaceDelete,k,!0)},{keyCode:a.BACKSPACE,action:d.action(e.backspaceDelete,k,p,!1)},{keyCode:a.DELETE,action:d.action(e.backspaceDelete,k,p,!0)},{keyCode:a.BACKSPACE,action:d.action(f.backspaceDelete,k,!1)},{keyCode:a.DELETE,action:d.action(f.backspaceDelete,k,!0)},{keyCode:a.BACKSPACE,action:d.action(g.backspaceDelete,k,!1)},{keyCode:a.DELETE,action:d.action(g.backspaceDelete,k,!0)},{keyCode:a.BACKSPACE,action:d.action(b.backspaceDelete,k,!1)},{keyCode:a.DELETE,
action:d.action(b.backspaceDelete,k,!0)},{keyCode:a.BACKSPACE,action:d.action(c.backspaceDelete,k,!1)},{keyCode:a.DELETE,action:d.action(c.backspaceDelete,k,!0)}],n).each(function(a){n.preventDefault()})};return{setup:function(b,c){b.on("keydown",function(a){!1===a.isDefaultPrevented()&&k(b,c,a)});b.on("keyup",function(c){!1===c.isDefaultPrevented()&&d.execute([{keyCode:a.BACKSPACE,action:d.action(h.paddEmptyElement,b)},{keyCode:a.DELETE,action:d.action(h.paddEmptyElement,b)}],c)})}}});s("tinymce.core.api.Settings",
[],function(){var g=function(f,h,e){var c=f.getParam(h,e);return-1!==c.indexOf("=")?(h=f.getParam(h,"","hash"),h.hasOwnProperty(f.id)?h[f.id]:e):c};return{getIframeAttrs:function(f){return f.getParam("iframe_attrs",{})},getDocType:function(f){return f.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(f){return f.getParam("document_base_url","")},getBodyId:function(f){return g(f,"body_id","tinymce")},getBodyClass:function(f){return g(f,"body_class","")},getContentSecurityPolicy:function(f){return f.getParam("content_security_policy",
"")},shouldPutBrInPre:function(f){return f.getParam("br_in_pre",!0)},getForcedRootBlock:function(f){if(f.getParam("force_p_newlines",!1))return"p";f=f.getParam("forced_root_block","p");return!1===f?"":f},getForcedRootBlockAttrs:function(f){return f.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(f){return f.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(f){return f.getParam("no_newline_selector","")},shouldKeepStyles:function(f){return f.getParam("keep_styles",
!0)},shouldEndContainerOnEmtpyBlock:function(f){return f.getParam("end_container_on_empty_block",!1)}}});s("tinymce.core.newline.NewLineUtils","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.dom.ElementType tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(g,f,h,e,c,b){var d=function(a){return f.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))};return{moveToCaretPosition:function(a,d){var e,f,h,g=d,q=a.dom,t=a.schema.getMoveCaretBeforeOnEnterElements();
if(d){if(/^(LI|DT|DD)$/.test(d.nodeName)){a:{for(e=d.firstChild;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))break a;e=e.nextSibling}e=void 0}e&&/^(UL|OL|DL)$/.test(e.nodeName)&&d.insertBefore(q.doc.createTextNode("\u00a0"),d.firstChild)}h=q.createRng();d.normalize();if(d.hasChildNodes()){for(e=new b(d,d);f=e.current();){if(c.isText(f)){h.setStart(f,0);h.setEnd(f,0);break}if(t[f.nodeName.toLowerCase()]){h.setStartBefore(f);h.setEndBefore(f);break}g=f;e.next()}f||(h.setStart(g,
0),h.setEnd(g,0))}else c.isBr(d)?d.nextSibling&&q.isBlock(d.nextSibling)?(h.setStartBefore(d),h.setEndBefore(d)):(h.setStartAfter(d),h.setEndAfter(d)):(h.setStart(d,0),h.setEnd(d,0));a.selection.setRng(h);q.remove(void 0);a.selection.scrollIntoView(d)}},getEditableRoot:function(a,b){var c=a.getRoot(),d,e;for(d=b;d!==c&&"false"!==a.getContentEditable(d);)"true"===a.getContentEditable(d)&&(e=d),d=d.parentNode;return d!==c?e:c},getParentBlock:d,getParentBlockName:function(a){return d(a).fold(g.constant(""),
function(a){return a.nodeName.toUpperCase()})},isListItemParentBlock:function(a){return d(a).filter(function(a){return e.isListItem(h.fromDom(a))}).isSome()}}});s("tinymce.core.newline.InsertLi",["tinymce.core.dom.NodeType","tinymce.core.newline.NewLineUtils"],function(g,f){var h=function(c){var b=c.parentNode;return/^(LI|DT|DD)$/.test(b.nodeName)?b:c},e=function(c,b,d){for(c=c[d?"firstChild":"lastChild"];c&&!g.isElement(c);)c=c[d?"nextSibling":"previousSibling"];return c===b};return{insert:function(c,
b,d,a,k){var g=c.dom,p=c.selection.getRng();d!==c.getBody()&&(d&&/^(OL|UL|LI)$/.test(d.nodeName)&&d.parentNode&&/^(OL|UL|LI)$/.test(d.parentNode.nodeName)&&(k="LI"),b=k?b(k):g.create("BR"),e(d,a,!0)&&e(d,a,!1)?d&&d.parentNode&&"LI"===d.parentNode.nodeName?g.insertAfter(b,h(d)):g.replace(b,d):e(d,a,!0)?d&&d.parentNode&&"LI"===d.parentNode.nodeName?(g.insertAfter(b,h(d)),b.appendChild(g.doc.createTextNode(" ")),b.appendChild(d)):d.parentNode.insertBefore(b,d):e(d,a,!1)?g.insertAfter(b,h(d)):(d=h(d),
p=p.cloneRange(),p.setStartAfter(a),p.setEndAfter(d),p=p.extractContents(),"LI"===k&&p.firstChild&&"LI"===p.firstChild.nodeName?(b=p.firstChild,g.insertAfter(p,d)):(g.insertAfter(p,d),g.insertAfter(b,d))),g.remove(a),f.moveToCaretPosition(c,b))}}});s("tinymce.core.newline.InsertBlock","tinymce.core.api.Settings tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.newline.InsertLi tinymce.core.newline.NewLineUtils tinymce.core.selection.NormalizeRange tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l){var p=function(a){a.innerHTML='<br data-mce-bogus="1">'},n=function(a,b){return a.nodeName===b||a.previousSibling&&a.previousSibling.nodeName===b},m=function(a,b){return b&&a.isBlock(b)&&!/^(TD|TH|CAPTION|FORM)$/.test(b.nodeName)&&!/^(fixed|absolute)/i.test(b.style.position)&&"true"!==a.getContentEditable(b)},q=function(a,b,c){var d=[];if(c){for(;c=c.firstChild;){if(a.isBlock(c))return;h.isElement(c)&&!b[c.nodeName.toLowerCase()]&&d.push(c)}for(b=d.length;b--;)c=d[b],
!c.hasChildNodes()||c.firstChild===c.lastChild&&""===c.firstChild.nodeValue?a.remove(c):c&&"A"===c.nodeName&&0===l.trim(k.trim(c.innerText||c.textContent)).length&&a.remove(c)}},t=function(a,b,c){return!1===h.isText(b)?c:a?1===c&&b.data.charAt(c-1)===k.ZWSP?0:c:c===b.data.length-1&&b.data.charAt(c)===k.ZWSP?b.data.length:c},r=function(a){var b=a.cloneRange();b.setStart(a.startContainer,t(!0,a.startContainer,a.startOffset));b.setEnd(a.endContainer,t(!1,a.endContainer,a.endOffset));return b},w=function(a){do h.isText(a)&&
(a.nodeValue=a.nodeValue.replace(/^[\r\n]+/,"")),a=a.firstChild;while(a)},s=function(a,b){var c=a.getRoot(),d,e;for(d=b;d!==c&&"false"!==a.getContentEditable(d);)"true"===a.getContentEditable(d)&&(e=d),d=d.parentNode;return d!==c?e:c},v=function(a,b){var c=g.getForcedRootBlock(a);c&&c.toLowerCase()===b.tagName.toLowerCase()&&a.dom.setAttribs(b,g.getForcedRootBlockAttrs(a))},z=function(a,b,c,d,e){var f,k,h,g,l;f=b||"P";b=a.dom;g=s(b,d);k=b.getParent(d,b.isBlock);if(!k||!m(b,k)){k=k||g;l=k===a.getBody()||
k&&/^(TD|TH|CAPTION)$/.test(k.nodeName)?k.nodeName.toLowerCase():k.parentNode.nodeName.toLowerCase();if(!k.hasChildNodes())return f=b.create(f),v(a,f),k.appendChild(f),c.setStart(f,0),c.setEnd(f,0),f;for(g=d;g.parentNode!==k;)g=g.parentNode;for(;g&&!b.isBlock(g);)h=g,g=g.previousSibling;if(h&&a.schema.isValidChild(l,f.toLowerCase())){f=b.create(f);v(a,f);h.parentNode.insertBefore(f,h);for(g=h;g&&!b.isBlock(g);)a=g.nextSibling,f.appendChild(g),g=a;c.setStart(d,e);c.setEnd(d,e)}}return d},u=function(a,
b){var c;b.normalize();(c=b.lastChild)&&!/^(left|right)$/gi.test(a.getStyle(c,"float",!0))||a.add(b,"br")};return{insert:function(k,l){var A,C,D,J,G,E,H,F,L,K,O,I=k.dom,M=k.schema,N=M.getNonEmptyElements(),Q=k.selection.getRng(),T=function(a){var b=D,d,e,f=M.getTextInlineElements();a||"TABLE"===F||"HR"===F?(a=I.create(a||K),v(k,a)):a=G.cloneNode(!1);e=a;if(!1===g.shouldKeepStyles(k))I.setAttrib(a,"style",null),I.setAttrib(a,"class",null);else{do f[b.nodeName]&&!c.isCaretNode(b)&&(d=b.cloneNode(!1),
I.setAttrib(d,"id",""),a.hasChildNodes()?d.appendChild(a.firstChild):e=d,a.appendChild(d));while((b=b.parentNode)&&b!==C)}p(e);return a},X=function(a){var b,c;c=t(a,D,J);if(h.isText(D)&&(a?0<c:c<D.nodeValue.length))return!1;if(D.parentNode===G&&O&&!a||a&&h.isElement(D)&&D===G.firstChild)return!0;if(n(D,"TABLE")||n(D,"HR"))return O&&!a||!O&&a;b=new e(D,G);for(h.isText(D)&&(a&&0===c?b.prev():a||c!==D.nodeValue.length||b.next());c=b.current();){if(h.isElement(c)){if(!c.getAttribute("data-mce-bogus")&&
(c=c.nodeName.toLowerCase(),N[c]&&"br"!==c))return!1}else if(h.isText(c)&&!/^[ \t\r\n]*$/.test(c.nodeValue))return!1;a?b.prev():b.next()}return!0},R=function(){E=/^(H[1-6]|PRE|FIGURE)$/.test(F)&&"HGROUP"!==L?T(K):T();g.shouldEndContainerOnEmtpyBlock(k)&&m(I,H)&&I.isEmpty(G)?E=I.split(H,G):I.insertAfter(E,G);d.moveToCaretPosition(k,E)};a.normalize(I,Q).each(function(a){Q.setStart(a.startContainer,a.startOffset);Q.setEnd(a.endContainer,a.endOffset)});D=Q.startContainer;J=Q.startOffset;K=g.getForcedRootBlock(k);
A=l.shiftKey;h.isElement(D)&&D.hasChildNodes()&&(O=J>D.childNodes.length-1,D=D.childNodes[Math.min(J,D.childNodes.length-1)]||D,J=O&&h.isText(D)?D.nodeValue.length:0);if(C=s(I,D)){if(K&&!A||!K&&A)D=z(k,K,Q,D,J);H=(G=I.getParent(D,I.isBlock))?I.getParent(G.parentNode,I.isBlock):null;F=G?G.nodeName.toUpperCase():"";L=H?H.nodeName.toUpperCase():"";"LI"!==L||l.ctrlKey||(G=H,H=H.parentNode,F=L);/^(LI|DT|DD)$/.test(F)&&I.isEmpty(G)?b.insert(k,T,H,G,K):K&&G===k.getBody()||(K=K||"P",f.isCaretContainerBlock(G)?
(E=f.showCaretContainerBlock(G),I.isEmpty(G)&&p(G),d.moveToCaretPosition(k,E)):X()?R():X(!0)?(E=G.parentNode.insertBefore(T(),G),d.moveToCaretPosition(k,n(G,"HR")?E:G)):(A=r(Q).cloneRange(),A.setEndAfter(G),A=A.extractContents(),w(A),E=A.firstChild,I.insertAfter(A,G),q(I,N,E),u(I,G),I.isEmpty(G)&&p(G),E.normalize(),I.isEmpty(E)?(I.remove(E),R()):d.moveToCaretPosition(k,E)),I.setAttrib(E,"id",""),k.fire("NewBlock",{newBlock:E}))}}}});s("tinymce.core.newline.ContextSelectors",["ephox.sugar.api.node.Element",
"ephox.sugar.api.search.Selectors","tinymce.core.api.Settings","tinymce.core.newline.NewLineUtils"],function(g,f,h,e){var c=function(b,c){return e.getParentBlock(b).filter(function(a){return 0<c.length&&f.is(g.fromDom(a),c)}).isSome()};return{shouldInsertBr:function(b){return c(b,h.getBrNewLineSelector(b))},shouldBlockNewLine:function(b){return c(b,h.getNoNewLineSelector(b))}}});s("tinymce.core.newline.NewLineAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Option tinymce.core.api.Settings tinymce.core.newline.ContextSelectors tinymce.core.newline.NewLineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(g,f,h,e,c,b,d){var a=g.generate([{br:[]},{block:[]},{none:[]}]),k=function(a,b){return c.shouldBlockNewLine(a)},l=function(a){return function(b,c){return""===e.getForcedRootBlock(b)===a}},p=function(a){return function(c,d){return b.isListItemParentBlock(c)===a}},n=function(a){return function(c,d){return"PRE"===b.getParentBlockName(c)===a}},m=function(a){return function(b,c){return e.shouldPutBrInPre(b)===a}},q=function(a,b){return c.shouldInsertBr(a)},t=function(a,b){return b},r=function(a){var c=
e.getForcedRootBlock(a),d=b.getEditableRoot(a.dom,a.selection.getStart());return d&&a.schema.isValidChild(d.nodeName,c?c:"P")},w=function(a,b){return function(c,d){return f.foldl(a,function(a,b){return a&&b(c,d)},!0)?h.some(b):h.none()}};return{getAction:function(b,c){return d.evaluateUntil([w([k],a.none()),w([n(!0),m(!1),t],a.br()),w([n(!0),m(!1)],a.block()),w([n(!0),m(!0),t],a.block()),w([n(!0),m(!0)],a.br()),w([p(!0),t],a.br()),w([p(!0)],a.block()),w([l(!0),t,r],a.block()),w([l(!0)],a.br()),w([q],
a.br()),w([l(!1),t],a.br()),w([r],a.block())],[b,c.shiftKey]).getOr(a.none())}}});s("tinymce.core.newline.InsertNewLine",["ephox.katamari.api.Fun","tinymce.core.newline.InsertBlock","tinymce.core.newline.InsertBr","tinymce.core.newline.NewLineAction"],function(g,f,h,e){return{insert:function(c,b){e.getAction(c,b).fold(function(){h.insert(c,b)},function(){f.insert(c,b)},g.noop)}}});s("tinymce.core.keyboard.EnterKey",["tinymce.core.newline.InsertNewLine","tinymce.core.util.VK"],function(g,f){var h=
function(c){c.typing&&(c.typing=!1,c.add())},e=function(c,b){b.isDefaultPrevented()||(b.preventDefault(),h(c.undoManager),c.undoManager.transact(function(){!1===c.selection.isCollapsed()&&c.execCommand("Delete");g.insert(c,b)}))};return{setup:function(c){c.on("keydown",function(b){b.keyCode===f.ENTER&&e(c,b)})}}});s("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],
function(g,f,h,e,c){var b=function(b,a,c){return c.fold(g.constant(!1),g.constant(!0),g.constant(!0),g.constant(!1))&&h.isText(a.container())?(c=a.container(),a=a.offset(),c.insertData(a,"\u00a0"),b.selection.setCursorLocation(c,a+1),!0):!1};return{insertAtSelection:function(d){if(d.selection.isCollapsed()){var a=g.curry(c.isInlineTarget,d),k=f.fromRangeStart(d.selection.getRng());d=e.readLocation(a,d.getBody(),k).map(g.curry(b,d,k)).getOr(!1)}else d=!1;return d}}});s("tinymce.core.keyboard.SpaceKey",
["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(g,f,h){var e=function(c,b){f.execute([{keyCode:h.SPACEBAR,action:f.action(g.insertAtSelection,c)}],b).each(function(c){b.preventDefault()})};return{setup:function(c){c.on("keydown",function(b){!1===b.isDefaultPrevented()&&e(c,b)})}}});s("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys",
"tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(g,f,h,e,c){return{setup:function(b){var d=f.setupSelectedState(b);g.setup(b,d);h.setup(b,d);e.setup(b);c.setup(b)}}});s("tinymce.core.util.Quirks","global!document global!window tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.selection.CaretRangeFromPoint tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),function(g,f,h,e,c,b,d,a){return function(k){var l=d.each,p=a.BACKSPACE,
n=a.DELETE,m=k.dom,q=k.selection,t=k.settings,r=k.parser,w=h.gecko,s=h.webkit,v=h.ie?"Text":"URL",z=function(a,b){try{k.getDoc().execCommand(a,!1,b)}catch(c){}},u=function(){k.shortcuts.add("meta+a",null,"SelectAll")},y=function(){k.settings.content_editable||m.bind(k.getDoc(),"mousedown mouseup",function(a){var b;a.target==k.getDoc().documentElement&&(b=q.getRng(),k.getBody().focus(),"mousedown"==a.type?e.isCaretContainer(b.startContainer)||q.placeCaretAt(a.clientX,a.clientY):q.setRng(b))})},B=function(){k.on("keydown",
function(a){if(!a.isDefaultPrevented()&&a.keyCode===p&&k.getBody().getElementsByTagName("hr").length&&q.isCollapsed()&&0===q.getRng(!0).startOffset){var b=q.getNode(),c=b.previousSibling;"HR"==b.nodeName?(m.remove(b),a.preventDefault()):c&&c.nodeName&&"hr"===c.nodeName.toLowerCase()&&(m.remove(c),a.preventDefault())}})},A=function(){if(!f.Range.prototype.getClientRects)k.on("mousedown",function(a){if(!a.isDefaultPrevented()&&"HTML"===a.target.nodeName){var c=k.getBody();c.blur();b.setEditorTimeout(k,
function(){c.focus()})}})},C=function(){k.on("click",function(a){var b=a.target;/^(IMG|HR)$/.test(b.nodeName)&&"false"!==m.getContentEditableParent(b)&&(a.preventDefault(),k.selection.select(b),k.nodeChanged());"A"==b.nodeName&&m.hasClass(b,"mce-item-anchor")&&(a.preventDefault(),q.select(b))})},D=function(){var a=function(){var a=m.getAttribs(q.getStart().cloneNode(!1));return function(){var b=q.getStart();b!==k.getBody()&&(m.setAttrib(b,"style",null),l(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}},
c=function(){return!q.isCollapsed()&&m.getParent(q.getStart(),m.isBlock)!=m.getParent(q.getEnd(),m.isBlock)};k.on("keypress",function(b){var d;if(!b.isDefaultPrevented()&&(8==b.keyCode||46==b.keyCode)&&c())return d=a(),k.getDoc().execCommand("delete",!1,null),d(),b.preventDefault(),!1});m.bind(k.getDoc(),"cut",function(d){var e;!d.isDefaultPrevented()&&c()&&(e=a(),b.setEditorTimeout(k,function(){e()}))})},J=function(){k.on("keydown",function(a){if(!a.isDefaultPrevented()&&a.keyCode===p&&q.isCollapsed()&&
0===q.getRng(!0).startOffset){var b=q.getNode().previousSibling;if(b&&b.nodeName&&"table"===b.nodeName.toLowerCase())return a.preventDefault(),!1}})},G=function(){if(!t.readonly)k.on("BeforeExecCommand MouseDown",function(){z("StyleWithCSS",!1);z("enableInlineTableEditing",!1);t.object_resizing||z("enableObjectResizing",!1)})},E=function(){var a=function(){l(m.select("a"),function(a){var b=a.parentNode,c=m.getRoot();if(b.lastChild===a){for(;b&&!m.isBlock(b);){if(b.parentNode.lastChild!==b||b===c)return;
b=b.parentNode}m.add(b,"br",{"data-mce-bogus":1})}})};k.on("SetContent ExecCommand",function(b){"setcontent"!=b.type&&"mceInsertLink"!==b.command||a()})},H=function(){if(t.forced_root_block)k.on("init",function(){z("DefaultParagraphSeparator",t.forced_root_block)})},F=function(){k.on("keyup focusin mouseup",function(b){a.modifierPressed(b)||q.normalize()},!0)},L=function(){if(!k.inline)k.on("keydown",function(){g.activeElement==g.body&&k.getWin().focus()})},K=function(){k.inline||(k.contentStyles.push("body {min-height: 150px}"),
k.on("click",function(a){"HTML"==a.target.nodeName&&(11<h.ie?k.getBody().focus():(a=k.selection.getRng(),k.getBody().focus(),k.selection.setRng(a),k.selection.normalize(),k.nodeChanged()))}))},O=function(){if(h.mac)k.on("keydown",function(b){!a.metaKeyPressed(b)||b.shiftKey||37!=b.keyCode&&39!=b.keyCode||(b.preventDefault(),k.selection.getSel().modify("move",37==b.keyCode?"backward":"forward","lineboundary"))})},I=function(){k.on("click",function(a){var b=a.target;do if("A"===b.tagName){a.preventDefault();
break}while(b=b.parentNode)});k.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=function(){k.on("init",function(){k.dom.bind(k.getBody(),"submit",function(a){a.preventDefault()})})},N=function(){r.addNodeFilter("br",function(a){for(var b=a.length;b--;)"Apple-interchange-newline"==a[b].attr("class")&&a[b].remove()})},Q=function(){k.on("dragstart",function(a){var b;a.dataTransfer&&(k.selection.isCollapsed()&&"IMG"==a.target.tagName&&q.select(a.target),b=k.selection.getContent(),
0<b.length&&(b="data:text/mce-internal,"+escape(k.id)+","+escape(b),a.dataTransfer.setData(v,b)))});k.on("drop",function(a){if(!a.isDefaultPrevented()){var b;a:{if(a.dataTransfer&&(b=a.dataTransfer.getData(v))&&0<=b.indexOf("data:text/mce-internal,")){b=b.substr(23).split(",");b={id:unescape(b[0]),html:unescape(b[1])};break a}b=null}b&&b.id!=k.id&&(a.preventDefault(),a=c.fromPoint(a.x,a.y,k.getDoc()),q.setRng(a),a=b.html,k.queryCommandSupported("mceInsertClipboardContent")?k.execCommand("mceInsertClipboardContent",
!1,{content:a,internal:!0}):k.execCommand("mceInsertContent",!1,a))}})};(function(){k.on("keydown",function(b){var c,d,e,f;if(!b.isDefaultPrevented()&&b.keyCode==a.BACKSPACE&&(b=q.getRng(),c=b.startContainer,d=b.startOffset,e=m.getRoot(),f=c,b.collapsed&&0===d)){for(;f&&f.parentNode&&f.parentNode.firstChild==f&&f.parentNode!=e;)f=f.parentNode;"BLOCKQUOTE"===f.tagName&&(k.formatter.toggle("blockquote",null,f),b=m.createRng(),b.setStart(c,0),b.setEnd(c,0),q.setRng(b))}})})();(function(){var a=function(a){var b=
m.create("body");a=a.cloneContents();b.appendChild(a);return q.serializer.serialize(b,{format:"html"})};k.on("keydown",function(b){var c=b.keyCode,d;if(!b.isDefaultPrevented()&&(c==n||c==p)&&(d=k.selection.isCollapsed(),c=k.getBody(),!d||m.isEmpty(c))){if(d=!d){d=k.selection.getRng();d=a(d);var e=m.createRng();e.selectNode(k.getBody());e=a(e);d=d!==e}d||(b.preventDefault(),k.setContent(""),c.firstChild&&m.isBlock(c.firstChild)?k.selection.setCursorLocation(c.firstChild,0):k.selection.setCursorLocation(c,
0),k.nodeChanged())}})})();h.windowsPhone||F();s&&(y(),C(),H(),M(),J(),N(),h.iOS?(L(),K(),I()):u());11<=h.ie&&(K(),J());h.ie&&(u(),z("AutoUrlDetect",!1),Q());w&&(B(),A(),D(),G(),E(),k.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),O(),J());return{refreshContentEditable:function(){},isHidden:function(){var a;if(!w||k.removed)return 0;a=k.selection.getSel();return!a||!a.rangeCount||0===a.rangeCount}}}});s("tinymce.core.init.InitContentBody","ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr global!document global!window tinymce.core.EditorUpload tinymce.core.ForceBlocks tinymce.core.NodeChange tinymce.core.SelectionOverrides tinymce.core.UndoManager tinymce.core.api.Formatter tinymce.core.api.dom.Serializer tinymce.core.caret.CaretContainerInput tinymce.core.dom.DOMUtils tinymce.core.dom.Selection tinymce.core.html.DomParser tinymce.core.html.Node tinymce.core.html.Schema tinymce.core.keyboard.KeyboardOverrides tinymce.core.util.Delay tinymce.core.util.Quirks tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t,r,w,s,v,z,u,y){var B=q.DOM,A=function(a,b){var c=f.fromDom(a.getDoc().head),d=f.fromTag("style");h.set(d,"type","text/css");g.append(d,f.fromText(b));g.append(c,d)},C=function(a){var b=new r(a.settings,a.schema);b.addAttributeFilter("src,href,style,tabindex",function(b,c){for(var d=b.length,e,f=a.dom,k,h;d--;)e=b[d],k=e.attr(c),h="data-mce-"+c,e.attributes.map[h]||0===k.indexOf("data:")||0===k.indexOf("blob:")||("style"===c?(k=f.serializeStyle(f.parseStyle(k),
e.name),k.length||(k=null),e.attr(h,k),e.attr(c,k)):"tabindex"===c?(e.attr(h,k),e.attr(c,null)):e.attr(h,a.convertURL(k,c,e.name)))});b.addNodeFilter("script",function(a){for(var b=a.length,c,d;b--;)c=a[b],d=c.attr("type")||"no/type",0!==d.indexOf("mce-")&&c.attr("type","mce-"+d)});b.addNodeFilter("#cdata",function(a){for(var b=a.length,c;b--;)c=a[b],c.type=8,c.name="#comment",c.value="[CDATA["+c.value+"]]"});b.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b){for(var c=b.length,d,e=a.schema.getNonEmptyElements();c--;)d=
b[c],d.isEmpty(e)&&0===d.getAll("br").length&&(d.append(new w("br",1)).shortEnded=!0)});return b},D=function(a){a.settings.auto_focus&&z.setEditorTimeout(a,function(){var b;b=!0===a.settings.auto_focus?a:a.editorManager.get(a.settings.auto_focus);b.destroyed||b.focus()},100)},J=function(a){a.bindPendingEventDelegates();a.initialized=!0;a.fire("init");a.focus(!0);a.nodeChanged({initial:!0});a.execCallback("init_instance_callback",a);D(a)};return{initContentBody:function(f,h){var g=f.settings,r=f.getElement(),
w=f.getDoc(),z;g.inline||(f.getElement().style.visibility=f.orgVisibility);h||g.content_editable||(w.open(),w.write(f.iframeHTML),w.close());g.content_editable&&(f.on("remove",function(){var a=this.getBody();B.removeClass(a,"mce-content-body");B.removeClass(a,"mce-edit-focus");B.setAttrib(a,"contentEditable",null)}),B.addClass(r,"mce-content-body"),f.contentDocument=w=g.content_document||e,f.contentWindow=g.content_window||c,f.bodyElement=r,g.content_document=g.content_window=null,g.root_name=r.nodeName.toLowerCase());
r=f.getBody();r.disabled=!0;f.readonly=g.readonly;f.readonly||(f.inline&&"static"===B.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable=f.getParam("content_editable_state",!0));r.disabled=!1;f.editorUpload=new b(f);f.schema=new s(g);f.dom=new q(w,{keep_values:!0,url_converter:f.convertURL,url_converter_scope:f,hex_colors:g.force_hex_style_colors,class_filter:g.class_filter,update_styles:!0,root_element:f.inline?f.getBody():null,collect:g.content_editable,schema:f.schema,onSetAttrib:function(a){f.fire("SetAttrib",
a)}});f.parser=C(f);f.serializer=new n(g,f);f.selection=new t(f.dom,f.getWin(),f.serializer,f);f.formatter=new p(f);f.undoManager=new l(f);f._nodeChangeDispatcher=new a(f);f._selectionOverrides=new k(f);m.setup(f);v.setup(f);d.setup(f);f.fire("PreInit");g.browser_spellcheck||g.gecko_spellcheck||(w.body.spellcheck=!1,B.setAttrib(r,"spellcheck","false"));f.quirks=new u(f);f.fire("PostRender");g.directionality&&(r.dir=g.directionality);g.nowrap&&(r.style.whiteSpace="nowrap");if(g.protect)f.on("BeforeSetContent",
function(a){y.each(g.protect,function(b){a.content=a.content.replace(b,function(a){return"\x3c!--mce:protected "+escape(a)+"--\x3e"})})});f.on("SetContent",function(){f.addVisual(f.getBody())});if(g.padd_empty_editor)f.on("PostProcess",function(a){a.content=a.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});f.load({initial:!0,format:"html"});f.startContent=f.getContent({format:"raw"});f.on("compositionstart compositionend",function(a){f.composing="compositionstart"===
a.type});0<f.contentStyles.length&&(z="",y.each(f.contentStyles,function(a){z+=a+"\r\n"}),f.dom.addStyle(z));(f.inline?B.styleSheetLoader:f.dom.styleSheetLoader).loadAll(f.contentCSS,function(a){J(f)},function(a){J(f)});g.content_style&&A(f,g.content_style)}}});s("tinymce.core.init.InitIframe","ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css global!document global!window tinymce.core.Env tinymce.core.api.Settings tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.util.Uuid".split(" "),
function(g,f,h,e,c,b,d,a,k,l){var p=a.DOM,n=function(a,d){if(e.domain!==c.location.hostname&&b.ie&&12>b.ie){var f=l.uuid("mce");a[f]=function(){k.initContentBody(a)};p.setAttrib(d,"src",'javascript:(function(){document.open();document.domain="'+e.domain+'";var ed = window.parent.tinymce.get("'+a.id+'");document.write(ed.iframeHTML);document.close();ed.'+f+"(true);})()");return!0}return!1},m=function(a){return(a="number"===typeof a?a+"px":a)?a:""},q=function(a,b,c,d){var e=g.fromTag("iframe");f.setAll(e,
d);f.setAll(e,{id:a+"_ifr",frameBorder:"0",allowTransparency:"true",title:b});h.setAll(e,{width:"100%",height:m(c),display:"block"});return e},t=function(a){var b,c,e;e=d.getDocType(a)+"<html><head>";d.getDocumentBaseUrl(a)!==a.documentBaseUrl&&(e+='<base href="'+a.documentBaseURI.getURI()+'" />');e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';b=d.getBodyId(a);c=d.getBodyClass(a);d.getContentSecurityPolicy(a)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+
d.getContentSecurityPolicy(a)+'" />');return e+='</head><body id="'+b+'" class="mce-content-body '+c+'" data-id="'+a.id+'"><br></body></html>'},r=function(a,b){var c=a.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),e=q(a.id,c,b.height,d.getIframeAttrs(a)).dom();e.onload=function(){e.onload=null;a.fire("load")};c=n(a,e);a.contentAreaContainer=b.iframeContainer;a.iframeElement=e;a.iframeHTML=t(a);p.add(b.iframeContainer,e);return c};
return{init:function(a,b){var c=r(a,b);b.editorContainer&&(p.get(b.editorContainer).style.display=a.orgDisplay,a.hidden=p.isHidden(b.editorContainer));a.getElement().style.display="none";p.setAttrib(a.id,"aria-hidden",!0);c||k.initContentBody(a)}}});s("tinymce.core.init.Init","ephox.katamari.api.Type global!document global!window tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.init.InitIframe tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k){var l=b.DOM,p=function(a,b,c){var d=e.get(c),f;f=e.urls[c]||a.documentBaseUrl.replace(/\/$/,"");c=k.trim(c);d&&-1===k.inArray(b,c)&&(k.each(e.dependencies(c),function(c){p(a,b,c)}),a.plugins[c]||(d=new d(a,f,a.$),a.plugins[c]=d,d.init&&(d.init(a,f),b.push(c))))},n=function(a){var b=[];k.each(a.settings.plugins.split(/[ ,]/),function(c){p(a,b,c.replace(/^\-/,""))})},m=function(a){var b,d=a.settings.theme;g.isString(d)?(a.settings.theme=d.replace(/^\-/,""),b=c.get(d),a.theme=
new b(a,c.urls[d]),a.theme.init&&a.theme.init(a,c.urls[d]||a.documentBaseUrl.replace(/\/$/,""),a.$)):a.theme={}},q=function(a){return{editorContainer:a,iframeContainer:a}},t=function(a){var b=a.settings,c=a.getElement();a.orgDisplay=c.style.display;if(g.isString(b.theme)){var d,e,f=a.settings,k=a.getElement();d=f.width||l.getStyle(k,"width")||"100%";b=f.height||l.getStyle(k,"height")||k.offsetHeight;c=f.min_height||100;e=/^[0-9\.]+(|px)$/i;e.test(""+d)&&(d=Math.max(parseInt(d,10),100));e.test(""+
b)&&(b=Math.max(parseInt(b,10),c));a=a.theme.renderUI({targetNode:k,width:d,height:b,deltaWidth:f.delta_width,deltaHeight:f.delta_height});f.content_editable||(b=(a.iframeHeight||b)+("number"===typeof b?a.deltaHeight||0:""),b<c&&(b=c));a.height=b;return a}if(g.isFunction(b.theme))return c=a.getElement(),b=a.settings.theme(a,c),b.editorContainer.nodeType&&(b.editorContainer.id=b.editorContainer.id||a.id+"_parent"),b.iframeContainer&&b.iframeContainer.nodeType&&(b.iframeContainer.id=b.iframeContainer.id||
a.id+"_iframecontainer"),b.height=b.iframeHeight?b.iframeHeight:c.offsetHeight,b;b=a.getElement();a.inline?a=q(null):(a=l.create("div"),l.insertAfter(a,b),a=q(a));return a};return{init:function(b){var c=b.settings,e=b.getElement();b.rtl=c.rtl_ui||b.editorManager.i18n.rtl;b.editorManager.i18n.setCode(c.language);c.aria_label=c.aria_label||l.getAttrib(e,"aria-label",b.getLang("aria.rich_text_area"));b.fire("ScriptsLoaded");m(b);n(b);e=t(b);b.editorContainer=e.editorContainer?e.editorContainer:null;
c.content_css&&k.each(k.explode(c.content_css),function(a){b.contentCSS.push(b.documentBaseURI.toAbsolute(a))});return c.content_editable?d.initContentBody(b):a.init(b,e)}}});s("tinymce.core.init.Render","ephox.katamari.api.Type global!window tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.dom.DOMUtils tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.init.Init tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.util.Tools".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m){var q=c.DOM,t=function(a,b){var c=b.settings;c.language&&"en"!==c.language&&!c.language_url&&(c.language_url=b.editorManager.baseURL+"/langs/"+c.language+".js");c.language_url&&!b.editorManager.i18n.data[c.language]&&a.add(c.language_url)},r=function(a,b,c,d){var e=b.settings,f=e.theme;g.isString(f)?("-"===f.charAt(0)||n.urls.hasOwnProperty(f)||((e=e.theme_url)?n.load(f,b.documentBaseURI.toAbsolute(e)):n.load(f,"themes/"+f+"/theme"+c+".js")),a.loadQueue(function(){n.waitFor(f,
d)})):d()},s=function(a,b){m.isArray(a.plugins)&&(a.plugins=a.plugins.join(" "));m.each(a.external_plugins,function(b,c){p.load(c,b);a.plugins+=" "+c});m.each(a.plugins.split(/[ ,]/),function(a){(a=m.trim(a))&&!p.urls[a]&&("-"===a.charAt(0)?(a=a.substr(1,a.length),a=p.dependencies(a),m.each(a,function(a){a=p.createUrl({prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"},a);p.load(a.resource,a)})):p.load(a,{prefix:"plugins/",resource:a,suffix:"/plugin"+b+".js"}))})},x=function(a,b){var c=d.ScriptLoader;
r(c,a,b,function(){t(c,a);s(a.settings,b);c.loadQueue(function(){a.removed||l.init(a)},a,function(b){k.pluginLoadError(a,b[0]);a.removed||l.init(a)})})};return{render:function(c){var d=c.settings,k=c.id,g=function(){q.unbind(f,"ready",g);c.render()};if(!b.Event.domLoaded)q.bind(f,"ready",g);else if(c.getElement()&&a.contentEditable){d.inline?c.inline=!0:(c.orgVisibility=c.getElement().style.visibility,c.getElement().style.visibility="hidden");var l=c.getElement().form||q.getParent(k,"form");l&&(c.formElement=
l,d.hidden_input&&!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&(q.insertAfter(q.create("input",{type:"hidden",name:k}),k),c.hasHiddenInput=!0),c.formEventDelegate=function(a){c.fire(a.type,a)},q.bind(l,"submit reset",c.formEventDelegate),c.on("reset",function(){c.setContent(c.startContent,{format:"raw"})}),!d.submit_patch||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=function(){c.editorManager.triggerSave();c.setDirty(!1);return l._mceOldSubmit(l)}));
c.windowManager=new e(c);c.notificationManager=new h(c);if("xml"===d.encoding)c.on("GetContent",function(a){a.save&&(a.content=q.encode(a.content))});if(d.add_form_submit_trigger)c.on("submit",function(){c.initialized&&c.save()});d.add_unload_trigger&&(c._beforeUnload=function(){!c.initialized||c.destroyed||c.isHidden()||c.save({format:"raw",no_events:!0,set_dirty:!1})},c.editorManager.on("BeforeUnload",c._beforeUnload));c.editorManager.add(c);x(c,c.suffix)}}}});s("tinymce.core.ui.Sidebar",[],function(){return{add:function(g,
f,h){var e=g.sidebars?g.sidebars:[];e.push({name:f,settings:h});g.sidebars=e}}});s("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(g,f){var h=f.each,e=f.trim,c="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),b={ftp:21,http:80,https:443,mailto:25},d=function(a,b){var f=this,p,n;a=e(a);b=f.settings=b||{};p=b.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))f.source=a;else{var m=0===a.indexOf("//");
0!==a.indexOf("/")||m||(a=(p?p.protocol||"http":"http")+"://mce_host"+a);/^[\w\-]*:?\/\//.test(a)||(n=b.base_uri?b.base_uri.path:(new d(g.location.href)).directory,""===b.base_uri.protocol?a="//mce_host"+f.toAbsPath(n,a):(a=/([^#?]*)([#?]?.*)/.exec(a),a=(p&&p.protocol||"http")+"://mce_host"+f.toAbsPath(n,a[1])+a[2]));a=a.replace(/@@/g,"(mce_at)");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);
h(c,function(b,c){var d=a[c];d&&(d=d.replace(/\(mce_at\)/g,"@@"));f[b]=d});p&&(f.protocol||(f.protocol=p.protocol),f.userInfo||(f.userInfo=p.userInfo),f.port||"mce_host"!==f.host||(f.port=p.port),f.host&&"mce_host"!==f.host||(f.host=p.host),f.source="");m&&(f.protocol="")}};d.prototype={setPath:function(a){a=/^(.*?)\/?(\w+)?$/.exec(a);this.path=a[0];this.directory=a[1];this.file=a[2];this.source="";this.getURI()},toRelative:function(a){var b;if("./"===a)return a;a=new d(a,{base_uri:this});if("mce_host"!=
a.host&&this.host!=a.host&&a.host||this.port!=a.port||this.protocol!=a.protocol&&""!==a.protocol)return a.getURI();b=this.getURI();var c=a.getURI();if(b==c||"/"==b.charAt(b.length-1)&&b.substr(0,b.length-1)==c)return b;b=this.toRelPath(this.path,a.path);a.query&&(b+="?"+a.query);a.anchor&&(b+="#"+a.anchor);return b},toAbsolute:function(a,b){a=new d(a,{base_uri:this});return a.getURI(b&&this.isSameOrigin(a))},isSameOrigin:function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;
var c=b[this.protocol];if(c&&(this.port||c)==(a.port||c))return!0}return!1},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/"));a=a.split("/");c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(1===d)return b;f=0;for(g=a.length-(d-1);f<g;f++)e+="../";f=d-1;for(g=c.length;f<g;f++)e=f!=d-1?e+("/"+c[f]):e+c[f];return e},toAbsPath:function(a,
b){var c,d=0,e=[],f;f=/\/$/.test(b)?"/":"";a=a.split("/");b=b.split("/");h(a,function(a){a&&e.push(a)});a=e;c=b.length-1;for(e=[];0<=c;c--)0!==b[c].length&&"."!==b[c]&&(".."===b[c]?d++:0<d?d--:e.push(b[c]));c=a.length-d;c=0>=c?e.reverse().join("/"):a.slice(0,c).join("/")+"/"+e.reverse().join("/");0!==c.indexOf("/")&&(c="/"+c);f&&c.lastIndexOf("/")!==c.length-1&&(c+=f);return c},getURI:function(a){var b;if(!this.source||a)b="",a||(b=this.protocol?b+(this.protocol+"://"):b+"//",this.userInfo&&(b+=this.userInfo+
"@"),this.host&&(b+=this.host),this.port&&(b+=":"+this.port)),this.path&&(b+=this.path),this.query&&(b+="?"+this.query),this.anchor&&(b+="#"+this.anchor),this.source=b;return this.source}};d.parseDataUri=function(a){var b,c;a=decodeURIComponent(a).split(",");(c=/data:([^;]+)/.exec(a[0]))&&(b=c[1]);return{type:b,data:a[1]}};d.getDocumentBaseUrl=function(a){a=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname;/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,
"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));return a};return d});s("tinymce.core.Editor","tinymce.core.AddOnManager tinymce.core.EditorCommands tinymce.core.EditorObservable tinymce.core.EditorSettings tinymce.core.Env tinymce.core.Mode tinymce.core.Shortcuts tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.TrimHtml tinymce.core.focus.EditorFocus tinymce.core.html.Serializer tinymce.core.init.Render tinymce.core.ui.Sidebar tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.Uuid".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,t,r,s){var x=a.DOM,v=t.extend,z=t.each,u=t.trim,y=t.resolve,B=c.ie;a=function(a,b,h){var l=this,m,p;m=l.documentBaseUrl=h.documentBaseURL;p=h.baseURI;b=e.getEditorSettings(l,a,m,h.defaultSettings,b);l.settings=b;g.language=b.language||"en";g.languageLoad=b.language_load;g.baseURL=h.baseURL;l.id=a;l.setDirty(!1);l.plugins={};l.documentBaseURI=new r(b.document_base_url,{base_uri:p});l.baseURI=p;l.contentCSS=[];l.contentStyles=[];l.shortcuts=new d(l);l.loadedCSS=
{};l.editorCommands=new f(l);l.suffix=h.suffix;l.editorManager=h;l.inline=b.inline;l.buttons={};l.menuItems={};b.cache_suffix&&(c.cacheSuffix=b.cache_suffix.replace(/^[\?\&]+/,""));!1===b.override_viewport&&(c.overrideViewPort=!1);h.fire("SetupEditor",l);l.execCallback("setup",l);l.$=k.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})};a.prototype={render:function(){m.render(this)},focus:function(a){p.focus(this,a)},execCallback:function(a){var b=this.settings[a],
c;if(b)return this.callbackLookup&&(c=this.callbackLookup[a])&&(b=c.func,c=c.scope),"string"===typeof b&&(c=(c=b.replace(/\.\w+$/,""))?y(c):0,b=y(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:c}),b.apply(c||this,Array.prototype.slice.call(arguments,1))},translate:function(a){if(a&&t.is(a,"string")){var b=this.settings.language||"en",c=this.editorManager.i18n;a=c.data[b+"."+a]||a.replace(/\{\#([^\}]+)\}/g,function(a,d){return c.data[b+"."+d]||"{#"+d+"}"})}return this.editorManager.translate(a)},
getLang:function(a,b){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+a]||(void 0!==b?b:"{#"+a+"}")},getParam:function(a,b,c){a=a in this.settings?this.settings[a]:b;var d;return"hash"===c?(d={},"string"===typeof a?z(0<a.indexOf("=")?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(a){a=a.split("=");1<a.length?d[u(a[0])]=u(a[1]):d[u(a[0])]=u(a)}):d=a,d):a},nodeChanged:function(a){this._nodeChangeDispatcher.nodeChanged(a)},addButton:function(a,b){var c=this;b.cmd&&
(b.onclick=function(){c.execCommand(b.cmd)});b.stateSelector&&"undefined"===typeof b.active&&(b.active=!1);b.text||b.icon||(b.icon=a);c.buttons=c.buttons;b.tooltip=b.tooltip||b.title;c.buttons[a]=b},addSidebar:function(a,b){return q.add(this,a,b)},addMenuItem:function(a,b){var c=this;b.cmd&&(b.onclick=function(){c.execCommand(b.cmd)});c.menuItems=c.menuItems;c.menuItems[a]=b},addContextToolbar:function(a,b){var c=this,d;c.contextToolbars=c.contextToolbars||[];"string"==typeof a&&(d=a,a=function(a){return c.dom.is(a,
d)});c.contextToolbars.push({id:s.uuid("mcet"),predicate:a,items:b})},addCommand:function(a,b,c){this.editorCommands.addCommand(a,b,c)},addQueryStateHandler:function(a,b,c){this.editorCommands.addQueryStateHandler(a,b,c)},addQueryValueHandler:function(a,b,c){this.editorCommands.addQueryValueHandler(a,b,c)},addShortcut:function(a,b,c,d){this.shortcuts.add(a,b,c,d)},execCommand:function(a,b,c,d){return this.editorCommands.execCommand(a,b,c,d)},queryCommandState:function(a){return this.editorCommands.queryCommandState(a)},
queryCommandValue:function(a){return this.editorCommands.queryCommandValue(a)},queryCommandSupported:function(a){return this.editorCommands.queryCommandSupported(a)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(x.show(this.getContainer()),x.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var a=this.getDoc();this.hidden||(B&&a&&!this.inline&&a.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this==this.editorManager.focusedEditor&&
(this.editorManager.focusedEditor=null)):(x.hide(this.getContainer()),x.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(a,b){this.fire("ProgressState",{state:a,time:b})},load:function(a){var b=this.getElement(),c;if(this.removed)return"";if(b)return a=a||{},a.load=!0,c=this.setContent(void 0!==b.value?b.value:b.innerHTML,a),a.element=b,a.no_events||this.fire("LoadContent",a),a.element=null,c},save:function(a){var b=
this,c=b.getElement(),d,e;if(c&&b.initialized&&!b.removed)return a=a||{},a.save=!0,a.element=c,d=a.content=b.getContent(a),a.no_events||b.fire("SaveContent",a),"raw"==a.format&&b.fire("RawSaveContent",a),d=a.content,/TEXTAREA|INPUT/i.test(c.nodeName)?c.value=d:(b.inline||(c.innerHTML=d),(e=x.getParent(b.id,"form"))&&z(e.elements,function(a){if(a.name==b.id)return a.value=d,!1})),a.element=c=null,!1!==a.set_dirty&&b.setDirty(!1),d},setContent:function(a,b){var c=this.getBody(),d,e;b=b||{};b.format=
b.format||"html";b.set=!0;b.content=a;b.no_events||this.fire("BeforeSetContent",b);a=b.content;0===a.length||/^\s+$/.test(a)?(e=B&&11>B?"":'<br data-mce-bogus="1">',"TABLE"==c.nodeName?a="<tr><td>"+e+"</td></tr>":/^(UL|OL)$/.test(c.nodeName)&&(a="<li>"+e+"</li>"),(d=this.settings.forced_root_block)&&this.schema.isValidChild(c.nodeName.toLowerCase(),d.toLowerCase())?a=this.dom.createHTML(d,this.settings.forced_root_block_attrs,e):B||a||(a='<br data-mce-bogus="1">'),this.dom.setHTML(c,a),this.fire("SetContent",
b)):("raw"!==b.format&&(a=(new n({validate:this.validate},this.schema)).serialize(this.parser.parse(a,{isRootContent:!0,insert:!0}))),b.content=u(a),this.dom.setHTML(c,b.content),b.no_events||this.fire("SetContent",b));return b.content},getContent:function(a){var b;b=this.getBody();if(this.removed)return"";a=a||{};a.format=a.format||"html";a.get=!0;a.getInner=!0;a.no_events||this.fire("BeforeGetContent",a);if("raw"===a.format)b=t.trim(l.trimExternal(this.serializer,b.innerHTML));else if("text"===
a.format)b=b.innerText||b.textContent;else{if("tree"===a.format)return this.serializer.serialize(b,a);b=this.serializer.serialize(b,a)}a.content="text"!==a.format?u(b):b;a.no_events||this.fire("GetContent",a);return a.content},insertContent:function(a,b){b&&(a=v({content:a},b));this.execCommand("mceInsertContent",!1,a)},isDirty:function(){return!this.isNotDirty},setDirty:function(a){var b=!this.isNotDirty;this.isNotDirty=!a;a&&a!=b&&this.fire("dirty")},setMode:function(a){b.setMode(this,a)},getContainer:function(){this.container||
(this.container=x.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){this.targetElm||(this.targetElm=x.get(this.id));return this.targetElm},getWin:function(){var a;!this.contentWindow&&(a=this.iframeElement)&&(this.contentWindow=a.contentWindow);return this.contentWindow},getDoc:function(){var a;!this.contentDocument&&(a=this.getWin())&&(this.contentDocument=a.document);return this.contentDocument},
getBody:function(){var a=this.getDoc();return this.bodyElement||(a?a.body:null)},convertURL:function(a,b,c){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",a,c,!0,b):!d.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")||0===a.length?a:d.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(a){var b=this,c=b.settings,d=b.dom,e;a=a||b.getBody();void 0===b.hasVisual&&(b.hasVisual=
c.visual);z(d.select("table,a",a),function(a){var f;switch(a.nodeName){case "TABLE":e=c.visual_table_class||"mce-item-table";(f=d.getAttrib(a,"border"))&&"0"!=f||!b.hasVisual?d.removeClass(a,e):d.addClass(a,e);break;case "A":d.getAttrib(a,"href",!1)||(f=d.getAttrib(a,"name")||a.id,e=c.visual_anchor_class||"mce-item-anchor",f&&b.hasVisual?d.addClass(a,e):d.removeClass(a,e))}});b.fire("VisualAid",{element:a,hasVisual:b.hasVisual})},remove:function(){this.removed||(this.save(),this.removed=1,this.unbindAllNativeEvents(),
this.hasHiddenInput&&x.remove(this.getElement().nextSibling),this.inline||(B&&10>B&&this.getDoc().execCommand("SelectAll",!1,null),x.setStyle(this.id,"display",this.orgDisplay),this.getBody().onload=null),this.fire("remove"),this.editorManager.remove(this),x.remove(this.getContainer()),this._selectionOverrides.destroy(),this.editorUpload.destroy(),this.destroy())},destroy:function(a){if(!this.destroyed)if(a||this.removed){a||(this.editorManager.off("beforeunload",this._beforeUnload),this.theme&&this.theme.destroy&&
this.theme.destroy(),this.selection.destroy(),this.dom.destroy());if(a=this.formElement)a._mceOldSubmit&&(a.submit=a._mceOldSubmit,a._mceOldSubmit=null),x.unbind(a,"submit reset",this.formEventDelegate);this.iframeElement=this.targetElm=this.bodyElement=this.contentDocument=this.contentWindow=this.contentAreaContainer=this.formElement=this.container=this.editorContainer=null;this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null);this.destroyed=1}else this.remove()},
uploadImages:function(a){return this.editorUpload.uploadImages(a)},_scanForImages:function(){return this.editorUpload.scanForImages()}};v(a.prototype,h);return a});s("tinymce.core.api.FocusManager",["global!document"],function(g){return{isEditorUIElement:function(f){return-1!==f.className.toString().indexOf("mce-")}}});s("tinymce.core.selection.SelectionRestore",["ephox.katamari.api.Throttler","ephox.sand.api.PlatformDetection","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark"],
function(g,f,h,e,c){var b=function(a,b){var c=function(){b.throttle()};e.DOM.bind(h,"mouseup",c);a.on("remove",function(){e.DOM.unbind(h,"mouseup",c)})},d=function(a){a.on("focusout",function(){c.store(a)})},a=function(a,b){a.on("mouseup touchend",function(a){b.throttle()})},k=function(b,e){var g=f.detect().browser;g.isIE()||g.isEdge()?d(b):a(b,e);b.on("keyup nodechange",function(a){"nodechange"===a.type&&a.selectionChange||c.store(b)})};return{register:function(a){var d=g.first(function(){c.store(a)},
0);a.inline&&b(a,d);a.on("init",function(){k(a,d)});a.on("remove",function(){d.cancel()})}}});s("tinymce.core.focus.FocusController","ephox.katamari.api.Fun global!document tinymce.core.api.FocusManager tinymce.core.dom.DOMUtils tinymce.core.selection.SelectionRestore tinymce.core.util.Delay".split(" "),function(g,f,h,e,c,b){var d,a=e.DOM,k=function(a){return h.isEditorUIElement(a)},l=function(b,c){var d=b?b.settings.custom_ui_selector:"";return null!==a.getParent(c,function(a){return k(a)||(d?b.dom.is(a,
d):!1)})},p=function(e,g){var h=g.editor;c.register(h);h.on("focusin",function(){var a=e.focusedEditor;a!=h&&(a&&a.fire("blur",{focusedEditor:h}),e.setActive(h),e.focusedEditor=h,h.fire("focus",{blurredEditor:a}),h.focus(!0))});h.on("focusout",function(){b.setEditorTimeout(h,function(){var a=e.focusedEditor,b;try{b=f.activeElement}catch(c){b=f.body}l(h,b)||a!=h||(h.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})});d||(d=function(a){var b=e.activeEditor;a=a.target;b&&a.ownerDocument===f&&
a!==f.body&&!l(b,a)&&e.focusedEditor===b&&(b.fire("blur",{focusedEditor:null}),e.focusedEditor=null)},a.bind(f,"focusin",d))},n=function(b,c){b.focusedEditor==c.editor&&(b.focusedEditor=null);b.activeEditor||(a.unbind(f,"focusin",d),d=null)};return{setup:function(a){a.on("AddEditor",g.curry(p,a));a.on("RemoveEditor",g.curry(n,a))},isEditorUIElement:k,isUIElement:l}});s("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(g){var f={},h="en";return{setCode:function(e){e&&(h=e,this.rtl=this.data[e]?
"rtl"===this.data[e]._dir:!1)},getCode:function(){return h},rtl:!1,add:function(e,c){var b=f[e];b||(f[e]=b={});for(var d in c)b[d]=c[d];this.setCode(e)},translate:function(e){var c=f[h]||{},b=function(a){return g.is(a,"function")?Object.prototype.toString.call(a):d(a)?"":""+a},d=function(a){return""===a||null===a||g.is(a,"undefined")},a=function(a){a=b(a);return g.hasOwn(c,a)?b(c[a]):a};if(d(e))return"";if(g.is(e,"object")&&g.hasOwn(e,"raw"))return b(e.raw);if(g.is(e,"array")){var k=e.slice(1);e=
a(e[0]).replace(/\{([0-9]+)\}/g,function(a,c){return g.hasOwn(k,c)?b(k[c]):a})}return a(e).replace(/{context:\w+}$/,"")},data:f}});s("tinymce.core.EditorManager","ephox.katamari.api.Arr ephox.katamari.api.Type global!document global!window tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.focus.FocusController tinymce.core.util.I18n tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,s,r){var w=k.DOM,x=s.explode,v=s.each,z=s.extend,u=0,y,B,A=!1,C=[],D=[],J=function(a){v(B.get(),function(b){"scroll"===a.type?b.fire("ScrollWindow",a):b.fire("ResizeWindow",a)})},G=function(a){if(a!==A){if(a)l(e).on("resize scroll",J);else l(e).off("resize scroll",J);A=a}},E=function(a){var b=D;delete C[a.id];for(var c=0;c<C.length;c++)if(C[c]===a){C.splice(c,1);break}D=g.filter(D,function(b){return a!==b});B.activeEditor===a&&(B.activeEditor=0<D.length?D[0]:null);
B.focusedEditor===a&&(B.focusedEditor=null);return b.length!==D.length};B={defaultSettings:{},$:l,majorVersion:"4",minorVersion:"7.3",releaseDate:"2017-11-23",editors:C,i18n:n,activeEditor:null,settings:{},setup:function(){var a,b,c="",d;b=r.getDocumentBaseUrl(h.location);/^[^:]+:\/\/\/?[^\/]+\//.test(b)&&(b=b.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(b)||(b+="/"));if(d=e.tinymce||e.tinyMCEPreInit)a=d.base||d.baseURL,c=d.suffix;else{for(var f=h.getElementsByTagName("script"),
g=0;g<f.length;g++){d=f[g].src;var k=d.substring(d.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(d)){-1!=k.indexOf(".min")&&(c=".min");a=d.substring(0,d.lastIndexOf("/"));break}}!a&&h.currentScript&&(d=h.currentScript.src,-1!=d.indexOf(".min")&&(c=".min"),a=d.substring(0,d.lastIndexOf("/")))}this.baseURL=(new r(b)).toAbsolute(a);this.documentBaseURL=b;this.baseURI=new r(this.baseURL);this.suffix=c;p.setup(this)},overrideDefaults:function(a){var b;if(b=a.base_url)this.baseURL=
(new r(this.documentBaseURL)).toAbsolute(b.replace(/\/+$/,"")),this.baseURI=new r(this.baseURL);if(b=a.suffix)this.suffix=b;this.defaultSettings=a;a=a.plugin_base_urls;for(var d in a)c.PluginManager.urls[d]=a[d]},init:function(c){var f=this,g,k;k=s.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var m=function(a){var b=a.id;b||(b=(b=a.name)&&
!w.get(b)?a.name:w.uniqueId(),a.setAttribute("id",b));return b},p=function(a){var b=c[a];if(b)return b.apply(f,Array.prototype.slice.call(arguments,2))},n=function(b){var c,e=[];if(d.ie&&11>d.ie)return a.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(b.types)return v(b.types,function(a){e=e.concat(w.select(a.selector))}),e;if(b.selector)return w.select(b.selector);if(b.target)return[b.target];
switch(b.mode){case "exact":c=b.elements||"";0<c.length&&v(x(c),function(a){var b;(b=w.get(a))?e.push(b):v(h.forms,function(b){v(b.elements,function(b){b.name===a&&(a="mce_editor_"+u++,w.setAttrib(b,"id",a),e.push(b))})})});break;case "textareas":case "specific_textareas":v(w.select("textarea"),function(a){b.editor_deselector&&(b.editor_deselector.constructor===RegExp?b.editor_deselector.test(a.className):w.hasClass(a,b.editor_deselector))||(!b.editor_selector||(b.editor_selector.constructor===RegExp?
b.editor_selector.test(a.className):w.hasClass(a,b.editor_selector)))&&e.push(a)})}return e},r=function(a){g=a},y=function(){var d=0,g=[],h,q=function(a,c,e){a=new b(a,c,f);g.push(a);a.on("init",function(){++d===h.length&&r(g)});a.targetElm=a.targetElm||e;a.render()};w.unbind(e,"ready",y);p("onpageload");h=l.unique(n(c));c.types?v(c.types,function(a){s.each(h,function(b){return w.is(b,a.selector)?(q(m(b),z({},c,a),b),!1):!0})}):(s.each(h,function(a){(a=f.get(a.id))&&a.initialized&&!(a.getContainer()||
a.getBody()).parentNode&&(E(a),a.unbindAllNativeEvents(),a.destroy(!0),a.removed=!0)}),h=s.grep(h,function(a){return!f.get(a.id)}),0===h.length?r([]):v(h,function(b){c.inline&&b.tagName.toLowerCase()in k?a.initError("Could not initialize inline editor on invalid inline target element",b):q(m(b),c,b)}))};f.settings=c;w.bind(e,"ready",y);return new q(function(a){g?a(g):r=function(b){a(b)}})},get:function(a){return 0===arguments.length?D.slice(0):f.isString(a)?g.find(D,function(b){return b.id===a}).getOr(null):
f.isNumber(a)?D[a]?D[a]:null:null},add:function(a){var b=this;if(C[a.id]===a)return a;null===b.get(a.id)&&("length"!==a.id&&(C[a.id]=a),C.push(a),D.push(a));G(!0);b.activeEditor=a;b.fire("AddEditor",{editor:a});y||(y=function(){b.fire("BeforeUnload")},w.bind(e,"beforeunload",y));return a},createEditor:function(a,c){return this.add(new b(a,c,this))},remove:function(a){var b=this,c;if(a)if(f.isString(a))a=a.selector||a,v(w.select(a),function(a){(c=b.get(a.id))&&b.remove(c)});else{c=a;if(f.isNull(b.get(c.id)))return null;
E(c)&&b.fire("RemoveEditor",{editor:c});0===D.length&&w.unbind(e,"beforeunload",y);c.remove();G(0<D.length);return c}else for(a=D.length-1;0<=a;a--)b.remove(D[a])},execCommand:function(a,c,d){var e=this.get(d);switch(a){case "mceAddEditor":return this.get(d)||(new b(d,this.settings,this)).render(),!0;case "mceRemoveEditor":return e&&e.remove(),!0;case "mceToggleEditor":if(!e)return this.execCommand("mceAddEditor",0,d),!0;e.isHidden()?e.show():e.hide();return!0}return this.activeEditor?this.activeEditor.execCommand(a,
c,d):!1},triggerSave:function(){v(D,function(a){a.save()})},addI18n:function(a,b){n.add(a,b)},translate:function(a){return n.translate(a)},setActive:function(a){var b=this.activeEditor;this.activeEditor!=a&&(b&&b.fire("deactivate",{relatedTarget:a}),a.fire("activate",{relatedTarget:b}));this.activeEditor=a}};z(B,m);B.setup();return B});s("tinymce.core.api.dom.RangeUtils","ephox.katamari.api.Fun tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.NormalizeRange tinymce.core.selection.RangeCompare tinymce.core.selection.RangeNodes tinymce.core.selection.RangeWalk tinymce.core.selection.SplitRange".split(" "),
function(g,f,h,e,c,b,d){var a=function(a){return{walk:function(c,d){return b.walk(a,c,d)},split:d.split,normalize:function(b){return h.normalize(a,b).fold(g.constant(!1),function(a){b.setStart(a.startContainer,a.startOffset);b.setEnd(a.endContainer,a.endOffset);return!0})}}};a.compareRanges=e.isEq;a.getCaretRangeFromPoint=f.fromPoint;a.getSelectedNode=c.getSelectedNode;a.getNode=c.getNode;return a});s("tinymce.core.geom.Rect",[],function(){var g=Math.min,f=Math.max,h=Math.round,e=function(b,d,a){var e,
f,g,n;e=d.x;f=d.y;g=b.w;b=b.h;n=d.w;d=d.h;a=(a||"").split("");"b"===a[0]&&(f+=d);"r"===a[1]&&(e+=n);"c"===a[0]&&(f+=h(d/2));"c"===a[1]&&(e+=h(n/2));"b"===a[3]&&(f-=b);"r"===a[4]&&(e-=g);"c"===a[3]&&(f-=h(b/2));"c"===a[4]&&(e-=h(g/2));return c(e,f,g,b)},c=function(b,c,a,e){return{x:b,y:c,w:a,h:e}};return{inflate:function(b,d,a){return c(b.x-d,b.y-a,b.w+2*d,b.h+2*a)},relativePosition:e,findBestRelativePosition:function(b,c,a,f){var g,h;for(h=0;h<f.length;h++)if(g=e(b,c,f[h]),g.x>=a.x&&g.x+g.w<=a.w+
a.x&&g.y>=a.y&&g.y+g.h<=a.h+a.y)return f[h];return null},intersect:function(b,d){var a,e,h,p;a=f(b.x,d.x);e=f(b.y,d.y);h=g(b.x+b.w,d.x+d.w);p=g(b.y+b.h,d.y+d.h);return 0>h-a||0>p-e?null:c(a,e,h-a,p-e)},clamp:function(b,d,a){var e,g,h,n,m,q;h=b.x;n=b.y;m=b.x+b.w;q=b.y+b.h;e=d.x+d.w;g=d.y+d.h;b=f(0,d.x-h);d=f(0,d.y-n);e=f(0,m-e);g=f(0,q-g);h+=b;n+=d;a&&(m+=b,q+=d,h-=e,n-=g);return c(h,n,m-e-h,q-g-n)},create:c,fromClientRect:function(b){return c(b.left,b.top,b.width,b.height)}}});s("tinymce.core.ui.Factory",
[],function(){var g={};return{add:function(f,h){g[f.toLowerCase()]=h},has:function(f){return!!g[f.toLowerCase()]},get:function(f){var h=f.toLowerCase(),h=g.hasOwnProperty(h)?g[h]:null;if(null===h)throw Error("Could not find module for type: "+f);return h},create:function(f,h){var e;"string"==typeof f?(h=h||{},h.type=f):(h=f,f=h.type);f=f.toLowerCase();e=g[f];if(!e)throw Error("Could not find control by type: "+f);e=new e(h);e.type=f;return e}}});s("tinymce.core.util.Class",["tinymce.core.util.Tools"],
function(g){var f=g.each,h=g.extend,e,c;g=function(){};g.extend=e=function(b){var d=this.prototype,a,g,l,p=function(){var a,b,d;if(!c&&(this.init&&this.init.apply(this,arguments),b=this.Mixins))for(a=b.length;a--;)d=b[a],d.init&&d.init.apply(this,arguments)},n=function(){return this},m=function(a,b){return function(){var c=this._super,e;this._super=d[a];e=b.apply(this,arguments);this._super=c;return e}};c=!0;a=new this;c=!1;b.Mixins&&(f(b.Mixins,function(a){for(var c in a)"init"!==c&&(b[c]=a[c])}),
d.Mixins&&(b.Mixins=d.Mixins.concat(b.Mixins)));b.Methods&&f(b.Methods.split(","),function(a){b[a]=n});b.Properties&&f(b.Properties.split(","),function(a){var c="_"+a;b[a]=function(a){return void 0!==a?(this[c]=a,this):this[c]}});b.Statics&&f(b.Statics,function(a,b){p[b]=a});b.Defaults&&d.Defaults&&(b.Defaults=h({},d.Defaults,b.Defaults));for(g in b)l=b[g],a[g]="function"==typeof l&&d[g]?m(g,l):l;p.prototype=a;p.constructor=p;p.extend=e;return p};return g});s("tinymce.core.util.Color",[],function(){var g=
Math.min,f=Math.max,h=Math.round;return function(e){var c=this,b=0,d=0,a=0,k=function(e){var k;if("object"==typeof e)if("r"in e)b=e.r,d=e.g,a=e.b;else{if("v"in e){k=e.h;var n=e.s;e=e.v;var m;k=(parseInt(k,10)||0)%360;n=parseInt(n,10)/100;e=parseInt(e,10)/100;n=f(0,g(n,1));e=f(0,g(e,1));if(0===n)b=d=a=h(255*e);else{k/=60;n*=e;m=n*(1-Math.abs(k%2-1));e-=n;switch(Math.floor(k)){case 0:b=n;d=m;a=0;break;case 1:b=m;d=n;a=0;break;case 2:b=0;d=n;a=m;break;case 3:b=0;d=m;a=n;break;case 4:b=m;d=0;a=n;break;
case 5:b=n;d=0;a=m;break;default:b=d=a=0}b=h(255*(b+e));d=h(255*(d+e));a=h(255*(a+e))}}}else if(k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))b=parseInt(k[1],10),d=parseInt(k[2],10),a=parseInt(k[3],10);else if(k=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))b=parseInt(k[1],16),d=parseInt(k[2],16),a=parseInt(k[3],16);else if(k=/#([0-F])([0-F])([0-F])/gi.exec(e))b=parseInt(k[1]+k[1],16),d=parseInt(k[2]+k[2],16),a=parseInt(k[3]+k[3],16);b=0>b?0:255<b?255:b;d=0>d?0:255<d?255:d;
a=0>a?0:255<a?255:a;return c};e&&k(e);c.toRgb=function(){return{r:b,g:d,b:a}};c.toHsv=function(){var c;var e=b,k=d,m=a,q,e=e/255,k=k/255,m=m/255;q=g(e,g(k,m));c=f(e,f(k,m));q==c?c={h:0,s:0,v:100*q}:(e=60*((e==q?3:m==q?1:5)-(e==q?k-m:m==q?e-k:m-e)/(c-q)),q=(c-q)/c,c={h:h(e),s:h(100*q),v:h(100*c)});return c};c.toHex=function(){var c=function(a){a=parseInt(a,10).toString(16);return 1<a.length?a:"0"+a};return"#"+c(b)+c(d)+c(a)};c.parse=k}});s("tinymce.core.util.JSON",["global!window"],function(g){var f=
function(g,e){var c,b,d,a;e=e||'"';if(null===g)return"null";d=typeof g;if("string"==d)return b="\bb\tt\nn\ff\rr\"\"''\\\\",e+g.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,d){if('"'===e&&"'"===a)return a;c=b.indexOf(d);if(c+1)return"\\"+b.charAt(c+1);a=d.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+e;if("object"==d){if(g.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(g)){c=0;for(b="[";c<g.length;c++)b+=(0<c?",":"")+f(g[c],e);return b+"]"}b="{";
for(a in g)g.hasOwnProperty(a)&&(b+="function"!=typeof g[a]?(1<b.length?","+e:e)+a+e+":"+f(g[a],e):"");return b+"}"}return""+g};return{serialize:f,parse:function(f){try{return g[String.fromCharCode(101)+"val"]("("+f+")")}catch(e){}}}});s("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(g){return{callbacks:{},count:0,send:function(f){var h=this,e=g.DOM,c=void 0!==f.count?f.count:h.count,b="tinymce_jsonp_"+c;h.callbacks[c]=function(d){e.remove(b);delete h.callbacks[c];f.callback(d)};
e.add(e.doc.body,"script",{id:b,src:f.url,type:"text/javascript"});h.count++}}});s("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(g,f,h,e){var c={send:function(b){var d,a=0,h=function(){!b.async||4==d.readyState||1E4<a++?(b.success&&1E4>a&&200==d.status?b.success.call(b.success_scope,""+d.responseText,d,b):b.error&&b.error.call(b.error_scope,1E4<a?"TIMED_OUT":"GENERAL",d,b),d=null):f(h,10)};b.scope=b.scope||
this;b.success_scope=b.success_scope||b.scope;b.error_scope=b.error_scope||b.scope;b.async=!1===b.async?!1:!0;b.data=b.data||"";c.fire("beforeInitialize",{settings:b});if(d=new g){d.overrideMimeType&&d.overrideMimeType(b.content_type);d.open(b.type||(b.data?"POST":"GET"),b.url,b.async);b.crossDomain&&(d.withCredentials=!0);b.content_type&&d.setRequestHeader("Content-Type",b.content_type);b.requestheaders&&e.each(b.requestheaders,function(a){d.setRequestHeader(a.key,a.value)});d.setRequestHeader("X-Requested-With",
"XMLHttpRequest");d=c.fire("beforeSend",{xhr:d,settings:b}).xhr;d.send(b.data);if(!b.async)return h();f(h,10)}}};e.extend(c,h);return c});s("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(g,f,h){var e=h.extend,c=function(b){this.settings=e({},b);this.count=0};c.sendRPC=function(b){return(new c).send(b)};c.prototype={send:function(b){var c=b.error,a=b.success;b=e(this.settings,b);b.success=function(e,f){e=g.parse(e);"undefined"==
typeof e&&(e={error:"JSON Parse error."});e.error?c.call(b.error_scope||b.scope,e.error,f):a.call(b.success_scope||b.scope,e.result)};b.error=function(a,e){c&&c.call(b.error_scope||b.scope,a,e)};b.data=g.serialize({id:b.id||"c"+this.count++,method:b.method,params:b.params});b.content_type="application/json";f.send(b)}};return c});s("tinymce.core.util.LocalStorage",["global!document","global!window"],function(g,f){var h,e,c,b,d;try{if(f.localStorage)return f.localStorage}catch(a){}e=g.documentElement;
(d=!!e.addBehavior)&&e.addBehavior("#default#userData");var k=function(){b=[];for(var a in c)b.push(a);h.length=b.length},l=function(){var a,b="";if(d){for(var f in c)a=c[f],b+=(b?",":"")+f.length.toString(32)+","+f+","+a.length.toString(32)+","+a;e.setAttribute("tinymce",b);try{e.save("tinymce")}catch(g){}k()}};h={key:function(a){return b[a]},getItem:function(a){return a in c?c[a]:null},setItem:function(a,b){c[a]=""+b;l()},removeItem:function(a){delete c[a];l()},clear:function(){c={};l()}};(function(){var a,
b,f,g=0;c={};if(d){var h=function(a){var c;c=void 0!==a?g+a:b.indexOf(",",g);if(-1===c||c>b.length)return null;a=b.substring(g,c);g=c+1;return a};e.load("tinymce");b=e.getAttribute("tinymce")||"";do{f=h();if(null===f)break;a=h(parseInt(f,32)||0);if(null!==a){f=h();if(null===f)break;f=h(parseInt(f,32)||0);a&&(c[a]=f)}}while(null!==a);k()}})();return h});s("tinymce.core.api.Tinymce","tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.EditorCommands tinymce.core.EditorManager tinymce.core.EditorObservable tinymce.core.Env tinymce.core.Shortcuts tinymce.core.UndoManager tinymce.core.api.FocusManager tinymce.core.api.Formatter tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.api.dom.BookmarkManager tinymce.core.api.dom.RangeUtils tinymce.core.api.dom.Serializer tinymce.core.dom.ControlSelection tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.dom.Selection tinymce.core.dom.Sizzle tinymce.core.dom.TreeWalker tinymce.core.geom.Rect tinymce.core.html.DomParser tinymce.core.html.Entities tinymce.core.html.Node tinymce.core.html.SaxParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.html.Styles tinymce.core.html.Writer tinymce.core.ui.Factory tinymce.core.util.Class tinymce.core.util.Color tinymce.core.util.Delay tinymce.core.util.EventDispatcher tinymce.core.util.I18n tinymce.core.util.JSON tinymce.core.util.JSONP tinymce.core.util.JSONRequest tinymce.core.util.LocalStorage tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.VK tinymce.core.util.XHR".split(" "),
function(g,f,h,e,c,b,d,a,k,l,p,n,m,q,s,r,w,x,v,z,u,y,B,A,C,D,J,G,E,H,F,L,K,O,I,M,N,Q,T,S,R,U,W,Z,P,V,ba,da){return g=P.extend(e,{geom:{Rect:A},util:{Promise:Z,Delay:M,Tools:P,VK:ba,URI:V,Class:O,EventDispatcher:N,Observable:W,I18n:Q,XHR:da,JSON:T,JSONRequest:R,JSONP:S,LocalStorage:U,Color:I},dom:{EventUtils:v,Sizzle:y,DomQuery:x,TreeWalker:B,DOMUtils:w,ScriptLoader:z,RangeUtils:q,Serializer:s,ControlSelection:r,BookmarkManager:m,Selection:u,Event:v.Event},html:{Styles:F,Entities:D,Node:J,Schema:E,
SaxParser:G,DomParser:C,Writer:L,Serializer:H},ui:{Factory:K},Env:b,AddOnManager:g,Formatter:l,UndoManager:a,EditorCommands:h,WindowManager:n,NotificationManager:p,EditorObservable:c,Shortcuts:d,Editor:f,FocusManager:k,EditorManager:e,DOM:w.DOM,ScriptLoader:z.ScriptLoader,PluginManager:g.PluginManager,ThemeManager:g.ThemeManager,trim:P.trim,isArray:P.isArray,is:P.is,toArray:P.toArray,makeMap:P.makeMap,each:P.each,map:P.map,grep:P.grep,inArray:P.inArray,extend:P.extend,create:P.create,walk:P.walk,
createNS:P.createNS,resolve:P.resolve,explode:P.explode,_addCacheSuffix:P._addCacheSuffix,isOpera:b.opera,isWebKit:b.webkit,isIE:b.ie,isGecko:b.gecko,isMac:b.mac})});s("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(g,f,h){var e=this||f;return function(){f.tinymce=h;f.tinyMCE=h;"function"!==typeof e.define||e.define.amd||(e.define("ephox/tinymce",[],g.constant(h)),e.define("tinymce.core.EditorManager",[],g.constant(h)));"object"===typeof module&&
(module.exports=h);return h}});ea("tinymce.core.api.Main")()})();

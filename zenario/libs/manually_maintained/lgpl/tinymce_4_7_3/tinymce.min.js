var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(la){var L=0;return function(){return L<la.length?{done:!1,value:la[L++]}:{done:!0}}};$jscomp.arrayIterator=function(la){return{next:$jscomp.arrayIteratorImpl(la)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(la,L,qa){if(la==Array.prototype||la==Object.prototype)return la;la[L]=qa.value;return la};$jscomp.getGlobal=function(la){la=["object"==typeof globalThis&&globalThis,la,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var L=0;L<la.length;++L){var qa=la[L];if(qa&&qa.Math==Math)return qa}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(la,L){var qa=$jscomp.propertyToPolyfillSymbol[L];if(null==qa)return la[L];qa=la[qa];return void 0!==qa?qa:la[L]};
$jscomp.polyfill=function(la,L,qa,ra){L&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(la,L,qa,ra):$jscomp.polyfillUnisolated(la,L,qa,ra))};$jscomp.polyfillUnisolated=function(la,L,qa,ra){qa=$jscomp.global;la=la.split(".");for(ra=0;ra<la.length-1;ra++){var v=la[ra];if(!(v in qa))return;qa=qa[v]}la=la[la.length-1];ra=qa[la];L=L(ra);L!=ra&&null!=L&&$jscomp.defineProperty(qa,la,{configurable:!0,writable:!0,value:L})};
$jscomp.polyfillIsolated=function(la,L,qa,ra){var v=la.split(".");la=1===v.length;ra=v[0];ra=!la&&ra in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<v.length-1;q++){var p=v[q];if(!(p in ra))return;ra=ra[p]}v=v[v.length-1];qa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===qa?ra[v]:null;L=L(qa);null!=L&&(la?$jscomp.defineProperty($jscomp.polyfills,v,{configurable:!0,writable:!0,value:L}):L!==qa&&(void 0===$jscomp.propertyToPolyfillSymbol[v]&&(qa=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[v]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(v):$jscomp.POLYFILL_PREFIX+qa+"$"+v),$jscomp.defineProperty(ra,$jscomp.propertyToPolyfillSymbol[v],{configurable:!0,writable:!0,value:L})))};$jscomp.initSymbol=function(){};$jscomp.iteratorPrototype=function(la){la={next:la};la[Symbol.iterator]=function(){return this};return la};
$jscomp.polyfill("String.prototype.matchAll",function(la){return la?la:function(L){if(L instanceof RegExp&&!L.global)throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag.");var qa=new RegExp(L,L instanceof RegExp?void 0:"g"),ra=this,v=!1,q={next:function(){if(v)return{value:void 0,done:!0};var p=qa.exec(ra);if(!p)return v=!0,{value:void 0,done:!0};""===p[0]&&(qa.lastIndex+=1);return{value:p,done:!1}}};q[Symbol.iterator]=function(){return q};return q}},"es_2020",
"es3");
(function(){var la={},L=function(v,q,p){if("string"!==typeof v)throw"module id must be a string";if(void 0===q)throw"no dependencies for "+v;if(void 0===p)throw"no definition function for "+v;la[v]={deps:q,defn:p,instance:void 0}},qa=function(v){var q=la[v];if(void 0===q)throw"module ["+v+"] was undefined";if(void 0===q.instance){for(var p=la[v],h=p.deps,b=p.defn,c=h.length,d=Array(c),a=0;a<c;++a)d[a]=qa(h[a]);h=b.apply(null,d);if(void 0===h)throw"module ["+v+"] returned undefined";p.instance=h}return q.instance},
ra=function(v,q){L(v,[],function(){return q})};ra("global!Array",Array);ra("global!Error",Error);L("ephox.katamari.api.Fun",["global!Array","global!Error"],function(v,q){var p=function(c){return function(){return c}},h=p(!1),b=p(!0);return{noop:function(){},compose:function(c,d){return function(){return c(d.apply(null,arguments))}},constant:p,identity:function(c){return c},tripleEquals:function(c,d){return c===d},curry:function(c){for(var d=new v(arguments.length-1),a=1;a<arguments.length;a++)d[a-
1]=arguments[a];return function(){for(var f=new v(arguments.length),n=0;n<f.length;n++)f[n]=arguments[n];f=d.concat(f);return c.apply(null,f)}},not:function(c){return function(){return!c.apply(null,arguments)}},die:function(c){return function(){throw new q(c);}},apply:function(c){return c()},call:function(c){c()},never:h,always:b}});ra("global!window",window);ra("global!Object",Object);L("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(v,q){var p=v.never,h=v.always,
b=function(){return c},c=function(){var a=function(u){return u.isNone()},f=function(u){return u()},n=function(u){return u};a={fold:function(u,z){return u()},is:p,isSome:p,isNone:h,getOr:n,getOrThunk:f,getOrDie:function(u){throw Error(u||"error: getOrDie called on none.");},or:n,orThunk:f,map:b,ap:b,each:function(){},bind:b,flatten:b,exists:p,forall:h,filter:b,equals:a,equals_:a,toArray:function(){return[]},toString:v.constant("none()")};q.freeze&&q.freeze(a);return a}(),d=function(a){var f=function(){return a},
n=function(){return z},u=function(w){return w(a)},z={fold:function(w,m){return m(a)},is:function(w){return a===w},isSome:h,isNone:p,getOr:f,getOrThunk:f,getOrDie:f,or:n,orThunk:n,map:function(w){return d(w(a))},ap:function(w){return w.fold(b,function(m){return d(m(a))})},each:function(w){w(a)},bind:u,flatten:f,exists:u,forall:u,filter:function(w){return w(a)?z:c},equals:function(w){return w.is(a)},equals_:function(w,m){return w.fold(p,function(g){return m(a,g)})},toArray:function(){return[a]},toString:function(){return"some("+
a+")"}};return z};return{some:d,none:b,from:function(a){return null===a||void 0===a?c:d(a)}}});ra("global!String",String);L("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(v,q,p,h){var b=function(){var e=q.prototype.indexOf,t=function(C,B){return e.call(C,B)},y=function(C,B){a:{for(var r=0,k=C.length;r<k;++r)if(C[r]===B){C=r;break a}C=-1}return C};return void 0===e?y:t}(),c=function(e,t){return-1<b(e,t)},d=function(e,t){for(var y=e.length,
C=new q(y),B=0;B<y;B++)C[B]=t(e[B],B,e);return C},a=function(e,t){for(var y=0,C=e.length;y<C;y++)t(e[y],y,e)},f=function(e,t){for(var y=e.length-1;0<=y;y--)t(e[y],y,e)},n=function(e,t){for(var y=[],C=0,B=e.length;C<B;C++){var r=e[C];t(r,C,e)&&y.push(r)}return y},u=function(e,t){for(var y=0,C=e.length;y<C;y++)if(t(e[y],y,e))return v.some(y);return v.none()},z=q.prototype.push,w=function(e){for(var t=[],y=0,C=e.length;y<C;++y){if(!q.prototype.isPrototypeOf(e[y]))throw new p("Arr.flatten item "+y+" was not an array, input: "+
e);z.apply(t,e[y])}return t},m=function(e,t){for(var y=0,C=e.length;y<C;++y)if(!0!==t(e[y],y,e))return!1;return!0},g=q.prototype.slice;return{map:d,each:a,eachr:f,partition:function(e,t){for(var y=[],C=[],B=0,r=e.length;B<r;B++){var k=e[B];(t(k,B,e)?y:C).push(k)}return{pass:y,fail:C}},filter:n,groupBy:function(e,t){if(0===e.length)return[];for(var y=t(e[0]),C=[],B=[],r=0,k=e.length;r<k;r++){var x=e[r],A=t(x);A!==y&&(C.push(B),B=[]);y=A;B.push(x)}0!==B.length&&C.push(B);return C},indexOf:function(e,
t){e=b(e,t);return-1===e?v.none():v.some(e)},foldr:function(e,t,y){f(e,function(C){y=t(y,C)});return y},foldl:function(e,t,y){a(e,function(C){y=t(y,C)});return y},find:function(e,t){for(var y=0,C=e.length;y<C;y++){var B=e[y];if(t(B,y,e))return v.some(B)}return v.none()},findIndex:u,flatten:w,bind:function(e,t){e=d(e,t);return w(e)},forall:m,exists:function(e,t){return u(e,t).isSome()},contains:c,equal:function(e,t){return e.length===t.length&&m(e,function(y,C){return y===t[C]})},reverse:function(e){e=
g.call(e,0);e.reverse();return e},chunk:function(e,t){for(var y=[],C=0;C<e.length;C+=t){var B=e.slice(C,C+t);y.push(B)}return y},difference:function(e,t){return n(e,function(y){return!c(t,y)})},mapToObject:function(e,t){for(var y={},C=0,B=e.length;C<B;C++){var r=e[C];y[h(r)]=t(r,C)}return y},pure:function(e){return[e]},sort:function(e,t){e=g.call(e,0);e.sort(t);return e},range:function(e,t){for(var y=[],C=0;C<e;C++)y.push(t(C));return y},head:function(e){return 0===e.length?v.none():v.some(e[0])},
last:function(e){return 0===e.length?v.none():v.some(e[e.length-1])}}});ra("global!document",document);L("ephox.katamari.api.Global",[],function(){return"undefined"!==typeof window?window:Function("return this;")()});L("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(v){var q=function(h,b){b=void 0!==b?b:v;for(var c=0;c<h.length&&void 0!==b&&null!==b;++c)b=b[h[c]];return b},p=function(h,b){var c=void 0!==b?b:v;for(b=0;b<h.length;++b){var d=h[b];if(void 0===c[d]||null===c[d])c[d]=
{};c=c[d]}return c};return{path:q,resolve:function(h,b){h=h.split(".");return q(h,b)},forge:p,namespace:function(h,b){h=h.split(".");return p(h,b)}}});L("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(v){return{getOrDie:function(q,p){p=v.resolve(q,p);if(void 0===p)throw q+" not available on this browser";return p}}});L("ephox.sand.api.URL",["ephox.sand.util.Global"],function(v){return{createObjectURL:function(q){return v.getOrDie("URL").createObjectURL(q)},revokeObjectURL:function(q){v.getOrDie("URL").revokeObjectURL(q)}}});
ra("global!matchMedia",matchMedia);ra("global!navigator",navigator);L("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(v,q,p,h,b){var c=h.userAgent;var d=b.opera&&b.opera.buildNumber;var a=/Android/.test(c);var f=/WebKit/.test(c);var n=(n=!f&&!d&&/MSIE/gi.test(c)&&/Explorer/gi.test(h.appName))&&/MSIE (\w+)\./.exec(c)[1];var u=-1==c.indexOf("Trident/")||-1==c.indexOf("rv:")&&-1==h.appName.indexOf("Netscape")?!1:11;h=-1==c.indexOf("Edge/")||
n||u?!1:12;n=n||u||h;u=!f&&!u&&/Gecko/.test(c);var z=-1!=c.indexOf("Mac");var w=/(iPad|iPhone)/.test(c);v="FormData"in b&&"FileReader"in b&&"URL"in b&&!!v.createObjectURL;var m=("matchMedia"in b?p("only screen and (max-device-width: 480px)").matches:!1)&&(a||w);p=("matchMedia"in b?p("only screen and (min-width: 800px)").matches:!1)&&(a||w);var g=-1!=c.indexOf("Windows Phone");h&&(f=!1);c=!w||v||534<=c.match(/AppleWebKit\/(\d*)/)[1];return{opera:d,webkit:f,ie:n,gecko:u,mac:z,iOS:w,android:a,contentEditable:c,
transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:b.getSelection&&"Range"in b,documentMode:n&&!h?q.documentMode||7:10,fileApi:v,ceFalse:!1===n||8<n,canHaveCSP:!1===n||11<n,desktop:!m&&!p,windowsPhone:g}});ra("global!clearInterval",clearInterval);ra("global!clearTimeout",clearTimeout);ra("global!setInterval",setInterval);ra("global!setTimeout",setTimeout);L("tinymce.core.util.Promise",[],function(){function v(u,z){return function(){u.apply(z,
arguments)}}function q(u){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof u)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];a(u,v(h,this),v(b,this))}function p(u){var z=this;null===this._state?this._deferreds.push(u):f(function(){var w=z._state?u.onFulfilled:u.onRejected;if(null===w)(z._state?u.resolve:u.reject)(z._value);else{try{var m=w(z._value)}catch(g){u.reject(g);return}u.resolve(m)}})}function h(u){try{if(u===
this)throw new TypeError("A promise cannot be resolved with itself.");if(u&&("object"===typeof u||"function"===typeof u)){var z=u.then;if("function"===typeof z){a(v(z,u),v(h,this),v(b,this));return}}this._state=!0;this._value=u;c.call(this)}catch(w){b.call(this,w)}}function b(u){this._state=!1;this._value=u;c.call(this)}function c(){for(var u=0,z=this._deferreds.length;u<z;u++)p.call(this,this._deferreds[u]);this._deferreds=null}function d(u,z,w,m){this.onFulfilled="function"===typeof u?u:null;this.onRejected=
"function"===typeof z?z:null;this.resolve=w;this.reject=m}function a(u,z,w){var m=!1;try{u(function(g){m||(m=!0,z(g))},function(g){m||(m=!0,w(g))})}catch(g){m||(m=!0,w(g))}}if(window.Promise)return window.Promise;var f=q.immediateFn||"function"===typeof setImmediate&&setImmediate||function(u){setTimeout(u,1)},n=Array.isArray||function(u){return"[object Array]"===Object.prototype.toString.call(u)};q.prototype["catch"]=function(u){return this.then(null,u)};q.prototype.then=function(u,z){var w=this;
return new q(function(m,g){p.call(w,new d(u,z,m,g))})};q.all=function(){var u=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new q(function(z,w){function m(t,y){try{if(y&&("object"===typeof y||"function"===typeof y)){var C=y.then;if("function"===typeof C){C.call(y,function(B){m(t,B)},w);return}}u[t]=y;0===--g&&z(u)}catch(B){w(B)}}if(0===u.length)return z([]);for(var g=u.length,e=0;e<u.length;e++)m(e,u[e])})};q.resolve=function(u){return u&&"object"===
typeof u&&u.constructor===q?u:new q(function(z){z(u)})};q.reject=function(u){return new q(function(z,w){w(u)})};q.race=function(u){return new q(function(z,w){for(var m=0,g=u.length;m<g;m++)u[m].then(z,w)})};return q});L("tinymce.core.util.Delay","global!clearInterval global!clearTimeout global!document global!setInterval global!setTimeout global!window tinymce.core.util.Promise".split(" "),function(v,q,p,h,b,c,d){var a,f=function(w,m){var g,e=c.requestAnimationFrame,t=["ms","moz","webkit"],y=function(C){c.setTimeout(C,
0)};for(g=0;g<t.length&&!e;g++)e=c[t[g]+"RequestAnimationFrame"];e||(e=y);e(w,m)},n=function(w,m){"number"!=typeof m&&(m=0);return b(w,m)},u=function(w,m){"number"!=typeof m&&(m=1);return h(w,m)},z=function(w,m){var g;var e=function(){var t=arguments;q(g);g=n(function(){w.apply(this,t)},m)};e.stop=function(){q(g)};return e};return{requestAnimationFrame:function(w,m){a?a.then(w):a=(new d(function(g){m||(m=p.body);f(g,m)})).then(w)},setTimeout:n,setInterval:u,setEditorTimeout:function(w,m,g){return n(function(){w.removed||
m()},g)},setEditorInterval:function(w,m,g){var e;return e=u(function(){w.removed?v(e):m()},g)},debounce:z,throttle:z,clearInterval:function(w){return v(w)},clearTimeout:function(w){return q(w)}}});L("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(v,q,p,h){var b=/^(?:mouse|contextmenu)|click/,c={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},d=function(){return!1},a=function(){return!0},
f=function(g,e,t,y){g.addEventListener?g.addEventListener(e,t,y||!1):g.attachEvent&&g.attachEvent("on"+e,t)},n=function(g,e,t,y){g.removeEventListener?g.removeEventListener(e,t,y||!1):g.detachEvent&&g.detachEvent("on"+e,t)},u=function(g,e){var t=e;(e=g.path)&&0<e.length&&(t=e[0]);g.deepPath&&(e=g.deepPath())&&0<e.length&&(t=e[0]);return t},z=function(g,e){var t=e||{};for(y in g)c[y]||(t[y]=g[y]);t.target||(t.target=t.srcElement||v);p.experimentalShadowDom&&(t.target=u(g,t.target));if(g&&b.test(g.type)&&
void 0===g.pageX&&void 0!==g.clientX){var y=t.target.ownerDocument||v;e=y.documentElement;y=y.body;t.pageX=g.clientX+(e&&e.scrollLeft||y&&y.scrollLeft||0)-(e&&e.clientLeft||y&&y.clientLeft||0);t.pageY=g.clientY+(e&&e.scrollTop||y&&y.scrollTop||0)-(e&&e.clientTop||y&&y.clientTop||0)}t.preventDefault=function(){t.isDefaultPrevented=a;g&&(g.preventDefault?g.preventDefault():g.returnValue=!1)};t.stopPropagation=function(){t.isPropagationStopped=a;g&&(g.stopPropagation?g.stopPropagation():g.cancelBubble=
!0)};t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=a;t.stopPropagation()};!1===(t.isDefaultPrevented===a||t.isDefaultPrevented===d)&&(t.isDefaultPrevented=d,t.isPropagationStopped=d,t.isImmediatePropagationStopped=d);"undefined"==typeof t.metaKey&&(t.metaKey=!1);return t},w=function(g,e,t){var y=g.document,C={type:"ready"};if(t.domLoaded)e(C);else{var B=function(){return"complete"===y.readyState||"interactive"===y.readyState&&y.body},r=function(){t.domLoaded||(t.domLoaded=
!0,e(C))},k=function(){B()&&(n(y,"readystatechange",k),r())},x=function(){try{y.documentElement.doScroll("left")}catch(A){h.setTimeout(x);return}r()};!y.addEventListener||p.ie&&11>p.ie?(f(y,"readystatechange",k),y.documentElement.doScroll&&g.self===g.top&&x()):B()?r():f(g,"DOMContentLoaded",r);f(g,"load",r)}},m=function(){var g=this,e={};var t="mce-data-"+(+new Date).toString(32);var y="onmouseenter"in v.documentElement;var C="onfocusin"in v.documentElement;var B={mouseenter:"mouseover",mouseleave:"mouseout"};
var r=1;g.domLoaded=!1;g.events=e;var k=function(x,A){var l,D;if(A=(A=e[A])&&A[x.type]){var E=0;for(l=A.length;E<l&&((D=A[E])&&!1===D.func.call(D.scope,x)&&x.preventDefault(),!x.isImmediatePropagationStopped());E++);}};g.bind=function(x,A,l,D){var E,F,H,I=function(Q){k(z(Q||q.event),G)};if(x&&3!==x.nodeType&&8!==x.nodeType){if(x[t])var G=x[t];else G=r++,x[t]=G,e[G]={};D=D||x;A=A.split(" ");for(F=A.length;F--;){var J=A[F];var M=I;var P=H=!1;"DOMContentLoaded"===J&&(J="ready");g.domLoaded&&"ready"===
J&&"complete"==x.readyState?l.call(D,z({type:J})):(y||(P=B[J])&&(M=function(Q){var W;var V=Q.currentTarget;if((W=Q.relatedTarget)&&V.contains)W=V.contains(W);else for(;W&&W!==V;)W=W.parentNode;W||(Q=z(Q||q.event),Q.type="mouseout"===Q.type?"mouseleave":"mouseenter",Q.target=V,k(Q,G))}),C||"focusin"!==J&&"focusout"!==J||(H=!0,P="focusin"===J?"focus":"blur",M=function(Q){Q=z(Q||q.event);Q.type="focus"===Q.type?"focusin":"focusout";k(Q,G)}),(E=e[G][J])?"ready"===J&&g.domLoaded?l({type:J}):E.push({func:l,
scope:D}):(e[G][J]=E=[{func:l,scope:D}],E.fakeName=P,E.capture=H,E.nativeHandler=M,"ready"===J?w(x,M,g):f(x,P||J,M,H)))}x=E=0;return l}};g.unbind=function(x,A,l){var D,E,F,H;if(!x||3===x.nodeType||8===x.nodeType)return g;if(D=x[t]){var I=e[D];if(A)for(A=A.split(" "),F=A.length;F--;){var G=A[F];if(E=I[G]){if(l)for(H=E.length;H--;)if(E[H].func===l){var J=E.nativeHandler,M=E.fakeName,P=E.capture;E=E.slice(0,H).concat(E.slice(H+1));E.nativeHandler=J;E.fakeName=M;E.capture=P;I[G]=E}l&&0!==E.length||(delete I[G],
n(x,E.fakeName||G,E.nativeHandler,E.capture))}}else{for(G in I)E=I[G],n(x,E.fakeName||G,E.nativeHandler,E.capture);I={}}for(G in I)return g;delete e[D];try{delete x[t]}catch(Q){x[t]=null}}return g};g.fire=function(x,A,l){if(!x||3===x.nodeType||8===x.nodeType)return g;l=z(null,l);l.type=A;l.target=x;do(A=x[t])&&k(l,A),x=x.parentNode||x.ownerDocument||x.defaultView||x.parentWindow;while(x&&!l.isPropagationStopped());return g};g.clean=function(x){var A,l=g.unbind;if(!x||3===x.nodeType||8===x.nodeType)return g;
x[t]&&l(x);x.getElementsByTagName||(x=x.document);if(x&&x.getElementsByTagName){l(x);var D=x.getElementsByTagName("*");for(A=D.length;A--;)x=D[A],x[t]&&l(x)}return g};g.destroy=function(){e={}};g.cancel=function(x){x&&(x.preventDefault(),x.stopImmediatePropagation());return!1}};m.Event=new m;m.Event.bind(q,"ready",function(){});return m});L("tinymce.core.dom.Sizzle",[],function(){function v(K,R,T,da){var Z,Y,ca,ka;(R?R.ownerDocument||R:F)!==r&&Ja(R);R=R||r;T=T||[];if(!K||"string"!==typeof K)return T;
if(1!==(ka=R.nodeType)&&9!==ka)return[];if(x&&!da){if(Z=na.exec(K))if(ca=Z[1])if(9===ka)if((Y=R.getElementById(ca))&&Y.parentNode){if(Y.id===ca)return T.push(Y),T}else return T;else{if(R.ownerDocument&&(Y=R.ownerDocument.getElementById(ca))&&D(R,Y)&&Y.id===ca)return T.push(Y),T}else{if(Z[2])return N.apply(T,R.getElementsByTagName(K)),T;if((ca=Z[3])&&za.getElementsByClassName)return N.apply(T,R.getElementsByClassName(ca)),T}if(za.qsa&&(!A||!A.test(K))){Y=Z=E;ca=R;var ja=9===ka&&K;if(1===ka&&"object"!==
R.nodeName.toLowerCase()){ka=Ka(K);(Z=R.getAttribute("id"))?Y=Z.replace(va,"\\$&"):R.setAttribute("id",Y);Y="[id='"+Y+"'] ";for(ca=ka.length;ca--;)ka[ca]=Y+n(ka[ca]);ca=ua.test(K)&&a(R.parentNode)||R;ja=ka.join(",")}if(ja)try{return N.apply(T,ca.querySelectorAll(ja)),T}catch(ma){}finally{Z||R.removeAttribute("id")}}}return Oa(K.replace(X,"$1"),R,T,da)}function q(){function K(T,da){R.push(T+" ")>xa.cacheLength&&delete K[R.shift()];return K[T+" "]=da}var R=[];return K}function p(K){K[E]=!0;return K}
function h(K,R){var T=R&&K,da=T&&1===K.nodeType&&1===R.nodeType&&(~R.sourceIndex||-2147483648)-(~K.sourceIndex||-2147483648);if(da)return da;if(T)for(;T=T.nextSibling;)if(T===R)return-1;return K?1:-1}function b(K){return function(R){return"input"===R.nodeName.toLowerCase()&&R.type===K}}function c(K){return function(R){var T=R.nodeName.toLowerCase();return("input"===T||"button"===T)&&R.type===K}}function d(K){return p(function(R){R=+R;return p(function(T,da){for(var Z,Y=K([],T.length,R),ca=Y.length;ca--;)T[Z=
Y[ca]]&&(T[Z]=!(da[Z]=T[Z]))})})}function a(K){return K&&"undefined"!==typeof K.getElementsByTagName&&K}function f(){}function n(K){for(var R=0,T=K.length,da="";R<T;R++)da+=K[R].value;return da}function u(K,R,T){var da=R.dir,Z=T&&"parentNode"===da,Y=I++;return R.first?function(ca,ka,ja){for(;ca=ca[da];)if(1===ca.nodeType||Z)return K(ca,ka,ja)}:function(ca,ka,ja){var ma,oa=[H,Y];if(ja)for(;ca=ca[da];){if((1===ca.nodeType||Z)&&K(ca,ka,ja))return!0}else for(;ca=ca[da];)if(1===ca.nodeType||Z){var sa=
ca[E]||(ca[E]={});if((ma=sa[da])&&ma[0]===H&&ma[1]===Y)return oa[2]=ma[2];sa[da]=oa;if(oa[2]=K(ca,ka,ja))return!0}}}function z(K){return 1<K.length?function(R,T,da){for(var Z=K.length;Z--;)if(!K[Z](R,T,da))return!1;return!0}:K[0]}function w(K,R,T,da,Z){for(var Y,ca=[],ka=0,ja=K.length,ma=null!=R;ka<ja;ka++)if(Y=K[ka])if(!T||T(Y,da,Z))ca.push(Y),ma&&R.push(ka);return ca}function m(K,R,T,da,Z,Y){da&&!da[E]&&(da=m(da));Z&&!Z[E]&&(Z=m(Z,Y));return p(function(ca,ka,ja,ma){var oa,sa=[],Ca=[],Ia=ka.length,
Aa;if(!(Aa=ca)){Aa=R||"*";for(var wa=ja.nodeType?[ja]:ja,Da=[],Ea=0,La=wa.length;Ea<La;Ea++)v(Aa,wa[Ea],Da);Aa=Da}Aa=!K||!ca&&R?Aa:w(Aa,sa,K,ja,ma);wa=T?Z||(ca?K:Ia||da)?[]:ka:Aa;T&&T(Aa,wa,ja,ma);if(da){var Ga=w(wa,Ca);da(Ga,[],ja,ma);for(ja=Ga.length;ja--;)if(oa=Ga[ja])wa[Ca[ja]]=!(Aa[Ca[ja]]=oa)}if(ca){if(Z||K){if(Z){Ga=[];for(ja=wa.length;ja--;)(oa=wa[ja])&&Ga.push(Aa[ja]=oa);Z(null,wa=[],Ga,ma)}for(ja=wa.length;ja--;)(oa=wa[ja])&&-1<(Ga=Z?U.call(ca,oa):sa[ja])&&(ca[Ga]=!(ka[Ga]=oa))}}else wa=
w(wa===ka?wa.splice(Ia,wa.length):wa),Z?Z(null,ka,wa,ma):N.apply(ka,wa)})}function g(K){var R,T,da=K.length,Z=xa.relative[K[0].type];var Y=Z||xa.relative[" "];for(var ca=Z?1:0,ka=u(function(oa){return oa===R},Y,!0),ja=u(function(oa){return-1<U.call(R,oa)},Y,!0),ma=[function(oa,sa,Ca){return!Z&&(Ca||sa!==y)||((R=sa).nodeType?ka(oa,sa,Ca):ja(oa,sa,Ca))}];ca<da;ca++)if(Y=xa.relative[K[ca].type])ma=[u(z(ma),Y)];else{Y=xa.filter[K[ca].type].apply(null,K[ca].matches);if(Y[E]){for(T=++ca;T<da&&!xa.relative[K[T].type];T++);
return m(1<ca&&z(ma),1<ca&&n(K.slice(0,ca-1).concat({value:" "===K[ca-2].type?"*":""})).replace(X,"$1"),Y,ca<T&&g(K.slice(ca,T)),T<da&&g(K=K.slice(T)),T<da&&n(K))}ma.push(Y)}return z(ma)}function e(K,R){var T=0<R.length,da=0<K.length,Z=function(Y,ca,ka,ja,ma){var oa,sa,Ca,Ia=0,Aa="0",wa=Y&&[],Da=[],Ea=y,La=Y||da&&xa.find.TAG("*",ma),Ga=H+=null==Ea?1:Math.random()||.1,Pa=La.length;for(ma&&(y=ca!==r&&ca);Aa!==Pa&&null!=(oa=La[Aa]);Aa++){if(da&&oa){for(sa=0;Ca=K[sa++];)if(Ca(oa,ca,ka)){ja.push(oa);break}ma&&
(H=Ga)}T&&((oa=!Ca&&oa)&&Ia--,Y&&wa.push(oa))}Ia+=Aa;if(T&&Aa!==Ia){for(sa=0;Ca=R[sa++];)Ca(wa,Da,ca,ka);if(Y){if(0<Ia)for(;Aa--;)wa[Aa]||Da[Aa]||(Da[Aa]=V.call(ja));Da=w(Da)}N.apply(ja,Da);ma&&!Y&&0<Da.length&&1<Ia+R.length&&v.uniqueSort(ja)}ma&&(H=Ga,y=Ea);return wa};return T?p(Z):Z}var t,y,C,B,r,k,x,A,l,D,E="sizzle"+-new Date,F=window.document,H=0,I=0,G=q(),J=q(),M=q(),P=function(K,R){K===R&&(B=!0);return 0},Q={}.hasOwnProperty,W=[],V=W.pop,ba=W.push,N=W.push,O=W.slice,U=W.indexOf||function(K){for(var R=
0,T=this.length;R<T;R++)if(this[R]===K)return R;return-1},X=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),S=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),aa=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),fa=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),ia=RegExp(":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
ta=RegExp("^(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+$"),pa={ID:RegExp("^#((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)"),CLASS:RegExp("^\\.((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)"),TAG:RegExp("^((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},ya=/^(?:input|select|textarea|button)$/i,ha=/^h\d$/i,ea=/^[^{]+\{\s*\[native \w/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/[+~]/,va=/'|\\/g,Fa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),Ba=function(K,R,T){K="0x"+R-65536;return K!==K||T?R:0>K?String.fromCharCode(K+65536):String.fromCharCode(K>>10|55296,K&1023|56320)};try{N.apply(W=O.call(F.childNodes),F.childNodes),W[F.childNodes.length].nodeType}catch(K){N={apply:W.length?function(R,T){ba.apply(R,O.call(T))}:
function(R,T){for(var da=R.length,Z=0;R[da++]=T[Z++];);R.length=da-1}}}var za=v.support={};var Ha=v.isXML=function(K){return(K=K&&(K.ownerDocument||K).documentElement)?"HTML"!==K.nodeName:!1};var Ja=v.setDocument=function(K){var R=K?K.ownerDocument||K:F;K=R.defaultView;if(R===r||9!==R.nodeType||!R.documentElement)return r;r=R;k=R.documentElement;x=!Ha(R);var T;if(T=K){a:{try{var da=K.top;break a}catch(Z){}da=null}T=K!==da}T&&(K.addEventListener?K.addEventListener("unload",function(){Ja()},!1):K.attachEvent&&
K.attachEvent("onunload",function(){Ja()}));za.attributes=!0;za.getElementsByTagName=!0;za.getElementsByClassName=ea.test(R.getElementsByClassName);za.getById=!0;xa.find.ID=function(Z,Y){if("undefined"!==typeof Y.getElementById&&x)return(Z=Y.getElementById(Z))&&Z.parentNode?[Z]:[]};xa.filter.ID=function(Z){var Y=Z.replace(Fa,Ba);return function(ca){return ca.getAttribute("id")===Y}};xa.find.TAG=za.getElementsByTagName?function(Z,Y){if("undefined"!==typeof Y.getElementsByTagName)return Y.getElementsByTagName(Z)}:
function(Z,Y){var ca=[],ka=0;Y=Y.getElementsByTagName(Z);if("*"===Z){for(;Z=Y[ka++];)1===Z.nodeType&&ca.push(Z);return ca}return Y};xa.find.CLASS=za.getElementsByClassName&&function(Z,Y){if(x)return Y.getElementsByClassName(Z)};l=[];A=[];za.disconnectedMatch=!0;A=A.length&&new RegExp(A.join("|"));l=l.length&&new RegExp(l.join("|"));D=(da=ea.test(k.compareDocumentPosition))||ea.test(k.contains)?function(Z,Y){var ca=9===Z.nodeType?Z.documentElement:Z;Y=Y&&Y.parentNode;return Z===Y||!!(Y&&1===Y.nodeType&&
(ca.contains?ca.contains(Y):Z.compareDocumentPosition&&Z.compareDocumentPosition(Y)&16))}:function(Z,Y){if(Y)for(;Y=Y.parentNode;)if(Y===Z)return!0;return!1};P=da?function(Z,Y){if(Z===Y)return B=!0,0;var ca=!Z.compareDocumentPosition-!Y.compareDocumentPosition;if(ca)return ca;ca=(Z.ownerDocument||Z)===(Y.ownerDocument||Y)?Z.compareDocumentPosition(Y):1;return ca&1||!za.sortDetached&&Y.compareDocumentPosition(Z)===ca?Z===R||Z.ownerDocument===F&&D(F,Z)?-1:Y===R||Y.ownerDocument===F&&D(F,Y)?1:C?U.call(C,
Z)-U.call(C,Y):0:ca&4?-1:1}:function(Z,Y){if(Z===Y)return B=!0,0;var ca=0,ka=Z.parentNode,ja=Y.parentNode,ma=[Z],oa=[Y];if(!ka||!ja)return Z===R?-1:Y===R?1:ka?-1:ja?1:C?U.call(C,Z)-U.call(C,Y):0;if(ka===ja)return h(Z,Y);for(;Z=Z.parentNode;)ma.unshift(Z);for(Z=Y;Z=Z.parentNode;)oa.unshift(Z);for(;ma[ca]===oa[ca];)ca++;return ca?h(ma[ca],oa[ca]):ma[ca]===F?-1:oa[ca]===F?1:0};return R};v.matches=function(K,R){return v(K,null,null,R)};v.matchesSelector=function(K,R){(K.ownerDocument||K)!==r&&Ja(K);R=
R.replace(fa,"='$1']");if(!(!za.matchesSelector||!x||l&&l.test(R)||A&&A.test(R)))try{var T=(void 0).call(K,R);if(T||za.disconnectedMatch||K.document&&11!==K.document.nodeType)return T}catch(da){}return 0<v(R,r,null,[K]).length};v.contains=function(K,R){(K.ownerDocument||K)!==r&&Ja(K);return D(K,R)};v.attr=function(K,R){(K.ownerDocument||K)!==r&&Ja(K);var T=xa.attrHandle[R.toLowerCase()];T=T&&Q.call(xa.attrHandle,R.toLowerCase())?T(K,R,!x):void 0;return void 0!==T?T:za.attributes||!x?K.getAttribute(R):
(T=K.getAttributeNode(R))&&T.specified?T.value:null};v.error=function(K){throw Error("Syntax error, unrecognized expression: "+K);};v.uniqueSort=function(K){var R,T=[],da=0,Z=0;B=!za.detectDuplicates;C=!za.sortStable&&K.slice(0);K.sort(P);if(B){for(;R=K[Z++];)R===K[Z]&&(da=T.push(Z));for(;da--;)K.splice(T[da],1)}C=null;return K};var Ma=v.getText=function(K){var R="",T=0;var da=K.nodeType;if(!da)for(;da=K[T++];)R+=Ma(da);else if(1===da||9===da||11===da){if("string"===typeof K.textContent)return K.textContent;
for(K=K.firstChild;K;K=K.nextSibling)R+=Ma(K)}else if(3===da||4===da)return K.nodeValue;return R};var xa=v.selectors={cacheLength:50,createPseudo:p,match:pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(K){K[1]=K[1].replace(Fa,Ba);K[3]=(K[3]||K[4]||K[5]||"").replace(Fa,Ba);"~="===K[2]&&(K[3]=" "+K[3]+" ");return K.slice(0,4)},CHILD:function(K){K[1]=K[1].toLowerCase();
"nth"===K[1].slice(0,3)?(K[3]||v.error(K[0]),K[4]=+(K[4]?K[5]+(K[6]||1):2*("even"===K[3]||"odd"===K[3])),K[5]=+(K[7]+K[8]||"odd"===K[3])):K[3]&&v.error(K[0]);return K},PSEUDO:function(K){var R,T=!K[6]&&K[2];if(pa.CHILD.test(K[0]))return null;K[3]?K[2]=K[4]||K[5]||"":T&&ia.test(T)&&(R=Ka(T,!0))&&(R=T.indexOf(")",T.length-R)-T.length)&&(K[0]=K[0].slice(0,R),K[2]=T.slice(0,R));return K.slice(0,3)}},filter:{TAG:function(K){var R=K.replace(Fa,Ba).toLowerCase();return"*"===K?function(){return!0}:function(T){return T.nodeName&&
T.nodeName.toLowerCase()===R}},CLASS:function(K){var R=G[K+" "];return R||(R=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+K+"([\\x20\\t\\r\\n\\f]|$)"),G(K,function(T){return R.test("string"===typeof T.className&&T.className||"undefined"!==typeof T.getAttribute&&T.getAttribute("class")||"")}))},ATTR:function(K,R,T){return function(da){da=v.attr(da,K);if(null==da)return"!="===R;if(!R)return!0;da+="";return"="===R?da===T:"!="===R?da!==T:"^="===R?T&&0===da.indexOf(T):"*="===R?T&&-1<da.indexOf(T):"$="===R?T&&
da.slice(-T.length)===T:"~="===R?-1<(" "+da+" ").indexOf(T):"|="===R?da===T||da.slice(0,T.length+1)===T+"-":!1}},CHILD:function(K,R,T,da,Z){var Y="nth"!==K.slice(0,3),ca="last"!==K.slice(-4),ka="of-type"===R;return 1===da&&0===Z?function(ja){return!!ja.parentNode}:function(ja,ma,oa){var sa;ma=Y!==ca?"nextSibling":"previousSibling";var Ca=ja.parentNode,Ia=ka&&ja.nodeName.toLowerCase();oa=!oa&&!ka;if(Ca){if(Y){for(;ma;){for(sa=ja;sa=sa[ma];)if(ka?sa.nodeName.toLowerCase()===Ia:1===sa.nodeType)return!1;
var Aa=ma="only"===K&&!Aa&&"nextSibling"}return!0}Aa=[ca?Ca.firstChild:Ca.lastChild];if(ca&&oa){oa=Ca[E]||(Ca[E]={});var wa=oa[K]||[];var Da=wa[0]===H&&wa[1];var Ea=wa[0]===H&&wa[2];for(sa=Da&&Ca.childNodes[Da];sa=++Da&&sa&&sa[ma]||(Ea=Da=0)||Aa.pop();)if(1===sa.nodeType&&++Ea&&sa===ja){oa[K]=[H,Da,Ea];break}}else if(oa&&(wa=(ja[E]||(ja[E]={}))[K])&&wa[0]===H)Ea=wa[1];else for(;(sa=++Da&&sa&&sa[ma]||(Ea=Da=0)||Aa.pop())&&((ka?sa.nodeName.toLowerCase()!==Ia:1!==sa.nodeType)||!++Ea||(oa&&((sa[E]||(sa[E]=
{}))[K]=[H,Ea]),sa!==ja)););Ea-=Z;return Ea===da||0===Ea%da&&0<=Ea/da}}},PSEUDO:function(K,R){var T=xa.pseudos[K]||xa.setFilters[K.toLowerCase()]||v.error("unsupported pseudo: "+K);if(T[E])return T(R);if(1<T.length){var da=[K,K,"",R];return xa.setFilters.hasOwnProperty(K.toLowerCase())?p(function(Z,Y){for(var ca,ka=T(Z,R),ja=ka.length;ja--;)ca=U.call(Z,ka[ja]),Z[ca]=!(Y[ca]=ka[ja])}):function(Z){return T(Z,0,da)}}return T}},pseudos:{not:p(function(K){var R=[],T=[],da=Na(K.replace(X,"$1"));return da[E]?
p(function(Z,Y,ca,ka){ka=da(Z,null,ka,[]);for(var ja=Z.length;ja--;)if(ca=ka[ja])Z[ja]=!(Y[ja]=ca)}):function(Z,Y,ca){R[0]=Z;da(R,null,ca,T);return!T.pop()}}),has:p(function(K){return function(R){return 0<v(K,R).length}}),contains:p(function(K){K=K.replace(Fa,Ba);return function(R){return-1<(R.textContent||R.innerText||Ma(R)).indexOf(K)}}),lang:p(function(K){ta.test(K||"")||v.error("unsupported lang: "+K);K=K.replace(Fa,Ba).toLowerCase();return function(R){var T;do if(T=x?R.lang:R.getAttribute("xml:lang")||
R.getAttribute("lang"))return T=T.toLowerCase(),T===K||0===T.indexOf(K+"-");while((R=R.parentNode)&&1===R.nodeType);return!1}}),target:function(K){var R=window.location&&window.location.hash;return R&&R.slice(1)===K.id},root:function(K){return K===k},focus:function(K){return K===r.activeElement&&(!r.hasFocus||r.hasFocus())&&!!(K.type||K.href||~K.tabIndex)},enabled:function(K){return!1===K.disabled},disabled:function(K){return!0===K.disabled},checked:function(K){var R=K.nodeName.toLowerCase();return"input"===
R&&!!K.checked||"option"===R&&!!K.selected},selected:function(K){K.parentNode&&K.parentNode.selectedIndex;return!0===K.selected},empty:function(K){for(K=K.firstChild;K;K=K.nextSibling)if(6>K.nodeType)return!1;return!0},parent:function(K){return!xa.pseudos.empty(K)},header:function(K){return ha.test(K.nodeName)},input:function(K){return ya.test(K.nodeName)},button:function(K){var R=K.nodeName.toLowerCase();return"input"===R&&"button"===K.type||"button"===R},text:function(K){var R;return"input"===K.nodeName.toLowerCase()&&
"text"===K.type&&(null==(R=K.getAttribute("type"))||"text"===R.toLowerCase())},first:d(function(){return[0]}),last:d(function(K,R){return[R-1]}),eq:d(function(K,R,T){return[0>T?T+R:T]}),even:d(function(K,R){for(var T=0;T<R;T+=2)K.push(T);return K}),odd:d(function(K,R){for(var T=1;T<R;T+=2)K.push(T);return K}),lt:d(function(K,R,T){for(R=0>T?T+R:T;0<=--R;)K.push(R);return K}),gt:d(function(K,R,T){for(T=0>T?T+R:T;++T<R;)K.push(T);return K})}};xa.pseudos.nth=xa.pseudos.eq;for(t in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})xa.pseudos[t]=b(t);for(t in{submit:!0,reset:!0})xa.pseudos[t]=c(t);f.prototype=xa.filters=xa.pseudos;xa.setFilters=new f;var Ka=v.tokenize=function(K,R){var T,da,Z,Y,ca;if(Y=J[K+" "])return R?0:Y.slice(0);Y=K;var ka=[];for(ca=xa.preFilter;Y;){if(!ja||(T=S.exec(Y)))T&&(Y=Y.slice(T[0].length)||Y),ka.push(da=[]);var ja=!1;if(T=aa.exec(Y))ja=T.shift(),da.push({value:ja,type:T[0].replace(X," ")}),Y=Y.slice(ja.length);for(Z in xa.filter)!(T=pa[Z].exec(Y))||ca[Z]&&!(T=ca[Z](T))||
(ja=T.shift(),da.push({value:ja,type:Z,matches:T}),Y=Y.slice(ja.length));if(!ja)break}return R?Y.length:Y?v.error(K):J(K,ka).slice(0)};var Na=v.compile=function(K,R){var T,da=[],Z=[],Y=M[K+" "];if(!Y){R||(R=Ka(K));for(T=R.length;T--;)Y=g(R[T]),Y[E]?da.push(Y):Z.push(Y);Y=M(K,e(Z,da));Y.selector=K}return Y};var Oa=v.select=function(K,R,T,da){var Z,Y,ca,ka="function"===typeof K&&K,ja=!da&&Ka(K=ka.selector||K);T=T||[];if(1===ja.length){var ma=ja[0]=ja[0].slice(0);if(2<ma.length&&"ID"===(Y=ma[0]).type&&
za.getById&&9===R.nodeType&&x&&xa.relative[ma[1].type]){R=(xa.find.ID(Y.matches[0].replace(Fa,Ba),R)||[])[0];if(!R)return T;ka&&(R=R.parentNode);K=K.slice(ma.shift().value.length)}for(Z=pa.needsContext.test(K)?0:ma.length;Z--;){Y=ma[Z];if(xa.relative[ca=Y.type])break;if(ca=xa.find[ca])if(da=ca(Y.matches[0].replace(Fa,Ba),ua.test(ma[0].type)&&a(R.parentNode)||R)){ma.splice(Z,1);K=da.length&&n(ma);if(!K)return N.apply(T,da),T;break}}}(ka||Na(K,ja))(da,R,!x,T,ua.test(K)&&a(R.parentNode)||R);return T};
za.sortStable=E.split("").sort(P).join("")===E;za.detectDuplicates=!!B;Ja();za.sortDetached=!0;return v});L("tinymce.core.util.Arr",[],function(){var v=Array.isArray||function(h){return"[object Array]"===Object.prototype.toString.call(h)},q=function(h,b,c){var d;if(!h)return 0;c=c||h;if(void 0!==h.length){var a=0;for(d=h.length;a<d;a++)if(!1===b.call(c,h[a],a,h))return 0}else for(a in h)if(h.hasOwnProperty(a)&&!1===b.call(c,h[a],a,h))return 0;return 1},p=function(h,b,c){var d;var a=0;for(d=h.length;a<
d;a++)if(b.call(c,h[a],a,h))return a;return-1};return{isArray:v,toArray:function(h){var b=h,c;if(!v(h)){b=[];var d=0;for(c=h.length;d<c;d++)b[d]=h[d]}return b},each:q,map:function(h,b){var c=[];q(h,function(d,a){c.push(b(d,a,h))});return c},filter:function(h,b){var c=[];q(h,function(d,a){b&&!b(d,a,h)||c.push(d)});return c},indexOf:function(h,b){var c;if(h){var d=0;for(c=h.length;d<c;d++)if(h[d]===b)return d}return-1},reduce:function(h,b,c,d){var a=0;for(3>arguments.length&&(c=h[0]);a<h.length;a++)c=
b.call(d,c,h[a],a);return c},findIndex:p,find:function(h,b,c){b=p(h,b,c);if(-1!==b)return h[b]},last:function(h){return h[h.length-1]}}});L("tinymce.core.util.Tools",["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(v,q,p){var h=/^\s*|\s*$/g,b=function(a){return null===a||void 0===a?"":(""+a).replace(h,"")},c=function(a,f){return f?"array"==f&&p.isArray(a)?!0:typeof a==f:void 0!==a},d=function(a,f,n,u){u=u||this;a&&(n&&(a=a[n]),p.each(a,function(z,w){if(!1===f.call(u,z,w,n))return!1;
d(z,f,n,u)}))};return{trim:b,isArray:p.isArray,is:c,toArray:p.toArray,makeMap:function(a,f,n){a=a||[];"string"==typeof a&&(a=a.split(f||","));n=n||{};for(f=a.length;f--;)n[a[f]]={};return n},each:p.each,map:p.map,grep:p.filter,inArray:p.indexOf,hasOwn:function(a,f){return Object.prototype.hasOwnProperty.call(a,f)},extend:function(a,f){var n,u,z=arguments;var w=1;for(n=z.length;w<n;w++)for(u in f=z[w],f)if(f.hasOwnProperty(u)){var m=f[u];void 0!==m&&(a[u]=m)}return a},create:function(a,f,n){var u=
0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a);var z=a[3].match(/(^|\.)(\w+)$/i)[2];var w=this.createNS(a[3].replace(/\.\w+$/,""),n);if(!w[z])if("static"==a[2]){if(w[z]=f,this.onCreate)this.onCreate(a[2],a[3],w[z])}else{f[z]||(f[z]=function(){},u=1);w[z]=f[z];this.extend(w[z].prototype,f);if(a[5]){var m=this.resolve(a[5]).prototype;var g=a[5].match(/\.(\w+)$/i)[1];var e=w[z];w[z]=u?function(){return m[g].apply(this,arguments)}:function(){this.parent=m[g];return e.apply(this,arguments)};w[z].prototype[z]=
w[z];this.each(m,function(t,y){w[z].prototype[y]=m[y]});this.each(f,function(t,y){m[y]?w[z].prototype[y]=function(){this.parent=m[y];return t.apply(this,arguments)}:y!=z&&(w[z].prototype[y]=t)})}this.each(f["static"],function(t,y){w[z][y]=t})}},walk:d,createNS:function(a,f){var n;f=f||v;a=a.split(".");for(n=0;n<a.length;n++){var u=a[n];f[u]||(f[u]={});f=f[u]}return f},resolve:function(a,f){var n;f=f||v;a=a.split(".");var u=0;for(n=a.length;u<n&&(f=f[a[u]],f);u++);return f},explode:function(a,f){return!a||
c(a,"array")?a:p.map(a.split(f||","),b)},_addCacheSuffix:function(a){var f=q.cacheSuffix;f&&(a+=(-1===a.indexOf("?")?"?":"&")+f);return a}}});L("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(v,q,p,h,b){var c=Array.prototype.push,d=Array.prototype.slice,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=q.Event,n=b.makeMap("children,contents,next,prev"),u=function(G){return"undefined"!==typeof G},
z=function(G,J){J=J||v;var M=J.createElement("div");J=J.createDocumentFragment();for(M.innerHTML=G;G=M.firstChild;)J.appendChild(G);return J},w=function(G,J,M,P){var Q;if("string"===typeof J)J=z(J,E(G[0]));else if(J.length&&!J.nodeType){J=k.makeArray(J);if(P)for(Q=J.length-1;0<=Q;Q--)w(G,J[Q],M,P);else for(Q=0;Q<J.length;Q++)w(G,J[Q],M,P);return G}if(J.nodeType)for(Q=G.length;Q--;)M.call(G[Q],J);return G},m=function(G,J){return G&&J&&-1!==(" "+G.className+" ").indexOf(" "+J+" ")},g=function(G,J,M){var P,
Q;J=k(J)[0];G.each(function(){M&&P==this.parentNode||(P=this.parentNode,Q=J.cloneNode(!1),this.parentNode.insertBefore(Q,this));Q.appendChild(this)});return G},e=b.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),t=b.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),y={"for":"htmlFor","class":"className",readonly:"readOnly"},C={"float":"cssFloat"},B={},r={},k=function(G,J){return new k.fn.init(G,J)},x=/^\s*|\s*$/g,
A=function(G){return null===G||void 0===G?"":(""+G).replace(x,"")},l=function(G,J){var M;if(G){var P=G.length;if(void 0===P)for(M in G){if(G.hasOwnProperty(M)){var Q=G[M];if(!1===J.call(Q,M,Q))break}}else for(M=0;M<P&&(Q=G[M],!1!==J.call(Q,M,Q));M++);}return G},D=function(G,J){var M=[];l(G,function(P,Q){J(Q,P)&&M.push(Q)});return M},E=function(G){return G?9==G.nodeType?G:G.ownerDocument:v};k.fn=k.prototype={constructor:k,selector:"",context:null,length:0,init:function(G,J){var M;if(!G)return this;
if(G.nodeType)return this.context=this[0]=G,this.length=1,this;if(J&&J.nodeType)this.context=J;else{if(J)return k(G).attr(J);this.context=J=v}if("string"===typeof G)if(this.selector=G,M="<"===G.charAt(0)&&">"===G.charAt(G.length-1)&&3<=G.length?[null,G,null]:a.exec(G))if(M[1])for(J=z(G,E(J)).firstChild;J;)c.call(this,J),J=J.nextSibling;else{J=E(J).getElementById(M[2]);if(!J)return this;if(J.id!==M[2])return this.find(G);this.length=1;this[0]=J}else return k(J).find(G);else this.add(G,!1);return this},
toArray:function(){return b.toArray(this)},add:function(G,J){if("string"===typeof G)return this.add(k(G));if(!1!==J)for(G=k.unique(this.toArray().concat(k.makeArray(G))),this.length=G.length,J=0;J<G.length;J++)this[J]=G[J];else c.apply(this,k.makeArray(G));return this},attr:function(G,J){var M=this,P;if("object"===typeof G)l(G,function(Q,W){M.attr(Q,W)});else if(u(J))this.each(function(){var Q;1===this.nodeType&&((Q=B[G])&&Q.set?Q.set(this,J):null===J?this.removeAttribute(G,2):this.setAttribute(G,
J,2))});else{if(M[0]&&1===M[0].nodeType){if((P=B[G])&&P.get)return P.get(M[0],G);if(t[G])return M.prop(G)?G:void 0;J=M[0].getAttribute(G,2);null===J&&(J=void 0)}return J}return M},removeAttr:function(G){return this.attr(G,null)},prop:function(G,J){var M=this;G=y[G]||G;if("object"===typeof G)l(G,function(P,Q){M.prop(P,Q)});else if(u(J))this.each(function(){1==this.nodeType&&(this[G]=J)});else return M[0]&&M[0].nodeType&&G in M[0]?M[0][G]:J;return M},css:function(G,J){var M=this,P,Q=function(ba){return ba.replace(/-(\D)/g,
function(N,O){return O.toUpperCase()})},W=function(ba){return ba.replace(/[A-Z]/g,function(N){return"-"+N})};if("object"===typeof G)l(G,function(ba,N){M.css(ba,N)});else if(u(J))G=Q(G),"number"!==typeof J||e[G]||(J+="px"),M.each(function(){var ba=this.style;if((P=r[G])&&P.set)P.set(this,J);else{try{this.style[C[G]||G]=J}catch(N){}if(null===J||""===J)ba.removeProperty?ba.removeProperty(W(G)):ba.removeAttribute(G)}});else{var V=M[0];if((P=r[G])&&P.get)return P.get(V);if(V.ownerDocument.defaultView)try{return V.ownerDocument.defaultView.getComputedStyle(V,
null).getPropertyValue(W(G))}catch(ba){return}else if(V.currentStyle)return V.currentStyle[Q(G)]}return M},remove:function(){for(var G,J=this.length;J--;)G=this[J],f.clean(G),G.parentNode&&G.parentNode.removeChild(G);return this},empty:function(){for(var G,J=this.length;J--;)for(G=this[J];G.firstChild;)G.removeChild(G.firstChild);return this},html:function(G){if(u(G)){var J=this.length;try{for(;J--;)this[J].innerHTML=G}catch(M){k(this[J]).empty().append(G)}return this}return this[0]?this[0].innerHTML:
""},text:function(G){var J;if(u(G)){for(J=this.length;J--;)"innerText"in this[J]?this[J].innerText=G:this[0].textContent=G;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return w(this,arguments,function(G){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(G)})},prepend:function(){return w(this,arguments,function(G){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(G,this.firstChild)},!0)},before:function(){return this[0]&&
this[0].parentNode?w(this,arguments,function(G){this.parentNode.insertBefore(G,this)}):this},after:function(){return this[0]&&this[0].parentNode?w(this,arguments,function(G){this.parentNode.insertBefore(G,this.nextSibling)},!0):this},appendTo:function(G){k(G).append(this);return this},prependTo:function(G){k(G).prepend(this);return this},replaceWith:function(G){return this.before(G).remove()},wrap:function(G){return g(this,G)},wrapAll:function(G){return g(this,G,!0)},wrapInner:function(G){this.each(function(){k(this).contents().wrapAll(G)});
return this},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(this.childNodes)})},clone:function(){var G=[];this.each(function(){G.push(this.cloneNode(!0))});return k(G)},addClass:function(G){return this.toggleClass(G,!0)},removeClass:function(G){return this.toggleClass(G,!1)},toggleClass:function(G,J){var M=this;if("string"!=typeof G)return M;-1!==G.indexOf(" ")?l(G.split(" "),function(){M.toggleClass(this,J)}):M.each(function(P,Q){var W=m(Q,G);W!==J&&(P=Q.className,Q.className=
W?A((" "+P+" ").replace(" "+G+" "," ")):Q.className+(P?" "+G:G))});return M},hasClass:function(G){return m(this[0],G)},each:function(G){return l(this,G)},on:function(G,J){return this.each(function(){f.bind(this,G,J)})},off:function(G,J){return this.each(function(){f.unbind(this,G,J)})},trigger:function(G){return this.each(function(){"object"==typeof G?f.fire(this,G.type,G):f.fire(this,G)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new k(d.apply(this,
arguments))},eq:function(G){return-1===G?this.slice(G):this.slice(G,+G+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(G){var J,M=[];var P=0;for(J=this.length;P<J;P++)k.find(G,this[P],M);return k(M)},filter:function(G){return"function"==typeof G?k(D(this.toArray(),function(J,M){return G(M,J)})):k(k.filter(G,this.toArray()))},closest:function(G){var J=[];G instanceof k&&(G=G[0]);this.each(function(M,P){for(;P;){if("string"==typeof G&&k(P).is(G)){J.push(P);
break}else if(P==G){J.push(P);break}P=P.parentNode}});return k(J)},offset:function(G){var J,M=0,P=0;if(!G){if(J=this[0]){G=J.ownerDocument;var Q=G.documentElement;J.getBoundingClientRect&&(P=J.getBoundingClientRect(),M=P.left+(Q.scrollLeft||G.body.scrollLeft)-Q.clientLeft,P=P.top+(Q.scrollTop||G.body.scrollTop)-Q.clientTop)}return{left:M,top:P}}return this.css(G)},push:c,sort:[].sort,splice:[].splice};b.extend(k,{extend:b.extend,makeArray:function(G){return G&&G==G.window||G.nodeType?[G]:b.toArray(G)},
inArray:function(G,J){var M;if(J.indexOf)return J.indexOf(G);for(M=J.length;M--;)if(J[M]===G)return M;return-1},isArray:b.isArray,each:l,trim:A,grep:D,find:p,expr:p.selectors,unique:p.uniqueSort,text:p.getText,contains:p.contains,filter:function(G,J,M){var P=J.length;for(M&&(G=":not("+G+")");P--;)1!=J[P].nodeType&&J.splice(P,1);return J=1===J.length?k.find.matchesSelector(J[0],G)?[J[0]]:[]:k.find.matches(G,J)}});var F=function(G,J,M){var P=[];G=G[J];for("string"!=typeof M&&M instanceof k&&(M=M[0]);G&&
9!==G.nodeType;){if(void 0!==M){if(G===M)break;if("string"==typeof M&&k(G).is(M))break}1===G.nodeType&&P.push(G);G=G[J]}return P},H=function(G,J,M,P){var Q=[];for(P instanceof k&&(P=P[0]);G;G=G[J])if(!M||G.nodeType===M){if(void 0!==P){if(G===P)break;if("string"==typeof P&&k(G).is(P))break}Q.push(G)}return Q},I=function(G,J,M){for(G=G[J];G;G=G[J])if(G.nodeType==M)return G;return null};l({parent:function(G){return(G=G.parentNode)&&11!==G.nodeType?G:null},parents:function(G){return F(G,"parentNode")},
next:function(G){return I(G,"nextSibling",1)},prev:function(G){return I(G,"previousSibling",1)},children:function(G){return H(G.firstChild,"nextSibling",1)},contents:function(G){return b.toArray(("iframe"===G.nodeName?G.contentDocument||G.contentWindow.document:G).childNodes)}},function(G,J){k.fn[G]=function(M){var P=[];this.each(function(){var Q=J.call(P,this,M,P);Q&&(k.isArray(Q)?P.push.apply(P,Q):P.push(Q))});1<this.length&&(n[G]||(P=k.unique(P)),0===G.indexOf("parents")&&(P=P.reverse()));P=k(P);
return M?P.filter(M):P}});l({parentsUntil:function(G,J){return F(G,"parentNode",J)},nextUntil:function(G,J){return H(G,"nextSibling",1,J).slice(1)},prevUntil:function(G,J){return H(G,"previousSibling",1,J).slice(1)}},function(G,J){k.fn[G]=function(M,P){var Q=[];this.each(function(){var W=J.call(Q,this,M,Q);W&&(k.isArray(W)?Q.push.apply(Q,W):Q.push(W))});1<this.length&&(Q=k.unique(Q),0===G.indexOf("parents")||"prevUntil"===G)&&(Q=Q.reverse());Q=k(Q);return P?Q.filter(P):Q}});k.fn.is=function(G){return!!G&&
0<this.filter(G).length};k.fn.init.prototype=k.fn;k.overrideDefaults=function(G){var J,M=function(P,Q){J=J||G();0===arguments.length&&(P=J.element);Q||(Q=J.context);return new M.fn.init(P,Q)};k.extend(M,this);return M};q=function(G,J,M){l(M,function(P,Q){G[P]=G[P]||{};G[P][J]=Q})};h.ie&&8>h.ie&&(q(B,"get",{maxlength:function(G){G=G.maxLength;if(2147483647!==G)return G},size:function(G){G=G.size;if(20!==G)return G},"class":function(G){return G.className},style:function(G){G=G.style.cssText;if(0!==
G.length)return G}}),q(B,"set",{"class":function(G,J){G.className=J},style:function(G,J){G.style.cssText=J}}));h.ie&&9>h.ie&&(C["float"]="styleFloat",q(r,"set",{opacity:function(G,J){G=G.style;null===J||""===J?G.removeAttribute("filter"):(G.zoom=1,G.filter="alpha(opacity="+100*J+")")}}));k.attrHooks=B;k.cssHooks=r;return k});L("ephox.katamari.api.Thunk",[],function(){return{cached:function(v){var q=!1,p;return function(){q||(q=!0,p=v.apply(null,arguments));return p}}}});ra("global!Number",Number);
L("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(v,q,p){var h=function(){return b(0,0)},b=function(c,d){return{major:c,minor:d}};return{nu:b,detect:function(c,d){d=p(d).toLowerCase();if(0===c.length)c=h();else{a:{for(var a=0;a<c.length;a++){var f=c[a];if(f.test(d)){c=f;break a}}c=void 0}c=c?b(q(d.replace(c,"$1")),q(d.replace(c,"$2"))):{major:0,minor:0}}return c},unknown:h}});L("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],
function(v,q){var p=function(b,c){return function(){return c===b}},h=function(b){var c=b.current;return{current:c,version:b.version,isEdge:p("Edge",c),isChrome:p("Chrome",c),isIE:p("IE",c),isOpera:p("Opera",c),isFirefox:p("Firefox",c),isSafari:p("Safari",c)}};return{unknown:function(){return h({current:void 0,version:q.unknown()})},nu:h,edge:v.constant("Edge"),chrome:v.constant("Chrome"),ie:v.constant("IE"),opera:v.constant("Opera"),firefox:v.constant("Firefox"),safari:v.constant("Safari")}});L("ephox.sand.core.OperatingSystem",
["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(v,q){var p=function(b,c){return function(){return c===b}},h=function(b){var c=b.current;return{current:c,version:b.version,isWindows:p("Windows",c),isiOS:p("iOS",c),isAndroid:p("Android",c),isOSX:p("OSX",c),isLinux:p("Linux",c),isSolaris:p("Solaris",c),isFreeBSD:p("FreeBSD",c)}};return{unknown:function(){return h({current:void 0,version:q.unknown()})},nu:h,windows:v.constant("Windows"),ios:v.constant("iOS"),android:v.constant("Android"),
linux:v.constant("Linux"),osx:v.constant("OSX"),solaris:v.constant("Solaris"),freebsd:v.constant("FreeBSD")}});L("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(v){return function(q,p,h){var b=q.isiOS()&&!0===/ipad/i.test(h),c=q.isiOS()&&!b,d=q.isAndroid()&&3===q.version.major,a=q.isAndroid()&&4===q.version.major;d=b||d||a&&!0===/mobile/i.test(h);var f=(a=q.isiOS()||q.isAndroid())&&!d;p=p.isSafari()&&q.isiOS()&&!1===/safari/i.test(h);return{isiPad:v.constant(b),isiPhone:v.constant(c),
isTablet:v.constant(d),isPhone:v.constant(f),isTouch:v.constant(a),isAndroid:q.isAndroid,isiOS:q.isiOS,isWebView:v.constant(p)}}});L("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(v,q,p){var h=function(b,c){var d=p(c).toLowerCase();return v.find(b,function(a){return a.search(d)})};return{detectBrowser:function(b,c){return h(b,c).map(function(d){var a=q.detect(d.versionRegexes,c);return{current:d.name,version:a}})},detectOs:function(b,c){return h(b,
c).map(function(d){var a=q.detect(d.versionRegexes,c);return{current:d.name,version:a}})}}});L("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(v,q){return q+v},addToEnd:function(v,q){return v+q},removeFromStart:function(v,q){return v.substring(q)},removeFromEnd:function(v,q){return v.substring(0,v.length-q)}}});L("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(v,q){return{first:function(p,h){return p.substr(0,h)},last:function(p,h){return p.substr(p.length-
h,p.length)},head:function(p){return""===p?v.none():v.some(p.substr(0,1))},tail:function(p){return""===p?v.none():v.some(p.substring(1))}}});L("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(v,q,p){var h=function(d,a,f){return""===a?!0:d.length<a.length?!1:d.substr(f,f+a.length)===a},b=function(d,a){return h(d,a,0)},c=function(d,a){return h(d,a,d.length-a.length)};return{supplant:function(d,a){return d.replace(/\${([^{}]*)}/g,
function(f,n){n=a[n];var u=typeof n;return"string"===u||"number"===u?n:f})},startsWith:b,removeLeading:function(d,a){return b(d,a)?v.removeFromStart(d,a.length):d},removeTrailing:function(d,a){return c(d,a)?v.removeFromEnd(d,a.length):d},ensureLeading:function(d,a){return b(d,a)?d:v.addToStart(d,a)},ensureTrailing:function(d,a){return c(d,a)?d:v.addToEnd(d,a)},endsWith:c,contains:function(d,a){return-1!==d.indexOf(a)},trim:function(d){return d.replace(/^\s+|\s+$/g,"")},lTrim:function(d){return d.replace(/^\s+/g,
"")},rTrim:function(d){return d.replace(/\s+$/g,"")},capitalize:function(d){return q.head(d).bind(function(a){return q.tail(d).map(function(f){return a.toUpperCase()+f})}).getOr(d)}}});L("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(v,q){var p=/.*?version\/ ?([0-9]+)\.([0-9]+).*/,h=function(b){return function(c){return q.contains(c,b)}};p=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(b){return q.contains(b,"edge/")&&
q.contains(b,"chrome")&&q.contains(b,"safari")&&q.contains(b,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,p],search:function(b){return q.contains(b,"chrome")&&!q.contains(b,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(b){return q.contains(b,"msie")||q.contains(b,"trident")}},{name:"Opera",versionRegexes:[p,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:h("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/ ?([0-9]+)\.([0-9]+).*/],
search:h("firefox")},{name:"Safari",versionRegexes:[p,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(b){return(q.contains(b,"safari")||q.contains(b,"mobile/"))&&q.contains(b,"applewebkit")}}];h=[{name:"Windows",search:h("win"),versionRegexes:[/.*?windows nt ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(b){return q.contains(b,"iphone")||q.contains(b,"ipad")},versionRegexes:[/.*?version\/ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",
search:h("android"),versionRegexes:[/.*?android ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:h("os x"),versionRegexes:[/.*?os x ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:h("linux"),versionRegexes:[]},{name:"Solaris",search:h("sunos"),versionRegexes:[]},{name:"FreeBSD",search:h("freebsd"),versionRegexes:[]}];return{browsers:v.constant(p),oses:v.constant(h)}});L("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString",
"ephox.sand.info.PlatformInfo"],function(v,q,p,h,b){return{detect:function(c){var d=b.browsers(),a=b.oses();d=h.detectBrowser(d,c).fold(v.unknown,v.nu);a=h.detectOs(a,c).fold(q.unknown,q.nu);c=p(a,d,c);return{browser:d,os:a,deviceType:c}}}});L("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(v,q,p){return{detect:v.cached(function(){return q.detect(p.userAgent)})}});L("global!console",[],function(){"undefined"===typeof console&&
(console={log:function(){}});return console});L("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(v,q,p,h){var b=function(c){if(null===c||void 0===c)throw new q("Node cannot be null or undefined");return{dom:v.constant(c)}};return{fromHtml:function(c,d){d=(d||h).createElement("div");d.innerHTML=c;if(!d.hasChildNodes()||1<d.childNodes.length)throw p.error("HTML does not have a single root node",c),"HTML must have a single root node";
return b(d.childNodes[0])},fromTag:function(c,d){c=(d||h).createElement(c);return b(c)},fromText:function(c,d){c=(d||h).createTextNode(c);return b(c)},fromDom:b}});L("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});L("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(v){var q=function(d){return d.dom().nodeName.toLowerCase()},
p=function(d){return d.dom().nodeType},h=function(d){return function(a){return p(a)===d}},b=h(v.ELEMENT),c=h(v.TEXT);h=h(v.DOCUMENT);return{name:q,type:p,value:function(d){return d.dom().nodeValue},isElement:b,isText:c,isDocument:h,isComment:function(d){return p(d)===v.COMMENT||"#comment"===q(d)}}});L("ephox.katamari.api.Type",["global!Array","global!String"],function(v,q){var p=function(h){return function(b){if(null===b)b="null";else{var c=typeof b;b="object"===c&&v.prototype.isPrototypeOf(b)?"array":
"object"===c&&q.prototype.isPrototypeOf(b)?"string":c}return b===h}};return{isString:p("string"),isObject:p("object"),isArray:p("array"),isNull:p("null"),isBoolean:p("boolean"),isUndefined:p("undefined"),isFunction:p("function"),isNumber:p("number")}});L("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(v,q){var p=function(){var a=q.keys,f=function(n){var u=[],z;for(z in n)n.hasOwnProperty(z)&&u.push(z);return u};return void 0===a?f:a}(),h=function(a,f){for(var n=p(a),
u=0,z=n.length;u<z;u++){var w=n[u];f(a[w],w,a)}},b=function(a,f){var n={};h(a,function(u,z){u=f(u,z,a);n[u.k]=u.v});return n},c=function(a,f){var n=[];h(a,function(u,z){n.push(f(u,z))});return n},d=function(a){return c(a,function(f){return f})};return{bifilter:function(a,f){var n={},u={};h(a,function(z,w){(f(z,w)?n:u)[w]=z});return{t:n,f:u}},each:h,map:function(a,f){return b(a,function(n,u,z){return{k:u,v:f(n,u,z)}})},mapToArray:c,tupleMap:b,find:function(a,f){for(var n=p(a),u=0,z=n.length;u<z;u++){var w=
n[u],m=a[w];if(f(m,w,a))return v.some(m)}return v.none()},keys:p,values:d,size:function(a){return d(a).length}}});L("ephox.sugar.api.properties.Attr","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.sugar.api.node.Node global!Error global!console".split(" "),function(v,q,p,h,b,c){var d=function(u,z,w){if(v.isString(w)||v.isBoolean(w)||v.isNumber(w))u.setAttribute(z,w+"");else throw c.error("Invalid call to Attr.set. Key ",z,":: Value ",w,":: Element ",u),new b("Attribute value was not simple");
},a=function(u,z,w){d(u.dom(),z,w)},f=function(u,z){u=u.dom().getAttribute(z);return null===u?void 0:u},n=function(u,z){return(u=u.dom())&&u.hasAttribute?u.hasAttribute(z):!1};return{clone:function(u){return q.foldl(u.dom().attributes,function(z,w){z[w.name]=w.value;return z},{})},set:a,setAll:function(u,z){var w=u.dom();p.each(z,function(m,g){d(w,g,m)})},get:f,has:n,remove:function(u,z){u.dom().removeAttribute(z)},hasNone:function(u){u=u.dom().attributes;return void 0===u||null===u||0===u.length},
transfer:function(u,z,w){h.isElement(u)&&h.isElement(z)&&q.each(w,function(m){n(u,m)&&!n(z,m)&&a(z,m,f(u,m))})}}});L("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(v,q,p,h){var b=function(c){c=c.dom().body;if(null===c||void 0===c)throw"Body is not available yet";return q.fromDom(c)};return{body:v.cached(function(){return b(q.fromDom(h))}),getBody:b,inBody:function(c){c=p.isText(c)?c.dom().parentNode:c.dom();
return void 0!==c&&null!==c&&c.ownerDocument.body.contains(c)}}});L("ephox.sugar.impl.Style",[],function(){return{isSupported:function(v){return void 0!==v.style}}});L("ephox.sugar.api.properties.Css","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Option ephox.sugar.api.properties.Attr ephox.sugar.api.node.Body ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.impl.Style ephox.katamari.api.Strings global!Error global!console global!window".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w){var m=function(C,B,r){if(!v.isString(r))throw z.error("Invalid call to CSS.set. Property ",B,":: Value ",r,":: Element ",C),new u("CSS value must be a string: "+r);f.isSupported(C)&&C.style.setProperty(B,r)},g=function(C,B,r){C=C.dom();m(C,B,r)},e=function(C,B){return f.isSupported(C)?C.style.getPropertyValue(B):""},t=function(C,B){C=C.dom();B=e(C,B);return h.from(B).filter(function(r){return 0<r.length})},y=function(C,B,r){t(C,r).each(function(k){t(B,r).isNone()&&
g(B,r,k)})};return{copy:function(C,B){C=C.dom();B=B.dom();f.isSupported(C)&&f.isSupported(B)&&(B.style.cssText=C.style.cssText)},set:g,preserve:function(C,B){var r=b.get(C,"style");B=B(C);(void 0===r?b.remove:b.set)(C,"style",r);return B},setAll:function(C,B){var r=C.dom();p.each(B,function(k,x){m(r,x,k)})},setOptions:function(C,B){var r=C.dom();p.each(B,function(k,x){k.fold(function(){f.isSupported(r)&&r.style.removeProperty(x)},function(A){m(r,x,A)})})},remove:function(C,B){var r=C.dom();f.isSupported(r)&&
r.style.removeProperty(B);b.has(C,"style")&&""===n.trim(b.get(C,"style"))&&b.remove(C,"style")},get:function(C,B){var r=C.dom(),k=w.getComputedStyle(r).getPropertyValue(B);C=""!==k||c.inBody(C)?k:e(r,B);return null===C?void 0:C},getRaw:t,getAllRaw:function(C){var B={};C=C.dom();if(f.isSupported(C))for(var r=0;r<C.style.length;r++){var k=C.style.item(r);B[k]=C.style[k]}return B},isValidValue:function(C,B,r){C=d.fromTag(C);g(C,B,r);return t(C,B).isSome()},reflow:function(C){return C.dom().offsetWidth},
transfer:function(C,B,r){a.isElement(C)&&a.isElement(B)&&q.each(r,function(k){y(C,B,k)})}}});L("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(v,q,p,h){return function(){var b=arguments;return function(){for(var c=new p(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(b.length!==c.length)throw new h('Wrong number of arguments to struct. Expected "['+b.length+']", got '+c.length+" arguments");var a={};v.each(b,function(f,
n){a[f]=q.constant(c[n])});return a}}});L("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(v,q,p){var h=function(b){return b.slice(0).sort()};return{sort:h,reqMessage:function(b,c){throw new p("All required keys ("+h(b).join(", ")+") were not specified. Specified keys were: "+h(c).join(", ")+".");},unsuppMessage:function(b){throw new p("Unsupported keys for object: "+h(b).join(", "));},validateStrArr:function(b,c){if(!q.isArray(c))throw new p("The "+
b+" fields must be an array. Was: "+c+".");v.each(c,function(d){if(!q.isString(d))throw new p("The value "+d+" in the "+b+" fields was not a string.");})},invalidTypeMessage:function(b,c){throw new p("All values need to be of type: "+c+". Keys ("+h(b).join(", ")+") were not.");},checkDupes:function(b){var c=h(b);v.find(c,function(d,a){return a<c.length-1&&d===c[a+1]}).each(function(d){throw new p("The field: "+d+" occurs more than once in the combined fields: ["+c.join(", ")+"].");})}}});L("ephox.katamari.data.MixedBag",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.util.BagUtils global!Error global!Object".split(" "),function(v,q,p,h,b,c,d){return function(a,f){var n=a.concat(f);if(0===n.length)throw new c("You must specify at least one required or optional field.");b.validateStrArr("required",a);b.validateStrArr("optional",f);b.checkDupes(n);return function(u){var z=p.keys(u);v.forall(a,function(g){return v.contains(z,g)})||b.reqMessage(a,z);var w=
v.filter(z,function(g){return!v.contains(n,g)});0<w.length&&b.unsuppMessage(w);var m={};v.each(a,function(g){m[g]=q.constant(u[g])});v.each(f,function(g){m[g]=q.constant(d.prototype.hasOwnProperty.call(u,g)?h.some(u[g]):h.none())});return m}}});L("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(v,q){return{immutable:v,immutableBag:q}});L("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(v,q){var p=[],h=function(b){p.push(b);return q(b)};
v=q(v);do v=v.bind(h);while(v.isSome());return p}}});L("ephox.sand.api.Node",["ephox.sand.util.Global"],function(v){return{documentPositionPreceding:function(q,p){var h=v.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(q.compareDocumentPosition(p)&h)},documentPositionContainedBy:function(q,p){var h=v.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;return 0!==(q.compareDocumentPosition(p)&h)}}});L("ephox.sugar.api.search.Selectors","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.node.NodeTypes global!Error global!document".split(" "),
function(v,q,p,h,b,c){var d=h.ELEMENT,a=h.DOCUMENT;return{all:function(f,n){n=void 0===n?c:n.dom();return n.nodeType!==d&&n.nodeType!==a||0===n.childElementCount?[]:v.map(n.querySelectorAll(f),p.fromDom)},is:function(f,n){f=f.dom();if(f.nodeType!==d)return!1;if(void 0!==f.matches)return f.matches(n);if(void 0!==f.msMatchesSelector)return f.msMatchesSelector(n);if(void 0!==f.webkitMatchesSelector)return f.webkitMatchesSelector(n);if(void 0!==f.mozMatchesSelector)return f.mozMatchesSelector(n);throw new b("Browser lacks native selectors");
},one:function(f,n){n=void 0===n?c:n.dom();return n.nodeType!==d&&n.nodeType!==a||0===n.childElementCount?q.none():q.from(n.querySelector(f)).map(p.fromDom)}}});L("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(v,q,p,h,b){var c=function(f,n){return f.dom()===n.dom()},d=function(f,n){f=f.dom();n=n.dom();return f===n?!1:f.contains(n)},a=function(f,n){return p.documentPositionContainedBy(f.dom(),
n.dom())};h=h.detect().browser.isIE()?a:d;return{eq:c,isEqualNode:function(f,n){return f.dom().isEqualNode(n.dom())},member:function(f,n){return v.exists(n,q.curry(c,f))},contains:h,is:b.is}});L("ephox.sugar.api.search.Traverse","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.alien.Recurse ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element".split(" "),function(v,q,p,h,b,c,d,a){var f=function(e){return a.fromDom(e.dom().ownerDocument)},
n=function(e){e=e.dom();return h.from(e.parentNode).map(a.fromDom)},u=function(e){e=e.dom();return h.from(e.previousSibling).map(a.fromDom)},z=function(e){e=e.dom();return h.from(e.nextSibling).map(a.fromDom)},w=function(e){e=e.dom();return q.map(e.childNodes,a.fromDom)},m=function(e,t){e=e.dom().childNodes;return h.from(e[t]).map(a.fromDom)},g=b.immutable("element","offset");return{owner:f,defaultView:function(e){e=e.dom().ownerDocument.defaultView;return a.fromDom(e)},documentElement:function(e){e=
f(e);return a.fromDom(e.dom().documentElement)},parent:n,findIndex:function(e){return n(e).bind(function(t){t=w(t);return q.findIndex(t,function(y){return d.eq(e,y)})})},parents:function(e,t){t=v.isFunction(t)?t:p.constant(!1);var y=e.dom();for(e=[];null!==y.parentNode&&void 0!==y.parentNode;){y=y.parentNode;var C=a.fromDom(y);e.push(C);if(!0===t(C))break}return e},siblings:function(e){return n(e).map(w).map(function(t){return q.filter(t,function(y){return!d.eq(e,y)})}).getOr([])},prevSibling:u,offsetParent:function(e){e=
e.dom();return h.from(e.offsetParent).map(a.fromDom)},prevSiblings:function(e){return q.reverse(c.toArray(e,u))},nextSibling:z,nextSiblings:function(e){return c.toArray(e,z)},children:w,child:m,firstChild:function(e){return m(e,0)},lastChild:function(e){return m(e,e.dom().childNodes.length-1)},childNodesCount:function(e,t){return e.dom().childNodes.length},leaf:function(e,t){var y=w(e);return 0<y.length&&t<y.length?g(y[t],0):g(e,t)}}});L("tinymce.core.dom.Position","ephox.katamari.api.Arr ephox.sand.api.PlatformDetection ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),
function(v,q,p,h,b,c){var d=q.detect().browser,a=function(f){return d.isFirefox()&&"table"===h.name(f)?v.find(c.children(f),h.isElement).filter(function(n){return"caption"===h.name(n)}).bind(function(n){return v.find(c.nextSiblings(n),h.isElement).map(function(u){u=u.dom().offsetTop;var z=n.dom().offsetTop,w=n.dom().offsetHeight;return u<=z?-w:0})}).getOr(0):0};return{getPos:function(f,n,u){var z=0,w=0,m=f.ownerDocument;u=u?u:f;if(n){if(u===f&&n.getBoundingClientRect&&"static"===b.get(p.fromDom(f),
"position"))return n=n.getBoundingClientRect(),z=n.left+(m.documentElement.scrollLeft||f.scrollLeft)-m.documentElement.clientLeft,w=n.top+(m.documentElement.scrollTop||f.scrollTop)-m.documentElement.clientTop,{x:z,y:w};for(f=n;f&&f!==u&&f.nodeType;)z+=f.offsetLeft||0,w+=f.offsetTop||0,f=f.offsetParent;for(f=n.parentNode;f&&f!==u&&f.nodeType;)z-=f.scrollLeft||0,w-=f.scrollTop||0,f=f.parentNode;w+=a(p.fromDom(n))}return{x:z,y:w}}}});L("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option",
"global!setTimeout"],function(v,q,p){var h=function(b){var c=q.none(),d=[],a=function(u){f()?n(u):d.push(u)},f=function(){return c.isSome()},n=function(u){c.each(function(z){p(function(){u(z)},0)})};b(function(u){c=q.some(u);v.each(d,n);d=[]});return{get:a,map:function(u){return h(function(z){a(function(w){z(u(w))})})},isReady:f}};return{nu:h,pure:function(b){return h(function(c){c(b)})}}});L("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(v,q){return{bounce:function(p){return function(){var h=
v.prototype.slice.call(arguments),b=this;q(function(){p.apply(b,h)},0)}}}});L("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(v,q){var p=function(h){var b=function(c){h(q.bounce(c))};return{map:function(c){return p(function(d){b(function(a){a=c(a);d(a)})})},bind:function(c){return p(function(d){b(function(a){c(a).get(d)})})},anonBind:function(c){return p(function(d){b(function(a){c.get(d)})})},toLazy:function(){return v.nu(b)},get:b}};return{nu:p,
pure:function(h){return p(function(b){b(h)})}}});L("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(v){return{par:function(q,p){return p(function(h){var b=[],c=0,d=function(a){return function(f){b[a]=f;c++;c>=q.length&&h(b)}};0===q.length?h([]):v.each(q,function(a,f){a.get(d(f))})})}}});L("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(v,q,p){var h=function(b){return p.par(b,q.nu)};return{par:h,mapM:function(b,
c){b=v.map(b,c);return h(b)},compose:function(b,c){return function(d){return c(d).bind(b)}}}});L("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(v,q){var p=function(b){return{is:function(c){return b===c},isValue:v.constant(!0),isError:v.constant(!1),getOr:v.constant(b),getOrThunk:v.constant(b),getOrDie:v.constant(b),or:function(c){return p(b)},orThunk:function(c){return p(b)},fold:function(c,d){return d(b)},map:function(c){return p(c(b))},each:function(c){c(b)},
bind:function(c){return c(b)},exists:function(c){return c(b)},forall:function(c){return c(b)},toOption:function(){return q.some(b)}}},h=function(b){return{is:v.constant(!1),isValue:v.constant(!1),isError:v.constant(!0),getOr:v.identity,getOrThunk:function(c){return c()},getOrDie:function(){return v.die(b)()},or:function(c){return c},orThunk:function(c){return c()},fold:function(c,d){return c(b)},map:function(c){return h(b)},each:v.noop,bind:function(c){return h(b)},exists:v.constant(!1),forall:v.constant(!0),
toOption:q.none}};return{value:p,error:h}});L("tinymce.core.dom.StyleSheetLoader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Future ephox.katamari.api.Futures ephox.katamari.api.Result global!navigator tinymce.core.util.Delay tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d,a){return function(f,n){var u=0,z={};n=n||{};var w=n.maxLoadTime||5E3;var m=function(y){f.getElementsByTagName("head")[0].appendChild(y)},g=function(y,C,B){var r=function(){for(var G=E.passed,J=
G.length;J--;)G[J]();E.status=2;E.passed=[];E.failed=[]},k=function(){for(var G=E.failed,J=G.length;J--;)G[J]();E.status=3;E.passed=[];E.failed=[]},x=function(){var G=c.userAgent.match(/WebKit\/(\d*)/);return!!(G&&536>G[1])},A=function(G,J){G()||((new Date).getTime()-H<w?d.setTimeout(J):k())},l=function(){A(function(){for(var G=f.styleSheets,J,M=G.length;M--;)if(J=G[M],(J=J.ownerNode?J.ownerNode:J.owningElement)&&J.id===F.id)return r(),!0},l)},D=function(){A(function(){try{var G=I.sheet.cssRules;
r();return!!G}catch(J){}},D)};y=a._addCacheSuffix(y);if(z[y])var E=z[y];else E={passed:[],failed:[]},z[y]=E;C&&E.passed.push(C);B&&E.failed.push(B);if(1!=E.status)if(2==E.status)r();else if(3==E.status)k();else{E.status=1;var F=f.createElement("link");F.rel="stylesheet";F.type="text/css";F.id="u"+u++;F.async=!1;F.defer=!1;var H=(new Date).getTime();if("onload"in F&&!x())F.onload=l,F.onerror=k;else{if(0<c.userAgent.indexOf("Firefox")){var I=f.createElement("style");I.textContent='@import "'+y+'"';
D();m(I);return}l()}m(F);F.href=y}},e=function(y){return p.nu(function(C){g(y,q.compose(C,q.constant(b.value(y))),q.compose(C,q.constant(b.error(y))))})},t=function(y){return y.fold(q.identity,q.identity)};return{load:g,loadAll:function(y,C,B){h.par(v.map(y,e)).get(function(r){r=v.partition(r,function(k){return k.isValue()});0<r.fail.length?B(r.fail.map(t)):C(r.pass.map(t))})}}}});L("tinymce.core.dom.TreeWalker",[],function(){return function(v,q){var p=v,h=function(b,c,d,a){if(b){if(!a&&b[c])return b[c];
if(b!=q){if(c=b[d])return c;for(b=b.parentNode;b&&b!=q;b=b.parentNode)if(c=b[d])return c}}};this.current=function(){return p};this.next=function(b){return p=h(p,"firstChild","nextSibling",b)};this.prev=function(b){return p=h(p,"lastChild","previousSibling",b)};this.prev2=function(b){a:{if(p){var c=p.previousSibling;if(q&&c===q){p=void 0;break a}if(c){if(!b)for(b=c.lastChild;b;b=b.lastChild)if(!b.lastChild){p=b;break a}p=c;break a}if((c=p.parentNode)&&c!==q){p=c;break a}}p=void 0}return p}}});L("tinymce.core.dom.ElementType",
["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(v,q,p){var h=function(d){var a;return function(f){a=a?a:v.mapToObject(d,q.constant(!0));return a.hasOwnProperty(p.name(f))}},b=h("h1 h2 h3 h4 h5 h6".split(" ")),c=h("article aside details div dt figcaption footer form fieldset header hgroup html main nav section summary body p dl multicol dd figure address center blockquote h1 h2 h3 h4 h5 h6 listing xmp pre plaintext menu dir ul ol li hr table tbody thead tfoot th tr td caption".split(" "));
return{isBlock:c,isInline:function(d){return p.isElement(d)&&!c(d)},isHeading:b,isTextBlock:h("h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure".split(" ")),isList:h(["ul","ol","dl"]),isListItem:h(["li","dd","dt"]),isVoid:h("area base basefont br col frame hr img input isindex link meta param embed source wbr track".split(" ")),isTableSection:h(["thead","tbody","tfoot"]),isTableCell:h(["td","th"]),isBr:function(d){return p.isElement(d)&&
"br"===p.name(d)}}});L("tinymce.core.dom.NodeType",[],function(){var v=function(b){return function(c){return!!c&&c.nodeType==b}},q=v(1),p=function(b){b=b.toLowerCase().split(" ");return function(c){if(c&&c.nodeType){var d=c.nodeName.toLowerCase();for(c=0;c<b.length;c++)if(d===b[c])return!0}return!1}},h=function(b){return function(c){return!q(c)||c.contentEditable!==b&&c.getAttribute("data-mce-contenteditable")!==b?!1:!0}};return{isText:v(3),isElement:q,isComment:v(8),isDocument:v(9),isBr:p("br"),
isContentEditableTrue:h("true"),isContentEditableFalse:h("false"),matchNodeNames:p,hasPropValue:function(b,c){return function(d){return q(d)&&d[b]===c}},hasAttribute:function(b,c){return function(d){return q(d)&&d.hasAttribute(b)}},hasAttributeValue:function(b,c){return function(d){return q(d)&&d.getAttribute(b)===c}},matchStyleValues:function(b,c){c=c.toLowerCase().split(" ");return function(d){var a;if(q(d))for(a=0;a<c.length;a++){var f=d.ownerDocument.defaultView.getComputedStyle(d,null).getPropertyValue(b);
if(f===c[a])return!0}return!1}},isBogus:function(b){return q(b)&&b.hasAttribute("data-mce-bogus")}}});L("tinymce.core.dom.TrimNode",["ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(v,q,p,h){var b=function(d){return d&&"SPAN"===d.tagName&&"bookmark"===d.getAttribute("data-mce-type")},c=function(d,a){var f,n=a.childNodes;if(!p.isElement(a)||!b(a)){for(f=n.length-1;0<=f;f--)c(d,n[f]);if(!1===p.isDocument(a)){if(p.isText(a)&&
0<a.nodeValue.length){f=h.trim(a.nodeValue).length;if(d.isBlock(a.parentNode)||0<f)return;if(f=0===f)f=a.nextSibling&&"SPAN"===a.nextSibling.nodeName,f=a.previousSibling&&"SPAN"===a.previousSibling.nodeName&&f;if(f)return}else if(p.isElement(a)&&(n=a.childNodes,1===n.length&&b(n[0])&&a.parentNode.insertBefore(n[0],a),n.length||q.isVoid(v.fromDom(a))))return;d.remove(a)}return a}};return{trimNode:c}});L("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(v,
q){var p=q.makeMap,h=/[&<>"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&"']/g,d=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,a={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",
155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};var f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};var n={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var u=function(m,g){var e,t={};if(m){m=m.split(",");g=g||10;for(e=0;e<m.length;e+=2){var y=String.fromCharCode(parseInt(m[e],g));if(!f[y]){var C="&"+m[e+1]+";";t[y]=C;t[C]=y}}return t}};var z=u("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);var w={encodeRaw:function(m,g){return m.replace(g?h:b,function(e){return f[e]||e})},encodeAllRaw:function(m){return(""+m).replace(c,function(g){return f[g]||g})},encodeNumeric:function(m,g){return m.replace(g?h:b,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":f[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(m,g,e){e=e||z;return m.replace(g?h:b,function(t){return f[t]||e[t]||t})},getEncodeFunc:function(m,g){g=u(g)||z;var e=function(y,C){return y.replace(C?
h:b,function(B){return void 0!==f[B]?f[B]:void 0!==g[B]?g[B]:1<B.length?"&#"+(1024*(B.charCodeAt(0)-55296)+(B.charCodeAt(1)-56320)+65536)+";":"&#"+B.charCodeAt(0)+";"})},t=function(y,C){return w.encodeNamed(y,C,g)};m=p(m.replace(/\+/g,","));return m.named&&m.numeric?e:m.named?g?t:w.encodeNamed:m.numeric?w.encodeNumeric:w.encodeRaw},decode:function(m){return m.replace(d,function(g,e){if(e)return e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10),65535<e?(e-=65536,String.fromCharCode(55296+
(e>>10),56320+(e&1023))):a[e]||String.fromCharCode(e);(e=n[g]||z[g])||(e=v.fromTag("div").dom(),e.innerHTML=g,e=e.textContent||e.innerText||g);return e})}};return w});L("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(v){var q={},p={},h=v.makeMap,b=v.each,c=v.extend,d=v.explode,a=v.inArray,f=function(z,w){return(z=v.trim(z))?z.split(w||" "):[]},n=function(z,w){var m={},g=function(k,x,A){var l,D=function(F,H){var I={},G;var J=0;for(G=F.length;J<G;J++)I[F[J]]=H||{};return I};A=A||[];
x=x||"";"string"===typeof A&&(A=f(A));k=f(k);for(l=k.length;l--;){var E=f([t,x].join(" "));E={attributes:D(E),attributesOrder:E,children:D(A,p)};m[k[l]]=E}},e=function(k,x){var A;k=f(k);var l=k.length;for(x=f(x);l--;){var D=m[k[l]];var E=0;for(A=x.length;E<A;E++)D.attributes[x[E]]={},D.attributesOrder.push(x[E])}};if(q[z])return q[z];var t="id accesskey class dir lang style tabindex title role";var y=f("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting");
var C="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";var B="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment";w.allow_events&&(t=t.concat(t,y));"html4"!=z&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",C+=" article aside details dialog figure header footer hgroup section nav",B+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen");
if("html5-strict"!=z){t+=" xml:lang";B=[B,"acronym applet basefont big font strike tt"].join(" ");b(f("acronym applet basefont big font strike tt"),function(k){g(k,"",B)});C=[C,"center dir isindex noframes"].join(" ");var r=[C,B].join(" ");b(f("center dir isindex noframes"),function(k){g(k,"",r)})}r=r||[C,B].join(" ");g("html","manifest","head body");g("head","","base command link meta noscript script style title");g("title hr noscript br");g("base","href target");g("link","href rel media hreflang type sizes hreflang");
g("meta","name http-equiv content charset");g("style","media type scoped");g("script","src async defer type charset");g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r);g("address dt dd div caption","",r);g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",B);g("blockquote","cite",r);g("ol","reversed start type",
"li");g("ul","","li");g("li","value",r);g("dl","","dt dd");g("a","href target rel media hreflang type",B);g("q","cite",B);g("ins del","cite datetime",r);g("img","src sizes srcset alt usemap ismap width height");g("iframe","src name width height",r);g("embed","src type width height");g("object","data type typemustmatch name usemap form width height",[r,"param"].join(" "));g("param","name value");g("map","name",[r,"area"].join(" "));g("area","alt coords shape href target rel media hreflang type");g("table",
"border","caption colgroup thead tfoot tbody tr"+("html4"==z?" col":""));g("colgroup","span","col");g("col","span");g("tbody thead tfoot","","tr");g("tr","","td th");g("td","colspan rowspan headers",r);g("th","colspan rowspan headers scope abbr",r);g("form","accept-charset action autocomplete enctype method name novalidate target",r);g("fieldset","disabled form name",[r,"legend"].join(" "));g("label","form for",B);g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");
g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==z?r:B);g("select","disabled form multiple name required size","option optgroup");g("optgroup","disabled label","option");g("option","disabled label selected value");g("textarea","cols dirname disabled form maxlength name readonly required rows wrap");g("menu","type label",[r,"li"].join(" "));g("noscript","",r);"html4"!=z&&(g("wbr"),g("ruby","",[B,"rt rp"].join(" ")),g("figcaption","",r),
g("mark rt rp summary bdi","",B),g("canvas","width height",r),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[B,"option"].join(" ")),g("article section nav aside header footer",
"",r),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[r,"figcaption"].join(" ")),g("time","datetime",B),g("dialog","open",r),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",B),g("progress","value max",B),g("meter","value min max low high optimum",B),g("details","open",[r,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"));"html5-strict"!=z&&(e("script","language xml:space"),e("style","xml:space"),e("object","declare classid code codebase codetype archive standby align border hspace vspace"),
e("embed","align name hspace vspace"),e("param","valuetype type"),e("a","charset name rev shape coords"),e("br","clear"),e("applet","codebase archive code object alt name width height align hspace vspace"),e("img","name longdesc align border hspace vspace"),e("iframe","longdesc frameborder marginwidth marginheight scrolling align"),e("font basefont","size color face"),e("input","usemap align"),e("select","onchange"),e("textarea"),e("h1 h2 h3 h4 h5 h6 div p legend caption","align"),e("ul","type compact"),
e("li","type"),e("ol dl menu dir","compact"),e("pre","width xml:space"),e("hr","align noshade size width"),e("isindex","prompt"),e("table","summary width frame rules cellspacing cellpadding align bgcolor"),e("col","width align char charoff valign"),e("colgroup","width align char charoff valign"),e("thead","align char charoff valign"),e("tr","align char charoff valign bgcolor"),e("th","axis align char charoff valign nowrap bgcolor width height"),e("form","accept"),e("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),
e("tfoot","align char charoff valign"),e("tbody","align char charoff valign"),e("area","nohref"),e("body","background bgcolor text link vlink alink"));"html4"!=z&&(e("input button select textarea","autofocus"),e("input textarea","placeholder"),e("a","download"),e("link script img","crossorigin"),e("iframe","sandbox seamless allowfullscreen"));b(f("a form meter progress dfn"),function(k){m[k]&&delete m[k].children[k]});delete m.caption.children.table;delete m.script;return q[z]=m},u=function(z,w){if(z){var m=
{};"string"==typeof z&&(z={"*":z});b(z,function(g,e){m[e]=m[e.toUpperCase()]="map"==w?h(g,/[, ]/):d(g,/[, ]/)})}return m};return function(z){var w={},m={},g=[],e={},t={},y=function(V,ba,N){var O=z[V];O?O=h(O,/[, ]/,h(O.toUpperCase(),/[, ]/)):(O=q[V],O||(O=h(ba," ",h(ba.toUpperCase()," ")),O=c(O,N),q[V]=O));return O};z=z||{};var C=n(z.schema,z);!1===z.verify_html&&(z.valid_elements="*[*]");var B=u(z.valid_styles);var r=u(z.invalid_styles,"map");var k=u(z.valid_classes,"map");var x=y("whitespace_elements",
"pre script noscript style textarea video audio iframe object code");var A=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");var l=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");var D=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");var E=y("non_empty_elements","td th iframe video audio object script pre code",
l);var F=y("move_caret_before_on_enter_elements","table",E);var H=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");var I=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",H);var G=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");b((z.special||"script noscript noframes noembed title style textarea xmp").split(" "),
function(V){t[V]=new RegExp("</"+V+"[^>]*>","gi")});var J=function(V){return new RegExp("^"+V.replace(/([?+*])/g,".$1")+"$")},M=function(V){var ba,N,O,U,X=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,aa=/[*?+]/;if(V){V=f(V,",");if(w["@"]){var fa=w["@"].attributes;var ia=w["@"].attributesOrder}var ta=0;for(ba=V.length;ta<ba;ta++)if(O=X.exec(V[ta])){var pa=O[1];var ya=O[2];var ha=O[3];var ea=O[5];var na={};var ua=[];var va={attributes:na,
attributesOrder:ua};"#"===pa&&(va.paddEmpty=!0);"-"===pa&&(va.removeEmpty=!0);"!"===O[4]&&(va.removeEmptyAttrs=!0);if(fa){for(U in fa)na[U]=fa[U];ua.push.apply(ua,ia)}if(ea){ea=f(ea,"|");var Fa=0;for(N=ea.length;Fa<N;Fa++)if(O=S.exec(ea[Fa])){var Ba={};var za=O[1];var Ha=O[2].replace(/[\\:]:/g,":");pa=O[3];O=O[4];"!"===za&&(va.attributesRequired=va.attributesRequired||[],va.attributesRequired.push(Ha),Ba.required=!0);"-"===za?(delete na[Ha],ua.splice(a(ua,Ha),1)):(pa&&("="===pa&&(va.attributesDefault=
va.attributesDefault||[],va.attributesDefault.push({name:Ha,value:O}),Ba.defaultValue=O),":"===pa&&(va.attributesForced=va.attributesForced||[],va.attributesForced.push({name:Ha,value:O}),Ba.forcedValue=O),"<"===pa&&(Ba.validValues=h(O,"?"))),aa.test(Ha)?(va.attributePatterns=va.attributePatterns||[],Ba.pattern=J(Ha),va.attributePatterns.push(Ba)):(na[Ha]||ua.push(Ha),na[Ha]=Ba))}}fa||"@"!=ya||(fa=na,ia=ua);ha&&(va.outputName=ya,w[ha]=va);aa.test(ya)?(va.pattern=J(ya),g.push(va)):w[ya]=va}}};y=function(V){w=
{};g=[];M(V);b(C,function(ba,N){m[N]=ba.children})};var P=function(V){var ba=/^(~)?(.+)$/;V&&(q.text_block_elements=q.block_elements=null,b(f(V,","),function(N){N=ba.exec(N);var O="~"===N[1],U=O?"span":"div",X=N[2];m[X]=m[U];e[X]=U;O||(I[X.toUpperCase()]={},I[X]={});w[X]||(N=w[U],N=c({},N),delete N.removeEmptyAttrs,delete N.removeEmpty,w[X]=N);b(m,function(S,aa){S[U]&&(m[aa]=S=c({},m[aa]),S[X]=S[U])})}))},Q=function(V){var ba=/^([+\-]?)(\w+)\[([^\]]+)\]$/;q[z.schema]=null;V&&b(f(V,","),function(N){N=
ba.exec(N);var O;if(N){var U=(O=N[1])?m[N[2]]:m[N[2]]={"#comment":{}};U=m[N[2]];b(f(N[3],"|"),function(X){"-"===O?delete U[X]:U[X]={}})}})},W=function(V){var ba=w[V],N;if(ba)return ba;for(N=g.length;N--;)if(ba=g[N],ba.pattern.test(V))return ba};z.valid_elements?y(z.valid_elements):(b(C,function(V,ba){w[ba]={attributes:V.attributes,attributesOrder:V.attributesOrder};m[ba]=V.children}),"html5"!=z.schema&&b(f("strong/b em/i"),function(V){V=f(V,"/");w[V[1]].outputName=V[0]}),b(f("ol ul sub sup blockquote span font a table tbody tr strong em b i"),
function(V){w[V]&&(w[V].removeEmpty=!0)}),b(f("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(V){w[V].paddEmpty=!0}),b(f("span"),function(V){w[V].removeEmptyAttrs=!0}));P(z.custom_elements);Q(z.valid_children);M(z.extended_valid_elements);Q("+ol[ul|ol],+ul[ul|ol]");b({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(V,ba){w[ba]&&(w[ba].parentsRequired=f(V))});
z.invalid_elements&&b(d(z.invalid_elements),function(V){w[V]&&delete w[V]});W("span")||M("span[!data-mce-type|*]");this.children=m;this.getValidStyles=function(){return B};this.getInvalidStyles=function(){return r};this.getValidClasses=function(){return k};this.getBoolAttrs=function(){return D};this.getBlockElements=function(){return I};this.getTextBlockElements=function(){return H};this.getTextInlineElements=function(){return G};this.getShortEndedElements=function(){return l};this.getSelfClosingElements=
function(){return A};this.getNonEmptyElements=function(){return E};this.getMoveCaretBeforeOnEnterElements=function(){return F};this.getWhiteSpaceElements=function(){return x};this.getSpecialElements=function(){return t};this.isValidChild=function(V,ba){V=m[V.toLowerCase()];return!(!V||!V[ba.toLowerCase()])};this.isValid=function(V,ba){var N;if(N=W(V))if(ba){if(N.attributes[ba])return!0;if(ba=N.attributePatterns)for(N=ba.length;N--;)if(ba[N].pattern.test(V))return!0}else return!0;return!1};this.getElementRule=
W;this.getCustomElements=function(){return e};this.addValidElements=M;this.setValidElements=y;this.addCustomElements=P;this.addValidChildren=Q;this.elements=w}});L("tinymce.core.html.Styles",[],function(){return function(v,q){var p=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*"([^"]+)"\s*\))|(?:\(\s*'([^']+)'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:'([^']+)')|(?:"([^"]+)")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,d,a={};v=v||{};if(q){var f=q.getValidStyles();var n=q.getInvalidStyles()}q=
"\\\" \\' \\; \\: ; : \ufeff".split(" ");for(d=0;d<q.length;d++)a[q[d]]="\ufeff"+d,a["\ufeff"+d]=q[d];var u=function(z,w,m,g){z=function(e){e=parseInt(e,10).toString(16);return 1<e.length?e:"0"+e};return"#"+z(w)+z(m)+z(g)};return{toHex:function(z){return z.replace(p,u)},parse:function(z){var w={},m,g,e=v.url_converter,t=v.url_converter_scope||this,y=function(D,E,F){var H,I,G,J;if(H=w[D+"-top"+E])if(I=w[D+"-right"+E])if(G=w[D+"-bottom"+E])if(J=w[D+"-left"+E]){H=[H,I,G,J];for(d=H.length-1;d--&&H[d]===
H[d+1];);-1<d&&F||(w[D+E]=-1==d?H[0]:H.join(" "),delete w[D+"-top"+E],delete w[D+"-right"+E],delete w[D+"-bottom"+E],delete w[D+"-left"+E])}},C=function(D){var E=w[D],F;if(E){E=E.split(" ");for(F=E.length;F--;)if(E[F]!==E[0])return!1;w[D]=E[0];return!0}},B=function(D,E,F,H){C(E)&&C(F)&&C(H)&&(w[D]=w[E]+" "+w[F]+" "+w[H],delete w[E],delete w[F],delete w[H])},r=function(D){g=!0;return a[D]},k=function(D,E){g&&(D=D.replace(/\uFEFF[0-9]/g,function(F){return a[F]}));E||(D=D.replace(/\\(['";:])/g,"$1"));
return D},x=function(D){return String.fromCharCode(parseInt(D.slice(1),16))},A=function(D,E,F,H,I,G){if(I=I||G)return I=k(I),"'"+I.replace(/'/g,"\\'")+"'";E=k(E||F||H);if(!v.allow_script_urls&&(D=E.replace(/[\s\r\n]+/g,""),/(java|vb)script:/i.test(D)||!v.allow_svg_data_urls&&/^data:image\/svg/i.test(D)))return"";e&&(E=e.call(t,E,"style"));return"url('"+E.replace(/'/g,"\\'")+"')"};if(z){z=z.replace(/[\u0000-\u001F]/g,"");for(z=z.replace(/\\["';:\uFEFF]/g,r).replace(/"[^"]+"|'[^']+'/g,function(D){return D.replace(/[;:]/g,
r)});m=b.exec(z);){b.lastIndex=m.index+m[0].length;var l=m[1].replace(c,"").toLowerCase();m=m[2].replace(c,"");if(l&&m&&(l=l.replace(/\\[0-9a-f]+/gi,x),m=m.replace(/\\[0-9a-f]+/gi,x),-1===l.indexOf("\ufeff")&&-1===l.indexOf('"')&&(v.allow_script_urls||"behavior"!=l&&!/expression\s*\(|\/\*|\*\//.test(m)))){if("font-weight"===l&&"700"===m)m="bold";else if("color"===l||"background-color"===l)m=m.toLowerCase();m=m.replace(p,u);m=m.replace(h,A);w[l]=g?k(m,!0):m}}y("border","",!0);y("border","-width");
y("border","-color");y("border","-style");y("padding","");y("margin","");B("border","border-width","border-style","border-color");"medium none"===w.border&&delete w.border;"none"===w["border-image"]&&delete w["border-image"]}return w},serialize:function(z,w){var m="",g;var e=function(y){var C,B,r;if(C=f[y]){var k=0;for(B=C.length;k<B;k++)y=C[k],(r=z[y])&&(m+=(0<m.length?" ":"")+y+": "+r+";")}};var t=function(y,C){var B;return(B=n["*"])&&B[y]?!1:(B=n[C])&&B[y]?!1:!0};if(w&&f)e("*"),e(w);else for(g in z)e=
z[g],!e||n&&!t(g,w)||(m+=(0<m.length?" ":"")+g+": "+e+";");return m}}}});L("tinymce.core.dom.DOMUtils","global!document global!window tinymce.core.Env tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.Position tinymce.core.dom.Sizzle tinymce.core.dom.StyleSheetLoader tinymce.core.dom.TreeWalker tinymce.core.dom.TrimNode tinymce.core.html.Entities tinymce.core.html.Schema tinymce.core.html.Styles tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d,a,f,n,u,z,w,m){var g=m.each,
e=m.is,t=m.grep,y=p.ie,C=/^([a-z0-9],?)+$/i,B=/^[ \t\r\n]*$/,r=function(l,D){var E={},F=D.keep_values;var H={set:function(I,G,J){D.url_converter&&(G=D.url_converter.call(D.url_converter_scope||l,G,J,I[0]));I.attr("data-mce-"+J,G).attr(J,G)},get:function(I,G){return I.attr("data-mce-"+G)||I.attr(G)}};E={style:{set:function(I,G){null!==G&&"object"===typeof G?I.css(G):(F&&I.attr("data-mce-style",G),I.attr("style",G))},get:function(I){var G=I.attr("data-mce-style")||I.attr("style");return G=l.serializeStyle(l.parseStyle(G),
I[0].nodeName)}}};F&&(E.href=E.src=H);return E},k=function(l,D){var E=D.attr("style");(E=l.serializeStyle(l.parseStyle(E),D[0].nodeName))||(E=null);D.attr("data-mce-style",E)},x=function(l,D){var E=0;if(l){var F=l.nodeType;for(l=l.previousSibling;l;l=l.previousSibling){var H=l.nodeType;if(!D||3!=H||H!=F&&l.nodeValue.length)E++,F=H}}return E},A=function(l,D){var E=this;E.doc=l;E.win=q;E.files={};E.counter=0;E.stdMode=!y||8<=l.documentMode;E.boxModel=!y||"CSS1Compat"==l.compatMode||E.stdMode;E.styleSheetLoader=
new a(l);E.boundEvents=[];E.settings=D=D||{};E.schema=D.schema?D.schema:new z({});E.styles=new w({url_converter:D.url_converter,url_converter_scope:D.url_converter_scope},D.schema);E.fixDoc(l);E.events=D.ownEvents?new b(D.proxy):b.Event;E.attrHooks=r(E,D);var F=E.schema.getBlockElements();E.$=h.overrideDefaults(function(){return{context:l,element:E.getRoot()}});E.isBlock=function(H){if(!H)return!1;var I=H.nodeType;return I?!(1!==I||!F[H.nodeName]):!!F[H]}};A.prototype={$$:function(l){"string"==typeof l&&
(l=this.get(l));return this.$(l)},root:null,fixDoc:function(l){var D=this.settings,E;if(y&&D.schema)for(E in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(F){l.createElement(F)}),D.schema.getCustomElements())l.createElement(E)},clone:function(l,D){var E=this;if(!y||1!==l.nodeType||D)return l.cloneNode(D);var F=E.doc;if(!D){var H=F.createElement(l.nodeName);g(E.getAttribs(l),function(I){E.setAttrib(H,
I.nodeName,E.getAttrib(l,I.nodeName))});return H}return H.firstChild},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(l){l=l?l:this.win;var D=l.document;D=this.boxModel?D.documentElement:D.body;return{x:l.pageXOffset||D.scrollLeft,y:l.pageYOffset||D.scrollTop,w:l.innerWidth||D.clientWidth,h:l.innerHeight||D.clientHeight}},getRect:function(l){l=this.get(l);var D=this.getPos(l);l=this.getSize(l);return{x:D.x,y:D.y,w:l.w,h:l.h}},getSize:function(l){l=this.get(l);
var D=this.getStyle(l,"width");var E=this.getStyle(l,"height");-1===D.indexOf("px")&&(D=0);-1===E.indexOf("px")&&(E=0);return{w:parseInt(D,10)||l.offsetWidth||l.clientWidth,h:parseInt(E,10)||l.offsetHeight||l.clientHeight}},getParent:function(l,D,E){return this.getParents(l,D,E,!1)},getParents:function(l,D,E,F){var H=this,I=[];l=H.get(l);F=void 0===F;E=E||("BODY"!=H.getRoot().nodeName?H.getRoot().parentNode:null);if(e(D,"string")){var G=D;D="*"===D?function(J){return 1==J.nodeType}:function(J){return H.is(J,
G)}}for(;l&&l!=E&&l.nodeType&&9!==l.nodeType;){if(!D||D(l))if(F)I.push(l);else return l;l=l.parentNode}return F?I:null},get:function(l){if(l&&this.doc&&"string"==typeof l){var D=l;if((l=this.doc.getElementById(l))&&l.id!==D)return this.doc.getElementsByName(D)[1]}return l},getNext:function(l,D){return this._findSib(l,D,"nextSibling")},getPrev:function(l,D){return this._findSib(l,D,"previousSibling")},select:function(l,D){return d(l,this.get(D)||this.settings.root_element||this.doc,[])},is:function(l,
D){var E;if(!l)return!1;if(void 0===l.length){if("*"===D)return 1==l.nodeType;if(C.test(D)){D=D.toLowerCase().split(/,/);l=l.nodeName.toLowerCase();for(E=D.length-1;0<=E;E--)if(D[E]==l)return!0;return!1}}if(l.nodeType&&1!=l.nodeType)return!1;l=l.nodeType?[l]:l;return 0<d(D,l[0].ownerDocument||l[0],null,l).length},add:function(l,D,E,F,H){var I=this;return this.run(l,function(G){var J=e(D,"string")?I.doc.createElement(D):D;I.setAttribs(J,E);F&&(F.nodeType?J.appendChild(F):I.setHTML(J,F));return H?J:
G.appendChild(J)})},create:function(l,D,E){return this.add(this.doc.createElement(l),l,D,E,1)},createHTML:function(l,D,E){var F;var H="<"+l;for(F in D)D.hasOwnProperty(F)&&null!==D[F]&&"undefined"!=typeof D[F]&&(H+=" "+F+'="'+this.encode(D[F])+'"');return"undefined"!=typeof E?H+">"+E+"</"+l+">":H+" />"},createFragment:function(l){var D=this.doc;var E=D.createElement("div");D=D.createDocumentFragment();l&&(E.innerHTML=l);for(;l=E.firstChild;)D.appendChild(l);return D},remove:function(l,D){l=this.$$(l);
D?l.each(function(){for(var E;E=this.firstChild;)3==E.nodeType&&0===E.data.length?this.removeChild(E):this.parentNode.insertBefore(E,this)}).remove():l.remove();return 1<l.length?l.toArray():l[0]},setStyle:function(l,D,E){l=this.$$(l).css(D,E);this.settings.update_styles&&k(this,l)},getStyle:function(l,D,E){l=this.$$(l);if(E)return l.css(D);D=D.replace(/-(\D)/g,function(F,H){return H.toUpperCase()});"float"==D&&(D=p.ie&&12>p.ie?"styleFloat":"cssFloat");return l[0]&&l[0].style?l[0].style[D]:void 0},
setStyles:function(l,D){l=this.$$(l).css(D);this.settings.update_styles&&k(this,l)},removeAllAttribs:function(l){return this.run(l,function(D){var E,F=D.attributes;for(E=F.length-1;0<=E;E--)D.removeAttributeNode(F.item(E))})},setAttrib:function(l,D,E){var F,H=this.settings;""===E&&(E=null);l=this.$$(l);var I=l.attr(D);if(l.length&&((F=this.attrHooks[D])&&F.set?F.set(l,E,D):l.attr(D,E),I!=E&&H.onSetAttrib))H.onSetAttrib({attrElm:l,attrName:D,attrValue:E})},setAttribs:function(l,D){var E=this;E.$$(l).each(function(F,
H){g(D,function(I,G){E.setAttrib(H,G,I)})})},getAttrib:function(l,D,E){l=this.$$(l);if(l.length)var F=(F=this.attrHooks[D])&&F.get?F.get(l,D):l.attr(D);"undefined"==typeof F&&(F=E||"");return F},getPos:function(l,D){return c.getPos(this.doc.body,this.get(l),D)},parseStyle:function(l){return this.styles.parse(l)},serializeStyle:function(l,D){return this.styles.serialize(l,D)},addStyle:function(l){var D=this.doc;if(this!==A.DOM&&D===v){var E=(E=A.DOM.addedStyles)||[];if(E[l])return;E[l]=!0;A.DOM.addedStyles=
E}var F=D.getElementById("mceDefaultStyles");F||(F=D.createElement("style"),F.id="mceDefaultStyles",F.type="text/css",E=D.getElementsByTagName("head")[0],E.firstChild?E.insertBefore(F,E.firstChild):E.appendChild(F));F.styleSheet?F.styleSheet.cssText+=l:F.appendChild(D.createTextNode(l))},loadCSS:function(l){var D=this,E=D.doc;if(D!==A.DOM&&E===v)A.DOM.loadCSS(l);else{l||(l="");var F=E.getElementsByTagName("head")[0];g(l.split(","),function(H){H=m._addCacheSuffix(H);if(!D.files[H]){D.files[H]=!0;var I=
D.create("link",{rel:"stylesheet",href:H});y&&E.documentMode&&E.recalc&&(I.onload=function(){E.recalc&&E.recalc();I.onload=null});F.appendChild(I)}})}},addClass:function(l,D){this.$$(l).addClass(D)},removeClass:function(l,D){this.toggleClass(l,D,!1)},hasClass:function(l,D){return this.$$(l).hasClass(D)},toggleClass:function(l,D,E){this.$$(l).toggleClass(D,E).each(function(){""===this.className&&h(this).attr("class",null)})},show:function(l){this.$$(l).show()},hide:function(l){this.$$(l).hide()},isHidden:function(l){return"none"==
this.$$(l).css("display")},uniqueId:function(l){return(l?l:"mce_")+this.counter++},setHTML:function(l,D){l=this.$$(l);y?l.each(function(E,F){if(!1!==F.canHaveHTML){for(;F.firstChild;)F.removeChild(F.firstChild);try{F.innerHTML="<br>"+D,F.removeChild(F.firstChild)}catch(H){h("<div></div>").html("<br>"+D).contents().slice(1).appendTo(F)}return D}}):l.html(D)},getOuterHTML:function(l){l=this.get(l);return 1==l.nodeType&&"outerHTML"in l?l.outerHTML:h("<div></div>").append(h(l).clone()).html()},setOuterHTML:function(l,
D){var E=this;E.$$(l).each(function(){try{if("outerHTML"in this){this.outerHTML=D;return}}catch(F){}E.remove(h(this).html(D),!0)})},decode:u.decode,encode:u.encodeAllRaw,insertAfter:function(l,D){D=this.get(D);return this.run(l,function(E){var F;var H=D.parentNode;(F=D.nextSibling)?H.insertBefore(E,F):H.appendChild(E);return E})},replace:function(l,D,E){return this.run(D,function(F){e(F,"array")&&(l=l.cloneNode(!0));E&&g(t(F.childNodes),function(H){l.appendChild(H)});return F.parentNode.replaceChild(l,
F)})},rename:function(l,D){var E=this;if(l.nodeName!=D.toUpperCase()){var F=E.create(D);g(E.getAttribs(l),function(H){E.setAttrib(F,H.nodeName,E.getAttrib(l,H.nodeName))});E.replace(F,l,1)}return F||l},findCommonAncestor:function(l,D){for(var E=l,F;E;){for(F=D;F&&E!=F;)F=F.parentNode;if(E==F)break;E=E.parentNode}return!E&&l.ownerDocument?l.ownerDocument.documentElement:E},toHex:function(l){return this.styles.toHex(m.trim(l))},run:function(l,D,E){var F=this;"string"===typeof l&&(l=F.get(l));if(!l)return!1;
E=E||this;if(!l.nodeType&&(l.length||0===l.length)){var H=[];g(l,function(I,G){I&&("string"==typeof I&&(I=F.get(I)),H.push(D.call(E,I,G)))});return H}return D.call(E,l)},getAttribs:function(l){l=this.get(l);if(!l)return[];if(y){var D=[];if("OBJECT"==l.nodeName)return l.attributes;"OPTION"===l.nodeName&&this.getAttrib(l,"selected")&&D.push({specified:1,nodeName:"selected"});l.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=["][^"]+"|='[^']+'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(E){D.push({specified:1,
nodeName:E})});return D}return l.attributes},isEmpty:function(l,D){var E,F=0;if(l=l.firstChild){var H=new f(l,l.parentNode);D=D||(this.schema?this.schema.getNonEmptyElements():null);var I=this.schema?this.schema.getWhiteSpaceElements():{};do{var G=l.nodeType;if(1===G){if(E=l.getAttribute("data-mce-bogus")){l=H.next("all"===E);continue}var J=l.nodeName.toLowerCase();if(D&&D[J]){if("br"===J){F++;l=H.next();continue}return!1}var M=this.getAttribs(l);for(E=M.length;E--;)if(J=M[E].nodeName,"name"===J||
"data-mce-bookmark"===J)return!1}if(8==G||3===G&&!B.test(l.nodeValue)||3===G&&l.parentNode&&I[l.parentNode.nodeName]&&B.test(l.nodeValue))return!1;l=H.next()}while(l)}return 1>=F},createRng:function(){return this.doc.createRange()},nodeIndex:x,split:function(l,D,E){var F=this.createRng();if(l&&D){F.setStart(l.parentNode,this.nodeIndex(l));F.setEnd(D.parentNode,this.nodeIndex(D));var H=F.extractContents();F=this.createRng();F.setStart(D.parentNode,this.nodeIndex(D)+1);F.setEnd(l.parentNode,this.nodeIndex(l)+
1);F=F.extractContents();var I=l.parentNode;I.insertBefore(n.trimNode(this,H),l);E?I.insertBefore(E,l):I.insertBefore(D,l);I.insertBefore(n.trimNode(this,F),l);this.remove(l);return E||D}},bind:function(l,D,E,F){if(m.isArray(l)){for(var H=l.length;H--;)l[H]=this.bind(l[H],D,E,F);return l}!this.settings.collect||l!==this.doc&&l!==this.win||this.boundEvents.push([l,D,E,F]);return this.events.bind(l,D,E,F||this)},unbind:function(l,D,E){var F;if(m.isArray(l)){for(F=l.length;F--;)l[F]=this.unbind(l[F],
D,E);return l}if(this.boundEvents&&(l===this.doc||l===this.win))for(F=this.boundEvents.length;F--;){var H=this.boundEvents[F];l!=H[0]||D&&D!=H[1]||E&&E!=H[2]||this.events.unbind(H[0],H[1],H[2])}return this.events.unbind(l,D,E)},fire:function(l,D,E){return this.events.fire(l,D,E)},getContentEditable:function(l){var D;return l&&1==l.nodeType?(D=l.getAttribute("data-mce-contenteditable"))&&"inherit"!==D?D:"inherit"!==l.contentEditable?l.contentEditable:null:null},getContentEditableParent:function(l){for(var D=
this.getRoot(),E=null;l&&l!==D&&(E=this.getContentEditable(l),null===E);l=l.parentNode);return E},destroy:function(){if(this.boundEvents){for(var l=this.boundEvents.length;l--;){var D=this.boundEvents[l];this.events.unbind(D[0],D[1],D[2])}this.boundEvents=null}d.setDocument&&d.setDocument();this.win=this.doc=this.root=this.events=this.frag=null},isChildOf:function(l,D){for(;l;){if(D===l)return!0;l=l.parentNode}return!1},dumpRng:function(l){return"startContainer: "+l.startContainer.nodeName+", startOffset: "+
l.startOffset+", endContainer: "+l.endContainer.nodeName+", endOffset: "+l.endOffset},_findSib:function(l,D,E){var F=this,H=D;if(l)for("string"==typeof H&&(H=function(I){return F.is(I,D)}),l=l[E];l;l=l[E])if(H(l))return l;return null}};A.DOM=new A(v);A.nodeIndex=x;return A});L("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(v,q,p){var h=q.DOM,b=p.each,c=p.grep,d=function(a){return"function"===typeof a};q=function(){var a={},f=[],n=
{},u=[],z=0,w=function(m,g,e){var t=function(){h.remove(y);C&&(C.onreadystatechange=C.onload=C=null);g()};var y=h.uniqueId();var C=v.createElement("script");C.id=y;C.type="text/javascript";C.src=p._addCacheSuffix(m);"onreadystatechange"in C?C.onreadystatechange=function(){/loaded|complete/.test(C.readyState)&&t()}:C.onload=t;C.onerror=function(){d(e)?e():"undefined"!==typeof console&&console.log&&console.log("Failed to load script: "+m)};(v.getElementsByTagName("head")[0]||v.body).appendChild(C)};
this.isDone=function(m){return 2==a[m]};this.markDone=function(m){a[m]=2};this.add=this.load=function(m,g,e,t){void 0==a[m]&&(f.push(m),a[m]=0);g&&(n[m]||(n[m]=[]),n[m].push({success:g,failure:t,scope:e||this}))};this.remove=function(m){delete a[m];delete n[m]};this.loadQueue=function(m,g,e){this.loadScripts(f,m,g,e)};this.loadScripts=function(m,g,e,t){var y=[],C=function(r,k){b(n[k],function(x){d(x[r])&&x[r].call(x.scope)});n[k]=void 0};u.push({success:g,failure:t,scope:e||this});var B=function(){var r=
c(m);m.length=0;b(r,function(k){2===a[k]?C("success",k):3===a[k]?C("failure",k):1!==a[k]&&(a[k]=1,z++,w(k,function(){a[k]=2;z--;C("success",k);B()},function(){a[k]=3;z--;y.push(k);C("failure",k);B()}))});z||(r=u.slice(0),u.length=0,b(r,function(k){0===y.length?d(k.success)&&k.success.call(k.scope):d(k.failure)&&k.failure.call(k.scope,y)}))};B()}};q.ScriptLoader=new q;return q});L("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(v,
q,p){var h=p.each,b=function(){this.items=[];this.urls={};this.lookup={};this._listeners=[]};b.prototype={get:function(c){if(this.lookup[c])return this.lookup[c].instance},dependencies:function(c){if(this.lookup[c])var d=this.lookup[c].dependencies;return d||[]},requireLangPack:function(c,d){var a=b.language;if(a&&!1!==b.languageLoad){if(d)if(d=","+d+",",-1!=d.indexOf(","+a.substr(0,2)+","))a=a.substr(0,2);else if(-1==d.indexOf(","+a+","))return;q.ScriptLoader.add(this.urls[c]+"/langs/"+a+".js")}},
add:function(c,d,a){this.items.push(d);this.lookup[c]={instance:d,dependencies:a};a=v.partition(this._listeners,function(f){return f.name===c});this._listeners=a.fail;h(a.pass,function(f){f.callback()});return d},remove:function(c){delete this.urls[c];delete this.lookup[c]},createUrl:function(c,d){return"object"===typeof d?d:{prefix:c.prefix,resource:d,suffix:c.suffix}},addComponents:function(c,d){var a=this.urls[c];h(d,function(f){q.ScriptLoader.add(a+"/"+f)})},load:function(c,d,a,f,n){var u=this,
z=d,w=function(){var m=u.dependencies(c);h(m,function(g){g=u.createUrl(d,g);u.load(g.resource,g,void 0,void 0)});a&&(f?a.call(f):a.call(q))};u.urls[c]||("object"===typeof d&&(z=d.prefix+d.resource+d.suffix),0!==z.indexOf("/")&&-1==z.indexOf("://")&&(z=b.baseURL+"/"+z),u.urls[c]=z.substring(0,z.lastIndexOf("/")),u.lookup[c]?w():q.ScriptLoader.add(z,w,f,n))},waitFor:function(c,d){this.lookup.hasOwnProperty(c)?d():this._listeners.push({name:c,callback:d})}};b.PluginManager=new b;b.ThemeManager=new b;
return b});L("tinymce.core.text.Zwsp",[],function(){return{isZwsp:function(v){return"\ufeff"===v},ZWSP:"\ufeff",trim:function(v){return v.replace(RegExp("\ufeff","g"),"")}}});L("tinymce.core.caret.CaretContainer",["global!document","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(v,q,p){var h=q.isElement,b=q.isText,c=function(u){b(u)&&(u=u.parentNode);return h(u)&&u.hasAttribute("data-mce-caret")},d=function(u){return b(u)&&p.isZwsp(u.data)},a=function(u){return c(u)||d(u)},f=function(u){return b(u)&&
u.data[0]==p.ZWSP},n=function(u){return b(u)&&u.data[u.data.length-1]==p.ZWSP};return{isCaretContainer:a,isCaretContainerBlock:c,isCaretContainerInline:d,showCaretContainerBlock:function(u){if(u&&u.hasAttribute("data-mce-caret")){var z=u.getElementsByTagName("br");z=z[z.length-1];q.isBogus(z)&&z.parentNode.removeChild(z);u.removeAttribute("data-mce-caret");u.removeAttribute("data-mce-bogus");u.removeAttribute("style");u.removeAttribute("_moz_abspos");return u}return null},insertInline:function(u,
z){var w=u.ownerDocument.createTextNode(p.ZWSP);var m=u.parentNode;if(z){z=u.previousSibling;if(b(z)){if(a(z))return z;if(n(z))return z.splitText(z.data.length-1)}m.insertBefore(w,u)}else{z=u.nextSibling;if(b(z)){if(a(z))return z;if(f(z))return z.splitText(1),z}u.nextSibling?m.insertBefore(w,u.nextSibling):m.appendChild(w)}return w},prependInline:function(u){if(q.isText(u)){var z=u.data;0<z.length&&z.charAt(0)!==p.ZWSP&&u.insertData(0,p.ZWSP);return u}return null},appendInline:function(u){if(q.isText(u)){var z=
u.data;0<z.length&&z.charAt(z.length-1)!==p.ZWSP&&u.insertData(z.length,p.ZWSP);return u}return null},isBeforeInline:function(u){return u&&q.isText(u.container())&&u.container().data.charAt(u.offset())===p.ZWSP},isAfterInline:function(u){return u&&q.isText(u.container())&&u.container().data.charAt(u.offset()-1)===p.ZWSP},insertBlock:function(u,z,w){u=z.ownerDocument.createElement(u);u.setAttribute("data-mce-caret",w?"before":"after");u.setAttribute("data-mce-bogus","all");var m=u.appendChild;var g=
v.createElement("br");g.setAttribute("data-mce-bogus","1");m.call(u,g);m=z.parentNode;w?m.insertBefore(u,z):z.nextSibling?m.insertBefore(u,z.nextSibling):m.appendChild(u);return u},hasContent:function(u){return u.firstChild!==u.lastChild||!q.isBr(u.firstChild)},startsWithCaretContainer:f,endsWithCaretContainer:n}});L("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(v,q,p){var h=v.isContentEditableTrue,b=v.isContentEditableFalse,
c=v.isBr,d=v.isText,a=v.matchNodeNames("script style textarea"),f=v.matchNodeNames("img input textarea hr iframe video audio object"),n=v.matchNodeNames("table"),u=p.isCaretContainer,z=function(g){return u(g)?!1:d(g)?a(g.parentNode)?!1:!0:f(g)||c(g)||n(g)||b(g)},w=function(g,e){for(g=g.parentNode;g&&g!=e;g=g.parentNode){if(b(g))return!1;if(h(g))break}return!0},m=function(g){return b(g)?!0!==q.reduce(g.getElementsByTagName("*"),function(e,t){return e||h(t)},!1):!1};return{isCaretCandidate:z,isInEditable:w,
isAtomic:function(g){return f(g)||m(g)},isEditableCaretCandidate:function(g,e){return z(g)&&w(g,e)}}});L("tinymce.core.geom.ClientRect",[],function(){var v=Math.round,q=function(a){return a?{left:v(a.left),top:v(a.top),bottom:v(a.bottom),right:v(a.right),width:v(a.width),height:v(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},p=function(a,f,n){return 0<=a&&a<=Math.min(f.height,n.height)/2},h=function(a,f){return a.bottom-a.height/2<f.top?!0:a.top>f.bottom?!1:p(f.top-a.bottom,a,f)},b=
function(a,f){return a.top>f.bottom?!0:a.bottom<f.top?!1:p(f.bottom-a.top,a,f)},c=function(a,f){return a.left<f.left},d=function(a,f){return a.right>f.right};return{clone:q,collapse:function(a,f){a=q(a);f||(a.left+=a.width);a.right=a.left;a.width=0;return a},isEqual:function(a,f){return a.left===f.left&&a.top===f.top&&a.bottom===f.bottom&&a.right===f.right},isAbove:h,isBelow:b,isLeft:c,isRight:d,compare:function(a,f){return h(a,f)?-1:b(a,f)?1:c(a,f)?-1:d(a,f)?1:0},containsXY:function(a,f,n){return f>=
a.left&&f<=a.right&&n>=a.top&&n<=a.bottom}}});L("tinymce.core.selection.RangeNodes",[],function(){return{getSelectedNode:function(v){var q=v.startContainer,p=v.startOffset;return q.hasChildNodes()&&v.endOffset==p+1?q.childNodes[p]:null},getNode:function(v,q){1===v.nodeType&&v.hasChildNodes()&&(q>=v.childNodes.length&&(q=v.childNodes.length-1),v=v.childNodes[q]);return v}}});L("tinymce.core.text.ExtendingChar",[],function(){var v=RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");
return{isExtendingChar:function(q){return"string"==typeof q&&768<=q.charCodeAt(0)&&v.test(q)}}});L("tinymce.core.util.Fun",[],function(){var v=[].slice,q=function(p){var h=v.call(arguments);return h.length-1>=p.length?p.apply(this,h.slice(1)):function(){var b=h.concat([].slice.call(arguments));return q.apply(this,b)}};return{constant:function(p){return function(){return p}},negate:function(p){return function(h){return!p(h)}},and:function(){var p=v.call(arguments);return function(h){for(var b=0;b<
p.length;b++)if(!p[b](h))return!1;return!0}},or:function(){var p=v.call(arguments);return function(h){for(var b=0;b<p.length;b++)if(p[b](h))return!0;return!1}},curry:q,compose:function(p,h){return function(b){return p(h(b))}},noop:function(){}}});L("tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretCandidate tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.selection.RangeNodes tinymce.core.text.ExtendingChar tinymce.core.util.Fun".split(" "),function(v,
q,p,h,b,c,d){var a=p.isElement;v=v.isCaretCandidate;var f=p.matchStyleValues("display","block table"),n=p.matchStyleValues("float","left right"),u=d.and(a,v,d.negate(n)),z=d.negate(p.matchStyleValues("white-space","pre pre-line pre-wrap")),w=p.isText,m=p.isBr,g=q.nodeIndex,e=b.getNode,t=function(k){return"createRange"in k?k.createRange():q.DOM.createRng()},y=function(k){return k&&/[\r\n\t ]/.test(k)},C=function(k){var x=k.startContainer,A=k.startOffset;return y(k.toString())&&z(x.parentNode)&&(k=
x.data,y(k[A-1])||y(k[A+1]))?!0:!1},B=function(k){var x=[],A=function(H){var I=H.getClientRects();I=0<I.length?h.clone(I[0]):h.clone(H.getBoundingClientRect());if(m(H)&&0===I.left){var G=H.ownerDocument;I=t(G);G=G.createTextNode("\u00a0");var J=H.parentNode;J.insertBefore(G,H);I.setStart(G,0);I.setEnd(G,1);H=h.clone(I.getBoundingClientRect());J.removeChild(G);return H}return I},l=function(H,I){H=h.collapse(H,I);H.width=1;H.right=H.left+1;return H},D=function(H){0!==H.height&&(0<x.length&&h.isEqual(H,
x[x.length-1])||x.push(H))},E=function(H,I){var G=t(H.ownerDocument);if(I<H.data.length){if(c.isExtendingChar(H.data[I]))return x;if(c.isExtendingChar(H.data[I-1])&&(G.setStart(H,I),G.setEnd(H,I+1),!C(G)))return D(l(A(G),!1)),x}0<I&&(G.setStart(H,I-1),G.setEnd(H,I),C(G)||D(l(A(G),!1)));I<H.data.length&&(G.setStart(H,I),G.setEnd(H,I+1),C(G)||D(l(A(G),!0)))};if(w(k.container()))return E(k.container(),k.offset()),x;if(a(k.container()))if(k.isAtEnd()){var F=e(k.container(),k.offset());w(F)&&E(F,F.data.length);
u(F)&&!m(F)&&D(l(A(F),!1))}else{F=e(k.container(),k.offset());w(F)&&E(F,0);if(u(F)&&k.isAtEnd())return D(l(A(F),!1)),x;k=e(k.container(),k.offset()-1);u(k)&&!m(k)&&(f(k)||f(F)||!u(F))&&D(l(A(k),!1));u(F)&&D(l(A(F),!0))}return x},r=function(k,x,A){var l=function(){A||(A=B(new r(k,x)));return A};return{container:d.constant(k),offset:d.constant(x),toRange:function(){var D=t(k.ownerDocument);D.setStart(k,x);D.setEnd(k,x);return D},getClientRects:l,isVisible:function(){return 0<l().length},isAtStart:function(){w(k);
return 0===x},isAtEnd:function(){return w(k)?x>=k.data.length:x>=k.childNodes.length},isEqual:function(D){return D&&k===D.container()&&x===D.offset()},getNode:function(D){return e(k,D?x-1:x)}}};r.fromRangeStart=function(k){return new r(k.startContainer,k.startOffset)};r.fromRangeEnd=function(k){return new r(k.endContainer,k.endOffset)};r.after=function(k){return new r(k.parentNode,g(k)+1)};r.before=function(k){return new r(k.parentNode,g(k))};r.isAtStart=function(k){return k?k.isAtStart():!1};r.isAtEnd=
function(k){return k?k.isAtEnd():!1};r.isTextPosition=function(k){return k?p.isText(k.container()):!1};return r});L("tinymce.core.caret.CaretUtils","tinymce.core.util.Fun tinymce.core.dom.TreeWalker tinymce.core.dom.NodeType tinymce.core.caret.CaretPosition tinymce.core.caret.CaretContainer tinymce.core.caret.CaretCandidate".split(" "),function(v,q,p,h,b,c){var d=p.isContentEditableTrue,a=p.isContentEditableFalse,f=p.matchStyleValues("display","block table table-cell table-caption list-item"),n=b.isCaretContainer,
u=b.isCaretContainerBlock,z=v.curry,w=p.isElement,m=c.isCaretCandidate,g=function(r,k){for(var x;x=r(k);)if(!u(x))return x;return null},e=function(r,k){for(r=r.parentNode;r&&r!=k;r=r.parentNode)if(d(r))return r;return k},t=function(r,k){for(;r&&r!=k;){if(f(r))return r;r=r.parentNode}return null};v=function(r,k){var x=k.ownerDocument.createRange();r?(x.setStartBefore(k),x.setEndBefore(k)):(x.setStartAfter(k),x.setEndAfter(k));return x};var y=function(r,k,x){var A;for(A=r?"previousSibling":"nextSibling";x&&
x!=k;){r=x[A];n(r)&&(r=r[A]);if(a(r)){if(t(r,k)==t(x,k))return r;break}if(m(r))break;x=x.parentNode}return null},C=z(v,!0),B=z(v,!1);v=function(r,k){if(k){var x=k.container();k=k.offset();r=w(x)?x.childNodes[k+r]:null}else r=null;return a(r)};return{isForwards:function(r){return 0<r},isBackwards:function(r){return 0>r},findNode:function(r,k,x,A,l){A=new q(r,A);if(0>k){if(a(r)||u(r))if(r=g(A.prev,!0),x(r))return r;for(;r=g(A.prev,l);)if(x(r))return r}if(0<k){if(a(r)||u(r))if(r=g(A.next,!0),x(r))return r;
for(;r=g(A.next,l);)if(x(r))return r}return null},getEditingHost:e,getParentBlock:t,isInSameBlock:function(r,k,x){return t(r.container(),x)==t(k.container(),x)},isInSameEditingHost:function(r,k,x){return e(r.container(),x)==e(k.container(),x)},isBeforeContentEditableFalse:z(v,0),isAfterContentEditableFalse:z(v,-1),normalizeRange:function(r,k,x){var A=z(y,!0,k),l=z(y,!1,k);var D=x.startContainer;var E=x.startOffset;if(b.isCaretContainerBlock(D)){w(D)||(D=D.parentNode);var F=D.getAttribute("data-mce-caret");
if("before"==F&&(k=D.nextSibling,a(k)))return C(k);if("after"==F&&(k=D.previousSibling,a(k)))return B(k)}if(!x.collapsed)return x;if(p.isText(D)){if(n(D)){if(1===r){if(k=l(D))return C(k);if(k=A(D))return B(k)}if(-1===r){if(k=A(D))return B(k);if(k=l(D))return C(k)}return x}if(b.endsWithCaretContainer(D)&&E>=D.data.length-1)return 1===r&&(k=l(D))?C(k):x;if(b.startsWithCaretContainer(D)&&1>=E)return-1===r&&(k=A(D))?B(k):x;if(E===D.data.length)return(k=l(D))?C(k):x;if(0===E&&(k=A(D)))return B(k)}return x}}});
L("tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(v,q,p,h,b,c){var d=v.isContentEditableFalse,a=v.isText,f=v.isElement,n=v.isBr,u=h.isForwards,z=h.isBackwards,w=q.isCaretCandidate,m=q.isAtomic,g=q.isEditableCaretCandidate,e=function(C,B){return C.hasChildNodes()&&B<C.childNodes.length?C.childNodes[B]:null},t=function(C,B){if(u(C)){if(w(B.previousSibling)&&
!a(B.previousSibling))return p.before(B);if(a(B))return p(B,0)}if(z(C)){if(w(B.nextSibling)&&!a(B.nextSibling))return p.after(B);if(a(B))return p(B,B.data.length)}return z(C)?n(B)?p.before(B):p.after(B):p.before(B)},y=function(C,B,r){if(!f(r)||!B)return null;if(B.isEqual(p.after(r))&&r.lastChild){var k=p.after(r.lastChild);if(z(C)&&w(r.lastChild)&&f(r.lastChild))return n(r.lastChild)?p.before(r.lastChild):k}else k=B;var x=k.container();var A=k.offset();if(a(x)){if(z(C)&&0<A)return p(x,--A);if(u(C)&&
A<x.length)return p(x,++A);B=x}else{if(z(C)&&0<A&&(B=e(x,A-1),w(B)))return!m(B)&&(C=h.findNode(B,C,g,B))?a(C)?p(C,C.data.length):p.after(C):a(B)?p(B,B.data.length):p.before(B);if(u(C)&&A<x.childNodes.length&&(B=e(x,A),w(B)))return x=B,x=v.isBr(x)?(k=y(1,p.after(x),r))?!h.isInSameBlock(p.before(x),p.before(k),r):!1:!1,x?y(C,p.after(B),r):!m(B)&&(C=h.findNode(B,C,g,B))?a(C)?p(C,0):p.before(C):a(B)?p(B,0):p.after(B);B=k.getNode()}if(u(C)&&k.isAtEnd()||z(C)&&k.isAtStart())if(B=h.findNode(B,C,c.constant(!0),
r,!0),g(B))return t(C,B);B=h.findNode(B,C,g,r);k=b.last;A=b.filter;for(var l=[];x&&x!=r;)l.push(x),x=x.parentNode;return!(r=k.call(b,A.call(b,l,d)))||B&&r.contains(B)?B?t(C,B):null:k=u(C)?p.after(r):p.before(r)};return function(C){return{next:function(B){return y(1,B,C)},prev:function(B){return y(-1,B,C)}}}});L("tinymce.core.InsertList",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(v,q,p,h){var b=function(g,e,t){e=
e.serialize(t);g=g.createFragment(e);e=g.firstChild;t=g.lastChild;e&&"META"===e.nodeName&&e.parentNode.removeChild(e);t&&"mce_marker"===t.id&&t.parentNode.removeChild(t);return g},c=function(g){return h.grep(g.childNodes,function(e){return"LI"===e.nodeName})},d=function(g){var e;if(e=0<g.length){e=g[g.length-1];var t;!(t=!e.firstChild)&&(t=e&&e.firstChild&&e.firstChild===e.lastChild)&&(e=e.firstChild,t="\u00a0"===e.data||p.isBr(e));e=t}return e?g.slice(0,-1):g},a=function(g,e){return(g=g.getParent(e,
g.isBlock))&&"LI"===g.nodeName?g:null},f=function(g,e){var t=e.cloneRange();e=e.cloneRange();t.setStartBefore(g);e.setEndAfter(g);return[t.cloneContents(),e.cloneContents()]},n=function(g,e){g=v.before(g);return(e=(new q(e)).next(g))?e.toRange():null},u=function(g,e){g=v.after(g);return(e=(new q(e)).prev(g))?e.toRange():null},z=function(g,e,t,y){y=f(g,y);var C=g.parentNode;C.insertBefore(y[0],g);h.each(e,function(B){C.insertBefore(B,g)});C.insertBefore(y[1],g);C.removeChild(g);return u(e[e.length-
1],t)},w=function(g,e,t){var y=g.parentNode;h.each(e,function(C){y.insertBefore(C,g)});return n(g,t)},m=function(g,e,t,y){y.insertAfter(e.reverse(),g);return u(e[0],t)};return{isListFragment:function(g,e){var t=e.firstChild;e=e.lastChild;t&&"meta"===t.name&&(t=t.next);e&&"mce_marker"===e.attr("id")&&(e=e.prev);var y=e,C=g.getNonEmptyElements(),B;if(B=y){if(!(C=y.isEmpty(C))){if(g=g.getBlockElements()[y.name]&&y.firstChild&&y.firstChild===y.lastChild)g=y.firstChild,g="br"===g.name||"\u00a0"===g.value;
C=g}B=C}B&&(e=e.prev);return t&&t===e?"ul"===t.name||"ol"===t.name:!1},insertAtCaret:function(g,e,t,y){g=b(e,g,y);var C=a(e,t.startContainer);g=d(c(g.firstChild));y=e.getRoot();var B=function(r){var k=v.fromRangeStart(t),x=new q(e.getRoot());return(r=1===r?x.prev(k):x.next(k))?a(e,r.getNode())!==C:!0};return B(1)?w(C,g,y):B(2)?m(C,g,y,e):z(C,g,y,t)},isParentBlockLi:function(g,e){return!!a(g,e)},trimListItems:d,listItems:c}});L("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils",
"tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(v,q,p,h,b){var c=v.isText,d=v.isBogus,a=q.nodeIndex,f=function(y){y=y.parentNode;return d(y)?f(y):y},n=function(y){return y?h.reduce(y.childNodes,function(C,B){d(B)&&"BR"!=B.nodeName?C=C.concat(n(B)):C.push(B);return C},[]):[]},u=function(y,C){for(;(y=y.previousSibling)&&c(y);)C+=y.data.length;return C},z=function(y){return function(C){return y===C}},w=function(y){var C=n(f(y));var B=h.findIndex(C,z(y),y);
C=C.slice(0,B+1);var r=h.reduce(C,function(k,x,A){c(x)&&c(C[A-1])&&k++;return k},0);C=h.filter(C,v.matchNodeNames(y.nodeName));B=h.findIndex(C,z(y),y);return B-r},m=function(y){return(c(y)?"text()":y.nodeName.toLowerCase())+"["+w(y)+"]"},g=function(y,C,B){var r=[];for(C=C.parentNode;!(C==y||B&&B(C));C=C.parentNode)r.push(C);return r},e=function(y,C,B){var r=n(y);r=h.filter(r,function(k,x){return!c(k)||!c(r[x-1])});r=h.filter(r,v.matchNodeNames(C));return r[B]},t=function(y,C){for(var B=y,r=0,k;c(B);){k=
B.data.length;if(C>=r&&C<=r+k){y=B;C-=r;break}if(!c(B.nextSibling)){y=B;C=k;break}r+=k;B=B.nextSibling}C>y.data.length&&(C=y.data.length);return new b(y,C)};return{create:function(y,C){var B=[];var r=C.container();var k=C.offset();c(r)?C=u(r,k):(r=r.childNodes,k>=r.length?(C="after",k=r.length-1):C="before",r=r[k]);B.push(m(r));y=g(y,r);y=h.filter(y,p.negate(v.isBogus));B=B.concat(h.map(y,function(x){return m(x)}));return B.reverse().join("/")+","+C},resolve:function(y,C){if(!C)return null;var B=
C.split(",");C=B[0].split("/");B=1<B.length?B[1]:"before";y=h.reduce(C,function(r,k){k=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(k);if(!k)return null;"text()"===k[1]&&(k[1]="#text");return e(r,k[1],parseInt(k[2],10))},y);return y?c(y)?t(y,parseInt(B,10)):(B="after"===B?a(y)+1:a(y),new b(y.parentNode,B)):null}}});L("tinymce.core.dom.GetBookmark","ephox.katamari.api.Fun tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.selection.RangeNodes tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a){var f=b.isContentEditableFalse,n=function(t,y,C,B,r){var k=B[r?"startContainer":"endContainer"],x=B[r?"startOffset":"endOffset"];B=[];var A=0;r=t.getRoot();if(b.isText(k)){A=B.push;if(C){var l=k;x=y(l.data.slice(0,x)).length;for(l=l.previousSibling;l&&b.isText(l);l=l.previousSibling)x+=y(l.data).length;y=x}else y=x;A.call(B,y)}else y=k.childNodes,x>=y.length&&y.length&&(A=1,x=Math.max(0,y.length-1)),B.push(t.nodeIndex(y[x],C)+A);for(;k&&k!==r;k=k.parentNode)B.push(t.nodeIndex(k,
C));return B},u=function(t){b.isText(t)&&0===t.data.length&&t.parentNode.removeChild(t)},z=function(t,y,C){var B=0;a.each(t.select(y),function(r){if("all"!==r.getAttribute("data-mce-bogus")){if(r===C)return!1;B++}});return B},w=function(t,y){var C=y?"start":"end";var B=t[C+"Container"];C=t[C+"Offset"];b.isElement(B)&&"TR"===B.nodeName&&(B=B.childNodes,B=B[Math.min(y?C:C-1,B.length-1)])&&(C=y?0:B.childNodes.length,t["set"+(y?"Start":"End")](B,C))},m=function(t){w(t,!0);w(t,!1);return t},g=function(t,
y){if(b.isElement(t)&&(t=c.getNode(t,y),f(t)))return t;if(p.isCaretContainer(t)){b.isText(t)&&p.isCaretContainerBlock(t)&&(t=t.parentNode);y=t.previousSibling;if(f(y))return y;y=t.nextSibling;if(f(y))return y}},e=function(t,y,C){var B=C.getNode(),r=B?B.nodeName:null,k=C.getRng();if(f(B)||"IMG"===r)return{name:r,index:z(C.dom,r,B)};if(B=g(k.startContainer,k.startOffset)||g(k.endContainer,k.endOffset))return r=B.tagName,{name:r,index:z(C.dom,r,B)};B=C.dom;r={};r.start=n(B,t,y,k,!0);C.isCollapsed()||
(r.end=n(B,t,y,k,!1));return r};return{getBookmark:function(t,y,C){if(2===y)return e(d.trim,C,t);if(3===y)return y=t.getRng(),{start:q.create(t.dom.getRoot(),h.fromRangeStart(y)),end:q.create(t.dom.getRoot(),h.fromRangeEnd(y))};if(y)return{rng:t.getRng()};var B=t.dom;y=t.getRng();C=B.uniqueId();var r=t.isCollapsed(),k=t.getNode(),x=k.nodeName;"IMG"===x?t={name:x,index:z(B,x,k)}:(k=m(y.cloneRange()),r||(k.collapse(!1),r=B.create("span",{"data-mce-type":"bookmark",id:C+"_end",style:"overflow:hidden;line-height:0px"},
"&#xFEFF;"),k.insertNode(r),u(r.nextSibling)),y=m(y),y.collapse(!0),B=B.create("span",{"data-mce-type":"bookmark",id:C+"_start",style:"overflow:hidden;line-height:0px"},"&#xFEFF;"),y.insertNode(B),u(B.previousSibling),t.moveToBookmark({id:C,keep:1}),t={id:C});return t},getUndoBookmark:v.curry(e,v.identity,!0)}});L("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(v){return{cat:function(q){for(var p=[],h=function(c){p.push(c)},b=0;b<q.length;b++)q[b].each(h);return p},findMap:function(q,
p){for(var h=0;h<q.length;h++){var b=p(q[h],h);if(b.isSome())return b}return v.none()},liftN:function(q,p){for(var h=[],b=0;b<q.length;b++){var c=q[b];if(c.isSome())h.push(c.getOrDie());else return v.none()}return v.some(p.apply(null,h))}}});L("tinymce.core.dom.ResolveBookmark","ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.Env tinymce.core.caret.CaretBookmark tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d){var a=
function(m,g){!m.isBlock(g)||g.innerHTML||p.ie||(g.innerHTML='<br data-mce-bogus="1" />');return g},f=function(m,g,e,t){e=e[g?"start":"end"];var y=m.getRoot();if(e){m=e[0];var C=y;for(y=e.length-1;1<=y;y--){C=C.childNodes;if(e[y]>C.length-1)return;C=C[e[y]]}3===C.nodeType&&(m=Math.min(e[0],C.nodeValue.length));1===C.nodeType&&(m=Math.min(e[0],C.childNodes.length));g?t.setStart(C,m):t.setEnd(C,m)}return!0},n=function(m,g,e){var t=m.get(e.id+"_"+g);var y=e.keep;if(t){var C=t.parentNode;if(y){C=t.firstChild;
var B=1}else B=m.nodeIndex(t);if(!y){var r=t.previousSibling;y=t.nextSibling;for(d.each(d.grep(t.childNodes),function(k){c.isText(k)&&(k.nodeValue=k.nodeValue.replace(/\uFEFF/g,""))});t=m.get(e.id+"_"+g);)m.remove(t,1);r&&y&&r.nodeType===y.nodeType&&c.isText(r)&&!p.opera&&(B=r.nodeValue.length,r.appendData(y.nodeValue),m.remove(y),C=r)}return v.some(b(C,B))}return v.none()},u=function(m,g){return m.isSome()?m:g},z=function(m,g){var e=n(m,"start",g);g=n(m,"end",g);return q.liftN([e,u(g,e)],function(t,
y){var C=m.createRng();C.setStart(a(m,t.container()),t.offset());C.setEnd(a(m,y.container()),y.offset());return C})},w=function(m,g){return v.from(m.select(g.name)[g.index]).map(function(e){var t=m.createRng();t.selectNode(e);return t})};return{resolve:function(m,g){m=m.dom;if(g){if(d.isArray(g.start)){var e=m.createRng();g=f(m,!0,g,e)&&f(m,!1,g,e)?v.some(e):v.none();return g}if("string"===typeof g.start){e=v.some;var t=m.createRng();var y=h.resolve(m.getRoot(),g.start);t.setStart(y.container(),y.offset());
y=h.resolve(m.getRoot(),g.end);t.setEnd(y.container(),y.offset());return e.call(v,t)}if(g.id)return z(m,g);if(g.name)return w(m,g);if(g.rng)return v.some(g.rng)}return v.none()}}});L("tinymce.core.dom.Bookmarks",["tinymce.core.dom.GetBookmark","tinymce.core.dom.ResolveBookmark"],function(v,q){return{getBookmark:function(p,h,b){return v.getBookmark(p,h,b)},moveToBookmark:function(p,h){q.resolve(p,h).each(function(b){p.setRng(b)})},isBookmarkNode:function(p){return p&&"SPAN"===p.tagName&&"bookmark"===
p.getAttribute("data-mce-type")}}});L("tinymce.core.dom.ElementUtils",["tinymce.core.dom.Bookmarks","tinymce.core.util.Tools"],function(v,q){var p=q.each;return function(h){this.compare=function(b,c){if(b.nodeName!=c.nodeName)return!1;var d=function(f){var n={};p(h.getAttribs(f),function(u){u=u.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&0!==u.indexOf("data-")&&(n[u]=h.getAttrib(f,u))});return n},a=function(f,n){var u;for(u in f)if(f.hasOwnProperty(u)){var z=n[u];if("undefined"==typeof z||
f[u]!=z)return!1;delete n[u]}for(u in n)if(n.hasOwnProperty(u))return!1;return!0};return a(d(b),d(c))&&a(h.parseStyle(h.getAttrib(b,"style")),h.parseStyle(h.getAttrib(c,"style")))?!v.isBookmarkNode(b)&&!v.isBookmarkNode(c):!1}}});L("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(v){var q=function(h,b){v.parent(h).each(function(c){c.dom().insertBefore(b.dom(),h.dom())})},p=function(h,b){h.dom().appendChild(b.dom())};return{before:q,after:function(h,b){v.nextSibling(h).fold(function(){v.parent(h).each(function(c){p(c,
b)})},function(c){q(c,b)})},prepend:function(h,b){v.firstChild(h).fold(function(){p(h,b)},function(c){h.dom().insertBefore(b.dom(),c.dom())})},append:p,appendAt:function(h,b,c){v.child(h,c).fold(function(){p(h,b)},function(d){q(d,b)})},wrap:function(h,b){q(h,b);p(b,h)}}});L("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(v,q){return{before:function(p,h){v.each(h,function(b){q.before(p,b)})},after:function(p,h){v.each(h,function(b,c){q.after(0===c?p:
h[c-1],b)})},prepend:function(p,h){v.each(h.slice().reverse(),function(b){q.prepend(p,b)})},append:function(p,h){v.each(h,function(b){q.append(p,b)})}}});L("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(v,q,p){var h=function(b){b=b.dom();null!==b.parentNode&&b.parentNode.removeChild(b)};return{empty:function(b){b.dom().textContent="";v.each(p.children(b),function(c){h(c)})},remove:h,unwrap:function(b){var c=p.children(b);
0<c.length&&q.before(b,c);h(b)}}});L("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(v,q,p){return function(h,b){var c=function(n){try{return d(n)}catch(u){return q.none()}},d=function(n){return h(n)?q.from(n.dom().nodeValue):q.none()},a=v.detect().browser,f=a.isIE()&&10===a.version.major?c:d;return{get:function(n){if(!h(n))throw new p("Can only get "+b+" value of a "+b+" node");return f(n).getOr("")},getOption:f,set:function(n,
u){if(!h(n))throw new p("Can only set raw "+b+" value of a "+b+" node");n.dom().nodeValue=u}}}});L("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(v,q){var p=q(v.isText,"text");return{get:function(h){return p.get(h)},getOption:function(h){return p.getOption(h)},set:function(h,b){p.set(h,b)}}});L("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(v,q,p){var h=function(b,
c){var d=[];v.each(p.children(b),function(a){c(a)&&(d=d.concat([a]));d=d.concat(h(a,c))});return d};return{all:function(b){return h(q.body(),b)},ancestors:function(b,c,d){return v.filter(p.parents(b,d),c)},siblings:function(b,c){return v.filter(p.siblings(b),c)},children:function(b,c){return v.filter(p.children(b),c)},descendants:h}});L("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(v,q){return{all:function(p){return q.all(p)},
ancestors:function(p,h,b){return v.ancestors(p,function(c){return q.is(c,h)},b)},siblings:function(p,h){return v.siblings(p,function(b){return q.is(b,h)})},children:function(p,h){return v.children(p,function(b){return q.is(b,h)})},descendants:function(p,h){return q.all(h,p)}}});L("tinymce.core.dom.PaddingBr","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType".split(" "),
function(v,q,p,h,b,c,d,a,f){var n=function(u){return b.isText(u)?"\u00a0"===c.get(u):f.isBr(u)};return{removeTrailingBr:function(u){var z=d.descendants(u,"br"),w=v.filter,m=[];for(u=u.dom();u;)m.push(h.fromDom(u)),u=u.lastChild;w=w.call(v,m.slice(-1),f.isBr);z.length===w.length&&v.each(w,p.remove)},fillWithPaddingBr:function(u){p.empty(u);q.append(u,h.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(u){return 1===v.filter(a.children(u),n).length},trimBlockTrailingBr:function(u){a.lastChild(u).each(function(z){a.prevSibling(z).each(function(w){f.isBlock(u)&&
f.isBr(z)&&f.isBlock(w)&&p.remove(z)})})}}});L("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(v,q){var p=q.makeMap;return function(h){var b=[];h=h||{};var c=h.indent;var d=p(h.indent_before||"");var a=p(h.indent_after||"");var f=v.getEncodeFunc(h.entity_encoding||"raw",h.entities);var n="html"==h.element_format;return{start:function(u,z,w){var m;if(c&&d[u]&&0<b.length){var g=b[b.length-1];0<g.length&&"\n"!==g&&b.push("\n")}b.push("<",u);if(z)for(g=0,m=
z.length;g<m;g++){var e=z[g];b.push(" ",e.name,'="',f(e.value,!0),'"')}b[b.length]=!w||n?">":" />";w&&c&&a[u]&&0<b.length&&(g=b[b.length-1],0<g.length&&"\n"!==g&&b.push("\n"))},end:function(u){b.push("</",u,">");c&&a[u]&&0<b.length&&(u=b[b.length-1],0<u.length&&"\n"!==u&&b.push("\n"))},text:function(u,z){0<u.length&&(b[b.length]=z?u:f(u))},cdata:function(u){b.push("<![CDATA[",u,"]]\x3e")},comment:function(u){b.push("\x3c!--",u,"--\x3e")},pi:function(u,z){z?b.push("<?",u," ",f(z),"?>"):b.push("<?",
u,"?>");c&&b.push("\n")},doctype:function(u){b.push("<!DOCTYPE",u,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}}});L("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(v,q){return function(p,h){var b=new v(p);p=p||{};p.validate="validate"in p?p.validate:!0;this.schema=h=h||new q;this.writer=b;this.serialize=function(c){var d=p.validate;var a={3:function(n){b.text(n.value,n.raw)},8:function(n){b.comment(n.value)},
7:function(n){b.pi(n.name,n.value)},10:function(n){b.doctype(n.value)},4:function(n){b.cdata(n.value)},11:function(n){if(n=n.firstChild){do f(n);while(n=n.next)}}};b.reset();var f=function(n){var u=a[n.type],z,w;if(u)u(n);else{u=n.name;var m=n.shortEnded;var g=n.attributes;if(d&&g&&1<g.length){var e=[];e.map={};if(w=h.getElementRule(n.name)){var t=0;for(z=w.attributesOrder.length;t<z;t++){var y=w.attributesOrder[t];if(y in g.map){var C=g.map[y];e.map[y]=C;e.push({name:y,value:C})}}t=0;for(z=g.length;t<
z;t++)y=g[t].name,y in e.map||(C=g.map[y],e.map[y]=C,e.push({name:y,value:C}));g=e}}b.start(n.name,g,m);if(!m){if(n=n.firstChild){do f(n);while(n=n.next)}b.end(u)}}};if(1!=c.type||p.inner)a[11](c);else f(c);return b.getContent()}}});L("tinymce.core.caret.CaretFinder","ephox.katamari.api.Fun ephox.katamari.api.Option tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.dom.NodeType".split(" "),function(v,q,p,h,
b,c,d){var a=function(w){return h.isTextPosition(w)?0===w.offset():p.isCaretCandidate(w.getNode())},f=function(w){return h.isTextPosition(w)?w.offset()===w.container().data.length:p.isCaretCandidate(w.getNode(!0))},n=function(w,m){return!h.isTextPosition(w)&&!h.isTextPosition(m)&&w.getNode()===m.getNode(!0)},u=function(w,m,g){m=new c(m);return q.from(w?m.next(g):m.prev(g))},z=function(w,m){var g=w?m.firstChild:m.lastChild;if(d.isText(g))return q.some(new h(g,w?0:g.data.length));if(g){if(p.isCaretCandidate(g))return m=
q.some,w=w?h.before(g):d.isBr(g)?h.before(g):h.after(g),m.call(q,w);g=w?h.before(g):h.after(g);return u(w,m,g)}return q.none()};return{fromPosition:u,nextPosition:v.curry(u,!0),prevPosition:v.curry(u,!1),navigate:function(w,m,g){return u(w,m,g).bind(function(e){var t;if(t=b.isInSameBlock(g,e,m))if(w){if(t=!n(g,e))t=!(!h.isTextPosition(g)&&d.isBr(g.getNode()));t=t&&f(g)&&a(e)}else t=!n(e,g)&&a(g)&&f(e);return t?u(w,m,e):q.some(e)})},positionIn:z,firstPositionIn:v.curry(z,!0),lastPositionIn:v.curry(z,
!1)}});L("tinymce.core.selection.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(v,q,p,h){var b=function(c){var d=p.fromRangeStart(c),a=p.fromRangeEnd(c),f=c.commonAncestorContainer;return q.fromPosition(!1,f,a).map(function(n){if(!h.isInSameBlock(d,a,f)&&h.isInSameBlock(d,n,f)){var u=d.container(),z=d.offset(),w=n.container();n=n.offset();var m=v.createRange();m.setStart(u,z);m.setEnd(w,n);return m}return c}).getOr(c)};
return{normalize:function(c){return c.collapsed?c:b(c)}}});L("tinymce.core.InsertContent","ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.InsertList tinymce.core.caret.CaretPosition tinymce.core.caret.CaretWalker tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.html.Serializer tinymce.core.selection.RangeNormalizer tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d,a,f,n,u,z){var w=a.matchNodeNames("td th"),
m=function(t,y,C){if("all"===C.getAttribute("data-mce-bogus"))C.parentNode.insertBefore(t.dom.createFragment(y),C);else{var B=C.firstChild,r=C.lastChild;!B||B===r&&"BR"===B.nodeName?t.dom.setHTML(C,y):t.selection.setContent(y)}},g=function(t,y){v.from(t.getParent(y,"td,th")).map(q.fromDom).each(f.trimBlockTrailingBr)},e=function(t,y,C){var B,r=t.schema.getTextInlineElements(),k=t.selection,x=t.dom;var A=function(Q){var W=k.getRng(!0);var V=W.startContainer;W=W.startOffset;var ba=function(N){return V[N]&&
3==V[N].nodeType};3==V.nodeType&&(0<W?Q=Q.replace(/^&nbsp;/," "):ba("previousSibling")||(Q=Q.replace(/^ /,"&nbsp;")),W<V.length?Q=Q.replace(/&nbsp;(<br>|)$/," "):ba("nextSibling")||(Q=Q.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")));return Q};var l=function(){var Q=k.getRng(!0);var W=Q.startContainer;var V=Q.startOffset;3==W.nodeType&&Q.collapsed&&("\u00a0"===W.data[V]?(W.deleteData(V,1),/[\u00a0| ]$/.test(y)||(y+=" ")):"\u00a0"===W.data[V-1]&&(W.deleteData(V-1,1),/[\u00a0| ]$/.test(y)||(y=" "+y)))};var D=
function(Q){return Q&&!t.schema.getShortEndedElements()[Q.nodeName]};/^ | $/.test(y)&&(y=A(y));A=t.parser;var E=C.merge;var F=new n({validate:t.settings.validate},t.schema);var H={content:y,format:"html",selection:!0,paste:C.paste};H=t.fire("BeforeSetContent",H);if(H.isDefaultPrevented())t.fire("SetContent",{content:H.content,format:"html",selection:!0,paste:C.paste});else{y=H.content;-1==y.indexOf("{$caret}")&&(y+="{$caret}");y=y.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
var I=k.getRng();var G=I.startContainer||(I.parentElement?I.parentElement():null),J=t.getBody();G===J&&k.isCollapsed()&&x.isBlock(J.firstChild)&&D(J.firstChild)&&x.isEmpty(J.firstChild)&&(I=x.createRng(),I.setStart(J.firstChild,0),I.setEnd(J.firstChild,0),k.setRng(I));k.isCollapsed()||(t.selection.setRng(u.normalize(t.selection.getRng())),t.getDoc().execCommand("Delete",!1,null),l());l=k.getNode();D={context:l.nodeName.toLowerCase(),data:C.data,insert:!0};var M=A.parse(y,D);if(!0===C.paste&&h.isListFragment(t.schema,
M)&&h.isParentBlockLi(x,l))I=h.insertAtCaret(F,x,t.selection.getRng(!0),M),t.selection.setRng(I),t.fire("SetContent",H);else{(function(Q){for(;Q=Q.walk();)1===Q.type&&Q.attr("data-mce-fragment","1")})(M);var P=M.lastChild;if("mce_marker"==P.attr("id"))for(C=P,P=P.prev;P;P=P.walk(!0))if(3==P.type||!x.isBlock(P.name)){t.schema.isValidChild(P.parent.name,"span")&&P.parent.insert(C,P,"br"===P.name);break}t._selectionOverrides.showBlockCaretContainer(l);if(D.invalid){k.setContent('<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>');
l=k.getNode();C=t.getBody();for(9==l.nodeType?l=P=C:P=l;P!==C;)l=P,P=P.parentNode;y=l==C?C.innerHTML:x.getOuterHTML(l);y=F.serialize(A.parse(y.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return F.serialize(M)})));l==C?x.setHTML(C,y):x.setOuterHTML(l,y)}else y=F.serialize(M),m(t,y,l);(function(){if(E){var Q=t.getBody(),W=new d(x);z.each(x.select("*[data-mce-fragment]"),function(V){for(var ba=V.parentNode;ba&&ba!=Q;ba=ba.parentNode)r[V.nodeName.toLowerCase()]&&W.compare(ba,
V)&&x.remove(V,!0)})}})();(function(Q){var W,V;if(Q)if(k.scrollIntoView(Q),W=function(N){for(var O=t.getBody();N&&N!==O;N=N.parentNode)if("false"===t.dom.getContentEditable(N))return N;return null}(Q))x.remove(Q),k.select(W);else{I=x.createRng();(P=Q.previousSibling)&&3==P.nodeType?(I.setStart(P,P.nodeValue.length),p.ie||(B=Q.nextSibling)&&3==B.nodeType&&(P.appendData(B.data),B.parentNode.removeChild(B))):(I.setStartBefore(Q),I.setEndBefore(Q));var ba=function(N){N=b.fromRangeStart(N);if(N=(new c(t.getBody())).next(N))return N.toRange()};
W=x.getParent(Q,x.isBlock);x.remove(Q);W&&x.isEmpty(W)&&(t.$(W).empty(),I.setStart(W,0),I.setEnd(W,0),w(W)||W.getAttribute("data-mce-fragment")||!(V=ba(I))?x.add(W,x.create("br",{"data-mce-bogus":"1"})):(I=V,x.remove(W)));k.setRng(I)}})(x.get("mce_marker"));(function(Q){z.each(Q.getElementsByTagName("*"),function(W){W.removeAttribute("data-mce-fragment")})})(t.getBody());g(t.dom,t.selection.getStart());t.fire("SetContent",H);t.addVisual()}}};return{insertAtCaret:function(t,y){if("string"!==typeof y){var C=
z.extend({paste:y.paste,data:{paste:y.paste}},y);y=y.content}else C={};e(t,y,C)}}});L("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(v,q){return function(p,h,b,c,d){return p(b,c)?q.some(b):v.isFunction(d)&&d(b)?q.none():h(b,c,d)}});L("ephox.sugar.api.search.PredicateFind","ephox.katamari.api.Type ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Body ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.impl.ClosestOrAncestor".split(" "),
function(v,q,p,h,b,c,d,a){var f=function(z,w,m){z=z.dom();for(m=v.isFunction(m)?m:p.constant(!1);z.parentNode;){z=z.parentNode;var g=d.fromDom(z);if(w(g))return h.some(g);if(m(g))break}return h.none()},n=function(z,w){return q.find(z.dom().childNodes,p.compose(w,d.fromDom)).map(d.fromDom)},u=function(z,w){var m=function(g){for(var e=0;e<g.childNodes.length;e++){if(w(d.fromDom(g.childNodes[e])))return h.some(d.fromDom(g.childNodes[e]));var t=m(g.childNodes[e]);if(t.isSome())return t}return h.none()};
return m(z.dom())};return{first:function(z){return u(b.body(),z)},ancestor:f,closest:function(z,w,m){return a(function(g){return w(g)},f,z,w,m)},sibling:function(z,w){var m=z.dom();return m.parentNode?n(d.fromDom(m.parentNode),function(g){return!c.eq(z,g)&&w(g)}):h.none()},child:n,descendant:u}});L("tinymce.core.EditorSettings","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Obj ephox.katamari.api.Option ephox.katamari.api.Strings ephox.katamari.api.Struct ephox.katamari.api.Type ephox.sand.api.PlatformDetection tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f){var n=c.immutable("sections","settings"),u=a.detect().deviceType.isTouch(),z=["lists","autolink","autosave"],w={theme:"mobile"},m=function(t){t=d.isArray(t)?t.join(" "):t;t=v.map(d.isString(t)?t.split(" "):[],b.trim);return v.filter(t,function(y){return 0<y.length})},g=function(t,y){y=p.bifilter(y,function(C,B){return v.contains(t,B)});return n(y.t,y.f)},e=function(t,y,C,B){B=g(["mobile"],B);var r=f.extend,k=B.settings();var x=B.settings().inline;t&&B.sections().hasOwnProperty("mobile")&&
!x?(x=B.sections(),x=x.hasOwnProperty("mobile")?x.mobile:{},x=f.extend({},w,x)):x={};var A=B.settings().inline;var l=B.settings();l=l.external_plugins?l.external_plugins:{};l=C&&C.external_plugins?f.extend({},C.external_plugins,l):l;y=r.call(f,y,C,k,x,{validate:!0,content_editable:A,external_plugins:l});C=m(C.forced_plugins);r=m(y.plugins);t=t&&B.sections().hasOwnProperty("mobile")?v.filter(r,q.curry(v.contains,z)):r;t=[].concat(m(C)).concat(m(t));return f.extend(y,{plugins:t.join(" ")})};return{getEditorSettings:function(t,
y,C,B,r){return e(u,{id:y,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:C,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,
render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",
url_converter:t.convertURL,url_converter_scope:t,ie7_compat:!0},B,r)},get:function(t,y){return h.from(t.settings[y])},getString:q.curry(function(t,y,C){return h.from(y.settings[C]).filter(t)},d.isString),combineSettings:e}});L("tinymce.core.text.Bidi",[],function(){var v=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(q){return v.test(q)}}});L("tinymce.core.keyboard.InlineUtils","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors tinymce.core.EditorSettings tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.dom.DOMUtils tinymce.core.dom.NodeType tinymce.core.text.Bidi".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z){var w=function(g,e){var t=e.container(),y=e.offset();return g?d.isCaretContainerInline(t)?u.isText(t.nextSibling)?new a(t.nextSibling,0):a.after(t):d.isBeforeInline(e)?new a(t,y+1):e:d.isCaretContainerInline(t)?u.isText(t.previousSibling)?new a(t.previousSibling,t.previousSibling.data.length):a.before(t):d.isAfterInline(e)?new a(t,y-1):e},m=q.curry(w,!0);q=q.curry(w,!1);return{isInlineTarget:function(g,e){g=c.getString(g,"inline_boundaries_selector").getOr("a[href],code");
return b.is(h.fromDom(e),g)},findRootInline:function(g,e,t){g=v.filter(n.DOM.getParents(t.container(),"*",e),g);return p.from(g[g.length-1])},isRtl:function(g){return"rtl"===n.DOM.getStyle(g,"direction",!0)||z.hasStrongRtl(g.textContent)},isAtZwsp:function(g){return d.isBeforeInline(g)||d.isAfterInline(g)},normalizePosition:w,normalizeForwards:m,normalizeBackwards:q,hasSameParentBlock:function(g,e,t){e=f.getParentBlock(e,g);g=f.getParentBlock(t,g);return e&&e===g}}});L("tinymce.core.delete.DeleteUtils",
"ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.keyboard.InlineUtils".split(" "),function(v,q,p,h,b,c,d,a){var f=function(n){return function(u){return p.eq(n,h.fromDom(u.dom().parentNode))}};return{getParentBlock:function(n,u){return p.contains(n,u)?b.closest(u,function(z){return d.isTextBlock(z)||d.isListItem(z)},f(n)):v.none()},
paddEmptyBody:function(n){if(n.dom.isEmpty(n.getBody())){n.setContent("");var u=n.getBody();u=u.firstChild&&n.dom.isBlock(u.firstChild)?u.firstChild:u;n.selection.setCursorLocation(u,0)}},willDeleteLastPositionInElement:function(n,u,z){return q.liftN([c.firstPositionIn(z),c.lastPositionIn(z)],function(w,m){var g=a.normalizePosition(!0,w),e=a.normalizePosition(!1,m);w=a.normalizePosition(!1,u);return n?c.nextPosition(z,w).map(function(t){return t.isEqual(e)&&u.isEqual(g)}).getOr(!1):c.prevPosition(z,
w).map(function(t){return t.isEqual(g)&&u.isEqual(e)}).getOr(!1)}).getOr(!0)}}});L("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(v,q,p){var h=function(b,c,d){return v.ancestor(b,function(a){return q.is(a,c)},d)};return{first:function(b){return q.one(b)},ancestor:h,sibling:function(b,c){return v.sibling(b,function(d){return q.is(d,c)})},child:function(b,c){return v.child(b,function(d){return q.is(d,
c)})},descendant:function(b,c){return q.one(c,b)},closest:function(b,c,d){return p(q.is,h,b,c,d)}}});L("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(v){return{any:function(q){return v.first(q).isSome()},ancestor:function(q,p,h){return v.ancestor(q,p,h).isSome()},sibling:function(q,p){return v.sibling(q,p).isSome()},child:function(q,p){return v.child(q,p).isSome()},descendant:function(q,p){return v.descendant(q,p).isSome()},closest:function(q,p,h){return v.closest(q,
p,h).isSome()}}});L("tinymce.core.dom.Empty","ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorExists tinymce.core.caret.CaretCandidate tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(v,q,p,h,b,c,d){var a=function(w,m){var g;if(g=b.isCaretCandidate(m)){if(g=c.isText(m)&&/^[ \t\r\n]*$/.test(m.data))w=p.fromDom(w),g=p.fromDom(m),g=!1===h.ancestor(g,"pre,code",v.curry(q.eq,w));g=!1===g}(w=g)||(w=c.isElement(m)&&
"A"===m.nodeName&&m.hasAttribute("name"));return w||f(m)},f=c.hasAttribute("data-mce-bookmark"),n=c.hasAttribute("data-mce-bogus"),u=c.hasAttributeValue("data-mce-bogus","all"),z=function(w){var m=0;if(a(w,w))return!1;var g=w.firstChild;if(!g)return!0;var e=new d(g,w);do if(u(g))g=e.next(!0);else{if(!n(g))if(c.isBr(g))m++;else if(a(w,g))return!1;g=e.next()}while(g);return 1>=m};return{isEmpty:function(w){return z(w.dom())}}});L("tinymce.core.delete.BlockBoundary","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g){var e=b.immutable("block","position"),t=b.immutable("from","to"),y=function(k,x){k=d.fromDom(k);var A=d.fromDom(x.container());return w.getParentBlock(k,A).map(function(l){return e(l,x)})},C=function(k){return n.parent(k.from().block()).bind(function(x){return n.parent(k.to().block()).filter(function(A){return c.eq(x,A)})}).isSome()},B=function(k,x,A){return g.isBr(A.position().getNode())&&!1===m.isEmpty(A.block())?u.positionIn(!1,A.block().dom()).bind(function(l){return l.isEqual(A.position())?
u.fromPosition(x,k,l).bind(function(D){return y(k,D)}):p.some(A)}).getOr(A):A},r=function(k,x,A){A=y(k,z.fromRangeStart(A));var l=A.bind(function(D){return u.fromPosition(x,k,D.position()).bind(function(E){return y(k,E).map(function(F){return B(k,x,F)})})});return h.liftN([A,l],t).filter(function(D){var E;if(E=!1===c.eq(D.from().block(),D.to().block())&&C(D))E=!1===g.isContentEditableFalse(D.from().block())&&!1===g.isContentEditableFalse(D.to().block());return E})};return{read:function(k,x,A){return A.collapsed?
r(k,x,A):p.none()}}});L("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(v,q,p){var h=function(c,d,a){return q.contains(d,c)?p.parents(c,function(f){return a(f)||q.eq(f,d)}).slice(0,-1):[]},b=function(c,d){return h(c,d,v.constant(!1))};return{parentsUntil:h,parents:b,parentsAndSelf:function(c,d){return[c].concat(b(c,d))}}});L("tinymce.core.delete.MergeBlocks","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.Parents".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m){var g=function(k){var x=d.children(k);return v.findIndex(x,n.isBlock).fold(function(){return x},function(A){return x.slice(0,A)})},e=function(k){k=g(k);v.each(k,function(x){b.remove(x)});return k},t=function(k,x){a.positionIn(k,x.dom()).each(function(A){A=A.getNode();z.isBr(A)&&b.remove(c.fromDom(A))})},y=function(k,x){k=m.parentsAndSelf(x,k);return v.find(k.reverse(),u.isEmpty).each(b.remove)},C=function(k,x){x=d.parents(x,function(A){return p.eq(A,k)});return q.from(x[x.length-
2])},B=function(k,x){return p.contains(x,k)?d.parent(k).bind(function(A){return p.eq(A,x)?q.some(k):C(x,k)}):q.none()},r=function(k,x,A){if(u.isEmpty(A))return b.remove(A),u.isEmpty(x)&&w.fillWithPaddingBr(x),a.firstPositionIn(x.dom());t(!0,x);t(!1,A);var l=e(x);return B(x,A).fold(function(){y(k,x);var D=a.lastPositionIn(A.dom());v.each(l,function(E){h.append(A,E)});return D},function(D){var E=a.prevPosition(A.dom(),f.before(D.dom()));v.each(l,function(F){h.before(D,F)});y(k,x);return E})};return{mergeBlocks:function(k,
x,A,l){return x?r(k,l,A):r(k,A,l)}}});L("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(v,q,p){return{backspaceDelete:function(h,b){var c=v.fromDom(h.getBody());var d=q.read(c.dom(),b,h.selection.getRng()).bind(function(a){return p.mergeBlocks(c,b,a.from().block(),a.to().block())});d.each(function(a){h.selection.setRng(a.toRange())});return d.isSome()}}});L("tinymce.core.delete.BlockRangeDelete",
"ephox.katamari.api.Fun ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateFind tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteUtils tinymce.core.delete.MergeBlocks tinymce.core.dom.ElementType".split(" "),function(v,q,p,h,b,c,d,a,f,n){var u=function(w,m){var g=m.getRng();return q.liftN([a.getParentBlock(w,h.fromDom(g.startContainer)),a.getParentBlock(w,h.fromDom(g.endContainer))],function(e,
t){return!1===p.eq(e,t)?(g.deleteContents(),f.mergeBlocks(w,!0,e,t).each(function(y){m.setRng(y.toRange())}),!0):!1}).getOr(!1)},z=function(w,m){m=h.fromDom(m);w=v.curry(p.eq,w);return b.ancestor(m,n.isTableCell,w).isSome()};return{backspaceDelete:function(w,m){if(w.selection.isCollapsed())w=!1;else{w.selection.getRng();m=h.fromDom(w.getBody());var g=w.selection.getRng(),e=c.prevPosition(m.dom(),d.fromRangeStart(g)).isNone(),t=c.nextPosition(m.dom(),d.fromRangeEnd(g)).isNone();!z(m,g.startContainer)&&
!z(m,g.endContainer)&&e&&t?(w.setContent(""),w.selection.setCursorLocation(),w=!0):w=u(m,w.selection)}return w}}});L("ephox.katamari.api.Adt","ephox.katamari.api.Arr ephox.katamari.api.Obj ephox.katamari.api.Type global!Array global!Error global!console".split(" "),function(v,q,p,h,b,c){return{generate:function(d){if(!p.isArray(d))throw new b("cases must be an array");if(0===d.length)throw new b("there must be at least one case");var a=[],f={};v.each(d,function(n,u){var z=q.keys(n);if(1!==z.length)throw new b("one and only one name per case");
var w=z[0],m=n[w];if(void 0!==f[w])throw new b("duplicate key detected:"+w);if("cata"===w)throw new b("cannot have a case named cata (sorry)");if(!p.isArray(m))throw new b("case arguments must be an array");a.push(w);f[w]=function(){var g=arguments.length;if(g!==m.length)throw new b("Wrong number of arguments to case "+w+". Expected "+m.length+" ("+m+"), got "+g);var e=new h(g);for(g=0;g<e.length;g++)e[g]=arguments[g];return{fold:function(){if(arguments.length!==d.length)throw new b("Wrong number of arguments to fold. Expected "+
d.length+", got "+arguments.length);return arguments[u].apply(null,e)},match:function(t){var y=q.keys(t);if(a.length!==y.length)throw new b("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+y.join(","));if(!v.forall(a,function(C){return v.contains(y,C)}))throw new b("Not all branches were specified when using match. Specified: "+y.join(", ")+"\nRequired: "+a.join(", "));return t[w].apply(null,e)},log:function(t){c.log(t,{constructors:a,constructor:w,params:e})}}}});return f}}});
L("tinymce.core.delete.CefDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteUtils tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),function(v,q,p,h,b,c,d,a,f){var n=v.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),u=function(t,y){y=y.getNode(!1===t);t=t?"after":"before";return f.isElement(y)&&
y.getAttribute("data-mce-caret")===t},z=function(t,y,C,B){var r=B.getNode(!1===y);return d.getParentBlock(p.fromDom(t),p.fromDom(C.getNode())).map(function(k){return a.isEmpty(k)?n.remove(k.dom()):n.moveToElement(r)}).orThunk(function(){return q.some(n.moveToElement(r))})},w=function(t,y,C){return h.fromPosition(y,t,C).bind(function(B){return y&&f.isContentEditableFalse(B.getNode())?z(t,y,C,B):!1===y&&f.isContentEditableFalse(B.getNode(!0))?z(t,y,C,B):y&&c.isAfterContentEditableFalse(C)?q.some(n.moveToPosition(B)):
!1===y&&c.isBeforeContentEditableFalse(C)?q.some(n.moveToPosition(B)):q.none()})},m=function(t,y){return t&&f.isContentEditableFalse(y.nextSibling)?q.some(n.moveToElement(y.nextSibling)):!1===t&&f.isContentEditableFalse(y.previousSibling)?q.some(n.moveToElement(y.previousSibling)):q.none()},g=function(t,y,C){return C.fold(function(B){return q.some(n.remove(B))},function(B){return q.some(n.moveToElement(B))},function(B){return c.isInSameBlock(y,B,t)?q.none():q.some(n.moveToPosition(B))})},e=function(t,
y,C){return u(y,C)?m(y,C.getNode(!1===y)).fold(function(){return w(t,y,C)},q.some):w(t,y,C).bind(function(B){return g(t,C,B)})};return{read:function(t,y,C){C=c.normalizeRange(y?1:-1,t,C);C=b.fromRangeStart(C);return!1===y&&c.isAfterContentEditableFalse(C)?q.some(n.remove(C.getNode(!0))):y&&c.isBeforeContentEditableFalse(C)?q.some(n.remove(C.getNode())):e(t,y,C)}}});L("tinymce.core.delete.DeleteElement","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.PredicateFind ephox.sugar.api.search.Traverse tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.Empty tinymce.core.dom.NodeType".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m){var g=function(F,H){var I=H.container(),G=H.offset();return!1===z.isTextPosition(H)&&I===F.parentNode&&G>z.before(F).offset()?new z(H.container(),H.offset()-1):H},e=function(F){if(n.isCaretCandidate(F.previousSibling)){var H=q.some;F=F.previousSibling;F=m.isText(F)?new z(F,F.data.length):z.after(F);return H.call(q,F)}return F.previousSibling?u.lastPositionIn(F.previousSibling):q.none()},t=function(F){if(n.isCaretCandidate(F.nextSibling)){var H=q.some;F=F.nextSibling;
F=m.isText(F)?new z(F,0):z.before(F);return H.call(q,F)}return F.nextSibling?u.firstPositionIn(F.nextSibling):q.none()},y=function(F,H){var I=z.before(H.previousSibling?H.previousSibling:H.parentNode);return u.prevPosition(F,I).fold(function(){return u.nextPosition(F,z.after(H))},q.some)},C=function(F,H){return u.nextPosition(F,z.after(H)).fold(function(){return u.prevPosition(F,z.before(H))},q.some)},B=function(F,H){return e(H).orThunk(function(){return t(H)}).orThunk(function(){return y(F,H)})},
r=function(F,H){return t(H).orThunk(function(){return e(H)}).orThunk(function(){return C(F,H)})},k=function(F,H,I){return(F?r(H,I):B(H,I)).map(v.curry(g,I))},x=function(F,H,I){I.fold(function(){F.focus()},function(G){F.selection.setRng(G.toRange(),H)})},A=function(F){return function(H){return H.dom()===F}},l=function(F,H){return H&&F.schema.getBlockElements().hasOwnProperty(d.name(H))},D=function(F){if(w.isEmpty(F)){var H=c.fromHtml('<br data-mce-bogus="1">');b.empty(F);h.append(F,H);return q.some(z.before(H.dom()))}return q.none()},
E=function(F,H){return p.liftN([f.prevSibling(F),f.nextSibling(F),H],function(I,G,J){var M=I.dom(),P=G.dom();if(m.isText(M)&&m.isText(P))return I=M.data.length,M.appendData(P.data),b.remove(G),b.remove(F),J.container()===P?new z(M,I):J;b.remove(F);return J}).orThunk(function(){b.remove(F);return H})};return{deleteElement:function(F,H,I){var G=k(H,F.getBody(),I.dom()),J=a.ancestor(I,v.curry(l,F),A(F.getBody())),M=E(I,G);F.dom.isEmpty(F.getBody())?(F.setContent(""),F.selection.setCursorLocation()):
J.bind(D).fold(function(){x(F,H,M)},function(P){x(F,H,q.some(P))})}}});L("tinymce.core.delete.CefDelete","ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter tinymce.core.caret.CaretPosition tinymce.core.delete.CefDeleteAction tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.NodeType".split(" "),function(v,q,p,h,b,c,d,a,f){var n=function(m,g){return function(e){m._selectionOverrides.hideFakeCaret();
d.deleteElement(m,g,p.fromDom(e));return!0}},u=function(m,g){return function(e){e=g?b.before(e):b.after(e);m.selection.setRng(e.toRange());return!0}},z=function(m){return function(g){m.selection.setRng(g.toRange());return!0}},w=function(m,g){return c.read(m.getBody(),g,m.selection.getRng()).map(function(e){return e.fold(n(m,g),u(m,g),z(m))}).getOr(!1)};return{backspaceDelete:function(m,g){if(m.selection.isCollapsed())return w(m,g);var e=m.selection.getNode();f.isContentEditableFalse(e)?(v.each(h.descendants(p.fromDom(m.getBody()),
".mce-offscreen-selection"),q.remove),d.deleteElement(m,g,p.fromDom(m.selection.getNode())),a.paddEmptyBody(m),m=!0):m=!1;return m},paddEmptyElement:function(m){var g;a:{var e=m.getBody();for(g=m.selection.getNode();g&&g!==e;){if(f.isContentEditableTrue(g)||f.isContentEditableFalse(g))break a;g=g.parentNode}g=null}f.isContentEditableTrue(g)&&m.dom.isBlock(g)&&m.dom.isEmpty(g)&&(e=m.dom.create("br",{"data-mce-bogus":"1"}),m.dom.setHTML(g,""),g.appendChild(e),m.selection.setRng(b.before(e).toRange()));
return!0}}});L("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(v,q,p){var h=q.isText,b=function(d){return h(d)&&d.data[0]===p.ZWSP},c=function(d){return h(d)&&d.data[d.data.length-1]===p.ZWSP};q=function(d,a){d?h(a.previousSibling)?(c(a.previousSibling)||a.previousSibling.appendData(p.ZWSP),a=a.previousSibling):h(a)?b(a)||a.insertData(0,p.ZWSP):(d=a.ownerDocument.createTextNode(p.ZWSP),a.parentNode.insertBefore(d,a),
a=d):h(a.nextSibling)?(b(a.nextSibling)||a.nextSibling.insertData(0,p.ZWSP),a=a.nextSibling):h(a)?c(a)||a.appendData(p.ZWSP):(d=a.ownerDocument.createTextNode(p.ZWSP),a.nextSibling?a.parentNode.insertBefore(d,a.nextSibling):a.parentNode.appendChild(d),a=d);return a};return{insertInline:q,insertInlineBefore:v.curry(q,!0),insertInlineAfter:v.curry(q,!1)}});L("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType",
"tinymce.core.text.Zwsp"],function(v,q,p,h,b){var c=h.isElement,d=h.isText,a=function(z){var w=z.parentNode;w&&w.removeChild(z)},f=function(z){var w=b.trim(z);return{count:z.length-w.length,text:w}},n=function(z,w){var m=w.container(),g=v.indexOf(m.childNodes,z).map(function(e){return e<w.offset()?new p(m,w.offset()-1):w}).getOr(w);u(z);return g},u=function(z){c(z)&&q.isCaretContainer(z)&&(q.hasContent(z)?z.removeAttribute("data-mce-caret"):a(z));if(d(z)){var w=b.trim;try{var m=z.nodeValue}catch(g){m=
""}w=w.call(b,m);0===w.length?a(z):z.nodeValue=w}};return{removeAndReposition:function(z,w){if(p.isTextPosition(w))if(w.container()===z){var m=f(z.data.substr(0,w.offset())),g=f(z.data.substr(w.offset()));g=m.text+g.text;0<g.length?(0===g.length?a(z):z.nodeValue=g,z=new p(z,w.offset()-m.count)):z=w}else u(z),z=w;else w.container()===z.parentNode?z=n(z,w):(u(z),z=w);return z},remove:u}});L("tinymce.core.keyboard.BoundaryCaret","ephox.katamari.api.Option tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerInline tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.keyboard.InlineUtils".split(" "),
function(v,q,p,h,b,c,d,a){var f=function(u,z){return d.isText(u.container())?p.insertInline(z,u.container()):p.insertInline(z,u.getNode())},n=function(u,z){return(z=z.get())&&u.container()===z&&q.isCaretContainerInline(z)};return{renderCaret:function(u,z){return z.fold(function(w){h.remove(u.get());w=p.insertInlineBefore(w);u.set(w);return v.some(new c(w,w.length-1))},function(w){return b.firstPositionIn(w).map(function(m){if(n(m,u))return new c(u.get(),1);h.remove(u.get());m=f(m,!0);u.set(m);return new c(m,
1)})},function(w){return b.lastPositionIn(w).map(function(m){if(n(m,u))return new c(u.get(),u.get().length-1);h.remove(u.get());m=f(m,!1);u.set(m);return new c(m,m.length-1)})},function(w){h.remove(u.get());w=p.insertInlineAfter(w);u.set(w);return v.some(new c(w,1))})}}});L("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(v){var q=function(b){return b&&/^(IMG)$/.test(b.nodeName)},p=function(b){return b&&3===b.nodeType&&/^([\t \r\n]+|)$/.test(b.nodeValue)},h=function(b,c,d){if("color"===
d||"backgroundColor"===d)c=b.toHex(c);"fontWeight"===d&&700===c&&(c="bold");"fontFamily"===d&&(c=c.replace(/['"]/g,"").replace(/,\s+/g,","));return""+c};return{isInlineBlock:q,moveStart:function(b,c,d){var a=d.startContainer,f=d.startOffset;if(d.startContainer!==d.endContainer||!q(d.startContainer.childNodes[d.startOffset]))if(3===a.nodeType&&f>=a.nodeValue.length&&(f=b.nodeIndex(a),a=a.parentNode),1===a.nodeType)for(a=a.childNodes,f<a.length?(a=a[f],b=new v(a,b.getParent(a,b.isBlock))):(a=a[a.length-
1],b=new v(a,b.getParent(a,b.isBlock)),b.next(!0)),f=b.current();f;f=b.next())if(3===f.nodeType&&!p(f)){d.setStart(f,0);c.setRng(d);break}},getNonWhiteSpaceSibling:function(b,c,d){if(b)for(c=c?"nextSibling":"previousSibling",b=d?b:b[c];b;b=b[c])if(1===b.nodeType||!p(b))return b},isTextBlock:function(b,c){c.nodeType&&(c=c.nodeName);return!!b.schema.getTextBlockElements()[c.toLowerCase()]},isValid:function(b,c,d){return b.schema.isValidChild(c,d)},isWhiteSpaceNode:p,replaceVars:function(b,c){"string"!==
typeof b?b=b(c):c&&(b=b.replace(/%(\w+)/g,function(d,a){return c[a]||d}));return b},isEq:function(b,c){b=b||"";c=c||"";b=""+(b.nodeName||b);c=""+(c.nodeName||c);return b.toLowerCase()===c.toLowerCase()},normalizeStyleValue:h,getStyle:function(b,c,d){return h(b,b.getStyle(c,d),d)},getTextDecoration:function(b,c){var d;b.getParent(c,function(a){return(d=b.getStyle(a,"text-decoration"))&&"none"!==d});return d},getParents:function(b,c,d){return b.getParents(c,d,b.getRoot())}}});L("tinymce.core.fmt.ExpandRange",
["tinymce.core.dom.Bookmarks","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils","tinymce.core.selection.RangeNodes"],function(v,q,p,h){var b=v.isBookmarkNode,c=p.getParents,d=p.isWhiteSpaceNode,a=p.isTextBlock,f=function(e,t){for("undefined"===typeof t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},n=function(e,t){for(var y=t;y;){if(1===y.nodeType&&e.getContentEditable(y))return"false"===
e.getContentEditable(y)?y:t;y=y.parentNode}return t},u=function(e,t,y,C){y=y.nodeValue;"undefined"===typeof C&&(C=e?y.length:0);e?(e=y.lastIndexOf(" ",C),C=y.lastIndexOf("\u00a0",C),e=e>C?e:C,-1===e||t||e++):(e=y.indexOf(" ",C),C=y.indexOf("\u00a0",C),e=-1!==e&&(-1===C||e<C)?e:C);return e},z=function(e,t,y,C,B,r){if(3===y.nodeType){C=u(B,r,y,C);if(-1!==C)return{container:y,offset:C};var k=y}for(t=new q(y,e.getParent(y,e.isBlock)||t);y=t[B?"prev":"next"]();)if(3===y.nodeType){if(k=y,C=u(B,r,y),-1!==
C)return{container:y,offset:C}}else if(e.isBlock(y))break;if(k)return C=B?0:k.length,{container:k,offset:C}},w=function(e,t,y,C,B){var r,k;3===C.nodeType&&0===C.nodeValue.length&&C[B]&&(C=C[B]);B=c(e,C);for(r=0;r<B.length;r++)for(k=0;k<t.length;k++){var x=t[k];if(!("collapsed"in x&&x.collapsed!==y.collapsed)&&e.is(B[r],x.selector))return B[r]}return C},m=function(e,t,y,C){var B,r=e.dom,k=r.getRoot();t[0].wrapper||(B=r.getParent(y,t[0].block,k));B||(B=r.getParent(y,"LI,TD,TH"),B=r.getParent(3===y.nodeType?
y.parentNode:y,function(x){return x!==k&&a(e,x)},B));B&&t[0].wrapper&&(B=c(r,B,"ul,ol").reverse()[0]||B);if(!B)for(B=y;B[C]&&!r.isBlock(B[C])&&(B=B[C],!p.isEq(B,"br")););return B||y},g=function(e,t,y,C,B,r,k){var x=y=k?y:B;B=k?"previousSibling":"nextSibling";var A=e.getRoot();if(3===x.nodeType&&!d(x)&&(k?0<C:r<x.nodeValue.length))return x;for(;t[0].block_expand||!e.isBlock(y);){for(C=y[B];C;C=C[B]){if(r=!b(C)&&!d(C))r=C,r=!("BR"===r.nodeName&&r.getAttribute("data-mce-bogus")&&!r.nextSibling);if(r)return y}if(y===
A||y.parentNode===A)break;y=y.parentNode}return y};return{expandRng:function(e,t,y,C){var B,r=t.startContainer,k=t.startOffset,x=t.endContainer,A=t.endOffset,l=e.dom;1===r.nodeType&&r.hasChildNodes()&&(r=h.getNode(r,k),3===r.nodeType&&(k=0));1===x.nodeType&&x.hasChildNodes()&&(x=h.getNode(x,t.collapsed?A:A-1),3===x.nodeType&&(A=x.nodeValue.length));r=n(l,r);x=n(l,x);if(b(r.parentNode)||b(r))r=b(r)?r:r.parentNode,r=r.nextSibling||r,3===r.nodeType&&(k=0);if(b(x.parentNode)||b(x))x=b(x)?x:x.parentNode,
x=x.previousSibling||x,3===x.nodeType&&(A=x.length);if(y[0].inline){if(t.collapsed){if(B=z(l,e.getBody(),r,k,!0,C))r=B.container,k=B.offset;if(B=z(l,e.getBody(),x,A,!1,C))x=B.container,A=B.offset}if(C)C=x;else if(C=x,B=f(C,A),B.node){for(;B.node&&0===B.offset&&B.node.previousSibling;)B=f(B.node.previousSibling);B.node&&0<B.offset&&3===B.node.nodeType&&" "===B.node.nodeValue.charAt(B.offset-1)&&1<B.offset&&(C=B.node,C.splitText(B.offset-1))}x=C}if(y[0].inline||y[0].block_expand)y[0].inline&&3===r.nodeType&&
0!==k||(r=g(l,y,r,k,x,A,!0)),y[0].inline&&3===x.nodeType&&A!==x.nodeValue.length||(x=g(l,y,r,k,x,A,!1));y[0].selector&&!1!==y[0].expand&&!y[0].inline&&(r=w(l,y,t,r,"previousSibling"),x=w(l,y,t,x,"nextSibling"));if(y[0].block||y[0].selector)r=m(e,y,r,"previousSibling"),x=m(e,y,x,"nextSibling"),y[0].block&&(l.isBlock(r)||(r=g(l,y,r,k,x,A,!0)),l.isBlock(x)||(x=g(l,y,r,k,x,A,!1)));1===r.nodeType&&(k=l.nodeIndex(r),r=r.parentNode);1===x.nodeType&&(A=l.nodeIndex(x)+1,x=x.parentNode);return{startContainer:r,
startOffset:k,endContainer:x,endOffset:A}}}});L("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(v){var q=v.isEq,p=function(a,f,n){if(n=a.formatter.get(n))for(var u=0;u<n.length;u++)if(!1===n[u].inherit&&a.dom.is(f,n[u].selector))return!0;return!1},h=function(a,f,n,u){var z=a.dom.getRoot();if(f===z)return!1;f=a.dom.getParent(f,function(w){return p(a,w,n)?!0:w.parentNode===z||!!d(a,w,n,u,!0)});return d(a,f,n,u)},b=function(a,f,n){if(q(f,n.inline)||q(f,n.block))return!0;if(n.selector)return 1===
f.nodeType&&a.is(f,n.selector)},c=function(a,f,n,u,z,w){var m,g=n[u];if(n.onmatch)return n.onmatch(f,n,u);if(g)if("undefined"===typeof g.length)for(m in g){if(g.hasOwnProperty(m)){var e="attributes"===u?a.getAttrib(f,m):v.getStyle(a,f,m);if(z&&!e&&!n.exact||(!z||n.exact)&&!q(e,v.normalizeStyleValue(a,v.replaceVars(g[m],w),m)))return}}else for(z=0;z<g.length&&("attributes"===u?!a.getAttrib(f,g[z]):!v.getStyle(a,f,g[z]));z++);return n},d=function(a,f,n,u,z){var w=a.formatter.get(n),m,g=a.dom;if(w&&
f)for(m=0;m<w.length;m++)if(n=w[m],b(a.dom,f,n)&&c(g,f,n,"attributes",z,u)&&c(g,f,n,"styles",z,u)){if(z=n.classes)for(u=0;u<z.length;u++)if(!a.dom.hasClass(f,z[u]))return;return n}};return{matchNode:d,matchName:b,match:function(a,f,n,u){if(u)return h(a,u,f,n);u=a.selection.getNode();if(h(a,u,f,n))return!0;var z=a.selection.getStart();return z!==u&&h(a,z,f,n)?!0:!1},matchAll:function(a,f,n){var u=[],z={};var w=a.selection.getStart();a.dom.getParent(w,function(m){var g;for(g=0;g<f.length;g++){var e=
f[g];!z[e]&&d(a,m,e,n)&&(z[e]=!0,u.push(e))}},a.dom.getRoot());return u},canApply:function(a,f){f=a.formatter.get(f);var n,u,z=a.dom;if(f)for(a=a.selection.getStart(),a=v.getParents(z,a),u=f.length-1;0<=u;u--){var w=f[u].selector;if(!w||f[u].defaultBlock)return!0;for(n=a.length-1;0<=n;n--)if(z.is(a[n],w))return!0}return!1},matchesUnInheritedFormatSelector:p}});L("tinymce.core.selection.SplitRange",["tinymce.core.dom.NodeType"],function(v){return{split:function(q){var p=q.startContainer,h=q.startOffset,
b=q.endContainer;q=q.endOffset;p===b&&v.isText(p)?0<h&&h<p.nodeValue.length&&(b=p.splitText(h),p=b.previousSibling,q>h?(p=b=b.splitText(q-h).previousSibling,q=b.nodeValue.length,h=0):q=0):(v.isText(p)&&0<h&&h<p.nodeValue.length&&(p=p.splitText(h),h=0),v.isText(b)&&0<q&&q<b.nodeValue.length&&(b=b.splitText(q).previousSibling,q=b.nodeValue.length));return{startContainer:p,startOffset:h,endContainer:b,endOffset:q}}}});L("tinymce.core.fmt.CaretFormat","ephox.katamari.api.Arr ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.properties.Attr tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.PaddingBr tinymce.core.dom.TreeWalker tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.SplitRange tinymce.core.text.Zwsp tinymce.core.util.Fun".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e){var t=g.ZWSP,y=function(E){return 1===E.nodeType&&"_mce_caret"===E.id},C=function(E){if(E){var F=new n(E,E);for(E=F.current();E;E=F.next())if(3===E.nodeType)return E}return null},B=function(E){var F=h.fromTag("span");c.setAll(F,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"});E&&q.append(F,h.fromText(t));return F},r=function(E,F){for(;F&&F!==E;){if("_mce_caret"===F.id)return F;F=F.parentNode}return null},k=function(E,F,H,I){var G=F.getRng(!0);
var J=E.getParent(H,E.isBlock);a:{var M=H;for(var P=[];M;){if(3===M.nodeType&&M.nodeValue!==t||1<M.childNodes.length){M=[];break a}1===M.nodeType&&P.push(M);M=M.firstChild}M=P}0<M.length?(!1!==I&&(G.setStartBefore(H),G.setEndBefore(H)),E.remove(H)):((I=C(H))&&I.nodeValue.charAt(0)===t&&I.deleteData(0,1),G.startContainer===I&&0<G.startOffset&&G.setStart(I,G.startOffset-1),G.endContainer===I&&0<G.endOffset&&G.setEnd(I,G.endOffset-1),E.remove(H,!0));J&&E.isEmpty(J)&&f.fillWithPaddingBr(h.fromDom(J));
F.setRng(G)},x=function(E,F,H,I,G){if(I)k(F,H,I,G);else if(I=r(E,H.getStart()),!I)for(;I=F.get("_mce_caret");)k(F,H,I,!1)},A=function(E,F,H){var I=E.dom;(E=I.getParent(H,e.curry(z.isTextBlock,E)))&&I.isEmpty(E)?H.parentNode.replaceChild(F,H):(f.removeTrailingBr(h.fromDom(H)),I.isEmpty(H)?H.parentNode.replaceChild(F,H):I.insertAfter(F,H))},l=function(E,F){E.appendChild(F);return F},D=function(E,F){E=v.foldr(E,function(H,I){return l(H,I.cloneNode(!1))},F);return l(E,E.ownerDocument.createTextNode(t))};
return{setup:function(E){var F=E.dom,H=E.selection,I=E.getBody();E.on("mouseup keydown",function(G){G=G.keyCode;x(I,F,H,null,!1);8===G&&H.isCollapsed()&&H.getStart().innerHTML===t&&x(I,F,H,r(I,H.getStart()));37!==G&&39!==G||x(I,F,H,r(I,H.getStart()))})},applyCaretFormat:function(E,F,H){var I,G,J=E.selection;var M=J.getRng(!0);var P=M.startOffset;var Q=M.startContainer.nodeValue;(I=r(E.getBody(),J.getStart()))&&(G=C(I));var W=/[^\s\u00a0\u00ad\u200b\ufeff]/;Q&&0<P&&P<Q.length&&W.test(Q.charAt(P))&&
W.test(Q.charAt(P-1))?(I=J.getBookmark(),M.collapse(!0),M=u.expandRng(E,M,E.formatter.get(F)),M=m.split(M),E.formatter.apply(F,H,M),J.moveToBookmark(I)):(I&&G.nodeValue===t||(I=E.getDoc(),G=B(!0).dom(),I=I.importNode(G,!0),G=I.firstChild,M.insertNode(I),P=1),E.formatter.apply(F,H,I),J.setCursorLocation(G,P))},removeCaretFormat:function(E,F,H,I){var G=E.dom,J=E.selection,M=J.getRng(!0),P,Q=[];var W=M.startContainer;var V=M.startOffset;var ba=W;3===W.nodeType&&(V!==W.nodeValue.length&&(P=!0),ba=ba.parentNode);
for(;ba;){if(w.matchNode(E,ba,F,H,I)){var N=ba;break}ba.nextSibling&&(P=!0);Q.push(ba);ba=ba.parentNode}N&&(P?(G=J.getBookmark(),M.collapse(!0),M=u.expandRng(E,M,E.formatter.get(F),!0),M=m.split(M),E.formatter.remove(F,H,M),J.moveToBookmark(G)):(F=r(E.getBody(),N),H=B(!1).dom(),Q=D(Q,H),F?A(E,H,F):A(E,H,N),k(G,J,F,!1),J.setCursorLocation(Q,1),G.isEmpty(N)&&G.remove(N)))},isCaretNode:y,getParentCaretContainer:r,replaceWithCaretFormat:function(E,F){var H=B(!1);F=D(F,H.dom());q.before(h.fromDom(E),H);
p.remove(h.fromDom(E));return d(F,0)},isFormatElement:function(E,F){return E.schema.getTextInlineElements().hasOwnProperty(b.name(F))&&!y(F.dom())&&!a.isBogus(F.dom())}}});L("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(v){return{evaluateUntil:function(q,p){for(var h=0;h<q.length;h++){var b=q[h].apply(null,p);if(b.isSome())return b}return v.none()}}});L("tinymce.core.keyboard.BoundaryLocation","ephox.katamari.api.Adt ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options tinymce.core.caret.CaretFinder tinymce.core.caret.CaretUtils tinymce.core.fmt.CaretFormat tinymce.core.keyboard.InlineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(v,q,p,h,b,c,d,a,f){var n=v.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),u=function(E,F){return(F=c.getParentBlock(F,E))?F:E},z=function(E,F,H){var I=a.normalizeForwards(H),G=u(F,I.container());return a.findRootInline(E,G,I).fold(function(){return b.nextPosition(G,I).bind(q.curry(a.findRootInline,E,G)).map(function(J){return n.before(J)})},p.none)},w=function(E,F){return null===d.getParentCaretContainer(E,F)},m=function(E,F,H){return a.findRootInline(E,
F,H).filter(q.curry(w,F))},g=function(E,F,H){var I=a.normalizeBackwards(H);return m(E,F,I).bind(function(G){return b.prevPosition(G,I).isNone()?p.some(n.start(G)):p.none()})},e=function(E,F,H){var I=a.normalizeForwards(H);return m(E,F,I).bind(function(G){return b.nextPosition(G,I).isNone()?p.some(n.end(G)):p.none()})},t=function(E,F,H){var I=a.normalizeBackwards(H),G=u(F,I.container());return a.findRootInline(E,G,I).fold(function(){return b.prevPosition(G,I).bind(q.curry(a.findRootInline,E,G)).map(function(J){return n.after(J)})},
p.none)},y=function(E){return!1===a.isRtl(B(E))},C=function(E,F,H){return f.evaluateUntil([z,g,e,t],[E,F,H]).filter(y)},B=function(E){return E.fold(q.identity,q.identity,q.identity,q.identity)},r=function(E){return E.fold(q.constant("before"),q.constant("start"),q.constant("end"),q.constant("after"))},k=function(E){return E.fold(n.before,n.before,n.after,n.after)},x=function(E,F,H,I,G,J){return h.liftN([a.findRootInline(F,H,I),a.findRootInline(F,H,G)],function(M,P){return M!==P&&a.hasSameParentBlock(H,
M,P)?n.after(E?M:P):J}).getOr(J)},A=function(E,F){return E.fold(q.constant(!0),function(H){return!(r(H)===r(F)&&B(H)===B(F))})},l=function(E,F,H,I,G){var J=a.normalizePosition(E,G);return b.fromPosition(E,H,J).map(q.curry(a.normalizePosition,E)).fold(function(){return I.map(k)},function(M){return C(F,H,M).map(q.curry(x,E,F,H,J,M)).filter(q.curry(A,I))}).filter(y)},D=function(E,F){return E?F.fold(q.compose(p.some,n.start),p.none,q.compose(p.some,n.after),p.none):F.fold(p.none,q.compose(p.some,n.before),
p.none,q.compose(p.some,n.end))};v=function(E,F,H,I){var G=a.normalizePosition(E,I),J=C(F,H,G);return C(F,H,G).bind(q.curry(D,E)).orThunk(function(){return l(E,F,H,J,I)})};return{readLocation:C,findLocation:v,prevLocation:q.curry(v,!1),nextLocation:q.curry(v,!0),getElement:B,outside:k,inside:function(E){return E.fold(n.start,n.start,n.end,n.end)}}});L("ephox.katamari.api.Cell",[],function(){var v=function(q){var p=q;return{get:function(){return p},set:function(h){p=h},clone:function(){return v(p)}}};
return v});L("tinymce.core.selection.WordSelection",["ephox.katamari.api.Type","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition"],function(v,q,p){var h=function(c){return v.isFunction(c.selection.getSel().modify)},b=function(c,d,a){var f=c?1:-1;d.setRng(p(a.container(),a.offset()+f).toRange());d.getSel().modify("move",c?"forward":"backward","word");return!0};return{hasSelectionModifyApi:h,moveByWord:function(c,d){var a=d.selection.getRng();a=c?p.fromRangeEnd(a):p.fromRangeStart(a);
return h(d)?c&&q.isBeforeInline(a)?b(!0,d.selection,a):!c&&q.isAfterInline(a)?b(!1,d.selection,a):!1:!1}}});L("tinymce.core.keyboard.BoundarySelection","ephox.katamari.api.Arr ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.caret.CaretContainerRemove tinymce.core.caret.CaretPosition tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.WordSelection".split(" "),function(v,q,p,h,b,c,d,a,f){var n=function(e,t){var y=
e.dom.createRng();y.setStart(t.container(),t.offset());y.setEnd(t.container(),t.offset());e.selection.setRng(y)},u=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},z=function(e,t,y){return c.renderCaret(t,y).map(function(C){n(e,C);return y})},w=function(e,t,y){var C=e.getBody(),B=b.fromRangeStart(e.selection.getRng()),r=p.curry(a.isInlineTarget,e);return d.findLocation(y,r,C,B).bind(function(k){return z(e,t,k)})},m=function(e,t,y,C){t.selection.isCollapsed()&&
(C=v.filter(C,e),v.each(C,function(B){B=b.fromRangeStart(t.selection.getRng());d.readLocation(e,t.getBody(),B).bind(function(r){return z(t,y,r)})}))},g=function(e,t,y){return function(){return!1!==t.settings.inline_boundaries?f.moveByWord(e,t):!1}};return{move:function(e,t,y){return function(){return!1!==e.settings.inline_boundaries?w(e,t,y).isSome():!1}},moveNextWord:p.curry(g,!0),movePrevWord:p.curry(g,!1),setupSelectedState:function(e){var t=new q(null),y=p.curry(a.isInlineTarget,e);e.on("NodeChange",
function(C){if(!1!==e.settings.inline_boundaries){var B=C.parents,r=v.filter(e.dom.select('*[data-mce-selected="inline-boundary"]'),y);B=v.filter(B,y);v.each(v.difference(r,B),p.curry(u,!1));v.each(v.difference(B,r),p.curry(u,!0));e.selection.isCollapsed()&&!0!==e.composing&&t.get()&&(r=b.fromRangeStart(e.selection.getRng()),b.isTextPosition(r)&&!1===a.isAtZwsp(r)&&(n(e,h.removeAndReposition(t.get(),r)),t.set(null)));m(y,e,t,C.parents)}});return t},setCaretPosition:n}});L("tinymce.core.delete.InlineBoundaryDelete",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.node.Element global!document tinymce.core.caret.CaretContainer tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.delete.DeleteElement tinymce.core.keyboard.BoundaryCaret tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.BoundarySelection tinymce.core.keyboard.InlineUtils".split(" "),function(v,q,p,h,b,c,d,a,f,n,u,z,w,m){var g=function(B){return p.liftN([d.firstPositionIn(B),
d.lastPositionIn(B)],function(r,k){r=m.normalizePosition(!0,r);var x=m.normalizePosition(!1,k);return d.nextPosition(B,r).map(function(A){return A.isEqual(x)}).getOr(!0)}).getOr(!0)},e=function(B,r){return function(k){return u.renderCaret(r,k).map(function(x){w.setCaretPosition(B,x);return!0}).getOr(!1)}},t=function(B,r,k,x){var A=B.getBody(),l=v.curry(m.isInlineTarget,B);B.undoManager.ignore(function(){var D=B.selection,E=D.setRng,F=b.createRange();F.setStart(k.container(),k.offset());F.setEnd(x.container(),
x.offset());E.call(D,F);B.execCommand("Delete");z.readLocation(l,A,a.fromRangeStart(B.selection.getRng())).map(z.inside).map(e(B,r))});B.nodeChanged()},y=function(B,r){return(r=f.getParentBlock(r,B))?r:B},C=function(B,r,k,x){var A=y(B.getBody(),x.container()),l=v.curry(m.isInlineTarget,B),D=z.readLocation(l,A,x);return D.bind(function(E){return k?E.fold(v.constant(q.some(z.inside(E))),q.none,v.constant(q.some(z.outside(E))),q.none):E.fold(q.none,v.constant(q.some(z.outside(E))),q.none,v.constant(q.some(z.inside(E))))}).map(e(B,
r)).getOrThunk(function(){var E=d.navigate(k,A,x),F=E.bind(function(H){return z.readLocation(l,A,H)});return D.isSome()&&F.isSome()?m.findRootInline(l,A,x).map(function(H){return g(H)?(n.deleteElement(B,k,h.fromDom(H)),!0):!1}).getOr(!1):F.bind(function(H){return E.map(function(I){k?t(B,r,x,I):t(B,r,I,x);return!0})}).getOr(!1)})};return{backspaceDelete:function(B,r,k){if(B.selection.isCollapsed()&&!1!==B.settings.inline_boundaries){var x=a.fromRangeStart(B.selection.getRng());return C(B,r,k,x)}return!1}}});
L("tinymce.core.delete.TableDeleteAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind".split(" "),function(v,q,p,h,b,c,d,a,f,n){var u=c.immutable("start","end"),z=c.immutable("rng","table","cells"),w=v.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),m=
function(A,l){return n.closest(a.fromDom(A),"td,th",l)},g=function(A,l){return n.ancestor(A,"table",l)},e=function(A){return!1===d.eq(A.start(),A.end())},t=function(A,l){return g(A.start(),l).bind(function(D){return g(A.end(),l).bind(function(E){return d.eq(D,E)?h.some(D):h.none()})})},y=function(A,l){return b.liftN([m(A.startContainer,l),m(A.endContainer,l)],u).filter(e)},C=function(A,l){return t(A,l).bind(function(D){var E=f.descendants(D,"td,th");return z(A,D,E)})},B=function(A,l){var D=p.curry(d.eq,
A);return y(l,D).map(function(E){return C(E,D)})},r=function(A,l){return q.findIndex(A,function(D){return d.eq(D,l)})},k=function(A){return b.liftN([r(A.cells(),A.rng().start()),r(A.cells(),A.rng().end())],function(l,D){return A.cells().slice(l,D+1)})},x=function(A){return k(A).bind(function(l){var D=A.cells();return l.length===D.length?w.removeTable(A.table()):w.emptyCells(l)})};return{getActionFromRange:function(A,l){return B(A,l).map(x)},getActionFromCells:function(A){return w.emptyCells(A)}}});
L("tinymce.core.selection.MultiRange",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.selection.RangeNodes"],function(v,q,p){var h=function(b){for(var c=[],d=0;d<b.rangeCount;d++)c.push(b.getRangeAt(d));return c};return{getRanges:h,getSelectedNodes:function(b){return v.bind(b,function(c){return(c=p.getSelectedNode(c))?[q.fromDom(c)]:[]})},hasMultipleRanges:function(b){return 1<h(b).length}}});L("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element",
"ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(v,q,p,h,b){var c=function(f){return v.filter(b.getSelectedNodes(f),h.isTableCell)},d=function(f){return p.descendants(f,"td[data-mce-selected],th[data-mce-selected]")},a=function(f,n){n=d(n);f=c(f);return 0<n.length?n:f};return{getCellsFromRanges:c,getCellsFromElement:d,getCellsFromElementOrRanges:a,getCellsFromEditor:function(f){return a(b.getRanges(f.selection.getSel()),q.fromDom(f.getBody()))}}});
L("tinymce.core.delete.TableDelete","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.TableDeleteAction tinymce.core.dom.ElementType tinymce.core.dom.Empty tinymce.core.dom.PaddingBr tinymce.core.dom.Parents tinymce.core.selection.TableCellSelection".split(" "),function(v,q,p,
h,b,c,d,a,f,n,u,z,w,m,g){var e=function(H,I){v.each(I,w.fillWithPaddingBr);H.selection.setCursorLocation(I[0].dom(),0);return!0},t=function(H,I){f.deleteElement(H,!1,I);return!0},y=function(H,I,G){return n.getActionFromRange(I,G).map(function(J){return J.fold(q.curry(t,H),q.curry(e,H))})},C=function(H,I,G,J){return r(I,J).fold(function(){return y(H,I,G)},function(M){return x(H,M)}).getOr(!1)},B=function(H,I){return v.find(m.parentsAndSelf(I,H),u.isTableCell)},r=function(H,I){return v.find(m.parentsAndSelf(I,
H),function(G){return"caption"===c.name(G)})},k=function(H,I,G,J,M){return d.navigate(G,H.getBody(),M).bind(function(P){return B(I,b.fromDom(P.getNode())).map(function(Q){return!1===h.eq(Q,J)})})},x=function(H,I){w.fillWithPaddingBr(I);H.selection.setCursorLocation(I.dom(),0);return p.some(!0)},A=function(H,I,G,J){return d.firstPositionIn(H.dom()).bind(function(M){return d.lastPositionIn(H.dom()).map(function(P){return I?G.isEqual(M)&&J.isEqual(P):G.isEqual(P)&&J.isEqual(M)})}).getOr(!0)},l=function(H,
I,G){return r(H,b.fromDom(G.getNode())).map(function(J){return!1===h.eq(J,I)})},D=function(H,I,G,J,M){return d.navigate(G,H.getBody(),M).bind(function(P){return A(J,G,M,P)?x(H,J):l(I,J,P)}).or(p.some(!0))},E=function(H,I,G,J){var M=a.fromRangeStart(H.selection.getRng());return B(G,J).bind(function(P){return z.isEmpty(P)?x(H,P):k(H,G,I,P,M)})},F=function(H,I,G){var J=b.fromDom(H.getBody());return r(J,G).fold(function(){return E(H,I,J,G)},function(M){var P=a.fromRangeStart(H.selection.getRng());return z.isEmpty(M)?
x(H,M):D(H,J,I,M,P)}).getOr(!1)};return{backspaceDelete:function(H,I){var G=b.fromDom(H.selection.getStart(!0));if(H.selection.isCollapsed())H=F(H,I,G);else{I=b.fromDom(H.getBody());var J=H.selection.getRng(),M=g.getCellsFromEditor(H);H=0!==M.length?e(H,M):C(H,I,J,G)}return H}}});L("tinymce.core.delete.DeleteCommands","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.DeleteUtils tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.TableDelete".split(" "),
function(v,q,p,h,b,c){return{deleteCommand:function(d){p.backspaceDelete(d,!1)||b.backspaceDelete(d,!1)||v.backspaceDelete(d,!1)||c.backspaceDelete(d)||q.backspaceDelete(d,!1)||(d.getDoc().execCommand("Delete",!1,null),h.paddEmptyBody(d))},forwardDeleteCommand:function(d){p.backspaceDelete(d,!0)||b.backspaceDelete(d,!0)||v.backspaceDelete(d,!0)||c.backspaceDelete(d)||q.backspaceDelete(d,!0)||d.getDoc().execCommand("ForwardDelete",!1,null)}}});L("tinymce.core.selection.RangeCompare",[],function(){return{isEq:function(v,
q){return v&&q&&v.startContainer===q.startContainer&&v.startOffset===q.startOffset&&v.endContainer===q.endContainer&&v.endOffset===q.endOffset}}});L("tinymce.core.selection.NormalizeRange","ephox.katamari.api.Option ephox.katamari.api.Struct tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.selection.RangeCompare".split(" "),function(v,q,p,h,b,c,d){var a=q.immutable("container","offset"),f=function(g,e,t){a:{for(;g&&g!==
e;){if(t(g)){e=g;break a}g=g.parentNode}e=null}return null!==e},n=function(g,e,t){return f(g,e,function(y){return y.nodeName===t})},u=function(g,e,t){for(g=new b(e,g.getParent(e.parentNode,g.isBlock)||g.getRoot());e=g[t?"prev":"next"]();)if(h.isBr(e))return!0},z=function(g,e){for(;e&&e!==g;){if(h.isContentEditableFalse(e))return!0;e=e.parentNode}return!1},w=function(g,e,t,y,C){var B,r=g.getRoot(),k=g.schema.getNonEmptyElements();var x=g.getParent(C.parentNode,g.isBlock)||r;if(y&&h.isBr(C)&&e&&g.isEmpty(x))return v.some(a(C.parentNode,
g.nodeIndex(C)));for(e=new b(C,x);C=e[y?"prev":"next"]();){(B="false"===g.getContentEditableParent(C))||(B=C,x=r,B=p.isCaretContainer(B)&&!1===f(B,x,c.isCaretNode));if(B)return v.none();if(h.isText(C)&&0<C.nodeValue.length)return!1===n(C,r,"A")?v.some(a(C,y?C.nodeValue.length:0)):v.none();if(g.isBlock(C)||k[C.nodeName.toLowerCase()])return v.none();B=C}return t&&B?v.some(a(B,0)):v.none()},m=function(g,e,t,y){var C=g.getRoot();var B=!1;var r=y[(t?"start":"end")+"Container"];var k=y[(t?"start":"end")+
"Offset"];var x=h.isElement(r)&&k===r.childNodes.length;y=g.schema.getNonEmptyElements();var A=t;if(p.isCaretContainer(r))return v.none();h.isElement(r)&&k>r.childNodes.length-1&&(A=!1);h.isDocument(r)&&(r=C,k=0);if(r===C){if(A&&(t=r.childNodes[0<k?k-1:0])&&(p.isCaretContainer(t)||y[t.nodeName]||t&&"TABLE"===t.nodeName))return v.none();if(r.hasChildNodes()){k=Math.min(!A&&0<k?k-1:k,r.childNodes.length-1);r=r.childNodes[k];k=h.isText(r)&&x?r.data.length:0;if(!e&&r===C.lastChild&&r&&"TABLE"===r.nodeName||
z(C,r)||p.isCaretContainer(r))return v.none();if(r.hasChildNodes()&&!1===(r&&"TABLE"===r.nodeName)){t=r;C=new b(r,C);do{if(h.isContentEditableFalse(t)||p.isCaretContainer(t)){B=!1;break}if(h.isText(t)&&0<t.nodeValue.length){k=A?0:t.nodeValue.length;r=t;B=!0;break}if(y[t.nodeName.toLowerCase()]&&(!t||!/^(TD|TH|CAPTION)$/.test(t.nodeName))){k=g.nodeIndex(t);r=t.parentNode;"IMG"!==t.nodeName&&"PRE"!==t.nodeName||A||k++;B=!0;break}}while(t=A?C.next():C.prev())}}}e&&(h.isText(r)&&0===k&&w(g,x,e,!0,r).each(function(l){r=
l.container();k=l.offset();B=!0}),h.isElement(r)&&((t=r.childNodes[k])||(t=r.childNodes[k-1]),!t||!h.isBr(t)||t.previousSibling&&"A"===t.previousSibling.nodeName||u(g,t,!1)||u(g,t,!0)||w(g,x,e,!0,t).each(function(l){r=l.container();k=l.offset();B=!0})));A&&!e&&h.isText(r)&&k===r.nodeValue.length&&w(g,x,e,!1,r).each(function(l){r=l.container();k=l.offset();B=!0});return B?v.some(a(r,k)):v.none()};return{normalize:function(g,e){var t=e.collapsed,y=e.cloneRange();m(g,t,!0,y).each(function(C){y.setStart(C.container(),
C.offset())});t||m(g,t,!1,y).each(function(C){y.setEnd(C.container(),C.offset())});t&&y.collapse(!0);return d.isEq(e,y)?v.none():v.some(y)}}});L("tinymce.core.newline.InsertBr","ephox.katamari.api.Fun ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element tinymce.core.caret.CaretFinder tinymce.core.caret.CaretPosition tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.keyboard.BoundaryLocation tinymce.core.keyboard.InlineUtils tinymce.core.selection.NormalizeRange".split(" "),function(v,
q,p,h,b,c,d,a,f,n){var u=function(r,k,x){k=new d(k,x);for(x=r.getNonEmptyElements();r=k.next();)if(x[r.nodeName.toLowerCase()]||0<r.length)return!0},z=function(r,k,x){var A=r.create("span",{},"&nbsp;");x.parentNode.insertBefore(A,x);k.scrollIntoView(A);r.remove(A)},w=function(r,k,x,A){r=r.createRng();A?(r.setStartBefore(x),r.setEndBefore(x)):(r.setStartAfter(x),r.setEndAfter(x));k.setRng(r)},m=function(r,k){var x=r.selection,A=r.dom,l=x.getRng(!0);n.normalize(A,l).each(function(J){l.setStart(J.startContainer,
J.startOffset);l.setEnd(J.endContainer,J.endOffset)});var D=l.startOffset;var E=l.startContainer;if(1===E.nodeType&&E.hasChildNodes()){var F=D>E.childNodes.length-1;E=E.childNodes[Math.min(D,E.childNodes.length-1)]||E;D=F&&3===E.nodeType?E.nodeValue.length:0}var H=(F=A.getParent(E,A.isBlock))?A.getParent(F.parentNode,A.isBlock):null,I=H?H.nodeName.toUpperCase():"";k=k&&k.ctrlKey;"LI"!==I||k||(F=H);if(E&&3===E.nodeType&&D>=E.nodeValue.length&&!u(r.schema,E,F)){D=A.create("br");l.insertNode(D);l.setStartAfter(D);
l.setEndAfter(D);var G=!0}D=A.create("br");l.insertNode(D);z(A,x,D);w(A,x,D,G);r.undoManager.add()},g=function(r,k){var x=p.fromTag("br");q.before(p.fromDom(k),x);r.undoManager.add()},e=function(r,k){t(r.getBody(),k)||q.after(p.fromDom(k),p.fromTag("br"));var x=p.fromTag("br");q.after(p.fromDom(k),x);z(r.dom,r.selection,x.dom());w(r.dom,r.selection,x.dom(),!1);r.undoManager.add()},t=function(r,k){return c.isBr(b.after(k).getNode())?!0:h.nextPosition(r,b.after(k)).map(function(x){return c.isBr(x.getNode())}).getOr(!1)},
y=function(r){return r&&"A"===r.nodeName&&"href"in r},C=function(r){return r.fold(v.constant(!1),y,y,v.constant(!1))},B=function(r,k){k.fold(v.noop,v.curry(g,r),v.curry(e,r),v.noop)};return{insert:function(r,k){var x=v.curry(f.isInlineTarget,r);var A=b.fromRangeStart(r.selection.getRng());x=a.readLocation(x,r.getBody(),A).filter(C);x.isSome()?x.each(v.curry(B,r)):m(r,k)}}});L("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(v,q){v=v.generate([{before:["element"]},
{on:["element","offset"]},{after:["element"]}]);return{before:v.before,on:v.on,after:v.after,cata:function(p,h,b,c){return p.fold(h,b,c)},getStart:function(p){return p.fold(q.identity,q.identity,q.identity)}}});L("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(v,q,p,h,b){var c=v.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start",
"soffset","finish","foffset"]}]);v=q.immutable("start","soffset","finish","foffset");var d=function(a){return a.match({domRange:function(f){return p.fromDom(f.startContainer)},relative:function(f,n){return b.getStart(f)},exact:function(f,n,u,z){return f}})};return{domRange:c.domRange,relative:c.relative,exact:c.exact,exactFromRange:function(a){return c.exact(a.start(),a.soffset(),a.finish(),a.foffset())},range:v,getWin:function(a){a=d(a);return h.defaultView(a)}}});L("tinymce.core.selection.SelectionBookmark",
"ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sand.api.PlatformDetection ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.node.Text ephox.sugar.api.search.Traverse ephox.sugar.api.selection.Selection global!document".split(" "),function(v,q,p,h,b,c,d,a,f,n){var u=p.detect().browser,z=function(k,x){x=c.isText(x)?d.get(x).length:a.children(x).length+1;return k>x?x:0>k?0:k},w=function(k){return f.range(k.start(),z(k.soffset(),k.start()),k.finish(),
z(k.foffset(),k.finish()))},m=function(k,x){return h.contains(k,x)||h.eq(k,x)},g=function(k){return function(x){return m(k,x.start())&&m(k,x.finish())}},e=function(k){return f.range(b.fromDom(k.startContainer),k.startOffset,b.fromDom(k.endContainer),k.endOffset)},t=function(k){k=k.getSelection();return(k&&0!==k.rangeCount?q.from(k.getRangeAt(0)):q.none()).map(e)},y=function(k){var x=a.defaultView(k);return t(x.dom()).filter(g(k))},C=function(k,x){return q.from(x).filter(g(k)).map(w)},B=function(k){var x=
n.createRange();x.setStart(k.start().dom(),k.soffset());x.setEnd(k.finish().dom(),k.foffset());return q.some(x)},r=function(k){return(k.bookmark?k.bookmark:q.none()).bind(v.curry(C,b.fromDom(k.getBody()))).bind(B)};return{store:function(k){var x=!0===k.inline||u.isIE()?y(b.fromDom(k.getBody())):q.none();k.bookmark=x.isSome()?x:k.bookmark},storeNative:function(k,x){var A=b.fromDom(k.getBody());x=(!0===k.inline||u.isIE()?q.from(x):q.none()).map(e).filter(g(A));k.bookmark=x.isSome()?x:k.bookmark},readRange:t,
restore:function(k){r(k).each(function(x){k.selection.setRng(x)})},getRng:r,getBookmark:y,validate:C}});L("tinymce.core.EditorCommands","tinymce.core.Env tinymce.core.InsertContent tinymce.core.delete.DeleteCommands tinymce.core.dom.NodeType tinymce.core.newline.InsertBr tinymce.core.selection.SelectionBookmark tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d){var a=d.each,f=d.extend,n=d.map,u=d.inArray,z=d.explode;return function(w){var m,g,e,t={state:{},exec:{},value:{}},y=w.settings,
C;w.on("PreInit",function(){m=w.dom;g=w.selection;y=w.settings;e=w.formatter});var B=function(A){var l;if(!w.quirks.isHidden()&&!w.removed){A=A.toLowerCase();if(l=t.state[A])return l(A);try{return w.getDoc().queryCommandState(A)}catch(D){}return!1}},r=function(A,l){l=l||"exec";a(A,function(D,E){a(E.toLowerCase().split(","),function(F){t[l][F]=D})})};f(this,{execCommand:function(A,l,D,E){var F=0;if(!w.removed){/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(A)||E&&E.skip_focus?
c.restore(w):w.focus();E=w.fire("BeforeExecCommand",{command:A,ui:l,value:D});if(E.isDefaultPrevented())return!1;var H=A.toLowerCase();if(E=t.exec[H])return E(H,l,D),w.fire("ExecCommand",{command:A,ui:l,value:D}),!0;a(w.plugins,function(I){if(I.execCommand&&I.execCommand(A,l,D))return w.fire("ExecCommand",{command:A,ui:l,value:D}),F=!0,!1});if(F)return F;if(w.theme&&w.theme.execCommand&&w.theme.execCommand(A,l,D))return w.fire("ExecCommand",{command:A,ui:l,value:D}),!0;try{F=w.getDoc().execCommand(A,
l,D)}catch(I){}return F?(w.fire("ExecCommand",{command:A,ui:l,value:D}),!0):!1}},queryCommandState:B,queryCommandValue:function(A){var l;if(!w.quirks.isHidden()&&!w.removed){A=A.toLowerCase();if(l=t.value[A])return l(A);try{return w.getDoc().queryCommandValue(A)}catch(D){}}},queryCommandSupported:function(A){A=A.toLowerCase();if(t.exec[A])return!0;try{return w.getDoc().queryCommandSupported(A)}catch(l){}return!1},addCommands:r,addCommand:function(A,l,D){A=A.toLowerCase();t.exec[A]=function(E,F,H,
I){return l.call(D||w,F,H,I)}},addQueryStateHandler:function(A,l,D){A=A.toLowerCase();t.state[A]=function(){return l.call(D||w)}},addQueryValueHandler:function(A,l,D){A=A.toLowerCase();t.value[A]=function(){return l.call(D||w)}},hasCustomCommand:function(A){A=A.toLowerCase();return!!t.exec[A]}});var k=function(A,l,D){void 0===l&&(l=!1);void 0===D&&(D=null);return w.getDoc().execCommand(A,l,D)},x=function(A,l){e.toggle(A,l?{value:l}:void 0);w.nodeChanged()};r({"mceResetDesignMode,mceBeginUndoLevel":function(){},
"mceEndUndoLevel,mceAddUndoLevel":function(){w.undoManager.add()},"Cut,Copy,Paste":function(A){var l=w.getDoc();try{k(A)}catch(E){var D=!0}"paste"!==A||l.queryCommandEnabled(A)||(D=!0);if(D||!l.queryCommandSupported(A))A=w.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),v.mac&&(A=A.replace(/Ctrl\+/g,"\u2318+")),w.notificationManager.open({text:A,type:"error"})},unlink:function(){if(g.isCollapsed()){var A=w.dom.getParent(w.selection.getStart(),
"a");A&&w.dom.remove(A,!0)}else e.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(A){var l=A.substring(7);"full"==l&&(l="justify");a(["left","center","right","justify"],function(D){l!=D&&e.remove("align"+D)});"none"!=l&&x("align"+l)},"InsertUnorderedList,InsertOrderedList":function(A){k(A);if(A=m.getParent(g.getNode(),"ol,ul")){var l=A.parentNode;/^(H[1-6]|P|ADDRESS|PRE)$/.test(l.nodeName)&&(C=g.getBookmark(void 0),m.split(l,A),g.moveToBookmark(C))}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(A){x(A)},
"ForeColor,HiliteColor,FontName":function(A,l,D){x(A,D)},FontSize:function(A,l,D){if(1<=D&&7>=D){var E=z(y.font_size_style_values);D=(l=z(y.font_size_classes))?l[D-1]||D:E[D-1]||D}x(A,D)},RemoveFormat:function(A){e.remove(A)},mceBlockQuote:function(){x("blockquote")},FormatBlock:function(A,l,D){return x(D||"p")},mceCleanup:function(){var A=g.getBookmark();w.setContent(w.getContent({cleanup:!0}),{cleanup:!0});g.moveToBookmark(A)},mceRemoveNode:function(A,l,D){A=D||g.getNode();A!=w.getBody()&&(C=g.getBookmark(void 0),
w.dom.remove(A,!0),g.moveToBookmark(C))},mceSelectNodeDepth:function(A,l,D){var E=0;m.getParent(g.getNode(),function(F){if(1==F.nodeType&&E++==D)return g.select(F),!1},w.getBody())},mceSelectNode:function(A,l,D){g.select(D)},mceInsertContent:function(A,l,D){q.insertAtCaret(w,D)},mceInsertRawHTML:function(A,l,D){g.setContent("tiny_mce_marker");w.setContent(w.getContent().replace(/tiny_mce_marker/g,function(){return D}))},mceToggleFormat:function(A,l,D){x(D)},mceSetContent:function(A,l,D){w.setContent(D)},
"Indent,Outdent":function(A){var l;var D=y.indentation;var E=/[a-z%]+$/i.exec(D);D=parseInt(D,10);B("InsertUnorderedList")||B("InsertOrderedList")?k(A):(y.forced_root_block||m.getParent(g.getNode(),m.isBlock)||e.apply("div"),a(g.getSelectedBlocks(),function(F){if("false"!==m.getContentEditable(F)&&"LI"!==F.nodeName){var H=w.getParam("indent_use_margin",!1)?"margin":"padding";H="TABLE"===F.nodeName?"margin":H;H+="rtl"==m.getStyle(F,"direction",!0)?"Right":"Left";"outdent"==A?(l=Math.max(0,parseInt(F.style[H]||
0,10)-D),m.setStyle(F,H,l?l+E:"")):(l=parseInt(F.style[H]||0,10)+D+E,m.setStyle(F,H,l))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){w.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){w.hasVisual=!w.hasVisual;w.addVisual()},mceReplaceContent:function(A,l,D){w.execCommand("mceInsertContent",!1,D.replace(/\{\$selection\}/g,g.getContent({format:"text"})))},mceInsertLink:function(A,l,D){"string"==typeof D&&(D={href:D});A=m.getParent(g.getNode(),"a");D.href=D.href.replace(" ",
"%20");A&&D.href||e.remove("link");D.href&&e.apply("link",D,A)},selectAll:function(){var A=m.getParent(g.getStart(),h.isContentEditableTrue);if(A){var l=m.createRng();l.selectNodeContents(A);g.setRng(l)}},"delete":function(){p.deleteCommand(w)},forwardDelete:function(){p.forwardDeleteCommand(w)},mceNewDocument:function(){w.setContent("")},InsertLineBreak:function(A,l,D){b.insert(w,D);return!0}});r({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(A){var l="align"+A.substring(7);A=g.isCollapsed()?
[m.getParent(g.getNode(),m.isBlock)]:g.getSelectedBlocks();A=n(A,function(D){return!!e.matchNode(D,l)});return-1!==u(A,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(A){return e.match(A)},mceBlockQuote:function(){return e.match("blockquote")},Outdent:function(){var A;return y.inline_styles&&((A=m.getParent(g.getStart(),m.isBlock))&&0<parseInt(A.style.paddingLeft,10)||(A=m.getParent(g.getEnd(),m.isBlock))&&0<parseInt(A.style.paddingLeft,10))?!0:B("InsertUnorderedList")||
B("InsertOrderedList")||!y.inline_styles&&!!m.getParent(g.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(A){var l=m.getParent(g.getNode(),"ul,ol");return l&&("insertunorderedlist"===A&&"UL"===l.tagName||"insertorderedlist"===A&&"OL"===l.tagName)}},"state");r({"FontSize,FontName":function(A){var l=0,D;if(D=m.getParent(g.getNode(),"span"))l="fontsize"==A?D.style.fontSize:D.style.fontFamily.replace(/, /g,",").replace(/['"]/g,"").toLowerCase();return l}},"value");r({Undo:function(){w.undoManager.undo()},
Redo:function(){w.undoManager.redo()}})}});L("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(v){var q=v.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),p=function(h){var b=
this,c={},d=function(){return!1},a=function(){return!0};h=h||{};var f=h.scope||b;var n=h.toggleEvent||d;var u=function(w,m,g,e){var t;!1===m&&(m=d);if(m){m={func:m};e&&v.extend(m,e);var y=w.toLowerCase().split(" ");for(t=y.length;t--;)w=y[t],e=c[w],e||(e=c[w]=[],n(w,!0)),g?e.unshift(m):e.push(m)}return b},z=function(w,m){var g,e,t;if(w){var y=w.toLowerCase().split(" ");for(g=y.length;g--;){w=y[g];var C=c[w];if(!w){for(e in c)n(e,!1),delete c[e];break}if(C){if(m)for(t=C.length;t--;)C[t].func===m&&
(C=C.slice(0,t).concat(C.slice(t+1)),c[w]=C);else C.length=0;C.length||(n(w,!1),delete c[w])}}}else{for(w in c)n(w,!1);c={}}return b};b.fire=function(w,m){var g,e;w=w.toLowerCase();m=m||{};m.type=w;m.target||(m.target=f);m.preventDefault||(m.preventDefault=function(){m.isDefaultPrevented=a},m.stopPropagation=function(){m.isPropagationStopped=a},m.stopImmediatePropagation=function(){m.isImmediatePropagationStopped=a},m.isDefaultPrevented=d,m.isPropagationStopped=d,m.isImmediatePropagationStopped=d);
h.beforeFire&&h.beforeFire(m);if(g=c[w]){var t=0;for(e=g.length;t<e;t++){var y=g[t];y.once&&z(w,y.func);if(m.isImmediatePropagationStopped()){m.stopPropagation();break}if(!1===y.func.call(f,m)){m.preventDefault();break}}}return m};b.on=u;b.off=z;b.once=function(w,m,g){return u(w,m,g,{once:!0})};b.has=function(w){w=w.toLowerCase();return!(!c[w]||0===c[w].length)}};p.isNative=function(h){return!!q[h.toLowerCase()]};return p});L("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(v){var q=
function(p){p._eventDispatcher||(p._eventDispatcher=new v({scope:p,toggleEvent:function(h,b){v.isNative(h)&&p.toggleNativeEvent&&p.toggleNativeEvent(h,b)}}));return p._eventDispatcher};return{fire:function(p,h,b){if(this.removed&&"remove"!==p)return h;h=q(this).fire(p,h,b);if(!1!==b&&this.parent)for(b=this.parent();b&&!h.isPropagationStopped();)b.fire(p,h,!1),b=b.parent();return h},on:function(p,h,b){return q(this).on(p,h,b)},off:function(p,h){return q(this).off(p,h)},once:function(p,h){return q(this).once(p,
h)},hasEventListeners:function(p){return q(this).has(p)}}});L("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(v,q,p){var h=q.DOM,b,c=function(a,f){return"selectionchange"==f?a.getDoc():!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(f)?a.getDoc().documentElement:a.settings.event_root?(a.eventRoot||(a.eventRoot=h.select(a.settings.event_root)[0]),a.eventRoot):a.getBody()},d=function(a,f){a.delegates||
(a.delegates={});if(!a.delegates[f]&&!a.removed){var n=c(a,f);if(a.settings.event_root){if(b||(b={},a.editorManager.on("removeEditor",function(){var z;if(!a.editorManager.activeEditor&&b){for(z in b)a.dom.unbind(c(a,z));b=null}})),!b[f]){var u=function(z){for(var w=z.target,m=a.editorManager.get(),g=m.length;g--;){var e=m[g].getBody();if(e===w||h.isChildOf(w,e))e=m[g],e.hidden||e.readonly||m[g].fire(f,z)}};b[f]=u;h.bind(n,f,u)}}else u=function(z){a.hidden||a.readonly||a.fire(f,z)},h.bind(n,f,u),a.delegates[f]=
u}};q={bindPendingEventDelegates:function(){var a=this;p.each(a._pendingNativeEvents,function(f){d(a,f)})},toggleNativeEvent:function(a,f){"focus"!=a&&"blur"!=a&&(f?this.initialized?d(this,a):this._pendingNativeEvents?this._pendingNativeEvents.push(a):this._pendingNativeEvents=[a]:this.initialized&&(this.dom.unbind(c(this,a),a,this.delegates[a]),delete this.delegates[a]))},unbindAllNativeEvents:function(){var a;if(this.delegates){for(a in this.delegates)this.dom.unbind(c(this,a),a,this.delegates[a]);
delete this.delegates}this.inline||(this.getBody().onload=null,this.dom.unbind(this.getWin()),this.dom.unbind(this.getDoc()));this.dom.unbind(this.getBody());this.dom.unbind(this.getContainer())}};return q=p.extend({},v,q)});L("tinymce.core.Mode",[],function(){var v=function(h,b,c){try{h.getDoc().execCommand(b,!1,c)}catch(d){}},q=function(h){var b=h.getBody();var c=function(d){0<h.dom.getParents(d.target,"a").length&&d.preventDefault()};h.dom.bind(b,"click",c);return{unbind:function(){h.dom.unbind(b,
"click",c)}}},p=function(h,b){h._clickBlocker&&(h._clickBlocker.unbind(),h._clickBlocker=null);b?(h._clickBlocker=q(h),h.selection.controlSelection.hideResizeRect(),h.readonly=!0,h.getBody().contentEditable=!1):(h.readonly=!1,h.getBody().contentEditable=!0,v(h,"StyleWithCSS",!1),v(h,"enableInlineTableEditing",!1),v(h,"enableObjectResizing",!1),h.focus(),h.nodeChanged())};return{setMode:function(h,b){if(b!=(h.readonly?"readonly":"design")){if(h.initialized)p(h,"readonly"==b);else h.on("init",function(){p(h,
"readonly"==b)});h.fire("SwitchMode",{mode:b})}}}});L("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(v,q){var p=v.each,h=v.explode,b={f9:120,f10:121,f11:122},c=v.makeMap("alt,ctrl,shift,meta,access");return function(d){var a={},f=[],n=function(m){var g,e={};p(h(m,"+"),function(t){t in c?e[t]=!0:/^[0-9]{2,}$/.test(t)?e.keyCode=parseInt(t,10):(e.charCode=t.charCodeAt(0),e.keyCode=b[t]||t.toUpperCase().charCodeAt(0))});m=[e.keyCode];for(g in c)e[g]?m.push(g):e[g]=!1;
e.id=m.join(",");e.access&&(e.alt=!0,q.mac?e.ctrl=!0:e.shift=!0);e.meta&&(q.mac?e.meta=!0:(e.ctrl=!0,e.meta=!1));return e},u=function(m,g,e,t){m=v.map(h(m,">"),n);m[m.length-1]=v.extend(m[m.length-1],{func:e,scope:t||d});return v.extend(m[0],{desc:d.translate(g),subpatterns:m.slice(1)})},z=function(m,g){return g&&g.ctrl==m.ctrlKey&&g.meta==m.metaKey&&g.alt==m.altKey&&g.shift==m.shiftKey?m.keyCode==g.keyCode||m.charCode&&m.charCode==g.charCode?(m.preventDefault(),!0):!1:!1},w=function(m){return m.func?
m.func.call(m.scope):null};d.on("keyup keypress keydown",function(m){(m.altKey||m.ctrlKey||m.metaKey||"keydown"===m.type&&112<=m.keyCode&&123>=m.keyCode)&&!m.isDefaultPrevented()&&(p(a,function(g){if(z(m,g))return f=g.subpatterns.slice(0),"keydown"==m.type&&w(g),!0}),z(m,f[0])&&(1===f.length&&"keydown"==m.type&&w(f[0]),f.shift()))});this.add=function(m,g,e,t){var y=e;"string"===typeof e?e=function(){d.execCommand(y,!1,null)}:v.isArray(y)&&(e=function(){d.execCommand(y[0],y[1],y[2])});p(h(v.trim(m.toLowerCase())),
function(C){C=u(C,g,e,t);a[C.id]=C});return!0};this.remove=function(m){m=u(m);return a[m.id]?(delete a[m.id],!0):!1}}});L("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(v,q,p){var h=p.each,b=function(d,a,f){var n=1,u;var z=d.getShortEndedElements();d=/<([!?\/])?([A-Za-z0-9\-_:\.]+)((?:\s+[^"'>]+(?:(?:"[^"]*")|(?:'[^']*')|[^>]*))*|\/|\s+)>/g;for(d.lastIndex=f;u=d.exec(a);){f=d.lastIndex;if("/"===u[1])n--;else if(!u[1]){if(u[2]in
z)continue;n++}if(0===n)break}return f},c=function(d,a){var f=this,n=function(){};d=d||{};f.schema=a=a||new v;!1!==d.fix_self_closing&&(d.fix_self_closing=!0);h("comment cdata text start end pi doctype".split(" "),function(u){u&&(f[u]=d[u]||n)});f.parse=function(u){var z=this,w,m=0,g,e=[],t,y,C,B,r,k,x=0,A=q.decode,l=p.makeMap("src,href,data,background,formaction,poster"),D=/((java|vb)script|mhtml):/i,E=/^data:/i,F=function(pa){var ya,ha;for(ya=e.length;ya--&&e[ya].name!==pa;);if(0<=ya){for(ha=e.length-
1;ha>=ya;ha--)pa=e[ha],pa.valid&&z.end(pa.name);e.length=ya}},H=function(pa,ya,ha,ea,na){pa=/[\s\u0000-\u001F]+/g;ya=ya.toLowerCase();ha=ya in P?ya:A(ha||ea||na||"");if(ea=Q&&!C)ea=ya,ea=!1===(0===ea.indexOf("data-")||0===ea.indexOf("aria-"));if(ea){ea=O[ya];if(!ea&&U){for(na=U.length;na--&&(ea=U[na],!ea.pattern.test(ya)););-1===na&&(ea=null)}if(!ea||ea.validValues&&!(ha in ea.validValues))return}if(l[ya]&&!d.allow_script_urls){pa=ha.replace(pa,"");try{pa=decodeURIComponent(pa)}catch(ua){pa=unescape(pa)}if(D.test(pa)||
!d.allow_html_data_urls&&E.test(pa)&&!/^data:image\//i.test(pa))return}C&&(ya in l||0===ya.indexOf("on"))||(X.map[ya]=ha,X.push({name:ya,value:ha}))};var I=RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");var G=/([\w:\-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g;
var J=a.getShortEndedElements();var M=d.self_closing_elements||a.getSelfClosingElements();var P=a.getBoolAttrs();var Q=d.validate;var W=d.remove_internals;var V=d.fix_self_closing;var ba=a.getSpecialElements();for(k=u+">";w=I.exec(k);){m<w.index&&z.text(A(u.substr(m,w.index-m)));if(g=w[6])g=g.toLowerCase(),":"===g.charAt(0)&&(g=g.substr(1)),F(g);else if(g=w[7]){if(w.index+w[0].length>u.length){z.text(A(u.substr(w.index)));m=w.index+w[0].length;continue}g=g.toLowerCase();":"===g.charAt(0)&&(g=g.substr(1));
m=g in J;V&&M[g]&&0<e.length&&e[e.length-1].name===g&&F(g);if(!Q||(B=a.getElementRule(g))){var N=!0;if(Q){var O=B.attributes;var U=B.attributePatterns}if(r=w[8]){(C=-1!==r.indexOf("data-mce-type"))&&W&&(N=!1);var X=[];X.map={};r.replace(G,H)}else X=[],X.map={};if(Q&&!C){var S=B.attributesRequired;var aa=B.attributesDefault;var fa=B.attributesForced;(t=B.removeEmptyAttrs)&&!X.length&&(N=!1);if(fa)for(t=fa.length;t--;){var ia=fa[t];var ta=ia.name;ia=ia.value;"{$uid}"===ia&&(ia="mce_"+x++);X.map[ta]=
ia;X.push({name:ta,value:ia})}if(aa)for(t=aa.length;t--;)ia=aa[t],ta=ia.name,ta in X.map||(ia=ia.value,"{$uid}"===ia&&(ia="mce_"+x++),X.map[ta]=ia,X.push({name:ta,value:ia}));if(S){for(t=S.length;t--&&!(S[t]in X.map););-1===t&&(N=!1)}if(ia=X.map["data-mce-bogus"]){if("all"===ia){m=b(a,u,I.lastIndex);I.lastIndex=m;continue}N=!1}}N&&z.start(g,X,m)}else N=!1;if(S=ba[g]){S.lastIndex=m=w.index+w[0].length;(w=S.exec(u))?(N&&(y=u.substr(m,w.index-m)),m=w.index+w[0].length):(y=u.substr(m),m=u.length);N&&
(0<y.length&&z.text(y,!0),z.end(g));I.lastIndex=m;continue}m||(r&&r.indexOf("/")==r.length-1?N&&z.end(g):e.push({name:g,valid:N}))}else(g=w[1])?(">"===g.charAt(0)&&(g=" "+g),d.allow_conditional_comments||"[if"!==g.substr(0,3).toLowerCase()||(g=" "+g),z.comment(g)):(g=w[2])?z.cdata(g.replace(/\x3c!--|--\x3e/g,"")):(g=w[3])?z.doctype(g):(g=w[4])&&z.pi(g,w[5]);m=w.index+w[0].length}m<u.length&&z.text(A(u.substr(m)));for(t=e.length-1;0<=t;t--)g=e[t],g.valid&&z.end(g.name)}};c.findEndTag=b;return c});
L("tinymce.core.dom.TrimHtml",["tinymce.core.html.SaxParser","tinymce.core.text.Zwsp"],function(v,q){var p=function(h,b){var c=b;b=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var d,a,f=h.schema;h=h.getTempAttrs();h=new RegExp(["\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi");c=c.replace(h,"");for(a=f.getShortEndedElements();d=b.exec(c);){h=b.lastIndex;var n=d[0].length;d=a[d[1]]?h:v.findEndTag(f,c,h);c=c.substring(0,h-n)+c.substring(d);b.lastIndex=h-n}return c};return{trimExternal:function(h,b){return q.trim(p(h,
b))},trimInternal:p}});L("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(v){return{any:function(q){return v.first(q).isSome()},ancestor:function(q,p,h){return v.ancestor(q,p,h).isSome()},closest:function(q,p,h){return v.closest(q,p,h).isSome()},sibling:function(q,p){return v.sibling(q,p).isSome()},child:function(q,p){return v.child(q,p).isSome()},descendant:function(q,p){return v.descendant(q,p).isSome()}}});L("ephox.sugar.api.dom.Focus","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.search.PredicateExists ephox.sugar.api.search.Traverse global!document".split(" "),
function(v,q,p,h,b,c,d){var a=function(n){n.dom().focus()},f=function(n){n=void 0!==n?n.dom():d;return q.from(n.activeElement).map(h.fromDom)};return{hasFocus:function(n){var u=c.owner(n).dom();return n.dom()===u.activeElement},focus:a,blur:function(n){n.dom().blur()},active:f,search:function(n){return f(c.owner(n)).filter(function(u){return n.dom().contains(u.dom())})},focusInside:function(n){var u=c.owner(n);f(u).filter(function(z){return b.closest(z,v.curry(p.eq,n))}).fold(function(){a(n)},v.noop)}}});
L("tinymce.core.focus.EditorFocus","ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Focus ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.caret.CaretFinder tinymce.core.dom.ElementType tinymce.core.selection.RangeNodes tinymce.core.selection.SelectionBookmark".split(" "),function(v,q,p,h,b,c,d,a,f){var n=function(e,t){return e.dom.getParent(t,function(y){return"true"===e.dom.getContentEditable(y)})},u=function(e,t){return(t.collapsed?v.from(a.getNode(t.startContainer,
t.startOffset)).map(h.fromDom):v.none()).bind(function(y){return d.isTableSection(y)?v.some(y):!1===q.contains(e,y)?v.some(e):v.none()})},z=function(e,t){u(h.fromDom(e.getBody()),t).bind(function(y){return c.firstPositionIn(y.dom())}).fold(function(){e.selection.normalize()},function(y){e.selection.setRng(y.toRange())})},w=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},m=function(e){if(e.inline){e=e.getBody();var t;if(t=e)e=h.fromDom(e),t=p.hasFocus(e)||p.search(e).isSome();
e=t}else e=e.iframeElement&&p.hasFocus(h.fromDom(e.iframeElement));return e},g=function(e){var t=e.selection,y=e.settings.content_editable,C=e.getBody(),B=t.getRng();e.quirks.refreshContentEditable();t=n(e,t.getNode());if(e.$.contains(C,t))w(t),z(e,B);else if(void 0!==e.bookmark&&!1===m(e)&&f.getRng(e).each(function(r){e.selection.setRng(r);B=r}),y||(b.opera||w(C),e.getWin().focus()),b.gecko||y)w(C),z(e,B);e.editorManager.setActive(e)};return{focus:function(e,t){e.removed||(t?e.editorManager.setActive(e):
g(e))},hasFocus:m}});L("tinymce.core.EditorView","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.properties.Css ephox.sugar.api.search.Traverse".split(" "),function(v,q,p,h,b,c){var d=function(w,m){return m.dom()[w]},a=function(w,m){return parseInt(b.get(m,w),10)},f=v.curry(d,"clientWidth"),n=v.curry(d,"clientHeight"),u=v.curry(a,"margin-top"),z=v.curry(a,"margin-left");return{isXYInContentArea:function(w,m,g){var e=h.fromDom(w.getBody());
e=w.inline?e:c.documentElement(e);var t=w.inline,y=e.dom().getBoundingClientRect();w=t?y.left+e.dom().clientLeft+z(e):0;t=t?y.top+e.dom().clientTop+u(e):0;m-=w;g-=t;w=f(e);e=n(e);return 0<=m&&0<=g&&m<=w&&g<=e},isEditorAttachedToDom:function(w){w=w.inline?w.getBody():w.getContentAreaContainer();return q.from(w).map(h.fromDom).map(function(m){return p.contains(c.owner(m),m)}).getOr(!1)}}});L("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var v=function(){throw Error("Theme did not provide a NotificationManager implementation.");
};return{open:v,close:v,reposition:v,getArgs:v}}});L("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(v,q,p,h,b){return function(c){var d=[],a=function(){var z=c.theme;return z&&z.getNotificationManagerImpl?z.getNotificationManagerImpl():h()},f=function(){0<d.length&&a().reposition(d)},n=function(z){v.findIndex(d,function(w){return w===z}).each(function(w){d.splice(w,
1)})},u=function(z){if(!c.removed&&p.isEditorAttachedToDom(c))return v.find(d,function(w){w=a().getArgs(w);return w.type===z.type&&w.text===z.text&&!w.progressBar&&!w.timeout&&!z.progressBar&&!z.timeout}).getOrThunk(function(){c.editorManager.setActive(c);var w=a().open(z,function(){n(w);f()});d.push(w);f();return w})};(function(z){z.on("SkinLoaded",function(){var w=z.settings.service_message;w&&u({text:w,type:"warning",timeout:0,icon:""})});z.on("ResizeEditor ResizeWindow",function(){b.requestAnimationFrame(f)});
z.on("remove",function(){v.each(d,function(w){a().close(w)})})})(c);return{open:u,close:function(){q.from(d[0]).each(function(z){a().close(z);n(z);f()})},getNotifications:function(){return d}}}});L("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var v=function(){throw Error("Theme did not provide a WindowManager implementation.");};return{open:v,alert:v,confirm:v,close:v,getParams:v,setParams:v}}});L("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option",
"tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(v,q,p,h){return function(b){var c=[],d=function(){var z=b.theme;return z&&z.getWindowManagerImpl?z.getWindowManagerImpl():h()},a=function(z,w){return function(){return w?w.apply(z,arguments):void 0}},f=function(z){b.fire("OpenWindow",{win:z})},n=function(z){v.findIndex(c,function(w){return w===z}).each(function(w){c.splice(w,1);b.fire("CloseWindow",{win:z});0===c.length&&b.focus()})},u=function(){return q.from(c[c.length-
1])};b.on("remove",function(){v.each(c.slice(0),function(z){d().close(z)})});return{windows:c,open:function(z,w){b.editorManager.setActive(b);p.store(b);z=d().open(z,w,n);c.push(z);f(z);return z},alert:function(z,w,m){z=d().alert(z,a(m?m:this,w),n);c.push(z);f(z)},confirm:function(z,w,m){z=d().confirm(z,a(m?m:this,w),n);c.push(z);f(z)},close:function(){u().each(function(z){d().close(z);n(z)})},getParams:function(){return u().map(d().getParams).getOr(null)},setParams:function(z){u().each(function(w){d().setParams(w,
z)})},getWindows:function(){return c}}}});L("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(v,q){var p=q.PluginManager,h=function(b,c){if(b._skinLoaded)b.notificationManager.open({type:"error",text:c});else b.on("SkinLoaded",function(){b.notificationManager.open({type:"error",text:c})})};return{pluginLoadError:function(b,c){a:{for(d in p.urls)if(p.urls[d]+"/plugin"+b.suffix+".js"===c)break a;var d=null}h(b,d?"Failed to load plugin: "+d+" from url "+c:"Failed to load plugin url: "+
c)},uploadError:function(b,c){h(b,"Failed to upload image: "+c)},displayError:h,initError:function(b){var c=v.console;c&&!v.test&&(c.error?c.error.apply(c,arguments):c.log.apply(c,arguments))}}});L("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(v){return v.PluginManager});L("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(v){return v.ThemeManager});L("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(v){return function(){return new (v.getOrDie("XMLHttpRequest"))}});
L("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(v,q,p,h,b){return function(c,d){var a={},f=function(e,t,y,C){var B=new v;B.open("POST",d.url);B.withCredentials=d.credentials;B.upload.onprogress=function(k){C(k.loaded/k.total*100)};B.onerror=function(){y("Image upload failed due to a XHR Transport error. Code: "+B.status)};B.onload=function(){var k;if(200>B.status||300<=B.status)y("HTTP Error: "+
B.status);else if((k=JSON.parse(B.responseText))&&"string"==typeof k.location){var x=d.basePath;k=k.location;x=x?x.replace(/\/$/,"")+"/"+k.replace(/^\//,""):k;t(x)}else y("Invalid JSON: "+B.responseText)};var r=new q.FormData;r.append("file",e.blob(),e.filename());B.send(r)},n=function(){return new h(function(e){e([])})},u=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},z=function(e,t){b.each(a[e],function(y){y(t)});delete a[e]},w=function(e,t,y){c.markPending(e.blobUri());return new h(function(C){var B,
r=function(){};try{var k=function(x){0>x||100<x||(B||(B=y()),B.progressBar.value(x))};t(e,function(x){B&&(B.close(),k=r);c.markUploaded(e.blobUri(),x);z(e.blobUri(),{url:x,blobInfo:e,status:!0});C({url:x,blobInfo:e,status:!0})},function(x){B&&(B.close(),k=r);c.removeFailed(e.blobUri());z(e.blobUri(),u(e,x));C(u(e,x))},k)}catch(x){C(u(e,x.message))}})},m=function(e){var t=e.blobUri();return new h(function(y){a[t]=a[t]||[];a[t].push(y)})},g=function(e,t){e=b.grep(e,function(y){return!c.isUploaded(y.blobUri())});
return h.all(b.map(e,function(y){return c.isPending(y.blobUri())?m(y):w(y,d.handler,t)}))};d=b.extend({credentials:!1,handler:f},d);return{upload:function(e,t){return d.url||d.handler!==f?g(e,t):n()}}}});L("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(v){return function(q,p){return new (v.getOrDie("Blob"))(q,p)}});L("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(v){return function(){return new (v.getOrDie("FileReader"))}});L("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],
function(v){return function(q){return new (v.getOrDie("Uint8Array"))(q)}});L("ephox.sand.api.Window",["ephox.sand.util.Global"],function(v){return{atob:function(q){return v.getOrDie("atob")(q)},requestAnimationFrame:function(q){v.getOrDie("requestAnimationFrame")(q)}}});L("tinymce.core.file.Conversions","ephox.sand.api.Blob ephox.sand.api.FileReader ephox.sand.api.Uint8Array ephox.sand.api.Window ephox.sand.api.XMLHttpRequest tinymce.core.util.Promise".split(" "),function(v,q,p,h,b,c){var d=function(n){return new c(function(u,
z){var w=function(){z("Cannot convert "+n+" to Blob. Resource might not exist or is inaccessible.")};try{var m=new b;m.open("GET",n,!0);m.responseType="blob";m.onload=function(){200==this.status?u(this.response):w()};m.onerror=w;m.send()}catch(g){w()}})},a=function(n){var u,z;n=decodeURIComponent(n).split(",");(z=/data:([^;]+)/.exec(n[0]))&&(u=z[1]);return{type:u,data:n[1]}},f=function(n){return new c(function(u){var z;n=a(n);try{var w=h.atob(n.data)}catch(g){u(new v([]));return}var m=new p(w.length);
for(z=0;z<m.length;z++)m[z]=w.charCodeAt(z);u(new v([m],{type:n.type}))})};return{uriToBlob:function(n){return 0===n.indexOf("blob:")?d(n):0===n.indexOf("data:")?f(n):null},blobToDataUri:function(n){return new c(function(u){var z=new q;z.onloadend=function(){u(z.result)};z.readAsDataURL(n)})},parseDataUri:a}});L("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(v,q,p,h,b){var c=
0,d=function(a,f,n,u){var z;if(0===f.src.indexOf("blob:"))(z=a.getByUri(f.src))?n({image:f,blobInfo:z}):h.uriToBlob(f.src).then(function(m){h.blobToDataUri(m).then(function(g){w=h.parseDataUri(g).data;z=a.create("blobid"+c++,m,w);a.add(z);n({image:f,blobInfo:z})})},function(m){u(m)});else{var w=h.parseDataUri(f.src).data;(z=a.findFirst(function(m){return m.base64()===w}))?n({image:f,blobInfo:z}):h.uriToBlob(f.src).then(function(m){z=a.create("blobid"+c++,m,w);a.add(z);n({image:f,blobInfo:z})},function(m){u(m)})}};
return function(a,f){var n={};return{findAll:function(u,z){z||(z=p.constant(!0));u=q.filter(u?u.getElementsByTagName("img"):[],function(w){var m=w.src;return!b.fileApi||w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!m||m==b.transparentSrc?!1:0===m.indexOf("blob:")?!a.isUploaded(m):0===m.indexOf("data:")?z(w):!1});u=q.map(u,function(w){if(n[w.src])return new v(function(g){n[w.src].then(function(e){if("string"===typeof e)return e;g({image:w,blobInfo:e.blobInfo})})});var m=
(new v(function(g,e){d(f,w,g,e)})).then(function(g){delete n[g.image.src];return g})["catch"](function(g){delete n[w.src];return g});return n[w.src]=m});return v.all(u)}}}});L("tinymce.core.util.Uuid",[],function(){var v=0,q=function(){var p=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+p()+p()+p()};return{uuid:function(p){return p+v++ +q()}}});L("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun",
"tinymce.core.util.Uuid"],function(v,q,p,h){return function(){var b=[],c=p.constant,d=function(n){if(!n.blob||!n.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";var u=n.id||h.uuid("blobid");var z=n.name||u;u=c(u);var w=c(z);z+=".";var m={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[n.blob.type.toLowerCase()]||"dat";return{id:u,name:w,filename:c(z+m),blob:c(n.blob),base64:c(n.base64),blobUri:c(n.blobUri||v.createObjectURL(n.blob)),
uri:c(n.uri)}},a=function(n){return f(function(u){return u.id()===n})},f=function(n){return q.filter(b,n)[0]};return{create:function(n,u,z,w){return"object"===typeof n?d(n):d({id:n,name:w,blob:u,base64:z})},add:function(n){a(n.id())||b.push(n)},get:a,getByUri:function(n){return f(function(u){return u.blobUri()==n})},findFirst:f,removeByUri:function(n){b=q.filter(b,function(u){return u.blobUri()===n?(v.revokeObjectURL(u.blobUri()),!1):!0})},destroy:function(){q.each(b,function(n){v.revokeObjectURL(n.blobUri())});
b=[]}}}});L("tinymce.core.file.UploadStatus",[],function(){return function(){var v={},q=function(p){return p in v};return{hasBlobUri:q,getResultUri:function(p){return(p=v[p])?p.resultUri:null},isPending:function(p){return q(p)?1===v[p].status:!1},isUploaded:function(p){return q(p)?2===v[p].status:!1},markPending:function(p){v[p]={status:1,resultUri:null}},markUploaded:function(p,h){v[p]={status:2,resultUri:h}},removeFailed:function(p){delete v[p]},destroy:function(){v={}}}}});L("tinymce.core.EditorUpload",
"tinymce.core.util.Arr tinymce.core.file.Uploader tinymce.core.file.ImageScanner tinymce.core.file.BlobCache tinymce.core.file.UploadStatus tinymce.core.ErrorReporter".split(" "),function(v,q,p,h,b,c){return function(d){var a=new h,f,n,u=d.settings,z=new b,w=function(x){return function(A){return d.selection?x(A):[]}},m=function(x,A,l){var D=0;do D=x.indexOf(A,D),-1!==D&&(x=x.substring(0,D)+l+x.substr(D+A.length),D+=l.length-A.length+1);while(-1!==D);return x},g=function(x,A,l){x=m(x,'src="'+A+'"',
'src="'+l+'"');return x=m(x,'data-mce-src="'+A+'"','data-mce-src="'+l+'"')},e=function(x,A){v.each(d.undoManager.data,function(l){"fragmented"===l.type?l.fragments=v.map(l.fragments,function(D){return g(D,x,A)}):l.content=g(l.content,x,A)})},t=function(){return d.notificationManager.open({text:d.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},y=function(x){f||(f=new q(z,{url:u.images_upload_url,basePath:u.images_upload_base_path,credentials:u.images_upload_credentials,handler:u.images_upload_handler}));
return r().then(w(function(A){var l=v.map(A,function(D){return D.blobInfo});return f.upload(l,t).then(w(function(D){D=v.map(D,function(E,F){F=A[F].image;if(E.status&&!1!==d.settings.images_replace_blob_uris){var H=E.url;a.removeByUri(F.src);e(F.src,H);d.$(F).attr({src:u.images_reuse_filename?H+("?"+(new Date).getTime()):H,"data-mce-src":d.convertURL(H,"src")})}else E.error&&c.uploadError(d,E.error);return{element:F,status:E.status}});x&&x(D);return D}))}))},C=function(x){if(!1!==u.automatic_uploads)return y(x)},
B=function(x){return u.images_dataimg_filter?u.images_dataimg_filter(x):!0},r=function(){n||(n=new p(z,a));return n.findAll(d.getBody(),B).then(w(function(x){x=v.filter(x,function(A){return"string"===typeof A?(c.displayError(d,A),!1):!0});v.each(x,function(A){e(A.image.src,A.blobInfo.blobUri());A.image.src=A.blobInfo.blobUri();A.image.removeAttribute("data-mce-src")});return x}))},k=function(x){return x.replace(/src="(blob:[^"]+)"/g,function(A,l){var D=z.getResultUri(l);if(D)return'src="'+D+'"';(D=
a.getByUri(l))||(D=v.reduce(d.editorManager.get(),function(E,F){return E||F.editorUpload&&F.editorUpload.blobCache.getByUri(l)},null));return D?'src="data:'+D.blob().type+";base64,"+D.base64()+'"':A})};d.on("setContent",function(){!1!==d.settings.automatic_uploads?C():r()});d.on("RawSaveContent",function(x){x.content=k(x.content)});d.on("getContent",function(x){x.source_view||"raw"==x.format||(x.content=k(x.content))});d.on("PostRender",function(){d.parser.addNodeFilter("img",function(x){v.each(x,
function(A){var l=A.attr("src");a.getByUri(l)||(l=z.getResultUri(l))&&A.attr("src",l)})})});return{blobCache:a,uploadImages:y,uploadImagesAuto:C,scanForImages:r,destroy:function(){a.destroy();z.destroy();n=f=null}}}});L("tinymce.core.ForceBlocks","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.Parents tinymce.core.focus.EditorFocus".split(" "),function(v,q,p,h,b,c,d){var a=function(n,u,z){return v.exists(c.parents(p.fromDom(z),
p.fromDom(u)),function(w){w=w.dom();return n.hasOwnProperty(w.nodeName)})},f=function(n){var u=n.settings,z=n.dom,w=n.selection,m=n.schema,g=m.getBlockElements(),e=w.getStart(),t=n.getBody();u=u.forced_root_block;if(e&&b.isElement(e)&&u){var y=t.nodeName.toLowerCase();if(m.isValidChild(y,u.toLowerCase())&&!a(g,t,e)){m=w.getRng();y=m.startContainer;var C=m.startOffset;var B=m.endContainer;var r=m.endOffset;var k=d.hasFocus(n);for(e=t.firstChild;e;){t=g;var x=e;t=b.isText(x)?!0:b.isElement(x)?!t.hasOwnProperty(x.nodeName)&&
!h.isBookmarkNode(x):!1;if(t)if(b.isText(e)&&0===e.nodeValue.length)t=e,e=e.nextSibling,z.remove(t);else{if(!A){var A=z.create(u,n.settings.forced_root_block_attrs);e.parentNode.insertBefore(A,e);var l=!0}t=e;e=e.nextSibling;A.appendChild(t)}else A=null,e=e.nextSibling}l&&k&&(m.setStart(y,C),m.setEnd(B,r),w.setRng(m),n.nodeChanged())}}};return{setup:function(n){if(n.settings.forced_root_block)n.on("NodeChange",q.curry(f,n))}}});L("tinymce.core.NodeChange",["tinymce.core.Env","tinymce.core.selection.RangeCompare",
"tinymce.core.util.Delay"],function(v,q,p){return function(h){var b,c=[];if(!("onselectionchange"in h.getDoc()))h.on("NodeChange Click MouseUp KeyUp Focus",function(d){var a=h.selection.getRng();a={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!=d.type&&q.isEq(a,b)||h.fire("SelectionChange");b=a});h.on("contextmenu",function(){h.fire("SelectionChange")});h.on("SelectionChange",function(){var d=h.selection.getStart(!0);if(d&&
(v.range||!h.selection.isCollapsed())){var a;a:{var f=h.$(d).parentsUntil(h.getBody()).add(d);if(f.length===c.length){for(a=f.length;0<=a&&f[a]===c[a];a--);if(-1===a){c=f;a=!0;break a}}c=f;a=!1}!a&&h.dom.isChildOf(d,h.getBody())&&h.nodeChanged({selectionChange:!0})}});h.on("MouseUp",function(d){d.isDefaultPrevented()||("IMG"==h.selection.getNode().nodeName?p.setEditorTimeout(h,function(){h.nodeChanged()}):h.nodeChanged())});this.nodeChanged=function(d){var a=h.selection;if(h.initialized&&a&&!h.settings.disable_nodechange&&
!h.readonly){var f=h.getBody();a=a.getStart(!0)||f;a.ownerDocument==h.getDoc()&&h.dom.isChildOf(a,f)||(a=f);var n=[];h.dom.getParent(a,function(u){if(u===f)return!0;n.push(u)});d=d||{};d.element=a;d.parents=n;h.fire("NodeChange",d)}}}});L("tinymce.core.dom.MousePosition",[],function(){var v=function(q){var p=q.getBoundingClientRect();var h=q.ownerDocument;q=h.documentElement;h=h.defaultView;return{top:p.top+h.pageYOffset-q.clientTop,left:p.left+h.pageXOffset-q.clientLeft}};return{calc:function(q,
p){var h=q.inline?v(q.getBody()):{left:0,top:0};var b=q.getBody();b=q.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0};if(p.target.ownerDocument!==q.getDoc()){var c=v(q.getContentAreaContainer()),d=q.getBody(),a=q.getDoc().documentElement;var f={left:d.scrollLeft,top:d.scrollTop};d={left:d.scrollLeft||a.scrollLeft,top:d.scrollTop||a.scrollTop};f=q.inline?f:d;q=p.pageX-c.left+f.left;p=p.pageY-c.top+f.top}else q=p.pageX,p=p.pageY;return{pageX:q-h.left+b.left,pageY:p-h.top+b.top}}}});L("tinymce.core.DragDropOverrides",
"global!document tinymce.core.dom.DOMUtils tinymce.core.dom.MousePosition tinymce.core.dom.NodeType tinymce.core.util.Arr tinymce.core.util.Delay tinymce.core.util.Fun".split(" "),function(v,q,p,h,b,c,d){var a=h.isContentEditableFalse,f=h.isContentEditableTrue,n=function(B,r,k){return r===k||B.dom.isChildOf(r,k)||a(r)?!1:!0},u=function(B){B=B.cloneNode(!0);B.removeAttribute("data-mce-selected");return B},z=function(B,r){return function(k){if(0===k.button){var x=b.find(r.dom.getParents(k.target),d.or(a,
f)),A=r.getBody();if(a(x)&&x!==A){A=r.dom.getPos(x);var l=r.getBody(),D=r.getDoc().documentElement;B.element=x;B.screenX=k.screenX;B.screenY=k.screenY;B.maxX=(r.inline?l.scrollWidth:D.offsetWidth)-2;B.maxY=(r.inline?l.scrollHeight:D.offsetHeight)-2;B.relX=k.pageX-A.x;B.relY=k.pageY-A.y;B.width=x.offsetWidth;B.height=x.offsetHeight;k=B.width;A=B.height;x=x.cloneNode(!0);r.dom.setStyles(x,{width:k,height:A});r.dom.setAttrib(x,"data-mce-selected",null);l=r.dom.create("div",{"class":"mce-drag-container",
"data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});r.dom.setStyles(l,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:k,height:A});r.dom.setStyles(x,{margin:0,boxSizing:"border-box"});l.appendChild(x);B.ghost=l}}}},w=function(B,r){var k=c.throttle(function(x,A){r._selectionOverrides.hideFakeCaret();r.selection.placeCaretAt(x,A)},0);return function(x){var A=Math.max(Math.abs(x.screenX-B.screenX),Math.abs(x.screenY-B.screenY));if(B.element&&!B.dragging&&
10<A){if(r.fire("dragstart",{target:B.element}).isDefaultPrevented())return;B.dragging=!0;r.focus()}if(B.dragging){var l=p.calc(r,x);A=l.pageX-B.relX;l=l.pageY+5;var D=B.ghost,E=r.getBody();D.parentNode!==E&&E.appendChild(D);D=B.ghost;E=B.width;var F=B.height,H=B.maxX,I=B.maxY,G=0,J=0;D.style.left=A+"px";D.style.top=l+"px";A+E>H&&(G=A+E-H);l+F>I&&(J=l+F-I);D.style.width=E-G+"px";D.style.height=F-J+"px";k(x.clientX,x.clientY)}}},m=function(B){B=B.getSel().getRangeAt(0).startContainer;return 3===B.nodeType?
B.parentNode:B},g=function(B,r){return function(k){if(B.dragging&&n(r,m(r.selection),B.element)){var x=u(B.element);k=r.fire("drop",{targetClone:x,clientX:k.clientX,clientY:k.clientY});k.isDefaultPrevented()||(x=k.targetClone,r.undoManager.transact(function(){var A=B.element;A&&A.parentNode&&A.parentNode.removeChild(A);r.insertContent(r.dom.getOuterHTML(x));r._selectionOverrides.hideFakeCaret()}))}t(B)}},e=function(B,r){return function(){t(B);B.dragging&&r.fire("dragend")}},t=function(B){B.dragging=
!1;B.element=null;(B=B.ghost)&&B.parentNode&&B.parentNode.removeChild(B)},y=function(B){var r={};var k=q.DOM;var x=z(r,B);var A=w(r,B);var l=g(r,B);var D=e(r,B);B.on("mousedown",x);B.on("mousemove",A);B.on("mouseup",l);k.bind(v,"mousemove",A);k.bind(v,"mouseup",D);B.on("remove",function(){k.unbind(v,"mousemove",A);k.unbind(v,"mouseup",D)})},C=function(B){B.on("drop",function(r){var k="undefined"!==typeof r.clientX?B.getDoc().elementFromPoint(r.clientX,r.clientY):null;(a(k)||a(B.dom.getContentEditableParent(k)))&&
r.preventDefault()})};return{init:function(B){y(B);C(B)}}});L("tinymce.core.caret.FakeCaret","global!clearInterval tinymce.core.caret.CaretContainer tinymce.core.caret.CaretContainerRemove tinymce.core.dom.DomQuery tinymce.core.dom.NodeType tinymce.core.geom.ClientRect tinymce.core.util.Delay".split(" "),function(v,q,p,h,b,c,d){var a=b.isContentEditableFalse;return function(f,n){var u,z=null,w,m=function(){var e;var t=h("*[contentEditable=false]",f);for(e=0;e<t.length;e++){var y=t[e];var C=y.previousSibling;
if(q.endsWithCaretContainer(C)){var B=C.data;1==B.length?C.parentNode.removeChild(C):C.deleteData(B.length-1,1)}C=y.nextSibling;q.startsWithCaretContainer(C)&&(B=C.data,1==B.length?C.parentNode.removeChild(C):C.deleteData(0,1))}w&&(p.remove(w),w=null);z&&(z.remove(),z=null);v(u)},g=function(){u=d.setInterval(function(){f.ownerDocument.activeElement===f?h("div.mce-visual-caret",f).toggleClass("mce-visual-caret-hidden"):h("div.mce-visual-caret",f).addClass("mce-visual-caret-hidden")},500)};return{show:function(e,
t){m();if(t&&/^(TD|TH)$/i.test(t.nodeName))return null;if(n(t)){w=q.insertBlock("p",t,e);var y=c.collapse(t.getBoundingClientRect(),e);if("BODY"==f.tagName){var C=f.ownerDocument.documentElement;var B=f.scrollLeft||C.scrollLeft;C=f.scrollTop||C.scrollTop}else C=f.getBoundingClientRect(),B=f.scrollLeft-C.left,C=f.scrollTop-C.top;y.left+=B;y.right+=B;y.top+=C;y.bottom+=C;y.width=1;B=t.offsetWidth-t.clientWidth;0<B&&(e&&(B*=-1),y.left+=B,y.right+=B);h(w).css("top",y.top);z=h('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(y).appendTo(f);
e&&z.addClass("mce-visual-caret-before");g();e=t.ownerDocument.createRange();e.setStart(w,0);e.setEnd(w,0)}else w=q.insertInline(t,e),e=t.ownerDocument.createRange(),a(w.nextSibling)?(e.setStart(w,0),e.setEnd(w,0)):(e.setStart(w,1),e.setEnd(w,1));return e},hide:m,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},
destroy:function(){d.clearInterval(u)}}}});L("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(v,q,p){var h=function(b){var c=function(a){return v.map(a,function(f){f=p.clone(f);f.node=b;return f})};if(v.isArray(b))return v.reduce(b,function(a,f){return a.concat(h(f))},[]);if(q.isElement(b))return c(b.getClientRects());if(q.isText(b)){var d=b.ownerDocument.createRange();d.setStart(b,0);d.setEnd(b,b.data.length);return c(d.getClientRects())}};
return{getClientRects:h}});L("tinymce.core.caret.LineUtils","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.NodeType tinymce.core.dom.Dimensions tinymce.core.geom.ClientRect tinymce.core.caret.CaretUtils tinymce.core.caret.CaretCandidate".split(" "),function(v,q,p,h,b,c,d){var a=p.isContentEditableFalse,f=c.findNode,n=v.curry,u=function(m,g){return q.reduce(m,function(e,t){var y=Math.min(Math.abs(e.left-g),Math.abs(e.right-g));var C=Math.min(Math.abs(t.left-g),Math.abs(t.right-g));return g>=
t.left&&g<=t.right?t:g>=e.left&&g<=e.right?e:C==y&&a(t.node)||C<y?t:e})},z=function(m,g,e,t){for(;(t=f(t,m,d.isEditableCaretCandidate,g))&&!e(t););},w=function(m,g){var e=[],t=function(y,C){C=q.filter(h.getClientRects(C),function(B){return!y(B,g)});e=e.concat(C);return 0===C.length};e.push(g);z(-1,m,n(t,b.isAbove),g.node);z(1,m,n(t,b.isBelow),g.node);return e};return{findClosestClientRect:u,findLineNodeRects:w,closestCaret:function(m,g,e){var t=h.getClientRects(q.filter(q.toArray(m.getElementsByTagName("*")),
a));t=q.filter(t,function(y){return e>=y.top&&e<=y.bottom});return(t=u(t,g))&&(t=u(w(m,t),g))&&a(t.node)?{node:t.node,before:Math.abs(t.left-g)<Math.abs(t.right-g)}:null}}});L("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(v,q){return{isXYWithinRange:function(p,h,b){return b.collapsed?!1:v.foldl(b.getClientRects(),function(c,d){return c||q.containsXY(d,p,h)},!1)}}});L("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(v,
q){return{adaptable:function(p,h){var b=null,c=null;return{cancel:function(){null!==b&&(v(b),c=b=null)},throttle:function(){c=arguments;null===b&&(b=q(function(){p.apply(null,c);c=b=null},h))}}},first:function(p,h){var b=null;return{cancel:function(){null!==b&&(v(b),b=null)},throttle:function(){var c=arguments;null===b&&(b=q(function(){p.apply(null,c);c=b=null},h))}}},last:function(p,h){var b=null;return{cancel:function(){null!==b&&(v(b),b=null)},throttle:function(){var c=arguments;null!==b&&v(b);
b=q(function(){p.apply(null,c);c=b=null},h)}}}}});L("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(v,q,p,h){var b=p.isContentEditableTrue,c=p.isContentEditableFalse,d=function(f,n,u,z){return n._selectionOverrides.showCaret(f,u,z)},a=function(f,n){n=q.normalizeRange(1,f.getBody(),n);n=v.fromRangeStart(n);if(c(n.getNode()))return d(1,f,n.getNode(),!n.isAtEnd());if(c(n.getNode(!0)))return d(1,
f,n.getNode(!0),!1);n=f.dom.getParent(n.getNode(),h.or(c,b));return c(n)?d(1,f,n,!1):null};return{showCaret:d,selectNode:function(f,n){if(f.fire("BeforeObjectSelected",{target:n}).isDefaultPrevented())return null;f=n.ownerDocument.createRange();f.selectNode(n);return f},renderCaretAtRange:a,renderRangeCaret:function(f,n){return n&&n.collapsed?(f=a(f,n))?f:n:n}}});L("tinymce.core.focus.CefFocus",["ephox.katamari.api.Throttler","tinymce.core.keyboard.CefUtils"],function(v,q){return{setup:function(p){var h=
v.first(function(){if(!p.removed){var b=q.renderRangeCaret(p,p.selection.getRng());p.selection.setRng(b)}},0);p.on("focus",function(){h.throttle()});p.on("blur",function(){h.cancel()})}}});L("tinymce.core.util.VK",["tinymce.core.Env"],function(v){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(q){return q.shiftKey||q.ctrlKey||q.altKey||this.metaKeyPressed(q)},metaKeyPressed:function(q){return v.mac?q.metaKey:q.ctrlKey&&!q.altKey}}});
L("tinymce.core.SelectionOverrides","ephox.katamari.api.Arr ephox.sugar.api.dom.Remove ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter ephox.sugar.api.search.SelectorFind tinymce.core.DragDropOverrides tinymce.core.EditorView tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.FakeCaret tinymce.core.caret.LineUtils tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.focus.CefFocus tinymce.core.keyboard.CefUtils tinymce.core.util.VK".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e,t,y,C,B){var r=e.isContentEditableTrue,k=e.isContentEditableFalse,x=z.isAfterContentEditableFalse,A=z.isBeforeContentEditableFalse;return function(l){var D=l.getBody(),E=new m(l.getBody(),function(N){return l.dom.isBlock(N)}),F="sel-"+l.dom.uniqueId(),H,I=function(N,O,U){if(l.fire("ShowCaret",{target:O,direction:N,before:U}).isDefaultPrevented())return null;l.selection.scrollIntoView(O,-1===N);return E.show(U,O)},G=function(N,O){O=z.normalizeRange(N,D,O);return-1==
N?u.fromRangeStart(O):u.fromRangeEnd(O)},J=function(){var N=function(O){for(var U=l.getBody();O&&O!=U;){if(r(O)||k(O))return O;O=O.parentNode}return null};l.on("mouseup",function(O){var U=l.selection.getRng();U.collapsed&&a.isXYInContentArea(l,O.clientX,O.clientY)&&(O=C.renderCaretAtRange(l,U))&&l.selection.setRng(O)});l.on("click",function(O){var U;if(U=N(O.target))k(U)&&(O.preventDefault(),l.focus()),r(U)&&l.dom.isChildOf(U,l.selection.getNode())&&V()});l.on("blur NewBlock",function(){V()});(function(O){var U=
!1;O.on("touchstart",function(){U=!1});O.on("touchmove",function(){U=!0});O.on("touchend",function(X){var S=N(X.target);k(S)&&!U&&(X.preventDefault(),W(C.selectNode(O,S)))})})(l);l.on("mousedown",function(O){var U;if(!1!==a.isXYInContentArea(l,O.clientX,O.clientY))if(U=N(O.target))k(U)?(O.preventDefault(),W(C.selectNode(l,U))):(V(),r(U)&&O.shiftKey||t.isXYWithinRange(O.clientX,O.clientY,l.selection.getRng())||l.selection.placeCaretAt(O.clientX,O.clientY));else if(V(),ba(),U=g.closestCaret(D,O.clientX,
O.clientY)){var X=U.node,S=l.dom.getParent(O.target,l.dom.isBlock);X=l.dom.getParent(X,l.dom.isBlock);var aa;if(aa=S)aa=l.dom.getParent(S,l.dom.isBlock),X=l.dom.getParent(X,l.dom.isBlock),aa=aa!==X;if(X=aa)X=new w(S),S.firstChild?(S=u.before(S.firstChild),X=(S=X.next(S))&&!A(S)&&!x(S)):X=!1;X||(O.preventDefault(),l.getBody().focus(),(O=I(1,U.node,U.before))&&l.selection.setRng(O))}});l.on("keypress",function(O){B.modifierPressed(O)||k(l.selection.getNode())&&O.preventDefault()});l.on("getSelectionRange",
function(O){var U=O.range;H&&(H.parentNode?(U=U.cloneRange(),U.selectNode(H),O.range=U):H=null)});l.on("setSelectionRange",function(O){var U;if(U=W(O.range,O.forward))O.range=U});l.on("AfterSetSelectionRange",function(O){O=O.range;Q(O)||ba();l.dom.hasClass(O.startContainer.parentNode,"mce-offscreen-selection")||V()});l.on("copy",function(O){var U=O.clipboardData;if(!O.isDefaultPrevented()&&O.clipboardData&&!f.ie){var X;if(X=(X=l.dom.get(F))?X.getElementsByTagName("*")[0]:X)O.preventDefault(),U.clearData(),
U.setData("text/html",X.outerHTML),U.setData("text/plain",X.outerText)}});d.init(l);y.setup(l)},M=function(){var N=l.contentStyles;N.push(E.getCss());N.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")},P=function(N){return n.isCaretContainer(N)||n.startsWithCaretContainer(N)||n.endsWithCaretContainer(N)},Q=function(N){return P(N.startContainer)||
P(N.endContainer)},W=function(N,O){var U=l.$,X=l.dom;if(!N)return null;if(N.collapsed){if(!Q(N))if(!1===O){var S=G(-1,N);if(k(S.getNode(!0)))return I(-1,S.getNode(!0),!1);if(k(S.getNode()))return I(-1,S.getNode(),!S.isAtEnd())}else{S=G(1,N);if(k(S.getNode()))return I(1,S.getNode(),!S.isAtEnd());if(k(S.getNode(!0)))return I(1,S.getNode(!0),!1)}return null}O=N.startContainer;var aa=N.startOffset;N=N.endOffset;3===O.nodeType&&0===aa&&k(O.parentNode)&&(O=O.parentNode,aa=X.nodeIndex(O),O=O.parentNode);
if(1!=O.nodeType)return null;N==aa+1&&(S=O.childNodes[aa]);if(!k(S))return null;var fa=aa=S.cloneNode(!0);N=l.fire("ObjectSelected",{target:S,targetClone:fa});if(N.isDefaultPrevented())return null;O=c.descendant(p.fromDom(l.getBody()),"#"+F).fold(function(){return U([])},function(ia){return U([ia.dom()])});fa=N.targetClone;0===O.length&&(O=U('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",F),O.appendTo(l.getBody()));N=l.dom.createRng();fa===aa&&f.ie?(O.empty().append('<p style="font-size: 0" data-mce-bogus="all">\u00a0</p>').append(fa),
N.setStartAfter(O[0].firstChild.firstChild),N.setEndAfter(fa)):(O.empty().append("\u00a0").append(fa).append("\u00a0"),N.setStart(O[0].firstChild,1),N.setEnd(O[0].lastChild,0));O.css({top:X.getPos(S,l.getBody()).y});O[0].focus();X=l.selection.getSel();X.removeAllRanges();X.addRange(N);v.each(b.descendants(p.fromDom(l.getBody()),"*[data-mce-selected]"),function(ia){h.remove(ia,"data-mce-selected")});S.setAttribute("data-mce-selected",1);H=S;ba();return N},V=function(){H&&(H.removeAttribute("data-mce-selected"),
c.descendant(p.fromDom(l.getBody()),"#"+F).each(q.remove),H=null)},ba=function(){E.hide()};f.ceFalse&&(J(),M());return{showCaret:I,showBlockCaretContainer:function(N){if(N.hasAttribute("data-mce-caret")){n.showCaretContainerBlock(N);var O=l.selection.getRng();O&&l.selection.setRng(O);l.selection.scrollIntoView(N[0],void 0)}},hideFakeCaret:ba,destroy:function(){E.destroy();H=null}}}});L("tinymce.core.undo.Diff",[],function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(v,q){var p=v.length+q.length+
2,h=Array(p),b=Array(p),c=function(a,f,n,u,z){a:{var w=f-a,m=u-n;if(0===w||0===m)var g=null;else{g=w-m;w=m+w;w=(0===w%2?w:w+1)/2;h[1+w]=a;b[1+w]=f+1;for(m=0;m<=w;++m){for(var e=-m;e<=m;e+=2){var t=e+w;h[t]=e===-m||e!=m&&h[t-1]<h[t+1]?h[t+1]:h[t-1]+1;for(var y=h[t],C=y-a+n-e;y<f&&C<u&&v[y]===q[C];)h[t]=++y,++C;if(0!=g%2&&g-m<=e&&e<=g+m&&b[t-g]<=h[t]){g=d(b[t-g],e+a-n,f,u);break a}}for(e=g-m;e<=g+m;e+=2){t=e+w-g;b[t]=e===g-m||e!=g+m&&b[t+1]<=b[t-1]?b[t+1]-1:b[t-1];y=b[t]-1;for(C=y-a+n-e;y>=a&&C>=n&&
v[y]===q[C];)b[t]=y--,C--;if(0===g%2&&-m<=e&&e<=m&&b[t]<=h[t+g]){g=d(b[t],e+a-n,f,u);break a}}}g=void 0}}if(null===g||g.start===f&&g.diag===f-u||g.end===a&&g.diag===a-n)for(g=a,w=n;g<f||w<u;)g<f&&w<u&&v[g]===q[w]?(z.push([0,v[g]]),++g,++w):f-a>u-n?(z.push([2,v[g]]),++g):(z.push([1,q[w]]),++w);else{c(a,g.start,n,g.start-g.diag,z);for(a=g.start;a<g.end;++a)z.push([0,v[a]]);c(g.end,f,g.end-g.diag,u,z)}},d=function(a,f,n,u){for(var z=a;z-f<u&&z<n&&v[z]===q[z-f];)++z;return{start:a,end:z,diag:f}};p=[];
c(0,v.length,0,q.length,p);return p}}});L("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(v,q,p,h){var b=function(d){return 1===d.nodeType?d.outerHTML:3===d.nodeType?q.encodeRaw(d.data,!1):8===d.nodeType?"\x3c!--"+d.data+"--\x3e":""},c=function(d,a){var f=0;h.each(d,function(n){if(n[0]===p.KEEP)f++;else if(n[0]===p.INSERT){var u=f,z=n[1];var w=v.createElement("div");n=v.createDocumentFragment();z&&(w.innerHTML=
z);for(;z=w.firstChild;)n.appendChild(z);a.hasChildNodes()&&u<a.childNodes.length?(u=a.childNodes[u],u.parentNode.insertBefore(n,u)):a.appendChild(n);f++}else n[0]===p.DELETE&&(u=f,a.hasChildNodes()&&u<a.childNodes.length&&(u=a.childNodes[u],u.parentNode.removeChild(u)))})};return{read:function(d){return h.filter(h.map(d.childNodes,b),function(a){return 0<a.length})},write:function(d,a){var f=h.map(a.childNodes,b);c(p.diff(f,d),a);return a}}});L("tinymce.core.undo.Levels",["ephox.katamari.api.Arr",
"tinymce.core.dom.TrimHtml","tinymce.core.undo.Fragments"],function(v,q,p){var h=function(d){return{type:"fragmented",fragments:d,content:"",bookmark:null,beforeBookmark:null}},b=function(d){return{type:"complete",fragments:null,content:d,bookmark:null,beforeBookmark:null}},c=function(d){return"fragmented"===d.type?d.fragments.join(""):d.content};return{createFragmentedLevel:h,createCompleteLevel:b,createFromEditor:function(d){var a=p.read(d.getBody());var f=v.bind(a,function(n){n=q.trimInternal(d.serializer,
n);return 0<n.length?[n]:[]});a=f.join("");return-1!==a.indexOf("</iframe>")?h(f):b(a)},applyToEditor:function(d,a,f){"fragmented"===a.type?p.write(a.fragments,d.getBody()):d.setContent(a.content,{format:"raw"});d.selection.moveToBookmark(f?a.beforeBookmark:a.bookmark)},isEq:function(d,a){return!!d&&!!a&&c(d)===c(a)}}});L("tinymce.core.UndoManager",["tinymce.core.dom.GetBookmark","tinymce.core.undo.Levels","tinymce.core.util.Tools"],function(v,q,p){return function(h){var b=this,c=0,d=[],a,f,n=0,u=
function(m){0===n&&(b.typing=m)},z=function(m){u(!1);b.add({},m)},w=function(){b.typing&&(u(!1),b.add())};h.on("init",function(){b.add()});h.on("BeforeExecCommand",function(m){m=m.command;"Undo"!==m&&"Redo"!==m&&"mceRepaint"!==m&&(w(),b.beforeChange())});h.on("ExecCommand",function(m){var g=m.command;"Undo"!==g&&"Redo"!==g&&"mceRepaint"!==g&&z(m)});h.on("ObjectResizeStart Cut",function(){b.beforeChange()});h.on("SaveContent ObjectResized blur",z);h.on("DragEnd",z);h.on("KeyUp",function(m){var g=m.keyCode;
if(!m.isDefaultPrevented()){if(33<=g&&36>=g||37<=g&&40>=g||45===g||m.ctrlKey)z(),h.nodeChanged();46!==g&&8!==g||h.nodeChanged();f&&b.typing&&!1===q.isEq(q.createFromEditor(h),d[0])&&(!1===h.isDirty()&&(h.setDirty(!0),h.fire("change",{level:d[0],lastLevel:null})),h.fire("TypingUndo"),f=!1,h.nodeChanged())}});h.on("KeyDown",function(m){var g=m.keyCode;if(!m.isDefaultPrevented())if(33<=g&&36>=g||37<=g&&40>=g||45===g)b.typing&&z(m);else{var e=m.ctrlKey&&!m.altKey||m.metaKey;!(16>g||20<g)||224===g||91===
g||b.typing||e||(b.beforeChange(),u(!0),b.add({},m),f=!0)}});h.on("MouseDown",function(m){b.typing&&z(m)});h.addShortcut("meta+z","","Undo");h.addShortcut("meta+y,meta+shift+z","","Redo");h.on("AddUndo Undo Redo ClearUndos",function(m){m.isDefaultPrevented()||h.nodeChanged()});return b={data:d,typing:!1,beforeChange:function(){0===n&&(a=v.getUndoBookmark(h.selection))},add:function(m,g){var e=h.settings;var t=q.createFromEditor(h);m=m||{};m=p.extend(m,t);if(0===n===!1||h.removed)return null;t=d[c];
if(h.fire("BeforeAddUndo",{level:m,lastLevel:t,originalEvent:g}).isDefaultPrevented()||t&&q.isEq(t,m))return null;d[c]&&(d[c].beforeBookmark=a);if(e.custom_undo_redo_levels&&d.length>e.custom_undo_redo_levels){for(e=0;e<d.length-1;e++)d[e]=d[e+1];d.length--;c=d.length}m.bookmark=v.getUndoBookmark(h.selection);c<d.length-1&&(d.length=c+1);d.push(m);c=d.length-1;g={level:m,lastLevel:t,originalEvent:g};h.fire("AddUndo",g);0<c&&(h.setDirty(!0),h.fire("change",g));return m},undo:function(){b.typing&&(b.add(),
b.typing=!1,u(!1));if(0<c){var m=d[--c];q.applyToEditor(h,m,!0);h.setDirty(!0);h.fire("undo",{level:m})}return m},redo:function(){if(c<d.length-1){var m=d[++c];q.applyToEditor(h,m,!1);h.setDirty(!0);h.fire("redo",{level:m})}return m},clear:function(){d=[];c=0;b.typing=!1;b.data=d;h.fire("ClearUndos")},hasUndo:function(){return 0<c||b.typing&&d[0]&&!q.isEq(q.createFromEditor(h),d[0])},hasRedo:function(){return c<d.length-1&&!b.typing},transact:function(m){w();b.beforeChange();b.ignore(m);return b.add()},
ignore:function(m){try{n++,m()}finally{n--}},extra:function(m,g){if(b.transact(m)){var e=d[c].bookmark;m=d[c-1];q.applyToEditor(h,m,!0);b.transact(g)&&(d[c-1].beforeBookmark=e)}}}}});L("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(v,q,p){var h={},b=v.filter,c=v.each;(function(d,a){h[d]||(h[d]=[]);h[d].push(a)})("pre",function(d){var a=d.selection.getRng(),f=function(z){return n(z.previousSibling)&&-1!==v.indexOf(u,z.previousSibling)};
var n=q.matchNodeNames("pre");if(!a.collapsed){var u=d.selection.getSelectedBlocks();c(b(b(u,n),f),function(z){var w=z.previousSibling;p(z).remove();p(w).append("<br><br>").append(z.childNodes)})}});return{postProcess:function(d,a){c(h[d],function(f){f(a)})}}});L("tinymce.core.selection.RangeWalk",["tinymce.core.util.Tools"],function(v){var q=v.each,p=function(h,b){var c=h.childNodes;b--;b>c.length-1?b=c.length-1:0>b&&(b=0);return c[b]||h};return{walk:function(h,b,c){var d=b.startContainer,a=b.startOffset,
f=b.endContainer,n=b.endOffset,u,z;b=h.select("td[data-mce-selected],th[data-mce-selected]");if(0<b.length)q(b,function(y){c([y])});else{var w=function(y){var C=y[0];3===C.nodeType&&C===d&&a>=C.nodeValue.length&&y.splice(0,1);C=y[y.length-1];0===n&&0<y.length&&C===f&&3===C.nodeType&&y.splice(y.length-1,1);return y},m=function(y,C,B){for(var r=[];y&&y!=B;y=y[C])r.push(y);return r};var g=function(y,C){do{if(y.parentNode===C)return y;y=y.parentNode}while(y)};b=function(y,C,B){var r=B?"nextSibling":"previousSibling";
u=y;for(z=u.parentNode;u&&u!=C;u=z)z=u.parentNode,t=m(u===y?u:u[r],r),t.length&&(B||t.reverse(),c(w(t)))};1===d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[a]);1===f.nodeType&&f.hasChildNodes()&&(f=p(f,n));if(d===f)return c(w([d]));var e=h.findCommonAncestor(d,f);for(u=d;u;u=u.parentNode){if(u===f)return b(d,e,!0);if(u===e)break}for(u=f;u;u=u.parentNode){if(u===d)return b(f,e);if(u===e)break}h=g(d,e)||d;g=g(f,e)||f;b(d,h,!0);var t=m(h===d?h:h.nextSibling,"nextSibling",g===f?g.nextSibling:g);t.length&&
c(w(t));b(f,g)}}}});L("tinymce.core.fmt.RemoveFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d,a,f){var n=/^(src|href|style)$/,u=f.each,z=c.isEq,w=function(B,r,k){var x=r[k?"startContainer":"endContainer"];r=r[k?"startOffset":"endOffset"];if(q.isElement(x)){var A=
x.childNodes.length-1;!k&&r&&r--;x=x.childNodes[r>A?A:r]}q.isText(x)&&k&&r>=x.nodeValue.length&&(x=(new p(x,B.getBody())).next()||x);q.isText(x)&&!k&&0===r&&(x=(new p(x,B.getBody())).prev()||x);return x},m=function(B,r,k,x){B=B.create(k,x);r.parentNode.insertBefore(B,r);B.appendChild(r);return B},g=function(B,r,k){if(z(r,k.inline)||z(r,k.block))return!0;if(k.selector)return q.isElement(r)&&B.is(r,k.selector)},e=function(B,r,k,x){r=c.getNonWhiteSpaceSibling(r,k,x);return!r||"BR"===r.nodeName||B.isBlock(r)},
t=function(B,r,k){var x=r.parentNode,A,l=B.dom,D=B.settings.forced_root_block;k.block&&(D?x===l.getRoot()&&(k.list_block&&z(r,k.list_block)||u(f.grep(r.childNodes),function(E){c.isValid(B,D,E.nodeName.toLowerCase())?A?A.appendChild(E):(A=m(l,E,D),l.setAttribs(A,B.settings.forced_root_block_attrs)):A=0})):l.isBlock(r)&&!l.isBlock(x)&&(e(l,r,!1)||e(l,r.firstChild,!0,1)||r.insertBefore(l.create("br"),r.firstChild),e(l,r,!0)||e(l,r.lastChild,!1,1)||r.appendChild(l.create("br"))));k.selector&&k.inline&&
!z(k.inline,r)||l.remove(r,1)},y=function(B,r,k,x,A){var l,D,E=B.dom;if(!(g(E,x,r)||r.links&&"A"===x.tagName))return!1;if("all"!==r.remove){u(r.styles,function(I,G){I=c.normalizeStyleValue(E,c.replaceVars(I,k),G);"number"===typeof G&&(G=I,A=0);(r.remove_similar||!A||z(c.getStyle(E,A,G),I))&&E.setStyle(x,G,"");D=1});D&&""===E.getAttrib(x,"style")&&(x.removeAttribute("style"),x.removeAttribute("data-mce-style"));u(r.attributes,function(I,G){I=c.replaceVars(I,k);"number"===typeof G&&(G=I,A=0);if(!A||
z(E.getAttrib(A,G),I)){if("class"===G&&(I=E.getAttrib(x,G))){var J="";u(I.split(/\s+/),function(M){/mce\-\w+/.test(M)&&(J+=(J?" ":"")+M)});if(J){E.setAttrib(x,G,J);return}}"class"===G&&x.removeAttribute("className");n.test(G)&&x.removeAttribute("data-mce-"+G);x.removeAttribute(G)}});u(r.classes,function(I){I=c.replaceVars(I,k);A&&!E.hasClass(A,I)||E.removeClass(x,I)});var F=E.getAttribs(x);for(l=0;l<F.length;l++){var H=F[l].nodeName;if(0!==H.indexOf("_")&&0!==H.indexOf("data-"))return!1}}if("none"!==
r.remove)return t(B,x,r),!0},C=function(B,r,k,x,A){var l;u(c.getParents(B.dom,r.parentNode).reverse(),function(D){var E;l||"_start"===D.id||"_end"===D.id||(E=d.matchNode(B,D,k,x,A))&&!1!==E.split&&(l=D)});return l};return{removeFormat:y,remove:function(B,r,k,x,A){var l=B.formatter.get(r),D=l[0],E=!0,F=B.dom;var H=B.selection;var I=function(P){var Q=C(B,P,r,k,A),W=P,V,ba,N,O=B.dom;if(Q){var U=Q.parentNode;for(V=W.parentNode;V&&V!==U;V=V.parentNode){var X=O.clone(V,!1);for(N=0;N<l.length;N++)if(y(B,
l[N],k,X,X)){X=0;break}if(X){S&&X.appendChild(S);ba||(ba=X);var S=X}}D.mixed&&O.isBlock(Q)||(W=O.split(Q,W));S&&(P.parentNode.insertBefore(S,P),ba.appendChild(P))}return W},G=function(P){var Q;if(q.isElement(P)&&F.getContentEditable(P)){var W=E;E="true"===F.getContentEditable(P);var V=!0}var ba=f.grep(P.childNodes);if(E&&!V){var N=0;for(Q=l.length;N<Q&&!y(B,l[N],k,P,P);N++);}if(D.deep&&ba.length){N=0;for(Q=ba.length;N<Q;N++)G(ba[N]);V&&(E=W)}},J=function(P){var Q=F.get(P?"_start":"_end"),W=Q[P?"firstChild":
"lastChild"];v.isBookmarkNode(W)&&(W=W[P?"firstChild":"lastChild"]);q.isText(W)&&0===W.data.length&&(W=P?Q.previousSibling||Q.nextSibling:Q.nextSibling||Q.previousSibling);F.remove(Q,!0);return W},M=function(P){var Q=P.commonAncestorContainer;P=b.expandRng(B,P,l,!0);if(D.split){var W=w(B,P,!0);var V=w(B,P);if(W!==V){/^(TR|TH|TD)$/.test(W.nodeName)&&W.firstChild&&(W="TR"===W.nodeName?W.firstChild.firstChild||W:W.firstChild||W);Q&&/^T(HEAD|BODY|FOOT|R)$/.test(Q.nodeName)&&/^(TH|TD)$/.test(V.nodeName)&&
V.firstChild&&(V=V.firstChild||V);if(F.isChildOf(W,V)&&W!==V&&!F.isBlock(V)&&!/^(TH|TD)$/.test(W.nodeName)&&!/^(TH|TD)$/.test(V.nodeName)){W=m(F,W,"span",{id:"_start","data-mce-type":"bookmark"});I(W);W=J(!0);return}W=m(F,W,"span",{id:"_start","data-mce-type":"bookmark"});V=m(F,V,"span",{id:"_end","data-mce-type":"bookmark"});I(W);I(V);W=J(!0);V=J()}else W=V=I(W);P.startContainer=W.parentNode?W.parentNode:W;P.startOffset=F.nodeIndex(W);P.endContainer=V.parentNode?V.parentNode:V;P.endOffset=F.nodeIndex(V)+
1}a.walk(F,P,function(ba){u(ba,function(N){G(N);q.isElement(N)&&"underline"===B.dom.getStyle(N,"text-decoration")&&N.parentNode&&"underline"===c.getTextDecoration(F,N.parentNode)&&y(B,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,N)})})};if(x)x.nodeType?(H=F.createRng(),H.setStartBefore(x),H.setEndAfter(x),M(H)):M(x);else if("false"===F.getContentEditable(H.getNode()))for(x=H.getNode(),M=0,H=l.length;M<H&&(!l[M].ceFalseOverride||!y(B,l[M],k,x,x));M++);else H.isCollapsed()&&
D.inline&&!F.select("td[data-mce-selected],th[data-mce-selected]").length?h.removeCaretFormat(B,r,k,A):(x=H.getBookmark(),M(H.getRng(!0)),H.moveToBookmark(x),D.inline&&d.match(B,r,k,H.getStart())&&c.moveStart(F,H,H.getRng(!0)),B.nodeChanged())}}});L("tinymce.core.fmt.MergeFormats","ephox.katamari.api.Fun tinymce.core.dom.Bookmarks tinymce.core.dom.ElementUtils tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatUtils tinymce.core.fmt.MatchFormat tinymce.core.fmt.RemoveFormat tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f){var n=f.each,u=function(C){return C&&1===C.nodeType&&!q.isBookmarkNode(C)&&!b.isCaretNode(C)&&!h.isBogus(C)},z=function(C,B){var r;for(r=C;r&&(3!==r.nodeType||0===r.nodeValue.length);r=r[B])if(1===r.nodeType&&!q.isBookmarkNode(r))return r;return C},w=function(C,B,r){var k=new p(C);if(B&&r&&(B=z(B,"previousSibling"),r=z(r,"nextSibling"),k.compare(B,r))){for(k=B.nextSibling;k&&k!==r;){var x=k;k=k.nextSibling;B.appendChild(x)}C.remove(r);f.each(f.grep(r.childNodes),function(A){B.appendChild(A)});
return B}return r},m=function(C,B,r){n(C.childNodes,function(k){u(k)&&(B(k)&&r(k),k.hasChildNodes()&&m(k,B,r))})},g=function(C,B){return v.curry(function(r,k){return!(!k||!c.getStyle(C,k,r))},B)},e=function(C,B,r){return v.curry(function(k,x,A){C.setStyle(A,k,x);""===A.getAttribute("style")&&A.removeAttribute("style");"SPAN"===A.nodeName&&0===C.getAttribs(A).length&&C.remove(A,!0)},B,r)},t=function(C,B){if(1===B.nodeType&&B.parentNode&&1===B.parentNode.nodeType){var r=c.getTextDecoration(C,B.parentNode);
C.getStyle(B,"color")&&r?C.setStyle(B,"text-decoration",r):C.getStyle(B,"text-decoration")===r&&C.setStyle(B,"text-decoration",null)}},y=function(C,B,r){B.clear_child_styles&&n(C.select(B.links?"*:not(a)":"*",r),function(k){u(k)&&n(B.styles,function(x,A){C.setStyle(k,A,"")})})};return{mergeWithChildren:function(C,B,r,k){n(B,function(x){n(C.dom.select(x.inline,k),function(A){u(A)&&a.removeFormat(C,x,r,A,x.exact?A:null)});y(C.dom,x,k)})},mergeUnderlineAndColor:function(C,B,r,k){if(B.styles.color||B.styles.textDecoration)f.walk(k,
v.curry(t,C),"childNodes"),t(C,k)},mergeBackgroundColorAndFontSize:function(C,B,r,k){B.styles&&B.styles.backgroundColor&&m(k,g(C,"fontSize"),e(C,"backgroundColor",c.replaceVars(B.styles.backgroundColor,r)))},mergeSubSup:function(C,B,r,k){if("sub"===B.inline||"sup"===B.inline)m(k,g(C,"fontSize"),e(C,"fontSize","")),C.remove(C.select("sup"===B.inline?"sub":"sup",k),!0)},mergeSiblings:function(C,B,r,k){k&&!1!==B.merge_siblings&&(k=w(C,c.getNonWhiteSpaceSibling(k),k),w(C,k,c.getNonWhiteSpaceSibling(k,
!0)))},mergeWithParents:function(C,B,r,k,x){d.matchNode(C,x.parentNode,r,k)&&a.removeFormat(C,B,k,x)||B.merge_with_parents&&C.dom.getParent(x.parentNode,function(A){if(d.matchNode(C,A,r,k))return a.removeFormat(C,B,k,x),!0})}}});L("tinymce.core.fmt.ApplyFormat","tinymce.core.dom.Bookmarks tinymce.core.dom.NodeType tinymce.core.fmt.CaretFormat tinymce.core.fmt.ExpandRange tinymce.core.fmt.FormatUtils tinymce.core.fmt.Hooks tinymce.core.fmt.MatchFormat tinymce.core.fmt.MergeFormats tinymce.core.selection.RangeNormalizer tinymce.core.selection.RangeWalk tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u){var z=u.each,w=function(m,g,e,t){var y=m.formatter.get(g),C=y[0],B,r=!t&&m.selection.isCollapsed(),k=m.dom,x=m.selection,A=function(F,H){H=H||C;if(F){if(H.onformat)H.onformat(F,H,e,t);z(H.styles,function(G,J){k.setStyle(F,J,b.replaceVars(G,e))});if(H.styles){var I=k.getAttrib(F,"style");I&&F.setAttribute("data-mce-style",I)}z(H.attributes,function(G,J){k.setAttrib(F,J,b.replaceVars(G,e))});z(H.classes,function(G){G=b.replaceVars(G,e);k.hasClass(F,G)||k.addClass(F,G)})}},
l=function(F,H){var I=!1;if(!C.selector)return!1;z(F,function(G){if(!("collapsed"in G&&G.collapsed!==r)&&k.is(H,G.selector)&&!p.isCaretNode(H))return A(H,G),I=!0,!1});return I},D=function(F,H,I,G){var J=[],M=!0;var P=C.inline||C.block;var Q=F.create(P);A(Q);n.walk(F,H,function(W){var V,ba=function(N){var O=M;var U=N.nodeName.toLowerCase();var X=N.parentNode.nodeName.toLowerCase();if(1===N.nodeType&&F.getContentEditable(N)){O=M;M="true"===F.getContentEditable(N);var S=!0}if(b.isEq(U,"br"))V=0,C.block&&
F.remove(N);else if(C.wrapper&&d.matchNode(m,N,g,e))V=0;else if(M&&!S&&C.block&&!C.wrapper&&b.isTextBlock(m,U)&&b.isValid(m,X,P))N=F.rename(N,P),A(N),J.push(N),V=0;else{if(C.selector){var aa=l(y,N);if(!C.inline||aa){V=0;return}}!M||S||!b.isValid(m,P,U)||!b.isValid(m,X,P)||!G&&3===N.nodeType&&1===N.nodeValue.length&&65279===N.nodeValue.charCodeAt(0)||p.isCaretNode(N)||C.inline&&F.isBlock(N)?(V=0,z(u.grep(N.childNodes),ba),S&&(M=O),V=0):(V||(V=F.clone(Q,!1),N.parentNode.insertBefore(V,N),J.push(V)),
V.appendChild(N))}};z(W,ba)});!0===C.links&&z(J,function(W){var V=function(ba){"A"===ba.nodeName&&A(ba,C);z(u.grep(ba.childNodes),V)};V(W)});z(J,function(W){var V=function(O){var U=!1;z(O.childNodes,function(X){if(X&&1===X.nodeType&&!v.isBookmarkNode(X)&&!p.isCaretNode(X)&&!q.isBogus(X))return U=X,!1});return U},ba=function(O){var U;if((U=V(O))&&!v.isBookmarkNode(U)&&d.matchName(F,U,C)){var X=F.clone(U,!1);A(X);F.replace(X,O,!0);F.remove(U,1)}return X||O};var N=function(O){var U=0;z(O.childNodes,
function(X){b.isWhiteSpaceNode(X)||v.isBookmarkNode(X)||U++});return U}(W);if((1<J.length||!F.isBlock(W))&&0===N)F.remove(W,1);else if(C.inline||C.wrapper)C.exact||1!==N||(W=ba(W)),a.mergeWithChildren(m,y,e,W),a.mergeWithParents(m,C,g,e,W),a.mergeBackgroundColorAndFontSize(F,C,e,W),a.mergeSubSup(F,C,e,W),a.mergeSiblings(F,C,e,W)})};if("false"===k.getContentEditable(x.getNode()))for(t=x.getNode(),D=0,B=y.length;D<B;D++){if(y[D].ceFalseOverride&&k.is(t,y[D].selector)){A(t,y[D]);break}}else if(C){if(t)t.nodeType?
l(y,t)||(B=k.createRng(),B.setStartBefore(t),B.setEndAfter(t),D(k,h.expandRng(m,B,y),null,!0)):D(k,t,null,!0);else if(r&&C.inline&&!k.select("td[data-mce-selected],th[data-mce-selected]").length)p.applyCaretFormat(m,g,e);else{var E=m.selection.getNode();m.settings.forced_root_block||!y[0].defaultBlock||k.getParent(E,k.isBlock)||w(m,y[0].defaultBlock);m.selection.setRng(f.normalize(m.selection.getRng()));B=x.getBookmark();D(k,h.expandRng(m,x.getRng(!0),y),B);C.styles&&a.mergeUnderlineAndColor(k,C,
e,E);x.moveToBookmark(B);b.moveStart(k,x,x.getRng(!0));m.nodeChanged()}c.postProcess(g,m)}};return{applyFormat:w}});L("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(v,q,p,h){var b=h.each,c=function(a,f){var n={};a.set({});f.on("NodeChange",function(u){var z=q.getParents(f.dom,u.element),w={};z=h.grep(z,function(m){return 1===m.nodeType&&!m.getAttribute("data-mce-bogus")});b(a.get(),function(m,
g){b(z,function(e){if(f.formatter.matchNode(e,g,{},m.similar))return n[g]||(b(m,function(t){t(!0,{node:e,format:g,parents:z})}),n[g]=m),w[g]=m,!1;if(p.matchesUnInheritedFormatSelector(f,e,g))return!1})});b(n,function(m,g){w[g]||(delete n[g],b(m,function(e){e(!1,{node:u.element,format:g,parents:z})}))})})},d=function(a,f,n,u){var z=a.get();b(f.split(","),function(w){z[w]||(z[w]=[],z[w].similar=u);z[w].push(n)});a.set(z)};return{formatChanged:function(a,f,n,u,z){null===f.get()&&c(f,a);d(f,n,u,z)}}});
L("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],function(v){return{get:function(q){var p={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},
inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},
preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",
styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",
remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},
superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(h,b,c){v.each(c,function(d,a){q.setAttrib(h,a,d)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],
split:!1,expand:!1,deep:!0}]};v.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(h){p[h]={block:h,remove:"all"}});return p}}});L("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(v,q){return function(p){var h={},b=function(c,d){c&&("string"!==typeof c?q.each(c,function(a,f){b(f,a)}):(d=d.length?d:[d],q.each(d,function(a){"undefined"===typeof a.deep&&(a.deep=!a.selector);"undefined"===typeof a.split&&(a.split=!a.selector||
a.inline);"undefined"===typeof a.remove&&a.selector&&!a.inline&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),h[c]=d))};b(v.get(p.dom));b(p.settings.formats);return{get:function(c){return c?h[c]:h},register:b,unregister:function(c){c&&h[c]&&delete h[c];return h}}}});L("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(v,q,p){var h=q.each,b=
v.DOM,c=function(f,n){var u=n&&n.schema||new p({}),z=function(t){g="string"===typeof t?{name:t,classes:[],attrs:{}}:t;t=b.create(g.name);var y=g;y.classes.length&&b.addClass(t,y.classes.join(" "));b.setAttribs(t,y.attrs);return t},w=function(t,y){t="string"!==typeof t?t.nodeName.toLowerCase():t;return(t=(t=u.getElementRule(t))&&t.parentsRequired)&&t.length?y&&-1!==q.inArray(t,y)?y:t[0]:!1},m=function(t,y,C){var B,r=0<y.length&&y[0],k=r&&r.name;if(B=w(t,k))if(k===B){var x=y[0];y=y.slice(1)}else x=
B;else if(r)x=y[0],y=y.slice(1);else if(!C)return t;if(x){var A=z(x);A.appendChild(t)}C&&(A||(A=b.create("div"),A.appendChild(t)),q.each(C,function(l){l=z(l);A.insertBefore(l,t)}));return m(A,y,x&&x.siblings)};if(f&&f.length){var g=f[0];n=z(g);var e=b.create("div");e.appendChild(m(n,f.slice(1),g.siblings));return e}return""},d=function(f){var n,u={classes:[],attrs:{}};f=u.selector=q.trim(f);"*"!==f&&(n=f.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(z,w,m,g,e){switch(w){case "#":u.attrs.id=
m;break;case ".":u.classes.push(m);break;case ":":-1!==q.inArray(["checked","disabled","enabled","read-only","required"],m)&&(u.attrs[m]=m)}"["===g&&(z=e.match(/([\w\-]+)(?:="([^"]+))?/))&&(u.attrs[z[1]]=z[2]);return""}));u.name=n||"div";return u},a=function(f){if(!f||"string"!==typeof f)return[];f=f.split(/\s*,\s*/)[0];f=f.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return q.map(f.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){n=q.map(n.split(/(?:~\+|~|\+)/),d);var u=n.pop();n.length&&(u.siblings=n);return u}).reverse()};
return{getCssText:function(f,n){var u="";var z=f.settings.preview_styles;if(!1===z)return"";"string"!==typeof z&&(z="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");if("string"===typeof n){n=f.formatter.get(n);if(!n)return;n=n[0]}if("preview"in n&&(z=n.preview,!1===z))return"";var w=n.block||n.inline||"span";var m=a(n.selector);m.length?(m[0].name||(m[0].name=w),w=n.selector,m=c(m,f)):m=c([w],f);var g=b.select(w,
m)[0]||m.firstChild;h(n.styles,function(t,y){(t=t.replace(/%(\w+)/g,""))&&b.setStyle(g,y,t)});h(n.attributes,function(t,y){(t=t.replace(/%(\w+)/g,""))&&b.setAttrib(g,y,t)});h(n.classes,function(t){t=t.replace(/%(\w+)/g,"");b.hasClass(g,t)||b.addClass(g,t)});f.fire("PreviewFormats");b.setStyles(m,{position:"absolute",left:-65535});f.getBody().appendChild(m);var e=b.getStyle(f.getBody(),"fontSize",!0);e=/px$/.test(e)?parseInt(e,10):0;h(z.split(" "),function(t){var y=b.getStyle(g,t,!0);if("background-color"===
t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(y)&&(y=b.getStyle(f.getBody(),t,!0),"#ffffff"===b.toHex(y).toLowerCase()))return;if("color"!==t||"#000000"!==b.toHex(y).toLowerCase()){if("font-size"===t&&/em|%$/.test(y)){if(0===e)return;y=parseFloat(y,10)/(/%$/.test(y)?100:1);y=y*e+"px"}"border"===t&&y&&(u+="padding:0 2px;");u+=t+":"+y+";"}});f.fire("AfterPreviewFormats");b.remove(m);return u},parseSelector:a,selectorToHtml:function(f,n){return c(a(f),n)}}});L("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat",
"tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat"],function(v,q,p){return{toggle:function(h,b,c,d,a){b=b.get(c);!q.match(h,c,d,a)||"toggle"in b[0]&&!b[0].toggle?v.applyFormat(h,c,d,a):p.remove(h,c,d,a)}}});L("tinymce.core.keyboard.FormatShortcuts",[],function(){return{setup:function(v){v.addShortcut("meta+b","","Bold");v.addShortcut("meta+i","","Italic");v.addShortcut("meta+u","","Underline");for(var q=1;6>=q;q++)v.addShortcut("access+"+q,"",["FormatBlock",!1,"h"+q]);v.addShortcut("access+7",
"",["FormatBlock",!1,"p"]);v.addShortcut("access+8","",["FormatBlock",!1,"div"]);v.addShortcut("access+9","",["FormatBlock",!1,"address"])}}});L("tinymce.core.api.Formatter","ephox.katamari.api.Cell ephox.katamari.api.Fun tinymce.core.fmt.ApplyFormat tinymce.core.fmt.CaretFormat tinymce.core.fmt.FormatChanged tinymce.core.fmt.FormatRegistry tinymce.core.fmt.MatchFormat tinymce.core.fmt.Preview tinymce.core.fmt.RemoveFormat tinymce.core.fmt.ToggleFormat tinymce.core.keyboard.FormatShortcuts".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u){return function(z){var w=c(z),m=v(null);u.setup(z);h.setup(z);return{get:w.get,register:w.register,unregister:w.unregister,apply:q.curry(p.applyFormat,z),remove:q.curry(f.remove,z),toggle:q.curry(n.toggle,z,w),match:q.curry(d.match,z),matchAll:q.curry(d.matchAll,z),matchNode:q.curry(d.matchNode,z),canApply:q.curry(d.canApply,z),formatChanged:q.curry(b.formatChanged,z,m),getCssText:q.curry(a.getCssText,z)}}});L("ephox.katamari.api.Merger",["ephox.katamari.api.Type",
"global!Array","global!Error"],function(v,q,p){var h=function(c){return function(){for(var d=new q(arguments.length),a=0;a<d.length;a++)d[a]=arguments[a];if(0===d.length)throw new p("Can't merge zero objects");a={};for(var f=0;f<d.length;f++){var n=d[f],u;for(u in n)n.hasOwnProperty(u)&&(a[u]=c(a[u],n[u]))}return a}},b=h(function(c,d){return v.isObject(c)&&v.isObject(d)?b(c,d):d});h=h(function(c,d){return d});return{deepMerge:b,merge:h}});L("tinymce.core.api.Events",[],function(){return{firePreProcess:function(v,
q){return v.fire("PreProcess",q)},firePostProcess:function(v,q){return v.fire("PostProcess",q)}}});L("tinymce.core.dom.DomSerializerFilters",["ephox.katamari.api.Arr","tinymce.core.html.Entities"],function(v,q){return{register:function(p,h,b){p.addAttributeFilter("data-mce-tabindex",function(c,d){for(var a=c.length,f;a--;)f=c[a],f.attr("tabindex",f.attributes.map["data-mce-tabindex"]),f.attr(d,null)});p.addAttributeFilter("src,href,style",function(c,d){for(var a=c.length,f,n,u="data-mce-"+d,z=h.url_converter,
w=h.url_converter_scope;a--;)f=c[a],n=f.attributes.map[u],void 0!==n?(f.attr(d,0<n.length?n:null),f.attr(u,null)):(n=f.attributes.map[d],"style"===d?n=b.serializeStyle(b.parseStyle(n),f.name):z&&(n=z.call(w,n,d,f.name)),f.attr(d,0<n.length?n:null))});p.addAttributeFilter("class",function(c){for(var d=c.length,a,f;d--;)if(a=c[d],f=a.attr("class"))f=a.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),a.attr("class",0<f.length?f:null)});p.addAttributeFilter("data-mce-type",function(c,d,a){d=c.length;
for(var f;d--;)f=c[d],"bookmark"!==f.attributes.map["data-mce-type"]||a.cleanup||f.remove()});p.addNodeFilter("noscript",function(c){for(var d=c.length,a;d--;)if(a=c[d].firstChild)a.value=q.decode(a.value)});p.addNodeFilter("script,style",function(c,d){for(var a=c.length,f,n,u,z=function(w){return w.replace(/(\x3c!--\[CDATA\[|\]\]--\x3e)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((\x3c!--)?(\s*\/\/)?\s*<!\[CDATA\[|(\x3c!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*\x3c!--|\/\*\s*\x3c!--\s*\*\/)\s*[\r\n]*/gi,
"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\x3e)?|\s*\/\/\s*\]\]>(--\x3e)?|\/\/\s*(--\x3e)?|\]\]>|\/\*\s*--\x3e\s*\*\/|\s*--\x3e\s*)\s*$/g,"")};a--;)f=c[a],n=f.firstChild?f.firstChild.value:"","script"===d?((u=f.attr("type"))&&f.attr("type","mce-no/type"===u?null:u.replace(/^mce\-/,"")),"xhtml"===h.element_format&&0<n.length&&(f.firstChild.value="// <![CDATA[\n"+z(n)+"\n// ]]\x3e")):"xhtml"===h.element_format&&0<n.length&&(f.firstChild.value="\x3c!--\n"+z(n)+"\n--\x3e")});p.addNodeFilter("#comment",function(c){for(var d=
c.length,a;d--;)a=c[d],0===a.value.indexOf("[CDATA[")?(a.name="#cdata",a.type=4,a.value=a.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===a.value.indexOf("mce:protected ")&&(a.name="#text",a.type=3,a.raw=!0,a.value=unescape(a.value).substr(14))});p.addNodeFilter("xml:namespace,input",function(c,d){for(var a=c.length,f;a--;)f=c[a],7===f.type?f.remove():1===f.type&&("input"!==d||"type"in f.attributes.map||f.attr("type","text"))});p.addAttributeFilter("data-mce-type",function(c){v.each(c,function(d){"format-caret"===
d.attr("data-mce-type")&&(d.isEmpty(p.schema.getNonEmptyElements())?d.remove():d.unwrap())})});p.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(c,d){for(var a=c.length;a--;)c[a].attr(d,null)})},trimTrailingBr:function(p){var h;(p=p.lastChild)&&"br"===p.name&&(h=p.prev)&&"br"===h.name&&(p.remove(),h.remove())}}});L("tinymce.core.dom.DomSerializerPreProcess",["ephox.katamari.api.Merger","global!document","tinymce.core.api.Events",
"tinymce.core.util.Tools"],function(v,q,p,h){var b=function(c,d,a){var f=c.dom;d=d.cloneNode(!0);var n=q.implementation;if(n.createHTMLDocument){var u=n.createHTMLDocument("");h.each("BODY"===d.nodeName?d.childNodes:[d],function(w){u.body.appendChild(u.importNode(w,!0))});d="BODY"!==d.nodeName?u.body.firstChild:u.body;var z=f.doc;f.doc=u}p.firePreProcess(c,v.merge(a,{node:d}));z&&(f.doc=z);return d};return{process:function(c,d,a){return c&&c.hasEventListeners("PreProcess")&&!a.no_events?b(c,d,a):
d}}});L("tinymce.core.html.LegacyFilter",["ephox.katamari.api.Arr","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(v,q,p){var h=function(d,a){v.each(a,function(f){d.attr(f,null)})},b=function(d,a,f){d.addNodeFilter("font",function(n){v.each(n,function(u){var z=a.parse(u.attr("style")),w=u.attr("color"),m=u.attr("face"),g=u.attr("size");w&&(z.color=w);m&&(z["font-family"]=m);g&&(z["font-size"]=f[parseInt(u.attr("size"),10)-1]);u.name="span";u.attr("style",a.serialize(z));h(u,["color",
"face","size"])})})},c=function(d,a){d.addNodeFilter("strike",function(f){v.each(f,function(n){var u=a.parse(n.attr("style"));u["text-decoration"]="line-through";n.name="span";n.attr("style",a.serialize(u))})})};return{register:function(d,a){if(a.inline_styles){var f=q();a.convert_fonts_to_spans&&b(d,f,p.explode(a.font_size_legacy_values));c(d,f)}}}});L("tinymce.core.html.Node",[],function(){var v=/^[ \t\r\n]*$/,q={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},p=
function(b,c,d){var a=d?"lastChild":"firstChild";d=d?"prev":"next";if(b[a])return b[a];if(b!==c){if(a=b[d])return a;for(b=b.parent;b&&b!==c;b=b.parent)if(a=b[d])return a}},h=function(b,c){this.name=b;this.type=c;1===c&&(this.attributes=[],this.attributes.map={})};h.prototype={replace:function(b){b.parent&&b.remove();this.insert(b,this);this.remove();return this},attr:function(b,c){var d,a;if("string"!==typeof b){for(a in b)this.attr(a,b[a]);return this}if(d=this.attributes){if(void 0!==c){if(null===
c){if(b in d.map)for(delete d.map[b],a=d.length;a--;)if(d[a].name===b){d.splice(a,1);break}return this}if(b in d.map)for(a=d.length;a--;){if(d[a].name===b){d[a].value=c;break}}else d.push({name:b,value:c});d.map[b]=c;return this}return d.map[b]}},clone:function(){var b=new h(this.name,this.type),c,d;if(d=this.attributes){var a=[];a.map={};var f=0;for(c=d.length;f<c;f++){var n=d[f];"id"!==n.name&&(a[a.length]={name:n.name,value:n.value},a.map[n.name]=n.value)}b.attributes=a}b.value=this.value;b.shortEnded=
this.shortEnded;return b},wrap:function(b){this.parent.insert(b,this);b.append(this);return this},unwrap:function(){var b;for(b=this.firstChild;b;){var c=b.next;this.insert(b,this,!0);b=c}this.remove()},remove:function(){var b=this.parent,c=this.next,d=this.prev;if(b){if(b.firstChild===this){if(b.firstChild=c)c.prev=null}else d.next=c;if(b.lastChild===this){if(b.lastChild=d)d.next=null}else c.prev=d;this.parent=this.next=this.prev=null}return this},append:function(b){var c;b.parent&&b.remove();(c=
this.lastChild)?(c.next=b,b.prev=c,this.lastChild=b):this.lastChild=this.firstChild=b;b.parent=this;return b},insert:function(b,c,d){b.parent&&b.remove();var a=c.parent||this;d?(c===a.firstChild?a.firstChild=b:c.prev.next=b,b.prev=c.prev,b.next=c,c.prev=b):(c===a.lastChild?a.lastChild=b:c.next.prev=b,b.next=c.next,b.prev=c,c.next=b);b.parent=a;return b},getAll:function(b){var c,d=[];for(c=this.firstChild;c;c=p(c,this))c.name===b&&d.push(c);return d},empty:function(){var b,c;if(this.firstChild){var d=
[];for(c=this.firstChild;c;c=p(c,this))d.push(c);for(b=d.length;b--;)c=d[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(b,c,d){var a=this.firstChild,f;c=c||{};if(a){do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(b[a.name])return!1;for(f=a.attributes.length;f--;){var n=a.attributes[f].name;if("name"===n||0===n.indexOf("data-mce-bookmark"))return!1}}if(8===a.type||3===a.type&&!v.test(a.value)||3===a.type&&
a.parent&&c[a.parent.name]&&v.test(a.value)||d&&d(a))return!1}while(a=p(a,this))}return!0},walk:function(b){return p(this,null,b)}};h.create=function(b,c){var d;b=new h(b,q[b]||1);if(c)for(d in c)b.attr(d,c[d]);return b};return h});L("tinymce.core.html.DomParser",["tinymce.core.html.LegacyFilter","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(v,q,p,h,b){var c=b.makeMap,d=b.each,a=b.explode,f=b.extend,n=function(z,w,m,g){(z.padd_empty_with_br||
w.insert)&&m[g.name]?g.empty().append(new q("br","1")).shortEnded=!0:g.empty().append(new q("#text","3")).value="\u00a0"},u=function(z,w,m,g){return g.isEmpty(w,m,function(e){return(e=z.getElementRule(e.name))&&e.paddEmpty})};return function(z,w){var m=this,g={},e=[],t={},y={};z=z||{};z.validate="validate"in z?z.validate:!0;z.root_name=z.root_name||"body";m.schema=w=w||new h;var C=function(B){var r,k,x,A;var l=c("tr,td,th,tbody,thead,tfoot,table");var D=w.getNonEmptyElements();var E=w.getWhiteSpaceElements();
var F=w.getTextBlockElements();var H=w.getSpecialElements();for(r=0;r<B.length;r++){var I=B[r];if(I.parent&&!I.fixed)if(F[I.name]&&"li"==I.parent.name){for(k=I.next;k;){if(F[k.name])k.name="li",k.fixed=!0,I.parent.insert(k,I.parent);else break;k=k.next}I.unwrap(I)}else{var G=[I];for(k=I.parent;k&&!w.isValidChild(k.name,I.name)&&!l[k.name];k=k.parent)G.push(k);if(k&&1<G.length){G.reverse();var J=x=m.filterNode(G[0].clone());for(A=0;A<G.length-1;A++){if(w.isValidChild(x.name,G[A].name)){var M=m.filterNode(G[A].clone());
x.append(M)}else M=x;for(x=G[A].firstChild;x&&x!=G[A+1];){var P=x.next;M.append(x);x=P}x=M}u(w,D,E,J)?k.insert(I,G[0],!0):(k.insert(J,G[0],!0),k.insert(I,J));k=G[0];(u(w,D,E,k)||k&&k.firstChild&&k.firstChild===k.lastChild&&"br"===k.firstChild.name)&&k.empty().remove()}else I.parent&&("li"===I.name?(k=I.prev,!k||"ul"!==k.name&&"ul"!==k.name?(k=I.next,!k||"ul"!==k.name&&"ul"!==k.name?I.wrap(m.filterNode(new q("ul",1))):k.insert(I,k.firstChild,!0)):k.append(I)):w.isValidChild(I.parent.name,"div")&&w.isValidChild("div",
I.name)?I.wrap(m.filterNode(new q("div",1))):H[I.name]?I.empty().remove():I.unwrap())}}};m.filterNode=function(B){var r,k;x in g&&((k=t[x])?k.push(B):t[x]=[B]);for(r=e.length;r--;){var x=e[r].name;x in B.attributes.map&&((k=y[x])?k.push(B):y[x]=[B])}return B};m.addNodeFilter=function(B,r){d(a(B),function(k){var x=g[k];x||(g[k]=x=[]);x.push(r)})};m.addAttributeFilter=function(B,r){d(a(B),function(k){var x;for(x=0;x<e.length;x++)if(e[x].name===k){e[x].callbacks.push(r);return}e.push({name:k,callbacks:[r]})})};
m.parse=function(B,r){var k,x,A,l=[],D;r=r||{};t={};y={};var E=f(c("script,style,head,html,body,title,meta,param"),w.getBlockElements());var F=w.getNonEmptyElements();var H=w.children;var I=z.validate;var G="forced_root_block"in r?r.forced_root_block:z.forced_root_block;var J=w.getWhiteSpaceElements();var M=/^[ \t\r\n]+/;var P=/[ \t\r\n]+$/;var Q=/[ \t\r\n]+/g;var W=/^[ \t\r\n]+$/;var V=function(){var S=U.firstChild,aa=function(ta){ta&&((S=ta.firstChild)&&3==S.type&&(S.value=S.value.replace(M,"")),
(S=ta.lastChild)&&3==S.type&&(S.value=S.value.replace(P,"")))};if(w.isValidChild(U.name,G.toLowerCase())){for(;S;){var fa=S.next;if(3==S.type||1==S.type&&"p"!==S.name&&!E[S.name]&&!S.attr("data-mce-type")){if(!ia){var ia=ba(G,1);ia.attr(z.forced_root_block_attrs);U.insert(ia,S)}ia.append(S)}else aa(ia),ia=null;S=fa}aa(ia)}};var ba=function(S,aa){aa=new q(S,aa);var fa;S in g&&((fa=t[S])?fa.push(aa):t[S]=[aa]);return aa},N=function(S){var aa=w.getBlockElements();for(S=S.prev;S&&3===S.type;){var fa=
S.value.replace(P,"");if(0<fa.length){S.value=fa;break}if(fa=S.next){if(3==fa.type&&fa.value.length){S=S.prev;continue}if(!aa[fa.name]&&"script"!=fa.name&&"style"!=fa.name){S=S.prev;continue}}fa=S.prev;S.remove();S=fa}};var O=new p({validate:I,allow_script_urls:z.allow_script_urls,allow_conditional_comments:z.allow_conditional_comments,self_closing_elements:function(S){var aa,fa={};for(aa in S)"li"!==aa&&"p"!=aa&&(fa[aa]=S[aa]);return fa}(w.getSelfClosingElements()),cdata:function(S){k.append(ba("#cdata",
4)).value=S},text:function(S,aa){D||(S=S.replace(Q," "),k.lastChild&&E[k.lastChild.name]&&(S=S.replace(M,"")));if(0!==S.length){var fa=ba("#text",3);fa.raw=!!aa;k.append(fa).value=S}},comment:function(S){k.append(ba("#comment",8)).value=S},pi:function(S,aa){k.append(ba(S,7)).value=aa;N(k)},doctype:function(S){k.append(ba("#doctype",10)).value=S;N(k)},start:function(S,aa,fa){var ia,ta;if(ia=I?w.getElementRule(S):{}){ia=ba(ia.outputName||S,1);ia.attributes=aa;ia.shortEnded=fa;k.append(ia);(ta=H[k.name])&&
H[ia.name]&&!ta[ia.name]&&l.push(ia);for(ta=e.length;ta--;){var pa=e[ta].name;pa in aa.map&&((X=y[pa])?X.push(ia):y[pa]=[ia])}E[S]&&N(ia);fa||(k=ia);!D&&J[S]&&(D=!0)}},end:function(S){var aa,fa;if(fa=I?w.getElementRule(S):{}){if(E[S]&&!D){if((aa=k.firstChild)&&3===aa.type){var ia=aa.value.replace(M,"");if(0<ia.length)aa.value=ia;else{var ta=aa.next;aa.remove();for(aa=ta;aa&&3===aa.type;)ia=aa.value,ta=aa.next,(0===ia.length||W.test(ia))&&aa.remove(),aa=ta}}if((aa=k.lastChild)&&3===aa.type)if(ia=aa.value.replace(P,
""),0<ia.length)aa.value=ia;else for(ta=aa.prev,aa.remove(),aa=ta;aa&&3===aa.type;)ia=aa.value,ta=aa.prev,(0===ia.length||W.test(ia))&&aa.remove(),aa=ta}D&&J[S]&&(D=!1);if(fa.removeEmpty&&u(w,F,J,k)&&!k.attributes.map.name&&!k.attributes.map.id)S=k.parent,E[k.name]?k.empty().remove():k.unwrap(),k=S;else{if(S=fa.paddEmpty)S=(S=k)&&S.firstChild&&S.firstChild===S.lastChild&&"#text"===S.firstChild.name&&"\u00a0"===S.firstChild.value||u(w,F,J,k);S&&n(z,r,E,k);k=k.parent}}}},w);var U=k=new q(r.context||
z.root_name,11);O.parse(B);I&&l.length&&(r.context?r.invalid=!0:C(l));G&&("body"==U.name||r.isRootContent)&&V();if(!r.invalid){for(A in t){var X=g[A];B=t[A];for(x=B.length;x--;)B[x].parent||B.splice(x,1);O=0;for(V=X.length;O<V;O++)X[O](B,A,r)}O=0;for(V=e.length;O<V;O++)if(X=e[O],X.name in y){B=y[X.name];for(x=B.length;x--;)B[x].parent||B.splice(x,1);x=0;for(A=X.callbacks.length;x<A;x++)X.callbacks[x](B,X.name,r)}}return U};z.remove_trailing_brs&&m.addNodeFilter("br",function(B,r,k){var x=B.length,
A=f({},w.getBlockElements()),l=w.getNonEmptyElements(),D,E=w.getNonEmptyElements();A.body=1;for(r=0;r<x;r++){var F=B[r];var H=F.parent;if(A[F.parent.name]&&F===H.lastChild){for(D=F.prev;D;){var I=D.name;if("span"!==I||"bookmark"!==D.attr("data-mce-type")){if("br"!==I)break;if("br"===I){F=null;break}}D=D.prev}F&&(F.remove(),u(w,l,E,H)&&(F=w.getElementRule(H.name))&&(F.removeEmpty?H.remove():F.paddEmpty&&n(z,k,A,H)))}else{for(D=F;H&&H.firstChild===D&&H.lastChild===D;){D=H;if(A[H.name])break;H=H.parent}D===
H&&!0!==z.padd_empty_with_br&&(H=new q("#text",3),H.value="\u00a0",F.replace(H))}}});m.addAttributeFilter("href",function(B){var r=B.length,k=function(l){return l.split(" ").filter(function(D){return 0<D.length}).concat(["noopener"]).sort().join(" ")},x=function(l){l=l?b.trim(l):"";return/\b(noopener)\b/g.test(l)?l:k(l)};if(!z.allow_unsafe_link_target)for(;r--;){var A=B[r];"a"===A.name&&"_blank"===A.attr("target")&&A.attr("rel",x(A.attr("rel")))}});z.allow_html_in_named_anchor||m.addAttributeFilter("id,name",
function(B){for(var r=B.length,k,x,A,l;r--;)if(l=B[r],"a"===l.name&&l.firstChild&&!l.attr("href")){A=l.parent;k=l.lastChild;do x=k.prev,A.insert(k,l),k=x;while(k)}});z.fix_list_elements&&m.addNodeFilter("ul,ol",function(B){for(var r=B.length,k,x;r--;)if(k=B[r],x=k.parent,"ul"===x.name||"ol"===x.name)k.prev&&"li"===k.prev.name?k.prev.append(k):(x=new q("li",1),x.attr("style","list-style-type: none"),k.wrap(x))});z.validate&&w.getValidClasses()&&m.addAttributeFilter("class",function(B){for(var r=B.length,
k,x,A,l,D,E=w.getValidClasses(),F,H;r--;){k=B[r];x=k.attr("class").split(" ");D="";for(A=0;A<x.length;A++)l=x[A],H=!1,(F=E["*"])&&F[l]&&(H=!0),F=E[k.name],!H&&F&&F[l]&&(H=!0),H&&(D&&(D+=" "),D+=l);D.length||(D=null);k.attr("class",D)}});v.register(this,z)}});L("tinymce.core.dom.DomSerializer","ephox.katamari.api.Fun ephox.katamari.api.Merger tinymce.core.api.Events tinymce.core.dom.DOMUtils tinymce.core.dom.DomSerializerFilters tinymce.core.dom.DomSerializerPreProcess tinymce.core.html.DomParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u){var z=function(w,m,g){-1===u.inArray(m,g)&&(w.addAttributeFilter(g,function(e,t){for(var y=e.length;y--;)e[y].attr(t,null)}),m.push(g))};return function(w,m){var g=["data-mce-selected"];var e=m&&m.dom?m.dom:h.DOM;var t=m&&m.schema?m.schema:new a(w);w.entity_encoding=w.entity_encoding||"named";w.remove_trailing_brs="remove_trailing_brs"in w?w.remove_trailing_brs:!0;var y=new d(w,t);b.register(y,w,e);return{schema:t,addNodeFilter:y.addNodeFilter,addAttributeFilter:y.addAttributeFilter,
serialize:function(C,B){B=q.merge({format:"html"},B?B:{});C=c.process(m,C,B);C=n.trim(B.getInner?C.innerHTML:e.getOuterHTML(C));C=B.selection?C:u.trim(C);var r=B.selection?q.merge({forced_root_block:!1},B):B;C=y.parse(C,r);b.trimTrailingBr(C);"tree"===B.format?B=C:(C=(new f(w,t)).serialize(C),B=!B.no_events&&m?p.firePostProcess(m,q.merge(B,{content:C})).content:C);return B},addRules:function(C){t.addValidElements(C)},setRules:function(C){t.setValidElements(C)},addTempAttr:v.curry(z,y,g),getTempAttrs:function(){return g}}}});
L("tinymce.core.api.dom.Serializer",["tinymce.core.dom.DomSerializer"],function(v){return function(q,p){q=new v(q,p);return{schema:q.schema,addNodeFilter:q.addNodeFilter,addAttributeFilter:q.addAttributeFilter,serialize:q.serialize,addRules:q.addRules,setRules:q.setRules,addTempAttr:q.addTempAttr,getTempAttrs:q.getTempAttrs}}});L("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],
function(v,q,p,h){var b=function(a){return p.descendant(q.fromDom(a.getBody()),"*[data-mce-caret]").fold(v.constant(null),function(f){return f.dom()})},c=function(a,f){f.hasAttribute("data-mce-caret")&&(h.showCaretContainerBlock(f),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(f))},d=function(a,f){var n=b(a);n&&("compositionstart"===f.type?(f.preventDefault(),f.stopPropagation(),c(n)):h.hasContent(n)&&c(a,n))};return{setup:function(a){a.on("keyup compositionstart",v.curry(d,
a))}}});L("tinymce.core.api.dom.BookmarkManager",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks"],function(v,q){var p=function(h){return{getBookmark:v.curry(q.getBookmark,h),moveToBookmark:v.curry(q.moveToBookmark,h)}};p.isBookmarkNode=q.isBookmarkNode;return p});L("tinymce.core.dom.ControlSelection","ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Selectors global!document tinymce.core.dom.NodeType tinymce.core.dom.RangePoint tinymce.core.Env tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),
function(v,q,p,h,b,c,d,a,f,n){var u=b.isContentEditableFalse,z=b.isContentEditableTrue;return function(w,m){var g=m.dom,e=f.each,t,y,C,B,r,k,x,A,l,D,E,F,H,I,G=m.getDoc(),J=Math.abs,M=Math.round,P=m.getBody(),Q,W;var V={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};m.contentStyles.push(".mce-content-body div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: "+(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resizehandle:hover {background: #000}.mce-content-body img[data-mce-selected],.mce-content-body hr[data-mce-selected] {outline: 1px solid black;resize: none}.mce-content-body .mce-clonedresizable {position: absolute;"+
(d.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: "+(zenarioAB.isOpen?31E4:1E4)+"}.mce-content-body .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var ba=function(ha){return ha&&("IMG"===ha.nodeName||m.dom.is(ha,"figure.image"))},N=function(ha){var ea=
ha.target,na=m.selection.getRng();!ba(ha.target)||c.isXYWithinRange(ha.clientX,ha.clientY,na)||ha.isDefaultPrevented()||(ha.preventDefault(),m.selection.select(ea))},O=function(ha){return m.dom.is(ha,"figure.image")?ha.querySelector("img"):ha},U=function(ha){var ea=m.settings.object_resizing;if(!1===ea||d.iOS)return!1;"string"!=typeof ea&&(ea="table,img,figure.image,div");return"false"===ha.getAttribute("data-mce-resize")||ha==m.getBody()?!1:p.is(q.fromDom(ha),ea)},X=function(ha){var ea=ha.screenX-
r;var na=ha.screenY-k;H=ea*B[2]+l;I=na*B[3]+D;H=5>H?5:H;I=5>I?5:I;if(ba(t)&&!1!==m.settings.resize_img_proportional?!n.modifierPressed(ha):n.modifierPressed(ha)||ba(t)&&0!==B[2]*B[3])J(ea)>J(na)?(I=M(H*E),H=M(I/E)):(H=M(I/E),I=M(H*E));g.setStyles(O(y),{width:H,height:I});ha=B.startPos.x+ea;var ua=B.startPos.y+na;ha=0<ha?ha:0;ua=0<ua?ua:0;g.setStyles(C,{left:ha,top:ua,display:"block"});C.innerHTML=H+" &times; "+I;0>B[2]&&y.clientWidth<=H&&g.setStyle(y,"left",x+(l-H));0>B[3]&&y.clientHeight<=I&&g.setStyle(y,
"top",A+(D-I));ea=P.scrollWidth-Q;na=P.scrollHeight-W;0!==ea+na&&g.setStyles(C,{left:ha-ea,top:ua-na});F||(m.fire("ObjectResizeStart",{target:t,width:l,height:D}),F=!0)},S=function(){F=!1;var ha=function(ea,na){na&&(t.style[ea]||!m.schema.isValid(t.nodeName.toLowerCase(),ea)?g.setStyle(O(t),ea,na):g.setAttrib(O(t),ea,na))};ha("width",H);ha("height",I);g.unbind(G,"mousemove",X);g.unbind(G,"mouseup",S);h!=G&&(g.unbind(h,"mousemove",X),g.unbind(h,"mouseup",S));g.remove(y);g.remove(C);aa(t);m.fire("ObjectResized",
{target:t,width:H,height:I});g.setAttrib(t,"style",g.getAttrib(t,"style"));m.nodeChanged()},aa=function(ha){fa();pa();var ea=g.getPos(ha,P);x=ea.x;A=ea.y;ea=ha.getBoundingClientRect();var na=ea.width||ea.right-ea.left;var ua=ea.height||ea.bottom-ea.top;t!=ha&&(t=ha,H=I=0);ea=m.fire("ObjectSelected",{target:ha});U(ha)&&!ea.isDefaultPrevented()?e(V,function(va,Fa){var Ba;(Ba=g.get("mceResizeHandle"+Fa))&&g.remove(Ba);Ba=g.add(P,"div",{id:"mceResizeHandle"+Fa,"data-mce-bogus":"all","class":"mce-resizehandle",
unselectable:!0,style:"cursor:"+Fa+"-resize; margin:0; padding:0"});d.ie&&(Ba.contentEditable=!1);g.bind(Ba,"mousedown",function(za){za.stopImmediatePropagation();za.preventDefault();r=za.screenX;k=za.screenY;l=O(t).clientWidth;D=O(t).clientHeight;E=D/l;B=va;va.startPos={x:na*va[0]+x,y:ua*va[1]+A};Q=P.scrollWidth;W=P.scrollHeight;y=t.cloneNode(!0);g.addClass(y,"mce-clonedresizable");g.setAttrib(y,"data-mce-bogus","all");y.contentEditable=!1;y.unSelectabe=!0;g.setStyles(y,{left:x,top:A,margin:0});
y.removeAttribute("data-mce-selected");P.appendChild(y);g.bind(G,"mousemove",X);g.bind(G,"mouseup",S);h!=G&&(g.bind(h,"mousemove",X),g.bind(h,"mouseup",S));C=g.add(P,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+D)});va.elm=Ba;g.setStyles(Ba,{left:na*va[0]+x-Ba.offsetWidth/2,top:ua*va[1]+A-Ba.offsetHeight/2})}):fa();t.setAttribute("data-mce-selected","1")},fa=function(){var ha,ea;pa();t&&t.removeAttribute("data-mce-selected");for(ha in V)if(ea=g.get("mceResizeHandle"+ha))g.unbind(ea),
g.remove(ea)},ia=function(ha){var ea=function(ua,va){if(ua){do if(ua===va)return!0;while(ua=ua.parentNode)}};if(!F&&!m.removed){e(g.select("img[data-mce-selected],hr[data-mce-selected]"),function(ua){ua.removeAttribute("data-mce-selected")});var na="mousedown"==ha.type?ha.target:w.getNode();na=g.$(na).closest("table,img,figure.image,hr")[0];if(ea(na,P)&&(ya(),ha=w.getStart(!0),ea(ha,na)&&ea(w.getEnd(!0),na))){aa(na);return}fa()}},ta=function(ha){var ea;a:{for(ea=m.getBody();ha&&ha!=ea;){if(z(ha)||
u(ha)){ea=ha;break a}ha=ha.parentNode}ea=null}return u(ea)},pa=function(){for(var ha in V){var ea=V[ha];ea.elm&&(g.unbind(ea.elm),delete ea.elm)}},ya=function(){try{m.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ha){}};m.on("init",function(){ya();d.ie&&11<=d.ie&&(m.on("mousedown click",function(ea){var na=ea.target,ua=na.nodeName;F||!/^(TABLE|IMG|HR)$/.test(ua)||ta(na)||(2!==ea.button&&m.selection.select(na,"TABLE"==ua),"mousedown"==ea.type&&m.nodeChanged())}),m.dom.bind(P,"mscontrolselect",
function(ea){var na=function(ua){a.setEditorTimeout(m,function(){m.selection.select(ua)})};ta(ea.target)?(ea.preventDefault(),na(ea.target)):/^(TABLE|IMG|HR)$/.test(ea.target.nodeName)&&(ea.preventDefault(),"IMG"==ea.target.tagName&&na(ea.target))}));var ha=a.throttle(function(ea){m.composing||ia(ea)});m.on("nodechange ResizeEditor ResizeWindow drop",ha);m.on("keyup compositionend",function(ea){t&&"TABLE"==t.nodeName&&ha(ea)});m.on("hide blur",fa);m.on("contextmenu",N)});m.on("remove",pa);return{isResizable:U,
showResizeRect:aa,hideResizeRect:fa,updateResizeRect:ia,destroy:function(){t=y=null}}}});L("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(v){var q=function(p){for(var h=0,b=0;p&&p.nodeType;)h+=p.offsetLeft||0,b+=p.offsetTop||0,p=p.offsetParent;return{x:h,y:b}};return{scrollIntoView:function(p,h,b){var c=p.dom,d=c.getRoot();var a=0;var f={elm:h,alignToTop:b};p.fire("scrollIntoView",f);if(!f.isDefaultPrevented()&&v.isElement(h)){!1===b&&(a=h.offsetHeight);if("BODY"!==d.nodeName&&
(b=p.selection.getScrollContainer())){h=q(h).y-q(b).y+a;a=b.clientHeight;c=b.scrollTop;if(h<c||h+25>c+a)b.scrollTop=h<c?h:h-a+25;return}b=c.getViewPort(p.getWin());h=c.getPos(h).y+a;c=b.y;a=b.h;(h<b.y||h+25>c+a)&&p.getWin().scrollTo(0,h<c?h:h-a+25)}}}});L("tinymce.core.selection.CaretRangeFromPoint",["tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(v,q){var p=function(h,b,c){var d=c.elementFromPoint(h,b);var a=c.body.createTextRange();d&&"HTML"!==d.tagName||(d=c.body);a.moveToElementText(d);
c=q.toArray(a.getClientRects());c=c.sort(function(f,n){f=Math.abs(Math.max(f.top-b,f.bottom-b));n=Math.abs(Math.max(n.top-b,n.bottom-b));return f-n});if(0<c.length){b=(c[0].bottom+c[0].top)/2;try{return a.moveToPoint(h,b),a.collapse(!0),a}catch(f){}}return null};return{fromPoint:function(h,b,c){if(c.caretPositionFromPoint){if(h=c.caretPositionFromPoint(h,b)){var d=c.createRange();d.setStart(h.offsetNode,h.offset);d.collapse(!0)}}else if(c.caretRangeFromPoint)d=c.caretRangeFromPoint(h,b);else if(c.body.createTextRange){d=
c.body.createTextRange();try{d.moveToPoint(h,b),d.collapse(!0)}catch(f){d=p(h,b,c)}h=c.body;b=d&&d.parentElement?d.parentElement():null;c=v.isContentEditableFalse;a:{for(;b&&b!==h;){var a=b;if(v.isContentEditableTrue(a)||v.isContentEditableFalse(a)){h=b;break a}b=b.parentNode}h=null}return c.call(v,h)?null:d}return d}}});L("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(v){return{processRanges:function(q,p){return v.map(p,function(h){var b=q.fire("GetSelectionRange",
{range:h});return b.range!==h?b.range:h})}}});L("ephox.sugar.api.dom.Replication","ephox.sugar.api.properties.Attr ephox.sugar.api.node.Element ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Remove ephox.sugar.api.search.Traverse".split(" "),function(v,q,p,h,b,c){var d=function(f){return q.fromDom(f.dom().cloneNode(!0))},a=function(f,n){n=q.fromTag(n);f=v.clone(f);v.setAll(n,f);return n};return{shallow:function(f){return q.fromDom(f.dom().cloneNode(!1))},shallowAs:a,
deep:d,copy:function(f,n){n=a(f,n);f=c.children(d(f));h.append(n,f);return n},mutate:function(f,n){n=a(f,n);p.before(f,n);var u=c.children(f);h.append(n,u);b.remove(f);return n}}});L("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(v,q,p){return{fromElements:function(h,b){var c=(b||p).createDocumentFragment();v.each(h,function(d){c.appendChild(d.dom())});return q.fromDom(c)}}});L("tinymce.core.selection.SelectionUtils","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.katamari.api.Option ephox.katamari.api.Options ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element ephox.sugar.api.node.Node ephox.sugar.api.search.Traverse tinymce.core.dom.NodeType".split(" "),
function(v,q,p,h,b,c,d,a,f){var n=function(m){var g=m.startContainer;m=m.startOffset;return f.isText(g)?0===m?p.some(c.fromDom(g)):p.none():p.from(g.childNodes[m]).map(c.fromDom)},u=function(m){var g=m.endContainer;m=m.endOffset;return f.isText(g)?m===g.data.length?p.some(c.fromDom(g)):p.none():p.from(g.childNodes[m-1]).map(c.fromDom)},z=function(m){return a.firstChild(m).fold(q.constant([m]),function(g){return[m].concat(z(g))})},w=function(m){return a.lastChild(m).fold(q.constant([m]),function(g){return"br"===
d.name(g)?a.prevSibling(g).map(function(e){return[m].concat(w(e))}).getOr([]):[m].concat(w(g))})};return{hasAllContentsSelected:function(m,g){return h.liftN([n(g),u(g)],function(e,t){e=v.find(z(m),q.curry(b.eq,e));t=v.find(w(m),q.curry(b.eq,t));return e.isSome()&&t.isSome()}).getOr(!1)}}});L("tinymce.core.selection.SimpleTableModel","ephox.katamari.api.Arr ephox.katamari.api.Option ephox.katamari.api.Struct ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.InsertAll ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.search.SelectorFilter".split(" "),
function(v,q,p,h,b,c,d,a,f,n){var u=p.immutable("element","width","rows"),z=p.immutable("element","cells"),w=p.immutable("x","y"),m=function(B,r){B=parseInt(f.get(B,r),10);return isNaN(B)?1:B},g=function(B,r,k){B=B.rows();return!!(B[k]?B[k].cells():[])[r]},e=function(B){return v.foldl(B,function(r,k){return k.cells().length>r?k.cells().length:r},0)},t=function(B,r){B=B.rows();for(var k=0;k<B.length;k++)for(var x=B[k].cells(),A=0;A<x.length;A++)if(h.eq(x[A],r))return q.some(w(A,k));return q.none()},
y=function(B,r,k,x,A){var l=[];for(B=B.rows();k<=A;k++){var D=B[k].cells();D=r<x?D.slice(r,x+1):D.slice(x,r+1);l.push(z(B[k].element(),D))}return l},C=function(B){return v.map(B.rows(),function(r){var k=v.map(r.cells(),function(x){x=d.deep(x);f.remove(x,"colspan");f.remove(x,"rowspan");return x});r=d.shallow(r.element());c.append(r,k);return r})};return{fromDom:function(B){var r=u(d.shallow(B),0,[]);v.each(n.descendants(B,"tr"),function(k,x){v.each(n.descendants(k,"td,th"),function(A,l){for(;g(r,
l,x);)l++;for(var D=m(A,"rowspan"),E=m(A,"colspan"),F=r.rows(),H=x;H<x+D;H++){F[H]||(F[H]=z(d.deep(k),[]));for(var I=l;I<l+E;I++)F[H].cells()[I]=H==x&&I==l?A:d.shallow(A)}})});return u(r.element(),e(r.rows()),r.rows())},toDom:function(B){var r=C(B);B=d.shallow(B.element());var k=a.fromTag("tbody");c.append(k,r);b.append(B,k);return B},subsection:function(B,r,k){return t(B,r).bind(function(x){return t(B,k).map(function(A){var l=x.x(),D=x.y(),E=A.x();A=A.y();l=D<A?y(B,l,D,E,A):y(B,l,A,E,D);return u(B.element(),
e(l),l)})})}}});L("tinymce.core.selection.FragmentReader","ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.dom.Compare ephox.sugar.api.dom.Insert ephox.sugar.api.dom.Replication ephox.sugar.api.node.Element ephox.sugar.api.node.Fragment ephox.sugar.api.node.Node ephox.sugar.api.search.SelectorFind ephox.sugar.api.search.Traverse tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.selection.SelectionUtils tinymce.core.selection.SimpleTableModel tinymce.core.selection.TableCellSelection".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g){var e=function(x){return v.find(x,function(A){return"ul"===a.name(A)||"ol"===a.name(A)})},t=function(x,A){return v.find(x,function(l){return"li"===a.name(l)&&w.hasAllContentsSelected(l,A)}).fold(q.constant([]),function(l){return e(x).map(function(D){return[c.fromTag("li"),c.fromTag(a.name(D))]}).getOr([])})},y=function(x,A){x=v.foldl(A,function(l,D){h.append(D,l);return D},x);return 0<A.length?d.fromElements([x]):x},C=function(x){return u.isListItem(x)?n.parent(x).filter(u.isList).fold(q.constant([]),
function(A){return[x,A]}):u.isList(x)?[x]:[]},B=function(x,A){var l=c.fromDom(A.commonAncestorContainer),D=z.parentsAndSelf(l,x);x=v.filter(D,function(E){return u.isInline(E)||u.isHeading(E)});A=t(D,A);l=x.concat(A.length?A:C(l));return v.map(l,b.shallow)},r=function(){return d.fromElements([])},k=function(x,A){return f.ancestor(A[0],"table",q.curry(p.eq,x)).bind(function(l){var D=A[0],E=A[A.length-1];l=m.fromDom(l);return m.subsection(l,D,E).map(function(F){return d.fromElements([m.toDom(F)])})}).getOrThunk(r)};
return{read:function(x,A){var l=g.getCellsFromElementOrRanges(A,x);0<l.length?x=k(x,l):0<A.length&&A[0].collapsed?x=r():(A=A[0],x=y(c.fromDom(A.cloneContents()),B(x,A)));return x}}});L("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(v,q,p,h,b){return{getContent:function(c,d){var a=c.selection.getRng(),f=c.dom.create("body"),
n=c.selection.getSel(),u=q.processRanges(c,h.getRanges(n));d=d||{};d.get=!0;d.format=d.format||"html";d.selection=!0;d=c.fire("BeforeGetContent",d);if(d.isDefaultPrevented())return c.fire("GetContent",d),d.content;if("text"===d.format)return c.selection.isCollapsed()?"":b.trim(a.text||(n.toString?n.toString():""));a.cloneContents?(a=d.contextual?p.read(v.fromDom(c.getBody()),u).dom():a.cloneContents())&&f.appendChild(a):void 0!==a.item||void 0!==a.htmlText?(f.innerHTML="<br>"+(a.item?a.item(0).outerHTML:
a.htmlText),f.removeChild(f.firstChild)):f.innerHTML=a.toString();d.getInner=!0;f=c.selection.serializer.serialize(f,d);if("tree"===d.format)return f;d.content=c.selection.isCollapsed()?"":f;c.fire("GetContent",d);return d.content}}});L("tinymce.core.selection.SetSelectionContent",[],function(){return{setContent:function(v,q,p){var h=v.selection.getRng(),b=v.getDoc();p=p||{format:"html"};p.set=!0;p.selection=!0;p.content=q;if(!p.no_events&&(p=v.fire("BeforeSetContent",p),p.isDefaultPrevented())){v.fire("SetContent",
p);return}q=p.content;if(h.insertNode){q+='<span id="__caret">_</span>';if(h.startContainer==b&&h.endContainer==b)b.body.innerHTML=q;else if(h.deleteContents(),0===b.body.childNodes.length)b.body.innerHTML=q;else if(h.createContextualFragment)h.insertNode(h.createContextualFragment(q));else{var c=b.createDocumentFragment();var d=b.createElement("div");c.appendChild(d);d.outerHTML=q;h.insertNode(c)}q=v.dom.get("__caret");h=b.createRange();h.setStartBefore(q);h.setEndBefore(q);v.selection.setRng(h);
v.dom.remove("__caret");try{v.selection.setRng(h)}catch(a){}}else h.item&&(b.execCommand("Delete",!1,null),h=v.getRng()),/^\s+/.test(q)?(h.pasteHTML('<span id="__mce_tmp">_</span>'+q),v.dom.remove("__mce_tmp")):h.pasteHTML(q);p.no_events||v.fire("SetContent",p)}}});L("tinymce.core.dom.Selection","ephox.sugar.api.dom.Compare ephox.sugar.api.node.Element tinymce.core.Env tinymce.core.api.dom.BookmarkManager tinymce.core.caret.CaretPosition tinymce.core.dom.ControlSelection tinymce.core.dom.ScrollIntoView tinymce.core.dom.TreeWalker tinymce.core.focus.EditorFocus tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.EventProcessRanges tinymce.core.selection.GetSelectionContent tinymce.core.selection.MultiRange tinymce.core.selection.NormalizeRange tinymce.core.selection.SelectionBookmark tinymce.core.selection.SetSelectionContent tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e,t){var y=t.each,C=t.trim,B=function(r){return!(!r||!r.ownerDocument)&&v.contains(q.fromDom(r.ownerDocument),q.fromDom(r))};t=function(r,k,x,A){this.dom=r;this.win=k;this.serializer=x;this.editor=A;this.bookmarkManager=new h(this);this.controlSelection=new c(this,A)};t.prototype={setCursorLocation:function(r,k){var x=this.dom.createRng();r?(x.setStart(r,k),x.setEnd(r,k),this.setRng(x),this.collapse(!1)):(this._moveEndPoint(x,this.editor.getBody(),!0),this.setRng(x))},
getContent:function(r){return z.getContent(this.editor,r)},setContent:function(r,k){e.setContent(this.editor,r,k)},getStart:function(r){var k=this.getRng();var x=k.startContainer;1==x.nodeType&&x.hasChildNodes()&&(r&&k.collapsed||(x=x.childNodes[Math.min(x.childNodes.length-1,k.startOffset)]));return x&&3==x.nodeType?x.parentNode:x},getEnd:function(r){var k=this.getRng();var x=k.endContainer;var A=k.endOffset;1==x.nodeType&&x.hasChildNodes()&&(r&&k.collapsed||(x=x.childNodes[0<A?A-1:A]));return x&&
3==x.nodeType?x.parentNode:x},getBookmark:function(r,k){return this.bookmarkManager.getBookmark(r,k)},moveToBookmark:function(r){return this.bookmarkManager.moveToBookmark(r)},select:function(r,k){var x=this.dom,A=x.createRng();r&&(x=x.nodeIndex(r),A.setStart(r.parentNode,x),A.setEnd(r.parentNode,x+1),k&&(this._moveEndPoint(A,r,!0),this._moveEndPoint(A,r)),this.setRng(A));return r},isCollapsed:function(){var r=this.getRng(),k=this.getSel();return!r||r.item?!1:r.compareEndPoints?0===r.compareEndPoints("StartToEnd",
r):!k||r.collapsed},collapse:function(r){var k=this.getRng();k.collapse(!!r);this.setRng(k)},getSel:function(){var r=this.win;return r.getSelection?r.getSelection():r.document.selection},getRng:function(r){var k;r=function(D,E,F){try{return E.compareBoundaryPoints(D,F)}catch(H){return-1}};if(!this.win)return null;var x=this.win.document;if("undefined"===typeof x||null===x)return null;if(void 0!==this.editor.bookmark&&!1===f.hasFocus(this.editor)){var A=g.getRng(this.editor);if(A.isSome())return A.getOr(x.createRange())}try{if(k=
this.getSel())var l=0<k.rangeCount?k.getRangeAt(0):k.createRange?k.createRange():x.createRange()}catch(D){}(l=u.processRanges(this.editor,[l])[0])||(l=x.createRange?x.createRange():x.body.createTextRange());l.setStart&&9===l.startContainer.nodeType&&l.collapsed&&(k=this.dom.getRoot(),l.setStart(k,0),l.setEnd(k,0));this.selectedRange&&this.explicitRange&&(0===r(l.START_TO_START,l,this.selectedRange)&&0===r(l.END_TO_END,l,this.selectedRange)?l=this.explicitRange:this.explicitRange=this.selectedRange=
null);return l},setRng:function(r,k){var x;var A=(A=r)?A.select?!0:B(A.startContainer)&&B(A.endContainer):!1;if(A)if(r.select){this.explicitRange=null;try{r.select()}catch(l){}}else{A=this.getSel();r=this.editor.fire("SetSelectionRange",{range:r,forward:k}).range;if(A){this.explicitRange=r;try{A.removeAllRanges(),A.addRange(r)}catch(l){}!1===k&&A.extend&&(A.collapse(r.endContainer,r.endOffset),A.extend(r.startContainer,r.startOffset));this.selectedRange=0<A.rangeCount?A.getRangeAt(0):null}!r.collapsed&&
r.startContainer===r.endContainer&&A.setBaseAndExtent&&!p.ie&&2>r.endOffset-r.startOffset&&r.startContainer.hasChildNodes()&&(x=r.startContainer.childNodes[r.startOffset])&&"IMG"===x.tagName&&(A.setBaseAndExtent(r.startContainer,r.startOffset,r.endContainer,r.endOffset),A.anchorNode===r.startContainer&&A.focusNode===r.endContainer||A.setBaseAndExtent(x,0,x,1));this.editor.fire("AfterSetSelectionRange",{range:r,forward:k})}},setNode:function(r){this.setContent(this.dom.getOuterHTML(r));return r},getNode:function(){var r=
this.getRng();var k=this.dom.getRoot();var x=function(F,H){for(var I=F;F&&3===F.nodeType&&0===F.length;)F=H?F.nextSibling:F.previousSibling;return F||I};if(!r)return k;var A=r.startContainer;var l=r.endContainer;var D=r.startOffset;var E=r.endOffset;k=r.commonAncestorContainer;return!r.collapsed&&(A==l&&2>E-D&&A.hasChildNodes()&&(k=A.childNodes[D]),3===A.nodeType&&3===l.nodeType&&(A=A.length===D?x(A.nextSibling,!0):A.parentNode,l=0===E?x(l.previousSibling,!1):l.parentNode,A&&A===l))?A:k&&3==k.nodeType?
k.parentNode:k},getSelectedBlocks:function(r,k){var x=this.dom,A=[];var l=x.getRoot();r=x.getParent(r||this.getStart(),x.isBlock);k=x.getParent(k||this.getEnd(),x.isBlock);r&&r!=l&&A.push(r);if(r&&k&&r!=k){var D=r;for(var E=new a(r,l);(D=E.next())&&D!=k;)x.isBlock(D)&&A.push(D)}k&&r!=k&&k!=l&&A.push(k);return A},isForward:function(){var r=this.dom,k=this.getSel();if(!k||!k.anchorNode||!k.focusNode)return!0;var x=r.createRng();x.setStart(k.anchorNode,k.anchorOffset);x.collapse(!0);r=r.createRng();
r.setStart(k.focusNode,k.focusOffset);r.collapse(!0);return 0>=x.compareBoundaryPoints(x.START_TO_START,r)},normalize:function(){var r=this,k=r.getRng();if(!w.hasMultipleRanges(r.getSel())){var x=m.normalize(r.dom,k);x.each(function(A){r.setRng(A,r.isForward())});return x.getOr(k)}return k},selectorChanged:function(r,k){var x=this;if(!x.selectorChangedData){x.selectorChangedData={};var A={};x.editor.on("NodeChange",function(l){var D=l.element,E=x.dom,F=E.getParents(D,null,E.getRoot()),H={};y(x.selectorChangedData,
function(I,G){y(F,function(J){if(E.is(J,G))return A[G]||(y(I,function(M){M(!0,{node:J,selector:G,parents:F})}),A[G]=I),H[G]=I,!1})});y(A,function(I,G){H[G]||(delete A[G],y(I,function(J){J(!1,{node:D,selector:G,parents:F})}))})})}x.selectorChangedData[r]||(x.selectorChangedData[r]=[]);x.selectorChangedData[r].push(k);return x},getScrollContainer:function(){for(var r,k=this.dom.getRoot();k&&"BODY"!=k.nodeName;){if(k.scrollHeight>k.clientHeight){r=k;break}k=k.parentNode}return r},scrollIntoView:function(r,
k){d.scrollIntoView(this.editor,r,k)},placeCaretAt:function(r,k){this.setRng(n.fromPoint(r,k,this.editor.getDoc()))},_moveEndPoint:function(r,k,x){var A=k,l=new a(k,A),D=this.dom.schema.getNonEmptyElements();do{if(3==k.nodeType&&0!==C(k.nodeValue).length){x?r.setStart(k,0):r.setEnd(k,k.nodeValue.length);return}if(D[k.nodeName]&&!/^(TD|TH)$/.test(k.nodeName)){x?r.setStartBefore(k):"BR"==k.nodeName?r.setEndBefore(k):r.setEndAfter(k);return}if(p.ie&&11>p.ie&&this.dom.isBlock(k)&&this.dom.isEmpty(k)){x?
r.setStart(k,0):r.setEnd(k,0);return}}while(k=x?l.next():l.prev());"BODY"==A.nodeName&&(x?r.setStart(A,0):r.setEnd(A,A.childNodes.length))},getBoundingClientRect:function(){var r=this.getRng();return r.collapsed?b.fromRangeStart(r).getClientRects()[0]:r.getBoundingClientRect()},destroy:function(){this.win=null;this.controlSelection.destroy()}};return t});L("tinymce.core.caret.LineWalker","tinymce.core.util.Fun tinymce.core.util.Arr tinymce.core.dom.Dimensions tinymce.core.caret.CaretCandidate tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.CaretPosition tinymce.core.geom.ClientRect".split(" "),
function(v,q,p,h,b,c,d,a){v=v.curry;var f=function(z,w,m,g){for(;(g=b.findNode(g,z,h.isEditableCaretCandidate,w))&&!m(g););},n=function(z,w,m,g,e,t){var y=0,C=[],B=function(k){var x=p.getClientRects(k);-1==z&&(x=x.reverse());for(k=0;k<x.length;k++){var A=x[k];if(!m(A,r)){0<C.length&&w(A,q.last(C))&&y++;A.line=y;if(e(A))return!0;C.push(A)}}};var r=q.last(t.getClientRects());if(!r)return C;t=t.getNode();B(t);f(z,g,B,t);return C},u=v(n,-1,a.isAbove,a.isBelow);n=v(n,1,a.isBelow,a.isAbove);return{upUntil:u,
downUntil:n,positionsUntil:function(z,w,m,g){var e=new c(w);w=[];var t=0;if(1==z){z=e.next;e=a.isBelow;var y=a.isAbove;g=d.after(g)}else z=e.prev,e=a.isAbove,y=a.isBelow,g=d.before(g);var C=q.last(g.getClientRects());do if(g.isVisible()){var B=q.last(g.getClientRects());if(!y(B,C)){0<w.length&&e(B,q.last(w))&&t++;B=a.clone(B);B.position=g;B.line=t;if(m(B))break;w.push(B)}}while(g=z(g));return w},isAboveLine:v(function(z,w){return w.line>z}),isLine:v(function(z,w){return w.line===z})}});L("tinymce.core.keyboard.CefNavigation",
"tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.caret.CaretPosition tinymce.core.caret.CaretUtils tinymce.core.caret.CaretWalker tinymce.core.caret.LineUtils tinymce.core.caret.LineWalker tinymce.core.dom.NodeType tinymce.core.keyboard.CefUtils tinymce.core.selection.RangeNodes tinymce.core.util.Arr tinymce.core.util.Fun".split(" "),function(v,q,p,h,b,c,d,a,f,n,u,z){var w=a.isContentEditableFalse,m=n.getSelectedNode,g=h.isAfterContentEditableFalse,e=h.isBeforeContentEditableFalse,
t=function(r,k){for(;(k=r(k))&&!k.isVisible(););return k},y=function(r,k,x){x=h.normalizeRange(r,k,x);return-1===r?p.fromRangeStart(x):p.fromRangeEnd(x)},C=function(r,k,x,A,l){if(!l.collapsed){var D=m(l);if(w(D))return f.showCaret(r,k,D,-1===r)}var E=q.isCaretContainerBlock(l.startContainer);D=y(r,k.getBody(),l);if(A(D))return f.selectNode(k,D.getNode(-1===r));D=x(D);if(!D)return E?l:null;if(A(D))return f.showCaret(r,k,D.getNode(-1===r),1===r);x=x(D);return A(x)&&(A=D,l=h.isInSameBlock(A,x),A=!l&&
a.isBr(A.getNode())?!0:l,A)?f.showCaret(r,k,x.getNode(-1===r),1===r):E?f.renderRangeCaret(k,D.toRange()):null},B=function(r,k,x){var A=new b(r.getBody());var l=z.curry(t,A.next),D=z.curry(t,A.prev);if(x.collapsed&&r.settings.forced_root_block&&(A=r.dom.getParent(x.startContainer,"PRE"))&&(x=1===k?l(p.fromRangeStart(x)):D(p.fromRangeStart(x)),!x)){x=r.dom.create(r.settings.forced_root_block);if(!v.ie||11<=v.ie)x.innerHTML='<br data-mce-bogus="1">';1===k?r.$(A).after(x):r.$(A).before(x);r.selection.select(x,
!0);r.selection.collapse()}};return{moveH:function(r,k){return function(){var x=new b(r.getBody());var A=z.curry(t,x.next),l=z.curry(t,x.prev);x=k?1:-1;l=k?A:l;var D=k?e:g;A=r.selection.getRng();x=(l=C(x,r,l,D,A))?l:(l=B(r,x,A))?l:null;return x?(r.selection.setRng(x),!0):!1}},moveV:function(r,k){return function(){var x=k?1:-1;var A=k?d.downUntil:d.upUntil,l=r.selection.getRng();b:{var D=m(l);var E=y(x,r.getBody(),l);A=A(r.getBody(),d.isAboveLine(1),E);var F=u.filter(A,d.isLine(1));A=u.last(E.getClientRects());
e(E)&&(D=E.getNode());g(E)&&(D=E.getNode(!0));if(A)if(A=A.left,(E=c.findClosestClientRect(F,A))&&w(E.node))D=Math.abs(A-E.left),A=Math.abs(A-E.right),D=f.showCaret(x,r,E.node,D<A);else{if(D){D=d.positionsUntil(x,r.getBody(),d.isAboveLine(1),D);if(E=c.findClosestClientRect(u.filter(D,d.isLine(1)),A)){D=f.renderRangeCaret(r,E.position.toRange());break b}if(E=u.last(u.filter(D,d.isLine(0)))){D=f.renderRangeCaret(r,E.position.toRange());break b}}D=void 0}else D=null}x=D?D:(D=B(r,x,l))?D:null;return x?
(r.selection.setRng(x),!0):!1}}}});L("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(v,q,p){var h=function(c){return v.map(c,function(d){return p.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:q.noop},d)})},b=function(c,d){return v.bind(h(c),function(a){return d.keyCode===a.keyCode&&d.shiftKey===a.shiftKey&&d.altKey===a.altKey&&d.ctrlKey===a.ctrlKey&&d.metaKey===a.metaKey?[a]:[]})};return{match:b,action:function(c){var d=
Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,d)}},execute:function(c,d){return v.find(b(c,d),function(a){return a.action()})}}});L("tinymce.core.keyboard.ArrowKeys",["ephox.sand.api.PlatformDetection","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(v,q,p,h,b){var c=function(d,a,f){var n=v.detect().os;h.execute([{keyCode:b.RIGHT,action:p.moveH(d,!0)},{keyCode:b.LEFT,action:p.moveH(d,
!1)},{keyCode:b.UP,action:p.moveV(d,!1)},{keyCode:b.DOWN,action:p.moveV(d,!0)},{keyCode:b.RIGHT,action:q.move(d,a,!0)},{keyCode:b.LEFT,action:q.move(d,a,!1)},{keyCode:b.RIGHT,ctrlKey:!n.isOSX(),altKey:n.isOSX(),action:q.moveNextWord(d,a)},{keyCode:b.LEFT,ctrlKey:!n.isOSX(),altKey:n.isOSX(),action:q.movePrevWord(d,a)}],f).each(function(u){f.preventDefault()})};return{setup:function(d,a){d.on("keydown",function(f){!1===f.isDefaultPrevented()&&c(d,a,f)})}}});L("tinymce.core.delete.InlineFormatDelete",
"ephox.katamari.api.Arr ephox.katamari.api.Fun ephox.sugar.api.node.Element ephox.sugar.api.search.Traverse tinymce.core.caret.CaretPosition tinymce.core.delete.DeleteElement tinymce.core.delete.DeleteUtils tinymce.core.dom.ElementType tinymce.core.dom.Parents tinymce.core.fmt.CaretFormat".split(" "),function(v,q,p,h,b,c,d,a,f,n){var u=function(g,e){var t=f.parentsAndSelf(e,g);return v.findIndex(t,a.isBlock).fold(q.constant(t),function(y){return t.slice(0,y)})},z=function(g){return 1===h.children(g).length},
w=function(g,e,t,y){var C=q.curry(n.isFormatElement,e);y=v.map(v.filter(y,C),function(B){return B.dom()});0===y.length?c.deleteElement(e,g,t):(g=n.replaceWithCaretFormat(t.dom(),y),e.selection.setRng(g.toRange()))},m=function(g,e){var t=p.fromDom(g.getBody()),y=p.fromDom(g.selection.getStart()),C=v.filter(u(t,y),z);return v.last(C).map(function(B){var r=b.fromRangeStart(g.selection.getRng());return d.willDeleteLastPositionInElement(e,r,B.dom())?(w(e,g,B,C),!0):!1}).getOr(!1)};return{backspaceDelete:function(g,
e){return g.selection.isCollapsed()?m(g,e):!1}}});L("tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.delete.BlockBoundaryDelete tinymce.core.delete.BlockRangeDelete tinymce.core.delete.CefDelete tinymce.core.delete.InlineBoundaryDelete tinymce.core.delete.InlineFormatDelete tinymce.core.delete.TableDelete tinymce.core.keyboard.MatchKeys tinymce.core.util.VK".split(" "),function(v,q,p,h,b,c,d,a){var f=function(n,u,z){d.execute([{keyCode:a.BACKSPACE,action:d.action(p.backspaceDelete,n,!1)},
{keyCode:a.DELETE,action:d.action(p.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(h.backspaceDelete,n,u,!1)},{keyCode:a.DELETE,action:d.action(h.backspaceDelete,n,u,!0)},{keyCode:a.BACKSPACE,action:d.action(q.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(q.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(v.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(v.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(c.backspaceDelete,n,!1)},{keyCode:a.DELETE,
action:d.action(c.backspaceDelete,n,!0)},{keyCode:a.BACKSPACE,action:d.action(b.backspaceDelete,n,!1)},{keyCode:a.DELETE,action:d.action(b.backspaceDelete,n,!0)}],z).each(function(w){z.preventDefault()})};return{setup:function(n,u){n.on("keydown",function(z){!1===z.isDefaultPrevented()&&f(n,u,z)});n.on("keyup",function(z){!1===z.isDefaultPrevented()&&d.execute([{keyCode:a.BACKSPACE,action:d.action(p.paddEmptyElement,n)},{keyCode:a.DELETE,action:d.action(p.paddEmptyElement,n)}],z)})}}});L("tinymce.core.api.Settings",
[],function(){var v=function(q,p,h){var b=q.getParam(p,h);return-1!==b.indexOf("=")?(p=q.getParam(p,"","hash"),p.hasOwnProperty(q.id)?p[q.id]:h):b};return{getIframeAttrs:function(q){return q.getParam("iframe_attrs",{})},getDocType:function(q){return q.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(q){return q.getParam("document_base_url","")},getBodyId:function(q){return v(q,"body_id","tinymce")},getBodyClass:function(q){return v(q,"body_class","")},getContentSecurityPolicy:function(q){return q.getParam("content_security_policy",
"")},shouldPutBrInPre:function(q){return q.getParam("br_in_pre",!0)},getForcedRootBlock:function(q){if(q.getParam("force_p_newlines",!1))return"p";q=q.getParam("forced_root_block","p");return!1===q?"":q},getForcedRootBlockAttrs:function(q){return q.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(q){return q.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(q){return q.getParam("no_newline_selector","")},shouldKeepStyles:function(q){return q.getParam("keep_styles",
!0)},shouldEndContainerOnEmtpyBlock:function(q){return q.getParam("end_container_on_empty_block",!1)}}});L("tinymce.core.newline.NewLineUtils","ephox.katamari.api.Fun ephox.katamari.api.Option ephox.sugar.api.node.Element tinymce.core.dom.ElementType tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker".split(" "),function(v,q,p,h,b,c){var d=function(a){return q.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))};return{moveToCaretPosition:function(a,f){var n,u,z=f,w=a.dom,m=a.schema.getMoveCaretBeforeOnEnterElements();
if(f){if(/^(LI|DT|DD)$/.test(f.nodeName)){a:{for(n=f.firstChild;n;){if(1===n.nodeType||3===n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))break a;n=n.nextSibling}n=void 0}n&&/^(UL|OL|DL)$/.test(n.nodeName)&&f.insertBefore(w.doc.createTextNode("\u00a0"),f.firstChild)}var g=w.createRng();f.normalize();if(f.hasChildNodes()){for(n=new c(f,f);u=n.current();){if(b.isText(u)){g.setStart(u,0);g.setEnd(u,0);break}if(m[u.nodeName.toLowerCase()]){g.setStartBefore(u);g.setEndBefore(u);break}z=u;n.next()}u||(g.setStart(z,
0),g.setEnd(z,0))}else b.isBr(f)?f.nextSibling&&w.isBlock(f.nextSibling)?(g.setStartBefore(f),g.setEndBefore(f)):(g.setStartAfter(f),g.setEndAfter(f)):(g.setStart(f,0),g.setEnd(f,0));a.selection.setRng(g);w.remove(void 0);a.selection.scrollIntoView(f)}},getEditableRoot:function(a,f){for(var n=a.getRoot(),u;f!==n&&"false"!==a.getContentEditable(f);)"true"===a.getContentEditable(f)&&(u=f),f=f.parentNode;return f!==n?u:n},getParentBlock:d,getParentBlockName:function(a){return d(a).fold(v.constant(""),
function(f){return f.nodeName.toUpperCase()})},isListItemParentBlock:function(a){return d(a).filter(function(f){return h.isListItem(p.fromDom(f))}).isSome()}}});L("tinymce.core.newline.InsertLi",["tinymce.core.dom.NodeType","tinymce.core.newline.NewLineUtils"],function(v,q){var p=function(c){return c&&/^(OL|UL|LI)$/.test(c.nodeName)},h=function(c){var d=c.parentNode;return/^(LI|DT|DD)$/.test(d.nodeName)?d:c},b=function(c,d,a){for(c=c[a?"firstChild":"lastChild"];c&&!v.isElement(c);)c=c[a?"nextSibling":
"previousSibling"];return c===d};return{insert:function(c,d,a,f,n){var u=c.dom,z=c.selection.getRng();if(a!==c.getBody()){var w=a;p(w)&&p(w.parentNode)&&(n="LI");d=n?d(n):u.create("BR");b(a,f,!0)&&b(a,f,!1)?a&&a.parentNode&&"LI"===a.parentNode.nodeName?u.insertAfter(d,h(a)):u.replace(d,a):b(a,f,!0)?a&&a.parentNode&&"LI"===a.parentNode.nodeName?(u.insertAfter(d,h(a)),d.appendChild(u.doc.createTextNode(" ")),d.appendChild(a)):a.parentNode.insertBefore(d,a):b(a,f,!1)?u.insertAfter(d,h(a)):(a=h(a),z=
z.cloneRange(),z.setStartAfter(f),z.setEndAfter(a),z=z.extractContents(),"LI"===n&&z.firstChild&&"LI"===z.firstChild.nodeName?(d=z.firstChild,u.insertAfter(z,a)):(u.insertAfter(z,a),u.insertAfter(d,a)));u.remove(f);q.moveToCaretPosition(c,d)}}}});L("tinymce.core.newline.InsertBlock","tinymce.core.api.Settings tinymce.core.caret.CaretContainer tinymce.core.dom.NodeType tinymce.core.dom.TreeWalker tinymce.core.fmt.CaretFormat tinymce.core.newline.InsertLi tinymce.core.newline.NewLineUtils tinymce.core.selection.NormalizeRange tinymce.core.text.Zwsp tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n){var u=function(k){k.innerHTML='<br data-mce-bogus="1">'},z=function(k,x){return k.nodeName===x||k.previousSibling&&k.previousSibling.nodeName===x},w=function(k,x){return x&&k.isBlock(x)&&!/^(TD|TH|CAPTION|FORM)$/.test(x.nodeName)&&!/^(fixed|absolute)/i.test(x.style.position)&&"true"!==k.getContentEditable(x)},m=function(k,x,A){var l=[];if(A){for(;A=A.firstChild;){if(k.isBlock(A))return;p.isElement(A)&&!x[A.nodeName.toLowerCase()]&&l.push(A)}for(x=l.length;x--;)A=l[x],
!A.hasChildNodes()||A.firstChild===A.lastChild&&""===A.firstChild.nodeValue?k.remove(A):A&&"A"===A.nodeName&&0===n.trim(f.trim(A.innerText||A.textContent)).length&&k.remove(A)}},g=function(k,x,A){return!1===p.isText(x)?A:k?1===A&&x.data.charAt(A-1)===f.ZWSP?0:A:A===x.data.length-1&&x.data.charAt(A)===f.ZWSP?x.data.length:A},e=function(k){var x=k.cloneRange();x.setStart(k.startContainer,g(!0,k.startContainer,k.startOffset));x.setEnd(k.endContainer,g(!1,k.endContainer,k.endOffset));return x},t=function(k){do p.isText(k)&&
(k.nodeValue=k.nodeValue.replace(/^[\r\n]+/,"")),k=k.firstChild;while(k)},y=function(k,x){for(var A=k.getRoot(),l;x!==A&&"false"!==k.getContentEditable(x);)"true"===k.getContentEditable(x)&&(l=x),x=x.parentNode;return x!==A?l:A},C=function(k,x){var A=v.getForcedRootBlock(k);A&&A.toLowerCase()===x.tagName.toLowerCase()&&k.dom.setAttribs(x,v.getForcedRootBlockAttrs(k))},B=function(k,x,A,l,D){var E=x||"P";x=k.dom;var F=y(x,l);var H=x.getParent(l,x.isBlock);if(!H||!w(x,H)){H=H||F;var I=H===k.getBody()||
H&&/^(TD|TH|CAPTION)$/.test(H.nodeName)?H.nodeName.toLowerCase():H.parentNode.nodeName.toLowerCase();if(!H.hasChildNodes())return E=x.create(E),C(k,E),H.appendChild(E),A.setStart(E,0),A.setEnd(E,0),E;for(F=l;F.parentNode!==H;)F=F.parentNode;for(;F&&!x.isBlock(F);){var G=F;F=F.previousSibling}if(G&&k.schema.isValidChild(I,E.toLowerCase())){E=x.create(E);C(k,E);G.parentNode.insertBefore(E,G);for(F=G;F&&!x.isBlock(F);)k=F.nextSibling,E.appendChild(F),F=k;A.setStart(l,D);A.setEnd(l,D)}}return l},r=function(k,
x){var A;x.normalize();(A=x.lastChild)&&!/^(left|right)$/gi.test(k.getStyle(A,"float",!0))||k.add(x,"br")};return{insert:function(k,x){var A,l,D=k.dom,E=k.schema,F=E.getNonEmptyElements(),H=k.selection.getRng(),I=function(X){var S=M,aa=E.getTextInlineElements();X||"TABLE"===N||"HR"===N?(X=D.create(X||Q),C(k,X)):X=l.cloneNode(!1);var fa=X;if(!1===v.shouldKeepStyles(k))D.setAttrib(X,"style",null),D.setAttrib(X,"class",null);else{do if(aa[S.nodeName]&&!b.isCaretNode(S)){var ia=S.cloneNode(!1);D.setAttrib(ia,
"id","");X.hasChildNodes()?ia.appendChild(X.firstChild):fa=ia;X.appendChild(ia)}while((S=S.parentNode)&&S!==A)}u(fa);return X},G=function(X){var S=g(X,M,P);if(p.isText(M)&&(X?0<S:S<M.nodeValue.length))return!1;if(M.parentNode===l&&V&&!X||X&&p.isElement(M)&&M===l.firstChild)return!0;if(z(M,"TABLE")||z(M,"HR"))return V&&!X||!V&&X;var aa=new h(M,l);for(p.isText(M)&&(X&&0===S?aa.prev():X||S!==M.nodeValue.length||aa.next());S=aa.current();){if(p.isElement(S)){if(!S.getAttribute("data-mce-bogus")&&(S=S.nodeName.toLowerCase(),
F[S]&&"br"!==S))return!1}else if(p.isText(S)&&!/^[ \t\r\n]*$/.test(S.nodeValue))return!1;X?aa.prev():aa.next()}return!0},J=function(){U=/^(H[1-6]|PRE|FIGURE)$/.test(N)&&"HGROUP"!==O?I(Q):I();v.shouldEndContainerOnEmtpyBlock(k)&&w(D,ba)&&D.isEmpty(l)?U=D.split(ba,l):D.insertAfter(U,l);d.moveToCaretPosition(k,U)};a.normalize(D,H).each(function(X){H.setStart(X.startContainer,X.startOffset);H.setEnd(X.endContainer,X.endOffset)});var M=H.startContainer;var P=H.startOffset;var Q=v.getForcedRootBlock(k);
var W=x.shiftKey;if(p.isElement(M)&&M.hasChildNodes()){var V=P>M.childNodes.length-1;M=M.childNodes[Math.min(P,M.childNodes.length-1)]||M;P=V&&p.isText(M)?M.nodeValue.length:0}if(A=y(D,M)){if(Q&&!W||!Q&&W)M=B(k,Q,H,M,P);var ba=(l=D.getParent(M,D.isBlock))?D.getParent(l.parentNode,D.isBlock):null;var N=l?l.nodeName.toUpperCase():"";var O=ba?ba.nodeName.toUpperCase():"";"LI"!==O||x.ctrlKey||(l=ba,ba=ba.parentNode,N=O);if(/^(LI|DT|DD)$/.test(N)&&D.isEmpty(l))c.insert(k,I,ba,l,Q);else if(!Q||l!==k.getBody()){Q=
Q||"P";if(q.isCaretContainerBlock(l)){var U=q.showCaretContainerBlock(l);D.isEmpty(l)&&u(l);d.moveToCaretPosition(k,U)}else G()?J():G(!0)?(U=l.parentNode.insertBefore(I(),l),d.moveToCaretPosition(k,z(l,"HR")?U:l)):(x=e(H).cloneRange(),x.setEndAfter(l),x=x.extractContents(),t(x),U=x.firstChild,D.insertAfter(x,l),m(D,F,U),r(D,l),D.isEmpty(l)&&u(l),U.normalize(),D.isEmpty(U)?(D.remove(U),J()):d.moveToCaretPosition(k,U));D.setAttrib(U,"id","");k.fire("NewBlock",{newBlock:U})}}}}});L("tinymce.core.newline.ContextSelectors",
["ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.api.Settings","tinymce.core.newline.NewLineUtils"],function(v,q,p,h){var b=function(c,d){return h.getParentBlock(c).filter(function(a){return 0<d.length&&q.is(v.fromDom(a),d)}).isSome()};return{shouldInsertBr:function(c){return b(c,p.getBrNewLineSelector(c))},shouldBlockNewLine:function(c){return b(c,p.getNoNewLineSelector(c))}}});L("tinymce.core.newline.NewLineAction","ephox.katamari.api.Adt ephox.katamari.api.Arr ephox.katamari.api.Option tinymce.core.api.Settings tinymce.core.newline.ContextSelectors tinymce.core.newline.NewLineUtils tinymce.core.util.LazyEvaluator".split(" "),
function(v,q,p,h,b,c,d){var a=v.generate([{br:[]},{block:[]},{none:[]}]),f=function(y,C){return b.shouldBlockNewLine(y)},n=function(y){return function(C,B){return""===h.getForcedRootBlock(C)===y}},u=function(y){return function(C,B){return c.isListItemParentBlock(C)===y}},z=function(y){return function(C,B){return"PRE"===c.getParentBlockName(C)===y}},w=function(y){return function(C,B){return h.shouldPutBrInPre(C)===y}},m=function(y,C){return b.shouldInsertBr(y)},g=function(y,C){return C},e=function(y){var C=
h.getForcedRootBlock(y),B=c.getEditableRoot(y.dom,y.selection.getStart());return B&&y.schema.isValidChild(B.nodeName,C?C:"P")},t=function(y,C){return function(B,r){return q.foldl(y,function(k,x){return k&&x(B,r)},!0)?p.some(C):p.none()}};return{getAction:function(y,C){return d.evaluateUntil([t([f],a.none()),t([z(!0),w(!1),g],a.br()),t([z(!0),w(!1)],a.block()),t([z(!0),w(!0),g],a.block()),t([z(!0),w(!0)],a.br()),t([u(!0),g],a.br()),t([u(!0)],a.block()),t([n(!0),g,e],a.block()),t([n(!0)],a.br()),t([m],
a.br()),t([n(!1),g],a.br()),t([e],a.block())],[y,C.shiftKey]).getOr(a.none())}}});L("tinymce.core.newline.InsertNewLine",["ephox.katamari.api.Fun","tinymce.core.newline.InsertBlock","tinymce.core.newline.InsertBr","tinymce.core.newline.NewLineAction"],function(v,q,p,h){return{insert:function(b,c){h.getAction(b,c).fold(function(){p.insert(b,c)},function(){q.insert(b,c)},v.noop)}}});L("tinymce.core.keyboard.EnterKey",["tinymce.core.newline.InsertNewLine","tinymce.core.util.VK"],function(v,q){var p=
function(b){b.typing&&(b.typing=!1,b.add())},h=function(b,c){c.isDefaultPrevented()||(c.preventDefault(),p(b.undoManager),b.undoManager.transact(function(){!1===b.selection.isCollapsed()&&b.execCommand("Delete");v.insert(b,c)}))};return{setup:function(b){b.on("keydown",function(c){c.keyCode===q.ENTER&&h(b,c)})}}});L("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],
function(v,q,p,h,b){var c=function(d,a,f){return f.fold(v.constant(!1),v.constant(!0),v.constant(!0),v.constant(!1))&&p.isText(a.container())?(f=a.container(),a=a.offset(),f.insertData(a,"\u00a0"),d.selection.setCursorLocation(f,a+1),!0):!1};return{insertAtSelection:function(d){if(d.selection.isCollapsed()){var a=v.curry(b.isInlineTarget,d),f=q.fromRangeStart(d.selection.getRng());d=h.readLocation(a,d.getBody(),f).map(v.curry(c,d,f)).getOr(!1)}else d=!1;return d}}});L("tinymce.core.keyboard.SpaceKey",
["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(v,q,p){var h=function(b,c){q.execute([{keyCode:p.SPACEBAR,action:q.action(v.insertAtSelection,b)}],c).each(function(d){c.preventDefault()})};return{setup:function(b){b.on("keydown",function(c){!1===c.isDefaultPrevented()&&h(b,c)})}}});L("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys",
"tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(v,q,p,h,b){return{setup:function(c){var d=q.setupSelectedState(c);v.setup(c,d);p.setup(c,d);h.setup(c);b.setup(c)}}});L("tinymce.core.util.Quirks","global!document global!window tinymce.core.Env tinymce.core.caret.CaretContainer tinymce.core.selection.CaretRangeFromPoint tinymce.core.util.Delay tinymce.core.util.Tools tinymce.core.util.VK".split(" "),function(v,q,p,h,b,c,d,a){return function(f){var n=d.each,u=a.BACKSPACE,
z=a.DELETE,w=f.dom,m=f.selection,g=f.settings,e=f.parser,t=p.gecko,y=p.webkit,C=p.ie?"Text":"URL",B=function(N,O){try{f.getDoc().execCommand(N,!1,O)}catch(U){}},r=function(){f.shortcuts.add("meta+a",null,"SelectAll")},k=function(){f.settings.content_editable||w.bind(f.getDoc(),"mousedown mouseup",function(N){if(N.target==f.getDoc().documentElement){var O=m.getRng();f.getBody().focus();"mousedown"==N.type?h.isCaretContainer(O.startContainer)||m.placeCaretAt(N.clientX,N.clientY):m.setRng(O)}})},x=function(){f.on("keydown",
function(N){if(!N.isDefaultPrevented()&&N.keyCode===u&&f.getBody().getElementsByTagName("hr").length&&m.isCollapsed()&&0===m.getRng(!0).startOffset){var O=m.getNode(),U=O.previousSibling;"HR"==O.nodeName?(w.remove(O),N.preventDefault()):U&&U.nodeName&&"hr"===U.nodeName.toLowerCase()&&(w.remove(U),N.preventDefault())}})},A=function(){if(!q.Range.prototype.getClientRects)f.on("mousedown",function(N){if(!N.isDefaultPrevented()&&"HTML"===N.target.nodeName){var O=f.getBody();O.blur();c.setEditorTimeout(f,
function(){O.focus()})}})},l=function(){f.on("click",function(N){var O=N.target;/^(IMG|HR)$/.test(O.nodeName)&&"false"!==w.getContentEditableParent(O)&&(N.preventDefault(),f.selection.select(O),f.nodeChanged());"A"==O.nodeName&&w.hasClass(O,"mce-item-anchor")&&(N.preventDefault(),m.select(O))})},D=function(){var N=function(){var U=w.getAttribs(m.getStart().cloneNode(!1));return function(){var X=m.getStart();X!==f.getBody()&&(w.setAttrib(X,"style",null),n(U,function(S){X.setAttributeNode(S.cloneNode(!0))}))}},
O=function(){return!m.isCollapsed()&&w.getParent(m.getStart(),w.isBlock)!=w.getParent(m.getEnd(),w.isBlock)};f.on("keypress",function(U){if(!U.isDefaultPrevented()&&(8==U.keyCode||46==U.keyCode)&&O()){var X=N();f.getDoc().execCommand("delete",!1,null);X();U.preventDefault();return!1}});w.bind(f.getDoc(),"cut",function(U){if(!U.isDefaultPrevented()&&O()){var X=N();c.setEditorTimeout(f,function(){X()})}})},E=function(){f.on("keydown",function(N){if(!N.isDefaultPrevented()&&N.keyCode===u&&m.isCollapsed()&&
0===m.getRng(!0).startOffset){var O=m.getNode().previousSibling;if(O&&O.nodeName&&"table"===O.nodeName.toLowerCase())return N.preventDefault(),!1}})},F=function(){if(!g.readonly)f.on("BeforeExecCommand MouseDown",function(){B("StyleWithCSS",!1);B("enableInlineTableEditing",!1);g.object_resizing||B("enableObjectResizing",!1)})},H=function(){var N=function(){n(w.select("a"),function(O){var U=O.parentNode,X=w.getRoot();if(U.lastChild===O){for(;U&&!w.isBlock(U);){if(U.parentNode.lastChild!==U||U===X)return;
U=U.parentNode}w.add(U,"br",{"data-mce-bogus":1})}})};f.on("SetContent ExecCommand",function(O){"setcontent"!=O.type&&"mceInsertLink"!==O.command||N()})},I=function(){if(g.forced_root_block)f.on("init",function(){B("DefaultParagraphSeparator",g.forced_root_block)})},G=function(){f.on("keyup focusin mouseup",function(N){a.modifierPressed(N)||m.normalize()},!0)},J=function(){if(!f.inline)f.on("keydown",function(){v.activeElement==v.body&&f.getWin().focus()})},M=function(){f.inline||(f.contentStyles.push("body {min-height: 150px}"),
f.on("click",function(N){"HTML"==N.target.nodeName&&(11<p.ie?f.getBody().focus():(N=f.selection.getRng(),f.getBody().focus(),f.selection.setRng(N),f.selection.normalize(),f.nodeChanged()))}))},P=function(){if(p.mac)f.on("keydown",function(N){!a.metaKeyPressed(N)||N.shiftKey||37!=N.keyCode&&39!=N.keyCode||(N.preventDefault(),f.selection.getSel().modify("move",37==N.keyCode?"backward":"forward","lineboundary"))})},Q=function(){f.on("click",function(N){var O=N.target;do if("A"===O.tagName){N.preventDefault();
break}while(O=O.parentNode)});f.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},W=function(){f.on("init",function(){f.dom.bind(f.getBody(),"submit",function(N){N.preventDefault()})})},V=function(){e.addNodeFilter("br",function(N){for(var O=N.length;O--;)"Apple-interchange-newline"==N[O].attr("class")&&N[O].remove()})},ba=function(){f.on("dragstart",function(N){if(N.dataTransfer){f.selection.isCollapsed()&&"IMG"==N.target.tagName&&m.select(N.target);var O=f.selection.getContent();
0<O.length&&(O="data:text/mce-internal,"+escape(f.id)+","+escape(O),N.dataTransfer.setData(C,O))}});f.on("drop",function(N){if(!N.isDefaultPrevented()){var O;a:{if(N.dataTransfer&&(O=N.dataTransfer.getData(C))&&0<=O.indexOf("data:text/mce-internal,")){O=O.substr(23).split(",");O={id:unescape(O[0]),html:unescape(O[1])};break a}O=null}O&&O.id!=f.id&&(N.preventDefault(),N=b.fromPoint(N.x,N.y,f.getDoc()),m.setRng(N),N=O.html,f.queryCommandSupported("mceInsertClipboardContent")?f.execCommand("mceInsertClipboardContent",
!1,{content:N,internal:!0}):f.execCommand("mceInsertContent",!1,N))}})};(function(){f.on("keydown",function(N){if(!N.isDefaultPrevented()&&N.keyCode==a.BACKSPACE){N=m.getRng();var O=N.startContainer;var U=N.startOffset;var X=w.getRoot();var S=O;if(N.collapsed&&0===U){for(;S&&S.parentNode&&S.parentNode.firstChild==S&&S.parentNode!=X;)S=S.parentNode;"BLOCKQUOTE"===S.tagName&&(f.formatter.toggle("blockquote",null,S),N=w.createRng(),N.setStart(O,0),N.setEnd(O,0),m.setRng(N))}}})})();(function(){var N=
function(O){var U=w.create("body");O=O.cloneContents();U.appendChild(O);return m.serializer.serialize(U,{format:"html"})};f.on("keydown",function(O){var U=O.keyCode;if(!O.isDefaultPrevented()&&(U==z||U==u)){var X=f.selection.isCollapsed();U=f.getBody();if(!X||w.isEmpty(U)){if(X=!X){X=f.selection.getRng();X=N(X);var S=w.createRng();S.selectNode(f.getBody());S=N(S);X=X!==S}X||(O.preventDefault(),f.setContent(""),U.firstChild&&w.isBlock(U.firstChild)?f.selection.setCursorLocation(U.firstChild,0):f.selection.setCursorLocation(U,
0),f.nodeChanged())}}})})();p.windowsPhone||G();y&&(k(),l(),I(),W(),E(),V(),p.iOS?(J(),M(),Q()):r());11<=p.ie&&(M(),E());p.ie&&(r(),B("AutoUrlDetect",!1),ba());t&&(x(),A(),D(),F(),H(),f.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),P(),E());return{refreshContentEditable:function(){},isHidden:function(){if(!t||f.removed)return 0;var N=f.selection.getSel();return!N||!N.rangeCount||0===N.rangeCount}}}});L("tinymce.core.init.InitContentBody","ephox.sugar.api.dom.Insert ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr global!document global!window tinymce.core.EditorUpload tinymce.core.ForceBlocks tinymce.core.NodeChange tinymce.core.SelectionOverrides tinymce.core.UndoManager tinymce.core.api.Formatter tinymce.core.api.dom.Serializer tinymce.core.caret.CaretContainerInput tinymce.core.dom.DOMUtils tinymce.core.dom.Selection tinymce.core.html.DomParser tinymce.core.html.Node tinymce.core.html.Schema tinymce.core.keyboard.KeyboardOverrides tinymce.core.util.Delay tinymce.core.util.Quirks tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e,t,y,C,B,r,k){var x=m.DOM,A=function(F,H){F=q.fromDom(F.getDoc().head);var I=q.fromTag("style");p.set(I,"type","text/css");v.append(I,q.fromText(H));v.append(F,I)},l=function(F){var H=new e(F.settings,F.schema);H.addAttributeFilter("src,href,style,tabindex",function(I,G){for(var J=I.length,M,P=F.dom,Q,W;J--;)M=I[J],Q=M.attr(G),W="data-mce-"+G,M.attributes.map[W]||0===Q.indexOf("data:")||0===Q.indexOf("blob:")||("style"===G?(Q=P.serializeStyle(P.parseStyle(Q),
M.name),Q.length||(Q=null),M.attr(W,Q),M.attr(G,Q)):"tabindex"===G?(M.attr(W,Q),M.attr(G,null)):M.attr(W,F.convertURL(Q,G,M.name)))});H.addNodeFilter("script",function(I){for(var G=I.length,J,M;G--;)J=I[G],M=J.attr("type")||"no/type",0!==M.indexOf("mce-")&&J.attr("type","mce-"+M)});H.addNodeFilter("#cdata",function(I){for(var G=I.length,J;G--;)J=I[G],J.type=8,J.name="#comment",J.value="[CDATA["+J.value+"]]"});H.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(I){for(var G=I.length,J,M=F.schema.getNonEmptyElements();G--;)J=
I[G],J.isEmpty(M)&&0===J.getAll("br").length&&(J.append(new t("br",1)).shortEnded=!0)});return H},D=function(F){F.settings.auto_focus&&B.setEditorTimeout(F,function(){var H=!0===F.settings.auto_focus?F:F.editorManager.get(F.settings.auto_focus);H.destroyed||H.focus()},100)},E=function(F){F.bindPendingEventDelegates();F.initialized=!0;F.fire("init");F.focus(!0);F.nodeChanged({initial:!0});F.execCallback("init_instance_callback",F);D(F)};return{initContentBody:function(F,H){var I=F.settings,G=F.getElement(),
J=F.getDoc();I.inline||(F.getElement().style.visibility=F.orgVisibility);H||I.content_editable||(J.open(),J.write(F.iframeHTML),J.close());I.content_editable&&(F.on("remove",function(){var P=this.getBody();x.removeClass(P,"mce-content-body");x.removeClass(P,"mce-edit-focus");x.setAttrib(P,"contentEditable",null)}),x.addClass(G,"mce-content-body"),F.contentDocument=J=I.content_document||h,F.contentWindow=I.content_window||b,F.bodyElement=G,I.content_document=I.content_window=null,I.root_name=G.nodeName.toLowerCase());
H=F.getBody();H.disabled=!0;F.readonly=I.readonly;F.readonly||(F.inline&&"static"===x.getStyle(H,"position",!0)&&(H.style.position="relative"),H.contentEditable=F.getParam("content_editable_state",!0));H.disabled=!1;F.editorUpload=new c(F);F.schema=new y(I);F.dom=new m(J,{keep_values:!0,url_converter:F.convertURL,url_converter_scope:F,hex_colors:I.force_hex_style_colors,class_filter:I.class_filter,update_styles:!0,root_element:F.inline?F.getBody():null,collect:I.content_editable,schema:F.schema,onSetAttrib:function(P){F.fire("SetAttrib",
P)}});F.parser=l(F);F.serializer=new z(I,F);F.selection=new g(F.dom,F.getWin(),F.serializer,F);F.formatter=new u(F);F.undoManager=new n(F);F._nodeChangeDispatcher=new a(F);F._selectionOverrides=new f(F);w.setup(F);C.setup(F);d.setup(F);F.fire("PreInit");I.browser_spellcheck||I.gecko_spellcheck||(J.body.spellcheck=!1,x.setAttrib(H,"spellcheck","false"));F.quirks=new r(F);F.fire("PostRender");I.directionality&&(H.dir=I.directionality);I.nowrap&&(H.style.whiteSpace="nowrap");if(I.protect)F.on("BeforeSetContent",
function(P){k.each(I.protect,function(Q){P.content=P.content.replace(Q,function(W){return"\x3c!--mce:protected "+escape(W)+"--\x3e"})})});F.on("SetContent",function(){F.addVisual(F.getBody())});if(I.padd_empty_editor)F.on("PostProcess",function(P){P.content=P.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});F.load({initial:!0,format:"html"});F.startContent=F.getContent({format:"raw"});F.on("compositionstart compositionend",function(P){F.composing="compositionstart"===
P.type});if(0<F.contentStyles.length){var M="";k.each(F.contentStyles,function(P){M+=P+"\r\n"});F.dom.addStyle(M)}(F.inline?x.styleSheetLoader:F.dom.styleSheetLoader).loadAll(F.contentCSS,function(P){E(F)},function(P){E(F)});I.content_style&&A(F,I.content_style)}}});L("tinymce.core.init.InitIframe","ephox.sugar.api.node.Element ephox.sugar.api.properties.Attr ephox.sugar.api.properties.Css global!document global!window tinymce.core.Env tinymce.core.api.Settings tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.util.Uuid".split(" "),
function(v,q,p,h,b,c,d,a,f,n){var u=a.DOM,z=function(e,t){if(h.domain!==b.location.hostname&&c.ie&&12>c.ie){var y=n.uuid("mce");e[y]=function(){f.initContentBody(e)};u.setAttrib(t,"src",'javascript:(function(){document.open();document.domain="'+h.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+y+"(true);})()");return!0}return!1},w=function(e,t,y,C){var B=v.fromTag("iframe");q.setAll(B,C);q.setAll(B,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",
title:t});e="number"===typeof y?y+"px":y;p.setAll.call(p,B,{width:"100%",height:e?e:"",display:"block"});return B},m=function(e){var t=d.getDocType(e)+"<html><head>";d.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />');t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var y=d.getBodyId(e);var C=d.getBodyClass(e);d.getContentSecurityPolicy(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+d.getContentSecurityPolicy(e)+
'" />');return t+='</head><body id="'+y+'" class="mce-content-body '+C+'" data-id="'+e.id+'"><br></body></html>'},g=function(e,t){var y=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),C=w(e.id,y,t.height,d.getIframeAttrs(e)).dom();C.onload=function(){C.onload=null;e.fire("load")};y=z(e,C);e.contentAreaContainer=t.iframeContainer;e.iframeElement=C;e.iframeHTML=m(e);u.add(t.iframeContainer,C);return y};return{init:function(e,t){var y=
g(e,t);t.editorContainer&&(u.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=u.isHidden(t.editorContainer));e.getElement().style.display="none";u.setAttrib(e.id,"aria-hidden",!0);y||f.initContentBody(e)}}});L("tinymce.core.init.Init","ephox.katamari.api.Type global!document global!window tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.dom.DOMUtils tinymce.core.init.InitContentBody tinymce.core.init.InitIframe tinymce.core.util.Tools".split(" "),function(v,q,p,h,b,c,d,
a,f){var n=c.DOM,u=function(e,t,y){var C=h.get(y);var B=h.urls[y]||e.documentBaseUrl.replace(/\/$/,"");y=f.trim(y);C&&-1===f.inArray(t,y)&&(f.each(h.dependencies(y),function(r){u(e,t,r)}),e.plugins[y]||(C=new C(e,B,e.$),e.plugins[y]=C,C.init&&(C.init(e,B),t.push(y))))},z=function(e){var t=[];f.each(e.settings.plugins.split(/[ ,]/),function(y){u(e,t,y.replace(/^\-/,""))})},w=function(e){var t=e.settings.theme;if(v.isString(t)){e.settings.theme=t.replace(/^\-/,"");var y=b.get(t);e.theme=new y(e,b.urls[t]);
e.theme.init&&e.theme.init(e,b.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},m=function(e){return{editorContainer:e,iframeContainer:e}},g=function(e){var t=e.settings,y=e.getElement();e.orgDisplay=y.style.display;if(v.isString(t.theme)){var C=e.settings,B=e.getElement();var r=C.width||n.getStyle(B,"width")||"100%";t=C.height||n.getStyle(B,"height")||B.offsetHeight;y=C.min_height||100;var k=/^[0-9\.]+(|px)$/i;k.test(""+r)&&(r=Math.max(parseInt(r,10),100));k.test(""+t)&&(t=Math.max(parseInt(t,
10),y));e=e.theme.renderUI({targetNode:B,width:r,height:t,deltaWidth:C.delta_width,deltaHeight:C.delta_height});C.content_editable||(t=(e.iframeHeight||t)+("number"===typeof t?e.deltaHeight||0:""),t<y&&(t=y));e.height=t;return e}if(v.isFunction(t.theme))return y=e.getElement(),t=e.settings.theme(e,y),t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),
t.height=t.iframeHeight?t.iframeHeight:y.offsetHeight,t;t=e.getElement();e.inline?e=m(null):(e=n.create("div"),n.insertAfter(e,t),e=m(e));return e};return{init:function(e){var t=e.settings,y=e.getElement();e.rtl=t.rtl_ui||e.editorManager.i18n.rtl;e.editorManager.i18n.setCode(t.language);t.aria_label=t.aria_label||n.getAttrib(y,"aria-label",e.getLang("aria.rich_text_area"));e.fire("ScriptsLoaded");w(e);z(e);y=g(e);e.editorContainer=y.editorContainer?y.editorContainer:null;t.content_css&&f.each(f.explode(t.content_css),
function(C){e.contentCSS.push(e.documentBaseURI.toAbsolute(C))});return t.content_editable?d.initContentBody(e):a.init(e,y)}}});L("tinymce.core.init.Render","ephox.katamari.api.Type global!window tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.dom.DOMUtils tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.init.Init tinymce.core.PluginManager tinymce.core.ThemeManager tinymce.core.util.Tools".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w){var m=b.DOM,g=function(C,B){var r=B.settings;r.language&&"en"!==r.language&&!r.language_url&&(r.language_url=B.editorManager.baseURL+"/langs/"+r.language+".js");r.language_url&&!B.editorManager.i18n.data[r.language]&&C.add(r.language_url)},e=function(C,B,r,k){var x=B.settings,A=x.theme;v.isString(A)?("-"===A.charAt(0)||z.urls.hasOwnProperty(A)||((x=x.theme_url)?z.load(A,B.documentBaseURI.toAbsolute(x)):z.load(A,"themes/"+A+"/theme"+r+".js")),C.loadQueue(function(){z.waitFor(A,
k)})):k()},t=function(C,B){w.isArray(C.plugins)&&(C.plugins=C.plugins.join(" "));w.each(C.external_plugins,function(r,k){u.load(k,r);C.plugins+=" "+k});w.each(C.plugins.split(/[ ,]/),function(r){(r=w.trim(r))&&!u.urls[r]&&("-"===r.charAt(0)?(r=r.substr(1,r.length),r=u.dependencies(r),w.each(r,function(k){k=u.createUrl({prefix:"plugins/",resource:k,suffix:"/plugin"+B+".js"},k);u.load(k.resource,k)})):u.load(r,{prefix:"plugins/",resource:r,suffix:"/plugin"+B+".js"}))})},y=function(C,B){var r=d.ScriptLoader;
e(r,C,B,function(){g(r,C);t(C.settings,B);r.loadQueue(function(){C.removed||n.init(C)},C,function(k){f.pluginLoadError(C,k[0]);C.removed||n.init(C)})})};return{render:function(C){var B=C.settings,r=C.id,k=function(){m.unbind(q,"ready",k);C.render()};if(!c.Event.domLoaded)m.bind(q,"ready",k);else if(C.getElement()&&a.contentEditable){B.inline?C.inline=!0:(C.orgVisibility=C.getElement().style.visibility,C.getElement().style.visibility="hidden");var x=C.getElement().form||m.getParent(r,"form");x&&(C.formElement=
x,B.hidden_input&&!/TEXTAREA|INPUT/i.test(C.getElement().nodeName)&&(m.insertAfter(m.create("input",{type:"hidden",name:r}),r),C.hasHiddenInput=!0),C.formEventDelegate=function(A){C.fire(A.type,A)},m.bind(x,"submit reset",C.formEventDelegate),C.on("reset",function(){C.setContent(C.startContent,{format:"raw"})}),!B.submit_patch||x.submit.nodeType||x.submit.length||x._mceOldSubmit||(x._mceOldSubmit=x.submit,x.submit=function(){C.editorManager.triggerSave();C.setDirty(!1);return x._mceOldSubmit(x)}));
C.windowManager=new h(C);C.notificationManager=new p(C);if("xml"===B.encoding)C.on("GetContent",function(A){A.save&&(A.content=m.encode(A.content))});if(B.add_form_submit_trigger)C.on("submit",function(){C.initialized&&C.save()});B.add_unload_trigger&&(C._beforeUnload=function(){!C.initialized||C.destroyed||C.isHidden()||C.save({format:"raw",no_events:!0,set_dirty:!1})},C.editorManager.on("BeforeUnload",C._beforeUnload));C.editorManager.add(C);y(C,C.suffix)}}}});L("tinymce.core.ui.Sidebar",[],function(){return{add:function(v,
q,p){var h=v.sidebars?v.sidebars:[];h.push({name:q,settings:p});v.sidebars=h}}});L("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(v,q){var p=q.each,h=q.trim,b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),c={ftp:21,http:80,https:443,mailto:25},d=function(a,f){var n=this;a=h(a);f=n.settings=f||{};var u=f.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a))n.source=a;else{var z=0===a.indexOf("//");
0!==a.indexOf("/")||z||(a=(u?u.protocol||"http":"http")+"://mce_host"+a);if(!/^[\w\-]*:?\/\//.test(a)){var w=f.base_uri?f.base_uri.path:(new d(v.location.href)).directory;""===f.base_uri.protocol?a="//mce_host"+n.toAbsPath(w,a):(a=/([^#?]*)([#?]?.*)/.exec(a),a=(u&&u.protocol||"http")+"://mce_host"+n.toAbsPath(w,a[1])+a[2])}a=a.replace(/@@/g,"(mce_at)");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);
p(b,function(m,g){(g=a[g])&&(g=g.replace(/\(mce_at\)/g,"@@"));n[m]=g});u&&(n.protocol||(n.protocol=u.protocol),n.userInfo||(n.userInfo=u.userInfo),n.port||"mce_host"!==n.host||(n.port=u.port),n.host&&"mce_host"!==n.host||(n.host=u.host),n.source="");z&&(n.protocol="")}};d.prototype={setPath:function(a){a=/^(.*?)\/?(\w+)?$/.exec(a);this.path=a[0];this.directory=a[1];this.file=a[2];this.source="";this.getURI()},toRelative:function(a){if("./"===a)return a;a=new d(a,{base_uri:this});if("mce_host"!=a.host&&
this.host!=a.host&&a.host||this.port!=a.port||this.protocol!=a.protocol&&""!==a.protocol)return a.getURI();var f=this.getURI();var n=a.getURI();if(f==n||"/"==f.charAt(f.length-1)&&f.substr(0,f.length-1)==n)return f;f=this.toRelPath(this.path,a.path);a.query&&(f+="?"+a.query);a.anchor&&(f+="#"+a.anchor);return f},toAbsolute:function(a,f){a=new d(a,{base_uri:this});return a.getURI(f&&this.isSameOrigin(a))},isSameOrigin:function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;
var f=c[this.protocol];if(f&&(this.port||f)==(a.port||f))return!0}return!1},toRelPath:function(a,f){var n=0,u="",z;a=a.substring(0,a.lastIndexOf("/"));a=a.split("/");var w=f.split("/");if(a.length>=w.length){var m=0;for(z=a.length;m<z;m++)if(m>=w.length||a[m]!=w[m]){n=m+1;break}}if(a.length<w.length)for(m=0,z=w.length;m<z;m++)if(m>=a.length||a[m]!=w[m]){n=m+1;break}if(1===n)return f;m=0;for(z=a.length-(n-1);m<z;m++)u+="../";m=n-1;for(z=w.length;m<z;m++)u=m!=n-1?u+("/"+w[m]):u+w[m];return u},toAbsPath:function(a,
f){var n=0,u=[];var z=/\/$/.test(f)?"/":"";a=a.split("/");f=f.split("/");p(a,function(m){m&&u.push(m)});a=u;var w=f.length-1;for(u=[];0<=w;w--)0!==f[w].length&&"."!==f[w]&&(".."===f[w]?n++:0<n?n--:u.push(f[w]));w=a.length-n;a=0>=w?u.reverse().join("/"):a.slice(0,w).join("/")+"/"+u.reverse().join("/");0!==a.indexOf("/")&&(a="/"+a);z&&a.lastIndexOf("/")!==a.length-1&&(a+=z);return a},getURI:function(a){if(!this.source||a){var f="";a||(f=this.protocol?f+(this.protocol+"://"):f+"//",this.userInfo&&(f+=
this.userInfo+"@"),this.host&&(f+=this.host),this.port&&(f+=":"+this.port));this.path&&(f+=this.path);this.query&&(f+="?"+this.query);this.anchor&&(f+="#"+this.anchor);this.source=f}return this.source}};d.parseDataUri=function(a){var f,n;a=decodeURIComponent(a).split(",");(n=/data:([^;]+)/.exec(a[0]))&&(f=n[1]);return{type:f,data:a[1]}};d.getDocumentBaseUrl=function(a){a=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname;/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&
(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));return a};return d});L("tinymce.core.Editor","tinymce.core.AddOnManager tinymce.core.EditorCommands tinymce.core.EditorObservable tinymce.core.EditorSettings tinymce.core.Env tinymce.core.Mode tinymce.core.Shortcuts tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.TrimHtml tinymce.core.focus.EditorFocus tinymce.core.html.Serializer tinymce.core.init.Render tinymce.core.ui.Sidebar tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.Uuid".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e,t){var y=a.DOM,C=g.extend,B=g.each,r=g.trim,k=g.resolve,x=b.ie;a=function(A,l,D){var E=this;var F=E.documentBaseUrl=D.documentBaseURL;var H=D.baseURI;l=h.getEditorSettings(E,A,F,D.defaultSettings,l);E.settings=l;v.language=l.language||"en";v.languageLoad=l.language_load;v.baseURL=D.baseURL;E.id=A;E.setDirty(!1);E.plugins={};E.documentBaseURI=new e(l.document_base_url,{base_uri:H});E.baseURI=H;E.contentCSS=[];E.contentStyles=[];E.shortcuts=new d(E);E.loadedCSS=
{};E.editorCommands=new q(E);E.suffix=D.suffix;E.editorManager=D;E.inline=l.inline;E.buttons={};E.menuItems={};l.cache_suffix&&(b.cacheSuffix=l.cache_suffix.replace(/^[\?&]+/,""));!1===l.override_viewport&&(b.overrideViewPort=!1);D.fire("SetupEditor",E);E.execCallback("setup",E);E.$=f.overrideDefaults(function(){return{context:E.inline?E.getBody():E.getDoc(),element:E.getBody()}})};a.prototype={render:function(){w.render(this)},focus:function(A){u.focus(this,A)},execCallback:function(A){var l=this.settings[A],
D;if(l)return this.callbackLookup&&(D=this.callbackLookup[A])&&(l=D.func,D=D.scope),"string"===typeof l&&(D=(D=l.replace(/\.\w+$/,""))?k(D):0,l=k(l),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[A]={func:l,scope:D}),l.apply(D||this,Array.prototype.slice.call(arguments,1))},translate:function(A){if(A&&g.is(A,"string")){var l=this.settings.language||"en",D=this.editorManager.i18n;A=D.data[l+"."+A]||A.replace(/\{#([^\}]+)\}/g,function(E,F){return D.data[l+"."+F]||"{#"+F+"}"})}return this.editorManager.translate(A)},
getLang:function(A,l){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+A]||(void 0!==l?l:"{#"+A+"}")},getParam:function(A,l,D){A=A in this.settings?this.settings[A]:l;if("hash"===D){var E={};"string"===typeof A?B(0<A.indexOf("=")?A.split(/[;,](?![^=;,]*(?:[;,]|$))/):A.split(","),function(F){F=F.split("=");1<F.length?E[r(F[0])]=r(F[1]):E[r(F[0])]=r(F)}):E=A;return E}return A},nodeChanged:function(A){this._nodeChangeDispatcher.nodeChanged(A)},addButton:function(A,l){var D=this;
l.cmd&&(l.onclick=function(){D.execCommand(l.cmd)});l.stateSelector&&"undefined"===typeof l.active&&(l.active=!1);l.text||l.icon||(l.icon=A);D.buttons=D.buttons;l.tooltip=l.tooltip||l.title;D.buttons[A]=l},addSidebar:function(A,l){return m.add(this,A,l)},addMenuItem:function(A,l){var D=this;l.cmd&&(l.onclick=function(){D.execCommand(l.cmd)});D.menuItems=D.menuItems;D.menuItems[A]=l},addContextToolbar:function(A,l){var D=this;D.contextToolbars=D.contextToolbars||[];if("string"==typeof A){var E=A;A=
function(F){return D.dom.is(F,E)}}D.contextToolbars.push({id:t.uuid("mcet"),predicate:A,items:l})},addCommand:function(A,l,D){this.editorCommands.addCommand(A,l,D)},addQueryStateHandler:function(A,l,D){this.editorCommands.addQueryStateHandler(A,l,D)},addQueryValueHandler:function(A,l,D){this.editorCommands.addQueryValueHandler(A,l,D)},addShortcut:function(A,l,D,E){this.shortcuts.add(A,l,D,E)},execCommand:function(A,l,D,E){return this.editorCommands.execCommand(A,l,D,E)},queryCommandState:function(A){return this.editorCommands.queryCommandState(A)},
queryCommandValue:function(A){return this.editorCommands.queryCommandValue(A)},queryCommandSupported:function(A){return this.editorCommands.queryCommandSupported(A)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(y.show(this.getContainer()),y.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var A=this.getDoc();this.hidden||(x&&A&&!this.inline&&A.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this==this.editorManager.focusedEditor&&
(this.editorManager.focusedEditor=null)):(y.hide(this.getContainer()),y.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(A,l){this.fire("ProgressState",{state:A,time:l})},load:function(A){var l=this.getElement();if(this.removed)return"";if(l){A=A||{};A.load=!0;var D=this.setContent(void 0!==l.value?l.value:l.innerHTML,A);A.element=l;A.no_events||this.fire("LoadContent",A);A.element=null;return D}},save:function(A){var l=
this,D=l.getElement(),E;if(D&&l.initialized&&!l.removed){A=A||{};A.save=!0;A.element=D;var F=A.content=l.getContent(A);A.no_events||l.fire("SaveContent",A);"raw"==A.format&&l.fire("RawSaveContent",A);F=A.content;/TEXTAREA|INPUT/i.test(D.nodeName)?D.value=F:(l.inline||(D.innerHTML=F),(E=y.getParent(l.id,"form"))&&B(E.elements,function(H){if(H.name==l.id)return H.value=F,!1}));A.element=D=null;!1!==A.set_dirty&&l.setDirty(!1);return F}},setContent:function(A,l){var D=this.getBody(),E;l=l||{};l.format=
l.format||"html";l.set=!0;l.content=A;l.no_events||this.fire("BeforeSetContent",l);A=l.content;if(0===A.length||/^\s+$/.test(A)){var F=x&&11>x?"":'<br data-mce-bogus="1">';"TABLE"==D.nodeName?A="<tr><td>"+F+"</td></tr>":/^(UL|OL)$/.test(D.nodeName)&&(A="<li>"+F+"</li>");(E=this.settings.forced_root_block)&&this.schema.isValidChild(D.nodeName.toLowerCase(),E.toLowerCase())?A=this.dom.createHTML(E,this.settings.forced_root_block_attrs,F):x||A||(A='<br data-mce-bogus="1">');this.dom.setHTML(D,A);this.fire("SetContent",
l)}else"raw"!==l.format&&(A=(new z({validate:this.validate},this.schema)).serialize(this.parser.parse(A,{isRootContent:!0,insert:!0}))),l.content=r(A),this.dom.setHTML(D,l.content),l.no_events||this.fire("SetContent",l);return l.content},getContent:function(A){var l=this.getBody();if(this.removed)return"";A=A||{};A.format=A.format||"html";A.get=!0;A.getInner=!0;A.no_events||this.fire("BeforeGetContent",A);if("raw"===A.format)l=g.trim(n.trimExternal(this.serializer,l.innerHTML));else if("text"===A.format)l=
l.innerText||l.textContent;else{if("tree"===A.format)return this.serializer.serialize(l,A);l=this.serializer.serialize(l,A)}A.content="text"!==A.format?r(l):l;A.no_events||this.fire("GetContent",A);return A.content},insertContent:function(A,l){l&&(A=C({content:A},l));this.execCommand("mceInsertContent",!1,A)},isDirty:function(){return!this.isNotDirty},setDirty:function(A){var l=!this.isNotDirty;this.isNotDirty=!A;A&&A!=l&&this.fire("dirty")},setMode:function(A){c.setMode(this,A)},getContainer:function(){this.container||
(this.container=y.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){this.targetElm||(this.targetElm=y.get(this.id));return this.targetElm},getWin:function(){var A;!this.contentWindow&&(A=this.iframeElement)&&(this.contentWindow=A.contentWindow);return this.contentWindow},getDoc:function(){var A;!this.contentDocument&&(A=this.getWin())&&(this.contentDocument=A.document);return this.contentDocument},
getBody:function(){var A=this.getDoc();return this.bodyElement||(A?A.body:null)},convertURL:function(A,l,D){var E=this.settings;return E.urlconverter_callback?this.execCallback("urlconverter_callback",A,D,!0,l):!E.convert_urls||D&&"LINK"==D.nodeName||0===A.indexOf("file:")||0===A.length?A:E.relative_urls?this.documentBaseURI.toRelative(A):A=this.documentBaseURI.toAbsolute(A,E.remove_script_host)},addVisual:function(A){var l=this,D=l.settings,E=l.dom,F;A=A||l.getBody();void 0===l.hasVisual&&(l.hasVisual=
D.visual);B(E.select("table,a",A),function(H){var I;switch(H.nodeName){case "TABLE":F=D.visual_table_class||"mce-item-table";(I=E.getAttrib(H,"border"))&&"0"!=I||!l.hasVisual?E.removeClass(H,F):E.addClass(H,F);break;case "A":E.getAttrib(H,"href",!1)||(I=E.getAttrib(H,"name")||H.id,F=D.visual_anchor_class||"mce-item-anchor",I&&l.hasVisual?E.addClass(H,F):E.removeClass(H,F))}});l.fire("VisualAid",{element:A,hasVisual:l.hasVisual})},remove:function(){this.removed||(this.save(),this.removed=1,this.unbindAllNativeEvents(),
this.hasHiddenInput&&y.remove(this.getElement().nextSibling),this.inline||(x&&10>x&&this.getDoc().execCommand("SelectAll",!1,null),y.setStyle(this.id,"display",this.orgDisplay),this.getBody().onload=null),this.fire("remove"),this.editorManager.remove(this),y.remove(this.getContainer()),this._selectionOverrides.destroy(),this.editorUpload.destroy(),this.destroy())},destroy:function(A){if(!this.destroyed)if(A||this.removed){A||(this.editorManager.off("beforeunload",this._beforeUnload),this.theme&&this.theme.destroy&&
this.theme.destroy(),this.selection.destroy(),this.dom.destroy());if(A=this.formElement)A._mceOldSubmit&&(A.submit=A._mceOldSubmit,A._mceOldSubmit=null),y.unbind(A,"submit reset",this.formEventDelegate);this.iframeElement=this.targetElm=this.bodyElement=this.contentDocument=this.contentWindow=this.contentAreaContainer=this.formElement=this.container=this.editorContainer=null;this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null);this.destroyed=1}else this.remove()},
uploadImages:function(A){return this.editorUpload.uploadImages(A)},_scanForImages:function(){return this.editorUpload.scanForImages()}};C(a.prototype,p);return a});L("tinymce.core.api.FocusManager",["global!document"],function(v){return{isEditorUIElement:function(q){return-1!==q.className.toString().indexOf("mce-")}}});L("tinymce.core.selection.SelectionRestore",["ephox.katamari.api.Throttler","ephox.sand.api.PlatformDetection","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark"],
function(v,q,p,h,b){var c=function(n,u){var z=function(){u.throttle()};h.DOM.bind(p,"mouseup",z);n.on("remove",function(){h.DOM.unbind(p,"mouseup",z)})},d=function(n){n.on("focusout",function(){b.store(n)})},a=function(n,u){n.on("mouseup touchend",function(z){u.throttle()})},f=function(n,u){var z=q.detect().browser;z.isIE()||z.isEdge()?d(n):a(n,u);n.on("keyup nodechange",function(w){"nodechange"===w.type&&w.selectionChange||b.store(n)})};return{register:function(n){var u=v.first(function(){b.store(n)},
0);n.inline&&c(n,u);n.on("init",function(){f(n,u)});n.on("remove",function(){u.cancel()})}}});L("tinymce.core.focus.FocusController","ephox.katamari.api.Fun global!document tinymce.core.api.FocusManager tinymce.core.dom.DOMUtils tinymce.core.selection.SelectionRestore tinymce.core.util.Delay".split(" "),function(v,q,p,h,b,c){var d,a=h.DOM,f=function(w){return p.isEditorUIElement(w)},n=function(w,m){var g=w?w.settings.custom_ui_selector:"";return null!==a.getParent(m,function(e){return f(e)||(g?w.dom.is(e,
g):!1)})},u=function(w,m){var g=m.editor;b.register(g);g.on("focusin",function(){var e=w.focusedEditor;e!=g&&(e&&e.fire("blur",{focusedEditor:g}),w.setActive(g),w.focusedEditor=g,g.fire("focus",{blurredEditor:e}),g.focus(!0))});g.on("focusout",function(){c.setEditorTimeout(g,function(){var e=w.focusedEditor;try{var t=q.activeElement}catch(y){t=q.body}n(g,t)||e!=g||(g.fire("blur",{focusedEditor:null}),w.focusedEditor=null)})});d||(d=function(e){var t=w.activeEditor;e=e.target;t&&e.ownerDocument===
q&&e!==q.body&&!n(t,e)&&w.focusedEditor===t&&(t.fire("blur",{focusedEditor:null}),w.focusedEditor=null)},a.bind(q,"focusin",d))},z=function(w,m){w.focusedEditor==m.editor&&(w.focusedEditor=null);w.activeEditor||(a.unbind(q,"focusin",d),d=null)};return{setup:function(w){w.on("AddEditor",v.curry(u,w));w.on("RemoveEditor",v.curry(z,w))},isEditorUIElement:f,isUIElement:n}});L("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(v){var q={},p="en";return{setCode:function(h){h&&(p=h,this.rtl=this.data[h]?
"rtl"===this.data[h]._dir:!1)},getCode:function(){return p},rtl:!1,add:function(h,b){var c=q[h];c||(q[h]=c={});for(var d in b)c[d]=b[d];this.setCode(h)},translate:function(h){var b=q[p]||{},c=function(n){return v.is(n,"function")?Object.prototype.toString.call(n):d(n)?"":""+n},d=function(n){return""===n||null===n||v.is(n,"undefined")},a=function(n){n=c(n);return v.hasOwn(b,n)?c(b[n]):n};if(d(h))return"";if(v.is(h,"object")&&v.hasOwn(h,"raw"))return c(h.raw);if(v.is(h,"array")){var f=h.slice(1);h=
a(h[0]).replace(/\{([0-9]+)\}/g,function(n,u){return v.hasOwn(f,u)?c(f[u]):n})}return a(h).replace(/{context:\w+}$/,"")},data:q}});L("tinymce.core.EditorManager","ephox.katamari.api.Arr ephox.katamari.api.Type global!document global!window tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.Env tinymce.core.ErrorReporter tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.focus.FocusController tinymce.core.util.I18n tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e){var t=f.DOM,y=g.explode,C=g.each,B=g.extend,r=0,k,x=!1,A=[],l=[],D=function(I){C(H.get(),function(G){"scroll"===I.type?G.fire("ScrollWindow",I):G.fire("ResizeWindow",I)})},E=function(I){if(I!==x){if(I)n(h).on("resize scroll",D);else n(h).off("resize scroll",D);x=I}},F=function(I){var G=l;delete A[I.id];for(var J=0;J<A.length;J++)if(A[J]===I){A.splice(J,1);break}l=v.filter(l,function(M){return I!==M});H.activeEditor===I&&(H.activeEditor=0<l.length?l[0]:null);
H.focusedEditor===I&&(H.focusedEditor=null);return G.length!==l.length};var H={defaultSettings:{},$:n,majorVersion:"4",minorVersion:"7.3",releaseDate:"2017-11-23",editors:A,i18n:z,activeEditor:null,settings:{},setup:function(){var I="",G;var J=e.getDocumentBaseUrl(p.location);/^[^:]+:\/\/\/?[^\/]+\//.test(J)&&(J=J.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(J)||(J+="/"));if(G=h.tinymce||h.tinyMCEPreInit){var M=G.base||G.baseURL;I=G.suffix}else{for(var P=p.getElementsByTagName("script"),
Q=0;Q<P.length;Q++){G=P[Q].src;var W=G.substring(G.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(G)){-1!=W.indexOf(".min")&&(I=".min");M=G.substring(0,G.lastIndexOf("/"));break}}!M&&p.currentScript&&(G=p.currentScript.src,-1!=G.indexOf(".min")&&(I=".min"),M=G.substring(0,G.lastIndexOf("/")))}this.baseURL=(new e(J)).toAbsolute(M);this.documentBaseURL=J;this.baseURI=new e(this.baseURL);this.suffix=I;u.setup(this)},overrideDefaults:function(I){var G;if(G=I.base_url)this.baseURL=
(new e(this.documentBaseURL)).toAbsolute(G.replace(/\/+$/,"")),this.baseURI=new e(this.baseURL);if(G=I.suffix)this.suffix=G;this.defaultSettings=I;I=I.plugin_base_urls;for(var J in I)b.PluginManager.urls[J]=I[J]},init:function(I){var G=this,J;var M=g.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var P=function(O){var U=O.id;U||(U=(U=O.name)&&
!t.get(U)?O.name:t.uniqueId(),O.setAttribute("id",U));return U},Q=function(O){var U=I[O];if(U)return U.apply(G,Array.prototype.slice.call(arguments,2))},W=function(O,U){return U.constructor===RegExp?U.test(O.className):t.hasClass(O,U)},V=function(O){var U=[];if(d.ie&&11>d.ie)return a.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(O.types)return C(O.types,function(S){U=
U.concat(t.select(S.selector))}),U;if(O.selector)return t.select(O.selector);if(O.target)return[O.target];switch(O.mode){case "exact":var X=O.elements||"";0<X.length&&C(y(X),function(S){var aa;(aa=t.get(S))?U.push(aa):C(p.forms,function(fa){C(fa.elements,function(ia){ia.name===S&&(S="mce_editor_"+r++,t.setAttrib(ia,"id",S),U.push(ia))})})});break;case "textareas":case "specific_textareas":C(t.select("textarea"),function(S){O.editor_deselector&&W(S,O.editor_deselector)||O.editor_selector&&!W(S,O.editor_selector)||
U.push(S)})}return U},ba=function(O){J=O},N=function(){var O=0,U=[],X=function(aa,fa,ia){aa=new c(aa,fa,G);U.push(aa);aa.on("init",function(){++O===S.length&&ba(U)});aa.targetElm=aa.targetElm||ia;aa.render()};t.unbind(h,"ready",N);Q("onpageload");var S=n.unique(V(I));I.types?C(I.types,function(aa){g.each(S,function(fa){return t.is(fa,aa.selector)?(X(P(fa),B({},I,aa),fa),!1):!0})}):(g.each(S,function(aa){(aa=G.get(aa.id))&&aa.initialized&&!(aa.getContainer()||aa.getBody()).parentNode&&(F(aa),aa.unbindAllNativeEvents(),
aa.destroy(!0),aa.removed=!0)}),S=g.grep(S,function(aa){return!G.get(aa.id)}),0===S.length?ba([]):C(S,function(aa){I.inline&&aa.tagName.toLowerCase()in M?a.initError("Could not initialize inline editor on invalid inline target element",aa):X(P(aa),I,aa)}))};G.settings=I;t.bind(h,"ready",N);return new m(function(O){J?O(J):ba=function(U){O(U)}})},get:function(I){return 0===arguments.length?l.slice(0):q.isString(I)?v.find(l,function(G){return G.id===I}).getOr(null):q.isNumber(I)?l[I]?l[I]:null:null},
add:function(I){var G=this;if(A[I.id]===I)return I;null===G.get(I.id)&&("length"!==I.id&&(A[I.id]=I),A.push(I),l.push(I));E(!0);G.activeEditor=I;G.fire("AddEditor",{editor:I});k||(k=function(){G.fire("BeforeUnload")},t.bind(h,"beforeunload",k));return I},createEditor:function(I,G){return this.add(new c(I,G,this))},remove:function(I){var G=this;if(I)if(q.isString(I))I=I.selector||I,C(t.select(I),function(M){(J=G.get(M.id))&&G.remove(J)});else{var J=I;if(q.isNull(G.get(J.id)))return null;F(J)&&G.fire("RemoveEditor",
{editor:J});0===l.length&&t.unbind(h,"beforeunload",k);J.remove();E(0<l.length);return J}else for(I=l.length-1;0<=I;I--)G.remove(l[I])},execCommand:function(I,G,J){var M=this.get(J);switch(I){case "mceAddEditor":return this.get(J)||(new c(J,this.settings,this)).render(),!0;case "mceRemoveEditor":return M&&M.remove(),!0;case "mceToggleEditor":if(!M)return this.execCommand("mceAddEditor",0,J),!0;M.isHidden()?M.show():M.hide();return!0}return this.activeEditor?this.activeEditor.execCommand(I,G,J):!1},
triggerSave:function(){C(l,function(I){I.save()})},addI18n:function(I,G){z.add(I,G)},translate:function(I){return z.translate(I)},setActive:function(I){var G=this.activeEditor;this.activeEditor!=I&&(G&&G.fire("deactivate",{relatedTarget:I}),I.fire("activate",{relatedTarget:G}));this.activeEditor=I}};B(H,w);H.setup();return H});L("tinymce.core.api.dom.RangeUtils","ephox.katamari.api.Fun tinymce.core.selection.CaretRangeFromPoint tinymce.core.selection.NormalizeRange tinymce.core.selection.RangeCompare tinymce.core.selection.RangeNodes tinymce.core.selection.RangeWalk tinymce.core.selection.SplitRange".split(" "),
function(v,q,p,h,b,c,d){var a=function(f){return{walk:function(n,u){return c.walk(f,n,u)},split:d.split,normalize:function(n){return p.normalize(f,n).fold(v.constant(!1),function(u){n.setStart(u.startContainer,u.startOffset);n.setEnd(u.endContainer,u.endOffset);return!0})}}};a.compareRanges=h.isEq;a.getCaretRangeFromPoint=q.fromPoint;a.getSelectedNode=b.getSelectedNode;a.getNode=b.getNode;return a});L("tinymce.core.geom.Rect",[],function(){var v=Math.min,q=Math.max,p=Math.round,h=function(c,d,a){var f=
d.x;var n=d.y;var u=c.w;c=c.h;var z=d.w;d=d.h;a=(a||"").split("");"b"===a[0]&&(n+=d);"r"===a[1]&&(f+=z);"c"===a[0]&&(n+=p(d/2));"c"===a[1]&&(f+=p(z/2));"b"===a[3]&&(n-=c);"r"===a[4]&&(f-=u);"c"===a[3]&&(n-=p(c/2));"c"===a[4]&&(f-=p(u/2));return b(f,n,u,c)},b=function(c,d,a,f){return{x:c,y:d,w:a,h:f}};return{inflate:function(c,d,a){return b(c.x-d,c.y-a,c.w+2*d,c.h+2*a)},relativePosition:h,findBestRelativePosition:function(c,d,a,f){var n;for(n=0;n<f.length;n++){var u=h(c,d,f[n]);if(u.x>=a.x&&u.x+u.w<=
a.w+a.x&&u.y>=a.y&&u.y+u.h<=a.h+a.y)return f[n]}return null},intersect:function(c,d){var a=q(c.x,d.x);var f=q(c.y,d.y);var n=v(c.x+c.w,d.x+d.w);c=v(c.y+c.h,d.y+d.h);return 0>n-a||0>c-f?null:b(a,f,n-a,c-f)},clamp:function(c,d,a){var f=c.x;var n=c.y;var u=c.x+c.w;var z=c.y+c.h;var w=d.x+d.w;var m=d.y+d.h;c=q(0,d.x-f);d=q(0,d.y-n);w=q(0,u-w);m=q(0,z-m);f+=c;n+=d;a&&(u+=c,z+=d,f-=w,n-=m);return b(f,n,u-w-f,z-m-n)},create:b,fromClientRect:function(c){return b(c.left,c.top,c.width,c.height)}}});L("tinymce.core.ui.Factory",
[],function(){var v={};return{add:function(q,p){v[q.toLowerCase()]=p},has:function(q){return!!v[q.toLowerCase()]},get:function(q){var p=q.toLowerCase();p=v.hasOwnProperty(p)?v[p]:null;if(null===p)throw Error("Could not find module for type: "+q);return p},create:function(q,p){"string"==typeof q?(p=p||{},p.type=q):(p=q,q=p.type);q=q.toLowerCase();var h=v[q];if(!h)throw Error("Could not find control by type: "+q);h=new h(p);h.type=q;return h}}});L("tinymce.core.util.Class",["tinymce.core.util.Tools"],
function(v){var q=v.each,p=v.extend,h,b;v=function(){};v.extend=h=function(c){var d=this.prototype,a,f=function(){var m,g;if(!b&&(this.init&&this.init.apply(this,arguments),g=this.Mixins))for(m=g.length;m--;){var e=g[m];e.init&&e.init.apply(this,arguments)}},n=function(){return this},u=function(m,g){return function(){var e=this._super;this._super=d[m];var t=g.apply(this,arguments);this._super=e;return t}};b=!0;var z=new this;b=!1;c.Mixins&&(q(c.Mixins,function(m){for(var g in m)"init"!==g&&(c[g]=
m[g])}),d.Mixins&&(c.Mixins=d.Mixins.concat(c.Mixins)));c.Methods&&q(c.Methods.split(","),function(m){c[m]=n});c.Properties&&q(c.Properties.split(","),function(m){var g="_"+m;c[m]=function(e){return void 0!==e?(this[g]=e,this):this[g]}});c.Statics&&q(c.Statics,function(m,g){f[g]=m});c.Defaults&&d.Defaults&&(c.Defaults=p({},d.Defaults,c.Defaults));for(a in c){var w=c[a];z[a]="function"==typeof w&&d[a]?u(a,w):w}f.prototype=z;f.constructor=f;f.extend=h;return f};return v});L("tinymce.core.util.Color",
[],function(){var v=Math.min,q=Math.max,p=Math.round;return function(h){var b=this,c=0,d=0,a=0,f=function(n){if("object"==typeof n)if("r"in n)c=n.r,d=n.g,a=n.b;else{if("v"in n){var u=n.h;var z=n.s;n=n.v;u=(parseInt(u,10)||0)%360;z=parseInt(z,10)/100;n=parseInt(n,10)/100;z=q(0,v(z,1));n=q(0,v(n,1));if(0===z)c=d=a=p(255*n);else{u/=60;z*=n;var w=z*(1-Math.abs(u%2-1));n-=z;switch(Math.floor(u)){case 0:c=z;d=w;a=0;break;case 1:c=w;d=z;a=0;break;case 2:c=0;d=z;a=w;break;case 3:c=0;d=w;a=z;break;case 4:c=
w;d=0;a=z;break;case 5:c=z;d=0;a=w;break;default:c=d=a=0}c=p(255*(c+n));d=p(255*(d+n));a=p(255*(a+n))}}}else if(u=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))c=parseInt(u[1],10),d=parseInt(u[2],10),a=parseInt(u[3],10);else if(u=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))c=parseInt(u[1],16),d=parseInt(u[2],16),a=parseInt(u[3],16);else if(u=/#([0-F])([0-F])([0-F])/gi.exec(n))c=parseInt(u[1]+u[1],16),d=parseInt(u[2]+u[2],16),a=parseInt(u[3]+u[3],16);c=0>c?0:255<c?255:c;d=0>
d?0:255<d?255:d;a=0>a?0:255<a?255:a;return b};h&&f(h);b.toRgb=function(){return{r:c,g:d,b:a}};b.toHsv=function(){var n=c;var u=d,z=a;n/=255;u/=255;z/=255;var w=v(n,v(u,z));var m=q(n,q(u,z));if(w==m)n={h:0,s:0,v:100*w};else{var g=(m-w)/m;n={h:p(60*((n==w?3:z==w?1:5)-(n==w?u-z:z==w?n-u:z-n)/(m-w))),s:p(100*g),v:p(100*m)}}return n};b.toHex=function(){var n=function(u){u=parseInt(u,10).toString(16);return 1<u.length?u:"0"+u};return"#"+n(c)+n(d)+n(a)};b.parse=f}});L("tinymce.core.util.JSON",["global!window"],
function(v){var q=function(p,h){var b;h=h||'"';if(null===p)return"null";var c=typeof p;if("string"==c){var d="\bb\tt\nn\ff\rr\"\"''\\\\";return h+p.replace(/([\u0080-\uFFFF\x00-\x1f"'\\])/g,function(f,n){if('"'===h&&"'"===f)return f;a=d.indexOf(n);if(a+1)return"\\"+d.charAt(a+1);f=n.charCodeAt().toString(16);return"\\u"+"0000".substring(f.length)+f})+h}if("object"==c){if(p.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(p)){var a=0;for(d="[";a<p.length;a++)d+=(0<a?",":"")+q(p[a],
h);return d+"]"}d="{";for(b in p)p.hasOwnProperty(b)&&(d+="function"!=typeof p[b]?(1<d.length?","+h:h)+b+h+":"+q(p[b],h):"");return d+"}"}return""+p};return{serialize:q,parse:function(p){try{return v[String.fromCharCode(101)+"val"]("("+p+")")}catch(h){}}}});L("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(v){return{callbacks:{},count:0,send:function(q){var p=this,h=v.DOM,b=void 0!==q.count?q.count:p.count,c="tinymce_jsonp_"+b;p.callbacks[b]=function(d){h.remove(c);delete p.callbacks[b];
q.callback(d)};h.add(h.doc.body,"script",{id:c,src:q.url,type:"text/javascript"});p.count++}}});L("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(v,q,p,h){var b={send:function(c){var d=0,a=function(){!c.async||4==f.readyState||1E4<d++?(c.success&&1E4>d&&200==f.status?c.success.call(c.success_scope,""+f.responseText,f,c):c.error&&c.error.call(c.error_scope,1E4<d?"TIMED_OUT":"GENERAL",f,c),f=null):q(a,10)};
c.scope=c.scope||this;c.success_scope=c.success_scope||c.scope;c.error_scope=c.error_scope||c.scope;c.async=!1===c.async?!1:!0;c.data=c.data||"";b.fire("beforeInitialize",{settings:c});var f=new v;f.overrideMimeType&&f.overrideMimeType(c.content_type);f.open(c.type||(c.data?"POST":"GET"),c.url,c.async);c.crossDomain&&(f.withCredentials=!0);c.content_type&&f.setRequestHeader("Content-Type",c.content_type);c.requestheaders&&h.each(c.requestheaders,function(n){f.setRequestHeader(n.key,n.value)});f.setRequestHeader("X-Requested-With",
"XMLHttpRequest");f=b.fire("beforeSend",{xhr:f,settings:c}).xhr;f.send(c.data);if(!c.async)return a();q(a,10)}};h.extend(b,p);return b});L("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(v,q,p){var h=p.extend,b=function(c){this.settings=h({},c);this.count=0};b.sendRPC=function(c){return(new b).send(c)};b.prototype={send:function(c){var d=c.error,a=c.success;c=h(this.settings,c);c.success=function(f,n){f=v.parse(f);"undefined"==
typeof f&&(f={error:"JSON Parse error."});f.error?d.call(c.error_scope||c.scope,f.error,n):a.call(c.success_scope||c.scope,f.result)};c.error=function(f,n){d&&d.call(c.error_scope||c.scope,f,n)};c.data=v.serialize({id:c.id||"c"+this.count++,method:c.method,params:c.params});c.content_type="application/json";q.send(c)}};return b});L("tinymce.core.util.LocalStorage",["global!document","global!window"],function(v,q){var p,h,b;try{if(q.localStorage)return q.localStorage}catch(n){}var c=v.documentElement;
(b=!!c.addBehavior)&&c.addBehavior("#default#userData");var d=function(){h=[];for(var n in p)h.push(n);f.length=h.length},a=function(){var n="";if(b){for(var u in p){var z=p[u];n+=(n?",":"")+u.length.toString(32)+","+u+","+z.length.toString(32)+","+z}c.setAttribute("tinymce",n);try{c.save("tinymce")}catch(w){}d()}};var f={key:function(n){return h[n]},getItem:function(n){return n in p?p[n]:null},setItem:function(n,u){p[n]=""+u;a()},removeItem:function(n){delete p[n];a()},clear:function(){p={};a()}};
(function(){var n=0;p={};if(b){var u=function(g){var e=void 0!==g?n+g:z.indexOf(",",n);if(-1===e||e>z.length)return null;g=z.substring(n,e);n=e+1;return g};c.load("tinymce");var z=c.getAttribute("tinymce")||"";do{var w=u();if(null===w)break;var m=u(parseInt(w,32)||0);if(null!==m){w=u();if(null===w)break;w=u(parseInt(w,32)||0);m&&(p[m]=w)}}while(null!==m);d()}})();return f});L("tinymce.core.api.Tinymce","tinymce.core.AddOnManager tinymce.core.Editor tinymce.core.EditorCommands tinymce.core.EditorManager tinymce.core.EditorObservable tinymce.core.Env tinymce.core.Shortcuts tinymce.core.UndoManager tinymce.core.api.FocusManager tinymce.core.api.Formatter tinymce.core.api.NotificationManager tinymce.core.api.WindowManager tinymce.core.api.dom.BookmarkManager tinymce.core.api.dom.RangeUtils tinymce.core.api.dom.Serializer tinymce.core.dom.ControlSelection tinymce.core.dom.DOMUtils tinymce.core.dom.DomQuery tinymce.core.dom.EventUtils tinymce.core.dom.ScriptLoader tinymce.core.dom.Selection tinymce.core.dom.Sizzle tinymce.core.dom.TreeWalker tinymce.core.geom.Rect tinymce.core.html.DomParser tinymce.core.html.Entities tinymce.core.html.Node tinymce.core.html.SaxParser tinymce.core.html.Schema tinymce.core.html.Serializer tinymce.core.html.Styles tinymce.core.html.Writer tinymce.core.ui.Factory tinymce.core.util.Class tinymce.core.util.Color tinymce.core.util.Delay tinymce.core.util.EventDispatcher tinymce.core.util.I18n tinymce.core.util.JSON tinymce.core.util.JSONP tinymce.core.util.JSONRequest tinymce.core.util.LocalStorage tinymce.core.util.Observable tinymce.core.util.Promise tinymce.core.util.Tools tinymce.core.util.URI tinymce.core.util.VK tinymce.core.util.XHR".split(" "),
function(v,q,p,h,b,c,d,a,f,n,u,z,w,m,g,e,t,y,C,B,r,k,x,A,l,D,E,F,H,I,G,J,M,P,Q,W,V,ba,N,O,U,X,S,aa,fa,ia,ta,pa){return fa.extend(h,{geom:{Rect:A},util:{Promise:aa,Delay:W,Tools:fa,VK:ta,URI:ia,Class:P,EventDispatcher:V,Observable:S,I18n:ba,XHR:pa,JSON:N,JSONRequest:U,JSONP:O,LocalStorage:X,Color:Q},dom:{EventUtils:C,Sizzle:k,DomQuery:y,TreeWalker:x,DOMUtils:t,ScriptLoader:B,RangeUtils:m,Serializer:g,ControlSelection:e,BookmarkManager:w,Selection:r,Event:C.Event},html:{Styles:G,Entities:D,Node:E,Schema:H,
SaxParser:F,DomParser:l,Writer:J,Serializer:I},ui:{Factory:M},Env:c,AddOnManager:v,Formatter:n,UndoManager:a,EditorCommands:p,WindowManager:z,NotificationManager:u,EditorObservable:b,Shortcuts:d,Editor:q,FocusManager:f,EditorManager:h,DOM:t.DOM,ScriptLoader:B.ScriptLoader,PluginManager:v.PluginManager,ThemeManager:v.ThemeManager,trim:fa.trim,isArray:fa.isArray,is:fa.is,toArray:fa.toArray,makeMap:fa.makeMap,each:fa.each,map:fa.map,grep:fa.grep,inArray:fa.inArray,extend:fa.extend,create:fa.create,walk:fa.walk,
createNS:fa.createNS,resolve:fa.resolve,explode:fa.explode,_addCacheSuffix:fa._addCacheSuffix,isOpera:c.opera,isWebKit:c.webkit,isIE:c.ie,isGecko:c.gecko,isMac:c.mac})});L("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(v,q,p){var h=this||q;return function(){q.tinymce=p;q.tinyMCE=p;"function"!==typeof h.define||h.define.amd||(h.define("ephox/tinymce",[],v.constant(p)),h.define("tinymce.core.EditorManager",[],v.constant(p)));"object"===typeof module&&
(module.exports=p);return p}});qa("tinymce.core.api.Main")()})();

(function(){var v={},x=function(a){var d=v[a];if(void 0===d)throw"module ["+a+"] was undefined";if(void 0===d.instance){for(var b=v[a],h=b.deps,f=b.defn,k=h.length,e=Array(k),c=0;c<k;++c)e[c]=x(h[c]);h=f.apply(null,e);if(void 0===h)throw"module ["+a+"] returned undefined";b.instance=h}return d.instance},s=function(a,d,b){if("string"!==typeof a)throw"module id must be a string";if(void 0===d)throw"no dependencies for "+a;if(void 0===b)throw"no definition function for "+a;v[a]={deps:d,defn:b,instance:void 0}},
u=function(a,d){s(a,[],function(){return d})};u("global!tinymce.PluginManager",tinymce.PluginManager);u("global!tinymce.util.Tools",tinymce.util.Tools);u("global!tinymce.util.VK",tinymce.util.VK);s("tinymce.lists.core.NodeType",[],function(){var a=function(a){return a&&"BR"===a.nodeName};return{isTextNode:function(a){return a&&3===a.nodeType},isListNode:function(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)},isListItemNode:function(a){return a&&/^(LI|DT|DD)$/.test(a.nodeName)},isBr:a,isFirstChild:function(a){return a.parentNode.firstChild===
a},isLastChild:function(a){return a.parentNode.lastChild===a},isTextBlock:function(a,b){return b&&!!a.schema.getTextBlockElements()[b.nodeName]},isBogusBr:function(d,b){return a(b)?d.isBlock(b.nextSibling)&&!a(b.previousSibling)?!0:!1:!1},isEmpty:function(a,b,h){var f=a.isEmpty(b);return h&&0<a.select("span[data-mce-type=bookmark]",b).length?!1:f},isChildOfBody:function(a,b){return a.isChildOf(b,a.getRoot())}}});u("global!tinymce.dom.TreeWalker",tinymce.dom.TreeWalker);u("global!tinymce.dom.RangeUtils",
tinymce.dom.RangeUtils);s("tinymce.lists.core.Selection",["global!tinymce.util.Tools","tinymce.lists.core.NodeType"],function(a,d){return{getSelectedListItems:function(b){return a.grep(b.selection.getSelectedBlocks(),function(a){return d.isListItemNode(a)})}}});u("global!tinymce.dom.DOMUtils.DOM",tinymce.dom.DOMUtils.DOM);s("tinymce.lists.core.Range",["global!tinymce.dom.RangeUtils","tinymce.lists.core.NodeType"],function(a,d){var b=function(h,f){var b=a.getNode(h,f);return d.isListItemNode(h)&&d.isTextNode(b)?
{container:b,offset:f>=h.childNodes.length?b.data.length:0}:{container:h,offset:f}};return{getNormalizedEndPoint:b,normalizeRange:function(a){var f=a.cloneRange(),d=b(a.startContainer,a.startOffset);f.setStart(d.container,d.offset);a=b(a.endContainer,a.endOffset);f.setEnd(a.container,a.offset);return f}}});s("tinymce.lists.core.Bookmark",["global!tinymce.dom.DOMUtils.DOM","tinymce.lists.core.NodeType","tinymce.lists.core.Range"],function(a,d,b){return{createBookmark:function(b){var f={},d=function(e){var c,
g,n;g=b[e?"startContainer":"endContainer"];n=b[e?"startOffset":"endOffset"];1===g.nodeType&&(c=a.create("span",{"data-mce-type":"bookmark"}),g.hasChildNodes()?(n=Math.min(n,g.childNodes.length-1),e?g.insertBefore(c,g.childNodes[n]):a.insertAfter(c,g.childNodes[n])):g.appendChild(c),g=c,n=0);f[e?"startContainer":"endContainer"]=g;f[e?"startOffset":"endOffset"]=n};d(!0);b.collapsed||d();return f},resolveBookmark:function(d){function f(e){var c,g,f;c=f=d[e?"startContainer":"endContainer"];g=d[e?"startOffset":
"endOffset"];if(c){if(1===c.nodeType){a:{g=c;for(var b=g.parentNode.firstChild,l=0;b;){if(b===g){g=l;break a}1===b.nodeType&&"bookmark"===b.getAttribute("data-mce-type")||l++;b=b.nextSibling}g=-1}c=c.parentNode;a.remove(f)}d[e?"startContainer":"endContainer"]=c;d[e?"startOffset":"endOffset"]=g}}f(!0);f();var k=a.createRng();k.setStart(d.startContainer,d.startOffset);d.endContainer&&k.setEnd(d.endContainer,d.endOffset);return b.normalizeRange(k)}}});s("tinymce.lists.core.NormalizeLists",["global!tinymce.dom.DOMUtils.DOM",
"global!tinymce.util.Tools","tinymce.lists.core.NodeType"],function(a,d,b){var h=function(f,d){var e,c=d.parentNode;"LI"===c.nodeName&&c.firstChild===d&&((e=c.previousSibling)&&"LI"===e.nodeName?(e.appendChild(d),b.isEmpty(f,c)&&a.remove(c)):a.setStyle(c,"listStyleType","none"));b.isListNode(c)&&(e=c.previousSibling)&&"LI"===e.nodeName&&e.appendChild(d)};return{normalizeList:h,normalizeLists:function(a,b){d.each(d.grep(a.select("ol,ul",b)),function(e){h(a,e)})}}});u("global!tinymce.dom.BookmarkManager",
tinymce.dom.BookmarkManager);u("global!tinymce.Env",tinymce.Env);s("tinymce.lists.core.TextBlock",["global!tinymce.dom.DOMUtils.DOM","global!tinymce.Env"],function(a,d){return{createNewTextBlock:function(b,h,f){var k,e,c=a.createFragment(),g,n=b.schema.getBlockElements();b.settings.forced_root_block&&(f=f||b.settings.forced_root_block);f&&(e=a.create(f),e.tagName===b.settings.forced_root_block&&a.setAttribs(e,b.settings.forced_root_block_attrs),c.appendChild(e));if(h)for(;k=h.firstChild;){var p=k.nodeName;
g||"SPAN"===p&&"bookmark"===k.getAttribute("data-mce-type")||(g=!0);n[p]?(c.appendChild(k),e=null):f?(e||(e=a.create(f),c.appendChild(e)),e.appendChild(k)):c.appendChild(k)}b.settings.forced_root_block?g||d.ie&&!(10<d.ie)||e.appendChild(a.create("br",{"data-mce-bogus":"1"})):c.appendChild(a.create("br"));return c}}});s("tinymce.lists.core.SplitList",["global!tinymce.dom.DOMUtils.DOM","global!tinymce.util.Tools","tinymce.lists.core.TextBlock","tinymce.lists.core.NodeType"],function(a,d,b,h){return{splitList:function(f,
k,e,c){var g,n,p,l=function(c){d.each(n,function(a){c.parentNode.insertBefore(a,e.parentNode)});a.remove(c)};n=a.select('span[data-mce-type="bookmark"]',k);c=c||b.createNewTextBlock(f,e);g=a.createRng();g.setStartAfter(e);g.setEndAfter(k);g=g.extractContents();for(p=g.firstChild;p;p=p.firstChild)if("LI"===p.nodeName&&f.dom.isEmpty(p)){a.remove(p);break}f.dom.isEmpty(g)||a.insertAfter(g,k);a.insertAfter(c,k);h.isEmpty(f.dom,e.parentNode)&&l(e.parentNode);a.remove(e);h.isEmpty(f.dom,k)&&a.remove(k)}}});
s("tinymce.lists.actions.Outdent","global!tinymce.dom.DOMUtils.DOM tinymce.lists.core.NodeType tinymce.lists.core.Bookmark tinymce.lists.core.Selection tinymce.lists.core.SplitList tinymce.lists.core.NormalizeLists tinymce.lists.core.TextBlock".split(" "),function(a,d,b,h,f,k,e){var c=function(c,b){var h=b.parentNode,l=h.parentNode;if(h===c.getBody())return!0;if("DD"===b.nodeName)return a.rename(b,"DT"),!0;if(d.isFirstChild(b)&&d.isLastChild(b))return"LI"===l.nodeName?(a.insertAfter(b,l),d.isEmpty(c.dom,
l)&&a.remove(l),a.remove(h)):d.isListNode(l)?a.remove(h,!0):(l.insertBefore(e.createNewTextBlock(c,b),h),a.remove(h)),!0;if(d.isFirstChild(b))return"LI"===l.nodeName?(a.insertAfter(b,l),b.appendChild(h),d.isEmpty(c.dom,l)&&a.remove(l)):d.isListNode(l)?l.insertBefore(b,h):(l.insertBefore(e.createNewTextBlock(c,b),h),a.remove(b)),!0;if(d.isLastChild(b))return"LI"===l.nodeName?a.insertAfter(b,l):d.isListNode(l)?a.insertAfter(b,h):(a.insertAfter(e.createNewTextBlock(c,b),h),a.remove(b)),!0;"LI"===l.nodeName?
(h=l,l=e.createNewTextBlock(c,b,"LI")):l=d.isListNode(l)?e.createNewTextBlock(c,b,"LI"):e.createNewTextBlock(c,b);f.splitList(c,h,b,l);k.normalizeLists(c.dom,h.parentNode);return!0};return{outdent:c,outdentSelection:function(a){var e=h.getSelectedListItems(a);if(e.length){var d=b.createBookmark(a.selection.getRng(!0)),f,m,k=a.getBody();for(f=e.length;f--;)for(var t=e[f].parentNode;t&&t!==k;){for(m=e.length;m--;)if(e[m]===t){e.splice(f,1);break}t=t.parentNode}for(f=0;f<e.length&&(c(a,e[f])||0!==f);f++);
a.selection.setRng(b.resolveBookmark(d));a.nodeChanged();return!0}}}});s("tinymce.lists.actions.ToggleList","global!tinymce.util.Tools global!tinymce.dom.BookmarkManager tinymce.lists.core.Selection tinymce.lists.core.NodeType tinymce.lists.core.Bookmark tinymce.lists.core.SplitList tinymce.lists.core.NormalizeLists tinymce.lists.actions.Outdent".split(" "),function(a,d,b,h,f,k,e,c){var g=function(y,b){a.each(b,function(a,b){y.setAttribute(b,a)})},n=function(b,e,c){g(e,c["list-attributes"]);a.each(b.select("li",
e),function(a){g(a,c["list-item-attributes"])})},p=function(a,b,e){a.setStyle(b,"list-style-type",e["list-style-type"]?e["list-style-type"]:null);n(a,b,e)},l=function(a,b,e){var c,f=a.getBody();c=b[e?"startContainer":"endContainer"];b=b[e?"startOffset":"endOffset"];for(1===c.nodeType&&(c=c.childNodes[Math.min(b,c.childNodes.length-1)]||c);c.parentNode!==f&&!h.isTextBlock(a,c)&&!/^(TD|TH)$/.test(c.parentNode.nodeName);)c=c.parentNode;return c},m=function(b,c){for(var e=[],f=b.getBody(),r=b.dom,g=l(b,
c,!0),m=l(b,c,!1),q,k=[];g&&(k.push(g),g!==m);g=g.nextSibling);a.each(k,function(a){if(h.isTextBlock(b,a))e.push(a),q=null;else if(r.isBlock(a)||h.isBr(a))h.isBr(a)&&r.remove(a),q=null;else{var c=a.nextSibling;d.isBookmarkNode(a)&&(h.isTextBlock(b,c)||!c&&a.parentNode===f)?q=null:(q||(q=r.create("p"),a.parentNode.insertBefore(q,a),e.push(q)),q.appendChild(a))}});return e},w=function(b,c,e){var d=b.selection.getRng(!0),r,g="LI",k=b.dom;e=e?e:{};"false"!==k.getContentEditable(b.selection.getNode())&&
(c=c.toUpperCase(),"DL"===c&&(g="DT"),r=f.createBookmark(d),a.each(m(b,d),function(a){var f,d;if(f=d=a.previousSibling)if(f=h.isListNode(d))if(f=d.nodeName===c){f=k.getStyle(d,"list-style-type");var r=e?e["list-style-type"]:"";f=f===(null===r?"":r)}f?(f=d,a=k.rename(a,g),d.appendChild(a)):(f=k.create(c),a.parentNode.insertBefore(f,a),f.appendChild(a),k.rename(a,g));p(k,f,e);q(b.dom,f)}),b.selection.setRng(f.resolveBookmark(r)))},t=function(d){var r=f.createBookmark(d.selection.getRng(!0)),g=d.getBody(),
m=b.getSelectedListItems(d),q=a.grep(m,function(a){return d.dom.isEmpty(a)}),m=a.grep(m,function(a){return!d.dom.isEmpty(a)});a.each(q,function(a){h.isEmpty(d.dom,a)&&c.outdent(d,a)});a.each(m,function(a){var b,c;if(a.parentNode!==d.getBody()){for(b=a;b&&b!==g;b=b.parentNode)h.isListNode(b)&&(c=b);k.splitList(d,c,a);e.normalizeLists(d.dom,c.parentNode)}});d.selection.setRng(f.resolveBookmark(r))},r=function(a,b,c){b=a.getStyle(b,"list-style-type",!0);a=a.getStyle(c,"list-style-type",!0);return b===
a},q=function(a,b){var c,e;c=b.nextSibling;if(b&&c&&h.isListNode(b)&&b.nodeName===c.nodeName&&r(a,b,c)&&b.className===c.className){for(;e=c.firstChild;)b.appendChild(e);a.remove(c)}c=b.previousSibling;if(b&&c&&h.isListNode(b)&&b.nodeName===c.nodeName&&r(a,b,c)&&b.className===c.className){for(;e=c.lastChild;)b.insertBefore(e,b.firstChild);a.remove(c)}};return{toggleList:function(a,b,c){var e=a.dom.getParent(a.selection.getStart(),"OL,UL,DL");c=c?c:{};if(e!==a.getBody())if(e)if(e.nodeName===b)t(a,b);
else{var d=f.createBookmark(a.selection.getRng(!0));p(a.dom,e,c);q(a.dom,a.dom.rename(e,b));a.selection.setRng(f.resolveBookmark(d))}else w(a,b,c)},removeList:t,mergeWithAdjacentLists:q}});s("tinymce.lists.core.Delete","global!tinymce.dom.TreeWalker global!tinymce.dom.RangeUtils global!tinymce.util.VK tinymce.lists.core.Selection tinymce.lists.core.NodeType tinymce.lists.core.Bookmark tinymce.lists.core.Range tinymce.lists.core.NormalizeLists tinymce.lists.actions.ToggleList".split(" "),function(a,
d,b,h,f,k,e,c,g){var n=function(b,c,e){var g=c.startContainer,h=c.startOffset;if(3===g.nodeType&&(e?h<g.data.length:0<h))return g;c=b.schema.getNonEmptyElements();1===g.nodeType&&(g=d.getNode(g,h));h=new a(g,b.getBody());for(e&&f.isBogusBr(b.dom,g)&&h.next();g=h[e?"next":"prev2"]();)if("LI"===g.nodeName&&!g.hasChildNodes()||c[g.nodeName]||3===g.nodeType&&0<g.data.length)return g},p=function(a,b,c){var e,d,g=b.parentNode;if(f.isChildOfBody(a,b)&&f.isChildOfBody(a,c)){f.isListNode(c.lastChild)&&(d=
c.lastChild);g===c.lastChild&&f.isBr(g.previousSibling)&&a.remove(g.previousSibling);(e=c.lastChild)&&f.isBr(e)&&b.hasChildNodes()&&a.remove(e);f.isEmpty(a,c,!0)&&a.$(c).empty();if(!f.isEmpty(a,b,!0))for(;e=b.firstChild;)c.appendChild(e);d&&c.appendChild(d);a.remove(b);f.isEmpty(a,g)&&g!==a.getRoot()&&a.remove(g)}},l=function(a,b){var c=a.dom,d=a.selection,h=c.getParent(d.getStart(),"LI"),m,l;if(h){m=h.parentNode;if(m===a.getBody()&&f.isEmpty(c,m))return!0;l=e.normalizeRange(d.getRng(!0));if((d=c.getParent(n(a,
l,b),"LI"))&&d!==h)return m=k.createBookmark(l),b?p(c,d,h):p(c,h,d),a.selection.setRng(k.resolveBookmark(m)),!0;if(!d&&!b&&g.removeList(a,m.nodeName))return!0}return!1},m=function(a,b){var c=a.dom,d=c.getParent(a.selection.getStart(),c.isBlock);if(d&&c.isEmpty(d)){var f=e.normalizeRange(a.selection.getRng(!0)),h=c.getParent(n(a,f,b),"LI");if(h)return a.undoManager.transact(function(){c.remove(d);g.mergeWithAdjacentLists(c,h.parentNode);a.selection.select(h,!0);a.selection.collapse(b)}),!0}return!1},
w=function(a){return a.dom.getParent(a.selection.getStart(),"LI,DT,DD")||0<h.getSelectedListItems(a).length?(a.undoManager.transact(function(){a.execCommand("Delete");c.normalizeLists(a.dom,a.getBody())}),!0):!1},t=function(a,b){return a.selection.isCollapsed()?l(a,b)||m(a,b):w(a)};return{setup:function(a){a.on("keydown",function(c){c.keyCode===b.BACKSPACE?t(a,!1)&&c.preventDefault():c.keyCode===b.DELETE&&t(a,!0)&&c.preventDefault()})},backspaceDelete:t}});s("tinymce.lists.actions.Indent",["global!tinymce.dom.DOMUtils.DOM",
"tinymce.lists.core.NodeType","tinymce.lists.core.Bookmark","tinymce.lists.core.Selection"],function(a,d,b,h){var f=function(b,c){var f;if(d.isListNode(b)){for(;f=b.firstChild;)c.appendChild(f);a.remove(b)}},k=function(b){var c,g,h;return"DT"===b.nodeName?(a.rename(b,"DD"),!0):(c=b.previousSibling)&&d.isListNode(c)?(c.appendChild(b),!0):c&&"LI"===c.nodeName&&d.isListNode(c.lastChild)?(c.lastChild.appendChild(b),f(b.lastChild,c.lastChild),!0):(c=b.nextSibling)&&d.isListNode(c)?(c.insertBefore(b,c.firstChild),
!0):(c=b.previousSibling)&&"LI"===c.nodeName?(g=a.create(b.parentNode.nodeName),(h=a.getStyle(b.parentNode,"listStyleType"))&&a.setStyle(g,"listStyleType",h),c.appendChild(g),g.appendChild(b),f(b.lastChild,g),!0):!1};return{indentSelection:function(a){var c=h.getSelectedListItems(a);if(c.length){for(var d=b.createBookmark(a.selection.getRng(!0)),f=0;f<c.length&&(k(c[f])||0!==f);f++);a.selection.setRng(b.resolveBookmark(d));a.nodeChanged();return!0}}}});s("tinymce.lists.Plugin","global!tinymce.PluginManager global!tinymce.util.Tools global!tinymce.util.VK tinymce.lists.core.NodeType tinymce.lists.core.Delete tinymce.lists.actions.Indent tinymce.lists.actions.Outdent tinymce.lists.actions.ToggleList".split(" "),
function(a,d,b,h,f,k,e,c){var g=function(a,b){return function(){var c=a.dom.getParent(a.selection.getStart(),"UL,OL,DL");return c&&c.nodeName===b}},n=function(a){a.on("BeforeExecCommand",function(b){var c=b.command.toLowerCase(),d;"indent"===c?k.indentSelection(a)&&(d=!0):"outdent"===c&&e.outdentSelection(a)&&(d=!0);if(d)return a.fire("ExecCommand",{command:b.command}),b.preventDefault(),!0});a.addCommand("InsertUnorderedList",function(b,d){c.toggleList(a,"UL",d)});a.addCommand("InsertOrderedList",
function(b,d){c.toggleList(a,"OL",d)});a.addCommand("InsertDefinitionList",function(b,d){c.toggleList(a,"DL",d)})},p=function(a){a.on("keydown",function(c){9===c.keyCode&&!b.metaKeyPressed(c)&&a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(c.preventDefault(),c.shiftKey?e.outdentSelection(a):k.indentSelection(a))})},l=function(a){var b=function(b){return function(){var c=this;a.on("NodeChange",function(a){a=d.grep(a.parents,h.isListNode);c.active(0<a.length&&a[0].nodeName===b)})}};-1===d.inArray((a.settings.plugins?
a.settings.plugins:"").split(/[ ,]/),"advlist")&&(a.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:b("OL")}),a.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:b("UL")}));a.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(b){var c=b.control;a.on("nodechange",function(){for(var b=a.selection.getSelectedBlocks(),d=!1,e=0,f=b.length;!d&&e<f;e++)d=b[e].nodeName,d="LI"===d&&h.isFirstChild(b[e])||
"UL"===d||"OL"===d||"DD"===d;c.disabled(d)})}})};a.add("lists",function(a){l(a);f.setup(a);a.on("init",function(){n(a);a.addQueryStateHandler("InsertUnorderedList",g(a,"UL"));a.addQueryStateHandler("InsertOrderedList",g(a,"OL"));a.addQueryStateHandler("InsertDefinitionList",g(a,"DL"));p(a)});return{backspaceDelete:function(b){f.backspaceDelete(a,b)}}});return function(){}});x("tinymce.lists.Plugin")()})();

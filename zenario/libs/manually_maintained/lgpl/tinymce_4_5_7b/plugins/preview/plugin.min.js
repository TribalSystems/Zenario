tinymce.PluginManager.add("preview",function(a){var e=a.settings,f=!tinymce.Env.ie;a.addCommand("mcePreview",function(){a.windowManager.open({title:"Preview",width:parseInt(a.getParam("plugin_preview_width","650"),10),height:parseInt(a.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(f?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var b,d="",d=d+('<base href="'+
a.documentBaseURI.getURI()+'">');tinymce.each(a.contentCSS,function(b){d+='<link type="text/css" rel="stylesheet" href="'+a.documentBaseURI.toAbsolute(b)+'">'});b=e.body_id||"tinymce";-1!=b.indexOf("=")&&(b=a.getParam("body_id","","hash"),b=b[a.id]||b);var c=e.body_class||"";-1!=c.indexOf("=")&&(c=a.getParam("body_class","","hash"),c=c[a.id]||"");b="<!DOCTYPE html><html><head>"+d+'</head><body id="'+b+'" class="mce-content-body '+c+'"'+(a.settings.directionality?' dir="'+a.settings.directionality+
'"':"")+">"+a.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);\x3c/script> </body></html>';f?this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(b):(c=this.getEl("body").firstChild.contentWindow.document,c.open(),c.write(b),c.close())}})});a.addButton("preview",{title:"Preview",cmd:"mcePreview"});a.addMenuItem("preview",
{text:"Preview",cmd:"mcePreview",context:"view"})});

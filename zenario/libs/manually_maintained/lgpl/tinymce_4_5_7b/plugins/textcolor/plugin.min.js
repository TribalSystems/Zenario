tinymce.PluginManager.add("textcolor",function(a){function u(c){var f;a.dom.getParents(a.selection.getStart(),function(a){if(a=a.style["forecolor"==c?"color":"background-color"])f=a});return f}function v(c){var f=[],d;d="000000;Black;993300;Burnt orange;333300;Dark olive;003300;Dark green;003366;Dark azure;000080;Navy Blue;333399;Indigo;333333;Very dark gray;800000;Maroon;FF6600;Orange;808000;Olive;008000;Green;008080;Teal;0000FF;Blue;666699;Grayish blue;808080;Gray;FF0000;Red;FF9900;Amber;99CC00;Yellow green;339966;Sea green;33CCCC;Turquoise;3366FF;Royal blue;800080;Purple;999999;Medium gray;FF00FF;Magenta;FFCC00;Gold;FFFF00;Yellow;00FF00;Lime;00FFFF;Aqua;00CCFF;Sky blue;993366;Red violet;FFFFFF;White;FF99CC;Pink;FFCC99;Peach;FFFF99;Light yellow;CCFFCC;Pale green;CCFFFF;Pale cyan;99CCFF;Light sky blue;CC99FF;Plum".split(";");
d=a.settings.textcolor_map||d;d=a.settings[c+"_map"]||d;for(c=0;c<d.length;c+=2)f.push({text:d[c+1],color:"#"+d[c]});return f}function n(){function c(b,a){var c="transparent"==b;return'<td class="mce-grid-cell'+(c?" mce-colorbtn-trans":"")+'"><div id="'+m+"-"+w++ +'" data-mce-color="'+(b?b:"")+'" role="option" tabIndex="-1" style="'+(b?"background-color: "+b:"")+'" title="'+tinymce.translate(a)+'">'+(c?"&#215;":"")+"</div></td>"}var f,d,b,g,h,l,m=this._id,w=0,e;e=this.settings.origin;f=v(e);f.push({text:tinymce.translate("No color"),
color:"transparent"});b='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';g=f.length-1;for(l=0;l<p[e];l++){b+="<tr>";for(h=0;h<k[e];h++)d=l*k[e]+h,d>g?b+="<td></td>":(d=f[d],b+=c(d.color,d.text));b+="</tr>"}if(a.settings.color_picker_callback){b+='<tr><td colspan="'+k[e]+'" class="mce-custom-color-btn"><div id="'+m+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+m+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+
tinymce.translate("Custom...")+"</button></div></td></tr>";b+="<tr>";for(h=0;h<k[e];h++)b+=c("","Custom color");b+="</tr>"}return b+"</tbody></table>"}function q(c,f){a.undoManager.transact(function(){a.focus();a.formatter.apply(c,{value:f});a.nodeChanged()})}function r(c){a.undoManager.transact(function(){a.focus();a.formatter.remove(c,{value:null},null,!0);a.nodeChanged()})}function s(c){function f(a){b.hidePanel();b.color(a);q(b.settings.format,a)}function d(b,a){b.style.background=a;b.setAttribute("data-mce-color",
a)}var b=this.parent(),g,h;h=b.settings.origin;tinymce.DOM.getParent(c.target,".mce-custom-color-btn")&&(b.hidePanel(),a.settings.color_picker_callback.call(a,function(a){var c=b.panel.getEl().getElementsByTagName("table")[0],g,e,c=tinymce.map(c.rows[c.rows.length-1].childNodes,function(a){return a.firstChild});for(e=0;e<c.length&&(g=c[e],g.getAttribute("data-mce-color"));e++);if(e==k[h])for(e=0;e<k[h]-1;e++)d(c[e],c[e+1].getAttribute("data-mce-color"));d(g,a);f(a)},u(b.settings.format)));(g=c.target.getAttribute("data-mce-color"))?
(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),c.target.setAttribute("aria-selected",!0),this.lastId=c.target.id,"transparent"==g?(b.hidePanel(),b.resetColor(),r(b.settings.format)):f(g)):null!==g&&b.hidePanel()}function t(){this._color?q(this.settings.format,this._color):r(this.settings.format)}var k,p;p={forecolor:a.settings.forecolor_rows||a.settings.textcolor_rows||5,backcolor:a.settings.backcolor_rows||a.settings.textcolor_rows||5};k={forecolor:a.settings.forecolor_cols||
a.settings.textcolor_cols||8,backcolor:a.settings.backcolor_cols||a.settings.textcolor_cols||8};a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:n,onclick:s},onclick:t});a.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:n,onclick:s},onclick:t})});

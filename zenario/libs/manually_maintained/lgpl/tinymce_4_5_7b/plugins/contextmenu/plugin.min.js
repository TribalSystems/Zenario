tinymce.PluginManager.add("contextmenu",function(c){var d,f,g=c.settings.contextmenu_never_use_native;c.on("mousedown",function(b){if(tinymce.Env.mac&&tinymce.Env.webkit&&2===b.button&&(!b.ctrlKey||g)&&c.selection.isCollapsed())c.once("contextmenu",function(a){c.selection.placeCaretAt(a.clientX,a.clientY)})});c.on("contextmenu",function(b){var a;if(!b.ctrlKey||g){b.preventDefault();a=c.settings.contextmenu||"link openlink image inserttable | cell row column deletetable";if(d)d.show();else{var e=[];
tinymce.each(a.split(/[ ,]/),function(a){var b=c.menuItems[a];"|"==a&&(b={text:a});b&&(b.shortcut="",e.push(b))});for(a=0;a<e.length;a++)"|"==e[a].text&&(0!==a&&a!=e.length-1||e.splice(a,1));d=(new tinymce.ui.Menu({items:e,context:"contextmenu",classes:"contextmenu"})).renderTo();d.on("hide",function(a){a.control===this&&(f=!1)});c.on("remove",function(){d.remove();d=null})}a={x:b.pageX,y:b.pageY};c.inline||(a=tinymce.DOM.getPos(c.getContentAreaContainer()),a.x+=b.clientX,a.y+=b.clientY);d.moveTo(a.x,
a.y);f=!0}});return{isContextMenuVisible:function(){return!0===f}}});

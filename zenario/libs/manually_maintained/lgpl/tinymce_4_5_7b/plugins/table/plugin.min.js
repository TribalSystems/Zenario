(function($,M){function aa(e,y){for(var n,a=[],k=0;k<e.length;++k){if(!(n=W[e[k]]))a:{n=$;for(var x=e[k].split(/[.\/]/),s=0;s<x.length;++s){if(!n[x[s]]){n=void 0;break a}n=n[x[s]]}}if(!n)throw"module definition dependecy not found: "+e[k];a.push(n)}y.apply(null,a)}function H(e,y,n){if("string"!==typeof e)throw"invalid module definition, module id must be defined and be a string";if(y===M)throw"invalid module definition, dependencies must be specified";if(n===M)throw"invalid module definition, definition function must be specified";
aa(y,function(){W[e]=n.apply(null,arguments)})}var W={};H("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){var y=function(a){return function(e,n){e&&(n=parseInt(n,10),1===n||0===n?e.removeAttribute(a,1):e.setAttribute(a,n,1))}},n=function(a){return function(e){return parseInt(e.getAttribute(a)||1,10)}};return{setColSpan:y("colSpan"),setRowSpan:y("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(a,e,n){y(e)(a,n)},getSpanVal:function(a,e){return n(e)(a)},paddCell:function(a){e.ie&&
!(9<e.ie)||a.hasChildNodes()||(a.innerHTML='<br data-mce-bogus="1" />')}}});H("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,y){var n=function(a,c,b){return(a=a[b]?a[b][c]:null)?a.elm:null},a=function(a,c,b,e){for(var A,t=0,D=n(a,c,b);0<e?b<a.length:0<=b;b+=e){A=a[b]?a[b][c]:null;if(D!==A.elm)break;t++}return t},k=function(a,c,b){a=a[b];for(b=c;b<a.length;b++)if(c=a[b],c.real)return c.elm;return null},x=function(c,e){for(var b,q=[],A=c[e],t=0;t<A.length;t++)b=
A[t],q.push({elm:b.elm,above:a(c,t,e,-1)-1,below:a(c,t,e,1)-1}),t+=y.getColSpan(b.elm)-1;return q},s=function(a,c){var b=a.elm.ownerDocument.createElement("td");y.setColSpan(b,y.getColSpan(a.elm));y.setRowSpan(b,c);y.paddCell(b);return b},c=function(a,c,b,e){(b=k(a,b+1,e))?b.parentNode.insertBefore(c,b):(b=k(a,0,e),b.parentNode.appendChild(c))};return{splitAt:function(a,k,b,q){var A=x(a,b);k=n(a,k,b).parentNode;var t=[];e.each(A,function(e,m){var d;q?0!==e.above?(y.setRowSpan(e.elm,e.above),d=s(e,
e.below+1),c(a,d,m,b)):d=null:0!==e.below?(y.setRowSpan(e.elm,e.above+1),d=s(e,e.below),c(a,d,m,b+1)):d=null;null!==d&&t.push(t)});return{cells:t,row:k}}}});H("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(e,y,n,a){var k=e.each,x=n.getSpanVal,s=n.setSpanVal;return function(c,v,z){function b(){c.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function q(a,f){if(!a)return[];f=
e.map(f.split(","),function(a){return a.toLowerCase()});return e.grep(a.childNodes,function(a){return-1!==e.inArray(f,a.nodeName.toLowerCase())})}function A(){var a=0;u=[];I=0;k(["thead","tbody","tfoot"],function(f){var b=q(v,f)[0],b=q(b,"tr");k(b,function(b,c){c+=a;k(q(b,"td,th"),function(a,b){var O,d,h,m;if(u[c])for(;u[c][b];)b++;h=x(a,"rowspan");m=x(a,"colspan");for(d=c;d<c+h;d++)for(u[d]||(u[d]=[]),O=b;O<b+m;O++)u[d][O]={part:f,real:d==c&&O==b,elm:a,rowspan:h,colspan:m};I=Math.max(I,b+1)})});
a+=b.length})}function t(a){c.fire("newrow",{node:a});return a}function D(a){c.fire("newcell",{node:a});return a}function m(a,f){a=a.cloneNode(f);a.removeAttribute("id");return a}function d(a,f){var b;if(b=u[f])return b[a]}function l(a,f){for(var b=[],c=0;c<a.length;c++)b.push(d(f,c));return b}function r(a){return a&&(!!B.getAttrib(a.elm,"data-mce-selected")||a==z)}function g(){var a=[];k(v.rows,function(f){k(f.cells,function(b){if(B.getAttrib(b,"data-mce-selected")||z&&b==z.elm)return a.push(f),
!1})});return a}function w(){var a=0;k(u,function(f){k(f,function(f){r(f)&&a++});if(a)return!1});return a}function p(a){var f,b={};!1!==c.settings.table_clone_elements&&(b=e.makeMap((c.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));e.walk(a,function(c){var d;if(3==c.nodeType)return k(B.getParents(c.parentNode,null,a).reverse(),function(a){b[a.nodeName]&&(a=m(a,!1),f?d&&d.appendChild(a):f=d=a,d=a)}),d&&(d.innerHTML=y.ie&&10>y.ie?"&nbsp;":'<br data-mce-bogus="1" />'),
!1},"childNodes");a=m(a,!1);D(a);s(a,"rowSpan",1);s(a,"colSpan",1);f?a.appendChild(f):n.paddCell(a);return a}function h(){var a=B.createRng();k(B.select("tr",v),function(a){0===a.cells.length&&B.remove(a)});if(0===B.select("tr",v).length)a.setStartBefore(v),a.setEndBefore(v),J.setRng(a),B.remove(v);else if(k(B.select("thead,tbody,tfoot",v),function(a){0===a.rows.length&&B.remove(a)}),A(),C&&(a=u[Math.min(u.length-1,C.y)]))J.select(a[Math.min(a.length-1,C.x)].elm,!0),J.collapse(!0)}function K(a,f,
b,c){var d,h,m,g,e;d=u[f][a].elm.parentNode;for(m=1;m<=b;m++)if(d=B.getNext(d,"tr")){for(h=a;0<=h;h--)if(e=u[f+m][h].elm,e.parentNode==d){for(g=1;g<=c;g++)B.insertAfter(p(e),e);break}if(-1==h)for(g=1;g<=c;g++)d.insertBefore(p(d.cells[0]),d.cells[0])}}function f(){k(u,function(a,f){k(a,function(a,b){var c,d,h;if(r(a)&&(a=a.elm,c=x(a,"colspan"),d=x(a,"rowspan"),1<c||1<d)){s(a,"rowSpan",1);s(a,"colSpan",1);for(h=0;h<c-1;h++)B.insertAfter(p(a),a);K(b,f,d-1,c)}})})}function N(a,f,b){for(var c=[],d=0;d<
a.length;d++)(d<f||d>b)&&c.push(a[d]);return c}function E(a){return e.grep(a,function(a){return!1===a.real})}function S(a){for(var f=[],b=0;b<a.length;b++){var d=a[b].elm;f[f.length-1]!==d&&f.push(d)}return f}function X(a,f,b,d,c){var h=0;if(1>c-b)return 0;for(b+=1;b<=c;b++){var m=N(a[b]?a[b]:null,f,d),g=E(m);m.length===g.length&&(e.each(S(g),function(a){n.setRowSpan(a,n.getRowSpan(a)-1)}),h++)}return h}function ca(a,f,b,d,c){var h=0;if(1>d-f)return 0;for(f+=1;f<=d;f++){var m=N(l(a,f),b,c),g=E(m);
m.length===g.length&&(e.each(S(g),function(a){n.setColSpan(a,n.getColSpan(a)-1)}),h++)}return h}function T(a){var f,b,d,c,h,g,e,l,E;k(u,function(b,d){k(b,function(b){if(r(b)&&(b=b.elm,h=b.parentNode,g=t(m(h,!1)),f=d,a))return!1});if(a)return f===M});if(f!==M){for(E=c=0;c<u[0].length;c+=E)if(u[f][c]&&(b=u[f][c].elm,E=x(b,"colspan"),b!=d)){if(!a){if(l=x(b,"rowspan"),1<l){s(b,"rowSpan",l+1);continue}}else if(0<f&&u[f-1][c]&&(e=u[f-1][c].elm,l=x(e,"rowSpan"),1<l)){s(e,"rowSpan",l+1);continue}d=p(b);s(d,
"colSpan",b.colSpan);g.appendChild(d);d=b}g.hasChildNodes()&&(a?h.parentNode.insertBefore(g,h):B.insertAfter(g,h))}}function Y(a){var f,b;k(u,function(b){k(b,function(b,d){if(r(b)&&(f=d,a))return!1});if(a)return f===M});k(u,function(d,c){var h,m,g;d[f]&&(h=d[f].elm,h!=b&&(g=x(h,"colspan"),m=x(h,"rowspan"),1==g?(a?h.parentNode.insertBefore(p(h),h):B.insertAfter(p(h),h),K(f,c,m-1,g)):s(h,"colSpan",h.colSpan+1),b=h))})}function U(a){var f=[];k(a,function(a){k(a,function(a){f.push(a)})});return f}function L(a){var f;
k(u,function(b,d){k(b,function(b,c){if(b.elm==a)return f={x:c,y:d},!1});return!f});return f}function H(){var a,f;a=f=0;k(u,function(b,d){k(b,function(b,c){var h,m;r(b)&&(b=u[d][c],c>a&&(a=c),d>f&&(f=d),b.real&&(h=b.colspan-1,m=b.rowspan-1,h&&c+h>a&&(a=c+h),m&&d+m>f&&(f=d+m)))})});return{x:a,y:f}}var u,I,C,F,J=c.selection,B=J.dom;v=v||B.getParent(J.getStart(!0),"table");A();if(z=z||B.getParent(J.getStart(!0),"th,td"))C=L(z),F=H(),z=d(C.x,C.y);e.extend(this,{deleteTable:function(){var a=B.createRng();
v!==c.getBody()&&(a.setStartAfter(v),a.setEndAfter(v),J.setRng(a),B.remove(v))},split:f,merge:function(a,b,c){var m,g,l,E,p,t,N;a?(m=L(a),g=m.x,l=m.y,m=g+(b-1),E=l+(c-1)):(C=F=null,k(u,function(a,b){k(a,function(a,f){r(a)&&(C||(C={x:f,y:b}),F={x:f,y:b})})}),C&&(g=C.x,l=C.y,m=F.x,E=F.y));p=d(g,l);a=d(m,E);if(p&&a&&p.part==a.part){f();A();a=X(u,g,l,m,E);b=ca(u,g,l,m,E);p=d(g,l).elm;b=m-g-b+1;a=E-l-a+1;b===I&&a===u.length&&(a=b=1);b===I&&1<a&&(a=1);s(p,"colSpan",b);s(p,"rowSpan",a);for(b=l;b<=E;b++)for(l=
g;l<=m;l++)u[b]&&u[b][l]&&(a=u[b][l].elm,a!=p&&(t=e.grep(a.childNodes),k(t,function(a){p.appendChild(a)}),t.length&&(t=e.grep(p.childNodes),N=0,k(t,function(a){"BR"==a.nodeName&&N++<t.length-1&&p.removeChild(a)})),B.remove(a)));h()}},insertRow:T,insertRows:function(a,b){b=b||g().length||1;for(var f=0;f<b;f++)T(a)},insertCol:Y,insertCols:function(a,b){b=b||w()||1;for(var f=0;f<b;f++)Y(a)},splitCols:function(b){C&&(b=a.splitAt(u,C.x,C.y,b),e.each(b.cells,D))},deleteCols:function(){var a=[];if(v!==c.getBody()||
1!=u[0].length&&e.grep(U(u),r).length!=U(u).length)k(u,function(b){k(b,function(b,f){r(b)&&-1===e.inArray(a,f)&&(k(u,function(a){a=a[f].elm;var b;b=x(a,"colSpan");1<b?s(a,"colSpan",b-1):B.remove(a)}),a.push(f))})}),h()},deleteRows:function(){function a(b){var f,d;k(b.cells,function(a){var b=x(a,"rowSpan");1<b&&(s(a,"rowSpan",b-1),f=L(a),K(f.x,f.y,1,1))});f=L(b.cells[0]);k(u[f.y],function(a){var b;a=a.elm;a!=d&&(b=x(a,"rowSpan"),1>=b?B.remove(a):s(a,"rowSpan",b-1),d=a)})}var b;b=g();if(v!==c.getBody()||
b.length!=v.rows.length)k(b.reverse(),function(b){a(b)}),h()},cutRows:function(){var a=g();if(v!==c.getBody()||a.length!=v.rows.length)return B.remove(a),h(),a},copyRows:function(){var a=g();k(a,function(b,f){a[f]=m(b,!0)});return a},pasteRows:function(f,d){var c,h;f&&(c=a.splitAt(u,C.x,C.y,d),h=c.row,e.each(c.cells,D),c=e.map(f,function(a){return a.cloneNode(!0)}),d||c.reverse(),k(c,function(a){var b,f=a.cells.length,c;t(a);for(b=0;b<f;b++)c=a.cells[b],D(c),s(c,"colSpan",1),s(c,"rowSpan",1);for(b=
f;b<I;b++)a.appendChild(D(p(a.cells[f-1])));for(b=I;b<f;b++)B.remove(a.cells[b]);d?h.parentNode.insertBefore(a,h):B.insertAfter(a,h)}),b())},getPos:L,setStartCell:function(a){C=L(a)},setEndCell:function(a){var f,c,d,h,m,g,e,l,p;F=L(a);if(C&&F){f=Math.min(C.x,F.x);c=Math.min(C.y,F.y);d=Math.max(C.x,F.x);h=Math.max(C.y,F.y);m=d;g=h;for(p=c;p<=h;p++)for(l=f;l<=d;l++)a=u[p][l],a.real&&(e=a.colspan-1,a=a.rowspan-1,e&&l+e>m&&(m=l+e),a&&p+a>g&&(g=p+a));b();for(p=c;p<=g;p++)for(l=f;l<=m;l++)u[p][l]&&B.setAttrib(u[p][l].elm,
"data-mce-selected","1")}},moveRelIdx:function(a,b){var f,c;f=L(a);f=f.y*I+f.x;do{f+=b;c=d(f%I,Math.floor(f/I));if(!c)break;if(c.elm!=a)return J.select(c.elm,!0),B.isEmpty(c.elm)&&J.collapse(!0),!0}while(c.elm==a);return!1},refresh:A})}});H("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,y,n,a,k){var x=a.each,s=k.getSpanVal;return function(c){function v(){function a(b){function n(a,d){var g=a?"previousSibling":
"nextSibling",f=c.dom.getParent(d,"tr"),l=f[g];if(l)return r(c,d,l,a),b.preventDefault(),!0;var l=c.dom.getParent(f,"table"),e=f.parentNode,k=e.nodeName.toLowerCase();if("tbody"===k||k===(a?"tfoot":"thead")){var k=c.dom.select(">tbody",l),A=k.indexOf(e);a&&0===A||!a&&A===k.length-1?(e=c.dom.select(">"+(a?"thead":"tfoot"),l),e=0!==e.length?e[0]:null):-1===A?(e="thead"===e.tagName.toLowerCase()?0:k.length-1,e=k[e]):e=k[A+(a?-1:1)];if(null!==e)return(f=m(e,a))&&r(c,d,f,a),b.preventDefault(),!0}(g=l[g])?
(c.selection.setCursorLocation(g,0),f=!0):(g=c.dom.getParent(l,"td,th"))?f=n(a,g,b):(f=m(f,!a),c.selection.setCursorLocation(f,0),b.preventDefault(),f=!1);return f}function m(a,b){var d=a&&a[b?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?c.dom.getParent(d,"td,th"):d}function d(a){var b=a.selection.getNode();return null!==a.dom.getParent(b,"tr")}function l(a,b){var d=0,f=0;x(a.children,function(a,c){d+=s(a,"colspan");f=c;if(d>b)return!1});return f}function r(a,b,d,f){a=0;for(b=c.dom.getParent(b,
"td,th");b.previousSibling;)b=b.previousSibling,a+=s(b,"colspan");b=l(d,a);d=d.childNodes[b];f=m(d,f);c.selection.setCursorLocation(f||d,0)}var g=b.keyCode;if((g==e.UP||g==e.DOWN)&&d(c)){var k=c.selection.getNode();y.setEditorTimeout(c,function(){var a=c.selection.getNode(),a=c.dom.getParent(a,"td,th"),d=c.dom.getParent(k,"td,th");a&&a!==d&&c.dom.getParent(a,"TABLE")===c.dom.getParent(d,"TABLE")&&n(!b.shiftKey&&g===e.UP,k,b)},0)}}c.on("KeyDown",function(b){a(b)})}function z(){c.on("KeyDown",function(a){var b,
e,m=c.dom;if(37==a.keyCode||38==a.keyCode)if(b=c.selection.getRng(),(e=m.getParent(b.startContainer,"table"))&&c.getBody().firstChild==e){var d=b,l=e.ownerDocument;b=l.createRange();b.setStartBefore(e);b.setEnd(d.endContainer,d.endOffset);d=l.createElement("body");d.appendChild(b.cloneContents());0===d.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(b=m.createRng(),b.setStartBefore(e),b.setEndBefore(e),c.selection.setRng(b),a.preventDefault())}})}
function b(){c.on("KeyDown SetContent VisualAid",function(){var a;for(a=c.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(0<a.nodeValue.length)break}else if(1==a.nodeType&&("BR"==a.tagName||!a.getAttribute("data-mce-bogus")))break;a&&"TABLE"==a.nodeName&&(c.settings.forced_root_block?c.dom.add(c.getBody(),c.settings.forced_root_block,c.settings.forced_root_block_attrs,n.ie&&10>n.ie?"&nbsp;":'<br data-mce-bogus="1" />'):c.dom.add(c.getBody(),"br",{"data-mce-bogus":"1"}))});c.on("PreProcess",
function(a){(a=a.node.lastChild)&&("BR"==a.nodeName||1==a.childNodes.length&&("BR"==a.firstChild.nodeName||"\u00a0"==a.firstChild.nodeValue))&&a.previousSibling&&"TABLE"==a.previousSibling.nodeName&&c.dom.remove(a)})}function q(){function a(){var b=c.selection.getRng(),e=c.selection.getNode(),m=c.dom.getParent(b.startContainer,"TD,TH"),d=m,l=c.dom.getParent(b.startContainer,"TABLE"),r;l&&(r=l.parentNode);l=3==b.startContainer.nodeType&&0===b.startOffset&&0===b.endOffset&&d&&("TR"==e.nodeName||e==
r);d=("TD"==e.nodeName||"TH"==e.nodeName)&&!d;if(l||d){m||(m=e);for(e=m.lastChild;e.lastChild;)e=e.lastChild;3==e.nodeType&&(b.setEnd(e,e.data.length),c.selection.setRng(b))}}c.on("KeyDown",function(){a()});c.on("MouseDown",function(b){2!=b.button&&a()})}(function(){function b(a){c.$(a).empty();k.paddCell(a)}c.on("keydown",function(k){if((k.keyCode==e.DELETE||k.keyCode==e.BACKSPACE)&&!k.isDefaultPrevented()){var n,m,d;if(n=c.dom.getParent(c.selection.getStart(),"table"))m=c.dom.select("td,th",n),
d=a.grep(m,function(a){return!!c.dom.getAttrib(a,"data-mce-selected")}),0===d.length?(n=c.dom.getParent(c.selection.getStart(),"td,th"),c.selection.isCollapsed()&&n&&c.dom.isEmpty(n)&&(k.preventDefault(),b(n),c.selection.select(n,!0),c.selection.collapse(!0))):(k.preventDefault(),c.undoManager.transact(function(){m.length==d.length?c.execCommand("mceTableDelete"):(a.each(d,b),c.selection.select(d[0],!0),c.selection.collapse(!0))}))}})})();(function(){var a=function(a,b){var m=c.selection.getRng(),
g=a.ownerDocument.createTextNode("\u00a0");m.startOffset?a.insertBefore(g,a.firstChild):a.appendChild(g);b&&(c.selection.select(g,!0),c.selection.collapse(!0))},b=function(a){return(a=a.firstChild===a.lastChild&&a.firstChild)&&3===a.nodeType&&1===a.data.length?a.data:null},k=function(a){var c=a.firstChild===a.lastChild&&a.firstChild;a=b(a);return c&&!(c&&3===c.nodeType)||a&&!m(a)},m=function(a){return"\u00a0"===a};c.on("keydown",function(d){if(!(d.keyCode!=e.DELETE&&d.keyCode!=e.BACKSPACE||d.isDefaultPrevented())){var l=
c.dom.getParent(c.selection.getStart(),"caption");l&&"CAPTION"==l.nodeName&&"TABLE"==l.parentNode.nodeName&&(n.ie&&(c.selection.isCollapsed()?k(l)&&a(l):(c.undoManager.transact(function(){c.execCommand("Delete");(c.dom.isEmpty(l)||m(b(l)))&&a(l,!0)}),d.preventDefault())),(c.dom.isEmpty(l)||m(b(l)))&&d.preventDefault())}})})();n.webkit&&(v(),q());n.gecko&&(z(),b());9<n.ie&&(z(),b())}});H("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],
function(e,y,n){return function(a,k){function x(b){a.getBody().style.webkitUserSelect="";if(b||A)a.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),A=!1}function s(m){var d=m.target;if(!t&&!D&&d!==q&&(q=d,b&&z&&(d=c.getParent(d,"td,th"),b&&d&&b===c.getParent(d,"table")||(d=c.getParent(b,"td,th")),z!==d||A))&&(k(!0),b&&d&&b===c.getParent(d,"table"))){m.preventDefault();v||(v=new e(a,b,z),a.getBody().style.webkitUserSelect="none");v.setEndCell(d);A=!0;m=a.selection.getSel();
try{m.removeAllRanges?m.removeAllRanges():m.empty()}catch(l){}}}var c=a.dom,v,z,b,q,A=!0,t,D;a.on("SelectionChange",function(a){A&&a.stopImmediatePropagation()},!0);a.on("MouseDown",function(a){2==a.button||t||D||(x(),z=c.getParent(a.target,"td,th"),b=c.getParent(z,"table"))});a.on("mouseover",s);a.on("remove",function(){c.unbind(a.getDoc(),"mouseover",s);x()});a.on("MouseUp",function(){function e(a,b){var c=new y(a,a);do{if(3==a.nodeType&&0!==n.trim(a.nodeValue).length){b?d.setStart(a,0):d.setEnd(a,
a.nodeValue.length);break}if("BR"==a.nodeName){b?d.setStartBefore(a):d.setEndBefore(a);break}}while(a=b?c.next():c.prev())}var d,l=a.selection,r,g,w;if(z){v&&(a.getBody().style.webkitUserSelect="");r=c.select("td[data-mce-selected],th[data-mce-selected]");if(0<r.length){d=c.createRng();g=r[0];d.setStartBefore(g);d.setEndAfter(g);e(g,1);r=new y(g,c.getParent(r[0],"table"));do if("TD"==g.nodeName||"TH"==g.nodeName){if(!c.getAttrib(g,"data-mce-selected"))break;w=g}while(g=r.next());e(w);l.setRng(d)}a.nodeChanged();
z=v=b=q=null;k(!1)}});a.on("KeyUp Drop SetContent",function(a){x("setcontent"==a.type);z=v=b=q=null;k(!1);t=!1});a.on("ObjectResizeStart ObjectResized",function(a){t="objectresized"!=a.type});a.on("dragstart",function(){D=!0});a.on("drop dragend",function(){D=!1});return{clear:x}}});H("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,y){var n=e.each;return function(a){function k(){var b=a.settings.color_picker_callback;if(b)return function(){var c=this;b.call(a,function(a){c.value(a).fire("change")},
c.value())}}function x(a){return{title:"Advanced",type:"form",defaults:{onchange:function(){q(a,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:k()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:k()}]}]}}function s(a){return a?a.replace(/px$/,""):
""}function c(a){/^[0-9]+$/.test(a)&&(a+="px");return a}function v(b){n(["left","center","right"],function(c){a.formatter.remove("align"+c,{},b)})}function z(b){n(["top","middle","bottom"],function(c){a.formatter.remove("valign"+c,{},b)})}function b(a,b,c){function r(a,c){c=c||[];e.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=r(a.menu):(e.value=a.value,b&&b(e));c.push(e)});return c}return r(a,c||[])}function q(a,b,c){var e=b.toJSON(),g=a.parseStyle(e.style);c?(b.find("#borderColor").value(g["border-color"]||
"")[0].fire("change"),b.find("#backgroundColor").value(g["background-color"]||"")[0].fire("change")):(g["border-color"]=e.borderColor,g["background-color"]=e.backgroundColor);b.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(g))))}function A(a,b,c){c=a.parseStyle(a.getAttrib(c,"style"));c["border-color"]&&(b.borderColor=c["border-color"]);c["background-color"]&&(b.backgroundColor=c["background-color"]);b.style=a.serializeStyle(c)}function t(a,b,c){var e=a.parseStyle(a.getAttrib(b,
"style"));n(c,function(a){e[a.name]=a.value});a.setAttrib(b,"style",a.serializeStyle(a.parseStyle(a.serializeStyle(e))))}var D=this;D.tableProps=function(){D.table(!0)};D.table=function(m){function d(){function b(a,c,d){if("TD"===a.tagName||"TH"===a.tagName)k.setStyle(a,c,d);else if(a.children)for(var e=0;e<a.children.length;e++)b(a.children[e],c,d)}var d;q(k,this);h=e.extend(h,this.toJSON());!1===h["class"]&&delete h["class"];a.undoManager.transact(function(){g||(g=a.plugins.table.insertTable(h.cols||
1,h.rows||1));a.dom.setAttribs(g,{style:h.style,"class":h["class"]});if(a.settings.table_style_by_css){if(K=[],K.push({name:"border",value:h.border}),K.push({name:"border-spacing",value:c(h.cellspacing)}),t(k,g,K),k.setAttribs(g,{"data-mce-border-color":h.borderColor,"data-mce-cell-padding":h.cellpadding,"data-mce-border":h.border}),g.children)for(var e=0;e<g.children.length;e++)b(g.children[e],"border",h.border),b(g.children[e],"padding",c(h.cellpadding))}else a.dom.setAttribs(g,{border:h.border,
cellpadding:h.cellpadding,cellspacing:h.cellspacing});k.getAttrib(g,"width")&&!a.settings.table_style_by_css?k.setAttrib(g,"width",s(h.width)):k.setStyle(g,"width",c(h.width));k.setStyle(g,"height",c(h.height));(d=k.select("caption",g)[0])&&!h.caption&&k.remove(d);!d&&h.caption&&(d=k.create("caption"),d.innerHTML=y.ie?"\u00a0":'<br data-mce-bogus="1"/>',g.insertBefore(d,g.firstChild));v(g);h.align&&a.formatter.apply("align"+h.align,{},g);a.focus();a.addVisual()})}function l(b,c){var d=a.dom.select("td,th",
b),e;a:for(var g=0;g<d.length;g++){var h=k.getStyle(d[g],c);"undefined"===typeof e&&(e=h);if(e!=h){e="";break a}}return e}var k=a.dom,g,w,p,h={},K;if(!0===m){if(g=k.getParent(a.selection.getStart(),"table"))h={width:s(k.getStyle(g,"width")||k.getAttrib(g,"width")),height:s(k.getStyle(g,"height")||k.getAttrib(g,"height")),cellspacing:s(k.getStyle(g,"border-spacing")||k.getAttrib(g,"cellspacing")),cellpadding:k.getAttrib(g,"data-mce-cell-padding")||k.getAttrib(g,"cellpadding")||l(g,"padding"),border:k.getAttrib(g,
"data-mce-border")||k.getAttrib(g,"border")||l(g,"border"),borderColor:k.getAttrib(g,"data-mce-border-color"),caption:!!k.select("caption",g)[0],"class":k.getAttrib(g,"class")},n(["left","center","right"],function(b){a.formatter.matchNode(g,"align"+b)&&(h.align=b)})}else w={label:"Cols",name:"cols"},p={label:"Rows",name:"rows"};a.settings.table_class_list?(h["class"]&&(h["class"]=h["class"].replace(/\s*mce\-item\-table\s*/g,"")),m={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_class_list,
function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[b.value]})})})}):m={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};w={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==a.settings.table_appearance_options?[w,p,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",
name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[w,p,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},m]};!1!==a.settings.table_advtab?(A(k,h,g),a.windowManager.open({title:"Table properties",data:h,bodyType:"tabpanel",
body:[{title:"General",type:"form",items:w},x(k)],onsubmit:d})):a.windowManager.open({title:"Table properties",data:h,body:w,onsubmit:d})};D.merge=function(b,c){a.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var e=this.toJSON();a.undoManager.transact(function(){b.merge(c,e.cols,e.rows)})}})};D.cell=function(){function k(a,b,f){(1===p.length||f)&&l.setAttrib(a,
b,f)}function d(){q(l,this);g=e.extend(g,this.toJSON());a.undoManager.transact(function(){n(p,function(b){k(b,"scope",g.scope);k(b,"style",g.style);k(b,"class",g["class"]);var d=c(g.width);(1===p.length||d)&&l.setStyle(b,"width",d);d=c(g.height);(1===p.length||d)&&l.setStyle(b,"height",d);g.type&&b.nodeName.toLowerCase()!==g.type&&(b=l.rename(b,g.type));1===p.length&&(v(b),z(b));g.align&&a.formatter.apply("align"+g.align,{},b);g.valign&&a.formatter.apply("valign"+g.valign,{},b)});a.focus()})}var l=
a.dom,r,g,w,p=[],p=a.dom.select("td[data-mce-selected],th[data-mce-selected]");r=a.dom.getParent(a.selection.getStart(),"td,th");!p.length&&r&&p.push(r);if(r=r||p[0])1<p.length?g={width:"",height:"",scope:"","class":"",align:"",style:"",type:r.nodeName.toLowerCase()}:(g={width:s(l.getStyle(r,"width")||l.getAttrib(r,"width")),height:s(l.getStyle(r,"height")||l.getAttrib(r,"height")),scope:l.getAttrib(r,"scope"),"class":l.getAttrib(r,"class")},g.type=r.nodeName.toLowerCase(),n(["left","center","right"],
function(b){a.formatter.matchNode(r,"align"+b)&&(g.align=b)}),n(["top","middle","bottom"],function(b){a.formatter.matchNode(r,"valign"+b)&&(g.valign=b)}),A(l,g,r)),a.settings.table_cell_class_list&&(w={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_cell_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})}),w={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",
layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},
{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},w]},!1!==a.settings.table_cell_advtab?a.windowManager.open({title:"Cell properties",
bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:w},x(l)],onsubmit:d}):a.windowManager.open({title:"Cell properties",data:g,body:w,onsubmit:d})};D.row=function(){function k(a,b,c){(1===t.length||c)&&l.setAttrib(a,b,c)}function d(){var b,d,g;q(l,this);h=e.extend(h,this.toJSON());a.undoManager.transact(function(){var e=h.type;n(t,function(n){k(n,"scope",h.scope);k(n,"style",h.style);k(n,"class",h["class"]);var p=c(h.height);(1===t.length||p)&&l.setStyle(n,"height",p);e!==n.parentNode.nodeName.toLowerCase()&&
(b=l.getParent(n,"table"),d=n.parentNode,g=l.select(e,b)[0],g||(g=l.create(e),b.firstChild?b.insertBefore(g,b.firstChild):b.appendChild(g)),g.appendChild(n),d.hasChildNodes()||l.remove(d));1===t.length&&v(n);h.align&&a.formatter.apply("align"+h.align,{},n)});a.focus()})}var l=a.dom,r,g,w,p,h,t=[];r=a.dom.getParent(a.selection.getStart(),"table");g=a.dom.getParent(a.selection.getStart(),"td,th");n(r.rows,function(a){n(a.cells,function(b){if(l.getAttrib(b,"data-mce-selected")||b==g)return t.push(a),
!1})});if(w=t[0])1<t.length?h={height:"",scope:"","class":"",align:"",type:w.parentNode.nodeName.toLowerCase()}:(h={height:s(l.getStyle(w,"height")||l.getAttrib(w,"height")),scope:l.getAttrib(w,"scope"),"class":l.getAttrib(w,"class")},h.type=w.parentNode.nodeName.toLowerCase(),n(["left","center","right"],function(b){a.formatter.matchNode(w,"align"+b)&&(h.align=b)}),A(l,h,w)),a.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_row_class_list,function(b){b.value&&
(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),r={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",
value:"right"}]},{label:"Height",name:"height"},p]},!1!==a.settings.table_row_advtab?a.windowManager.open({title:"Row properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:r},x(l)],onsubmit:d}):a.windowManager.open({title:"Row properties",data:h,body:r,onsubmit:d})}}});H("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(e,y){var n;return function(a){function k(b,c){return{index:b,y:a.dom.getPos(c).y}}function x(b,c){return{index:b,y:a.dom.getPos(c).y+
c.offsetHeight}}function s(){return"rtl"===a.getBody().dir}function c(){return a.inline}function v(){return c?a.getBody().ownerDocument.body:a.getBody()}function z(b,c){return s()?{index:b,x:a.dom.getPos(c).x+c.offsetWidth}:{index:b,x:a.dom.getPos(c).x}}function b(b,c){return s()?{index:b,x:a.dom.getPos(c).x}:{index:b,x:a.dom.getPos(c).x+c.offsetWidth}}function q(b,c){var f=a.dom.getStyle(b,c,!0);return parseInt(f,10)}function A(a){var b=q(a,"width");a=q(a.parentElement,"width");return 100*(b/a)}
function t(a,b){var c=q(a,"width");return 100*(b/c)}function D(a,b){var c=q(a.parentElement,"width");return 100*(b/c)}function m(a,b,c){for(var f=[],d=1;d<c.length;d++)f.push(a(d-1,c[d].element));f.push(b(c.length-1,c[c.length-1].element));return f}function d(){var b=a.dom.select("."+ha,v());e.each(b,function(b){a.dom.remove(b)})}function l(a,b,c,f,d,e,g,h){a={"data-mce-bogus":"all","class":ha+" "+a,unselectable:"on","data-mce-resize":!1,style:"cursor: "+b+"; margin: 0; padding: 0; position: absolute; left: "+
c+"px; top: "+f+"px; height: "+d+"px; width: "+e+"px; "};a[g]=h;return a}function r(b,c,f){e.each(b,function(b){var d=f.x,e=b.y-Z/2,g=Z;a.dom.add(v(),"div",l(ba,ra,d,e,g,c,ia,b.index))})}function g(b,c,f){e.each(b,function(b){var d=b.x-Z/2,e=f.y,g=Z;a.dom.add(v(),"div",l(da,sa,d,e,c,g,la,b.index))})}function w(a){return e.map(a.rows,function(a){var b=e.map(a.cells,function(a){var b=a.hasAttribute("rowspan")?parseInt(a.getAttribute("rowspan"),10):1,c=a.hasAttribute("colspan")?parseInt(a.getAttribute("colspan"),
10):1;return{element:a,rowspan:b,colspan:c}});return{element:a,cells:b}})}function p(a){var b={},c=[],f=0,d=0;e.each(a,function(a,g){var ka=[];e.each(a.cells,function(a){for(var c=0;b[g+","+c]!==M;)c++;for(var e={element:a.element,colspan:a.colspan,rowspan:a.rowspan,rowIndex:g,colIndex:c},h=0;h<a.colspan;h++)for(var k=0;k<a.rowspan;k++){var l=g+k,m=c+h;b[l+","+m]=e;f=Math.max(f,l+1);d=Math.max(d,m+1)}ka.push(e)});c.push({element:a.element,cells:ka})});return{grid:{maxRows:f,maxCols:d},getAt:function(a,
c){return b[a+","+c]},getAllCells:function(){var a=[];e.each(c,function(b){a=a.concat(b.cells)});return a},getAllRows:function(){return c}}}function h(a,b){for(var c=[],f=a;f<b;f++)c.push(f);return c}function K(a,b,c){a=a();for(var f,d=0;d<a.length;d++)b(a[d])&&(f=a[d]);return f?f:c()}function f(a){var b=h(0,a.grid.maxCols),c=h(0,a.grid.maxRows);return e.map(b,function(b){return K(function(){for(var f=[],d=0;d<c.length;d++){var e=a.getAt(d,b);e&&e.colIndex===b&&f.push(e)}return f},function(a){return 1===
a.colspan},function(){for(var f,d=0;d<c.length;d++)if(f=a.getAt(d,b))return f;return null})})}function N(a){var b=h(0,a.grid.maxCols),c=h(0,a.grid.maxRows);return e.map(c,function(c){return K(function(){for(var f=[],d=0;d<b.length;d++){var e=a.getAt(c,d);e&&e.rowIndex===c&&f.push(e)}return f},function(a){return 1===a.rowspan},function(){return a.getAt(c,0)})})}function E(c){var d=w(c),d=p(d),e=N(d),h=f(d),d=a.dom.getPos(c),e=0<e.length?m(k,x,e):[],h=0<h.length?m(z,b,h):[];r(e,c.offsetWidth,d);g(h,
c.offsetHeight,d)}function S(a,b,c,f){if(0>b||b>=a.length-1)return"";var d=a[b];if(d)d={value:d,delta:0};else for(var e=a.slice(0,b).reverse(),g=0;g<e.length;g++)e[g]&&(d={value:e[g],delta:g+1});if(e=a[b+1])e={value:e,delta:1};else for(a=a.slice(b+1),b=0;b<a.length;b++)a[b]&&(e={value:a[b],delta:b+1});a=e.delta-d.delta;d=Math.abs(e.value-d.value)/a;return c?100*(d/q(f,"width")):d}function X(b,c){var f=a.dom.getStyle(b,c);f||(f=a.dom.getAttrib(b,c));f||(f=a.dom.getStyle(b,c,!0));return f}function ca(a,
b,c){var f=X(a,"width"),d=parseInt(f,10);a=b?100*(q(a,"width")/q(c,"width")):q(a,"width");if(b&&!F(f)||!b&&!J(f))d=0;return!isNaN(d)&&0<d?d:a}function T(a,b,c){a=f(a);for(var d=e.map(a,function(a){return z(a.colIndex,a.element).x}),g=[],h=0;h<a.length;h++){var k=1<(a[h].element.hasAttribute("colspan")?parseInt(a[h].element.getAttribute("colspan"),10):1)?S(d,h):ca(a[h].element,b,c),k=k?k:ma;g.push(k)}return g}function Y(a){var b=X(a,"height"),c=parseInt(b,10);F(b)&&(c=0);return!isNaN(c)&&0<c?c:q(a,
"height")}function U(a){a=N(a);for(var b=e.map(a,function(a){return k(a.rowIndex,a.element).y}),c=[],f=0;f<a.length;f++){var d=1<(a[f].element.hasAttribute("rowspan")?parseInt(a[f].element.getAttribute("rowspan"),10):1)?S(b,f):Y(a[f].element),d=d?d:ta;c.push(d)}return c}function L(a,b,c,f,d){function g(a){return e.map(a,function(){return 0})}function h(a,b){var d=g(l.slice(0,a)),e=g(l.slice(b+1));if(0<=c)var k=Math.max(f,l[b]-c),d=d.concat([c,k-l[b]]).concat(e);else k=Math.max(f,l[a]+c),d=d.concat([k-
l[a],l[a]-k]).concat(e);return d}function k(a,b){var d=g(l.slice(0,b));if(0<=c)d=d.concat([c]);else var e=Math.max(f,l[b]+c),d=d.concat([e-l[b]]);return d}var l=a.slice(0);return 0===a.length?[]:1===a.length?d?[100-l[0]]:[Math.max(f,l[0]+c)-l[0]]:0===b?h(0,1):0<b&&b<a.length-1?h(b,b+1):b===a.length-1?k(b-1,b):[]}function H(a,b,c){for(var f=0;a<b;a++)f+=c[a];return f}function u(a,b){var c=a.getAllCells();return e.map(c,function(a){var c=H(a.colIndex,a.colIndex+a.colspan,b);return{element:a.element,
width:c,colspan:a.colspan}})}function I(a,b){var c=a.getAllCells();return e.map(c,function(a){var c=H(a.rowIndex,a.rowIndex+a.rowspan,b);return{element:a.element,height:c,rowspan:a.rowspan}})}function C(a,b){var c=a.getAllRows();return e.map(c,function(a,c){return{element:a.element,height:b[c]}})}function F(a){return ua.test(a)}function J(a){return va.test(a)}function B(b,c,f){function d(b,c){e.each(b,function(b){a.dom.setStyle(b.element,"width",b.width+c);a.dom.setAttrib(b.element,"width",null)})}
for(var g=w(b),h=p(g),k=F(b.width)||F(b.style.width),g=T(h,k,b),l=k?t(b,c):c,l=L(g,f,l,ma,k,b),m=[],n=0;n<l.length;n++)m.push(l[n]+g[n]);var E=u(h,m),r=k?"%":"px",N=k?f<h.grid.maxCols-1?A(b):A(b)+D(b,c):f<h.grid.maxCols-1?q(b,"width"):q(b,"width")+c;a.undoManager.transact(function(){d(E,r);f!=h.grid.maxCols-1&&k||(a.dom.setStyle(b,"width",N+r),a.dom.setAttrib(b,"width",null))})}function O(b,c,f){for(var d=w(b),d=p(d),g=U(d),h=[],k=0,l=0;l<g.length;l++)h.push(l===f?c+g[l]:g[l]),k+=k[l];var m=I(d,h),
n=C(d,h);a.undoManager.transact(function(){e.each(n,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});e.each(m,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});a.dom.setStyle(b,"height",k+"px");a.dom.setAttrib(b,"height",null)})}function W(){na=setTimeout(function(){ea()},200)}function $(b,c){a.dom.bind(b,"mouseup",function(){ea()});a.dom.bind(b,"mousemove",function(a){clearTimeout(na);V&&
c(a)});a.dom.bind(b,"mouseout",function(){W()})}function ea(){a.dom.remove(P);if(V){a.dom.removeClass(G,oa);V=!1;var b,c;if(a.dom.hasClass(G,da)){c=parseInt(a.dom.getAttrib(G,pa),10);var f=a.dom.getPos(G).x;b=parseInt(a.dom.getAttrib(G,la),10);c=s()?c-f:f-c;1<=Math.abs(c)&&B(n,c,b)}else a.dom.hasClass(G,ba)&&(c=parseInt(a.dom.getAttrib(G,ja),10),f=a.dom.getPos(G).y,b=parseInt(a.dom.getAttrib(G,ia),10),c=f-c,1<=Math.abs(c)&&O(n,c,b));b=n;d();E(b);a.nodeChanged()}}function fa(b,c){var f;P?f=P:(f=document.createElement("div"),
f.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),f.setAttribute("data-mce-bogus","all"));P=f;V=!0;a.dom.addClass(b,oa);G=b;$(P,c);a.dom.add(v(),P)}function aa(b){Q=Q!==M?Q:b.clientX;var c=b.clientX-Q;Q=b.clientX;b=a.dom.getPos(G).x;a.dom.setStyle(G,"left",b+c+"px")}function qa(b){R=R!==M?R:b.clientY;var c=b.clientY-R;R=b.clientY;b=a.dom.getPos(G).y;a.dom.setStyle(G,"top",b+c+"px")}function ga(b){var c=b.target,f=a.getBody();if(a.$.contains(f,
n)||n===f)a.dom.hasClass(c,da)?(b.preventDefault(),b=a.dom.getPos(c).x,a.dom.setAttrib(c,pa,b),Q=M,fa(c,aa)):a.dom.hasClass(c,ba)?(b.preventDefault(),b=a.dom.getPos(c).y,a.dom.setAttrib(c,ja,b),R=M,fa(c,qa)):d()}var ha="mce-resize-bar",ba="mce-resize-bar-row",ra="row-resize",ia="data-row",ja="data-initial-top",da="mce-resize-bar-col",sa="col-resize",la="data-col",pa="data-initial-left",Z=4,ma=10,ta=10,oa="mce-resize-bar-dragging",ua=RegExp(/(\d+(\.\d+)?%)/),va=RegExp(/px|em/),na,V,P,G,Q,R;a.on("init",
function(){a.dom.bind(v(),"mousedown",ga)});a.on("ObjectResized",function(b){b=b.target;if("TABLE"===b.nodeName){var c=[];e.each(b.rows,function(b){e.each(b.cells,function(b){var f=a.dom.getStyle(b,"width",!0);c.push({cell:b,width:f})})});e.each(c,function(b){a.dom.setStyle(b.cell,"width",b.width);a.dom.setAttrib(b.cell,"width",null)})}});a.on("mouseover",function(b){if(!V){var c=a.dom.getParent(b.target,"table");if("TABLE"===b.target.nodeName||c)n=c,d(),E(c)}});a.on("keydown",function(a){switch(a.keyCode){case y.LEFT:case y.RIGHT:case y.UP:case y.DOWN:d()}});
a.on("remove",function(){d();a.dom.unbind(v(),"mousedown",ga)});return{adjustWidth:B,adjustHeight:O,clearBars:d,drawBars:E,determineDeltas:L,getTableGrid:p,getTableDetails:w,getWidths:T,getPixelHeights:U,isPercentageBasedSize:F,isPixelBasedSize:J,recalculateWidths:u,recalculateCellHeights:I,recalculateRowHeights:C}}});H("tinymce/tableplugin/Plugin","tinymce/tableplugin/TableGrid tinymce/tableplugin/Quirks tinymce/tableplugin/CellSelection tinymce/tableplugin/Dialogs tinymce/tableplugin/ResizeBars tinymce/util/Tools tinymce/dom/TreeWalker tinymce/Env tinymce/PluginManager".split(" "),
function(e,y,n,a,k,x,s,c,v){var z=x.each;v.add("table",function(b){function q(a){return function(){b.execCommand(a)}}function s(a,d){var e,g,h,k;h='<table id="__mce"><tbody>';for(e=0;e<d;e++){h+="<tr>";for(g=0;g<a;g++)h+="<td>"+(c.ie&&10>c.ie?"&nbsp;":"<br>")+"</td>";h+="</tr>"}h+="</tbody></table>";b.undoManager.transact(function(){b.insertContent(h);k=b.dom.get("__mce");b.dom.setAttrib(k,"id",null);b.$("tr",k).each(function(a,c){b.fire("newrow",{node:c});b.$("th,td",c).each(function(a,c){b.fire("newcell",
{node:c})})});b.dom.setAttribs(k,b.settings.table_default_attributes||{});b.dom.setStyles(k,b.settings.table_default_styles||{})});return k}function t(a,c,d){function e(){var g,h,k={},l=0;h=b.dom.select("td[data-mce-selected],th[data-mce-selected]");(g=h[0])||(g=b.selection.getStart());d&&0<h.length?(z(h,function(a){return k[a.parentNode.parentNode.nodeName]=1}),z(k,function(a){l+=a}),g=1!==l):g=!b.dom.getParent(g,c);a.disabled(g);b.selection.selectorChanged(c,function(b){a.disabled(!b)})}if(b.initialized)e();
else b.on("init",e)}function v(){t(this,"table")}function m(){t(this,"td,th")}function d(){for(var a="",a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',b=0;10>b;b++){for(var a=a+"<tr>",c=0;10>c;c++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+c)+'" href="#" data-mce-x="'+c+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+='</table><div class="mce-text-center" role="presentation">1 x 1</div>'}function l(a,c,d){var e=d.getEl().getElementsByTagName("table")[0],
g,h,k,l,m=d.isRtl()||"tl-tr"==d.parent().rel;e.nextSibling.innerHTML=a+1+" x "+(c+1);m&&(a=9-a);for(g=0;10>g;g++)for(d=0;10>d;d++)k=e.rows[g].childNodes[d].firstChild,l=(m?d>=a:d<=a)&&g<=c,b.dom.toggleClass(k,"mce-active",l),l&&(h=k);return h.parentNode}function r(a){return b.dom.is(a,"table")&&b.getBody().contains(a)}var g,w=this,p=new a(b),h;!b.settings.object_resizing||!1===b.settings.table_resize_bars||!0!==b.settings.object_resizing&&"table"!==b.settings.object_resizing||(h=k(b));!1===b.settings.table_grid?
b.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:p.table}):b.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),p.table())},onshow:function(){l(0,0,this.menu.items()[0])},onhide:function(){var a=this.menu.items()[0].getEl().getElementsByTagName("a");b.dom.removeClass(a,"mce-active");b.dom.addClass(a[0],"mce-active")},menu:[{type:"container",html:d(),onPostRender:function(){this.lastX=
this.lastY=0},onmousemove:function(a){var b=a.target,c;if("A"==b.tagName.toUpperCase()){c=parseInt(b.getAttribute("data-mce-x"),10);b=parseInt(b.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)c=9-c;if(c!==this.lastX||b!==this.lastY)l(c,b,a.control),this.lastX=c,this.lastY=b}},onclick:function(a){var c=this;"A"==a.target.tagName.toUpperCase()&&(a.preventDefault(),a.stopPropagation(),c.parent().cancel(),b.undoManager.transact(function(){s(c.lastX+1,c.lastY+1)}),b.addVisual())}}]});
b.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:v,onclick:p.tableProps});b.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"});b.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:q("mceTableCellProps"),onPostRender:m},{text:"Merge cells",onclick:q("mceTableMergeCells"),onPostRender:function(){t(this,"td,th",!0)}},{text:"Split cell",onclick:q("mceTableSplitCells"),
onPostRender:m}]});b.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:q("mceTableInsertRowBefore"),onPostRender:m},{text:"Insert row after",onclick:q("mceTableInsertRowAfter"),onPostRender:m},{text:"Delete row",onclick:q("mceTableDeleteRow"),onPostRender:m},{text:"Row properties",onclick:q("mceTableRowProps"),onPostRender:m},{text:"-"},{text:"Cut row",onclick:q("mceTableCutRow"),onPostRender:m},{text:"Copy row",onclick:q("mceTableCopyRow"),onPostRender:m},{text:"Paste row before",
onclick:q("mceTablePasteRowBefore"),onPostRender:m},{text:"Paste row after",onclick:q("mceTablePasteRowAfter"),onPostRender:m}]});b.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:q("mceTableInsertColBefore"),onPostRender:m},{text:"Insert column after",onclick:q("mceTableInsertColAfter"),onPostRender:m},{text:"Delete column",onclick:q("mceTableDeleteCol"),onPostRender:m}]});var x=[];z("inserttable tableprops deletetable | cell row column".split(" "),
function(a){"|"==a?x.push({text:"-"}):x.push(b.menuItems[a])});b.addButton("table",{type:"menubutton",title:"Table",menu:x});if(!c.isIE)b.on("click",function(a){a=a.target;"TABLE"===a.nodeName&&(b.selection.select(a),b.nodeChanged())});w.quirks=new y(b);b.on("Init",function(){w.cellSelection=new n(b,function(a){a&&h&&h.clearBars()});w.resizeBars=h});b.on("PreInit",function(){b.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(a,b){for(var c=a.length;c--;)a[c].attr(b,
null)})});z({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var c;c=b.dom.getParent(b.selection.getStart(),"th,td");b.dom.select("td[data-mce-selected],th[data-mce-selected]").length?a.merge():p.merge(a,c)},mceTableInsertRowBefore:function(a){a.insertRows(!0)},mceTableInsertRowAfter:function(a){a.insertRows()},mceTableInsertColBefore:function(a){a.insertCols(!0)},mceTableInsertColAfter:function(a){a.insertCols()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},
mceTableCutRow:function(a){g=a.cutRows()},mceTableCopyRow:function(a){g=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(g,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(g)},mceSplitColsBefore:function(a){a.splitCols(!0)},mceSplitColsAfter:function(a){a.splitCols(!1)},mceTableDelete:function(a){h&&h.clearBars();a.deleteTable()}},function(a,c){b.addCommand(c,function(){var c=new e(b);c&&(a(c),b.execCommand("mceRepaint"),w.cellSelection.clear())})});z({mceInsertTable:p.table,mceTableProps:function(){p.table(!0)},
mceTableRowProps:p.row,mceTableCellProps:p.cell},function(a,c){b.addCommand(c,function(b,c){a(c)})});b.addButton("tableprops",{title:"Table properties",onclick:p.tableProps,icon:"table"});b.addButton("tabledelete",{title:"Delete table",onclick:q("mceTableDelete")});b.addButton("tablecellprops",{title:"Cell properties",onclick:q("mceTableCellProps")});b.addButton("tablemergecells",{title:"Merge cells",onclick:q("mceTableMergeCells")});b.addButton("tablesplitcells",{title:"Split cell",onclick:q("mceTableSplitCells")});
b.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:q("mceTableInsertRowBefore")});b.addButton("tableinsertrowafter",{title:"Insert row after",onclick:q("mceTableInsertRowAfter")});b.addButton("tabledeleterow",{title:"Delete row",onclick:q("mceTableDeleteRow")});b.addButton("tablerowprops",{title:"Row properties",onclick:q("mceTableRowProps")});b.addButton("tablecutrow",{title:"Cut row",onclick:q("mceTableCutRow")});b.addButton("tablecopyrow",{title:"Copy row",onclick:q("mceTableCopyRow")});
b.addButton("tablepasterowbefore",{title:"Paste row before",onclick:q("mceTablePasteRowBefore")});b.addButton("tablepasterowafter",{title:"Paste row after",onclick:q("mceTablePasteRowAfter")});b.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:q("mceTableInsertColBefore")});b.addButton("tableinsertcolafter",{title:"Insert column after",onclick:q("mceTableInsertColAfter")});b.addButton("tabledeletecol",{title:"Delete column",onclick:q("mceTableDeleteCol")});(function(){var a=
b.settings.table_toolbar;""!==a&&!1!==a&&(a||(a="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),b.addContextToolbar(r,a))})();if(!1!==b.settings.table_tab_navigation)b.on("keydown",function(a){var c,d,g;9==a.keyCode&&(c=b.dom.getParent(b.selection.getStart(),"th,td"))&&(a.preventDefault(),d=new e(b),g=a.shiftKey?-1:1,b.undoManager.transact(function(){!d.moveRelIdx(c,g)&&0<g&&(d.insertRow(),d.refresh(),d.moveRelIdx(c,
g))}))});w.insertTable=s;w.setClipboardRows=function(a){g=a};w.getClipboardRows=function(){return g}})})})(window);

zenario.lib(function(g,q,p,h,E,F,b,l,v,G,H){h.extensionOf=b.extensionOf=function(a,b){if(!a)return b||function(){};b||(b=function(){a.apply(this,arguments)});b.prototype=new a;b.prototype.constructor=a;return b};h.methodsOf=b.methodsOf=function(a){return a.prototype};h.get=b.get=function(a){if(h.zenario&&v.isOpen&&"zenario"!=a.substr(0,7)&&!a.match(/[^\w-]/)){var b=$("#zenario_fbAdminFloatingBox #"+a);if(b[0])return b[0]}return p.getElementById(a)};h.has=b.has=function(a,b){return a!==g&&a.hasOwnProperty&&
a.hasOwnProperty(b)};h.encodeItemIdForOrganizer=b.encodeItemIdForOrganizer=h.encodeItemIdForStorekeeper=b.encodeItemIdForStorekeeper=function(a){return 1*a==a?a:"~"+encodeURIComponent(""+a).replace(/~/g,"%7E").replace(/%/g,"~")};h.decodeItemIdForOrganizer=b.decodeItemIdForOrganizer=h.decodeItemIdForStorekeeper=b.decodeItemIdForStorekeeper=function(a){return"~"==(""+a).substr(0,1)?decodeURIComponent((""+a).substr(1).replace(/~/g,"%")):a};h.engToBoolean=b.engToBoolean=function(a){return a&&(a=(a+"").toLowerCase())&&
"0"!=a&&"false"!=a&&"no"!=a&&"off"!=a?1:0};h.htmlspecialchars=b.htmlspecialchars=function(a,b,c){if(a===g||null===a||!1===a)return"";"object"==typeof a&&(a=a.label||a.default_label||a.name||a.field_name);a=(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/>/g,"&gt;");c?"asis"!==c&&(a=a.replace(/ /g,"&nbsp;")):a=$.trim(a);b&&(a=a.replace(/\n/g,"<br/>"));return a};h.ifNull=b.ifNull=function(a,b,c){return a?a:b?b:c};h.jsEscape=b.jsEscape=function(a){return escape(a).replace(/\%u/g,
"\\u").replace(/\%/g,"\\x")};b.addBasePath=function(a){return a===g?g:-1==a.indexOf("://")&&"/"!=a.substr(0,1)?q+a:a};b.addAmp=function(a){var b=a.indexOf("?");-1!=b&&(a=a.substr(b+1));return""!=a&&"&"!=a.substr(0,1)?"&"+a:a};b.urlRequest=function(a){if("string"==typeof a)return b.addAmp(a);var d="";if(a)for(var c in a)b.has(a,c)&&"object"!=typeof a[c]&&(d+="&"+encodeURIComponent(c)+"=",a[c]!==g&&!1!==a[c]&&null!==a[c]&&(d+=encodeURIComponent(a[c])));return d};b.nonAsyncAJAX=function(a,d,c,f){a=b.addBasePath(a);
var e={};!d&&f&&(e.responseText=b.checkSessionStorage(a))||(e={},h.ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):h.XMLHttpRequest&&(e=new XMLHttpRequest),d?(!0===d?(f=a.indexOf("?"),-1==f?d="":(d=a.substr(f+1),a=a.substr(0,f))):"string"!=typeof d&&(d=b.urlRequest(d)),e.open("POST",a,!1),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(d)):(e.open("GET",a,!1),e.send(null),f&&b.setSessionStorage(e.responseText,a)));if(c)try{return JSON.parse(e.responseText)}catch(g){e.responseText&&
(l.init?l.floatingBox(e.responseText,!0,"error"):alert(e.responseText))}else return e.responseText};b.ajax=function(a,d,c,f,e,k,h){a=b.addBasePath(a);var r,m,p,q,v=d?"POST":"GET",n=!1,s=!1,y=!1,w=new b.callback,z=b.dataRev(),C=function(a){s||(n=a)},D=function(a,b,c){!s&&l.AJAXErrorHandler&&(l.AJAXErrorHandler(a,b,c),y=!0)},B=function(){if(!s&&!y){var d=!1;if(c){if(l.readData){if(!(d=l.readData(n,g,g,e)))return}else try{d=JSON.parse(n)}catch(k){n&&alert(n);return}w.call(d)}else w.call(n);f&&b.setSessionStorage(n,
a)}},x=function(){y=s=n=!1;!0===d&&(r=a.indexOf("?"),-1==r?d="":(d=a.substr(r+1),a=a.substr(0,r)));q={data:d,type:v,dataType:"text",success:C,error:D,complete:B};if(h!==g)for(m in h)b.has(h,m)&&(p=h[m],q[m]=p);var c=$.ajax(a,q);c.zenario_retry=e;k&&setTimeout(function(){4>c.readyState&&(e?(s=!0,c.abort(),k*=2,e()):c.abort())},k)};!0===e&&(e=x);if(f&&z&&!d){if(-1!=a.indexOf("no_cache")){var t=a.split(/&|\?/g),u;for(u in t)b.has(t,u)&&("no_cache"==t[u]?f=!1:"no_cache="==t[u].substr(0,9)&&engToBoolean(t[u].substr(9))&&
(f=!1))}if(f){m=b.userId+"_"+b.adminId+"_"+a;var A=b.sGetItem(!0,m);if(A||!z)return b.checkDataRevisionNumber(!0,function(){var a=b.dataRev();z!==a?x():A?(n=A,f=!1,B()):x()}),w}}x();return w};b.phrases={};b.loadPhrases=function(a,d){var c=q+"zenario/ajax.php?method_call=loadPhrase&__class__="+encodeURIComponent(a)+"&langId="+encodeURIComponent(b.langId);d!==g&&(c+="&__code__=",c=_.isArray(d)?c+_.map(d,b.encodeItemIdForOrganizer).join(","):c+b.encodeItemIdForOrganizer(d));c=b.nonAsyncAJAX(c,!1,!0,
!0);b.phrases[a]?$.extend(b.phrases[a],c):b.phrases[a]=c;return c};b.phrase=function(a,d,c){b.phrases[a]!==g&&b.phrases[a][d]!==g||b.loadPhrases(a,d);if(null===b.phrases[a][d]||b.phrases[a][d]===g)b.phrases[a][d]=d;c||(c={});var f="",e;a=(""+b.phrases[a][d]).split(/\[\[(.*?)\]\]/g);for(e in a)b.has(a,e)&&(e%2?c[a[e]]!==g&&(f+=c[a[e]]):f+=a[e]);return f};b.nphrase=function(a,d,c,f,e){return c!==g&&1!==1*f?b.phrase(a,c,e):b.phrase(a,d,e)};b.linkToItem=function(a,d,c,f){if(!d&&-1!==(""+a).indexOf("_")){var e=
a.split("_");e[2]===g&&e[1]==1*e[1]&&""===e[0].replace(/\w/g,"")&&(a=e[1],d=e[0])}d||(d="html");c||(c="");var k,e=q,e=f?e+"zenario/admin/welcome.php":e+b.indexDotPHP;return f||b.adminId||a!==b.cID||!(k=$('link[rel="canonical"]').attr("href"))||k.match(/\bcID=/)?a!=1*a?e+"?cID="+a+b.urlRequest(c):e+"?cID="+a+"&cType="+d+b.urlRequest(c):(a=k.indexOf("?"),-1!=a&&(k=k.substr(0,a)),c?k+"?"+b.urlRequest(c).substr(1):k)};b.getSlotnameFromEl=function(a,d){if("string"==typeof a)return a;if("object"==typeof a){do{if(a.id&&
"colorbox"==a.id)return b.colorboxOpen;if(a.id&&"plgslt_"==a.id.substr(0,7)){var c=a.id.indexOf("-"),f;if(-1==c)f=a.id.substr(7);else if(f=a.id.substr(7,c-7),c=a.id.substr(c+1),c!=1*c)continue;if(b.slots[f])return d?a.id:f}}while(a=a.parentNode)}return!1};b.getContainerIdFromEl=function(a){return b.getSlotnameFromEl(a,!0)};b.getContainerIdFromSlotName=function(a){return"plgslt_"+a};b.scrollToSlotTop=function(a,d,c,f,e){"string"==typeof a&&(a=b.ifNull(b.get("plgslt_"+a),b.get(a)));if(a){var k=b.scrollTop(g,
g,f);a=$(a).offset().top;e===g&&(e=-80);a=Math.max(0,a+e);d&&k<a||(c===g&&(c=700),b.scrollTop(a,c,f))}};b.refreshPluginSlot=function(a,d,c,f,e,k,h,r){e===g&&(e=!0);k===g&&(k=!0);a&&(l.init&&(l.closeSlotControls(),l.cancelMovePlugin()),a=a.split("-")[0],b.slots[a]&&(c=c?b.urlRequest(c):"",b.slots[a]&&b.slots[a].tabId&&-1==c.indexOf("&tab=")&&-1==c.indexOf("&tab_no=")&&(c+="&tab="+b.slots[a].tabId),"lookup"==d&&(d=b.slots[a].instanceId),e&&!v.isOpen&&(b.scrollToSlotTop(a,!0),e=!1),k&&$("#plgslt_"+a).stop(!0,
!0).animate({opacity:0.5},150),k=b.pluginAJAXURL(a,c,d),b.ajax(k,r,!1,!0).after(function(g){b.replacePluginSlotContents(a,d,g,c,f,e)})))};b.sendSignal=function(a,d){if(!b.signalsInProgress[a]){b.signalsInProgress[a]=!0;var c,f,e,k=[];for(c in b.modules)b.has(b.modules,c)&&(f=h[b.modules[c].moduleClassName])&&"function"==typeof f[a]&&(e=f[a](d),e!==g&&k.push(e));delete b.signalsInProgress[a];return k}};b.getMouseX=function(a){return a.pageX!=g?a.pageX:a.clientX+p.body.scrollLeft+p.documentElement.scrollLeft};
b.getMouseY=function(a){return a.pageY!=g?a.pageY:a.clientY+p.body.scrollTop+p.documentElement.scrollTop};b.scrollTop=function(a,d,c){c===g&&(c=b.browserIsSafari()?"body":"html");if(a===g)return $(c).scrollTop();if(d)$(c).animate({scrollTop:a},d);else return $(c).scrollTop(a)};b.scrollLeft=function(a){var d=$(b.browserIsSafari()?"body":"html");return a===g?d.scrollLeft():d.scrollLeft(a)};b.versionOfIE=function(a){return/opera|OPERA/.test(navigator.userAgent)?!1:(a=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent))&&
a[1]&&1*a[1]};b.browserIsIE=function(a){var d=b.versionOfIE();return d&&(a?d<=a:!0)};b.browserIsChrome=function(){return/Chrome/.test(navigator.userAgent)};b.browserIsFirefox=function(){return/Firefox/.test(navigator.userAgent)};b.browserIsRetina=function(){return 1<h.devicePixelRatio};b.browserIsSafari=function(){return/Safari/.test(navigator.userAgent)};b.browserIsWebKit=function(){return/WebKit/.test(navigator.userAgent)};b.browserIsOpera=function(){return/Opera/.test(navigator.userAgent)};b.browserIsiPad=
function(){return/iPad/.test(navigator.userAgent)};b.browserIsiPhone=function(){return/iPhone/.test(navigator.userAgent)};b.browserIsMobile=function(){return b.browserIsiPad()||b.browserIsiPhone()};b.ishttps=function(){return h.location&&"https:"===h.location.protocol};b.httpOrhttps=function(){return b.ishttps()?"https://":"http://"};b.actAfterDelayIfNotSuperseded=function(a,d,c){c||(c=900);b.adinsActions[a]||(b.adinsActions[a]=0);var f=++b.adinsActions[a];d!==g&&setTimeout(function(){f==b.adinsActions[a]&&
d()},c)};b.clearAllDelays=function(a){a?delete b.adinsActions[a]:b.adinsActions={}};b.disableBackgroundScrolling=function(a){$(a).on("DOMMouseScroll mousewheel",function(a){var b=$(this),f=this.scrollTop,e=this.scrollHeight,g=b.height(),h="DOMMouseScroll"==a.type?-40*a.originalEvent.detail:a.originalEvent.wheelDelta,l=0<h,m=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!l&&-h>e-g-f)return b.scrollTop(e),m();if(l&&h>f)return b.scrollTop(0),m()})}});

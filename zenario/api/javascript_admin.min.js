zenario.lib(function(l,n,s,q,v,w,k,b,u,t,h,r,x,y,z,A,m,B,C){b.microTemplate=function(a,f,c){if(a===l||!f)return"";if(_.isArray(f)){c=f.length;for(var e="",d=0;d<c;++d)e+=b.microTemplate(a,f[d],d);return e}f.i===l&&c!==l&&(f.i=1*c);if(255>a.length&&b.microTemplates[a]){if("string"==typeof b.microTemplates[a])try{e=$.extend({},_.templateSettings,!0),_.templateSettings={variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/[<\{]%([\s\S]+?)%[>\}]/g,twigStyleSyntax:!0},b.microTemplates[a]=_.template(b.microTemplates[a]),
_.templateSettings=e}catch(g){throw console.log("Error in template "+a+": \n\n"+b.microTemplates[a]),g;}return b.microTemplates[a](f)}e="microtemplate_"+hex_md5(a);b.microTemplates[e]===l&&(b.microTemplates[e]=a);return b.microTemplate(e,f,c)};b.showAJAXLoader=function(){$(s.body).addClass("zenario_adminAJAXLoaderOpen");b.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",!1,!1,50,1,!0,!0,!1,!1)};b.hideAJAXLoader=function(){$(s.body).removeClass("zenario_adminAJAXLoaderOpen");b.closeBox("AdminAJAXLoader",
!1)};b.nowDoingSomething=function(a,b){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();var c=$("#zenario_now_installing");c.length&&c.clearQueue().hide();a&&(b?$("#zenario_now_"+a).fadeIn(1E3):$("#zenario_now_"+a).delay(900).fadeIn(2E3))};b.infoBox=function(){var a=n+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+k.urlRequest({infoBox:1});b.showAJAXLoader();k.ajax(a,!1,!0,!1).after(function(a){b.hideAJAXLoader();b.openBox(b.microTemplate("zenario_info_box",
a),"zenario_fbAdminInfoBox","AdminInfoBox",l,405,l,l,!1,!0,".zenario_infoBoxHead",!1)})};b.closeInfoBox=function(){b.closeBox("AdminInfoBox")};b.showMessage=function(a,f,c,e,d){var g=!1,p=!1;a=a?""+a:b.adminSettings.show_dev_tools?m.errorTimedOutDev:m.errorTimedOut;f===l&&(f=!0);c===l&&(c="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),c=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),c="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=
a.substr(27),c="success"):"\x3c!--Message_Type:Warning--\x3e"==a.substr(0,27)?(a=a.substr(27),c="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),c="question");if("\x3c!--Reload_Storekeeper--\x3e"==a.substr(0,25)&&h.init&&!q.zenarioOQuickMode&&!q.zenarioOSelectMode)return(a=a.substr(25))&&alert(a),b.rememberToast(),b.uploading=!1,h.setWrapperClass("uploading",b.uploading),h.reloadPage(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!h.init||q.zenarioOQuickMode||
q.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==a.substr(0,28)&&-1!=(g=a.indexOf("--\x3e"))?(h.go(a.substr(28,g-28),-1),a=a.substr(g+3),p=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(g=a.indexOf("--\x3e"))?(u.open(a.substr(19,g-19)),a=a.substr(g+3),p=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(g=a.indexOf("--\x3e"))&&(b.rememberToast(),k.goToURL(k.addBasePath(a.substr(14,g-14)),!0),a=a.substr(g+3),p=!0):(h.reload(),a=a.substr(26),p=!0);if(p&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,
12)&&(a=a.substr(12),e=!0);if("\x3c!--Button_HTML:"==a.substr(0,16)&&-1!=(g=a.indexOf("--\x3e")))f=a.substr(16,g-16),a=a.substr(g+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(g=a.indexOf("--\x3e")))f='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+a.substr(18,g-18)+'">',a=a.substr(g+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(b.loggedOutIframeCheck(a,c))return;f=h.init&&h.path&&b.isFullOrganizerWindow?
'<input type="button" value="'+m.login+'" class="submit_selected" onclick="zenarioO.reloadPage(undefined, true);"><input type="button" class="submit" value="'+m.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+m.login+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests, true));"><input type="button" class="submit" value="'+m.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests));"/>';
a=a.substr(17);e=!0}if("error"==c&&-1!=(g=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(g)))throw 0;a=a.substr(0,g)}catch(n){}b.floatingBox(a,f,c,e,d);return!0};b.notification=function(a){r("zenario_notification").style.display="";r("zenario_notification").innerHTML="<div><h1>"+k.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){r("zenario_notification").style.display=
"none"}})};b.showHelp=function(a){var f=introJs(),c=$("#zenario_fbog");a=$(a);var e=[],d;c.addClass("zenario_introjs_fixPosition");a.each(function(a,b){d=$(b).data();d.element=b;e.push(d)});e.sort(function(a,b){return a.step==b.step?0:a.step<b.step?-1:1});f.setOptions({steps:e,nextLabel:b.phrase.next,prevLabel:b.phrase.prev});f.start();f.onexit(function(){c.removeClass("zenario_introjs_fixPosition")})};b.showTutorial=function(a,f){!a&&h.currentTopLevelPath&&(a=h.currentTopLevelPath.substr(0,h.currentTopLevelPath.indexOf("/")));
var c={},e={videos:[],show_help_tour_next_time:b.show_help_tour_next_time,auto:f},d;for(d in h.map)h.map.hasOwnProperty(d)&&"object"==typeof h.map[d]&&h.map[d].youtube_video_id&&(c[d]={id:h.map[d].youtube_video_id,title:h.map[d].youtube_thumbnail_title});a&&c[a]&&(e.main_video_id=c[a].id,e.main_video_title=c[a].title,e.videos.push(c[a]),delete c[a]);for(d in c)c.hasOwnProperty(d)&&e.videos.push(c[d]);if(!0!=f||e.main_video_id!=l)c=b.microTemplate("zenario_tutorial",e),$.colorbox({width:964,height:791,
html:c,className:"zenario_tutorial_cbox",overlayClose:!1,escKey:!1,onComplete:function(){0<e.videos.length&&new $JssorSlider$("zenario_tutorial_other_videos",{$FillMode:1,$SlideDuration:300,$MinDragOffsetToSlide:20,$SlideWidth:200,$SlideHeight:150,$SlideSpacing:75,$DisplayPieces:3,$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1})}})};b.clickOtherTutorialVideo=function(a,f){var c=b.microTemplate("zenario_tutorial_main_video",{main_video_id:a});$("#zenario_tutorial_video_banner").html(f);
$("#zenario_tutorial_main_video").html(c)};b.toggleShowHelpTourNextTime=function(){var a=$("#zenario_show_help_tour_next_time").prop("checked")?1:0;k.ajax(n+"zenario/admin/quick_ajax.php?_show_help_tour_next_time="+a)};b.getSKItem=function(a,b){var c,e=!1,d=n+"zenario/admin/ajax.php?_json=1&_start=0&_get_item_name=1&path="+encodeURIComponent(a);if(b!==l)if(d+="&_item=","object"==typeof b)for(c in b)k.has(b,c)&&(e?e=!1:d+=",",d+=encodeURIComponent(b[c]));else d+=encodeURIComponent(b)+"&_limit=1";(c=
k.checkSessionStorage(d,{},!0))||(c=k.nonAsyncAJAX(d,!1,!0),k.setSessionStorage(c,d,{},!0));return c};b.lookupFileDetails=function(a){var b=n+"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=k.checkSessionStorage(b,"",!0))||(a=k.nonAsyncAJAX(b,!1,!0),k.setSessionStorage(a,b,"",!0));return a};b.toggleSlotWand=function(){b.checkForEdits()&&(b.slotWandOn=!b.slotWandOn,t.clickTab(b.toolbar))};b.toggleShowGrid=function(){b.checkForEdits()&&(b.showGridOn=!b.showGridOn,t.clickTab(b.toolbar))}});

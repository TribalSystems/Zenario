(function(q,p,r,h,b,t,s,m,k,l){b.microTemplate=function(a,f,c){if(a===l||!f)return"";if(_.isArray(f)){c=f.length;for(var g="",d=0;d<c;++d)g+=b.microTemplate(a,f[d],d);return g}f.i===l&&c!==l&&(f.i=1*c);if(b.microTemplates[a]){if("string"==typeof b.microTemplates[a])try{g=$.extend({},_.templateSettings,!0),_.templateSettings={variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/[<\{]%([\s\S]+?)%[>\}]/g,twigStyleSyntax:!0},b.microTemplates[a]=_.template(b.microTemplates[a]),_.templateSettings=
g}catch(e){throw console.log("Error in template "+a+": \n\n"+b.microTemplates[a]),e;}return b.microTemplates[a](f)}return _.template(a,f,{variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/\{%([\s\S]+?)%\}/g,twigStyleSyntax:!0})};b.showAJAXLoader=function(){$(r.body).addClass("zenario_adminAJAXLoaderOpen");b.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",!1,!1,50,1,!0,!0,!1,!1)};b.hideAJAXLoader=function(){$(r.body).removeClass("zenario_adminAJAXLoaderOpen");b.closeBox("AdminAJAXLoader",
!1)};b.nowDoingSomething=function(a,b){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();zenarioAB.welcome&&$("#zenario_now_installing").clearQueue().hide();a&&(b?$("#zenario_now_"+a).fadeIn(1E3):$("#zenario_now_"+a).delay(900).fadeIn(2E3))};b.infoBox=function(){var a,f=q+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+h.urlRequest({infoBox:1});(a=h.checkSessionStorage(f))?b.infoBox2(a):(b.showAJAXLoader(),$.get(f,function(a){b.hideAJAXLoader();
b.loggedOut(a)||(h.setSessionStorage(a,f),b.infoBox2(a))},"text"))};b.closeInfoBox=function(){b.closeBox("AdminInfoBox")};b.showMessage=function(a,f,c,g,d){var e=!1,n=!1;a=a?""+a:h.showDevTools?k.errorTimedOutDev:k.errorTimedOut;f===l&&(f=!0);c===l&&(c="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),c=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),c="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=a.substr(27),c="success"):"\x3c!--Message_Type:Warning--\x3e"==
a.substr(0,27)?(a=a.substr(27),c="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),c="question");if("\x3c!--Reload_Storekeeper--\x3e"==a.substr(0,25)&&zenarioO.init&&!p.zenarioOQuickMode&&!p.zenarioOSelectMode)return(a=a.substr(25))&&alert(a),b.uploading=!1,zenarioO.setWrapperClass("uploading",b.uploading),zenarioO.reload(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!zenarioO.init||p.zenarioOQuickMode||p.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==
a.substr(0,28)&&-1!=(e=a.indexOf("--\x3e"))?(zenarioO.go(a.substr(28,e-28),-1),a=a.substr(e+3),n=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(e=a.indexOf("--\x3e"))?(zenarioAB.open(a.substr(19,e-19)),a=a.substr(e+3),n=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(e=a.indexOf("--\x3e"))&&(h.goToURL(h.addBasePath(a.substr(14,e-14))),a=a.substr(e+3),n=!0):(zenarioO.refresh(),a=a.substr(26),n=!0);if(n&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,12)&&(a=a.substr(12),g=!0);if("\x3c!--Button_HTML:"==
a.substr(0,16)&&-1!=(e=a.indexOf("--\x3e")))f=a.substr(16,e-16),a=a.substr(e+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(e=a.indexOf("--\x3e")))f='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+a.substr(18,e-18)+'">',a=a.substr(e+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(b.loggedOutIframeCheck(a,c))return;f=zenarioO.init?'<input type="button" value="'+k.logIn+'" class="submit_selected" onclick="zenarioO.reload(undefined, true);"><input type="button" class="submit" value="'+
k.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+k.logIn+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, \'\', true));"><input type="button" class="submit" value="'+k.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType));"/>';a=a.substr(17);g=!0}if("error"==c&&-1!=(e=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(e)))throw 0;a=a.substr(0,e)}catch(m){}b.floatingBox(a,f,
c,g,d);return!0};b.notification=function(a){m("zenario_notification").style.display="";m("zenario_notification").style.top=h.scrollTop()+"px";m("zenario_notification").innerHTML="<div><h1>"+h.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){m("zenario_notification").style.display="none"}})};b.showHelp=function(a){var b=introJs(),c=$("#zenario_fbsk");
a=$(a);var g=[],d;c.addClass("zenario_introjs_fixPosition");a.each(function(a,b){d=$(b).data();d.element=b;g.push(d)});g.sort(function(a,b){return a.step==b.step?0:a.step<b.step?-1:1});b.setOptions({steps:g});b.start();b.onexit(function(){c.removeClass("zenario_introjs_fixPosition")})};b.getSKItem=function(a,b){var c,g=!1,d=q+"zenario/admin/ajax.php?_json=1&_start=0&_get_item_name=1&path="+encodeURIComponent(a);if(b!==l)if(d+="&_item=","object"==typeof b)for(c in b)h.has(b,c)&&(g?g=!1:d+=",",d+=encodeURIComponent(b[c]));
else d+=encodeURIComponent(b)+"&_limit=1";(c=h.checkSessionStorage(d,{},!0))||(c=h.nonAsyncAJAX(d,!1,!0),h.setSessionStorage(c,d,{},!0));return c};b.lookupFileDetails=function(a){var b=q+"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=h.checkSessionStorage(b,"",!0))||(a=h.nonAsyncAJAX(b,!1,!0),h.setSessionStorage(a,b,"",!0));return a};b.toggleSlotWand=function(){b.checkForEdits()&&(b.slotWandOn=!b.slotWandOn,s.clickTab(b.toolbar))};b.toggleShowGrid=function(){b.checkForEdits()&&
(b.showGridOn=!b.showGridOn,s.clickTab(b.toolbar))}})(URLBasePath,window,document,zenario,zenarioA,zenarioTab,zenarioAT,zenario.get,zenarioA.phrase);

zenario.lib(function(l,p,s,q,v,w,k,b,u,t,h,r,x,y,z,A,n,B,C){b.microTemplate=function(a,e,c){if(a===l||!e)return"";if(_.isArray(e)){c=e.length;for(var f="",d=0;d<c;++d)f+=b.microTemplate(a,e[d],d);return f}e.i===l&&c!==l&&(e.i=1*c);if(255>a.length&&b.microTemplates[a]){if("string"==typeof b.microTemplates[a])try{f=$.extend({},_.templateSettings,!0),_.templateSettings={variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/[<\{]%([\s\S]+?)%[>\}]/g,twigStyleSyntax:!0},b.microTemplates[a]=_.template(b.microTemplates[a]),
_.templateSettings=f}catch(g){throw console.log("Error in template "+a+": \n\n"+b.microTemplates[a]),g;}return b.microTemplates[a](e)}f="microtemplate_"+hex_md5(a);b.microTemplates[f]===l&&(b.microTemplates[f]=a);return b.microTemplate(f,e,c)};b.showAJAXLoader=function(){$(s.body).addClass("zenario_adminAJAXLoaderOpen");b.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",!1,!1,50,1,!0,!0,!1,!1)};b.hideAJAXLoader=function(){$(s.body).removeClass("zenario_adminAJAXLoaderOpen");b.closeBox("AdminAJAXLoader",
!1)};b.nowDoingSomething=function(a,b){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();var c=$("#zenario_now_installing");c.length&&c.clearQueue().hide();a&&(b?$("#zenario_now_"+a).fadeIn(1E3):$("#zenario_now_"+a).delay(900).fadeIn(2E3))};b.infoBox=function(){var a=p+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+k.urlRequest({infoBox:1});b.showAJAXLoader();k.ajax(a,!1,!0,!1).after(function(a){b.hideAJAXLoader();b.openBox(b.microTemplate("zenario_info_box",
a),"zenario_fbAdminInfoBox","AdminInfoBox",l,405,l,l,!1,!0,".zenario_infoBoxHead",!1)})};b.closeInfoBox=function(){b.closeBox("AdminInfoBox")};b.showMessage=function(a,e,c,f,d){var g=!1,m=!1;a=a?""+a:b.adminSettings.show_dev_tools?n.errorTimedOutDev:n.errorTimedOut;e===l&&(e=!0);c===l&&(c="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),c=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),c="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=
a.substr(27),c="success"):"\x3c!--Message_Type:Warning--\x3e"==a.substr(0,27)?(a=a.substr(27),c="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),c="question");if("\x3c!--Reload_Storekeeper--\x3e"==a.substr(0,25)&&h.init&&!q.zenarioOQuickMode&&!q.zenarioOSelectMode)return(a=a.substr(25))&&alert(a),b.rememberToast(),b.uploading=!1,h.setWrapperClass("uploading",b.uploading),h.reloadPage(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!h.init||q.zenarioOQuickMode||
q.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==a.substr(0,28)&&-1!=(g=a.indexOf("--\x3e"))?(h.go(a.substr(28,g-28),-1),a=a.substr(g+3),m=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(g=a.indexOf("--\x3e"))?(u.open(a.substr(19,g-19)),a=a.substr(g+3),m=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(g=a.indexOf("--\x3e"))&&(b.rememberToast(),k.goToURL(k.addBasePath(a.substr(14,g-14)),!0),a=a.substr(g+3),m=!0):(h.reload(),a=a.substr(26),m=!0);if(m&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,
12)&&(a=a.substr(12),f=!0);if("\x3c!--Button_HTML:"==a.substr(0,16)&&-1!=(g=a.indexOf("--\x3e")))e=a.substr(16,g-16),a=a.substr(g+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(g=a.indexOf("--\x3e")))e='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+a.substr(18,g-18)+'">',a=a.substr(g+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(b.loggedOutIframeCheck(a,c))return;e=h.init&&h.path&&b.isFullOrganizerWindow?
'<input type="button" value="'+n.login+'" class="submit_selected" onclick="zenarioO.reloadPage(undefined, true);"><input type="button" class="submit" value="'+n.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+n.login+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests, true));"><input type="button" class="submit" value="'+n.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests));"/>';
a=a.substr(17);f=!0}if("error"==c&&-1!=(g=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(g)))throw 0;a=a.substr(0,g)}catch(p){}b.floatingBox(a,e,c,f,d);return!0};b.notification=function(a){r("zenario_notification").style.display="";r("zenario_notification").innerHTML="<div><h1>"+k.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){r("zenario_notification").style.display=
"none"}})};b.showHelp=function(a){var e=introJs(),c=$("#zenario_fbog");a=$(a);var f=[],d;c.addClass("zenario_introjs_fixPosition");a.each(function(a,b){d=$(b).data();d.element=b;f.push(d)});f.sort(function(a,b){return a.step==b.step?0:a.step<b.step?-1:1});e.setOptions({steps:f,nextLabel:b.phrase.next,prevLabel:b.phrase.prev});e.start();e.onexit(function(){c.removeClass("zenario_introjs_fixPosition")})};b.showTutorial=function(a,e){!a&&h.currentTopLevelPath&&(a=h.currentTopLevelPath.substr(0,h.currentTopLevelPath.indexOf("/")));
var c={},f={videos:[],show_help_tour_next_time:b.show_help_tour_next_time,auto:e},d,g;for(d in h.map)k.has(h.map,d)&&(g=h.map[d])&&g.youtube_video_id&&(c[d]={id:g.youtube_video_id,title:g.youtube_thumbnail_title});var m=0;a&&c[a]&&(f.main_video_id=c[a].id,f.main_video_title=c[a].title,c[a].index=m++,c[a].selected=!0,f.videos.push(c[a]),delete c[a]);for(d in c)k.has(c,d)&&(g=c[d],g.index=m++,f.videos.push(g));if(!0!=e||f.main_video_id!=l)c=b.microTemplate("zenario_tutorial",f),$.colorbox({width:964,
height:791,innerHeight:696,maxHeight:"95%",html:c,className:"zenario_tutorial_cbox",overlayClose:!1,escKey:!1,onComplete:function(){0<f.videos.length&&b.initTutorialSlideshow()}})};b.initTutorialSlideshow=function(){(new $JssorSlider$("zenario_tutorial_other_videos",{$FillMode:1,$SlideDuration:300,$MinDragOffsetToSlide:20,$SlideWidth:200,$SlideHeight:150,$SlideSpacing:75,$DisplayPieces:3,$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1})).$On($JssorSlider$.$EVT_CLICK,function(a,
e){$video=$("#zenario_tutorial_other_video_"+a);b.clickOtherTutorialVideo($video.data("id"),$video.data("title"),a)})};b.clickOtherTutorialVideo=function(a,e,c){a=b.microTemplate("zenario_tutorial_main_video",{main_video_id:a});$("#zenario_tutorial_video_banner").html(e);$("#zenario_tutorial_main_video").html(a);$("#zenario_tutorial_other_videos_slideshow div.video").removeClass("selected");$("#zenario_tutorial_other_video_"+c).addClass("selected")};b.toggleShowHelpTourNextTime=function(){var a=$("#zenario_show_help_tour_next_time").prop("checked")?
1:0;k.ajax(p+"zenario/admin/quick_ajax.php?_show_help_tour_next_time="+a)};b.getSKItem=function(a,b){var c,f=!1,d=p+"zenario/admin/ajax.php?_json=1&_start=0&_get_item_name=1&path="+encodeURIComponent(a);if(b!==l)if(d+="&_item=","object"==typeof b)for(c in b)k.has(b,c)&&(f?f=!1:d+=",",d+=encodeURIComponent(b[c]));else d+=encodeURIComponent(b)+"&_limit=1";(c=k.checkSessionStorage(d,{},!0))||(c=k.nonAsyncAJAX(d,!1,!0),k.setSessionStorage(c,d,{},!0));return c};b.lookupFileDetails=function(a){var b=p+
"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=k.checkSessionStorage(b,"",!0))||(a=k.nonAsyncAJAX(b,!1,!0),k.setSessionStorage(a,b,"",!0));return a};b.toggleSlotWand=function(){b.checkForEdits()&&(b.slotWandOn=!b.slotWandOn,t.clickTab(b.toolbar))};b.toggleShowGrid=function(){b.checkForEdits()&&(b.showGridOn=!b.showGridOn,t.clickTab(b.toolbar))};b.checkSpecificPerms=function(a){if(!b.adminHasSpecificPerms)return!0;var e,c=a.split(",");for(e in c)if(k.has(c,e)&&(a=c[e],!(h.tuix&&
h.tuix.items&&h.tuix.items[a]&&h.tuix.items[a]._specific_perms)))return!1;return!0};b.checkSpecificPermsOnThisPage=function(){return!b.adminHasSpecificPerms||b.adminHasSpecificPermsOnThisPage}});

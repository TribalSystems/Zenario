zenario.lib(function(k,r,s,q,v,w,h,b,t,u,l,n,x,y,z,A,m,B,C){b.microTemplate=function(a,g,c){if(a===k||!g)return"";if(_.isArray(g)){c=g.length;for(var e="",d=0;d<c;++d)e+=b.microTemplate(a,g[d],d);return e}g.i===k&&c!==k&&(g.i=1*c);if(255>a.length&&b.microTemplates[a]){if("string"==typeof b.microTemplates[a])try{e=$.extend({},_.templateSettings,!0),_.templateSettings={variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/[<\{]%([\s\S]+?)%[>\}]/g,twigStyleSyntax:!0},b.microTemplates[a]=_.template(b.microTemplates[a]),
_.templateSettings=e}catch(f){throw console.log("Error in template "+a+": \n\n"+b.microTemplates[a]),f;}return b.microTemplates[a](g)}e="microtemplate_"+hex_md5(a);b.microTemplates[e]===k&&(b.microTemplates[e]=a);return b.microTemplate(e,g,c)};b.showAJAXLoader=function(){$(s.body).addClass("zenario_adminAJAXLoaderOpen");b.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",!1,!1,50,1,!0,!0,!1,!1)};b.hideAJAXLoader=function(){$(s.body).removeClass("zenario_adminAJAXLoaderOpen");b.closeBox("AdminAJAXLoader",
!1)};b.nowDoingSomething=function(a,b){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();t.isWelcomePage&&$("#zenario_now_installing").clearQueue().hide();a&&(b?$("#zenario_now_"+a).fadeIn(1E3):$("#zenario_now_"+a).delay(900).fadeIn(2E3))};b.infoBox=function(){var a=r+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+h.urlRequest({infoBox:1});b.showAJAXLoader();h.ajax(a,!1,!0,!1).after(function(a){b.hideAJAXLoader();b.openBox(b.microTemplate("zenario_info_box",
a),"zenario_fbAdminInfoBox","AdminInfoBox",k,405,k,k,!1,!0,".zenario_infoBoxHead",!1)})};b.closeInfoBox=function(){b.closeBox("AdminInfoBox")};b.showMessage=function(a,g,c,e,d){var f=!1,p=!1;a=a?""+a:h.showDevTools?m.errorTimedOutDev:m.errorTimedOut;g===k&&(g=!0);c===k&&(c="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),c=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),c="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=a.substr(27),c="success"):
"\x3c!--Message_Type:Warning--\x3e"==a.substr(0,27)?(a=a.substr(27),c="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),c="question");if("\x3c!--Reload_Storekeeper--\x3e"==a.substr(0,25)&&l.init&&!q.zenarioOQuickMode&&!q.zenarioOSelectMode)return(a=a.substr(25))&&alert(a),b.uploading=!1,l.setWrapperClass("uploading",b.uploading),l.reloadPage(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!l.init||q.zenarioOQuickMode||q.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==
a.substr(0,28)&&-1!=(f=a.indexOf("--\x3e"))?(l.go(a.substr(28,f-28),-1),a=a.substr(f+3),p=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(f=a.indexOf("--\x3e"))?(t.open(a.substr(19,f-19)),a=a.substr(f+3),p=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(f=a.indexOf("--\x3e"))&&(h.goToURL(h.addBasePath(a.substr(14,f-14)),!0),a=a.substr(f+3),p=!0):(l.reload(),a=a.substr(26),p=!0);if(p&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,12)&&(a=a.substr(12),e=!0);if("\x3c!--Button_HTML:"==a.substr(0,16)&&
-1!=(f=a.indexOf("--\x3e")))g=a.substr(16,f-16),a=a.substr(f+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(f=a.indexOf("--\x3e")))g='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+a.substr(18,f-18)+'">',a=a.substr(f+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(b.loggedOutIframeCheck(a,c))return;g=l.init&&l.path&&b.isFullOrganizerWindow?'<input type="button" value="'+m.logIn+'" class="submit_selected" onclick="zenarioO.reloadPage(undefined, true);"><input type="button" class="submit" value="'+
m.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+m.logIn+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests, true));"><input type="button" class="submit" value="'+m.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests));"/>';a=a.substr(17);e=!0}if("error"==c&&-1!=(f=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(f)))throw 0;
a=a.substr(0,f)}catch(n){}b.floatingBox(a,g,c,e,d);return!0};b.notification=function(a){n("zenario_notification").style.display="";n("zenario_notification").style.top=h.scrollTop()+"px";n("zenario_notification").innerHTML="<div><h1>"+h.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){n("zenario_notification").style.display="none"}})};b.showHelp=
function(a){var g=introJs(),c=$("#zenario_fbog");a=$(a);var e=[],d;c.addClass("zenario_introjs_fixPosition");a.each(function(a,b){d=$(b).data();d.element=b;e.push(d)});e.sort(function(a,b){return a.step==b.step?0:a.step<b.step?-1:1});g.setOptions({steps:e,nextLabel:b.phrase.next,prevLabel:b.phrase.prev});g.start();g.onexit(function(){c.removeClass("zenario_introjs_fixPosition")})};b.getSKItem=function(a,b){var c,e=!1,d=r+"zenario/admin/ajax.php?_json=1&_start=0&_get_item_name=1&path="+encodeURIComponent(a);
if(b!==k)if(d+="&_item=","object"==typeof b)for(c in b)h.has(b,c)&&(e?e=!1:d+=",",d+=encodeURIComponent(b[c]));else d+=encodeURIComponent(b)+"&_limit=1";(c=h.checkSessionStorage(d,{},!0))||(c=h.nonAsyncAJAX(d,!1,!0),h.setSessionStorage(c,d,{},!0));return c};b.lookupFileDetails=function(a){var b=r+"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=h.checkSessionStorage(b,"",!0))||(a=h.nonAsyncAJAX(b,!1,!0),h.setSessionStorage(a,b,"",!0));return a};b.toggleSlotWand=function(){b.checkForEdits()&&
(b.slotWandOn=!b.slotWandOn,u.clickTab(b.toolbar))};b.toggleShowGrid=function(){b.checkForEdits()&&(b.showGridOn=!b.showGridOn,u.clickTab(b.toolbar))}});

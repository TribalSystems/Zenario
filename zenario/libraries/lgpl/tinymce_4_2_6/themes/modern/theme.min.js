tinymce.ThemeManager.add("modern",function(a){function w(d,b){var f=[],c;if(d)return p(d.split(/[ ,]/),function(e){function d(){var b=a.selection;"bullist"==m&&b.selectorChanged("ul > li",function(g,a){for(var b,d=a.parents.length;d--&&(b=a.parents[d].nodeName,"OL"!=b&&"UL"!=b););e.active(g&&"UL"==b)});"numlist"==m&&b.selectorChanged("ol > li",function(g,a){for(var b,d=a.parents.length;d--&&(b=a.parents[d].nodeName,"OL"!=b&&"UL"!=b););e.active(g&&"OL"==b)});e.settings.stateSelector&&b.selectorChanged(e.settings.stateSelector,
function(g){e.active(g)},!0);e.settings.disabledStateSelector&&b.selectorChanged(e.settings.disabledStateSelector,function(g){e.disabled(g)})}var m;if("|"==e)c=null;else if(q.has(e))e={type:e,size:b},f.push(e),c=null;else if(c||(c={type:"buttongroup",items:[]},f.push(c)),a.buttons[e])if(m=e,e=a.buttons[m],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=b,e=q.create(e),c.items.push(e),a.initialized)d();else a.on("init",d)}),{type:"toolbar",layout:"flow",items:f}}function s(a){function h(b){if(b)return f.push(w(b,
a)),!0}var f=[];if(tinymce.isArray(b.toolbar)){if(0===b.toolbar.length)return;tinymce.each(b.toolbar,function(a,d){b["toolbar"+(d+1)]=a});delete b.toolbar}for(var c=1;10>c&&h(b["toolbar"+c]);c++);f.length||!1===b.toolbar||h(b.toolbar||z);if(f.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:f}}function t(){function d(d){var e,c,g,f,h;h=tinymce.makeMap((b.removed_menuitems||"").split(/[ ,]/));b.menu?(c=b.menu[d],f=!0):c=x[d];if(c){e={text:c.title};g=
[];p((c.items||"").split(/[ ,]/),function(b){"|"!=b&&!a.menuItems[b]||h[b]||g.push("|"==b?{text:"|"}:a.menuItems[b])});f||p(a.menuItems,function(a){a.context==d&&("before"==a.separator&&g.push({text:"|"}),a.prependToContext?g.unshift(a):g.push(a),"after"==a.separator&&g.push({text:"|"}))});for(c=0;c<g.length;c++)"|"==g[c].text&&(0!==c&&c!=g.length-1||g.splice(c,1));e.menu=g;if(!e.menu.length)return null}return e}var h,f=[],c=[];if(b.menu)for(h in b.menu)c.push(h);else for(h in x)c.push(h);h="string"==
typeof b.menubar?b.menubar.split(/[ ,]/):c;for(c=0;c<h.length;c++){var e=h[c];(e=d(e))&&f.push(e)}return f}function u(b){function h(a){(a=b.find(a)[0])&&a.focus(!0)}a.shortcuts.add("Alt+F9","",function(){h("menubar")});a.shortcuts.add("Alt+F10","",function(){h("toolbar")});a.shortcuts.add("Alt+F11","",function(){h("elementpath")});b.on("cancel",function(){a.focus()})}function v(d,h){var f,c,e,k;e=a.getContainer();k=a.getContentAreaContainer().firstChild;c=e.clientWidth;f=k.clientWidth;null!==d&&(d=
Math.max(b.min_width||100,d),d=Math.min(b.max_width||65535,d),n.setStyle(e,"width",d+(c-f)),n.setStyle(k,"width",d));h=Math.max(b.min_height||100,h);h=Math.min(b.max_height||65535,h);n.setStyle(k,"height",h);a.fire("ResizeEditor")}function y(){function b(g){var c,d;c=tinymce.DOM.getPos(a.getContentAreaContainer());g=a.dom.getRect(g);d=a.dom.getRoot();"BODY"==d.nodeName&&(g.x-=d.ownerDocument.documentElement.scrollLeft||d.scrollLeft,g.y-=d.ownerDocument.documentElement.scrollTop||d.scrollTop);g.x+=
c.x;g.y+=c.y;return g}function h(){p(a.contextToolbars,function(a){a.panel&&a.panel.hide()})}function f(g){var c,e,f,k,l,m;a.removed||(g&&g.toolbar.panel?(m="tc-bc bc-tc tl-bl bl-tl tr-br br-tr".split(" "),l=g.toolbar.panel,l.show(),f=b(g.element),e=tinymce.DOM.getRect(l.getEl()),k=tinymce.DOM.getRect(a.getContentAreaContainer()||a.getBody()),a.inline||(k.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(g.element)&&(f=r.inflate(f,0,7)),(c=r.findBestRelativePosition(e,
f,k,m))?(p(m.concat("inside"),function(a){l.classes.toggle("tinymce-inline-"+a,a==c)}),g=r.relativePosition(e,f,c),l.moveTo(g.x,g.y)):(p(m,function(a){l.classes.toggle("tinymce-inline-"+a,!1)}),l.classes.toggle("tinymce-inline-inside",!0),(f=r.intersect(k,f))?(c=r.findBestRelativePosition(e,f,k,["tc-tc","tl-tl","tr-tr"]))?(g=r.relativePosition(e,f,c),l.moveTo(g.x,g.y)):l.moveTo(f.x,f.y):l.hide())):h())}function c(){function g(){a.selection&&f(m(a.selection.getNode()))}window.requestAnimationFrame?
window.requestAnimationFrame(g):g()}function e(){l||(l=a.selection.getScrollContainer()||a.getWin(),tinymce.$(l).on("scroll",c),a.on("remove",function(){tinymce.$(l).off("scroll")}))}function k(){tinymce.each(a.contextToolbars||[],function(a){a.panel&&a.panel.hide()})}function m(b){var c,d,e=a.contextToolbars||[];d=a.$(b).parents().add(b);for(b=d.length-1;0<=b;b--)for(c=e.length-1;0<=c;c--)if(e[c].predicate(d[b]))return{toolbar:e[c],element:d[b]};return null}var l;a.on("click keyup",function(){window.setTimeout(function(){var b;
if(!a.removed)if(b=m(a.selection.getNode())){var c;b.toolbar.panel?b.toolbar.panel.show():(e(),c=q.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:w(b.toolbar.items)}),b.toolbar.panel=c,c.renderTo(document.body).reflow());f(b)}else k()},0)});a.on("blur hide",k);a.on("ObjectResizeStart",function(){var b=m(a.selection.getNode());b&&b.toolbar.panel&&b.toolbar.panel.hide()});a.on("nodeChange ResizeEditor ResizeWindow",
c);a.on("remove",function(){tinymce.each(a.contextToolbars||[],function(a){a.panel&&a.panel.remove()});a.contextToolbars={}})}function A(d){zenario.getContainerIdFromEl(d.targetNode);var h=document.getElementById("zenario_at_toolbars");d.skinUiCss&&tinymce.DOM.loadCSS(d.skinUiCss);d=l.panel=q.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},{type:"panel",layout:"stack",
classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:s()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});h.innerHTML="";a.fire("BeforeRenderUI");d.renderTo(h).reflow();u(d);b.content_editable=!0;return{}}function B(d){function h(){if(k&&k.moveRel&&k.visible()&&!k._fixed){var b=a.selection.getScrollContainer(),c=a.getBody(),d=0,e=0;b&&(e=n.getPos(c),b=n.getPos(b),d=Math.max(0,b.x-e.x),e=Math.max(0,b.y-e.y));k.fixed(!1).moveRel(c,a.rtl?["tr-br","br-tr"]:
["tl-bl","bl-tl","tr-br"]).moveBy(d,e)}}function f(){k&&(k.show(),h(),n.addClass(a.getBody(),"mce-edit-focus"))}function c(){k&&(k.hide(),C.hideAll(),n.removeClass(a.getBody(),"mce-edit-focus"))}function e(){k?k.visible()||f():(k=l.panel=q.create({type:m?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!m,border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},s(b.toolbar_items_size)]}),
a.fire("BeforeRenderUI"),k.renderTo(m||document.body).reflow(),u(k),f(),y(),a.on("nodeChange",h),a.on("activate",f),a.on("deactivate",c),a.nodeChanged())}var k,m;b.fixed_toolbar_container&&(m=n.select(b.fixed_toolbar_container)[0]);b.content_editable=!0;a.on("focus",function(){d.skinUiCss?tinymce.DOM.styleSheetLoader.load(d.skinUiCss,e,e):e()});a.on("blur hide",c);a.on("remove",function(){k&&(k.remove(),k=null)});d.skinUiCss&&tinymce.DOM.styleSheetLoader.load(d.skinUiCss);return{}}function D(d){var h,
f,c,e;d.skinUiCss&&tinymce.DOM.loadCSS(d.skinUiCss);c=l.panel=q.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},s(b.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});!1!==b.resize&&(e={type:"resizehandle",direction:b.resize,onResizeStart:function(){var b=a.getContentAreaContainer().firstChild;h=b.clientWidth;
f=b.clientHeight},onResize:function(a){"both"==b.resize?v(h+a.deltaX,f+a.deltaY):v(null,f+a.deltaY)}});!1!==b.statusbar&&c.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},e]});b.readonly&&c.find("*").disabled(!0);a.fire("BeforeRenderUI");c.renderBefore(d.targetNode).reflow();b.width&&tinymce.DOM.setStyle(c.getEl(),"width",b.width);a.on("remove",function(){c.remove();c=null});u(c);y();return{iframeContainer:c.find("#iframe")[0].getEl(),
editorContainer:c.getEl()}}var l=this,b=a.settings,q=tinymce.ui.Factory,p=tinymce.each,n=tinymce.DOM,r=tinymce.ui.Rect,C=tinymce.ui.FloatPanel,x={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},z="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";
l.renderUI=function(d){var h=!1!==b.skin?b.skin||"lightgray":!1;if(h){var f=b.skin_url,f=f?a.documentBaseURI.toAbsolute(f):tinymce.baseURL+"/skins/"+h;d.skinUiCss=7>=tinymce.Env.documentMode?f+"/skin.ie7.min.css":f+"/skin.min.css";a.contentCSS.push(f+"/content"+(a.inline?".inline":"")+".min.css")}a.on("ProgressState",function(a){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body"));a.state?l.throbber.show(a.time):l.throbber.hide()});return b.zenario_inline_ui?A(d):b.inline?B(d):D(d)};
l.resizeTo=v;l.resizeBy=function(b,h){var f=a.getContentAreaContainer();l.resizeTo(f.clientWidth+b,f.clientHeight+h)}});

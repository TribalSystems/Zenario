(function(J,G){function K(t,z){for(var m,a=[],e=0;e<t.length;++e){if(!(m=H[t[e]]))a:{m=J;for(var w=t[e].split(/[.\/]/),u=0;u<w.length;++u){if(!m[w[u]]){m=void 0;break a}m=m[w[u]]}}if(!m)throw"module definition dependecy not found: "+t[e];a.push(m)}z.apply(null,a)}function F(t,z,m){if("string"!==typeof t)throw"invalid module definition, module id must be defined and be a string";if(z===G)throw"invalid module definition, dependencies must be specified";if(m===G)throw"invalid module definition, definition function must be specified";
K(z,function(){H[t]=m.apply(null,arguments)})}var H={};F("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(t,z){function m(a,m){return parseInt(a.getAttribute(m)||1,10)}var a=t.each;return function(e,w){function u(){var b=0;c=[];g=0;a(["thead","tbody","tfoot"],function(I){var d=s.select("> "+I+" tr",w);a(d,function(d,D){D+=b;a(s.select("> td, > th",d),function(b,C){var a,d,f,k;if(c[D])for(;c[D][C];)C++;f=m(b,"rowspan");k=m(b,"colspan");for(d=D;d<D+f;d++)for(c[d]||(c[d]=
[]),a=C;a<C+k;a++)c[d][a]={part:I,real:d==D&&a==C,elm:b,rowspan:f,colspan:k};g=Math.max(g,C+1)})});b+=d.length})}function v(b,c){b=b.cloneNode(c);b.removeAttribute("id");return b}function y(b,a){var d;if(d=c[a])return d[b]}function d(b,c,a){b&&(a=parseInt(a,10),1===a?b.removeAttribute(c,1):b.setAttribute(c,a,1))}function r(b){return b&&(s.hasClass(b.elm,"mce-item-selected")||b==f)}function l(){var b=[];a(w.rows,function(c){a(c.cells,function(a){if(s.hasClass(a,"mce-item-selected")||f&&a==f.elm)return b.push(c),
!1})});return b}function B(b){var c,g={};!1!==e.settings.table_clone_elements&&(g=t.makeMap((e.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));t.walk(b,function(d){var f;if(3==d.nodeType)return a(s.getParents(d.parentNode,null,b).reverse(),function(b){g[b.nodeName]&&(b=v(b,!1),c?f&&f.appendChild(b):c=f=b,f=b)}),f&&(f.innerHTML=z.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");b=v(b,!1);d(b,"rowSpan",1);d(b,"colSpan",1);if(c)b.appendChild(c);
else if(!z.ie||10<z.ie)b.innerHTML='<br data-mce-bogus="1" />';return b}function A(){var b=s.createRng();a(s.select("tr",w),function(b){0===b.cells.length&&s.remove(b)});if(0===s.select("tr",w).length)b.setStartBefore(w),b.setEndBefore(w),k.setRng(b),s.remove(w);else if(a(s.select("thead,tbody,tfoot",w),function(b){0===b.rows.length&&s.remove(b)}),u(),p&&(b=c[Math.min(c.length-1,p.y)]))k.select(b[Math.min(b.length-1,p.x)].elm,!0),k.collapse(!0)}function q(b,a,d,g){var f,k,h,e,p;f=c[a][b].elm.parentNode;
for(h=1;h<=d;h++)if(f=s.getNext(f,"tr")){for(k=b;0<=k;k--)if(p=c[a+h][k].elm,p.parentNode==f){for(e=1;e<=g;e++)s.insertAfter(B(p),p);break}if(-1==k)for(e=1;e<=g;e++)f.insertBefore(B(f.cells[0]),f.cells[0])}}function x(){a(c,function(b,c){a(b,function(b,a){var C,f,g;if(r(b)&&(b=b.elm,C=m(b,"colspan"),f=m(b,"rowspan"),1<C||1<f)){d(b,"rowSpan",1);d(b,"colSpan",1);for(g=0;g<C-1;g++)s.insertAfter(B(b),b);q(a,c,f-1,C)}})})}function h(b){var d;a(c,function(c,f){a(c,function(c,a){if(c.elm==b)return d={x:a,
y:f},!1});return!d});return d}function n(){var b,d;b=d=0;a(c,function(f,g){a(f,function(a,f){var k,h;r(a)&&(a=c[g][f],f>b&&(b=f),g>d&&(d=g),a.real&&(k=a.colspan-1,h=a.rowspan-1,k&&f+k>b&&(b=f+k),h&&g+h>d&&(d=g+h)))})});return{x:b,y:d}}var c,g,p,b,f,k=e.selection,s=k.dom;w=w||s.getParent(k.getStart(),"table");u();if(f=s.getParent(k.getStart(),"th,td"))p=h(f),b=n(),f=y(p.x,p.y);t.extend(this,{deleteTable:function(){var b=s.createRng();b.setStartAfter(w);b.setEndAfter(w);k.setRng(b);s.remove(w)},split:x,
merge:function(f,g,k){var e,n,E,m,l,q,B;f?(e=h(f),n=e.x,E=e.y,e=n+(g-1),m=E+(k-1)):(p=b=null,a(c,function(c,d){a(c,function(c,a){r(c)&&(p||(p={x:a,y:d}),b={x:a,y:d})})}),p&&(n=p.x,E=p.y,e=b.x,m=b.y));l=y(n,E);f=y(e,m);if(l&&f&&l.part==f.part){x();u();l=y(n,E).elm;d(l,"colSpan",e-n+1);d(l,"rowSpan",m-E+1);for(k=E;k<=m;k++)for(g=n;g<=e;g++)c[k]&&c[k][g]&&(f=c[k][g].elm,f!=l&&(q=t.grep(f.childNodes),a(q,function(b){l.appendChild(b)}),q.length&&(q=t.grep(l.childNodes),B=0,a(q,function(b){"BR"==b.nodeName&&
s.getAttrib(b,"data-mce-bogus")&&B++<q.length-1&&l.removeChild(b)})),s.remove(f)));A()}},insertRow:function(b){var f,g,k,h,e,p,x,n;a(c,function(c,d){a(c,function(c){if(r(c)&&(c=c.elm,e=c.parentNode,p=v(e,!1),f=d,b))return!1});if(b)return!f});if(f!==G){for(h=0;h<c[0].length;h++)if(c[f][h]&&(g=c[f][h].elm,g!=k)){if(!b){if(n=m(g,"rowspan"),1<n){d(g,"rowSpan",n+1);continue}}else if(0<f&&c[f-1][h]&&(x=c[f-1][h].elm,n=m(x,"rowSpan"),1<n)){d(x,"rowSpan",n+1);continue}k=B(g);d(k,"colSpan",g.colSpan);p.appendChild(k);
k=g}p.hasChildNodes()&&(b?e.parentNode.insertBefore(p,e):s.insertAfter(p,e))}},insertCol:function(b){var f,g;a(c,function(c){a(c,function(c,a){if(r(c)&&(f=a,b))return!1});if(b)return!f});a(c,function(c,a){var k,h,e;c[f]&&(k=c[f].elm,k!=g&&(e=m(k,"colspan"),h=m(k,"rowspan"),1==e?(b?k.parentNode.insertBefore(B(k),k):s.insertAfter(B(k),k),q(f,a,h-1,e)):d(k,"colSpan",k.colSpan+1),g=k))})},deleteCols:function(){var b=[];a(c,function(f){a(f,function(f,g){r(f)&&-1===t.inArray(b,g)&&(a(c,function(b){b=b[g].elm;
var c;c=m(b,"colSpan");1<c?d(b,"colSpan",c-1):s.remove(b)}),b.push(g))})});A()},deleteRows:function(){function b(f){var g,k;a(f.cells,function(b){var c=m(b,"rowSpan");1<c&&(d(b,"rowSpan",c-1),g=h(b),q(g.x,g.y,1,1))});g=h(f.cells[0]);a(c[g.y],function(b){var c;b=b.elm;b!=k&&(c=m(b,"rowSpan"),1>=c?s.remove(b):d(b,"rowSpan",c-1),k=b)})}var f;f=l();a(f.reverse(),function(c){b(c)});A()},cutRows:function(){var b=l();s.remove(b);A();return b},copyRows:function(){var b=l();a(b,function(c,f){b[f]=v(c,!0)});
return b},pasteRows:function(b,f){var g=l(),k=g[f?0:g.length-1],h=k.cells.length;b&&(a(c,function(b){var c;h=0;a(b,function(b){b.real&&(h+=b.colspan);b.elm.parentNode==k&&(c=1)});if(c)return!1}),f||b.reverse(),a(b,function(b){var c,a=b.cells.length,g;for(c=0;c<a;c++)g=b.cells[c],d(g,"colSpan",1),d(g,"rowSpan",1);for(c=a;c<h;c++)b.appendChild(B(b.cells[a-1]));for(c=h;c<a;c++)s.remove(b.cells[c]);f?k.parentNode.insertBefore(b,k):s.insertAfter(b,k)}),s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),
"mce-item-selected"))},getPos:h,setStartCell:function(b){p=h(b)},setEndCell:function(f){var a,g,d,k,e,n,x,r,l;b=h(f);if(p&&b){a=Math.min(p.x,b.x);g=Math.min(p.y,b.y);d=Math.max(p.x,b.x);k=Math.max(p.y,b.y);e=d;n=k;for(l=g;l<=n;l++)f=c[l][a],f.real||a-(f.colspan-1)<a&&(a-=f.colspan-1);for(r=a;r<=e;r++)f=c[g][r],f.real||g-(f.rowspan-1)<g&&(g-=f.rowspan-1);for(l=g;l<=k;l++)for(r=a;r<=d;r++)f=c[l][r],f.real&&(x=f.colspan-1,f=f.rowspan-1,x&&r+x>e&&(e=r+x),f&&l+f>n&&(n=l+f));s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),
"mce-item-selected");for(l=g;l<=n;l++)for(r=a;r<=e;r++)c[l][r]&&s.addClass(c[l][r].elm,"mce-item-selected")}},moveRelIdx:function(b,c){var f,a;f=h(b);f=f.y*g+f.x;do{f+=c;a=y(f%g,Math.floor(f/g));if(!a)break;if(a.elm!=b)return k.select(a.elm,!0),s.isEmpty(a.elm)&&k.collapse(!0),!0}while(a.elm==b);return!1},refresh:u})}});F("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(t,z,m){var a=m.each;return function(e){function m(){function d(d){function l(c,a){var h=
c?"previousSibling":"nextSibling",b=e.dom.getParent(a,"tr"),f=b[h];if(f)return x(e,a,f,c),d.preventDefault(),!0;var f=e.dom.getParent(b,"table"),k=b.parentNode,s=k.nodeName.toLowerCase();if("tbody"===s||s===(c?"tfoot":"thead")){var s=e.dom.select(">tbody",f),n=s.indexOf(k);c&&0===n||!c&&n===s.length-1?(k=e.dom.select(">"+(c?"thead":"tfoot"),f),k=0!==k.length?k[0]:null):-1===n?(k="thead"===k.tagName.toLowerCase()?0:s.length-1,k=s[k]):k=s[n+(c?-1:1)];if(null!==k)return(b=m(k,c))&&x(e,a,b,c),d.preventDefault(),
!0}(h=f[h])?(e.selection.setCursorLocation(h,0),b=!0):(h=e.dom.getParent(f,"td,th"))?b=l(c,h,d):(b=m(b,!c),e.selection.setCursorLocation(b,0),d.preventDefault(),b=!1);return b}function m(c,a){var d=c&&c[a?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?e.dom.getParent(d,"td,th"):d}function A(c){var a=c.selection.getNode();return null!==c.dom.getParent(a,"tr")}function q(c,d){var h=0,b=0;a(c.children,function(c,a){h+=parseInt(c.getAttribute("colspan")||1,10);b=a;if(h>d)return!1});return b}function x(c,
a,d,b){c=0;for(a=e.dom.getParent(a,"td,th");a.previousSibling;)a=a.previousSibling,c+=parseInt(a.getAttribute("colspan")||1,10);a=q(d,c);d=d.childNodes[a];b=m(d,b);e.selection.setCursorLocation(b||d,0)}var h=d.keyCode;if((h==t.UP||h==t.DOWN)&&A(e)){var n=e.selection.getNode();setTimeout(function(){var c=e.selection.getNode(),c=e.dom.getParent(c,"td,th"),a=e.dom.getParent(n,"td,th");c&&c!==a&&e.dom.getParent(c,"TABLE")===e.dom.getParent(a,"TABLE")&&l(!d.shiftKey&&h===t.UP,n,d)},0)}}e.on("KeyDown",
function(a){d(a)})}function u(){e.on("KeyDown",function(a){var r,l,m=e.dom;if(37==a.keyCode||38==a.keyCode)if(r=e.selection.getRng(),(l=m.getParent(r.startContainer,"table"))&&e.getBody().firstChild==l){var A=r,q=l.ownerDocument;r=q.createRange();r.setStartBefore(l);r.setEnd(A.endContainer,A.endOffset);A=q.createElement("body");A.appendChild(r.cloneContents());0===A.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(r=m.createRng(),r.setStartBefore(l),
r.setEndBefore(l),e.selection.setRng(r),a.preventDefault())}})}function v(){e.on("KeyDown SetContent VisualAid",function(){var a;for(a=e.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(0<a.nodeValue.length)break}else if(1==a.nodeType&&("BR"==a.tagName||!a.getAttribute("data-mce-bogus")))break;a&&"TABLE"==a.nodeName&&(e.settings.forced_root_block?e.dom.add(e.getBody(),e.settings.forced_root_block,e.settings.forced_root_block_attrs,z.ie&&11>z.ie?"&nbsp;":'<br data-mce-bogus="1" />'):
e.dom.add(e.getBody(),"br",{"data-mce-bogus":"1"}))});e.on("PreProcess",function(a){(a=a.node.lastChild)&&("BR"==a.nodeName||1==a.childNodes.length&&("BR"==a.firstChild.nodeName||"\u00a0"==a.firstChild.nodeValue))&&a.previousSibling&&"TABLE"==a.previousSibling.nodeName&&e.dom.remove(a)})}function y(){function a(){var d=e.selection.getRng(),l=e.selection.getNode(),m=e.dom.getParent(d.startContainer,"TD,TH"),A=m,q=e.dom.getParent(d.startContainer,"TABLE"),x;q&&(x=q.parentNode);q=3==d.startContainer.nodeType&&
0===d.startOffset&&0===d.endOffset&&A&&("TR"==l.nodeName||l==x);A=("TD"==l.nodeName||"TH"==l.nodeName)&&!A;if(q||A){m||(m=l);for(l=m.lastChild;l.lastChild;)l=l.lastChild;3==l.nodeType&&(d.setEnd(l,l.data.length),e.selection.setRng(d))}}e.on("KeyDown",function(){a()});e.on("MouseDown",function(e){2!=e.button&&a()})}(function(){e.on("keydown",function(a){if((a.keyCode==t.DELETE||a.keyCode==t.BACKSPACE)&&!a.isDefaultPrevented()){var m=e.dom.getParent(e.selection.getStart(),"table");if(m){for(var m=e.dom.select("td,th",
m),l=m.length;l--;)if(!e.dom.hasClass(m[l],"mce-item-selected"))return;a.preventDefault();e.execCommand("mceTableDelete")}}})})();z.webkit&&(m(),y());z.gecko&&(u(),v());10<z.ie&&(u(),v())}});F("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(t,z,m){return function(a){function e(d){a.getBody().style.webkitUserSelect="";if(d||r)a.dom.removeClass(a.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),
r=!1}function w(e){var m,q=e.target;if(!l&&y&&(v||q!=y)&&("TD"==q.nodeName||"TH"==q.nodeName)){m=u.getParent(q,"table");m==d&&(v||(v=new t(a,m),v.setStartCell(y),a.getBody().style.webkitUserSelect="none"),v.setEndCell(q),r=!0);m=a.selection.getSel();try{m.removeAllRanges?m.removeAllRanges():m.empty()}catch(x){}e.preventDefault()}}var u=a.dom,v,y,d,r=!0,l;a.on("MouseDown",function(a){2==a.button||l||(e(),y=u.getParent(a.target,"td,th"),d=u.getParent(y,"table"))});a.on("mouseover",w);a.on("remove",
function(){u.unbind(a.getDoc(),"mouseover",w)});a.on("MouseUp",function(){function e(a,d){var h=new z(a,a);do{if(3==a.nodeType&&0!==m.trim(a.nodeValue).length){d?l.setStart(a,0):l.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){d?l.setStartBefore(a):l.setEndBefore(a);break}}while(a=d?h.next():h.prev())}var l,r=a.selection,x,h,n;if(y){v&&(a.getBody().style.webkitUserSelect="");x=u.select("td.mce-item-selected,th.mce-item-selected");if(0<x.length){l=u.createRng();h=x[0];l.setStartBefore(h);
l.setEndAfter(h);e(h,1);x=new z(h,u.getParent(x[0],"table"));do if("TD"==h.nodeName||"TH"==h.nodeName){if(!u.hasClass(h,"mce-item-selected"))break;n=h}while(h=x.next());e(n);r.setRng(l)}a.nodeChanged();y=v=d=null}});a.on("KeyUp Drop SetContent",function(a){e("setcontent"==a.type);y=v=d=null;l=!1});a.on("ObjectResizeStart ObjectResized",function(a){l="objectresized"!=a.type});return{clear:e}}});F("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(t,z){var m=t.each;return function(a){function e(){var d=
a.settings.color_picker_callback;if(d)return function(){var h=this;d.call(a,function(a){h.value(a).fire("change")},h.value())}}function w(a){return{title:"Advanced",type:"form",defaults:{onchange:function(){l(a,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",
type:"colorbox",name:"backgroundColor",onaction:e()}]}]}}function u(a){return a?a.replace(/px$/,""):""}function v(a){/^[0-9]+$/.test(a)&&(a+="px");return a}function y(d){m(["left","center","right"],function(h){a.formatter.remove("align"+h,{},d)})}function d(d){m(["top","middle","bottom"],function(h){a.formatter.remove("valign"+h,{},d)})}function r(a,d,e){function c(a,e){e=e||[];t.each(a,function(b){var a={text:b.text||b.title};b.menu?a.menu=c(b.menu):(a.value=b.value,d&&d(a));e.push(a)});return e}
return c(a,e||[])}function l(a,d,e){var c=d.toJSON(),g=a.parseStyle(c.style);e?(d.find("#borderColor").value(g["border-color"]||"")[0].fire("change"),d.find("#backgroundColor").value(g["background-color"]||"")[0].fire("change")):(g["border-color"]=c.borderColor,g["background-color"]=c.backgroundColor);d.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(g))))}function B(a,d,e){e=a.parseStyle(a.getAttrib(e,"style"));e["border-color"]&&(d.borderColor=e["border-color"]);e["background-color"]&&
(d.backgroundColor=e["background-color"]);d.style=a.serializeStyle(e)}function A(a,d,e){var c=a.parseStyle(a.getAttrib(d,"style"));m(e,function(a){c[a.name]=a.value});a.setAttrib(d,"style",a.serializeStyle(a.parseStyle(a.serializeStyle(c))))}var q=this;q.tableProps=function(){q.table(!0)};q.table=function(d){function e(){function b(a,f,d){if("TD"===a.tagName||"TH"===a.tagName)c.setStyle(a,f,d);else if(a.children)for(var k=0;k<a.children.length;k++)b(a.children[k],f,d)}var d;l(c,this);f=t.extend(f,
this.toJSON());!1===f["class"]&&delete f["class"];a.undoManager.transact(function(){g||(g=a.plugins.table.insertTable(f.cols||1,f.rows||1));a.dom.setAttribs(g,{style:f.style,"class":f["class"]});if(a.settings.table_style_by_css){if(k=[],k.push({name:"border",value:f.border}),k.push({name:"border-spacing",value:v(f.cellspacing)}),A(c,g,k),c.setAttribs(g,{"data-mce-border-color":f.borderColor,"data-mce-cell-padding":f.cellpadding,"data-mce-border":f.border}),g.children)for(var e=0;e<g.children.length;e++)b(g.children[e],
"border",f.border),b(g.children[e],"padding",v(f.cellpadding))}else a.dom.setAttribs(g,{border:f.border,cellpadding:f.cellpadding,cellspacing:f.cellspacing});c.getAttrib(g,"width")&&!a.settings.table_style_by_css?c.setAttrib(g,"width",u(f.width)):c.setStyle(g,"width",v(f.width));c.setStyle(g,"height",v(f.height));(d=c.select("caption",g)[0])&&!f.caption&&c.remove(d);!d&&f.caption&&(d=c.create("caption"),d.innerHTML=z.ie?"\u00a0":'<br data-mce-bogus="1"/>',g.insertBefore(d,g.firstChild));y(g);f.align&&
a.formatter.apply("align"+f.align,{},g);a.focus();a.addVisual()})}function n(b,f){var d=a.dom.select("td,th",b),k;a:for(var e=0;e<d.length;e++){var g=c.getStyle(d[e],f);"undefined"===typeof k&&(k=g);if(k!=g){k="";break a}}return k}var c=a.dom,g,p,b,f={},k;if(!0===d){if(g=c.getParent(a.selection.getStart(),"table"))f={width:u(c.getStyle(g,"width")||c.getAttrib(g,"width")),height:u(c.getStyle(g,"height")||c.getAttrib(g,"height")),cellspacing:u(c.getStyle(g,"border-spacing")||c.getAttrib(g,"cellspacing")),
cellpadding:c.getAttrib(g,"data-mce-cell-padding")||c.getAttrib(g,"cellpadding")||n(g,"padding"),border:c.getAttrib(g,"data-mce-border")||c.getAttrib(g,"border")||n(g,"border"),borderColor:c.getAttrib(g,"data-mce-border-color"),caption:!!c.select("caption",g)[0],"class":c.getAttrib(g,"class")},m(["left","center","right"],function(b){a.formatter.matchNode(g,"align"+b)&&(f.align=b)})}else p={label:"Cols",name:"cols"},b={label:"Rows",name:"rows"};a.settings.table_class_list?(f["class"]&&(f["class"]=
f["class"].replace(/\s*mce\-item\-table\s*/g,"")),d={name:"class",type:"listbox",label:"Class",values:r(a.settings.table_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[b.value]})})})}):d={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},
items:!1!==a.settings.table_appearance_options?[p,b,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[p,b,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",
value:"right"}]},d]};!1!==a.settings.table_advtab?(B(c,f,g),a.windowManager.open({title:"Table properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},w(c)],onsubmit:e})):a.windowManager.open({title:"Table properties",data:f,body:p,onsubmit:e})};q.merge=function(d,e){a.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var l=this.toJSON();
a.undoManager.transact(function(){d.merge(e,l.cols,l.rows)})}})};q.cell=function(){function e(){l(h,this);c=t.extend(c,this.toJSON());a.undoManager.transact(function(){m(p,function(b){a.dom.setAttribs(b,{scope:c.scope,style:c.style,"class":c["class"]});a.dom.setStyles(b,{width:v(c.width),height:v(c.height)});c.type&&b.nodeName.toLowerCase()!=c.type&&(b=h.rename(b,c.type));y(b);c.align&&a.formatter.apply("align"+c.align,{},b);d(b);c.valign&&a.formatter.apply("valign"+c.valign,{},b)});a.focus()})}var h=
a.dom,n,c,g,p=[],p=a.dom.select("td.mce-item-selected,th.mce-item-selected");n=a.dom.getParent(a.selection.getStart(),"td,th");!p.length&&n&&p.push(n);if(n=n||p[0])c={width:u(h.getStyle(n,"width")||h.getAttrib(n,"width")),height:u(h.getStyle(n,"height")||h.getAttrib(n,"height")),scope:h.getAttrib(n,"scope"),"class":h.getAttrib(n,"class")},c.type=n.nodeName.toLowerCase(),m(["left","center","right"],function(b){a.formatter.matchNode(n,"align"+b)&&(c.align=b)}),m(["top","middle","bottom"],function(b){a.formatter.matchNode(n,
"valign"+b)&&(c.valign=b)}),a.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:r(a.settings.table_cell_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})}),g={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",
name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",
value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]},!1!==a.settings.table_cell_advtab?(B(h,c,n),a.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:c,body:[{title:"General",type:"form",items:g},w(h)],onsubmit:e})):a.windowManager.open({title:"Cell properties",
data:c,body:g,onsubmit:e})};q.row=function(){function d(){var c,g,n;l(e,this);b=t.extend(b,this.toJSON());a.undoManager.transact(function(){var d=b.type;m(f,function(f){a.dom.setAttribs(f,{scope:b.scope,style:b.style,"class":b["class"]});a.dom.setStyles(f,{height:v(b.height)});d!=f.parentNode.nodeName.toLowerCase()&&(c=e.getParent(f,"table"),g=f.parentNode,n=e.select(d,c)[0],n||(n=e.create(d),c.firstChild?c.insertBefore(n,c.firstChild):c.appendChild(n)),n.appendChild(f),g.hasChildNodes()||e.remove(g));
y(f);b.align&&a.formatter.apply("align"+b.align,{},f)});a.focus()})}var e=a.dom,n,c,g,p,b,f=[];n=a.dom.getParent(a.selection.getStart(),"table");c=a.dom.getParent(a.selection.getStart(),"td,th");m(n.rows,function(b){m(b.cells,function(a){if(e.hasClass(a,"mce-item-selected")||a==c)return f.push(b),!1})});if(g=f[0])b={height:u(e.getStyle(g,"height")||e.getAttrib(g,"height")),scope:e.getAttrib(g,"scope"),"class":e.getAttrib(g,"class")},b.type=g.parentNode.nodeName.toLowerCase(),m(["left","center","right"],
function(c){a.formatter.matchNode(g,"align"+c)&&(b.align=c)}),a.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:r(a.settings.table_row_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),n={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",
value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},!1!==a.settings.table_row_advtab?(B(e,b,g),a.windowManager.open({title:"Row properties",data:b,bodyType:"tabpanel",body:[{title:"General",type:"form",items:n},w(e)],onsubmit:d})):a.windowManager.open({title:"Row properties",data:b,body:n,onsubmit:d})}}});F("tinymce/tableplugin/Plugin",
"tinymce/tableplugin/TableGrid tinymce/tableplugin/Quirks tinymce/tableplugin/CellSelection tinymce/tableplugin/Dialogs tinymce/util/Tools tinymce/dom/TreeWalker tinymce/Env tinymce/PluginManager".split(" "),function(t,z,m,a,e,w,u,v){var y=e.each;v.add("table",function(d){function e(b){return function(){d.execCommand(b)}}function l(b,a){var c,e,g,h;g='<table id="__mce"><tbody>';for(c=0;c<a;c++){g+="<tr>";for(e=0;e<b;e++)g+="<td>"+(u.ie?" ":"<br>")+"</td>";g+="</tr>"}g+="</tbody></table>";d.undoManager.transact(function(){d.insertContent(g);
h=d.dom.get("__mce");d.dom.setAttrib(h,"id",null);d.dom.setAttribs(h,d.settings.table_default_attributes||{});d.dom.setStyles(h,d.settings.table_default_styles||{})});return h}function v(b,a){function c(){b.disabled(!d.dom.getParent(d.selection.getStart(),a));d.selection.selectorChanged(a,function(a){b.disabled(!a)})}if(d.initialized)c();else d.on("init",c)}function w(){v(this,"table")}function q(){v(this,"td,th")}function x(){for(var b="",b='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',
a=0;10>a;a++){for(var b=b+"<tr>",c=0;10>c;c++)b+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*a+c)+'" href="#" data-mce-x="'+c+'" data-mce-y="'+a+'"></a></td>';b+="</tr>"}return b+='</table><div class="mce-text-center" role="presentation">1 x 1</div>'}function h(b,a,c){var e=c.getEl().getElementsByTagName("table")[0],g,h,l,m,n=c.isRtl()||"tl-tr"==c.parent().rel;e.nextSibling.innerHTML=b+1+" x "+(a+1);n&&(b=9-b);for(g=0;10>g;g++)for(c=0;10>c;c++)l=e.rows[g].childNodes[c].firstChild,m=(n?
c>=b:c<=b)&&g<=a,d.dom.toggleClass(l,"mce-active",m),m&&(h=l);return h.parentNode}var n,c=this,g=new a(d);!1===d.settings.table_grid?d.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:g.table}):d.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(b){b.aria&&(this.parent().hideAll(),b.stopImmediatePropagation(),g.table())},onshow:function(){h(0,0,this.menu.items()[0])},onhide:function(){var b=this.menu.items()[0].getEl().getElementsByTagName("a");
d.dom.removeClass(b,"mce-active");d.dom.addClass(b[0],"mce-active")},menu:[{type:"container",html:x(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(b){var a=b.target,c;if("A"==a.tagName.toUpperCase()){c=parseInt(a.getAttribute("data-mce-x"),10);a=parseInt(a.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)c=9-c;if(c!==this.lastX||a!==this.lastY)h(c,a,b.control),this.lastX=c,this.lastY=a}},onclick:function(b){var a=this;"A"==b.target.tagName.toUpperCase()&&
(b.preventDefault(),b.stopPropagation(),a.parent().cancel(),d.undoManager.transact(function(){l(a.lastX+1,a.lastY+1)}),d.addVisual())}}]});d.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:w,onclick:g.tableProps});d.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:w,cmd:"mceTableDelete"});d.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:e("mceTableCellProps"),onPostRender:q},{text:"Merge cells",
onclick:e("mceTableMergeCells"),onPostRender:q},{text:"Split cell",onclick:e("mceTableSplitCells"),onPostRender:q}]});d.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:e("mceTableInsertRowBefore"),onPostRender:q},{text:"Insert row after",onclick:e("mceTableInsertRowAfter"),onPostRender:q},{text:"Delete row",onclick:e("mceTableDeleteRow"),onPostRender:q},{text:"Row properties",onclick:e("mceTableRowProps"),onPostRender:q},{text:"-"},{text:"Cut row",onclick:e("mceTableCutRow"),
onPostRender:q},{text:"Copy row",onclick:e("mceTableCopyRow"),onPostRender:q},{text:"Paste row before",onclick:e("mceTablePasteRowBefore"),onPostRender:q},{text:"Paste row after",onclick:e("mceTablePasteRowAfter"),onPostRender:q}]});d.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:e("mceTableInsertColBefore"),onPostRender:q},{text:"Insert column after",onclick:e("mceTableInsertColAfter"),onPostRender:q},{text:"Delete column",onclick:e("mceTableDeleteCol"),
onPostRender:q}]});var p=[];y("inserttable tableprops deletetable | cell row column".split(" "),function(a){"|"==a?p.push({text:"-"}):p.push(d.menuItems[a])});d.addButton("table",{type:"menubutton",title:"Table",menu:p});if(!u.isIE)d.on("click",function(a){a=a.target;"TABLE"===a.nodeName&&(d.selection.select(a),d.nodeChanged())});c.quirks=new z(d);d.on("Init",function(){c.cellSelection=new m(d)});d.on("PreInit",function(){d.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",
function(a,c){for(var d=a.length;d--;)a[d].attr(c,null)})});y({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var c;c=d.dom.getParent(d.selection.getStart(),"th,td");d.dom.select("td.mce-item-selected,th.mce-item-selected").length?a.merge():g.merge(a,c)},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},
mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){n=a.cutRows()},mceTableCopyRow:function(a){n=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(n,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(n)},mceTableDelete:function(a){a.deleteTable()}},function(a,e){d.addCommand(e,function(){var e=new t(d);e&&(a(e),d.execCommand("mceRepaint"),c.cellSelection.clear())})});y({mceInsertTable:g.table,mceTableProps:function(){g.table(!0)},mceTableRowProps:g.row,mceTableCellProps:g.cell},
function(a,c){d.addCommand(c,function(c,d){a(d)})});if(!1!==d.settings.table_tab_navigation)d.on("keydown",function(a){var c,e,g;9==a.keyCode&&(c=d.dom.getParent(d.selection.getStart(),"th,td"))&&(a.preventDefault(),e=new t(d),g=a.shiftKey?-1:1,d.undoManager.transact(function(){!e.moveRelIdx(c,g)&&0<g&&(e.insertRow(),e.refresh(),e.moveRelIdx(c,g))}))});c.insertTable=l})})})(this);

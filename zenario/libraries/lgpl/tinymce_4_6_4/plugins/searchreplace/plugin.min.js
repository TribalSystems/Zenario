(function(){var z={},B=function(g){var c=z[g];if(void 0===c)throw"module ["+g+"] was undefined";if(void 0===c.instance){for(var q=z[g],d=q.deps,x=q.defn,h=d.length,v=Array(h),p=0;p<h;++p)v[p]=B(d[p]);d=x.apply(null,v);if(void 0===d)throw"module ["+g+"] returned undefined";q.instance=d}return c.instance},s=function(g,c,q){if("string"!==typeof g)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+g;if(void 0===q)throw"no definition function for "+g;z[g]={deps:c,defn:q,instance:void 0}};
(function(g,c){s(g,[],function(){return c})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(g){return g("tinymce.PluginManager")});s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(g){return g("tinymce.util.Tools")});s("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function g(c){return c&&1==c.nodeType&&"false"===c.contentEditable}return{findAndReplaceDOMText:function(c,
q,d,x,h){function v(a,b){b=b||0;if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var k=a.index;if(0<b){var r=a[b];if(!r)throw"Invalid capture group";k+=a[0].indexOf(r);a[0]=r}return[k,k+a[0].length,[a[0]]]}function p(a){var t;if(3===a.nodeType)return a.data;if(k[a.nodeName]&&!b[a.nodeName])return"";t="";if(g(a))return"\n";if(b[a.nodeName]||f[a.nodeName])t+="\n";if(a=a.firstChild){do t+=p(a);while(a=a.nextSibling)}return t}function s(a,t,d){var r,c,m,n,A=[],u=0,l=a,h=t.shift(),
p=0;a:for(;;){(b[l.nodeName]||f[l.nodeName]||g(l))&&u++;3===l.nodeType&&(!c&&l.length+u>=h[1]?(c=l,n=h[1]-u):r&&A.push(l),!r&&l.length+u>h[0]&&(r=l,m=h[0]-u),u+=l.length);if(r&&c){if(l=d({startNode:r,startNodeIndex:m,endNode:c,endNodeIndex:n,innerNodes:A,match:h[2],matchIndex:p}),u-=c.length-n,c=r=null,A=[],h=t.shift(),p++,!h)break}else if((!k[l.nodeName]||b[l.nodeName])&&l.firstChild){if(!g(l)){l=l.firstChild;continue}}else if(l.nextSibling){l=l.nextSibling;continue}for(;;)if(l.nextSibling){l=l.nextSibling;
break}else if(l.parentNode!==a)l=l.parentNode;else break a}}function y(b){var k;if("function"!=typeof b){var f=b.nodeType?b:a.createElement(b);k=function(b,k){var e=f.cloneNode(!1);e.setAttribute("data-mce-index",k);b&&e.appendChild(a.createTextNode(b));return e}}else k=b;return function(b){var e,f,c,d=b.startNode,h=b.endNode,l=b.matchIndex;if(d===h)return c=d.parentNode,0<b.startNodeIndex&&(e=a.createTextNode(d.data.substring(0,b.startNodeIndex)),c.insertBefore(e,d)),e=k(b.match[0],l),c.insertBefore(e,
d),b.endNodeIndex<d.length&&(f=a.createTextNode(d.data.substring(b.endNodeIndex)),c.insertBefore(f,d)),d.parentNode.removeChild(d),e;e=a.createTextNode(d.data.substring(0,b.startNodeIndex));f=a.createTextNode(h.data.substring(b.endNodeIndex));var m=k(d.data.substring(b.startNodeIndex),l);c=[];for(var n=0,g=b.innerNodes.length;n<g;++n){var p=b.innerNodes[n],q=k(p.data,l);p.parentNode.replaceChild(q,p);c.push(q)}b=k(h.data.substring(0,b.endNodeIndex),l);c=d.parentNode;c.insertBefore(e,d);c.insertBefore(m,
d);c.removeChild(d);c=h.parentNode;c.insertBefore(b,h);c.insertBefore(f,h);c.removeChild(h);return b}}var w=[],m,n=0,a,b,k,f;a=q.ownerDocument;b=h.getBlockElements();k=h.getWhiteSpaceElements();f=h.getShortEndedElements();if(m=p(q)){if(c.global)for(;h=c.exec(m);)w.push(v(h,x));else h=m.match(c),w.push(v(h,x));w.length&&(n=w.length,s(q,w,y(d)));return n}}}});s("tinymce.plugins.searchreplace.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],
function(g,c,q){g.add("searchreplace",function(d){function g(){function a(){e.statusbar.find("#next").disabled(!p(n+1).length);e.statusbar.find("#prev").disabled(!p(n-1).length)}function b(){d.windowManager.alert("Could not find the specified string.",function(){e.find("#find")[0].focus()})}var k={},f;f=c.trim(d.selection.getContent({format:"text"}));var e=d.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){d.focus();m.done()},onSubmit:function(c){var d,f,h;c.preventDefault();
d=e.find("#case").checked();h=e.find("#words").checked();f=e.find("#find").value();f.length?k.text==f&&k.caseState==d&&k.wholeWord==h?0===p(n+1).length?b():(m.next(),a()):((c=m.find(f,d,h))||b(),e.statusbar.items().slice(1).disabled(0===c),a(),k={text:f,caseState:d,wholeWord:h}):(m.done(!1),e.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){e.submit()}},{text:"Replace",disabled:!0,onclick:function(){m.replace(e.find("#replace").value())||(e.statusbar.items().slice(1).disabled(!0),
n=-1,k={})}},{text:"Replace all",disabled:!0,onclick:function(){m.replace(e.find("#replace").value(),!0,!0);e.statusbar.items().slice(1).disabled(!0);k={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){m.prev();a()}},{text:"Next",name:"next",disabled:!0,onclick:function(){m.next();a()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:f},{type:"textbox",name:"replace",size:40,
label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function h(a){a=a.getAttribute("data-mce-index");return"number"==typeof a?""+a:a}function v(a){var b=a.parentNode;a.firstChild&&b.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}function p(a){var b,k=[];b=c.toArray(d.getBody().getElementsByTagName("span"));if(b.length)for(var f=0;f<b.length;f++){var e=h(b[f]);null!==e&&e.length&&e===a.toString()&&
k.push(b[f])}return k}function s(a){var b=n,c=d.dom;!1!==a?b++:b--;c.removeClass(p(n),"mce-match-marker-selected");a=p(b);return a.length?(c.addClass(p(b),"mce-match-marker-selected"),d.selection.scrollIntoView(a[0]),b):-1}function y(a){var b=d.dom,c=a.parentNode;b.remove(a);b.isEmpty(c)&&b.remove(c)}function w(a){a=h(a);return null!==a&&0<a.length}var m=this,n=-1;m.init=function(a){a.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:g,separator:"before",context:"edit"});
a.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:g});a.addCommand("SearchReplace",g);a.shortcuts.add("Meta+F","",g)};m.find=function(a,b,c){a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");a=RegExp(c?"\\b"+a+"\\b":a,b?"g":"gi");c=d.dom.create("span",{"data-mce-bogus":1});c.className="mce-match-marker";b=d.getBody();m.done(!1);if(a=q.findAndReplaceDOMText(a,b,c,!1,d.schema))n=-1,n=s(!0);return a};m.next=function(){var a=s(!0);-1!==a&&(n=a)};m.prev=function(){var a=
s(!1);-1!==a&&(n=a)};m.replace=function(a,b,k){var f,e,g,q,r=n;b=!1!==b;f=d.getBody();e=c.grep(c.toArray(f.getElementsByTagName("span")),w);for(f=0;f<e.length;f++)if(g=h(e[f]),g=q=parseInt(g,10),k||g===n){a.length?(e[f].firstChild.nodeValue=a,v(e[f])):y(e[f]);for(;e[++f];)if(g=parseInt(h(e[f]),10),g===q)y(e[f]);else{f--;break}b&&r--}else q>n&&e[f].setAttribute("data-mce-index",q-1);d.undoManager.add();n=r;b?(a=0<p(r+1).length,m.next()):(a=0<p(r-1).length,m.prev());return!k&&a};m.done=function(a){var b,
k,f,e;k=c.toArray(d.getBody().getElementsByTagName("span"));for(b=0;b<k.length;b++){var g=h(k[b]);null!==g&&g.length&&(g===n.toString()&&(f||(f=k[b].firstChild),e=k[b].firstChild),v(k[b]))}if(f&&e)return b=d.dom.createRng(),b.setStart(f,0),b.setEnd(e,e.data.length),!1!==a&&d.selection.setRng(b),b}});return function(){}});B("tinymce.plugins.searchreplace.Plugin")()})();

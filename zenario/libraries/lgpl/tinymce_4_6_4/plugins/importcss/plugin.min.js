(function(){var g={},q=function(b){var n=g[b];if(void 0===n)throw"module ["+b+"] was undefined";if(void 0===n.instance){for(var f=g[b],d=f.deps,k=f.defn,e=d.length,p=Array(e),l=0;l<e;++l)p[l]=q(d[l]);d=k.apply(null,p);if(void 0===d)throw"module ["+b+"] returned undefined";f.instance=d}return n.instance},d=function(b,d,f){if("string"!==typeof b)throw"module id must be a string";if(void 0===d)throw"no dependencies for "+b;if(void 0===f)throw"no definition function for "+b;g[b]={deps:d,defn:f,instance:void 0}};
(function(b,n){d(b,[],function(){return n})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);d("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(b){return b("tinymce.EditorManager")});d("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(b){return b("tinymce.dom.DOMUtils")});d("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(b){return b("tinymce.Env")});d("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],
function(b){return b("tinymce.PluginManager")});d("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(b){return b("tinymce.util.Tools")});d("tinymce.plugins.importcss.Plugin",["tinymce.core.EditorManager","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.util.Tools"],function(b,d,f,g,k){g.add("importcss",function(e){function g(c){var a=f.cacheSuffix;"string"==typeof c&&(c=c.replace("?"+a,"").replace("&"+a,""));return c}function l(c){var a=
e.settings,d=!1!==a.skin?a.skin||"lightgray":!1;return d?(a=(a=a.skin_url)?e.documentBaseURI.toAbsolute(a):b.baseURL+"/skins/"+d,c===a+"/content"+(e.inline?".inline":"")+".min.css"):!1}function s(c){return"string"==typeof c?function(a){return-1!==a.indexOf(c)}:c instanceof RegExp?function(a){return c.test(a)}:c}function q(c,a){function b(c,e){var r=c.href,t;if((r=g(r))&&a(r,e)&&!l(r)){m(c.imports,function(a){b(a,!0)});try{t=c.cssRules||c.rules}catch(h){}m(t,function(a){a.styleSheet?b(a.styleSheet,
!0):a.selectorText&&m(a.selectorText.split(","),function(a){d.push(k.trim(a))})})}}var d=[],h={};m(e.contentCSS,function(a){h[a]=!0});a||(a=function(a,c){return c||h[a]});try{m(c.styleSheets,function(a){b(a)})}catch(f){}return d}function u(c){var a,b=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(c);if(b){var d=b[1],h=b[2].substr(1).split(".").join(" "),f=k.makeMap("a,img");b[1]?(a={title:c},e.schema.getTextBlockElements()[d]?a.block=d:e.schema.getBlockElements()[d]||f[d.toLowerCase()]?a.selector=
d:a.inline=d):b[2]&&(a={inline:"span",title:c.substr(1),classes:h});!1!==e.settings.importcss_merge_classes?a.classes=h:a.attributes={"class":h};return a}}function w(b,a){return k.grep(b,function(b){return!b.filter||b.filter(a)})}function x(b){return k.map(b,function(a){return k.extend({},a,{original:a,selectors:{},filter:s(a.filter),item:{text:a.title,menu:[]}})})}var v=this,m=k.each;e.on("renderFormatsMenu",function(b){var a=e.settings,f={},g=s(a.importcss_selector_filter),h=b.control,l=x(a.importcss_groups),
p=function(a,b){if(!(null===b||!1!==e.settings.importcss_exclusive?a in f:a in b.selectors)){null===b||!1!==e.settings.importcss_exclusive?f[a]=!0:b.selectors[a]=!0;var c;c=e.settings;if(c=(b&&b.selector_converter?b.selector_converter:c.importcss_selector_converter?c.importcss_selector_converter:u).call(v,a,b)){var g=c.name||d.DOM.uniqueId();e.formatter.register(g,c);return k.extend({},h.settings.itemDefaults,{text:c.title,format:g})}}return null};e.settings.importcss_append||h.items().remove();m(q(b.doc||
e.getDoc(),s(a.importcss_file_filter)),function(a){if(-1===a.indexOf(".mce-")&&(!g||g(a))){var b=w(l,a);0<b.length?k.each(b,function(b){var c=p(a,b);c&&b.item.menu.push(c)}):(b=p(a,null))&&h.add(b)}});m(l,function(a){0<a.item.menu.length&&h.add(a.item)});b.control.renderNew()});v.convertSelectorToFormat=u});return function(){}});q("tinymce.plugins.importcss.Plugin")()})();

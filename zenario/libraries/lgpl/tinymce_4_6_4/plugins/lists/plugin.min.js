(function(){var u={},w=function(a){var b=u[a];if(void 0===b)throw"module ["+a+"] was undefined";if(void 0===b.instance){for(var c=u[a],l=c.deps,e=c.defn,k=l.length,h=Array(k),f=0;f<k;++f)h[f]=w(l[f]);l=e.apply(null,h);if(void 0===l)throw"module ["+a+"] returned undefined";c.instance=l}return b.instance},n=function(a,b,c){if("string"!==typeof a)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+a;if(void 0===c)throw"no definition function for "+a;u[a]={deps:b,defn:c,instance:void 0}};
(function(a,b){n(a,[],function(){return b})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});n("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.VK")});n("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.dom.DOMUtils")});n("tinymce.plugins.lists.core.NodeType",[],function(){var a=function(b){return b&&"BR"===b.nodeName};return{isTextNode:function(b){return b&&3===b.nodeType},isListNode:function(b){return b&&/^(OL|UL|DL)$/.test(b.nodeName)},isListItemNode:function(b){return b&&/^(LI|DT|DD)$/.test(b.nodeName)},isBr:a,isFirstChild:function(b){return b.parentNode.firstChild===b},isLastChild:function(b){return b.parentNode.lastChild===b},isTextBlock:function(b,c){return c&&
!!b.schema.getTextBlockElements()[c.nodeName]},isBogusBr:function(b,c){return a(c)?b.isBlock(c.nextSibling)&&!a(c.previousSibling)?!0:!1:!1},isEmpty:function(b,c,l){var e=b.isEmpty(c);return l&&0<b.select("span[data-mce-type=bookmark]",c).length?!1:e},isChildOfBody:function(b,c){return b.isChildOf(c,b.getRoot())}}});n("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.RangeUtils")});n("tinymce.plugins.lists.core.Range",["tinymce.core.dom.RangeUtils",
"tinymce.plugins.lists.core.NodeType"],function(a,b){var c=function(c,e){var k=a.getNode(c,e);return b.isListItemNode(c)&&b.isTextNode(k)?{container:k,offset:e>=c.childNodes.length?k.data.length:0}:{container:c,offset:e}};return{getNormalizedEndPoint:c,normalizeRange:function(b){var e=b.cloneRange(),k=c(b.startContainer,b.startOffset);e.setStart(k.container,k.offset);b=c(b.endContainer,b.endOffset);e.setEnd(b.container,b.offset);return e}}});n("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils",
"tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(a,b,c){var l=a.DOM;return{createBookmark:function(b){var c={},a=function(f){var m,g,p;g=b[f?"startContainer":"endContainer"];p=b[f?"startOffset":"endOffset"];1===g.nodeType&&(m=l.create("span",{"data-mce-type":"bookmark"}),g.hasChildNodes()?(p=Math.min(p,g.childNodes.length-1),f?g.insertBefore(m,g.childNodes[p]):l.insertAfter(m,g.childNodes[p])):g.appendChild(m),g=m,p=0);c[f?"startContainer":"endContainer"]=g;c[f?"startOffset":
"endOffset"]=p};a(!0);b.collapsed||a();return c},resolveBookmark:function(b){function a(f){var c,g,p;c=p=b[f?"startContainer":"endContainer"];g=b[f?"startOffset":"endOffset"];if(c){if(1===c.nodeType){a:{g=c;for(var k=g.parentNode.firstChild,d=0;k;){if(k===g){g=d;break a}1===k.nodeType&&"bookmark"===k.getAttribute("data-mce-type")||d++;k=k.nextSibling}g=-1}c=c.parentNode;l.remove(p)}b[f?"startContainer":"endContainer"]=c;b[f?"startOffset":"endOffset"]=g}}a(!0);a();var h=l.createRng();h.setStart(b.startContainer,
b.startOffset);b.endContainer&&h.setEnd(b.endContainer,b.endOffset);return c.normalizeRange(h)}}});n("tinymce.plugins.lists.core.Selection",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(a,b){return{getSelectedListItems:function(c){return a.grep(c.selection.getSelectedBlocks(),function(c){return b.isListItemNode(c)})}}});n("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],
function(a,b,c,l){var e=a.DOM,k=function(b,a){var g;if(c.isListNode(b)){for(;g=b.firstChild;)a.appendChild(g);e.remove(b)}},h=function(b){var a,g,p;return"DT"===b.nodeName?(e.rename(b,"DD"),!0):(a=b.previousSibling)&&c.isListNode(a)?(a.appendChild(b),!0):a&&"LI"===a.nodeName&&c.isListNode(a.lastChild)?(a.lastChild.appendChild(b),k(b.lastChild,a.lastChild),!0):(a=b.nextSibling)&&c.isListNode(a)?(a.insertBefore(b,a.firstChild),!0):(a=b.previousSibling)&&"LI"===a.nodeName?(g=e.create(b.parentNode.nodeName),
(p=e.getStyle(b.parentNode,"listStyleType"))&&e.setStyle(g,"listStyleType",p),a.appendChild(g),g.appendChild(b),k(b.lastChild,g),!0):!1};return{indentSelection:function(c){var a=l.getSelectedListItems(c);if(a.length){for(var g=b.createBookmark(c.selection.getRng(!0)),p=0;p<a.length&&(h(a[p])||0!==p);p++);c.selection.setRng(b.resolveBookmark(g));c.nodeChanged();return!0}}}});n("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],
function(a,b,c){var l=a.DOM,e=function(b,a){var f,e=a.parentNode;"LI"===e.nodeName&&e.firstChild===a&&((f=e.previousSibling)&&"LI"===f.nodeName?(f.appendChild(a),c.isEmpty(b,e)&&l.remove(e)):l.setStyle(e,"listStyleType","none"));c.isListNode(e)&&(f=e.previousSibling)&&"LI"===f.nodeName&&f.appendChild(a)};return{normalizeList:e,normalizeLists:function(a,c){b.each(b.grep(a.select("ol,ul",c)),function(b){e(a,b)})}}});n("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});
n("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(a,b){var c=a.DOM;return{createNewTextBlock:function(a,e,k){var h,f,m=c.createFragment(),g,p=a.schema.getBlockElements();a.settings.forced_root_block&&(k=k||a.settings.forced_root_block);k&&(f=c.create(k),f.tagName===a.settings.forced_root_block&&c.setAttribs(f,a.settings.forced_root_block_attrs),m.appendChild(f));if(e)for(;h=e.firstChild;){var r=h.nodeName;g||"SPAN"===r&&"bookmark"===h.getAttribute("data-mce-type")||
(g=!0);p[r]?(m.appendChild(h),f=null):k?(f||(f=c.create(k),m.appendChild(f)),f.appendChild(h)):m.appendChild(h)}a.settings.forced_root_block?g||b.ie&&!(10<b.ie)||f.appendChild(c.create("br",{"data-mce-bogus":"1"})):m.appendChild(c.create("br"));return m}}});n("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(a,b,c,l){var e=a.DOM;return{splitList:function(a,h,f,m){var g,
p,r,d=function(b){l.each(p,function(a){b.parentNode.insertBefore(a,f.parentNode)});e.remove(b)};p=e.select('span[data-mce-type="bookmark"]',h);m=m||c.createNewTextBlock(a,f);g=e.createRng();g.setStartAfter(f);g.setEndAfter(h);g=g.extractContents();for(r=g.firstChild;r;r=r.firstChild)if("LI"===r.nodeName&&a.dom.isEmpty(r)){e.remove(r);break}a.dom.isEmpty(g)||e.insertAfter(g,h);e.insertAfter(m,h);b.isEmpty(a.dom,f.parentNode)&&d(f.parentNode);e.remove(f);b.isEmpty(a.dom,h)&&e.remove(h)}}});n("tinymce.plugins.lists.actions.Outdent",
"tinymce.core.dom.DOMUtils tinymce.plugins.lists.core.Bookmark tinymce.plugins.lists.core.NodeType tinymce.plugins.lists.core.NormalizeLists tinymce.plugins.lists.core.Selection tinymce.plugins.lists.core.SplitList tinymce.plugins.lists.core.TextBlock".split(" "),function(a,b,c,l,e,k,h){var f=a.DOM,m=function(b,a){var e=a.parentNode,d=e.parentNode;if(e===b.getBody())return!0;if("DD"===a.nodeName)return f.rename(a,"DT"),!0;if(c.isFirstChild(a)&&c.isLastChild(a))return"LI"===d.nodeName?(f.insertAfter(a,
d),c.isEmpty(b.dom,d)&&f.remove(d),f.remove(e)):c.isListNode(d)?f.remove(e,!0):(d.insertBefore(h.createNewTextBlock(b,a),e),f.remove(e)),!0;if(c.isFirstChild(a))return"LI"===d.nodeName?(f.insertAfter(a,d),a.appendChild(e),c.isEmpty(b.dom,d)&&f.remove(d)):c.isListNode(d)?d.insertBefore(a,e):(d.insertBefore(h.createNewTextBlock(b,a),e),f.remove(a)),!0;if(c.isLastChild(a))return"LI"===d.nodeName?f.insertAfter(a,d):c.isListNode(d)?f.insertAfter(a,e):(f.insertAfter(h.createNewTextBlock(b,a),e),f.remove(a)),
!0;"LI"===d.nodeName?(e=d,d=h.createNewTextBlock(b,a,"LI")):d=c.isListNode(d)?h.createNewTextBlock(b,a,"LI"):h.createNewTextBlock(b,a);k.splitList(b,e,a,d);l.normalizeLists(b.dom,e.parentNode);return!0};return{outdent:m,outdentSelection:function(a){var c=e.getSelectedListItems(a);if(c.length){var f=b.createBookmark(a.selection.getRng(!0)),d,k,h=a.getBody();for(d=c.length;d--;)for(var q=c[d].parentNode;q&&q!==h;){for(k=c.length;k--;)if(c[k]===q){c.splice(d,1);break}q=q.parentNode}for(d=0;d<c.length&&
(m(a,c[d])||0!==d);d++);a.selection.setRng(b.resolveBookmark(f));a.nodeChanged();return!0}}}});n("tinymce.core.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.BookmarkManager")});n("tinymce.plugins.lists.actions.ToggleList","tinymce.core.dom.BookmarkManager tinymce.core.util.Tools tinymce.plugins.lists.actions.Outdent tinymce.plugins.lists.core.Bookmark tinymce.plugins.lists.core.NodeType tinymce.plugins.lists.core.NormalizeLists tinymce.plugins.lists.core.Selection tinymce.plugins.lists.core.SplitList".split(" "),
function(a,b,c,l,e,k,h,f){var m=function(a,c){b.each(c,function(b,c){a.setAttribute(c,b)})},g=function(a,c,d){m(c,d["list-attributes"]);b.each(a.select("li",c),function(a){m(a,d["list-item-attributes"])})},p=function(a,b,c){a.setStyle(b,"list-style-type",c["list-style-type"]?c["list-style-type"]:null);g(a,b,c)},n=function(a,b,c){var d,f=a.getBody();d=b[c?"startContainer":"endContainer"];b=b[c?"startOffset":"endOffset"];for(1===d.nodeType&&(d=d.childNodes[Math.min(b,d.childNodes.length-1)]||d);d.parentNode!==
f&&!e.isTextBlock(a,d)&&!/^(TD|TH)$/.test(d.parentNode.nodeName);)d=d.parentNode;return d},d=function(c,d){for(var f=[],q=c.getBody(),k=c.dom,g=n(c,d,!0),s=n(c,d,!1),h,l=[];g&&(l.push(g),g!==s);g=g.nextSibling);b.each(l,function(b){if(e.isTextBlock(c,b))f.push(b),h=null;else if(k.isBlock(b)||e.isBr(b))e.isBr(b)&&k.remove(b),h=null;else{var d=b.nextSibling;a.isBookmarkNode(b)&&(e.isTextBlock(c,d)||!d&&b.parentNode===q)?h=null:(h||(h=k.create("p"),b.parentNode.insertBefore(h,b),f.push(h)),h.appendChild(b))}});
return f},v=function(a,c,f){var q=a.selection.getRng(!0),g,k="LI",h=a.dom;f=f?f:{};"false"!==h.getContentEditable(a.selection.getNode())&&(c=c.toUpperCase(),"DL"===c&&(k="DT"),g=l.createBookmark(q),b.each(d(a,q),function(b){var d,q;if(d=q=b.previousSibling)if(d=e.isListNode(q))if(d=q.nodeName===c){d=h.getStyle(q,"list-style-type");var g=f?f["list-style-type"]:"";d=d===(null===g?"":g)}d?(d=q,b=h.rename(b,k),q.appendChild(b)):(d=h.create(c),b.parentNode.insertBefore(d,b),d.appendChild(b),h.rename(b,
k));p(h,d,f);s(a.dom,d)}),a.selection.setRng(l.resolveBookmark(g)))},t=function(a){var d=l.createBookmark(a.selection.getRng(!0)),q=a.getBody(),g=h.getSelectedListItems(a),s=b.grep(g,function(b){return a.dom.isEmpty(b)}),g=b.grep(g,function(b){return!a.dom.isEmpty(b)});b.each(s,function(b){e.isEmpty(a.dom,b)&&c.outdent(a,b)});b.each(g,function(b){var c,d;if(b.parentNode!==a.getBody()){for(c=b;c&&c!==q;c=c.parentNode)e.isListNode(c)&&(d=c);f.splitList(a,d,b);k.normalizeLists(a.dom,d.parentNode)}});
a.selection.setRng(l.resolveBookmark(d))},q=function(b,a,c){a=b.getStyle(a,"list-style-type",!0);b=b.getStyle(c,"list-style-type",!0);return a===b},s=function(b,a){var c,d;c=a.nextSibling;if(a&&c&&e.isListNode(a)&&a.nodeName===c.nodeName&&q(b,a,c)&&a.className===c.className){for(;d=c.firstChild;)a.appendChild(d);b.remove(c)}c=a.previousSibling;if(a&&c&&e.isListNode(a)&&a.nodeName===c.nodeName&&q(b,a,c)&&a.className===c.className){for(;d=c.lastChild;)a.insertBefore(d,a.firstChild);b.remove(c)}};return{toggleList:function(a,
b,c){var d=a.dom.getParent(a.selection.getStart(),"OL,UL,DL");c=c?c:{};if(d!==a.getBody())if(d)if(d.nodeName===b)t(a,b);else{var q=l.createBookmark(a.selection.getRng(!0));p(a.dom,d,c);s(a.dom,a.dom.rename(d,b));a.selection.setRng(l.resolveBookmark(q))}else v(a,b,c)},removeList:t,mergeWithAdjacentLists:s}});n("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.TreeWalker")});n("tinymce.plugins.lists.core.Delete","tinymce.core.dom.RangeUtils tinymce.core.dom.TreeWalker tinymce.core.util.VK tinymce.plugins.lists.actions.ToggleList tinymce.plugins.lists.core.Bookmark tinymce.plugins.lists.core.NodeType tinymce.plugins.lists.core.NormalizeLists tinymce.plugins.lists.core.Range tinymce.plugins.lists.core.Selection".split(" "),
function(a,b,c,l,e,k,h,f,m){var g=function(c,d,f){var e=d.startContainer,g=d.startOffset;if(3===e.nodeType&&(f?g<e.data.length:0<g))return e;d=c.schema.getNonEmptyElements();1===e.nodeType&&(e=a.getNode(e,g));g=new b(e,c.getBody());for(f&&k.isBogusBr(c.dom,e)&&g.next();e=g[f?"next":"prev2"]();)if("LI"===e.nodeName&&!e.hasChildNodes()||d[e.nodeName]||3===e.nodeType&&0<e.data.length)return e},p=function(a,b,c){var d,e,f=b.parentNode;if(k.isChildOfBody(a,b)&&k.isChildOfBody(a,c)){k.isListNode(c.lastChild)&&
(e=c.lastChild);f===c.lastChild&&k.isBr(f.previousSibling)&&a.remove(f.previousSibling);(d=c.lastChild)&&k.isBr(d)&&b.hasChildNodes()&&a.remove(d);k.isEmpty(a,c,!0)&&a.$(c).empty();if(!k.isEmpty(a,b,!0))for(;d=b.firstChild;)c.appendChild(d);e&&c.appendChild(e);a.remove(b);k.isEmpty(a,f)&&f!==a.getRoot()&&a.remove(f)}},n=function(a,b){var c=a.dom,d=a.selection,h=c.getParent(d.getStart(),"LI"),m,n;if(h){m=h.parentNode;if(m===a.getBody()&&k.isEmpty(c,m))return!0;n=f.normalizeRange(d.getRng(!0));if((d=
c.getParent(g(a,n,b),"LI"))&&d!==h)return m=e.createBookmark(n),b?p(c,d,h):p(c,h,d),a.selection.setRng(e.resolveBookmark(m)),!0;if(!d&&!b&&l.removeList(a,m.nodeName))return!0}return!1},d=function(a,b){var c=a.dom,d=c.getParent(a.selection.getStart(),c.isBlock);if(d&&c.isEmpty(d)){var e=f.normalizeRange(a.selection.getRng(!0)),h=c.getParent(g(a,e,b),"LI");if(h)return a.undoManager.transact(function(){c.remove(d);l.mergeWithAdjacentLists(c,h.parentNode);a.selection.select(h,!0);a.selection.collapse(b)}),
!0}return!1},v=function(a){return a.dom.getParent(a.selection.getStart(),"LI,DT,DD")||0<m.getSelectedListItems(a).length?(a.undoManager.transact(function(){a.execCommand("Delete");h.normalizeLists(a.dom,a.getBody())}),!0):!1},t=function(a,b){return a.selection.isCollapsed()?n(a,b)||d(a,b):v(a)};return{setup:function(a){a.on("keydown",function(b){b.keyCode===c.BACKSPACE?t(a,!1)&&b.preventDefault():b.keyCode===c.DELETE&&t(a,!0)&&b.preventDefault()})},backspaceDelete:t}});n("tinymce.plugins.lists.Plugin",
"tinymce.core.PluginManager tinymce.core.util.Tools tinymce.core.util.VK tinymce.plugins.lists.actions.Indent tinymce.plugins.lists.actions.Outdent tinymce.plugins.lists.actions.ToggleList tinymce.plugins.lists.core.Delete tinymce.plugins.lists.core.NodeType".split(" "),function(a,b,c,l,e,k,h,f){var m=function(a,b){return function(){var c=a.dom.getParent(a.selection.getStart(),"UL,OL,DL");return c&&c.nodeName===b}},g=function(a){a.on("BeforeExecCommand",function(b){var c=b.command.toLowerCase(),f;
"indent"===c?l.indentSelection(a)&&(f=!0):"outdent"===c&&e.outdentSelection(a)&&(f=!0);if(f)return a.fire("ExecCommand",{command:b.command}),b.preventDefault(),!0});a.addCommand("InsertUnorderedList",function(b,c){k.toggleList(a,"UL",c)});a.addCommand("InsertOrderedList",function(b,c){k.toggleList(a,"OL",c)});a.addCommand("InsertDefinitionList",function(b,c){k.toggleList(a,"DL",c)})},p=function(a){a.on("keydown",function(b){9===b.keyCode&&!c.metaKeyPressed(b)&&a.dom.getParent(a.selection.getStart(),
"LI,DT,DD")&&(b.preventDefault(),b.shiftKey?e.outdentSelection(a):l.indentSelection(a))})},n=function(a){var c=function(c){return function(){var e=this;a.on("NodeChange",function(a){a=b.grep(a.parents,f.isListNode);e.active(0<a.length&&a[0].nodeName===c)})}};-1===b.inArray((a.settings.plugins?a.settings.plugins:"").split(/[ ,]/),"advlist")&&(a.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:c("OL")}),a.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",
onPostRender:c("UL")}));a.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(b){var c=b.control;a.on("nodechange",function(){for(var b=a.selection.getSelectedBlocks(),e=!1,g=0,h=b.length;!e&&g<h;g++)e=b[g].nodeName,e="LI"===e&&f.isFirstChild(b[g])||"UL"===e||"OL"===e||"DD"===e;c.disabled(e)})}})};a.add("lists",function(a){n(a);h.setup(a);a.on("init",function(){g(a);a.addQueryStateHandler("InsertUnorderedList",m(a,"UL"));a.addQueryStateHandler("InsertOrderedList",
m(a,"OL"));a.addQueryStateHandler("InsertDefinitionList",m(a,"DL"));a.getParam("lists_indent_on_tab",!0)&&p(a)});return{backspaceDelete:function(b){h.backspaceDelete(a,b)}}});return function(){}});w("tinymce.plugins.lists.Plugin")()})();

(function(){var S={},W=function(c){var w=S[c];if(void 0===w)throw"module ["+c+"] was undefined";if(void 0===w.instance){for(var m=S[c],a=m.deps,l=m.defn,y=a.length,v=Array(y),b=0;b<y;++b)v[b]=W(a[b]);a=l.apply(null,v);if(void 0===a)throw"module ["+c+"] returned undefined";m.instance=a}return w.instance},E=function(c,w,m){if("string"!==typeof c)throw"module id must be a string";if(void 0===w)throw"no dependencies for "+c;if(void 0===m)throw"no definition function for "+c;S[c]={deps:w,defn:m,instance:void 0}};
(function(c,w){E(c,[],function(){return w})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);E("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.dom.TreeWalker")});E("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.Env")});E("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.PluginManager")});E("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],
function(c){return c("tinymce.util.Tools")});E("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.util.VK")});E("tinymce.plugins.table.util.Utils",["tinymce.core.Env"],function(c){var w=function(a){return function(c,m){c&&(m=parseInt(m,10),1===m||0===m?c.removeAttribute(a,1):c.setAttribute(a,m,1))}},m=function(a){return function(c){return parseInt(c.getAttribute(a)||1,10)}};return{setColSpan:w("colSpan"),setRowSpan:w("rowspan"),getColSpan:m("colSpan"),getRowSpan:m("rowSpan"),
setSpanVal:function(a,c,m){w(c)(a,m)},getSpanVal:function(a,c){return m(c)(a)},paddCell:function(a){c.ie&&!(9<c.ie)||a.hasChildNodes()||(a.innerHTML='<br data-mce-bogus="1" />')}}});E("tinymce.plugins.table.model.SplitCols",["tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(c,w){var m=function(a,b,c){return(a=a[c]?a[c][b]:null)?a.elm:null},a=function(a,b,c,d){for(var p,q=0,x=m(a,b,c);0<d?c<a.length:0<=c;c+=d){p=a[c]?a[c][b]:null;if(x!==p.elm)break;q++}return q},l=function(a,b,
c){a=a[c];for(c=b;c<a.length;c++)if(b=a[c],b.real)return b.elm;return null},y=function(b,c){for(var m,d=[],p=b[c],q=0;q<p.length;q++)m=p[q],d.push({elm:m.elm,above:a(b,q,c,-1)-1,below:a(b,q,c,1)-1}),q+=w.getColSpan(m.elm)-1;return d},v=function(a,b){var c=a.elm.ownerDocument.createElement("td");w.setColSpan(c,w.getColSpan(a.elm));w.setRowSpan(c,b);w.paddCell(c);return c},b=function(a,b,c,d){(c=l(a,c+1,d))?c.parentNode.insertBefore(b,c):(c=l(a,0,d),c.parentNode.appendChild(b))};return{splitAt:function(a,
l,z,d){var p=y(a,z);l=m(a,l,z).parentNode;var q=[];c.each(p,function(c,n){var g;d?0!==c.above?(w.setRowSpan(c.elm,c.above),g=v(c,c.below+1),b(a,g,n,z)):g=null:0!==c.below?(w.setRowSpan(c.elm,c.above+1),g=v(c,c.below),b(a,g,n,z+1)):g=null;null!==g&&q.push(q)});return{cells:q,row:l}}}});E("tinymce.plugins.table.model.TableGrid",["tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.table.util.Utils","tinymce.plugins.table.model.SplitCols"],function(c,w,m,a){var l=c.each,y=m.getSpanVal,v=m.setSpanVal;
return function(b,r,B){function z(){b.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function d(a,b){if(!a)return[];b=c.map(b.split(","),function(a){return a.toLowerCase()});return c.grep(a.childNodes,function(a){return-1!==c.inArray(b,a.nodeName.toLowerCase())})}function p(){var a=0;t=[];I=0;l(["thead","tbody","tfoot"],function(c){var b=d(r,c)[0],b=d(b,"tr");l(b,function(b,h){h+=a;l(d(b,"td,th"),function(a,b){var N,e,k,d;if(t[h])for(;t[h][b];)b++;k=y(a,"rowspan");
d=y(a,"colspan");for(e=h;e<h+k;e++)for(t[e]||(t[e]=[]),N=b;N<b+d;N++)t[e][N]={part:c,real:e==h&&N==b,elm:a,rowspan:k,colspan:d};I=Math.max(I,b+1)})});a+=b.length})}function q(a){b.fire("newrow",{node:a});return a}function x(a){b.fire("newcell",{node:a});return a}function n(a,b){a=a.cloneNode(b);a.removeAttribute("id");return a}function g(a,b){var c;if(c=t[b])return c[a]}function G(a,b){for(var c=[],h=0;h<a.length;h++)c.push(g(b,h));return c}function k(a){return a&&(!!A.getAttrib(a.elm,"data-mce-selected")||
a==B)}function f(){var a=[];l(r.rows,function(b){l(b.cells,function(c){if(A.getAttrib(c,"data-mce-selected")||B&&c==B.elm)return a.push(b),!1})});return a}function J(){var a=0;l(t,function(b){l(b,function(b){k(b)&&a++});if(a)return!1});return a}function s(a){var h,e={};!1!==b.settings.table_clone_elements&&(e=c.makeMap((b.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));c.walk(a,function(b){var c;if(3==b.nodeType)return l(A.getParents(b.parentNode,
null,a).reverse(),function(a){e[a.nodeName]&&(a=n(a,!1),h?c&&c.appendChild(a):h=c=a,c=a)}),c&&(c.innerHTML=w.ie&&10>w.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");a=n(a,!1);x(a);v(a,"rowSpan",1);v(a,"colSpan",1);h?a.appendChild(h):m.paddCell(a);return a}function e(){var a=A.createRng();l(A.select("tr",r),function(a){0===a.cells.length&&A.remove(a)});if(0===A.select("tr",r).length)a.setStartBefore(r),a.setEndBefore(r),K.setRng(a),A.remove(r);else if(l(A.select("thead,tbody,tfoot",r),
function(a){0===a.rows.length&&A.remove(a)}),p(),C&&(a=t[Math.min(t.length-1,C.y)]))K.select(a[Math.min(a.length-1,C.x)].elm,!0),K.collapse(!0)}function D(a,b,c,h){var e,k,d,f,g;e=t[b][a].elm.parentNode;for(d=1;d<=c;d++)if(e=A.getNext(e,"tr")){for(k=a;0<=k;k--)if(g=t[b+d][k].elm,g.parentNode==e){for(f=1;f<=h;f++)A.insertAfter(s(g),g);break}if(-1==k)for(f=1;f<=h;f++)e.insertBefore(s(e.cells[0]),e.cells[0])}}function M(){l(t,function(a,b){l(a,function(a,c){var h,e,d;if(k(a)&&(a=a.elm,h=y(a,"colspan"),
e=y(a,"rowspan"),1<h||1<e)){v(a,"rowSpan",1);v(a,"colSpan",1);for(d=0;d<h-1;d++)A.insertAfter(s(a),a);D(c,b,e-1,h)}})})}function h(a,b,c){for(var h=[],e=0;e<a.length;e++)(e<b||e>c)&&h.push(a[e]);return h}function u(a){return c.grep(a,function(a){return!1===a.real})}function O(a){for(var b=[],c=0;c<a.length;c++){var h=a[c].elm;b[b.length-1]!==h&&b.push(h)}return b}function X(a,b,e,k,d){var f=0;if(1>d-e)return 0;for(e+=1;e<=d;e++){var g=h(a[e]?a[e]:null,b,k),n=u(g);g.length===n.length&&(c.each(O(n),
function(a){m.setRowSpan(a,m.getRowSpan(a)-1)}),f++)}return f}function aa(a,b,e,d,k){var f=0;if(1>d-b)return 0;for(b+=1;b<=d;b++){var g=h(G(a,b),e,k),n=u(g);g.length===n.length&&(c.each(O(n),function(a){m.setColSpan(a,m.getColSpan(a)-1)}),f++)}return f}function T(a){var b,c,e,h,d,f,g,p,u;l(t,function(c,e){l(c,function(c){if(k(c)&&(c=c.elm,d=c.parentNode,f=q(n(d,!1)),b=e,a))return!1});if(a)return void 0===b});if(void 0!==b){for(u=h=0;h<t[0].length;h+=u)if(t[b][h]&&(c=t[b][h].elm,u=y(c,"colspan"),c!=
e)){if(!a){if(p=y(c,"rowspan"),1<p){v(c,"rowSpan",p+1);continue}}else if(0<b&&t[b-1][h]&&(g=t[b-1][h].elm,p=y(g,"rowSpan"),1<p)){v(g,"rowSpan",p+1);continue}e=s(c);v(e,"colSpan",c.colSpan);f.appendChild(e);e=c}f.hasChildNodes()&&(a?d.parentNode.insertBefore(f,d):A.insertAfter(f,d))}}function E(a){var b,c;l(t,function(c){l(c,function(c,e){if(k(c)&&(b=e,a))return!1});if(a)return void 0===b});l(t,function(e,h){var d,k,f;e[b]&&(d=e[b].elm,d!=c&&(f=y(d,"colspan"),k=y(d,"rowspan"),1==f?(a?d.parentNode.insertBefore(s(d),
d):A.insertAfter(s(d),d),D(b,h,k-1,f)):v(d,"colSpan",d.colSpan+1),c=d))})}function U(a){var b=[];l(a,function(a){l(a,function(a){b.push(a)})});return b}function L(a){var b;l(t,function(c,e){l(c,function(c,h){if(c.elm==a)return b={x:h,y:e},!1});return!b});return b}function Y(){var a,b;a=b=0;l(t,function(c,e){l(c,function(c,h){var d,f;k(c)&&(c=t[e][h],h>a&&(a=h),e>b&&(b=e),c.real&&(d=c.colspan-1,f=c.rowspan-1,d&&h+d>a&&(a=h+d),f&&e+f>b&&(b=e+f)))})});return{x:a,y:b}}var t,I,C,F,K=b.selection,A=K.dom;
r=r||A.getParent(K.getStart(!0),"table");p();if(B=B||A.getParent(K.getStart(!0),"th,td"))C=L(B),F=Y(),B=g(C.x,C.y);c.extend(this,{deleteTable:function(){var a=A.createRng();r!==b.getBody()&&(a.setStartAfter(r),a.setEndAfter(r),K.setRng(a),A.remove(r))},split:M,merge:function(a,b,h){var d,f,n,s,u,G,q;a?(d=L(a),f=d.x,n=d.y,d=f+(b-1),s=n+(h-1)):(C=F=null,l(t,function(a,b){l(a,function(a,c){k(a)&&(C||(C={x:c,y:b}),F={x:c,y:b})})}),C&&(f=C.x,n=C.y,d=F.x,s=F.y));u=g(f,n);a=g(d,s);if(u&&a&&u.part==a.part){M();
p();a=X(t,f,n,d,s);b=aa(t,f,n,d,s);u=g(f,n).elm;b=d-f-b+1;a=s-n-a+1;b===I&&a===t.length&&(a=b=1);b===I&&1<a&&(a=1);v(u,"colSpan",b);v(u,"rowSpan",a);for(b=n;b<=s;b++)for(n=f;n<=d;n++)t[b]&&t[b][n]&&(a=t[b][n].elm,a!=u&&(G=c.grep(a.childNodes),l(G,function(a){u.appendChild(a)}),G.length&&(G=c.grep(u.childNodes),q=0,l(G,function(a){"BR"==a.nodeName&&q++<G.length-1&&u.removeChild(a)})),A.remove(a)));e()}},insertRow:T,insertRows:function(a,b){b=b||f().length||1;for(var c=0;c<b;c++)T(a)},insertCol:E,insertCols:function(a,
b){b=b||J()||1;for(var c=0;c<b;c++)E(a)},splitCols:function(b){C&&(b=a.splitAt(t,C.x,C.y,b),c.each(b.cells,x))},deleteCols:function(){var a=[];if(r!==b.getBody()||1!=t[0].length&&c.grep(U(t),k).length!=U(t).length)l(t,function(b){l(b,function(b,e){k(b)&&-1===c.inArray(a,e)&&(l(t,function(a){a=a[e].elm;var b;b=y(a,"colSpan");1<b?v(a,"colSpan",b-1):A.remove(a)}),a.push(e))})}),e()},deleteRows:function(){function a(b){var c,e;l(b.cells,function(a){var b=y(a,"rowSpan");1<b&&(v(a,"rowSpan",b-1),c=L(a),
D(c.x,c.y,1,1))});c=L(b.cells[0]);l(t[c.y],function(a){var b;a=a.elm;a!=e&&(b=y(a,"rowSpan"),1>=b?A.remove(a):v(a,"rowSpan",b-1),e=a)})}var c;c=f();if(r!==b.getBody()||c.length!=r.rows.length)l(c.reverse(),function(b){a(b)}),e()},cutRows:function(){var a=f();if(r!==b.getBody()||a.length!=r.rows.length)return A.remove(a),e(),a},copyRows:function(){var a=f();l(a,function(b,c){a[c]=n(b,!0)});return a},pasteRows:function(b,e){var h,d,f=[];b&&(h=a.splitAt(t,C.x,C.y,e),d=h.row,c.each(h.cells,x),h=c.map(b,
function(a){return a.cloneNode(!0)}),l(h,function(a,b,c){var h,k=a.cells.length,g,n=0,u,p;q(a);for(h=0;h<k;h++)g=a.cells[h],p=y(g,"colspan"),u=y(g,"rowspan"),n+=p,1<u&&(n--,b+u>c.length?(u=c.length-b,v(g,"rowSpan",u),f.push(c.length-1)):f.push(b+u-1)),x(g);l(f,function(a){b<=a&&n++});for(h=n;h<I;h++)a.appendChild(s(a.cells[k-1]));for(h=I;h<n;h++)g=a.cells[a.cells.length-1],p=y(g,"colspan"),1<p?v(g,"colSpan",p-1):A.remove(g);e?d.parentNode.insertBefore(a,d):d=A.insertAfter(a,d)}),z())},getPos:L,setStartCell:function(a){C=
L(a)},setEndCell:function(a){var b,c,h,e,d,f,k,g,n;F=L(a);if(C&&F){b=Math.min(C.x,F.x);c=Math.min(C.y,F.y);h=Math.max(C.x,F.x);e=Math.max(C.y,F.y);d=h;f=e;for(n=c;n<=e;n++)for(g=b;g<=h;g++)a=t[n][g],a.real&&(k=a.colspan-1,a=a.rowspan-1,k&&g+k>d&&(d=g+k),a&&n+a>f&&(f=n+a));z();for(n=c;n<=f;n++)for(g=b;g<=d;g++)t[n][g]&&A.setAttrib(t[n][g].elm,"data-mce-selected","1")}},moveRelIdx:function(a,b){var c,h;c=L(a);c=c.y*I+c.x;do{c+=b;h=g(c%I,Math.floor(c/I));if(!h)break;if(h.elm!=a)return K.select(h.elm,
!0),A.isEmpty(h.elm)&&K.collapse(!0),!0}while(h.elm==a);return!1},refresh:p})}});E("tinymce.plugins.table.selection.CellSelection",["tinymce.plugins.table.model.TableGrid","tinymce.core.dom.TreeWalker","tinymce.core.util.Tools"],function(c,w,m){return function(a,l){function y(b){a.getBody().style.webkitUserSelect="";if(b||p)a.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),p=!1}function v(n){var g=n.target;if(!q&&!x&&g!==d&&(d=g,z&&B&&(g=b.getParent(g,"td,th"),z&&
g&&z===b.getParent(g,"table")||(g=b.getParent(z,"td,th")),B!==g||p))&&(l(!0),z&&g&&z===b.getParent(g,"table"))){n.preventDefault();r||(r=new c(a,z,B),a.getBody().style.webkitUserSelect="none");r.setEndCell(g);p=!0;n=a.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(G){}}}var b=a.dom,r,B,z,d,p=!0,q,x;a.on("SelectionChange",function(a){p&&a.stopImmediatePropagation()},!0);a.on("MouseDown",function(a){2==a.button||q||x||(y(),B=b.getParent(a.target,"td,th"),z=b.getParent(B,
"table"))});a.on("mouseover",v);a.on("remove",function(){b.unbind(a.getDoc(),"mouseover",v);y()});a.on("MouseUp",function(){function c(a,b){var d=new w(a,a);do{if(3==a.nodeType&&0!==m.trim(a.nodeValue).length){b?g.setStart(a,0):g.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){b?g.setStartBefore(a):g.setEndBefore(a);break}}while(a=b?d.next():d.prev())}var g,p=a.selection,k,f,q;if(B){r&&(a.getBody().style.webkitUserSelect="");k=b.select("td[data-mce-selected],th[data-mce-selected]");if(0<k.length){g=
b.createRng();f=k[0];g.setStartBefore(f);g.setEndAfter(f);c(f,1);k=new w(f,b.getParent(k[0],"table"));do if("TD"==f.nodeName||"TH"==f.nodeName){if(!b.getAttrib(f,"data-mce-selected"))break;q=f}while(f=k.next());c(q);p.setRng(g)}a.nodeChanged();B=r=z=d=null;l(!1)}});a.on("KeyUp Drop SetContent",function(a){y("setcontent"==a.type);B=r=z=d=null;l(!1);q=!1});a.on("ObjectResizeStart ObjectResized",function(a){q="objectresized"!=a.type});a.on("dragstart",function(){x=!0});a.on("drop dragend",function(){x=
!1});return{clear:y}}});E("tinymce.plugins.table.ui.Dialogs",["tinymce.core.util.Tools","tinymce.core.Env"],function(c,w){var m=c.each;return function(a){function l(){var b=a.settings.color_picker_callback;if(b)return function(){var c=this;b.call(a,function(a){c.value(a).fire("change")},c.value())}}function y(a){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(a,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,
formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:l()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:l()}]}]}}function v(a){return a?a.replace(/px$/,""):""}function b(a){/^[0-9]+$/.test(a)&&(a+="px");return a}function r(b){m(["left","center","right"],function(c){a.formatter.remove("align"+c,{},b)})}function B(b){m(["top","middle","bottom"],function(c){a.formatter.remove("valign"+
c,{},b)})}function z(a,b,d){function k(a,d){d=d||[];c.each(a,function(a){var c={text:a.text||a.title};a.menu?c.menu=k(a.menu):(c.value=a.value,b&&b(c));d.push(c)});return d}return k(a,d||[])}function d(a,b,c){var d=b.toJSON(),f=a.parseStyle(d.style);c?(b.find("#borderColor").value(f["border-color"]||"")[0].fire("change"),b.find("#backgroundColor").value(f["background-color"]||"")[0].fire("change")):(f["border-color"]=d.borderColor,f["background-color"]=d.backgroundColor);b.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(f))))}
function p(a,b,c){c=a.parseStyle(a.getAttrib(c,"style"));c["border-color"]&&(b.borderColor=c["border-color"]);c["background-color"]&&(b.backgroundColor=c["background-color"]);b.style=a.serializeStyle(c)}function q(a,b,c){var d=a.parseStyle(a.getAttrib(b,"style"));m(c,function(a){d[a.name]=a.value});a.setAttrib(b,"style",a.serializeStyle(a.parseStyle(a.serializeStyle(d))))}var x=this;x.tableProps=function(){x.table(!0)};x.table=function(n){function g(){function g(a,b,c){if("TD"===a.tagName||"TH"===
a.tagName)k.setStyle(a,b,c);else if(a.children)for(var h=0;h<a.children.length;h++)g(a.children[h],b,c)}var h;d(k,this);e=c.extend(e,this.toJSON());!1===e["class"]&&delete e["class"];a.undoManager.transact(function(){f||(f=a.plugins.table.insertTable(e.cols||1,e.rows||1));a.dom.setAttribs(f,{style:e.style,"class":e["class"]});if(a.settings.table_style_by_css){if(x=[],x.push({name:"border",value:e.border}),x.push({name:"border-spacing",value:b(e.cellspacing)}),q(k,f,x),k.setAttribs(f,{"data-mce-border-color":e.borderColor,
"data-mce-cell-padding":e.cellpadding,"data-mce-border":e.border}),f.children)for(var c=0;c<f.children.length;c++)g(f.children[c],"border",e.border),g(f.children[c],"padding",b(e.cellpadding))}else a.dom.setAttribs(f,{border:e.border,cellpadding:e.cellpadding,cellspacing:e.cellspacing});k.getAttrib(f,"width")&&!a.settings.table_style_by_css?k.setAttrib(f,"width",v(e.width)):k.setStyle(f,"width",b(e.width));k.setStyle(f,"height",b(e.height));(h=k.select("caption",f)[0])&&!e.caption&&k.remove(h);!h&&
e.caption&&(h=k.create("caption"),h.innerHTML=w.ie?"\u00a0":'<br data-mce-bogus="1"/>',f.insertBefore(h,f.firstChild));r(f);e.align&&a.formatter.apply("align"+e.align,{},f);a.focus();a.addVisual()})}function G(b,c){var d=a.dom.select("td,th",b),e;a:for(var f=0;f<d.length;f++){var g=k.getStyle(d[f],c);"undefined"===typeof e&&(e=g);if(e!=g){e="";break a}}return e}var k=a.dom,f,l,s,e={},x;if(!0===n){if(f=k.getParent(a.selection.getStart(),"table"))e={width:v(k.getStyle(f,"width")||k.getAttrib(f,"width")),
height:v(k.getStyle(f,"height")||k.getAttrib(f,"height")),cellspacing:v(k.getStyle(f,"border-spacing")||k.getAttrib(f,"cellspacing")),cellpadding:k.getAttrib(f,"data-mce-cell-padding")||k.getAttrib(f,"cellpadding")||G(f,"padding"),border:k.getAttrib(f,"data-mce-border")||k.getAttrib(f,"border")||G(f,"border"),borderColor:k.getAttrib(f,"data-mce-border-color"),caption:!!k.select("caption",f)[0],"class":k.getAttrib(f,"class")},m(["left","center","right"],function(b){a.formatter.matchNode(f,"align"+
b)&&(e.align=b)})}else l={label:"Cols",name:"cols"},s={label:"Rows",name:"rows"};a.settings.table_class_list?(e["class"]&&(e["class"]=e["class"].replace(/\s*mce\-item\-table\s*/g,"")),n={name:"class",type:"listbox",label:"Class",values:z(a.settings.table_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[b.value]})})})}):n={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",
padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==a.settings.table_appearance_options?[l,s,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[l,s,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",
text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},n]};!1!==a.settings.table_advtab?(p(k,e,f),a.windowManager.open({title:"Table properties",data:e,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},y(k)],onsubmit:g})):a.windowManager.open({title:"Table properties",data:e,body:l,onsubmit:g})};x.merge=function(b,c){a.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",
size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var d=this.toJSON();a.undoManager.transact(function(){b.merge(c,d.cols,d.rows)})}})};x.cell=function(){function n(a,b,c){(1===s.length||c)&&q.setAttrib(a,b,c)}function g(){d(q,this);f=c.extend(f,this.toJSON());a.undoManager.transact(function(){m(s,function(c){n(c,"scope",f.scope);n(c,"style",f.style);n(c,"class",f["class"]);var d=b(f.width);(1===s.length||d)&&q.setStyle(c,"width",d);d=b(f.height);(1===s.length||
d)&&q.setStyle(c,"height",d);f.type&&c.nodeName.toLowerCase()!==f.type&&(c=q.rename(c,f.type));1===s.length&&(r(c),B(c));f.align&&a.formatter.apply("align"+f.align,{},c);f.valign&&a.formatter.apply("valign"+f.valign,{},c)});a.focus()})}var q=a.dom,k,f,l,s=[],s=a.dom.select("td[data-mce-selected],th[data-mce-selected]");k=a.dom.getParent(a.selection.getStart(),"td,th");!s.length&&k&&s.push(k);if(k=k||s[0])1<s.length?f={width:"",height:"",scope:"","class":"",align:"",style:"",type:k.nodeName.toLowerCase()}:
(f={width:v(q.getStyle(k,"width")||q.getAttrib(k,"width")),height:v(q.getStyle(k,"height")||q.getAttrib(k,"height")),scope:q.getAttrib(k,"scope"),"class":q.getAttrib(k,"class")},f.type=k.nodeName.toLowerCase(),m(["left","center","right"],function(b){a.formatter.matchNode(k,"align"+b)&&(f.align=b)}),m(["top","middle","bottom"],function(b){a.formatter.matchNode(k,"valign"+b)&&(f.valign=b)}),p(q,f,k)),a.settings.table_cell_class_list&&(l={name:"class",type:"listbox",label:"Class",values:z(a.settings.table_cell_class_list,
function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})}),l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",
value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",
text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},l]},!1!==a.settings.table_cell_advtab?a.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:f,body:[{title:"General",type:"form",items:l},y(q)],onsubmit:g}):a.windowManager.open({title:"Cell properties",data:f,body:l,onsubmit:g})};x.row=function(){function q(a,b,c){(1===D.length||c)&&l.setAttrib(a,b,c)}function g(){var f,h,
k;d(l,this);e=c.extend(e,this.toJSON());a.undoManager.transact(function(){var c=e.type;m(D,function(d){q(d,"scope",e.scope);q(d,"style",e.style);q(d,"class",e["class"]);var g=b(e.height);(1===D.length||g)&&l.setStyle(d,"height",g);c!==d.parentNode.nodeName.toLowerCase()&&(f=l.getParent(d,"table"),h=d.parentNode,k=l.select(c,f)[0],k||(k=l.create(c),f.firstChild?f.insertBefore(k,f.firstChild):f.appendChild(k)),k.appendChild(d),h.hasChildNodes()||l.remove(h));1===D.length&&r(d);e.align&&a.formatter.apply("align"+
e.align,{},d)});a.focus()})}var l=a.dom,k,f,x,s,e,D=[];k=a.dom.getParent(a.selection.getStart(),"table");f=a.dom.getParent(a.selection.getStart(),"td,th");m(k.rows,function(a){m(a.cells,function(b){if(l.getAttrib(b,"data-mce-selected")||b==f)return D.push(a),!1})});if(x=D[0])1<D.length?e={height:"",scope:"","class":"",align:"",type:x.parentNode.nodeName.toLowerCase()}:(e={height:v(l.getStyle(x,"height")||l.getAttrib(x,"height")),scope:l.getAttrib(x,"scope"),"class":l.getAttrib(x,"class")},e.type=
x.parentNode.nodeName.toLowerCase(),m(["left","center","right"],function(b){a.formatter.matchNode(x,"align"+b)&&(e.align=b)}),p(l,e,x)),a.settings.table_row_class_list&&(s={name:"class",type:"listbox",label:"Class",values:z(a.settings.table_row_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),k={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,
values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},s]},!1!==a.settings.table_row_advtab?a.windowManager.open({title:"Row properties",data:e,bodyType:"tabpanel",body:[{title:"General",type:"form",items:k},y(l)],onsubmit:g}):a.windowManager.open({title:"Row properties",
data:e,body:k,onsubmit:g})}}});E("tinymce.plugins.table.ui.ResizeBars",["tinymce.core.util.Tools","tinymce.core.util.VK"],function(c,w){var m;return function(a){function l(b,c){return{index:b,y:a.dom.getPos(c).y}}function y(b,c){return{index:b,y:a.dom.getPos(c).y+c.offsetHeight}}function v(){return"rtl"===a.getBody().dir}function b(){return a.inline}function r(){return b?a.getBody().ownerDocument.body:a.getBody()}function B(b,c){return v()?{index:b,x:a.dom.getPos(c).x+c.offsetWidth}:{index:b,x:a.dom.getPos(c).x}}
function z(b,c){return v()?{index:b,x:a.dom.getPos(c).x}:{index:b,x:a.dom.getPos(c).x+c.offsetWidth}}function d(b,c){var d=a.dom.getStyle(b,c,!0);return parseInt(d,10)}function p(a){var b=d(a,"width");a=d(a.parentElement,"width");return 100*(b/a)}function q(a,b){var c=d(a,"width");return 100*(b/c)}function x(a,b){var c=d(a.parentElement,"width");return 100*(b/c)}function n(a,b,c){for(var d=[],h=1;h<c.length;h++)d.push(a(h-1,c[h].element));d.push(b(c.length-1,c[c.length-1].element));return d}function g(){var b=
a.dom.select("."+ga,r());c.each(b,function(b){a.dom.remove(b)})}function G(a,b,c,d,h,e,f,k){a={"data-mce-bogus":"all","class":ga+" "+a,unselectable:"on","data-mce-resize":!1,style:"cursor: "+b+"; margin: 0; padding: 0; position: absolute; left: "+c+"px; top: "+d+"px; height: "+h+"px; width: "+e+"px; "};a[f]=k;return a}function k(b,d,h){c.each(b,function(b){var c=h.x,e=b.y-Z/2,f=Z;a.dom.add(r(),"div",G($,qa,c,e,f,d,ha,b.index))})}function f(b,d,h){c.each(b,function(b){var c=b.x-Z/2,e=h.y,f=Z;a.dom.add(r(),
"div",G(ba,ra,c,e,d,f,ja,b.index))})}function J(a){return c.map(a.rows,function(a){var b=c.map(a.cells,function(a){var b=a.hasAttribute("rowspan")?parseInt(a.getAttribute("rowspan"),10):1,c=a.hasAttribute("colspan")?parseInt(a.getAttribute("colspan"),10):1;return{element:a,rowspan:b,colspan:c}});return{element:a,cells:b}})}function s(a){var b={},d=[],h=0,e=0;c.each(a,function(a,f){var k=[];c.each(a.cells,function(a){for(var c=0;void 0!==b[f+","+c];)c++;for(var d={element:a.element,colspan:a.colspan,
rowspan:a.rowspan,rowIndex:f,colIndex:c},ca=0;ca<a.colspan;ca++)for(var g=0;g<a.rowspan;g++){var p=f+g,q=c+ca;b[p+","+q]=d;h=Math.max(h,p+1);e=Math.max(e,q+1)}k.push(d)});d.push({element:a.element,cells:k})});return{grid:{maxRows:h,maxCols:e},getAt:function(a,c){return b[a+","+c]},getAllCells:function(){var a=[];c.each(d,function(b){a=a.concat(b.cells)});return a},getAllRows:function(){return d}}}function e(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c}function D(a,b,c){a=a();for(var d,h=0;h<a.length;h++)b(a[h])&&
(d=a[h]);return d?d:c()}function M(a){var b=e(0,a.grid.maxCols),d=e(0,a.grid.maxRows);return c.map(b,function(b){return D(function(){for(var c=[],h=0;h<d.length;h++){var e=a.getAt(h,b);e&&e.colIndex===b&&c.push(e)}return c},function(a){return 1===a.colspan},function(){for(var c,h=0;h<d.length;h++)if(c=a.getAt(h,b))return c;return null})})}function h(a){var b=e(0,a.grid.maxCols),d=e(0,a.grid.maxRows);return c.map(d,function(c){return D(function(){for(var d=[],h=0;h<b.length;h++){var e=a.getAt(c,h);
e&&e.rowIndex===c&&d.push(e)}return d},function(a){return 1===a.rowspan},function(){return a.getAt(c,0)})})}function u(b){var c=J(b),c=s(c),d=h(c),e=M(c),c=a.dom.getPos(b),d=0<d.length?n(l,y,d):[],e=0<e.length?n(B,z,e):[];k(d,b.offsetWidth,c);f(e,b.offsetHeight,c)}function O(a,b,c,h){if(0>b||b>=a.length-1)return"";var e=a[b];if(e)e={value:e,delta:0};else for(var f=a.slice(0,b).reverse(),k=0;k<f.length;k++)f[k]&&(e={value:f[k],delta:k+1});if(f=a[b+1])f={value:f,delta:1};else for(a=a.slice(b+1),b=0;b<
a.length;b++)a[b]&&(f={value:a[b],delta:b+1});a=f.delta-e.delta;e=Math.abs(f.value-e.value)/a;return c?100*(e/d(h,"width")):e}function X(b,c){var d=a.dom.getStyle(b,c);d||(d=a.dom.getAttrib(b,c));d||(d=a.dom.getStyle(b,c,!0));return d}function aa(a,b,c){var h=X(a,"width"),e=parseInt(h,10);a=b?100*(d(a,"width")/d(c,"width")):d(a,"width");if(b&&!F(h)||!b&&!K(h))e=0;return!isNaN(e)&&0<e?e:a}function T(a,b,d){a=M(a);for(var h=c.map(a,function(a){return B(a.colIndex,a.element).x}),e=[],f=0;f<a.length;f++){var k=
1<(a[f].element.hasAttribute("colspan")?parseInt(a[f].element.getAttribute("colspan"),10):1)?O(h,f):aa(a[f].element,b,d),k=k?k:ka;e.push(k)}return e}function E(a){var b=X(a,"height"),c=parseInt(b,10);F(b)&&(c=0);return!isNaN(c)&&0<c?c:d(a,"height")}function U(a){a=h(a);for(var b=c.map(a,function(a){return l(a.rowIndex,a.element).y}),d=[],e=0;e<a.length;e++){var f=1<(a[e].element.hasAttribute("rowspan")?parseInt(a[e].element.getAttribute("rowspan"),10):1)?O(b,e):E(a[e].element),f=f?f:sa;d.push(f)}return d}
function L(a,b,d,h,e){function f(a){return c.map(a,function(){return 0})}function k(a,b){var c=f(p.slice(0,a)),e=f(p.slice(b+1));if(0<=d)var g=Math.max(h,p[b]-d),c=c.concat([d,g-p[b]]).concat(e);else g=Math.max(h,p[a]+d),c=c.concat([g-p[a],p[a]-g]).concat(e);return c}function g(a,b){var c=f(p.slice(0,b));if(0<=d)c=c.concat([d]);else var e=Math.max(h,p[b]+d),c=c.concat([e-p[b]]);return c}var p=a.slice(0);return 0===a.length?[]:1===a.length?e?[100-p[0]]:[Math.max(h,p[0]+d)-p[0]]:0===b?k(0,1):0<b&&b<
a.length-1?k(b,b+1):b===a.length-1?g(b-1,b):[]}function Y(a,b,c){for(var d=0;a<b;a++)d+=c[a];return d}function t(a,b){var d=a.getAllCells();return c.map(d,function(a){var c=Y(a.colIndex,a.colIndex+a.colspan,b);return{element:a.element,width:c,colspan:a.colspan}})}function I(a,b){var d=a.getAllCells();return c.map(d,function(a){var c=Y(a.rowIndex,a.rowIndex+a.rowspan,b);return{element:a.element,height:c,rowspan:a.rowspan}})}function C(a,b){var d=a.getAllRows();return c.map(d,function(a,c){return{element:a.element,
height:b[c]}})}function F(a){return ta.test(a)}function K(a){return ua.test(a)}function A(b,h,e){function f(b,d){c.each(b,function(b){a.dom.setStyle(b.element,"width",b.width+d);a.dom.setAttrib(b.element,"width",null)})}for(var k=J(b),g=s(k),l=F(b.width)||F(b.style.width),k=T(g,l,b),n=l?q(b,h):h,n=L(k,e,n,ka,l,b),u=[],m=0;m<n.length;m++)u.push(n[m]+k[m]);var O=t(g,u),D=l?"%":"px",v=l?e<g.grid.maxCols-1?p(b):p(b)+x(b,h):e<g.grid.maxCols-1?d(b,"width"):d(b,"width")+h;a.undoManager.transact(function(){f(O,
D);e!=g.grid.maxCols-1&&l||(a.dom.setStyle(b,"width",v+D),a.dom.setAttrib(b,"width",null))})}function N(b,d,h){for(var e=J(b),e=s(e),f=U(e),k=[],g=0,p=0;p<f.length;p++)k.push(p===h?d+f[p]:f[p]),g+=g[p];var q=I(e,k),l=C(e,k);a.undoManager.transact(function(){c.each(l,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});c.each(q,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});a.dom.setStyle(b,
"height",g+"px");a.dom.setAttrib(b,"height",null)})}function S(){la=setTimeout(function(){da()},200)}function W(b,c){a.dom.bind(b,"mouseup",function(){da()});a.dom.bind(b,"mousemove",function(a){clearTimeout(la);V&&c(a)});a.dom.bind(b,"mouseout",function(){S()})}function da(){a.dom.remove(P);if(V){a.dom.removeClass(H,ma);V=!1;var b,c;if(a.dom.hasClass(H,ba)){c=parseInt(a.dom.getAttrib(H,na),10);var d=a.dom.getPos(H).x;b=parseInt(a.dom.getAttrib(H,ja),10);c=v()?c-d:d-c;1<=Math.abs(c)&&A(m,c,b)}else a.dom.hasClass(H,
$)&&(c=parseInt(a.dom.getAttrib(H,ia),10),d=a.dom.getPos(H).y,b=parseInt(a.dom.getAttrib(H,ha),10),c=d-c,1<=Math.abs(c)&&N(m,c,b));b=m;g();u(b);a.nodeChanged()}}function ea(b,c){var d;P?d=P:(d=document.createElement("div"),d.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),d.setAttribute("data-mce-bogus","all"));P=d;V=!0;a.dom.addClass(b,ma);H=b;W(P,c);a.dom.add(r(),P)}function oa(b){Q=void 0!==Q?Q:b.clientX;var c=b.clientX-Q;Q=b.clientX;
b=a.dom.getPos(H).x;a.dom.setStyle(H,"left",b+c+"px")}function pa(b){R=void 0!==R?R:b.clientY;var c=b.clientY-R;R=b.clientY;b=a.dom.getPos(H).y;a.dom.setStyle(H,"top",b+c+"px")}function fa(b){var c=b.target,d=a.getBody();if(a.$.contains(d,m)||m===d)a.dom.hasClass(c,ba)?(b.preventDefault(),b=a.dom.getPos(c).x,a.dom.setAttrib(c,na,b),Q=void 0,ea(c,oa)):a.dom.hasClass(c,$)?(b.preventDefault(),b=a.dom.getPos(c).y,a.dom.setAttrib(c,ia,b),R=void 0,ea(c,pa)):g()}var ga="mce-resize-bar",$="mce-resize-bar-row",
qa="row-resize",ha="data-row",ia="data-initial-top",ba="mce-resize-bar-col",ra="col-resize",ja="data-col",na="data-initial-left",Z=4,ka=10,sa=10,ma="mce-resize-bar-dragging",ta=RegExp(/(\d+(\.\d+)?%)/),ua=RegExp(/px|em/),la,V,P,H,Q,R;a.on("init",function(){a.dom.bind(r(),"mousedown",fa)});a.on("ObjectResized",function(b){b=b.target;if("TABLE"===b.nodeName){var d=[];c.each(b.rows,function(b){c.each(b.cells,function(b){var c=a.dom.getStyle(b,"width",!0);d.push({cell:b,width:c})})});c.each(d,function(b){a.dom.setStyle(b.cell,
"width",b.width);a.dom.setAttrib(b.cell,"width",null)})}});a.on("mouseover",function(b){if(!V){var c=a.dom.getParent(b.target,"table");if("TABLE"===b.target.nodeName||c)m=c,g(),u(c)}});a.on("keydown",function(a){switch(a.keyCode){case w.LEFT:case w.RIGHT:case w.UP:case w.DOWN:g()}});a.on("remove",function(){g();a.dom.unbind(r(),"mousedown",fa)});return{adjustWidth:A,adjustHeight:N,clearBars:g,drawBars:u,determineDeltas:L,getTableGrid:s,getTableDetails:J,getWidths:T,getPixelHeights:U,isPercentageBasedSize:F,
isPixelBasedSize:K,recalculateWidths:t,recalculateCellHeights:I,recalculateRowHeights:C}}});E("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(c){return c("tinymce.util.Delay")});E("tinymce.plugins.table.util.Quirks",["tinymce.core.util.VK","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(c,w,m,a,l){var y=a.each,v=l.getSpanVal;return function(b){function r(){function a(d){function p(a,c){var f=a?"previousSibling":
"nextSibling",g=b.dom.getParent(c,"tr"),h=g[f];if(h)return k(b,c,h,a),d.preventDefault(),!0;var h=b.dom.getParent(g,"table"),u=g.parentNode,m=u.nodeName.toLowerCase();if("tbody"===m||m===(a?"tfoot":"thead")){var m=b.dom.select(">tbody",h),r=m.indexOf(u);a&&0===r||!a&&r===m.length-1?(u=b.dom.select(">"+(a?"thead":"tfoot"),h),u=0!==u.length?u[0]:null):-1===r?(u="thead"===u.tagName.toLowerCase()?0:m.length-1,u=m[u]):u=m[r+(a?-1:1)];if(null!==u)return(g=l(u,a))&&k(b,c,g,a),d.preventDefault(),!0}(f=h[f])?
(b.selection.setCursorLocation(f,0),g=!0):(f=b.dom.getParent(h,"td,th"))?g=p(a,f,d):(g=l(g,!a),b.selection.setCursorLocation(g,0),d.preventDefault(),g=!1);return g}function l(a,c){var d=a&&a[c?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?b.dom.getParent(d,"td,th"):d}function g(a){var b=a.selection.getNode();return null!==a.dom.getParent(b,"tr")}function m(a,b){var c=0,d=0;y(a.children,function(a,f){c+=v(a,"colspan");d=f;if(c>b)return!1});return d}function k(a,c,d,f){a=0;for(c=b.dom.getParent(c,
"td,th");c.previousSibling;)c=c.previousSibling,a+=v(c,"colspan");c=m(d,a);d=d.childNodes[c];f=l(d,f);b.selection.setCursorLocation(f||d,0)}var f=d.keyCode;if((f==c.UP||f==c.DOWN)&&g(b)){var r=b.selection.getNode();w.setEditorTimeout(b,function(){var a=b.selection.getNode(),a=b.dom.getParent(a,"td,th"),e=b.dom.getParent(r,"td,th");a&&a!==e&&b.dom.getParent(a,"TABLE")===b.dom.getParent(e,"TABLE")&&p(!d.shiftKey&&f===c.UP,r,d)},0)}}b.on("KeyDown",function(b){a(b)})}function B(){b.on("KeyDown",function(a){var c,
d,l=b.dom;if(37==a.keyCode||38==a.keyCode)if(c=b.selection.getRng(),(d=l.getParent(c.startContainer,"table"))&&b.getBody().firstChild==d){var g=c,m=d.ownerDocument;c=m.createRange();c.setStartBefore(d);c.setEnd(g.endContainer,g.endOffset);g=m.createElement("body");g.appendChild(c.cloneContents());0===g.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(c=l.createRng(),c.setStartBefore(d),c.setEndBefore(d),b.selection.setRng(c),a.preventDefault())}})}
function z(){b.on("KeyDown SetContent VisualAid",function(){var a;for(a=b.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(0<a.nodeValue.length)break}else if(1==a.nodeType&&("BR"==a.tagName||!a.getAttribute("data-mce-bogus")))break;a&&"TABLE"==a.nodeName&&(b.settings.forced_root_block?b.dom.add(b.getBody(),b.settings.forced_root_block,b.settings.forced_root_block_attrs,m.ie&&10>m.ie?"&nbsp;":'<br data-mce-bogus="1" />'):b.dom.add(b.getBody(),"br",{"data-mce-bogus":"1"}))});b.on("PreProcess",
function(a){(a=a.node.lastChild)&&("BR"==a.nodeName||1==a.childNodes.length&&("BR"==a.firstChild.nodeName||"\u00a0"==a.firstChild.nodeValue))&&a.previousSibling&&"TABLE"==a.previousSibling.nodeName&&b.dom.remove(a)})}function d(){function a(){var c=b.selection.getRng(),d=b.selection.getNode(),l=b.dom.getParent(c.startContainer,"TD,TH"),g=l,p=b.dom.getParent(c.startContainer,"TABLE"),k;p&&(k=p.parentNode);p=3==c.startContainer.nodeType&&0===c.startOffset&&0===c.endOffset&&g&&("TR"==d.nodeName||d==
k);g=("TD"==d.nodeName||"TH"==d.nodeName)&&!g;if(p||g){l||(l=d);for(d=l.lastChild;d.lastChild;)d=d.lastChild;3==d.nodeType&&(c.setEnd(d,d.data.length),b.selection.setRng(c))}}b.on("KeyDown",function(){a()});b.on("MouseDown",function(b){2!=b.button&&a()})}(function(){var a=function(a){return b.dom.isEmpty(a)||a.firstChild===a.lastChild&&l(a.firstChild)},d=function(a,b){var c=b.firstChild;do if(c===a)return!0;while(c=c.firstChild);return!1},l=function(a){if(3===a.nodeType){if("\ufeff"===a.data)return!0;
a=a.parentNode}return 1===a.nodeType&&a.hasAttribute("data-mce-caret")},m=function(a){var c=b.selection.getRng();return!c.startOffset&&!c.startContainer.previousSibling&&d(c.startContainer,a)},g=function(c,d){var g=c.lastChild,m=b.selection.getRng(),e=m.startContainer,m=m.startOffset;a(c)?(c.innerHTML="\ufeff",e=c.lastChild,m=0):l(g)||(g=b.dom.isBlock(g)?b.dom.create("p",{"data-mce-caret":"after","data-mce-bogus":"all"},'<br data-mce-bogus="1">'):c.ownerDocument.createTextNode("\ufeff"),c.appendChild(g));
b.selection.setCursorLocation(e,m)},r=function(a){var c=b.selection.getRng(),g=b.dom.createRng(),l=a.firstChild;c.commonAncestorContainer===a.parentNode&&d(c.startContainer,a)&&(g.setStart(a,0),1===l.nodeType?g.setEnd(a,a.childNodes.length):g.setEnd(l,l.nodeValue.length),b.selection.setRng(g))};b.on("keydown",function(d){if(!(d.keyCode!==c.DELETE&&d.keyCode!==c.BACKSPACE||d.isDefaultPrevented())){var f=b.dom.getParent(b.selection.getStart(),"caption");f&&"CAPTION"==f.nodeName&&"TABLE"==f.parentNode.nodeName&&
(b.selection.isCollapsed()?(g(f),(a(f)||d.keyCode===c.BACKSPACE&&m(f))&&d.preventDefault()):(r(f),b.undoManager.transact(function(){b.execCommand("Delete");g(f)}),d.preventDefault()))}})})();(function(){function d(a){b.$(a).empty();l.paddCell(a)}b.on("keydown",function(l){if((l.keyCode==c.DELETE||l.keyCode==c.BACKSPACE)&&!l.isDefaultPrevented()){var m,n,g;if(m=b.dom.getParent(b.selection.getStart(),"table"))n=b.dom.select("td,th",m),g=a.grep(n,function(a){return!!b.dom.getAttrib(a,"data-mce-selected")}),
0===g.length?(m=b.dom.getParent(b.selection.getStart(),"td,th"),b.selection.isCollapsed()&&m&&b.dom.isEmpty(m)&&(l.preventDefault(),d(m),b.selection.select(m,!0),b.selection.collapse(!0))):(l.preventDefault(),b.undoManager.transact(function(){n.length==g.length?b.execCommand("mceTableDelete"):(a.each(g,d),b.selection.select(g[0],!0),b.selection.collapse(!0))}))}})})();m.webkit&&(r(),d());m.gecko&&(B(),z());9<m.ie&&(B(),z())}});E("tinymce.plugins.table.Plugin","tinymce.core.dom.TreeWalker tinymce.core.Env tinymce.core.PluginManager tinymce.core.util.Tools tinymce.core.util.VK tinymce.plugins.table.model.TableGrid tinymce.plugins.table.selection.CellSelection tinymce.plugins.table.ui.Dialogs tinymce.plugins.table.ui.ResizeBars tinymce.plugins.table.util.Quirks".split(" "),
function(c,w,m,a,l,y,v,b,r,B){var z=a.each;m.add("table",function(a){function c(b){return function(){a.execCommand(b)}}function m(b,c){var e,f,g,k;g='<table id="__mce"><tbody>';for(e=0;e<c;e++){g+="<tr>";for(f=0;f<b;f++)g+="<td>"+(w.ie&&10>w.ie?"&nbsp;":"<br>")+"</td>";g+="</tr>"}g+="</tbody></table>";a.undoManager.transact(function(){a.insertContent(g);k=a.dom.get("__mce");a.dom.setAttrib(k,"id",null);a.$("tr",k).each(function(b,c){a.fire("newrow",{node:c});a.$("th,td",c).each(function(b,c){a.fire("newcell",
{node:c})})});a.dom.setAttribs(k,a.settings.table_default_attributes||{});a.dom.setStyles(k,a.settings.table_default_styles||{})});return k}function x(b,c,e){function f(){var g,k,l={},m=0;k=a.dom.select("td[data-mce-selected],th[data-mce-selected]");(g=k[0])||(g=a.selection.getStart());e&&0<k.length?(z(k,function(a){return l[a.parentNode.parentNode.nodeName]=1}),z(l,function(a){m+=a}),g=1!==m):g=!a.dom.getParent(g,c);b.disabled(g);a.selection.selectorChanged(c,function(a){b.disabled(!a)})}if(a.initialized)f();
else a.on("init",f)}function n(){x(this,"table")}function g(){x(this,"td,th")}function E(){for(var a="",a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',b=0;10>b;b++){for(var a=a+"<tr>",c=0;10>c;c++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+c)+'" href="#" data-mce-x="'+c+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+='</table><div class="mce-text-center" role="presentation">1 x 1</div>'}function k(b,c,e){var f=e.getEl().getElementsByTagName("table")[0],
g,k,l,m,n=e.isRtl()||"tl-tr"==e.parent().rel;f.nextSibling.innerHTML=b+1+" x "+(c+1);n&&(b=9-b);for(g=0;10>g;g++)for(e=0;10>e;e++)l=f.rows[g].childNodes[e].firstChild,m=(n?e>=b:e<=b)&&g<=c,a.dom.toggleClass(l,"mce-active",m),m&&(k=l);return k.parentNode}function f(b){return a.dom.is(b,"table")&&a.getBody().contains(b)}var J,s=this,e=new b(a),D;!a.settings.object_resizing||!1===a.settings.table_resize_bars||!0!==a.settings.object_resizing&&"table"!==a.settings.object_resizing||(D=r(a));!1===a.settings.table_grid?
a.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:e.table}):a.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),e.table())},onshow:function(){k(0,0,this.menu.items()[0])},onhide:function(){var b=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(b,"mce-active");a.dom.addClass(b[0],"mce-active")},menu:[{type:"container",html:E(),onPostRender:function(){this.lastX=
this.lastY=0},onmousemove:function(a){var b=a.target,c;if("A"==b.tagName.toUpperCase()){c=parseInt(b.getAttribute("data-mce-x"),10);b=parseInt(b.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)c=9-c;if(c!==this.lastX||b!==this.lastY)k(c,b,a.control),this.lastX=c,this.lastY=b}},onclick:function(b){var c=this;"A"==b.target.tagName.toUpperCase()&&(b.preventDefault(),b.stopPropagation(),c.parent().cancel(),a.undoManager.transact(function(){m(c.lastX+1,c.lastY+1)}),a.addVisual())}}]});
a.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:n,onclick:e.tableProps});a.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:n,cmd:"mceTableDelete"});a.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:c("mceTableCellProps"),onPostRender:g},{text:"Merge cells",onclick:c("mceTableMergeCells"),onPostRender:function(){x(this,"td,th",!0)}},{text:"Split cell",onclick:c("mceTableSplitCells"),
onPostRender:g}]});a.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:c("mceTableInsertRowBefore"),onPostRender:g},{text:"Insert row after",onclick:c("mceTableInsertRowAfter"),onPostRender:g},{text:"Delete row",onclick:c("mceTableDeleteRow"),onPostRender:g},{text:"Row properties",onclick:c("mceTableRowProps"),onPostRender:g},{text:"-"},{text:"Cut row",onclick:c("mceTableCutRow"),onPostRender:g},{text:"Copy row",onclick:c("mceTableCopyRow"),onPostRender:g},{text:"Paste row before",
onclick:c("mceTablePasteRowBefore"),onPostRender:g},{text:"Paste row after",onclick:c("mceTablePasteRowAfter"),onPostRender:g}]});a.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:c("mceTableInsertColBefore"),onPostRender:g},{text:"Insert column after",onclick:c("mceTableInsertColAfter"),onPostRender:g},{text:"Delete column",onclick:c("mceTableDeleteCol"),onPostRender:g}]});var M=[];z("inserttable tableprops deletetable | cell row column".split(" "),
function(b){"|"==b?M.push({text:"-"}):M.push(a.menuItems[b])});a.addButton("table",{type:"menubutton",title:"Table",menu:M});if(!w.isIE)a.on("click",function(b){b=b.target;"TABLE"===b.nodeName&&(a.selection.select(b),a.nodeChanged())});s.quirks=new B(a);a.on("Init",function(){s.cellSelection=new v(a,function(a){a&&D&&D.clearBars()});s.resizeBars=D});a.on("PreInit",function(){a.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(a,b){for(var c=a.length;c--;)a[c].attr(b,
null)})});z({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(b){var c;c=a.dom.getParent(a.selection.getStart(),"th,td");a.dom.select("td[data-mce-selected],th[data-mce-selected]").length?b.merge():e.merge(b,c)},mceTableInsertRowBefore:function(a){a.insertRows(!0)},mceTableInsertRowAfter:function(a){a.insertRows()},mceTableInsertColBefore:function(a){a.insertCols(!0)},mceTableInsertColAfter:function(a){a.insertCols()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},
mceTableCutRow:function(a){J=a.cutRows()},mceTableCopyRow:function(a){J=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(J,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(J)},mceSplitColsBefore:function(a){a.splitCols(!0)},mceSplitColsAfter:function(a){a.splitCols(!1)},mceTableDelete:function(a){D&&D.clearBars();a.deleteTable()}},function(b,c){a.addCommand(c,function(){var c=new y(a);c&&(b(c),a.execCommand("mceRepaint"),s.cellSelection.clear())})});z({mceInsertTable:e.table,mceTableProps:function(){e.table(!0)},
mceTableRowProps:e.row,mceTableCellProps:e.cell},function(b,c){a.addCommand(c,function(a,c){b(c)})});a.addButton("tableprops",{title:"Table properties",onclick:e.tableProps,icon:"table"});a.addButton("tabledelete",{title:"Delete table",onclick:c("mceTableDelete")});a.addButton("tablecellprops",{title:"Cell properties",onclick:c("mceTableCellProps")});a.addButton("tablemergecells",{title:"Merge cells",onclick:c("mceTableMergeCells")});a.addButton("tablesplitcells",{title:"Split cell",onclick:c("mceTableSplitCells")});
a.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:c("mceTableInsertRowBefore")});a.addButton("tableinsertrowafter",{title:"Insert row after",onclick:c("mceTableInsertRowAfter")});a.addButton("tabledeleterow",{title:"Delete row",onclick:c("mceTableDeleteRow")});a.addButton("tablerowprops",{title:"Row properties",onclick:c("mceTableRowProps")});a.addButton("tablecutrow",{title:"Cut row",onclick:c("mceTableCutRow")});a.addButton("tablecopyrow",{title:"Copy row",onclick:c("mceTableCopyRow")});
a.addButton("tablepasterowbefore",{title:"Paste row before",onclick:c("mceTablePasteRowBefore")});a.addButton("tablepasterowafter",{title:"Paste row after",onclick:c("mceTablePasteRowAfter")});a.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:c("mceTableInsertColBefore")});a.addButton("tableinsertcolafter",{title:"Insert column after",onclick:c("mceTableInsertColAfter")});a.addButton("tabledeletecol",{title:"Delete column",onclick:c("mceTableDeleteCol")});(function(){var b=
a.settings.table_toolbar;""!==b&&!1!==b&&(b||(b="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),a.addContextToolbar(f,b))})();if(!1!==a.settings.table_tab_navigation)a.on("keydown",function(b){var c,e,f,g=a.selection.getStart();b.keyCode===l.TAB&&!a.dom.getParent(g,"LI,DT,DD")&&(c=a.dom.getParent(g,"th,td"))&&(b.preventDefault(),e=new y(a),f=b.shiftKey?-1:1,a.undoManager.transact(function(){!e.moveRelIdx(c,
f)&&0<f&&(e.insertRow(),e.refresh(),e.moveRelIdx(c,f))}))});s.insertTable=m;s.setClipboardRows=function(a){J=a};s.getClipboardRows=function(){return J}});return function(){}});W("tinymce.plugins.table.Plugin")()})();

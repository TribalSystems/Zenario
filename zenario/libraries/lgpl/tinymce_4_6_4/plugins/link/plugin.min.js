(function(){var n={},t=function(a){var h=n[a];if(void 0===h)throw"module ["+a+"] was undefined";if(void 0===h.instance){for(var d=n[a],f=d.deps,x=d.defn,e=f.length,g=Array(e),b=0;b<e;++b)g[b]=t(f[b]);f=x.apply(null,g);if(void 0===f)throw"module ["+a+"] returned undefined";d.instance=f}return h.instance},e=function(a,h,d){if("string"!==typeof a)throw"module id must be a string";if(void 0===h)throw"no dependencies for "+a;if(void 0===d)throw"no definition function for "+a;n[a]={deps:h,defn:d,instance:void 0}},
u=function(a,h){e(a,[],function(){return h})};u("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);e("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});e("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.VK")});e("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Delay")});e("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.util.Tools")});e("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.XHR")});e("tinymce.plugins.link.core.Settings",[],function(){return{assumeExternalTargets:function(a){return"boolean"===typeof a.link_assume_external_targets?a.link_assume_external_targets:!1},hasContextToolbar:function(a){return"boolean"===typeof a.link_context_toolbar?a.link_context_toolbar:!1},getLinkList:function(a){return a.link_list},hasDefaultLinkTarget:function(a){return"string"===
typeof a.default_link_target},getDefaultLinkTarget:function(a){return a.default_link_target},getTargetList:function(a){return a.target_list},setTargetList:function(a,h){a.settings.target_list=h},shouldShowTargetList:function(a){return!1!==a.target_list},getRelList:function(a){return a.rel_list},hasRelList:function(a){return void 0!==a.rel_list},getLinkClassList:function(a){return a.link_class_list},hasLinkClassList:function(a){return void 0!==a.link_class_list},shouldShowLinkTitle:function(a){return!1!==
a.link_title},allowUnsafeLinkTarget:function(a){return"boolean"===typeof a.allow_unsafe_link_target?a.allow_unsafe_link_target:!1}}});u("global!RegExp",RegExp);e("tinymce.plugins.link.core.Utils",["tinymce.core.util.Tools","tinymce.plugins.link.core.Settings","global!RegExp"],function(a,h,d){var f=function(b,y){var c=["noopener"],k=b?b.split(/\s+/):[],f=function(b){b=d(b);return b.length?b.concat(c):c},d=function(b){return b.filter(function(b){return-1===a.inArray(c,b)})},k=y?f(k):d(k);return k.length?
a.trim(k.sort().join(" ")):null},x=function(b,a){a=a||b.selection.getStart();return g(a)?b.dom.select("a[href]",a)[0]:b.dom.getParent(a,"a[href]")},e=function(b){return b&&"A"===b.nodeName&&b.href},g=function(b){return b&&"FIGURE"===b.nodeName&&/\bimage\b/i.test(b.className)};return{link:function(b,a){return function(c){b.undoManager.transact(function(){var k=b.selection.getNode(),d=x(b,k),m={href:c.href,target:c.target?c.target:null,rel:c.rel?c.rel:null,"class":c["class"]?c["class"]:null,title:c.title?
c.title:null};h.hasRelList(b.settings)||!1!==h.allowUnsafeLinkTarget(b.settings)||(m.rel=f(m.rel,"_blank"==m.target));c.href===a.href&&(a.attach(),a={});if(d)b.focus(),c.hasOwnProperty("text")&&("innerText"in d?d.innerText=c.text:d.textContent=c.text),b.dom.setAttribs(d,m),b.selection.select(d),b.undoManager.add();else if(g(k)){if(k=b.dom.select("img",k)[0])m=b.dom.create("a",m),k.parentNode.insertBefore(m,k),m.appendChild(k)}else c.hasOwnProperty("text")?b.insertContent(b.dom.createHTML("a",m,b.dom.encode(c.text))):
b.execCommand("mceInsertLink",!1,m)})}},unlink:function(b){return function(){b.undoManager.transact(function(){var a=b.selection.getNode();if(g(a)){var c;if(c=b.dom.select("img",a)[0])if(a=b.dom.getParents(c,"a[href]",a)[0])a.parentNode.insertBefore(c,a),b.dom.remove(a)}else b.execCommand("unlink")})}},isLink:e,hasLinks:function(b){return 0<a.grep(b,e).length},isOnlyTextSelected:function(b){return!/</.test(b)||/^<a [^>]+>[^<]+<\/a>$/.test(b)&&-1!=b.indexOf("href=")?!0:!1},getAnchorElement:x,getAnchorText:function(b,
a){return(a?a.innerText||a.textContent:b.getContent({format:"text"})).replace(/\uFEFF/g,"")},toggleTargetRules:f}});e("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.core.Utils","tinymce.plugins.link.core.Settings"],function(a,h,d,f,e){var r={},g=function(a,b){var c=e.getLinkList(a.settings);"string"==typeof c?d.send({url:c,success:function(c){b(a,JSON.parse(c))}}):"function"==typeof c?c(function(c){b(a,c)}):b(a,c)},
b=function(a,b,c){var d=function(a,c){c=c||[];h.each(a,function(a){var k={text:a.text||a.title};a.menu?k.menu=d(a.menu):(k.value=a.value,b&&b(k));c.push(k)});return c};return d(a,c||[])},y=function(b,c,d){var f=b.selection.getRng();a.setEditorTimeout(b,function(){b.windowManager.confirm(c,function(a){b.selection.setRng(f);d(a)})})},c=function(a,c){var d={},g=a.dom,l,z,v,A,n,w,t,u,B,C,s,D=function(a){var b=v.find("#text");(!b.value()||a.lastControl&&b.value()==a.lastControl.text())&&b.value(a.control.text());
v.find("#href").value(a.control.value())},E=function(){z||!A||d.text||this.parent().parent().find("#text")[0].value(this.value())};A=f.isOnlyTextSelected(a.selection.getContent());l=f.getAnchorElement(a);d.text=z=f.getAnchorText(a.selection,l);d.href=l?g.getAttrib(l,"href"):"";l?d.target=g.getAttrib(l,"target"):e.hasDefaultLinkTarget(a.settings)&&(d.target=e.getDefaultLinkTarget(a.settings));if(s=g.getAttrib(l,"rel"))d.rel=s;if(s=g.getAttrib(l,"class"))d["class"]=s;if(s=g.getAttrib(l,"title"))d.title=
s;A&&(n={name:"text",type:"textbox",size:40,label:"Text to display",classes:"link_text_to_display",onchange:function(){d.text=this.value()}});c&&(w={type:"listbox",label:"Link list",values:b(c,function(b){b.value=a.convertURL(b.value||b.url,"href")},[{text:"None",value:""}]),onselect:D,value:a.convertURL(d.href,"href"),onPostRender:function(){w=this}});e.shouldShowTargetList(a.settings)&&(void 0===e.getTargetList(a.settings)&&e.setTargetList(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),
u={name:"target",type:"listbox",label:"Target",values:b(e.getTargetList(a.settings))});e.hasRelList(a.settings)&&(t={name:"rel",type:"listbox",label:"Rel",values:b(e.getRelList(a.settings),function(b){!1===e.allowUnsafeLinkTarget(a.settings)&&(b.value=f.toggleTargetRules(b.value,"_blank"===d.target))})});!1!==a.settings.link_class&&(B=e.hasLinkClassList(a.settings)?{name:"class",type:"listbox",label:"Class",values:b(e.getLinkClassList(a.settings),function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:"a",
classes:[b.value]})})})}:{name:"class",type:"textbox",size:40,label:"CSS class name(s)"});e.shouldShowLinkTitle(a.settings)&&(C={name:"title",type:"textbox",label:"Title",value:d.title});v=a.windowManager.open({title:"Insert link",data:d,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",classes:"zenario_link_picker",onchange:function(b){var c=b.meta||{};w&&w.value(a.convertURL(this.value(),"href"));h.each(b.meta,function(a,b){var c=v.find("#"+b);"text"===b?0===
z.length&&(c.value(a),d.text=a):c.value(a)});c.attach&&(r={href:this.value(),attach:c.attach});c.text||E.call(this)},onkeyup:E,onbeforecall:function(a){a.meta=v.toJSON()}},n,C,function(b){var c=[];h.each(a.dom.select("a:not([href])"),function(a){(a=a.name||a.id)&&c.push({text:a,value:"#"+a,selected:-1!=b.indexOf("#"+a)})});if(c.length)return c.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:c,onselect:D}}(d.href),w,t,u,B],onSubmit:function(b){var c=e.assumeExternalTargets(a.settings),
g=f.link(a,r),l=f.unlink(a),p=h.extend({},d,b.data),q=p.href;q?(A&&p.text!==z||delete p.text,0<q.indexOf("@")&&-1==q.indexOf("//")&&-1==q.indexOf("mailto:")?y(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(a){a&&(p.href="mailto:"+q);g(p)}):!0===c&&!/^\w+:/i.test(q)||!1===c&&/^\s*www[\.|\d\.]/i.test(q)?y(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(a){a&&(p.href="http://"+
q);g(p)}):g(p)):l()}});zenarioA.setLinkPickerOnTinyMCE()};return{open:function(a){g(a,c)}}});e("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.DOMUtils")});e("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});e("tinymce.plugins.link.core.OpenUrl",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(a,e){return{open:function(d){if(!e.ie||10<e.ie){var f=document.createElement("a");f.target="_blank";
f.href=d;f.rel="noreferrer noopener";d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);document.body.appendChild(f);f.dispatchEvent(d);document.body.removeChild(f)}else if(f=window.open("","_blank"))f.opener=null,f=f.document,f.open(),f.write('<meta http-equiv="refresh" content="0; url='+a.DOM.encode(d)+'">'),f.close()}}});e("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.ui.Dialog","tinymce.plugins.link.core.OpenUrl",
"tinymce.plugins.link.core.Utils","tinymce.plugins.link.core.Settings"],function(a,e,d,f,n){var r=function(a,d){return a.dom.getParent(d,"a[href]")},g=function(a,f){if(f){var c;c=(c=f.getAttribute("data-mce-href"))?c:f.getAttribute("href");/^#/.test(c)?(c=a.$(c),c.length&&a.selection.scrollIntoView(c[0],!0)):d.open(f.href)}};return{openDialog:function(a){return function(){e.open(a)}},gotoSelectedLink:function(a){return function(){g(a,r(a,a.selection.getStart()))}},leftClickedOnAHref:function(a){return function(d){var c,
e;if(c=n.hasContextToolbar(a.settings))c=a.plugins.contextmenu,c=!(c&&c.isContextMenuVisible())&&f.isLink(d);return c&&(d=a.selection,c=d.getRng(),e=c.startContainer,3==e.nodeType&&d.isCollapsed()&&0<c.startOffset&&c.startOffset<e.data.length)?!0:!1}},setupGotoLinks:function(b){b.on("click",function(d){var c=r(b,d.target);c&&a.metaKeyPressed(d)&&(d.preventDefault(),g(b,c))});b.on("keydown",function(a){var c=r(b,b.selection.getStart());c&&13===a.keyCode&&!0===a.altKey&&!1===a.shiftKey&&!1===a.ctrlKey&&
!1===a.metaKey&&(a.preventDefault(),g(b,c))})},toggleActiveState:function(a){return function(){var d=this;a.on("nodechange",function(c){d.active(!a.readonly&&!!f.getAnchorElement(a,c.element))})}},toggleViewLinkState:function(a){return function(){var d=this,c=function(a){f.hasLinks(a.parents)?d.show():d.hide()};f.hasLinks(a.dom.getParents(a.selection.getStart()))||d.hide();a.on("nodechange",c);d.on("remove",function(){a.off("nodechange",c)})}}}});e("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions",
"tinymce.plugins.link.core.Utils"],function(a,e){return{setupButtons:function(d){d.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:a.openDialog(d),onpostrender:a.toggleActiveState(d)});d.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:e.unlink(d),onpostrender:a.toggleActiveState(d)});d.addContextToolbar&&d.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:a.gotoSelectedLink(d)})},setupMenuItems:function(d){d.addMenuItem("openlink",{text:"Open link",
icon:"newtab",onclick:a.gotoSelectedLink(d),onPostRender:a.toggleViewLinkState(d),prependToContext:!0});d.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:a.openDialog(d),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(d){d.addContextToolbar&&d.addContextToolbar(a.leftClickedOnAHref(d),"openlink | link unlink")}}});e("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.core.Actions","tinymce.plugins.link.ui.Controls"],
function(a,e,d){a.add("link",function(a){d.setupButtons(a);d.setupMenuItems(a);d.setupContextToolbars(a);e.setupGotoLinks(a);a.addShortcut("Meta+K","",e.openDialog(a));a.addCommand("mceLink",e.openDialog(a))});return function(){}});t("tinymce.plugins.link.Plugin")()})();

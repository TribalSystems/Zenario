(function(){var p={},q=function(d){var e=p[d];if(void 0===e)throw"module ["+d+"] was undefined";if(void 0===e.instance){for(var f=p[d],k=f.deps,g=f.defn,a=k.length,c=Array(a),b=0;b<a;++b)c[b]=q(k[b]);k=g.apply(null,c);if(void 0===k)throw"module ["+d+"] returned undefined";f.instance=k}return e.instance},l=function(d,e,f){if("string"!==typeof d)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+d;if(void 0===f)throw"no definition function for "+d;p[d]={deps:e,defn:f,instance:void 0}},
n=function(d,e){l(d,[],function(){return e})};n("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);l("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.PluginManager")});l("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(d){return d("tinymce.util.Delay")});n("global!Array",Array);n("global!Error",Error);l("ephox.katamari.api.Fun",["global!Array","global!Error"],function(d,e){var f=function(a){return function(){return a}},
k=f(!1),g=f(!0);return{noop:function(){},compose:function(a,c){return function(){return a(c.apply(null,arguments))}},constant:f,identity:function(a){return a},tripleEquals:function(a,c){return a===c},curry:function(a){for(var c=new d(arguments.length-1),b=1;b<arguments.length;b++)c[b-1]=arguments[b];return function(){for(var b=new d(arguments.length),e=0;e<b.length;e++)b[e]=arguments[e];b=c.concat(b);return a.apply(null,b)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new e(a);
}},apply:function(a){return a()},call:function(a){a()},never:k,always:g}});n("global!Object",Object);l("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(d,e){var f=d.never,k=d.always,g=function(){return a},a=function(){var b=function(b){return b.isNone()},a=function(b){return b()},c=function(b){return b},b={fold:function(b,a){return b()},is:f,isSome:f,isNone:k,getOr:c,getOrThunk:a,getOrDie:function(b){throw Error(b||"error: getOrDie called on none.");},or:c,orThunk:a,
map:g,ap:g,each:function(){},bind:g,flatten:g,exists:f,forall:k,filter:g,equals:b,equals_:b,toArray:function(){return[]},toString:d.constant("none()")};e.freeze&&e.freeze(b);return b}(),c=function(b){var d=function(){return b},e=function(){return l},m=function(a){return a(b)},l={fold:function(a,c){return c(b)},is:function(a){return b===a},isSome:k,isNone:f,getOr:d,getOrThunk:d,getOrDie:d,or:e,orThunk:e,map:function(a){return c(a(b))},ap:function(a){return a.fold(g,function(a){return c(a(b))})},each:function(a){a(b)},
bind:m,flatten:d,exists:m,forall:m,filter:function(c){return c(b)?l:a},equals:function(a){return a.is(b)},equals_:function(a,c){return a.fold(f,function(a){return c(b,a)})},toArray:function(){return[b]},toString:function(){return"some("+b+")"}};return l};return{some:c,none:g,from:function(b){return null===b||void 0===b?a:c(b)}}});n("global!String",String);l("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(d,e,f,k){var g=function(){var a=
e.prototype.indexOf,b=function(b,h){return a.call(b,h)},h=function(a,b){var h;a:{h=0;for(var u=a.length;h<u;++h)if(a[h]===b)break a;h=-1}return h};return void 0===a?h:b}(),a=function(a,b){return-1<g(a,b)},c=function(a,b){for(var h=a.length,c=new e(h),d=0;d<h;d++)c[d]=b(a[d],d,a);return c},b=function(a,b){for(var h=0,c=a.length;h<c;h++)b(a[h],h,a)},l=function(a,b){for(var h=a.length-1;0<=h;h--)b(a[h],h,a)},r=function(a,b){for(var h=[],c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)&&h.push(e)}return h},
m=function(a,b){for(var h=0,c=a.length;h<c;h++)if(b(a[h],h,a))return d.some(h);return d.none()},t=e.prototype.push,s=function(a){for(var b=[],h=0,c=a.length;h<c;++h){if(!e.prototype.isPrototypeOf(a[h]))throw new f("Arr.flatten item "+h+" was not an array, input: "+a);t.apply(b,a[h])}return b},n=function(a,b){for(var h=0,c=a.length;h<c;++h)if(!0!==b(a[h],h,a))return!1;return!0},p=e.prototype.slice;return{map:c,each:b,eachr:l,partition:function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e];
(b(g,e,a)?c:d).push(g)}return{pass:c,fail:d}},filter:r,groupBy:function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],g=0,f=a.length;g<f;g++){var k=a[g],m=b(k);m!==c&&(d.push(e),e=[]);c=m;e.push(k)}0!==e.length&&d.push(e);return d},indexOf:function(a,b){var c=g(a,b);return-1===c?d.none():d.some(c)},foldr:function(a,b,c){l(a,function(a){c=b(c,a)});return c},foldl:function(a,c,d){b(a,function(a){d=c(d,a)});return d},find:function(a,b){for(var c=0,e=a.length;c<e;c++){var g=a[c];if(b(g,c,
a))return d.some(g)}return d.none()},findIndex:m,flatten:s,bind:function(a,b){var d=c(a,b);return s(d)},forall:n,exists:function(a,b){return m(a,b).isSome()},contains:a,equal:function(a,b){return a.length===b.length&&n(a,function(a,c){return a===b[c]})},reverse:function(a){a=p.call(a,0);a.reverse();return a},chunk:function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},difference:function(b,c){return r(b,function(b){return!a(c,b)})},mapToObject:function(a,b){for(var c=
{},d=0,e=a.length;d<e;d++){var g=a[d];c[k(g)]=b(g,d)}return c},pure:function(a){return[a]},sort:function(a,b){var c=p.call(a,0);c.sort(b);return c},range:function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c}}});l("global!console",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});n("global!document",document);l("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(d,e,f,k){var g=function(a){if(null===
a||void 0===a)throw new e("Node cannot be null or undefined");return{dom:d.constant(a)}};return{fromHtml:function(a,c){var b=(c||k).createElement("div");b.innerHTML=a;if(!b.hasChildNodes()||1<b.childNodes.length)throw f.error("HTML does not have a single root node",a),"HTML must have a single root node";return g(b.childNodes[0])},fromTag:function(a,c){var b=(c||k).createElement(a);return g(b)},fromText:function(a,c){var b=(c||k).createTextNode(a);return g(b)},fromDom:g}});l("tinymce.plugins.visualchars.core.Data",
[],function(){var d={"\u00a0":"nbsp","\u00ad":"shy"},e=function(d,e){var a,c="";for(a in d)c+=a;return RegExp("["+c+"]",e?"g":"")},f=function(d){var e,a="";for(e in d)a&&(a+=","),a+="span.mce-"+d[e];return a};return{charMap:d,regExp:e(d),regExpGlobal:e(d,!0),selector:f(d),charMapToRegExp:e,charMapToSelector:f}});l("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,
ENTITY:6,NOTATION:12}});l("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(d){var e=function(a){return a.dom().nodeName.toLowerCase()},f=function(a){return a.dom().nodeType},k=function(a){return function(b){return f(b)===a}},g=k(d.ELEMENT),a=k(d.TEXT),k=k(d.DOCUMENT);return{name:e,type:f,value:function(a){return a.dom().nodeValue},isElement:g,isText:a,isDocument:k,isComment:function(a){return f(a)===d.COMMENT||"#comment"===e(a)}}});l("tinymce.plugins.visualchars.core.Html",
["tinymce.plugins.visualchars.core.Data"],function(d){return{wrapCharWithSpan:function(e){return'<span data-mce-bogus="1" class="mce-'+d.charMap[e]+'">'+e+"</span>"}}});l("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(d,e,f,k,g){var a=function(c,b){var g=[],f=c.dom(),f=d.map(f.childNodes,e.fromDom);d.each(f,function(c){b(c)&&(g=g.concat([c]));
g=g.concat(a(c,b))});return g};return{isMatch:function(a){return f.isText(a)&&void 0!==f.value(a)&&k.regExp.test(f.value(a))},filterDescendants:a,findParentElm:function(a,b){for(;a.parentNode;){if(a.parentNode===b)return a;a=a.parentNode}},replaceWithSpans:function(a){return a.replace(k.regExpGlobal,g.wrapCharWithSpan)}}});l("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element",
"ephox.sugar.api.node.Node"],function(d,e,f,k,g){var a=function(a,c){var d,m,l=e.filterDescendants(k.fromDom(c),e.isMatch);f.each(l,function(c){var f=e.replaceWithSpans(g.value(c));for(m=a.dom.create("div",null,f);d=m.lastChild;)a.dom.insertAfter(d,c.dom());a.dom.remove(c.dom())})},c=function(a,c){var e=a.dom.select(d.selector,c);f.each(e,function(c){a.dom.remove(c,1)})};return{show:a,hide:c,toggle:function(b){var d=b.getBody(),g=b.selection.getBookmark(),f=e.findParentElm(b.selection.getNode(),d),
f=void 0!==f?f:d;c(b,f);a(b,f);b.selection.moveToBookmark(g)}}});l("tinymce.plugins.visualchars.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Delay","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.plugins.visualchars.core.VisualChars"],function(d,e,f,k,g){d.add("visualchars",function(a){var c=this,b,d=function(){var b=this;a.on("VisualChars",function(a){b.active(a.state)})},f=e.debounce(function(){g.toggle(a)},300);if(!1!==a.settings.forced_root_block)a.on("keydown",function(b){!0===
c.state&&(13===b.keyCode?g.toggle(a):f())});a.addCommand("mceVisualChars",function(){var d=a.getBody(),e=a.selection,f;b=!b;c.state=b;a.fire("VisualChars",{state:b});f=e.getBookmark();!0===b?g.show(a,d):g.hide(a,d);e.moveToBookmark(f)});a.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:d});a.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:d,selectable:!0,context:"view",prependToContext:!0})});return function(){}});
q("tinymce.plugins.visualchars.Plugin")()})();

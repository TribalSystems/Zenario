(function(){var w={},x=function(a){var b=w[a];if(void 0===b)throw"module ["+a+"] was undefined";if(void 0===b.instance){for(var e=w[a],g=e.deps,l=e.defn,h=g.length,m=Array(h),c=0;c<h;++c)m[c]=x(g[c]);g=l.apply(null,m);if(void 0===g)throw"module ["+a+"] returned undefined";e.instance=g}return b.instance},k=function(a,b,e){if("string"!==typeof a)throw"module id must be a string";if(void 0===b)throw"no dependencies for "+a;if(void 0===e)throw"no definition function for "+a;w[a]={deps:b,defn:e,instance:void 0}},
s=function(a,b){k(a,[],function(){return b})};s("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);k("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.dom.DOMUtils")});k("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.Env")});k("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.PluginManager")});k("tinymce.core.ui.Menu",["global!tinymce.util.Tools.resolve"],
function(a){return a("tinymce.ui.Menu")});k("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(a){return a("tinymce.util.Tools")});s("global!Array",Array);s("global!Error",Error);k("ephox.katamari.api.Fun",["global!Array","global!Error"],function(a,b){var e=function(a){return function(){return a}},g=e(!1),l=e(!0);return{noop:function(){},compose:function(a,b){return function(){return a(b.apply(null,arguments))}},constant:e,identity:function(a){return a},tripleEquals:function(a,
b){return a===b},curry:function(b){for(var e=new a(arguments.length-1),c=1;c<arguments.length;c++)e[c-1]=arguments[c];return function(){for(var c=new a(arguments.length),g=0;g<c.length;g++)c[g]=arguments[g];c=e.concat(c);return b.apply(null,c)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new b(a);}},apply:function(a){return a()},call:function(a){a()},never:g,always:l}});s("global!Object",Object);k("ephox.katamari.api.Option",["ephox.katamari.api.Fun",
"global!Object"],function(a,b){var e=a.never,g=a.always,l=function(){return h},h=function(){var c=function(a){return a.isNone()},t=function(a){return a()},h=function(a){return a},c={fold:function(a,c){return a()},is:e,isSome:e,isNone:g,getOr:h,getOrThunk:t,getOrDie:function(a){throw Error(a||"error: getOrDie called on none.");},or:h,orThunk:t,map:l,ap:l,each:function(){},bind:l,flatten:l,exists:e,forall:g,filter:l,equals:c,equals_:c,toArray:function(){return[]},toString:a.constant("none()")};b.freeze&&
b.freeze(c);return c}(),m=function(a){var b=function(){return a},k=function(){return q},n=function(b){return b(a)},q={fold:function(b,f){return f(a)},is:function(b){return a===b},isSome:g,isNone:e,getOr:b,getOrThunk:b,getOrDie:b,or:k,orThunk:k,map:function(b){return m(b(a))},ap:function(b){return b.fold(l,function(b){return m(b(a))})},each:function(b){b(a)},bind:n,flatten:b,exists:n,forall:n,filter:function(b){return b(a)?q:h},equals:function(b){return b.is(a)},equals_:function(b,f){return b.fold(e,
function(b){return f(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return q};return{some:m,none:l,from:function(a){return null===a||void 0===a?h:m(a)}}});s("global!String",String);k("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(a,b,e,g){var l=function(){var p=b.prototype.indexOf,a=function(a,d){return p.call(a,d)},d=function(a,p){var d;a:{d=0;for(var b=a.length;d<b;++d)if(a[d]===p)break a;d=-1}return d};
return void 0===p?d:a}(),h=function(a,b){return-1<l(a,b)},k=function(a,z){for(var d=a.length,v=new b(d),c=0;c<d;c++)v[c]=z(a[c],c,a);return v},c=function(a,b){for(var d=0,c=a.length;d<c;d++)b(a[d],d,a)},t=function(a,b){for(var d=a.length-1;0<=d;d--)b(a[d],d,a)},r=function(a,b){for(var d=[],c=0,f=a.length;c<f;c++){var e=a[c];b(e,c,a)&&d.push(e)}return d},n=function(p,b){for(var d=0,c=p.length;d<c;d++)if(b(p[d],d,p))return a.some(d);return a.none()},q=b.prototype.push,u=function(a){for(var c=[],d=0,
v=a.length;d<v;++d){if(!b.prototype.isPrototypeOf(a[d]))throw new e("Arr.flatten item "+d+" was not an array, input: "+a);q.apply(c,a[d])}return c},f=function(a,b){for(var d=0,c=a.length;d<c;++d)if(!0!==b(a[d],d,a))return!1;return!0},y=b.prototype.slice;return{map:k,each:c,eachr:t,partition:function(a,b){for(var d=[],c=[],f=0,e=a.length;f<e;f++){var g=a[f];(b(g,f,a)?d:c).push(g)}return{pass:d,fail:c}},filter:r,groupBy:function(a,b){if(0===a.length)return[];for(var d=b(a[0]),c=[],f=[],e=0,g=a.length;e<
g;e++){var h=a[e],u=b(h);u!==d&&(c.push(f),f=[]);d=u;f.push(h)}0!==f.length&&c.push(f);return c},indexOf:function(b,c){var d=l(b,c);return-1===d?a.none():a.some(d)},foldr:function(a,b,d){t(a,function(a){d=b(d,a)});return d},foldl:function(a,b,d){c(a,function(a){d=b(d,a)});return d},find:function(b,c){for(var d=0,f=b.length;d<f;d++){var e=b[d];if(c(e,d,b))return a.some(e)}return a.none()},findIndex:n,flatten:u,bind:function(a,b){var d=k(a,b);return u(d)},forall:f,exists:function(a,b){return n(a,b).isSome()},
contains:h,equal:function(a,b){return a.length===b.length&&f(a,function(a,c){return a===b[c]})},reverse:function(a){a=y.call(a,0);a.reverse();return a},chunk:function(a,b){for(var d=[],c=0;c<a.length;c+=b){var f=a.slice(c,c+b);d.push(f)}return d},difference:function(a,b){return r(a,function(a){return!h(b,a)})},mapToObject:function(a,b){for(var d={},c=0,f=a.length;c<f;c++){var e=a[c];d[g(e)]=b(e,c)}return d},pure:function(a){return[a]},sort:function(a,b){var c=y.call(a,0);c.sort(b);return c},range:function(a,
b){for(var c=[],f=0;f<a;f++)c.push(b(f));return c}}});k("tinymce.plugins.contextmenu.RangePoint",["ephox.katamari.api.Arr"],function(a){return{isXYWithinRange:function(b,e,g){return g.collapsed?!1:a.foldl(g.getClientRects(),function(a,g){return a||b>=g.left&&b<=g.right&&e>=g.top&&e<=g.bottom},!1)}}});k("tinymce.plugins.contextmenu.Plugin","tinymce.core.dom.DOMUtils tinymce.core.Env tinymce.core.PluginManager tinymce.core.ui.Menu tinymce.core.util.Tools tinymce.plugins.contextmenu.RangePoint".split(" "),
function(a,b,e,g,k,h){var m=a.DOM;e.add("contextmenu",function(a){var e,r,n=a.settings.contextmenu_never_use_native,q=function(a,b){return a.target&&"IMG"===a.target.nodeName&&!1===h.isXYWithinRange(a.clientX,a.clientY,b)};a.on("mousedown",function(e){if(b.mac&&b.webkit&&2===e.button&&(!e.ctrlKey||n)&&a.selection.isCollapsed())a.once("contextmenu",function(b){b.target&&"IMG"===b.target.nodeName||a.selection.placeCaretAt(b.clientX,b.clientY)})});a.on("contextmenu",function(b){var f;if(!b.ctrlKey||
n){q(b,a.selection.getRng())&&a.selection.select(b.target);b.preventDefault();f=a.settings.contextmenu||"link openlink image inserttable | cell row column deletetable";if(e)e.show();else{var h=[];k.each(f.split(/[ ,]/),function(b){var e=a.menuItems[b];"|"==b&&(e={text:b});e&&(e.shortcut="",h.push(e))});for(f=0;f<h.length;f++)"|"==h[f].text&&(0!==f&&f!=h.length-1||h.splice(f,1));e=(new g({items:h,context:"contextmenu",classes:"contextmenu"})).renderTo();e.on("hide",function(a){a.control===this&&(r=
!1)});a.on("remove",function(){e.remove();e=null})}f={x:b.pageX,y:b.pageY};a.inline||(f=m.getPos(a.getContentAreaContainer()),f.x+=b.clientX,f.y+=b.clientY);e.moveTo(f.x,f.y);r=!0}});return{isContextMenuVisible:function(){return!0===r}}});return function(){}});x("tinymce.plugins.contextmenu.Plugin")()})();

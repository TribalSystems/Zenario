tinymce.ThemeManager.add("modern",function(b){function B(e,c){var f=[],a;if(e)return t(e.split(/[ ,]/),function(d){function e(){function c(b){return function(e,a){for(var c,n=a.parents.length;n--&&(c=a.parents[n].nodeName,"OL"!=c&&"UL"!=c););d.active(e&&c==b)}}var a=b.selection;"bullist"==r&&a.selectorChanged("ul > li",c("UL"));"numlist"==r&&a.selectorChanged("ol > li",c("OL"));d.settings.stateSelector&&a.selectorChanged(d.settings.stateSelector,function(b){d.active(b)},!0);d.settings.disabledStateSelector&&
a.selectorChanged(d.settings.disabledStateSelector,function(b){d.disabled(b)})}var r;if("|"==d)a=null;else if(u.has(d))d={type:d,size:c},f.push(d),a=null;else if(a||(a={type:"buttongroup",items:[]},f.push(a)),b.buttons[d])if(r=d,d=b.buttons[r],"function"==typeof d&&(d=d()),d.type=d.type||"button",d.size=c,d=u.create(d),a.items.push(d),b.initialized)e();else b.on("init",e)}),{type:"toolbar",layout:"flow",items:f}}function x(b){function g(c){if(c)return f.push(B(c,b)),!0}var f=[];if(tinymce.isArray(c.toolbar)){if(0===
c.toolbar.length)return;tinymce.each(c.toolbar,function(b,a){c["toolbar"+(a+1)]=b});delete c.toolbar}for(var a=1;10>a&&g(c["toolbar"+a]);a++);f.length||!1===c.toolbar||g(c.toolbar||H);if(f.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:f}}function y(){function e(a){var e,d,f,g,m;m=tinymce.makeMap((c.removed_menuitems||"").split(/[ ,]/));c.menu?(d=c.menu[a],g=!0):d=C[a];if(d){e={text:d.title};f=[];t((d.items||"").split(/[ ,]/),function(a){"|"!=a&&
!b.menuItems[a]||m[a]||f.push("|"==a?{text:"|"}:b.menuItems[a])});g||t(b.menuItems,function(b){b.context==a&&("before"==b.separator&&f.push({text:"|"}),b.prependToContext?f.unshift(b):f.push(b),"after"==b.separator&&f.push({text:"|"}))});for(d=0;d<f.length;d++)"|"==f[d].text&&(0!==d&&d!=f.length-1||f.splice(d,1));e.menu=f;if(!e.menu.length)return null}return e}var g,f=[],a=[];if(c.menu)for(g in c.menu)a.push(g);else for(g in C)a.push(g);g="string"==typeof c.menubar?c.menubar.split(/[ ,]/):a;for(a=
0;a<g.length;a++){var d=g[a];(d=e(d))&&f.push(d)}return f}function z(c){function g(b){(b=c.find(b)[0])&&b.focus(!0)}b.shortcuts.add("Alt+F9","",function(){g("menubar")});b.shortcuts.add("Alt+F10","",function(){g("toolbar")});b.shortcuts.add("Alt+F11","",function(){g("elementpath")});c.on("cancel",function(){b.focus()})}function A(e,g){var f,a,d,h;d=b.getContainer();h=b.getContentAreaContainer().firstChild;a=d.clientWidth;f=h.clientWidth;null!==e&&(e=Math.max(c.min_width||100,e),e=Math.min(c.max_width||
65535,e),k.setStyle(d,"width",e+(a-f)),k.setStyle(h,"width",e));g=Math.max(c.min_height||100,g);g=Math.min(c.max_height||65535,g);k.setStyle(h,"height",g);b.fire("ResizeEditor")}function D(){function e(n){var a,c;a=tinymce.DOM.getPos(b.getContentAreaContainer());n=b.dom.getRect(n);c=b.dom.getRoot();"BODY"==c.nodeName&&(n.x-=c.ownerDocument.documentElement.scrollLeft||c.scrollLeft,n.y-=c.ownerDocument.documentElement.scrollTop||c.scrollTop);n.x+=a.x;n.y+=a.y;return n}function g(){t(b.contextToolbars,
function(b){b.panel&&b.panel.hide()})}function f(b,a,c){a=a?a.substr(0,2):"";t({t:"down",b:"up"},function(d,e){b.classes.toggle("arrow-"+d,c(e,a.substr(0,1)))});t({l:"left",r:"right"},function(d,e){b.classes.toggle("arrow-"+d,c(e,a.substr(1,1)))})}function a(b){return{left:b.x,top:b.y,width:b.w,height:b.h,right:b.x+b.w,bottom:b.y+b.h}}function d(b,d,e,f,g){g=a({x:b,y:d,w:g.w,h:g.h});c.inline_toolbar_position_handler&&(g=c.inline_toolbar_position_handler({elementRect:a(e),contentAreaRect:a(f),panelRect:g}));
return g}function h(b,a){b.moveTo(a.left,a.top)}function m(a){var c,l,q,k,p;b.removed||(a&&a.toolbar.panel?(p="bc-tc tc-bc tl-bl bl-tl tr-br br-tr".split(" "),k=a.toolbar.panel,k.show(),l=e(a.element),c=tinymce.DOM.getRect(k.getEl()),q=tinymce.DOM.getRect(b.getContentAreaContainer()||b.getBody()),l.w=a.element.clientWidth,l.h=a.element.clientHeight,b.inline||(q.w=b.getDoc().documentElement.offsetWidth),b.selection.controlSelection.isResizable(a.element)&&(l=s.inflate(l,0,8)),a=s.findBestRelativePosition(c,
l,q,p),l=s.clamp(l,q),a?(p=s.relativePosition(c,l,a),h(k,d(p.x,p.y,l,q,c))):(q.h+=40,(l=s.intersect(q,l))?(a=s.findBestRelativePosition(c,l,q,["bc-tc","bl-tl","br-tr"]))?(p=s.relativePosition(c,l,a),h(k,d(p.x,p.y,l,q,c))):h(k,d(l.x,l.y,l,q,c)):k.hide()),f(k,a,function(b,a){return(!l||40<l.w)&&b===a})):g())}function k(){tinymce.util.Delay.requestAnimationFrame(function(){b.selection&&m(v(b.selection.getNode()))})}function G(){w||(w=b.selection.getScrollContainer()||b.getWin(),tinymce.$(w).on("scroll",
k),b.on("remove",function(){tinymce.$(w).off("scroll")}))}function F(a){var c;a.toolbar.panel?a.toolbar.panel.show():(G(),c=u.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:B(a.toolbar.items),oncancel:function(){b.focus()}}),a.toolbar.panel=c,c.renderTo(document.body).reflow());m(a)}function p(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&
b.panel.hide()})}function v(a){var c,d,e=b.contextToolbars||[];d=b.$(a).parents().add(a);for(a=d.length-1;0<=a;a--)for(c=e.length-1;0<=c;c--)if(e[c].predicate(d[a]))return{toolbar:e[c],element:d[a]};return null}var w;b.on("click keyup setContent",function(a){("setcontent"!=a.type||a.selection)&&tinymce.util.Delay.setEditorTimeout(b,function(){var a;(a=v(b.selection.getNode()))?(p(),F(a)):p()})});b.on("blur hide",p);b.on("ObjectResizeStart",function(){var a=v(b.selection.getNode());a&&a.toolbar.panel&&
a.toolbar.panel.hide()});b.on("nodeChange ResizeEditor ResizeWindow",k);b.on("remove",function(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.remove()});b.contextToolbars={}});b.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var a=v(b.selection.getNode());a&&a.toolbar.panel&&a.toolbar.panel.items()[0].focus()})}function E(b){return function(){if(b.initialized)b.fire("SkinLoaded");else b.on("init",function(){b.fire("SkinLoaded")})}}function I(e){function g(){if(h&&h.moveRel&&
h.visible()&&!h._fixed){var a=b.selection.getScrollContainer(),c=b.getBody(),d=0,e=0;a&&(e=k.getPos(c),a=k.getPos(a),d=Math.max(0,a.x-e.x),e=Math.max(0,a.y-e.y));h.fixed(!1).moveRel(c,b.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(d,e)}}function f(){h&&(h.show(),g(),k.addClass(b.getBody(),"mce-edit-focus"))}function a(){h&&(h.hide(),J.hideAll(),k.removeClass(b.getBody(),"mce-edit-focus"))}function d(){h?h.visible()||f():(h=m.panel=u.create({type:r?"panel":"floatpanel",role:"application",
classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!r,border:1,items:[!1===c.menubar?null:{type:"menubar",border:"0 0 1 0",items:y()},x(c.toolbar_items_size)]}),b.fire("BeforeRenderUI"),h.renderTo(r||document.body).reflow(),z(h),f(),D(),b.on("nodeChange",g),b.on("activate",f),b.on("deactivate",a),b.nodeChanged())}var h,r;c.fixed_toolbar_container&&(r=k.select(c.fixed_toolbar_container)[0]);c.content_editable=!0;b.on("focus",function(){e.skinUiCss?
tinymce.DOM.styleSheetLoader.load(e.skinUiCss,d,d):d()});b.on("blur hide",a);b.on("remove",function(){h&&(h.remove(),h=null)});e.skinUiCss&&tinymce.DOM.styleSheetLoader.load(e.skinUiCss,E(b));return{}}function K(e){var g,f,a,d;e.skinUiCss&&tinymce.DOM.styleSheetLoader.load(e.skinUiCss,E(b));a=m.panel=u.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===c.menubar?null:{type:"menubar",border:"0 0 1 0",items:y()},x(c.toolbar_items_size),
{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});!1!==c.resize&&(d={type:"resizehandle",direction:c.resize,onResizeStart:function(){var a=b.getContentAreaContainer().firstChild;g=a.clientWidth;f=a.clientHeight},onResize:function(a){"both"==c.resize?A(g+a.deltaX,f+a.deltaY):A(null,f+a.deltaY)}});!1!==c.statusbar&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},d]});b.fire("BeforeRenderUI");
b.on("SwitchMode",function(){return function(b){"readonly"==b.mode?a.find("*").disabled(!0):a.find("*").disabled(!1)}}());a.renderBefore(e.targetNode).reflow();c.readonly&&b.setMode("readonly");c.width&&tinymce.DOM.setStyle(a.getEl(),"width",c.width);b.on("remove",function(){a.remove();a=null});z(a);D();return{iframeContainer:a.find("#iframe")[0].getEl(),editorContainer:a.getEl()}}function L(e){zenario.getContainerIdFromEl(e.targetNode);var g=document.getElementById("zenario_at_toolbars");e.skinUiCss&&
tinymce.DOM.loadCSS(e.skinUiCss);e=m.panel=u.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===c.menubar?null:{type:"menubar",border:"0 0 1 0",items:y()},{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:x()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});g.innerHTML="";b.fire("BeforeRenderUI");e.renderTo(g).reflow();z(e);c.content_editable=!0;return{}}
var m=this,c=b.settings,u=tinymce.ui.Factory,t=tinymce.each,k=tinymce.DOM,s=tinymce.geom.Rect,J=tinymce.ui.FloatPanel,C={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},H="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";
m.renderUI=function(e){var g=!1!==c.skin?c.skin||"lightgray":!1;if(g){var f=c.skin_url,f=f?b.documentBaseURI.toAbsolute(f):tinymce.baseURL+"/skins/"+g;e.skinUiCss=7>=tinymce.Env.documentMode?f+"/skin.ie7.min.css":f+"/skin.min.css";b.contentCSS.push(f+"/content"+(b.inline?".inline":"")+".min.css")}b.on("ProgressState",function(a){m.throbber=m.throbber||new tinymce.ui.Throbber(m.panel.getEl("body"));a.state?m.throbber.show(a.time):m.throbber.hide()});return c.zenario_inline_ui?L(e):c.inline?I(e):K(e)};
m.resizeTo=A;m.resizeBy=function(c,g){var f=b.getContentAreaContainer();m.resizeTo(f.clientWidth+c,f.clientHeight+g)}});

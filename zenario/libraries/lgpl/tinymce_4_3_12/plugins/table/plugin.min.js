(function(U,J){function V(p,B){for(var u,a=[],v=0;v<p.length;++v){if(!(u=Q[p[v]]))a:{u=U;for(var x=p[v].split(/[.\/]/),q=0;q<x.length;++q){if(!u[x[q]]){u=void 0;break a}u=u[x[q]]}}if(!u)throw"module definition dependecy not found: "+p[v];a.push(u)}B.apply(null,a)}function I(p,B,u){if("string"!==typeof p)throw"invalid module definition, module id must be defined and be a string";if(B===J)throw"invalid module definition, dependencies must be specified";if(u===J)throw"invalid module definition, definition function must be specified";
V(B,function(){Q[p]=u.apply(null,arguments)})}var Q={};I("tinymce/tableplugin/Utils",["tinymce/Env"],function(p){return{getSpanVal:function(p,u){return parseInt(p.getAttribute(u)||1,10)},paddCell:function(B){p.ie&&!(9<p.ie)||B.hasChildNodes()||(B.innerHTML='<br data-mce-bogus="1" />')}}});I("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(p,B,u){var a=p.each,v=u.getSpanVal;return function(x,q,e){function w(){x.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}
function z(a,c){if(!a)return[];c=p.map(c.split(","),function(a){return a.toLowerCase()});return p.grep(a.childNodes,function(a){return-1!==p.inArray(c,a.nodeName.toLowerCase())})}function b(){var c=0;m=[];s=0;a(["thead","tbody","tfoot"],function(b){var d=z(q,b)[0],d=z(d,"tr");a(d,function(d,h){h+=c;a(z(d,"td,th"),function(a,c){var L,d,k,f;if(m[h])for(;m[h][c];)c++;k=v(a,"rowspan");f=v(a,"colspan");for(d=h;d<h+k;d++)for(m[d]||(m[d]=[]),L=c;L<c+f;L++)m[d][L]={part:b,real:d==h&&L==c,elm:a,rowspan:k,
colspan:f};s=Math.max(s,c+1)})});c+=d.length})}function g(a){x.fire("newrow",{node:a});return a}function D(a){x.fire("newcell",{node:a});return a}function E(a,c){a=a.cloneNode(c);a.removeAttribute("id");return a}function t(a,c){var d;if(d=m[c])return d[a]}function d(a,c,d){a&&(d=parseInt(d,10),1===d?a.removeAttribute(c,1):a.setAttribute(c,d,1))}function k(a){return a&&(!!y.getAttrib(a.elm,"data-mce-selected")||a==e)}function n(){var c=[];a(q.rows,function(d){a(d.cells,function(a){if(y.getAttrib(a,
"data-mce-selected")||e&&a==e.elm)return c.push(d),!1})});return c}function l(c){var h,m={};!1!==x.settings.table_clone_elements&&(m=p.makeMap((x.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));p.walk(c,function(d){var b;if(3==d.nodeType)return a(y.getParents(d.parentNode,null,c).reverse(),function(a){m[a.nodeName]&&(a=E(a,!1),h?b&&b.appendChild(a):h=b=a,b=a)}),b&&(b.innerHTML=B.ie&&10>B.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");
c=E(c,!1);D(c);d(c,"rowSpan",1);d(c,"colSpan",1);h?c.appendChild(h):u.paddCell(c);return c}function f(){var c=y.createRng();a(y.select("tr",q),function(a){0===a.cells.length&&y.remove(a)});if(0===y.select("tr",q).length)c.setStartBefore(q),c.setEndBefore(q),H.setRng(c),y.remove(q);else if(a(y.select("thead,tbody,tfoot",q),function(a){0===a.rows.length&&y.remove(a)}),b(),A&&(c=m[Math.min(m.length-1,A.y)]))H.select(c[Math.min(c.length-1,A.x)].elm,!0),H.collapse(!0)}function K(a,c,d,b){var h,k,f,e,s;
h=m[c][a].elm.parentNode;for(f=1;f<=d;f++)if(h=y.getNext(h,"tr")){for(k=a;0<=k;k--)if(s=m[c+f][k].elm,s.parentNode==h){for(e=1;e<=b;e++)y.insertAfter(l(s),s);break}if(-1==k)for(e=1;e<=b;e++)h.insertBefore(l(h.cells[0]),h.cells[0])}}function h(){a(m,function(c,h){a(c,function(a,c){var b,m,f;if(k(a)&&(a=a.elm,b=v(a,"colspan"),m=v(a,"rowspan"),1<b||1<m)){d(a,"rowSpan",1);d(a,"colSpan",1);for(f=0;f<b-1;f++)y.insertAfter(l(a),a);K(c,h,m-1,b)}})})}function r(c){var d=[];a(c,function(c){a(c,function(a){d.push(a)})});
return d}function C(c){var d;a(m,function(h,b){a(h,function(a,h){if(a.elm==c)return d={x:h,y:b},!1});return!d});return d}function c(){var c,d;c=d=0;a(m,function(h,b){a(h,function(a,h){var f,e;k(a)&&(a=m[b][h],h>c&&(c=h),b>d&&(d=b),a.real&&(f=a.colspan-1,e=a.rowspan-1,f&&h+f>c&&(c=h+f),e&&b+e>d&&(d=b+e)))})});return{x:c,y:d}}var m,s,A,F,H=x.selection,y=H.dom;q=q||y.getParent(H.getStart(!0),"table");b();if(e=e||y.getParent(H.getStart(!0),"th,td"))A=C(e),F=c(),e=t(A.x,A.y);p.extend(this,{deleteTable:function(){var a=
y.createRng();q!==x.getBody()&&(a.setStartAfter(q),a.setEndAfter(q),H.setRng(a),y.remove(q))},split:h,merge:function(c,e,s){var l,n,r,E,g,q,D;c?(l=C(c),n=l.x,r=l.y,l=n+(e-1),E=r+(s-1)):(A=F=null,a(m,function(c,d){a(c,function(a,c){k(a)&&(A||(A={x:c,y:d}),F={x:c,y:d})})}),A&&(n=A.x,r=A.y,l=F.x,E=F.y));g=t(n,r);c=t(l,E);if(g&&c&&g.part==c.part){h();b();g=t(n,r).elm;d(g,"colSpan",l-n+1);d(g,"rowSpan",E-r+1);for(s=r;s<=E;s++)for(e=n;e<=l;e++)m[s]&&m[s][e]&&(c=m[s][e].elm,c!=g&&(q=p.grep(c.childNodes),
a(q,function(a){g.appendChild(a)}),q.length&&(q=p.grep(g.childNodes),D=0,a(q,function(a){"BR"==a.nodeName&&D++<q.length-1&&g.removeChild(a)})),y.remove(c)));f()}},insertRow:function(c){var h,b,f,e,s,n,r,t,A;a(m,function(d,b){a(d,function(a){if(k(a)&&(a=a.elm,s=a.parentNode,n=g(E(s,!1)),h=b,c))return!1});if(c)return!h});if(h!==J){for(A=e=0;e<m[0].length;e+=A)if(m[h][e]&&(b=m[h][e].elm,A=v(b,"colspan"),b!=f)){if(!c){if(t=v(b,"rowspan"),1<t){d(b,"rowSpan",t+1);continue}}else if(0<h&&m[h-1][e]&&(r=m[h-
1][e].elm,t=v(r,"rowSpan"),1<t)){d(r,"rowSpan",t+1);continue}f=l(b);d(f,"colSpan",b.colSpan);n.appendChild(f);f=b}n.hasChildNodes()&&(c?s.parentNode.insertBefore(n,s):y.insertAfter(n,s))}},insertCol:function(c){var h,b;a(m,function(d){a(d,function(a,d){if(k(a)&&(h=d,c))return!1});if(c)return!h});a(m,function(a,e){var f,m,s;a[h]&&(f=a[h].elm,f!=b&&(s=v(f,"colspan"),m=v(f,"rowspan"),1==s?(c?f.parentNode.insertBefore(l(f),f):y.insertAfter(l(f),f),K(h,e,m-1,s)):d(f,"colSpan",f.colSpan+1),b=f))})},deleteCols:function(){var c=
[];if(q!==x.getBody()||1!=m[0].length&&p.grep(r(m),k).length!=r(m).length)a(m,function(h){a(h,function(h,b){k(h)&&-1===p.inArray(c,b)&&(a(m,function(a){a=a[b].elm;var c;c=v(a,"colSpan");1<c?d(a,"colSpan",c-1):y.remove(a)}),c.push(b))})}),f()},deleteRows:function(){function c(h){var b,f;a(h.cells,function(a){var c=v(a,"rowSpan");1<c&&(d(a,"rowSpan",c-1),b=C(a),K(b.x,b.y,1,1))});b=C(h.cells[0]);a(m[b.y],function(a){var c;a=a.elm;a!=f&&(c=v(a,"rowSpan"),1>=c?y.remove(a):d(a,"rowSpan",c-1),f=a)})}var h;
h=n();if(q!==x.getBody()||h.length!=q.rows.length)a(h.reverse(),function(a){c(a)}),f()},cutRows:function(){var a=n();if(q!==x.getBody()||a.length!=q.rows.length)return y.remove(a),f(),a},copyRows:function(){var c=n();a(c,function(a,h){c[h]=E(a,!0)});return c},pasteRows:function(c,h){var b=n(),f=b[h?0:b.length-1],e=f.cells.length;c&&(a(m,function(c){var h;e=0;a(c,function(a){a.real&&(e+=a.colspan);a.elm.parentNode==f&&(h=1)});if(h)return!1}),h||c.reverse(),a(c,function(a){var c,b=a.cells.length,m;
g(a);for(c=0;c<b;c++)m=a.cells[c],D(m),d(m,"colSpan",1),d(m,"rowSpan",1);for(c=b;c<e;c++)a.appendChild(D(l(a.cells[b-1])));for(c=e;c<b;c++)y.remove(a.cells[c]);h?f.parentNode.insertBefore(a,f):y.insertAfter(a,f)}),w())},getPos:C,setStartCell:function(a){A=C(a)},setEndCell:function(a){var c,h,b,d,f,e,s,k,l;F=C(a);if(A&&F){c=Math.min(A.x,F.x);h=Math.min(A.y,F.y);b=Math.max(A.x,F.x);d=Math.max(A.y,F.y);f=b;e=d;for(l=h;l<=d;l++)for(k=c;k<=b;k++)a=m[l][k],a.real&&(s=a.colspan-1,a=a.rowspan-1,s&&k+s>f&&
(f=k+s),a&&l+a>e&&(e=l+a));w();for(l=h;l<=e;l++)for(k=c;k<=f;k++)m[l][k]&&y.setAttrib(m[l][k].elm,"data-mce-selected","1")}},moveRelIdx:function(a,c){var h,b;h=C(a);h=h.y*s+h.x;do{h+=c;b=t(h%s,Math.floor(h/s));if(!b)break;if(b.elm!=a)return H.select(b.elm,!0),y.isEmpty(b.elm)&&H.collapse(!0),!0}while(b.elm==a);return!1},refresh:b})}});I("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(p,B,u,a,v){var x=a.each,
q=v.getSpanVal;return function(e){function w(){function a(b){function t(a,f){var k=a?"previousSibling":"nextSibling",c=e.dom.getParent(f,"tr"),m=c[k];if(m)return l(e,f,m,a),b.preventDefault(),!0;var m=e.dom.getParent(c,"table"),s=c.parentNode,n=s.nodeName.toLowerCase();if("tbody"===n||n===(a?"tfoot":"thead")){var n=e.dom.select(">tbody",m),g=n.indexOf(s);a&&0===g||!a&&g===n.length-1?(s=e.dom.select(">"+(a?"thead":"tfoot"),m),s=0!==s.length?s[0]:null):-1===g?(s="thead"===s.tagName.toLowerCase()?0:
n.length-1,s=n[s]):s=n[g+(a?-1:1)];if(null!==s)return(c=d(s,a))&&l(e,f,c,a),b.preventDefault(),!0}(k=m[k])?(e.selection.setCursorLocation(k,0),c=!0):(k=e.dom.getParent(m,"td,th"))?c=t(a,k,b):(c=d(c,!a),e.selection.setCursorLocation(c,0),b.preventDefault(),c=!1);return c}function d(a,b){var d=a&&a[b?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?e.dom.getParent(d,"td,th"):d}function k(a){var b=a.selection.getNode();return null!==a.dom.getParent(b,"tr")}function n(a,b){var d=0,c=0;x(a.children,
function(a,h){d+=q(a,"colspan");c=h;if(d>b)return!1});return c}function l(a,b,f,c){a=0;for(b=e.dom.getParent(b,"td,th");b.previousSibling;)b=b.previousSibling,a+=q(b,"colspan");b=n(f,a);f=f.childNodes[b];c=d(f,c);e.selection.setCursorLocation(c||f,0)}var f=b.keyCode;if((f==p.UP||f==p.DOWN)&&k(e)){var g=e.selection.getNode();B.setEditorTimeout(e,function(){var a=e.selection.getNode(),a=e.dom.getParent(a,"td,th"),d=e.dom.getParent(g,"td,th");a&&a!==d&&e.dom.getParent(a,"TABLE")===e.dom.getParent(d,
"TABLE")&&t(!b.shiftKey&&f===p.UP,g,b)},0)}}e.on("KeyDown",function(b){a(b)})}function z(){e.on("KeyDown",function(a){var b,g,d=e.dom;if(37==a.keyCode||38==a.keyCode)if(b=e.selection.getRng(),(g=d.getParent(b.startContainer,"table"))&&e.getBody().firstChild==g){var k=b,n=g.ownerDocument;b=n.createRange();b.setStartBefore(g);b.setEnd(k.endContainer,k.endOffset);k=n.createElement("body");k.appendChild(b.cloneContents());0===k.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,
"").length&&(b=d.createRng(),b.setStartBefore(g),b.setEndBefore(g),e.selection.setRng(b),a.preventDefault())}})}function b(){e.on("KeyDown SetContent VisualAid",function(){var a;for(a=e.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(0<a.nodeValue.length)break}else if(1==a.nodeType&&("BR"==a.tagName||!a.getAttribute("data-mce-bogus")))break;a&&"TABLE"==a.nodeName&&(e.settings.forced_root_block?e.dom.add(e.getBody(),e.settings.forced_root_block,e.settings.forced_root_block_attrs,u.ie&&
10>u.ie?"&nbsp;":'<br data-mce-bogus="1" />'):e.dom.add(e.getBody(),"br",{"data-mce-bogus":"1"}))});e.on("PreProcess",function(a){(a=a.node.lastChild)&&("BR"==a.nodeName||1==a.childNodes.length&&("BR"==a.firstChild.nodeName||"\u00a0"==a.firstChild.nodeValue))&&a.previousSibling&&"TABLE"==a.previousSibling.nodeName&&e.dom.remove(a)})}function g(){function a(){var b=e.selection.getRng(),g=e.selection.getNode(),d=e.dom.getParent(b.startContainer,"TD,TH"),k=d,n=e.dom.getParent(b.startContainer,"TABLE"),
l;n&&(l=n.parentNode);n=3==b.startContainer.nodeType&&0===b.startOffset&&0===b.endOffset&&k&&("TR"==g.nodeName||g==l);k=("TD"==g.nodeName||"TH"==g.nodeName)&&!k;if(n||k){d||(d=g);for(g=d.lastChild;g.lastChild;)g=g.lastChild;3==g.nodeType&&(b.setEnd(g,g.data.length),e.selection.setRng(b))}}e.on("KeyDown",function(){a()});e.on("MouseDown",function(b){2!=b.button&&a()})}(function(){function b(a){e.$(a).empty();v.paddCell(a)}e.on("keydown",function(g){if((g.keyCode==p.DELETE||g.keyCode==p.BACKSPACE)&&
!g.isDefaultPrevented()){var q,d,k;if(q=e.dom.getParent(e.selection.getStart(),"table"))d=e.dom.select("td,th",q),k=a.grep(d,function(a){return!!e.dom.getAttrib(a,"data-mce-selected")}),0===k.length?(q=e.dom.getParent(e.selection.getStart(),"td,th"),e.selection.isCollapsed()&&q&&e.dom.isEmpty(q)&&(g.preventDefault(),b(q),e.selection.select(q,!0),e.selection.collapse(!0))):(g.preventDefault(),e.undoManager.transact(function(){d.length==k.length?e.execCommand("mceTableDelete"):(a.each(k,b),e.selection.select(k[0],
!0),e.selection.collapse(!0))}))}})})();u.webkit&&(w(),g());u.gecko&&(z(),b());9<u.ie&&(z(),b())}});I("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(p,B,u){return function(a){function v(b){a.getBody().style.webkitUserSelect="";if(b||g)a.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),g=!1}function x(u){var t=u.target;if(!D&&t!==b&&(b=t,z&&w&&(t=q.getParent(t,"td,th"),z&&t&&z===q.getParent(t,
"table")||(t=q.getParent(z,"td,th")),(w!==t||g)&&z&&t&&z===q.getParent(t,"table")))){u.preventDefault();e||(e=new p(a,z,w),a.getBody().style.webkitUserSelect="none");e.setEndCell(t);g=!0;u=a.selection.getSel();try{u.removeAllRanges?u.removeAllRanges():u.empty()}catch(d){}}}var q=a.dom,e,w,z,b,g=!0,D;a.on("SelectionChange",function(a){g&&a.stopImmediatePropagation()},!0);a.on("MouseDown",function(a){2==a.button||D||(v(),w=q.getParent(a.target,"td,th"),z=q.getParent(w,"table"))});a.on("mouseover",x);
a.on("remove",function(){q.unbind(a.getDoc(),"mouseover",x);v()});a.on("MouseUp",function(){function g(a,b){var d=new B(a,a);do{if(3==a.nodeType&&0!==u.trim(a.nodeValue).length){b?p.setStart(a,0):p.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){b?p.setStartBefore(a):p.setEndBefore(a);break}}while(a=b?d.next():d.prev())}var p,d=a.selection,k,n,l;if(w){e&&(a.getBody().style.webkitUserSelect="");k=q.select("td[data-mce-selected],th[data-mce-selected]");if(0<k.length){p=q.createRng();n=k[0];
p.setStartBefore(n);p.setEndAfter(n);g(n,1);k=new B(n,q.getParent(k[0],"table"));do if("TD"==n.nodeName||"TH"==n.nodeName){if(!q.getAttrib(n,"data-mce-selected"))break;l=n}while(n=k.next());g(l);d.setRng(p)}a.nodeChanged();w=e=z=b=null}});a.on("KeyUp Drop SetContent",function(a){v("setcontent"==a.type);w=e=z=b=null;D=!1});a.on("ObjectResizeStart ObjectResized",function(a){D="objectresized"!=a.type});return{clear:v}}});I("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(p,
B){var u=p.each;return function(a){function v(){var b=a.settings.color_picker_callback;if(b)return function(){var e=this;b.call(a,function(a){e.value(a).fire("change")},e.value())}}function x(a){return{title:"Advanced",type:"form",defaults:{onchange:function(){g(a,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",
name:"borderColor",onaction:v()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:v()}]}]}}function q(a){return a?a.replace(/px$/,""):""}function e(a){/^[0-9]+$/.test(a)&&(a+="px");return a}function w(b){u(["left","center","right"],function(e){a.formatter.remove("align"+e,{},b)})}function z(b){u(["top","middle","bottom"],function(e){a.formatter.remove("valign"+e,{},b)})}function b(a,b,e){function g(a,d){d=d||[];p.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=
g(a.menu):(e.value=a.value,b&&b(e));d.push(e)});return d}return g(a,e||[])}function g(a,b,e){var g=b.toJSON(),f=a.parseStyle(g.style);e?(b.find("#borderColor").value(f["border-color"]||"")[0].fire("change"),b.find("#backgroundColor").value(f["background-color"]||"")[0].fire("change")):(f["border-color"]=g.borderColor,f["background-color"]=g.backgroundColor);b.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(f))))}function D(a,b,e){e=a.parseStyle(a.getAttrib(e,"style"));e["border-color"]&&
(b.borderColor=e["border-color"]);e["background-color"]&&(b.backgroundColor=e["background-color"]);b.style=a.serializeStyle(e)}function E(a,b,e){var g=a.parseStyle(a.getAttrib(b,"style"));u(e,function(a){g[a.name]=a.value});a.setAttrib(b,"style",a.serializeStyle(a.parseStyle(a.serializeStyle(g))))}var t=this;t.tableProps=function(){t.table(!0)};t.table=function(d){function k(){function c(a,b,e){if("TD"===a.tagName||"TH"===a.tagName)l.setStyle(a,b,e);else if(a.children)for(var d=0;d<a.children.length;d++)c(a.children[d],
b,e)}var b;g(l,this);r=p.extend(r,this.toJSON());!1===r["class"]&&delete r["class"];a.undoManager.transact(function(){f||(f=a.plugins.table.insertTable(r.cols||1,r.rows||1));a.dom.setAttribs(f,{style:r.style,"class":r["class"]});if(a.settings.table_style_by_css){if(C=[],C.push({name:"border",value:r.border}),C.push({name:"border-spacing",value:e(r.cellspacing)}),E(l,f,C),l.setAttribs(f,{"data-mce-border-color":r.borderColor,"data-mce-cell-padding":r.cellpadding,"data-mce-border":r.border}),f.children)for(var d=
0;d<f.children.length;d++)c(f.children[d],"border",r.border),c(f.children[d],"padding",e(r.cellpadding))}else a.dom.setAttribs(f,{border:r.border,cellpadding:r.cellpadding,cellspacing:r.cellspacing});l.getAttrib(f,"width")&&!a.settings.table_style_by_css?l.setAttrib(f,"width",q(r.width)):l.setStyle(f,"width",e(r.width));l.setStyle(f,"height",e(r.height));(b=l.select("caption",f)[0])&&!r.caption&&l.remove(b);!b&&r.caption&&(b=l.create("caption"),b.innerHTML=B.ie?"\u00a0":'<br data-mce-bogus="1"/>',
f.insertBefore(b,f.firstChild));w(f);r.align&&a.formatter.apply("align"+r.align,{},f);a.focus();a.addVisual()})}function n(c,b){var e=a.dom.select("td,th",c),d;a:for(var h=0;h<e.length;h++){var f=l.getStyle(e[h],b);"undefined"===typeof d&&(d=f);if(d!=f){d="";break a}}return d}var l=a.dom,f,t,h,r={},C;if(!0===d){if(f=l.getParent(a.selection.getStart(),"table"))r={width:q(l.getStyle(f,"width")||l.getAttrib(f,"width")),height:q(l.getStyle(f,"height")||l.getAttrib(f,"height")),cellspacing:q(l.getStyle(f,
"border-spacing")||l.getAttrib(f,"cellspacing")),cellpadding:l.getAttrib(f,"data-mce-cell-padding")||l.getAttrib(f,"cellpadding")||n(f,"padding"),border:l.getAttrib(f,"data-mce-border")||l.getAttrib(f,"border")||n(f,"border"),borderColor:l.getAttrib(f,"data-mce-border-color"),caption:!!l.select("caption",f)[0],"class":l.getAttrib(f,"class")},u(["left","center","right"],function(c){a.formatter.matchNode(f,"align"+c)&&(r.align=c)})}else t={label:"Cols",name:"cols"},h={label:"Rows",name:"rows"};a.settings.table_class_list?
(r["class"]&&(r["class"]=r["class"].replace(/\s*mce\-item\-table\s*/g,"")),d={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_class_list,function(c){c.value&&(c.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[c.value]})})})}):d={name:"class",type:"textbox",size:40,label:"CSS class name(s)"};t={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",
maxWidth:50},items:!1!==a.settings.table_appearance_options?[t,h,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[t,h,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
{text:"Right",value:"right"}]},d]};!1!==a.settings.table_advtab?(D(l,r,f),a.windowManager.open({title:"Table properties",data:r,bodyType:"tabpanel",body:[{title:"General",type:"form",items:t},x(l)],onsubmit:k})):a.windowManager.open({title:"Table properties",data:r,body:t,onsubmit:k})};t.merge=function(b,e){a.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var g=
this.toJSON();a.undoManager.transact(function(){b.merge(e,g.cols,g.rows)})}})};t.cell=function(){function d(){g(k,this);l=p.extend(l,this.toJSON());a.undoManager.transact(function(){u(t,function(b){a.dom.setAttribs(b,{scope:l.scope,style:l.style,"class":l["class"]});a.dom.setStyles(b,{width:e(l.width),height:e(l.height)});l.type&&b.nodeName.toLowerCase()!=l.type&&(b=k.rename(b,l.type));w(b);l.align&&a.formatter.apply("align"+l.align,{},b);z(b);l.valign&&a.formatter.apply("valign"+l.valign,{},b)});
a.focus()})}var k=a.dom,n,l,f,t=[],t=a.dom.select("td[data-mce-selected],th[data-mce-selected]");n=a.dom.getParent(a.selection.getStart(),"td,th");!t.length&&n&&t.push(n);if(n=n||t[0])l={width:q(k.getStyle(n,"width")||k.getAttrib(n,"width")),height:q(k.getStyle(n,"height")||k.getAttrib(n,"height")),scope:k.getAttrib(n,"scope"),"class":k.getAttrib(n,"class")},l.type=n.nodeName.toLowerCase(),u(["left","center","right"],function(b){a.formatter.matchNode(n,"align"+b)&&(l.align=b)}),u(["top","middle",
"bottom"],function(b){a.formatter.matchNode(n,"valign"+b)&&(l.valign=b)}),a.settings.table_cell_class_list&&(f={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_cell_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})}),f={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",
name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,
maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},f]},!1!==a.settings.table_cell_advtab?(D(k,l,n),a.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:l,body:[{title:"General",type:"form",items:f},
x(k)],onsubmit:d})):a.windowManager.open({title:"Cell properties",data:l,body:f,onsubmit:d})};t.row=function(){function d(){var b,c,d;g(k,this);h=p.extend(h,this.toJSON());a.undoManager.transact(function(){var f=h.type;u(r,function(g){a.dom.setAttribs(g,{scope:h.scope,style:h.style,"class":h["class"]});a.dom.setStyles(g,{height:e(h.height)});f!=g.parentNode.nodeName.toLowerCase()&&(b=k.getParent(g,"table"),c=g.parentNode,d=k.select(f,b)[0],d||(d=k.create(f),b.firstChild?b.insertBefore(d,b.firstChild):
b.appendChild(d)),d.appendChild(g),c.hasChildNodes()||k.remove(c));w(g);h.align&&a.formatter.apply("align"+h.align,{},g)});a.focus()})}var k=a.dom,n,l,f,t,h,r=[];n=a.dom.getParent(a.selection.getStart(),"table");l=a.dom.getParent(a.selection.getStart(),"td,th");u(n.rows,function(a){u(a.cells,function(b){if(k.getAttrib(b,"data-mce-selected")||b==l)return r.push(a),!1})});if(f=r[0])h={height:q(k.getStyle(f,"height")||k.getAttrib(f,"height")),scope:k.getAttrib(f,"scope"),"class":k.getAttrib(f,"class")},
h.type=f.parentNode.nodeName.toLowerCase(),u(["left","center","right"],function(b){a.formatter.matchNode(f,"align"+b)&&(h.align=b)}),a.settings.table_row_class_list&&(t={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_row_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),n={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,
values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},t]},!1!==a.settings.table_row_advtab?(D(k,h,f),a.windowManager.open({title:"Row properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:n},x(k)],onsubmit:d})):
a.windowManager.open({title:"Row properties",data:h,body:n,onsubmit:d})}}});I("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(p,B){var u;return function(a){function v(b,c){return{index:b,y:a.dom.getPos(c).y}}function x(b,c){return{index:b,y:a.dom.getPos(c).y+c.offsetHeight}}function q(){return"rtl"===a.getBody().dir}function e(){return a.inline}function w(){return e?a.getBody().ownerDocument.body:a.getBody()}function z(b,c){return q()?{index:b,x:a.dom.getPos(c).x+
c.offsetWidth}:{index:b,x:a.dom.getPos(c).x}}function b(b,c){return q()?{index:b,x:a.dom.getPos(c).x}:{index:b,x:a.dom.getPos(c).x+c.offsetWidth}}function g(b,c){var e=a.dom.getStyle(b,c,!0);return parseInt(e,10)}function D(a){var b=g(a,"width");a=g(a.parentElement,"width");return 100*(b/a)}function E(a,b){var c=g(a,"width");return 100*(b/c)}function t(a,b){var c=g(a.parentElement,"width");return 100*(b/c)}function d(a,b,c){for(var e=[],d=1;d<c.length;d++)e.push(a(d-1,c[d].element));e.push(b(c.length-
1,c[c.length-1].element));return e}function k(){var b=a.dom.select("."+fa,w());p.each(b,function(b){a.dom.remove(b)})}function n(a,b,c,e,d,f,g,h){a={"data-mce-bogus":"all","class":fa+" "+a,unselectable:"on","data-mce-resize":!1,style:"cursor: "+b+"; margin: 0; padding: 0; position: absolute; left: "+c+"px; top: "+e+"px; height: "+d+"px; width: "+f+"px; "};a[g]=h;return a}function l(b,c,e){p.each(b,function(b){var d=e.x,M=b.y-T/2,f=T;a.dom.add(w(),"div",n(W,pa,d,M,f,c,ga,b.index))})}function f(b,c,
e){p.each(b,function(b){var d=b.x-T/2,M=e.y,f=T;a.dom.add(w(),"div",n(X,qa,d,M,c,f,ha,b.index))})}function K(a){return p.map(a.rows,function(a){var b=p.map(a.cells,function(a){var b=a.hasAttribute("rowspan")?parseInt(a.getAttribute("rowspan"),10):1,c=a.hasAttribute("colspan")?parseInt(a.getAttribute("colspan"),10):1;return{element:a,rowspan:b,colspan:c}});return{element:a,cells:b}})}function h(a){var b={},c=[],e=0,d=0;p.each(a,function(a,M){var f=[];p.each(a.cells,function(a){for(var c=0;b[M+","+
c]!==J;)c++;for(var g={element:a.element,colspan:a.colspan,rowspan:a.rowspan,rowIndex:M,colIndex:c},h=0;h<a.colspan;h++)for(var m=0;m<a.rowspan;m++){var k=M+m,l=c+h;b[k+","+l]=g;e=Math.max(e,k+1);d=Math.max(d,l+1)}f.push(g)});c.push({element:a.element,cells:f})});return{grid:{maxRows:e,maxCols:d},getAt:function(a,c){return b[a+","+c]},getAllCells:function(){var a=[];p.each(c,function(b){a=a.concat(b.cells)});return a},getAllRows:function(){return c}}}function r(a,b){for(var c=[],e=a;e<b;e++)c.push(e);
return c}function C(a,b,c){a=a();for(var e,d=0;d<a.length;d++)b(a[d])&&(e=a[d]);return e?e:c()}function c(a){var b=r(0,a.grid.maxCols),c=r(0,a.grid.maxRows);return p.map(b,function(b){return C(function(){for(var e=[],d=0;d<c.length;d++){var f=a.getAt(d,b);f&&f.colIndex===b&&e.push(f)}return e},function(a){return 1===a.colspan},function(){for(var e,d=0;d<c.length;d++)if(e=a.getAt(d,b))return e;return null})})}function m(a){var b=r(0,a.grid.maxCols),c=r(0,a.grid.maxRows);return p.map(c,function(c){return C(function(){for(var e=
[],d=0;d<b.length;d++){var f=a.getAt(c,d);f&&f.rowIndex===c&&e.push(f)}return e},function(a){return 1===a.rowspan},function(){return a.getAt(c,0)})})}function s(e){var g=K(e),g=h(g),k=m(g),s=c(g),g=a.dom.getPos(e),k=0<k.length?d(v,x,k):[],s=0<s.length?d(z,b,s):[];l(k,e.offsetWidth,g);f(s,e.offsetHeight,g)}function A(a,b,c,e){if(0>b||b>=a.length-1)return"";var d=a[b];if(d)d={value:d,delta:0};else for(var f=a.slice(0,b).reverse(),h=0;h<f.length;h++)f[h]&&(d={value:f[h],delta:h+1});if(f=a[b+1])f={value:f,
delta:1};else for(a=a.slice(b+1),b=0;b<a.length;b++)a[b]&&(f={value:a[b],delta:b+1});a=f.delta-d.delta;d=Math.abs(f.value-d.value)/a;return c?100*(d/g(e,"width")):d}function F(b,c){var e=a.dom.getStyle(b,c);e||(e=a.dom.getAttrib(b,c));e||(e=a.dom.getStyle(b,c,!0));return e}function H(a,b,c){var e=F(a,"width"),d=parseInt(e,10);a=b?100*(g(a,"width")/g(c,"width")):g(a,"width");if(b&&!R(e)||!b&&!ba(e))d=0;return!isNaN(d)&&0<d?d:a}function y(a,b,e){a=c(a);for(var d=p.map(a,function(a){return z(a.colIndex,
a.element).x}),f=[],g=0;g<a.length;g++){var h=1<(a[g].element.hasAttribute("colspan")?parseInt(a[g].element.getAttribute("colspan"),10):1)?A(d,g):H(a[g].element,b,e),h=h?h:ia;f.push(h)}return f}function L(a){var b=F(a,"height"),c=parseInt(b,10);R(b)&&(c=0);return!isNaN(c)&&0<c?c:g(a,"height")}function Y(a){a=m(a);for(var b=p.map(a,function(a){return v(a.rowIndex,a.element).y}),c=[],e=0;e<a.length;e++){var d=1<(a[e].element.hasAttribute("rowspan")?parseInt(a[e].element.getAttribute("rowspan"),10):
1)?A(b,e):L(a[e].element),d=d?d:ra;c.push(d)}return c}function I(a,b,c,e,d){function f(a){return p.map(a,function(){return 0})}function g(a,b){var d=f(m.slice(0,a)),h=f(m.slice(b+1));if(0<=c)var k=Math.max(e,m[b]-c),d=d.concat([c,k-m[b]]).concat(h);else k=Math.max(e,m[a]+c),d=d.concat([k-m[a],m[a]-k]).concat(h);return d}function h(a,b){var d=f(m.slice(0,b));if(0<=c)d=d.concat([c]);else var g=Math.max(e,m[b]+c),d=d.concat([g-m[b]]);return d}var m=a.slice(0);return 0===a.length?[]:1===a.length?d?[100-
m[0]]:[Math.max(e,m[0]+c)-m[0]]:0===b?g(0,1):0<b&&b<a.length-1?g(b,b+1):b===a.length-1?h(b-1,b):[]}function Q(a,b,c){for(var d=0;a<b;a++)d+=c[a];return d}function Z(a,b){var c=a.getAllCells();return p.map(c,function(a){var c=Q(a.colIndex,a.colIndex+a.colspan,b);return{element:a.element,width:c,colspan:a.colspan}})}function $(a,b){var c=a.getAllCells();return p.map(c,function(a){var c=Q(a.rowIndex,a.rowIndex+a.rowspan,b);return{element:a.element,height:c,rowspan:a.rowspan}})}function aa(a,b){var c=
a.getAllRows();return p.map(c,function(a,c){return{element:a.element,height:b[c]}})}function R(a){return sa.test(a)}function ba(a){return ta.test(a)}function ca(b,c,d){function e(b,c){p.each(b,function(b){a.dom.setStyle(b.element,"width",b.width+c);a.dom.setAttrib(b.element,"width",null)})}for(var f=K(b),m=h(f),k=R(b.width)||R(b.style.width),f=y(m,k,b),s=k?E(b,c):c,s=I(f,d,s,ia,k,b),l=[],n=0;n<s.length;n++)l.push(s[n]+f[n]);var q=Z(m,l),r=k?"%":"px",u=k?d<m.grid.maxCols-1?D(b):D(b)+t(b,c):d<m.grid.maxCols-
1?g(b,"width"):g(b,"width")+c;a.undoManager.transact(function(){e(q,r);d!=m.grid.maxCols-1&&k||(a.dom.setStyle(b,"width",u+r),a.dom.setAttrib(b,"width",null))})}function da(b,c,d){for(var e=K(b),e=h(e),f=Y(e),g=[],m=0,k=0;k<f.length;k++)g.push(k===d?c+f[k]:f[k]),m+=m[k];var s=$(e,g),l=aa(e,g);a.undoManager.transact(function(){p.each(l,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});p.each(s,function(b){a.dom.setStyle(b.element,"height",b.height+
"px");a.dom.setAttrib(b.element,"height",null)});a.dom.setStyle(b,"height",m+"px");a.dom.setAttrib(b,"height",null)})}function U(){ja=setTimeout(function(){ea()},200)}function V(b,c){a.dom.bind(b,"mouseup",function(){ea()});a.dom.bind(b,"mousemove",function(a){clearTimeout(ja);S&&c(a)});a.dom.bind(b,"mouseout",function(){U()})}function ea(){a.dom.remove(N);if(S){a.dom.removeClass(G,ka);S=!1;var b,c;if(a.dom.hasClass(G,X)){c=parseInt(a.dom.getAttrib(G,la),10);var d=a.dom.getPos(G).x;b=parseInt(a.dom.getAttrib(G,
ha),10);c=q()?c-d:d-c;ca(u,c,b)}else a.dom.hasClass(G,W)&&(c=parseInt(a.dom.getAttrib(G,ma),10),d=a.dom.getPos(G).y,b=parseInt(a.dom.getAttrib(G,ga),10),da(u,d-c,b));b=u;k();s(b);a.nodeChanged()}}function na(b,c){var d;N?d=N:(d=document.createElement("div"),d.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),d.setAttribute("data-mce-bogus","all"));N=d;S=!0;a.dom.addClass(b,ka);G=b;V(N,c);a.dom.add(w(),N)}function ua(b){O=O!==J?O:b.clientX;
var c=b.clientX-O;O=b.clientX;b=a.dom.getPos(G).x;a.dom.setStyle(G,"left",b+c+"px")}function va(b){P=P!==J?P:b.clientY;var c=b.clientY-P;P=b.clientY;b=a.dom.getPos(G).y;a.dom.setStyle(G,"top",b+c+"px")}function oa(b){var c=b.target,d=a.getBody();if(a.$.contains(d,u)||u===d)a.dom.hasClass(c,X)?(b.preventDefault(),b=a.dom.getPos(c).x,a.dom.setAttrib(c,la,b),O=J,na(c,ua)):a.dom.hasClass(c,W)&&(b.preventDefault(),b=a.dom.getPos(c).y,a.dom.setAttrib(c,ma,b),P=J,na(c,va))}var fa="mce-resize-bar",W="mce-resize-bar-row",
pa="row-resize",ga="data-row",ma="data-initial-top",X="mce-resize-bar-col",qa="col-resize",ha="data-col",la="data-initial-left",T=4,ia=10,ra=10,ka="mce-resize-bar-dragging",sa=RegExp(/(\d+(\.\d+)?%)/),ta=RegExp(/px|em/),ja,S,N,G,O,P;a.on("init",function(){a.dom.bind(w(),"mousedown",oa)});a.on("ObjectResized",function(b){b=b.target;if("TABLE"===b.nodeName){var c=[];p.each(b.rows,function(b){p.each(b.cells,function(b){var d=a.dom.getStyle(b,"width",!0);c.push({cell:b,width:d})})});p.each(c,function(b){a.dom.setStyle(b.cell,
"width",b.width);a.dom.setAttrib(b.cell,"width",null)})}});a.on("mouseover",function(b){if(!S){var c=a.dom.getParent(b.target,"table");if("TABLE"===b.target.nodeName||c)u=c,k(),s(c)}});a.on("keydown",function(a){switch(a.keyCode){case B.LEFT:case B.RIGHT:case B.UP:case B.DOWN:k()}});a.on("remove",function(){k();a.dom.unbind(w(),"mousedown",oa)});return{adjustWidth:ca,adjustHeight:da,clearBars:k,drawBars:s,determineDeltas:I,getTableGrid:h,getTableDetails:K,getWidths:y,getPixelHeights:Y,isPercentageBasedSize:R,
isPixelBasedSize:ba,recalculateWidths:Z,recalculateCellHeights:$,recalculateRowHeights:aa}}});I("tinymce/tableplugin/Plugin","tinymce/tableplugin/TableGrid tinymce/tableplugin/Quirks tinymce/tableplugin/CellSelection tinymce/tableplugin/Dialogs tinymce/tableplugin/ResizeBars tinymce/util/Tools tinymce/dom/TreeWalker tinymce/Env tinymce/PluginManager".split(" "),function(p,B,u,a,v,x,q,e,w){var z=x.each;w.add("table",function(b){function g(a){return function(){b.execCommand(a)}}function q(a,d){var f,
g,h,k;h='<table id="__mce"><tbody>';for(f=0;f<d;f++){h+="<tr>";for(g=0;g<a;g++)h+="<td>"+(e.ie&&10>e.ie?"&nbsp;":"<br>")+"</td>";h+="</tr>"}h+="</tbody></table>";b.undoManager.transact(function(){b.insertContent(h);k=b.dom.get("__mce");b.dom.setAttrib(k,"id",null);b.$("tr",k).each(function(a,c){b.fire("newrow",{node:c});b.$("th,td",c).each(function(a,c){b.fire("newcell",{node:c})})});b.dom.setAttribs(k,b.settings.table_default_attributes||{});b.dom.setStyles(k,b.settings.table_default_styles||{})});
return k}function x(a,d,e){function f(){var g,h,k={},l=0;h=b.dom.select("td[data-mce-selected],th[data-mce-selected]");(g=h[0])||(g=b.selection.getStart());e&&0<h.length?(z(h,function(a){return k[a.parentNode.parentNode.nodeName]=1}),z(k,function(a){l+=a}),g=1!==l):g=!b.dom.getParent(g,d);a.disabled(g);b.selection.selectorChanged(d,function(b){a.disabled(!b)})}if(b.initialized)f();else b.on("init",f)}function t(){x(this,"table")}function d(){x(this,"td,th")}function k(){for(var a="",a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',
b=0;10>b;b++){for(var a=a+"<tr>",d=0;10>d;d++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+d)+'" href="#" data-mce-x="'+d+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+='</table><div class="mce-text-center" role="presentation">1 x 1</div>'}function n(a,d,e){var f=e.getEl().getElementsByTagName("table")[0],g,h,k,l,n=e.isRtl()||"tl-tr"==e.parent().rel;f.nextSibling.innerHTML=a+1+" x "+(d+1);n&&(a=9-a);for(g=0;10>g;g++)for(e=0;10>e;e++)k=f.rows[g].childNodes[e].firstChild,l=(n?
e>=a:e<=a)&&g<=d,b.dom.toggleClass(k,"mce-active",l),l&&(h=k);return h.parentNode}function l(a){return b.dom.is(a,"table")&&b.getBody().contains(a)}var f,w=this,h=new a(b),r;!b.settings.object_resizing||!1===b.settings.table_resize_bars||!0!==b.settings.object_resizing&&"table"!==b.settings.object_resizing||(r=v(b));!1===b.settings.table_grid?b.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:h.table}):b.addMenuItem("inserttable",{text:"Insert table",icon:"table",
context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),h.table())},onshow:function(){n(0,0,this.menu.items()[0])},onhide:function(){var a=this.menu.items()[0].getEl().getElementsByTagName("a");b.dom.removeClass(a,"mce-active");b.dom.addClass(a[0],"mce-active")},menu:[{type:"container",html:k(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(a){var b=a.target,d;if("A"==b.tagName.toUpperCase()){d=parseInt(b.getAttribute("data-mce-x"),
10);b=parseInt(b.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)d=9-d;if(d!==this.lastX||b!==this.lastY)n(d,b,a.control),this.lastX=d,this.lastY=b}},onclick:function(a){var d=this;"A"==a.target.tagName.toUpperCase()&&(a.preventDefault(),a.stopPropagation(),d.parent().cancel(),b.undoManager.transact(function(){q(d.lastX+1,d.lastY+1)}),b.addVisual())}}]});b.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:t,onclick:h.tableProps});b.addMenuItem("deletetable",
{text:"Delete table",context:"table",onPostRender:t,cmd:"mceTableDelete"});b.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:g("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:g("mceTableMergeCells"),onPostRender:function(){x(this,"td,th",!0)}},{text:"Split cell",onclick:g("mceTableSplitCells"),onPostRender:d}]});b.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:g("mceTableInsertRowBefore"),
onPostRender:d},{text:"Insert row after",onclick:g("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:g("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:g("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:g("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:g("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:g("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:g("mceTablePasteRowAfter"),onPostRender:d}]});
b.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:g("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:g("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:g("mceTableDeleteCol"),onPostRender:d}]});var C=[];z("inserttable tableprops deletetable | cell row column".split(" "),function(a){"|"==a?C.push({text:"-"}):C.push(b.menuItems[a])});b.addButton("table",{type:"menubutton",title:"Table",menu:C});if(!e.isIE)b.on("click",
function(a){a=a.target;"TABLE"===a.nodeName&&(b.selection.select(a),b.nodeChanged())});w.quirks=new B(b);b.on("Init",function(){w.cellSelection=new u(b);w.resizeBars=r});b.on("PreInit",function(){b.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)})});z({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var d;d=b.dom.getParent(b.selection.getStart(),"th,td");b.dom.select("td[data-mce-selected],th[data-mce-selected]").length?
a.merge():h.merge(a,d)},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){f=a.cutRows()},mceTableCopyRow:function(a){f=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(f,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(f)},
mceTableDelete:function(a){r&&r.clearBars();a.deleteTable()}},function(a,d){b.addCommand(d,function(){var d=new p(b);d&&(a(d),b.execCommand("mceRepaint"),w.cellSelection.clear())})});z({mceInsertTable:h.table,mceTableProps:function(){h.table(!0)},mceTableRowProps:h.row,mceTableCellProps:h.cell},function(a,d){b.addCommand(d,function(b,d){a(d)})});b.addButton("tableprops",{title:"Table properties",onclick:h.tableProps,icon:"table"});b.addButton("tabledelete",{title:"Delete table",onclick:g("mceTableDelete")});
b.addButton("tablecellprops",{title:"Cell properties",onclick:g("mceTableCellProps")});b.addButton("tablemergecells",{title:"Merge cells",onclick:g("mceTableMergeCells")});b.addButton("tablesplitcells",{title:"Split cell",onclick:g("mceTableSplitCells")});b.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:g("mceTableInsertRowBefore")});b.addButton("tableinsertrowafter",{title:"Insert row after",onclick:g("mceTableInsertRowAfter")});b.addButton("tabledeleterow",{title:"Delete row",
onclick:g("mceTableDeleteRow")});b.addButton("tablerowprops",{title:"Row properties",onclick:g("mceTableRowProps")});b.addButton("tablecutrow",{title:"Cut row",onclick:g("mceTableCutRow")});b.addButton("tablecopyrow",{title:"Copy row",onclick:g("mceTableCopyRow")});b.addButton("tablepasterowbefore",{title:"Paste row before",onclick:g("mceTablePasteRowBefore")});b.addButton("tablepasterowafter",{title:"Paste row after",onclick:g("mceTablePasteRowAfter")});b.addButton("tableinsertcolbefore",{title:"Insert column before",
onclick:g("mceTableInsertColBefore")});b.addButton("tableinsertcolafter",{title:"Insert column after",onclick:g("mceTableInsertColAfter")});b.addButton("tabledeletecol",{title:"Delete column",onclick:g("mceTableDeleteCol")});(function(){var a=b.settings.table_toolbar;""!==a&&!1!==a&&(a||(a="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),b.addContextToolbar(l,a))})();if(!1!==b.settings.table_tab_navigation)b.on("keydown",
function(a){var d,e,f;9==a.keyCode&&(d=b.dom.getParent(b.selection.getStart(),"th,td"))&&(a.preventDefault(),e=new p(b),f=a.shiftKey?-1:1,b.undoManager.transact(function(){!e.moveRelIdx(d,f)&&0<f&&(e.insertRow(),e.refresh(),e.moveRelIdx(d,f))}))});w.insertTable=q})})})(this);

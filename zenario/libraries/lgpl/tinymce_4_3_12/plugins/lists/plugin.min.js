tinymce.PluginManager.add("lists",function(d){function s(d){return d&&"BR"==d.nodeName}function l(h){return h&&/^(OL|UL|DL)$/.test(h.nodeName)&&d.$.contains(d.getBody(),h)}function u(h){return h&&!!d.schema.getTextBlockElements()[h.nodeName]}var v=this;d.on("init",function(){function h(a,c){var b=e.isEmpty(a);return c&&0<e.select("span[data-mce-type=bookmark]").length?!1:b}function t(a){function c(c){var f,g,d;g=a[c?"startContainer":"endContainer"];d=a[c?"startOffset":"endOffset"];1==g.nodeType&&
(f=e.create("span",{"data-mce-type":"bookmark"}),g.hasChildNodes()?(d=Math.min(d,g.childNodes.length-1),c?g.insertBefore(f,g.childNodes[d]):e.insertAfter(f,g.childNodes[d])):g.appendChild(f),g=f,d=0);b[c?"startContainer":"endContainer"]=g;b[c?"startOffset":"endOffset"]=d}var b={};c(!0);a.collapsed||c();return b}function n(a){function c(b){var c,d,m;c=m=a[b?"startContainer":"endContainer"];d=a[b?"startOffset":"endOffset"];if(c){if(1==c.nodeType){a:{d=c;for(var r=d.parentNode.firstChild,z=0;r;){if(r==
d){d=z;break a}1==r.nodeType&&"bookmark"==r.getAttribute("data-mce-type")||z++;r=r.nextSibling}d=-1}c=c.parentNode;e.remove(m)}a[b?"startContainer":"endContainer"]=c;a[b?"startOffset":"endOffset"]=d}}c(!0);c();var b=e.createRng();b.setStart(a.startContainer,a.startOffset);a.endContainer&&b.setEnd(a.endContainer,a.endOffset);q.setRng(b)}function p(a,c){var b,k,f=e.createFragment(),g,m=d.schema.getBlockElements();d.settings.forced_root_block&&(c=c||d.settings.forced_root_block);c&&(k=e.create(c),k.tagName===
d.settings.forced_root_block&&e.setAttribs(k,d.settings.forced_root_block_attrs),f.appendChild(k));if(a)for(;b=a.firstChild;){var r=b.nodeName;g||"SPAN"==r&&"bookmark"==b.getAttribute("data-mce-type")||(g=!0);m[r]?(f.appendChild(b),k=null):c?(k||(k=e.create(c),f.appendChild(k)),k.appendChild(b)):f.appendChild(b)}d.settings.forced_root_block?g||tinymce.Env.ie&&!(10<tinymce.Env.ie)||k.appendChild(e.create("br",{"data-mce-bogus":"1"})):f.appendChild(e.create("br"));return f}function w(){return tinymce.grep(q.getSelectedBlocks(),
function(a){return/^(LI|DT|DD)$/.test(a.nodeName)})}function A(a,c,b){function d(a){tinymce.each(g,function(b){a.parentNode.insertBefore(b,c.parentNode)});e.remove(a)}var f,g,m;g=e.select('span[data-mce-type="bookmark"]',a);b=b||p(c);f=e.createRng();f.setStartAfter(c);f.setEndAfter(a);f=f.extractContents();for(m=f.firstChild;m;m=m.firstChild)if("LI"==m.nodeName&&e.isEmpty(m)){e.remove(m);break}e.isEmpty(f)||e.insertAfter(f,a);e.insertAfter(b,a);h(c.parentNode)&&d(c.parentNode);e.remove(c);h(a)&&e.remove(a)}
function B(a){var c,b;if((c=a.nextSibling)&&l(c)&&c.nodeName==a.nodeName){for(;b=c.firstChild;)a.appendChild(b);e.remove(c)}if((c=a.previousSibling)&&l(c)&&c.nodeName==a.nodeName){for(;b=c.firstChild;)a.insertBefore(b,a.firstChild);e.remove(c)}}function G(a){tinymce.each(tinymce.grep(e.select("ol,ul",a)),function(a){var b,d=a.parentNode;"LI"==d.nodeName&&d.firstChild==a&&(b=d.previousSibling)&&"LI"==b.nodeName&&(b.appendChild(a),h(d)&&e.remove(d));l(d)&&(b=d.previousSibling)&&"LI"==b.nodeName&&b.appendChild(a)})}
function C(a){var c=a.parentNode,b=c.parentNode;if(c===d.getBody())return!0;if("DD"==a.nodeName)return e.rename(a,"DT"),!0;if(a.parentNode.firstChild==a&&a.parentNode.lastChild==a)return"LI"==b.nodeName?(e.insertAfter(a,b),h(b)&&e.remove(b),e.remove(c)):l(b)?e.remove(c,!0):(b.insertBefore(p(a),c),e.remove(c)),!0;if(a.parentNode.firstChild==a)return"LI"==b.nodeName?(e.insertAfter(a,b),a.appendChild(c),h(b)&&e.remove(b)):l(b)?b.insertBefore(a,c):(b.insertBefore(p(a),c),e.remove(a)),!0;if(a.parentNode.lastChild==
a)return"LI"==b.nodeName?e.insertAfter(a,b):l(b)?e.insertAfter(a,c):(e.insertAfter(p(a),c),e.remove(a)),!0;"LI"==b.nodeName?(c=b,b=p(a,"LI")):b=l(b)?p(a,"LI"):p(a);A(c,a,b);G(c.parentNode);return!0}function H(a){function c(b,c){var d;if(l(b)){for(;d=a.lastChild.firstChild;)c.appendChild(d);e.remove(b)}}var b,d;return"DT"==a.nodeName?(e.rename(a,"DD"),!0):(b=a.previousSibling)&&l(b)?(b.appendChild(a),!0):b&&"LI"==b.nodeName&&l(b.lastChild)?(b.lastChild.appendChild(a),c(a.lastChild,b.lastChild),!0):
(b=a.nextSibling)&&l(b)?(b.insertBefore(a,b.firstChild),!0):(b=a.previousSibling)&&"LI"==b.nodeName?(d=e.create(a.parentNode.nodeName),b.appendChild(d),d.appendChild(a),c(a.lastChild,d),!0):!1}function D(){var a=w();if(a.length){for(var c=t(q.getRng(!0)),b=0;b<a.length&&(H(a[b])||0!==b);b++);n(c);d.nodeChanged();return!0}}function E(){var a=w();if(a.length){var c=t(q.getRng(!0)),b,e,f=d.getBody();for(b=a.length;b--;)for(var g=a[b].parentNode;g&&g!=f;){for(e=a.length;e--;)if(a[e]===g){a.splice(b,1);
break}g=g.parentNode}for(b=0;b<a.length&&(C(a[b])||0!==b);b++);n(c);d.nodeChanged();return!0}}function I(a){function c(){function a(c){var d;d=b[c?"startContainer":"endContainer"];c=b[c?"startOffset":"endOffset"];for(1==d.nodeType&&(d=d.childNodes[Math.min(c,d.childNodes.length-1)]||d);d.parentNode!=f&&!u(d)&&!/^(TD|TH)$/.test(d.parentNode.nodeName);)d=d.parentNode;return d}for(var c=[],f=d.getBody(),k=a(!0),J=a(),h,n=[];k&&(n.push(k),k!=J);k=k.nextSibling);tinymce.each(n,function(a){if(u(a))c.push(a),
h=null;else if(e.isBlock(a)||s(a))s(a)&&e.remove(a),h=null;else{var b=a.nextSibling;tinymce.dom.BookmarkManager.isBookmarkNode(a)&&(u(b)||!b&&a.parentNode==f)?h=null:(h||(h=e.create("p"),a.parentNode.insertBefore(h,a),c.push(h)),h.appendChild(a))}});return c}var b=q.getRng(!0),k,f="LI";"false"!==e.getContentEditable(q.getNode())&&(a=a.toUpperCase(),"DL"==a&&(f="DT"),k=t(b),tinymce.each(c(),function(b){var c,d;(d=b.previousSibling)&&l(d)&&d.nodeName==a?(c=d,b=e.rename(b,f),d.appendChild(b)):(c=e.create(a),
b.parentNode.insertBefore(c,b),c.appendChild(b),e.rename(b,f));B(c)}),n(k))}function F(){var a=t(q.getRng(!0)),c=d.getBody();tinymce.each(w(),function(a){var e,f;if(a.parentNode!==d.getBody())if(h(a))C(a);else{for(e=a;e&&e!=c;e=e.parentNode)l(e)&&(f=e);A(f,a)}});n(a)}function x(a){var c=e.getParent(q.getStart(),"OL,UL,DL");if(c!==d.getBody())if(c)if(c.nodeName==a)F(a);else{var b=t(q.getRng(!0));B(e.rename(c,a));n(b)}else I(a)}function y(a){return function(){var c=e.getParent(d.selection.getStart(),
"UL,OL,DL");return c&&c.nodeName==a}}var e=d.dom,q=d.selection;v.backspaceDelete=function(a){function c(a,b){var c=a.startContainer,f=a.startOffset,h;if(3==c.nodeType&&(b?f<c.data.length:0<f))return c;h=d.schema.getNonEmptyElements();1==c.nodeType&&(c=tinymce.dom.RangeUtils.getNode(c,f));f=new tinymce.dom.TreeWalker(c,d.getBody());b&&(c=s(c)?e.isBlock(c.nextSibling)&&!s(c.previousSibling)?!0:!1:!1,c&&f.next());for(;c=f[b?"next":"prev2"]();)if("LI"==c.nodeName&&!c.hasChildNodes()||h[c.nodeName]||3==
c.nodeType&&0<c.data.length)return c}function b(a,b){var c,f,g=a.parentNode;if(d.$.contains(d.getBody(),a)&&d.$.contains(d.getBody(),b)){l(b.lastChild)&&(f=b.lastChild);g==b.lastChild&&s(g.previousSibling)&&e.remove(g.previousSibling);(c=b.lastChild)&&s(c)&&a.hasChildNodes()&&e.remove(c);h(b,!0)&&e.$(b).empty();if(!h(a,!0))for(;c=a.firstChild;)b.appendChild(c);f&&b.appendChild(f);e.remove(a);h(g)&&g!==d.getBody()&&e.remove(g)}}if(q.isCollapsed()){var k=e.getParent(q.getStart(),"LI"),f,g,m;if(k){f=
k.parentNode;if(f===d.getBody()&&e.isEmpty(f))return!0;g=q.getRng(!0);if((m=e.getParent(c(g,a),"LI"))&&m!=k)return f=t(g),a?b(m,k):b(k,m),n(f),!0;if(!m&&!a&&F(f.nodeName))return!0}}};d.on("BeforeExecCommand",function(a){var c=a.command.toLowerCase(),b;"indent"==c?D()&&(b=!0):"outdent"==c&&E()&&(b=!0);if(b)return d.fire("ExecCommand",{command:a.command}),a.preventDefault(),!0});d.addCommand("InsertUnorderedList",function(){x("UL")});d.addCommand("InsertOrderedList",function(){x("OL")});d.addCommand("InsertDefinitionList",
function(){x("DL")});d.addQueryStateHandler("InsertUnorderedList",y("UL"));d.addQueryStateHandler("InsertOrderedList",y("OL"));d.addQueryStateHandler("InsertDefinitionList",y("DL"));d.on("keydown",function(a){9==a.keyCode&&!tinymce.util.VK.metaKeyPressed(a)&&d.dom.getParent(d.selection.getStart(),"LI,DT,DD")&&(a.preventDefault(),a.shiftKey?E():D())})});d.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var h=this;d.on("nodechange",function(){for(var l=
d.selection.getSelectedBlocks(),n=!1,p=0,s=l.length;!n&&p<s;p++)n=l[p].nodeName,n="LI"==n&&l[p].parentNode.firstChild==l[p]||"UL"==n||"OL"==n||"DD"==n;h.disabled(n)})}});d.on("keydown",function(d){d.keyCode==tinymce.util.VK.BACKSPACE?v.backspaceDelete()&&d.preventDefault():d.keyCode==tinymce.util.VK.DELETE&&v.backspaceDelete(!0)&&d.preventDefault()})});

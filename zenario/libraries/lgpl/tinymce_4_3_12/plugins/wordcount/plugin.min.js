tinymce.PluginManager.add("wordcount",function(b){function d(){b.theme.panel.find("#wordcount").text(["Words: {0}",c.getCount()])}var c=this,e,f;e=b.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);f=b.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);b.on("init",function(){var a=b.theme.panel&&b.theme.panel.find("#statusbar")[0];a&&tinymce.util.Delay.setEditorTimeout(b,function(){a.insert({type:"label",name:"wordcount",text:["Words: {0}",c.getCount()],classes:"wordcount",
disabled:b.settings.readonly},0);b.on("setcontent beforeaddundo",d);b.on("keyup",function(a){32==a.keyCode&&d()})},0)});c.getCount=function(){var a=b.getContent({format:"raw"}),c=0;a&&(a=a.replace(/\.\.\./g," "),a=a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),a=a.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),a=a.replace(f,""),a=a.match(e))&&(c=a.length);return c}});

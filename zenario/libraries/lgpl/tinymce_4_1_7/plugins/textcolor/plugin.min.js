tinymce.PluginManager.add("textcolor",function(c){function t(b){var e;c.dom.getParents(c.selection.getStart(),function(d){if(d=d.style["forecolor"==b?"color":"background-color"])e=d});return e}function u(){var b,e=[],d;d=c.settings.textcolor_map||"000000;Black;993300;Burnt orange;333300;Dark olive;003300;Dark green;003366;Dark azure;000080;Navy Blue;333399;Indigo;333333;Very dark gray;800000;Maroon;FF6600;Orange;808000;Olive;008000;Green;008080;Teal;0000FF;Blue;666699;Grayish blue;808080;Gray;FF0000;Red;FF9900;Amber;99CC00;Yellow green;339966;Sea green;33CCCC;Turquoise;3366FF;Royal blue;800080;Purple;999999;Medium gray;FF00FF;Magenta;FFCC00;Gold;FFFF00;Yellow;00FF00;Lime;00FFFF;Aqua;00CCFF;Sky blue;993366;Red violet;FFFFFF;White;FF99CC;Pink;FFCC99;Peach;FFFF99;Light yellow;CCFFCC;Pale green;CCFFFF;Pale cyan;99CCFF;Light sky blue;CC99FF;Plum".split(";");
for(b=0;b<d.length;b+=2)e.push({text:d[b+1],color:"#"+d[b]});return e}function n(){function b(a,b){var d="transparent"==a;return'<td class="mce-grid-cell'+(d?" mce-colorbtn-trans":"")+'"><div id="'+m+"-"+f++ +'" data-mce-color="'+(a?a:"")+'" role="option" tabIndex="-1" style="'+(a?"background-color: "+a:"")+'" title="'+tinymce.translate(b)+'">'+(d?"&#215;":"")+"</div></td>"}var e,d,a,g,h,l,m=this._id,f=0;e=u();e.push({text:tinymce.translate("No color"),color:"transparent"});a='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';
g=e.length-1;for(l=0;l<p;l++){a+="<tr>";for(h=0;h<k;h++)d=l*k+h,d>g?a+="<td></td>":(d=e[d],a+=b(d.color,d.text));a+="</tr>"}if(c.settings.color_picker_callback){a+='<tr><td colspan="'+k+'" class="mce-custom-color-btn"><div id="'+m+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+m+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>";a+="<tr>";for(h=0;h<
k;h++)a+=b("","Custom color");a+="</tr>"}return a+"</tbody></table>"}function q(b,e){c.focus();c.formatter.apply(b,{value:e});c.nodeChanged()}function v(b){c.focus();c.formatter.remove(b,{value:null},null,!0);c.nodeChanged()}function r(b){function e(b){a.hidePanel();a.color(b);q(a.settings.format,b)}function d(a,b){a.style.background=b;a.setAttribute("data-mce-color",b)}var a=this.parent(),g;tinymce.DOM.getParent(b.target,".mce-custom-color-btn")&&(a.hidePanel(),c.settings.color_picker_callback.call(c,
function(b){var c=a.panel.getEl().getElementsByTagName("table")[0],g,f,c=tinymce.map(c.rows[c.rows.length-1].childNodes,function(a){return a.firstChild});for(f=0;f<c.length&&(g=c[f],g.getAttribute("data-mce-color"));f++);if(f==k)for(f=0;f<k-1;f++)d(c[f],c[f+1].getAttribute("data-mce-color"));d(g,b);e(b)},t(a.settings.format)));(g=b.target.getAttribute("data-mce-color"))?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),b.target.setAttribute("aria-selected",!0),this.lastId=
b.target.id,"transparent"==g?(v(a.settings.format),a.hidePanel()):e(g)):null!==g&&a.hidePanel()}function s(){this._color&&q(this.settings.format,this._color)}var k,p;p=c.settings.textcolor_rows||5;k=c.settings.textcolor_cols||8;c.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:n,onclick:r},onclick:s});c.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",
ariaRemember:!0,html:n,onclick:r},onclick:s})});

(function(c){c.on("AddEditor",function(b){b.editor.settings.inline_styles=!1});c.PluginManager.add("legacyoutput",function(b,k,h){b.on("init",function(){var e=c.explode(b.settings.font_size_style_values),d=b.schema;b.formatter.register({alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"left"}},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"center"}},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",
attributes:{align:"right"}},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",
styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(a){return c.inArray(e,a.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});c.each(["b","i","u","strike"],function(a){d.addValidElements(a+"[*]")});d.getElementRule("font")||d.addValidElements("font[face|size|color|style]");c.each("p h1 h2 h3 h4 h5 h6 td th div ul ol li table img".split(" "),
function(a){(a=d.getElementRule(a))&&!a.attributes.align&&(a.attributes.align={},a.attributesOrder.push("align"))})});b.addButton("fontsizeselect",function(){var e=[];b.$.each((b.settings.fontsize_formats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7").split(" "),function(b,a){var g=a,c=a,f=a.split("=");1<f.length&&(g=f[0],c=f[1]);e.push({text:g,value:c})});return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(){var d=this;b.on("NodeChange",
function(){var a;(a=b.dom.getParent(b.selection.getNode(),"font"))?d.value(a.size):d.value("")})},onclick:function(d){d.control.settings.value&&b.execCommand("FontSize",!1,d.control.settings.value)}}});b.addButton("fontselect",function(){var c=[],d=function(a){a=a.replace(/;$/,"").split(";");for(var b=a.length;b--;)a[b]=a[b].split("=");return a}(b.settings.font_formats||"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats");
h.each(d,function(a,b){c.push({text:{raw:b[0]},value:b[1],textStyle:-1==b[1].indexOf("dings")?"font-family:"+b[1]:""})});return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:c,fixedWidth:!0,onPostRender:function(){var a=this;b.on("NodeChange",function(){var c;(c=b.dom.getParent(b.selection.getNode(),"font"))?a.value(c.face):a.value("")})},onselect:function(a){a.control.settings.value&&b.execCommand("FontName",!1,a.control.settings.value)}}})})})(tinymce);

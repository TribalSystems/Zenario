tinymce.ThemeManager.add("modern",function(b){function w(d){var c=[],h;if(d)return m(d.split(/[ ,]/),function(a){function d(){var c=b.selection;"bullist"==f&&c.selectorChanged("ul > li",function(b,g){for(var c,d=g.parents.length;d--&&(c=g.parents[d].nodeName,"OL"!=c&&"UL"!=c););a.active(b&&"UL"==c)});"numlist"==f&&c.selectorChanged("ol > li",function(b,g){for(var c,d=g.parents.length;d--&&(c=g.parents[d].nodeName,"OL"!=c&&"UL"!=c););a.active(b&&"OL"==c)});a.settings.stateSelector&&c.selectorChanged(a.settings.stateSelector,
function(b){a.active(b)},!0);a.settings.disabledStateSelector&&c.selectorChanged(a.settings.disabledStateSelector,function(b){a.disabled(b)})}var f;if("|"==a)h=null;else if(q.has(a))a={type:a},e.toolbar_items_size&&(a.size=e.toolbar_items_size),c.push(a),h=null;else if(h||(h={type:"buttongroup",items:[]},c.push(h)),b.buttons[a])if(f=a,a=b.buttons[f],"function"==typeof a&&(a=a()),a.type=a.type||"button",e.toolbar_items_size&&(a.size=e.toolbar_items_size),a=q.create(a),h.items.push(a),b.initialized)d();
else b.on("init",d)}),{type:"toolbar",layout:"flow",items:c}}function s(){function b(a){if(a)return c.push(w(a)),!0}var c=[];if(tinymce.isArray(e.toolbar)){if(0===e.toolbar.length)return;tinymce.each(e.toolbar,function(b,c){e["toolbar"+(c+1)]=b});delete e.toolbar}for(var h=1;10>h&&b(e["toolbar"+h]);h++);c.length||!1===e.toolbar||b(e.toolbar||A);if(c.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:c}}function t(){function d(a){var c,d,g,h,x;x=tinymce.makeMap((e.removed_menuitems||
"").split(/[ ,]/));e.menu?(d=e.menu[a],h=!0):d=y[a];if(d){c={text:d.title};g=[];m((d.items||"").split(/[ ,]/),function(c){"|"!=c&&!b.menuItems[c]||x[c]||g.push("|"==c?{text:"|"}:b.menuItems[c])});h||m(b.menuItems,function(b){b.context==a&&("before"==b.separator&&g.push({text:"|"}),b.prependToContext?g.unshift(b):g.push(b),"after"==b.separator&&g.push({text:"|"}))});for(d=0;d<g.length;d++)"|"==g[d].text&&(0!==d&&d!=g.length-1||g.splice(d,1));c.menu=g;if(!c.menu.length)return null}return c}var c,h=
[],a=[];if(e.menu)for(c in e.menu)a.push(c);else for(c in y)a.push(c);c="string"==typeof e.menubar?e.menubar.split(/[ ,]/):a;for(a=0;a<c.length;a++){var l=c[a];(l=d(l))&&h.push(l)}return h}function u(d){function c(b){(b=d.find(b)[0])&&b.focus(!0)}b.shortcuts.add("Alt+F9","",function(){c("menubar")});b.shortcuts.add("Alt+F10","",function(){c("toolbar")});b.shortcuts.add("Alt+F11","",function(){c("elementpath")});d.on("cancel",function(){b.focus()})}function v(d,c){var h,a,l,f;l=b.getContainer();f=
b.getContentAreaContainer().firstChild;a=l.clientWidth;h=f.clientWidth;null!==d&&(d=Math.max(e.min_width||100,d),d=Math.min(e.max_width||65535,d),p.setStyle(l,"width",d+(a-h)),p.setStyle(f,"width",d));c=Math.max(e.min_height||100,c);c=Math.min(e.max_height||65535,c);p.setStyle(f,"height",c);b.fire("ResizeEditor")}function z(){function d(g){var c,a;c=tinymce.DOM.getPos(b.getContentAreaContainer());g=b.dom.getRect(g);a=b.dom.getRoot();"BODY"==a.nodeName&&(g.x-=a.ownerDocument.documentElement.scrollLeft||
a.scrollLeft,g.y-=a.ownerDocument.documentElement.scrollTop||a.scrollTop);g.x+=c.x;g.y+=c.y;return g}function c(){m(b.contextToolbars,function(b){b.panel&&b.panel.hide()})}function e(g){var a,h,f,l,k,n;b.removed||(g&&g.toolbar.panel?(n="tc-bc bc-tc tl-bl bl-tl tr-br br-tr".split(" "),k=g.toolbar.panel,k.show(),f=d(g.element),h=tinymce.DOM.getRect(k.getEl()),l=tinymce.DOM.getRect(b.getContentAreaContainer()||b.getBody()),b.inline||(l.w=b.getDoc().documentElement.offsetWidth),b.selection.controlSelection.isResizable(g.element)&&
(f=r.inflate(f,0,7)),(a=r.findBestRelativePosition(h,f,l,n))?(m(n.concat("inside"),function(b){k.classes.toggle("tinymce-inline-"+b,b==a)}),g=r.relativePosition(h,f,a),k.moveTo(g.x,g.y)):(m(n,function(b){k.classes.toggle("tinymce-inline-"+b,!1)}),k.classes.toggle("tinymce-inline-inside",!0),(f=r.intersect(l,f))?(a=r.findBestRelativePosition(h,f,l,["tc-tc","tl-tl","tr-tr"]))?(g=r.relativePosition(h,f,a),k.moveTo(g.x,g.y)):k.moveTo(f.x,f.y):k.hide())):c())}function a(){function a(){b.selection&&e(k(b.selection.getNode()))}
window.requestAnimationFrame?window.requestAnimationFrame(a):a()}function l(){n||(n=b.selection.getScrollContainer()||b.getWin(),tinymce.$(n).on("scroll",a),b.on("remove",function(){tinymce.$(n).off("scroll")}))}function f(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.hide()})}function k(a){var c,d,f=b.contextToolbars||[];d=b.$(a).parents().add(a);for(a=d.length-1;0<=a;a--)for(c=f.length-1;0<=c;c--)if(f[c].predicate(d[a]))return{toolbar:f[c],element:d[a]};return null}var n;b.on("click keyup blur",
function(){window.setTimeout(function(){var a;if(!b.removed)if(a=k(b.selection.getNode())){var c;a.toolbar.panel?a.toolbar.panel.show():(l(),c=q.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:w(a.toolbar.items)}),a.toolbar.panel=c,c.renderTo(document.body).reflow());e(a)}else f()},0)});b.on("ObjectResizeStart",function(){var a=k(b.selection.getNode());a&&a.toolbar.panel&&
a.toolbar.panel.hide()});b.on("nodeChange ResizeEditor ResizeWindow",a);b.on("remove",function(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.remove()});b.contextToolbars={}})}function B(d){function c(){if(f&&f.moveRel&&f.visible()&&!f._fixed){var a=b.selection.getScrollContainer(),c=b.getBody(),d=0,e=0;a&&(e=p.getPos(c),a=p.getPos(a),d=Math.max(0,a.x-e.x),e=Math.max(0,a.y-e.y));f.fixed(!1).moveRel(c,b.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(d,e)}}function h(){f&&
(f.show(),c(),p.addClass(b.getBody(),"mce-edit-focus"))}function a(){f&&(f.hide(),C.hideAll(),p.removeClass(b.getBody(),"mce-edit-focus"))}function l(){f?f.visible()||h():(f=k.panel=q.create({type:m?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!m,border:1,items:[!1===e.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},s()]}),b.fire("BeforeRenderUI"),f.renderTo(m||document.body).reflow(),
u(f),h(),z(),b.on("nodeChange",c),b.on("activate",h),b.on("deactivate",a),b.nodeChanged())}var f,m;e.fixed_toolbar_container&&(m=p.select(e.fixed_toolbar_container)[0]);e.content_editable=!0;b.on("focus",function(){d.skinUiCss?tinymce.DOM.styleSheetLoader.load(d.skinUiCss,l,l):l()});b.on("blur hide",a);b.on("remove",function(){f&&(f.remove(),f=null)});d.skinUiCss&&tinymce.DOM.styleSheetLoader.load(d.skinUiCss);return{}}function D(d){zenario.getContainerIdFromEl(d.targetNode);var c=document.getElementById("zenario_at_toolbars");
d.skinUiCss&&tinymce.DOM.loadCSS(d.skinUiCss);d=k.panel=q.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===e.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:s()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});c.innerHTML="";b.fire("BeforeRenderUI");d.renderTo(c).reflow();u(d);e.content_editable=
!0;return{}}function E(d){var c,h,a,l;d.skinUiCss&&tinymce.DOM.loadCSS(d.skinUiCss);a=k.panel=q.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===e.menubar?null:{type:"menubar",border:"0 0 1 0",items:t()},s(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});!1!==e.resize&&(l={type:"resizehandle",direction:e.resize,onResizeStart:function(){var a=b.getContentAreaContainer().firstChild;c=
a.clientWidth;h=a.clientHeight},onResize:function(a){"both"==e.resize?v(c+a.deltaX,h+a.deltaY):v(null,h+a.deltaY)}});!1!==e.statusbar&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},l]});e.readonly&&a.find("*").disabled(!0);b.fire("BeforeRenderUI");a.renderBefore(d.targetNode).reflow();e.width&&tinymce.DOM.setStyle(a.getEl(),"width",e.width);b.on("remove",function(){a.remove();a=null});u(a);z();return{iframeContainer:a.find("#iframe")[0].getEl(),
editorContainer:a.getEl()}}var k=this,e=b.settings,q=tinymce.ui.Factory,m=tinymce.each,p=tinymce.DOM,r=tinymce.ui.Rect,C=tinymce.ui.FloatPanel,y={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},A="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";
k.renderUI=function(d){var c=!1!==e.skin?e.skin||"lightgray":!1;if(c){var h=e.skin_url,h=h?b.documentBaseURI.toAbsolute(h):tinymce.baseURL+"/skins/"+c;d.skinUiCss=7>=tinymce.Env.documentMode?h+"/skin.ie7.min.css":h+"/skin.min.css";b.contentCSS.push(h+"/content"+(b.inline?".inline":"")+".min.css")}b.on("ProgressState",function(a){k.throbber=k.throbber||new tinymce.ui.Throbber(k.panel.getEl("body"));a.state?k.throbber.show(a.time):k.throbber.hide()});return e.zenario_inline_ui?D(d):e.inline?B(d):E(d)};
k.resizeTo=v;k.resizeBy=function(d,c){var e=b.getContentAreaContainer();k.resizeTo(e.clientWidth+d,e.clientHeight+c)}});

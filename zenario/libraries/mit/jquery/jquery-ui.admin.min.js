$.widget("ui.draggable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&
this._setPositionRelative();this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(a){var b=this.options;this._blurActiveElement(a);if(this.helper||b.disabled||0<$(a.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(a);if(!this.handle)return!1;this._blockFrames(!0===b.iframeFix?"iframe":b.iframeFix);return!0},_blockFrames:function(a){this.iframeBlocks=this.document.find(a).map(function(){var a=$(this);return $("<div>").css("position","absolute").appendTo(a.parent()).outerWidth(a.outerWidth()).outerHeight(a.outerHeight()).offset(a.offset())[0]})},
_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(a){var b=this.document[0];if(this.handleElement.is(a.target))try{b.activeElement&&"body"!==b.activeElement.nodeName.toLowerCase()&&$(b.activeElement).blur()}catch(c){}},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();$.ui.ddmanager&&($.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===$(this).css("position")}).length;this.positionAbs=this.element.offset();this._refreshOffsets(a);this.originalPosition=this.position=this._generatePosition(a,!1);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this._setContainment();
if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a);this._normalizeRightBottom();this._mouseDrag(a,!0);$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,a);return!0},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-
this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(a,b){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(a,!0);this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(!1===this._trigger("drag",a,c))return this._mouseUp({}),!1;this.position=c.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";$.ui.ddmanager&&$.ui.ddmanager.drag(this,a);return!1},
_mouseStop:function(a){var b=this,c=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(c=$.ui.ddmanager.drop(this,a));this.dropped&&(c=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!c||"valid"===this.options.revert&&c||!0===this.options.revert||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==b._trigger("stop",a)&&b._clear()}):!1!==this._trigger("stop",a)&&
this._clear();return!1},_mouseUp:function(a){this._unblockFrames();$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,a);this.handleElement.is(a.target)&&this.element.focus();return $.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){return this.options.handle?!!$(a.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?
this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(a){var b=this.options,c=$.isFunction(b.helper);a=c?$(b.helper.apply(this.element[0],[a])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo);c&&a[0]===this.element[0]&&
this._setPositionRelative();a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute");return a},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));$.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-
a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var a=this.offsetParent.offset(),b=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==b&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=
this.scrollParent.scrollTop());this._isRootNode(this.offsetParent[0])&&(a={top:0,left:0});return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),
10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,b,c;a=this.options;b=this.document[0];this.relativeContainer=
null;if(a.containment)if("window"===a.containment)this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||b.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if("document"===a.containment)this.containment=[0,0,$(b).width()-this.helperProportions.width-
this.margins.left,($(b).height()||b.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(a.containment.constructor===Array)this.containment=a.containment;else{if("parent"===a.containment&&(a.containment=this.helper[0].parentNode),b=$(a.containment),c=b[0])a=/(scroll|auto)/.test(b.css("overflow")),this.containment=[(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),
10)||0),(a?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=b}else this.containment=null},_convertPositionTo:function(a,
b){b||(b=this.position);var c="absolute"===a?1:-1,e=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:e?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:e?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,e,d,f=this.options,g=this._isRootNode(this.scrollParent[0]);d=a.pageX;
e=a.pageY;g&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});b&&(this.containment&&(this.relativeContainer?(c=this.relativeContainer.offset(),c=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(d=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(e=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>
c[2]&&(d=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(e=c[3]+this.offset.click.top)),f.grid&&(e=f.grid[1]?this.originalPageY+Math.round((e-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,e=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-f.grid[1]:e+f.grid[1]:e,d=f.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,d=c?d-this.offset.click.left>=c[0]||d-this.offset.click.left>
c[2]?d:d-this.offset.click.left>=c[0]?d-f.grid[0]:d+f.grid[0]:d),"y"===f.axis&&(d=this.originalPageX),"x"===f.axis&&(e=this.originalPageY));return{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:g?0:this.offset.scroll.top),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:g?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(a,b,c){c=c||this._uiHash();
$.ui.plugin.call(this,a,[b,c,this],!0);/^(drag|start|stop)/.test(a)&&(this.positionAbs=this._convertPositionTo("absolute"),c.offset=this.positionAbs);return $.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});
$.ui.plugin.add("draggable","connectToSortable",{start:function(a,b,c){var e=$.extend({},b,{item:c.element});c.sortables=[];$(c.options.connectToSortable).each(function(){var b=$(this).sortable("instance");b&&!b.options.disabled&&(c.sortables.push(b),b.refreshPositions(),b._trigger("activate",a,e))})},stop:function(a,b,c){var e=$.extend({},b,{item:c.element});c.cancelHelperRemoval=!1;$.each(c.sortables,function(){this.isOver?(this.isOver=0,c.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS=
{position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(a),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",a,e))})},drag:function(a,b,c){$.each(c.sortables,function(){var e=!1,d=this;d.positionAbs=c.positionAbs;d.helperProportions=c.helperProportions;d.offset.click=c.offset.click;d._intersectsWith(d.containerCache)&&(e=!0,$.each(c.sortables,function(){this.positionAbs=c.positionAbs;
this.helperProportions=c.helperProportions;this.offset.click=c.offset.click;this!==d&&this._intersectsWith(this.containerCache)&&$.contains(d.element[0],this.element[0])&&(e=!1);return e}));e?(d.isOver||(d.isOver=1,d.currentItem=b.helper.appendTo(d.element).data("ui-sortable-item",!0),d.options._helper=d.options.helper,d.options.helper=function(){return b.helper[0]},a.target=d.currentItem[0],d._mouseCapture(a,!0),d._mouseStart(a,!0,!0),d.offset.click.top=c.offset.click.top,d.offset.click.left=c.offset.click.left,
d.offset.parent.left-=c.offset.parent.left-d.offset.parent.left,d.offset.parent.top-=c.offset.parent.top-d.offset.parent.top,c._trigger("toSortable",a),c.dropped=d.element,$.each(c.sortables,function(){this.refreshPositions()}),c.currentItem=c.element,d.fromOutside=c),d.currentItem&&(d._mouseDrag(a),b.position=d.position)):d.isOver&&(d.isOver=0,d.cancelHelperRemoval=!0,d.options._revert=d.options.revert,d.options.revert=!1,d._trigger("out",a,d._uiHash(d)),d._mouseStop(a,!0),d.options.revert=d.options._revert,
d.options.helper=d.options._helper,d.placeholder&&d.placeholder.remove(),c._refreshOffsets(a),b.position=c._generatePosition(a,!0),c._trigger("fromSortable",a),c.dropped=!1,$.each(c.sortables,function(){this.refreshPositions()}))})}});$.ui.plugin.add("draggable","cursor",{start:function(a,b,c){a=$("body");c=c.options;a.css("cursor")&&(c._cursor=a.css("cursor"));a.css("cursor",c.cursor)},stop:function(a,b,c){a=c.options;a._cursor&&$("body").css("cursor",a._cursor)}});
$.ui.plugin.add("draggable","opacity",{start:function(a,b,c){a=$(b.helper);c=c.options;a.css("opacity")&&(c._opacity=a.css("opacity"));a.css("opacity",c.opacity)},stop:function(a,b,c){a=c.options;a._opacity&&$(b.helper).css("opacity",a._opacity)}});
$.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(a,b,c){b=c.options;var e=!1,d=c.scrollParentNotHidden[0],f=c.document[0];d!==f&&"HTML"!==d.tagName?(b.axis&&"x"===b.axis||(c.overflowOffset.top+d.offsetHeight-a.pageY<b.scrollSensitivity?d.scrollTop=e=d.scrollTop+
b.scrollSpeed:a.pageY-c.overflowOffset.top<b.scrollSensitivity&&(d.scrollTop=e=d.scrollTop-b.scrollSpeed)),b.axis&&"y"===b.axis||(c.overflowOffset.left+d.offsetWidth-a.pageX<b.scrollSensitivity?d.scrollLeft=e=d.scrollLeft+b.scrollSpeed:a.pageX-c.overflowOffset.left<b.scrollSensitivity&&(d.scrollLeft=e=d.scrollLeft-b.scrollSpeed))):(b.axis&&"x"===b.axis||(a.pageY-$(f).scrollTop()<b.scrollSensitivity?e=$(f).scrollTop($(f).scrollTop()-b.scrollSpeed):$(window).height()-(a.pageY-$(f).scrollTop())<b.scrollSensitivity&&
(e=$(f).scrollTop($(f).scrollTop()+b.scrollSpeed))),b.axis&&"y"===b.axis||(a.pageX-$(f).scrollLeft()<b.scrollSensitivity?e=$(f).scrollLeft($(f).scrollLeft()-b.scrollSpeed):$(window).width()-(a.pageX-$(f).scrollLeft())<b.scrollSensitivity&&(e=$(f).scrollLeft($(f).scrollLeft()+b.scrollSpeed))));!1!==e&&$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(c,a)}});
$.ui.plugin.add("draggable","snap",{start:function(a,b,c){a=c.options;c.snapElements=[];$(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var a=$(this),b=a.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:b.top,left:b.left})})},drag:function(a,b,c){var e,d,f,g,h,m,k,n,l,p,s=c.options,q=s.snapTolerance,r=b.offset.left,t=r+c.helperProportions.width,u=b.offset.top,v=u+c.helperProportions.height;for(l=
c.snapElements.length-1;0<=l;l--)h=c.snapElements[l].left-c.margins.left,m=h+c.snapElements[l].width,k=c.snapElements[l].top-c.margins.top,n=k+c.snapElements[l].height,t<h-q||r>m+q||v<k-q||u>n+q||!$.contains(c.snapElements[l].item.ownerDocument,c.snapElements[l].item)?(c.snapElements[l].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[l].item})),c.snapElements[l].snapping=!1):("inner"!==s.snapMode&&(e=Math.abs(k-v)<=q,d=Math.abs(n-
u)<=q,f=Math.abs(h-t)<=q,g=Math.abs(m-r)<=q,e&&(b.position.top=c._convertPositionTo("relative",{top:k-c.helperProportions.height,left:0}).top),d&&(b.position.top=c._convertPositionTo("relative",{top:n,left:0}).top),f&&(b.position.left=c._convertPositionTo("relative",{top:0,left:h-c.helperProportions.width}).left),g&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m}).left)),p=e||d||f||g,"outer"!==s.snapMode&&(e=Math.abs(k-u)<=q,d=Math.abs(n-v)<=q,f=Math.abs(h-r)<=q,g=Math.abs(m-t)<=q,
e&&(b.position.top=c._convertPositionTo("relative",{top:k,left:0}).top),d&&(b.position.top=c._convertPositionTo("relative",{top:n-c.helperProportions.height,left:0}).top),f&&(b.position.left=c._convertPositionTo("relative",{top:0,left:h}).left),g&&(b.position.left=c._convertPositionTo("relative",{top:0,left:m-c.helperProportions.width}).left)),!c.snapElements[l].snapping&&(e||d||f||g||p)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,a,$.extend(c._uiHash(),{snapItem:c.snapElements[l].item})),
c.snapElements[l].snapping=e||d||f||g||p)}});$.ui.plugin.add("draggable","stack",{start:function(a,b,c){var e;a=$.makeArray($(c.options.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});a.length&&(e=parseInt($(a[0]).css("zIndex"),10)||0,$(a).each(function(a){$(this).css("zIndex",e+a)}),this.css("zIndex",e+a.length))}});
$.ui.plugin.add("draggable","zIndex",{start:function(a,b,c){a=$(b.helper);c=c.options;a.css("zIndex")&&(c._zIndex=a.css("zIndex"));a.css("zIndex",c.zIndex)},stop:function(a,b,c){a=c.options;a._zIndex&&$(b.helper).css("zIndex",a._zIndex)}});var draggable=$.ui.draggable;
$.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var a,b=this.options,c=b.accept;this.isover=!1;this.isout=!0;this.accept=$.isFunction(c)?c:function(a){return a.is(c)};this.proportions=function(){if(arguments.length)a=arguments[0];else return a?a:a={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};
this._addToManager(b.scope);b.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(a){$.ui.ddmanager.droppables[a]=$.ui.ddmanager.droppables[a]||[];$.ui.ddmanager.droppables[a].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice($.ui.ddmanager.droppables[this.options.scope]);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(a,b){"accept"===a?this.accept=$.isFunction(b)?b:function(a){return a.is(b)}:
"scope"===a&&(this._splice($.ui.ddmanager.droppables[this.options.scope]),this._addToManager(b));this._super(a,b)},_activate:function(a){var b=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=$.ui.ddmanager.current;
b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(b)))},_out:function(a){var b=$.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!==this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b)))},_drop:function(a,
b){var c=b||$.ui.ddmanager.current,e=!1;if(!c||(c.currentItem||c.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=$(this).droppable("instance");if(b.options.greedy&&!b.options.disabled&&b.options.scope===c.options.scope&&b.accept.call(b.element[0],c.currentItem||c.element)&&$.ui.intersect(c,$.extend(b,{offset:b.element.offset()}),b.options.tolerance,a))return e=!0,!1});return e?!1:this.accept.call(this.element[0],c.currentItem||
c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});
$.ui.intersect=function(){return function(a,b,c,e){if(!b.offset)return!1;var d=(a.positionAbs||a.position.absolute).left+a.margins.left,f=(a.positionAbs||a.position.absolute).top+a.margins.top,g=d+a.helperProportions.width,h=f+a.helperProportions.height,m=b.offset.left,k=b.offset.top,n=m+b.proportions().width,l=k+b.proportions().height;switch(c){case "fit":return m<=d&&g<=n&&k<=f&&h<=l;case "intersect":return m<d+a.helperProportions.width/2&&g-a.helperProportions.width/2<n&&k<f+a.helperProportions.height/
2&&h-a.helperProportions.height/2<l;case "pointer":a=e.pageY;c=b.proportions().height;if(k=a>=k&&a<k+c)e=e.pageX,b=b.proportions().width,k=e>=m&&e<m+b;return k;case "touch":return(f>=k&&f<=l||h>=k&&h<=l||f<k&&h>l)&&(d>=m&&d<=n||g>=m&&g<=n||d<m&&g>n);default:return!1}}}();
$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c,e,d=$.ui.ddmanager.droppables[a.options.scope]||[],f=b?b.type:null,g=(a.currentItem||a.element).find(":data(ui-droppable)").addBack();c=0;a:for(;c<d.length;c++)if(!(d[c].options.disabled||a&&!d[c].accept.call(d[c].element[0],a.currentItem||a.element))){for(e=0;e<g.length;e++)if(g[e]===d[c].element[0]){d[c].proportions().height=0;continue a}d[c].visible="none"!==d[c].element.css("display");d[c].visible&&("mousedown"===
f&&d[c]._activate.call(d[c],b),d[c].offset=d[c].element.offset(),d[c].proportions({width:d[c].element[0].offsetWidth,height:d[c].element[0].offsetHeight}))}},drop:function(a,b){var c=!1;$.each(($.ui.ddmanager.droppables[a.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(a,this,this.options.tolerance,b)&&(c=this._drop.call(this,b)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=
!0,this.isover=!1,this._deactivate.call(this,b)))});return c},dragStart:function(a,b){a.element.parentsUntil("body").bind("scroll.droppable",function(){a.options.refreshPositions||$.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(a,b);$.each($.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c,e,d;d=$.ui.intersect(a,this,this.options.tolerance,b);var f=!d&&this.isover?
"isout":d&&!this.isover?"isover":null;f&&(this.options.greedy&&(e=this.options.scope,d=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===e}),d.length&&(c=$(d[0]).droppable("instance"),c.greedyChild="isover"===f)),c&&"isover"===f&&(c.isover=!1,c.isout=!0,c._out.call(c,b)),this[f]=!0,this["isout"===f?"isover":"isout"]=!1,this["isover"===f?"_over":"_out"].call(this,b),c&&"isout"===f&&(c.isout=!1,c.isover=!0,c._over.call(c,b)))}})},dragStop:function(a,
b){a.element.parentsUntil("body").unbind("scroll.droppable");a.options.refreshPositions||$.ui.ddmanager.prepareOffsets(a,b)}};var droppable=$.ui.droppable;
$.widget("ui.resizable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(a,b){if("hidden"===$(a).css("overflow"))return!1;
var c=b&&"left"===b?"scrollLeft":"scrollTop",e=!1;if(0<a[c])return!0;a[c]=1;e=0<a[c];a[c]=0;return e},_create:function(){var a,b,c,e,d,f=this,g=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,
marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=g.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",
se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),a=this.handles.split(","),this.handles={},b=0;b<a.length;b++)c=$.trim(a[b]),d="ui-resizable-"+c,e=$("<div class='ui-resizable-handle "+d+"'></div>"),e.css({zIndex:g.zIndex}),"se"===c&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[c]=".ui-resizable-"+c,this.element.append(e);this._renderAxis=
function(a){var b,c,d;a=a||this.element;for(b in this.handles)this.handles[b].constructor===String&&(this.handles[b]=this.element.children(this.handles[b]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(c=$(this.handles[b],this.element),d=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join(""),a.css(c,d),this._proportionallyResize()),
$(this.handles[b])};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){f.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),f.axis=e&&e[1]?e[1]:"se")});g.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){g.disabled||($(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){g.disabled||f.resizing||
($(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var a,b=function(a){$(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(b(this.element),a=this.element,this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),
left:a.css("left")}).insertAfter(a),a.remove());this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(a){var b,c,e=!1;for(b in this.handles)if(c=$(this.handles[b])[0],c===a.target||$.contains(c,a.target))e=!0;return!this.options.disabled&&e},_mouseStart:function(a){var b,c,e=this.options,d=this.element;this.resizing=!0;this._renderProxy();b=this._num(this.helper.css("left"));c=this._num(this.helper.css("top"));e.containment&&(b+=$(e.containment).scrollLeft()||
0,c+=$(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:b,top:c};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalPosition={left:b,top:c};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio=
"number"===typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1;b=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor","auto"===b?this.axis+"-resize":b);d.addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var b,c=this.originalMousePosition;b=a.pageX-c.left||0;var c=a.pageY-c.top||0,e=this._change[this.axis];this._updatePrevProperties();if(!e)return!1;b=e.apply(this,[a,b,c]);this._updateVirtualBoundaries(a.shiftKey);
if(this._aspectRatio||a.shiftKey)b=this._updateRatio(b,a);b=this._respectSize(b,a);this._updateCache(b);this._propagate("resize",a);b=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();$.isEmptyObject(b)||(this._updatePrevProperties(),this._trigger("resize",a,this.ui()),this._applyChanges());return!1},_mouseStop:function(a){this.resizing=!1;var b,c,e,d=this.options;this._helper&&(b=this._proportionallyResizeElements,b=(c=b.length&&/textarea/i.test(b[0].nodeName))&&
this._hasScroll(b[0],"left")?0:this.sizeDiff.height,c=c?0:this.sizeDiff.width,c={width:this.helper.width()-c,height:this.helper.height()-b},b=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,e=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,d.animate||this.element.css($.extend(c,{top:e,left:b})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!d.animate&&this._proportionallyResize());
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px");this.size.width!==
this.prevSize.width&&(a.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px");this.helper.css(a);return a},_updateVirtualBoundaries:function(a){var b,c,e,d;d=this.options;d={minWidth:this._isNumber(d.minWidth)?d.minWidth:0,maxWidth:this._isNumber(d.maxWidth)?d.maxWidth:Infinity,minHeight:this._isNumber(d.minHeight)?d.minHeight:0,maxHeight:this._isNumber(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||a)a=d.minHeight*this.aspectRatio,c=d.minWidth/
this.aspectRatio,b=d.maxHeight*this.aspectRatio,e=d.maxWidth/this.aspectRatio,a>d.minWidth&&(d.minWidth=a),c>d.minHeight&&(d.minHeight=c),b<d.maxWidth&&(d.maxWidth=b),e<d.maxHeight&&(d.maxHeight=e);this._vBoundaries=d},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=
this.position,c=this.size,e=this.axis;this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null);"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width));return a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,d=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&
b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,k=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);f&&(a.width=b.minWidth);g&&(a.height=b.minHeight);e&&(a.width=b.maxWidth);d&&(a.height=b.maxHeight);f&&k&&(a.left=h-b.minWidth);e&&k&&(a.left=h-b.maxWidth);g&&c&&(a.top=m-b.minHeight);d&&c&&(a.top=m-b.maxHeight);a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||
(a.left=null):a.top=null;return a},_getPaddingPlusBorderDimensions:function(a){var b=0,c=[],e=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];for(a=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(e[b],10)||0,c[b]+=parseInt(a[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||
this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+
c}},se:function(a,b,c){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,c]))},sw:function(a,b,c){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,c]))},ne:function(a,b,c){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,c]))},nw:function(a,b,c){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,c]))}},_propagate:function(a,b){$.ui.plugin.call(this,a,[b,this.ui()]);
"resize"!==a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});
$.ui.plugin.add("resizable","animate",{stop:function(a){var b=$(this).resizable("instance"),c=b.options,e=b._proportionallyResizeElements,d=e.length&&/textarea/i.test(e[0].nodeName),f=d&&b._hasScroll(e[0],"left")?0:b.sizeDiff.height,d={width:b.size.width-(d?0:b.sizeDiff.width),height:b.size.height-f},f=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,g=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate($.extend(d,g&&
f?{top:g,left:f}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};e&&e.length&&$(e[0]).css({width:c.width,height:c.height});b._updateCache(c);b._propagate("resize",a)}})}});
$.ui.plugin.add("resizable","containment",{start:function(){var a,b,c,e,d,f=$(this).resizable("instance"),g=f.element;c=f.options.containment;if(g=c instanceof $?c.get(0):/parent/.test(c)?g.parent().get(0):c)f.containerElement=$(g),/document/.test(c)||c===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(a=$(g),b=[],$(["Top","Right",
"Left","Bottom"]).each(function(c,d){b[c]=f._num(a.css("padding"+d))}),f.containerOffset=a.offset(),f.containerPosition=a.position(),f.containerSize={height:a.innerHeight()-b[3],width:a.innerWidth()-b[1]},c=f.containerOffset,e=f.containerSize.height,d=f.containerSize.width,d=f._hasScroll(g,"left")?g.scrollWidth:d,e=f._hasScroll(g)?g.scrollHeight:e,f.parentData={element:g,left:c.left,top:c.top,width:d,height:e})},resize:function(a){var b,c,e,d=$(this).resizable("instance");b=d.options;c=d.containerOffset;
e=d.position;a=d._aspectRatio||a.shiftKey;var f={top:0,left:0},g=d.containerElement,h=!0;g[0]!==document&&/static/.test(g.css("position"))&&(f=c);e.left<(d._helper?c.left:0)&&(d.size.width+=d._helper?d.position.left-c.left:d.position.left-f.left,a&&(d.size.height=d.size.width/d.aspectRatio,h=!1),d.position.left=b.helper?c.left:0);e.top<(d._helper?c.top:0)&&(d.size.height+=d._helper?d.position.top-c.top:d.position.top,a&&(d.size.width=d.size.height*d.aspectRatio,h=!1),d.position.top=d._helper?c.top:
0);b=d.containerElement.get(0)===d.element.parent().get(0);e=/relative|absolute/.test(d.containerElement.css("position"));b&&e?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top);b=Math.abs(d.sizeDiff.width+(d._helper?d.offset.left-f.left:d.offset.left-c.left));c=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-f.top:d.offset.top-c.top));b+d.size.width>=d.parentData.width&&(d.size.width=
d.parentData.width-b,a&&(d.size.height=d.size.width/d.aspectRatio,h=!1));c+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-c,a&&(d.size.width=d.size.height*d.aspectRatio,h=!1));h||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},stop:function(){var a=$(this).resizable("instance"),b=a.options,c=a.containerOffset,e=a.containerPosition,d=a.containerElement,f=$(a.helper),g=f.offset(),h=f.outerWidth()-
a.sizeDiff.width,f=f.outerHeight()-a.sizeDiff.height;a._helper&&!b.animate&&/relative/.test(d.css("position"))&&$(this).css({left:g.left-e.left-c.left,width:h,height:f});a._helper&&!b.animate&&/static/.test(d.css("position"))&&$(this).css({left:g.left-e.left-c.left,width:h,height:f})}});
$.ui.plugin.add("resizable","alsoResize",{start:function(){var a=$(this).resizable("instance").options,b=function(a){$(a).each(function(){var a=$(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof a.alsoResize||a.alsoResize.parentNode?b(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):$.each(a.alsoResize,function(a){b(a)})},resize:function(a,
b){var c=$(this).resizable("instance"),e=c.options,d=c.originalSize,f=c.originalPosition,g={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-f.top||0,left:c.position.left-f.left||0},h=function(a,c){$(a).each(function(){var a=$(this),d=$(this).data("ui-resizable-alsoresize"),e={},f=c&&c.length?c:a.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(f,function(a,b){var c=(d[b]||0)+(g[b]||0);c&&0<=c&&(e[b]=c||null)});a.css(e)})};
"object"!==typeof e.alsoResize||e.alsoResize.nodeType?h(e.alsoResize):$.each(e.alsoResize,function(a,b){h(a,b)})},stop:function(){$(this).removeData("resizable-alsoresize")}});
$.ui.plugin.add("resizable","ghost",{start:function(){var a=$(this).resizable("instance"),b=a.options,c=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof b.ghost?b.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=$(this).resizable("instance");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},
stop:function(){var a=$(this).resizable("instance");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});
$.ui.plugin.add("resizable","grid",{resize:function(){var a,b=$(this).resizable("instance"),c=b.options,e=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis,h="number"===typeof c.grid?[c.grid,c.grid]:c.grid,m=h[0]||1,k=h[1]||1,n=Math.round((e.width-d.width)/m)*m,e=Math.round((e.height-d.height)/k)*k,l=d.width+n,p=d.height+e,s=c.maxWidth&&c.maxWidth<l,q=c.maxHeight&&c.maxHeight<p,r=c.minWidth&&c.minWidth>l,t=c.minHeight&&c.minHeight>p;c.grid=h;r&&(l+=m);t&&(p+=k);s&&(l-=m);q&&(p-=k);if(/^(se|s|e)$/.test(g))b.size.width=
l,b.size.height=p;else if(/^(ne)$/.test(g))b.size.width=l,b.size.height=p,b.position.top=f.top-e;else if(/^(sw)$/.test(g))b.size.width=l,b.size.height=p,b.position.left=f.left-n;else{if(0>=p-k||0>=l-m)a=b._getPaddingPlusBorderDimensions(this);0<p-k?(b.size.height=p,b.position.top=f.top-e):(p=k-a.height,b.size.height=p,b.position.top=f.top+d.height-p);0<l-m?(b.size.width=l,b.position.left=f.left-n):(l=k-a.height,b.size.width=l,b.position.left=f.left+d.width-l)}}});
var resizable=$.ui.resizable,selectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var a,b=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){a=$(b.options.filter,b.element[0]);a.addClass("ui-selectee");a.each(function(){var a=$(this),b=a.offset();$.data(this,"selectable-item",
{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=a.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(a){var b=this,c=this.options;this.opos=[a.pageX,a.pageY];this.options.disabled||(this.selectees=$(c.filter,this.element[0]),this._trigger("start",a),$(c.appendTo).append(this.helper),this.helper.css({left:a.pageX,top:a.pageY,width:0,height:0}),c.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var c=$.data(this,"selectable-item");c.startselected=!0;a.metaKey||a.ctrlKey||(c.$element.removeClass("ui-selected"),c.selected=!1,
c.$element.addClass("ui-unselecting"),c.unselecting=!0,b._trigger("unselecting",a,{unselecting:c.element}))}),$(a.target).parents().addBack().each(function(){var c,d=$.data(this,"selectable-item");if(d)return c=!a.metaKey&&!a.ctrlKey||!d.$element.hasClass("ui-selected"),d.$element.removeClass(c?"ui-unselecting":"ui-selected").addClass(c?"ui-selecting":"ui-unselecting"),d.unselecting=!c,d.selecting=c,(d.selected=c)?b._trigger("selecting",a,{selecting:d.element}):b._trigger("unselecting",a,{unselecting:d.element}),
!1}))},_mouseDrag:function(a){this.dragged=!0;if(!this.options.disabled){var b,c=this,e=this.options,d=this.opos[0],f=this.opos[1],g=a.pageX,h=a.pageY;d>g&&(b=g,g=d,d=b);f>h&&(b=h,h=f,f=b);this.helper.css({left:d,top:f,width:g-d,height:h-f});this.selectees.each(function(){var b=$.data(this,"selectable-item"),k=!1;b&&b.element!==c.element[0]&&("touch"===e.tolerance?k=!(b.left>g||b.right<d||b.top>h||b.bottom<f):"fit"===e.tolerance&&(k=b.left>d&&b.right<g&&b.top>f&&b.bottom<h),k?(b.selected&&(b.$element.removeClass("ui-selected"),
b.selected=!1),b.unselecting&&(b.$element.removeClass("ui-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("ui-selecting"),b.selecting=!0,c._trigger("selecting",a,{selecting:b.element}))):(b.selecting&&((a.metaKey||a.ctrlKey)&&b.startselected?(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.$element.addClass("ui-selected"),b.selected=!0):(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.startselected&&(b.$element.addClass("ui-unselecting"),b.unselecting=!0),c._trigger("unselecting",
a,{unselecting:b.element}))),!b.selected||a.metaKey||a.ctrlKey||b.startselected||(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,c._trigger("unselecting",a,{unselecting:b.element}))))});return!1}},_mouseStop:function(a){var b=this;this.dragged=!1;$(".ui-unselecting",this.element[0]).each(function(){var c=$.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;b._trigger("unselected",a,{unselected:c.element})});
$(".ui-selecting",this.element[0]).each(function(){var c=$.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;b._trigger("selected",a,{selected:c.element})});this._trigger("stop",a);this.helper.remove();return!1}}),sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,
forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&a<b+c},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},
_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");$.each(this.items,
function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(a,b){var c=null,e=!1,d=this;if(this.reverting||this.options.disabled||"static"===
this.options.type)return!1;this._refreshItems(a);$(a.target).parents().each(function(){if($.data(this,d.widgetName+"-item")===d)return c=$(this),!1});$.data(a.target,d.widgetName+"-item")===d&&(c=$(a.target));if(!c||this.options.handle&&!b&&($(this.options.handle,c).find("*").addBack().each(function(){this===a.target&&(e=!0)}),!e))return!1;this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){var e;b=this.options;this.currentContainer=this;this.refreshPositions();
this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=
this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&"auto"!==b.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",b.cursor),this.storedStylesheet=$("<style>*{ cursor: "+
b.cursor+" !important; }</style>").appendTo(e));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();
if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));$.ui.ddmanager&&($.ui.ddmanager.current=this);$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){var b,c,e,d;b=this.options;c=!1;this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=
this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?this.scrollParent[0].scrollLeft=
c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(a.pageY-$(document).scrollTop()<b.scrollSensitivity?c=$(document).scrollTop($(document).scrollTop()-b.scrollSpeed):$(window).height()-(a.pageY-$(document).scrollTop())<b.scrollSensitivity&&(c=$(document).scrollTop($(document).scrollTop()+b.scrollSpeed)),a.pageX-$(document).scrollLeft()<b.scrollSensitivity?c=$(document).scrollLeft($(document).scrollLeft()-
b.scrollSpeed):$(window).width()-(a.pageX-$(document).scrollLeft())<b.scrollSensitivity&&(c=$(document).scrollLeft($(document).scrollLeft()+b.scrollSpeed))),!1!==c&&$.ui.ddmanager&&!b.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,a));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(b=this.items.length-
1;0<=b;b--)if(c=this.items[b],e=c.item[0],(d=this._intersectsWithPointer(c))&&c.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===d?"next":"prev"]()[0]!==e&&!$.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],e):1)){this.direction=1===d?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}this._contactContainers(a);
$.ui.ddmanager&&$.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,b){if(a){$.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this,e=this.placeholder.offset(),d=this.options.axis,f={};d&&"x"!==d||(f.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));d&&"y"!==d||(f.top=e.top-this.offset.parent.top-
this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;$(this.helper).animate(f,parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",
null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):
$(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};$(b).each(function(){var b=($(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push($(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,d=e+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,m=h+a.height,k=this.offset.click.top,n=this.offset.click.left,n="y"===this.options.axis||b+n>f&&b+n<g,k=("x"===this.options.axis||e+k>h&&e+k<m)&&n;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":
"height"]>a[this.floating?"width":"height"]?k:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<e+this.helperProportions.height/2&&d-this.helperProportions.height/2<m},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();
return b?this.floating?c&&"right"===c||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&a||"left"===e&&!a:c&&("down"===c&&b||"up"===c&&!b)},_getDragVerticalDirection:function(){var a=
this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function b(){f.push(this)}var c,e,d,f=[],
g=[],h=this._connectWith();if(h&&a)for(a=h.length-1;0<=a;a--)for(e=$(h[a]),c=e.length-1;0<=c;c--)(d=$.data(e[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&g.push([$.isFunction(d.options.items)?d.options.items.call(d.element):$(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d]);g.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(a=g.length-1;0<=a;a--)g[a][0].each(b);return $(f)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(b){for(var c=0;c<a.length;c++)if(a[c]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var b,c,e,d,f,g=this.items,h=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):$(this.options.items,this.element),this]];
if((f=this._connectWith())&&this.ready)for(b=f.length-1;0<=b;b--)for(e=$(f[b]),c=e.length-1;0<=c;c--)(d=$.data(e[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&(h.push([$.isFunction(d.options.items)?d.options.items.call(d.element[0],a,{item:this.currentItem}):$(d.options.items,d.element),d]),this.containers.push(d));for(b=h.length-1;0<=b;b--)for(a=h[b][1],e=h[b][0],c=0,f=e.length;c<f;c++)d=$(e[c]),d.data(this.widgetName+"-item",a),g.push({item:d,instance:a,width:0,height:0,left:0,top:0})},
refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b,c,e;for(b=this.items.length-1;0<=b;b--)c=this.items[b],c.instance!==this.currentContainer&&this.currentContainer&&c.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?$(this.options.toleranceElement,c.item):c.item,a||(c.width=e.outerWidth(),c.height=e.outerHeight()),e=e.offset(),c.left=e.left,c.top=e.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var b,c=a.options;c.placeholder&&c.placeholder.constructor!==String||(b=c.placeholder,c.placeholder={element:function(){var c=
a.currentItem[0].nodeName.toLowerCase(),d=$("<"+c+">",a.document[0]).addClass(b||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");"tr"===c?a.currentItem.children().each(function(){$("<td>&#160;</td>",a.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(d)}):"img"===c&&d.attr("src",a.currentItem.attr("src"));b||d.css("visibility","hidden");return d},update:function(e,d){if(!b||c.forcePlaceholderSize)d.height()||d.height(a.currentItem.innerHeight()-
parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}});a.placeholder=$(c.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);c.placeholder.update(a,a.placeholder)},_contactContainers:function(a){var b,c,e,d,f,g,h,m,k=d=null;for(b=this.containers.length-1;0<=b;b--)$.contains(this.currentItem[0],
this.containers[b].element[0])||(this._intersectsWith(this.containers[b].containerCache)?d&&$.contains(this.containers[b].element[0],d.element[0])||(d=this.containers[b],k=b):this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",a,this._uiHash(this)),this.containers[b].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[k].containerCache.over||(this.containers[k]._trigger("over",a,this._uiHash(this)),this.containers[k].containerCache.over=1);else{b=1E4;
e=null;d=(c=d.floating||this._isFloating(this.currentItem))?"left":"top";f=c?"width":"height";m=c?"clientX":"clientY";for(c=this.items.length-1;0<=c;c--)$.contains(this.containers[k].element[0],this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]&&(g=this.items[c].item.offset()[d],h=!1,a[m]-g>this.items[c][f]/2&&(h=!0),Math.abs(a[m]-g)<b&&(b=Math.abs(a[m]-g),e=this.items[c],this.direction=h?"up":"down"));if(e||this.options.dropOnEmpty)this.currentContainer===this.containers[k]?this.currentContainer.containerCache.over||
(this.containers[k]._trigger("over",a,this._uiHash()),this.currentContainer.containerCache.over=1):(e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[k].element,!0),this._trigger("change",a,this._uiHash()),this.containers[k]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[k],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[k]._trigger("over",a,this._uiHash(this)),this.containers[k].containerCache.over=1)}},_createHelper:function(a){var b=
this.options;a=$.isFunction(b.helper)?$(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||$("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});
a[0].style.width&&!b.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!b.forceHelperSize||a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));$.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&
(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&
$.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,b,c;b=this.options;"parent"===b.containment&&(b.containment=this.helper[0].parentNode);if("document"===b.containment||"window"===b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,$("document"===b.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"===b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(b.containment)||(a=$(b.containment)[0],b=$(b.containment).offset(),c="hidden"!==$(a).css("overflow"),this.containment=[b.left+(parseInt($(a).css("borderLeftWidth"),10)||0)+(parseInt($(a).css("paddingLeft"),
10)||0)-this.margins.left,b.top+(parseInt($(a).css("borderTopWidth"),10)||0)+(parseInt($(a).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt($(a).css("borderLeftWidth"),10)||0)-(parseInt($(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt($(a).css("borderTopWidth"),10)||0)-(parseInt($(a).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top])},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:e.scrollTop())*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*
c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:e.scrollLeft())*c}},_generatePosition:function(a){var b,c,e=this.options;c=a.pageX;b=a.pageY;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(d[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(c=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),e.grid&&(b=this.originalPageY+Math.round((b-this.originalPageY)/e.grid[1])*
e.grid[1],b=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-e.grid[1]:b+e.grid[1]:b,c=this.originalPageX+Math.round((c-this.originalPageX)/e.grid[0])*e.grid[0],c=this.containment?c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-e.grid[0]:c+e.grid[0]:c));return{top:b-this.offset.click.top-this.offset.relative.top-
this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:1;this._delay(function(){d===
this.counter&&this.refreshPositions(!e)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var e,d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)if("auto"===this._storedCSS[e]||"static"===this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||d.push(c("deactivate",this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(c("out",this,this.containers[e])),this.containers[e].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",
this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!b){for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function(){!1===
$.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||$([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});

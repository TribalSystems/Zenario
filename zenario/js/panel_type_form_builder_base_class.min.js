zenario.lib(function(g,t,d,p,x,y,u,v,m,z,A,l,B,q,C,r,D,E,F,w,s,k,n){d=s(n.form_builder_base_class=w(n.base));d.sortByOrd=function(a,c){return a.ord<c.ord?-1:a.ord>c.ord?1:0};d.sendAJAXRequest=function(a){var c=l._gK(),e="zenario/ajax.php?__pluginClassName__="+this.tuix.class_name+"&__path__="+l.path+"&method_call=handleOrganizerPanelAJAX",h=function(){r("organizer_preloader_circle").style.display="none";v._nDS();p.onbeforeunload=!1};$.extend(c,a);r("organizer_preloader_circle").style.display="block";
return u._a(t+e,c,!0,!1,!0,!0,g,g,g,g,g,h).after(h)};d.sortErrors=function(a){var c=[],e;for(e in a)k(a,e)&&c.push(a[e]);return c};d.loadFields=function(a,c,e){var h={},b;for(b in c)if(k(c,b)){var f=c[b];f&&(f=_._cl(f),f.id=b,f.path=a,f.value&&!q(e[b])&&(e[b]=f.value),e&&q(e[b])&&(f._value=e[b]),f.hidden&&(f._hidden=!0),h[b]=f)}return h};d.sortFields=function(a,c){var e=[],h;for(h in a)if(k(a,h)){var b=a[h];if("select"==b.type||"radios"==b.type||"checkboxes"==b.type)b._values=this.getFieldValuesList(b),
b.empty_value&&b._values.unshift({ord:0,label:b.empty_value,value:""});b.visible_if&&"undefined"===typeof b._hidden&&!m._dE(b.visible_if,g,g,c,g,g,g,g,g,g,this.tuix)&&(b._hidden=!0);b.readonly_if&&"undefined"===typeof b._readonly&&m._dE(b.readonly_if,g,g,c,g,g,g,g,g,g,this.tuix)&&(b._readonly=!0);e.push(b)}return e};d.saveFieldListOfValues=function(a){a&&$("#field_values_list div.field_value").each(function(c,e){var h=$(this).data("id");a.lov||(a.lov={});a.lov[h]&&(a.lov[h].id=h,a.lov[h].label=$(e).find("input").val(),
a.lov[h].ord=c+1)})};d.getTUIXFieldsHTML=function(a){for(var c="",e=0;e<a.length;e++)c+=this.getTUIXFieldHTML(a[e]);return c};d.getTUIXFieldHTML=function(a){return this.microTemplate("zenario_organizer_admin_box_builder_tuix_field",a)};d.sortAndLoadTUIXPages=function(a,c,e){var h=[],b=!1,f;for(f in a)if(k(a,f)){var d=a[f];d&&(d.id=f,!d.visible_if||m._dE(d.visible_if,g,g,c))&&(b||e&&e!=f||(b=!0,d._selected=!0,this.selectedDetailsPage=f),h.push(d))}return h};d.getTUIXPagesHTML=function(a){for(var c=
"",e=0;e<a.length;e++)c+=this.getTUIXPageHTML(a[e]);return c};d.getTUIXPageHTML=function(a){return this.microTemplate("zenario_organizer_admin_box_builder_tuix_tab",a)};d.saveItemTUIXFields=function(a,c,e,d){for(var b in c)if(k(c,b)){var f=c[b];if($("#tuix_field__"+b).length){if("text"==f.type||"select"==f.type||"textarea"==f.type)a[b]=$("#field__"+b).val();else if("checkbox"==f.type)a[b]=$("#field__"+b).is(":checked");else if("radios"==f.type)a[b]=$('#organizer_field_details_form input[name="'+b+
'"]:checked').val();else if("checkboxes"==f.type)a[b]=[],$('#organizer_field_details_form input[name="'+b+'"]:checked').each(function(){a[b].push($(this).val())});else if("values_list"==f.type)this.saveFieldListOfValues(a);else if("translations"==f.type)a._translations={},$("#organizer_field_translations input.translation").map(function(c,b){var e=$(this).data("language_id"),d=$(this).data("field_column");a._translations[d]||(a._translations[d]={phrases:{}});a._translations[d].phrases[e]=b.value});
else if("crm_values"==f.type){var g="crm";"salesforce"==f.crm_type&&(g="salesforce");if("checkbox"==a.type||"group"==a.type)a["_"+g+"_data"]={},a["_"+g+"_data"].values={unchecked:{ord:1,label:0},checked:{ord:2,label:1}};$("#organizer_field_crm_values input.crm_value_input").map(function(b,c){var e=$(this).data("id");"checkbox"==a.type||"group"==a.type?a["_"+g+"_data"].values[e][g+"_value"]=$(this).val():a.lov&&a.lov[e]&&(a.lov[e][g+"_value"]=$(this).val())})}f.validation&&f.validation.required&&!a[b]&&
(d[b]=f.validation.required)}}this.validateFieldDetails(c,a,e,this.selectedDetailsPage,d)};d.saveItemTUIXPage=function(a,c,e){var d={};this.tuix[a]&&this.tuix[a].tabs&&this.tuix[a].tabs[c]&&(this.saveItemTUIXFields(e,this.tuix[a].tabs[c].fields,a,d),e._changed=!0);return d};d.addFieldValue=function(a,c,e){c||(c="Untitled");"undefined"===typeof a.lov&&(a.lov={});newValueId="t"+this.maxNewCustomFieldValue++;a.lov[newValueId]={id:newValueId,label:c,ord:e||_._si(a.lov)+100,_is_new:!0}};d.getPageLabel=
function(a){a&&""===a.trim()&&(a="Untitled");return a};d.getMatchingRepeatEnd=function(a){var c=!1,e=!1,d=this.getOrderedFields(this.currentPageId),b;for(b=0;b<d.length;b++)if("repeat_end"==d[b].type&&(c=d[b].id),d[b].id==a)e=b;else if(!1!==e&&"repeat_end"==d[b].type){c=d[b].id;break}return c};d.showButtons=function(a){var c=this;c.changeDetected?(a.html(c.microTemplate("zenario_organizer_apply_cancel_buttons",{confirm_text:"Save changes",confirm_css:"form_editor",cancel_text:"Reset"})),a.find("#organizer_applyButton").click(function(){var a=
c.saveCurrentOpenDetails();a||(a=c.displayPageFieldStructureErrors(c.currentPageId))||c.saveChanges()}),a.find("#organizer_cancelButton").click(function(){confirm("Are you sure you want to discard all your changes?")&&(p.onbeforeunload=!1,l._eI(),c.selectedFieldId=!1,c.selectedPageId=!1,c.currentPageId=!1,c.changeDetected=!1,l._r())})):a.html("").show()};d.displayPageFieldStructureErrors=function(){return!1};d.displayToastMessage=function(a,c){};d.returnShowLeftColumn=function(){return!1};d.returnPanelTitle=
function(){return s(n.grid).returnPanelTitle.call(this)};d.returnMultipleSelectEnabled=function(){return!1};d.returnSearchingEnabled=function(){return!1};d.returnInspectionViewEnabled=function(){return!1}},zenarioO.panelTypes);

zenario.lib(function(s,q,w,k,x,y,n,h,z,A,c,l,B,C,D,E,t,u,v,p,r){var b=v(r.form_builder_base_class=u(r.base));b.sortByOrd=function(a,d){return a.ord<d.ord?-1:a.ord>d.ord?1:0};b.initField=function(a){var d=this;a.on("click",function(){d.fieldClick($(this))});this.initDeleteButtons()};b.showFieldDetailsSection=function(a,d){var e=this,b,c=function(d){_.isEmpty(d)&&(e.currentFieldTab=a,$("#organizer_field_details_tabs div.tab").removeClass("on"),$("#field_tab__"+a).addClass("on"),$("#organizer_field_details div.section").hide(),
$("#field_section__"+a).show())};if(!d&&(this.save(),b=this.validate())){b.after(c);return}c([])};b.showDetailsSection=function(a){var d=["organizer_field_type_list","organizer_field_details","organizer_tab_details"],e=$.inArray(a,d);if(-1<e)for(key in $("#"+a+"_outer").show(),"organizer_field_type_list"==a&&(this.current=!1),delete d[e],d)p(d,key)&&(a=d[key])&&$("#"+a+"_outer").hide()};b.initAddNewFieldsButton=function(){var a=this;$(this.formEditorSelector).find("input.add_new_field, span.add_new_field").on("click",
function(){var d=function(d){_.isEmpty(d)&&(a.unselectField(),a.showDetailsSection("organizer_field_type_list"))};a.save();(cb=a.validate())?cb.after(d):d([])})};b.unselectField=function(){this.current.type=this.current.id=!1;$(this.formFieldInlineButtonsSelector).hide();$(this.formFieldsSelector).removeClass("selected")};b.sendAJAXRequest=function(a){var d=c.getKey(),e="zenario/ajax.php?__pluginClassName__="+this.tuix.class_name+"&__path__="+c.path+"&method_call=handleOrganizerPanelAJAX";$.extend(d,
a);l("organizer_preloader_circle").style.display="block";return n.ajax(q+e,d).after(function(){l("organizer_preloader_circle").style.display="none"})};b.changeMadeToPanel=function(){var a=this;this.changingForm||(this.changingForm=!0,k.onbeforeunload=function(){return a.saveChangesWarningMessage},c.disableInteraction("You should either save your changes or click reset to discard them before leaving"),c.setButtons())};b.saveChanges=function(){this.saveItemsOrder();var a=this,d={mode:"save",data:JSON.stringify(this.tuix.items)};
this.sendAJAXRequest(d).after(function(d){d&&h.showMessage(d);h.nowDoingSomething();k.onbeforeunload=!1;c.enableInteraction();a.changingForm=!1;a.changesSaved=!0;c.reload()})};b.formatFieldDetails=function(){this.save();this.setCurrentFieldDetails()};b.createSelectList=function(a,d,b,c){var f=[];if(b){var g="-- Select --";!0!==b&&(g=b);emptyOption={label:g,value:"",ord:-1};a.hasOwnProperty(d)&&(emptyOption.selected=!0);f.push(emptyOption)}for(key in a)if(p(a,key)){b=a[key];b=_.clone(b);if(!0===c){b.options=
[];b.isOptGroup=!0;for(subKey in b.childOptions)p(b.childOptions,subKey)&&(g=b.childOptions[subKey],g=_.clone(g),subKey==d&&(g.selected=!0),g.value=subKey,b.options.push(g));b.options.sort(this.sortByOrd)}else key==d&&(b.selected=!0),b.value=key;f.push(b)}f.sort(this.sortByOrd);return f};b.createRadioList=function(a,b,e,c){var f=[];for(key in a)if(a.hasOwnProperty(key)){var g=_.clone(a[key]);key==b&&(g.checked=!0);!0===c&&(g.disabled=!0);g.value=key;g.name=e;f.push(g)}f.sort(this.sortByOrd);return f};
b.showButtons=function(a){var b=this;if(this.changingForm){a.html(h.microTemplate("zenario_organizer_apply_cancel_buttons",{confirm_text:this.saveButtonText,confirm_css:"form_editor",cancel_text:this.cancelButtonText}));var e=!1;a.find("#organizer_applyButton").click(function(){var a=function(a){if(_.isEmpty(a)){if(!0==e)return!1;h.nowDoingSomething("saving",!0);e=!0;b.saveChanges()}};b.save();(cb=b.validate())?cb.after(a):a([])});a.find("#organizer_cancelButton").click(function(){confirm("Are you sure you want to discard all your changes?")&&
(k.onbeforeunload=!1,c.enableInteraction(),b.currentFieldTab=!1,b.changingForm=!1,c.reload())})}else a.html("").show()};b.initFieldValues=function(a){var b=this;$("#field_values_list .delete_icon").off().on("click",function(){var e=$(this).data("id");a.lov[e]={remove:!0};$("#organizer_field_value_"+e).remove();$(this).parent().parent().remove();b.valuesChanged=!0;b.changeMadeToPanel()});$("#field_values_list input").off().on("keyup",function(){var a=$(this).data("id");$("#organizer_field_value_"+
a+" label").text($(this).val());b.valuesChanged=!0;b.changeMadeToPanel()})};b.initAddNewFieldValuesButton=function(a){var b=this;$("#organizer_add_a_field_value").on("click",function(){b.save();var e="t"+b.maxNewCustomFieldValue++,c={id:e,label:"Untitled",ord:_.size(a.lov)+100,is_new_value:!0};a.lov[e]=c;b.setCurrentFieldValues(a);b.changeMadeToPanel()})};b.setCurrentFieldValues=function(a){var b=this.current.id,c=this.getOrderedItems(a.lov),m="";this.valuesChanged=!0;m=h.microTemplate("zenario_organizer_admin_box_builder_field_value",
c);$("#field_values_list").html(m);this.initFieldValues(a);-1<$.inArray(a.type,["checkboxes","radios"])&&("checkboxes"==a.type?m=h.microTemplate("zenario_organizer_admin_box_builder_checkbox_values_preview",c):"radios"==a.type&&(m=h.microTemplate("zenario_organizer_admin_box_builder_radio_values_preview",c)),$("#organizer_form_field_values_"+b).html(m))};b.getCurrentFieldValues=function(a){var b=_.clone(a.lov);$("#field_values_list div.field_value").each(function(c,h){var f=$(this).data("id");b[f]=
{id:f,label:$(h).find("input").val(),ord:c+1};a.lov[f]&&(a.lov[f].is_new_value&&(b[f].is_new_value=!0),a.lov[f].crm_value&&(b[f].crm_value=a.lov[f].crm_value))});return b};b.shakeBox=function(a){$(a).effect({effect:"bounce",duration:125,direction:"right",times:2,distance:5,mode:"effect"})};b.displayToastMessage=function(a,b){};b.cmsSetsPanelTUIX=function(a){this.tuix=a};b.cmsSetsPath=function(a){this.path=a};b.cmsSetsRequestedItem=function(a){this.lastItemClicked=this.requestedItem=a};b.cmsSetsSearchTerm=
function(a){this.searchTerm=a};b.returnShowLeftColumn=function(){return!1};b.returnAJAXURL=function(){return q+"zenario/admin/organizer.ajax.php?path="+encodeURIComponent(this.path)+n.urlRequest(this.returnAJAXRequests())};b.returnDevToolsAJAXURL=function(){return b.returnAJAXURL.call(this)};b.returnAJAXRequests=function(){return{}};b.returnPageSize=function(){return Math.max(20,Math.min(500,1*h.adminSettings.organizer_page_size||50))};b.returnPanelTitle=function(){var a=this.tuix.title;!k.zenarioOSelectMode||
this.path!=k.zenarioOTargetPath&&!1!==k.zenarioOTargetPath||(k.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));c.filteredView&&(a+=t.refined);return a};b.sizePanel=function(a,b,c,h){};b.onUnload=function(a,b,c){this.saveScrollPosition(b)};b.saveScrollPosition=function(a){this.scrollTop=a.scrollTop();this.scrollLeft=a.scrollLeft()};b.restoreScrollPosition=function(a){a.scrollTop(this.scrollTop||
0).scrollLeft(this.scrollLeft||0).trigger("scroll")};b.checkboxClick=function(a,b){n.stop(b);var c=this;setTimeout(function(){c.itemClick(a,s,!0)},0)};b.itemClick=function(a,b,e){if(!this.tuix||!this.tuix.items[a])return!1;c.multipleSelectEnabled&&!e&&(b||event).shiftKey&&this.lastItemClicked?c.selectItemRange(a,this.lastItemClicked):(c.multipleSelectEnabled&&e?(this.selectedItems[a]?this.deselectItem(a):this.selectItem(a),c.closeInspectionView()):!c.multipleSelectEnabled&&e&&this.selectedItems[a]?
(c.deselectAllItems(),c.closeInspectionView()):(c.closeInspectionView(),c.deselectAllItems(),this.selectItem(a)),this.lastItemClicked=a);c.setButtons();c.setHash();return!1};b.returnSelectedItems=function(){return this.selectedItems};b.cmsSetsSelectedItems=function(a){this.selectedItems=a};b.selectItem=function(a){this.selectedItems[a]=!0;$(l("organizer_item_"+a)).addClass("organizer_selected");this.updateItemCheckbox(a,!0)};b.deselectItem=function(a){delete this.selectedItems[a];$(l("organizer_item_"+
a)).removeClass("organizer_selected");this.updateItemCheckbox(a,!1)};b.updateItemCheckbox=function(a,b){l("organizer_itemcheckbox_"+a)&&$(l("organizer_itemcheckbox_"+a)).prop("checked",b);c.allItemsSelected()?$("#organizer_toggle_all_items_checkbox").prop("checked",!0):$("#organizer_toggle_all_items_checkbox").prop("checked",!1)};b.returnMultipleSelectEnabled=function(){return!1};b.returnSearchingEnabled=function(){return!1};b.returnInspectionViewEnabled=function(){return!1};b.toggleInspectionView=
function(a){a==c.inspectionViewItemId()?this.closeInspectionView(a):this.openInspectionView(a)};b.openInspectionView=function(a){};b.closeInspectionView=function(a){}},zenarioO.panelTypes);

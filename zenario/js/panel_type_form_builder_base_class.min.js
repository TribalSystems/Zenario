zenario.lib(function(r,p,v,h,w,x,l,m,y,z,d,k,A,B,C,D,s,t,u,n,q){var b=u(q.form_builder_base_class=t(q.base));b.sortByOrd=function(a,c){return a.ord<c.ord?-1:a.ord>c.ord?1:0};b.initField=function(a){var c=this;a.on("click",function(){c.fieldClick($(this))});this.initDeleteButtons()};b.showFieldDetailsSection=function(a,c){var e=this,b,d=function(c){_.isEmpty(c)&&(e.currentFieldTab=a,$("#organizer_field_details_tabs div.tab").removeClass("on"),$("#field_tab__"+a).addClass("on"),$("#organizer_field_details div.section").hide(),
$("#field_section__"+a).show())};if(!c&&(this.save(),b=this.validate())){b.after(d);return}d([])};b.showDetailsSection=function(a){var c=["organizer_field_type_list","organizer_field_details","organizer_tab_details"],e=$.inArray(a,c);if(-1<e)for(key in $("#"+a+"_outer").show(),"organizer_field_type_list"==a&&(this.current=!1),delete c[e],c)n(c,key)&&(a=c[key])&&$("#"+a+"_outer").hide()};b.initAddNewFieldsButton=function(){var a=this;$(this.formEditorSelector).find("input.add_new_field, span.add_new_field").on("click",
function(){var c=function(c){_.isEmpty(c)&&(a.unselectField(),a.showDetailsSection("organizer_field_type_list"))};a.save();(cb=a.validate())?cb.after(c):c([])})};b.unselectField=function(){this.current.type=this.current.id=!1;$(this.formFieldInlineButtonsSelector).hide();$(this.formFieldsSelector).removeClass("selected")};b.sendAJAXRequest=function(a){var c=d.getKey(),e="zenario/ajax.php?__pluginClassName__="+this.tuix.class_name+"&__path__="+d.path+"&method_call=handleOrganizerPanelAJAX";$.extend(c,
a);k("organizer_preloader_circle").style.display="block";return l.ajax(p+e,c).after(function(){k("organizer_preloader_circle").style.display="none"})};b.changeMadeToPanel=function(){var a=this;this.changingForm||(this.changingForm=!0,h.onbeforeunload=function(){return a.saveChangesWarningMessage},d.disableInteraction("Please either save your changes, or click Reset to discard them, before exiting the form editor."),d.setButtons())};b.saveChanges=function(){this.saveItemsOrder();var a=this,c={mode:"save",
data:JSON.stringify(this.tuix.items)};this.sendAJAXRequest(c).after(function(c){c&&m.showMessage(c);m.nowDoingSomething();h.onbeforeunload=!1;d.enableInteraction();a.changingForm=!1;a.changesSaved=!0;d.reload()})};b.formatFieldDetails=function(){this.save();this.setCurrentFieldDetails()};b.createSelectList=function(a,c,e,b){var d=[];if(e){var f="-- Select --";!0!==e&&(f=e);emptyOption={label:f,value:"",ord:-1};a.hasOwnProperty(c)&&(emptyOption.selected=!0);d.push(emptyOption)}for(key in a)if(n(a,
key)){e=a[key];e=_.clone(e);if(!0===b){e.options=[];e.isOptGroup=!0;for(subKey in e.childOptions)n(e.childOptions,subKey)&&(f=e.childOptions[subKey],f=_.clone(f),subKey==c&&(f.selected=!0),f.value=subKey,e.options.push(f));e.options.sort(this.sortByOrd)}else key==c&&(e.selected=!0),e.value=key;d.push(e)}d.sort(this.sortByOrd);return d};b.createRadioList=function(a,c,b,d){var g=[];for(key in a)if(a.hasOwnProperty(key)){var f=_.clone(a[key]);key==c&&(f.checked=!0);!0===d&&(f.disabled=!0);f.value=key;
f.name=b;g.push(f)}g.sort(this.sortByOrd);return g};b.showButtons=function(a){var c=this;if(this.changingForm){a.html(this.microTemplate("zenario_organizer_apply_cancel_buttons",{confirm_text:this.saveButtonText,confirm_css:"form_editor",cancel_text:this.cancelButtonText}));var b=!1;a.find("#organizer_applyButton").click(function(){var a=function(a){if(_.isEmpty(a)){if(!0==b)return!1;m.nowDoingSomething("saving",!0);b=!0;c.saveChanges()}};c.save();(cb=c.validate())?cb.after(a):a([])});a.find("#organizer_cancelButton").click(function(){confirm("Are you sure you want to discard all your changes?")&&
(h.onbeforeunload=!1,d.enableInteraction(),c.currentFieldTab=!1,c.changingForm=!1,d.reload())})}else a.html("").show()};b.initFieldValues=function(a){var c=this;$("#field_values_list .delete_icon").off().on("click",function(){var b=$(this).data("id");a.lov[b]={remove:!0};$("#organizer_field_value_"+b).remove();$(this).parent().parent().remove();c.valuesChanged=!0;c.changeMadeToPanel()});$("#field_values_list input").off().on("keyup",function(){var a=$(this).data("id");$("#organizer_field_value_"+
a+" label").text($(this).val());c.valuesChanged=!0;c.changeMadeToPanel()})};b.initAddNewFieldValuesButton=function(a){var c=this;$("#organizer_add_a_field_value").on("click",function(){c.save();var b="t"+c.maxNewCustomFieldValue++,d={id:b,label:"Untitled",ord:_.size(a.lov)+100,is_new_value:!0};a.lov[b]=d;c.setCurrentFieldValues(a);c.changeMadeToPanel()})};b.setCurrentFieldValues=function(a){var c=this.current.id,b=this.getOrderedItems(a.lov),d="";this.valuesChanged=!0;d=this.microTemplate("zenario_organizer_admin_box_builder_field_value",
b);$("#field_values_list").html(d);this.initFieldValues(a);-1<$.inArray(a.type,["checkboxes","radios"])&&("checkboxes"==a.type?d=this.microTemplate("zenario_organizer_admin_box_builder_checkbox_values_preview",b):"radios"==a.type&&(d=this.microTemplate("zenario_organizer_admin_box_builder_radio_values_preview",b)),$("#organizer_form_field_values_"+c).html(d))};b.getCurrentFieldValues=function(a){var b=_.clone(a.lov);$("#field_values_list div.field_value").each(function(d,h){var g=$(this).data("id");
b[g]={id:g,label:$(h).find("input").val(),ord:d+1};a.lov[g]&&(a.lov[g].is_new_value&&(b[g].is_new_value=!0),a.lov[g].crm_value&&(b[g].crm_value=a.lov[g].crm_value))});return b};b.shakeBox=function(a){$(a).effect({effect:"bounce",duration:125,direction:"right",times:2,distance:5,mode:"effect"})};b.displayToastMessage=function(a,b){};b.cmsSetsPanelTUIX=function(a){this.tuix=a};b.cmsSetsPath=function(a){this.path=a};b.cmsSetsRequestedItem=function(a){this.lastItemClicked=this.requestedItem=a};b.cmsSetsSearchTerm=
function(a){this.searchTerm=a};b.returnShowLeftColumn=function(){return!1};b.returnAJAXURL=function(){return p+"zenario/admin/organizer.ajax.php?path="+encodeURIComponent(this.path)+l.urlRequest(this.returnAJAXRequests())};b.returnDevToolsAJAXURL=function(){return b.returnAJAXURL.call(this)};b.returnAJAXRequests=function(){return{}};b.returnPanelTitle=function(){var a=this.tuix.title;!h.zenarioOSelectMode||this.path!=h.zenarioOTargetPath&&!1!==h.zenarioOTargetPath||(h.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?
a=this.tuix.multiple_select_mode_title:this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));d.filteredView&&(a+=s.refined);return a};b.sizePanel=function(a,b,d,h){};b.onUnload=function(a,b,d){this.saveScrollPosition(b)};b.saveScrollPosition=function(a){this.scrollTop=a.scrollTop();this.scrollLeft=a.scrollLeft()};b.restoreScrollPosition=function(a){a.scrollTop(this.scrollTop||0).scrollLeft(this.scrollLeft||0).trigger("scroll")};b.checkboxClick=function(a,b){l.stop(b);var d=this;setTimeout(function(){d.itemClick(a,
r,!0)},0)};b.itemClick=function(a,b,e){if(!this.tuix||!this.tuix.items[a])return!1;d.multipleSelectEnabled&&!e&&(b||event).shiftKey&&this.lastItemClicked?d.selectItemRange(a,this.lastItemClicked):(d.multipleSelectEnabled&&e?(this.selectedItems[a]?this.deselectItem(a):this.selectItem(a),d.closeInspectionView()):!d.multipleSelectEnabled&&e&&this.selectedItems[a]?(d.deselectAllItems(),d.closeInspectionView()):(d.closeInspectionView(),d.deselectAllItems(),this.selectItem(a)),this.lastItemClicked=a);d.setButtons();
d.setHash();return!1};b.returnSelectedItems=function(){return this.selectedItems};b.cmsSetsSelectedItems=function(a){this.selectedItems=a};b.selectItem=function(a){this.selectedItems[a]=!0;$(k("organizer_item_"+a)).addClass("organizer_selected");this.updateItemCheckbox(a,!0)};b.deselectItem=function(a){delete this.selectedItems[a];$(k("organizer_item_"+a)).removeClass("organizer_selected");this.updateItemCheckbox(a,!1)};b.updateItemCheckbox=function(a,b){k("organizer_itemcheckbox_"+a)&&$(k("organizer_itemcheckbox_"+
a)).prop("checked",b);d.allItemsSelected()?$("#organizer_toggle_all_items_checkbox").prop("checked",!0):$("#organizer_toggle_all_items_checkbox").prop("checked",!1)};b.returnMultipleSelectEnabled=function(){return!1};b.returnSearchingEnabled=function(){return!1};b.returnInspectionViewEnabled=function(){return!1};b.toggleInspectionView=function(a){a==d.inspectionViewItemId()?this.closeInspectionView(a):this.openInspectionView(a)};b.openInspectionView=function(a){};b.closeInspectionView=function(a){}},
zenarioO.panelTypes);

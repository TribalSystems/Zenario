zenario.lib(function(r,p,v,h,w,x,l,m,y,z,e,k,A,B,C,D,s,t,u,n,q){var b=u(q.form_builder_base_class=t(q.base));b.sortByOrd=function(a,d){return a.ord<d.ord?-1:a.ord>d.ord?1:0};b.initField=function(a){var d=this;a.on("click",function(){d.fieldClick($(this))});this.initDeleteButtons()};b.showFieldDetailsSection=function(a,d){var c=this,b,e=function(d){_._isEm(d)&&(c.currentFieldTab=a,$("#organizer_field_details_tabs div.tab").removeClass("on"),$("#field_tab__"+a).addClass("on"),$("#organizer_field_details div.section").hide(),
$("#field_section__"+a).show())};if(!d&&(this.save(),b=this.validate())){b.after(e);return}e([])};b.showDetailsSection=function(a,d){var c=["organizer_field_type_list","organizer_field_details","organizer_tab_details"];if(-1<$.inArray(a,c)){for(key in c)n(c,key)&&(name=c[key],$("#"+name+"_outer").hide());c="left";"organizer_field_type_list"==a&&(c="right");d||this.noTransition?(this.noTransition=!1,$("#"+a+"_outer").show()):$("#"+a+"_outer").show("drop",{direction:c},200);"organizer_field_type_list"==
a&&(this.current=!1)}};b.initAddNewFieldsButton=function(){var a=this;$(this.formEditorSelector).find("input.add_new_field, span.add_new_field").on("click",function(){var d=function(c){_._isEm(c)&&(a.unselectField(),a.showDetailsSection("organizer_field_type_list"))};a.save();(cb=a.validate())?cb.after(d):d([])})};b.unselectField=function(){this.current.type=this.current.id=!1;this.formFieldInlineButtonsSelector&&$(this.formFieldInlineButtonsSelector).hide();$(this.formFieldsSelector).removeClass("selected")};
b.sendAJAXRequest=function(a){var d=e._gK(),c="zenario/ajax.php?__pluginClassName__="+this.tuix.class_name+"&__path__="+e.path+"&method_call=handleOrganizerPanelAJAX";$.extend(d,a);k("organizer_preloader_circle").style.display="block";return l._a(p+c,d).after(function(){k("organizer_preloader_circle").style.display="none"})};b.changeMadeToPanel=function(){var a=this;this.changingForm||(this.changingForm=!0,h.onbeforeunload=function(){return a.saveChangesWarningMessage},e._dI("Please either save your changes, or click Reset to discard them, before exiting the form editor."),
e._sB())};b.saveChanges=function(){this.saveItemsOrder();var a=this,d={mode:"save",data:JSON.stringify(this.tuix.items)};this.sendAJAXRequest(d).after(function(c){c&&m._sM(c);m._nDS();h.onbeforeunload=!1;e._eI();a.changingForm=!1;a.changesSaved=!0;a.saveLock=!1;e._r()})};b.formatFieldDetails=function(){this.save();this.setCurrentFieldDetails()};b.createSelectList=function(a,d,c,b){var e=[];if(c){var f="-- Select --";!0!==c&&(f=c);emptyOption={label:f,value:"",ord:-1};a.hasOwnProperty(d)&&(emptyOption.selected=
!0);e.push(emptyOption)}for(key in a)if(n(a,key)){c=a[key];c=_._cl(c);if(!0===b){c.options=[];c.isOptGroup=!0;for(subKey in c.childOptions)n(c.childOptions,subKey)&&(f=c.childOptions[subKey],f=_._cl(f),subKey==d&&(f.selected=!0),f.value=subKey,c.options.push(f));c.options.sort(this.sortByOrd)}else key==d&&(c.selected=!0),c.value=key;e.push(c)}e.sort(this.sortByOrd);return e};b.createRadioList=function(a,d,c,b){var e=[];for(key in a)if(a.hasOwnProperty(key)){var f=_._cl(a[key]);key==d&&(f.checked=
!0);!0===b&&(f.disabled=!0);f.value=key;f.name=c;e.push(f)}e.sort(this.sortByOrd);return e};b.saveLock=!1;b.showButtons=function(a){var d=this;this.changingForm?(a.html(this.microTemplate("zenario_organizer_apply_cancel_buttons",{confirm_text:this.saveButtonText,confirm_css:"form_editor",cancel_text:this.cancelButtonText})),a.find("#organizer_applyButton").click(function(){var a=function(a){if(_._isEm(a)){if(!0==d.saveLock)return!1;m._nDS("saving",!0);d.saveLock=!0;d.saveChanges()}};d.save();(cb=
d.validate())?cb.after(a):a([])}),a.find("#organizer_cancelButton").click(function(){confirm("Are you sure you want to discard all your changes?")&&(h.onbeforeunload=!1,e._eI(),d.currentFieldTab=!1,d.changingForm=!1,e._r())})):a.html("").show()};b.initFieldValues=function(a){var d=this;$("#field_values_list .delete_icon").off().on("click",function(){var c=$(this).data("id");a.lov[c]={remove:!0};$("#organizer_field_value_"+c).remove();$(this).parent().parent().remove();d.valuesChanged=!0;d.changeMadeToPanel()});
$("#field_values_list input").off().on("keyup",function(){var a=$(this).data("id");$("#organizer_field_value_"+a+" label").text($(this).val());d.valuesChanged=!0;d.changeMadeToPanel()})};b.initAddNewFieldValuesButton=function(a){var d=this;$("#organizer_add_a_field_value").on("click",function(){d.save();var c="t"+d.maxNewCustomFieldValue++,b={id:c,label:"Untitled",ord:_._si(a.lov)+100,is_new_value:!0};a.lov[c]=b;d.setCurrentFieldValues(a);d.changeMadeToPanel()})};b.setCurrentFieldValues=function(a){var d=
this.current.id,b=this.getOrderedItems(a.lov),e="";this.valuesChanged=!0;e=this.microTemplate("zenario_organizer_admin_box_builder_field_value",b);$("#field_values_list").html(e);this.initFieldValues(a);-1<$.inArray(a.type,["checkboxes","radios"])&&("checkboxes"==a.type?e=this.microTemplate("zenario_organizer_admin_box_builder_checkbox_values_preview",b):"radios"==a.type&&(e=this.microTemplate("zenario_organizer_admin_box_builder_radio_values_preview",b)),$("#organizer_form_field_values_"+d).html(e))};
b.getCurrentFieldValues=function(a){var b=_._cl(a.lov);$("#field_values_list div.field_value").each(function(c,e){var g=$(this).data("id");b[g]={id:g,label:$(e).find("input").val(),ord:c+1};a.lov[g]&&(a.lov[g].is_new_value&&(b[g].is_new_value=!0),a.lov[g].crm_value&&(b[g].crm_value=a.lov[g].crm_value))});return b};b.shakeBox=function(a){$(a).effect({effect:"bounce",duration:125,direction:"right",times:2,distance:5,mode:"effect"})};b.displayToastMessage=function(a,b){};b.cmsSetsPanelTUIX=function(a){this.tuix=
a};b.cmsSetsPath=function(a){this.path=a};b.cmsSetsRequestedItem=function(a){this.lastItemClicked=this.requestedItem=a};b.cmsSetsSearchTerm=function(a){this.searchTerm=a};b.returnShowLeftColumn=function(){return!1};b.returnAJAXURL=function(){return p+"zenario/admin/organizer.ajax.php?path="+encodeURIComponent(this.path)+l._uR(this.returnAJAXRequests())};b.returnDevToolsAJAXURL=function(){return b.returnAJAXURL.call(this)};b.returnAJAXRequests=function(){return{}};b.returnPanelTitle=function(){var a=
this.tuix.title;!h.zenarioOSelectMode||this.path!=h.zenarioOTargetPath&&!1!==h.zenarioOTargetPath||(h.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));e.filteredView&&(a+=s.refined);return a};b.sizePanel=function(a,b,c,e){};b.onUnload=function(a,b,c){this.saveScrollPosition(b)};b.saveScrollPosition=function(a){this.scrollTop=a.scrollTop();this.scrollLeft=a.scrollLeft()};b.restoreScrollPosition=
function(a){a.scrollTop(this.scrollTop||0).scrollLeft(this.scrollLeft||0).trigger("scroll")};b.checkboxClick=function(a,b){l._st(b);var c=this;setTimeout(function(){c.itemClick(a,r,!0)},0)};b.itemClick=function(a,b,c){if(!this.tuix||!this.tuix.items[a])return!1;e.multipleSelectEnabled&&!c&&(b||event).shiftKey&&this.lastItemClicked?e._sIR(a,this.lastItemClicked):(e.multipleSelectEnabled&&c?(this.selectedItems[a]?this.deselectItem(a):this.selectItem(a),e._cIV()):!e.multipleSelectEnabled&&c&&this.selectedItems[a]?
(e._dAI(),e._cIV()):(e._cIV(),e._dAI(),this.selectItem(a)),this.lastItemClicked=a);e._sB();e._sH();return!1};b.returnSelectedItems=function(){return this.selectedItems};b.cmsSetsSelectedItems=function(a){this.selectedItems=a};b.selectItem=function(a){this.selectedItems[a]=!0;$(k("organizer_item_"+a)).addClass("organizer_selected");this.updateItemCheckbox(a,!0)};b.deselectItem=function(a){delete this.selectedItems[a];$(k("organizer_item_"+a)).removeClass("organizer_selected");this.updateItemCheckbox(a,
!1)};b.updateItemCheckbox=function(a,b){k("organizer_itemcheckbox_"+a)&&$(k("organizer_itemcheckbox_"+a)).prop("checked",b);e._aIS()?$("#organizer_toggle_all_items_checkbox").prop("checked",!0):$("#organizer_toggle_all_items_checkbox").prop("checked",!1)};b.returnMultipleSelectEnabled=function(){return!1};b.returnSearchingEnabled=function(){return!1};b.returnInspectionViewEnabled=function(){return!1};b.toggleInspectionView=function(a){a==e._iVII()?this.closeInspectionView(a):this.openInspectionView(a)};
b.openInspectionView=function(a){};b.closeInspectionView=function(a){}},zenarioO.panelTypes);

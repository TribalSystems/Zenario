zenario.lib(function(n,l,s,e,t,u,g,h,v,w,d,k,x,y,z,A,p,q,r,m){var b=r(m.form_builder_base_class=q(m.base));b.sortByOrd=function(a,b){return a.ord<b.ord?-1:a.ord>b.ord?1:0};b.initField=function(a){var b=this;a.on("click",function(){b.fieldClick($(this))});this.initDeleteButtons()};b.showFieldDetailsSection=function(a,b){var c=this,d,f=function(b){_.isEmpty(b)&&(c.currentFieldTab=a,$("#organizer_field_details_tabs div.tab").removeClass("on"),$("#field_tab__"+a).addClass("on"),$("#organizer_field_details div.section").hide(),
$("#field_section__"+a).show())};if(!b&&(this.save(),d=this.validate())){d.after(f);return}f([])};b.showDetailsSection=function(a){var b=["organizer_field_type_list","organizer_field_details","organizer_tab_details"],c=$.inArray(a,b);if(-1<c)for(key in $("#"+a+"_outer").show(),"organizer_field_type_list"==a&&(this.current=!1),delete b[c],b)g.has(b,key)&&(a=b[key])&&$("#"+a+"_outer").hide()};b.initAddNewFieldsButton=function(){var a=this;$("input.add_new_field").on("click",function(){var b=function(b){_.isEmpty(b)&&
(a.unselectField(),a.showDetailsSection("organizer_field_type_list"))};a.save();(cb=a.validate())?cb.after(b):b([])})};b.unselectField=function(){this.current.type=this.current.id=!1;$(this.formFieldInlineButtonsSelector).hide();$(this.formFieldsSelector).removeClass("selected")};b.sendAJAXRequest=function(a){var b=d.getKey(),c="zenario/ajax.php?__pluginClassName__="+this.tuix.class_name+"&__path__="+d.path+"&method_call=handleOrganizerPanelAJAX";$.extend(b,a);return g.ajax(l+c,b)};b.changeMadeToPanel=
function(){var a=this;this.changingForm||(this.changingForm=!0,e.onbeforeunload=function(){return a.saveChangesWarningMessage},d.disableInteraction(),d.setButtons())};b.saveChanges=function(){this.saveItemsOrder();var a=this,b={mode:"save",data:JSON.stringify(this.tuix.items)};this.sendAJAXRequest(b).after(function(b){b&&h.showMessage(b);h.nowDoingSomething();e.onbeforeunload=!1;d.enableInteraction();a.changingForm=!1;d.reload()})};b.formatFieldDetails=function(){this.save();this.setCurrentFieldDetails()};
b.createSelectList=function(a,b,c,d){var f=[];c&&(emptyOption={label:"-- Select --",value:"",ord:-1},a.hasOwnProperty(b)&&(emptyOption.selected=!0),f.push(emptyOption));for(key in a)if(g.has(a,key)){c=a[key];c=_.clone(c);if(!0===d){c.options=[];c.isOptGroup=!0;for(subKey in c.childOptions)if(g.has(c.childOptions,subKey)){var e=c.childOptions[subKey],e=_.clone(e);subKey==b&&(e.selected=!0);e.value=subKey;c.options.push(e)}c.options.sort(this.sortByOrd)}else key==b&&(c.selected=!0),c.value=key;f.push(c)}f.sort(this.sortByOrd);
return f};b.createRadioList=function(a,b,c){var d=[];for(key in a)if(a.hasOwnProperty(key)){var f=_.clone(a[key]);key==b&&(f.checked=!0);f.value=key;f.name=c;d.push(f)}d.sort(this.sortByOrd);return d};b.showButtons=function(a){var b=this;if(this.changingForm){a.html(h.microTemplate("zenario_organizer_apply_cancel_buttons",{}));var c=!1;a.find("#organizer_applyButton").click(function(){var a=function(a){if(_.isEmpty(a)){if(!0==c)return!1;h.nowDoingSomething("saving",!0);c=!0;b.saveChanges()}};b.save();
(cb=b.validate())?cb.after(a):a([])});a.find("#organizer_cancelButton").click(function(){e.onbeforeunload=!1;d.enableInteraction();b.changingForm=!1;d.reload()})}else a.html("").show()};b.cmsSetsPanelTUIX=function(a){this.tuix=a};b.cmsSetsPath=function(a){this.path=a};b.cmsSetsRequestedItem=function(a){this.lastItemClicked=this.requestedItem=a};b.cmsSetsSearchTerm=function(a){this.searchTerm=a};b.returnShowLeftColumn=function(){return!1};b.returnAJAXURL=function(){return l+"zenario/admin/ajax.php?_json=1&path="+
encodeURIComponent(this.path)+g.urlRequest(this.returnAJAXRequests())};b.returnDevToolsAJAXURL=function(){return b.returnAJAXURL.call(this)};b.returnAJAXRequests=function(){return{}};b.returnPageSize=function(){return Math.max(20,Math.min(500,1*h.adminSettings.organizer_page_size||50))};b.returnPanelTitle=function(){var a=this.tuix.title;!e.zenarioOSelectMode||this.path!=e.zenarioOTargetPath&&!1!==e.zenarioOTargetPath||(e.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:
this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));d.filteredView&&(a+=p.refined);return a};b.sizePanel=function(a,b,c,d){};b.onUnload=function(a,b,c){this.saveScrollPosition(b)};b.saveScrollPosition=function(a){this.scrollTop=a.scrollTop();this.scrollLeft=a.scrollLeft()};b.restoreScrollPosition=function(a){a.scrollTop(this.scrollTop||0).scrollLeft(this.scrollLeft||0).trigger("scroll")};b.checkboxClick=function(a,b){g.stop(b);var c=this;setTimeout(function(){c.itemClick(a,n,!0)},0)};b.itemClick=
function(a,b,c){if(!this.tuix||!this.tuix.items[a])return!1;d.multipleSelectEnabled&&!c&&(b||event).shiftKey&&this.lastItemClicked?d.selectItemRange(a,this.lastItemClicked):(d.multipleSelectEnabled&&c?(this.selectedItems[a]?this.deselectItem(a):this.selectItem(a),d.closeInspectionView()):!d.multipleSelectEnabled&&c&&this.selectedItems[a]?(d.deselectAllItems(),d.closeInspectionView()):(d.closeInspectionView(),d.deselectAllItems(),this.selectItem(a)),this.lastItemClicked=a);d.setButtons();d.setHash();
return!1};b.returnSelectedItems=function(){return this.selectedItems};b.cmsSetsSelectedItems=function(a){this.selectedItems=a};b.selectItem=function(a){this.selectedItems[a]=!0;$(k("organizer_item_"+a)).addClass("organizer_selected");this.updateItemCheckbox(a,!0)};b.deselectItem=function(a){delete this.selectedItems[a];$(k("organizer_item_"+a)).removeClass("organizer_selected");this.updateItemCheckbox(a,!1)};b.updateItemCheckbox=function(a,b){k("organizer_itemcheckbox_"+a)&&$(k("organizer_itemcheckbox_"+
a)).prop("checked",b);d.allItemsSelected()?$("#organizer_toggle_all_items_checkbox").prop("checked",!0):$("#organizer_toggle_all_items_checkbox").prop("checked",!1)};b.returnMultipleSelectEnabled=function(){return!1};b.returnSearchingEnabled=function(){return!1};b.returnInspectionViewEnabled=function(){return!1};b.toggleInspectionView=function(a){a==d.inspectionViewItemId()?this.closeInspectionView(a):this.openInspectionView(a)};b.openInspectionView=function(a){};b.closeInspectionView=function(a){}},
zenarioO.panelTypes);

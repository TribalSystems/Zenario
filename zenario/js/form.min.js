zenario.lib(function(g,ca,U,da,Ka,La,q,I,G,ea,Ma,ga,fa,k,n,Ga,H,V,O,Na,Ha,y,Ia){G.lib(function(pa,ha,X,za,qa,ra,sa){var e=Ha(Ia);e.init=function(a,d,f){this.globalName=a;this.mtPrefix=d;this.containerId=f;this.baseCSSClass="";this.onKeyUpNum=0;ea.sizing=!1;this.cachedAJAXSnippets={};this.changed={};this.toggleLevelsPressed={};this.fieldThatTriggeredRedraw=this.lastFocus=!1;this.editingPositions={}};e.enableInlineErrors=function(){return!0};e.get=function(a){var d;return this.containerId&&(d=$("#"+
this.containerId+" #"+q._cE(a)))&&d[0]||Ga(a)};e.tooltips=function(a,d){this.isAdminFacing()?I._to(a,d):q._t(a,d)};e.microTemplate=function(a,d,f,b,h){f=G._f(f);var p=q._aLP(d,this);a=q._mT(a,d,f,g,g,b,h);p&&q._tLP(d);return a};e.pMicroTemplate=function(a,d,f){return this.microTemplate(this.mtPrefix+"_"+a,d,f,this.tuix&&this.tuix.pre_microtemplate&&this.tuix.pre_microtemplate[a],this.tuix&&this.tuix.post_microtemplate&&this.tuix.post_microtemplate[a])};e.fun=function(a){return this.globalName+"."+
a};e.onThisRow=function(a,d){return a+d.r(/(.*_|\D)/g,"")};e.valueOnThisRow=function(a,d){return this.value(this.onThisRow(a,d))};e.fieldOnThisRow=function(a,d){return this.field(this.onThisRow(a,d))};e.getKey=function(a){return this.tuix&&this.tuix.key};e.getKeyId=function(a){return this.tuix&&this.tuix.key&&this.tuix.key.id};e.getLastKeyId=function(a){return this.getKeyId(a)};e.getTitle=function(){var a,d;if(this.tuix.key&&this.tuix.key.id&&(a=this.tuix.title_for_existing_records)){d=this.getValues1D(!1,
g,!0);for(c in d)if(y(d,c)&&(v=d[c],-1!=a.indexOf("[["+c+"]]")))for(;a!=(string2=a.r("[["+c+"]]",v));)a=string2;return a}return this.tuix.title};e.field=function(a,d){return _._isOb(a)?a:(tabs=this.tuix&&this.tuix.tabs)&&(d=d||this.tuix.tab)&&tabs[d]&&tabs[d].fields&&tabs[d].fields[a]};e.fields=function(a){var d;return(d=this.tuix&&this.tuix.tabs)&&(a=a||this.tuix.tab)&&d[a]&&d[a].fields};e.initFields=function(){var a=this.tuix.tab,d,f,b,h,p,e=this.tuix.lovs||{};if(this.tuix.tabs)for(d in this.tuix.tabs)if(y(this.tuix.tabs,
d)&&(b=this.fields(d))){p=!1;for(f in b)y(b,f)&&(h=b[f])&&(h.pick_items&&h.plugin_setting&&h.plugin_setting.use_value_for_plugin_name?this.pickedItemsArray(f,this.value(f,d,!1)):h.values&&_._iS(h.values)&&e[h.values]?h.values=e[h.values]:h.load_values_from_organizer_path&&!h.values&&this.loadValuesFromOrganizerPath(h),h.validation&&k(h.validation.required_if_not_hidden)&&(p=!0));p&&d!=a&&(this.tuix.tab=d,this.drawFields(g,g,!0),this.tuix.tab=a)}};e.loadValuesFromOrganizerPath=function(a){var d,f,
b;if(a.load_values_from_organizer_path&&!a.values&&(a.values={},(f=I._gIFO(a.load_values_from_organizer_path))&&f.items))for(d in f.items)y(f.items,d)&&(b=f.items[d],a.values[q._dIIFO(d)]={image:b.image,css_class:b.css_class||f.item&&f.item.css_class,label:I._fOIN(f,d)})};e.changeMode=function(){this.editCancelEnabled(this.tuix.tab)&&(this.editModeOn()?this.editCancelOrRevert("cancel",this.tuix.tab):this.editCancelOrRevert("edit",this.tuix.tab))};e.revertTab=function(){this.changes(this.tuix.tab)&&
this.revertEnabled(this.tuix.tab)&&this.editCancelOrRevert("revert",this.tuix.tab)};e.editCancelOrRevert=function(a,d){if(this.tuix.tabs[d].edit_mode){var f,b,h,p,e,B;"edit"==a?(e=n(this.tuix.tabs[d].edit_mode.format_on_edit),B=n(this.tuix.tabs[d].edit_mode.validate_on_edit)):"cancel"==a?(e=n(this.tuix.tabs[d].edit_mode.format_on_cancel_edit),B=n(this.tuix.tabs[d].edit_mode.validate_on_cancel_edit)):"revert"==a&&(e=n(this.tuix.tabs[d].edit_mode.format_on_revert),B=this.errorOnTab(d)||n(this.tuix.tabs[d].edit_mode.validate_on_revert));
if(!B&&(b=this.fields(d)))for(h in b)if(y(b,h))if(p=b[h],n(p.validate_onchange)&&k(f=this.readField(h))&&f!=p.value){B=!0;break}else!e&&n(p.format_onchange)&&k(f=this.readField(h))&&f!=p.value&&(e=!0);this.tuix.tabs[d].edit_mode.on="cancel"!=a;this.changed[d]=!1;B?this.validate(g,g,!0):e?this.format(!0):(this.wipeTab(),this.redrawTab(!0));this.tuix.tab==d&&$("#zenario_abtab").removeClass("zenario_abtab_changed")}};e.clickTab=function(a){this.loaded&&this.validate(a!=this.tuix.tab,a)};e.turnToggleOn=
function(a){this.clickButton(a,!0)};e.turnToggleOff=function(a){this.clickButton(a,!1)};e.clickButton=function(a,d){var f;if(f=this.field(a))if("submit"==f.type)f.pressed=!0,this.validate(!0);else if("toggle"==f.type){var b=$(this.get(a)),h=$(this.get("row__"+a)),p=!!n(f.pressed);if(d===g||d!=p)(f.pressed=!n(f.pressed))?(b.removeClass("not_pressed").addClass("pressed"),h.addClass("zfea_row_pressed")):(b.removeClass("pressed").addClass("not_pressed"),h.removeClass("zfea_row_pressed")),this.markAsChanged(),
this.validateFormatOrRedrawForField(f,!0)}else"button"==f.type&&(f.pressed=!0,this.validateFormatOrRedrawForField(f))};e.togglePressed=function(a,d){var f;f=d?1<d?this.toggleLevelsPressed[d-1]:!0:this.toggleLevelsPressed.last;k(f)||(f=!0);a&&"toggle"==a.type&&(this.toggleLevelsPressed.last=f&&n(a.pressed),d&&(this.toggleLevelsPressed[d]=this.toggleLevelsPressed.last));return f};e.retryAJAX=function(a,d,f,b,h,p){var e=function(){q._a(a,d,f,g,e,!0,g,g,g,g,p).after(b);h&&I.nowDoingSomething&&I._nDS(h)};
e()};e.switchToATabWithErrors=function(){var a,d,f=this.tuix;if(f&&f.tabs&&!this.errorOnTab(f.tab))for(a in this.sortedTabs)if(y(this.sortedTabs,a)&&(d=this.sortedTabs[a],f.tabs[d]&&!this.checkTabHidden(d)&&this.errorOnTab(d)))return f.tab=d,!0;return!1};e.checkTabHidden=function(a){return G._h(g,this,g,a,g,g,g,g,this.tuix.tabs[a])};e.applyMergeFields=function(a,d,f,b){return a};e.applyMergeFieldsToLabel=function(a,d,f,b){return a};e.hideTab=function(a){var d=this;a?($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled",
"disabled"),$("#zenario_abtab").clearQueue().show().animate({opacity:0.8},200,function(){d.tabHidden=!0;d.draw()})):($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled","disabled").animate({opacity:0.9},100),d.tabHidden=!0,d.draw())};e.draw=function(){this.loaded&&this.tabHidden&&this.draw2()};e.draw2=function(){};e.size=function(){};e.makeFieldAsTallAsPossible=function(){};e.getNextTab=function(){k(this.prevTab)||k(this.nextTab)||this.drawTabs(" ");
return this.nextTab};e.getPrevTab=function(){k(this.prevTab)||k(this.nextTab)||this.drawTabs(" ");return this.prevTab};e.goToNextTab=function(){var a=this.getNextTab();if(k(a))return ea._cT(a),!0};e.goToPrevTab=function(){var a=this.getPrevTab();if(k(a))return ea._cT(a),!0};e.drawTabs=function(a){a||(a=this.mtPrefix+"_tab");var d,f,b=[],h,p,e,k,u=function(a,b,d){for(b in a)if(y(a,b)){d=a[b];if(d.onclick){p&&(k=d.id);if(p=d.current)e=h;h=d.id}d.children&&u(d.children)}};for(i in this.sortedTabs)if(y(this.sortedTabs,
i)&&(tab=this.sortedTabs[i],(d=this.tuix.tabs[tab])&&!(d._was_hidden_before=G._h(g,this,g,tab,g,g,g,g,d)))){f="";if(d.fields&&!_._isEm(d.fields)||d.fields&&!_._isEm(d.errors)||d.fields&&!_._isEm(d.notices))f=this.globalName+".clickTab('"+V(tab)+"');";!this.tuix.tab&&f&&(this.tuix.tab=tab);b.push({id:tab,tabId:tab,tuix:d,onclick:f,current:this.tuix.tab==tab,label:d.label})}G._sBK(b,"zenario_fab_tab_with_children");u(b);this.prevTab=e;this.nextTab=k;return this.microTemplate(a,b)};e.drawFields=function(a,
d,f){var b,h,p,e=this.tuix.tab,B=this.tuix.tabs[e],u=this.groupings[e],w=this.sortedFields[e],l,t="",F=!1,C,q=this.fields(e),r={},z={},J={},D=!1,H,E,K=!1,I={},A={fields:{},rows:[],tabId:e,path:this.path,tuix:this.tuix,revert:"",errors:[],notices:{}};this.drawingFields=!0;if(!f){this.ffoving=0;this.splitValues={};this.tallAsPossibleField=g;this.errorOnForm=!1;this.disableDragDropUpload();!this.savedAndContinued(e)&&this.editCancelEnabled(e)&&(A.revert=ha("class","zenario_editCancelButton",G._i("class",
"submit","type","button","onclick",this.globalName+".changeMode(); return false;","value",this.editModeOn()?O.cancel:O.edit)));if(this.editModeOn()){if(B.errors)for(C in B.errors)y(B.errors,C)&&(p=B.errors[C],this.errorOnForm=!0,A.errors.push({message:p}));if(q)for(C in q)if(y(q,C)&&(p=q[C],p.error))if(this.errorOnForm=!0,this.enableInlineErrors()&&(l=this.tuix.error_on_form_message||O.errorOnForm)){A.errors.push({message:l});break}else A.errors.push({message:p.error})}if(B.notices)for(C in B.notices)y(B.notices,
C)&&(p=B.notices[C],n(p.show)&&!G._h(p,this,g,C)&&{error:1,warning:1,question:1,information:1,success:1}[p.type]&&(A.notices[C]=p));this.setPhiVariables()}for(b in w)y(w,b)&&(h=w[b],p=q[h],C=!1,l=p.grouping,H!==l&&(H=l,K=k(u[l])&&q[u[l]],F=l&&(!K||G._h(g,this,g,u[l],g,g,K))),E!==l&&(C=!0),p._id=h,p._html=this.drawField(a,e,h,p,r,z,J,f,F),f||F||!1===p._html||((C||p._startNewRow||!A.rows.length)&&A.rows.push({fields:[],grouping:K}),C&&K&&(K.legend||K.snippet)&&(K=_._ex({grouping:l},K),K._id=l,K._html=
this.drawField(a,e,l,K),K._hideOnOpen=!0,K._showOnOpen=!0,K._lastVisibleGrouping=E,E=l,A.rows[A.rows.length-1].fields.push(K),A.fields[l]=K,I[l]=K,A.rows.push({fields:[]})),D||B.show_errors_after_field!=h||(A.rows[A.rows.length-1].errors=A.errors,A.rows[A.rows.length-1].notices=A.notices,D=!0),p._lastVisibleGrouping=E,E=l,A.rows[A.rows.length-1].fields.push(p),A.fields[h]=p));for(h in A.fields)y(A.fields,h)&&(p=A.fields[h],l=p.grouping)&&(K=I[l])&&(K._hideOnOpen&=p._hideOnOpen,K._showOnOpen&=p._showOnOpen);
f||(A.rows.length&&(A.rows[A.rows.length-1].fields[0]._isLastRow=!0),D||A.rows.splice(0,0,{errors:A.errors,notices:A.notices}),d=d||B.template||this.mtPrefix+"_current_tab",t+=this.microTemplate(d,A));this.drawingFields=!1;for(b in w)y(w,b)&&(h=w[b],delete q[h]._lastVisibleGrouping,delete q[h]._startNewRow,delete q[h]._hideOnOpen,delete q[h]._showOnOpen,delete q[h]._isLastRow,delete q[h]._html,delete q[h]._id);return t};e.drawTUIX=function(a,d,f){this.tuix={tab:"details",tabs:{details:{template:d,
edit_mode:{on:!0,enabled:!0,always_on:!0},fields:a}}};this.sortTabs();return this.drawFields(f)};e.insertHTML=function(a,d,f){var b=this.get("zenario_abtab"),h=this.lastFocus||this.fieldThatTriggeredRedraw,p;b.innerHTML=a;this.tabHidden=!1;this.changes(this.tuix.tab)?$(b).addClass("zenario_abtab_changed"):$(b).removeClass("zenario_abtab_changed");d.done();(p=!f&&h&&this.field(h.id))&&this.focusField(p,h.ss,h.se);this.fieldThatTriggeredRedraw=!1};e.hideShowFields=function(a){var d=$(".zenario_hide_on_open"),
f=$(".zenario_hide_row_on_open"),b=$(".zenario_show_on_open"),h=function(a,b){b.style.display="none"};b.length&&!d.length?b.show("blind",200,a):!b.length&&d.length?d.hide("blind",200,function(){f.each(h)}):b.length&&d.length&&(d.each(h),f.each(h),b.show())};e.isAdminFacing=function(){return!0};e.addJQueryElements=function(a){var d=this;q._aJQE(a+" ",d.isAdminFacing());$(a+" select.iconselectmenu").css("visibility","hidden").each(function(a,b){var h=$(b);h.attr("id");h.iconselectmenu({width:"auto",
open:function(){$("body > .ui-selectmenu-menu").addClass("iconselectmenu__"+h.attr("id")).addClass("iconselectmenu__in__"+d.path)},change:function(){$(this).change()}})})};e.fieldIsReadonly=function(a,d,f){return d.show_as_a_label||d.show_as_a_span||n(d.read_only)||n(d.readonly)||k(f)&&!this.editModeOn(f)||k(d.readonly_if)&&G._e(d.readonly_if,this,d,g,a,g,g,d)};e.focusFirstField=function(){var a=this;if(a.tuix&&!n(a.tuix.tabs[a.tuix.tab].disable_autofocus)){var d=-1,f=[],b=g,h,p,e,k,u;for(h in a.sortedFields[a.tuix.tab])if(y(a.sortedFields[a.tuix.tab],
h)&&(k=a.sortedFields[a.tuix.tab][h],(p=a.get(k))&&(e=a.field(k))&&((u=e.pick_items||e.upload)||$(p).is(":visible"))&&(f[++d]={id:k,type:e.type,empty:""==p.value,focusable:(u||q.IN(e.type,"password","checkbox","currency","select","text","textarea"))&&!n(p.disabled)&&!n(p.readonly)&&!a.fieldIsReadonly(k,e)},1<d)))break;if(f[0]&&!f[0].empty&&f[1]&&f[1].focusable&&f[1].empty&&"password"==f[1].type)b=1;else if(f[0]&&f[0].focusable)b=0;else if(f[1]&&f[1].focusable)b=1;else return;setTimeout(function(){a.focusField(f[b])},
50)}};e.focusField=function(a,d,f){if(a.type){if("date"==a.type||"datetime"==a.type)return;a=this.get(a.id)}else a=this.$getPickItemsInput(a.id);if(a&&(a.focus(),k(d)))try{a.selectionStart=d,a.selectionEnd=f}catch(b){}};e.$getPickItemsInput=function(a){return $(this.get("name_for_"+a)).find(".TokenSearch input")};e.setPhiVariables=function(){q.phiVariables=g};e.errorOnBox=function(){if(this.tuix&&this.tuix.tabs)for(tab in this.tuix.tabs)if(y(this.tuix.tabs,tab)&&this.errorOnTab(tab))return!0;return!1};
e.errorOnTab=function(a){var d;if(this.tuix.tabs[a]&&this.editModeOn(a)){if(this.tuix.tabs[a].errors)for(d in this.tuix.tabs[a].errors)if(y(this.tuix.tabs[a].errors,d))return!0;if(a=this.fields(a))for(d in a)if(y(a,d)&&a[d].error)return!0}};e.checkValues=function(a){a?this.wipeTab():this.readTab();for(var d in this.tuix.tabs)if(y(this.tuix.tabs,d)){a=this.tuix.tabs[d];var f=this.editModeOn(d);if(a.fields)for(var b in a.fields)if(y(a.fields,b)){var h=a.fields[b];this.isFormField(h)&&("code_editor"==
h.type&&q._cAD("code_editor_"+b),k(h.current_value)||(h.current_value=this.value(b,d,!0)),f&&(k(h.value)||(h.value=this.value(b,d,!1)),h.multiple_edit&&!k(h.multiple_edit._changed)&&k(h.multiple_edit.changed)&&(h.multiple_edit._changed=h.multiple_edit.changed)))}}U&&U.activeElement&&(this.lastFocus=this.setLastFocus(U.activeElement))};e.setLastFocus=function(a){var d;"object"===typeof a?(d=a,a=d.id):d=this.get(a);a={id:a};if(d)try{a.ss=d.selectionStart,a.se=d.selectionEnd}catch(f){a.ss=a.se=g}return a};
e.enableMicroTemplates=function(a,d){var f=this,b;for(b in d)if(y(d,b))switch(typeof d[b]){case "object":"lib"!==b&&"thus"!==b&&"tuix"!==b&&f.enableMicroTemplates(a,d[b]);break;case "string":"type"===b||"value"===b&&f.isFormField(d)||"current_value"===b||!d[b].m(/(\{\{|\{\%|\<\%)/)||function(a,b,d){d=q._gMT("<% "+f.defineLibVarBeforeCode()+" %>"+a[b],g);a[b]=function(){return d(a)}}(d,b)}};e.displayAsTag=function(a,d){return a.show_as_a_label||d&&a.show_as_a_label_when_readonly?"label":a.show_as_a_span||
d&&a.show_as_a_span_when_readonly?"span":!1};e.drawField=function(a,d,f,b,h,p,e,B,u,w,l,t,F,C,Y){var r=this;k(b)||(b=r.field(f,d));k(b.id)||(b.id=f);n(b.enable_microtemplates_in_properties)&&r.enableMicroTemplates(b,b);var z=b.type,J=b.upload,D=b.pick_items,ta=b.disabled,E=b.validation||{},K="currency"==z,U="date"==z||"datetime"==z,A=K||!!E.numeric,Z=b.decimal_places,W,ea,M,R,S,m="",N,fa,Q,P={},ia="multiselect"==z,ma=!1,x={"class":""},aa={},ja={},ua=!1,ba=!1,va,ka=!1,ga=!1,Aa=!1,Ba=!1,Ca=!1,Da=!1,
wa=!1,xa=!1,na,oa,la=r.tuix.tabs[d];k(t)||(t=r.fieldIsReadonly(f,b,d));D&&ta&&(t=!0);z&&"datetime"==z&&(t=!0);Y?k(Y.disabled_if)&&G._e(Y.disabled_if,r,Y,g,w,g,g,b)&&(t=!0):k(b.disabled_if)&&G._e(b.disabled_if,r,g,g,f,g,g,b)&&(t=!0);A&&(Z=k(Z)?1*Z:K?2:g);!b["class"]&&b.css_class&&(b["class"]=b.css_class);b.snippet||k(l)||(l=r.value(f,d));k(l)||(l="");if(!k(w)){delete b.selected_option;if(l&&b.values)if(M=_._isOb(b.values)?b.values[l]:r.tuix.lovs&&r.tuix.lovs[b.values]&&r.tuix.lovs[b.values][l],_._isOb(M)&&
G._h(M,r,g,l,g,g,b,g,la)&&(M=!1),M)b.selected_option=M;else if("radio"==z||"select"==z)b.current_value=l="";(J||D||ia)&&""!=l&&(P=r.pickedItemsArray(b,l));b.values&&_._iS(b.values)&&r.tuix.lovs&&r.tuix.lovs[b.values]?b.values=r.tuix.lovs[b.values]:b.load_values_from_organizer_path&&!b.values&&r.loadValuesFromOrganizerPath(b);for(R in b)y(b,R)&&"<"==R[0]&&(va=R.m(/^<(\/?)(\w+)/))&&(b[R]&&_._iS(b[R])&&(R+=b[R]),N={table:1,tr:2,td:3,th:4,br:5,div:6,p:7,span:8}[va[2]]||9,5>N&&(Da=!0),va[1]?(xa||(xa=!0,
oa="        ".split(" ")),oa[9-N]+=R):(wa||(wa=!0,na="        ".split(" ")),na[N-1]+=R,1==N&&(Ca=!0),5==N&&(Ba=!0)))}B||"button"!=z&&"submit"!=z||(b.pressed=!1);if(B||!k(w)){R=k(b.same_row)?!n(b.same_row):!Ba&&(Ca||!Da);b._startNewRow=R;M=1*b.indent||0;W=u||G._h(g,r,g,f,g,g,b)||b.hide_if_empty&&!l||t&&b.hide_when_readonly||n(p&&p.last?b.hide_with_previous_field:b.hide_if_previous_field_is_not_hidden)||n(p&&p.beforeLast?b.hide_with_previous_previous_field:b.hide_if_previous_previous_field_is_not_hidden)||
n(b.hide_with_previous_indented_field)&&p&&p[M]||n(b.hide_with_previous_outdented_field)&&0<M&&p&&p[M-1]||n(b.hide_with_previous_indented_fields)&&!h[M]||k(b.hide_if_previous_value_is)&&q._iL(b.hide_if_previous_value_isnt,e&&e.last)||k(b.hide_if_previous_value_isnt)&&!q._iL(b.hide_if_previous_value_isnt,e&&e.last)||k(b.hide_if_previous_outdented_value_is)&&0<M&&q._iL(b.hide_if_previous_outdented_value_is,e&&e[M-1])||k(b.hide_if_previous_outdented_value_isnt)&&0<M&&!q._iL(b.hide_if_previous_outdented_value_isnt,
e&&e[M-1]);e&&(e.last=l,R&&(e[M]=l));p&&(p.beforeLast=p.last,p.last=W,R&&(p[M]=W),k(h.last)&&h.last===M||(h.last<M&&(h[M]=!1),h.last=M),W||(h[M]=!0));b._startNewRow&&!1!==r.shownTab&&r.shownTab==r.tuix.tab&&"editor"!=z&&"code_editor"!=z&&b._was_hidden_before&&!W?b._showOnOpen=!0:b._startNewRow&&!1!==r.shownTab&&r.shownTab==r.tuix.tab&&"editor"!=z&&"code_editor"!=z&&!b._was_hidden_before&&W&&(b._hideOnOpen=ea=!0,b._was_hidden_before=!0);if(W){if(b._was_hidden_before=!0,!ea)return!1}else delete b._was_hidden_before;
if(B)return;W||!b.tall_as_possible||k(r.tallAsPossibleField)||(r.tallAsPossibleField=f,r.tallAsPossibleFieldType=b.type);b.multiple_edit&&(h="",p=!t&&k(b.multiple_edit._changed)?n(b.multiple_edit._changed):b.multiple_edit.changed,n(b.multiple_edit.hide_ui)||!b.multiple_edit.select_list?(e=n(b.multiple_edit.hide_ui),h+=X("type","checkbox","class","multiple_edit","id","multiple_edit__"+f,"checked",p,"style",e?"display: none;":"","disabled",t,"onchange",t||e?"":r.globalName+".meChange(this.checked, '"+
H(f)+"');",">")):h+=za("class","multiple_edit","id","multiple_edit__"+f,"disabled",t,"onchange",r.globalName+'.meChange(this.value == 1, "'+V(f)+'");',qa("value","","selected",!p,b.multiple_edit.select_list.not_changed_label||O.notChanged)+qa("value",1,"selected",p,b.multiple_edit.select_list.changed_label||O.changed)),m+=h,h=g)}if(!(F&&C||"object"!=typeof b.values))if(F=[],C={},J&&n(J.reorder_items)||D&&n(D.reorder_items))for(N in h=l.s(","),h)y(h,N)&&(Q=h[N],F.push(Q));else{for(Q in b.values)y(b.values,
Q)&&(h=b.values[Q],"object"==typeof h?(k(h.parent)&&(ba=!0,C[h.parent]=!0),G._h(h,r,g,Q,g,g,b,g,la)||b.values_visible_if&&!G._e(b.values_visible_if,r,h,g,Q,g,g,b,g,la)||(k(h.ord)?F.push([Q,h.ord]):k(h.label)?F.push([Q,h.label]):F.push([Q,Q]))):F.push([Q,h]));F.sort(G.sortArray);for(N in F)y(F,N)&&(F[N]=F[N][0])}if(t)x.readonly=!0,r.isButton(b)&&(x.disabled=!0,x["class"]+="disabled ");else if(b.error&&(x["class"]+="zenario_field_with_error "),E.required||E.required_if_not_hidden)x["class"]+="zenario_required_field ";
if("checkboxes"!=z&&(S=r.displayAsTag(b,t))){F=A?H(G._nF(1*l,Z)):H(l);if("select"==z||"radios"==z)b.values&&b.values[l]?F=H(b.values[l]):b.empty_value&&(F=H(b.empty_value));m+=pa(S,"id",S+"__"+f,"class",b.css_class,F)}else if(E=b.snippet){for(fa in Ea)S=Ea[fa],E[S]&&(m+=pa(S,"id",S+"__"+f,"class",E[S+"_class"],"style",E[S+"_style"],H(E[S])));!W&&E.show_split_values_from&&r.splitValues&&r.splitValues[E.show_split_values_from]&&(m+=r.splitValues[E.show_split_values_from],delete r.splitValues[E.show_split_values_from]);
E.html&&(m+=ra("id","snippet__"+f,q._un(E.html)));E.microtemplate&&(m+=ha("id","microtemplate__"+f,r.microTemplate(E.microtemplate,b)));E.url&&(m=n(E.cache)?r.cachedAJAXSnippets[E.url]?m+r.cachedAJAXSnippets[E.url]:m+(r.cachedAJAXSnippets[E.url]=q._nAA(q._aBP(E.url))):m+q._nAA(q._aBP(E.url)))}else if(("checkboxes"==z||"radios"==z)&&!k(w))t&&b.display_as_text_when_readonly?m+=H(r.displaySelectedItems(f,b,l,d)):b.values&&(ba=_._ex({},b),P=r.pickedItemsArray(b,l),ba.name=b.name||f,ba.type="checkboxes"==
z?"checkbox":"radio",t&&(ba.disabled=!0),m=_._isEm(F)?m+sa("class","zenario_no_values_message",H(b.no_values_message)):m+r.hierarchicalBoxes(a,d,f,l,b,ba,t,P,F,C));else if(J||D||ia){var Fa=ia||D&&n(D.multiple_select)||J&&n(J.multi);l={id:f,pickerHTML:"",wrappedId:"name_for_"+f,readOnly:t};t||(D&&(D.target_path||D.path)&&!n(D.hide_select_button)&&(l.select={onclick:r.globalName+".pickItems('"+H(f)+"');",phrase:D.select_phrase||O.selectDotDotDot}),J&&(l.upload={onclick:r.globalName+".upload('"+H(f)+
"');",phrase:J.upload_phrase||O.uploadDotDotDot},n(J.drag_and_drop)&&r.upload(f,!0),da.Dropbox&&Dropbox.isBrowserSupported()&&(l.dropbox={onclick:r.globalName+".chooseFromDropbox('"+H(f)+"');",phrase:J.dropbox_phrase||O.dropboxDotDotDot})));l.pickerHTML+=za("id",f,"multiple",Fa,"class",b.css_class,"style",b.style,">");!b.values||_._isEm(P)&&!ia||(l.pickerHTML+=r.hierarchicalSelect(P,b,la,F,ba,C));l.pickerHTML+="</select>";m+=r.microTemplate(r.mtPrefix+"_picked_items",l);a.after(function(){ia?r.setupMultipleSelect(b,
f,d,t||ta):r.setupPickedItems(b,f,d,t,Fa)})}else if(b.captcha)m+=X("type","hidden","style","display: none","id",f,"value",l),l||(m+=ra("style","display: inline-block","id","captcha__"+f),a.after(function(){grecaptcha.render("captcha__"+f,_._ex({sitekey:google_recaptcha.sitekey,callback:function(a){r.get(f).value=a}},b.captcha))}));else if(z){aa.onchange=w?"lib.fieldChange('"+H(f)+"', '"+H(w)+"');":"lib.fieldChange('"+H(f)+"');";ta&&(x["class"]+="disabled ");A&&(x.onkeyup=(x.onkeyup||"")+"lib.keepNumeric(this, "+
!!b.allow_negative_numbers+", "+Z+")");b.return_key_presses_button&&!t&&(x.onkeyup=(x.onkeyup||"")+"if (event.keyCode == 13) {zenario._st(event);$('#"+H(b.return_key_presses_button)+"').click();return false;}");n(b.multiple_edit)&&!t&&(x.onkeyup=(x.onkeyup||"")+"if (event && event.keyCode == 9) return true; lib.meMarkChanged('"+H(f)+"', this.value, '"+H(b.value)+"');");x["class"]+="input_"+z;switch(z){case "select":b.slider&&(ma=!0,m+=r.drawSlider(a,f,b,t,!0));t&&(x.disabled=!0);m+="<select";break;
case "code_editor":m+="<div";x["class"]=" zenario_embedded_ace_editor";a.after(function(){var a=ace.edit(f),h=!1;a.session.setUseSoftTabs(!1);a.setShowPrintMargin(!1);t&&(a.setReadOnly(!0),a.setBehavioursEnabled(!1));n(b.wrap_text)&&a.session.setUseWrapMode(!0);a.session.setOption("useWorker",!1);a.on("blur",function(a){h&&q._aADINS("code_editor_"+f,function(){r.fieldChange(f)},0);h=!1});a.on("change",function(a){r.markAsChanged();h=!0;q._aADINS("code_editor_"+f,function(){r.fieldChange(f)},5E3)});
var e,p,l,m;if(e=b.language)try{l="html"==e,e=e.m(/\.twig\.html$/i)?"ace/mode/twig":e.m(/\./)?ace.require("ace/ext/modelist").getModeForPath(e).mode:"ace/mode/"+e,p=ace.require("ace/ext/language_tools"),a.session.setMode(e),m=b.code_editor_options||{},k(m.enableBasicAutocompletion)||(m.enableBasicAutocompletion=!l),k(m.enableLiveAutocompletion)||(m.enableLiveAutocompletion=!l),l?p.setCompleters([]):p.setCompleters([p.keyWordCompleter]),a.setOptions(m)}catch(g){console.log("Ace editor could not load this language",
e)}a.$blockScrolling=Infinity;r.setCodeEditorPosition(a,r.editingPositions[d+"/"+f])});break;case "color_picker":case "colour_picker":m+="<input";x["class"]=" zenario_color_picker";a.after(function(){var a=b.color_picker_options||b.colour_picker_options||{};a.disabled=t;a.preferredFormat=a.preferredFormat||"hex";a.showInput=!0;$(r.get(f)).spectrum(a)});break;case "editor":var m=m+"<textarea",P="<textarea "+r.outputAtts(b)+"></textarea>",P=$(P).height(),J=Math.max(Math.floor(0.5*$(da).height()),300),
D=function(a){r.fieldChange(a.id)},T;r.useSimpleEditor()?T={script_url:ca+q.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code fullscreen","nonbreaking table contextmenu directionality","paste autoresize"],browser_spellcheck:!0,height:250,menubar:!1,toolbar:"undo redo | formatselect | link unlink | bold italic | removeformat | alignleft aligncenter alignright alignjustify | outdent indent"}:(I._gSD(),P=_._ex({},{script_url:ca+q.tinyMCEPath,inline:!1,menubar:!1,
statusbar:!1,plugins:"autoresize",document_base_url:g,convert_urls:!1,readonly:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,min_height:P,max_height:J,autoresize_min_height:P,autoresize_max_height:J,autoresize_bottom_margin:10,onchange_callback:D,init_instance_callback:function(a){I._eDDUITM(!1,g,r.get("row__"+(a.editorId||a.id)));var b;(b=a.editorContainer)&&(b=$("#"+a.editorContainer.id+" iframe"))&&(b=b[0])&&(b=b.contentWindow)&&I._eDDUITM(!1,g,b)}},{plugins:["advlist autolink lists link image charmap hr anchor",
"searchreplace code fullscreen","nonbreaking table contextmenu directionality","paste autoresize","colorpicker textcolor fullscreen"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,paste_preprocess:I.tinyMCEPasteRreprocess,readonly:!1,convert_urls:!0,relative_urls:!1,content_css:g,toolbar:"undo redo | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen",style_formats:I.skinDesc.style_formats,
oninit:g}),J=_._ex({},P,{toolbar:"undo redo | image link unlink | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen",file_browser_callback:I.fileBrowser,init_instance_callback:function(a){I._eDDUITM(!0,ca,r.get("row__"+(a.editorId||a.id)));var b;(b=a.editorContainer)&&(b=$("#"+a.editorContainer.id+" iframe"))&&(b=b[0])&&(b=b.contentWindow)&&I._eDDUITM(!0,ca,b)}}),D=_._ex({},J,{toolbar:"undo redo | image | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen"}),
S=_._ex({},D,{toolbar:"undo redo | link unlink | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen"}),t?(T=P,T.readonly=!0,x["class"]=" tinymce_readonly"):b.insert_image_button?b.insert_link_button?(T=J,x["class"]=" tinymce_with_images_and_links"):(T=D,x["class"]=" tinymce_with_images"):b.insert_link_button?(T=S,x["class"]=" tinymce_with_links"):(T=P,x["class"]=" tinymce"),x.style=
"visibility: hidden;");_._isOb(b.editor_options)&&(T=_._ex(T,b.editor_options));T.setup=function(a){a.on("change",function(a){r.fieldChange(a.id)})};a.after(function(){var a=$(r.get(f)),b=r.get("zenario_abtab"),d;try{a.tinymce().remove()}catch(h){}b&&(d=b.style.display,b.style.display="block");a.tinymce(T);b&&(b.style.display=d)});break;case "button":case "submit":case "toggle":ga=!0;n(b.use_button_tag)?(m+="<button",Aa=!0):(m+="<input",x.type="button");if(!t||n(b.can_be_pressed_in_view_mode))aa.onclick=
"lib.clickButton('"+f+"');",delete x.disabled;"toggle"==z&&(x["class"]+=b.pressed?" pressed":" not_pressed");break;default:"textarea"==z?m+="<textarea":U?(ka=!0,m+="<input",x.type="text",x["class"]+=" zenario_datepicker",x.readonly="readonly",t||(x.onkeyup=(x.onkeyup||"")+"zenario._dFKU(this, event, '"+H(f)+"');"),a.after(function(){var a=$(r.get(f)),d=!!n(b.change_month_and_year);a.datepicker({changeMonth:d,changeYear:d,dateFormat:I.siteSettings&&I.siteSettings.organizer_date_format||q.dpf,altField:r.get("_value_for__"+
f),altFormat:"yy-mm-dd",showOn:"focus",disabled:t,onSelect:function(b,d){a.change()}})})):"url"==z?(m+="<input",x.type="url",x.placeholder="http://example.com",x.onblur=(x.onblur||"")+"if(this.value && !this.value.m('://') && $.trim(this.value)[0] != '#') this.value = 'http://' + this.value;"):K?(m+="<input",x.type="text",x.onfocus="this.value = $(this).data('og_value');"+(x.onfocus||""),x.onblur="$(this).data('og_value', this.value); this.value = zenarioT._nF(1*this.value, "+Z+");"+(x.onblur||"")):
(b.slider&&(ma=!0,m+=r.drawSlider(a,f,b,t,!0)),"text"==z&&b.values&&!t&&(m+='<span class="zenario_textbox_with_autocomplete">',ua=!0),m+="<input",x.type=z),b.redraw_immediately_onchange&&(x.onkeyup=(x.onkeyup||"")+"if (lib.redrawImmediatelyWhenChanged(this, event, '"+H(f)+"', '"+H(b.value)+"', "+(b.value==l?"false":"true")+")) return false;"),r.addExtraAttsForTextFields(b,x)}if("checkbox"==z||"radio"==z)n(l)&&(x.checked="checked"),l=g,t&&(x.disabled=!0),n(b.indeterminate)&&a.after(function(){var a;
if(a=r.get(f))a.indeterminate=!0});ma&&(x.onchange='$("#zenario_slider_for__'+V(f)+'").slider("value", $(this).val());',x.onkeyup=(x.onkeyup||"")+'$("#zenario_slider_for__'+V(f)+'").slider("value", $(this).val());');k(w)?(Y=$.extend({},b,Y),ja.id=f+"___"+w,x["class"]+=" control_for__"+f):(Y=b,ja.id=f);"radio"==z&&b.name||(ja.name=f);t&&(ja.placeholder="");m+=r.outputAtts(Y,x,aa,ja);aa=H(ga?b.value:l,!1,"asis");x="";"select"==z?m+=">":Aa?(m+=">",b.icon_left&&(m+='<i class="'+H(b.icon_left)+'" aria-hidden="true"></i>'),
m+=aa,b.icon_right&&(m+='<i class="'+H(b.icon_right)+'" aria-hidden="true"></i>'),m+="</button>"):"textarea"==z||"editor"==z?m+=">"+aa+"</textarea>":"code_editor"==z?m+=">"+aa+"</div>":U?(m+=' value="'+H(q._fD(l,"datetime"==z))+'"/>',m+=X("type","hidden","id","_value_for__"+f,"value",l),t||b.hide_clear_button||(m+=X("type","button","class","zenario_remove_date","value","x","onclick",r.globalName+'.blankField("'+V(f)+'"); $('+r.globalName+'.get("'+V(f)+'")).change();'))):m=K?m+(' value="'+H(G._nF(1*
l,Z))+'" data-og_value="'+s.numberFormat(1*l,Z,".","")+'"/>'):k(l)?m+(' value="'+aa+'"/>'):m+"/>";"select"==z&&(b.empty_value&&(x=qa("value","","data-hide_in_iconselectmenu",1,"selected",!l,H(b.empty_value)),b.show_empty_value_at_end||(m+=x,x="")),b.values&&(P={},P[l]=!0,m+=r.hierarchicalSelect(P,b,la,F,ba,C)),m+=x+"</select>");if(ua){var ya=[];for(N in F)y(F,N)&&(Q=F[N],h=b.values[Q],_._iS(h)?ya.push({label:h,value:Q}):ya.push({label:h.label,value:Q}));a.after(function(){var a=$(r.get(f)),d={source:ya,
minLength:b.autocomplete_min_length||0,appendTo:a.parent()};b.return_key_presses_button&&(d.select=function(){setTimeout(function(){$("#"+b.return_key_presses_button).click()},0)});a.autocomplete(d);k(b.autocomplete)&&a.attr("autocomplete",b.autocomplete);a.focus(function(){a.autocomplete("widget").is(":visible")||a.autocomplete("search","")})});m+=X("type","button","class","zenario_open_autocomplete","value","\u25be","onclick","$("+r.globalName+'.get("'+V(f)+'")).autocomplete("search", "");')}ua&&
(m+="</span>")}k(w)||("url"!=z||t||(m+="&nbsp; "+X("type","button","class","submit","value",O.test,"onclick",r.globalName+'.testURL("'+V(f)+'");'),ka=!0),!b.label||"checkbox"!=z&&"radio"!=z||(m+=" "+sa("class",b.label_class,"for",f,"id","label_for__"+f,H(b.label)),ka=!0),k(b.post_field_label)&&(m+=" "+sa("for",f,"id","label_for__"+f,H(b.post_field_label)),ka=!0),wa&&(m=na.join("")+m),k(b.pre_field_html)&&(m=q._un(b.pre_field_html)+m),ka&&(m=ra("class","zenario_field_widget_wrap",m)),k(b.post_field_html)&&
(m+=q._un(b.post_field_html)),b.tooltip&&(m+=ha("class","zenario_field_tooltip","title",b.tooltip,"?")),xa&&(m+=oa.join("")),ma&&(m+=r.drawSlider(a,f,b,t,!1)));return m};e.addExtraAttsForTextFields=function(a,d){};var Ja={id:!0,name:!0,size:!0,maxlength:!0,accesskey:!0,"class":!0,cols:!0,dir:!0,readonly:!0,rows:!0,style:!0,tabindex:!0,title:!0,disabled:!0,onblur:!0,onchange:!0,onclick:!0,ondblclick:!0,onfocus:!0,oninput:!0,onpaste:!0,onmousedown:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,
onkeydown:!0,onkeypress:!0,onkeyup:!0,onselect:!0,autocomplete:!0,autofocus:!0,max:!0,min:!0,pattern:!0,placeholder:!0,required:!0,step:!0},Ea="hr h1 h2 h3 h4 label div p span".split(" ");e.outputAtts=function(a,d,f,b,h){var e,g="";for(e in a)if(y(a,e)&&!(b&&k(b[e])||!h&&!Ja[e]&&"data-"!=e.substr(0,5)))if("disabled"==e||"readonly"==e||"selected"==e){if(n(a[e])||d&&n(d[e])&&delete d[e])g+=" "+e+'="'+e+'"'}else g+=" "+e+'="'+this.defineLibVarBeforeCode(e),d&&d[e]&&(g+=d[e]+" ",delete d[e]),g+=H(a[e]),
f&&f[e]&&(g+=" "+f[e],delete f[e]),g+='"';b&&(g+=this.outputAtts(b,!1,!1,!1,!0));d&&(g+=this.outputAtts(d,!1,!1,!1,!0));f&&(g+=this.outputAtts(f,!1,!1,!1,!0));return g};e.defineLibVarBeforeCode=function(a){if(k(a)&&"on"!=a.substr(0,2))return"";this.globalName||(da[this.globalName=G.generateGlobalName()]=this);return"var lib = "+H(this.globalName)+"; "};e.testURL=function(a){var d=this.get(a).value;a=this.get(this.onThisRow("target_blank_",a))||this.get(this.onThisRow("target_blank",a));d&&(a&&2==
a.value?$.colorbox({href:d,iframe:!0,width:"95%",height:"95%",className:"zenario_url_test_colorbox"}):da.open(q._aBP(d)))};e.keepNumeric=function(a,d,f){var b=a.value,h="";d&&"-"==b[0]&&(h="-",b=b.substr(1));b=b.r(/[^\d\.]/g,"");b=b.r(/\.(.*)\./g,".$1");if(f!==g)switch(f){case 0:b=b.r(/\.\d*/,"");break;case 1:b=b.r(/(\d*\.\d)\d*/,"$1");break;case 2:b=b.r(/(\d*\.\d\d)\d*/,"$1");break;case 3:b=b.r(/(\d*\.\d\d\d)\d*/,"$1");break;case 4:b=b.r(/(\d*\.\d\d\d\d)\d*/,"$1")}b=h+b;a.value!=b&&(a.value=b)};
e.hierarchicalSelect=function(a,d,f,b,h,e,L){var B="",u,w,l,t,q,C;for(q in b)if(y(b,q)&&(C=b[q],t=d.values[C],t!==g)){w=u=!1;if(_._iS(t))t={label:t};else if(n(t.disabled)||t.disabled_if&&G._e(t.disabled_if,this,t,g,C,g,g,d,g,f)||d.values_disabled_if&&G._e(d.values_disabled_if,this,t,g,C,g,g,d,g,f))u=!0;a[C]&&(w=!0);l=!n(t.hide_when_children_are_not_visible);if(!k(L)&&h&&e[C]){if((childrenHTML=this.hierarchicalSelect(a,d,f,b,h,e,C))||l)B+=pa("optgroup","label",t,"disabled",!childrenHTML,childrenHTML)}else l&&
L===t.parent&&(B+="<option "+this.outputAtts(t,!1,!1,{disabled:u,selected:w,value:C})+">"+H(t,!1,!0)+"</option>")}return B};e.setupMultipleSelect=function(a,d,f,b){var h=this,e=!1;f=$(h.get(d));f.multiselect({columns:a.cols,texts:{placeholder:a.empty_value||O.selectListSelect,overridePlaceholder:a.placeholder},onOptionClick:function(){e=!0},onControlClose:function(){e&&h.fieldChange(d)}});b&&f.multiselect("disable")};e.typeaheadSearchEnabled=function(a,d,f){};e.typeaheadSearchAJAXURL=function(a,d,
f){};e.parseTypeaheadSearch=function(a,d,f,b,h){};e.setupPickedItems=function(a,d,f,b,h){var e=this,g,k,u=a.pick_items||{},w=a.upload||{},l=n(u.allow_typing_anything),t=n(w.reorder_items||u.reorder_items);e.typeaheadSearchEnabled(a,d,f)&&(g=e.typeaheadSearchAJAXURL(a,d,f))&&(k="_search");a=$(e.get(d)).tokenize({datas:g,searchParam:k,debounce:200,nbDropdownElements:30,sortable:t,placeholder:u.nothing_selected_phrase||w.nothing_selected_phrase||O.nothing_selected,onAddToken:function(a,b,g){e._tokenizeNoRecurse||
(h||e.addToPickedItems(a,d,f),e.$getPickItemsInput(d).focus(),e.tooltips("#name_for_"+d+" .TokensContainer *[title]"))},maxElements:h?0:1,parseData:function(a){return e.parseTypeaheadSearch(e.tuix.tabs[f].fields[d],d,f,b,a)},formatTokenHTML:function(a,h){var g=e.tuix.tabs[f].fields[d];return g.values&&g.values[a]?e.drawPickedItem(a,d,g,b):l?(g.values=g.values||{},g.values[a]=h,e.drawPickedItem(a,d,g,b)):!1},onRemoveToken:function(a,b){e._tokenizeNoRecurse||e.removeFromPickedItems(a,d,f)}});b?a.disable():
(t&&a.container.addClass("zenario_reorder_items"),g||l?(a.container.addClass("zenario_picker_with_typeahead"),l&&e.$getPickItemsInput(d).blur(function(){var a,b;if(a=e.$getPickItemsInput(d).val())b={},b[a]=a,e.addToPickedItems(b,d,f)})):a.disableTypeAhead())};e.chooseFromDropbox=function(a){var d=this,f,b,h,e,g;if(!(f=d.field(a))||!f.upload)return!1;if(e=f.upload.extensions||f.upload.accept)e=_._iS(e)?e.s(","):_._tA(e);for(b in e)y(e,b)&&(h=e[b],g=h.s("/"),k(g[1])?e[b]="images"==g[0]?"image":g[0]:
"text"!=h&&"documents"!=h&&"images"!=h&&"video"!=h&&"audio"!=h&&"."!=h.substr(0,1)&&(e[b]="."+h));f={cancel:function(){I._hAL()},linkType:"direct",multiselect:!!n(f.upload.multi),extensions:e,success:function(b){I._sAL();var f,h,e=new q.callback;for(f in b)y(b,f)&&(h=b[f],e.add(q._a(d.ajaxURL()+"&fetchFromDropbox=1",h,!0)));e.after(function(){var b,f,h,e="";if(!(h=d.field(a))||!h.upload)return!1;for(b in arguments)y(arguments,b)&&((f=arguments[b])&&f.id&&(e+=","+f.id),d.setFileDetails(h,f));""!==
e&&d.addToPickedItems(e,a);I._hAL()})}};I._sAL();Dropbox.choose(f)};e.setFileDetails=function(a,d){a.values||(a.values={});d.label=this.formatLabelFromFile(d);a.values[d.id]=d};e.formatLabelFromFile=function(a){var d;k(a.filename)?(d=a.filename,a.ssc&&(d+=" [checksum "+a.short_checksum+"]"),n(a.width)&&n(a.height)&&(d+=" ["+a.width+" \u00d7 "+a.height+"px]")):(fileDetails=q._dIIFO(a.id))&&(fileDetails=fileDetails.s("/"))&&fileDetails[1]?(d=fileDetails[1],n(fileDetails[2])&&n(fileDetails[3])&&(d+=
" ["+fileDetails[2]+" \u00d7 "+fileDetails[3]+"px]")):d=a.id;return d};e.upload=function(a,d){var f=this,b;if(!(b=f.field(a))||!b.upload)return!1;b={class_name:b.class_name,upload:b.upload};f.uploadCallback=function(b){if(b){var d,e,g,k="";if(!(g=f.field(a))||!g.upload)return!1;for(d in b)y(b,d)&&(e=b[d])&&e.id&&(k+=","+e.id,f.setFileDetails(g,e));""!==k&&f.addToPickedItems(k,a)}};d?f.enableDragDropUpload():G._a(f,b,g,g,g,{fileUpload:1},g,f.ajaxURL())};e.ajaxURL=function(){return ca+"zenario/ajax.php?method_call=handleAdminBoxAJAX&path="+
fa(this.path)};e.enableDragDropUpload=function(){};e.disableDragDropUpload=function(){};e.uploadComplete=function(a){k(this.uploadCallback)&&this.uploadCallback(a);delete this.uploadCallback};e.drawSlider=function(a,d,f,b,e){var g=this,L=_._cl(f.slider);f="";if(n(L.before_field)?e:!e)b&&(f+='<div class="ui-disabled">'),f+=ha("id","zenario_slider_for__"+d,"class",L["class"],"style",L.style),b&&(f+="</div>"),a.after(function(){var a;if(a=g.get("zenario_slider_for__"+d))k(L.min)&&(L.min=q.num(L.min)),
k(L.max)&&(L.max=q.num(L.max)),k(L.step)&&(L.step=q.num(L.step)),L.disabled=!g.editModeOn(),L.value=$(g.get(d)).val(),L.slide=function(a,b){$(g.get(d)).val(b.value)},L.change=function(a,b){g.fieldChange(d)},$(a).slider(L)});return f};e.lookupFileDetails=function(a){return I._lFD(a)};e.pickedItemsArray=function(a,d){if(!1===d||!k(d))return{};a.values&&_._iS(a.values)&&this.tuix.lovs&&this.tuix.lovs[a.values]&&(a.values=this.tuix.lovs[a.values]);if(!(0!==d&&"0"!==d||a.values&&(a.values[0]||a.values["0"])))return{};
var f=(d+"").s(","),b={},e,g,L,B,u,w,l;a._display_value=!1;for(w in f)y(f,w)&&(l=f[w])&&(a.upload&&(u=q._dIIFO(l))&&(u=u.s("/"))&&u[1]?(b[l]=u[1],n(u[2])&&n(u[3])&&(b[l]+=" ["+u[2]+" \u00d7 "+u[3]+"px]")):a.values&&a.values[l]&&"string"==typeof a.values[l]?b[l]=a.values[l]:a.values&&a.values[l]&&a.values[l].label?b[l]=a.values[l].label:((L=a.pick_items&&a.pick_items.target_path)||(L=a.pick_items&&a.pick_items.path))&&(e=I._gIFO(L,l))?(a.values||(a.values={}),g=I._fOIN(e,l),B=e.items&&e.items[l]||
{missing:!0},b[l]=g,a.values[l]={missing:B.missing,image:B.image,css_class:B.css_class||e.item&&e.item.css_class,label:g}):a.upload&&l==1*l&&(u=this.lookupFileDetails(l))?(this.setFileDetails(a,u),b[l]=a.values[l]):b[l]=l,!1===a._display_value&&(a._display_value=b[l]));return b};e.pickedItemsValue=function(a){var d,f="";if(a)for(d in a)y(a,d)&&(f+=(""===f?"":",")+d);return f};e.displaySelectedItems=function(a,d,f,b){k(d)||(d=this.field(a,b));k(f)||(f=this.value(a,b));a=this.pickedItemsArray(d,f);
return _._isEm(a)?n(f)?f:k(d.empty_value)?d.empty_value:"":_._tA(a).join(", ")};e.hierarchicalBoxes=function(a,d,f,b,e,p,q,B,u,w,l,t,F){var C=this,G=1*e.cols||1,r=0,z="",J,D,I,E,K=!1;if(!F)F=0,G=1*e.cols_at_top_level||G;else if(10<F)return"";t||(t={});l&&(t[l]=!0);F&&(z+=ha("class","zenario_hierarchical_box_children","id","children_for___"+f+"___"+l,">"));for(var O in u)if(y(u,O)&&(J={},D=u[O],D==1*D&&(D*=1),E=g,I="object"==typeof e.values[D]?e.values[D]:{label:e.values[D]},e.tag_colors&&(J.tag_color=
e.tag_colors[D]||"blue"),E=I.parent,"0"===E&&(E=!1),!l&&!E||l==E)){E=b?!0===b||1===b||"1"===b?!0===D||1===D||"1"===D:B?k(B[D])?!0:!1:D==b:!D;if(!q||E||!e.hide_unselected_values_when_readonly||w[D]){J.checked=E;if(J.newRow=++r>G)r=1;J.col=r;J.cols=G;if("checkboxes"==e.type&&n(e.checking_child_checks_parents)){var A="";l&&(A+="if (this.checked) { for (var cb in "+JSON.stringify(t)+") { "+C.globalName+".get('"+H(f)+"___' + cb).checked = true; } } ");w[D]&&(A+="if (!this.checked) { $('#children_for___' + this.id + ' input').attr('checked', false); } ");
A?p.onchange=e.onchange?A+" "+e.onchange:A:e.onchange?p.onchange=e.onchange:delete p.onchange}else"checkboxes"==e.type&&n(e.checking_parent_checks_children)&&(A="",w[D]&&(A+="if (this.checked) { $('#children_for___' + this.id + ' input').each(function(i, el) {el.checked = true;}) }; "),A?p.onchange=e.onchange?A+" "+e.onchange:A:e.onchange?p.onchange=e.onchange:delete p.onchange);J.lovId=f+"___"+D;J.lovField=I;e.indeterminates&&n(e.indeterminates[D])&&function(b){a.after(function(){var a;if(a=C.get(b))a.indeterminate=
!0})}(J.lovId);J.lovHTML=C.drawField(a,d,f,p,g,g,g,g,g,D,E,!1,u,w,I);J.childrenHTML="";w[D]&&(J.childrenHTML=C.hierarchicalBoxes(a,d,f,b,e,p,q,B,u,w,D,_._ex({},t),F+1),r=0);K?(C.splitValues||(C.splitValues={}),C.splitValues[f]||(C.splitValues[f]=""),C.splitValues[f]+=C.microTemplate(C.mtPrefix+"_radio_or_checkbox",J)):z+=C.microTemplate(C.mtPrefix+"_radio_or_checkbox",J)}E&&I.split_values_if_selected&&!F&&"radios"===e.type&&(K=!0)}F&&(z+="</div>");return z};e.drawPickedItem=function(a,d,f,b,e){k(f)||
(f=this.field(d));label=f.values&&f.values[a];pick_items=f.pick_items||{};thumbnail={};mi={};_._isOb(label)?_._ex(mi,label):label?mi.label=label:(mi.label=a,mi.missing=!0);mi.id=d;mi.item=a;mi.readOnly=b;mi.width&&mi.height&&((a=mi.checksum||mi.short_checksum)?(thumbnail.src=ca+"zenario/file.php?c="+fa(a)+"&og=1",mi.usage&&(thumbnail.src+="&usage="+fa(mi.usage))):mi.link&&(thumbnail.src=q._aBP(mi.link)),thumbnail.src&&(G._rI(mi.width,mi.height,180,120,thumbnail),mi.thumbnail=thumbnail));return this.drawPickedItem2(d,
pick_items,e,mi)};e.drawPickedItem2=function(a,d,f,b){var e=this;return f?(e.__addTT=!0,setTimeout(function(){e.__addTT&&e.tooltips("#name_for_"+a+" .Dropdown *[title]");delete e.__addTT},1),e.microTemplate(d.dropdown_item_microtemplate||e.mtPrefix+"_dropdown_item",b)):e.microTemplate(d.picked_item_microtemplate||e.mtPrefix+"_picked_item",b)};e.showPickedItemInPopout=function(a,d){G._a(this,{popout:{href:a,title:d,css_class:"zenario_show_colobox_above_fab"}})};e.pickItems=function(a){var d,f,b,e;
(d=this.field(a))&&(f=d.pick_items)&&(f.path||f.target_path)&&(d=e=f.path,ga.map&&(e=ga._cNPTTP(f.path).path),n(f.multiple_select)||f.target_path&&f.target_path!=e||!(b=this.readField(a))||-1!=b.indexOf(",")||(d="//"==q._rHSS(d,2)?d+b:"/"==q._rHSS(d,1)?d+("/"+b):d+("//"+b)),this.SKTarget=a,I._oS(this.globalName,"setPickedItems",f.multiple_select,d,f.target_path,f.min_path,f.max_path,f.disallow_refiners_looping_on_min_path,g,f.one_to_one_choose_phrase,f.one_to_many_choose_phrase,g,!0,g,g,g,g,g,g,g,
g,f))};e.setPickedItems=function(a,d,f,b){a=this.SKTarget;var e,g,k={};for(e in d._items)y(d._items,e)&&(f=q._dIIFO(e),g=b.items&&b.items[f]||{missing:!0},k[f]={missing:g.missing,image:g.image,css_class:g.css_class||b.item&&b.item.css_class,label:I._fOIN(b,f)});this.addToPickedItems(k,a)};e.removeFromPickedItems=function(a,d,f){this.addToPickedItems(a,d,f,!0)};e.addToPickedItems=function(a,d,f,b){this._tokenizeNoRecurse=!0;f=this.field(d,f);var e=this.readField(d),g=f.pick_items&&n(f.pick_items.multiple_select)||
f.upload&&n(f.upload.multi),k,q,u={};a=G._cTO(a);q=e?this.pickedItemsArray(f,e):{};for(k in a)if(y(a,k))if(e=a[k],f.values||(f.values={}),b)delete f.values[k];else if(f.values[k]||(f.values[k]=e),q[k]&&(u[k]=!0),g)q[k]=!0;else{q={};q[k]=!0;break}this.redrawPickedItems(d,f,q,u);this._tokenizeNoRecurse=!1};e.redrawPickedItems=function(a,d,f,b){var e,k,q=this.pickedItemsValue(f),n={},u=$(this.get(a)).tokenize(),w=u.toArray();f=G._cTO(f);for(e in w)y(w,e)&&(k=w[e],f[k]&&!b[k]?n[k]=!0:u.tokenRemove(k));
for(k in f)y(f,k)&&!n[k]&&(b=d.values&&d.values[k],_._isOb(b)?b=b.label:b||(b=k),u.tokenAdd(k,b));d.current_value=q;d.onchange&&G._e(d.onchange,this,d,g,a,g,g,d);this.fieldChange(a)};e.changes=function(a){if(this.tuix&&this.tuix.tab){if(k(a))return this.changed[a];for(a in this.tuix.tabs)if(y(this.tuix.tabs,a)&&this.changed[a])return!0}return!1};e.markAsChanged=function(a){this.tuix&&(k(a)||(a=this.tuix.tab),a&&!this.changed[a]&&(this.changed[a]=!0,this.tuix.tab==a&&$("#zenario_abtab").addClass("zenario_abtab_changed")))};
e.fieldChange=function(a,d){var f=this,b=f.field(a);b&&(b.indeterminate&&(b.indeterminate=!1),k(d)&&b.indeterminates&&b.indeterminates[d]&&(b.indeterminates[d]=!1),f.markAsChanged(),n(b.multiple_edit)&&f.meMarkChanged(a),setTimeout(function(){f.validateFormatOrRedrawForField(b)},1))};e.validateFormatOrRedrawForField=function(a,d){"string"==typeof a?(this.fieldThatTriggeredRedraw=this.setLastFocus(a),a=this.field(a)):a.id&&(this.fieldThatTriggeredRedraw=this.setLastFocus(a.id));var f=n(a.validate_onchange),
b=n(a.format_onchange)||d&&(a.pressed?a.format_on_toggle_on:a.format_on_toggle_off),e=n(a.redraw_onchange);if(f)return 3>this.ffoving&&(this.ffoving=3,this.validate()),!0;if(b)return 2>this.ffoving&&(this.ffoving=2,this.format()),!0;e&&1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return e};e.redrawImmediatelyWhenChanged=function(a,d,f,b,e){if(a=e?a.value===b:a.value!==b)q._st(d),this.fieldThatTriggeredRedraw=this.setLastFocus(f),1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());
return a};e.meMarkChanged=function(a,d,f){k(d)&&d==f||(this.field(a).multiple_edit._changed=!0,this.meSetCheckbox(a,!0))};e.meSetCheckbox=function(a,d){"checkbox"==this.get("multiple_edit__"+a).type?this.get("multiple_edit__"+a).checked=d:this.get("multiple_edit__"+a).value=d?1:""};e.meChange=function(a,d,f){var b=this.field(d);if(a)b.multiple_edit._changed=!0;else{if(!f&&n(b.multiple_edit.warn_when_abandoning_changes)&&k(b.multiple_edit.original_value)&&this.readField(d)!=b.multiple_edit.original_value){a=
X("type","button","class","submit_selected","value",O.abandonChanges,"onclick",this.globalName+'.meChange(false, "'+V(d)+'", true);')+X("type","button","class","submit","value",O.cancel);I._flBo(O.abandonChangesConfirm,a,"warning");this.meSetCheckbox(d,!0);return}b.multiple_edit._changed=!1;delete b.current_value;f=b.value;k(b.multiple_edit.original_value)&&(f=b.current_value=b.multiple_edit.original_value);this.get(d)&&!b.pick_items?"checkbox"==this.get(d).type?this.get(d).checked=f?!0:!1:$(this.get(d)).val(f||
""):(b=new q.callback,f=this.drawFields(b),this.insertHTML(f,b))}this.meSetCheckbox(d,a);this.validateFormatOrRedrawForField(d)};e.currentValue=function(a,d,f){return f||this.drawingFields||k(d)&&d!=this.tuix.tab?this.value(a,d,f):this.readField(a)};e.originalValue=function(a,d){return this.value(a,d,!0)};e.value=function(a,d,f){d||(d=this.tuix.tab);var b="",e=this.field(a,d);if(!e)return"";k(f)||(f=this.fieldIsReadonly(a,e,d));e&&!e.snippet&&"grouping"!=e.type&&(this.isButton(e)?b=!!e.pressed:!f&&
k(e.current_value)?b=e.current_value:k(e.value)?b=e.value:e.multiple_edit&&k(e.multiple_edit.original_value)&&(b=e.multiple_edit.original_value));return"0"===b?0:k(b)?b:""};e.fieldChanged=function(a,d){return this.currentValue(a,d)!=this.originalValue(a,d)};e.mode=function(a){return this.value("mode","global_area")||this.value("mode")};e.scope=function(a){return this.value("scope","first_tab")||this.value("scope")};e.keyIn=function(a){return _.contains(arguments,this.tuix.key[a],1)};e.keyIs=function(a,
d){return this.tuix.key[a]==d};e.key=function(a){return this.tuix.key[a]};e.modeIn=function(){return _.contains(arguments,this.mode())};e.modeNotIn=function(){return!_.contains(arguments,this.mode())};e.modeIs=function(a){return this.mode()==a};e.modeIsNot=function(a){return this.mode()!=a};e.scopeIn=function(){return _.contains(arguments,this.scope())};e.scopeNotIn=function(){return!_.contains(arguments,this.scope())};e.scopeIs=function(a){return this.scope()==a};e.scopeIsNot=function(a){return this.scope()!=
a};e.valueIn=function(a){return _.contains(arguments,this.value(a),1)};e.valueNotIn=function(a){return!_.contains(arguments,this.value(a),1)};e.valueInArray=function(a,d){return _.contains(d,this.value(a))};e.valueIs=function(a,d){return this.value(a)==d};e.valueIsNot=function(a,d){return this.value(a)!=d};e.isButton=function(a){return a&&("submit"==a.type||"toggle"==a.type||"button"==a.type)};e.isFormField=function(a){return!(!a||a.snippet||"grouping"==a.type||"submit"==a.type||"toggle"==a.type||
"button"==a.type)};e.getCodeEditorPosition=function(a){return{top:a.session.getScrollTop(),left:a.session.getScrollLeft(),range:a.getSelectionRange()}};e.setCodeEditorPosition=function(a,d){d&&(a.session.setScrollTop(d.top),a.session.setScrollLeft(d.left),a.selection.setSelectionRange(d.range))};e.appendCodeEditorValue=function(a,d){var f=ace.edit(a),b=this.getCodeEditorPosition(f);f.setValue(f.getValue()+d);this.setCodeEditorPosition(f,b)};e.readField=function(a){var d=g,f=this.tuix.tab,b=this.field(a,
f),e=b.type,p;if(!this.isFormField(b))return g;var n=this.fieldIsReadonly(a,b,f),B=b._was_hidden_before;b.multiple_edit&&n&&delete b.multiple_edit._changed;if("checkboxes"==e||"radios"==e){if(!n&&!B&&b.values){var u,B="",w=!0;for(u in b.values)y(b.values,u)&&this.get(a+"___"+u)&&this.get(a+"___"+u).checked&&(B+=(w?"":",")+u,w=!1);b.current_value=B}B=!0}if(B)return n||!k(b.current_value)?b.value:b.current_value;if(this.get("_value_for__"+a))b.current_value=d=this.get("_value_for__"+a).value;else if("editor"!=
e&&"code_editor"!=e||n)if(!n&&(p=this.get(a))){if("currency"==e)d=$(p).data("og_value");else if("checkbox"==e||"radio"==e)d=p.checked?!0:!1;else if("color_picker"==e||"colour_picker"==e)try{d=$(p).spectrum("get").toHexString()}catch(l){d=$(p).val()}else d=$(p).val();k(d)||(d="");_._isAr(d)&&(d=d.join(","));b.current_value=d}else delete b.current_value,d=b.value;else{var t,F;if("editor"==e){if(a=da.tinyMCE&&tinyMCE.get(a))t=q._tMGC(a)}else"code_editor"==e&&(F=ace.edit(a))&&(t=F.getValue(),this.editingPositions[f+
"/"+a]=this.getCodeEditorPosition(F));if(k(t)&&!1!==t)d=b.current_value=t;else return k(b.current_value)?b.current_value:b.value}return d};e.blankField=function(a){this.setFieldValue(a,"")};e.setFieldValue=function(a,d){field=this.field(a,this.tuix.tab);this.get(a)&&$(this.get(a)).val(d);this.get("_value_for__"+a)&&(this.get("_value_for__"+a).value=d);field.current_value=d};e.readTab=function(){var a,d={},f=this.fields(),b;this.lastScrollTop=$("#zenario_fbAdminInner").scrollTop();for(b in f)y(f,b)&&
k(a=this.readField(b))&&(d[b]=a);U&&U.activeElement&&(this.lastFocus=this.setLastFocus(U.activeElement));return d};e.wipeTab=function(){var a=this.fields(),d,f;for(d in a)y(a,d)&&(f=a[d],delete f.current_value,f.multiple_edit&&delete f.multiple_edit._changed)};e.redrawTab=function(){this.tuix.shake=!1;this.draw2()};e.useSimpleEditor=function(){return!0};e.getURL=function(a){++this.onKeyUpNum;return this.returnAJAXURL(a)};e.returnAJAXURL=function(a){return"..."};e.editModeOn=function(a){if(!this.tuix||
!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=n(this.tuix.tabs[a].edit_mode.enabled)&&(n(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};e.editModeAlwaysOn=function(a){return!0};e.editCancelEnabled=function(a){return!1};e.revertEnabled=function(a){return!1};e.savedAndContinued=function(a){return!1};e.editModeOnBox=function(){return!0};e.sortTabs=function(){this.sortedTabs=[];if(this.tuix.tabs)for(var a in this.tuix.tabs)if(y(this.tuix.tabs,
a)){var d=this.tuix.tabs[a];d&&this.sortedTabs.push([a,d.ord])}this.sortedTabs.sort(G.sortArray);this.groupings={};this.sortedFields={};for(a in this.sortedTabs)y(this.sortedTabs,a)&&(d=this.sortedTabs[a]=this.sortedTabs[a][0],this.sortFields(d))};e.sortFields=function(a){var d,f,b,e,k={};this.groupings[a]={};this.sortedFields[a]=[];if(b=this.fields(a)){for(d in b)y(b,d)&&(f=b[d],f.type&&"grouping"==f.type&&(k[f.name||d]=1*f.ord,this.groupings[a][f.name||d]=d));for(d in b)y(b,d)&&(!(f=b[d])||f.type&&
"grouping"==f.type||(e=f.grouping?k[f.grouping]:g,this.sortedFields[a].push([d,f.ord,e])));this.sortedFields[a].sort(G.sortArrayWithGrouping);for(d in this.sortedFields[a])y(this.sortedFields[a],d)&&(this.sortedFields[a][d]=this.sortedFields[a][d][0])}};e.setData=function(a){this.tuix=a};e.setDataDiff=function(a){this.syncAdminBoxFromServerToClient(a,this.tuix)};e.syncAdminBoxFromServerToClient=function(a,d){var f,b;for(f in a)y(a,f)&&(b=a[f],!k(b)||b["[[__unset__]]"]?delete d[f]:k(d[f])?b["[[__replace__]]"]?
(delete b["[[__replace__]]"],d[f]=b):"object"!=typeof d[f]?d[f]=b:"object"==typeof d[f]&&"object"!=typeof b?d[f]=b:this.syncAdminBoxFromServerToClient(b,d[f]):d[f]=b)};e.sendStateToServer=function(){return JSON.stringify(this.tuix)};e.sendStateToServerDiff=function(){var a={};this.syncAdminBoxFromClientToServerR(a,this.tuix);return JSON.stringify(a)};e.syncAdminBoxFromClientToServerR=function(a,d,f,b,e,g,n,B){if("object"==typeof d){var u,w,l;for(w in d)if(!k(f)&&q.IN(w,"download","path","shake","tab",
"switchToTab")&&(u="value")||!k(f)&&q.IN(w,"_sync","tabs")&&(u="array")||!k(b)&&"_sync"==f&&q.IN(w,"cache_dir","password","session","iv")&&(u="value")||!k(b)&&"tabs"==f&&(u="array")||!k(e)&&"tabs"==b&&"_was_hidden_before"==w&&(u="value")||!k(e)&&"tabs"==b&&q.IN(w,"edit_mode","fields")&&(u="array")||!k(g)&&"tabs"==e&&"edit_mode"==f&&"on"==w&&(u="value")||!k(g)&&"tabs"==e&&"fields"==f&&(u="array")||!k(n)&&"tabs"==g&&"fields"==b&&q.IN(w,"_display_value","_was_hidden_before","current_value","pressed")&&
(u="value")||!k(n)&&"tabs"==g&&"fields"==b&&"multiple_edit"==w&&(u="array")||!k(B)&&"tabs"==n&&"fields"==e&&"multiple_edit"==f&&"_changed"==w&&(u="value"))if("value"==u)switch(l=d[w],typeof l){case "function":case "object":break;case "string":l=q._eIIFO(l);default:a[w]=l}else"array"==u&&"object"==typeof d[w]&&(a[w]={},this.syncAdminBoxFromClientToServerR(a[w],d[w],w,f,b,e,g,n))}};e.getValueArrayofArrays=function(a){return q._nAA(this.getURL(),q._uR({_read_values:!0,_box:this.sendStateToServer()}),
!a)};e.getValues1D=function(a,d,f,b,e,g){var n,q,u,w,l,t={};if(this.tuix&&this.tuix.tabs)for(n in this.tuix.tabs)if(y(this.tuix.tabs,n)&&(q=this.tuix.tabs[n],q.fields&&(!k(g)||-1!=G._tTA(g).indexOf(n))))for(u in q.fields)!y(q.fields,u)||(w=q.fields[u],l=u,!this.isFormField(w)||b&&this.fieldIsReadonly(u,w,n)||e&&(q._was_hidden_before||w._was_hidden_before)||a&&!(l=w.plugin_setting&&w.plugin_setting.name)||(w=this.currentValue(u,n,f),d||(t[l]=w),!d&&k(d)))||(t[n+"/"+u]=w);return t};e.insertText=function(a,
d){_._iS(a)&&(a=this.get(a));if(a){var f=$(a),b=a.selectionStart,e=a.selectionEnd,g=f.val();f.val(g.substring(0,b)+d+g.substring(e));a.selectionStart=a.selectionEnd=b+d.length;a.focus()}};e.callFunctionOnEditors=function(a){var d,f,b;if(da.tinyMCE&&(d=this.fields()))for(f in d)if(y(d,f)&&(b=d[f],"editor"==b.type&&tinyMCE.get(f)))if("remove"==a)tinyMCE.get(f).remove();else if("isDirty"==a&&tinyMCE.get(f).isDirty())return!0;return!1};e.format=function(a){var d=this,f;if(d.loaded&&(f=d.getURL("format"))){var b=
d.tuix&&d.tuix.tab;d.loaded=!1;d.hideTab();d.checkValues(a);d.retryAJAX(f,{_format:!0,_box:d.sendStateToServer()},!0,function(a){d.load(a);d.switchTabIfRequested(b);d.sortTabs();d.draw()},"loading")}};e.validate=function(a,d,f,b){var e=this,g;if(e.loaded&&(g=e.getURL("validate"))){e.differentTab=a;e.loaded=!1;e.hideTab(a);e.checkValues(f);var k=e.tuix&&e.tuix.tab;a&&(e.tuix.switchToTab=d);e.retryAJAX(g,{_validate:!0,_box:e.sendStateToServer()},!0,function(a){e.load(a)&&e.switchTabIfRequested(k);e.sortTabs();
e.switchToATabWithErrors();e.draw();b&&b()},"loading")}};e.switchTabIfRequested=function(a){this.tuix.switchToTab&&(a=a||this.tuix&&this.tuix.tab,this.errorOnTab(a)?this.tuix.tab=a:this.tuix.tab=this.tuix.switchToTab,delete this.tuix.switchToTab)}})},zenarioF);

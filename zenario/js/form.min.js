'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var G=0;return function(){return G<h.length?{done:!1,value:h[G++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,G,H){if(h==Array.prototype||h==Object.prototype)return h;h[G]=H.value;return h};$jscomp.getGlobal=function(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var G=0;G<h.length;++G){var H=h[G];if(H&&H.Math==Math)return H}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(h,G){var H=$jscomp.propertyToPolyfillSymbol[G];if(null==H)return h[G];H=h[H];return void 0!==H?H:h[G]};
$jscomp.polyfill=function(h,G,H,I){G&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(h,G,H,I):$jscomp.polyfillUnisolated(h,G,H,I))};$jscomp.polyfillUnisolated=function(h,G,H,I){H=$jscomp.global;h=h.split(".");for(I=0;I<h.length-1;I++){var P=h[I];if(!(P in H))return;H=H[P]}h=h[h.length-1];I=H[h];G=G(I);G!=I&&null!=G&&$jscomp.defineProperty(H,h,{configurable:!0,writable:!0,value:G})};
$jscomp.polyfillIsolated=function(h,G,H,I){var P=h.split(".");h=1===P.length;I=P[0];I=!h&&I in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var sa=0;sa<P.length-1;sa++){var z=P[sa];if(!(z in I))return;I=I[z]}P=P[P.length-1];H=$jscomp.IS_SYMBOL_NATIVE&&"es6"===H?I[P]:null;G=G(H);null!=G&&(h?$jscomp.defineProperty($jscomp.polyfills,P,{configurable:!0,writable:!0,value:G}):G!==H&&($jscomp.propertyToPolyfillSymbol[P]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(P):$jscomp.POLYFILL_PREFIX+
P,P=$jscomp.propertyToPolyfillSymbol[P],$jscomp.defineProperty(I,P,{configurable:!0,writable:!0,value:G})))};$jscomp.initSymbol=function(){};$jscomp.initSymbolIterator=function(){};$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(h){h={next:h};h[Symbol.iterator]=function(){return this};return h};
$jscomp.iteratorFromArray=function(h,G){h instanceof String&&(h+="");var H=0,I={next:function(){if(H<h.length){var P=H++;return{value:G(P,h[P]),done:!1}}I.next=function(){return{done:!0,value:void 0}};return I.next()}};I[Symbol.iterator]=function(){return I};return I};$jscomp.polyfill("Array.prototype.values",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(G,H){return H})}},"es8","es3");
zenario.lib(function(h,G,H,I,P,sa,z,O,L,va,Wa,Ha,wa,m,w,Sa,J,ca,W,Xa,Ta,B,Ua){L.lib(function(xa,ja,ea,Ia,ya,ka,ta){var g=Ta(Ua);g.init=function(a,c,d){this.globalName=a;this.mtPrefix=c;this.containerId=d;this.baseCSSClass="";this.onKeyUpNum=0;va.sizing=!1;this.cachedAJAXSnippets={};this.changed={};this.toggleLevelsPressed={};this.fieldThatTriggeredRedraw=this.lastFocus=!1;this.editingPositions={}};g.enableInlineErrors=function(){return!0};g.get=function(a){var c;return this.containerId&&(c=$("#"+
this.containerId+" #"+z._cE(a)))&&c[0]||Sa(a)};g.tooltips=function(a,c){this.isAdminFacing()?O._to(a,c):z._t(a,c)};g.vaPhrase=function(a){return this.isAdminFacing()?O.phrase[a]:z.vphrase[a]};g.microTemplate=function(a,c,d,b,e){d=L._f(d);var f=z._aLP(c,this);a=z._mT(a,c,d,h,h,b,e);f&&z._tLP(c);return a};g.pMicroTemplate=function(a,c,d){return this.microTemplate(this.mtPrefix+"_"+a,c,d,this.tuix&&this.tuix.pre_microtemplate&&this.tuix.pre_microtemplate[a],this.tuix&&this.tuix.post_microtemplate&&this.tuix.post_microtemplate[a])};
g.fun=function(a){return this.globalName+"."+a};g.onThisRow=function(a,c){return a+c.r(/(.*_|\D)/g,"")};g.valueOnThisRow=function(a,c){return this.value(this.onThisRow(a,c))};g.fieldOnThisRow=function(a,c){return this.field(this.onThisRow(a,c))};g.getKey=function(a){return this.tuix&&this.tuix.key};g.getKeyId=function(a){return this.tuix&&this.tuix.key&&this.tuix.key.id};g.getLastKeyId=function(a){return this.getKeyId(a)};g.getConductorVars=function(a){a=a||this.tuix.key.slotName||this.slotName;var c=
I.zenario_conductor;return c&&c.getVars&&c._geVa(a)};g.getTitle=function(){var a;if(this.tuix.key&&this.tuix.key.id&&(a=this.tuix.title_for_existing_records)){var c=_._ex(this.getValues1D(!1,h,!0),this.tuix.key);return z._aMF(a,c)}return this.tuix.title};g.field=function(a,c){var d;return _._isOb(a)?a:(d=this.tuix&&this.tuix.tabs)&&(c=c||this.tuix.tab)&&d[c]&&d[c].fields&&d[c].fields[a]};g.fields=function(a){var c;return(c=this.tuix&&this.tuix.tabs)&&(a=a||this.tuix.tab)&&c[a]&&c[a].fields};g.initFields=
function(){var a=this.tuix.tab,c,d,b,e,f=this.tuix.lovs||{};if(this.tuix.tabs)for(c in this.tuix.tabs)if(B(this.tuix.tabs,c)&&(b=this.fields(c))){var k=!1;for(d in b)B(b,d)&&(e=b[d])&&(e.pick_items&&e.plugin_setting&&e.plugin_setting.use_value_for_plugin_name?this.pickedItemsArray(e,this.value(d,c,!1)):e.values&&_._iS(e.values)&&f[e.values]?e.values=f[e.values]:e.load_values_from_organizer_path&&!e.values&&this.loadValuesFromOrganizerPath(e),e.validation&&m(e.validation.required_if_not_hidden)&&(k=
!0));k&&c!=a&&(this.tuix.tab=c,this.drawFields(h,h,!0),this.tuix.tab=a)}};g.loadValuesFromOrganizerPath=function(a){var c,d;if(a.load_values_from_organizer_path&&!a.values&&(a.values={},(d=O._gIFO(a.load_values_from_organizer_path))&&d.items))for(c in d.items)if(B(d.items,c)){var b=d.items[c];a.values[z._dIIFO(c)]={image:b.image,css_class:b.css_class||d.item&&d.item.css_class,label:O._fOIN(d,c)}}};g.changeMode=function(){this.editCancelEnabled(this.tuix.tab)&&(this.editModeOn()?this.editCancelOrRevert("cancel",
this.tuix.tab):this.editCancelOrRevert("edit",this.tuix.tab))};g.revertTab=function(){this.changes(this.tuix.tab)&&this.revertEnabled(this.tuix.tab)&&this.editCancelOrRevert("revert",this.tuix.tab)};g.editCancelOrRevert=function(a,c){if(this.tuix.tabs[c].edit_mode){var d,b,e;if("edit"==a){var f=w(this.tuix.tabs[c].edit_mode.format_on_edit);var k=w(this.tuix.tabs[c].edit_mode.validate_on_edit)}else"cancel"==a?(f=w(this.tuix.tabs[c].edit_mode.format_on_cancel_edit),k=w(this.tuix.tabs[c].edit_mode.validate_on_cancel_edit)):
"revert"==a&&(f=w(this.tuix.tabs[c].edit_mode.format_on_revert),k=this.errorOnTab(c)||w(this.tuix.tabs[c].edit_mode.validate_on_revert));if(!k&&(b=this.fields(c)))for(e in b)if(B(b,e)){var l=b[e];if(w(l.validate_onchange)&&m(d=this.readField(e))&&d!=l.value){k=!0;break}else!f&&w(l.format_onchange)&&m(d=this.readField(e))&&d!=l.value&&(f=!0)}this.tuix.tabs[c].edit_mode.on="cancel"!=a;this.changed[c]=!1;k?this.validate(h,h,!0):f?this.format(!0):(this.wipeTab(),this.redrawTab(!0));this.tuix.tab==c&&
$("#zenario_abtab").removeClass("zenario_abtab_changed")}};g.clickTab=function(a){this.loaded&&this.validate(a!=this.tuix.tab,a)};g.turnToggleOn=function(a){this.clickButton(a,!0)};g.turnToggleOff=function(a){this.clickButton(a,!1)};g.clickButton=function(a,c){var d;if(d=this.field(a))if("submit"==d.type)d.pressed=!0,this.validate(!0);else if("toggle"==d.type){var b=$(this.get(a));a=$(this.get("row__"+a));var e=!!w(d.pressed);if(c===h||c!=e)(d.pressed=!w(d.pressed))?(b.removeClass("not_pressed").addClass("pressed"),
a.addClass("zfea_row_pressed")):(b.removeClass("pressed").addClass("not_pressed"),a.removeClass("zfea_row_pressed")),this.markAsChanged(),this.validateFormatOrRedrawForField(d,!0)}else"button"==d.type&&(d.pressed=!0,this.validateFormatOrRedrawForField(d))};g.togglePressed=function(a,c){var d=c?1<c?this.toggleLevelsPressed[c-1]:!0:this.toggleLevelsPressed.last;m(d)||(d=!0);a&&"toggle"==a.type&&(this.toggleLevelsPressed.last=d&&w(a.pressed),c&&(this.toggleLevelsPressed[c]=this.toggleLevelsPressed.last));
return d};g.retryAJAX=function(a,c,d,b,e,f){var k=function(){z._a(a,c,d,h,k,!0,h,h,h,h,f).after(b);e&&O.nowDoingSomething&&O._nDS(e)};k()};g.switchToATabWithErrors=function(){var a,c=this.tuix;if(c&&c.tabs&&!this.errorOnTab(c.tab))for(a in this.sortedTabs)if(B(this.sortedTabs,a)){var d=this.sortedTabs[a];if(c.tabs[d]&&!this.checkTabHidden(d)&&this.errorOnTab(d))return c.tab=d,!0}return!1};g.checkTabHidden=function(a){return L._h(h,this,h,a,h,h,h,h,this.tuix.tabs[a])};g.applyMergeFields=function(a,
c,d,b){return a};g.applyMergeFieldsToLabel=function(a,c,d,b){return a};g.hideTab=function(a){var c=this;a?($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled","disabled"),$("#zenario_abtab").clearQueue().show().animate({opacity:.8},200,function(){c.tabHidden=!0;c.draw()})):($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled","disabled").animate({opacity:.9},100),c.tabHidden=!0,c.draw())};g.draw=function(){this.loaded&&
this.tabHidden&&this.draw2()};g.draw2=function(){};g.size=function(){};g.makeFieldAsTallAsPossible=function(){};g.getNextTab=function(){m(this.prevTab)||m(this.nextTab)||this.drawTabs(" ");return this.nextTab};g.getPrevTab=function(){m(this.prevTab)||m(this.nextTab)||this.drawTabs(" ");return this.prevTab};g.goToNextTab=function(){var a=this.getNextTab();if(m(a))return va._cT(a),!0};g.goToPrevTab=function(){var a=this.getPrevTab();if(m(a))return va._cT(a),!0};g.drawTabs=function(a){a||(a=this.mtPrefix+
"_tab");var c,d=[],b,e,f,k,l,q=function(r,A,E){for(A in r)if(B(r,A)){E=r[A];if(E.onclick){e&&(l=E.id);if(e=E.current)k=b;b=E.id}E.children&&q(E.children)}};for(f in this.sortedTabs)if(B(this.sortedTabs,f)){var t=this.sortedTabs[f];if((c=this.tuix.tabs[t])&&!(c._was_hidden_before=L._h(h,this,h,t,h,h,h,h,c))){var p="";if(c.fields&&!_._isEm(c.fields)||c.fields&&!_._isEm(c.errors)||c.fields&&!_._isEm(c.notices))p=this.globalName+".clickTab('"+ca(t)+"');";!this.tuix.tab&&p&&(this.tuix.tab=t);d.push({id:t,
tabId:t,tuix:c,onclick:p,current:this.tuix.tab==t,label:c.label})}}L._sBK(d,"zenario_fab_tab_with_children");q(d);this.prevTab=k;this.nextTab=l;return this.microTemplate(a,d)};g.drawFields=function(a,c,d){var b,e=this.tuix.tab,f=this.tuix.tabs[e],k=this.groupings[e],l=this.sortedFields[e],q,t="",p=!1,r=this.fields(e),A={},E={},N={},n=!1,u=!1,Q={},C={fields:{},rows:[],tabId:e,path:this.path,tuix:this.tuix,revert:"",errors:[],notices:{}};this.drawingFields=!0;if(!d){this.ffoving=0;this.splitValues=
{};this.tallAsPossibleField=h;this.errorOnForm=!1;this.disableDragDropUpload();!this.savedAndContinued(e)&&this.editCancelEnabled(e)&&(C.revert=ja("class","zenario_editCancelButton",L._i("class","submit","type","button","onclick",this.globalName+".changeMode(); return false;","value",this.editModeOn()?W.cancel:W.edit)));if(this.editModeOn()){if(f.errors)for(M in f.errors)if(B(f.errors,M)){var F=f.errors[M];this.errorOnForm=!0;C.errors.push({message:F})}if(r)for(M in r)if(B(r,M)&&(F=r[M],F.error))if(this.errorOnForm=
!0,this.enableInlineErrors()&&(q=this.tuix.error_on_form_message||W.errorOnForm)){C.errors.push({message:q});break}else C.errors.push({message:F.error})}if(f.notices)for(M in f.notices)B(f.notices,M)&&(F=f.notices[M],w(F.show)&&!L._h(F,this,h,M)&&{error:1,warning:1,question:1,information:1,success:1}[F.type]&&(C.notices[M]=F))}for(b in l)if(B(l,b)){var y=l[b];F=r[y];var M=!1;q=F.grouping;if(da!==q){var da=q;u=m(k[q])&&r[k[q]];p=q&&(!u||L._h(h,this,h,k[q],h,h,u))}S!==q&&(M=!0);F._id=y;F._html=this.drawField(a,
e,y,F,A,E,N,d,p);if(!d&&!p&&!1!==F._html){(M||F._startNewRow||!C.rows.length)&&C.rows.push({fields:[],grouping:u});if(M&&u&&(u.legend||u.snippet)){u=_._ex({grouping:q},u);u._id=q;u._html=this.drawField(a,e,q,u);u._hideOnOpen=!0;u._showOnOpen=!0;u._lastVisibleGrouping=S;var S=q;C.rows[C.rows.length-1].fields.push(u);C.fields[q]=u;Q[q]=u;C.rows.push({fields:[]})}n||f.show_errors_after_field!=y||(C.rows[C.rows.length-1].errors=C.errors,C.rows[C.rows.length-1].notices=C.notices,n=!0);F._lastVisibleGrouping=
S;S=q;C.rows[C.rows.length-1].fields.push(F);C.fields[y]=F}}for(y in C.fields)B(C.fields,y)&&(F=C.fields[y],q=F.grouping)&&(u=Q[q])&&(u._hideOnOpen&=F._hideOnOpen,u._showOnOpen&=F._showOnOpen);d||(C.rows.length&&(C.rows[C.rows.length-1].fields[0]._isLastRow=!0),n||C.rows.splice(0,0,{errors:C.errors,notices:C.notices}),c=c||f.template||this.mtPrefix+"_current_tab",t+=this.microTemplate(c,C));this.drawingFields=!1;for(b in l)B(l,b)&&(y=l[b],delete r[y]._lastVisibleGrouping,delete r[y]._startNewRow,
delete r[y]._hideOnOpen,delete r[y]._showOnOpen,delete r[y]._isLastRow,delete r[y]._html,delete r[y]._id);return t};g.drawTUIX=function(a,c,d){this.tuix={tab:"details",tabs:{details:{template:c,edit_mode:{on:!0,enabled:!0,always_on:!0},fields:a}}};this.sortTabs();return this.drawFields(d)};g.insertHTML=function(a,c,d){var b=this.get("zenario_abtab"),e=this.lastFocus||this.fieldThatTriggeredRedraw,f;b.innerHTML=a;this.tabHidden=!1;this.changes(this.tuix.tab)?$(b).addClass("zenario_abtab_changed"):
$(b).removeClass("zenario_abtab_changed");c.done();(f=!d&&e&&this.field(e.id))&&this.focusField(f,e.ss,e.se);this.fieldThatTriggeredRedraw=!1};g.hideShowFields=function(a){var c=$(".zenario_hide_on_open"),d=$(".zenario_hide_row_on_open"),b=$(".zenario_show_on_open"),e=function(f,k){k.style.display="none"};b.length&&!c.length?b.show("blind",200,a):!b.length&&c.length?c.hide("blind",200,function(){d.each(e)}):b.length&&c.length&&(c.each(e),d.each(e),b.show())};g.isAdminFacing=function(){return!0};g.addJQueryElements=
function(a){var c=this;z._aJQE(a+" ",c.isAdminFacing());$(a+" select.iconselectmenu").css("visibility","hidden").each(function(d,b){var e=$(b);e.attr("id");e.iconselectmenu({width:"auto",open:function(f){f=$("body > .ui-selectmenu-menu.ui-selectmenu-open");var k=f.height()/2,l=f.find(".ui-state-active");(l=l.length&&(l.position().top||l.parent().position().top))&&l>k?f.scrollTop(l-k):f.scrollTop(0);f.addClass("iconselectmenu__"+e.attr("id")).addClass("iconselectmenu__in__"+c.path)},change:function(){$(this).change()}})})};
g.fieldIsReadonly=function(a,c,d){return c.show_as_a_label||c.show_as_a_span||w(c.read_only)||w(c.readonly)||m(d)&&!this.editModeOn(d)||m(c.readonly_if)&&L._e(c.readonly_if,this,c,h,a,h,h,c)};g.focusFirstField=function(){var a=this;if(a.tuix&&!w(a.tuix.tabs[a.tuix.tab].disable_autofocus)){var c=-1,d=[],b=h,e,f,k,l;for(e in a.sortedFields[a.tuix.tab])if(B(a.sortedFields[a.tuix.tab],e)){var q=a.sortedFields[a.tuix.tab][e];if((f=a.get(q))&&(k=a.field(q))&&((l=k.pick_items||k.upload)||$(f).is(":visible"))&&
(d[++c]={id:q,type:k.type,empty:""==f.value,focusable:(l||z.IN(k.type,"password","checkbox","currency","select","text","textarea"))&&!w(f.disabled)&&!w(f.readonly)&&!a.fieldIsReadonly(q,k)},1<c))break}if(d[0]&&!d[0].empty&&d[1]&&d[1].focusable&&d[1].empty&&"password"==d[1].type)b=1;else if(d[0]&&d[0].focusable)b=0;else if(d[1]&&d[1].focusable)b=1;else return;setTimeout(function(){a.focusField(d[b])},50)}};g.focusField=function(a,c,d){if(a.type){if("date"==a.type||"datetime"==a.type)return;a=this.get(a.id)}else a=
this.$getPickItemsInput(a.id);if(a&&(a.focus(),m(c)))try{a.selectionStart=c,a.selectionEnd=d}catch(b){}};g.$getPickItemsInput=function(a){return $(this.get("name_for_"+a)).find(".TokenSearch input")};g.errorOnBox=function(){if(this.tuix&&this.tuix.tabs)for(tab in this.tuix.tabs)if(B(this.tuix.tabs,tab)&&this.errorOnTab(tab))return!0;return!1};g.errorOnTab=function(a){var c;if(this.tuix.tabs[a]&&this.editModeOn(a)){if(this.tuix.tabs[a].errors)for(c in this.tuix.tabs[a].errors)if(B(this.tuix.tabs[a].errors,
c))return!0;if(a=this.fields(a))for(c in a)if(B(a,c)&&a[c].error)return!0}};g.checkValues=function(a){a?this.wipeTab():this.readTab();for(var c in this.tuix.tabs)if(B(this.tuix.tabs,c)){a=this.tuix.tabs[c];var d=this.editModeOn(c);if(a.fields)for(var b in a.fields)if(B(a.fields,b)){var e=a.fields[b];this.isFormField(e)&&("code_editor"==e.type&&z._cAD("code_editor_"+b),m(e.current_value)||(e.current_value=this.value(b,c,!0)),d&&(m(e.value)||(e.value=this.value(b,c,!1)),e.multiple_edit&&!m(e.multiple_edit._changed)&&
m(e.multiple_edit.changed)&&(e.multiple_edit._changed=e.multiple_edit.changed)))}}H&&H.activeElement&&(this.lastFocus=this.setLastFocus(H.activeElement))};g.setLastFocus=function(a){if("object"===typeof a){var c=a;a=c.id}else c=this.get(a);a={id:a};if(c)try{a.ss=c.selectionStart,a.se=c.selectionEnd}catch(d){a.ss=a.se=h}return a};g.enableMicroTemplates=function(a,c){var d=this,b;for(b in c)if(B(c,b))switch(typeof c[b]){case "object":"lib"!==b&&"thus"!==b&&"tuix"!==b&&d.enableMicroTemplates(a,c[b]);
break;case "string":"type"===b||"value"===b&&d.isFormField(c)||"current_value"===b||!c[b].m(/(\{\{|\{%|<%)/)||function(e,f,k){k=z._gMT("<% "+d.defineLibVarBeforeCode()+" %>"+e[f],h);e[f]=function(){return k(e)}}(c,b)}};g.displayAsTag=function(a,c){return a.show_as_a_label||c&&a.show_as_a_label_when_readonly?"label":a.show_as_a_span||c&&a.show_as_a_span_when_readonly?"span":!1};g.drawField=function(a,c,d,b,e,f,k,l,q,t,p,r,A,E,N){var n=this;m(b)||(b=n.field(d,c));m(b.id)||(b.id=d);w(b.enable_microtemplates_in_properties)&&
n.enableMicroTemplates(b,b);var u=b.type,Q=b.upload,C=b.pick_items,F=b.disabled,y=b.validation||{},M="currency"==u,da="date"==u||"datetime"==u,S=M||!!y.numeric,aa=b.decimal_places,ma,Y,v="",Ja,T={},na="multiselect"==u,ua=!1,x={"class":""},fa={},oa={},za=!1,ha=!1,Aa,la=!1,Ka=!1,La=!1,Ma=!1,Na=!1,Oa=!1,Ba=!1,Ca=!1,pa=n.tuix.tabs[c];m(r)||(r=n.fieldIsReadonly(d,b,c));C&&F&&(r=!0);u&&"datetime"==u&&(r=!0);N?m(N.disabled_if)&&L._e(N.disabled_if,n,N,h,t,h,h,b)&&(r=!0):m(b.disabled_if)&&L._e(b.disabled_if,
n,h,h,d,h,h,b)&&(r=!0);S&&(aa=m(aa)?1*aa:M?2:h);!b["class"]&&b.css_class&&(b["class"]=b.css_class);b.snippet||m(p)||(p=n.value(d,c));m(p)||(p="");if(!m(t)){delete b.selected_option;if(p&&b.values){var R=_._isOb(b.values)?b.values[p]:n.tuix.lovs&&n.tuix.lovs[b.values]&&n.tuix.lovs[b.values][p];_._isOb(R)&&L._h(R,n,h,p,h,h,b,h,pa)&&(R=!1);if(R)b.selected_option=R;else if("radio"==u||"select"==u)b.current_value=p=""}(Q||C||na)&&""!=p&&(T=n.pickedItemsArray(b,p));b.values&&_._iS(b.values)&&n.tuix.lovs&&
n.tuix.lovs[b.values]?b.values=n.tuix.lovs[b.values]:b.load_values_from_organizer_path&&!b.values&&n.loadValuesFromOrganizerPath(b);for(X in b)if(B(b,X)&&"<"==X[0]&&(Aa=X.m(/^<(\/?)(\w+)/))){b[X]&&_._iS(b[X])&&(X+=b[X]);var U={table:1,tr:2,td:3,th:4,br:5,div:6,p:7,span:8}[Aa[2]]||9;5>U&&(Oa=!0);if(Aa[1]){if(!Ca){Ca=!0;var Da="        ".split(" ")}Da[9-U]+=X}else{if(!Ba){Ba=!0;var Ea="        ".split(" ")}Ea[U-1]+=X;1==U&&(Na=!0);5==U&&(Ma=!0)}}}l||"button"!=u&&"submit"!=u||(b.pressed=!1);if(l||!m(t)){var X=
m(b.same_row)?!w(b.same_row):!Ma&&(Na||!Oa);b._startNewRow=X;R=1*b.indent||0;var ia=q||L._h(h,n,h,d,h,h,b)||b.hide_if_empty&&!p||r&&b.hide_when_readonly||w(f&&f.last?b.hide_with_previous_field:b.hide_if_previous_field_is_not_hidden)||w(f&&f.beforeLast?b.hide_with_previous_previous_field:b.hide_if_previous_previous_field_is_not_hidden)||w(b.hide_with_previous_indented_field)&&f&&f[R]||w(b.hide_with_previous_outdented_field)&&0<R&&f&&f[R-1]||w(b.hide_with_previous_indented_fields)&&!e[R]||m(b.hide_if_previous_value_is)&&
z._iL(b.hide_if_previous_value_isnt,k&&k.last)||m(b.hide_if_previous_value_isnt)&&!z._iL(b.hide_if_previous_value_isnt,k&&k.last)||m(b.hide_if_previous_outdented_value_is)&&0<R&&z._iL(b.hide_if_previous_outdented_value_is,k&&k[R-1])||m(b.hide_if_previous_outdented_value_isnt)&&0<R&&!z._iL(b.hide_if_previous_outdented_value_isnt,k&&k[R-1]);k&&(k.last=p,X&&(k[R]=p));f&&(f.beforeLast=f.last,f.last=ia,X&&(f[R]=ia),m(e.last)&&e.last===R||(e.last<R&&(e[R]=!1),e.last=R),ia||(e[R]=!0));b._startNewRow&&!1!==
n.shownTab&&n.shownTab==n.tuix.tab&&"editor"!=u&&"code_editor"!=u&&b._was_hidden_before&&!ia?b._showOnOpen=!0:b._startNewRow&&!1!==n.shownTab&&n.shownTab==n.tuix.tab&&"editor"!=u&&"code_editor"!=u&&!b._was_hidden_before&&ia&&(b._hideOnOpen=ma=!0,b._was_hidden_before=!0);if(ia){if(b._was_hidden_before=!0,!ma)return!1}else delete b._was_hidden_before;if(l)return;ia||!b.tall_as_possible||m(n.tallAsPossibleField)||(n.tallAsPossibleField=d,n.tallAsPossibleFieldType=b.type);b.multiple_edit&&(e="",f=!r&&
m(b.multiple_edit._changed)?w(b.multiple_edit._changed):b.multiple_edit.changed,w(b.multiple_edit.hide_ui)||!b.multiple_edit.select_list?(k=w(b.multiple_edit.hide_ui),e+=ea("type","checkbox","class","multiple_edit","id","multiple_edit__"+d,"checked",f,"style",k?"display: none;":"","disabled",r,"onchange",r||k?"":n.globalName+".meChange(this.checked, '"+J(d)+"');",">")):e+=Ia("class","multiple_edit","id","multiple_edit__"+d,"disabled",r,"onchange",n.globalName+'.meChange(this.value == 1, "'+ca(d)+
'");',ya("value","","selected",!f,b.multiple_edit.select_list.not_changed_label||W.notChanged)+ya("value",1,"selected",f,b.multiple_edit.select_list.changed_label||W.changed)),v+=e,e=h)}if(!(A&&E||"object"!=typeof b.values))if(A=[],E={},Q&&w(Q.reorder_items)||C&&w(C.reorder_items))for(U in e=p.s(","),e){if(B(e,U)){var V=e[U];A.push(V)}}else{for(V in b.values)B(b.values,V)&&(e=b.values[V],"object"==typeof e?(m(e.parent)&&(ha=!0,E[e.parent]=!0),L._h(e,n,h,V,h,h,b,h,pa)||b.values_visible_if&&!L._e(b.values_visible_if,
n,e,h,V,h,h,b,h,pa)||(m(e.ord)?A.push([V,e.ord]):m(e.label)?A.push([V,e.label]):A.push([V,V]))):A.push([V,e]));A.sort(L.sortArray);for(U in A)B(A,U)&&(A[U]=A[U][0])}if(r)x.readonly=!0,n.isButton(b)&&(x.disabled=!0,x["class"]+="disabled ");else if(b.error&&(x["class"]+="zenario_field_with_error "),y.required||y.required_if_not_hidden)x["class"]+="zenario_required_field ";if("checkboxes"!=u&&(Y=n.displayAsTag(b,r))){A=S?J(L._nF(1*p,aa)):J(p);if("select"==u||"radios"==u)b.values&&b.values[p]?A=J(b.values[p]):
b.empty_value&&(A=J(b.empty_value));v+=xa(Y,"id",Y+"__"+d,"class",b.css_class,"style",b.style,A)}else if(y=b.snippet){for(Ja in Pa)Y=Pa[Ja],y[Y]&&(v+=xa(Y,"id",Y+"__"+d,"class",y[Y+"_class"],"style",y[Y+"_style"],J(y[Y])));!ia&&y.show_split_values_from&&n.splitValues&&n.splitValues[y.show_split_values_from]&&(v+=n.splitValues[y.show_split_values_from],delete n.splitValues[y.show_split_values_from]);y.html&&(v+=ka("id","snippet__"+d,z._un(y.html)));y.microtemplate&&(v+=ja("id","microtemplate__"+d,
n.microTemplate(y.microtemplate,b)));y.url&&(v=w(y.cache)?n.cachedAJAXSnippets[y.url]?v+n.cachedAJAXSnippets[y.url]:v+(n.cachedAJAXSnippets[y.url]=z._nAA(z._aBP(y.url))):v+z._nAA(z._aBP(y.url)))}else if(("checkboxes"==u||"radios"==u)&&!m(t))r&&b.display_as_text_when_readonly?v+=J(n.displaySelectedItems(d,b,p,c)):b.values&&(ha=_._ex({},b),T=n.pickedItemsArray(b,p),ha.name=b.name||d,ha.type="checkboxes"==u?"checkbox":"radio",r&&(ha.disabled=!0),v=_._isEm(A)?v+ta("class","zenario_no_values_message",
J(b.no_values_message)):v+n.hierarchicalBoxes(a,c,d,p,b,ha,r,T,A,E)),v+=n.displayMissingItems(b);else if(Q||C||na){var Qa=na||C&&w(C.multiple_select)||Q&&w(Q.multi);p={id:d,pickerHTML:"",wrappedId:"name_for_"+d,readOnly:r};r||(C&&(C.target_path||C.path)&&!w(C.hide_select_button)&&(p.select={onclick:n.globalName+".pickItems('"+J(d)+"');",phrase:C.select_phrase||W.selectDotDotDot}),Q&&(p.upload={onclick:n.globalName+".upload('"+J(d)+"');",phrase:Q.upload_phrase||W.uploadDotDotDot},w(Q.drag_and_drop)&&
n.upload(d,!0),I.Dropbox&&Dropbox.isBrowserSupported()&&(p.dropbox={onclick:n.globalName+".chooseFromDropbox('"+J(d)+"');",phrase:Q.dropbox_phrase||W.dropboxDotDotDot})));p.pickerHTML+=Ia("id",d,"multiple",Qa,"class",b.css_class,"style",b.style,">");!b.values||_._isEm(T)&&!na||(p.pickerHTML+=n.hierarchicalSelect(T,b,pa,A,ha,E));p.pickerHTML+="</select>";v+=n.microTemplate(n.mtPrefix+"_picked_items",p);a.after(function(){na?n.setupMultipleSelect(b,d,c,r||F):n.setupPickedItems(b,d,c,r,Qa)})}else if(b.captcha)v+=
ea("type","hidden","style","display: none","id",d,"value",p),p||(v+=ka("style","display: inline-block","id","captcha__"+d),a.after(function(){grecaptcha.render("captcha__"+d,_._ex({sitekey:google_recaptcha.sitekey,callback:function(D){n.get(d).value=D}},b.captcha))}));else if(u){fa.onchange=t?"lib.fieldChange('"+J(d)+"', '"+J(t)+"');":"lib.fieldChange('"+J(d)+"');";F&&(x["class"]+="disabled ");S&&(x.onkeyup=(x.onkeyup||"")+"lib.keepNumeric(this, "+!!b.allow_negative_numbers+", "+aa+")");b.return_key_presses_button&&
!r&&(x.onkeyup=(x.onkeyup||"")+"if (event.keyCode == 13) {zenario._st(event);$('#"+J(b.return_key_presses_button)+"').click();return false;}");w(b.multiple_edit)&&!r&&(x.onkeyup=(x.onkeyup||"")+"if (event && event.keyCode == 9) return true; lib.meMarkChanged('"+J(d)+"', this.value, '"+J(b.value)+"');");x["class"]+="input_"+u;switch(u){case "select":b.slider&&(ua=!0,v+=n.drawSlider(a,d,b,r,!0));r&&(x.disabled=!0);v+="<select";break;case "code_editor":v+="<div";x["class"]=" zenario_embedded_ace_editor";
a.after(function(){var D=ace.edit(d),K=!1;D.session.setUseSoftTabs(!1);D.setShowPrintMargin(!1);r&&(D.setReadOnly(!0),D.setBehavioursEnabled(!1));w(b.wrap_text)&&D.session.setUseWrapMode(!0);D.session.setOption("useWorker",!1);D.on("blur",function(Ra){K&&z._aADINS("code_editor_"+d,function(){n.fieldChange(d)},0);K=!1});D.on("change",function(Ra){n.markAsChanged();K=!0;z._aADINS("code_editor_"+d,function(){n.fieldChange(d)},5E3)});var Z;if(Z=b.language)try{var qa="html"==Z;Z=Z.m(/\.twig\.html$/i)?
"ace/mode/twig":Z.m(/\./)?ace.require("ace/ext/modelist").getModeForPath(Z).mode:"ace/mode/"+Z;var Fa=ace.require("ace/ext/language_tools");D.session.setMode(Z);var ra=b.code_editor_options||{};m(ra.enableBasicAutocompletion)||(ra.enableBasicAutocompletion=!qa);m(ra.enableLiveAutocompletion)||(ra.enableLiveAutocompletion=!qa);qa?Fa.setCompleters([]):Fa.setCompleters([Fa.keyWordCompleter]);D.setOptions(ra)}catch(Ra){console.log("Ace editor could not load this language",Z)}D.$blockScrolling=Infinity;
n.setCodeEditorPosition(D,n.editingPositions[c+"/"+d])});break;case "color_picker":case "colour_picker":v+="<input";x["class"]=" zenario_color_picker";a.after(function(){var D=b.color_picker_options||b.colour_picker_options||{};D.disabled=r;D.preferredFormat=D.preferredFormat||"hex";D.showInput=!0;$(n.get(d)).spectrum(D)});break;case "editor":v+="<textarea";T="<textarea "+n.outputAtts(b)+"></textarea>";T=$(T).height();Q=Math.max(Math.floor(.5*$(I).height()),300);C=function(D){n.fieldChange(D.id)};
if(n.useSimpleEditor())var ba={script_url:G+z.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code fullscreen","nonbreaking table contextmenu directionality","paste autoresize"],browser_spellcheck:!0,height:250,menubar:!1,toolbar:"undo redo | formatselect | link unlink | bold italic | removeformat | alignleft aligncenter alignright alignjustify | outdent indent"};else O._gSD(),T=_._ex({},{script_url:G+z.tinyMCEPath,inline:!1,menubar:!1,statusbar:!1,plugins:"autoresize",
document_base_url:h,convert_urls:!1,readonly:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,min_height:T,max_height:Q,autoresize_min_height:T,autoresize_max_height:Q,autoresize_bottom_margin:10,onchange_callback:C,init_instance_callback:function(D){O._eDDUITM(!1,h,n.get("row__"+(D.editorId||D.id)));var K;(K=D.editorContainer)&&(K=$("#"+D.editorContainer.id+" iframe"))&&(K=K[0])&&(K=K.contentWindow)&&O._eDDUITM(!1,h,K)}},{plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code fullscreen",
"nonbreaking table contextmenu directionality","paste autoresize","colorpicker textcolor fullscreen"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,paste_preprocess:O.tinyMCEPasteRreprocess,readonly:!1,convert_urls:!0,relative_urls:!1,content_css:h,toolbar:"undo redo | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen",style_formats:O.skinDesc.style_formats,oninit:h}),
Q=_._ex({},T,{menubar:!0,menu:{insert:{title:"Insert",items:"link | anchor hr charmap"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},tools:{title:"Tools",items:"searchreplace | code"}},toolbar:"undo redo | image link unlink | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | alignleft aligncenter alignright alignjustify | code fullscreen",file_browser_callback:O.fileBrowser,
init_instance_callback:function(D){O._eDDUITM(!0,G,n.get("row__"+(D.editorId||D.id)));var K;(K=D.editorContainer)&&(K=$("#"+D.editorContainer.id+" iframe"))&&(K=K[0])&&(K=K.contentWindow)&&O._eDDUITM(!0,G,K)}}),C=_._ex({},Q,{toolbar:"undo redo | image | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen"}),Y=_._ex({},C,{toolbar:"undo redo | link unlink | bold italic underline strikethrough superscript subscript forecolor backcolor removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | alignleft aligncenter alignright alignjustify | code fullscreen"}),
r?(ba=T,ba.readonly=!0,x["class"]=" tinymce_readonly"):b.insert_image_button?b.insert_link_button?(ba=Q,x["class"]=" tinymce_with_images_and_links"):(ba=C,x["class"]=" tinymce_with_images"):b.insert_link_button?(ba=Y,x["class"]=" tinymce_with_links"):(ba=T,x["class"]=" tinymce"),x.style="visibility: hidden;";_._isOb(b.editor_options)&&(ba=_._ex(ba,b.editor_options));ba.setup=function(D){D.on("change",function(K){n.fieldChange(K.id)})};a.after(function(){var D=$(n.get(d)),K=n.get("zenario_abtab");
try{D.tinymce().remove()}catch(qa){}if(K){var Z=K.style.display;K.style.display="block"}D.tinymce(ba);K&&(K.style.display=Z)});break;case "button":case "submit":case "toggle":Ka=!0;w(b.use_button_tag)?(v+="<button",La=!0):(v+="<input",x.type="button");if(!r||w(b.can_be_pressed_in_view_mode))fa.onclick="lib.clickButton('"+d+"');",delete x.disabled;"toggle"==u&&(x["class"]+=b.pressed?" pressed":" not_pressed");break;default:"textarea"==u?v+="<textarea":da?(la=!0,v+="<input",x.type="text",x["class"]+=
" zenario_datepicker",x.readonly="readonly",r||(x.onkeyup=(x.onkeyup||"")+"zenario._dFKU(this, event, '"+J(d)+"');"),a.after(function(){var D=$(n.get(d)),K=!!w(b.change_month_and_year);D.datepicker({changeMonth:K,changeYear:K,dateFormat:O.siteSettings&&O.siteSettings.organizer_date_format||z.dpf,altField:n.get("_value_for__"+d),altFormat:"yy-mm-dd",showOn:"focus",disabled:r,onSelect:function(Z,qa){D.change()}})})):"url"==u?(v+="<input",x.type="url",x.placeholder="http://example.com",x.onblur=(x.onblur||
"")+"if(this.value && !this.value.m('://') && $.trim(this.value)[0] != '#') this.value = 'http://' + this.value;"):M?(v+="<input",x.type="text",x.onfocus="this.value = $(this).data('og_value');"+(x.onfocus||""),x.onblur="$(this).data('og_value', this.value); this.value = zenarioT._nF(1*this.value, "+aa+");"+(x.onblur||"")):(b.slider&&(ua=!0,v+=n.drawSlider(a,d,b,r,!0)),"text"==u&&b.values&&!r&&(v+='<span class="zenario_textbox_with_autocomplete">',za=!0),"checkbox"==u&&b.onoff&&(x["class"]="onoffswitch-checkbox",
v+='<div class="onoffswitch">'),v+="<input",x.type=u),b.redraw_immediately_onchange&&(x.onkeyup=(x.onkeyup||"")+"if (lib.redrawImmediatelyWhenChanged(this, event, '"+J(d)+"', '"+J(b.value)+"', "+(b.value==p?"false":"true")+")) return false;"),n.addExtraAttsForTextFields(b,x)}if("checkbox"==u||"radio"==u)w(p)&&(x.checked="checked"),p=h,r&&(x.disabled=!0),w(b.indeterminate)&&a.after(function(){var D;if(D=n.get(d))D.indeterminate=!0});ua&&(x.onchange='$("#zenario_slider_for__'+ca(d)+'").slider("value", $(this).val());',
x.onkeyup=(x.onkeyup||"")+'$("#zenario_slider_for__'+ca(d)+'").slider("value", $(this).val());');m(t)?(N=$.extend({},b,N),oa.id=d+"___"+t,x["class"]+=" control_for__"+d):(N=b,oa.id=d);"radio"==u&&b.name||(oa.name=d);r&&(oa.placeholder="");v+=n.outputAtts(N,x,fa,oa);fa=J(Ka?b.value:p,!1,"asis");x="";"select"==u?v+=">":La?(v+=">",b.icon_left&&(v+='<i class="'+J(b.icon_left)+'" aria-hidden="true"></i>'),v+=fa,b.icon_right&&(v+='<i class="'+J(b.icon_right)+'" aria-hidden="true"></i>'),v+="</button>"):
"textarea"==u||"editor"==u?v+=">"+fa+"</textarea>":"code_editor"==u?v+=">"+fa+"</div>":da?(v+=' value="'+J(z._fD(p,"datetime"==u))+'"/>',v+=ea("type","hidden","id","_value_for__"+d,"value",p),r||b.hide_clear_button||(v+=ea("type","button","class","zenario_remove_date","value","x","onclick",n.globalName+'.blankField("'+ca(d)+'"); $('+n.globalName+'.get("'+ca(d)+'")).change();'))):v=M?v+(' value="'+J(L._nF(1*p,aa))+'" data-og_value="'+s.numberFormat(1*p,aa,".","")+'"/>'):m(p)?v+(' value="'+fa+'"/>'):
v+"/>";"checkbox"==u&&b.onoff&&(v+=ta("class","onoffswitch-label","for",d,ka("class","onoffswitch-inner")+ka("class","onoffswitch-switch"))+"</div>");"select"==u&&(b.empty_value&&(x=ya("value","","data-hide_in_iconselectmenu",1,"selected",!p,J(b.empty_value)),b.show_empty_value_at_end||(v+=x,x="")),b.values&&(T={},T[p]=!0,v+=n.hierarchicalSelect(T,b,pa,A,ha,E)),v=v+(x+"</select>")+n.displayMissingItems(b));if(za){var Ga=[];for(U in A)B(A,U)&&(V=A[U],e=b.values[V],_._iS(e)?Ga.push({label:e,value:V}):
Ga.push({label:e.label,value:V}));a.after(function(){var D=$(n.get(d)),K={source:Ga,minLength:b.autocomplete_min_length||0,appendTo:D.parent()};b.return_key_presses_button&&(K.select=function(){setTimeout(function(){$("#"+b.return_key_presses_button).click()},0)});D.autocomplete(K);m(b.autocomplete)&&D.attr("autocomplete",b.autocomplete);D.focus(function(){D.autocomplete("widget").is(":visible")||D.autocomplete("search","")})});v+=ea("type","button","class","zenario_open_autocomplete","value","\u25be",
"onclick","$("+n.globalName+'.get("'+ca(d)+'")).autocomplete("search", "");')}za&&(v+="</span>")}m(t)||("url"!=u||r||(v+="&nbsp; "+ea("type","button","class","submit","value",W.test,"onclick",n.globalName+'.testURL("'+ca(d)+'");'),la=!0),!b.label||"checkbox"!=u&&"radio"!=u||(v+=" "+ta("class",b.label_class,"for",d,"id","label_for__"+d,J(b.label)),la=!0),m(b.post_field_label)&&(v+=" "+ta("for",d,"id","label_for__"+d,J(b.post_field_label)),la=!0),Ba&&(v=Ea.join("")+v),m(b.pre_field_html)&&(v=z._un(b.pre_field_html)+
v),b.show_copy_text_button&&z._cC()&&(t=n.defineLibVarBeforeCode()+"lib.copyField(this, '"+z._jE(d)+"');",u=n.vaPhrase("copy"),v+=ka("id","test","class","zenario_copy","onclick",t,"title",u,"\ud83d\udccb"),la=!0),la&&(v=ka("class","zenario_field_widget_wrap",v)),m(b.post_field_html)&&(v+=z._un(b.post_field_html)),b.tooltip&&(b.tooltip_link?(displayItem='<a href="'+b.tooltip_link+'"',b.tooltip_link_open_in_new_window&&(displayItem+=' target="blank"'),displayItem+=">?</a>"):displayItem="?",v+=ja("class",
"zenario_field_tooltip","title",b.tooltip,displayItem)),Ca&&(v+=Da.join("")),ua&&(v+=n.drawSlider(a,d,b,r,!1)));return v};g.addExtraAttsForTextFields=function(a,c){};g.copyField=function(a,c){c=this.readField(c);m(c)&&z._co(c)&&(this.tooltips(a,{content:this.vaPhrase("copied")}),$(a).hide(),setTimeout(function(){$(a).show()},0))};var Va={id:!0,name:!0,size:!0,maxlength:!0,accesskey:!0,"class":!0,cols:!0,dir:!0,readonly:!0,rows:!0,style:!0,tabindex:!0,title:!0,disabled:!0,onblur:!0,onchange:!0,onclick:!0,
ondblclick:!0,onfocus:!0,oninput:!0,onpaste:!0,onmousedown:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onselect:!0,autocomplete:!0,autofocus:!0,max:!0,min:!0,pattern:!0,placeholder:!0,required:!0,step:!0},Pa="hr h1 h2 h3 h4 label div p span".split(" ");g.outputAtts=function(a,c,d,b,e){var f,k="";for(f in a)if(B(a,f)&&!(b&&m(b[f])||!e&&!Va[f]&&"data-"!=f.substr(0,5)))if("disabled"==f||"readonly"==f||"selected"==f){if(w(a[f])||c&&w(c[f])&&delete c[f])k+=
" "+f+'="'+f+'"'}else k+=" "+f+'="'+this.defineLibVarBeforeCode(f),c&&c[f]&&(k+=c[f]+" ",delete c[f]),k+=J(a[f]),d&&d[f]&&(k+=" "+d[f],delete d[f]),k+='"';b&&(k+=this.outputAtts(b,!1,!1,!1,!0));c&&(k+=this.outputAtts(c,!1,!1,!1,!0));d&&(k+=this.outputAtts(d,!1,!1,!1,!0));return k};g.defineLibVarBeforeCode=function(a){if(m(a)&&"on"!=a.substr(0,2))return"";this.globalName||(I[this.globalName=L.generateGlobalName()]=this);return"var lib = "+J(this.globalName)+"; "};g.testURL=function(a){var c=this.get(a).value;
a=this.get(this.onThisRow("target_blank_",a))||this.get(this.onThisRow("target_blank",a));c&&(a&&2==a.value?$.colorbox({href:c,iframe:!0,width:"95%",height:"95%",className:"zenario_url_test_colorbox"}):I.open(z._aBP(c)))};g.keepNumeric=function(a,c,d){var b=a.value,e="";c&&"-"==b[0]&&(e="-",b=b.substr(1));b=b.r(/[^\d\.]/g,"");b=b.r(/\.(.*)\./g,".$1");if(d!==h)switch(d){case 0:b=b.r(/\.\d*/,"");break;case 1:b=b.r(/(\d*\.\d)\d*/,"$1");break;case 2:b=b.r(/(\d*\.\d\d)\d*/,"$1");break;case 3:b=b.r(/(\d*\.\d\d\d)\d*/,
"$1");break;case 4:b=b.r(/(\d*\.\d\d\d\d)\d*/,"$1")}b=e+b;a.value!=b&&(a.value=b)};g.hierarchicalSelect=function(a,c,d,b,e,f,k){var l="",q,t;for(t in b)if(B(b,t)){var p=b[t];var r=c.values[p];if(r!==h){var A=q=!1;if(_._iS(r))r={label:r};else if(w(r.disabled)||r.disabled_if&&L._e(r.disabled_if,this,r,h,p,h,h,c,h,d)||c.values_disabled_if&&L._e(c.values_disabled_if,this,r,h,p,h,h,c,h,d))q=!0;a[p]&&(A=!0);var E=!w(r.hide_when_children_are_not_visible);if(!m(k)&&e&&f[p]){if((childrenHTML=this.hierarchicalSelect(a,
c,d,b,e,f,p))||E)l+=xa("optgroup","label",r,"disabled",!childrenHTML,childrenHTML)}else E&&k===r.parent&&(l+="<option "+this.outputAtts(r,!1,!1,{disabled:q,selected:A,value:p})+">"+J(r,!1,!0)+"</option>")}}return l};g.setupMultipleSelect=function(a,c,d,b){var e=this,f=!1;d=$(e.get(c));d.multiselect({columns:a.cols,texts:{placeholder:a.empty_value||W.selectListSelect,overridePlaceholder:a.placeholder},onOptionClick:function(){f=!0},onControlClose:function(){f&&e.fieldChange(c)}});b&&d.multiselect("disable")};
g.typeaheadSearchEnabled=function(a,c,d){};g.typeaheadSearchAJAXURL=function(a,c,d){};g.parseTypeaheadSearch=function(a,c,d,b,e){};g.setupPickedItems=function(a,c,d,b,e){var f=this,k,l,q=a.pick_items||{},t=a.upload||{},p=w(q.allow_typing_anything),r=w(t.reorder_items||q.reorder_items);f.typeaheadSearchEnabled(a,c,d)&&(k=f.typeaheadSearchAJAXURL(a,c,d))&&(l="_search");l=$(f.get(c)).tokenize({datas:k,searchParam:l,debounce:200,nbDropdownElements:30,sortable:r,placeholder:q.nothing_selected_phrase||
t.nothing_selected_phrase||W.nothing_selected,onAddToken:function(A,E,N){f._tokenizeNoRecurse||(e?f.pickedItemsChanged(c,a):f.addToPickedItems(A,c,d),f.$getPickItemsInput(c).focus(),f.tooltips("#name_for_"+c+" .TokensContainer *[title]"))},maxElements:e?0:1,parseData:function(A){return f.parseTypeaheadSearch(f.tuix.tabs[d].fields[c],c,d,b,A)},formatTokenHTML:function(A,E){var N=f.tuix.tabs[d].fields[c];return N.values&&N.values[A]?f.drawPickedItem(A,c,N,b):p?(N.values=N.values||{},N.values[A]=E,f.drawPickedItem(A,
c,N,b)):!1},onRemoveToken:function(A,E){f._tokenizeNoRecurse||f.removeFromPickedItems(A,c,d)}});b?l.disable():(r&&l.container.addClass("zenario_reorder_items"),k||p?(l.container.addClass("zenario_picker_with_typeahead"),p&&f.$getPickItemsInput(c).blur(function(){var A;if(A=f.$getPickItemsInput(c).val()){var E={};E[A]=A;f.addToPickedItems(E,c,d)}})):l.disableTypeAhead())};g.chooseFromDropbox=function(a){var c=this,d,b,e;if(!(d=c.field(a))||!d.upload)return!1;if(e=d.upload.extensions||d.upload.accept)e=
_._iS(e)?e.s(","):_._tA(e);for(b in e)if(B(e,b)){var f=e[b];var k=f.s("/");m(k[1])?e[b]="images"==k[0]?"image":k[0]:"text"!=f&&"documents"!=f&&"images"!=f&&"video"!=f&&"audio"!=f&&"."!=f.substr(0,1)&&(e[b]="."+f)}d={cancel:function(){O._hAL()},linkType:"direct",multiselect:!!w(d.upload.multi),extensions:e,success:function(l){O._sAL();var q,t=new z.callback;for(q in l)if(B(l,q)){var p=l[q];t.add(z._a(c.ajaxURL()+"&fetchFromDropbox=1",p,!0))}t.after(function(){var r,A,E,N="";if(!(E=c.field(a))||!E.upload)return!1;
for(r in arguments)B(arguments,r)&&((A=arguments[r])&&A.id&&(N+=","+A.id),c.setFileDetails(E,A));""!==N&&c.addToPickedItems(N,a);O._hAL()})}};O._sAL();Dropbox.choose(d)};g.setFileDetails=function(a,c){a.values||(a.values={});c.label=this.formatLabelFromFile(c);a.values[c.id]=c};g.formatLabelFromFile=function(a){if(m(a.filename)){var c=a.filename;a.ssc&&(c+=" [checksum "+a.short_checksum+"]");w(a.width)&&w(a.height)&&(c+=" ["+a.width+" \u00d7 "+a.height+"px]")}else(fileDetails=z._dIIFO(a.id))&&(fileDetails=
fileDetails.s("/"))&&fileDetails[1]?(c=fileDetails[1],w(fileDetails[2])&&w(fileDetails[3])&&(c+=" ["+fileDetails[2]+" \u00d7 "+fileDetails[3]+"px]")):c=a.id;return c};g.upload=function(a,c){var d=this,b;if(!(b=d.field(a))||!b.upload)return!1;b={class_name:b.class_name,upload:b.upload};d.uploadCallback=function(e){if(e){var f,k,l,q="";if(!(l=d.field(a))||!l.upload)return!1;for(f in e)B(e,f)&&(k=e[f])&&k.id&&(q+=","+k.id,d.setFileDetails(l,k));""!==q&&d.addToPickedItems(q,a)}};c?d.enableDragDropUpload():
L._a(d,b,h,h,h,{fileUpload:1},h,d.ajaxURL())};g.ajaxURL=function(){return G+"zenario/ajax.php?method_call=handleAdminBoxAJAX&path="+wa(this.path)};g.enableDragDropUpload=function(){};g.disableDragDropUpload=function(){};g.uploadComplete=function(a){m(this.uploadCallback)&&this.uploadCallback(a);delete this.uploadCallback};g.drawSlider=function(a,c,d,b,e){var f=this,k=_._cl(d.slider);d="";if(w(k.before_field)?e:!e)b&&(d+='<div class="ui-disabled">'),d+=ja("id","zenario_slider_for__"+c,"class",k["class"],
"style",k.style),b&&(d+="</div>"),a.after(function(){var l;if(l=f.get("zenario_slider_for__"+c))m(k.min)&&(k.min=z.num(k.min)),m(k.max)&&(k.max=z.num(k.max)),m(k.step)&&(k.step=z.num(k.step)),k.disabled=!f.editModeOn(),k.value=$(f.get(c)).val(),k.slide=function(q,t){$(f.get(c)).val(t.value)},k.change=function(q,t){f.fieldChange(c)},$(l).slider(k)});return d};g.lookupFileDetails=function(a){return O._lFD(a)};g.displayMissingItems=function(a){var c="",d=this.tuix.missing_items_warning,b=[],e;if(!m(d)||
!d||!a.value)return"";var f=(a.value+"").s(",");for(e in f)if(B(f,e)){var k=f[e];a.values&&a.values[k]||b.push("#"+J(k))}b.length&&(c=ja("class","zenario_missing_items",z._aMF(d,{items:b.join(", ")})));return c};g.pickedItemsArray=function(a,c){if(!1===c||!m(c))return{};a.values&&_._iS(a.values)&&this.tuix.lovs&&this.tuix.lovs[a.values]&&(a.values=this.tuix.lovs[a.values]);if(!(0!==c&&"0"!==c||a.values&&(a.values[0]||a.values["0"])))return{};c=(c+"").s(",");var d={},b,e,f,k,l;a._display_value=!1;
for(k in c)if(B(c,k)&&(l=c[k])){if(a.upload&&(f=z._dIIFO(l))&&(f=f.s("/"))&&f[1])d[l]=f[1],w(f[2])&&w(f[3])&&(d[l]+=" ["+f[2]+" \u00d7 "+f[3]+"px]");else if(a.values&&a.values[l]&&"string"==typeof a.values[l])d[l]=a.values[l];else if(a.values&&a.values[l]&&a.values[l].label)d[l]=a.values[l].label;else if(((e=a.pick_items&&a.pick_items.target_path)||(e=a.pick_items&&a.pick_items.path))&&(b=O._gIFO(e,l,h,a.pick_items.add_conductor_vars_to_type_ahead_search?this.getConductorVars():h))){a.values||(a.values=
{});var q=O._fOIN(b,l);var t=b.items&&b.items[l]||{missing:!0};d[l]=q;a.values[l]={missing:t.missing,image:t.image,css_class:t.css_class||b.item&&b.item.css_class,label:q}}else a.upload&&l==1*l&&(f=this.lookupFileDetails(l))?(this.setFileDetails(a,f),d[l]=a.values[l]):d[l]=l;!1===a._display_value&&(a._display_value=d[l])}return d};g.pickedItemsValue=function(a){var c,d="";if(a)for(c in a)B(a,c)&&(d+=(""===d?"":",")+c);return d};g.displaySelectedItems=function(a,c,d,b){m(c)||(c=this.field(a,b));m(d)||
(d=this.value(a,b));a=this.pickedItemsArray(c,d);return _._isEm(a)?w(d)?d:m(c.empty_value)?c.empty_value:"":_._tA(a).join(", ")};g.hierarchicalBoxes=function(a,c,d,b,e,f,k,l,q,t,p,r,A){var E=this,N=1*e.cols||1,n=0,u="",Q=!1;if(!A)A=0,N=1*e.cols_at_top_level||N;else if(10<A)return"";r||(r={});p&&(r[p]=!0);A&&(u+=ja("class","zenario_hierarchical_box_children","id","children_for___"+d+"___"+p,">"));for(var C in q)if(B(q,C)){var F={};var y=q[C];y==1*y&&(y*=1);var M=h;var da="object"==typeof e.values[y]?
e.values[y]:{label:e.values[y]};e.tag_colors&&(F.tag_color=e.tag_colors[y]||"blue");M=da.parent;"0"===M&&(M=!1);if(!p&&!M||p==M){M=b?!0===b||1===b||"1"===b?!0===y||1===y||"1"===y:l?m(l[y])?!0:!1:y==b:!y;if(!k||M||!e.hide_unselected_values_when_readonly||t[y]){F.checked=M;if(F.newRow=++n>N)n=1;F.col=n;F.cols=N;if("checkboxes"==e.type&&w(e.checking_child_checks_parents)){var S="";p&&(S+="if (this.checked) { for (var cb in "+JSON.stringify(r)+") { "+E.globalName+".get('"+J(d)+"___' + cb).checked = true; } } ");
t[y]&&(S+="if (!this.checked) { $('#children_for___' + this.id + ' input').prop('checked', false); } ");S?f.onchange=e.onchange?S+" "+e.onchange:S:e.onchange?f.onchange=e.onchange:delete f.onchange}else"checkboxes"==e.type&&w(e.checking_parent_checks_children)&&(S="",t[y]&&(S+="if (this.checked) { $('#children_for___' + this.id + ' input').each(function(i, el) {el.checked = true;}) }; "),S?f.onchange=e.onchange?S+" "+e.onchange:S:e.onchange?f.onchange=e.onchange:delete f.onchange);F.lovId=d+"___"+
y;F.lovField=da;e.indeterminates&&w(e.indeterminates[y])&&function(aa){a.after(function(){var ma;if(ma=E.get(aa))ma.indeterminate=!0})}(F.lovId);F.lovHTML=E.drawField(a,c,d,f,h,h,h,h,h,y,M,!1,q,t,da);F.childrenHTML="";t[y]&&(F.childrenHTML=E.hierarchicalBoxes(a,c,d,b,e,f,k,l,q,t,y,_._ex({},r),A+1),n=0);Q?(E.splitValues||(E.splitValues={}),E.splitValues[d]||(E.splitValues[d]=""),E.splitValues[d]+=E.microTemplate(E.mtPrefix+"_radio_or_checkbox",F)):u+=E.microTemplate(E.mtPrefix+"_radio_or_checkbox",
F)}M&&da.split_values_if_selected&&!A&&"radios"===e.type&&(Q=!0)}}A&&(u+="</div>");return u};g.drawPickedItem=function(a,c,d,b,e){m(d)||(d=this.field(c));label=d.values&&d.values[a];pick_items=d.pick_items||{};thumbnail={};mi={};_._isOb(label)?_._ex(mi,label):label?mi.label=label:(mi.label=a,mi.missing=!0);mi.id=c;mi.item=a;mi.readOnly=b;mi.width&&mi.height&&((a=mi.checksum||mi.short_checksum)?(thumbnail.src=G+"zenario/file.php?c="+wa(a)+"&og=1",mi.usage&&(thumbnail.src+="&usage="+wa(mi.usage))):
mi.link&&(thumbnail.src=z._aBP(mi.link)),thumbnail.src&&(L._rI(mi.width,mi.height,180,120,thumbnail),mi.thumbnail=thumbnail));return this.drawPickedItem2(c,pick_items,e,mi)};g.drawPickedItem2=function(a,c,d,b){var e=this;return d?(e.__addTT=!0,setTimeout(function(){e.__addTT&&e.tooltips("#name_for_"+a+" .Dropdown *[title]");delete e.__addTT},1),e.microTemplate(c.dropdown_item_microtemplate||e.mtPrefix+"_dropdown_item",b)):e.microTemplate(c.picked_item_microtemplate||e.mtPrefix+"_picked_item",b)};
g.showPickedItemInPopout=function(a,c){L._a(this,{popout:{href:a,title:c,css_class:"zenario_show_colobox_above_fab"}})};g.pickItems=function(a){var c,d,b,e;(c=this.field(a))&&(d=c.pick_items)&&(d.path||d.target_path)&&(c=e=d.path,Ha.map&&(e=Ha._cNPTTP(d.path).path),w(d.multiple_select)||d.target_path&&d.target_path!=e||!(b=this.readField(a))||-1!=b.indexOf(",")||(c="//"==z._rHSS(c,2)?c+b:"/"==z._rHSS(c,1)?c+("/"+b):c+("//"+b)),this.SKTarget=a,O._oS(this.globalName,"setPickedItems",d.multiple_select,
c,d.target_path,d.min_path,d.max_path,d.disallow_refiners_looping_on_min_path,h,d.one_to_one_choose_phrase,d.one_to_many_choose_phrase,h,!0,h,h,h,h,h,h,h,h,d))};g.setPickedItems=function(a,c,d,b){a=this.SKTarget;var e,f={};for(e in c._items)if(B(c._items,e)){d=z._dIIFO(e);var k=b.items&&b.items[d]||{missing:!0};f[d]={missing:k.missing,image:k.image,css_class:k.css_class||b.item&&b.item.css_class,label:O._fOIN(b,d)}}this.addToPickedItems(f,a)};g.removeFromPickedItems=function(a,c,d){this.addToPickedItems(a,
c,d,!0)};g.addToPickedItems=function(a,c,d,b){this._tokenizeNoRecurse=!0;d=this.field(c,d);var e=this.readField(c),f=d.pick_items&&w(d.pick_items.multiple_select)||d.upload&&w(d.upload.multi),k,l={};a=L._cTO(a);var q=e?this.pickedItemsArray(d,e):{};for(k in a)if(B(a,k))if(e=a[k],d.values||(d.values={}),b)delete d.values[k];else if(d.values[k]||(d.values[k]=e),q[k]&&(l[k]=!0),f)q[k]=!0;else{q={};q[k]=!0;break}this.redrawPickedItems(c,d,q,l);this._tokenizeNoRecurse=!1};g.redrawPickedItems=function(a,
c,d,b){var e,f=this.pickedItemsValue(d),k={},l=$(this.get(a)).tokenize(),q=l.toArray();d=L._cTO(d);for(e in q)if(B(q,e)){var t=q[e];d[t]&&!b[t]?k[t]=!0:l.tokenRemove(t)}for(t in d)B(d,t)&&!k[t]&&(b=c.values&&c.values[t],_._isOb(b)?b=b.label:b||(b=t),l.tokenAdd(t,b));c.current_value=f;this.pickedItemsChanged(a,c)};g.pickedItemsChanged=function(a,c){c.onchange&&L._e(c.onchange,this,c,h,a,h,h,c);this.fieldChange(a)};g.changes=function(a){if(this.tuix&&this.tuix.tab){if(m(a))return this.changed[a];for(a in this.tuix.tabs)if(B(this.tuix.tabs,
a)&&this.changed[a])return!0}return!1};g.markAsChanged=function(a){this.tuix&&(m(a)||(a=this.tuix.tab),a&&!this.changed[a]&&(this.changed[a]=!0,this.tuix.tab==a&&$("#zenario_abtab").addClass("zenario_abtab_changed")))};g.fieldChange=function(a,c){var d=this,b=d.field(a);b&&(b.indeterminate&&(b.indeterminate=!1),m(c)&&b.indeterminates&&b.indeterminates[c]&&(b.indeterminates[c]=!1),d.markAsChanged(),w(b.multiple_edit)&&d.meMarkChanged(a),setTimeout(function(){d.validateFormatOrRedrawForField(b)},1))};
g.validateFormatOrRedrawForField=function(a,c){"string"==typeof a?(this.fieldThatTriggeredRedraw=this.setLastFocus(a),a=this.field(a)):a.id&&(this.fieldThatTriggeredRedraw=this.setLastFocus(a.id));var d=w(a.validate_onchange);c=w(a.format_onchange)||c&&(a.pressed?a.format_on_toggle_on:a.format_on_toggle_off);a=w(a.redraw_onchange);if(d)return 3>this.ffoving&&(this.ffoving=3,this.validate()),!0;if(c)return 2>this.ffoving&&(this.ffoving=2,this.format()),!0;a&&1>this.ffoving&&(this.ffoving=1,this.readTab(),
this.redrawTab());return a};g.redrawImmediatelyWhenChanged=function(a,c,d,b,e){if(a=e?a.value===b:a.value!==b)z._st(c),this.fieldThatTriggeredRedraw=this.setLastFocus(d),1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return a};g.meMarkChanged=function(a,c,d){m(c)&&c==d||(this.field(a).multiple_edit._changed=!0,this.meSetCheckbox(a,!0))};g.meSetCheckbox=function(a,c){"checkbox"==this.get("multiple_edit__"+a).type?this.get("multiple_edit__"+a).checked=c:this.get("multiple_edit__"+
a).value=c?1:""};g.meChange=function(a,c,d){var b=this.field(c);if(a)b.multiple_edit._changed=!0;else{if(!d&&w(b.multiple_edit.warn_when_abandoning_changes)&&m(b.multiple_edit.original_value)&&this.readField(c)!=b.multiple_edit.original_value){a=ea("type","button","class","submit_selected","value",W.abandonChanges,"onclick",this.globalName+'.meChange(false, "'+ca(c)+'", true);')+ea("type","button","class","submit","value",W.cancel);O._flBo(W.abandonChangesConfirm,a,"warning");this.meSetCheckbox(c,
!0);return}b.multiple_edit._changed=!1;delete b.current_value;d=b.value;m(b.multiple_edit.original_value)&&(d=b.current_value=b.multiple_edit.original_value);this.get(c)&&!b.pick_items?"checkbox"==this.get(c).type?this.get(c).checked=d?!0:!1:$(this.get(c)).val(d||""):(b=new z.callback,d=this.drawFields(b),this.insertHTML(d,b))}this.meSetCheckbox(c,a);this.validateFormatOrRedrawForField(c)};g.currentValue=function(a,c,d){return d||this.drawingFields||m(c)&&c!=this.tuix.tab?this.value(a,c,d):this.readField(a)};
g.originalValue=function(a,c){return this.value(a,c,!0)};g.value=function(a,c,d){c||(c=this.tuix.tab);var b="",e=this.field(a,c);if(!e)return"";m(d)||(d=this.fieldIsReadonly(a,e,c));e&&!e.snippet&&"grouping"!=e.type&&(this.isButton(e)?b=!!e.pressed:!d&&m(e.current_value)?b=e.current_value:m(e.value)?b=e.value:e.multiple_edit&&m(e.multiple_edit.original_value)&&(b=e.multiple_edit.original_value));return"0"===b?0:m(b)?b:""};g.fieldChanged=function(a,c){return this.currentValue(a,c)!=this.originalValue(a,
c)};g.mode=function(a){return this.value("mode","global_area")||this.value("mode")};g.scope=function(a){return this.value("scope","first_tab")||this.value("scope")};g.keyIn=function(a){return _.contains(arguments,this.tuix.key[a],1)};g.keyIs=function(a,c){return this.tuix.key[a]==c};g.key=function(a){return this.tuix.key[a]};g.getMode=function(){return _._isFu(this.mode)?this.mode():this.mode};g.modeIn=function(){return _.contains(arguments,this.getMode())};g.modeNotIn=function(){return!_.contains(arguments,
this.getMode())};g.modeIs=function(a){return this.getMode()==a};g.modeIsNot=function(a){return this.getMode()!=a};g.scopeIn=function(){return _.contains(arguments,this.scope())};g.scopeNotIn=function(){return!_.contains(arguments,this.scope())};g.scopeIs=function(a){return this.scope()==a};g.scopeIsNot=function(a){return this.scope()!=a};g.valueIn=function(a){return _.contains(arguments,this.value(a),1)};g.valueNotIn=function(a){return!_.contains(arguments,this.value(a),1)};g.valueInArray=function(a,
c){return _.contains(c,this.value(a))};g.valueIs=function(a,c){return this.value(a)==c};g.valueIsNot=function(a,c){return this.value(a)!=c};g.isButton=function(a){return a&&("submit"==a.type||"toggle"==a.type||"button"==a.type)};g.isFormField=function(a){return!(!a||a.snippet||"grouping"==a.type||"submit"==a.type||"toggle"==a.type||"button"==a.type)};g.getCodeEditorPosition=function(a){return{top:a.session.getScrollTop(),left:a.session.getScrollLeft(),range:a.getSelectionRange()}};g.setCodeEditorPosition=
function(a,c){c&&(a.session.setScrollTop(c.top),a.session.setScrollLeft(c.left),a.selection.setSelectionRange(c.range))};g.appendCodeEditorValue=function(a,c,d){a=ace.edit(a);var b=this.getCodeEditorPosition(a),e=a.getValue();if(d&&b.range){var f=e.s(/\r?\n\r?/g),k=b.range.start.column,l=b.range.start.row,q=b.range.end.column,t=b.range.end.row;e="";for(d=0;d<l;++d)e+=f[d]+"\n";e+=f[d].substr(0,k);e=e+c+f[t].substr(q);for(d=t+1;m(f[d]);++d)e+="\n"+f[d];b.range.start.column=b.range.end.column=k+c.length;
b.range.start.row=b.range.end.row=l}else e+=c;a.setValue(e);this.setCodeEditorPosition(a,b)};g.readField=function(a){var c=h,d=this.tuix.tab,b=this.field(a,d),e=b.type,f;if(!this.isFormField(b))return h;var k=this.fieldIsReadonly(a,b,d),l=b._was_hidden_before;b.multiple_edit&&k&&delete b.multiple_edit._changed;if("checkboxes"==e||"radios"==e){if(!k&&!l&&b.values){var q;l="";var t=!0;for(q in b.values)B(b.values,q)&&this.get(a+"___"+q)&&this.get(a+"___"+q).checked&&(l+=(t?"":",")+q,t=!1);b.current_value=
l}l=!0}if(l)return k||!m(b.current_value)?b.value:b.current_value;if(this.get("_value_for__"+a))b.current_value=c=this.get("_value_for__"+a).value;else if("editor"!=e&&"code_editor"!=e||k)if(!k&&(f=this.get(a))){if("currency"==e)c=$(f).data("og_value");else if("checkbox"==e||"radio"==e)c=f.checked?!0:!1;else if("color_picker"==e||"colour_picker"==e)try{c=$(f).spectrum("get").toHexString()}catch(A){c=$(f).val()}else c=$(f).val();m(c)||(c="");_._isAr(c)&&(c=c.join(","));b.current_value=c}else delete b.current_value,
c=b.value;else{var p;if("editor"==e){if(a=I.tinyMCE&&tinyMCE.get(a))var r=z._tMGC(a)}else"code_editor"==e&&(p=ace.edit(a))&&(r=p.getValue(),this.editingPositions[d+"/"+a]=this.getCodeEditorPosition(p));if(m(r)&&!1!==r)c=b.current_value=r;else return m(b.current_value)?b.current_value:b.value}return c};g.blankField=function(a){this.setFieldValue(a,"")};g.setFieldValue=function(a,c){field=this.field(a,this.tuix.tab);this.get(a)&&$(this.get(a)).val(c);this.get("_value_for__"+a)&&(this.get("_value_for__"+
a).value=c);field.current_value=c};g.readTab=function(){var a,c={},d=this.fields(),b;this.lastScrollTop=$("#zenario_fbAdminInner").scrollTop();for(b in d)B(d,b)&&m(a=this.readField(b))&&(c[b]=a);H&&H.activeElement&&(this.lastFocus=this.setLastFocus(H.activeElement));return c};g.wipeTab=function(){var a=this.fields(),c;for(c in a)if(B(a,c)){var d=a[c];delete d.current_value;d.multiple_edit&&delete d.multiple_edit._changed}};g.redrawTab=function(){this.tuix.shake=!1;this.draw2()};g.useSimpleEditor=
function(){return!0};g.getURL=function(a){++this.onKeyUpNum;return this.returnAJAXURL(a)};g.returnAJAXURL=function(a){return"..."};g.editModeOn=function(a){if(!this.tuix||!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=w(this.tuix.tabs[a].edit_mode.enabled)&&(w(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};g.editModeAlwaysOn=function(a){return!0};g.editCancelEnabled=function(a){return!1};g.revertEnabled=function(a){return!1};
g.savedAndContinued=function(a){return!1};g.editModeOnBox=function(){return!0};g.sortTabs=function(){this.sortedTabs=[];if(this.tuix.tabs)for(var a in this.tuix.tabs)if(B(this.tuix.tabs,a)){var c=this.tuix.tabs[a];c&&this.sortedTabs.push([a,c.ord])}this.sortedTabs.sort(L.sortArray);this.groupings={};this.sortedFields={};for(a in this.sortedTabs)B(this.sortedTabs,a)&&(c=this.sortedTabs[a]=this.sortedTabs[a][0],this.sortFields(c))};g.sortFields=function(a){var c,d,b={};this.groupings[a]={};this.sortedFields[a]=
[];if(d=this.fields(a)){for(c in d)if(B(d,c)){var e=d[c];e.type&&"grouping"==e.type&&(b[e.name||c]=1*e.ord,this.groupings[a][e.name||c]=c)}for(c in d)if(B(d,c)&&(e=d[c])&&(!e.type||"grouping"!=e.type)){var f=e.grouping?b[e.grouping]:h;this.sortedFields[a].push([c,e.ord,f])}this.sortedFields[a].sort(L.sortArrayWithGrouping);for(c in this.sortedFields[a])B(this.sortedFields[a],c)&&(this.sortedFields[a][c]=this.sortedFields[a][c][0])}};g.setData=function(a){this.tuix=a};g.setDataDiff=function(a){this.syncAdminBoxFromServerToClient(a,
this.tuix)};g.syncAdminBoxFromServerToClient=function(a,c){var d;for(d in a)if(B(a,d)){var b=a[d];!m(b)||b["[[__unset__]]"]?delete c[d]:m(c[d])?b["[[__replace__]]"]?(delete b["[[__replace__]]"],c[d]=b):"object"!=typeof c[d]?c[d]=b:"object"==typeof c[d]&&"object"!=typeof b?c[d]=b:this.syncAdminBoxFromServerToClient(b,c[d]):c[d]=b}};g.sendStateToServer=function(){return JSON.stringify(this.tuix)};g.sendStateToServerDiff=function(){var a={};this.syncAdminBoxFromClientToServerR(a,this.tuix);m(this.tuix.from_client)&&
_._isOb(this.tuix.from_client)&&(a.from_client={},this.syncAllTagsToServerR(a.from_client,this.tuix.from_client));return JSON.stringify(a)};g.syncAdminBoxFromClientToServerR=function(a,c,d,b,e,f,k,l){if("object"==typeof c){var q,t;for(t in c)if(!m(d)&&z.IN(t,"download","path","shake","tab","switchToTab")&&(q="value")||!m(d)&&z.IN(t,"_sync","tabs")&&(q="array")||!m(b)&&"_sync"==d&&z.IN(t,"cache_dir","password","session","iv")&&(q="value")||!m(b)&&"tabs"==d&&(q="array")||!m(e)&&"tabs"==b&&"_was_hidden_before"==
t&&(q="value")||!m(e)&&"tabs"==b&&z.IN(t,"edit_mode","fields")&&(q="array")||!m(f)&&"tabs"==e&&"edit_mode"==d&&"on"==t&&(q="value")||!m(f)&&"tabs"==e&&"fields"==d&&(q="array")||!m(k)&&"tabs"==f&&"fields"==b&&z.IN(t,"_display_value","_was_hidden_before","current_value","pressed")&&(q="value")||!m(k)&&"tabs"==f&&"fields"==b&&"multiple_edit"==t&&(q="array")||!m(l)&&"tabs"==k&&"fields"==e&&"multiple_edit"==d&&"_changed"==t&&(q="value"))if("value"==q){var p=c[t];switch(typeof p){case "function":case "object":break;
case "string":p=z._eIIFO(p);default:a[t]=p}}else"array"==q&&"object"==typeof c[t]&&(a[t]={},this.syncAdminBoxFromClientToServerR(a[t],c[t],t,d,b,e,f,k))}};g.syncAllTagsToServerR=function(a,c){var d;for(d in c){var b=c[d];switch(typeof b){case "function":break;case "object":a[d]={};this.syncAllTagsToServerR(a[d],c[d]);break;case "string":b=z._eIIFO(b);default:a[d]=b}}};g.getValueArrayofArrays=function(a){return z._nAA(this.getURL(),z._uR({_read_values:!0,_box:this.sendStateToServer()}),!a)};g.getValues1D=
function(a,c,d,b,e,f){var k,l,q={};if(this.tuix&&this.tuix.tabs)for(k in this.tuix.tabs)if(B(this.tuix.tabs,k)){var t=this.tuix.tabs[k];if(t.fields&&(!m(f)||-1!=L._tTA(f).indexOf(k)))for(l in t.fields)if(B(t.fields,l)){var p=t.fields[l];var r=l;!this.isFormField(p)||b&&this.fieldIsReadonly(l,p,k)||e&&(t._was_hidden_before||p._was_hidden_before)||a&&!(r=p.plugin_setting&&p.plugin_setting.name)||(p=this.currentValue(l,k,d),c||(q[r]=p),!c&&m(c))||(q[k+"/"+l]=p)}}return q};g.insertText=function(a,c){_._iS(a)&&
(a=this.get(a));if(a){var d=$(a),b=a.selectionStart,e=a.selectionEnd,f=d.val();d.val(f.substring(0,b)+c+f.substring(e));a.selectionStart=a.selectionEnd=b+c.length;a.focus()}};g.callFunctionOnEditors=function(a){var c,d;if(I.tinyMCE&&(c=this.fields()))for(d in c)if(B(c,d)){var b=c[d];if("editor"==b.type&&tinyMCE.get(d))if("remove"==a)tinyMCE.get(d).remove();else if("isDirty"==a&&tinyMCE.get(d).isDirty())return!0}return!1};g.format=function(a){var c=this,d;if(c.loaded&&(d=c.getURL("format"))){var b=
c.tuix&&c.tuix.tab;c.loaded=!1;c.hideTab();c.checkValues(a);c.retryAJAX(d,{_format:!0,_box:c.sendStateToServer()},!0,function(e){c.load(e);c.switchTabIfRequested(b);c.sortTabs();c.draw()},"loading")}};g.validate=function(a,c,d,b){var e=this,f;if(e.loaded&&(f=e.getURL("validate"))){e.differentTab=a;e.loaded=!1;e.hideTab(a);e.checkValues(d);var k=e.tuix&&e.tuix.tab;a&&(e.tuix.switchToTab=c);e.retryAJAX(f,{_validate:!0,_box:e.sendStateToServer()},!0,function(l){e.load(l)&&e.switchTabIfRequested(k);e.sortTabs();
e.switchToATabWithErrors();e.draw();b&&b()},"loading")}};g.switchTabIfRequested=function(a){this.tuix.switchToTab&&(a=a||this.tuix&&this.tuix.tab,this.errorOnTab(a)?this.tuix.tab=a:this.tuix.tab=this.tuix.switchToTab,delete this.tuix.switchToTab)}})},zenarioF);

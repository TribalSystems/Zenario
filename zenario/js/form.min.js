zenario.lib(function(f,aa,U,ba,Ia,Ja,m,F,z,ca,Ka,ga,da,h,n,Ea,D,P,L,La,Fa,x,Ga){z.lib(function(oa,ea,W,xa,pa,ka,qa){var e=Fa(Ga);e.init=function(a,c,d){this.globalName=a;this.mtPrefix=c;this.containerId=d;this.baseCSSClass="";this.onKeyUpNum=0;ca.sizing=!1;this.cachedAJAXSnippets={};this.changed={};this.toggleLevelsPressed={};this.fieldThatTriggeredRedraw=this.lastFocus=!1;this.editingPositions={}};e.enableInlineErrors=function(){return!0};e.get=function(a){var c;return this.containerId&&(c=$("#"+
this.containerId+" #"+m._cE(a)))&&c[0]||Ea(a)};e.tooltips=function(a,c){this.isAdminFacing()?F._to(a,c):m._t(a,c)};e.vaPhrase=function(a){return this.isAdminFacing()?F.phrase[a]:m.vphrase[a]};e.microTemplate=function(a,c,d,b,g){d=z._f(d);var q=m._aLP(c,this);a=m._mT(a,c,d,f,f,b,g);q&&m._tLP(c);return a};e.pMicroTemplate=function(a,c,d){return this.microTemplate(this.mtPrefix+"_"+a,c,d,this.tuix&&this.tuix.pre_microtemplate&&this.tuix.pre_microtemplate[a],this.tuix&&this.tuix.post_microtemplate&&this.tuix.post_microtemplate[a])};
e.fun=function(a){return this.globalName+"."+a};e.onThisRow=function(a,c){return a+c.r(/(.*_|\D)/g,"")};e.valueOnThisRow=function(a,c){return this.value(this.onThisRow(a,c))};e.fieldOnThisRow=function(a,c){return this.field(this.onThisRow(a,c))};e.getKey=function(a){return this.tuix&&this.tuix.key};e.getKeyId=function(a){return this.tuix&&this.tuix.key&&this.tuix.key.id};e.getLastKeyId=function(a){return this.getKeyId(a)};e.getTitle=function(){var a,c;return this.tuix.key&&this.tuix.key.id&&(a=this.tuix.title_for_existing_records)?
(c=_._ex(this.getValues1D(!1,f,!0),this.tuix.key),m._aMF(a,c)):this.tuix.title};e.field=function(a,c){var d;return _._isOb(a)?a:(d=this.tuix&&this.tuix.tabs)&&(c=c||this.tuix.tab)&&d[c]&&d[c].fields&&d[c].fields[a]};e.fields=function(a){var c;return(c=this.tuix&&this.tuix.tabs)&&(a=a||this.tuix.tab)&&c[a]&&c[a].fields};e.initFields=function(){var a=this.tuix.tab,c,d,b,g,q,e=this.tuix.lovs||{};if(this.tuix.tabs)for(c in this.tuix.tabs)if(x(this.tuix.tabs,c)&&(b=this.fields(c))){q=!1;for(d in b)x(b,
d)&&(g=b[d])&&(g.pick_items&&g.plugin_setting&&g.plugin_setting.use_value_for_plugin_name?this.pickedItemsArray(g,this.value(d,c,!1)):g.values&&_._iS(g.values)&&e[g.values]?g.values=e[g.values]:g.load_values_from_organizer_path&&!g.values&&this.loadValuesFromOrganizerPath(g),g.validation&&h(g.validation.required_if_not_hidden)&&(q=!0));q&&c!=a&&(this.tuix.tab=c,this.drawFields(f,f,!0),this.tuix.tab=a)}};e.loadValuesFromOrganizerPath=function(a){var c,d,b;if(a.load_values_from_organizer_path&&!a.values&&
(a.values={},(d=F._gIFO(a.load_values_from_organizer_path))&&d.items))for(c in d.items)x(d.items,c)&&(b=d.items[c],a.values[m._dIIFO(c)]={image:b.image,css_class:b.css_class||d.item&&d.item.css_class,label:F._fOIN(d,c)})};e.changeMode=function(){this.editCancelEnabled(this.tuix.tab)&&(this.editModeOn()?this.editCancelOrRevert("cancel",this.tuix.tab):this.editCancelOrRevert("edit",this.tuix.tab))};e.revertTab=function(){this.changes(this.tuix.tab)&&this.revertEnabled(this.tuix.tab)&&this.editCancelOrRevert("revert",
this.tuix.tab)};e.editCancelOrRevert=function(a,c){if(this.tuix.tabs[c].edit_mode){var d,b,g,q,e,w;"edit"==a?(e=n(this.tuix.tabs[c].edit_mode.format_on_edit),w=n(this.tuix.tabs[c].edit_mode.validate_on_edit)):"cancel"==a?(e=n(this.tuix.tabs[c].edit_mode.format_on_cancel_edit),w=n(this.tuix.tabs[c].edit_mode.validate_on_cancel_edit)):"revert"==a&&(e=n(this.tuix.tabs[c].edit_mode.format_on_revert),w=this.errorOnTab(c)||n(this.tuix.tabs[c].edit_mode.validate_on_revert));if(!w&&(b=this.fields(c)))for(g in b)if(x(b,
g))if(q=b[g],n(q.validate_onchange)&&h(d=this.readField(g))&&d!=q.value){w=!0;break}else!e&&n(q.format_onchange)&&h(d=this.readField(g))&&d!=q.value&&(e=!0);this.tuix.tabs[c].edit_mode.on="cancel"!=a;this.changed[c]=!1;w?this.validate(f,f,!0):e?this.format(!0):(this.wipeTab(),this.redrawTab(!0));this.tuix.tab==c&&$("#zenario_abtab").removeClass("zenario_abtab_changed")}};e.clickTab=function(a){this.loaded&&this.validate(a!=this.tuix.tab,a)};e.turnToggleOn=function(a){this.clickButton(a,!0)};e.turnToggleOff=
function(a){this.clickButton(a,!1)};e.clickButton=function(a,c){var d;if(d=this.field(a))if("submit"==d.type)d.pressed=!0,this.validate(!0);else if("toggle"==d.type){var b=$(this.get(a)),g=$(this.get("row__"+a)),q=!!n(d.pressed);if(c===f||c!=q)(d.pressed=!n(d.pressed))?(b.removeClass("not_pressed").addClass("pressed"),g.addClass("zfea_row_pressed")):(b.removeClass("pressed").addClass("not_pressed"),g.removeClass("zfea_row_pressed")),this.markAsChanged(),this.validateFormatOrRedrawForField(d,!0)}else"button"==
d.type&&(d.pressed=!0,this.validateFormatOrRedrawForField(d))};e.togglePressed=function(a,c){var d;d=c?1<c?this.toggleLevelsPressed[c-1]:!0:this.toggleLevelsPressed.last;h(d)||(d=!0);a&&"toggle"==a.type&&(this.toggleLevelsPressed.last=d&&n(a.pressed),c&&(this.toggleLevelsPressed[c]=this.toggleLevelsPressed.last));return d};e.retryAJAX=function(a,c,d,b,g,q){var e=function(){m._a(a,c,d,f,e,!0,f,f,f,f,q).after(b);g&&F.nowDoingSomething&&F._nDS(g)};e()};e.switchToATabWithErrors=function(){var a,c,d=this.tuix;
if(d&&d.tabs&&!this.errorOnTab(d.tab))for(a in this.sortedTabs)if(x(this.sortedTabs,a)&&(c=this.sortedTabs[a],d.tabs[c]&&!this.checkTabHidden(c)&&this.errorOnTab(c)))return d.tab=c,!0;return!1};e.checkTabHidden=function(a){return z._h(f,this,f,a,f,f,f,f,this.tuix.tabs[a])};e.applyMergeFields=function(a,c,d,b){return a};e.applyMergeFieldsToLabel=function(a,c,d,b){return a};e.hideTab=function(a){var c=this;a?($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled",
"disabled"),$("#zenario_abtab").clearQueue().show().animate({opacity:0.8},200,function(){c.tabHidden=!0;c.draw()})):($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled","disabled").animate({opacity:0.9},100),c.tabHidden=!0,c.draw())};e.draw=function(){this.loaded&&this.tabHidden&&this.draw2()};e.draw2=function(){};e.size=function(){};e.makeFieldAsTallAsPossible=function(){};e.getNextTab=function(){h(this.prevTab)||h(this.nextTab)||this.drawTabs(" ");
return this.nextTab};e.getPrevTab=function(){h(this.prevTab)||h(this.nextTab)||this.drawTabs(" ");return this.prevTab};e.goToNextTab=function(){var a=this.getNextTab();if(h(a))return ca._cT(a),!0};e.goToPrevTab=function(){var a=this.getPrevTab();if(h(a))return ca._cT(a),!0};e.drawTabs=function(a){a||(a=this.mtPrefix+"_tab");var c,d,b=[],g,q,e,w,h,t,k=function(a,b,c){for(b in a)if(x(a,b)){c=a[b];if(c.onclick){q&&(t=c.id);if(q=c.current)h=g;g=c.id}c.children&&k(c.children)}};for(e in this.sortedTabs)if(x(this.sortedTabs,
e)&&(w=this.sortedTabs[e],(c=this.tuix.tabs[w])&&!(c._was_hidden_before=z._h(f,this,f,w,f,f,f,f,c)))){d="";if(c.fields&&!_._isEm(c.fields)||c.fields&&!_._isEm(c.errors)||c.fields&&!_._isEm(c.notices))d=this.globalName+".clickTab('"+P(w)+"');";!this.tuix.tab&&d&&(this.tuix.tab=w);b.push({id:w,tabId:w,tuix:c,onclick:d,current:this.tuix.tab==w,label:c.label})}z._sBK(b,"zenario_fab_tab_with_children");k(b);this.prevTab=h;this.nextTab=t;return this.microTemplate(a,b)};e.drawFields=function(a,c,d){var b,
g,q,e=this.tuix.tab,w=this.tuix.tabs[e],u=this.groupings[e],t=this.sortedFields[e],k,r="",E=!1,m,J=this.fields(e),p={},y={},D={},B=!1,F,C,H=!1,P={},A={fields:{},rows:[],tabId:e,path:this.path,tuix:this.tuix,revert:"",errors:[],notices:{}};this.drawingFields=!0;if(!d){this.ffoving=0;this.splitValues={};this.tallAsPossibleField=f;this.errorOnForm=!1;this.disableDragDropUpload();!this.savedAndContinued(e)&&this.editCancelEnabled(e)&&(A.revert=ea("class","zenario_editCancelButton",z._i("class","submit",
"type","button","onclick",this.globalName+".changeMode(); return false;","value",this.editModeOn()?L.cancel:L.edit)));if(this.editModeOn()){if(w.errors)for(m in w.errors)x(w.errors,m)&&(q=w.errors[m],this.errorOnForm=!0,A.errors.push({message:q}));if(J)for(m in J)if(x(J,m)&&(q=J[m],q.error))if(this.errorOnForm=!0,this.enableInlineErrors()&&(k=this.tuix.error_on_form_message||L.errorOnForm)){A.errors.push({message:k});break}else A.errors.push({message:q.error})}if(w.notices)for(m in w.notices)x(w.notices,
m)&&(q=w.notices[m],n(q.show)&&!z._h(q,this,f,m)&&{error:1,warning:1,question:1,information:1,success:1}[q.type]&&(A.notices[m]=q));this.setPhiVariables()}for(b in t)x(t,b)&&(g=t[b],q=J[g],m=!1,k=q.grouping,F!==k&&(F=k,H=h(u[k])&&J[u[k]],E=k&&(!H||z._h(f,this,f,u[k],f,f,H))),C!==k&&(m=!0),q._id=g,q._html=this.drawField(a,e,g,q,p,y,D,d,E),d||E||!1===q._html||((m||q._startNewRow||!A.rows.length)&&A.rows.push({fields:[],grouping:H}),m&&H&&(H.legend||H.snippet)&&(H=_._ex({grouping:k},H),H._id=k,H._html=
this.drawField(a,e,k,H),H._hideOnOpen=!0,H._showOnOpen=!0,H._lastVisibleGrouping=C,C=k,A.rows[A.rows.length-1].fields.push(H),A.fields[k]=H,P[k]=H,A.rows.push({fields:[]})),B||w.show_errors_after_field!=g||(A.rows[A.rows.length-1].errors=A.errors,A.rows[A.rows.length-1].notices=A.notices,B=!0),q._lastVisibleGrouping=C,C=k,A.rows[A.rows.length-1].fields.push(q),A.fields[g]=q));for(g in A.fields)x(A.fields,g)&&(q=A.fields[g],k=q.grouping)&&(H=P[k])&&(H._hideOnOpen&=q._hideOnOpen,H._showOnOpen&=q._showOnOpen);
d||(A.rows.length&&(A.rows[A.rows.length-1].fields[0]._isLastRow=!0),B||A.rows.splice(0,0,{errors:A.errors,notices:A.notices}),c=c||w.template||this.mtPrefix+"_current_tab",r+=this.microTemplate(c,A));this.drawingFields=!1;for(b in t)x(t,b)&&(g=t[b],delete J[g]._lastVisibleGrouping,delete J[g]._startNewRow,delete J[g]._hideOnOpen,delete J[g]._showOnOpen,delete J[g]._isLastRow,delete J[g]._html,delete J[g]._id);return r};e.drawTUIX=function(a,c,d){this.tuix={tab:"details",tabs:{details:{template:c,
edit_mode:{on:!0,enabled:!0,always_on:!0},fields:a}}};this.sortTabs();return this.drawFields(d)};e.insertHTML=function(a,c,d){var b=this.get("zenario_abtab"),g=this.lastFocus||this.fieldThatTriggeredRedraw,q;b.innerHTML=a;this.tabHidden=!1;this.changes(this.tuix.tab)?$(b).addClass("zenario_abtab_changed"):$(b).removeClass("zenario_abtab_changed");c.done();(q=!d&&g&&this.field(g.id))&&this.focusField(q,g.ss,g.se);this.fieldThatTriggeredRedraw=!1};e.hideShowFields=function(a){var c=$(".zenario_hide_on_open"),
d=$(".zenario_hide_row_on_open"),b=$(".zenario_show_on_open"),g=function(a,b){b.style.display="none"};b.length&&!c.length?b.show("blind",200,a):!b.length&&c.length?c.hide("blind",200,function(){d.each(g)}):b.length&&c.length&&(c.each(g),d.each(g),b.show())};e.isAdminFacing=function(){return!0};e.addJQueryElements=function(a){var c=this;m._aJQE(a+" ",c.isAdminFacing());$(a+" select.iconselectmenu").css("visibility","hidden").each(function(a,b){var g=$(b);g.attr("id");g.iconselectmenu({width:"auto",
open:function(a){a=$("body > .ui-selectmenu-menu.ui-selectmenu-open");var b=a.height()/2,d=a.find(".ui-state-active");(d=d.length&&(d.position().top||d.parent().position().top))&&d>b?a.scrollTop(d-b):a.scrollTop(0);a.addClass("iconselectmenu__"+g.attr("id")).addClass("iconselectmenu__in__"+c.path)},change:function(){$(this).change()}})})};e.fieldIsReadonly=function(a,c,d){return c.show_as_a_label||c.show_as_a_span||n(c.read_only)||n(c.readonly)||h(d)&&!this.editModeOn(d)||h(c.readonly_if)&&z._e(c.readonly_if,
this,c,f,a,f,f,c)};e.focusFirstField=function(){var a=this;if(a.tuix&&!n(a.tuix.tabs[a.tuix.tab].disable_autofocus)){var c=-1,d=[],b=f,g,q,e,h,u;for(g in a.sortedFields[a.tuix.tab])if(x(a.sortedFields[a.tuix.tab],g)&&(h=a.sortedFields[a.tuix.tab][g],(q=a.get(h))&&(e=a.field(h))&&((u=e.pick_items||e.upload)||$(q).is(":visible"))&&(d[++c]={id:h,type:e.type,empty:""==q.value,focusable:(u||m.IN(e.type,"password","checkbox","currency","select","text","textarea"))&&!n(q.disabled)&&!n(q.readonly)&&!a.fieldIsReadonly(h,
e)},1<c)))break;if(d[0]&&!d[0].empty&&d[1]&&d[1].focusable&&d[1].empty&&"password"==d[1].type)b=1;else if(d[0]&&d[0].focusable)b=0;else if(d[1]&&d[1].focusable)b=1;else return;setTimeout(function(){a.focusField(d[b])},50)}};e.focusField=function(a,c,d){if(a.type){if("date"==a.type||"datetime"==a.type)return;a=this.get(a.id)}else a=this.$getPickItemsInput(a.id);if(a&&(a.focus(),h(c)))try{a.selectionStart=c,a.selectionEnd=d}catch(b){}};e.$getPickItemsInput=function(a){return $(this.get("name_for_"+
a)).find(".TokenSearch input")};e.setPhiVariables=function(){m.phiVariables=f};e.errorOnBox=function(){if(this.tuix&&this.tuix.tabs)for(tab in this.tuix.tabs)if(x(this.tuix.tabs,tab)&&this.errorOnTab(tab))return!0;return!1};e.errorOnTab=function(a){var c;if(this.tuix.tabs[a]&&this.editModeOn(a)){if(this.tuix.tabs[a].errors)for(c in this.tuix.tabs[a].errors)if(x(this.tuix.tabs[a].errors,c))return!0;if(a=this.fields(a))for(c in a)if(x(a,c)&&a[c].error)return!0}};e.checkValues=function(a){a?this.wipeTab():
this.readTab();for(var c in this.tuix.tabs)if(x(this.tuix.tabs,c)){a=this.tuix.tabs[c];var d=this.editModeOn(c);if(a.fields)for(var b in a.fields)if(x(a.fields,b)){var g=a.fields[b];this.isFormField(g)&&("code_editor"==g.type&&m._cAD("code_editor_"+b),h(g.current_value)||(g.current_value=this.value(b,c,!0)),d&&(h(g.value)||(g.value=this.value(b,c,!1)),g.multiple_edit&&!h(g.multiple_edit._changed)&&h(g.multiple_edit.changed)&&(g.multiple_edit._changed=g.multiple_edit.changed)))}}U&&U.activeElement&&
(this.lastFocus=this.setLastFocus(U.activeElement))};e.setLastFocus=function(a){var c;"object"===typeof a?(c=a,a=c.id):c=this.get(a);a={id:a};if(c)try{a.ss=c.selectionStart,a.se=c.selectionEnd}catch(d){a.ss=a.se=f}return a};e.enableMicroTemplates=function(a,c){var d=this,b;for(b in c)if(x(c,b))switch(typeof c[b]){case "object":"lib"!==b&&"thus"!==b&&"tuix"!==b&&d.enableMicroTemplates(a,c[b]);break;case "string":"type"===b||"value"===b&&d.isFormField(c)||"current_value"===b||!c[b].m(/(\{\{|\{\%|\<\%)/)||
function(a,b,c){c=m._gMT("<% "+d.defineLibVarBeforeCode()+" %>"+a[b],f);a[b]=function(){return c(a)}}(c,b)}};e.displayAsTag=function(a,c){return a.show_as_a_label||c&&a.show_as_a_label_when_readonly?"label":a.show_as_a_span||c&&a.show_as_a_span_when_readonly?"span":!1};e.drawField=function(a,c,d,b,g,q,e,w,u,t,k,r,E,Q,J){var p=this;h(b)||(b=p.field(d,c));h(b.id)||(b.id=d);n(b.enable_microtemplates_in_properties)&&p.enableMicroTemplates(b,b);var y=b.type,G=b.upload,B=b.pick_items,ra=b.disabled,C=b.validation||
{},H="currency"==y,U="date"==y||"datetime"==y,A=H||!!C.numeric,X=b.decimal_places,V,ca,K,R,S,l="",M,da,O,N={},ha="multiselect"==y,la=!1,v={"class":""},Y={},ia={},sa=!1,Z=!1,ta,fa=!1,ga=!1,ya=!1,za=!1,Aa=!1,Ba=!1,ua=!1,va=!1,ma,na,ja=p.tuix.tabs[c];h(r)||(r=p.fieldIsReadonly(d,b,c));B&&ra&&(r=!0);y&&"datetime"==y&&(r=!0);J?h(J.disabled_if)&&z._e(J.disabled_if,p,J,f,t,f,f,b)&&(r=!0):h(b.disabled_if)&&z._e(b.disabled_if,p,f,f,d,f,f,b)&&(r=!0);A&&(X=h(X)?1*X:H?2:f);!b["class"]&&b.css_class&&(b["class"]=
b.css_class);b.snippet||h(k)||(k=p.value(d,c));h(k)||(k="");if(!h(t)){delete b.selected_option;if(k&&b.values)if(K=_._isOb(b.values)?b.values[k]:p.tuix.lovs&&p.tuix.lovs[b.values]&&p.tuix.lovs[b.values][k],_._isOb(K)&&z._h(K,p,f,k,f,f,b,f,ja)&&(K=!1),K)b.selected_option=K;else if("radio"==y||"select"==y)b.current_value=k="";(G||B||ha)&&""!=k&&(N=p.pickedItemsArray(b,k));b.values&&_._iS(b.values)&&p.tuix.lovs&&p.tuix.lovs[b.values]?b.values=p.tuix.lovs[b.values]:b.load_values_from_organizer_path&&
!b.values&&p.loadValuesFromOrganizerPath(b);for(R in b)x(b,R)&&"<"==R[0]&&(ta=R.m(/^<(\/?)(\w+)/))&&(b[R]&&_._iS(b[R])&&(R+=b[R]),M={table:1,tr:2,td:3,th:4,br:5,div:6,p:7,span:8}[ta[2]]||9,5>M&&(Ba=!0),ta[1]?(va||(va=!0,na="        ".split(" ")),na[9-M]+=R):(ua||(ua=!0,ma="        ".split(" ")),ma[M-1]+=R,1==M&&(Aa=!0),5==M&&(za=!0)))}w||"button"!=y&&"submit"!=y||(b.pressed=!1);if(w||!h(t)){R=h(b.same_row)?!n(b.same_row):!za&&(Aa||!Ba);b._startNewRow=R;K=1*b.indent||0;V=u||z._h(f,p,f,d,f,f,b)||b.hide_if_empty&&
!k||r&&b.hide_when_readonly||n(q&&q.last?b.hide_with_previous_field:b.hide_if_previous_field_is_not_hidden)||n(q&&q.beforeLast?b.hide_with_previous_previous_field:b.hide_if_previous_previous_field_is_not_hidden)||n(b.hide_with_previous_indented_field)&&q&&q[K]||n(b.hide_with_previous_outdented_field)&&0<K&&q&&q[K-1]||n(b.hide_with_previous_indented_fields)&&!g[K]||h(b.hide_if_previous_value_is)&&m._iL(b.hide_if_previous_value_isnt,e&&e.last)||h(b.hide_if_previous_value_isnt)&&!m._iL(b.hide_if_previous_value_isnt,
e&&e.last)||h(b.hide_if_previous_outdented_value_is)&&0<K&&m._iL(b.hide_if_previous_outdented_value_is,e&&e[K-1])||h(b.hide_if_previous_outdented_value_isnt)&&0<K&&!m._iL(b.hide_if_previous_outdented_value_isnt,e&&e[K-1]);e&&(e.last=k,R&&(e[K]=k));q&&(q.beforeLast=q.last,q.last=V,R&&(q[K]=V),h(g.last)&&g.last===K||(g.last<K&&(g[K]=!1),g.last=K),V||(g[K]=!0));b._startNewRow&&!1!==p.shownTab&&p.shownTab==p.tuix.tab&&"editor"!=y&&"code_editor"!=y&&b._was_hidden_before&&!V?b._showOnOpen=!0:b._startNewRow&&
!1!==p.shownTab&&p.shownTab==p.tuix.tab&&"editor"!=y&&"code_editor"!=y&&!b._was_hidden_before&&V&&(b._hideOnOpen=ca=!0,b._was_hidden_before=!0);if(V){if(b._was_hidden_before=!0,!ca)return!1}else delete b._was_hidden_before;if(w)return;V||!b.tall_as_possible||h(p.tallAsPossibleField)||(p.tallAsPossibleField=d,p.tallAsPossibleFieldType=b.type);b.multiple_edit&&(g="",q=!r&&h(b.multiple_edit._changed)?n(b.multiple_edit._changed):b.multiple_edit.changed,n(b.multiple_edit.hide_ui)||!b.multiple_edit.select_list?
(e=n(b.multiple_edit.hide_ui),g+=W("type","checkbox","class","multiple_edit","id","multiple_edit__"+d,"checked",q,"style",e?"display: none;":"","disabled",r,"onchange",r||e?"":p.globalName+".meChange(this.checked, '"+D(d)+"');",">")):g+=xa("class","multiple_edit","id","multiple_edit__"+d,"disabled",r,"onchange",p.globalName+'.meChange(this.value == 1, "'+P(d)+'");',pa("value","","selected",!q,b.multiple_edit.select_list.not_changed_label||L.notChanged)+pa("value",1,"selected",q,b.multiple_edit.select_list.changed_label||
L.changed)),l+=g,g=f)}if(!(E&&Q||"object"!=typeof b.values))if(E=[],Q={},G&&n(G.reorder_items)||B&&n(B.reorder_items))for(M in g=k.s(","),g)x(g,M)&&(O=g[M],E.push(O));else{for(O in b.values)x(b.values,O)&&(g=b.values[O],"object"==typeof g?(h(g.parent)&&(Z=!0,Q[g.parent]=!0),z._h(g,p,f,O,f,f,b,f,ja)||b.values_visible_if&&!z._e(b.values_visible_if,p,g,f,O,f,f,b,f,ja)||(h(g.ord)?E.push([O,g.ord]):h(g.label)?E.push([O,g.label]):E.push([O,O]))):E.push([O,g]));E.sort(z.sortArray);for(M in E)x(E,M)&&(E[M]=
E[M][0])}if(r)v.readonly=!0,p.isButton(b)&&(v.disabled=!0,v["class"]+="disabled ");else if(b.error&&(v["class"]+="zenario_field_with_error "),C.required||C.required_if_not_hidden)v["class"]+="zenario_required_field ";if("checkboxes"!=y&&(S=p.displayAsTag(b,r))){E=A?D(z._nF(1*k,X)):D(k);if("select"==y||"radios"==y)b.values&&b.values[k]?E=D(b.values[k]):b.empty_value&&(E=D(b.empty_value));l+=oa(S,"id",S+"__"+d,"class",b.css_class,E)}else if(C=b.snippet){for(da in Ca)S=Ca[da],C[S]&&(l+=oa(S,"id",S+"__"+
d,"class",C[S+"_class"],"style",C[S+"_style"],D(C[S])));!V&&C.show_split_values_from&&p.splitValues&&p.splitValues[C.show_split_values_from]&&(l+=p.splitValues[C.show_split_values_from],delete p.splitValues[C.show_split_values_from]);C.html&&(l+=ka("id","snippet__"+d,m._un(C.html)));C.microtemplate&&(l+=ea("id","microtemplate__"+d,p.microTemplate(C.microtemplate,b)));C.url&&(l=n(C.cache)?p.cachedAJAXSnippets[C.url]?l+p.cachedAJAXSnippets[C.url]:l+(p.cachedAJAXSnippets[C.url]=m._nAA(m._aBP(C.url))):
l+m._nAA(m._aBP(C.url)))}else if(("checkboxes"==y||"radios"==y)&&!h(t))r&&b.display_as_text_when_readonly?l+=D(p.displaySelectedItems(d,b,k,c)):b.values&&(Z=_._ex({},b),N=p.pickedItemsArray(b,k),Z.name=b.name||d,Z.type="checkboxes"==y?"checkbox":"radio",r&&(Z.disabled=!0),l=_._isEm(E)?l+qa("class","zenario_no_values_message",D(b.no_values_message)):l+p.hierarchicalBoxes(a,c,d,k,b,Z,r,N,E,Q)),l+=p.displayMissingItems(b);else if(G||B||ha){var Da=ha||B&&n(B.multiple_select)||G&&n(G.multi);k={id:d,pickerHTML:"",
wrappedId:"name_for_"+d,readOnly:r};r||(B&&(B.target_path||B.path)&&!n(B.hide_select_button)&&(k.select={onclick:p.globalName+".pickItems('"+D(d)+"');",phrase:B.select_phrase||L.selectDotDotDot}),G&&(k.upload={onclick:p.globalName+".upload('"+D(d)+"');",phrase:G.upload_phrase||L.uploadDotDotDot},n(G.drag_and_drop)&&p.upload(d,!0),ba.Dropbox&&Dropbox.isBrowserSupported()&&(k.dropbox={onclick:p.globalName+".chooseFromDropbox('"+D(d)+"');",phrase:G.dropbox_phrase||L.dropboxDotDotDot})));k.pickerHTML+=
xa("id",d,"multiple",Da,"class",b.css_class,"style",b.style,">");!b.values||_._isEm(N)&&!ha||(k.pickerHTML+=p.hierarchicalSelect(N,b,ja,E,Z,Q));k.pickerHTML+="</select>";l+=p.microTemplate(p.mtPrefix+"_picked_items",k);a.after(function(){ha?p.setupMultipleSelect(b,d,c,r||ra):p.setupPickedItems(b,d,c,r,Da)})}else if(b.captcha)l+=W("type","hidden","style","display: none","id",d,"value",k),k||(l+=ka("style","display: inline-block","id","captcha__"+d),a.after(function(){grecaptcha.render("captcha__"+
d,_._ex({sitekey:google_recaptcha.sitekey,callback:function(a){p.get(d).value=a}},b.captcha))}));else if(y){Y.onchange=t?"lib.fieldChange('"+D(d)+"', '"+D(t)+"');":"lib.fieldChange('"+D(d)+"');";ra&&(v["class"]+="disabled ");A&&(v.onkeyup=(v.onkeyup||"")+"lib.keepNumeric(this, "+!!b.allow_negative_numbers+", "+X+")");b.return_key_presses_button&&!r&&(v.onkeyup=(v.onkeyup||"")+"if (event.keyCode == 13) {zenario._st(event);$('#"+D(b.return_key_presses_button)+"').click();return false;}");n(b.multiple_edit)&&
!r&&(v.onkeyup=(v.onkeyup||"")+"if (event && event.keyCode == 9) return true; lib.meMarkChanged('"+D(d)+"', this.value, '"+D(b.value)+"');");v["class"]+="input_"+y;switch(y){case "select":b.slider&&(la=!0,l+=p.drawSlider(a,d,b,r,!0));r&&(v.disabled=!0);l+="<select";break;case "code_editor":l+="<div";v["class"]=" zenario_embedded_ace_editor";a.after(function(){var a=ace.edit(d),g=!1;a.session.setUseSoftTabs(!1);a.setShowPrintMargin(!1);r&&(a.setReadOnly(!0),a.setBehavioursEnabled(!1));n(b.wrap_text)&&
a.session.setUseWrapMode(!0);a.session.setOption("useWorker",!1);a.on("blur",function(a){g&&m._aADINS("code_editor_"+d,function(){p.fieldChange(d)},0);g=!1});a.on("change",function(a){p.markAsChanged();g=!0;m._aADINS("code_editor_"+d,function(){p.fieldChange(d)},5E3)});var e,q,k,l;if(e=b.language)try{k="html"==e,e=e.m(/\.twig\.html$/i)?"ace/mode/twig":e.m(/\./)?ace.require("ace/ext/modelist").getModeForPath(e).mode:"ace/mode/"+e,q=ace.require("ace/ext/language_tools"),a.session.setMode(e),l=b.code_editor_options||
{},h(l.enableBasicAutocompletion)||(l.enableBasicAutocompletion=!k),h(l.enableLiveAutocompletion)||(l.enableLiveAutocompletion=!k),k?q.setCompleters([]):q.setCompleters([q.keyWordCompleter]),a.setOptions(l)}catch(f){console.log("Ace editor could not load this language",e)}a.$blockScrolling=Infinity;p.setCodeEditorPosition(a,p.editingPositions[c+"/"+d])});break;case "color_picker":case "colour_picker":l+="<input";v["class"]=" zenario_color_picker";a.after(function(){var a=b.color_picker_options||b.colour_picker_options||
{};a.disabled=r;a.preferredFormat=a.preferredFormat||"hex";a.showInput=!0;$(p.get(d)).spectrum(a)});break;case "editor":var l=l+"<textarea",N="<textarea "+p.outputAtts(b)+"></textarea>",N=$(N).height(),G=Math.max(Math.floor(0.5*$(ba).height()),300),B=function(a){p.fieldChange(a.id)},T;p.useSimpleEditor()?T={script_url:aa+m.tinyMCEPath,plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code fullscreen","nonbreaking table contextmenu directionality","paste autoresize"],browser_spellcheck:!0,
height:250,menubar:!1,toolbar:"undo redo | formatselect | link unlink | bold italic | removeformat | alignleft aligncenter alignright alignjustify | outdent indent"}:(F._gSD(),N=_._ex({},{script_url:aa+m.tinyMCEPath,inline:!1,menubar:!1,statusbar:!1,plugins:"autoresize",document_base_url:f,convert_urls:!1,readonly:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,min_height:N,max_height:G,autoresize_min_height:N,autoresize_max_height:G,autoresize_bottom_margin:10,onchange_callback:B,init_instance_callback:function(a){F._eDDUITM(!1,
f,p.get("row__"+(a.editorId||a.id)));var b;(b=a.editorContainer)&&(b=$("#"+a.editorContainer.id+" iframe"))&&(b=b[0])&&(b=b.contentWindow)&&F._eDDUITM(!1,f,b)}},{plugins:["advlist autolink lists link image charmap hr anchor","searchreplace code fullscreen","nonbreaking table contextmenu directionality","paste autoresize","colorpicker textcolor fullscreen"],image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,paste_preprocess:F.tinyMCEPasteRreprocess,readonly:!1,convert_urls:!0,relative_urls:!1,
content_css:f,toolbar:"undo redo | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen",style_formats:F.skinDesc.style_formats,oninit:f}),G=_._ex({},N,{toolbar:"undo redo | image link unlink | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen",file_browser_callback:F.fileBrowser,
init_instance_callback:function(a){F._eDDUITM(!0,aa,p.get("row__"+(a.editorId||a.id)));var b;(b=a.editorContainer)&&(b=$("#"+a.editorContainer.id+" iframe"))&&(b=b[0])&&(b=b.contentWindow)&&F._eDDUITM(!0,aa,b)}}),B=_._ex({},G,{toolbar:"undo redo | image | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen"}),S=_._ex({},B,{toolbar:"undo redo | link unlink | bold italic underline strikethrough forecolor backcolor | removeformat | fontsizeselect | formatselect | numlist bullist | blockquote outdent indent | code fullscreen"}),
r?(T=N,T.readonly=!0,v["class"]=" tinymce_readonly"):b.insert_image_button?b.insert_link_button?(T=G,v["class"]=" tinymce_with_images_and_links"):(T=B,v["class"]=" tinymce_with_images"):b.insert_link_button?(T=S,v["class"]=" tinymce_with_links"):(T=N,v["class"]=" tinymce"),v.style="visibility: hidden;");_._isOb(b.editor_options)&&(T=_._ex(T,b.editor_options));T.setup=function(a){a.on("change",function(a){p.fieldChange(a.id)})};a.after(function(){var a=$(p.get(d)),b=p.get("zenario_abtab"),c;try{a.tinymce().remove()}catch(g){}b&&
(c=b.style.display,b.style.display="block");a.tinymce(T);b&&(b.style.display=c)});break;case "button":case "submit":case "toggle":ga=!0;n(b.use_button_tag)?(l+="<button",ya=!0):(l+="<input",v.type="button");if(!r||n(b.can_be_pressed_in_view_mode))Y.onclick="lib.clickButton('"+d+"');",delete v.disabled;"toggle"==y&&(v["class"]+=b.pressed?" pressed":" not_pressed");break;default:"textarea"==y?l+="<textarea":U?(fa=!0,l+="<input",v.type="text",v["class"]+=" zenario_datepicker",v.readonly="readonly",r||
(v.onkeyup=(v.onkeyup||"")+"zenario._dFKU(this, event, '"+D(d)+"');"),a.after(function(){var a=$(p.get(d)),c=!!n(b.change_month_and_year);a.datepicker({changeMonth:c,changeYear:c,dateFormat:F.siteSettings&&F.siteSettings.organizer_date_format||m.dpf,altField:p.get("_value_for__"+d),altFormat:"yy-mm-dd",showOn:"focus",disabled:r,onSelect:function(b,c){a.change()}})})):"url"==y?(l+="<input",v.type="url",v.placeholder="http://example.com",v.onblur=(v.onblur||"")+"if(this.value && !this.value.m('://') && $.trim(this.value)[0] != '#') this.value = 'http://' + this.value;"):
H?(l+="<input",v.type="text",v.onfocus="this.value = $(this).data('og_value');"+(v.onfocus||""),v.onblur="$(this).data('og_value', this.value); this.value = zenarioT._nF(1*this.value, "+X+");"+(v.onblur||"")):(b.slider&&(la=!0,l+=p.drawSlider(a,d,b,r,!0)),"text"==y&&b.values&&!r&&(l+='<span class="zenario_textbox_with_autocomplete">',sa=!0),l+="<input",v.type=y),b.redraw_immediately_onchange&&(v.onkeyup=(v.onkeyup||"")+"if (lib.redrawImmediatelyWhenChanged(this, event, '"+D(d)+"', '"+D(b.value)+"', "+
(b.value==k?"false":"true")+")) return false;"),p.addExtraAttsForTextFields(b,v)}if("checkbox"==y||"radio"==y)n(k)&&(v.checked="checked"),k=f,r&&(v.disabled=!0),n(b.indeterminate)&&a.after(function(){var a;if(a=p.get(d))a.indeterminate=!0});la&&(v.onchange='$("#zenario_slider_for__'+P(d)+'").slider("value", $(this).val());',v.onkeyup=(v.onkeyup||"")+'$("#zenario_slider_for__'+P(d)+'").slider("value", $(this).val());');h(t)?(J=$.extend({},b,J),ia.id=d+"___"+t,v["class"]+=" control_for__"+d):(J=b,ia.id=
d);"radio"==y&&b.name||(ia.name=d);r&&(ia.placeholder="");l+=p.outputAtts(J,v,Y,ia);Y=D(ga?b.value:k,!1,"asis");v="";"select"==y?l+=">":ya?(l+=">",b.icon_left&&(l+='<i class="'+D(b.icon_left)+'" aria-hidden="true"></i>'),l+=Y,b.icon_right&&(l+='<i class="'+D(b.icon_right)+'" aria-hidden="true"></i>'),l+="</button>"):"textarea"==y||"editor"==y?l+=">"+Y+"</textarea>":"code_editor"==y?l+=">"+Y+"</div>":U?(l+=' value="'+D(m._fD(k,"datetime"==y))+'"/>',l+=W("type","hidden","id","_value_for__"+d,"value",
k),r||b.hide_clear_button||(l+=W("type","button","class","zenario_remove_date","value","x","onclick",p.globalName+'.blankField("'+P(d)+'"); $('+p.globalName+'.get("'+P(d)+'")).change();'))):l=H?l+(' value="'+D(z._nF(1*k,X))+'" data-og_value="'+s.numberFormat(1*k,X,".","")+'"/>'):h(k)?l+(' value="'+Y+'"/>'):l+"/>";"select"==y&&(b.empty_value&&(v=pa("value","","data-hide_in_iconselectmenu",1,"selected",!k,D(b.empty_value)),b.show_empty_value_at_end||(l+=v,v="")),b.values&&(N={},N[k]=!0,l+=p.hierarchicalSelect(N,
b,ja,E,Z,Q)),l=l+(v+"</select>")+p.displayMissingItems(b));if(sa){var wa=[];for(M in E)x(E,M)&&(O=E[M],g=b.values[O],_._iS(g)?wa.push({label:g,value:O}):wa.push({label:g.label,value:O}));a.after(function(){var a=$(p.get(d)),c={source:wa,minLength:b.autocomplete_min_length||0,appendTo:a.parent()};b.return_key_presses_button&&(c.select=function(){setTimeout(function(){$("#"+b.return_key_presses_button).click()},0)});a.autocomplete(c);h(b.autocomplete)&&a.attr("autocomplete",b.autocomplete);a.focus(function(){a.autocomplete("widget").is(":visible")||
a.autocomplete("search","")})});l+=W("type","button","class","zenario_open_autocomplete","value","\u25be","onclick","$("+p.globalName+'.get("'+P(d)+'")).autocomplete("search", "");')}sa&&(l+="</span>")}h(t)||("url"!=y||r||(l+="&nbsp; "+W("type","button","class","submit","value",L.test,"onclick",p.globalName+'.testURL("'+P(d)+'");'),fa=!0),!b.label||"checkbox"!=y&&"radio"!=y||(l+=" "+qa("class",b.label_class,"for",d,"id","label_for__"+d,D(b.label)),fa=!0),h(b.post_field_label)&&(l+=" "+qa("for",d,
"id","label_for__"+d,D(b.post_field_label)),fa=!0),ua&&(l=ma.join("")+l),h(b.pre_field_html)&&(l=m._un(b.pre_field_html)+l),b.show_copy_text_button&&m._cC()&&(t=p.defineLibVarBeforeCode()+"lib.copyField(this, '"+m._jE(d)+"');",y=p.vaPhrase("copy"),l+=ka("id","test","class","zenario_copy","onclick",t,"title",y,"\ud83d\udccb"),fa=!0),fa&&(l=ka("class","zenario_field_widget_wrap",l)),h(b.post_field_html)&&(l+=m._un(b.post_field_html)),b.tooltip&&(l+=ea("class","zenario_field_tooltip","title",b.tooltip,
"?")),va&&(l+=na.join("")),la&&(l+=p.drawSlider(a,d,b,r,!1)));return l};e.addExtraAttsForTextFields=function(a,c){};e.copyField=function(a,c){var d=this.readField(c);h(d)&&m._co(d)&&(this.tooltips(a,{content:this.vaPhrase("copied")}),$(a).hide(),setTimeout(function(){$(a).show()},0))};var Ha={id:!0,name:!0,size:!0,maxlength:!0,accesskey:!0,"class":!0,cols:!0,dir:!0,readonly:!0,rows:!0,style:!0,tabindex:!0,title:!0,disabled:!0,onblur:!0,onchange:!0,onclick:!0,ondblclick:!0,onfocus:!0,oninput:!0,onpaste:!0,
onmousedown:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onselect:!0,autocomplete:!0,autofocus:!0,max:!0,min:!0,pattern:!0,placeholder:!0,required:!0,step:!0},Ca="hr h1 h2 h3 h4 label div p span".split(" ");e.outputAtts=function(a,c,d,b,g){var e,f="";for(e in a)if(x(a,e)&&!(b&&h(b[e])||!g&&!Ha[e]&&"data-"!=e.substr(0,5)))if("disabled"==e||"readonly"==e||"selected"==e){if(n(a[e])||c&&n(c[e])&&delete c[e])f+=" "+e+'="'+e+'"'}else f+=" "+e+'="'+this.defineLibVarBeforeCode(e),
c&&c[e]&&(f+=c[e]+" ",delete c[e]),f+=D(a[e]),d&&d[e]&&(f+=" "+d[e],delete d[e]),f+='"';b&&(f+=this.outputAtts(b,!1,!1,!1,!0));c&&(f+=this.outputAtts(c,!1,!1,!1,!0));d&&(f+=this.outputAtts(d,!1,!1,!1,!0));return f};e.defineLibVarBeforeCode=function(a){if(h(a)&&"on"!=a.substr(0,2))return"";this.globalName||(ba[this.globalName=z.generateGlobalName()]=this);return"var lib = "+D(this.globalName)+"; "};e.testURL=function(a){var c=this.get(a).value;a=this.get(this.onThisRow("target_blank_",a))||this.get(this.onThisRow("target_blank",
a));c&&(a&&2==a.value?$.colorbox({href:c,iframe:!0,width:"95%",height:"95%",className:"zenario_url_test_colorbox"}):ba.open(m._aBP(c)))};e.keepNumeric=function(a,c,d){var b=a.value,g="";c&&"-"==b[0]&&(g="-",b=b.substr(1));b=b.r(/[^\d\.]/g,"");b=b.r(/\.(.*)\./g,".$1");if(d!==f)switch(d){case 0:b=b.r(/\.\d*/,"");break;case 1:b=b.r(/(\d*\.\d)\d*/,"$1");break;case 2:b=b.r(/(\d*\.\d\d)\d*/,"$1");break;case 3:b=b.r(/(\d*\.\d\d\d)\d*/,"$1");break;case 4:b=b.r(/(\d*\.\d\d\d\d)\d*/,"$1")}b=g+b;a.value!=b&&
(a.value=b)};e.hierarchicalSelect=function(a,c,d,b,g,e,I){var w="",u,t,k,r,m,Q;for(m in b)if(x(b,m)&&(Q=b[m],r=c.values[Q],r!==f)){t=u=!1;if(_._iS(r))r={label:r};else if(n(r.disabled)||r.disabled_if&&z._e(r.disabled_if,this,r,f,Q,f,f,c,f,d)||c.values_disabled_if&&z._e(c.values_disabled_if,this,r,f,Q,f,f,c,f,d))u=!0;a[Q]&&(t=!0);k=!n(r.hide_when_children_are_not_visible);if(!h(I)&&g&&e[Q]){if((childrenHTML=this.hierarchicalSelect(a,c,d,b,g,e,Q))||k)w+=oa("optgroup","label",r,"disabled",!childrenHTML,
childrenHTML)}else k&&I===r.parent&&(w+="<option "+this.outputAtts(r,!1,!1,{disabled:u,selected:t,value:Q})+">"+D(r,!1,!0)+"</option>")}return w};e.setupMultipleSelect=function(a,c,d,b){var g=this,e=!1;d=$(g.get(c));d.multiselect({columns:a.cols,texts:{placeholder:a.empty_value||L.selectListSelect,overridePlaceholder:a.placeholder},onOptionClick:function(){e=!0},onControlClose:function(){e&&g.fieldChange(c)}});b&&d.multiselect("disable")};e.typeaheadSearchEnabled=function(a,c,d){};e.typeaheadSearchAJAXURL=
function(a,c,d){};e.parseTypeaheadSearch=function(a,c,d,b,g){};e.setupPickedItems=function(a,c,d,b,g){var e=this,f,h,u=a.pick_items||{},t=a.upload||{},k=n(u.allow_typing_anything),r=n(t.reorder_items||u.reorder_items);e.typeaheadSearchEnabled(a,c,d)&&(f=e.typeaheadSearchAJAXURL(a,c,d))&&(h="_search");h=$(e.get(c)).tokenize({datas:f,searchParam:h,debounce:200,nbDropdownElements:30,sortable:r,placeholder:u.nothing_selected_phrase||t.nothing_selected_phrase||L.nothing_selected,onAddToken:function(b,
f,k){e._tokenizeNoRecurse||(g?e.pickedItemsChanged(c,a):e.addToPickedItems(b,c,d),e.$getPickItemsInput(c).focus(),e.tooltips("#name_for_"+c+" .TokensContainer *[title]"))},maxElements:g?0:1,parseData:function(a){return e.parseTypeaheadSearch(e.tuix.tabs[d].fields[c],c,d,b,a)},formatTokenHTML:function(a,g){var f=e.tuix.tabs[d].fields[c];return f.values&&f.values[a]?e.drawPickedItem(a,c,f,b):k?(f.values=f.values||{},f.values[a]=g,e.drawPickedItem(a,c,f,b)):!1},onRemoveToken:function(a,b){e._tokenizeNoRecurse||
e.removeFromPickedItems(a,c,d)}});b?h.disable():(r&&h.container.addClass("zenario_reorder_items"),f||k?(h.container.addClass("zenario_picker_with_typeahead"),k&&e.$getPickItemsInput(c).blur(function(){var a,b;if(a=e.$getPickItemsInput(c).val())b={},b[a]=a,e.addToPickedItems(b,c,d)})):h.disableTypeAhead())};e.chooseFromDropbox=function(a){var c=this,d,b,g,e,f;if(!(d=c.field(a))||!d.upload)return!1;if(e=d.upload.extensions||d.upload.accept)e=_._iS(e)?e.s(","):_._tA(e);for(b in e)x(e,b)&&(g=e[b],f=g.s("/"),
h(f[1])?e[b]="images"==f[0]?"image":f[0]:"text"!=g&&"documents"!=g&&"images"!=g&&"video"!=g&&"audio"!=g&&"."!=g.substr(0,1)&&(e[b]="."+g));d={cancel:function(){F._hAL()},linkType:"direct",multiselect:!!n(d.upload.multi),extensions:e,success:function(b){F._sAL();var d,e,g=new m.callback;for(d in b)x(b,d)&&(e=b[d],g.add(m._a(c.ajaxURL()+"&fetchFromDropbox=1",e,!0)));g.after(function(){var b,d,e,g="";if(!(e=c.field(a))||!e.upload)return!1;for(b in arguments)x(arguments,b)&&((d=arguments[b])&&d.id&&(g+=
","+d.id),c.setFileDetails(e,d));""!==g&&c.addToPickedItems(g,a);F._hAL()})}};F._sAL();Dropbox.choose(d)};e.setFileDetails=function(a,c){a.values||(a.values={});c.label=this.formatLabelFromFile(c);a.values[c.id]=c};e.formatLabelFromFile=function(a){var c;h(a.filename)?(c=a.filename,a.ssc&&(c+=" [checksum "+a.short_checksum+"]"),n(a.width)&&n(a.height)&&(c+=" ["+a.width+" \u00d7 "+a.height+"px]")):(fileDetails=m._dIIFO(a.id))&&(fileDetails=fileDetails.s("/"))&&fileDetails[1]?(c=fileDetails[1],n(fileDetails[2])&&
n(fileDetails[3])&&(c+=" ["+fileDetails[2]+" \u00d7 "+fileDetails[3]+"px]")):c=a.id;return c};e.upload=function(a,c){var d=this,b;if(!(b=d.field(a))||!b.upload)return!1;b={class_name:b.class_name,upload:b.upload};d.uploadCallback=function(b){if(b){var c,e,f,h="";if(!(f=d.field(a))||!f.upload)return!1;for(c in b)x(b,c)&&(e=b[c])&&e.id&&(h+=","+e.id,d.setFileDetails(f,e));""!==h&&d.addToPickedItems(h,a)}};c?d.enableDragDropUpload():z._a(d,b,f,f,f,{fileUpload:1},f,d.ajaxURL())};e.ajaxURL=function(){return aa+
"zenario/ajax.php?method_call=handleAdminBoxAJAX&path="+da(this.path)};e.enableDragDropUpload=function(){};e.disableDragDropUpload=function(){};e.uploadComplete=function(a){h(this.uploadCallback)&&this.uploadCallback(a);delete this.uploadCallback};e.drawSlider=function(a,c,d,b,e){var f=this,I=_._cl(d.slider);d="";if(n(I.before_field)?e:!e)b&&(d+='<div class="ui-disabled">'),d+=ea("id","zenario_slider_for__"+c,"class",I["class"],"style",I.style),b&&(d+="</div>"),a.after(function(){var a;if(a=f.get("zenario_slider_for__"+
c))h(I.min)&&(I.min=m.num(I.min)),h(I.max)&&(I.max=m.num(I.max)),h(I.step)&&(I.step=m.num(I.step)),I.disabled=!f.editModeOn(),I.value=$(f.get(c)).val(),I.slide=function(a,b){$(f.get(c)).val(b.value)},I.change=function(a,b){f.fieldChange(c)},$(a).slider(I)});return d};e.lookupFileDetails=function(a){return F._lFD(a)};e.displayMissingItems=function(a){var c="",d=this.tuix.missing_items_warning,b=[],e,f,n;if(!h(d)||!d||!a.value)return"";n=(a.value+"").s(",");for(e in n)x(n,e)&&(f=n[e],a.values&&a.values[f]||
b.push("#"+D(f)));b.length&&(c=ea("class","zenario_missing_items",m._aMF(d,{items:b.join(", ")})));return c};e.pickedItemsArray=function(a,c){if(!1===c||!h(c))return{};a.values&&_._iS(a.values)&&this.tuix.lovs&&this.tuix.lovs[a.values]&&(a.values=this.tuix.lovs[a.values]);if(!(0!==c&&"0"!==c||a.values&&(a.values[0]||a.values["0"])))return{};var d=(c+"").s(","),b={},e,f,I,w,u,t,k;a._display_value=!1;for(t in d)x(d,t)&&(k=d[t])&&(a.upload&&(u=m._dIIFO(k))&&(u=u.s("/"))&&u[1]?(b[k]=u[1],n(u[2])&&n(u[3])&&
(b[k]+=" ["+u[2]+" \u00d7 "+u[3]+"px]")):a.values&&a.values[k]&&"string"==typeof a.values[k]?b[k]=a.values[k]:a.values&&a.values[k]&&a.values[k].label?b[k]=a.values[k].label:((I=a.pick_items&&a.pick_items.target_path)||(I=a.pick_items&&a.pick_items.path))&&(e=F._gIFO(I,k))?(a.values||(a.values={}),f=F._fOIN(e,k),w=e.items&&e.items[k]||{missing:!0},b[k]=f,a.values[k]={missing:w.missing,image:w.image,css_class:w.css_class||e.item&&e.item.css_class,label:f}):a.upload&&k==1*k&&(u=this.lookupFileDetails(k))?
(this.setFileDetails(a,u),b[k]=a.values[k]):b[k]=k,!1===a._display_value&&(a._display_value=b[k]));return b};e.pickedItemsValue=function(a){var c,d="";if(a)for(c in a)x(a,c)&&(d+=(""===d?"":",")+c);return d};e.displaySelectedItems=function(a,c,d,b){h(c)||(c=this.field(a,b));h(d)||(d=this.value(a,b));a=this.pickedItemsArray(c,d);return _._isEm(a)?n(d)?d:h(c.empty_value)?c.empty_value:"":_._tA(a).join(", ")};e.hierarchicalBoxes=function(a,c,d,b,e,q,m,w,u,t,k,r,E){var z=this,F=1*e.cols||1,p=0,y="",G,
B,L,C,H=!1;if(!E)E=0,F=1*e.cols_at_top_level||F;else if(10<E)return"";r||(r={});k&&(r[k]=!0);E&&(y+=ea("class","zenario_hierarchical_box_children","id","children_for___"+d+"___"+k,">"));for(var P in u)if(x(u,P)&&(G={},B=u[P],B==1*B&&(B*=1),C=f,L="object"==typeof e.values[B]?e.values[B]:{label:e.values[B]},e.tag_colors&&(G.tag_color=e.tag_colors[B]||"blue"),C=L.parent,"0"===C&&(C=!1),!k&&!C||k==C)){C=b?!0===b||1===b||"1"===b?!0===B||1===B||"1"===B:w?h(w[B])?!0:!1:B==b:!B;if(!m||C||!e.hide_unselected_values_when_readonly||
t[B]){G.checked=C;if(G.newRow=++p>F)p=1;G.col=p;G.cols=F;if("checkboxes"==e.type&&n(e.checking_child_checks_parents)){var A="";k&&(A+="if (this.checked) { for (var cb in "+JSON.stringify(r)+") { "+z.globalName+".get('"+D(d)+"___' + cb).checked = true; } } ");t[B]&&(A+="if (!this.checked) { $('#children_for___' + this.id + ' input').attr('checked', false); } ");A?q.onchange=e.onchange?A+" "+e.onchange:A:e.onchange?q.onchange=e.onchange:delete q.onchange}else"checkboxes"==e.type&&n(e.checking_parent_checks_children)&&
(A="",t[B]&&(A+="if (this.checked) { $('#children_for___' + this.id + ' input').each(function(i, el) {el.checked = true;}) }; "),A?q.onchange=e.onchange?A+" "+e.onchange:A:e.onchange?q.onchange=e.onchange:delete q.onchange);G.lovId=d+"___"+B;G.lovField=L;e.indeterminates&&n(e.indeterminates[B])&&function(b){a.after(function(){var a;if(a=z.get(b))a.indeterminate=!0})}(G.lovId);G.lovHTML=z.drawField(a,c,d,q,f,f,f,f,f,B,C,!1,u,t,L);G.childrenHTML="";t[B]&&(G.childrenHTML=z.hierarchicalBoxes(a,c,d,b,
e,q,m,w,u,t,B,_._ex({},r),E+1),p=0);H?(z.splitValues||(z.splitValues={}),z.splitValues[d]||(z.splitValues[d]=""),z.splitValues[d]+=z.microTemplate(z.mtPrefix+"_radio_or_checkbox",G)):y+=z.microTemplate(z.mtPrefix+"_radio_or_checkbox",G)}C&&L.split_values_if_selected&&!E&&"radios"===e.type&&(H=!0)}E&&(y+="</div>");return y};e.drawPickedItem=function(a,c,d,b,e){h(d)||(d=this.field(c));label=d.values&&d.values[a];pick_items=d.pick_items||{};thumbnail={};mi={};_._isOb(label)?_._ex(mi,label):label?mi.label=
label:(mi.label=a,mi.missing=!0);mi.id=c;mi.item=a;mi.readOnly=b;mi.width&&mi.height&&((a=mi.checksum||mi.short_checksum)?(thumbnail.src=aa+"zenario/file.php?c="+da(a)+"&og=1",mi.usage&&(thumbnail.src+="&usage="+da(mi.usage))):mi.link&&(thumbnail.src=m._aBP(mi.link)),thumbnail.src&&(z._rI(mi.width,mi.height,180,120,thumbnail),mi.thumbnail=thumbnail));return this.drawPickedItem2(c,pick_items,e,mi)};e.drawPickedItem2=function(a,c,d,b){var e=this;return d?(e.__addTT=!0,setTimeout(function(){e.__addTT&&
e.tooltips("#name_for_"+a+" .Dropdown *[title]");delete e.__addTT},1),e.microTemplate(c.dropdown_item_microtemplate||e.mtPrefix+"_dropdown_item",b)):e.microTemplate(c.picked_item_microtemplate||e.mtPrefix+"_picked_item",b)};e.showPickedItemInPopout=function(a,c){z._a(this,{popout:{href:a,title:c,css_class:"zenario_show_colobox_above_fab"}})};e.pickItems=function(a){var c,d,b,e;(c=this.field(a))&&(d=c.pick_items)&&(d.path||d.target_path)&&(c=e=d.path,ga.map&&(e=ga._cNPTTP(d.path).path),n(d.multiple_select)||
d.target_path&&d.target_path!=e||!(b=this.readField(a))||-1!=b.indexOf(",")||(c="//"==m._rHSS(c,2)?c+b:"/"==m._rHSS(c,1)?c+("/"+b):c+("//"+b)),this.SKTarget=a,F._oS(this.globalName,"setPickedItems",d.multiple_select,c,d.target_path,d.min_path,d.max_path,d.disallow_refiners_looping_on_min_path,f,d.one_to_one_choose_phrase,d.one_to_many_choose_phrase,f,!0,f,f,f,f,f,f,f,f,d))};e.setPickedItems=function(a,c,d,b){a=this.SKTarget;var e,f,h={};for(e in c._items)x(c._items,e)&&(d=m._dIIFO(e),f=b.items&&b.items[d]||
{missing:!0},h[d]={missing:f.missing,image:f.image,css_class:f.css_class||b.item&&b.item.css_class,label:F._fOIN(b,d)});this.addToPickedItems(h,a)};e.removeFromPickedItems=function(a,c,d){this.addToPickedItems(a,c,d,!0)};e.addToPickedItems=function(a,c,d,b){this._tokenizeNoRecurse=!0;d=this.field(c,d);var e=this.readField(c),f=d.pick_items&&n(d.pick_items.multiple_select)||d.upload&&n(d.upload.multi),h,m,u={};a=z._cTO(a);m=e?this.pickedItemsArray(d,e):{};for(h in a)if(x(a,h))if(e=a[h],d.values||(d.values=
{}),b)delete d.values[h];else if(d.values[h]||(d.values[h]=e),m[h]&&(u[h]=!0),f)m[h]=!0;else{m={};m[h]=!0;break}this.redrawPickedItems(c,d,m,u);this._tokenizeNoRecurse=!1};e.redrawPickedItems=function(a,c,d,b){var e,f,h=this.pickedItemsValue(d),m={},n=$(this.get(a)).tokenize(),t=n.toArray();d=z._cTO(d);for(e in t)x(t,e)&&(f=t[e],d[f]&&!b[f]?m[f]=!0:n.tokenRemove(f));for(f in d)x(d,f)&&!m[f]&&(b=c.values&&c.values[f],_._isOb(b)?b=b.label:b||(b=f),n.tokenAdd(f,b));c.current_value=h;this.pickedItemsChanged(a,
c)};e.pickedItemsChanged=function(a,c){c.onchange&&z._e(c.onchange,this,c,f,a,f,f,c);this.fieldChange(a)};e.changes=function(a){if(this.tuix&&this.tuix.tab){if(h(a))return this.changed[a];for(a in this.tuix.tabs)if(x(this.tuix.tabs,a)&&this.changed[a])return!0}return!1};e.markAsChanged=function(a){this.tuix&&(h(a)||(a=this.tuix.tab),a&&!this.changed[a]&&(this.changed[a]=!0,this.tuix.tab==a&&$("#zenario_abtab").addClass("zenario_abtab_changed")))};e.fieldChange=function(a,c){var d=this,b=d.field(a);
b&&(b.indeterminate&&(b.indeterminate=!1),h(c)&&b.indeterminates&&b.indeterminates[c]&&(b.indeterminates[c]=!1),d.markAsChanged(),n(b.multiple_edit)&&d.meMarkChanged(a),setTimeout(function(){d.validateFormatOrRedrawForField(b)},1))};e.validateFormatOrRedrawForField=function(a,c){"string"==typeof a?(this.fieldThatTriggeredRedraw=this.setLastFocus(a),a=this.field(a)):a.id&&(this.fieldThatTriggeredRedraw=this.setLastFocus(a.id));var d=n(a.validate_onchange),b=n(a.format_onchange)||c&&(a.pressed?a.format_on_toggle_on:
a.format_on_toggle_off),e=n(a.redraw_onchange);if(d)return 3>this.ffoving&&(this.ffoving=3,this.validate()),!0;if(b)return 2>this.ffoving&&(this.ffoving=2,this.format()),!0;e&&1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return e};e.redrawImmediatelyWhenChanged=function(a,c,d,b,e){if(a=e?a.value===b:a.value!==b)m._st(c),this.fieldThatTriggeredRedraw=this.setLastFocus(d),1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return a};e.meMarkChanged=function(a,c,d){h(c)&&
c==d||(this.field(a).multiple_edit._changed=!0,this.meSetCheckbox(a,!0))};e.meSetCheckbox=function(a,c){"checkbox"==this.get("multiple_edit__"+a).type?this.get("multiple_edit__"+a).checked=c:this.get("multiple_edit__"+a).value=c?1:""};e.meChange=function(a,c,d){var b=this.field(c);if(a)b.multiple_edit._changed=!0;else{if(!d&&n(b.multiple_edit.warn_when_abandoning_changes)&&h(b.multiple_edit.original_value)&&this.readField(c)!=b.multiple_edit.original_value){a=W("type","button","class","submit_selected",
"value",L.abandonChanges,"onclick",this.globalName+'.meChange(false, "'+P(c)+'", true);')+W("type","button","class","submit","value",L.cancel);F._flBo(L.abandonChangesConfirm,a,"warning");this.meSetCheckbox(c,!0);return}b.multiple_edit._changed=!1;delete b.current_value;d=b.value;h(b.multiple_edit.original_value)&&(d=b.current_value=b.multiple_edit.original_value);this.get(c)&&!b.pick_items?"checkbox"==this.get(c).type?this.get(c).checked=d?!0:!1:$(this.get(c)).val(d||""):(b=new m.callback,d=this.drawFields(b),
this.insertHTML(d,b))}this.meSetCheckbox(c,a);this.validateFormatOrRedrawForField(c)};e.currentValue=function(a,c,d){return d||this.drawingFields||h(c)&&c!=this.tuix.tab?this.value(a,c,d):this.readField(a)};e.originalValue=function(a,c){return this.value(a,c,!0)};e.value=function(a,c,d){c||(c=this.tuix.tab);var b="",e=this.field(a,c);if(!e)return"";h(d)||(d=this.fieldIsReadonly(a,e,c));e&&!e.snippet&&"grouping"!=e.type&&(this.isButton(e)?b=!!e.pressed:!d&&h(e.current_value)?b=e.current_value:h(e.value)?
b=e.value:e.multiple_edit&&h(e.multiple_edit.original_value)&&(b=e.multiple_edit.original_value));return"0"===b?0:h(b)?b:""};e.fieldChanged=function(a,c){return this.currentValue(a,c)!=this.originalValue(a,c)};e.mode=function(a){return this.value("mode","global_area")||this.value("mode")};e.scope=function(a){return this.value("scope","first_tab")||this.value("scope")};e.keyIn=function(a){return _.contains(arguments,this.tuix.key[a],1)};e.keyIs=function(a,c){return this.tuix.key[a]==c};e.key=function(a){return this.tuix.key[a]};
e.getMode=function(){return _._isFu(this.mode)?this.mode():this.mode};e.modeIn=function(){return _.contains(arguments,this.getMode())};e.modeNotIn=function(){return!_.contains(arguments,this.getMode())};e.modeIs=function(a){return this.getMode()==a};e.modeIsNot=function(a){return this.getMode()!=a};e.scopeIn=function(){return _.contains(arguments,this.scope())};e.scopeNotIn=function(){return!_.contains(arguments,this.scope())};e.scopeIs=function(a){return this.scope()==a};e.scopeIsNot=function(a){return this.scope()!=
a};e.valueIn=function(a){return _.contains(arguments,this.value(a),1)};e.valueNotIn=function(a){return!_.contains(arguments,this.value(a),1)};e.valueInArray=function(a,c){return _.contains(c,this.value(a))};e.valueIs=function(a,c){return this.value(a)==c};e.valueIsNot=function(a,c){return this.value(a)!=c};e.isButton=function(a){return a&&("submit"==a.type||"toggle"==a.type||"button"==a.type)};e.isFormField=function(a){return!(!a||a.snippet||"grouping"==a.type||"submit"==a.type||"toggle"==a.type||
"button"==a.type)};e.getCodeEditorPosition=function(a){return{top:a.session.getScrollTop(),left:a.session.getScrollLeft(),range:a.getSelectionRange()}};e.setCodeEditorPosition=function(a,c){c&&(a.session.setScrollTop(c.top),a.session.setScrollLeft(c.left),a.selection.setSelectionRange(c.range))};e.appendCodeEditorValue=function(a,c){var d=ace.edit(a),b=this.getCodeEditorPosition(d);d.setValue(d.getValue()+c);this.setCodeEditorPosition(d,b)};e.readField=function(a){var c=f,d=this.tuix.tab,b=this.field(a,
d),e=b.type,q;if(!this.isFormField(b))return f;var n=this.fieldIsReadonly(a,b,d),w=b._was_hidden_before;b.multiple_edit&&n&&delete b.multiple_edit._changed;if("checkboxes"==e||"radios"==e){if(!n&&!w&&b.values){var u,w="",t=!0;for(u in b.values)x(b.values,u)&&this.get(a+"___"+u)&&this.get(a+"___"+u).checked&&(w+=(t?"":",")+u,t=!1);b.current_value=w}w=!0}if(w)return n||!h(b.current_value)?b.value:b.current_value;if(this.get("_value_for__"+a))b.current_value=c=this.get("_value_for__"+a).value;else if("editor"!=
e&&"code_editor"!=e||n)if(!n&&(q=this.get(a))){if("currency"==e)c=$(q).data("og_value");else if("checkbox"==e||"radio"==e)c=q.checked?!0:!1;else if("color_picker"==e||"colour_picker"==e)try{c=$(q).spectrum("get").toHexString()}catch(k){c=$(q).val()}else c=$(q).val();h(c)||(c="");_._isAr(c)&&(c=c.join(","));b.current_value=c}else delete b.current_value,c=b.value;else{var r,z;if("editor"==e){if(a=ba.tinyMCE&&tinyMCE.get(a))r=m._tMGC(a)}else"code_editor"==e&&(z=ace.edit(a))&&(r=z.getValue(),this.editingPositions[d+
"/"+a]=this.getCodeEditorPosition(z));if(h(r)&&!1!==r)c=b.current_value=r;else return h(b.current_value)?b.current_value:b.value}return c};e.blankField=function(a){this.setFieldValue(a,"")};e.setFieldValue=function(a,c){field=this.field(a,this.tuix.tab);this.get(a)&&$(this.get(a)).val(c);this.get("_value_for__"+a)&&(this.get("_value_for__"+a).value=c);field.current_value=c};e.readTab=function(){var a,c={},d=this.fields(),b;this.lastScrollTop=$("#zenario_fbAdminInner").scrollTop();for(b in d)x(d,b)&&
h(a=this.readField(b))&&(c[b]=a);U&&U.activeElement&&(this.lastFocus=this.setLastFocus(U.activeElement));return c};e.wipeTab=function(){var a=this.fields(),c,d;for(c in a)x(a,c)&&(d=a[c],delete d.current_value,d.multiple_edit&&delete d.multiple_edit._changed)};e.redrawTab=function(){this.tuix.shake=!1;this.draw2()};e.useSimpleEditor=function(){return!0};e.getURL=function(a){++this.onKeyUpNum;return this.returnAJAXURL(a)};e.returnAJAXURL=function(a){return"..."};e.editModeOn=function(a){if(!this.tuix||
!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=n(this.tuix.tabs[a].edit_mode.enabled)&&(n(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};e.editModeAlwaysOn=function(a){return!0};e.editCancelEnabled=function(a){return!1};e.revertEnabled=function(a){return!1};e.savedAndContinued=function(a){return!1};e.editModeOnBox=function(){return!0};e.sortTabs=function(){this.sortedTabs=[];if(this.tuix.tabs)for(var a in this.tuix.tabs)if(x(this.tuix.tabs,
a)){var c=this.tuix.tabs[a];c&&this.sortedTabs.push([a,c.ord])}this.sortedTabs.sort(z.sortArray);this.groupings={};this.sortedFields={};for(a in this.sortedTabs)x(this.sortedTabs,a)&&(c=this.sortedTabs[a]=this.sortedTabs[a][0],this.sortFields(c))};e.sortFields=function(a){var c,d,b,e,h={};this.groupings[a]={};this.sortedFields[a]=[];if(b=this.fields(a)){for(c in b)x(b,c)&&(d=b[c],d.type&&"grouping"==d.type&&(h[d.name||c]=1*d.ord,this.groupings[a][d.name||c]=c));for(c in b)x(b,c)&&(!(d=b[c])||d.type&&
"grouping"==d.type||(e=d.grouping?h[d.grouping]:f,this.sortedFields[a].push([c,d.ord,e])));this.sortedFields[a].sort(z.sortArrayWithGrouping);for(c in this.sortedFields[a])x(this.sortedFields[a],c)&&(this.sortedFields[a][c]=this.sortedFields[a][c][0])}};e.setData=function(a){this.tuix=a};e.setDataDiff=function(a){this.syncAdminBoxFromServerToClient(a,this.tuix)};e.syncAdminBoxFromServerToClient=function(a,c){var d,b;for(d in a)x(a,d)&&(b=a[d],!h(b)||b["[[__unset__]]"]?delete c[d]:h(c[d])?b["[[__replace__]]"]?
(delete b["[[__replace__]]"],c[d]=b):"object"!=typeof c[d]?c[d]=b:"object"==typeof c[d]&&"object"!=typeof b?c[d]=b:this.syncAdminBoxFromServerToClient(b,c[d]):c[d]=b)};e.sendStateToServer=function(){return JSON.stringify(this.tuix)};e.sendStateToServerDiff=function(){var a={};this.syncAdminBoxFromClientToServerR(a,this.tuix);h(this.tuix.from_client)&&_._isOb(this.tuix.from_client)&&(a.from_client={},this.syncAllTagsToServerR(a.from_client,this.tuix.from_client));return JSON.stringify(a)};e.syncAdminBoxFromClientToServerR=
function(a,c,d,b,e,f,n,w){if("object"==typeof c){var u,t,k;for(t in c)if(!h(d)&&m.IN(t,"download","path","shake","tab","switchToTab")&&(u="value")||!h(d)&&m.IN(t,"_sync","tabs")&&(u="array")||!h(b)&&"_sync"==d&&m.IN(t,"cache_dir","password","session","iv")&&(u="value")||!h(b)&&"tabs"==d&&(u="array")||!h(e)&&"tabs"==b&&"_was_hidden_before"==t&&(u="value")||!h(e)&&"tabs"==b&&m.IN(t,"edit_mode","fields")&&(u="array")||!h(f)&&"tabs"==e&&"edit_mode"==d&&"on"==t&&(u="value")||!h(f)&&"tabs"==e&&"fields"==
d&&(u="array")||!h(n)&&"tabs"==f&&"fields"==b&&m.IN(t,"_display_value","_was_hidden_before","current_value","pressed")&&(u="value")||!h(n)&&"tabs"==f&&"fields"==b&&"multiple_edit"==t&&(u="array")||!h(w)&&"tabs"==n&&"fields"==e&&"multiple_edit"==d&&"_changed"==t&&(u="value"))if("value"==u)switch(k=c[t],typeof k){case "function":case "object":break;case "string":k=m._eIIFO(k);default:a[t]=k}else"array"==u&&"object"==typeof c[t]&&(a[t]={},this.syncAdminBoxFromClientToServerR(a[t],c[t],t,d,b,e,f,n))}};
e.syncAllTagsToServerR=function(a,c){var d,b;for(d in c)switch(b=c[d],typeof b){case "function":break;case "object":a[d]={};this.syncAllTagsToServerR(a[d],c[d]);break;case "string":b=m._eIIFO(b);default:a[d]=b}};e.getValueArrayofArrays=function(a){return m._nAA(this.getURL(),m._uR({_read_values:!0,_box:this.sendStateToServer()}),!a)};e.getValues1D=function(a,c,d,b,e,f){var m,n,u,t,k,r={};if(this.tuix&&this.tuix.tabs)for(m in this.tuix.tabs)if(x(this.tuix.tabs,m)&&(n=this.tuix.tabs[m],n.fields&&(!h(f)||
-1!=z._tTA(f).indexOf(m))))for(u in n.fields)!x(n.fields,u)||(t=n.fields[u],k=u,!this.isFormField(t)||b&&this.fieldIsReadonly(u,t,m)||e&&(n._was_hidden_before||t._was_hidden_before)||a&&!(k=t.plugin_setting&&t.plugin_setting.name)||(t=this.currentValue(u,m,d),c||(r[k]=t),!c&&h(c)))||(r[m+"/"+u]=t);return r};e.insertText=function(a,c){_._iS(a)&&(a=this.get(a));if(a){var d=$(a),b=a.selectionStart,e=a.selectionEnd,f=d.val();d.val(f.substring(0,b)+c+f.substring(e));a.selectionStart=a.selectionEnd=b+c.length;
a.focus()}};e.callFunctionOnEditors=function(a){var c,d,b;if(ba.tinyMCE&&(c=this.fields()))for(d in c)if(x(c,d)&&(b=c[d],"editor"==b.type&&tinyMCE.get(d)))if("remove"==a)tinyMCE.get(d).remove();else if("isDirty"==a&&tinyMCE.get(d).isDirty())return!0;return!1};e.format=function(a){var c=this,d;if(c.loaded&&(d=c.getURL("format"))){var b=c.tuix&&c.tuix.tab;c.loaded=!1;c.hideTab();c.checkValues(a);c.retryAJAX(d,{_format:!0,_box:c.sendStateToServer()},!0,function(a){c.load(a);c.switchTabIfRequested(b);
c.sortTabs();c.draw()},"loading")}};e.validate=function(a,c,d,b){var e=this,f;if(e.loaded&&(f=e.getURL("validate"))){e.differentTab=a;e.loaded=!1;e.hideTab(a);e.checkValues(d);var h=e.tuix&&e.tuix.tab;a&&(e.tuix.switchToTab=c);e.retryAJAX(f,{_validate:!0,_box:e.sendStateToServer()},!0,function(a){e.load(a)&&e.switchTabIfRequested(h);e.sortTabs();e.switchToATabWithErrors();e.draw();b&&b()},"loading")}};e.switchTabIfRequested=function(a){this.tuix.switchToTab&&(a=a||this.tuix&&this.tuix.tab,this.errorOnTab(a)?
this.tuix.tab=a:this.tuix.tab=this.tuix.switchToTab,delete this.tuix.switchToTab)}})},zenarioF);

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var F=0;return function(){return F<h.length?{done:!1,value:h[F++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,F,G){if(h==Array.prototype||h==Object.prototype)return h;h[F]=G.value;return h};$jscomp.getGlobal=function(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var F=0;F<h.length;++F){var G=h[F];if(G&&G.Math==Math)return G}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(h,F,G){if(!G||null!=h){G=$jscomp.propertyToPolyfillSymbol[F];if(null==G)return h[F];G=h[G];return void 0!==G?G:h[F]}};
$jscomp.polyfill=function(h,F,G,O){F&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(h,F,G,O):$jscomp.polyfillUnisolated(h,F,G,O))};$jscomp.polyfillUnisolated=function(h,F,G,O){G=$jscomp.global;h=h.split(".");for(O=0;O<h.length-1;O++){var Q=h[O];if(!(Q in G))return;G=G[Q]}h=h[h.length-1];O=G[h];F=F(O);F!=O&&null!=F&&$jscomp.defineProperty(G,h,{configurable:!0,writable:!0,value:F})};
$jscomp.polyfillIsolated=function(h,F,G,O){var Q=h.split(".");h=1===Q.length;O=Q[0];O=!h&&O in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var oa=0;oa<Q.length-1;oa++){var y=Q[oa];if(!(y in O))return;O=O[y]}Q=Q[Q.length-1];G=$jscomp.IS_SYMBOL_NATIVE&&"es6"===G?O[Q]:null;F=F(G);null!=F&&(h?$jscomp.defineProperty($jscomp.polyfills,Q,{configurable:!0,writable:!0,value:F}):F!==G&&(void 0===$jscomp.propertyToPolyfillSymbol[Q]&&(G=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[Q]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(Q):$jscomp.POLYFILL_PREFIX+G+"$"+Q),$jscomp.defineProperty(O,$jscomp.propertyToPolyfillSymbol[Q],{configurable:!0,writable:!0,value:F})))};$jscomp.initSymbol=function(){};$jscomp.iteratorPrototype=function(h){h={next:h};h[Symbol.iterator]=function(){return this};return h};
$jscomp.iteratorFromArray=function(h,F){h instanceof String&&(h+="");var G=0,O=!1,Q={next:function(){if(!O&&G<h.length){var oa=G++;return{value:F(oa,h[oa]),done:!1}}O=!0;return{done:!0,value:void 0}}};Q[Symbol.iterator]=function(){return Q};return Q};$jscomp.polyfill("Array.prototype.values",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(F,G){return G})}},"es8","es3");
zenario.lib(function(h,F,G,O,Q,oa,y,M,N,Za,eb,Na,Ba,n,x,$a,K,ha,aa,fb,ab,C,bb){N.lib(function(ya,ia,ja,Oa,Ca,ea,ta){var f=ab(bb),Pa={error:1,warning:1,question:1,information:1,success:1};f.init=function(a,c,d){this.globalName=a;this.mtPrefix=c;this.containerId=d;this.baseCSSClass="";this.onKeyUpNum=0;this.sizing=!1;this.cachedAJAXSnippets={};this.changed={};this.toggleLevelsPressed={};this.fieldThatTriggeredRedraw=this.lastFocus=!1;this.editingPositions={}};f.enableInlineErrors=function(){return!0};
f.get=function(a){var c;return this.containerId&&(c=$("#"+this.containerId+" #"+y._f90(a)))&&c[0]||$a(a)};f.tooltips=function(a,c){this.isAdminFacing()?M._cjm(a,c):y._cjm(a,c)};f.vaPhrase=function(a){return this.isAdminFacing()?M.phrase[a]:y.vphrase[a]};f.dateFormatToPlaceholder=function(a){switch(a){case "d/m/y":return"d/mm/yy";case "d/m/yy":return"d/mm/yyyy";case "dd/mm/y":return"dd/mm/yy";case "dd/mm/yy":return"dd/mm/yyyy";case "dd.mm.yy":return"dd.mm.yyyy";case "m/d/y":return"m/d/yy";case "m/d/yy":return"m/d/yyyy";
case "mm/dd/y":return"mm/dd/yy";case "mm/dd/yy":return"mm/dd/yyyy";case "yy-mm-dd":return"yyyy-mm-dd";case "d M y":return"d Mon yy";case "d M yy":return"d Mon yyyy";case "M d, yy":return"Mon d, yyyy"}return a};f.microTemplate=function(a,c,d,b,e){d=N._40o(d);var g=y._ue6(c,this);a=y._sbf(a,c,d,h,h,b,e);g&&y._zt(c);return a};f.pMicroTemplate=function(a,c,d){return this.microTemplate(this.mtPrefix+"_"+a,c,d,this.tuix&&this.tuix.pre_microtemplate&&this.tuix.pre_microtemplate[a],this.tuix&&this.tuix.post_microtemplate&&
this.tuix.post_microtemplate[a])};f.fun=function(a){return this.globalName+"."+a};f.onThisRow=function(a,c){return a+c.r(/(.*_|\D)/g,"")};f.valueOnThisRow=function(a,c){return this.value(this.onThisRow(a,c))};f.fieldOnThisRow=function(a,c){return this.field(this.onThisRow(a,c))};f.getKey=function(a){return this.tuix&&this.tuix.key};f.getKeyId=function(a){return this.tuix&&this.tuix.key&&this.tuix.key.id};f.getLastKeyId=function(a){return this.getKeyId(a)};f.getConductorVars=function(a){a=a||this.tuix.key.slotName||
this.slotName;var c=O.zenario_conductor;return c&&c.getVars&&c._cl7(a)};f.getTitle=function(){var a;if(this.tuix.key&&this.tuix.key.id&&(a=this.tuix.title_for_existing_records)){var c=_._1d5(this.getInitialValues(!0),this.tuix.key);return y._yqq(a,c)}return this.tuix.title};f.field=function(a,c){var d;return _._16j(a)?a:(d=this.tuix&&this.tuix.tabs)&&(c=c||this.tuix.tab)&&d[c]&&d[c].fields&&d[c].fields[a]};f.fields=function(a){var c;return(c=this.tuix&&this.tuix.tabs)&&(a=a||this.tuix.tab)&&c[a]&&
c[a].fields};f.initFields=function(){var a=this.tuix.tab,c,d,b,e,g=this.tuix.lovs||{};if(this.tuix.tabs)for(c in this.tuix.tabs)if(C(this.tuix.tabs,c)&&(b=this.fields(c))){var k=!1;for(d in b)C(b,d)&&(e=b[d])&&(e.values&&_._mvq(e.values)&&g[e.values]?e.values=g[e.values]:e.load_values_from_organizer_path&&!e.values&&this.loadValuesFromOrganizerPath(e),e.validation&&n(e.validation.required_if_not_hidden)&&(k=!0));k&&c!=a&&(this.tuix.tab=c,this.drawFields(h,h,!0),this.tuix.tab=a)}};f.loadValuesFromOrganizerPath=
function(a){var c,d;if(a.load_values_from_organizer_path&&!a.values&&(a.values={},(d=M._mym(a.load_values_from_organizer_path))&&d.items))for(c in d.items)if(C(d.items,c)){var b=d.items[c];a.values[y._x45(c)]={image:b.image,css_class:b.css_class||d.item&&d.item.css_class,label:M._ac1(d,c)}}};f.changeMode=function(){this.editCancelEnabled(this.tuix.tab)&&(this.editModeOn()?this.editCancelOrRevert("cancel",this.tuix.tab):this.editCancelOrRevert("edit",this.tuix.tab))};f.revertTab=function(){this.changes(this.tuix.tab)&&
this.revertEnabled(this.tuix.tab)&&this.editCancelOrRevert("revert",this.tuix.tab)};f.editCancelOrRevert=function(a,c){if(this.tuix.tabs[c].edit_mode){var d,b,e;if("edit"==a){var g=x(this.tuix.tabs[c].edit_mode.format_on_edit);var k=x(this.tuix.tabs[c].edit_mode.validate_on_edit)}else"cancel"==a?(g=x(this.tuix.tabs[c].edit_mode.format_on_cancel_edit),k=x(this.tuix.tabs[c].edit_mode.validate_on_cancel_edit)):"revert"==a&&(g=x(this.tuix.tabs[c].edit_mode.format_on_revert),k=this.errorOnTab(c)||x(this.tuix.tabs[c].edit_mode.validate_on_revert));
if(!k&&(b=this.fields(c)))for(e in b)if(C(b,e)){var l=b[e];if(x(l.validate_onchange)&&n(d=this.readField(e))&&d!=l.value){k=!0;break}else!g&&x(l.format_onchange)&&n(d=this.readField(e))&&d!=l.value&&(g=!0)}this.tuix.tabs[c].edit_mode.on="cancel"!=a;this.changed[c]=!1;k?this.validate(h,h,!0):g?this.format(!0):(this.wipeTab(),this.redrawTab(!0));this.tuix.tab==c&&$("#zenario_abtab").removeClass("zenario_abtab_changed")}};f.clickTab=function(a){this.loaded&&this.validate(a!=this.tuix.tab,a)};f.turnToggleOn=
function(a){this.clickButton(a,!0)};f.turnToggleOff=function(a){this.clickButton(a,!1)};f.clickButton=function(a,c){var d;if(d=this.field(a))if("submit"==d.type)d.pressed=!0,this.validate(!0);else if("toggle"==d.type){var b=$(this.get(a));a=$(this.get("row__"+a));var e=!!x(d.pressed);if(c===h||c!=e)(d.pressed=!x(d.pressed))?(b.removeClass("not_pressed").addClass("pressed"),a.addClass("zfea_row_pressed")):(b.removeClass("pressed").addClass("not_pressed"),a.removeClass("zfea_row_pressed")),this.markAsChanged(),
this.validateFormatOrRedrawForField(d,!0)}else"button"==d.type&&(d.pressed=!0,this.validateFormatOrRedrawForField(d))};f.togglePressed=function(a,c){var d=c?1<c?this.toggleLevelsPressed[c-1]:!0:this.toggleLevelsPressed.last;n(d)||(d=!0);a&&"toggle"==a.type&&(this.toggleLevelsPressed.last=d&&x(a.pressed),c&&(this.toggleLevelsPressed[c]=this.toggleLevelsPressed.last));return d};f.retryAJAX=function(a,c,d,b,e,g){var k=function(){y.ajax(a,c,d,h,k,!0,h,h,h,h,g).after(b);e&&M.nowDoingSomething&&M._8nu(e)};
k()};f.switchToATabWithErrors=function(){var a,c=this.tuix;if(c&&c.tabs&&!this.errorOnTab(c.tab))for(a in this.sortedTabs)if(C(this.sortedTabs,a)){var d=this.sortedTabs[a];if(c.tabs[d]&&!this.checkTabHidden(d)&&this.errorOnTab(d))return c.tab=d,!0}return!1};f.checkTabHidden=function(a){return N._58(h,this,h,a,h,h,h,h,this.tuix.tabs[a])};f.applyMergeFields=function(a,c,d,b){return a};f.applyMergeFieldsToLabel=function(a,c,d,b){return a};f.hideTab=function(a){var c=this;a?($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled",
"disabled"),$("#zenario_abtab").clearQueue().show().animate({opacity:.8},200,function(){c.tabHidden=!0;c.draw()})):($("#zenario_abtab input").add("#zenario_abtab select").add("#zenario_abtab textarea").attr("disabled","disabled").animate({opacity:.9},100),c.tabHidden=!0,c.draw())};f.draw=function(){this.loaded&&this.tabHidden&&this.draw2()};f.draw2=function(){};f.size=function(){};f.makeFieldAsTallAsPossible=function(){};f.getNextTab=function(){n(this.prevTab)||n(this.nextTab)||this.drawTabs(" ");
return this.nextTab};f.getPrevTab=function(){n(this.prevTab)||n(this.nextTab)||this.drawTabs(" ");return this.prevTab};f.goToNextTab=function(){var a=this.getNextTab();if(n(a))return this.clickTab(a),!0};f.goToPrevTab=function(){var a=this.getPrevTab();if(n(a))return this.clickTab(a),!0};f.drawTabs=function(a){a||(a=this.mtPrefix+"_tab");var c,d=[],b,e,g,k,l,p=function(q,u,D){for(u in q)if(C(q,u)){D=q[u];if(D.onclick){e&&(l=D.id);if(e=D.current)k=b;b=D.id}D.children&&p(D.children)}};for(g in this.sortedTabs)if(C(this.sortedTabs,
g)){var r=this.sortedTabs[g];if((c=this.tuix.tabs[r])&&!(c._was_hidden_before=N._58(h,this,h,r,h,h,h,h,c))){var t="";if(c.fields&&!_._ruc(c.fields)||c.fields&&!_._ruc(c.errors)||c.fields&&!_._ruc(c.notices))t=this.globalName+".clickTab('"+ha(r)+"');";!this.tuix.tab&&t&&(this.tuix.tab=r);d.push({id:r,tabId:r,tuix:c,onclick:t,current:this.tuix.tab==r,label:c.label})}}N._1a1(d,"zenario_fab_tab_with_children");p(d);this.prevTab=k;this.nextTab=l;return this.microTemplate(a,d)};f.drawFields=function(a,
c,d){var b,e=this.tuix.tab,g=this.tuix.tabs[e],k=this.groupings[e],l=this.sortedFields[e],p,r="",t=!1,q=this.fields(e),u={},D={},P={},m=!1,v=!1,R={},E={fields:{},rows:[],tabId:e,path:this.path,tuix:this.tuix,revert:"",errors:[],notices:{}};this.drawingFields=!0;this.drawnSortedFields=[];if(!d){this.ffoving=0;this.splitValues={};this.tallAsPossibleField=h;this.errorOnForm=!1;this.disableDragDropUpload();!this.savedAndContinued(e)&&this.editCancelEnabled(e)&&(E.revert=ia("class","zenario_editCancelButton",
N.input("class","zenario_gp_button","type","button","onclick",this.globalName+".changeMode(); return false;","value",this.editModeOn()?aa.cancel:aa.edit)));if(this.editModeOn()){if(g.errors)for(I in g.errors)if(C(g.errors,I)){var H=g.errors[I];this.errorOnForm=!0;E.errors.push({message:H})}if(q)for(I in q)if(C(q,I)&&(H=q[I],H.error))if(this.errorOnForm=!0,this.enableInlineErrors()&&(p=this.tuix.error_on_form_message||aa.errorOnForm)){E.errors.push({message:p});break}else E.errors.push({message:H.error})}if(g.notices)for(I in g.notices)C(g.notices,
I)&&(H=g.notices[I],x(H.show)&&!N._58(H,this,h,I)&&Pa[H.type]&&(E.notices[I]=H))}for(b in l)if(C(l,b)){var A=l[b];H=q[A];var I=!1;p=H.grouping;if(ka!==p){var ka=p;v=n(k[p])&&q[k[p]];t=p&&(!v||N._58(h,this,h,k[p],h,h,v))}U!==p&&(I=!0);H._id=A;H._html=this.drawField(a,e,A,H,u,D,P,d,t);if(!d&&!t&&!1!==H._html){this.drawnSortedFields.push(A);(I||H._startNewRow||!E.rows.length)&&E.rows.push({fields:[],grouping:v});if(I&&v&&(v.legend||v.snippet)){v=_._1d5({grouping:p},v);v._id=p;v._html=this.drawField(a,
e,p,v);v._hideOnOpen=!0;v._showOnOpen=!0;v._lastVisibleGrouping=U;v._lastVisibleGroupingField=ba;var U=p;var ba=v;E.rows[E.rows.length-1].fields.push(v);E.fields[p]=v;R[p]=v;E.rows.push({fields:[]})}m||g.show_errors_after_field!=A||(E.rows[E.rows.length-1].errors=E.errors,E.rows[E.rows.length-1].notices=E.notices,m=!0);H._lastVisibleGrouping=U;H._lastVisibleGroupingField=ba;U=p;ba=v;E.rows[E.rows.length-1].fields.push(H);E.fields[A]=H}}for(A in E.fields)C(E.fields,A)&&(H=E.fields[A],p=H.grouping)&&
(v=R[p])&&(v._hideOnOpen&=H._hideOnOpen,v._showOnOpen&=H._showOnOpen);d||(E.rows.length&&(E.rows[E.rows.length-1].fields[0]._isLastRow=!0),m||E.rows.splice(0,0,{errors:E.errors,notices:E.notices}),c=c||g.template||this.mtPrefix+"_current_tab",r+=this.microTemplate(c,E));this.drawingFields=!1;for(b in l)C(l,b)&&(A=l[b],delete q[A]._lastVisibleGroupingField,delete q[A]._lastVisibleGrouping,delete q[A]._startNewRow,delete q[A]._hideOnOpen,delete q[A]._showOnOpen,delete q[A]._isLastRow,delete q[A]._html,
delete q[A]._id);return r};f.drawTUIX=function(a,c,d){this.tuix={tab:"details",tabs:{details:{template:c,edit_mode:{on:!0,enabled:!0},fields:a}}};this.sortTabs();return this.drawFields(d)};f.insertHTML=function(a,c,d){var b=this.get("zenario_abtab"),e=this.lastFocus||this.fieldThatTriggeredRedraw,g;b.innerHTML=a;this.tabHidden=!1;this.changes(this.tuix.tab)?$(b).addClass("zenario_abtab_changed"):$(b).removeClass("zenario_abtab_changed");c.done();(g=!d&&e&&this.field(e.id))&&this.focusField(g,e.ss,
e.se);this.fieldThatTriggeredRedraw=!1;N._sik()&&(this.__lastFormHTML=a)};f.hideShowFields=function(a){var c=$(".zenario_hide_on_open"),d=$(".zenario_hide_row_on_open"),b=$(".zenario_show_on_open"),e=function(g,k){k.style.display="none"};b.length&&!c.length?b.show("blind",200,a):!b.length&&c.length?c.hide("blind",200,function(){d.each(e)}):b.length&&c.length&&(c.each(e),d.each(e),b.show())};f.isAdminFacing=function(){return!0};f.addJQueryElements=function(a){var c=this;y._4oz(a+" ",c.isAdminFacing());
$(a+" select.iconselectmenu").css("visibility","hidden").each(function(d,b){var e=$(b);e.attr("id");e.iconselectmenu({width:"auto",open:function(g){g=$("body > .ui-selectmenu-menu.ui-selectmenu-open");var k=g.height()/2,l=g.find(".ui-state-active");(l=l.length&&(l.position().top||l.parent().position().top))&&l>k?g.scrollTop(l-k):g.scrollTop(0);g.addClass("iconselectmenu__"+e.attr("id")).addClass("iconselectmenu__in__"+c.path)},change:function(){$(this).change()}})})};f.fieldIsReadonly=function(a,
c,d){return c.show_as_a_label||c.show_as_a_span||x(c.read_only)||x(c.readonly)||n(d)&&!this.editModeOn(d)||n(c.readonly_if)&&N.eval(c.readonly_if,this,c,h,a,h,h,c)};f.focusFirstField=function(){var a=this;if(a.tuix&&!x(a.tuix.tabs[a.tuix.tab].disable_autofocus)){var c=-1,d=[],b=h,e,g,k,l;for(e in a.sortedFields[a.tuix.tab])if(C(a.sortedFields[a.tuix.tab],e)){var p=a.sortedFields[a.tuix.tab][e];if((g=a.get(p))&&(k=a.field(p))&&((l=k.pick_items||k.upload)||$(g).is(":visible"))&&(d[++c]={id:p,type:k.type,
empty:""==g.value,focusable:(l||y.IN(k.type,"password","checkbox","currency","select","text","textarea"))&&!x(g.disabled)&&!x(g.readonly)&&!a.fieldIsReadonly(p,k)},1<c))break}if(d[0]&&!d[0].empty&&d[1]&&d[1].focusable&&d[1].empty&&"password"==d[1].type)b=1;else if(d[0]&&d[0].focusable)b=0;else if(d[1]&&d[1].focusable)b=1;else return;setTimeout(function(){a.focusField(d[b])},50)}};f.focusField=function(a,c,d){if(a.type){if("date"==a.type||"datetime"==a.type)return;a=this.get(a.id)}else a=this.$getPickItemsInput(a.id);
if(a&&(a.focus(),n(c)))try{a.selectionStart=c,a.selectionEnd=d}catch(b){}};f.$getPickItemsInput=function(a){return $(this.get("name_for_"+a)).find(".TokenSearch input")};f.errorOnBox=function(){if(this.tuix&&this.tuix.tabs)for(tab in this.tuix.tabs)if(C(this.tuix.tabs,tab)&&this.errorOnTab(tab))return!0;return!1};f.errorOnTab=function(a){var c;if(this.tuix.tabs[a]&&this.editModeOn(a)){if(this.tuix.tabs[a].errors)for(c in this.tuix.tabs[a].errors)if(C(this.tuix.tabs[a].errors,c))return!0;if(a=this.fields(a))for(c in a)if(C(a,
c)&&a[c].error)return!0}};f.checkValues=function(a){a?this.wipeTab():this.readTab();for(var c in this.tuix.tabs)if(C(this.tuix.tabs,c)){a=this.tuix.tabs[c];var d=this.editModeOn(c);if(a.fields)for(var b in a.fields)if(C(a.fields,b)){var e=a.fields[b];this.isFormField(e)&&("code_editor"==e.type&&y._w4g("code_editor_"+b),n(e.current_value)||(e.current_value=this.value(b,c,!0)),d&&(n(e.value)||(e.value=this.value(b,c,!1)),e.multiple_edit&&!n(e.multiple_edit._changed)&&n(e.multiple_edit.changed)&&(e.multiple_edit._changed=
e.multiple_edit.changed)))}}G&&G.activeElement&&(this.lastFocus=this.setLastFocus(G.activeElement))};f.setLastFocus=function(a){if("object"===typeof a){var c=a;a=c.id}else c=this.get(a);a={id:a};if(c)try{a.ss=c.selectionStart,a.se=c.selectionEnd}catch(d){a.ss=a.se=h}return a};f.enableMicroTemplates=function(a,c){var d=this,b;for(b in c)if(C(c,b))switch(typeof c[b]){case "object":"lib"!==b&&"thus"!==b&&"tuix"!==b&&d.enableMicroTemplates(a,c[b]);break;case "string":"type"===b||"value"===b&&d.isFormField(c)||
"current_value"===b||!c[b].m(/(\{\{|\{%|<%)/)||function(e,g,k){k=y._1mf("<% "+d.defineLibVarBeforeCode()+" %>"+e[g],h);e[g]=function(){return k(e)}}(c,b)}};f.displayAsTag=function(a,c){return a.show_as_a_label||c&&a.show_as_a_label_when_readonly?"label":a.show_as_a_span||c&&a.show_as_a_span_when_readonly?"span":!1};f.drawField=function(a,c,d,b,e,g,k,l,p,r,t,q,u,D,P){var m=this;n(b)||(b=m.field(d,c));n(b.id)||(b.id=d);x(b.enable_microtemplates_in_properties)&&m.enableMicroTemplates(b,b);var v=b.type,
R=b.upload,E=b.pick_items,H=b.disabled,A=b.validation||{},I="currency"==v,ka="date"==v||"datetime"==v,U=I||!!A.numeric,ba=b.decimal_places,ua,fa,w="",Qa;var V={};var va="multiselect"==v,za=!1,z={"class":""},Da={},wa={},Ea=!1,la=!1,Fa,pa=!1,Ra=!1,Sa=!1,Ta=!1,Ua=!1,Va=!1,Ga=!1,Ha=!1,xa=m.tuix.tabs[c];n(q)||(q=m.fieldIsReadonly(d,b,c));E&&H&&(q=!0);v&&"datetime"==v&&(q=!0);P?n(P.disabled_if)&&N.eval(P.disabled_if,m,P,h,r,h,h,b)&&(q=!0):n(b.disabled_if)&&N.eval(b.disabled_if,m,h,h,d,h,h,b)&&(q=!0);U&&
(ba=n(ba)?1*ba:I?2:h);!b["class"]&&b.css_class&&(b["class"]=b.css_class);b.snippet||n(t)||(t=m.value(d,c));n(t)||(t="");if(!n(r)){delete b.selected_option;if(t&&b.values){var S=_._16j(b.values)?b.values[t]:m.tuix.lovs&&m.tuix.lovs[b.values]&&m.tuix.lovs[b.values][t];_._16j(S)&&N._58(S,m,h,t,h,h,b,h,xa)&&(S=!1);if(S)b.selected_option=S;else if("radio"==v||"select"==v)b.current_value=t=""}(R||E||va)&&""!=t&&(V=m.pickedItemsArray(b,t));b.values&&_._mvq(b.values)&&m.tuix.lovs&&m.tuix.lovs[b.values]?b.values=
m.tuix.lovs[b.values]:b.load_values_from_organizer_path&&!b.values&&m.loadValuesFromOrganizerPath(b);for(ca in b)if(C(b,ca)&&"<"==ca[0]&&(Fa=ca.m(/^<(\/?)(\w+)/))){b[ca]&&_._mvq(b[ca])&&(ca+=b[ca]);var W={table:1,tr:2,td:3,th:4,br:5,div:6,p:7,span:8}[Fa[2]]||9;5>W&&(Va=!0);if(Fa[1]){if(!Ha){Ha=!0;var Ia="        ".split(" ")}Ia[9-W]+=ca}else{if(!Ga){Ga=!0;var Ja="        ".split(" ")}Ja[W-1]+=ca;1==W&&(Ua=!0);5==W&&(Ta=!0)}}}l||"button"!=v&&"submit"!=v||(b.pressed=!1);if(l||!n(r)){var ca=n(b.same_row)?
!x(b.same_row):!Ta&&(Ua||!Va);b._startNewRow=ca;S=1*b.indent||0;var ma=p||N._58(h,m,h,d,h,h,b)||b.hide_if_empty&&!t||q&&b.hide_when_readonly||x(g&&g.last?b.hide_with_previous_field:b.hide_if_previous_field_is_not_hidden)||x(g&&g.beforeLast?b.hide_with_previous_previous_field:b.hide_if_previous_previous_field_is_not_hidden)||x(b.hide_with_previous_indented_field)&&g&&g[S]||x(b.hide_with_previous_outdented_field)&&0<S&&g&&g[S-1]||x(b.hide_with_previous_indented_fields)&&!e[S]||n(b.hide_if_previous_value_is)&&
y._ash(b.hide_if_previous_value_isnt,k&&k.last)||n(b.hide_if_previous_value_isnt)&&!y._ash(b.hide_if_previous_value_isnt,k&&k.last)||n(b.hide_if_previous_outdented_value_is)&&0<S&&y._ash(b.hide_if_previous_outdented_value_is,k&&k[S-1])||n(b.hide_if_previous_outdented_value_isnt)&&0<S&&!y._ash(b.hide_if_previous_outdented_value_isnt,k&&k[S-1]);k&&(k.last=t,ca&&(k[S]=t));g&&(g.beforeLast=g.last,g.last=ma,ca&&(g[S]=ma),n(e.last)&&e.last===S||(e.last<S&&(e[S]=!1),e.last=S),ma||(e[S]=!0));b._startNewRow&&
!1!==m.shownTab&&m.shownTab==m.tuix.tab&&"editor"!=v&&"code_editor"!=v&&b._was_hidden_before&&!ma?b._showOnOpen=!0:b._startNewRow&&!1!==m.shownTab&&m.shownTab==m.tuix.tab&&"editor"!=v&&"code_editor"!=v&&!b._was_hidden_before&&ma&&(b._hideOnOpen=ua=!0,b._was_hidden_before=!0);if(ma){if(b._was_hidden_before=!0,!ua)return!1}else delete b._was_hidden_before;if(l)return;ma||!b.tall_as_possible||n(m.tallAsPossibleField)||(m.tallAsPossibleField=d,m.tallAsPossibleFieldType=b.type);b.multiple_edit&&(e="",
g=!q&&n(b.multiple_edit._changed)?x(b.multiple_edit._changed):b.multiple_edit.changed,x(b.multiple_edit.hide_ui)||!b.multiple_edit.select_list?(k=x(b.multiple_edit.hide_ui),e+=ja("type","checkbox","class","multiple_edit","id","multiple_edit__"+d,"checked",g,"style",k?"display: none;":"","disabled",q,"onchange",q||k?"":m.globalName+".meChange(this.checked, '"+K(d)+"');",">")):e+=Oa("class","multiple_edit","id","multiple_edit__"+d,"disabled",q,"onchange",m.globalName+'.meChange(this.value == 1, "'+
ha(d)+'");',Ca("value","","selected",!g,b.multiple_edit.select_list.not_changed_label||aa.notChanged)+Ca("value",1,"selected",g,b.multiple_edit.select_list.changed_label||aa.changed)),w+=e,e=h)}if(!(u&&D||"object"!=typeof b.values))if(u=[],D={},R&&x(R.reorder_items)||E&&x(E.reorder_items))for(W in e=t.s(","),e){if(C(e,W)){var Y=e[W];u.push(Y)}}else{for(Y in b.values)C(b.values,Y)&&(e=b.values[Y],"object"==typeof e?(n(e.parent)&&(la=!0,D[e.parent]=!0),N._58(e,m,h,Y,h,h,b,h,xa)||b.values_visible_if&&
!N.eval(b.values_visible_if,m,e,h,Y,h,h,b,h,xa)||(n(e.ord)?u.push([Y,e.ord]):n(e.label)?u.push([Y,e.label]):u.push([Y,Y]))):u.push([Y,e]));u.sort(N.sortArray);for(W in u)C(u,W)&&(u[W]=u[W][0])}if(displaySelectsAsToggles="select"==v&&b.onoff&&2==u.length)z.style="display: none;";if(q)z.readonly=!0,m.isButton(b)&&(z.disabled=!0,z["class"]+="disabled ");else if(b.error&&(z["class"]+="zenario_field_with_error "),A.required||A.required_if_not_hidden)z["class"]+="zenario_required_field ";if(!b.pick_items&&
!b.upload&&"radio"!=v&&"checkbox"!=v&&"checkboxes"!=v&&(fa=m.displayAsTag(b,q))){u=U?K(N._k3p(1*t,ba)):K(t);if("select"==v||"radios"==v)b.values&&b.values[t]?u=K(b.values[t]):b.empty_value&&(u=K(b.empty_value));w+=ya(fa,"id",fa+"__"+d,"class",b.css_class,"style",b.style,u)}else if(A=b.snippet){for(Qa in Wa)fa=Wa[Qa],A[fa]&&(w+=ya(fa,"id",fa+"__"+d,"class",A[fa+"_class"],"style",A[fa+"_style"],K(A[fa])));!ma&&A.show_split_values_from&&m.splitValues&&m.splitValues[A.show_split_values_from]&&(w+=m.splitValues[A.show_split_values_from],
delete m.splitValues[A.show_split_values_from]);A.html&&(w+=ea("id","snippet__"+d,y.unfun(A.html)));A.microtemplate&&(w+=ia("id","microtemplate__"+d,m.microTemplate(A.microtemplate,b)));A.url&&(w=x(A.cache)?m.cachedAJAXSnippets[A.url]?w+m.cachedAJAXSnippets[A.url]:w+(m.cachedAJAXSnippets[A.url]=y._w3i(y._ozg(A.url))):w+y._w3i(y._ozg(A.url)))}else if(("checkboxes"==v||"radios"==v)&&!n(r))q&&b.display_as_text_when_readonly?w+=K(m.displaySelectedItems(d,b,t,c)):b.values&&(la=_._1d5({},b),V=m.pickedItemsArray(b,
t),la.name=b.name||d,la.type="checkboxes"==v?"checkbox":"radio",q&&(la.disabled=!0),w=_._ruc(u)?w+ta("class","zenario_no_values_message",K(b.no_values_message)):w+m.hierarchicalBoxes(a,c,d,t,b,la,q,V,u,D)),w+=m.displayMissingItems(b);else if(R||E||va){var Xa=va||E&&x(E.multiple_select)||R&&x(R.multi);I={id:d,pickerHTML:"",wrappedId:"name_for_"+d,readOnly:q};q||(E&&(E.target_path||E.path)&&!x(E.hide_select_button)&&(I.select={onclick:m.globalName+".pickItems('"+K(d)+"');",phrase:E.select_phrase||aa.selectDotDotDot}),
R&&(I.upload={onclick:m.globalName+".upload('"+K(d)+"');",phrase:R.upload_phrase||aa.uploadDotDotDot},x(R.drag_and_drop)&&m.upload(d,!0),O.Dropbox&&Dropbox.isBrowserSupported()&&(I.dropbox={onclick:m.globalName+".chooseFromDropbox('"+K(d)+"');",phrase:R.dropbox_phrase||aa.dropboxDotDotDot})));I.pickerHTML+=Oa("id",d,"multiple",Xa,"class",b.css_class,"style",b.style,">");!b.values||_._ruc(V)&&!va||(I.pickerHTML+=m.hierarchicalSelect(V,d,b,xa,u,la,D));I.pickerHTML+="</select>";w+=m.microTemplate(m.mtPrefix+
"_picked_items",I);a.after(function(){va?m.setupMultipleSelect(b,d,c,q||H):m.setupPickedItems(b,d,c,q,Xa)})}else if(b.captcha)w+=ja("type","hidden","style","display: none","id",d,"value",t),t||(w+=ea("style","display: inline-block","id","captcha__"+d),a.after(function(){grecaptcha.render("captcha__"+d,_._1d5({sitekey:google_recaptcha.sitekey,callback:function(B){m.get(d).value=B}},b.captcha))}));else if(b.image)w+=ia("class","zenario_image_in_form",ya("img","id","_image_for__"+d,"src",y._ozg(b.image.url),
"width",b.image.width,"height",b.image.height)),b.image_crop_tool&&a.after(function(){var B,J,T,da,Z=$(m.get("_image_for__"+d));Z.rcrop(b.image_crop_tool);if(t){var L=(""+t).s(",");var qa=new y._mll;var na=new y._mll;var ra=new y._mll;Z.on("load",function(){qa.done()});Z.on("rcrop-ready",function(){na.done()});ra.add(qa).add(na).after(function(){(T=1*L[4])&&(da=1*L[5])&&(B=Z[0].naturalWidth||Z[0].width,J=Z[0].naturalHeight||Z[0].height,B!=T&&(L[0]=Math.floor(L[0]*B/T),L[2]=Math.floor(L[2]*B/T)),J!=
da&&(L[1]=Math.floor(L[1]*J/da),L[3]=Math.floor(L[3]*J/da)));Z.rcrop("resize",1*L[2],1*L[3],1*L[0],1*L[1])})}});else if(v){Da.onchange=r?"lib.fieldChange('"+K(d)+"', '"+K(r)+"');":"lib.fieldChange('"+K(d)+"');";H&&(z["class"]+="disabled ");U&&(z.onkeyup=(z.onkeyup||"")+"lib.keepNumeric(this, "+!!b.allow_negative_numbers+", "+ba+")");b.return_key_presses_button&&!q&&(z.onkeyup=(z.onkeyup||"")+"if (event.keyCode == 13) {zenario.stop(event);$('#"+K(b.return_key_presses_button)+"').click();return false;}");
x(b.multiple_edit)&&!q&&(z.onkeyup=(z.onkeyup||"")+"if (event && event.keyCode == 9) return true; lib.meMarkChanged('"+K(d)+"', this.value, '"+K(b.value)+"');");z["class"]+="input_"+v;switch(v){case "select":b.slider&&(za=!0,w+=m.drawSlider(a,d,b,q,!0));q&&(z.disabled=!0);w+="<select";break;case "code_editor":w+="<div";z["class"]=" zenario_embedded_ace_editor";a.after(function(){var B=ace.edit(d),J=!1;B.session.setUseSoftTabs(!1);B.setShowPrintMargin(!1);q&&(B.setReadOnly(!0),B.setBehavioursEnabled(!1));
x(b.wrap_text)&&B.session.setUseWrapMode(!0);B.session.setOption("useWorker",!1);B.on("blur",function(qa){J&&y._9fm("code_editor_"+d,function(){m.fieldChange(d)},0);J=!1});B.on("change",function(qa){m.markAsChanged();J=!0;y._9fm("code_editor_"+d,function(){m.fieldChange(d)},5E3)});var T;if(T=b.language)try{var da="html"==T;T=T.m(/\.twig\.html$/i)?"ace/mode/twig":T.m(/\./)?ace.require("ace/ext/modelist").getModeForPath(T).mode:"ace/mode/"+T;var Z=ace.require("ace/ext/language_tools");B.session.setMode(T);
var L=b.code_editor_options||{};n(L.enableBasicAutocompletion)||(L.enableBasicAutocompletion=!da);n(L.enableLiveAutocompletion)||(L.enableLiveAutocompletion=!da);da?Z.setCompleters([]):Z.setCompleters([Z.keyWordCompleter]);B.setOptions(L)}catch(qa){console.log("Ace editor could not load this language",T)}B.$blockScrolling=Infinity;m.setCodeEditorPosition(B,m.editingPositions[c+"/"+d],!0)});break;case "color_picker":case "colour_picker":w+="<input";z["class"]=" zenario_color_picker";a.after(function(){var B=
b.color_picker_options||b.colour_picker_options||{};B.disabled=q;B.preferredFormat=B.preferredFormat||"hex";B.showInput=!0;$(m.get(d)).spectrum(B)});break;case "editor":w+="<textarea";b.editor_type||(b.editor_type="basic");q&&(b.editor_type="readonly");if(V="readonly"!=b.editor_type&&"basic"!=b.editor_type){var sa=M.skinEditorOptions;z.style="visibility: hidden;"}R=function(B){M._chb(!0,F,m.get("row__"+(B.editorId||B.id)));var J;(J=B.editorContainer)&&(J=$(B.editorContainer).find("iframe"))&&(J=J[0])&&
(J=J.contentWindow)&&M._chb(!0,F,J);b.tall_as_possible&&Za._dvg()};switch(b.editor_type){case "readonly":var X={promotion:!1,document_base_url:F,paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,inline:!1,menubar:!1,statusbar:!1,plugins:"advlist autolink lists link image charmap anchor searchreplace code fullscreen nonbreaking table directionality fullscreen".split(" "),image_advtab:!0,visual_table_class:" ",convert_urls:!0,readonly:!0,inline_styles:!1,allow_events:!0,allow_script_urls:!0,
browser_spellcheck:!0,relative_urls:!y.slashesInURL,content_css:h,toolbar:!1,font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",oninit:h};z["class"]=" tinymce_readonly";break;case "basic":X={promotion:!1,document_base_url:F,paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,plugins:["autolink","link","charmap","emoticons"],browser_spellcheck:!0,height:250,menubar:!1,toolbar:"undo redo | styles | fontsize | blocks | bold italic removeformat | link unlink | charmap emoticons"};
break;case "standard":X={promotion:!1,document_base_url:F,paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,inline:!1,menubar:!1,statusbar:!1,plugins:"advlist autolink lists link image charmap emoticons anchor searchreplace code fullscreen nonbreaking table directionality fullscreen".split(" "),image_advtab:!0,visual_table_class:" ",convert_urls:!0,readonly:!1,inline_styles:!1,allow_events:!0,allow_script_urls:!0,browser_spellcheck:!0,relative_urls:!y.slashesInURL,content_css:h,toolbar:"undo redo | styles | fontsize | blocks | bold italic underline strikethrough forecolor backcolor removeformat | numlist bullist | blockquote outdent indent | charmap emoticons | code fullscreen",
font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",oninit:h};z["class"]=" tinymce";break;case "summary":X={promotion:!1,document_base_url:F,paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,inline:!1,menubar:!1,statusbar:!1,plugins:"advlist autolink lists link image charmap emoticons anchor searchreplace code fullscreen nonbreaking table directionality fullscreen".split(" "),convert_urls:!0,readonly:!1,inline_styles:!1,allow_events:!0,allow_script_urls:!0,
image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,relative_urls:!1,toolbar:"undo redo | styles | fontsize | blocks | bold italic underline strikethrough forecolor backcolor removeformat | link unlink | charmap emoticons | code fullscreen",font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",file_picker_callback:M.fileBrowser,init_instance_callback:R};z["class"]=" tinymce_with_links";break;case "standard_with_images":X={promotion:!1,document_base_url:F,
paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,inline:!1,menubar:!0,statusbar:!1,plugins:"advlist autolink lists link image charmap emoticons anchor searchreplace code fullscreen nonbreaking table directionality fullscreen".split(" "),convert_urls:!0,readonly:!1,inline_styles:!1,allow_events:!0,allow_script_urls:!0,image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,relative_urls:!1,toolbar:"undo redo | blocks | styles | fontsize | bold italic underline strikethrough forecolor backcolor removeformat | image | numlist bullist | blockquote outdent indent | charmap emoticons | code fullscreen",
font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",menu:{insert:{title:"Insert",items:"link | anchor hr charmap"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},tools:{title:"Tools",items:"searchreplace | code"}},removed_menuitems:"file newdocument restoredraft print",file_picker_callback:M.fileBrowser,init_instance_callback:R};z["class"]=" tinymce_with_images";break;case "standard_with_links":X={promotion:!1,document_base_url:F,
paste_preprocess:M.tinyMCEPasteRreprocess,paste_data_images:!1,inline:!1,menubar:!0,statusbar:!1,plugins:"advlist autolink lists link image charmap emoticons anchor searchreplace code fullscreen nonbreaking table directionality fullscreen".split(" "),convert_urls:!0,readonly:!1,inline_styles:!1,allow_events:!0,allow_script_urls:!0,image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,relative_urls:!1,toolbar:"undo redo | styles | fontsize | blocks | bold italic underline strikethrough superscript subscript forecolor backcolor removeformat | link unlink | numlist bullist | blockquote outdent indent | alignleft aligncenter alignright alignjustify | charmap emoticons | code fullscreen",
font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",menu:{insert:{title:"Insert",items:"link | anchor hr charmap"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},tools:{title:"Tools",items:"searchreplace | code"}},removed_menuitems:"file newdocument restoredraft print",file_picker_callback:M.fileBrowser,init_instance_callback:R};z["class"]=" tinymce_with_links";break;case "full_featured":X={promotion:!1,document_base_url:F,paste_preprocess:M.tinyMCEPasteRreprocess,
paste_data_images:!1,height:"auto",inline:!1,menubar:!0,statusbar:!1,plugins:"advlist autolink lists link image charmap emoticons anchor searchreplace code fullscreen nonbreaking table directionality visualblocks fullscreen".split(" "),convert_urls:!0,readonly:!1,inline_styles:!1,allow_events:!0,allow_script_urls:!0,image_advtab:!0,visual_table_class:" ",browser_spellcheck:!0,relative_urls:!1,toolbar:"undo redo | image link unlink | styles | fontsize | blocks | bold italic underline | removeformat | alignleft aligncenter alignright alignjustify | outdent indent | bullist numlist | forecolor backcolor | charmap emoticons",
font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 24pt 30pt 36pt",menu:{edit:{title:"Edit",items:"undo redo | cut copy paste | selectall | searchreplace"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat removeformat"+(sa&&sa.style_formats?" | styles":"")+" "+(sa&&sa.font_family_formats?"fontfamily ":"")+"align"},insert:{title:"Insert",items:"image link | anchor hr charmap"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"},
view:{title:"View",items:"code | visualblocks | fullscreen"}},removed_menuitems:"file newdocument restoredraft print",file_picker_callback:M.fileBrowser,init_instance_callback:R},z["class"]=" tinymce_with_images_and_links"}_._16j(b.editor_options)&&(X=_._1d5(X,b.editor_options));X.toolbar&&_._ruc(X.style_formats)&&(X.toolbar=X.toolbar.r("styles |",""));V&&sa&&(X=_._1d5(X,sa));X.setup=function(B){B.on("change",function(J){m.fieldChange(J.id)})};a.after(function(){var B=$(m.get(d)),J=m.get("zenario_abtab");
try{B.tinymce().remove()}catch(da){}if(J){var T=J.style.display;J.style.display="block"}B.tinymce(X);J&&(J.style.display=T)});break;case "button":case "submit":case "toggle":Ra=!0;x(b.use_button_tag)?(w+="<button",Sa=!0):(w+="<input",z.type="button");if(!q||x(b.can_be_pressed_in_view_mode))Da.onclick="lib.clickButton('"+d+"');",delete z.disabled;"toggle"==v&&(z["class"]+=b.pressed?" pressed":" not_pressed");break;default:if("textarea"==v)w+="<textarea";else if(ka){pa=!0;w+="<input";z.type="text";
z["class"]+=" zenario_datepicker";var Ka=!!x(b.allow_typing_in_date_field),Ya=M.siteSettings&&M.siteSettings.organizer_date_format||y.dpf;var cb=b.year_range?b.year_range:"c-15:c+2";Ka||(z.readonly="readonly");b.show_date_format_as_placeholder&&(z.placeholder=m.dateFormatToPlaceholder(Ya));q||Ka||(z.onkeyup=(z.onkeyup||"")+"zenario._gk5(this, event, '"+K(d)+"');");a.after(function(){var B=$(m.get(d)),J=!!x(b.change_month_and_year),T=!!x(b.no_past_dates),da="";B.datepicker({changeMonth:J,changeYear:J,
minDate:T?0:null,yearRange:cb,dateFormat:Ya,altField:m.get("_value_for__"+d),altFormat:"yy-mm-dd",showOn:"focus",disabled:q&&!Ka,onSelect:function(Z,L){B.change()},beforeShow:function(Z,L){da=L.input.val()},onClose:function(Z,L){try{var qa=L.input.val(),na=$.datepicker.parseDate(L.settings.dateFormat,L.input.val(),L.settings),ra=$.datepicker.formatDate(L.settings.dateFormat,na,L.settings),La=$.datepicker.formatDate("yy-mm-dd",na,L.settings);ra!==qa&&(m.setFieldValue(d,ra,La),$(m.get(d)).change())}catch(gb){try{na=
$.datepicker.parseDate(L.settings.dateFormat,da,L.settings),ra=$.datepicker.formatDate(L.settings.dateFormat,na,L.settings),La=$.datepicker.formatDate("yy-mm-dd",na,L.settings),m.setFieldValue(d,ra,La),$(m.get(d)).change()}catch(hb){m.setFieldValue(d,""),$(m.get(d)).change()}}}})})}else"url"==v?(w+="<input",z.type="url",z.placeholder="http://example.com",z.onblur=(z.onblur||"")+"if(this.value && !this.value.m('://') && $.trim(this.value)[0] != '#') this.value = 'http://' + this.value;"):I?(w+="<input",
z.type="text",z.onfocus="this.value = $(this).data('og_value');"+(z.onfocus||""),z.onblur="$(this).data('og_value', this.value); this.value = zenarioT._k3p(1*this.value, "+ba+");"+(z.onblur||"")):("text"==v&&b.spinner&&a.after(function(){var B=$(m.get(d)),J=_.clone(b.spinner);J.disabled=q;J.change=function(){B.change()};B.spinner(J);J.units&&B.after(ea("class","zenario_spinner_unit",K(J.units)))}),b.slider&&(za=!0,w+=m.drawSlider(a,d,b,q,!0)),"text"==v&&b.values&&!q&&(w+='<span class="zenario_textbox_with_autocomplete">',
Ea=!0),"checkbox"==v&&b.onoff&&(z["class"]="onoffswitch-checkbox",w+='<div class="onoffswitch">'),w+="<input",z.type=v);b.redraw_immediately_onchange&&(z.onkeyup=(z.onkeyup||"")+"if (lib.redrawImmediatelyWhenChanged(this, event, '"+K(d)+"', '"+K(b.value)+"', "+(b.value==t?"false":"true")+")) return false;");m.addExtraAttsForTextFields(b,z)}if("checkbox"==v||"radio"==v)x(t)&&(z.checked="checked"),t=h,q&&(z.disabled=!0),x(b.indeterminate)&&a.after(function(){var B;if(B=m.get(d))B.indeterminate=!0});
za&&(z.onchange='$("#zenario_slider_for__'+ha(d)+'").slider("value", $(this).val());',z.onkeyup=(z.onkeyup||"")+'$("#zenario_slider_for__'+ha(d)+'").slider("value", $(this).val());');n(r)?(V=$.extend({},b,P),wa.id=d+"___"+r,z["class"]+=" control_for__"+d):(V=b,wa.id=d);"radio"==v&&b.name||(wa.name=d);q&&(wa.placeholder="");w+=m.outputAtts(d,V,z,Da,wa);V=K(Ra?b.value:t,!1,"asis");z="";"select"==v?w+=">":Sa?(w+=">",b.icon_left&&(w+='<i class="'+K(b.icon_left)+'" aria-hidden="true"></i>'),w+=V,b.icon_right&&
(w+='<i class="'+K(b.icon_right)+'" aria-hidden="true"></i>'),w+="</button>"):"textarea"==v||"editor"==v?w+=">"+V+"</textarea>":"code_editor"==v?w+=">"+V+"</div>":ka?(w+=' value="'+K(y._33l(t,"datetime"==v))+'"/>',w+=ja("type","hidden","id","_value_for__"+d,"value",t),q||b.hide_clear_button||(w+=ja("type","button","class","zenario_remove_date","value","x","onclick",m.globalName+'.blankField("'+ha(d)+'"); $('+m.globalName+'.get("'+ha(d)+'")).change();'))):w=I?w+(' value="'+K(N._k3p(1*t,ba))+'" data-og_value="'+
s.numberFormat(1*t,ba,".","")+'"/>'):n(t)?w+(' value="'+V+'"/>'):w+"/>";"checkbox"==v&&b.onoff&&(w+=ta("class","onoffswitch-label","for",d,ea("class","onoffswitch-inner")+ea("class","onoffswitch-switch"))+"</div>");"select"==v&&(b.empty_value&&(z=Ca("value","","data-hide_in_iconselectmenu",1,"selected",!t,K(b.empty_value)),b.show_empty_value_at_end||(w+=z,z="")),b.values&&(V={},V[t]=!0,w+=m.hierarchicalSelect(V,d,b,xa,u,la,D)),w=w+(z+"</select>")+m.displayMissingItems(b),displaySelectsAsToggles&&
(w+=ia("class","onoffswitch",ja("type","checkbox","id","zfab_onofff__"+d,"class","onoffswitch-checkbox","checked",t!=u[1])+ta("class","onoffswitch-label","for","zfab_onofff__"+d,ea("class","onoffswitch-inner")+ea("class","onoffswitch-switch"))),function(B,J,T){a.after(function(){$(m.get("zfab_onofff__"+B)).change(function(da){$selectList=$(m.get(B));$selectList.val(this.checked?T:J);$selectList.change()})})}(d,u[1],u[0])));if(Ea){var Ma=[];for(W in u)C(u,W)&&(Y=u[W],e=b.values[Y],_._mvq(e)?Ma.push({label:e,
value:Y}):Ma.push({label:e.label,value:Y}));a.after(function(){var B=$(m.get(d)),J={source:Ma,minLength:b.autocomplete_min_length||0,appendTo:B.parent()};b.return_key_presses_button&&(J.select=function(){setTimeout(function(){$("#"+b.return_key_presses_button).click()},0)});B.autocomplete(J);n(b.autocomplete)&&B.attr("autocomplete",b.autocomplete);B.focus(function(){B.autocomplete("widget").is(":visible")||B.autocomplete("search","")})});w+=ja("type","button","class","zenario_open_autocomplete","value",
"\u25be","onclick","$("+m.globalName+'.get("'+ha(d)+'")).autocomplete("search", "");')}Ea&&(w+="</span>")}n(r)||("url"!=v||q||(w+="&nbsp; "+ja("type","button","class","submit","value",aa.test,"onclick",m.globalName+'.testURL("'+ha(d)+'");'),pa=!0),!b.label||"checkbox"!=v&&"radio"!=v||(w+=" "+ta("class",b.label_class,"for",d,"id","label_for__"+d,K(b.label)),pa=!0),n(b.post_field_label)&&(w+=" "+ta("class",b.label_class,"for",d,"id","label_for__"+d,K(b.post_field_label)),pa=!0),b.show_copy_text_button&&
y._8qy()&&(r=m.defineLibVarBeforeCode()+"lib.copyField(this, '"+y._gfp(d)+"');",v=m.vaPhrase("copy"),w+=ea("class","zenario_copy","onclick",r,"title",v,""),pa=!0),b.tooltip&&(w+=m.postFieldTooltip(b),pa=!0),pa&&(w=ea("class","zenario_field_widget_wrap",w)),b.progress_bar&&(w+=ia("id","progressbar__"+d,"class","zfab_progressbar"),a.after(function(){m.updateProgressBar(d);$(m.get(d)).on("input",function(){m.updateProgressBar(d)})})),n(b.pre_field_text)&&(w=K(y.unfun(b.pre_field_text))+w),n(b.post_field_text)&&
(w+=K(y.unfun(b.post_field_text))),n(b.pre_field_html)&&(w=y.unfun(b.pre_field_html)+w),n(b.post_field_html)&&(w+=y.unfun(b.post_field_html)),b.notices_above&&(w=m.drawNotices(b.notices_above)+w),b.notices_below&&(w+=m.drawNotices(b.notices_below)),Ga&&(w=Ja.join("")+w),Ha&&(w+=Ia.join("")),za&&(w+=m.drawSlider(a,d,b,q,!1)));return w};f.drawNotices=function(a){var c,d="";if(!_._ruc(a))for(c in a)if(C(a,c)){var b=a[c];Pa[b.type]&&!N._58(b,this,h,c)&&(d+=ia("class","zenario_notice zenario_notice_"+
b.type+("large"==b.size?" large":" small"),b.html?b.message:y._cdl(b.message,!0)))}return d};f.postFieldTooltip=function(a){var c=a.tooltip;_._4ty(c)&&(c=c());if(""===$.trim(c))return"";a.tooltip_link?(c='<a href="'+a.tooltip_link+'"',a.tooltip_link_open_in_new_window&&(c+=' target="blank"'),c+=">?</a>"):c="?";return ea("class","zenario_field_tooltip","title",a.tooltip,c)};f.addExtraAttsForTextFields=function(a,c){};f.copyField=function(a,c){c=this.readField(c);n(c)&&y.copy(c)&&(this.tooltips(a,{content:this.vaPhrase("copied")}),
$(a).hide(),setTimeout(function(){$(a).show()},0))};f.updateProgressBar=function(a){cnt=$(this.get(a)).val().length;var c=$("#progressbar__"+a);switch(a){case "title":if(1>cnt){var d="poor";var b=0}else 12>cnt?(d="poor",b=8>cnt?10:20):26>cnt?(d="medium",b=20>cnt?30:23>cnt?40:50):70>cnt?(d="good",b=45>cnt?60:50>cnt?70:55>cnt?80:60>cnt?90:100):(d=120>cnt?"medium":"poor",b=100);break;case "description":1>cnt?(d="poor",b=0):50>cnt?(d="poor",b=8>cnt?10:20):100>cnt?(d="medium",b=60>cnt?30:80>cnt?40:50):
156>cnt?(d="good",b=110>cnt?60:120>cnt?70:130>cnt?80:140>cnt?90:100):(d=175>cnt?"medium":"poor",b=100);break;case "alias":1>cnt?(d="poor",b=10):(d="good",b=100)}c.progressbar({value:b});c.removeClass("poor medium good").addClass(d)};var db={id:!0,name:!0,size:!0,maxlength:!0,accesskey:!0,"class":!0,cols:!0,dir:!0,readonly:!0,rows:!0,style:!0,tabindex:!0,title:!0,disabled:!0,onblur:!0,onchange:!0,onclick:!0,ondblclick:!0,onfocus:!0,oninput:!0,onpaste:!0,onmousedown:!0,onmousemove:!0,onmouseout:!0,
onmouseover:!0,onmouseup:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onselect:!0,autocomplete:!0,autofocus:!0,max:!0,min:!0,pattern:!0,placeholder:!0,required:!0,step:!0},Wa="hr h1 h2 h3 h4 label div p span".split(" ");f.outputAtts=function(a,c,d,b,e,g){var k,l="";for(k in c)if(C(c,k)&&!(e&&n(e[k])||!g&&!db[k]&&"data-"!=k.substr(0,5)))if("disabled"==k||"readonly"==k||"selected"==k){if(x(c[k])||d&&x(d[k])&&delete d[k])l+=" "+k+'="'+k+'"'}else{var p=this.defineLibVarBeforeCode(k);""!==p&&(p+="var fieldCodeName = '"+
K(a)+"', field = lib.field(fieldCodeName); ");l+=" "+k+'="'+p;d&&d[k]&&(l+=d[k]+" ",delete d[k]);l+=K(c[k]);b&&b[k]&&(l+=" "+b[k],delete b[k]);l+='"'}e&&(l+=this.outputAtts(a,e,!1,!1,!1,!0));d&&(l+=this.outputAtts(a,d,!1,!1,!1,!0));b&&(l+=this.outputAtts(a,b,!1,!1,!1,!0));return l};f.defineLibVarBeforeCode=function(a){if(n(a)&&"on"!=a.substr(0,2))return"";this.globalName||(O[this.globalName=N._wv4()]=this);return"var lib = "+K(this.globalName)+"; "};f.testURL=function(a){var c=this.get(a).value;a=
this.get(this.onThisRow("target_blank_",a))||this.get(this.onThisRow("target_blank",a));c&&(a&&2==a.value?$.colorbox({href:c,iframe:!0,width:"95%",height:"95%",className:"zenario_admin_cb zenario_url_test_colorbox"}):O.open(y._ozg(c)))};f.keepNumeric=function(a,c,d){var b=a.value,e="";c&&"-"==b[0]&&(e="-",b=b.substr(1));b=b.r(/[^\d\.]/g,"");b=b.r(/\.(.*)\./g,".$1");if(d!==h)switch(d){case 0:b=b.r(/\.\d*/,"");break;case 1:b=b.r(/(\d*\.\d)\d*/,"$1");break;case 2:b=b.r(/(\d*\.\d\d)\d*/,"$1");break;case 3:b=
b.r(/(\d*\.\d\d\d)\d*/,"$1");break;case 4:b=b.r(/(\d*\.\d\d\d\d)\d*/,"$1")}b=e+b;a.value!=b&&(a.value=b)};f.hierarchicalSelect=function(a,c,d,b,e,g,k,l){var p="",r,t;for(t in e)if(C(e,t)){var q=e[t];var u=d.values[q];if(u!==h){var D=r=!1;if(_._mvq(u))u={label:u};else if(x(u.disabled)||u.disabled_if&&N.eval(u.disabled_if,this,u,h,q,h,h,d,h,b)||d.values_disabled_if&&N.eval(d.values_disabled_if,this,u,h,q,h,h,d,h,b))r=!0;a[q]&&(D=!0);var P=!x(u.hide_when_children_are_not_visible);if(!n(l)&&g&&k[q]){if((childrenHTML=
this.hierarchicalSelect(a,c,d,b,e,g,k,q))||P)p+=ya("optgroup","label",u,"disabled",!childrenHTML,childrenHTML)}else P&&l===u.parent&&(p+="<option "+this.outputAtts(c,u,!1,!1,{disabled:r,selected:D,value:q})+">"+K(u,!1,!0)+"</option>")}}return p};f.setupMultipleSelect=function(a,c,d,b){var e=this,g=!1;d=$(e.get(c));d.multiselect({columns:a.cols,texts:{placeholder:a.empty_value||aa.selectListSelect,overridePlaceholder:a.placeholder},onOptionClick:function(){g=!0},onControlClose:function(){g&&e.fieldChange(c)}});
b&&d.multiselect("disable")};f.typeaheadSearchEnabled=function(a,c,d){};f.typeaheadSearchAJAXURL=function(a,c,d){};f.parseTypeaheadSearch=function(a,c,d,b,e){};var Aa=!1;f.setupPickedItems=function(a,c,d,b,e){var g=this,k,l,p=a.pick_items||{},r=a.upload||{},t=x(p.allow_typing_anything),q=x(r.reorder_items||p.reorder_items);g.typeaheadSearchEnabled(a,c,d)&&(k=g.typeaheadSearchAJAXURL(a,c,d))&&(l="_search");l=$(g.get(c)).tokenize({datas:k,searchParam:l,debounce:200,nbDropdownElements:30,sortable:q,
placeholder:p.nothing_selected_phrase||r.nothing_selected_phrase||aa.nothing_selected,onAddToken:function(u,D,P){g._tokenizeNoRecurse||(Aa&&(clearTimeout(Aa),Aa=!1),e?g.pickedItemsChanged(c,a):g.addToPickedItems(u,c,d),g.$getPickItemsInput(c).focus(),g.tooltips("#name_for_"+c+" .TokensContainer *[title]"))},maxElements:e?0:1,parseData:function(u){return g.parseTypeaheadSearch(g.tuix.tabs[d].fields[c],c,d,b,u)},formatTokenHTML:function(u,D){var P=g.tuix.tabs[d].fields[c];return P.values&&P.values[u]?
g.drawPickedItem(u,c,P,b):t?(P.values=P.values||{},P.values[u]=D,g.drawPickedItem(u,c,P,b)):!1},onRemoveToken:function(u,D){g._tokenizeNoRecurse||g.removeFromPickedItems(u,c,d)}});b?l.disable():(q&&l.container.addClass("zenario_reorder_items"),k||t?(l.container.addClass("zenario_picker_with_typeahead"),t&&g.$getPickItemsInput(c).blur(function(){var u,D;if(u=g.$getPickItemsInput(c).val())Aa=setTimeout(function(){D={};D[u]=u;g.addToPickedItems(D,c,d)},150)})):l.disableTypeAhead())};f.chooseFromDropbox=
function(a){var c=this,d,b,e;if(!(d=c.field(a))||!d.upload)return!1;if(e=d.upload.extensions||d.upload.accept)e=_._mvq(e)?e.s(","):_._i32(e);for(b in e)if(C(e,b)){var g=e[b];var k=g.s("/");n(k[1])?e[b]="images"==k[0]?"image":k[0]:"text"!=g&&"documents"!=g&&"images"!=g&&"video"!=g&&"audio"!=g&&"."!=g.substr(0,1)&&(e[b]="."+g)}d={cancel:function(){M._28e()},linkType:"direct",multiselect:!!x(d.upload.multi),extensions:e,success:function(l){M._fsm();var p,r=new y.callback;for(p in l)if(C(l,p)){var t=
l[p];r.add(y.ajax(c.ajaxURL()+"&fetchFromDropbox=1",t,!0))}r.after(function(){var q,u,D,P="";if(!(D=c.field(a))||!D.upload)return!1;for(q in arguments)C(arguments,q)&&((u=arguments[q])&&u.id&&(P+=","+u.id),c.setFileDetails(D,u));""!==P&&c.addToPickedItems(P,a);M._28e()})}};M._fsm();Dropbox.choose(d)};f.setFileDetails=function(a,c){a.values||(a.values={});c.label=this.formatLabelFromFile(c);a.values[c.id]=c};f.formatLabelFromFile=function(a){if(n(a.filename)){var c=a.filename;a.ssc&&(c+=" [checksum "+
a.short_checksum+"]");x(a.width)&&x(a.height)&&(c+=" ["+a.width+" \u00d7 "+a.height+"px]")}else(fileDetails=y._x45(a.id))&&(fileDetails=fileDetails.s("/"))&&fileDetails[1]?(c=fileDetails[1],x(fileDetails[2])&&x(fileDetails[3])&&(c+=" ["+fileDetails[2]+" \u00d7 "+fileDetails[3]+"px]")):c=a.id;return c};f.upload=function(a,c){var d=this,b;if(!(b=d.field(a))||!b.upload)return!1;b={class_name:b.class_name,upload:b.upload};d.uploadCallback=function(e){if(e){var g,k,l,p="";if(!(l=d.field(a))||!l.upload)return!1;
for(g in e)C(e,g)&&(k=e[g])&&k.id&&(p+=","+k.id,d.setFileDetails(l,k));""!==p&&d.addToPickedItems(p,a)}};c?d.enableDragDropUpload():N._1st(d,b,h,h,h,{fileUpload:1},h,d.ajaxURL())};f.ajaxURL=function(){return F+"zenario/ajax.php?method_call=handleAdminBoxAJAX&path="+Ba(this.path)};f.enableDragDropUpload=function(){};f.disableDragDropUpload=function(){};f.uploadComplete=function(a){n(this.uploadCallback)&&this.uploadCallback(a);delete this.uploadCallback};f.drawSlider=function(a,c,d,b,e){var g=this,
k=_.clone(d.slider);d="";if(x(k.before_field)?e:!e)b&&(d+='<div class="ui-disabled">'),d+=ia("id","zenario_slider_for__"+c,"class",k["class"],"style",k.style),b&&(d+="</div>"),a.after(function(){var l;if(l=g.get("zenario_slider_for__"+c))n(k.min)&&(k.min=y.num(k.min)),n(k.max)&&(k.max=y.num(k.max)),n(k.step)&&(k.step=y.num(k.step)),k.disabled=!g.editModeOn(),k.value=$(g.get(c)).val(),k.slide=function(p,r){$(g.get(c)).val(r.value)},k.change=function(p,r){g.fieldChange(c)},$(l).slider(k)});return d};
f.lookupFileDetails=function(a){return M._fw7(a)};f.displayMissingItems=function(a){var c="",d=this.tuix.missing_items_warning,b=[],e;if(!n(d)||!d||!a.value)return"";var g=(a.value+"").s(",");for(e in g)if(C(g,e)){var k=g[e];a.values&&a.values[k]||b.push("#"+K(k))}b.length&&(c=ia("class","zenario_missing_items",y._yqq(d,{items:b.join(", ")})));return c};f.pickedItemsArray=function(a,c){if(!1===c||!n(c))return{};a.values&&_._mvq(a.values)&&this.tuix.lovs&&this.tuix.lovs[a.values]&&(a.values=this.tuix.lovs[a.values]);
if(!(0!==c&&"0"!==c||a.values&&(a.values[0]||a.values["0"])))return{};c=(c+"").s(",");var d={},b,e,g,k,l;a._display_value=!1;for(k in c)if(C(c,k)&&(l=c[k])){if(a.upload&&(g=y._x45(l))&&(g=g.s("/"))&&g[1])d[l]=g[1],x(g[2])&&x(g[3])&&(d[l]+=" ["+g[2]+" \u00d7 "+g[3]+"px]");else if(a.values&&a.values[l]&&"string"==typeof a.values[l])d[l]=a.values[l];else if(a.values&&a.values[l]&&a.values[l].label)d[l]=a.values[l].label;else if(((e=a.pick_items&&a.pick_items.target_path)||(e=a.pick_items&&a.pick_items.path))&&
(b=M._mym(e,l,h,a.pick_items.add_conductor_vars_to_type_ahead_search?this.getConductorVars():h))){a.values||(a.values={});var p=M._ac1(b,l);var r=b.items&&b.items[l]||{missing:!0};d[l]=p;a.values[l]={missing:r.missing,image:r.image,css_class:r.css_class||b.item&&b.item.css_class,label:p}}else a.upload&&l==1*l&&(g=this.lookupFileDetails(l))?(this.setFileDetails(a,g),d[l]=a.values[l]):d[l]=l;!1===a._display_value&&(a._display_value=d[l])}return d};f.pickedItemsValue=function(a){var c,d="";if(a)for(c in a)C(a,
c)&&(d+=(""===d?"":",")+c);return d};f.displaySelectedItems=function(a,c,d,b){n(c)||(c=this.field(a,b));n(d)||(d=this.value(a,b));a=this.pickedItemsArray(c,d);return _._ruc(a)?x(d)?d:n(c.empty_value)?c.empty_value:"":_._i32(a).join(", ")};f.hierarchicalBoxes=function(a,c,d,b,e,g,k,l,p,r,t,q,u){var D=this,P=1*e.cols||1,m=0,v="",R=!1;if(!u)u=0,P=1*e.cols_at_top_level||P;else if(10<u)return"";q||(q={});t&&(q[t]=!0);u&&(v+=ia("class","zenario_hierarchical_box_children","id","children_for___"+d+"___"+
t,">"));for(var E in p)if(C(p,E)){var H={};var A=p[E];""!==A&&A==1*A&&(A*=1);var I=h;var ka="object"==typeof e.values[A]?e.values[A]:{label:e.values[A]};e.tag_colors&&(H.tag_color=e.tag_colors[A]||"blue");I=ka.parent;"0"===I&&(I=!1);if(!t&&!I||t==I){I=b?!0===b||1===b||"1"===b?!0===A||1===A||"1"===A:l?n(l[A])?!0:!1:A==b:!A;if(!k||I||!e.hide_unselected_values_when_readonly||r[A]){H.checked=I;if(H.newRow=++m>P)m=1;H.col=m;H.cols=P;if("checkboxes"==e.type&&x(e.checking_child_checks_parents)){var U="";
t&&(U+="if (this.checked) { for (var cb in "+JSON.stringify(q)+") { "+D.globalName+".get('"+K(d)+"___' + cb).checked = true; } } ");r[A]&&(U+="if (!this.checked) { $('#children_for___' + this.id + ' input').prop('checked', false); } ");U?g.onchange=e.onchange?U+" "+e.onchange:U:e.onchange?g.onchange=e.onchange:delete g.onchange}else"checkboxes"==e.type&&x(e.checking_parent_checks_children)&&(U="",r[A]&&(U+="if (this.checked) { $('#children_for___' + this.id + ' input').each(function(i, el) {el.checked = true;}) }; "),
U?g.onchange=e.onchange?U+" "+e.onchange:U:e.onchange?g.onchange=e.onchange:delete g.onchange);H.lovId=d+"___"+A;H.lovField=ka;e.indeterminates&&x(e.indeterminates[A])&&function(ba){a.after(function(){var ua;if(ua=D.get(ba))ua.indeterminate=!0})}(H.lovId);H.lovHTML=D.drawField(a,c,d,g,h,h,h,h,h,A,I,!1,p,r,ka);H.childrenHTML="";r[A]&&(H.childrenHTML=D.hierarchicalBoxes(a,c,d,b,e,g,k,l,p,r,A,_._1d5({},q),u+1),m=0);R?(D.splitValues||(D.splitValues={}),D.splitValues[d]||(D.splitValues[d]=""),D.splitValues[d]+=
D.microTemplate(D.mtPrefix+"_radio_or_checkbox",H)):v+=D.microTemplate(D.mtPrefix+"_radio_or_checkbox",H)}I&&ka.split_values_if_selected&&!u&&"radios"===e.type&&(R=!0)}}u&&(v+="</div>");return v};f.drawPickedItem=function(a,c,d,b,e){n(d)||(d=this.field(c));label=d.values&&d.values[a];pick_items=d.pick_items||{};thumbnail={};mi={};_._16j(label)?_._1d5(mi,label):label?mi.label=label:(mi.label=a,mi.missing=!0);mi.id=c;mi.item=a;mi.readOnly=b;mi.width&&mi.height&&((a=mi.checksum||mi.short_checksum)?(thumbnail.src=
F+"zenario/file.php?c="+Ba(a)+"&og=1",mi.usage&&(thumbnail.src+="&usage="+Ba(mi.usage))):mi.link&&(thumbnail.src=y._ozg(mi.link)),thumbnail.src&&(N._esd(mi.width,mi.height,180,120,thumbnail),mi.thumbnail=thumbnail));return this.drawPickedItem2(c,pick_items,e,mi)};f.drawPickedItem2=function(a,c,d,b){var e=this;return d?(e.__addTT=!0,setTimeout(function(){e.__addTT&&e.tooltips("#name_for_"+a+" .Dropdown *[title]");delete e.__addTT},1),e.microTemplate(c.dropdown_item_microtemplate||e.mtPrefix+"_dropdown_item",
b)):e.microTemplate(c.picked_item_microtemplate||e.mtPrefix+"_picked_item",b)};f.showPickedItemInPopout=function(a,c){N._1st(this,{popout:{href:a,title:c,css_class:"zenario_show_colobox_above_fab"}})};f.pickItems=function(a){var c,d,b,e;(c=this.field(a))&&(d=c.pick_items)&&(d.path||d.target_path)&&(c=e=d.path,Na.map&&(e=Na._62b(d.path).path),x(d.multiple_select)||d.target_path&&d.target_path!=e||!(b=this.readField(a))||-1!=b.indexOf(",")||(c="//"==y._yot(c,2)?c+b:"/"==y._yot(c,1)?c+("/"+b):c+("//"+
b)),this.SKTarget=a,M._1bb(this.globalName,"setPickedItems",d.multiple_select,c,d.target_path,d.min_path,d.max_path,d.disallow_refiners_looping_on_min_path,h,d.one_to_one_choose_phrase,d.one_to_many_choose_phrase,h,!0,h,h,h,h,h,h,h,h,d))};f.setPickedItems=function(a,c,d,b){a=this.SKTarget;var e,g={};for(e in c._items)if(C(c._items,e)){d=y._x45(e);var k=b.items&&b.items[d]||{missing:!0};g[d]={missing:k.missing,image:k.image,css_class:k.css_class||b.item&&b.item.css_class,label:M._ac1(b,d)}}this.addToPickedItems(g,
a)};f.removeFromPickedItems=function(a,c,d){this.addToPickedItems(a,c,d,!0)};f.addToPickedItems=function(a,c,d,b){this._tokenizeNoRecurse=!0;d=this.field(c,d);var e=this.readField(c),g=d.pick_items&&x(d.pick_items.multiple_select)||d.upload&&x(d.upload.multi),k,l={};a=N._iru(a);var p=e?this.pickedItemsArray(d,e):{};for(k in a)if(C(a,k))if(e=a[k],d.values||(d.values={}),b)delete d.values[k];else if(d.values[k]||(d.values[k]=e),p[k]&&(l[k]=!0),g)p[k]=!0;else{p={};p[k]=!0;break}this.redrawPickedItems(c,
d,p,l);this._tokenizeNoRecurse=!1};f.redrawPickedItems=function(a,c,d,b){var e,g=this.pickedItemsValue(d),k={},l=$(this.get(a)).tokenize(),p=l.toArray();d=N._iru(d);for(e in p)if(C(p,e)){var r=p[e];d[r]&&!b[r]?k[r]=!0:l.tokenRemove(r)}for(r in d)C(d,r)&&!k[r]&&(b=c.values&&c.values[r],_._16j(b)?b=b.label:b||(b=r),l.tokenAdd(r,b));c.current_value=g;this.pickedItemsChanged(a,c)};f.pickedItemsChanged=function(a,c){c.onchange&&N.eval(c.onchange,this,c,h,a,h,h,c);this.fieldChange(a)};f.changes=function(a){if(this.tuix&&
this.tuix.tab){if(n(a))return this.changed[a];for(a in this.tuix.tabs)if(C(this.tuix.tabs,a)&&this.changed[a])return!0}return!1};f.markAsChanged=function(a){this.tuix&&(n(a)||(a=this.tuix.tab),a&&!this.changed[a]&&(this.changed[a]=!0,this.tuix.tab==a&&$("#zenario_abtab").addClass("zenario_abtab_changed")))};f.fieldChange=function(a,c){var d=this,b=d.field(a);b&&(b.indeterminate&&(b.indeterminate=!1),n(c)&&b.indeterminates&&b.indeterminates[c]&&(b.indeterminates[c]=!1),d.markAsChanged(),x(b.multiple_edit)&&
d.meMarkChanged(a),setTimeout(function(){d.validateFormatOrRedrawForField(b)},1))};f.validateFormatOrRedrawForField=function(a,c){"string"==typeof a?(this.fieldThatTriggeredRedraw=this.setLastFocus(a),a=this.field(a)):a.id&&(this.fieldThatTriggeredRedraw=this.setLastFocus(a.id));var d=x(a.validate_onchange);c=x(a.format_onchange)||c&&(a.pressed?a.format_on_toggle_on:a.format_on_toggle_off);a=x(a.redraw_onchange);if(d)return 3>this.ffoving&&(this.ffoving=3,this.validate()),!0;if(c)return 2>this.ffoving&&
(this.ffoving=2,this.format()),!0;a&&1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return a};f.redrawImmediatelyWhenChanged=function(a,c,d,b,e){if(a=e?a.value===b:a.value!==b)y.stop(c),this.fieldThatTriggeredRedraw=this.setLastFocus(d),1>this.ffoving&&(this.ffoving=1,this.readTab(),this.redrawTab());return a};f.meMarkChanged=function(a,c,d){n(c)&&c==d||(this.field(a).multiple_edit._changed=!0,this.meSetCheckbox(a,!0))};f.meSetCheckbox=function(a,c){"checkbox"==this.get("multiple_edit__"+
a).type?this.get("multiple_edit__"+a).checked=c:this.get("multiple_edit__"+a).value=c?1:""};f.meChange=function(a,c,d){var b=this.field(c);if(a)b.multiple_edit._changed=!0;else{if(!d&&x(b.multiple_edit.warn_when_abandoning_changes)&&n(b.multiple_edit.original_value)&&this.readField(c)!=b.multiple_edit.original_value){a=ja("type","button","class","zenario_submit_button","value",aa.abandonChanges,"onclick",this.globalName+'.meChange(false, "'+ha(c)+'", true);')+ja("type","button","class","zenario_gp_button",
"value",aa.cancel);M._g82(aa.abandonChangesConfirm,a,"warning");this.meSetCheckbox(c,!0);return}b.multiple_edit._changed=!1;delete b.current_value;d=b.value;n(b.multiple_edit.original_value)&&(d=b.current_value=b.multiple_edit.original_value);this.get(c)&&!b.pick_items?"checkbox"==this.get(c).type?this.get(c).checked=d?!0:!1:$(this.get(c)).val(d||""):(b=new y.callback,d=this.drawFields(b),this.insertHTML(d,b))}this.meSetCheckbox(c,a);this.validateFormatOrRedrawForField(c)};f.currentValue=function(a,
c,d){return d||this.drawingFields||n(c)&&c!=this.tuix.tab?this.value(a,c,d):this.readField(a)};f.originalValue=function(a,c){return this.value(a,c,!0)};f.value=function(a,c,d){c||(c=this.tuix.tab);var b="",e=this.field(a,c);if(!e)return"";n(d)||(d=this.fieldIsReadonly(a,e,c));e&&!e.snippet&&"grouping"!=e.type&&(this.isButton(e)?b=!!e.pressed:!d&&n(e.current_value)?b=e.current_value:n(e.value)?b=e.value:e.multiple_edit&&n(e.multiple_edit.original_value)&&(b=e.multiple_edit.original_value));return"0"===
b?0:n(b)?b:""};f.fieldChanged=function(a,c){return this.currentValue(a,c)!=this.originalValue(a,c)};f.mode=function(a){return this.value("mode","global_area")||this.value("mode")};f.scope=function(a){return this.value("scope","first_tab")||this.value("scope")};f.keyIn=function(a){return _._a1g(arguments,this.tuix.key[a],1)};f.keyIs=function(a,c){return this.tuix.key[a]==c};f.key=function(a){return this.tuix.key[a]};f.keySet=function(a){return!!this.tuix.key[a]};f.keyNotSet=function(a){return!this.tuix.key[a]};
f.getMode=function(){return _._4ty(this.mode)?this.mode():this.mode};f.modeIn=function(){return _._a1g(arguments,this.getMode())};f.modeNotIn=function(){return!_._a1g(arguments,this.getMode())};f.modeIs=function(a){return this.getMode()==a};f.modeIsNot=function(a){return this.getMode()!=a};f.scopeIn=function(){return _._a1g(arguments,this.scope())};f.scopeNotIn=function(){return!_._a1g(arguments,this.scope())};f.scopeIs=function(a){return this.scope()==a};f.scopeIsNot=function(a){return this.scope()!=
a};f.valueIn=function(a){return _._a1g(arguments,this.value(a),1)};f.valueNotIn=function(a){return!_._a1g(arguments,this.value(a),1)};f.valueInArray=function(a,c){return _._a1g(c,this.value(a))};f.valueIs=function(a,c){return this.value(a)==c};f.valueIsNot=function(a,c){return this.value(a)!=c};f.valueIsEmpty=function(a,c){return!this.value(a)};f.valueIsNotEmpty=function(a,c){return!!this.value(a)};f.isButton=function(a){return a&&("submit"==a.type||"toggle"==a.type||"button"==a.type)};f.isFormField=
function(a){return!(!a||a.snippet||a.image&&!a.image_crop_tool||"grouping"==a.type||"submit"==a.type||"toggle"==a.type||"button"==a.type)};f.getCodeEditorPosition=function(a){var c=a.session;return{top:c.getScrollTop(),left:c.getScrollLeft(),range:a.getSelectionRange(),uman:c.getUndoManager()}};f.setCodeEditorPosition=function(a,c,d){if(c){var b=a.session;b.setScrollTop(c.top);b.setScrollLeft(c.left);a.selection.setSelectionRange(c.range);d&&(c.uman.$doc=b,b.setUndoManager(c.uman))}};f.appendCodeEditorValue=
function(a,c,d){a=ace.edit(a);var b=this.getCodeEditorPosition(a),e=a.getValue();if(d&&b.range){var g=e.s(/\r?\n\r?/g),k=b.range.start.column,l=b.range.start.row,p=b.range.end.column,r=b.range.end.row;e="";for(d=0;d<l;++d)e+=g[d]+"\n";e+=g[d].substr(0,k);e=e+c+g[r].substr(p);for(d=r+1;n(g[d]);++d)e+="\n"+g[d];b.range.start.column=b.range.end.column=k+c.length;b.range.start.row=b.range.end.row=l}else e+=c;a.setValue(e);this.setCodeEditorPosition(a,b,!1)};f.readField=function(a){var c=h,d=this.tuix.tab,
b=this.field(a,d),e=b.type,g;if(!this.isFormField(b))return h;var k=this.fieldIsReadonly(a,b,d),l=b._was_hidden_before;b.multiple_edit&&k&&delete b.multiple_edit._changed;if("checkboxes"==e||"radios"==e){if(!k&&!l&&b.values){var p;l="";var r=!0;for(p in b.values)C(b.values,p)&&this.get(a+"___"+p)&&this.get(a+"___"+p).checked&&(l+=(r?"":",")+p,r=!1);b.current_value=l}l=!0}if(l)return k||!n(b.current_value)?b.value:b.current_value;if(this.get("_value_for__"+a))b.current_value=c=this.get("_value_for__"+
a).value;else if("editor"!=e&&"code_editor"!=e||k)if(b.image&&b.image_crop_tool){c=$(this.get("_image_for__"+a));var t=c.rcrop("getValues");t?(a=c[0].naturalWidth||c[0].width,c=c[0].naturalHeight||c[0].height,b.current_value=c=[t.x,t.y,t.width,t.height,a,c].join()):(delete b.current_value,c=b.value)}else if(!k&&(g=this.get(a))){if("currency"==e)c=$(g).data("og_value");else if("checkbox"==e||"radio"==e)c=g.checked?!0:!1;else if("color_picker"==e||"colour_picker"==e)try{c=$(g).spectrum("get").toHexString()}catch(u){c=
$(g).val()}else c=$(g).val();n(c)||(c="");_._ge1(c)&&(c=c.join(","));b.current_value=c}else delete b.current_value,c=b.value;else{var q;if("editor"==e){if(a=O.tinyMCE&&tinyMCE.get(a))t=y._9px(a)}else if("code_editor"==e)try{if(q=ace.edit(a))t=q.getValue(),this.editingPositions[d+"/"+a]=this.getCodeEditorPosition(q)}catch(u){}if(n(t)&&!1!==t)c=b.current_value=t;else return n(b.current_value)?b.current_value:b.value}return c};f.blankField=function(a){this.setFieldValue(a,"")};f.setFieldValue=function(a,
c,d){field=this.field(a,this.tuix.tab);this.get(a)&&$(this.get(a)).val(c);this.get("_value_for__"+a)&&(this.get("_value_for__"+a).value=n(d)?d:c);field.current_value=c};f.readTab=function(){var a,c={},d=this.fields(),b;this.lastScrollTop=$("#zenario_fbAdminInner").scrollTop();for(b in d)C(d,b)&&n(a=this.readField(b))&&(c[b]=a);G&&G.activeElement&&(this.lastFocus=this.setLastFocus(G.activeElement));return c};f.wipeTab=function(){var a=this.fields(),c;for(c in a)if(C(a,c)){var d=a[c];delete d.current_value;
d.multiple_edit&&delete d.multiple_edit._changed}};f.redrawTab=function(){this.tuix.shake=!1;this.draw2()};f.getURL=function(a){++this.onKeyUpNum;return this.returnAJAXURL(a)};f.returnAJAXURL=function(a){return"..."};f.editModeOn=function(a){if(!this.tuix||!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=x(this.tuix.tabs[a].edit_mode.enabled)&&(x(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};f.editModeAlwaysOn=function(a){return!0};
f.editCancelEnabled=function(a){return!1};f.revertEnabled=function(a){return!1};f.savedAndContinued=function(a){return!1};f.editModeOnBox=function(){return!0};f.sortTabs=function(){this.sortedTabs=[];if(this.tuix.tabs)for(var a in this.tuix.tabs)if(C(this.tuix.tabs,a)){var c=this.tuix.tabs[a];c&&this.sortedTabs.push([a,c.ord])}this.sortedTabs.sort(N.sortArray);this.groupings={};this.sortedFields={};for(a in this.sortedTabs)C(this.sortedTabs,a)&&(c=this.sortedTabs[a]=this.sortedTabs[a][0],this.sortFields(c))};
f.sortFields=function(a){var c,d,b={};this.groupings[a]={};this.sortedFields[a]=[];if(d=this.fields(a)){for(c in d)if(C(d,c)){var e=d[c];e.type&&"grouping"==e.type&&(b[c]=1*e.ord,this.groupings[a][c]=c)}for(c in d)if(C(d,c)&&(e=d[c])&&(!e.type||"grouping"!=e.type)){var g=e.grouping?b[e.grouping]:h;this.sortedFields[a].push([c,e.ord,g])}this.sortedFields[a].sort(N.sortArrayWithGrouping);for(c in this.sortedFields[a])C(this.sortedFields[a],c)&&(this.sortedFields[a][c]=this.sortedFields[a][c][0])}};
f.setData=function(a){this.tuix=a};f.setDataDiff=function(a){this.tuix.never_sync_this_data_between_client_and_server&&delete this.tuix.never_sync_this_data_between_client_and_server;this.syncAdminBoxFromServerToClient(a,this.tuix)};f.syncAdminBoxFromServerToClient=function(a,c){var d;for(d in a)if(C(a,d)){var b=a[d];!n(b)||b["[[__unset__]]"]?delete c[d]:n(c[d])?b["[[__replace__]]"]?(delete b["[[__replace__]]"],c[d]=b):"object"!=typeof c[d]?c[d]=b:"object"==typeof c[d]&&"object"!=typeof b?c[d]=b:
this.syncAdminBoxFromServerToClient(b,c[d]):c[d]=b}};f.sendStateToServer=function(){var a=this.tuix;n(a.never_sync_this_data_between_client_and_server)&&(a=_.clone(a),delete a.never_sync_this_data_between_client_and_server);return JSON.stringify(this.tuix)};f.sendStateToServerDiff=function(){var a={};this.syncAdminBoxFromClientToServerR(a,this.tuix);n(this.tuix.always_sync_this_data_between_client_and_server)&&_._16j(this.tuix.always_sync_this_data_between_client_and_server)&&(a.always_sync_this_data_between_client_and_server=
{},this.syncAllTagsToServerR(a.always_sync_this_data_between_client_and_server,this.tuix.always_sync_this_data_between_client_and_server));return JSON.stringify(a)};f.syncAdminBoxFromClientToServerR=function(a,c,d,b,e,g,k,l){if("object"==typeof c){var p,r;for(r in c)if(!n(d)&&y.IN(r,"download","path","shake","tab","switchToTab")&&(p="value")||!n(d)&&y.IN(r,"_sync","tabs")&&(p="array")||!n(b)&&"_sync"==d&&y.IN(r,"cache_dir","password","session","iv")&&(p="value")||!n(b)&&"tabs"==d&&(p="array")||!n(e)&&
"tabs"==b&&"_was_hidden_before"==r&&(p="value")||!n(e)&&"tabs"==b&&y.IN(r,"edit_mode","fields")&&(p="array")||!n(g)&&"tabs"==e&&"edit_mode"==d&&"on"==r&&(p="value")||!n(g)&&"tabs"==e&&"fields"==d&&(p="array")||!n(k)&&"tabs"==g&&"fields"==b&&y.IN(r,"_display_value","_was_hidden_before","current_value","pressed")&&(p="value")||!n(k)&&"tabs"==g&&"fields"==b&&"multiple_edit"==r&&(p="array")||!n(l)&&"tabs"==k&&"fields"==e&&"multiple_edit"==d&&"_changed"==r&&(p="value"))if("value"==p){var t=c[r];switch(typeof t){case "function":case "object":break;
case "string":t=y._an4(t);default:a[r]=t}}else"array"==p&&"object"==typeof c[r]&&(a[r]={},this.syncAdminBoxFromClientToServerR(a[r],c[r],r,d,b,e,g,k))}};f.syncAllTagsToServerR=function(a,c){var d;for(d in c){var b=c[d];switch(typeof b){case "function":break;case "object":a[d]={};this.syncAllTagsToServerR(a[d],c[d]);break;case "string":b=y._an4(b);default:a[d]=b}}};f.getValueArrayofArrays=function(a){return y._w3i(this.getURL(),y._488({_read_values:!0,_box:this.sendStateToServer()}),!a)};f.getVisibleValues=
function(a,c){return this.getFieldValues(!1,!1,!1,!0,!0,a,c)};f.getPluginSettingValues=function(){return this.getFieldValues(!1,!1,!0)};f.getInitialValues=function(a){return this.getFieldValues(!1,!0,!1,!1,!1,a)};f.getFieldValues=function(a,c,d,b,e,g,k){var l,p,r={};if(this.tuix&&this.tuix.tabs)for(l in this.tuix.tabs)if(C(this.tuix.tabs,l)){var t=this.tuix.tabs[l];if(t.fields&&(!k||-1!=N._mgu(k).indexOf(l)))for(p in t.fields)if(C(t.fields,p)){var q=t.fields[p];var u=p;if(!(b&&this.fieldIsReadonly(p,
q,l)||e&&(t._was_hidden_before||q._was_hidden_before)||d&&!(u=q.plugin_setting&&q.plugin_setting.name))){if(a&&"toggle"==q.type)if(q.pressed)q=1;else continue;else if(this.isFormField(q))q=this.currentValue(p,l,c);else continue;g&&(r[l+"/"+p]=q);r[u]=q}}}return r};f.insertText=function(a,c){_._mvq(a)&&(a=this.get(a));if(a){var d=$(a),b=a.selectionStart,e=a.selectionEnd,g=d.val();d.val(g.substring(0,b)+c+g.substring(e));a.selectionStart=a.selectionEnd=b+c.length;a.focus()}};f.callFunctionOnEditors=
function(a){var c,d;if(O.tinyMCE&&(c=this.fields()))for(d in c)if(C(c,d)){var b=c[d];if("editor"==b.type&&tinyMCE.get(d))if("remove"==a)tinyMCE.get(d).remove();else if("isDirty"==a&&tinyMCE.get(d).isDirty())return!0}return!1};f.format=function(a){var c=this,d;if(c.loaded&&(d=c.getURL("format"))){var b=c.tuix&&c.tuix.tab;c.loaded=!1;c.hideTab();c.checkValues(a);c.retryAJAX(d,{_format:!0,_box:c.sendStateToServer()},!0,function(e){c.load(e);c.switchTabIfRequested(b);c.sortTabs();c.draw()},"loading")}};
f.validate=function(a,c,d,b){var e=this,g;if(e.loaded&&(g=e.getURL("validate"))){e.differentTab=a;e.loaded=!1;e.hideTab(a);e.checkValues(d);var k=e.tuix&&e.tuix.tab;a&&(e.tuix.switchToTab=c);e.retryAJAX(g,{_validate:!0,_box:e.sendStateToServer()},!0,function(l){e.load(l)&&e.switchTabIfRequested(k);e.sortTabs();e.switchToATabWithErrors();e.draw();b&&b()},"loading")}};f.switchTabIfRequested=function(a){this.tuix.switchToTab&&(a=a||this.tuix&&this.tuix.tab,this.errorOnTab(a)?this.tuix.tab=a:this.tuix.tab=
this.tuix.switchToTab,delete this.tuix.switchToTab)}})},zenarioF);

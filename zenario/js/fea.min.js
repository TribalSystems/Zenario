var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(k){var f=0;return function(){return f<k.length?{done:!1,value:k[f++]}:{done:!0}}};$jscomp.arrayIterator=function(k){return{next:$jscomp.arrayIteratorImpl(k)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,f,r){if(k==Array.prototype||k==Object.prototype)return k;k[f]=r.value;return k};$jscomp.getGlobal=function(k){k=["object"==typeof globalThis&&globalThis,k,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<k.length;++f){var r=k[f];if(r&&r.Math==Math)return r}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(k,f,r){if(!r||null!=k){r=$jscomp.propertyToPolyfillSymbol[f];if(null==r)return k[f];r=k[r];return void 0!==r?r:k[f]}};
$jscomp.polyfill=function(k,f,r,v){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(k,f,r,v):$jscomp.polyfillUnisolated(k,f,r,v))};$jscomp.polyfillUnisolated=function(k,f,r,v){r=$jscomp.global;k=k.split(".");for(v=0;v<k.length-1;v++){var y=k[v];if(!(y in r))return;r=r[y]}k=k[k.length-1];v=r[k];f=f(v);f!=v&&null!=f&&$jscomp.defineProperty(r,k,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(k,f,r,v){var y=k.split(".");k=1===y.length;v=y[0];v=!k&&v in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var C=0;C<y.length-1;C++){var m=y[C];if(!(m in v))return;v=v[m]}y=y[y.length-1];r=$jscomp.IS_SYMBOL_NATIVE&&"es6"===r?v[y]:null;f=f(r);null!=f&&(k?$jscomp.defineProperty($jscomp.polyfills,y,{configurable:!0,writable:!0,value:f}):f!==r&&(void 0===$jscomp.propertyToPolyfillSymbol[y]&&(r=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[y]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(y):$jscomp.POLYFILL_PREFIX+r+"$"+y),$jscomp.defineProperty(v,$jscomp.propertyToPolyfillSymbol[y],{configurable:!0,writable:!0,value:f})))};$jscomp.initSymbol=function(){};$jscomp.iteratorPrototype=function(k){k={next:k};k[Symbol.iterator]=function(){return this};return k};
$jscomp.iteratorFromArray=function(k,f){k instanceof String&&(k+="");var r=0,v=!1,y={next:function(){if(!v&&r<k.length){var C=r++;return{value:f(C,k[C]),done:!1}}v=!0;return{done:!0,value:void 0}}};y[Symbol.iterator]=function(){return y};return y};$jscomp.polyfill("Array.prototype.values",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(f,r){return r})}},"es8","es3");
zenario.lib(function(k,f,r,v,y,C,m,K,t,O,P,Q,M,z,G,J,L,H,R,S,I,w,N){f=I(N);f.idVarName=function(){return this.specifiedIdVarName||"id"};f.validateFormatOrRedrawForField=function(a){a=this.field(a);return G(a.save_onchange)?(4>this.ffoving&&(this.ffoving=4,this.save()),!0):I(zenarioF).validateFormatOrRedrawForField.apply(this,arguments)};f.fill=function(){return this.ffov("fill")};f.format=function(){return this.ffov("format")};f.validate=function(){return this.ffov("validate")};f.save=function(){return this.ffov("save")};
f.setData=function(a){this.setDataDiff(a)};f.sendStateToServer=function(){return this.sendStateToServerDiff()};f.visitorTUIXLink=function(a,b){return this.noPlugin?m._6xq(this.moduleClassName,this.path,a,b):m._yxx(this.moduleClassName,this.containerId,this.path,a,b)};f.setURLForSingleRequests=function(){return this.url=this.visitorTUIXLink(this.request)};f.setURLForSyncedRequests=function(a){return this.url=this.visitorTUIXLink(this.request,a,!0)};f.modifyPostOnLoad=function(){return!1};f.sendsSignalOnEvent=
function(a){return this.tuix&&this.tuix.send_signals_on_events&&this.tuix.send_signals_on_events[a]};f.ffov=function(a){var b=this,c=new m.callback,d=b.setURLForSyncedRequests(a),e=!1;if("fill"==a)var g=b.modifyPostOnLoad();else b.prevPath=b.path,b.checkValues(),g={_format:!0,_tuix:b.sendStateToServer()};if(!b.loading){b.showLoader();var l=function(h){b.hideLoader();t._iw6(h);"fill"==a?b.tuix=h:b.setData(h);var u=b.tuix.js,p=b.tuix.js_after;b.tuix.reload_parent&&b.reloadParent();u&&t.eval(u,b);if(p&&
!_._4ty(p)){var n=p;p=function(){t.eval(n,b)}}b.tuix.close_popout&&b.inPopout&&b.closePopout();if(!b.tuix.stop_flow)if(b.tuix.go)b.go(b.tuix.go,k,k,p);else if(b.tuix.go_to_url&&!e)m._6h1(b.tuix.go_to_url),e=!0,setTimeout(function(){l(h)},350);else{b.drawForm();c.done();var q;"format"==a&&(q=b.sendsSignalOnEvent("formFormat"))&&m._wyl(q,b.getFieldValues(!0));"validate"==a&&(q=b.sendsSignalOnEvent("formValidate"))&&m._wyl(q,b.getFieldValues(!0));"save"==a&&(q=b.sendsSignalOnEvent("formSave"))&&m._wyl(q,
b.getFieldValues(!0));"format"!=a&&"validate"!=a||!b.tuix.scroll_to_top_of_slot_on_format_or_validate||m._q6f(b.containerId,!0);"save"==a&&b.tuix.scroll_after_save&&m._q6f(b.containerId,!0);p&&p()}};b.ajax(d,g,!0).after(l)}return c};f.draw=function(){var a=this;a.draw2();a.tuix.confirm_on_close&&zenario_conductor._pf0(a.containerId,function(){return!a.hidden(k,a.tuix.confirm_on_close)},function(b){a.confirm(a.tuix.confirm_on_close,b)},a.tuix.confirm_on_close.message)};f.redrawTab=function(){this.draw2();
this.hideLoader(!0);var a;(a=this.sendsSignalOnEvent("formRedraw"))&&m._wyl(a,this.getFieldValues(!0))};f.draw2=function(){this.sortTabs();this.tuix.form_title=this.getTitle();this.cb=new m.callback;this.putHTMLOnPage(this.drawFields(this.cb,this.mtPrefix+"_form"));var a;this.path==this.prevPath&&this.lastFocus&&""!=this.lastFocus.id&&(a=this.get(this.lastFocus.id))&&a.focus()};f.ajaxURL=function(){return m._bjs(k,this.containerId,_._1d5({path:this.path},this.request))};f.isAdminFacing=function(){return!1};
f.putHTMLOnPage=function(a){this.clearOnScrollForItemButtons();var b=this.containerId,c="fea_"+b;var d=$("#"+c);d.length||(c=b,d=$("#"+c));d.html(a);t._sik()&&(this.__lastFormHTML=a);this.cb.done();this.addJQueryElements("#"+c);if(m.adminId){var e=m._w3v(m._uqq(c));m._9fm("scanHyperlinks__"+e,function(){K._8bp(e)})}};f.after=function(a){this.cb.after(a)};f.closePopout=function(){if(this.inPopout){var a="outer_"+this.containerId;J(a)&&$(J(a)).remove()}};f.openCustomPopout=function(a,b){a=_._1d5({},
a);b&&(a.href=m._ovh(a.href,"id",b));t._1st(this,{popout:a})};f.reloadParent=function(){this.parent&&("string"==typeof this.parent?m._xja(this.parent):this.parent.reload())};f.hasSearch=function(){return z(this.request.search)&&""!=this.request.search};f.showClearSearchButton=function(){return this.hasSearch()&&(m._m52()||m._etm(9))};f.fun=function(a){return this.globalName+"."+a};f.microTemplate=function(a,b,c,d,e){var g,l=!1;this.__cusTemplateApplied||"fea_list"!=a&&"fea_form"!=a||!(g=this.tuix&&
this.tuix.microtemplate)||(a=g,this.__cusTemplateApplied=l=!0);a=I(zenarioF).microTemplate.call(this,a,b,c,d,e);l&&delete this.__cusTemplateApplied;return a};f.displayDevTools=function(){if(!this.tsLink&&!t._sik())return"";var a="#fea_dev_tools_"+this.containerId,b=$(a),c=this.pMicroTemplate("dev_tools",{});return b.length?(b.html(c).show(),this.addJQueryElements(a),""):c};f.on=function(a,b){m.on(!1,this.containerId,a,b)};f.off=function(a){m.off(!1,this.containerId,a)};f.showLoader=function(a,b){var c=
"loader_for_"+this.containerId,d=this.get(this.containerId),e=this.get(c);d=$(d);a?(this.loading=!1,d.removeClass("fea_loading").addClass("fea_loaded").addClass("fea_initial_load_done")):(this.loading=!0,d.removeClass("fea_loaded").addClass("fea_loading"));b?d.removeClass("fea_just_loaded").addClass("fea_just_redrawn"):d.removeClass("fea_just_redrawn").addClass("fea_just_loaded");if(e)b=$(e);else{if(a)return;b=$(this.pMicroTemplate("loading",{loadingId:c}));d.prepend(b)}a?b.hide():b.width(d.width()).height(d.height()).show()};
f.hideLoader=function(a){this.showLoader(!0,a)};f.reload=function(a){this.containerId&&this.runLogic(this.request,a||function(){})};f.commandEnabled=function(a){return zenario_conductor._4xe(this.containerId,a)};f.navigationEnabled=function(a,b){return this.tuix.enable&&this.tuix.enable[b||a]&&zenario_conductor._4xe(this.containerId,a)};f.enabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};f.runLogic=function(a,b){this.request=a;this.doAjaxLoadThenShowPlugin(a,b)};f.typeOfLogic=function(){var a=
this.request.path||this.path,b=this.moduleClassName,c=v[b];if(!c)throw'Error in FEA init function, the module class "'+b+'" does not exist.';if(!a)throw"Error in FEA init function, path is not set in the request.";b=c.feaPaths[a];if(!z(b))throw'Error in FEA init function, the path "'+a+'" does not exist. You may need to put your site into developer mode and/or clear the site cache.';return b};f.loadData=function(a,b,c){var d=this;d.request=a;d.tuix=t.parse(b);d.last={request:a};d.prevPath=d.path;
c&&(d.tsLink=c);$(r).ready(function(){d.loadingDoneInAdvanceSoDrawPlugin()})};f.doAjaxLoadThenShowPlugin=function(a,b){delete this.__lastFormHTML;switch(this.typeOfLogic()){case "list":this.doAjaxLoadThenShowList(b);break;case "form":this.doAjaxLoadThenShowForm(b);break;case "dash":this.doAjaxLoadThenShowDash(b);break;case "graph":this.doAjaxLoadThenShowGraph(b);break;default:m._fyd(this.containerId,"lookup",a)}};f.loadingDoneInAdvanceSoDrawPlugin=function(){var a=this.typeOfLogic();delete this.__lastFormHTML;
switch(a){case "list":this.setURLForSingleRequests();this.drawList();break;case "form":this.setURLForSyncedRequests("fill");this.drawForm();break;case "dash":this.setURLForSyncedRequests("fill");this.drawDash();break;case "graph":this.setURLForSyncedRequests("fill");this.drawGraph();break;default:console.error('"'+a+'" is not a valid value for the fea_type property. (If this value is out of date, you may need to clear the site cache.')}};f.doAjaxLoadThenShowList=function(a){var b=this;if(!b.loading){var c=
b.setURLForSingleRequests();b.showLoader();b.ajax(c,!1,!0).after(function(d){b.tuix=d;b.drawList();a()})}};f.doAjaxLoadThenShowForm=function(a){this.changed={};this.fill().after(a)};f.doAjaxLoadThenShowDash=function(a){this.fillDash().after(a)};f.doAjaxLoadThenShowGraph=function(a){this.fillGraph().after(a)};f.fillDash=function(){return this.feaAJAX("fill","dash")};f.fillGraph=function(){return this.feaAJAX("fill","graph")};f.formatDash=function(){return this.feaAJAX("format","dash")};f.formatGraph=
function(){return this.feaAJAX("format","graph")};f.dashAJAX=function(a){return this.feaAJAX(a,"dash")};f.graphAJAX=function(a){return this.feaAJAX(a,"graph")};f.feaAJAX=function(a,b){var c=this,d=new m.callback,e=c.setURLForSyncedRequests(a);if("fill"==a)var g=c.modifyPostOnLoad();else c.prevPath=c.path,c.checkValues(),g={_format:!0,_tuix:c.sendStateToServer()};c.loading||(c.showLoader(),c.ajax(e,g,!0).after(function(l){c.hideLoader();"fill"==a?c.tuix=l:c.setData(l);switch(b){case "dash":c.drawDash();
break;case "graph":c.drawGraph()}d.done()}));return d};f.drawForm=function(){this.sortOutTUIX();this.draw()};f.drawList=function(){var a=this;a.hadSparkline=!1;a.sortOutTUIX();var b=1*a.tuix.__page__,c=1*a.tuix.__page_size__,d=1*a.tuix.__item_count__,e=a.tuix.items;if(a.hasBypass&&e&&1===d)for(g in e)if(w(e,g)){b=e[g];a.button(this,a.hasBypass,b,g);return}a.cb=new m.callback;a.putHTMLOnPage(a.pMicroTemplate("list",{}));if(b&&c&&d&&d>c){var g="#pagination_"+a.containerId;$(g).show().jPaginator({nbPages:Math.ceil(d/
c),selectedPage:b,overBtnLeft:g+"_o_left",overBtnRight:g+"_o_right",maxBtnLeft:g+"_m_left",maxBtnRight:g+"_m_right",onPageClicked:function(l,h){a.doSearch(k,k,k,h)}})}a.hadSparkline&&a.initSparklineChart();a.tuix.map&&a.initMap();a.hideLoader()};f.drawDash=function(){this.dashCustomSetup();this.sortOutTUIX();this.drawDashHTML();this.registerSignalHandlers()};f.drawDashHTML=function(){this.cb=new m.callback;this.putHTMLOnPage(this.microTemplate(this.tuix.microtemplate,{}))};f.dashCustomSetup=function(){};
f.drawGraph=function(){this.graphCustomSetup();this.sortOutTUIX();this.cb=new m.callback;this._storedGraphSeriesData||(this._storedGraphSeriesData={});var a=this._storedGraphSeriesData,b=this.tuix.never_sync_this_data_between_client_and_server,c=b&&b.seriesData||{};b=this.tuix.always_sync_this_data_between_client_and_server.graph;var d=this._graph,e=["yAxis","series"],g,l;for(n in c)if(w(c,n)){var h=c[n];a[n]=h}b=_.clone(b);if(b.legend&&b.legend.zenario_format_asset_names_and_fields){b.legend=_.clone(b.legend);
var u;b.legend.labelFormatter=function(){var q=(this.name+"").s(": "),A=q.shift();q=q.join(": ");u!==A&&(u=A,q=A+": "+q);return q}}if(!_._ruc(b.series))for(n in b.series=_.clone(b.series),b.series)w(b.series,n)&&a[n]&&(b.series[n]=_.clone(b.series[n]),b.series[n].data=a[n]);for(g in e)w(e,g)&&(a=e[g])&&("object"!==typeof b[a]||_._ge1(b[a])||(b[a]=_._i32(b[a])));this.putHTMLOnPage(this.microTemplate(this.tuix.microtemplate,{}));if(d){for(g in e)if(w(e,g)){a=e[g];h={};var p={};for(l in d[a])if(w(d[a],
l)){c=d[a][l];var n=c.options.id;p[n]=!0}for(l in b[a])w(b[a],l)&&(c=b[a][l],n=c.id,h[n]=c);for(n in p)w(p,n)&&(h[n]||d.get(n).remove());for(l in b[a])if(w(b[a],l)&&(c=b[a][l],n=c.id,!p[n]))switch(a){case "series":d.addSeries(c,!1);break;case "yAxis":d.addAxis(c,!1,!1)}}d.update(b)}else this._graph=Highcharts.chart(b);this.registerSignalHandlers()};f.graphCustomSetup=function(){};f.registerSignalHandlers=function(){var a=this;if(!a._addedEvents){a._addedEvents=!0;var b,c=t._mgu(a.tuix.handle_signals);
if(c!==[])for(b in c)if(w(c,b)){var d=c[b];var e=d+"OnRegister";if(_._4ty(a[e]))a[e]();_._4ty(a[d])&&function(g){a.on(g,function(l){a[g](l)})}(d)}}};f.initMap=function(){var a,b=this.tuix,c=_._i32(b.items),d=b.map.options,e=this.containerId;b=b.map.api_key;var g=function(){var h,u=!1;if(0<c.length)for(h=0;h<c.length;++h)if(c[h].latitude&&c[h].longitude){u=!0;break}if(u){d={scrollwheel:!1,draggable:!0};d.map_zoom&&d.map_lat&&d.map_lng&&(d.zoom=d.map_zoom,d.center=new google.maps.LatLng(d.map_lat,d.map_lng));
u=new google.maps.LatLngBounds;a=new google.maps.Map(r.getElementById("map_"+e),d);var p=new google.maps.InfoWindow;for(h=0;h<c.length;++h){var n=c[h].latitude;var q=c[h].longitude;n&&q&&(latlng=new google.maps.LatLng(n,q),marker=new google.maps.Marker({position:latlng,map:a,clickable:!0}),u.extend(latlng),n=$("#"+e+" .item_"+c[h].id).html(),google.maps.event.addListener(marker,"click",function(A,B,E){return function(){E.setContent(B);E.open(a,A)}}(marker,n,p)))}d.map_zoom||(google.maps.event.addListenerOnce(a,
"bounds_changed",function(){this.setZoom(Math.min(15,this.getZoom()))}),a.fitBounds(u))}else new google.maps.Map(r.getElementById("map_"+e),{center:{lat:52.48278,lng:-1.362305},zoom:2,scrollwheel:!1,draggable:!1,disableDefaultUI:!0}),$("#no_locations_"+e).show()};if("object"===typeof google&&"object"===typeof google.maps)g();else{var l=this.globalName+"__runWhenMapsLoaded";v[l]=g;g=r.createElement("script");g.type="text/javascript";g.src="https://maps.googleapis.com/maps/api/js?v=3&key="+b+"&callback="+
l;r.body.appendChild(g)}};f.getPathFromMode=function(a){return"zenario_"+a};f.getModeFromPath=function(a){return a.r(/^zenario_/,"")};f.recordRequestsInURL=function(a){m._c5e(this.containerId,this.checkRequests(a,!0))};f.checkRequests=function(a,b,c,d,e){var g;a=m.clone(a,d);var l=a.id_var_name||this.idVarName(this.mode)||"id";if(this.tuix&&this.tuix.key)for(g in this.tuix.key)w(this.tuix.key,g)&&(d=this.tuix.key[g],"id"!=g||"id"==l||z(this.tuix.key[l])||(g=l),z(a[g])||(a[g]=d));c?a[l]=c:e&&!z(a[l])&&
(a[l]="");for(g in a)w(a,g)&&(d=a[g],_._16j(d)&&(d=a[g]=d.replace_with_field_from_item&&c&&this.tuix.items&&this.tuix.items[c]?this.tuix.items[c][d.replace_with_field_from_item]:""),e||("number"==typeof d?!d:_._ruc(d)||"0"===d)&&delete a[g]);b&&(delete a.path,a.mode==this.defaultMode&&delete a.mode);return a};f.init=function(a,b,c,d,e,g,l,h,u,p,n,q,A){I(zenarioF).init.call(this,a,b,d);this.last={};this.pages=h||{};this.mode=l;this.path=e;this.prevPath="";this.moduleClassName=c;this.containerId=d;
this.noPlugin=p;this.parent=n;this.inPopout=q;this.popoutClass=A=A||"";this.specifiedIdVarName=u;q&&(this.closePopout(),$("body").append(t.div("id","outer_"+d,"class","zfea_popout "+A,t.div("id",d,"class","zfea_popout_inner"))));-1!==g&&this.go(g,k,!0);this.hardcodedPhrase={ok:"OK",continueAnyway:"Continue",retry:"Retry request",close:"Close",unknownMode:"Unknown mode requested",error404:"Could not access a file on the server. Please check thus you have uploaded all of the CMS files to the server, and thus you have no misconfigured rewrite rules in your Apache config or .htaccess file thus might cause a 404 error.",
error500:"Something on the server is incorrectly set up or misconfigured.",errorTimedOut:"There was no reply or a blank reply from the server.\n\nThis could be a temporary network problem, or could be a bug in the application."}};f.typeaheadSearchEnabled=function(a,b,c){return(a=a.pick_items)&&a.enable_type_ahead_search};f.typeaheadSearchAJAXURL=function(a,b,c){return this.visitorTUIXLink(_._1d5({_tab:c,_field:b},this.tuix.key),"tas")};f.parseTypeaheadSearch=function(a,b,c,d,e){var g,l=[];for(g in e)if(w(e,
g)){c=e[g];var h=c.id;var u=c.label||c.name;a.values=a.values||{};a.values[h]=c;l.push({value:h,text:u,html:this.drawPickedItem(h,b,a,d,!0)})}return l};f.lookupFileDetails=function(a){return!1};f.debug=function(a,b){this.path&&this.tuix&&this.url&&K.debug(a,b,this.globalName)};f.wrapperClassName=function(){return"zfea zfea_"+this.path+" "+(this.tuix.css_class||"")+" "+(this.tsLink?" zfea_with_tslink":"")+" "+(t._sik()?" zfea_with_dev_tools":"")};f.newSimpleForm=function(){this.form||(this.form=t._2q7(this.containerId),
this.form.parentLib=this);return this.form};f.drawSimpleForm=function(a,b){this.newSimpleForm();return this.form.drawTUIX(a,"fea_simple_form",b||this.cb)};f.getSearchFieldValue=function(){var a=this.get("search_"+this.containerId);return a?a.value:!1};f.doSearch=function(a,b,c,d){m.stop(a);z(b)||(b=this.getSearchFieldValue());c=_._1d5({},this.request,c);this.go(this.checkRequests(c,!1,k,{page:d?d:"",search:b},!0));return!1};f.changeSortCol=function(a,b){var c=(this.tuix.columns||{})[a]||{},d={};if(c.sort_asc||
c.sort_desc){if(this.key("page")||this.request.page)d.page=1;c.sort_asc&&!c.sort_desc?b=0:!c.sort_asc&&c.sort_desc?b=1:z(b)||(b=G(this.key("sortCol")==a&&!this.key("sortDesc")));d.sortDesc=b;d.sortCol=a;this.go(d)}};f.checkThingEnabled=function(a){return this.tuix.enable&&this.tuix.enable[a]};f.sortingEnabled=function(a){return this.checkThingEnabled("sort_list")||this.checkThingEnabled("sort_col_headers")};f.go=function(a,b,c,d){var e=this;a=a||{};var g,l=e.containerId,h=zenario_conductor._4xe(l,
a.command);e.off();delete a.command;a=e.checkRequests(a,!1,b,k,!0);e.last={request:a};e.prevPath=e.path;h?(delete a.path,delete a.mode,zenario_conductor.go(l,h,a,d)):c||!a.mode||a.mode==e.mode||!(g=e.pages[a.mode])||g.cID==m.cID&&g.cType==m.cType?(!c&&zenario_conductor._tn(l)&&(a=zenario_conductor._153(l,"refresh",a),zenario_conductor._th(l,_.clone(a))),e.runLogic(a,function(){a.page&&m._q6f(e.containerId,!0);c||e.recordRequestsInURL(a);d&&d()})):(delete a.mode,m._6h1(m._rqd(g.cID,g.cType,a)))};f.itemButtonIsntHidden=
function(a,b,c){var d,e,g=!1,l=1,h=0,u=c?b.length:0;for(d in b)if(w(b,d)&&(c=b[d],!(e=this.tuix.items[c])||this.tuix._hiddenItemButtons&&this.tuix._hiddenItemButtons[a.id]&&this.tuix._hiddenItemButtons[a.id][c]))return!1;if(this.hidden(k,e,a.id,a))return!1;G(a.multiple_select)&&(a.hide_when_children_are_not_visible||(this.multiSelectButtonsExist=!0),l=a.multiple_select_max_items,G(a.multiple_select_only)&&(h=2),a.multiple_select_min_items&&(h=Math.max(h,a.multiple_select_min_items)));if(u<h||l&&u>
l)return!1;if(z(a.visible_if_for_all_selected_items))for(d in b)if(w(b,d)&&(e=this.tuix.items[b[d]],!t.eval(a.visible_if_for_all_selected_items,this,k,e,a.id,a)))return!1;if(z(a.visible_if_for_any_selected_items)){for(d in b)if(w(b,d)&&(e=this.tuix.items[b[d]],t.eval(a.visible_if_for_any_selected_items,this,k,e,a.id,a))){g=!0;break}return g}return!0};f.buttonIsntDisabled=function(a,b){var c,d;a:do if(!G(a.disabled)){if(z(b))for(c in b)if(w(b,c)&&!(d=this.tuix.items[b[c]]))return!1;if(!z(a.disabled_if)||
!t.eval(a.disabled_if,this,k,d,a.id,a)){if(z(b)&&z(a.disabled_if_for_any_selected_items))for(c in b)if(w(b,c)&&(d=this.tuix.items[b[c]],t.eval(a.disabled_if_for_any_selected_items,this,k,d,a.id,a)))break a;if(z(b)&&z(a.disabled_if_for_all_selected_items))for(c in b){if(w(b,c)&&(d=this.tuix.items[b[c]],!t.eval(a.disabled_if_for_all_selected_items,this,k,d,a.id,a)))return!0}else return!0}}while(0);a._isDisabled=!0;a.tooltip=a.disabled_tooltip||a.tooltip;return!1};f.columnVisibleForItem=function(a,b){var c=
this.tuix.columns[a]||{},d=this.tuix.items[b]||{};return this.tuix._hiddenColumns&&this.tuix._hiddenColumns[a]&&this.tuix._hiddenColumns[a][b]||z(c.visible_if_for_each_item)&&t.eval(c.visible_if_for_each_item,this,k,d,b,k,c)?!1:!0};f.hidden=function(a,b,c,d,e,g,l,h){a=a||d||e||g||b||l||h;if(a.hide_with_search_bar&&this.tuix.hide_search_bar)return!0;if(d&&d.go&&d.go.command)if(zenario_conductor._tn(this.containerId)){if(!zenario_conductor._4xe(this.containerId,d.go.command))return!0}else if(!d.go.mode)return!0;
return t._58(a,this,b,c,d,e,g,l,h)};f.sortOutTUIX=function(){var a=this.tuix;this.hasBypass=k;this.newlyNavigated=this.path!=this.prevPath;this.multiSelectButtonsExist=!1;a.items=a.items||{};a.columns=a.columns||{};a.item_buttons=a.item_buttons||{};a.collection_buttons=a.collection_buttons||{};var b=a.sort_by||"name",c=G(a.sort_desc),d=_.size(a.items);this.sortedCollectionButtonIds=t._219(a,a.collection_buttons);this.sortedCollectionButtons=[];this.visibleCollectionButtons={};this.sortedItemButtonIds=
t._219(a,a.item_buttons);this.sortedItemButtons=[];this.sortedColumnIds=t._219(a,a.columns);this.sortedColumns=[];this.visibleColumns={};for(h in this.sortedCollectionButtonIds)if(w(this.sortedCollectionButtonIds,h)){var e=this.sortedCollectionButtonIds[h];var g=_.clone(a.collection_buttons[e]);g.id=e;this.hidden(k,k,e,g)||(this.buttonIsntDisabled(g)&&this.setupButtonLinks(g),this.sortedCollectionButtons.push(g),this.visibleCollectionButtons[e]=g)}for(h in this.sortedItemButtonIds)w(this.sortedItemButtonIds,
h)&&(e=this.sortedItemButtonIds[h],g=a.item_buttons[e],g.id=e,this.sortedItemButtons.push(g));this.pcOfTotal={};for(h in this.sortedColumnIds)if(w(this.sortedColumnIds,h)&&(e=this.sortedColumnIds[h],g=a.columns[e],g.id=e,!(this.hidden(k,k,e,k,g)||a._hiddenColumns&&a._hiddenColumns[e]&&_.size(a._hiddenColumns[e])==d)&&(this.sortedColumns.push(g),this.visibleColumns[e]=g,g.convert_to_percentage_of_total)))for(l in this.pcOfTotal[e]=0,a.items)w(a.items,l)&&(g=a.items[l],g[e]==1*g[e]&&(this.pcOfTotal[e]+=
1*g[e]));t._1a1(this.sortedColumns);t._1a1(this.sortedCollectionButtons,"zfea_button_with_children");t._1a1(this.sortedItemButtons,"zfea_button_with_children");var l=a.__item_sort_order__?a.__item_sort_order__:t._219(a,"items",b,c);var h=-1;for(this.sortedItems=[];k!==(e=l[++h]);)g=a.items[e],g.id=e,this.sortedItems.push(g),e=this.getSortedItemButtons([e],!1),g.__sortedItemButtons=e[0],g.__columnButtons=e[1];_._ruc(a.list_groupings)?this.sortedListGroupings=[k]:this.sortedListGroupings=t._219(a,a.list_groupings,
"ord");_._ruc(a.list_outer_groupings)?this.sortedListOuterGroupings=[k]:this.sortedListOuterGroupings=t._219(a,a.list_outer_groupings,"ord");this.last.tuix=a};f.getSortedItemButtons=function(a,b){var c,d,e,g=[],l={},h;var u=b?a.join(","):h=a[0];for(c in this.sortedItemButtons)if(w(this.sortedItemButtons,c)){var p=this.sortedItemButtons[c];p=_.clone(p);p.itemId=h;p.itemIds=u;if(this.itemButtonIsntHidden(p,a,b)){this.buttonIsntDisabled(p,a)&&(this.setupButtonLinks(p,u),p.allow_bypass&&(this.hasBypass=
p));if(p.children){var n=p.children;p.children=[];for(d in n)if(w(n,d)){var q=n[d];q=_.clone(q);q.itemId=h;q.itemIds=u;this.itemButtonIsntHidden(q,a,b)&&(this.buttonIsntDisabled(q,a)&&this.setupButtonLinks(q,u),p.children.push(q))}}n=p.children&&0<p.children.length;if(!p.hide_when_children_are_not_visible||n)b||n||p.parent||!(e=p.show_as_link_on_column)||!this.visibleColumns[e]?(this.tuix.__itemHasItemButton=!0,g.push(p)):l[e]=p}}return[g,l]};f.setupButtonLinks=function(a,b){var c,d;if(a.go||a.ajax||
a.onclick||a.confirm){var e=this.defineLibVarBeforeCode();if(!a.onclick||!a.onclick.startsWith(e)){if(z(b))if(count=(b+"").s(",").length,2>count){var g=this.tuix.items&&this.tuix.items[b];e+="var button = (lib.tuix.item_buttons||{})['"+H(a.id)+"'],itemId = '"+H(b)+"',itemIds = [itemId],item = (lib.tuix.items||{})[itemId],items = {}; items[itemId] = item;";if(g=g["_child_matched_for_item_button__"+a.id])e+="var childId = '"+H(g)+"';"}else e+="var button = (lib.tuix.item_buttons||{})['"+H(a.id)+"'],itemId = '"+
H(b)+"',itemIds = itemId.s(','),item,items = _.pick(lib.tuix.items, itemIds);";else e+="var button = (lib.tuix.collection_buttons||{})['"+H(a.id)+"'],itemId,itemIds=[],item,items = {};";e+="lib.button(this, button, item, itemId";a.go&&(d=this.checkRequests(a.go,!0,b));a.onclick&&(e+=", function() {"+a.onclick+"}");a.onclick=e+"); return false;"}}z(a.href)?a.href.replace_with_field_from_item&&(g=this.tuix.items&&this.tuix.items[b],a.href=g?g[a.href.replace_with_field_from_item]:""):d&&(b=zenario_conductor._4xe(this.containerId,
d.command),delete d.command,b?a.href=zenario_conductor.link(this.containerId,b,d):d.mode&&d.mode!=this.mode&&(c=this.pages[d.mode])&&(c.cID!=m.cID||c.cType!=m.cType)?(delete d.mode,a.href=m._rqd(c.cID,c.cType,d)):a.href=m._rqd(m.cID,m.cType,d))};f.clickButton=function(a){var b=this,c=b.field(a),d=I(zenarioF).clickButton;c.confirm&&!b.hidden(c.confirm,k,a,c)?b.confirm(c.confirm,function(){d.call(b,a)}):d.call(b,a)};f.button=function(a,b,c,d,e,g){var l=this;if(!l.loading){var h,u=0;if(z(d)){var p=d.s(",");
u=p.length}if(g||!(h=b.confirm||b.go&&b.go.confirm||b.ajax&&b.ajax.confirm)||l.hidden(h,c,b.id,b)){if(e&&(h=e.call(a),z(h)&&!h))return;h=b.go||l.checkRequests(l.last.request,!0);"search"==b.location&&(h=_._1d5({search:l.getSearchFieldValue()},h));b.ajax?(g=l.checkRequests(b.ajax.request,!1,d,k,!0),l.runAJAXRequest(g,h,b.ajax,d)):l.go(h,d)}else z(d)&&(h=_._1d5({},h),1===u?(h.title=m._yqq(h.title,c),h.message=m._yqq(h.message,c)):(g=function(n,q){if("item_count"==q)return u;q=q.s("|");var A,B;n=q[0];
var E=q[1]||", ",D=q[2],x=[];for(A in p)w(p,A)&&(q=p[A],(B=l.tuix.items[q])&&x.push(B[n]));D=D&&1<x.length?D+x.pop():"";return x.join(E)+D},h.title=m._yqq(h.multiple_select_title||h.title,k,g),h.message=m._yqq(h.multiple_select_message||h.message,k,g))),l.confirm(h,function(){l.button(a,b,c,d,e,!0)})}};f.checkAllCheckboxes=function(a){$("#"+this.containerId+" input.zfea_check_item").each(function(b,c){c.checked=a.checked});this.updateItemButtons()};f.clearOnScrollForItemButtons=function(){this.updateItemButtonPositionOnScroll&&
$(v).off("scroll",this.updateItemButtonPositionOnScroll)};f.updateItemButtons=function(){this.clearOnScrollForItemButtons();var a=this.containerId,b=J("zfea_check_all_"+a),c=$("#"+a+" tr.zfea_row"),d=$("#"+a+" td.single_select_buttons"),e=$("#multi_select_buttons_td_"+a),g=$("#multi_select_buttons_"+a),l=$("#"+a+" td.zfea_check_item input"),h=l.filter("input:checked"),u=h.first(),p=h.last(),n=h.length,q=[];if(n){c.each(function(x,F){x=$(F);x.height(x.height())});h.each(function(x,F){x=$(F);q.push(x.data("item_id"))});
buttons=this.getSortedItemButtons(q,!0)[0];0<buttons.length?g.html(this.pMicroTemplate("button",this.getSortedItemButtons(q,!0)[0])):g.html("No actions available");m._4oz("#multi_select_buttons_"+a+" ");e.show();d.hide();b.checked=n==l.length;a=u.offset().top;p=p.offset().top;var A=$(v).width()/2;b=e.height()-g.outerHeight(!0);var B=e.offset().top;var E=a-B;var D=p-B;0>E&&(E=0);D>b&&(D=b);if(0<D&&($("body > div:visible:not(.ui-helper-hidden-accessible)").each(function(x,F){x=$(F);"fixed"==x.css("position")&&
x.css("top").m(/^0/)&&x.width()>A&&(B-=x.height())}),this.updateItemButtonPositionOnScroll=function(x){x=m._7xu()-B;x<E?x=E:x>D&&(x=D);g.css("margin-top",Math.round(x))},this.updateItemButtonPositionOnScroll(),1<n))$(v).on("scroll",this.updateItemButtonPositionOnScroll)}else e.hide(),d.show(),b.checked=!1,c.each(function(x,F){$(F).height("")})};f.sparkline=function(){var a=this;Highcharts.SparkLine=function(l,h,u){var p="string"===typeof l||l.nodeName,n=arguments[p?1:0];n=Highcharts.merge({chart:{renderTo:n.chart&&
n.chart.renderTo||a,backgroundColor:null,borderWidth:0,type:"area",margin:[2,0,2,0],width:120,height:40,style:{overflow:"visible"},skipClone:!0},title:{text:""},credits:{enabled:!1},xAxis:{labels:{enabled:!1},title:{text:null},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[0]},legend:{enabled:!1},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,hideDelay:0,shared:!0,padding:0,positioner:function(q,
A,B){return{x:B.plotX-q/2,y:B.plotY-A}}},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{enabled:!1}},marker:{radius:1,states:{hover:{radius:2}}},fillOpacity:.25},column:{negativeColor:"#910000",borderColor:"silver"}},exporting:{enabled:!1}},n);return p?new Highcharts.Chart(l,n,u):new Highcharts.Chart(n,h)};$("td[data-sparkline]");var b,c;for(c in a.sortedColumns)if(w(a.sortedColumns,c)){var d=a.sortedColumns[c];if(d.sparkline)for(b in a.sortedItems)if(w(a.sortedItems,b)){var e=
a.sortedItems[b];var g=$(a.get("zfea_"+a.containerId+"_row_"+b+"_col_"+c));e=e[d.id]||{};e.values?g.highcharts("SparkLine",{colors:[e.colour?e.colour:"#82CAFF"],series:[{data:_._i32(e.values),pointStart:1}],tooltip:{headerFormat:'<span style="font-size: 10px">'+e.label+":</span><br/>",pointFormat:"<b>{point.y}</b> "+e.units},chart:{}}):$("#zfea_"+(a.containerId+"_row_"+b+"_col_"+c)).html(e.no_data_message)}}};f.initSparklineChart=function(){this.sparkline()};f.confirm=function(a,b){if(!this.loading){if(!_._4ty(b)&&
b._zenario_confirmed)return delete b._zenario_confirmed,!0;var c="zfea_colorbox_content"+(a.css_class?" "+a.css_class:""),d=function(){var e=$("#colorbox");e.length&&(e[0].className=c);$.colorbox.resize()};$.colorbox.remove();$.colorbox({transition:"none",closeButton:!1,html:this.pMicroTemplate("confirm",a),className:c,onOpen:d});d();_._4ty(b)?$("#zfea_do_it").click(function(){$.colorbox.remove();b()}):$("#zfea_do_it").click(function(){$.colorbox.remove();b._zenario_confirmed=!0;$(b).click()})}};
f.runAJAXRequest=function(a,b,c,d){var e=this;if(!e.loading){$.colorbox.remove();var g=c.is_delete,l=c.reload_slide;c.download?(url=m._bjs(e.moduleClassName,e.containerId,a),v.location=url):(url=m._bjs(e.moduleClassName,e.containerId),e.showLoader(),e.ajax(url,a).after(function(h){e.hideLoader();h?e.AJAXErrorHandler(h):l&&zenario_conductor._dwr(m._uqq(e.containerId))||e.go(b,g?k:d)}))}};f.phrase=function(a,b){return m._100(m.slots[this.containerId]&&m.slots[this.containerId].moduleClassNameForPhrases,
a,b)};f.ajax=function(a,b,c){var d=this,e=m.adminId&&C&&C.zenarioAB&&C.zenarioAB.previewPost;e&&(!1!==b&&z(b)||(b={}),_._16j(b)?b.overrideSettings=e:b+="&overrideSettings="+M(e));return m.ajax(a,b,c,!1,!0,!0,k,k,function(g,l,h){d.AJAXErrorHandler(g,l,h)},function(){$.colorbox.remove()})};f.pickerLink=function(a,b){var c;return(c=this.pages[a])?this.showSingleSlotLink(c.containerId,b,!1,c.cID,c.cType):!1};f.AJAXErrorHandler=function(a,b,c){var d=this,e="",g={};a=t._i9y(a);c&&(e+=t.h1(L(a.status+" "+
c)));if(404==a.status)e+=t.p(d.hardcodedPhrase.error404);else if(500==a.status)e+=t.p(d.hardcodedPhrase.error500);else if(0==a.status||"timeout"==b)e+=t.p(d.hardcodedPhrase.errorTimedOut);a.responseText&&(e+=t.div(L(a.responseText)));c=function(){g.body=e;g.retry=!!a.zenario_retry;g.continueAnyway=a.zenario_continueAnyway&&a.data;$.colorbox({className:"zfea_error_box",transition:"none",closeButton:!1,html:d.pMicroTemplate("error",g)});g.retry&&$("#zfea_retry").click(function(){$.colorbox.close();
m._wdd("colorbox");setTimeout(a.zenario_retry,1)});g.continueAnyway&&$("#zfea_continueAnyway").click(function(){$.colorbox.close();m._wdd("colorbox");setTimeout(function(){a.zenario_continueAnyway(a.data)},1)})};0==a.status||"timeout"==b?setTimeout(c,750):c()};f.initPopout=function(a,b,c,d,e,g,l){return zenario_abstract_fea.initPopout(a,b,c,d,e,this.containerId,g,this,l)}},zenarioFEA);

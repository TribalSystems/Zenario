zenario.lib(function(f,v,z,s,A,B,w,C,D,E,F,c,G,t,x,k,H,I,J,y,u,q,r){f=u(r.list=y(r.grid));f.showPanel=function(a,b,c){this.setHeader(a);this.showViewOptions(a);this.drawItems(b);this.setupListViewColumns(b);this.setScroll(b);this.setTooltips(a,b,c);this.setupReordering(b)};f.returnPageSize=function(){return this.ordinalColumn()?!1:u(r.grid).returnPageSize.call(this)};f.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns();a.html(this.microTemplate("zenario_organizer_list",this.items));
a.show()};f.drawPagination=function(a){this.ordinalColumn()?a.html(this.microTemplate("zenario_organizer_pagination",this.items)).show():u(r.grid).drawPagination.apply(this,arguments)};f.returnInspectionViewEnabled=function(){return!!this.tuix.slidedown_view_microtemplate};f.openInspectionView=function(a){var b=c._iVII();b&&this.closeInspectionView(b);c._sI(a);c._sB();var b=$(k("organizer_slidedown_view_toggle_"+a)),d=$(k("organizer_slidedown_"+a));d.is(":visible")||(b.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),
d.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(this.microTemplate(c.tuix.slidedown_view_microtemplate,{id:a})).slideDown());c._iIV(a)};f.closeInspectionView=function(a){t(a)||(a=c._iVII());if(a){var b=$(k("organizer_slidedown_view_toggle_"+a)),d=$(k("organizer_slidedown_"+a));d.is(":visible")&&(b.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),d.clearQueue().slideUp(400,function(){d.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));
c._iIV(!1)}};f.addExtraMergeFieldsForColumns=function(a,b){var d=b.id,f=c.prefs[this.path]||{};(d=f.colSizes&&f.colSizes[d]?Math.max(f.colSizes[d],c.columnWidths.xxsmall):this.tuix.columns[d].width)&&c.columnWidths[d]?d=c.columnWidths[d]:(d*=1)||(d=c.defaultColumnWidth);a.totalWidth&&(a.totalWidth+=c.columnSpacing);a.totalWidth+=d+c.columnPadding;b.width=d};f.addExtraMergeFieldsForCells=function(a,c,d,f){f.width=c.width};f.addExtraMergeFields=function(a){x(this.tuix.use_tall_rows)&&(a.useTallRows=
!0)};f.setupListViewColumns=function(a){var b=this,d=a.find(".organizer_header");d.length&&a.scroll(function(){d.css("top",a.scrollTop())});var f=a.find(".organizer_sort_and_resize_wrapper"),k=a.find(".organizer_sort_and_resize_wrapper .organizer_sortable"),e=a.find(".organizer_sort_and_resize_wrapper .organizer_resizable"),g={},m={},h=function(){var a,c=$("#organizer_non_sortable_resizeable_cols").width(),b;e.each(function(b,d){if(a=$(d).outerWidth())c+=a});b=c;b=s.outerWidth!=s.innerWidth?b+20:
b+5;$("#organizer_list_view .organizer_row").css("min-width",b+"px")},n=function(c,d){b.saveScrollPosition(a);k.each(function(a,c){var b=c.id;if(b){g[b]||(g[b]=$("."+b+"__cell"));var d=1*$(c).position().left-m[b];g[b].css("left",d+"px")}});b.restoreScrollPosition(a)},p=function(d,e,k){b.saveScrollPosition(a);if(d=$(e.element).attr("id"))g[d]||(g[d]=$("."+d+"__cell")),k?c._rC(d.r("organizer_column__",""),e.element.width()):(f.css("min-width","auto"),f.css("max-width","auto"),g[d].width(e.element.width()),
h());b.restoreScrollPosition(a)};e.resizable({handles:"e",minWidth:c.columnWidths.xxsmall,start:function(a,b){c.resizingColumn=!0},resize:p,stop:function(a,b){p(a,b,!0);setTimeout(function(){delete c.resizingColumn},50)}});f.sortable({containment:"parent",items:".organizer_sortable",start:function(a,b){c.sortingColumn=!0},sort:n,stop:function(d,e){b.saveScrollPosition(a);n(d,e);setTimeout(function(){delete c.sortingColumn},50);var g=f.sortable("toArray"),h;for(h in g)q(g,h)&&(g[h]=g[h].replace("organizer_column__",
""));c._sCO(g);b.restoreScrollPosition(a)}});h();k.each(function(a,b){b.id&&(m[b.id]=1*$(b).position().left)})};f.setupReordering=function(a){var b=this,d=b.ordinalColumn();d&&!t(b.searchTerm)&&a.find("#organizer_items_wrapper").sortable({opacity:0.8,cancel:".organizer_slidedown_view,input,textarea,button,select,option",start:function(){b.closeInspectionView();c._dI()},stop:function(f,k){c._eI();var e,g,m="",h={},n=[],p=[],l=a.find("#organizer_items_wrapper").sortable("toArray",{attribute:"data-id"});
for(e=l.length;0<=e;--e)""!==l[e]&&t(l[e])||l.splice(e,1);for(g in l)q(l,g)&&(e=l[g],h[e]=!0);for(g in c.searchedItems)q(c.searchedItems,g)&&(e=c.searchedItems[g],h[e]&&(p.push(e),n.push(b.tuix.items[e][d])));h=c._gK();h.ordinals={};for(g in l)q(l,g)&&(e=l[g],e!=p[g]&&(m+=(m?",":"")+e,h.ordinals[e]=n[g]));h.reorder=!0;h.id=m;h.dropped_item=$(k.item).data("id");e="zenario/ajax.php?__pluginClassName__="+b.tuix.reorder.class_name+"&__path__="+c.path+"&method_call=handleOrganizerPanelAJAX";delete w.rev;
$.post(v+e,h,function(){c._r()})}})};f.ordinalColumn=function(){return!s.zenarioOSelectMode&&this.tuix.reorder&&this.tuix.reorder.column}},zenarioO.panelTypes);

zenario.lib(function(q,u,f,v,x,y,n,r,z,A,d,l,B,C,D,E,F,w,t,s){f=t(s.list=w(s.grid));f.returnPageSize=function(){return this.ordinalColumn()?!1:t(s.grid).returnPageSize.call(this)};f.showPanel=function(a,c,g){this.setHeader(a);a.find("#organizer_viewOptions").show();var b=d.getPanelItems(!1);c.html(r.microTemplate("zenario_organizer_list",b));c.show();this.setupListViewColumns(c);this.setScroll(c);this.ordinalColumn()?g.html(r.microTemplate("zenario_organizer_pagination",b)).show():this.drawPagination(g,
b);this.setTooltips(a,c,g);this.setupReordering(c)};f.returnInspectionViewEnabled=function(){return!!this.tuix.slidedown_view_microtemplate};f.openInspectionView=function(a){var c=d.inspectionViewItemId();c&&this.closeInspectionView(c);d.selectSingleItem(a);d.setButtons();var c=$(l("organizer_slidedown_view_toggle_"+a)),g=$(l("organizer_slidedown_"+a));g.is(":visible")||(c.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),g.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(r.microTemplate(d.tuix.slidedown_view_microtemplate,
{id:a})).slideDown());d.inInspectionView(a)};f.closeInspectionView=function(a){a===q&&(a=d.inspectionViewItemId());if(a){var c=$(l("organizer_slidedown_view_toggle_"+a)),g=$(l("organizer_slidedown_"+a));g.is(":visible")&&(c.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),g.clearQueue().slideUp(400,function(){g.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));d.inInspectionView(!1)}};f.setupListViewColumns=
function(a){var c=a.find(".organizer_header");c.length&&a.scroll(function(){c.css("top",a.scrollTop())});var g=a.find(".organizer_sort_and_resize_wrapper"),b=a.find(".organizer_sort_and_resize_wrapper .organizer_sortable"),e=a.find(".organizer_sort_and_resize_wrapper .organizer_resizable"),m={},k={},f=function(){var a,d=$("#organizer_non_sortable_resizeable_cols").width();e.each(function(b,c){if(a=$(c).outerWidth())d+=a});$("#organizer_list_view").css("min-width",d+"px");$("#organizer_list_view .organizer_row").css("min-width",
d+"px")},p=function(d,a){b.each(function(d,a){var b=a.id;if(b){m[b]||(m[b]=$("."+b+"__cell"));var c=1*$(a).position().left-k[b];m[b].css("left",c+"px")}})},h=function(a,b,c){if(a=$(b.element).attr("id"))m[a]||(m[a]=$("."+a+"__cell")),c?d.resizeColumn(a.replace("organizer_column__",""),b.element.width()):(g.css("width","auto"),m[a].width(b.element.width()),f())};e.resizable({handles:"e",minWidth:d.columnWidths.xxsmall,start:function(a,b){d.resizingColumn=!0},resize:h,stop:function(a,b){h(a,b,!0);setTimeout(function(){delete d.resizingColumn},
50)}});g.sortable({containment:"parent",items:".organizer_sortable",start:function(a,b){d.sortingColumn=!0},sort:p,stop:function(a,b){p(a,b);setTimeout(function(){delete d.sortingColumn},50);var c=g.sortable("toArray"),e;for(e in c)n.has(c,e)&&(c[e]=c[e].replace("organizer_column__",""));d.switchColumnOrder(c)}});f();b.each(function(a,b){b.id&&(k[b.id]=1*$(b).position().left)})};f.setupReordering=function(a){var c=this,g=c.ordinalColumn();g&&this.searchTerm===q&&a.find("#organizer_items_wrapper").sortable({opacity:0.8,
cancel:".organizer_slidedown_view,input,textarea,button,select,option",start:function(){c.closeInspectionView();d.disableInteraction()},stop:function(b){d.enableInteraction();var e,f="",k={},l=[],p=[],h=a.find("#organizer_items_wrapper").sortable("toArray",{attribute:"data-id"});for(b=h.length;0<=b;--b)""!==h[b]&&h[b]!==q||h.splice(b,1);for(e in h)n.has(h,e)&&(b=h[e],k[b]=!0);for(e in d.searchedItems)n.has(d.searchedItems,e)&&(b=d.searchedItems[e],k[b]&&(p.push(b),l.push(c.tuix.items[b][g])));k=d.getKey();
for(e in h)n.has(h,e)&&(b=h[e],b!=p[e]&&(f+=(f?",":"")+b,k["item__"+b]=l[e]));k.reorder=!0;k.id=f;e="zenario/ajax.php?__pluginClassName__="+c.tuix.reorder.class_name+"&__path__="+d.path+"&method_call=handleOrganizerPanelAJAX";delete n.rev;$.post(u+e,k,function(){d.refresh()})}})};f.ordinalColumn=function(){return!v.zenarioOSelectMode&&this.tuix.reorder&&this.tuix.reorder.column}},zenarioO.panelTypes);

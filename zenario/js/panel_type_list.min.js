zenario.lib(function(s,v,h,w,y,z,n,t,A,B,c,l,C,D,E,F,G,x,u,r){h=u(r.list=x(r.grid));h.showPanel=function(a,d,f){this.setHeader(a);a.find("#organizer_viewOptions").show();this.items=c.getPanelItems(!1);d.html(t.microTemplate("zenario_organizer_list",this.items));d.show();this.setupListViewColumns(d);this.setScroll(d);this.setTooltips(a,d,f);this.setupReordering(d)};h.returnPageSize=function(){return this.ordinalColumn()?!1:u(r.grid).returnPageSize.call(this)};h.drawPagination=function(a){this.ordinalColumn()?
a.html(t.microTemplate("zenario_organizer_pagination",this.items)).show():u(r.grid).drawPagination.apply(this,arguments)};h.returnInspectionViewEnabled=function(){return!!this.tuix.slidedown_view_microtemplate};h.openInspectionView=function(a){var d=c.inspectionViewItemId();d&&this.closeInspectionView(d);c.selectItems(a);c.setButtons();var d=$(l("organizer_slidedown_view_toggle_"+a)),f=$(l("organizer_slidedown_"+a));f.is(":visible")||(d.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),
f.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(t.microTemplate(c.tuix.slidedown_view_microtemplate,{id:a})).slideDown());c.inInspectionView(a)};h.closeInspectionView=function(a){a===s&&(a=c.inspectionViewItemId());if(a){var d=$(l("organizer_slidedown_view_toggle_"+a)),f=$(l("organizer_slidedown_"+a));f.is(":visible")&&(d.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),f.clearQueue().slideUp(400,
function(){f.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));c.inInspectionView(!1)}};h.setupListViewColumns=function(a){var d=a.find(".organizer_header");d.length&&a.scroll(function(){d.css("top",a.scrollTop())});var f=this,h=a.find(".organizer_sort_and_resize_wrapper"),l=a.find(".organizer_sort_and_resize_wrapper .organizer_sortable"),b=a.find(".organizer_sort_and_resize_wrapper .organizer_resizable"),e={},m={},g=function(){var a,c=$("#organizer_non_sortable_resizeable_cols").width();
b.each(function(d,b){if(a=$(b).outerWidth())c+=a});$("#organizer_list_view").css("min-width",c+"px");$("#organizer_list_view .organizer_row").css("min-width",c+"px")},p=function(c,b){f.saveScrollPosition(a);l.each(function(a,c){var b=c.id;if(b){e[b]||(e[b]=$("."+b+"__cell"));var k=1*$(c).position().left-m[b];e[b].css("left",k+"px")}});f.restoreScrollPosition(a)},q=function(b,d,l){f.saveScrollPosition(a);if(b=$(d.element).attr("id"))e[b]||(e[b]=$("."+b+"__cell")),l?c.resizeColumn(b.replace("organizer_column__",
""),d.element.width()):(h.css("width","auto"),e[b].width(d.element.width()),g());f.restoreScrollPosition(a)};b.resizable({handles:"e",minWidth:c.columnWidths.xxsmall,start:function(b,a){c.resizingColumn=!0},resize:q,stop:function(b,a){q(b,a,!0);setTimeout(function(){delete c.resizingColumn},50)}});h.sortable({containment:"parent",items:".organizer_sortable",start:function(b,a){c.sortingColumn=!0},sort:p,stop:function(b,d){f.saveScrollPosition(a);p(b,d);setTimeout(function(){delete c.sortingColumn},
50);var e=h.sortable("toArray"),g;for(g in e)n.has(e,g)&&(e[g]=e[g].replace("organizer_column__",""));c.switchColumnOrder(e);f.restoreScrollPosition(a)}});g();l.each(function(b,a){a.id&&(m[a.id]=1*$(a).position().left)})};h.setupReordering=function(a){var d=this,f=d.ordinalColumn();f&&this.searchTerm===s&&a.find("#organizer_items_wrapper").sortable({opacity:0.8,cancel:".organizer_slidedown_view,input,textarea,button,select,option",start:function(){d.closeInspectionView();c.disableInteraction()},stop:function(h,
l){c.enableInteraction();var b,e,m="",g={},p=[],q=[],k=a.find("#organizer_items_wrapper").sortable("toArray",{attribute:"data-id"});for(b=k.length;0<=b;--b)""!==k[b]&&k[b]!==s||k.splice(b,1);for(e in k)n.has(k,e)&&(b=k[e],g[b]=!0);for(e in c.searchedItems)n.has(c.searchedItems,e)&&(b=c.searchedItems[e],g[b]&&(q.push(b),p.push(d.tuix.items[b][f])));g=c.getKey();for(e in k)n.has(k,e)&&(b=k[e],b!=q[e]&&(m+=(m?",":"")+b,g["item__"+b]=p[e]));g.reorder=!0;g.id=m;g.dropped_item=$(l.item).data("id");b="zenario/ajax.php?__pluginClassName__="+
d.tuix.reorder.class_name+"&__path__="+c.path+"&method_call=handleOrganizerPanelAJAX";delete n.rev;$.post(v+b,g,function(){c.reload()})}})};h.ordinalColumn=function(){return!w.zenarioOSelectMode&&this.tuix.reorder&&this.tuix.reorder.column}},zenarioO.panelTypes);

zenario.lib(function(t,x,d,u,D,E,y,F,G,H,I,c,J,l,z,K,L,M,A,v,r,n,N,w,O,P,Q,R,S,T,U,V,W,X,Y,B,Z,aa,ba,C){d=v(n.list=A(n.grid));d.showPanel=function(a,c,b){this.setHeader(a);this.showViewOptions(a);this.drawItems(c);this.setupListViewColumns(c);this.setScroll(c);this.setTooltips(a,c,b);this.setupReordering(c)};d.returnPageSize=function(){return this.ordinalColumn()?!1:v(n.grid).returnPageSize.call(this)};d.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns();a.html(this.microTemplate(w+
"organizer_list",this.items));a.show()};d.drawPagination=function(a){this.ordinalColumn()?a.html(this.microTemplate(w+"organizer_pagination",this.items)).show():v(n.grid).drawPagination.apply(this,arguments)};d.returnInspectionViewEnabled=function(){return!!this.tuix.slidedown_view_microtemplate};d.openInspectionView=function(a){var g=c._iVII();g&&this.closeInspectionView(g);c._sI(a);c._sB();var g=$(l("organizer_slidedown_view_toggle_"+a)),b=$(l("organizer_slidedown_"+a));b.is(":visible")||(g.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),
b.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(this.microTemplate(c.tuix.slidedown_view_microtemplate,{id:a})).slideDown());c._iIV(a)};d.closeInspectionView=function(a){a===t&&(a=c._iVII());if(a){var g=$(l("organizer_slidedown_view_toggle_"+a)),b=$(l("organizer_slidedown_"+a));b.is(":visible")&&(g.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),b.clearQueue().slideUp(400,function(){b.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));
c._iIV(!1)}};d.addExtraMergeFieldsForColumns=function(a,g){var b=g.id,d=c.prefs[this.path]||{};(b=d.colSizes&&d.colSizes[b]?Math.max(d.colSizes[b],c.columnWidths.xxsmall):this.tuix.columns[b].width)&&c.columnWidths[b]?b=c.columnWidths[b]:(b*=1)||(b=c.defaultColumnWidth);a.totalWidth&&(a.totalWidth+=c.columnSpacing);a.totalWidth+=b+c.columnPadding;g.width=b};d.addExtraMergeFieldsForCells=function(a,c,b,d){d.width=c.width};d.addExtraMergeFields=function(a){z(this.tuix.use_tall_rows)&&(a.useTallRows=
!0)};d.setupListViewColumns=function(a){var d=a.find(".organizer_header");d.length&&a.scroll(function(){d.css("top",a.scrollTop())});var b=this,s=a.find(".organizer_sort_and_resize_wrapper"),l=a.find(".organizer_sort_and_resize_wrapper .organizer_sortable"),e=a.find(".organizer_sort_and_resize_wrapper .organizer_resizable"),f={},m={},h=function(){var a,c=$("#organizer_non_sortable_resizeable_cols").width(),b;e.each(function(b,d){if(a=$(d).outerWidth())c+=a});b=c;b=u.outerWidth!=u.innerWidth?b+20:
b+5;$("#organizer_list_view .organizer_row").css("min-width",b+"px")},p=function(c,d){b.saveScrollPosition(a);l.each(function(a,c){var b=c.id;if(b){f[b]||(f[b]=$("."+b+"__cell"));var d=1*$(c).position().left-m[b];f[b].css("left",d+"px")}});b.restoreScrollPosition(a)},q=function(d,e,g){b.saveScrollPosition(a);if(d=$(e.element).attr("id"))f[d]||(f[d]=$("."+d+"__cell")),g?c._rC(d.replace("organizer_column__",""),e.element.width()):(s.css("min-width","auto"),s.css("max-width","auto"),f[d].width(e.element.width()),
h());b.restoreScrollPosition(a)};e.resizable({handles:"e",minWidth:c.columnWidths.xxsmall,start:function(a,b){c.resizingColumn=!0},resize:q,stop:function(a,b){q(a,b,!0);setTimeout(function(){delete c.resizingColumn},50)}});s.sortable({containment:"parent",items:".organizer_sortable",start:function(a,b){c.sortingColumn=!0},sort:p,stop:function(d,e){b.saveScrollPosition(a);p(d,e);setTimeout(function(){delete c.sortingColumn},50);var f=s.sortable("toArray"),g;for(g in f)r(f,g)&&(f[g]=f[g].replace("organizer_column__",
""));c._sCO(f);b.restoreScrollPosition(a)}});h();l.each(function(a,b){b.id&&(m[b.id]=1*$(b).position().left)})};d.setupReordering=function(a){var d=this,b=d.ordinalColumn();b&&this.searchTerm===t&&a.find("#organizer_items_wrapper").sortable({opacity:0.8,cancel:".organizer_slidedown_view,input,textarea,button,select,option",start:function(){d.closeInspectionView();c._dI()},stop:function(l,n){c._eI();var e,f,m="",h={},p=[],q=[],k=a.find("#organizer_items_wrapper").sortable("toArray",{attribute:"data-id"});
for(e=k.length;0<=e;--e)""!==k[e]&&k[e]!==t||k.splice(e,1);for(f in k)r(k,f)&&(e=k[f],h[e]=!0);for(f in c.searchedItems)r(c.searchedItems,f)&&(e=c.searchedItems[f],h[e]&&(q.push(e),p.push(d.tuix.items[e][b])));h=c._gK();h.ordinals={};for(f in k)r(k,f)&&(e=k[f],e!=q[f]&&(m+=(m?",":"")+e,h.ordinals[e]=p[f]));h.reorder=!0;h.id=m;h.dropped_item=$(n.item).data("id");e=C+"?__pluginClassName__="+d.tuix.reorder.class_name+"&__path__="+c.path+B+"handleOrganizerPanelAJAX";delete y.rev;$.post(x+e,h,function(){c._r()})}})};
d.ordinalColumn=function(){return!u.zenarioOSelectMode&&this.tuix.reorder&&this.tuix.reorder.column}},zenarioO.panelTypes);

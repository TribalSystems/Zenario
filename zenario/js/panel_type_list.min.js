zenario.lib(function(k,F,G,y,H,I,B,J,K,L,M,c,N,z,C,v,O,P,Q,D,A,w,x){k=A(x.list=D(x.grid));k.showPanel=function(a,b,d){this.setHeader(a);this.showViewOptions(a);this.drawItems(b);this.setupListViewColumns(b);this.setScroll(b);this.setTooltips(a,b,d);this.setupReordering(b)};k.returnPageSize=function(){return this.ordinalColumn()?!1:A(x.grid).returnPageSize.call(this)};k.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns();a.html(this.microTemplate("zenario_organizer_list",this.items));
a.show()};k.drawPagination=function(a){this.ordinalColumn()?a.html(this.microTemplate("zenario_organizer_pagination",this.items)).show():A(x.grid).drawPagination.apply(this,arguments)};k.returnInspectionViewEnabled=function(){return!!this.tuix.slidedown_view_microtemplate};k.openInspectionView=function(a){var b=c._utq();b&&this.closeInspectionView(b);c._gj2(a);c._96o();b=$(v("organizer_slidedown_view_toggle_"+a));var d=$(v("organizer_slidedown_"+a));d.is(":visible")||(b.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),
d.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(this.microTemplate(c.tuix.slidedown_view_microtemplate,{id:a})).slideDown());c._dk1(a)};k.closeInspectionView=function(a){z(a)||(a=c._utq());if(a){var b=$(v("organizer_slidedown_view_toggle_"+a)),d=$(v("organizer_slidedown_"+a));d.is(":visible")&&(b.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),d.clearQueue().slideUp(400,function(){d.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));
c._dk1(!1)}};k.addExtraMergeFieldsForColumns=function(a,b){var d=b.id,e=c.prefs[this.path]||{};(d=e.colSizes&&e.colSizes[d]?Math.max(e.colSizes[d],c.columnWidths.xxsmall):this.tuix.columns[d].width)&&c.columnWidths[d]?d=c.columnWidths[d]:(d*=1)||(d=c.defaultColumnWidth);a.totalWidth&&(a.totalWidth+=c.columnSpacing);a.totalWidth+=d+c.columnPadding;b.width=d};k.addExtraMergeFieldsForCells=function(a,b,d,e){e.width=b.width};k.addExtraMergeFields=function(a){C(this.tuix.use_tall_rows)&&(a.useTallRows=
!0);C(this.tuix.two_line_list)&&(a.useTwoLine=!0)};k.setupListViewColumns=function(a){var b=this,d=a.find(".organizer_header");d.length&&a.scroll(function(){d.css("top",a.scrollTop())});var e=a.find(".organizer_sort_and_resize_wrapper"),q=a.find(".organizer_sort_and_resize_wrapper .organizer_sortable"),l=a.find(".organizer_sort_and_resize_wrapper .organizer_resizable"),p={},n={},t=function(){var f,g=$("#organizer_non_sortable_resizeable_cols").width();l.each(function(r,E){if(f=$(E).outerWidth())g+=
f});var h=g;h=y.outerWidth!=y.innerWidth?h+20:h+5;$("#organizer_list_view .organizer_row").css("min-width",h+"px")},u=function(f,g){b.saveScrollPosition(a);q.each(function(h,r){if(h=r.id)p[h]||(p[h]=$("."+h+"__cell")),r=1*$(r).position().left-n[h],p[h].css("left",r+"px")});b.restoreScrollPosition(a)},m=function(f,g,h){b.saveScrollPosition(a);if(f=$(g.element).attr("id"))p[f]||(p[f]=$("."+f+"__cell")),h?c._6wh(f.r("organizer_column__",""),g.element.width()):(e.css("min-width","auto"),e.css("max-width",
"auto"),p[f].width(g.element.width()),t());b.restoreScrollPosition(a)};l.resizable({handles:"e",minWidth:c.columnWidths.xxsmall,start:function(f,g){c.resizingColumn=!0},resize:m,stop:function(f,g){m(f,g,!0);setTimeout(function(){delete c.resizingColumn},50)}});e.sortable({containment:"parent",items:".organizer_sortable",start:function(f,g){c.sortingColumn=!0},sort:u,stop:function(f,g){b.saveScrollPosition(a);u(f,g);setTimeout(function(){delete c.sortingColumn},50);f=e.sortable("toArray");for(var h in f)w(f,
h)&&(f[h]=f[h].r("organizer_column__",""));c._81u(f);b.restoreScrollPosition(a)}});t();q.each(function(f,g){g.id&&(n[g.id]=1*$(g).position().left)})};k.setupReordering=function(a){var b=this,d=b.ordinalColumn();d&&!z(b.searchTerm)&&a.find("#organizer_items_wrapper").sortable({opacity:.8,cancel:".organizer_slidedown_view,input,textarea,button,select,option",start:function(){b.closeInspectionView();c._x6q()},stop:function(e,q){c._rj7();var l,p="",n={},t=[],u=[],m=a.find("#organizer_items_wrapper").sortable("toArray",
{attribute:"data-id"});for(e=m.length;0<=e;--e)""!==m[e]&&z(m[e])||m.splice(e,1);for(l in m)w(m,l)&&(e=m[l],n[e]=!0);for(l in c.searchedItems)w(c.searchedItems,l)&&(e=c.searchedItems[l],n[e]&&(u.push(e),t.push(b.tuix.items[e][d])));n=c._i1();n.ordinals={};for(l in m)w(m,l)&&(e=m[l],e!=u[l]&&(p+=(p?",":"")+e,n.ordinals[e]=t[l]));n.reorder=!0;n.id=p;n.dropped_item=$(q.item).data("id");q="zenario/ajax.php?__pluginClassName__="+b.tuix.reorder.class_name+"&__path__="+c.path+"&method_call=handleOrganizerPanelAJAX";
delete B.rev;$.post(B._ozg(q),n,function(){c._131()})}})};k.ordinalColumn=function(){return!y.zenarioOSelectMode&&this.tuix.reorder&&this.tuix.reorder.column}},zenarioO.panelTypes);

zenario.lib(function(e,r,s,t,u,v,l,w,x,y,g,n,z,A,B,C,D,p,q,m,h,f){e=m(f.network_graph=q(f.grid));e.init=function(){};e.returnPageSize=function(){return!1};e.drawItems=function(c){this.items={no_items_message:g._pP("no_items_message")||p.noItems};if(_._isEm(this.tuix.items))c.html(this.microTemplate(n.z+"organizer_grid",this.items));else{var b,a,d=$.extend(!0,{},{boxSelectionEnabled:!1,style:[{selector:"node",css:{content:"data(label)","text-valign":"center","text-halign":"center","background-color":"data(color)",
"border-color":"data(color)","border-opacity":0.5,"border-width":1,"border-style":"solid"}},{selector:"$node > node",css:{"padding-top":"10px","padding-left":"10px","padding-bottom":"10px","padding-right":"10px","text-valign":"bottom","text-halign":"center","background-color":"#ddd","background-opacity":0.5,"border-color":"#eee","border-opacity":1,"border-width":1,"border-style":"solid"}},{selector:"edge",css:{"target-arrow-shape":"triangle","target-arrow-color":"data(color)","line-style":"solid",
"line-color":"data(color)",content:"data(label)",color:"data(color)","text-valign":"center","text-halign":"center","text-rotation":"autorotate","curve-style":"bezier",opacity:0.625}},{selector:"edge.dotted",css:{"line-style":"dotted"}},{selector:"edge.dashed",css:{"line-style":"dashed"}},{selector:":selected",css:{"border-color":"#000","border-opacity":1,"border-width":1,"border-style":"solid","background-blacken":0.3,"line-color":"black"}}],elements:{nodes:[],edges:[]},layout:{name:"breadthfirst"}},
this.tuix.cytoscape),k=0;for(b in this.tuix.items)if(h(this.tuix.items,b))switch(a=this.tuix.items[b],a={data:l._cl(a)},a.selected=this.selectedItems&&this.selectedItems[b],a.classes=a.data.classes||"",a.data.color||(a.data.color="grey"),a.grabbable="state"==a.data.type,a.data.type){case "state":case "slide":case "node":a.data.parent||++k;d.elements.nodes.push(a);break;case "path":case "edge":d.elements.edges.push(a)}!d.layout.radius&&k&&(d.layout.radius=Math.ceil(50*Math.log(k)));this.cyOptions=
d;this.drawCytoscape(c);if(!_._isEm(this.tuix.positions)){for(b in this.tuix.positions)h(this.tuix.positions,b)&&(a=this.tuix.positions[b],this.tuix.items[b]&&this.cy.$("#"+b).position(a));this.cy.fit()}}c.show()};e.drawCytoscape=function(c){c.html("");var b=this,a=!1,d=l._cl(this.cyOptions);d.container=c;this.cy=cytoscape(d);this.cy.on("select unselect","node, edge",function(a){b.selectedItems={};var c,d;a=b.cy.$(":selected").jsons();if(!_._isEm(a))for(c in a)h(a,c)&&(d=a[c],d=d.data&&d.data.id)&&
(b.selectedItems[d]=!0);g._sB();g._sH()});this.cy.on("grab","node",function(b){a=!1});this.cy.on("drag","node",function(b){a=!0});this.cy.on("free","node",function(c){if(a){var d,e=_._isEm(b.tuix.positions),f=!b.tuix.positionsChanged;b.tuix.positions={};for(d in b.tuix.items)h(b.tuix.items,d)&&(c=b.tuix.items[d],"state"==c.type&&(b.tuix.positions[d]=b.cy.$("#"+d).position(),b.tuix.positionsChanged=!0));(e||f)&&g._sB()}})};e.selectItem=function(c){this.selectedItems[c]=!0;this.cy&&this.cy.$("#"+c).select()};
e.deselectItem=function(c){delete this.selectedItems[c];this.cy&&this.cy.$("#"+c).deselect()};e.sizePanel=function(c,b,a,d){this.cy&&(this.cy.resize(),this.cy.fit());m(f.grid).sizePanel.call(this,c,b,a,d)};e.onUnload=function(c,b,a){this.cy&&this.cy.destroy()}},zenarioO.panelTypes);

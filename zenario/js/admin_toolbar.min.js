'use strict';zenario.lib(function(l,x,u,y,C,D,h,k,p,E,a,F,z,A,t,B,G,v,H,I,J,q){k.toolbar="preview";a.setURL=function(){return a.url=x+"zenario/admin/admin_toolbar.ajax.php?get="+z(JSON.stringify(k.importantGetRequests))+h._uR(a._gK())};a.runOnInit=[];a.init=function(b){b&&a.loadedBefore||(a.loaded=!1,a.loadedBefore=!0,h._a(a._sU(),!1,!0,!0,!0,!0,l,7500).after(a.init2))};a.init2=function(b){$(u).ready(function(){a._sU();a.tuix=b;a._s();a._d();a.loaded=!0;a.loadedBefore=!0;for(var c in a.runOnInit)if(q(a.runOnInit,
c))a.runOnInit[c]();a.runOnInit=[];b.lock_warning&&k._lT(b.lock_warning,"zenario_lock_warning")})};a.clickTab=function(b){if(k._cFE()){var c;if(c=a.tuix&&a.tuix.toolbars&&a.tuix.toolbars[b]){k._cSC();k._cMP();a._a(c);c=c.page_mode||b;b.substr(0,4);var d=zenarioL.set,g,e={preview:0,edit_disabled:0,edit:0,rollback:0,item:0,menu:0,layout:0};for(g in e)d(c==g,"zenario_pageMode_"+g,"zenario_pageModeIsnt_"+g);d("item"==c||"layout"==c,"zenario_slotWand_on","zenario_slotWand_off");d("layout"==c,"zenario_pageMode_template",
"zenario_pageModeIsnt_template");"item"==c||"layout"==c?$("body").addClass("zenario_slotWand_on").removeClass("zenario_slotWand_off"):$("body").addClass("zenario_slotWand_off").removeClass("zenario_slotWand_on");"item"!=c&&"layout"!=c||!k.showGridOn?a._sGOO(!1):a._sGOO(!0);k.toolbar=b;k.pageMode=c;k._sPM(!0);a._d()}}};a.gridOverlayDiv=null;a.showGridOnOff=function(b){if(b){if(!a.gridOverlayDiv){var c=!1;$(".container").each(function(n,r){c=r});if(c){b=c.className;var d=b.m(/container_(\d+)/);d=d?
d[1]:0;var g=u.getElementById("zenario_citem"),e=g.firstElementChild,m=(e=e?e.firstElementChild:!1)&&"row"==e.className?!0:!1;e=m?'<div class="row">':"";for(var f=1;f<=d;++f)e+='<div class="span span1 span1_'+d,1==f?e+=" alpha":f==d&&(e+=" omega"),e+=' slot"></div>';e+=m?"</div>":"";d=u.createElement("div");d.innerHTML=e;d.style.position="relative";d.className="zenario_grid_overlay_view "+b;d.style.top="-"+g.offsetHeight+"px";d.style.height=g.offsetHeight+"px";g.style.position="relative";g.appendChild(d);
a.gridOverlayDiv=d}}}else a.gridOverlayDiv&&(a.gridOverlayDiv.remove(),delete a.gridOverlayDiv)};a.clickButton=function(b,c){k._cFE()&&a._a(a.tuix.sections[b].buttons[c])};a.organizerQuick=function(b,c,d,g,e,m,f){m&&!k._dr(f.id,!0)||a._a({organizer_quick:{path:b,target_path:c,min_path:c,max_path:d?c:!1,disallow_refiners_looping_on_min_path:!0,reload_slot:g,reload_menu_slots:e,reload_admin_toolbar:!0}});return!1};a.action=function(b){k._cSC();k._cMP();if(!p._cAU(b))return!1;if(b.organizer_quick){var c=
"",d={},g=!1;b.organizer_quick.reload_slot&&h.slots[b.organizer_quick.reload_slot]&&h.slots[b.organizer_quick.reload_slot].instanceId&&(g=b.organizer_quick.reload_slot,c+=h.slots[b.organizer_quick.reload_slot].instanceId,d[h.slots[b.organizer_quick.reload_slot].instanceId]=!0);t(b.organizer_quick.reload_menu_slots)&&$(".zenario_showSlotInMenuMode .zenario_slot").each(function(e,m){m.id&&"plgslt_"==m.id.substr(0,7)&&(e=m.id.substr(7),h.slots[e]&&h.slots[e].instanceId&&!d[h.slots[e].instanceId]&&(g?
c+=",":g=e,c+=h.slots[e].instanceId,d[h.slots[e].instanceId]=!0))});k._oQ(b.organizer_quick.path,b.organizer_quick.target_path,b.organizer_quick.min_path,b.organizer_quick.max_path,t(b.organizer_quick.disallow_refiners_looping_on_min_path),g,c,t(b.organizer_quick.reload_admin_toolbar)?"zenarioAT":!1)}else p._a(a,b)};a.getKey=function(b){return{id:h.cType+"_"+h.cID,cID:h.cID,cType:h.cType,cVersion:h.cVersion}};a.getKeyId=function(b){return h.cType+"_"+h.cID};a.getLastKeyId=function(b){return a._gKI(b)};
a.applyMergeFields=function(b,c,d,g){return b};a.applyMergeFieldsToLabel=function(b,c,d,g){return b};a.pickItems=function(b,c,d){b={};for(var g in c)q(c,g)&&("id"==g?b[g]=c[g]:"parent__"!=g.substr(0,8)&&(b["child__"+g]=c[g]));if(a.postPickItemsObject)p._a(a,a.postPickItemsObject,!0,l,l,b);else if(a.actionTarget){for(var e in b)q(b,e)&&(a.actionRequests[e]=b[e]);a._a2()}a.postPickItemsObject=!1};a.goNum=0;a.action2=function(){if(a.actionTarget){var b=++a.goNum;k._nDS("saving");h._a(a.actionTarget,
a.actionRequests,!1,!1,!0).after(function(c){b==a.goNum&&(k._nDS(!1),c?k._sM(c):h._gTU(h._lTI(h.cID,h.cType,k.importantGetRequests)))})}a.actionTarget=!1;delete a.actionRequests};a.uploadComplete=function(){};a.slotDisabled=function(b){b=$("#plgslt_"+b+"-wrap");return"layout"==k.toolbar?b.hasClass("zenario_hideSlotInLayoutMode")||b.hasClass("zenario_level1"):b.hasClass("zenario_hideSlotInItemMode")||b.hasClass("zenario_level2")};a.draw=function(){var b={tabs:[],sections:{}},c=-1,d=a.tuix,g,e=(k.toolbar&&
d.toolbars[k.toolbar]||{}).toolbar_tab_grouping||"edit";for(n in a.sortedToolbars)if(q(a.sortedToolbars,n)){var m=a.sortedToolbars[n],f=d.toolbars[m];p._h(l,a,l,m,l,l,l,l,f)||(b.tabs[++c]={id:m,parent:f.parent,css_class:f.css_class,label:f.label,warning_icon:f.warning_icon,tooltip:f.tooltip,toolbar_microtemplate:f.toolbar_microtemplate,selected:m==k.toolbar,groupingActive:(f.toolbar_tab_grouping||"edit")==e},m==k.toolbar&&(b.toolbar_microtemplate=f.toolbar_microtemplate))}p._sK(b.tabs,"zenario_at_tab_with_children");
for(g in d.sections)if(q(d.sections,g)&&(c=d.sections[g])){e=-1;var n=[];var r,w;if(a.sortedButtons[g]&&!p._h(l,a,l,g,l,l,l,c)){for(r in a.sortedButtons[g])q(a.sortedButtons[g],r)&&(m=a.sortedButtons[g][r],f=c.buttons[m],p._h(l,a,l,m,f,l,l,c)||f.appears_in_toolbars&&!t(f.appears_in_toolbars[k.toolbar])||(n[++e]={id:m,css_class:f.css_class||"label_without_icon",label:f.label||f.name,parent:f.parent,tuix:f},(w=n[e].disabled=f.disabled||A(f.disabled_if)&&p._e(f.disabled_if,a,l,l,m,f,l,l,c))||(f.navigation_path?
n[e].href=h._aBP(y.zenarioATLinks.organizer+"#"+f.navigation_path):f.frontend_link&&(n[e].href=h._aBP(f.frontend_link)),f.onclick?n[e].onclick=f.onclick:n[e].href||(n[e].onclick="zenarioAT._cB('"+v(g)+"', '"+v(m)+"'); return false;")),f.onmouseover&&(n[e].onmouseover=f.onmouseover),n[e].tooltip=w&&f.disabled_tooltip||f.tooltip));p._sK(n,"zenario_at_button_with_children")}b.sections[g]=n}B("zenario_at_wrap").innerHTML=p._mT("zenario_toolbar",b);k._to("#zenario_at_wrap a[title]");k._to("#zenario_at_wrap div[title]");
k._to("#zenario_at_wrap ul ul a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}});k._sTITL("#zenario_at_lower_section .zenario_at_infobar",l,k.tooltipLengthThresholds.adminToolbarTitle)};a.sort=function(){a.sortedToolbars=[];if(a.tuix.toolbars)for(var b in a.tuix.toolbars)if(q(a.tuix.toolbars,b)){var c=a.tuix.toolbars[b];c&&a.sortedToolbars.push([b,c.ord])}a.sortedToolbars.sort(p.sortArray);for(b in a.sortedToolbars)q(a.sortedToolbars,b)&&(a.sortedToolbars[b]=a.sortedToolbars[b][0]);
a.sortedButtons={};for(var d in a.tuix.sections)q(a.tuix.sections,d)&&a.tuix.sections[d]&&a._sB(d)};a.sortButtons=function(b){a.sortedButtons[b]=[];if(a.tuix.sections[b].buttons)for(var c in a.tuix.sections[b].buttons)if(q(a.tuix.sections[b].buttons,c)){var d=a.tuix.sections[b].buttons[c];d&&a.sortedButtons[b].push([c,d.ord])}a.sortedButtons[b].sort(p.sortArray);for(c in a.sortedButtons[b])q(a.sortedButtons[b],c)&&(a.sortedButtons[b][c]=a.sortedButtons[b][c][0])};a.customiseOrganizerLink=function(b,
c){if(b)if("#"!=b.substr(0,1)&&(b="#"+b),c){if(b=="#zenario__content/panels/content/refiners/content_type//"+h.cType+"//")return"#zenario__content/panels/content/refiners/content_type//"+h.cType+"//"+h.cType+"_"+h.cID}else{if("#zenario__content/panels/content/refiners/content_type//html//"==b)return"#zenario__content/panels/content/refiners/content_type//"+h.cType+"//"+h.cType+"_"+h.cID;if(b=="#zenario__menu/panels/by_language/item//"+k.siteSettings.default_language+"//item//1//"&&a.tuix.meta_info.menu_organizer_path)return"#"+
a.tuix.meta_info.menu_organizer_path}return b};h._sN(a)});

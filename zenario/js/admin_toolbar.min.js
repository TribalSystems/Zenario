(function(s,v,n,e,d,w,a,u,p,x,q,t,y,r){d.toolbar="preview";a.runOnInit=[];a.init=function(b){if(!b||!a.loadedBefore){a.loadedBefore=!0;a.loaded=!1;var c=s+"zenario/admin/ajax.php?_at=1&_json=1";a.url=c+e.urlRequest(a.getKey());(a.focus=e.checkSessionStorage(c,a.getKey(),!0))?a.init2():d.keepTrying(function(b){$.get(a.url,function(f){d.stopTrying(b)&&(a.focus=d.readData(f,c,a.getKey()))&&a.init2()},"text")})}};a.init2=function(){a.sort();a.draw();a.loaded=!0;for(var b in a.runOnInit)if(e.has(a.runOnInit,
b))a.runOnInit[b]();a.runOnInit=[]};$(n).ready(function(){a.init(!0)});a.clickTab=function(b){if(d.checkForEdits()&&a.focus&&a.focus.toolbars&&a.focus.toolbars[b]){d.closeSlotControls();d.cancelMovePlugin();a.action(a.focus.toolbars[b]);var c=q(a.focus.toolbars[d.toolbar]?a.focus.toolbars[d.toolbar].page_mode:!1,d.toolbar),g=q(a.focus.toolbars[b].page_mode,b),f=b.substr(0,4);$("body").removeClass("zenario_pageMode_"+c).addClass("zenario_pageMode_"+g);"menu"==f&&d.menuWandOn?$("body").addClass("zenario_menuWand_on").removeClass("zenario_menuWand_off"):
$("body").addClass("zenario_menuWand_off").removeClass("zenario_menuWand_on");"edit"!=f&&"temp"!=f||!d.slotWandOn?$("body").addClass("zenario_slotWand_off").removeClass("zenario_slotWand_on"):$("body").addClass("zenario_slotWand_on").removeClass("zenario_slotWand_off");"edit"!=f&&"temp"!=f||!d.showGridOn?a.showGridOnOff(!1):a.showGridOnOff(!0);d.toolbar=b;d.pageMode=g;d.savePageMode(!0);a.draw()}};a.gridOverlayDiv=null;a.showGridOnOff=function(b){if(b){if(!a.gridOverlayDiv){var c=!1;$(".container").each(function(a,
b){c=b});if(c){b=c.className;for(var d=b.match(/container_(\d+)/),d=d?d[1]:0,f=n.getElementById("zenario_citem"),e=f.firstElementChild,k=(e=e?e.firstElementChild:!1)&&"row"==e.className?!0:!1,e=k?'<div class="row">':"",m=1;m<=d;++m)e+='<div class="span span1 span1_'+d,1==m?e+=" alpha":m==d&&(e+=" omega"),e+=' slot"></div>';e+=k?"</div>":"";d=n.createElement("div");d.innerHTML=e;d.style.position="relative";d.className="zenario_grid_overlay_view "+b;d.style.top="-"+f.offsetHeight+"px";d.style.height=
f.offsetHeight+"px";f.style.position="relative";f.appendChild(d);f.offsetHeight=d.offsetHeight+"px";a.gridOverlayDiv=d}}}else a.gridOverlayDiv&&(a.gridOverlayDiv.remove(),delete a.gridOverlayDiv)};a.clickButton=function(b,c){d.checkForEdits()&&a.action(a.focus.sections[b].buttons[c])};a.action=function(b){d.closeSlotControls();d.cancelMovePlugin();if(!d.checkActionUnique(b))return!1;if(b.organizer_quick){var c="",g={},f=!1;b.organizer_quick.reload_slot&&e.slots[b.organizer_quick.reload_slot]&&e.slots[b.organizer_quick.reload_slot].instanceId&&
(f=b.organizer_quick.reload_slot,c+=e.slots[b.organizer_quick.reload_slot].instanceId,g[e.slots[b.organizer_quick.reload_slot].instanceId]=!0);p(b.organizer_quick.reload_menu_slots)&&$(".zenario_slotShownInMenuMode .zenario_slot").each(function(a,b){if(b.id&&"plgslt_"==b.id.substr(0,7)){var d=b.id.substr(7);e.slots[d]&&e.slots[d].instanceId&&!g[e.slots[d].instanceId]&&(f?c+=",":f=d,c+=e.slots[d].instanceId,g[e.slots[d].instanceId]=!0)}});d.SKQ(b.organizer_quick.path,b.organizer_quick.target_path,
b.organizer_quick.min_path,b.organizer_quick.max_path,p(b.organizer_quick.disallow_refiners_looping_on_min_path),f,c,p(b.organizer_quick.reload_admin_toolbar)?"zenarioAT":!1)}else d.action(a,b)};a.getKey=function(a){return{id:e.cType+"_"+e.cID,cID:e.cID,cType:e.cType,cVersion:e.cVersion}};a.getKeyId=function(a){return e.cType+"_"+e.cID};a.getLastKeyId=function(b){return a.getKeyId(b)};a.applyMergeFields=function(a,c,d,e){return a};a.pickItems=function(b,c,g){b={};for(var f in c)e.has(c,f)&&("id"==
f?b[f]=c[f]:"parent__"!=f.substr(0,8)&&(b["child__"+f]=c[f]));if(a.postPickItemsObject)d.action(a,a.postPickItemsObject,!0,r,r,b);else if(a.actionTarget){for(var h in b)e.has(b,h)&&(a.actionRequests[h]=b[h]);a.action2()}a.postPickItemsObject=!1};a.goNum=0;a.action2=function(){if(a.actionTarget){var b=++a.goNum;d.nowDoingSomething("saving");$.post(s+a.actionTarget,a.actionRequests,function(c){b==a.goNum&&(d.nowDoingSomething(!1),c?d.showMessage(c):e.goToURL(e.linkToItem(e.cID,e.cType)))},"text")}a.actionTarget=
!1;delete a.actionRequests};a.uploadComplete=function(){};a.draw=function(){var b={tabs:[],sections:{}},c=-1,g;for(g in a.sortedToolbars)if(e.has(a.sortedToolbars,g)){var f=a.sortedToolbars[g],h=a.focus.toolbars[f];d.hidden(h,!0)||(b.tabs[++c]={id:f,css_class:h.css_class,label:h.label,tooltip:h.tooltip,toolbar_microtemplate:h.toolbar_microtemplate,selected:f==d.toolbar},f==d.toolbar&&(b.toolbar_microtemplate=h.toolbar_microtemplate))}for(var k in a.focus.sections)if(e.has(a.focus.sections,k)&&!a.isInfoTag(k)&&
a.focus.sections[k]){var c=-1,f=[],h={},m;if(!d.hidden(a.focus.sections[k])&&a.sortedButtons[k]){for(var n in a.sortedButtons[k])if(e.has(a.sortedButtons[k],n)){g=a.sortedButtons[k][n];var l=a.focus.sections[k].buttons[g];d.hidden(l,!0)||l.appears_in_toolbars&&!p(l.appears_in_toolbars[d.toolbar])||(f[++c]={id:g,css_class:q(l.css_class,"label_without_icon"),label:q(l.label,l.name),parent:l.parent},h[g]=c,f[c].tooltip=l.tooltip,!l.navigation_path&&l.frontend_link&&(f[c].href=e.addBasePath(l.frontend_link)),
f[c].href&&l.navigation_path||(f[c].onclick="zenarioAT.clickButton('"+t(k)+"', '"+t(g)+"'); return false;"))}for(g in h)e.has(h,g)&&(m=a.focus.sections[k].buttons[g].parent)&&(c=h[m])!==r&&(f[c].children||(f[c].children=[],f[c].css_class+=" zenario_at_button_with_children"),f[c].children[f[c].children.length]=f[h[g]]);for(c=f.length-1;0<=c;--c)l=a.focus.sections[k].buttons[f[c].id],(l.parent||p(l.hide_when_children_are_not_visible)&&!f[c].children)&&f.splice(c,1)}b.sections[k]=f}u("zenario_at").innerHTML=
d.microTemplate("zenario_toolbar",b);d.tooltips("#zenario_at a[title]");d.tooltips("#zenario_at div[title]");d.tooltips("#zenario_at ul ul a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}});d.setTooltipIfTooLarge("#zenario_at_lower_section .zenario_at_infobar",r,d.tooltipLengthThresholds.adminToolbarTitle)};a.isInfoTag=function(a){return"class_name"==a||"ord"==a};a.sort=function(){a.sortedToolbars=[];if(a.focus.toolbars)for(var b in a.focus.toolbars)e.has(a.focus.toolbars,
b)&&!a.isInfoTag(b)&&a.focus.toolbars[b]&&a.sortedToolbars.push([b,a.focus.toolbars[b].ord]);a.sortedToolbars.sort(d.sortArray);for(b in a.sortedToolbars)e.has(a.sortedToolbars,b)&&(a.sortedToolbars[b]=a.sortedToolbars[b][0]);a.sortedButtons={};for(var c in a.focus.sections)e.has(a.focus.sections,c)&&!a.isInfoTag(c)&&a.focus.sections[c]&&a.sortButtons(c)};a.sortButtons=function(b){a.sortedButtons[b]=[];if(a.focus.sections[b].buttons)for(var c in a.focus.sections[b].buttons)e.has(a.focus.sections[b].buttons,
c)&&!a.isInfoTag(c)&&a.focus.sections[b].buttons[c]&&a.sortedButtons[b].push([c,a.focus.sections[b].buttons[c].ord]);a.sortedButtons[b].sort(d.sortArray);for(c in a.sortedButtons[b])e.has(a.sortedButtons[b],c)&&(a.sortedButtons[b][c]=a.sortedButtons[b][c][0])}})(URLBasePath,window,document,zenario,zenarioA,zenarioTab,zenarioAT,zenario.get,zenario.engToBoolean,zenario.htmlspecialchars,zenario.ifNull,zenario.jsEscape,zenarioA.phrase);

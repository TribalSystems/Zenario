'use strict';zenario.lib(function(l,x,v,y,C,D,g,h,p,E,a,F,z,A,r,B,G,w,H,I,J,q){h.toolbar=h.toolbarTabGrouping="preview";a.setURL=function(){return a.url=x+"zenario/admin/admin_toolbar.ajax.php?get="+z(JSON.stringify(h.importantGetRequests))+g._uR(a._gK())};a.runOnInit=[];a.init=function(b){b&&a.loadedBefore||(a.loaded=!1,a.loadedBefore=!0,g._a(a._sU(),!1,!0,!0,!0,!0,l,7500).after(a.init2))};a.init2=function(b){$(v).ready(function(){a._sU();a.tuix=b;a._s();a._d();a.loaded=!0;a.loadedBefore=!0;for(var c in a.runOnInit)if(q(a.runOnInit,
c))a.runOnInit[c]();a.runOnInit=[];b.lock_warning&&h._lT(b.lock_warning,"zenario_lock_warning")})};a.clickTab=function(b){if(h._cFE()){var c;if(c=a.tuix&&a.tuix.toolbars&&a.tuix.toolbars[b]){h._cSC();h._cMP();a._a(c);var e=c.page_mode||b;c=c.toolbar_tab_grouping||"edit";b.substr(0,4);var f=zenarioL.set,d,k={preview:0,edit_disabled:0,edit:0,rollback:0,item:0,menu:0,layout:0};for(d in k)f(e==d,"zenario_pageMode_"+d,"zenario_pageModeIsnt_"+d);f("item"==e||"layout"==e,"zenario_slotWand_on","zenario_slotWand_off");
f("layout"==e,"zenario_pageMode_template","zenario_pageModeIsnt_template");"item"==e||"layout"==e?$("body").addClass("zenario_slotWand_on").removeClass("zenario_slotWand_off"):$("body").addClass("zenario_slotWand_off").removeClass("zenario_slotWand_on");"item"!=e&&"layout"!=e||!h.showGridOn?a._sGOO(!1):a._sGOO(!0);h.toolbar=b;h.pageMode=e;h.toolbarTabGrouping=c;h._sPM(!0);a._d()}}};a.gridOverlayDiv=null;a.showGridOnOff=function(b){if(b){if(!a.gridOverlayDiv){var c=!1;$(".container").each(function(t,
u){c=u});if(c){b=c.className;var e=b.m(/container_(\d+)/);e=e?e[1]:0;var f=v.getElementById("zenario_citem"),d=f.firstElementChild,k=(d=d?d.firstElementChild:!1)&&"row"==d.className?!0:!1;d=k?'<div class="row">':"";for(var n=1;n<=e;++n)d+='<div class="span span1 span1_'+e,1==n?d+=" alpha":n==e&&(d+=" omega"),d+=' slot"></div>';d+=k?"</div>":"";e=v.createElement("div");e.innerHTML=d;e.style.position="relative";e.className="zenario_grid_overlay_view "+b;e.style.top="-"+f.offsetHeight+"px";e.style.height=
f.offsetHeight+"px";f.style.position="relative";f.appendChild(e);a.gridOverlayDiv=e}}}else a.gridOverlayDiv&&(a.gridOverlayDiv.remove(),delete a.gridOverlayDiv)};a.clickButton=function(b,c){h._cFE()&&a._a(a.tuix.sections[b].buttons[c])};a.organizerQuick=function(b,c,e,f,d,k,n){k&&!h._dr(n.id,!0)||a._a({organizer_quick:{path:b,target_path:c,min_path:c,max_path:e?c:!1,disallow_refiners_looping_on_min_path:!0,reload_slot:f,reload_menu_slots:d,reload_admin_toolbar:!0}});return!1};a.action=function(b){h._cSC();
h._cMP();if(!p._cAU(b))return!1;if(b.organizer_quick){var c="",e={},f=!1;b.organizer_quick.reload_slot&&g.slots[b.organizer_quick.reload_slot]&&g.slots[b.organizer_quick.reload_slot].instanceId&&(f=b.organizer_quick.reload_slot,c+=g.slots[b.organizer_quick.reload_slot].instanceId,e[g.slots[b.organizer_quick.reload_slot].instanceId]=!0);r(b.organizer_quick.reload_menu_slots)&&$(".zenario_showSlotInMenuMode .zenario_slot").each(function(d,k){k.id&&"plgslt_"==k.id.substr(0,7)&&(d=k.id.substr(7),g.slots[d]&&
g.slots[d].instanceId&&!e[g.slots[d].instanceId]&&(f?c+=",":f=d,c+=g.slots[d].instanceId,e[g.slots[d].instanceId]=!0))});h._oQ(b.organizer_quick.path,b.organizer_quick.target_path,b.organizer_quick.min_path,b.organizer_quick.max_path,r(b.organizer_quick.disallow_refiners_looping_on_min_path),f,c,r(b.organizer_quick.reload_admin_toolbar)?"zenarioAT":!1)}else p._a(a,b)};a.getKey=function(b){return{id:g.cType+"_"+g.cID,cID:g.cID,cType:g.cType,cVersion:g.cVersion}};a.getKeyId=function(b){return g.cType+
"_"+g.cID};a.getLastKeyId=function(b){return a._gKI(b)};a.applyMergeFields=function(b,c,e,f){return b};a.applyMergeFieldsToLabel=function(b,c,e,f){return b};a.pickItems=function(b,c,e){b={};for(var f in c)q(c,f)&&("id"==f?b[f]=c[f]:"parent__"!=f.substr(0,8)&&(b["child__"+f]=c[f]));if(a.postPickItemsObject)p._a(a,a.postPickItemsObject,!0,l,l,b);else if(a.actionTarget){for(var d in b)q(b,d)&&(a.actionRequests[d]=b[d]);a._a2()}a.postPickItemsObject=!1};a.goNum=0;a.action2=function(){if(a.actionTarget){var b=
++a.goNum;h._nDS("saving");g._a(a.actionTarget,a.actionRequests,!1,!1,!0).after(function(c){b==a.goNum&&(h._nDS(!1),c?h._sM(c):g._gTU(g._lTI(g.cID,g.cType,h.importantGetRequests)))})}a.actionTarget=!1;delete a.actionRequests};a.uploadComplete=function(){};a.slotDisabled=function(b){b=$("#plgslt_"+b+"-wrap");return"layout"==h.toolbar?b.hasClass("zenario_hideSlotInLayoutMode")||b.hasClass("zenario_level1"):b.hasClass("zenario_hideSlotInItemMode")||b.hasClass("zenario_level2")};a.draw=function(){var b=
{tabs:[],sections:{}},c=-1,e=a.tuix,f;for(n in a.sortedToolbars)if(q(a.sortedToolbars,n)){var d=a.sortedToolbars[n],k=e.toolbars[d];p._h(l,a,l,d,l,l,l,l,k)||(b.tabs[++c]={id:d,parent:k.parent,css_class:k.css_class,label:k.label,warning_icon:k.warning_icon,tooltip:k.tooltip,toolbar_microtemplate:k.toolbar_microtemplate,selected:d==h.toolbar,groupingActive:(k.toolbar_tab_grouping||"edit")==h.toolbarTabGrouping},d==h.toolbar&&(b.toolbar_microtemplate=k.toolbar_microtemplate))}p._sK(b.tabs,"zenario_at_tab_with_children");
for(f in e.sections)if(q(e.sections,f)&&(c=e.sections[f])){var n=-1;d=[];var t,u;if(a.sortedButtons[f]&&!p._h(l,a,l,f,l,l,l,c)){for(t in a.sortedButtons[f])if(q(a.sortedButtons[f],t)){k=a.sortedButtons[f][t];var m=c.buttons[k];p._h(l,a,l,k,m,l,l,c)||m.appears_in_toolbars&&!r(m.appears_in_toolbars[h.toolbar])||(d[++n]={id:k,css_class:m.css_class||"label_without_icon",label:m.label||m.name,parent:m.parent,tuix:m},(u=d[n].disabled=m.disabled||A(m.disabled_if)&&p._e(m.disabled_if,a,l,l,k,m,l,l,c))||(m.navigation_path?
d[n].href=g._aBP(y.zenarioATLinks.organizer+"#"+m.navigation_path):m.frontend_link&&(d[n].href=g._aBP(m.frontend_link)),m.onclick?d[n].onclick=m.onclick:d[n].href||(d[n].onclick="zenarioAT._cB('"+w(f)+"', '"+w(k)+"'); return false;")),m.onmouseover&&(d[n].onmouseover=m.onmouseover),d[n].tooltip=u&&m.disabled_tooltip||m.tooltip)}p._sK(d,"zenario_at_button_with_children")}b.sections[f]=d}B("zenario_at_wrap").innerHTML=p._mT("zenario_toolbar",b);h._to("#zenario_at_wrap a[title]");h._to("#zenario_at_wrap div[title]");
h._to("#zenario_at_wrap ul ul a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}});h._sTITL("#zenario_at_lower_section .zenario_at_infobar",l,h.tooltipLengthThresholds.adminToolbarTitle)};a.sort=function(){a.sortedToolbars=[];if(a.tuix.toolbars)for(var b in a.tuix.toolbars)if(q(a.tuix.toolbars,b)){var c=a.tuix.toolbars[b];c&&a.sortedToolbars.push([b,c.ord])}a.sortedToolbars.sort(p.sortArray);for(b in a.sortedToolbars)q(a.sortedToolbars,b)&&(a.sortedToolbars[b]=a.sortedToolbars[b][0]);
a.sortedButtons={};for(var e in a.tuix.sections)q(a.tuix.sections,e)&&a.tuix.sections[e]&&a._sB(e)};a.sortButtons=function(b){a.sortedButtons[b]=[];if(a.tuix.sections[b].buttons)for(var c in a.tuix.sections[b].buttons)if(q(a.tuix.sections[b].buttons,c)){var e=a.tuix.sections[b].buttons[c];e&&a.sortedButtons[b].push([c,e.ord])}a.sortedButtons[b].sort(p.sortArray);for(c in a.sortedButtons[b])q(a.sortedButtons[b],c)&&(a.sortedButtons[b][c]=a.sortedButtons[b][c][0])};a.customiseOrganizerLink=function(b,
c){if(b)if("#"!=b.substr(0,1)&&(b="#"+b),c){if(b=="#zenario__content/panels/content/refiners/content_type//"+g.cType+"//")return"#zenario__content/panels/content/refiners/content_type//"+g.cType+"//"+g.cType+"_"+g.cID}else{if("#zenario__content/panels/content/refiners/content_type//html//"==b)return"#zenario__content/panels/content/refiners/content_type//"+g.cType+"//"+g.cType+"_"+g.cID;if(b=="#zenario__menu/panels/by_language/item//"+h.siteSettings.default_language+"//item//1//"&&a.tuix.meta_info.menu_organizer_path)return"#"+
a.tuix.meta_info.menu_organizer_path}return b};g._sN(a)});

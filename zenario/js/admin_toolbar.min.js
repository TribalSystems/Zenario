zenario.lib(function(l,x,u,y,C,D,h,k,p,E,a,F,z,A,t,B,G,v,H,I,J,q){k.toolbar="preview";a.setURL=function(){return a.url=x+"zenario/admin/admin_toolbar.ajax.php?get="+z(JSON.stringify(k.importantGetRequests))+h._uR(a._gK())};a.runOnInit=[];a.init=function(b){b&&a.loadedBefore||(a.loaded=!1,a.loadedBefore=!0,h._a(a._sU(),!1,!0,!0,!0,!0,l,7500).after(a.init2))};a.init2=function(b){$(u).ready(function(){a._sU();a.tuix=b;a._s();a._d();a.loaded=!0;a.loadedBefore=!0;for(var c in a.runOnInit)if(q(a.runOnInit,
c))a.runOnInit[c]();a.runOnInit=[];b.lock_warning&&k._lT(b.lock_warning,"zenario_lock_warning")})};a.clickTab=function(b){if(k._cFE()){var c;if(c=a.tuix&&a.tuix.toolbars&&a.tuix.toolbars[b]){k._cSC();k._cMP();a._a(c);c=c.page_mode||b;b.substr(0,4);var e=zenarioL.set,g,f={preview:0,edit_disabled:0,edit:0,rollback:0,menu:0,layout:0};for(g in f)e(c==g,"zenario_pageMode_"+g,"zenario_pageModeIsnt_"+g);e("edit"==c||"layout"==c,"zenario_slotWand_on","zenario_slotWand_off");e("layout"==c,"zenario_pageMode_template",
"zenario_pageModeIsnt_template");"edit"==c||"layout"==c?$("body").addClass("zenario_slotWand_on").removeClass("zenario_slotWand_off"):$("body").addClass("zenario_slotWand_off").removeClass("zenario_slotWand_on");"edit"!=c&&"layout"!=c||!k.showGridOn?a._sGOO(!1):a._sGOO(!0);k.toolbar=b;k.pageMode=c;k._sPM(!0);a._d()}}};a.gridOverlayDiv=null;a.showGridOnOff=function(b){if(b){if(!a.gridOverlayDiv){var c=!1;$(".container").each(function(n,r){c=r});if(c){b=c.className;var e=b.m(/container_(\d+)/);e=e?
e[1]:0;var g=u.getElementById("zenario_citem"),f=g.firstElementChild,m=(f=f?f.firstElementChild:!1)&&"row"==f.className?!0:!1;f=m?'<div class="row">':"";for(var d=1;d<=e;++d)f+='<div class="span span1 span1_'+e,1==d?f+=" alpha":d==e&&(f+=" omega"),f+=' slot"></div>';f+=m?"</div>":"";e=u.createElement("div");e.innerHTML=f;e.style.position="relative";e.className="zenario_grid_overlay_view "+b;e.style.top="-"+g.offsetHeight+"px";e.style.height=g.offsetHeight+"px";g.style.position="relative";g.appendChild(e);
a.gridOverlayDiv=e}}}else a.gridOverlayDiv&&(a.gridOverlayDiv.remove(),delete a.gridOverlayDiv)};a.clickButton=function(b,c){k._cFE()&&a._a(a.tuix.sections[b].buttons[c])};a.organizerQuick=function(b,c,e,g,f,m,d){if(!m||k._dr(d.id,!0))a._a({organizer_quick:{path:b,target_path:c,min_path:c,max_path:e?c:!1,disallow_refiners_looping_on_min_path:!0,reload_slot:g,reload_menu_slots:f,reload_admin_toolbar:!0}}),k._sSWC();return!1};a.action=function(b){k._cSC();k._cMP();if(!p._cAU(b))return!1;if(b.organizer_quick){var c=
"",e={},g=!1;b.organizer_quick.reload_slot&&h.slots[b.organizer_quick.reload_slot]&&h.slots[b.organizer_quick.reload_slot].instanceId&&(g=b.organizer_quick.reload_slot,c+=h.slots[b.organizer_quick.reload_slot].instanceId,e[h.slots[b.organizer_quick.reload_slot].instanceId]=!0);t(b.organizer_quick.reload_menu_slots)&&$(".zenario_showSlotInMenuMode .zenario_slot").each(function(f,m){m.id&&"plgslt_"==m.id.substr(0,7)&&(f=m.id.substr(7),h.slots[f]&&h.slots[f].instanceId&&!e[h.slots[f].instanceId]&&(g?
c+=",":g=f,c+=h.slots[f].instanceId,e[h.slots[f].instanceId]=!0))});k._oQ(b.organizer_quick.path,b.organizer_quick.target_path,b.organizer_quick.min_path,b.organizer_quick.max_path,t(b.organizer_quick.disallow_refiners_looping_on_min_path),g,c,t(b.organizer_quick.reload_admin_toolbar)?"zenarioAT":!1)}else p._a(a,b)};a.getKey=function(b){return{id:h.cType+"_"+h.cID,cID:h.cID,cType:h.cType,cVersion:h.cVersion}};a.getKeyId=function(b){return h.cType+"_"+h.cID};a.getLastKeyId=function(b){return a._gKI(b)};
a.applyMergeFields=function(b,c,e,g){return b};a.applyMergeFieldsToLabel=function(b,c,e,g){return b};a.pickItems=function(b,c,e){b={};for(var g in c)q(c,g)&&("id"==g?b[g]=c[g]:"parent__"!=g.substr(0,8)&&(b["child__"+g]=c[g]));if(a.postPickItemsObject)p._a(a,a.postPickItemsObject,!0,l,l,b);else if(a.actionTarget){for(var f in b)q(b,f)&&(a.actionRequests[f]=b[f]);a._a2()}a.postPickItemsObject=!1};a.goNum=0;a.action2=function(){if(a.actionTarget){var b=++a.goNum;k._nDS("saving");h._a(a.actionTarget,
a.actionRequests,!1,!1,!0).after(function(c){b==a.goNum&&(k._nDS(!1),c?k._sM(c):h._gTU(h._lTI(h.cID,h.cType,k.importantGetRequests)))})}a.actionTarget=!1;delete a.actionRequests};a.uploadComplete=function(){};a.slotDisabled=function(b){b=$("#plgslt_"+b+"-wrap");return"layout"==k.toolbar?b.hasClass("zenario_hideSlotInLayoutMode")||b.hasClass("zenario_level1"):b.hasClass("zenario_hideSlotInItemMode")||b.hasClass("zenario_level2")};a.draw=function(){var b={tabs:[],sections:{}},c=-1,e=a.tuix,g,f=(k.toolbar&&
e.toolbars[k.toolbar]||{}).toolbar_tab_grouping||"edit";for(n in a.sortedToolbars)if(q(a.sortedToolbars,n)){var m=a.sortedToolbars[n],d=e.toolbars[m];p._h(l,a,l,m,l,l,l,l,d)||(b.tabs[++c]={id:m,parent:d.parent,css_class:d.css_class,label:d.label,warning_icon:d.warning_icon,tooltip:d.tooltip,toolbar_microtemplate:d.toolbar_microtemplate,selected:m==k.toolbar,groupingActive:(d.toolbar_tab_grouping||"edit")==f},m==k.toolbar&&(b.toolbar_microtemplate=d.toolbar_microtemplate))}p._sK(b.tabs,"zenario_at_tab_with_children");
for(g in e.sections)if(q(e.sections,g)&&(c=e.sections[g])){f=-1;var n=[];var r,w;if(a.sortedButtons[g]&&!p._h(l,a,l,g,l,l,l,c)){for(r in a.sortedButtons[g])q(a.sortedButtons[g],r)&&(m=a.sortedButtons[g][r],d=c.buttons[m],p._h(l,a,l,m,d,l,l,c)||d.appears_in_toolbars&&!t(d.appears_in_toolbars[k.toolbar])||(n[++f]={id:m,css_class:d.css_class||"label_without_icon",featured_image_container:d.featured_image_container,featured_image_src:d.featured_image_src,featured_image_alt:d.featured_image_alt,inline_images_count:d.inline_images_count,
label:d.label||d.name,parent:d.parent,tuix:d},(w=n[f].disabled=d.disabled||A(d.disabled_if)&&p._e(d.disabled_if,a,l,l,m,d,l,l,c))||(d.navigation_path?n[f].href=h._aBP(y.zenarioATLinks.organizer+"#"+d.navigation_path):d.frontend_link&&(n[f].href=h._aBP(d.frontend_link)),d.onclick?n[f].onclick=d.onclick:n[f].href||(n[f].onclick="zenarioAT._cB('"+v(g)+"', '"+v(m)+"'); return false;")),d.onmouseover&&(n[f].onmouseover=d.onmouseover),n[f].tooltip=w&&d.disabled_tooltip||d.tooltip));p._sK(n,"zenario_at_button_with_children")}b.sections[g]=
n}B("zenario_at_wrap").innerHTML=p._mT("zenario_toolbar",b);k._to("#zenario_at_wrap a[title]");k._to("#zenario_at_wrap div[title]");k._to("#zenario_at_wrap ul ul a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}});k._sTITL("#zenario_at_lower_section .zenario_at_infobar",l,k.tooltipLengthThresholds.adminToolbarTitle)};a.sort=function(){a.sortedToolbars=[];if(a.tuix.toolbars)for(var b in a.tuix.toolbars)if(q(a.tuix.toolbars,b)){var c=a.tuix.toolbars[b];c&&a.sortedToolbars.push([b,
c.ord])}a.sortedToolbars.sort(p.sortArray);for(b in a.sortedToolbars)q(a.sortedToolbars,b)&&(a.sortedToolbars[b]=a.sortedToolbars[b][0]);a.sortedButtons={};for(var e in a.tuix.sections)q(a.tuix.sections,e)&&a.tuix.sections[e]&&a._sB(e)};a.sortButtons=function(b){a.sortedButtons[b]=[];if(a.tuix.sections[b].buttons)for(var c in a.tuix.sections[b].buttons)if(q(a.tuix.sections[b].buttons,c)){var e=a.tuix.sections[b].buttons[c];e&&a.sortedButtons[b].push([c,e.ord])}a.sortedButtons[b].sort(p.sortArray);
for(c in a.sortedButtons[b])q(a.sortedButtons[b],c)&&(a.sortedButtons[b][c]=a.sortedButtons[b][c][0])};a.customiseOrganizerLink=function(b,c){if(b)if("#"!=b.substr(0,1)&&(b="#"+b),c){if(b=="#zenario__content/panels/content/refiners/content_type//"+h.cType+"//")return"#zenario__content/panels/content/refiners/content_type//"+h.cType+"//"+h.cType+"_"+h.cID}else{if("#zenario__content/panels/content/refiners/content_type//html//"==b)return"#zenario__content/panels/content/refiners/content_type//"+h.cType+
"//"+h.cType+"_"+h.cID;if(b=="#zenario__menu/panels/by_language/item//"+k.siteSettings.default_language+"//item//1//"&&a.tuix.meta_info.menu_organizer_path)return"#"+a.tuix.meta_info.menu_organizer_path}return b};h._sN(a)});

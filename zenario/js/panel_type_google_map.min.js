zenario.lib(function(c,l,s,m,u,v,w,n,x,y,d,z,A,B,C,D,p,t,h,e){c=h(e.google_map=t(e.base));c.init=function(){this.onIconURL=l+"zenario/admin/images/google_map/yellow-map-pin-with-tick.png";this.offIconURL=l+"zenario/admin/images/google_map/red-map-pin.png"};c.returnPageSize=function(){return!1};c.returnPanelTitle=function(){var a=this.tuix.title;!m.zenarioOSelectMode||d.path!=m.zenarioOTargetPath&&!1!==m.zenarioOTargetPath||(m.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:
this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));d.filteredView&&(a+=p.refined);return a+" (Map)"};c.showPanel=function(a,b,c){a.html(n.microTemplate("zenario_organizer_panel_header",{})).show();a=n.microTemplate("zenario_organizer_google_map",{});b.html(a).show();var k;b=new google.maps.LatLngBounds;var e,h=this.tuix.lat_column,l=this.tuix.lng_column,p=this.tuix.double_click_item_button,g=this.tuix.items,r=0,q=0;k=new google.maps.Map(s.getElementById("organizer_google_map"),{center:{lat:0,
lng:0},zoom:2});for(var f in g)g.hasOwnProperty(f)&&!d.isInfoTag(f)&&(r++,g[f][h]&&g[f][l]&&(q++,e=new google.maps.LatLng(g[f][h],g[f][l]),a=new google.maps.Marker({position:e,map:k,icon:this.offIconURL}),this.selectedItems[f]&&(a.icon=this.onIconURL),b.extend(e),google.maps.event.addListener(a,"click",this.makeSelectItemCallback(g[f],a)),google.maps.event.addListener(a,"dblclick",this.makeOpenAdminBoxCallback(g[f],a,p))));q&&k.fitBounds(b);google.maps.event.addDomListener(m,"resize",function(){var a=
k.getCenter();google.maps.event.trigger(k,"resize");k.setCenter(a)});a=n.microTemplate("zenario_organizer_google_map_footer",{items:q,total:r});c.html(a).show()};c.showButtons=function(a){var b;b={itemButtons:!1,collectionButtons:!1};0<d.itemsSelected?b.itemButtons=d.getItemButtons():b.collectionButtons=d.getCollectionButtons();b=n.microTemplate("zenario_organizer_panel_buttons",b);a.html(b).show()};c.makeOpenAdminBoxCallback=function(a,b,c){var e=this;return function(){e.itemClick(a.id,b,!0);d.itemButtonClick(c)}};
c.makeSelectItemCallback=function(a,b){var c=this;return function(){c.itemClick(a.id,b)}};c.itemClick=function(a,b,c){d.multipleSelectEnabled?!c&&this.selectedItems[a]?this.deselectItem(a,b):this.selectItem(a,b):d.multipleSelectEnabled||!this.selectedItems[a]||c?(d.deselectAllItems(),this.selectItem(a,b)):d.deselectAllItems();this.lastItemClicked=a;d.setHash();d.setButtons()};c.selectItem=function(a,b){b.setIcon(this.onIconURL);h(e.base).selectItem.call(this,a)};c.deselectItem=function(a,b){b.setIcon(this.offIconURL);
h(e.base).deselectItem.call(this,a)};c.updateItemCheckbox=function(a,b){}},zenarioO.panelTypes);

zenario.lib(function(d,f,r,k,v,w,l,x,y,z,c,A,B,C,D,E,s,t,g,u,e){d=g(e.google_map=t(e.base));d.init=function(){this.onIconURL=f+"zenario/admin/images/google_map/yellow-map-pin-with-tick.png";this.offIconURL=f+"zenario/admin/images/google_map/red-map-pin.png"};d.returnAJAXURL=function(){return f+"zenario/admin/organizer.ajax.php?path="+encodeURIComponent(this.path)+l.urlRequest(this.returnAJAXRequests())+l.urlRequest("panel_type=google_map")};d.returnPageSize=function(){return!1};d.returnPanelTitle=
function(){var a=this.tuix.title;!k.zenarioOSelectMode||c.path!=k.zenarioOTargetPath&&!1!==k.zenarioOTargetPath||(k.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));c.filteredView&&(a+=s.refined);return a+" (Map)"};d.showPanel=function(a,b,d){a.html(this.microTemplate("zenario_organizer_panel_header",{})).show();a=this.microTemplate("zenario_organizer_google_map",{});b.html(a).show();var c;
b=new google.maps.LatLngBounds;var e,f=this.tuix.lat_column,g=this.tuix.lng_column,l=this.tuix.double_click_item_button,m=this.tuix.items,q=0,n=0;c=new google.maps.Map(r.getElementById("organizer_google_map"),{center:{lat:0,lng:0},zoom:2});for(var p in m)if(u(m,p)){var h=m[p];q++;h[f]&&h[g]&&(n++,e=new google.maps.LatLng(h[f],h[g]),a=new google.maps.Marker({position:e,map:c,icon:this.offIconURL}),this.selectedItems[p]&&(a.icon=this.onIconURL),b.extend(e),google.maps.event.addListener(a,"click",this.makeSelectItemCallback(h,
a)),google.maps.event.addListener(a,"dblclick",this.makeOpenAdminBoxCallback(h,a,l)))}n&&c.fitBounds(b);google.maps.event.addDomListener(k,"resize",function(){var a=c.getCenter();google.maps.event.trigger(c,"resize");c.setCenter(a)});a=this.microTemplate("zenario_organizer_google_map_footer",{items:n,total:q});d.html(a).show()};d.showButtons=function(a){var b;b={itemButtons:!1,collectionButtons:!1};0<c.itemsSelected?b.itemButtons=c.getItemButtons():b.collectionButtons=c.getCollectionButtons();b=this.microTemplate("zenario_organizer_panel_buttons",
b);a.html(b).show()};d.makeOpenAdminBoxCallback=function(a,b,d){var e=this;return function(){e.itemClick(a.id,b,!0);c.itemButtonClick(d)}};d.makeSelectItemCallback=function(a,b){var c=this;return function(){c.itemClick(a.id,b)}};d.itemClick=function(a,b,d){c.multipleSelectEnabled?!d&&this.selectedItems[a]?this.deselectItem(a,b):this.selectItem(a,b):c.multipleSelectEnabled||!this.selectedItems[a]||d?(c.deselectAllItems(),this.selectItem(a,b)):c.deselectAllItems();this.lastItemClicked=a;c.setHash();
c.setButtons()};d.selectItem=function(a,b){b.setIcon(this.onIconURL);g(e.base).selectItem.call(this,a)};d.deselectItem=function(a,b){b.setIcon(this.offIconURL);g(e.base).deselectItem.call(this,a)};d.updateItemCheckbox=function(a,b){}},zenarioO.panelTypes);

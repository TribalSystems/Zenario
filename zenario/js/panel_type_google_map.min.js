zenario.lib(function(d,h,s,k,v,w,t,l,x,y,c,z,A,B,C,D,m,u,f,e){d=f(e.google_map=u(e.base));d.init=function(){this.onIconURL=h+"zenario/admin/images/google_map/yellow-map-pin-with-tick.png";this.offIconURL=h+"zenario/admin/images/google_map/red-map-pin.png"};d.returnPageSize=function(){return!1};d.returnPanelTitle=function(){var a=this.tuix.title;!k.zenarioOSelectMode||c.path!=k.zenarioOTargetPath&&!1!==k.zenarioOTargetPath||(k.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?a=this.tuix.multiple_select_mode_title:
this.tuix.select_mode_title&&(a=this.tuix.select_mode_title));c.filteredView&&(a+=m.refined);return a+" (Map)"};d.showPanel=function(a,b,d){a.html(l.microTemplate("zenario_organizer_panel_header",{})).show();a=l.microTemplate("zenario_organizer_google_map",{});b.html(a).show();var c;b=new google.maps.LatLngBounds;var e,f=this.tuix.lat_column,h=this.tuix.lng_column,m=this.tuix.double_click_item_button,n=this.tuix.items,r=0,p=0;c=new google.maps.Map(s.getElementById("organizer_google_map"),{center:{lat:0,
lng:0},zoom:2});for(var q in n)if(t.has(n,q)){var g=n[q];r++;g[f]&&g[h]&&(p++,e=new google.maps.LatLng(g[f],g[h]),a=new google.maps.Marker({position:e,map:c,icon:this.offIconURL}),this.selectedItems[q]&&(a.icon=this.onIconURL),b.extend(e),google.maps.event.addListener(a,"click",this.makeSelectItemCallback(g,a)),google.maps.event.addListener(a,"dblclick",this.makeOpenAdminBoxCallback(g,a,m)))}p&&c.fitBounds(b);google.maps.event.addDomListener(k,"resize",function(){var a=c.getCenter();google.maps.event.trigger(c,
"resize");c.setCenter(a)});a=l.microTemplate("zenario_organizer_google_map_footer",{items:p,total:r});d.html(a).show()};d.showButtons=function(a){var b;b={itemButtons:!1,collectionButtons:!1};0<c.itemsSelected?b.itemButtons=c.getItemButtons():b.collectionButtons=c.getCollectionButtons();b=l.microTemplate("zenario_organizer_panel_buttons",b);a.html(b).show()};d.makeOpenAdminBoxCallback=function(a,b,d){var e=this;return function(){e.itemClick(a.id,b,!0);c.itemButtonClick(d)}};d.makeSelectItemCallback=
function(a,b){var c=this;return function(){c.itemClick(a.id,b)}};d.itemClick=function(a,b,d){c.multipleSelectEnabled?!d&&this.selectedItems[a]?this.deselectItem(a,b):this.selectItem(a,b):c.multipleSelectEnabled||!this.selectedItems[a]||d?(c.deselectAllItems(),this.selectItem(a,b)):c.deselectAllItems();this.lastItemClicked=a;c.setHash();c.setButtons()};d.selectItem=function(a,b){b.setIcon(this.onIconURL);f(e.base).selectItem.call(this,a)};d.deselectItem=function(a,b){b.setIcon(this.offIconURL);f(e.base).deselectItem.call(this,
a)};d.updateItemCheckbox=function(a,b){}},zenarioO.panelTypes);

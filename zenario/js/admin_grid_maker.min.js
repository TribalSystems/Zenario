zenario.lib(function(U,O,P,G,X,r,v,I,J,Y,Z,aa,W,y,Q,A,w,ba,m,ca,da,s,a,h,l,z,H){a.editing=!1;a.data={};a.layoutName="";a.openedSkinId="";a.history=[];a.pos=0;a.savedAtPos=0;a.lastIframeHeight=360;a.bodyPadding=0;a.desktopSmallestSize=800;a.previewPaddingLeftRight=75;a.gridAreaSmallestHeight=150;a.tabletWidth=768;a.mobileWidth=320;a.lastToast=!1;a.init=function(c,b,d,g){a.data="object"==typeof c?c:JSON.parse(c);d&&(a.layoutName=d);b&&(a.layoutId=b);a.checkData(d,g);a.checkDataR(a.data.cells);a.rememberNames(a.data.cells);
a.data.cells.length||(a.editing=!0);H&&(r&&!r.zenarioG&&r.$&&r.$.colorbox?$("#"+H).click(function(){if(a.savedAtPos==a.pos||confirm(m.gridConfirmClose))a.stopPoking(),r.zenario&&r.zenario.cID?r.location.reload(!0):r.$.colorbox.close()}):A(H).style.display="none");a.startPoking()};a.checkDataNonZero=function(a,b,d,g,p){1*b[d]||(b[d]=g,a=!0);b[d]=Math.round(b[d]);b[d]<=p&&(b[d]=g,a=!0);return a};a.checkDataNumeric=function(a,b,d,g,p){p||(p=1);y(b[d])&&1*b[d]==b[d]||(b[d]=g,a=!0);0>p?(p*=-1,b[d]=Math.round(b[d]*
p)/p):b[d]=Math.round(b[d]/p)*p;0>b[d]&&(b[d]=g,a=!0);return a};a.checkDataNonZeroAndNumeric=function(c,b){var d=!1,g=!1;b=a.checkDataNonZero(b,c,"cols",10,0);d=a.checkDataNonZero(d,c,"colWidth",60,1);a.checkDataNonZero(g,c,"minWidth",600,100);b=a.checkDataNonZero(b,c,"maxWidth",960,100);a.checkDataNumeric(b,c,"bp1",0,1);a.checkDataNumeric(b,c,"bp2",0,1);d=a.checkDataNumeric(d,c,"gutter",40);d=a.checkDataNumeric(d,c,"gutterLeftEdge",0);d=a.checkDataNumeric(d,c,"gutterRightEdge",0);a.checkDataNumeric(b,
c,"gutterFlu",1,-10);a.checkDataNumeric(b,c,"gutterLeftEdgeFlu",0,-10);g=a.checkDataNumeric(b,c,"gutterRightEdgeFlu",0,-10);100<c.gutterFlu*(c.cols-1)+c.gutterLeftEdgeFlu+c.gutterRightEdgeFlu&&(c.gutterFlu=0,c.gutterLeftEdgeFlu=0,c.gutterRightEdgeFlu=0,g=!0);c.minWidth>c.maxWidth&&(c.minWidth=c.maxWidth,g=!0);return b||(c.fluid?g:d)};a.checkDataR=function(c){var b,d,g;for(b=0;b<c.length;++b)if(c[d=b].grid_break_group&&c[d].cells){for(g in c[d].cells)s(c[d].cells,g)&&c.splice(++b,0,c[d].cells[g]);
delete c[d].cells;c[b+1]&&(c[b+1].grid_break||c[b+1].grid_break_group)||(c.splice(++b,0,{grid_break:!0,grid_css_class:a.randomName(2,"Grid_"),html:c[d].after}),delete c[d].after);c[d].grid_break=!0;c[d].grid_css_class=c[d].name||a.randomName(2,"Grid_");delete c[d].name;delete c[d].grid_break_group}for(b=0;b<c.length;++b)!c[b].name||c[b].addCell||c[b].cells||c[b].grid_break||c[b].grid_break_group||c[b].space||(c[b].slot=!0);for(b=0;b<c.length;++b)d=[],c[b].responsive?c[b].small="hide":c[b].first&&
(c[b].small="first"),delete c[b].responsive,delete c[b].first,c[b].custom_class&&(d.push(c[b].custom_class),delete c[b].custom_class),c[b].name&&(c[b].space||c[b].cells)&&(d.push(c[b].name),delete c[b].name),d.length&&c[b].css_class&&d.push(c[b].css_class),d.length&&(c[b].css_class=d.join(" ")),c[b].cells?(delete c[b].html,delete c[b].after,delete c[b].before,a.checkDataR(c[b].cells)):c[b].name?(delete c[b].after,delete c[b].before):(d=[],c[b].after&&(d.push(c[b].after),delete c[b].after),c[b].before&&
(d.push(c[b].before),delete c[b].before),d.length&&(c[b].html=d.join(" ")))};a.rememberNames=function(c){for(var b=0;b<c.length;++b)c[b].cells?a.rememberNames(c[b].cells):c[b].name&&(c[b].oName=c[b].name)};a.checkData=function(c,b){var d;a.data?_._isAr(a.data)?(a.data={cells:a.data},b&&(d=1*b.r(/\D/g,""))&&(a.data.cols=d)):a.data.cells||(a.data.cells=[]):a.data={cells:[]};a.data.fluid&&!y(a.data.gutterFlu)&&y(a.data.gutter)?(a.checkDataNonZeroAndNumeric(a.data),d=a.data.gutterLeftEdge+a.data.cols*
a.data.colWidth+(a.data.cols-1)*a.data.gutter+a.data.gutterRightEdge,a.data.minWidth=960<d?960:760<d?760:d,a.data.maxWidth=d,a.data.gutterFlu=Math.round(1E3*(a.data.gutter/d))/10,a.data.gutterLeftEdgeFlu=Math.round(1E3*(a.data.gutterLeftEdge/d))/10,a.data.gutterRightEdgeFlu=Math.round(1E3*(a.data.gutterRightEdge/d))/10):a.data.fluid||y(a.data.gutter)||!y(a.data.gutterFlu)||(a.checkDataNonZeroAndNumeric(a.data),d=a.data.maxWidth,a.data.gutter=Math.round(a.data.gutterFlu*d/100),a.data.gutterLeftEdge=
Math.round(a.data.gutterLeftEdgeFlu*d/100),a.data.gutterRightEdge=Math.round(a.data.gutterRightEdgeFlu*d/100),a.data.colWidth=(d-(a.data.gutterLeftEdge+(a.data.cols-1)*a.data.gutter+a.data.gutterRightEdge))/a.data.cols,(d=a.recalcColumnAndGutterOptions(a.data,!0,d))?(a.data.colWidth=d.colWidth,a.data.gutter=d.gutter):(delete a.data.colWidth,delete a.data.gutter));a.checkDataNonZeroAndNumeric(a.data);a.data.fluid?(delete a.data.gutter,delete a.data.gutterLeftEdge,delete a.data.gutterRightEdge,delete a.data.colWidth):
(delete a.data.gutterFlu,delete a.data.gutterLeftEdgeFlu,delete a.data.gutterRightEdgeFlu);a.history.length||(a.pos=0,a.history=[a.ajaxData()])};a.draw=function(c){c||a.drawForm();a.editing?a.drawEditor():a.drawPreview()};a.drawForm=function(){var c=J._mT("zenario_grid_maker_top",{formId:h});$(".ui-tooltip").remove();A(h).innerHTML=c;I._to("#"+h);a.data.fluid||a.recalcColumnAndGutterOptions(a.data);$("#"+h+" input.zenario_grid_setting_break_1").change(a.update).spinner({stop:a.update,min:10,step:10}).after('<span class="zenario_grid_unit">px</span>');
$("#"+h+" input.zenario_grid_setting_break_2").change(a.update).spinner({stop:a.update,min:300,step:10}).after('<span class="zenario_grid_unit">px</span>');$("#"+h+" input.zenario_grid_setting_min_width").change(a.recalcOnChange).spinner({stop:a.recalcOnInc,min:100,step:10}).after('<span class="zenario_grid_unit">px</span>');$("#"+h+" input.zenario_grid_setting_max_width").change(a.recalcOnChange).spinner({stop:a.recalcOnInc,min:320,step:10}).after('<span class="zenario_grid_unit">px</span>');$("#"+
h+" input.zenario_grid_setting_gutter_flu").change(a.recalcOnChange).spinner({stop:a.recalcOnInc,min:0,step:0.1}).after('<span class="zenario_grid_unit">%</span>');$("#"+h+" input.zenario_grid_setting_gutter_left_flu").change(a.recalcOnChange).spinner({stop:a.recalcOnInc,min:0,step:0.1}).after('<span class="zenario_grid_unit">%</span>');$("#"+h+" input.zenario_grid_setting_gutter_right_flu").change(a.recalcOnChange).spinner({stop:a.recalcOnInc,min:0,step:0.1}).after('<span class="zenario_grid_unit">%</span>');
$("#"+h+" input.zenario_grid_setting_full_width").change(a.recalcOnChange).keyup(a.recalcOnKeyUp).spinner({stop:a.recalcOnInc,min:320,step:10}).after('<span class="zenario_grid_unit">px</span>');$("#"+h+" input.zenario_grid_setting_cols").change(a.recalcOnChange).keyup(a.recalcOnKeyUp).spinner({stop:a.recalcOnInc,min:1,step:1});$("#"+h+" input.zenario_grid_setting_gutter_left").change(a.recalcOnChange).keyup(a.recalcOnKeyUp).spinner({stop:a.recalcOnInc,min:0,step:1}).after('<span class="zenario_grid_unit">px</span>');
$("#"+h+" input.zenario_grid_setting_gutter_right").change(a.recalcOnChange).keyup(a.recalcOnKeyUp).spinner({stop:a.recalcOnInc,min:0,step:1}).after('<span class="zenario_grid_unit">px</span>');$("#"+h+" select.zenario_grid_setting_col_and_gutter").change(a.recalcOnChange);$("#"+h+" input.zenario_grid_setting_fixed").change(a.updateAndChange);$("#"+h+" input.zenario_grid_setting_flu").change(a.updateAndChange);$("#"+h+" input.zenario_grid_setting_responsive").change(a.updateAndChange);$("#"+h+" input.zenario_grid_setting_mirror").change(a.updateAndChange);
a.canUndo()&&$("#"+h+" .zenario_grid_setting_undo").click(a.undo);a.canRedo()&&$("#"+h+" .zenario_grid_setting_redo").click(a.redo);$("#"+h+" .zenario_grid_setting_preview_grid").click(function(){a.editing=!1;a.drawPreview()});$("#"+h+" .zenario_grid_setting_edit_slots").click(function(){a.editing=!0;a.drawEditor()})};a.recalcColumnAndGutterOptions=function(a,b,d){var g=!1,p=(d?d:1*$("#"+h+"--setting_full_width").val())-a.gutterLeftEdge-a.gutterRightEdge;d=Math.floor(p/a.cols);var k=0,l=!1,m=0;b||
(g=A(h+"--setting_col_width"));if(!a.cols)return!1;if(g)for(m=g.length-1;0<=m;--m)g.remove(m);if(1==a.cols)g&&g.add(new Option(d+" px / "+k+" px",d+"/"+k),++m),l={colWidth:d,gutter:k};else{k=a.cols-1;b=p/k;for(var p=a.cols/k,s,n=999999,m=-1;0<d;--d)k=b-p*d,k=Math.round(1E4*k)/1E4,k==Math.floor(k)&&(g&&g.add(new Option(d+" px / "+k+" px",d+"/"+k),++m),s=Math.abs(a.gutter/a.colWidth-k/d),n>s&&(g&&(g.selectedIndex=m),n=s,l={colWidth:d,gutter:k}))}return l};a.ajaxURL=function(){return O+"zenario/admin/grid_maker/ajax.php"};
a.ajaxData=function(){return JSON.stringify(a.data)};a.ajaxSrc=function(){var c=a.ajaxData(),b=a.ajaxURL()+"?data="+W(c);400<b.length&&(b=a.ajaxURL()+"?cdata="+v._nAA(a.ajaxURL(),{compress:1,data:c}));return b};a.drawPreview=function(){a.checkData();var c=Math.max(a.desktopSmallestSize,100*Math.round(($(G).width()-a.previewPaddingLeftRight)/100)),b=Math.min(c-20,a.data.maxWidth),d=J._mT("zenario_grid_maker_preview",{gridId:l,topHack:5,leftHack:10,min:100,max:c,startingValue:b});$("#"+l).css("margin",
"auto");$(".ui-tooltip").remove();A(l).innerHTML=d;I._to("#"+l);$('<form action="'+w(a.ajaxURL())+'" method="post" target="'+l+'-iframe"><input name="data" value="'+w(a.ajaxData())+'"/></form>').appendTo("body").hide().submit().remove();$("#"+l+"-slider").slider({min:100,max:c,step:10,animate:!0,value:b,start:function(a,b){$("#"+l+"-slider_overlay").css("display","block")},stop:function(a,b){$("#"+l+"-slider_overlay").css("display","none")},slide:function(b,c){$("#"+l+"-slider_val").val(c.value);
$("#"+l+"-iframe").clearQueue();$("#"+l+"-size").clearQueue();!b.originalEvent||"mousedown"!=b.originalEvent.type&&"touchstart"!=b.originalEvent.type?($("#"+l+"-iframe").width(c.value),$("#"+l+"-size").css("marginLeft",c.value+"px")):($("#"+l+"-iframe").animate({width:c.value}),$("#"+l+"-size").animate({marginLeft:c.value}));a.resizePreview()}});$("#"+l+"-slider_val").change(function(){var a=1*this.value;a&&100<=a&&a<=c&&($("#"+l+"-slider").slider("value",a),$("#"+l+"-iframe").clearQueue().animate({width:a}),
$("#"+l+"-size").clearQueue().animate({marginLeft:a}))});a.resizePreview();var g=function(b){$("#"+l+"-slider_val").val(b);$("#"+l+"-slider").slider("value",b);$("#"+l+"-size").clearQueue().animate({marginLeft:b});$("#"+l+"-iframe").clearQueue().animate({width:b},{complete:a.resizePreview});a.lastToast&&a.lastToast.remove();a.lastToast=toastr.info(m.gridDisplayingAt.r("[[pixels]]",b))};$("#"+l+"-slider_mobile").click(function(){g(a.mobileWidth)});$("#"+l+"-slider_tablet").click(function(){g(a.tabletWidth)});
$("#"+l+"-slider_desktop").click(function(){g(c)});$("#"+h+"--tabs").removeClass("zenario_grid_tabs_slots_selected").addClass("zenario_grid_tabs_grid_selected");a.drawLinks()};a.resizePreview=function(){var c,b=0;(c=A(l+"-iframe"))&&c.contentWindow&&c.contentWindow.document&&c.contentWindow.document.body&&(b=$(c.contentWindow.document.body).height()||360,360>b&&(b=360),$("#"+l+"-iframe").height(b),$("#"+l+"-slider_overlay").height(b),$("#"+l+"-slider a").css("position","absolute").css("z-index",20).css("top",
"-"+(b+5)+"px").height(b+5).html('<span style="margin-top: '+Math.ceil((b+5)/2)+'px;"></span>'));a.lastIframeHeight=b};a.drawEditor=function(c,b,d,g,p,k,B,C,r,n,u){var D=0,z=0;if(d&&y(d[0])){data=a.data;for(var x in d)s(d,x)&&(x*=1,D=x+1,data=data.cells[d[x]])}else z=$("#"+l).scrollTop(),a.checkData(),data=a.data,D=0,d=[],a.names={},a.randomNameCount=0;y(c)||(c=l);y(g)||(g=a.data.cols);y(p)||(a.data.fluid?(u=a.data.gutterFlu,n=(100-a.data.gutterLeftEdgeFlu-(a.data.cols-1)*a.data.gutterFlu-a.data.gutterRightEdgeFlu)/
a.data.cols,k=Math.round(a.data.gutterFlu*a.data.maxWidth/100),B=Math.round(a.data.gutterLeftEdgeFlu*a.data.maxWidth/100),C=Math.round(a.data.gutterRightEdgeFlu*a.data.maxWidth/100),r=k,p=Math.round(n*a.data.maxWidth/100)):(u=n=0,k=a.data.gutter,B=a.data.gutterLeftEdge,C=a.data.gutterRightEdge,r=k,p=a.data.colWidth));var E,f="";x={};var q,G=1,e=data.cells,t=l+"__cell"+d.join("-"),F=p+k,K=g*F,L=0,M=0,H=0,V=0,R=Math.ceil(k/2),S=Math.floor(k/2),O=Math.ceil(r/2),U=Math.floor(r/2);B>=R?L=B-R:K-=H=R-B;
C>=S?M=C-S:K-=V=S-C;f+='<ul id="'+t+'s" class="zenario_grids" style="width: '+K+"px;";L&&(f+="padding-left: "+L+"px;");M&&(f+="padding-right: "+M+"px;");0==D&&(f+="background: white top left repeat-y url(grid_bg.php?gColWidth="+p+"&gCols="+g+"&gGutter="+k+"&gGutterLeftEdge="+B+"&gGutterRightEdge="+C+");");f+='">';0<D&&(f+='<div class="zenario_grid_object_properties"><div><span data-type="grouping" data-for="'+b+'" data-small="'+w(data.small)+'" data-is_full="'+Q(data.isAlpha&&data.isOmega)+'" data-is_last="'+
Q(!data.isAlpha&&data.isOmega)+'" data-css_class="'+w(data.css_class)+'" title="'+m.gridEditProperties+'">'+(data.css_class?w(data.css_class):m.gridEditPlaceholder)+"</span></div></div><br/>");e||(e=[]);for(b=e.length-1;0<=b;--b)e[b].cells&&a.checkCellsEmpty(e[b])&&e.splice(b,1);q=g;var N=!1;for(b in e)s(e,b)&&(e[b].width=e[b].grid_break?g:Math.min(g,e[b].width||1),q+=e[b].width,q>g&&(q=e[b].width,!1!==N&&(e[N].isOmega=!0),e[b].isAlpha=!0),N=b);E=e.length;e[E]={addCell:!0};q==g?(!1!==N&&(e[N].isOmega=
!0),e[E].width=g,e[E].isAlpha=!0):e[E].width=g-q;e[E].isOmega=!0;0==D&&(q=Math.max(1,Math.round(g/5)),e[E].width>1.5*q&&(e[E].width=q));for(b in e)if(s(e,b)){a.data.responsive&&("first"!=e[b].small||!e[b].isAlpha&&e[b].isOmega||delete e[b].small,"only"!=e[b].small||e[b].isAlpha&&e[b].isOmega||delete e[b].small);e[b].widthPx=e[b].width*F-(e[b].isAlpha?H:0)-(e[b].isOmega?V:0);e[b].widthPercent=e[b].width*n+(e[b].width-1)*u;e[b].marginLeft=e[b].isAlpha&&H?B:R;e[b].marginRight=e[b].isOmega&&V?C:S;f+=
"<li";f+=' id="'+t+"-"+b+'"';f+=' data-i="'+b+'"';f+=' data-level="'+D+'"';f+=' data-levels="'+d.join("-")+'"';f+=' data-gutter="'+k+'"';f+=' data-minwidth="'+(1*F-k)+'"';f+=' data-maxwidth="'+(F*g-k)+'"';f+=' data-col_and_gutter_width="'+F+'"';f+=' data-displayed_width="'+(e[b].width*F-k)+'"';f+=' data-displayed_margin_left="'+e[b].marginLeft+'"';e[b].addCell?(f+=' class="zenario_grid_add"',f+=' data-new-width="'+e[b].width+'"'):(q="",e[b].grid_break||"only"==e[b].small||(q="zenario_grid_cell_resizable"),
f+=' class="zenario_grid_cell '+q+" zenario_grid_cell__"+t,e[b].flash&&!a.undoing&&(a.newlyAdded=t+"-"+b,delete e[b].flash,f+=" zenario_grid_newly_added"),f=e[b].cells?f+' zenario_grid_nest"':e[b].space?f+' zenario_grid_space_cell"':f+' zenario_grid_slot"');f+=' style="';f+="width: "+e[b].widthPx+"px;";f+='">';e[b].grid_break&&(f+='<div class="zenario_grid_break_outer_wrap">');q='style="margin-left: '+e[b].marginLeft+"px; margin-right: "+e[b].marginRight+'px;"';if(e[b].addCell)f+='<div class="zenario_add_cell zenario_grid_gutter" '+
q+' title="'+m.gridAdd+'">',f+="</div>";else if(e[b].cells)f+='<div id ="'+t+"-"+b+'-span"></div>';else{if(e[b].slot)e[b].name?a.checkIfNameUsed(e[b].name)||(a.registerNewName(e[b].name),++a.randomNameCount):e[b].name=a.uniqueRandomName(),f+='<div class="zenario_grid_border zenario_cell_in_grid zenario_grid_gutter '+(e[b].grid_break?"zenario_grid_break zenario_grid_break_with_slot":"")+'" '+q+">",f+='<div class="zenario_grid_name_area">',f+='<div class="zenario_grid_cell_info" title="'+(e[b].grid_break?
m.gridGridBreakWithSlot:m.gridSlot)+'" style="left: '+e[b].marginLeft+'px;"></div>',f+='<div class="zenario_grid_delete" title="'+m.gridDelete+'" data-for="'+t+"-"+b+'" style="right: '+e[b].marginRight+'px;"></div>',f+='<div class="zenario_grid_faux_block_t"></div><div class="zenario_grid_object_properties"><div><span data-type="'+(e[b].grid_break?"grid_break_with_slot":"slot")+'" data-for="'+t+"-"+b+'" data-name="'+w(e[b].name)+'" data-small="'+w(e[b].small)+'" data-height="'+w(e[b].height)+'" data-is_full="'+
Q(e[b].isAlpha&&e[b].isOmega)+'" data-is_last="'+Q(!e[b].isAlpha&&e[b].isOmega)+'" data-css_class="'+w(e[b].css_class)+'"',e[b].grid_break&&(f+=' data-grid_css_class="'+w(e[b].grid_css_class)+'"'),f+=' title="'+m.gridEditProperties+'">'+w(e[b].name)+(e[b].height&&"small"!=e[b].height?" ("+e[b].height+")":"")+"</span></div></div>",f+="</div>",f+='<div class="zenario_grid_faux_block_r"></div>',f+='<div class="zenario_grid_cell_size">',e[b].grid_break||(q=e[b].width*F-k,f=a.data.fluid?D?f+(Math.round(e[b].widthPercent)+
"%"):f+(Math.round(10*e[b].widthPercent)/10+"%"):f+(q+"px")),f+="</div>",f+='<div class="zenario_grid_faux_block_t"></div>';else var f=f+('<div class="zenario_cell_in_grid zenario_grid_gutter '+(e[b].grid_break?"zenario_grid_break zenario_grid_break_no_slot":"zenario_grid_space")+'" '+q+' title="'+(e[b].grid_break?m.gridGridBreak:m.gridEmptySpace)+'">'),f=f+('<div class="zenario_grid_delete" title="'+m.gridDelete+'" data-for="'+t+"-"+b+'" style="right: '+e[b].marginRight+'px;"></div>'),f=f+"<div>&nbsp;</div>",
f=f+"<div>&nbsp;</div>",f=f+('<div class="zenario_grid_object_properties"><div><span data-type="'+(e[b].grid_break?"grid_break":"space")+'" data-for="'+t+"-"+b+'" data-html="'+w(e[b].html)+'"'),T,f=e[b].grid_break?f+(' data-grid_css_class="'+w(T=e[b].grid_css_class)+'"'):f+(' data-css_class="'+w(T=e[b].css_class)+'"'),f=f+(' title="'+m.gridEditProperties+'">'+(T?w(T):m.gridEditPlaceholder)+"</span></div></div>");f+="</div>"}e[b].grid_break&&(f+="</div>");f+="</li>"}f+="</ul>";$(".ui-tooltip").remove();
A(c).innerHTML=f;q=0;for(b in e)if(s(e,b)){b*=1;e[b].cells&&(n=p,u=e[b].width,d.push(b),n=a.drawEditor(t+"-"+b+"-span",t+"-"+b,d,u,n,r,e[b].isAlpha?B-L:O,e[b].isOmega?C-M:U,r,e[b].widthPercent/u,0),d.pop(),1<n&&($("#"+t+"-"+b).attr("data-minwidth",F*n-k),e[b].width=Math.max(e[b].width,n)));e[b].addCell||(G=Math.max(G,e[b].width));delete e[b].isAlpha;delete e[b].isOmega;delete e[b].widthPx;delete e[b].widthPercent;delete e[b].marginLeft;delete e[b].marginRight;q+=e[b].width;if(q>g){u=n=0;for(n in x)s(x,
n)&&(u=Math.max(u,$("#"+t+"-"+n).height()));for(n in x)s(x,n)&&$("#"+t+"-"+n).height(u);q=e[b].width;x={}}x[b]=!0}u=n=0;for(n in x)s(x,n)&&(u=Math.max(u,$("#"+t+"-"+n).height()));for(n in x)s(x,n)&&$("#"+t+"-"+n).height(u);e.pop();$("#"+t+"s").disableSelection();$("#"+t+"s").sortable({cancel:"a,button,input,select",placeholder:"zenario_grid_cell zenario_grid_sortable_target",sort:function(a,b){var c=$(".zenario_grid_sortable_target"),d=b.item.width(),e=b.item.height(),f=1*b.item.attr("data-displayed_margin_left"),
g=d-f-1*b.item.attr("data-displayed_width");c.height(e);e-=24;c.width(d).html('<div style="margin: 10px '+g+"px 14px "+f+"px; height: "+e+'px;"></div>')},items:"li.zenario_grid_cell__"+t,start:function(b,c){a.stopRenames=!0},stop:function(b,c){var d=$("#"+t+"s").sortable("toArray"),e=[],f=a.data,g=!1,k;for(k in d)if(s(d,k)){var h=$("#"+d[k]),l=h.attr("data-i"),h=h.attr("data-levels");if(!g&&(g=!0,h)){var h=h.s("-"),p;for(p in h)s(h,p)&&(p*=1,f=f.cells[1*h[p]])}e[k]=f.cells[1*l]}f.cells=e;toastr.success(m.growlSlotMoved);
a.change()}});if(0==D)$("#"+h+"--tabs").removeClass("zenario_grid_tabs_grid_selected").addClass("zenario_grid_tabs_slots_selected"),$("#"+c+" .zenario_grid_cell_resizable").each(function(b,c){var d=$(c).width()-1*$(c).attr("data-displayed_width"),e=1*$(c).attr("data-col_and_gutter_width"),f=1*$(c).attr("data-displayed_margin_left"),g=1*$(c).attr("data-minwidth"),h=1*$(c).attr("data-maxwidth");$(c).attr("data-level");$(c).resizable({cancel:"a,button,input,select",handles:"se",grid:e,minHeight:$(c).height(),
maxHeight:$(c).height(),minWidth:Math.floor(g-0.5*e+1),maxWidth:Math.floor(h+0.5*e-1),helper:"ui-resizable-helper",start:function(a,b){$(c).hasClass("zenario_grid_nest")?$(P.body).addClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell"):$(c).hasClass("zenario_grid_space_cell")?$(P.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").addClass("zenario_grid_resizing_space_cell"):$(P.body).removeClass("zenario_grid_resizing_nest").addClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell")},
resize:function(b,c){var e=c.helper.width(),g=c.element.width(),h=e-d,k="";e!=g&&(k=a.data.fluid?k+("~"+Math.round(100*h/a.data.maxWidth)+"%"):k+(h+"px"));c.helper.html('<div class="zenario_resizing_border" style="height: '+(c.helper.height()-4)+"px; width: "+(h-4)+"px; margin-left: "+f+'px;"><div class="zenario_size_when_resizing">'+k+"</div></div>")},stop:function(b,d){$(P.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell");
var f=d.element.attr("data-i"),g=d.element.attr("data-levels"),h=a.data;if(g){var g=g.s("-"),k;for(k in g)s(g,k)&&(k*=1,h=h.cells[1*g[k]])}h.cells[1*f].width=Math.round((d.element.width()+$(c).attr("data-gutter")/2)/e);a.change()}})}),$("#"+c+" .ui-resizable-handle").each(function(a,b){var c=$(b),d=c.prev();c.css("right",1*d.css("marginRight").replace(/\D/g,""));d.hasClass("zenario_grids")?(c.css("bottom","0"),c.attr("title",m.gridResizeNestedCells)):(c.css("top",d.height()+10+2+10+10+2-19+"px"),
c.attr("title",m.gridResizeSlot))}),$("#"+c).width(K+L+M),I._to("#"+c),$("#"+c+" .zenario_grid_delete").click(function(){a.deleteCell(this)}),$("#"+c+" .zenario_grid_add").click(function(){var b=this,c=["zenario_grid_box","zenario_grid_add_cell_box"],d={level:$(b).attr("data-level")},d=J._mT("zenario_grid_maker_add_new_object",d);$.colorbox({transition:"none",html:d,onOpen:function(){v._aCTC(c)},onClosed:function(){v._rCTC(c)},onComplete:function(){$("a.zenario_grid_add_slot").click(function(){a.add(b,
"slot")});$("a.zenario_grid_add_space").click(function(){a.add(b,"space")});$("a.zenario_grid_add_children").click(function(){a.add(b,"grouping")});$("a.zenario_grid_add_grid_break").click(function(){a.add(b,"grid_break")});$("a.zenario_grid_add_grid_break_with_slot").click(function(){a.add(b,"grid_break_with_slot")})}})}),$("#"+c+" .zenario_grid_object_properties span").click(function(){if(!a.stopRenames){var b=this,c=$(b),d=["zenario_grid_box","zenario_grid_rename_slot_box"],c={type:c.attr("data-type"),
name:c.attr("data-name"),small:c.attr("data-small"),height:c.attr("data-height"),is_full:c.attr("data-is_full"),is_last:c.attr("data-is_last"),css_class:c.attr("data-css_class"),html:c.attr("data-html"),grid_css_class:c.attr("data-grid_css_class")};$.colorbox({transition:"none",html:J._mT("zenario_grid_maker_object_properties",c),onOpen:function(){v._aCTC(d)},onClosed:function(){v._rCTC(d)},onComplete:function(){$("#zenario_grid_slotname_button").click(function(){var c,d={},e=$("#colorbox .zenario_grid_properties_form").serializeArray();
for(c in e)s(e,c)&&(d[e[c].name]=e[c].value);a.saveProperties(b,d)});$(".zenario_grid_properties_form input,textarea")[1].focus()}})}}),setTimeout(function(){delete a.stopRenames},100),a.drawLinks(),$("#"+c+" .zenario_grid_newly_added .zenario_cell_in_grid").effect({effect:"highlight",duration:1E3,easing:"zenarioOmmitEnd"}),a.newlyAdded&&(z+=$("#"+a.newlyAdded).height(),delete a.newlyAdded),$("#"+l).scrollTop(z);else return G};a.drawLinks=function(){a.checkData();var c={src:a.ajaxSrc()},c=J._mT("zenario_grid_maker_bottom_links",
c);$(".ui-tooltip").remove();A(z).innerHTML=c;I._to("#"+z);c=$("#"+l);a.editing?c.addClass("zenario_grid_slot_view").removeClass("zenario_grid_grid_view"):(c.addClass("zenario_grid_grid_view").removeClass("zenario_grid_slot_view"),c.css({height:"auto"}),c=$("#"+l+" .zenario_grid_preview_frame"));c.height(0);c.height(Math.max(a.gridAreaSmallestHeight,$(G).height()-$("body").height()-a.bodyPadding));var b=["zenario_grid_box","zenario_grid_copy_box","zenario_grid_copy_css_box"];$("#"+z+" a.zenario_grid_copy_css").colorbox({onOpen:function(){v._aCTC(b)},
onClosed:function(){v._rCTC(b)},onComplete:function(){$("#colorbox textarea").focus()}});var d=["zenario_grid_box","zenario_grid_copy_box","zenario_grid_copy_html_box"];$("#"+z+" a.zenario_grid_copy_html").colorbox({onOpen:function(){v._aCTC(d)},onClosed:function(){v._rCTC(d)},onComplete:function(){$("#colorbox textarea").focus()}});G.zenarioAdminHasSavePerms&&($("#"+z+" .zenario_grid_save_tf .zenario_grid_save a").click(function(){a.save()}),$("#"+z+" .zenario_grid_save_tf .zenario_grid_save_as a").click(function(){a.save(!0)}))};
a.checkCellsEmpty=function(a){if(!a||!a.cells)return!0;var b=U;for(b in a.cells)if(s(a.cells,b))break;return!y(b)};a.save=function(c){a.layoutId||(c=!0);var b;if(c){var d=["zenario_grid_box","zenario_grid_new_layout_box"];(b=v._nAA(a.ajaxURL(),{saveas:1,data:a.ajaxData(),layoutId:a.layoutId},!0))&&$.colorbox({transition:"none",html:J._mT("zenario_grid_maker_save_prompt",{name:a.newLayoutName||b.oldLayoutName||""}),onOpen:function(){v._aCTC(d)},onClosed:function(){v._rCTC(d)},onComplete:function(){$("#zenario_grid_new_layout_save").click(function(){$("#zenario_grid_error").hide();
(b=v._nAA(a.ajaxURL(),{saveas:1,confirm:1,data:a.ajaxData(),layoutId:a.layoutId,layoutName:a.newLayoutName=A("zenario_grid_layout_name").value},!0))?b.error?$("#zenario_grid_error").html(w(b.error)).slideDown():($.colorbox.close(),a.layoutName=a.newLayoutName,a.markAsSaved(b)):$.colorbox.close()});A("zenario_grid_layout_name").focus()}})}else if(b=v._nAA(a.ajaxURL(),{save:1,data:a.ajaxData(),layoutId:a.layoutId},!0))b.success?a.markAsSaved(b,!0):(I._flBo(b.message,m.gridSave,"warning",!0,!0),$("#zenario_fbMessageButtons .submit_selected").click(function(){setTimeout(function(){var b;
(b=v._nAA(a.ajaxURL(),{save:1,data:a.ajaxData(),layoutId:a.layoutId,confirm:1},!0))&&a.markAsSaved(b)},50)}))};a.markAsSaved=function(c,b){a.savedAtPos=a.pos;y(c.layoutId)&&(a.layoutId=c.layoutId);a.rememberNames(a.data.cells);c.success&&(b?I._flBo(c.success,!0,"success"):toastr.success(c.success));if(r&&r.zenarioO.init)switch(r.zenarioO.path){case "zenario__layouts/panels/layouts":c.layoutId&&r.zenarioO._rTSI(c.layoutId)}};a.readSettings=function(a){a.fluid=$("#"+h+" input.zenario_grid_setting_flu").prop("checked");
a.responsive=$("#"+h+" input.zenario_grid_setting_responsive").prop("checked");a.mirror=$("#"+h+" input.zenario_grid_setting_mirror").prop("checked");a.cols=1*$("#"+h+" input.zenario_grid_setting_cols").val();var b;(b=$("#"+h+" input.zenario_grid_setting_full_width")).length?a.maxWidth=1*b.val():(b=$("#"+h+" input.zenario_grid_setting_max_width")).length&&(a.maxWidth=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_min_width")).length&&(a.minWidth=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_break_1")).length&&
(a.bp1=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_break_2")).length&&(a.bp2=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_gutter_left")).length&&(a.gutterLeftEdge=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_gutter_right")).length&&(a.gutterRightEdge=1*b.val());(b=$("#"+h+" select.zenario_grid_setting_col_and_gutter")).length&&(b=b.val())&&(b=b.s("/"))&&(a.colWidth=1*b[0],a.gutter=1*b[1]);(b=$("#"+h+" input.zenario_grid_setting_gutter_left_flu")).length&&(a.gutterLeftEdgeFlu=1*
b.val());(b=$("#"+h+" input.zenario_grid_setting_gutter_flu")).length&&(a.gutterFlu=1*b.val());(b=$("#"+h+" input.zenario_grid_setting_gutter_right_flu")).length&&(a.gutterRightEdgeFlu=1*b.val())};a.updateAndChange=function(){a.update();a.change()};a.update=function(){a.readSettings(a.data);a.checkData()};a.recalcOnKeyUp=function(){a.recalc(this)};a.recalcOnChange=function(){a.recalc(this,!0,!0)};a.recalcOnInc=function(c,b){if(c.originalEvent&&"mouseup"==c.originalEvent.type)return a.recalc(this,
!0)};a.recalc=function(c,b,d){var g=$.extend(!1,{},a.data),p=!1,k=!1,l=0,m=c.className,r;g.fluid?(delete g.gutter,delete g.gutterLeftEdge,delete g.gutterRightEdge):(delete g.gutterFlu,delete g.gutterLeftEdgeFlu,delete g.gutterRightEdgeFlu);d||(p=JSON.stringify(g));a.readSettings(g);k=a.checkDataNonZeroAndNumeric(g,k);if(g.fluid)delete g.gutter,delete g.gutterLeftEdge,delete g.gutterRightEdge;else{switch(m.s(" ")[0]){case "zenario_grid_setting_full_width":l=1;break;case "zenario_grid_setting_cols":l=
2;break;case "zenario_grid_setting_gutter_left":l=3;break;case "zenario_grid_setting_gutter_right":l=4;break;case "zenario_grid_setting_col_and_gutter":l=5}if(l){if(d||$(c).val()!=$(c).attr("data-initial-value"))$(c).attr("data-initial-value",$(c).val());else return;do if(!g.maxWidth||1>g.cols)k=!0;else{if(g.gutterLeftEdge+g.cols+g.gutterRightEdge>g.maxWidth)if(3>l)g.gutterLeftEdge=g.gutterRightEdge=0;else{k=!0;break}5>l&&(r=a.recalcColumnAndGutterOptions(g))&&(g.colWidth=r.colWidth,g.gutter=r.gutter);
var k=a.checkDataNonZeroAndNumeric(g,k),m=0,n=[{l:3,c:"zenario_grid_setting_gutter_left",v:g.gutterLeftEdge},{l:4,c:"zenario_grid_setting_gutter_right",v:g.gutterRightEdge},{l:5,c:"zenario_grid_setting_col_and_gutter",v:g.colWidth+"/"+g.gutter}];for(m in n)if(s(n,m)&&l<n[m].l){var u=$("#"+h+" ."+n[m].c);u.val()!=n[m].v&&u.animate({opacity:0.3},"fast").val(n[m].v).animate({opacity:1},"fast")}}while(0)}delete g.gutterFlu;delete g.gutterLeftEdgeFlu;delete g.gutterRightEdgeFlu}if(d||p!=JSON.stringify(g))$("#"+
h+" .zenario_grid_setting_warning").removeClass("zenario_grid_setting_warning"),b?k?a.revert():(a.readSettings(a.data),a.checkDataNonZeroAndNumeric(a.data),a.change(!1,!0)):k&&$(c).parent().addClass("zenario_grid_setting_warning");return!k};a.deleteCell=function(c){var b;if((b=$(c).attr("data-for"))&&(b=$("#"+b))){c=b.attr("data-i");b=b.attr("data-levels");var d=a.data;if(b){b=b.s("-");for(var g in b)s(b,g)&&(g*=1,d=d.cells[1*b[g]])}d.cells.splice(c,1);a.change();toastr.success(m.growlSlotDeleted)}};
a.add=function(c,b,d){d=$(c).attr("data-levels");c=$(c).attr("data-new-width")||1;var g=a.data;$.colorbox.close();if(y(d)&&!1!==d){if(d){d=d.s("-");for(var h in d)s(d,h)&&(h*=1,g=g.cells[1*d[h]])}"slot"==b?(g.cells.push({width:c,slot:!0,name:a.uniqueRandomName(),flash:!0}),toastr.success(m.growlSlotAdded)):"space"==b?(g.cells.push({width:c,space:!0,css_class:a.randomName(2,"Space_"),flash:!0}),toastr.success(m.growlSpaceAdded)):"grouping"==b?(g.cells.push({width:c,css_class:a.randomName(2,"Grouping_"),
flash:!0,cells:[{width:c,slot:!0,name:a.uniqueRandomName()},{width:c,slot:!0,name:a.uniqueRandomName()}]}),toastr.success(m.growlChildrenAdded)):"grid_break"==b?(g.cells.push({width:g.cols,grid_break:!0,grid_css_class:a.randomName(2,"Grid_"),flash:!0}),toastr.success(m.growlGridBreakAdded)):"grid_break_with_slot"==b&&(g.cells.push({width:g.cols,grid_break:!0,slot:!0,grid_css_class:a.randomName(2,"Grid_"),name:a.uniqueRandomName(),flash:!0}),toastr.success(m.growlSlotAdded));a.change()}};a.saveProperties=
function(c,b){var d;if((d=$(c).attr("data-for"))&&(d=$("#"+d))){var g=d.attr("data-i");d=d.attr("data-levels");var h=a.data;if(d){d=d.s("-");for(var k in d)s(d,k)&&(k*=1,h=h.cells[1*d[k]])}if(h.cells[g].slot){if(b.name){if(b.name!=b.name.r(/[^a-zA-Z0-9_]/g,"")){$("#zenario_grid_error").html(m.gridErrorNameFormat).slideDown();return}if(b.name!=h.cells[g].name&&a.checkIfNameUsed(b.name)){$("#zenario_grid_error").html(m.gridErrorNameInUse).slideDown();return}}else{$("#zenario_grid_error").html(m.gridErrorNameIncomplete).slideDown();
return}delete a.names[h.cells[g].name];a.registerNewName(b.name)}for(var l in b)s(b,l)&&(""!=b[l]?h.cells[g][l]=b[l]:delete h.cells[g][l]);a.change()}$.colorbox.close()};a.randomName=function(a,b){for(var d=b||"Slot_",g=0;g<a;++g)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(26*Math.random()));return d};a.uniqueRandomName=function(){var c,b=Math.ceil(Math.log(Math.max(a.randomNameCount,2))/Math.log(10));do c=a.randomName(b);while(a.checkIfNameUsed(c));a.names[c]=!0;++a.randomNameCount;return c};
a.checkIfNameUsed=function(c){return y(a.names[c.toLowerCase()])};a.registerNewName=function(c){return a.names[c.toLowerCase()]=c};a.change=function(c,b){c||(a.pos<a.history.length-1&&a.history.splice(a.pos+1,a.history.length-1-a.pos),a.history.push(a.ajaxData()),a.pos=a.history.length-1,a.savedAtPos>=a.pos&&(a.savedAtPos=-1));a.draw(b)};a.undoOrRedo=function(c){var b=a.pos-c;0>b||b>=a.history.length||(a.pos=b,a.data=JSON.parse(a.history[b]),a.change(!0,1<c))};a.undo=function(){a.undoing=!0;a.undoOrRedo(1);
delete a.undoing};a.redo=function(){a.undoOrRedo(-1)};a.revert=function(){a.undoOrRedo(0)};a.canUndo=function(){return 0<a.pos};a.canRedo=function(){return a.pos<a.history.length-1};a.stopPoking=function(){a.poking&&clearInterval(a.poking);a.poking=!1};a.startPoking=function(){a.poking||(a.poking=setInterval(a.poke,12E4))};a.poke=function(){v._a(O+"zenario/admin/quick_ajax.php?keep_session_alive=1")}},window.zenarioG=function(){},"settings","grid","download_links","close_button");

zenario.lib(function(g,x,B,m,E,H,e,b,w,A,z,r,C,v,D,I,n,J,K){b.init=!0;b.menuWandOn=!0;b.slotWandOn=!1;b.showGridOn=!1;b.storekeeperInitTime=5E3;b.adminSettings={};b.tooltipLengthThresholds={adminBoxTitle:120,adminToolbarTitle:60,organizerBackButton:70,organizerPanelTitle:100};b.microTemplates={};b.slotParentMouseOverLastId=!1;b.slotParentMouseOver=function(a){b.slotControlHide&&clearTimeout(b.slotControlHide);$(".zenario_slotParent").removeClass("zenario_slotParent");a?("zenario_slotControlsWrap"!=
this.className?(a=$(this).attr("id").replace("-control_box",""),$(this).parent().addClass("zenario_slotParent")):(a="plgslt_"+(this.id+"").replace("zenario_fbAdminPluginOptionsWrap-",""),$("#"+a).parent().addClass("zenario_slotParent")),b.slotParentMouseOverLastId&&b.slotParentMouseOverLastId!=a&&b.closeSlotControls(),b.slotParentMouseOverLastId=a):(b.closeSlotControls(),b.slotParentMouseOverLastId=!1)};b.slotParentMouseOut=function(a){b.slotControlHide&&clearTimeout(b.slotControlHide);b.slotControlHide=
setTimeout(b.slotParentMouseOver,b.slotControlHoverInterval)};b.setSlotParents=function(){$(".zenario_slotAdminControlBox").parent().children().mouseenter(b.slotParentMouseOver);$(".zenario_slotAdminControlBox").parent().children().mouseleave(b.slotParentMouseOut);$("#zenario_afb_container .zenario_slotControlsWrap").mouseenter(b.slotParentMouseOver);$("#zenario_afb_container .zenario_slotControlsWrap").mouseleave(b.slotParentMouseOut)};b.slotControlHide=!1;b.slotControlHoverInterval=1500;b.slotControlCloseInterval=
100;$(B).ready(b.setSlotParents);b.openSlotControlsBox=!1;b.openSlotControls=function(a,c,d){var h=$("#zenario_fbAdminSlotControls-"+d).is(":visible");a.blur();b.closeSlotControls();if(!h&&b.checkForEdits()){var f,k,m={info:!1,notes:!1,actions:!1,overridden_info:!1,overridden_actions:!1};f=$("."+d+".span.slot");h=a=!1;f.length&&(a=f.attr("class"),h=b.getSlotWidth(f));f=-1==r("zenario_fbAdminSlotControls-"+d).innerHTML.indexOf("zenario_long_option")?255:280;var s=-f+34;b.openBox(g,r("plgslt_"+d+"-wrap").className+
" zenario_fbAdminSlotControls",b.openSlotControlsBox="AdminSlotControls-"+d,c,f,s,32,!1,!1,!1,!1);for(k in m)e.has(m,k)&&($("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+k).show(),$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+k+" .zenario_sc:visible").each(function(a,c){m[k]=!0}),m[k]||$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+k).hide());a?(a=a.replace(" alpha "," ").replace(" omega "," ").replace(/\bspan\d*_?\d*\s/g,""),$("#zenario_slot_control__"+
d+"__info__grid_css_class").show(),$("#zenario_slot_control__"+d+"__info__grid_css_class > span").text(a)):$("#zenario_slot_control__"+d+"__info__grid_css_class").hide();h?($("#zenario_slot_control__"+d+"__info__grid_width").show(),$("#zenario_slot_control__"+d+"__info__grid_width > span").text(h)):$("#zenario_slot_control__"+d+"__info__grid_width").hide();$("#plgslt_"+d+"-control_box").addClass("zenario_adminSlotControlsOpen")}return!1};b.dontCloseSlotControls=function(){b.slotControlClose&&clearTimeout(b.slotControlClose)};
b.closeSlotControlsAfterDelay=function(){b.dontCloseSlotControls();b.slotControlClose=setTimeout(b.closeSlotControls,b.slotControlCloseInterval)};b.closeSlotControls=function(){b.dontCloseSlotControls();b.openSlotControlsBox&&(b.closeBox(b.openSlotControlsBox,!0,{effect:"fade",duration:200}),$(".zenario_slotAdminControlBox").removeClass("zenario_adminSlotControlsOpen"))};b.getSlotWidth=function(a){var c=!1,b="",h=a.width(),f=(a.attr("class")||"").match(/\bspan\d+\b/);f&&(f=1*f[0].match(/\d+/));try{var g;
a:for(g in B.styleSheets)if(e.has(B.styleSheets,g)){var m=B.styleSheets[g],s=m.rules||m.cssRules,r;for(r in s)if(e.has(s,r)){var t=s[r];if(t.selectorText&&t.style.width&&(""+t.selectorText).match(/\.span/)&&a.is(t.selectorText)){b=t.style.width;break a}}}}catch(p){b=""}b?b.match(/\d+px/)||(c=!0):b=h+"px";c&&(b+=" ("+h+" px "+n.atCurrentSize+")");f&&(b=1==f?"1 column, "+b:f+" columns, "+b);return b};b.pickNewPluginSlotName=!1;b.pickNewPlugin=function(a,c,d,h){a.blur();b.pickNewPluginSlotName=c;b.pickNewPluginLevel=
d;a="zenario__modules/panels/modules/refiners/slotable_only////";!h&&e.slots[c]&&e.slots[c].moduleId&&e.slots[c].instanceId&&(a+="item//"+e.slots[c].moduleId+"//"+e.slots[c].instanceId);b.organizerSelect("zenarioA","addNewReusablePlugin",!1,a,"zenario__modules/panels/plugins","zenario__modules/panels/modules","zenario__modules/panels/plugins",!0,!0,n.insertReusablePlugin);return!1};b.addNewReusablePlugin=function(a,c,d){a=b.pickNewPluginSlotName;(c=e.moduleNonAsyncAJAX("zenario_common_features",{addPluginInstance:c.id,
slotName:a,level:b.pickNewPluginLevel,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(c):e.refreshPluginSlot(a,"")};b.addNewWireframePlugin=function(a,c,d){a.blur();var h={addPlugin:d,slotName:c,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion};d=e.moduleNonAsyncAJAX("zenario_common_features",h,!1);if(!b.loggedOut(d))return b.floatingBox(d,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",h,!0);a?b.showMessage(a):e.refreshPluginSlot(c,"")}),
!1};b.pluginSlotEditSettings=function(a,c,b){a.blur();a=e.slots[c].instanceId;!r("zenario_theme_name_"+c+"__0")&&a&&w.open(b||"plugin_settings",{cID:e.cID,cType:e.cType,cVersion:e.cVersion,slotName:c,instanceId:a,frontEnd:1});return!1};b.movePlugin=function(a,c){a.blur();b.floatingBox(n.movePluginDesc,!0,"question",!0,!0,function(){b.moveSource=c;$(".zenario_slotAdminControlBox").addClass("zenario_moveDestination");$("#plgslt_"+c+"-control_box").removeClass("zenario_moveDestination").addClass("zenario_moveSource")});
return!1};b.doMovePlugin=function(a,c){a.blur();var d=b.moveSource;b.cancelMovePlugin(a);if(d&&c)if("edit"==b.toolbar)b.doMovePlugin2(d,c,1);else if("template"==b.toolbar){var h=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!1);if(b.loggedOut(h))return;b.floatingBox(h,n.movePlugin,"warning",!1,!1,function(){b.doMovePlugin2(d,c,2)})}return!1};b.doMovePlugin2=function(a,c,d){(d=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,
level:d,slotNameSource:a,slotNameDestination:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(d):(e.refreshPluginSlot(a,"",b.importantGetRequests),e.refreshPluginSlot(c,"",b.importantGetRequests))};b.cancelMovePlugin=function(a){a&&a.blur();delete b.moveSource;$(".zenario_slotAdminControlBox").removeClass("zenario_moveDestination").removeClass("zenario_moveSource");return!1};b.refreshAllSlotsWithCutCopyPaste=function(a){var c,b,h,f={};a=a.split(",");for(b in a)e.has(a,b)&&(h=a[b])&&
(f[h]=!0);f.zenario_banner=!0;f.zenario_html_snippet=!0;f.zenario_wysiwyg_editor=!0;for(h in f)if(e.has(f,h)&&m[h]&&m[h].slots)for(c in m[h].slots)e.has(m[h].slots,c)&&e.slots[c]&&e.slots[c].isVersionControlled&&m[h].refreshPluginSlot(c,!1,!1,!1)};b.copyContents=function(a,c,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{copyContents:1,allowedModules:d,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(a):b.refreshAllSlotsWithCutCopyPaste(d)};b.cutContents=
function(a,c,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{cutContents:1,allowedModules:d,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(a):b.refreshAllSlotsWithCutCopyPaste(d)};b.pasteContents=function(a,c){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{pasteContents:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.overwriteContents=function(a,c){a.blur();b.floatingBox(n.overwriteContentsConfirm,
$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{overwriteContents:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);a?b.showMessage(a):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)});return!1};b.swapContents=function(a,c){a.blur();b.floatingBox(n.swapContentsConfirm,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{swapContents:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);a?b.showMessage(a):
e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)});return!1};b.removePlugin=function(a,c,d){a.blur();var h={removePlugin:1,level:d,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion};a=function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",h,!0);a?b.showMessage(a):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};if(1<d){html=e.moduleNonAsyncAJAX("zenario_common_features",h,!1);if(b.loggedOut(html))return;b.floatingBox(html,n.remove,!0,!1,!1,a)}else a();return!1};b.hidePlugin=function(a,c){a.blur();var d=
e.moduleNonAsyncAJAX("zenario_common_features",{hidePlugin:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.showPlugin=function(a,c){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{showPlugin:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.replacePluginSlot=function(a,c,d,h,f,k,n){var s=!1,v=!1,t=!1,p="",l="";if(k)for(var q in k)if(e.has(k,
q)){var u=k[q].split("--");"IN_EDIT_MODE"==u[0]?t=!0:"MODULE_ID"==u[0]?s=1*u[1]:"WIREFRAME"==u[0]?v=!0:"CSS_CLASS"==u[0]?r("plgslt_"+a).className="zenario_slot "+e.uneschyp(u[1]):"NAMESPACE"==u[0]?s&&!m[e.uneschyp(u[1])]&&e.addPluginJavaScript(s):"SLOT_CONTROLS"==u[0]?p=e.uneschyp(u[1]):"SLOT_CONTROLS_CSS_CLASS"==u[0]&&(l=e.uneschyp(u[1]))}s||(c=0);e.slot([[a,c,s,d,h,g,t,v]]);t&&(l+=" zenario_slot_being_edited");r("plgslt_"+a+"-wrap").className=l;m.onbeforeunload=b.onbeforeunload;e.slots[a].beingEdited=
t;for(var w in n)e.has(n,w)&&e.slots[a]&&e.callScript(n[w],e.slots[a].moduleClassName);r("plgslt_"+a).innerHTML=f;r("zenario_fbAdminSlotControlsContents-"+a).innerHTML=p;e.tooltips("#plgslt_"+a+" a");e.tooltips("#plgslt_"+a+" img");e.tooltips("#plgslt_"+a+" input")};b.checkSlotsBeingEdited=function(){if(e.slots)for(var a in e.slots)if(e.has(e.slots,a)&&e.slots[a].beingEdited)return $("body").addClass("zenario_being_edited"),!0;$("body").removeClass("zenario_being_edited");return!1};b.checkForEdits=
function(){return"edit"==b.toolbar&&b.checkSlotsBeingEdited()?(b.showMessage(n.editorOpen),!1):!0};b.onbeforeunload=function(){return w.isOpen&&w.editModeOnBox()&&(w.changes()||w.callFunctionOnEditors("isDirty"))?n.leaveAdminBoxWarning:b.checkSlotsBeingEdited()?n.leavePageWarning:g};b.boxesOpen={};b.openBox=function(a,c,d,h,f,k,m,s,n,t,p,l,q,u,v){d||(d=1);c===g&&(c="");var y;if(s||n){if(!r("zenario_fb"+d+"__overlay")){var w,z,x="zenario_overlay";if(c)for(w in y=c.split(" "),y)e.has(y,w)&&(z=y[w])&&
(x+=" "+z+"__overlay");$("body").append('<div class="'+x+'" id="zenario_fb'+d+'__overlay" style="display: none;"></div>')}y=$("#zenario_fb"+d+"__overlay")}r("zenario_fb"+d)||$("body").append('<div id="zenario_fb'+d+'"></div>');r("zenario_fb"+d).className=c;c=$("#zenario_fb"+d);!0===t?c.draggable({handle:".zenario_drag",cancel:".zenario_no_drag",containment:"window"}):"string"==typeof t&&c.draggable({handle:t,cancel:".zenario_no_drag",containment:"window"});b.adjustBox(d,h,f,k,m,a,l,q,u,v);if(s||n)a=
c.css("z-index"),y.css("z-index",D(1*a-1,0,0)).show().unbind("click"),s||y.click(function(){b.closeBox(d)}),y.show();p&&(!0===p&&(p={}),p.containment===g&&(p.containment="document"),p.minWidth===g&&(p.minWidth=f),c.resizable(p));c.show()};b.adjustBox=function(a,c,d,h,f,k,n,s,v,t){var p=r("zenario_fb"+a);a||(a=1);f===g&&(f=15);h===g&&(h=50);n===g&&(n=15);d?p.style.width=d+"px":(n=h=0,p.style.left="0",p.style.width="100%");!1!==k&&k!==g&&(p.innerHTML=k,e.addJQueryElements("#zenario_fb"+a+" ",!0));s===
g&&(s=D($("#zenario_fb"+a).height(),50));c?(c.clientY!==g||c.pageY!==g?a=e.getMouseY(c)+f:(a=$(c).offset().top+f,t&&(a+=$(c).height())),t=1+e.scrollTop(),a<t?a=t:(t=$(m).height(),b.pageEl&&(t=Math.min(t,$(b.pageEl).height())),s=t-s-n+e.scrollTop(),a>s&&(a=s)),p.style.bottom=null,p.style.top=a+"px",p.style.position="absolute"):(1>f?f=0:100<f&&(f=100),e.browserIsIE(6)?(p.style.position="absolute",s=p.className,s=s.replace(/zenario_fbIE6Hack\d+/,""),s+=" zenario_fbIE6Hack"+(4>f?f:5*Math.round(f/5)),
p.className=s):(p.style.position="fixed",50>=f?(p.style.bottom=null,p.style.top=f+"%"):(p.style.top=null,p.style.bottom=100-f+"%")));d&&(c?(c.clientX!==g||c.pageX!==g?h=e.getMouseX(c)+f:(h=$(c).offset().left+h,v&&(h+=$(c).width())),c=1+e.scrollLeft(),h<c?h=c:(d=$(m).width()-d-n+e.scrollLeft(),h>d&&(h=d)),p.style.right=null,p.style.marginRight=0,p.style.marginLeft=0,p.style.left=h+"px"):(1>h?h=0:100<h&&(h=100),d=Math.max(0,$(m).width()-d),p.style.right=null,p.style.left=Math.round(d*h/100)+"px"))};
b.checkIfBoxIsOpen=function(a){return $("#zenario_fb"+a).is(":visible")};b.closeBox=function(a,c,d){a||(a=1);c?$("#zenario_fb"+a).hide(d):$("#zenario_fb"+a).remove();$("#zenario_fb"+a+"__overlay").remove();b.checkIfBoxIsOpen(a)&&B.body.focus();return!1};b.closeBoxHandler=function(a){a.w&&(delete b.boxesOpen[a.w.attr("id")],a.w.hide());a.o&&a.o.remove();for(var c in b.boxesOpen)if(e.has(b.boxesOpen,c))return;setTimeout(function(){b.floatingBoxOpen=!1;for(var a in b.boxesOpen)e.has(b.boxesOpen,a)&&
(b.floatingBoxOpen=!0)},100)};b.forcePathWrap=function(a,c,b){if(e.browserIsFirefox()&&c===g)return a;c===g&&(c=/\//g);b===g&&(b="/");return a.replace(c,b+'<span style="font-size: 1px;"> </span>')};b.generateRandomString=function(a){for(var c="",b=0,b=0;b<a;++b)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return c};b.loggedOut=function(a){return"\x3c!--Logged_Out--\x3e"==a.substr(0,17)?(b.showMessage(a),!0):!1};b.loggedOutIframeCheck=function(a,
c){var b=self&&self!=self.parent&&self.parent;try{if(b&&b.zenarioA&&b.zenarioA.showMessage)return b.zenarioA.closeBox("AdminOrganizer"),b.zenarioA.showMessage(a,!0,c),!0}catch(e){}return!1};b.floatingBox=function(a,c,d,h,f,k){var m=!1;f&&(a=v(a,!0));!0===c?c='<input type="button" class="submit" value="'+n.OK+'"/>':c&&-1===c.indexOf("<input ")&&(c='<input class="submit_selected" type="button" value="'+v(c)+'"/><input type="button" class="submit" value="'+n.cancel+'"/>');"success"==d||4==d?d="zenario_fbSuccess":
"question"==d||3==d?d="zenario_fbQuestion":"error"==d||2==d?d="zenario_fbError":d&&"none"!=d?(d="zenario_fbWarning",m=!0):d="";h===g&&(h=m);a=b.microTemplate("zenario_popout_message",{message:a,messageType:d,buttonsHTML:c});b.openBox(a,"zenario_fbAdmin zenario_prompt","AdminMessage",g,550,50,17,h,!0,!1,!1);e.addJQueryElements("#zenario_fbAdminMessage ",!0);k&&(h=$("#zenario_fbMessageButtons .submit_selected"),h.length||(h=$("#zenario_fbMessageButtons .submit")),h.click(function(){setTimeout(k,1)}))};
b.currentlyClosingFloatingBox=!1;b.closeFloatingBox=function(a){b.currentlyClosingFloatingBox?b.currentlyClosingFloatingBox=!1:b.checkIfBoxIsOpen("AdminMessage")&&(b.closeBox("AdminMessage"),a&&(b.currentlyClosingFloatingBox=!0))};b.addJQueryElements=function(a){$(a+"input.zenario_datepicker").each(function(a,d){if(d.id&&b.siteSettings&&r("_value_for__"+d.id)){var e=$(d).hasClass("zenario_datepicker_change_month_and_year");$(d).datepicker({changeMonth:e,changeYear:e,dateFormat:b.siteSettings.organizer_date_format,
altField:"#_value_for__"+d.id,altFormat:"yy-mm-dd",showOn:"focus",onSelect:function(a,c){$(d).change()}})}});b.tooltips(a+"span[title]");b.tooltips(a+".pluginAdminMenuButton[title]",{position:{my:"left top+2",at:"left bottom",collision:"flipfit"}})};b.tooltips=function(a,c){c||(c={});c.tooltipClass===g&&(c.tooltipClass="zenario_admin_tooltip");e.tooltips(a,c)};b.setTooltipIfTooLarge=function(a,c,d){$(a).each(function(a,e){var k;k=c===g?e.innerHTML:c;try{$(e).jQueryTooltip("destroy")}catch(m){}k.replace(/\&\w+;/g,
"-").length>d?b.tooltips(e,{content:k,items:"*"}):$(e).attr("title","")})};b.tinyMCEGetContent=function(a){a=$("<div/>").html(a.getContent());a.find('[id^="plgslt_"]').each(function(a,b){$(b).removeAttr("id class style")});a=a.html();"<h1>&nbsp;</h1>"==a&&(a="");return a};b.tinyMCEPasteRreprocess=function(a,c){c.content=c.content.replace(/<\/?font\b[^>]*?>/gi,"").replace(/<b\b[^>]*?>/gi,"<strong>").replace(/<\/b>/gi,"</strong>").replace(/<i\b[^>]*?>/gi,"<em>").replace(/<\/i>/gi,"</em>").replace(/<u\b[^>]*?>/gi,
"<u>").replace(/<\/u>/gi,"</u>").replace(/<u>\s*<p\b[^>]*?>/gi,"<p><u>").replace(/<\/p>\s*<\/u>/gi,"</u></p>").replace(/<em>\s*<p\b[^>]*?>/gi,"<p><em>").replace(/<\/p>\s*<\/em>/gi,"</em></p>").replace(/<strong>\s*<p\b[^>]*?>/gi,"<p><strong>").replace(/<\/p>\s*<\/strong>/gi,"</strong></p>").replace(/<u\b[^>]*?>/gi,'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"</span>")};b.enableDragDropUploadInTinyMCE=function(a,c,d){"string"==typeof d&&(d=r(d));d&&(b.disableFileDragDrop(d),a&&b.canDoHTML5Upload()&&
b.setHTML5UploadFromDragDrop(x+"zenario/ajax.php",{method_call:"handleOrganizerPanelAJAX",__pluginClassName__:"zenario_common_features",__path__:"editor_temp_file",upload:1},!1,function(){b.addMediaToTinyMCE(c)},d))};b.addMediaToTinyMCE=function(a){var c,b="";if(c=e.nonAsyncAJAX(x+"zenario/ajax.php?method_call=getNewEditorTempFiles",!0,!0))for(var h in c)if(e.has(c,h)){var f=c[h];if(f&&f.checksum&&f.filename)var g=a+"zenario/file.php?c="+f.checksum+"&filename="+encodeURIComponent(f.filename),b=b+
('\n<img src="'+v(g)+'" alt="'+v(f.filename)+'" width="'+f.width+'" height="'+f.height+'"/>')}tinyMCE.execCommand("mceInsertContent",!1,b)};b.fileBrowser=function(a,c,d,h){c=(c=m.tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.id)&&w.tuix&&w.tuix.tab&&w.tuix.tabs&&w.tuix.tabs[w.tuix.tab]&&w.tuix.tabs[w.tuix.tab].fields&&w.tuix.tabs[w.tuix.tab].fields[c];b.tinyMCE_win=h;b.tinyMCE_field=a;b.tinyMCE_fromFAB=!!c;"file"==d?(pick_items=c&&c.insert_link_button&&c.insert_link_button.pick_items?c.insert_link_button.pick_items:
{path:"zenario__content/panels/content",target_path:"zenario__content/panels/content",min_path:"zenario__content/panels/content",max_path:"zenario__content/panels/content",disallow_refiners_looping_on_min_path:!1},b.organizerSelect("zenarioA","setLinkURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,g,pick_items.one_to_one_choose_phrase,g,!0)):"image"==d?(pick_items=c&&c.insert_link_button&&c.insert_link_button.pick_items?
c.insert_link_button.pick_items:!c&&e.cID&&e.cType&&m.zenario_wysiwyg_editor&&zenario_wysiwyg_editor.poking?{path:"zenario__content/panels/content/item_buttons/images//"+e.cType+"_"+e.cID+"//",target_path:"zenario__content/panels/inline_images_for_content",min_path:"zenario__content/panels/inline_images_for_content",max_path:"zenario__content/panels/inline_images_for_content",disallow_refiners_looping_on_min_path:!1}:{path:"zenario__content/panels/image_library",target_path:"zenario__content/panels/image_library",
min_path:"zenario__content/panels/image_library",max_path:!1,disallow_refiners_looping_on_min_path:!1},b.organizerSelect("zenarioA","setImageURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,g,pick_items.one_to_one_choose_phrase,g,!0)):"zenario_document"==d&&b.organizerSelect("zenarioA","setDocumentURL",!1,"zenario__content/panels/documents","zenario__content/panels/documents","zenario__content/panels/documents",
"zenario__content/panels/documents",!1,g,g,g,!0,g,g,g,g,g,g,g,g,g,{disabled_if:'item && item.privacy != "public" && item.privacy != "Public"'})};b.setLinkPickerOnTinyMCE=function(){var a=$(".mce-zenario_link_picker input.mce-textbox"),c=$(".mce-zenario_link_picker .mce-open"),d=$(b.microTemplate("zenario_tinymce_link_picker",{urlFieldId:a.attr("id")})),e=a.width(),f=c.width();c.replaceWith(d);c=d.width();a.width(e+f-c);b.tooltips(d.find("button"),{tooltipClass:"zenario_admin_tooltip zenario_admin_tooltip_over_tinymce"})};
b.lastFieldValue="";b.setEditorField=function(a,c,d){c===g&&(c=(b.tinyMCE_win||m).document.getElementById(b.tinyMCE_field));if(d){if(""!==c.value&&c.value!=b.lastFieldValue)return;b.lastFieldValue=a}c.value=a;e.fireChangeEvent(c)};b.setLinkURL=function(a,c,d){c.getItemURL=1;a=e.moduleNonAsyncAJAX("zenario_common_features",c,!0);b.loggedOut(a)||(b.tinyMCE_fromFAB&&(a=x+a),b.setEditorField(d.title,$(".mce-panel input.mce-link_text_to_display")[0],!0),b.setEditorField(a))};b.setDocumentURL=function(a,
c,d){a=d.frontend_link;b.tinyMCE_fromFAB&&(a=x+a);b.setEditorField(d.name,$(".mce-panel input.mce-link_text_to_display")[0]);b.setEditorField(a)};b.setImageURL=function(a,c,d){a="zenario/file.php?c="+d.checksum;c.usage&&"image"!=c.usage&&(a+="&usage="+encodeURIComponent(c.usage));a+="&filename="+encodeURIComponent(d.filename);b.tinyMCE_fromFAB&&(a=x+a);b.setEditorField(d.alt_tag,$(".mce-panel input.mce-image_alt")[0]);b.setEditorField(a)};b.skinDesc=g;b.getSkinDesc=function(){if(b.skinDesc===g){b.skinDesc=
{};var a;e.skinId&&(a=e.moduleNonAsyncAJAX("zenario_common_features",{skinId:e.skinId},!1,!0))&&"object"==typeof a&&(b.skinDesc=a)}return b.skinDesc};b.formatFilesizeNicely=function(a,c){if(0>=a)return"0";var b=Math.min(4,Math.floor(Math.log(a)/Math.log(1024)));c=Math.pow(10,c);return Math.round(c*a/Math.pow(1024,b))/c+n[["_BYTES","_KBYTES","_MBYTES","_GBYTES","_TBYTES"][b]]};b.makeTimeFromParts=function(a,c,b){b==g&&(b="00");return a+":"+c+":"+b};b.showPagePreview=function(a,c){var b=a.custom_width,
e=a.custom_height,f="";if(z.tuix!==g){f=z.tuix.items[c];switch(f.admin_version_status){case "first_draft":case "published_with_draft":case "hidden_with_draft":case "trashed_with_draft":adminVersionStatus="Draft";break;case "published":adminVersionStatus="Published";break;case "hidden":adminVersionStatus="Hidden";break;case "trashed":adminVersionStatus="Trashed"}f=f.tag+" Version "+f.version+" ["+adminVersionStatus+"] "+b+" x "+e+" ("+a.custom_description+")"}else f=a.custom_description;$.colorbox({innerWidth:b+
"px",innerHeight:e+"px",maxWidth:!1,maxHeight:!1,iframe:!0,preloading:!1,open:!0,title:f,href:x+"index.php?cID="+c+"&_sk_preview=1",className:"zenario_page_preview_colorbox"})};b.formatSKItemName=function(a,c){var d=g,h,f;if(a.items&&a.items[c])if(d=D(a.label_format_for_picked_items,a.label_format_for_grid_view))for(var k in a.items[c]){if(e.has(a.items[c],k)&&-1!=d.indexOf("[["+k+"]]"))for(f=a.items[c][k],a.columns&&a.columns[k]&&(a.columns[k].format||a.columns[k].empty_value)&&(f=b.formatSKItemField(f,
a.columns[k]));d!=(h=d.replace("[["+k+"]]",f));)d=h}else d=a.items[c][D(a.default_sort_column,"name")];return d===g?c:d.replace(/\s+/g," ")};b.formatSKItemField=function(a,c){if(c&&c.format){var d=c.format,h="";if(a&&"date"!=d&&"datetime"!=d&&"datetime_with_seconds"!=d&&"remove_zero_padding"!=d){var f=a.indexOf(" ");-1!=f&&(h=a.substr(f),a=a.substr(0,f))}if("true_or_false"==d)a=C(a)?n.tru:n.fal;else if("yes_or_no"==d)a=C(a)?c.yes_phrase!==g?c.yes_phrase:n.yes:c.no_phrase!==g?c.no_phrase:n.no;else if("remove_zero_padding"==
d)a=a.replace(/\b0+/g,"");else if("enum"==d&&c.values&&c.values[a]!==g)"object"==typeof c.values[a]?c.values[a].label!==g&&(a=c.values[a].label):a=c.values[a];else if(("module_name"==d||"module_class_name"==d)&&z.init)a?b.pluginNames[a]&&(a=b.pluginNames[a]):a=n.core;else if("filesize"==d&&a==1*a)a=b.formatFilesizeNicely(a,1);else if(("language_english_name"==d||"language_local_name"==d)&&b.lang[a])a=b.lang[a].name;else if(("language_english_name_with_id"==d||"language_local_name_with_id"==d)&&b.lang[a])a=
b.lang[a].name+" ("+a+")";else if("date"==d||"datetime"==d||"datetime_with_seconds"==d)a=e.formatDate(a,"date"==d?!1:d);a+=h}!a&&c&&c.empty_value&&(a=c.empty_value);return a};b.organizerQuick=function(a,c,d,e,f,k,m,n,r){b.organizerSelect(!1,!1,!1,a,!1,d,e,f,!1,!1,!1,!1,!1,!0,c,m,g,g,g,n,r)};b.getSKBodyClass=function(a){a===g&&(a=m);return"zenario_og "+(a.zenarioONotFull||a.zenarioA.openedInIframe?(a.zenarioOQuickMode?"zenario_organizer_quick":"zenario_organizer_select")+" "+(a.zenarioOOpenOverAdminBox?
"zenario_organizer_over_admin_box":"zenario_organizer_under_admin_box"):"zenario_organizer_full")+" "+(a.zenarioOWrapperCSSClass||"")};b.organizerSelect=function(a,c,d,h,f,k,n,s,v,t,p,l,q,u,w,y,x,A,B,D,E,F){var G=!u||b.isFullOrganizerWindow||b.checkIfBoxIsOpen("og");F||(F={});G?(b.SKInit(),l=r("zenario_sk_iframe").contentWindow,q=!1):l=m;e.closeTooltip();l.zenarioOQueue=[{path:h,branch:-1,selectedItems:{}}];-1===h.indexOf("//")&&(k||(k=h),f||(f=h));n===g?f&&-1===f.indexOf("//")&&(n=f):C(n)||(n=!1);
l.zenarioOTargetPath=f;l.zenarioOMinPath=k;l.zenarioOMaxPath=n;l.zenarioODisallowRefinersLoopingOnMinPath=C(s);l.zenarioOCallbackObject=a;l.zenarioOCallbackFunction=c;l.zenarioOChoosePhrase=t;l.zenarioOChooseButtonActiveClass=v;l.zenarioOChooseMultiplePhrase=p;l.zenarioOMultipleSelect=C(d);l.zenarioOAllowNoSelection=C(A);l.zenarioONoSelectionChoosePhrase=B;l.zenarioONotFull=!0;l.zenarioOQuickMode=u;l.zenarioOSelectMode=!u;l.zenarioOSelectObject=F;l.zenarioOOpeningPath=w;l.zenarioOOpeningInstance=
y;l.zenarioOCombineItem=x;l.zenarioOReloadOnChanges=D;l.zenarioOWrapperCSSClass=E||"";l.zenarioOOpenOverAdminBox=q;l.zenarioOFirstLoad=!0;G||(z.open(b.getSKBodyClass(l),g,0.8*$(m).width(),50,10,!u,!0,!0,{minWidth:550}),z.init());l.zenarioO&&l.zenarioO.go(h,-1);G&&(b.openBox(!1,b.getSKBodyClass(l),"AdminOrganizer",!1,!1,50,2,!u,!0,!1,!1),r("zenario_sk_iframe").style.width=e.browserIsIE(6)?"600px":"96%",u?r("zenario_sk_iframe").style.height="100%":r("zenario_sk_iframe").style.height="96%",r("zenario_sk_iframe").contentWindow.zenarioO&&
(r("zenario_sk_iframe").contentWindow.zenarioO.lastSize=!1),r("zenario_fbAdminOrganizer").style.left="0px")};b.SKInitted=!1;b.SKInit=function(){b.SKInitted||(r("zenario_fbAdminOrganizer").innerHTML='<iframe id="zenario_sk_iframe" src="'+x+"zenario/admin/organizer.php?openedInIframe=1&amp;rand="+(new Date).getTime()+'"></iframe>',b.SKInitted=!0)};b.SKStartInit=function(){if(e.browserIsIE(7))return!1;m.zenario_inIframe||b.openedInIframe||setTimeout(b.SKInit,b.storekeeperInitTime)};b.getCustomFromSK=
function(a,c,d,e,f,g){b.SKTarget=a;b.organizerSelect("zenarioA","setCustom",!1,c,d,e,f,g)};b.setCustom=function(a,c,d){r(b.SKTarget).value=c.id;r("name_for_"+b.SKTarget).value=d[d.__label_tag__]};b.setGroupNameAndId=function(a,c,d){r(b.SKTarget).value=c.id;r("name_for_"+b.SKTarget).value=d.name};b.setUserNameAndId=function(a,c,d){r(b.SKTarget).value=c.id;r("name_for_"+b.SKTarget).value=d.username};b.setContentIdAndCType=function(a,c,d,e){r(b.SKTarget).value=c.id;r("name_for_"+b.SKTarget).value=b.formatSKItemName(e,
c.id)};b.removeNameAndId=function(a){r(a).value="";r("name_for_"+a).value=r("nothing_selected_phrase_for_"+a).value};b.multipleLanguagesEnabled=function(){var a,c=0;if(b.lang)for(a in b.lang)if(e.has(b.lang,a)&&b.lang[a].enabled&&c++)return!0;return!1};b.uploading=!1;b.canDoHTML5Upload=function(){return m.FileReader};b.clearHTML5UploadFromDragDrop=function(){delete b.uploadPathFromDragDrop;delete b.uploadRequestFromDragDrop;delete b.uploadCallBackFromDragDrop};b.setHTML5UploadFromDragDrop=function(a,
c,d,e,f){return b.canDoHTML5Upload()?(b.uploadPathFromDragDrop=a,b.uploadRequestFromDragDrop=c,b.uploadCallBackFromDragDrop=e,D(f,B.body).addEventListener("drop",function(a){d&&d();b.doHTML5UploadFromDragDrop(a)},!1),!0):!1};b.doHTML5UploadFromDragDrop=function(a){b.stopFileDragDrop(a);b.doHTML5Upload(a.target.files||a.dataTransfer.files,b.uploadPathFromDragDrop,b.uploadRequestFromDragDrop,b.uploadCallBackFromDragDrop)};b.doHTML5Upload=function(a,c,d,e){c&&d&&!b.uploading&&(b.uploadPath=c,b.uploadRequest=
d,b.uploadCallBack=e,b.uploadResponses=[],b.uploadFile=-1,b.uploadFiles=a,b.doNextUpload())};b.doNextUpload=function(){var a=$("#zenario_progress_wrap"),c=$("#zenario_progress_name"),d=$("#zenario_progress_stop");c.text("");d.unbind("click");b.uploading=!!b.uploadFiles[++b.uploadFile];z.init&&z.setWrapperClass("uploading",b.uploading);if(b.uploading)if(a.show().removeClass("zenario_progress_cancelled"),r("zenario_progressbar").style.width="0%",b.uploadFiles[b.uploadFile].size&&b.uploadFiles[b.uploadFile].name)if(b.uploadFiles[b.uploadFile].size>
b.maxUpload)b.showMessage(n.uploadTooLarge.replace("[[maxUploadF]]",b.maxUploadF),!0,"error"),b.doNextUpload();else{c.text(b.uploadFiles[b.uploadFile].name);b.uploader=new XMLHttpRequest;b.uploader.open("POST",b.uploadPath,!0);try{b.uploader.setRequestHeader("X_FILENAME",b.uploadFiles[b.uploadFile].name)}catch(h){}var c=new FormData,f;for(f in b.uploadRequest)e.has(b.uploadRequest,f)&&c.append(f,""+b.uploadRequest[f]);c.append("Filedata",b.uploadFiles[b.uploadFile]);b.uploader.upload.addEventListener("progress",
b.uploadProgress,!1);b.uploader.addEventListener("load",b.uploadDone,!1);b.uploader.addEventListener("error",b.uploadDone,!1);b.uploader.addEventListener("abort",b.uploadDone,!1);d.click(function(){a.show().removeClass("zenario_progress_cancelled");b.uploader.abort()});b.uploader.send(c)}else b.doNextUpload();else a.hide(),b.uploadCallBack&&b.uploadCallBack(b.uploadResponses)};b.uploadProgress=function(a){var c=0;a.lengthComputable&&(c=100*a.loaded/a.total);r("zenario_progress_wrap").style.display=
"block";r("zenario_progressbar").style.width=c+"%"};b.uploadDone=function(a){if(b.uploader.responseText&&1!=b.uploader.responseText)try{data=JSON.parse(b.uploader.responseText);if("object"!=typeof data)throw 0;b.uploadResponses.push(data)}catch(c){b.showMessage(b.uploader.responseText,!0,"error",!1,!0)}b.doNextUpload()};b.debug=function(a,c){m.open(x+"zenario/admin/dev_tools/dev_tools.php?mode="+encodeURIComponent(a)+(c?"&skMap=1":""));return!1};b.openProfile=function(){w.open("zenario_admin",{id:e.adminId},
g,g,function(){B.location=B.location})};b.openMenuAdminBox=function(a,c){a||(a={});if(!c){if("preview"==b.pageMode)return!0;if("menu"!=b.pageMode||!b.menuWandOn)return!1}e.cID&&(a.cID=e.cID,a.cType=e.cType,a.languageId=e.langId);if(a.id){var d=e.moduleNonAsyncAJAX("zenario_common_features",{getMenuItemStorekeeperDeepLink:a.id,languageId:a.languageId},!0);if(b.loggedOut(d))return;A.action({organizer_quick:{path:d,target_path:"zenario__menu/panels/menu_nodes",min_path:"zenario__menu/panels/menu_nodes",
max_path:"zenario__menu/panels/menu_nodes",disallow_refiners_looping_on_min_path:!1,reload_menu_slots:!0,reload_admin_toolbar:!0}})}else w.open("zenario_menu",a);return!1};b.draft=function(a,c,d,e){if(b.draftDoingCallback)return delete b.draftDoingCallback,!0;delete b.draftDoingCallback;var f;return A.tuix&&A.tuix.sections&&A.tuix.sections.edit&&A.tuix.sections.edit.buttons&&A.tuix.sections.edit.buttons.start_editing&&A.tuix.sections.edit.buttons.start_editing.ajax&&!b.hidden(A.tuix.sections.edit.buttons.start_editing)?
(f=$.extend(!0,{},A.tuix.sections.edit.buttons.start_editing),delete f.ajax.request.switch_to_edit_mode,A.tuix.sections.edit.buttons.start_editing.ajax.confirm?(d?d+="\n\n"+f.ajax.confirm.message__editing_published:(d=f.ajax.confirm.message__editing_published,e=f.ajax.confirm.button_message),e='<input type="button" class="submit_selected" value="'+v(e)+'" onclick="zenarioA.draftSetCallback(\''+v(a)+"'); zenarioAT.action2();\"/>",c&&(e+='<input type="button" class="submit" value="'+v(f.ajax.confirm.button_message__just_view)+
'" onclick="zenarioA.draftDoCallback(\''+v(a)+"');\"/>"),e+='<input type="button" class="submit" value="'+v(f.ajax.confirm.cancel_button_message)+'"/>',f.ajax.confirm.message="\x3c!--Button_HTML:"+e+"--\x3e"+d):d?(b.draftSetCallback(a),f.ajax.confirm={message:d,button_message:e,cancel_button_message:b.phrase.cancel,message_type:"warning"}):(b.draftSetCallback(a),delete f.ajax.confirm),b.action(A,f),!1):d?(e='<input type="button" class="submit_selected" value="'+v(e)+'" onclick="zenarioA.draftDoCallback(\''+
v(a)+"');\"/>",e+='<input type="button" class="submit" value="'+b.phrase.cancel+'"/>',b.showMessage(d,e,"warning"),!1):!0};b.savePageMode=function(a,c){c||(c={});c._save_page_mode=b.pageMode;c._save_page_toolbar=b.toolbar;c._save_page_slot_wand=b.slotWandOn?1:"";c._save_page_show_grid=b.showGridOn?1:"";$.ajax({type:"POST",url:x+"zenario/admin/quick_ajax.php",data:c,async:a})};b.draftSetCallback=function(a){b.savePageMode(!1,{_draft_set_callback:a})};b.draftDoCallback=function(a){b.draftDoingCallback=
!0;$("#"+a).click();delete b.draftDoingCallback};b.hidden=function(a,c,d,e){var f;return C(a.hidden)||c&&a.call_js_function&&!b.checkFunctionExists(a.call_js_function["function"],a.call_js_function.encapsulated_object)||(f=a.visible_if||a.js_condition)&&!b.eval(f,a,d,e)?!0:!1};b.lastToast=!1;b.clearLastToast=!1;b.toast=function(a){if(a!==g&&_.isObject(a)){b.clearLastToast&&clearTimeout(b.clearLastToast);b.lastToast=JSON.stringify(a);setTimeout(function(){b.lastToast=!1},6E4);var c=a.message_type,
d=toastr.info;switch(a.message_type){case "error":case "warning":case "success":d=toastr[c]}d(a.message,a.title,a.options)}};b.rememberToast=function(){b.lastToast&&e.nonAsyncAJAX(x+"zenario/admin/quick_ajax.php",{_remember_toast:b.lastToast})};b.checkActionUnique=function(a){var c=[],b,h="admin_box ajax call_js_function combine_items navigation_path frontend_link help link panel pick_items popout organizer_quick upload".split(" ");for(b in h)e.has(h,b)&&a[h[b]]&&c.push(h[b]);switch(c.length){case 1:return!0;
case 0:return!1;default:return console.log(a),alert("This navigation or button has multiple actions associated with it:\n\n"+c+"\n\n(See the console log for the faulty definition.)"),!1}};b.action=function(a,c,d,h,f,k,r){if(a.uploading||!f&&!b.checkActionUnique(c))return!1;var s;s="zenarioO"==a.encapName?"handleOrganizerPanelAJAX":"zenarioAT"==a.encapName?"handleAdminToolbarAJAX":"zenarioW"==a.encapName?"handleWizardAJAX":"handleAdminBoxAJAX";!f&&c.link?f=c.link:!f&&c.panel&&c.panel._path_here&&(f=
{path:c.panel._path_here});if(!f||!z.pathNotAllowed(f)){z.yourWorkInProgressLastUpdated=0;a.pickItemsItemLevel=d;a.postPickItemsObject=!1;var A,t,p;if((p=c.upload)||(p=c.ajax))c.ajax&&c.ajax.pass_matched_ids&&"zenarioO"==a.encapName?(A="zenario/admin/ajax.php?__pluginClassName__="+p.class_name+"&path="+a.path+"&_get_ids_for_ajax_request=1&method_call="+s+e.urlRequest(z.lastRequests),t={}):(A="zenario/ajax.php?__pluginClassName__="+p.class_name+"&__path__="+a.path+"&method_call="+s,t=a.getKey(d)),
p.request&&$.extend(t,p.request),k&&$.extend(t,k);if(c.upload)if(p=!b.canDoHTML5Upload(),k='<input type="file" name="Filedata"',c.upload.accept?k+=' accept="'+v(c.upload.accept)+'"':"Images"==c.upload.fileDesc&&(k+=' accept="image/*"'),p&&(k+=' id="zenario_fallback_fileupload"'),!p&&C(c.upload.multi)&&(k+=" multiple"),k+="/>",p)c=$.extend(!0,{},c),t._html5_backwards_compatibility_hack=1,c.ajax={class_name:c.upload.class_name,confirm:{message:k,html:!0,button_message:n.upload,cancel_button_message:n.cancel,
form:!0},request:t};else{c=$(k);c.change(function(){a.uploadStart&&a.uploadStart();b.doHTML5Upload(this.files,x+A,t,function(b){a.uploadComplete(b)})});c.click();return}if(c.call_js_function)if(c.call_js_function.encapsulated_object)m[c.call_js_function.encapsulated_object][c.call_js_function["function"]](c,a.getKeyId());else m[c.call_js_function["function"]](c,a.getKeyId());else if(f)C(f.unselect_items)&&(z.selectedItems={},z.saveSelection()),z.go(f.path,h,f.refiner?{id:d?z.getKeyId():"",name:f.refiner}:
g,g,g,g,g,r);else if(c.frontend_link){var l,q;c=c.frontend_link;var u=!1;d&&(l=a.getKeyId(!0))&&(q=a.tuix.items[l])&&q.frontend_link&&(c=q.frontend_link);"zenarioO"==a.encapName&&(c=z.parseReturnLink(c),-1!=c.indexOf("&zenario_sk_return=")&&(u=!0));u||"zenario/admin/welcome.php"==c.substr(0,25)?e.goToURL(e.addBasePath(c)):-1!==c.indexOf("://")&&0!==c.indexOf(x)?m.open(c):"zenarioAT"==a.encapName?e.goToURL(e.addBasePath(c)):E&&!E.zenarioO?m.opener.location=e.addBasePath(c):m.storekeeperChildWindow&&
!m.storekeeperChildWindow.closed?m.storekeeperChildWindow.location=e.addBasePath(c):m.storekeeperChildWindow=m.open(e.addBasePath(c))}else if(c.navigation_path)c=c.navigation_path,d&&(l=a.getKeyId(!0))&&(q=a.tuix.items[l])&&q.navigation_path&&(c=q.navigation_path),"zenarioO"==a.encapName?z.go(c,-1):e.goToURL(e.addBasePath((m.zenarioATLinks&&m.zenarioATLinks.organizer||"zenario/admin/organizer.php")+"#"+c));else if(c.admin_box){b.nowDoingSomething("loading");d=D(a.getKey(d),{});if(c.admin_box.key)for(u in c.admin_box.key)e.has(c.admin_box.key,
u)&&(d[u]=c.admin_box.key[u]);w.open(c.admin_box.path,d,c.admin_box.tab,c.admin_box.values)}else if(c.popout){c=$.extend(!0,{},c.popout);d&&(l=a.getKeyId(!0))&&(q=a.tuix.items[l])&&(q.popout&&(c=$.extend(c,q.popout)),!c.title&&a.popoutLabelFormat&&(c.title=a.applyMergeFields(a.popoutLabelFormat,!1,l)));q&&q.href&&c.href===g?c.href=q.href:q&&q.frontend_link&&c.href===g?c.href=z.parseReturnLink(q.frontend_link,"_sk_preview=1"):q&&c.href&&(c.href+=-1===c.href.indexOf("?")?"?":"&",q.checksum?(c.href+=
"c="+encodeURIComponent(q.checksum),l==1*l&&(c.href+="&id="+l)):c.href=l==1*l?c.href+("id="+l):c.href+("c="+encodeURIComponent(l)),d=D(a.getKey().usage,q.usage))&&(c.href+="&usage="+encodeURIComponent(d));if(c.href){if(d=q&&q.filename||c.options&&c.options.filename||c.filename){if(l=d.match(/(.*) \[.*\]/))d=l[1];c.href+="&filename="+encodeURIComponent(d)}c.href=e.addBasePath(c.href)}q&&q.width&&(c.initialWidth=q.width);q&&q.height&&(c.initialHeight=q.height);if(c.css_class){var B=(""+c.css_class).split(" ");
c.onOpen=function(){e.addClassesToColorbox(B)};c.onClosed=function(){e.removeClassesToColorbox(B)}}c.iframe&&c.width===g&&(c.width=Math.min(Math.floor(0.93*$(m).width()),1200));c.iframe&&c.height===g&&(c.height=Math.floor(0.9*$(m).height()));c.preloading===g&&(c.preloading=!1);$.colorbox(c)}else if(c.organizer_quick)q=c.organizer_quick.path,d&&(l=a.getKeyId(!0))&&(q=q.replace(/\[\[id\]\]/g,l)),b.organizerQuick(q,c.organizer_quick.min_path||c.organizer_quick.max_path||c.organizer_quick.path,c.organizer_quick.min_path,
c.organizer_quick.max_path,C(c.organizer_quick.disallow_refiners_looping_on_min_path),g,g,a.encapName);else if(c.pick_items&&!d)c.pick_items.ajax&&(a.postPickItemsObject=c.pick_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+c.pick_items.class_name+"&__path__="+a.path+"&method_call="+s,a.actionRequests=a.getKey(d),c.pick_items.request&&$.extend(a.actionRequests,c.pick_items.request),b.organizerSelect(a.encapName,"pickItems",c.pick_items.multiple_select,c.pick_items.path,c.pick_items.target_path,
c.pick_items.min_path,c.pick_items.max_path,c.pick_items.disallow_refiners_looping_on_min_path,!0,c.pick_items.one_to_one_choose_phrase,c.pick_items.one_to_many_choose_phrase,g,g,g,g,g,a.getLastKeyId(!0),c.pick_items.allow_no_selection,c.pick_items.one_to_no_selection_choose_phrase,g,g,c.pick_items);else if(c.combine_items&&d)c.combine_items.ajax&&(a.postPickItemsObject=c.combine_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+c.combine_items.class_name+"&__path__="+a.path+"&method_call="+
s,a.actionRequests=a.getKey(d),c.combine_items.request&&$.extend(a.actionRequests,c.combine_items.request),b.organizerSelect(a.encapName,"pickItems",c.combine_items.multiple_select,c.combine_items.path,c.combine_items.target_path,c.combine_items.min_path,c.combine_items.max_path,c.combine_items.disallow_refiners_looping_on_min_path,!0,1<a.itemsSelected&&c.combine_items.many_to_one_choose_phrase?c.combine_items.many_to_one_choose_phrase:c.combine_items.one_to_one_choose_phrase,1<a.itemsSelected&&c.combine_items.many_to_many_choose_phrase?
c.combine_items.many_to_many_choose_phrase:c.combine_items.one_to_many_choose_phrase,g,g,g,g,g,a.getKeyId(!1),c.combine_items.allow_no_selection,1<a.itemsSelected&&c.combine_items.many_to_no_selection_choose_phrase?c.combine_items.many_to_no_selection_choose_phrase:c.combine_items.one_to_no_selection_choose_phrase,g,g,c.combine_items);else if(c.ajax)if(a.actionTarget=A,a.actionRequests=t,c.ajax.confirm){q=C(c.ajax.confirm.html);l=C(c.ajax.confirm.download);var y;if(c.upload)y=c.ajax.confirm.message;
else if(d&&1<a.itemsSelected){if(y=c.ajax.confirm.multiple_select_message||c.ajax.confirm.message)y=(""+y).replace(/\[\[item_count\]\]/ig,a.itemsSelected)}else c.ajax.confirm.message&&(y=a.applyMergeFields(c.ajax.confirm.message,q));y||(y=e.nonAsyncAJAX(x+a.actionTarget+e.urlRequest(a.actionRequests),!1));l&&(a.actionRequests._download=1,a.searchTerm!==g&&(a.actionRequests._search=a.searchTerm),a.prefs[a.path]&&a.prefs[a.path].sortBy?(a.actionRequests._sort_col=a.prefs[a.path].sortBy,a.actionRequests._sort_desc=
a.prefs[a.path].sortDesc?1:0):a.actionRequests._sort_col=a.labelTag);d=k="";if(l||c.upload){k+='<form id="jqmodal_form" action="'+v(x+a.actionTarget+"&_sk_form_submission=1")+'" onsubmit="get(\'preloader_circle\').style.visibility = \'visible\';" target="zenario_iframe" method="post"'+(c.upload?' enctype="multipart/form-data"':"")+">";for(u in a.actionRequests)e.has(a.actionRequests,u)&&(k+='<input type="hidden" value="'+v(a.actionRequests[u])+'" name="'+v(u)+'"/>');q||(y=v(y,!0),q=!0)}k+=y;l||c.upload?
(k+="</form>",d='<input type="button" class="submit_selected" value="'+v(c.ajax.confirm.button_message)+'" onclick="get(\'jqmodal_form\').submit();"/>'):d='<input type="button" class="submit_selected" value="'+v(c.ajax.confirm.button_message)+'" onclick="'+a.encapName+'.action2();"/>';d+='<input type="button" class="submit" value="'+v(c.ajax.confirm.cancel_button_message)+'"/>';b.showMessage(k,d,c.ajax.confirm.message_type,g,!q);c.upload&&(e.browserIsIE()||$("#zenario_fallback_fileupload").click())}else a.action2();
else c.help&&(d=D(c.help.message_type,"question"),q=!C(c.help.html),c.help.message&&b.showMessage(c.help.message,!0,d,!1,q))}};b.isHtaccessWorking=function(){return"Yes it is"==e.nonAsyncAJAX(x+"zenario/includes/test_files/is_htaccess_working.css",!0)};b.checkFunctionExists=function(a,b){return b?m[b]&&"function"==typeof m[b][a]:"function"==typeof m[a]};b.resizeImage=function(a,b,d,e,f,g){f.width=a;f.height=b;a*=1;b*=1;if(a!=d||b!=e)!g&&a<=d&&b<=e||(d/a<e/b?(f.width=d,f.height=Math.floor(b*d/a)):
(f.height=e,f.width=Math.floor(a*e/b)))};b.sortArray=function(a,c){return b.sortLogic(a,c,1)};b.sortArrayByOrd=function(a,c){return b.sortLogic(a,c,"ord")};b.sortArrayByOrdinal=function(a,c){return b.sortLogic(a,c,"ordinal")};b.sortLogic=function(a,b,d){if(a[d]===b[d])return 0;var e=a[d]==1*a[d],f=b[d]==1*b[d];return e&&f?1*a[d]<1*b[d]?-1:1:e||f?e?-1:1:(""+a[d]).toUpperCase()<(""+b[d]).toUpperCase()?-1:1};b.readData=function(a,c,d,h){try{if(a=JSON.parse(a),"object"!=typeof a)throw 0;}catch(f){return h?
(c='<input id="zenario_retry" class="submit_selected" type="button" value="'+n.retry+'"/>',b.nowDoingSomething(),b.showMessage(a,c,"error",!0,!0),$("#zenario_retry").click(function(){setTimeout(h,1)})):b.showMessage(a,!0,"error",!1,!0),b.hideAJAXLoader(),!1}c&&e.setSessionStorage(a,c,d,!0);return a};b.AJAXErrorHandler=function(a,c,d){if(!b.unloaded){var h="",f=b.adminSettings.show_dev_tools;d&&(h+="<h1><b>"+v(a.status+" "+d)+"</b></h1>");if(404==a.status)h+="<p>"+(f?n.error404Dev:n.error404)+"</p>";
else if(500==a.status)h+="<p>"+(f?n.error500Dev:n.error500)+"</p>";else if(0==a.status||"timeout"==c)h+="<p>"+(f?n.errorTimedOutDev:n.errorTimedOut)+"</p>";a.responseText&&(h+="<div>"+a.responseText+"</div>");h+='<p style="display: none;">Last URL accessed: '+v(e.checkLastUrl)+"</p>";showErrorMessage=function(){if(a.zenario_retry){var c='<input id="zenario_retry" class="submit_selected" type="button" value="'+n.retry+'"/>';b.nowDoingSomething();b.showMessage(h,c,"error",!0);$("#zenario_retry").click(function(){setTimeout(a.zenario_retry,
1)})}else b.showMessage(h,"","error")};0==a.status||"timeout"==c?setTimeout(showErrorMessage,750):showErrorMessage()}};$.ajaxSetup({error:b.AJAXErrorHandler});b.attempts={};b.attemptNum=0;b.keepTrying=function(a,c){if(c===g)c=++b.attemptNum,b.attempts[c]=!0;else if(!b.attempts[c])return;a(c);setTimeout(function(){b.keepTrying(a,c)},3E4)};b.stopTrying=function(a){return b.attempts[a]?(delete b.attempts[a],!0):!1};b.onunload=function(a){m.onpagehide&&a.persisted||(b.unloaded=!0,b.closeFloatingBox())};
m.onpagehide?m.addEventListener("pagehide",b.onunload,!1):m.onunload=b.onunload;b.stopDefault=function(a){(a=a||event)&&a.stopPropagation&&a.stopPropagation();a&&a.preventDefault&&a.preventDefault();return!1};b.stopFileDragDrop=function(a){var b=!1;a.dataTransfer&&a.dataTransfer.types&&(b="function"==typeof a.dataTransfer.types.contains?a.dataTransfer.types.contains("Files"):"Files"==""+a.dataTransfer.types||a.dataTransfer.types[0]&&"Files"==""+a.dataTransfer.types[0]);b&&(a.stopPropagation(),a.preventDefault())};
b.disableFileDragDrop=function(a){b.canDoHTML5Upload()&&(a.addEventListener("drop",b.stopDefault,!1),a.addEventListener("dragenter",b.stopDefault,!1),a.addEventListener("dragover",b.stopDefault,!1),a.addEventListener("dragexit",b.stopDefault,!1))};b.checkCookiesEnabled=function(){var a=x+"zenario/admin/quick_ajax.php?_check_cookies_enabled=1&no_cache=1",b=new e.callback;e.ajax(a).after(function(d){d?b.call(d):e.ajax(a).after(function(a){b.call(a)})});return b};$(B).ready(function(){b.disableFileDragDrop(B.body)});
m.onbeforeunload=b.onbeforeunload});

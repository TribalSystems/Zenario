zenario.lib(function(f,y,A,r,H,L,e,c,z,C,m,v,B,x,E,M,l,N,O,t){c.init=!0;c.menuWandOn=!0;c.slotWandOn=!1;c.showGridOn=!1;c.storekeeperInitTime=5E3;c.adminSettings={};c.tooltipLengthThresholds={adminBoxTitle:120,adminToolbarTitle:60,organizerBackButton:70,organizerPanelTitle:100};c.microTemplate=function(a,b,d){return e.microTemplate(a,b,d,c.microTemplates)};c.showAJAXLoader=function(){$(A.body).addClass("zenario_adminAJAXLoaderOpen");c.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",
!1,!1,50,1,!0,!0,!1,!1)};c.hideAJAXLoader=function(){$(A.body).removeClass("zenario_adminAJAXLoaderOpen");c.closeBox("AdminAJAXLoader",!1)};c.nowDoingSomething=function(a,b){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();var c=$("#zenario_now_installing");c.length&&c.clearQueue().hide();a&&(b?$("#zenario_now_"+a).fadeIn(1E3):$("#zenario_now_"+a).delay(900).fadeIn(2E3))};c.infoBox=function(){var a=y+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+
e.urlRequest({infoBox:1});c.showAJAXLoader();e.ajax(a,!1,!0,!1).after(function(a){c.hideAJAXLoader();c.openBox(c.microTemplate("zenario_info_box",a),"zenario_fbAdminInfoBox","AdminInfoBox",f,405,f,f,!1,!0,".zenario_infoBoxHead",!1)})};c.closeInfoBox=function(){c.closeBox("AdminInfoBox")};c.showMessage=function(a,b,d,h,k){var g=!1,D=!1;a=a?""+a:c.adminSettings.show_dev_tools?l.errorTimedOutDev:l.errorTimedOut;b===f&&(b=!0);d===f&&(d="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),
d=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),d="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=a.substr(27),d="success"):"\x3c!--Message_Type:Warning--\x3e"==a.substr(0,27)?(a=a.substr(27),d="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),d="question");if(("\x3c!--Reload_Organizer--\x3e"==a.substr(0,23)||"\x3c!--Reload_Storekeeper--\x3e"==a.substr(0,25))&&m.init&&!r.zenarioOQuickMode&&!r.zenarioOSelectMode)return(a=a.substr(25))&&
alert(a),c.rememberToast(),c.uploading=!1,m.setWrapperClass("uploading",c.uploading),m.reloadPage(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!m.init||r.zenarioOQuickMode||r.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==a.substr(0,28)&&-1!=(g=a.indexOf("--\x3e"))?(m.go(a.substr(28,g-28),-1),a=a.substr(g+3),D=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(g=a.indexOf("--\x3e"))?(z.open(a.substr(19,g-19)),a=a.substr(g+3),D=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(g=a.indexOf("--\x3e"))&&
(c.rememberToast(),e.goToURL(e.addBasePath(a.substr(14,g-14)),!0),a=a.substr(g+3),D=!0):(m.reload(),a=a.substr(26),D=!0);if(D&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,12)&&(a=a.substr(12),h=!0);if("\x3c!--Button_HTML:"==a.substr(0,16)&&-1!=(g=a.indexOf("--\x3e")))b=a.substr(16,g-16),a=a.substr(g+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(g=a.indexOf("--\x3e")))b='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+
a.substr(18,g-18)+'">',a=a.substr(g+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(c.loggedOutIframeCheck(a,d))return;b=m.init&&m.path&&c.isFullOrganizerWindow?'<input type="button" value="'+l.login+'" class="submit_selected" onclick="zenarioO.reloadPage(undefined, true);"><input type="button" class="submit" value="'+l.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+l.login+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests, true));"><input type="button" class="submit" value="'+
l.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests));"/>';a=a.substr(17);h=!0}if("error"==d&&-1!=(g=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(g)))throw 0;a=a.substr(0,g)}catch(s){}c.floatingBox(a,b,d,h,k);return!0};c.notification=function(a){v("zenario_notification").style.display="";v("zenario_notification").innerHTML="<div><h1>"+e.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",
duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){v("zenario_notification").style.display="none"}})};c.showHelp=function(a){var b=introJs(),d=$("#zenario_fbog");a=$(a);var h=[],e;d.addClass("zenario_introjs_fixPosition");a.each(function(a,b){e=$(b).data();e.element=b;h.push(e)});h.sort(function(a,b){return a.step==b.step?0:a.step<b.step?-1:1});b.setOptions({steps:h,nextLabel:c.phrase.next,prevLabel:c.phrase.prev});b.start();b.onexit(function(){d.removeClass("zenario_introjs_fixPosition")})};
c.showTutorial=function(a,b){!a&&m.currentTopLevelPath&&(a=m.currentTopLevelPath.substr(0,m.currentTopLevelPath.indexOf("/")));var d={},h={videos:[],show_help_tour_next_time:c.show_help_tour_next_time,auto:b},e,g;for(e in m.map)t(m.map,e)&&(g=m.map[e])&&g.youtube_video_id&&(d[e]={id:g.youtube_video_id,title:g.youtube_thumbnail_title});var D=0;a&&d[a]&&(h.main_video_id=d[a].id,h.main_video_title=d[a].title,d[a].index=D++,d[a].selected=!0,h.videos.push(d[a]),delete d[a]);for(e in d)t(d,e)&&(g=d[e],
g.index=D++,h.videos.push(g));if(!0!=b||h.main_video_id!=f)d=c.microTemplate("zenario_tutorial",h),$.colorbox({width:964,height:791,innerHeight:696,maxHeight:"95%",html:d,className:"zenario_tutorial_cbox",overlayClose:!1,escKey:!1,onComplete:function(){0<h.videos.length&&c.initTutorialSlideshow()}})};c.initTutorialSlideshow=function(){(new $JssorSlider$("zenario_tutorial_other_videos",{$FillMode:1,$SlideDuration:300,$MinDragOffsetToSlide:20,$SlideWidth:200,$SlideHeight:150,$SlideSpacing:75,$DisplayPieces:3,
$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1})).$On($JssorSlider$.$EVT_CLICK,function(a,b){$video=$("#zenario_tutorial_other_video_"+a);c.clickOtherTutorialVideo($video.data("id"),$video.data("title"),a)})};c.clickOtherTutorialVideo=function(a,b,d){a=c.microTemplate("zenario_tutorial_main_video",{main_video_id:a});$("#zenario_tutorial_video_banner").html(b);$("#zenario_tutorial_main_video").html(a);$("#zenario_tutorial_other_videos_slideshow div.video").removeClass("selected");
$("#zenario_tutorial_other_video_"+d).addClass("selected")};c.toggleShowHelpTourNextTime=function(){var a=$("#zenario_show_help_tour_next_time").prop("checked")?1:0;e.ajax(y+"zenario/admin/quick_ajax.php?_show_help_tour_next_time="+a)};c.getSKItem=c.getItemFromOrganizer=function(a,b,c){var h,k=!1;a=y+"zenario/admin/organizer.ajax.php?_start=0&_get_item_name=1&path="+encodeURIComponent(a);if(b!==f)if(a+="&_item=","object"==typeof b)for(h in b)t(b,h)&&(k?k=!1:a+=",",a+=encodeURIComponent(b[h]));else a+=
encodeURIComponent(b)+"&_limit=1";if(c)return e.ajax(a,{},!0,!1);(b=e.checkSessionStorage(a,{},!0))||(b=e.nonAsyncAJAX(a,!1,!0),e.setSessionStorage(b,a,{},!0));return b};c.lookupFileDetails=function(a){var b=y+"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=e.checkSessionStorage(b,"",!0))||(a=e.nonAsyncAJAX(b,!1,!0),e.setSessionStorage(a,b,"",!0));return a};c.toggleSlotWand=function(){c.checkForEdits()&&(c.slotWandOn=!c.slotWandOn,C.clickTab(c.toolbar))};c.toggleShowGrid=
function(){c.checkForEdits()&&(c.showGridOn=!c.showGridOn,C.clickTab(c.toolbar))};c.checkSpecificPerms=function(a){if(!c.adminHasSpecificPerms)return!0;var b,d=a.split(",");for(b in d)if(t(d,b)&&(a=d[b],!(m.tuix&&m.tuix.items&&m.tuix.items[a]&&m.tuix.items[a]._specific_perms)))return!1;return!0};c.checkSpecificPermsOnThisPage=function(){return!c.adminHasSpecificPerms||c.adminHasSpecificPermsOnThisPage};c.slotParentMouseOverLastId=!1;c.slotParentMouseOver=function(a){c.slotControlHide&&clearTimeout(c.slotControlHide);
$(".zenario_slotParent").removeClass("zenario_slotParent");a?("zenario_slotControlsWrap"!=this.className?(a=$(this).attr("id").replace("-control_box",""),$(this).parent().addClass("zenario_slotParent")):(a="plgslt_"+(this.id+"").replace("zenario_fbAdminPluginOptionsWrap-",""),$("#"+a).parent().addClass("zenario_slotParent")),c.slotParentMouseOverLastId&&c.slotParentMouseOverLastId!=a&&c.closeSlotControls(),c.slotParentMouseOverLastId=a):(c.closeSlotControls(),c.slotParentMouseOverLastId=!1)};c.slotParentMouseOut=
function(a){c.slotControlHide&&clearTimeout(c.slotControlHide);c.slotControlHide=setTimeout(c.slotParentMouseOver,c.slotControlHoverInterval)};c.setSlotParents=function(){$(".zenario_slotAdminControlBox").parent().children().mouseenter(c.slotParentMouseOver);$(".zenario_slotAdminControlBox").parent().children().mouseleave(c.slotParentMouseOut);$("#zenario_afb_container .zenario_slotControlsWrap").mouseenter(c.slotParentMouseOver);$("#zenario_afb_container .zenario_slotControlsWrap").mouseleave(c.slotParentMouseOut)};
c.slotControlHide=!1;c.slotControlHoverInterval=1500;c.slotControlCloseInterval=100;$(A).ready(c.setSlotParents);c.getGridSlotDetails=function(a){a=$("."+a+".span.slot");var b={container:!1,cssClass:!1,columns:!1,width:!1,widthInfo:!1};if(a.length){b.cssClass=a.attr("class");b.cssClass=b.cssClass.replace(" alpha "," ").replace(" omega "," ");var c=!1,h="",e=a.width(),g,f=(a.attr("class")||"").match(/\bspan\d+\b/);f&&(f=1*f[0].match(/\d+/));try{var s;a:for(s in A.styleSheets)if(t(A.styleSheets,s)){var r=
A.styleSheets[s],m=r.rules||r.cssRules,p;for(p in m)if(t(m,p)){var n=m[p];if(n.selectorText&&n.style.width&&(""+n.selectorText).match(/\.span/)&&a.is(n.selectorText)){h=n.style.width;break a}}}}catch(v){h=""}h?h.match(/\d+px/)||(c=!0):h=e+"px";c&&(h+=" ("+e+" px "+l.atCurrentSize+")");f&&(h=1==f?"1 column, "+h:f+" columns, "+h);b.widthInfo=h;b.pxWidth=e;b.columns=f;(g=a.closest("div.container"))&&(g=g.attr("class"))&&(g=g.match(/container_(\d+)/))&&g[1]&&(b.container=1*g[1])}return b};c.openSlotControlsBox=
!1;c.openSlotControls=function(a,b,d){var h=$("#zenario_fbAdminSlotControls-"+d).is(":visible");a.blur();c.closeSlotControls();if(!h&&c.checkForEdits()){var e,g={info:!1,notes:!1,actions:!1,overridden_info:!1,overridden_actions:!1},h=c.getGridSlotDetails(d);a=-1==v("zenario_fbAdminSlotControls-"+d).innerHTML.indexOf("zenario_long_option")?255:280;var D=-a+34;c.openBox(f,v("plgslt_"+d+"-wrap").className+" zenario_fbAdminSlotControls",c.openSlotControlsBox="AdminSlotControls-"+d,b,a,D,32,!1,!1,!1,!1);
for(e in g)t(g,e)&&($("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+e).show(),$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+e+" .zenario_sc:visible").each(function(a,b){g[e]=!0}),g[e]||$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+e).hide());h.cssClass?(h.cssClass=h.cssClass.replace(/\bspan\d*_?\d*\s/g,""),$("#zenario_slot_control__"+d+"__info__grid_css_class").show(),$("#zenario_slot_control__"+d+"__info__grid_css_class > span").text(h.cssClass)):
$("#zenario_slot_control__"+d+"__info__grid_css_class").hide();h.widthInfo?($("#zenario_slot_control__"+d+"__info__grid_width").show(),$("#zenario_slot_control__"+d+"__info__grid_width > span").text(h.widthInfo)):$("#zenario_slot_control__"+d+"__info__grid_width").hide();$("#plgslt_"+d+"-control_box").addClass("zenario_adminSlotControlsOpen")}return!1};c.dontCloseSlotControls=function(){c.slotControlClose&&clearTimeout(c.slotControlClose)};c.closeSlotControlsAfterDelay=function(){c.dontCloseSlotControls();
c.slotControlClose=setTimeout(c.closeSlotControls,c.slotControlCloseInterval)};c.closeSlotControls=function(){c.dontCloseSlotControls();c.openSlotControlsBox&&(c.closeBox(c.openSlotControlsBox,!0,{effect:"fade",duration:200}),$(".zenario_slotAdminControlBox").removeClass("zenario_adminSlotControlsOpen"))};c.pickNewPluginSlotName=!1;c.pickNewPlugin=function(a,b,d,h){a.blur();c.pickNewPluginSlotName=b;c.pickNewPluginLevel=d;a="zenario__modules/panels/modules/refiners/slotable_only////";!h&&e.slots[b]&&
e.slots[b].moduleId&&e.slots[b].instanceId&&(a+="item//"+e.slots[b].moduleId+"//"+e.slots[b].instanceId);c.organizerSelect("zenarioA","addNewReusablePlugin",!1,a,"zenario__modules/panels/plugins","zenario__modules/panels/modules","zenario__modules/panels/plugins",!0,!0,l.insertReusablePlugin);return!1};c.addNewReusablePlugin=function(a,b,d){a=c.pickNewPluginSlotName;(b=e.moduleNonAsyncAJAX("zenario_common_features",{addPluginInstance:b.id,slotName:a,level:c.pickNewPluginLevel,cID:e.cID,cType:e.cType,
cVersion:e.cVersion},!0))?c.showMessage(b):e.refreshPluginSlot(a,"")};c.addNewWireframePlugin=function(a,b,d){a.blur();var h={addPlugin:d,slotName:b,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion};d=e.moduleNonAsyncAJAX("zenario_common_features",h,!1);if(!c.loggedOut(d))return c.floatingBox(d,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",h,!0);a?c.showMessage(a):e.refreshPluginSlot(b,"")}),!1};c.pluginSlotEditSettings=function(a,b,c){a.blur();a=e.slots[b].instanceId;
!v("zenario_theme_name_"+b+"__0")&&a&&z.open(c||"plugin_settings",{cID:e.cID,cType:e.cType,cVersion:e.cVersion,slotName:b,instanceId:a,frontEnd:1});return!1};c.movePlugin=function(a,b){a.blur();c.floatingBox(l.movePluginDesc,!0,"question",!0,!0,function(){c.moveSource=b;$(".zenario_slotAdminControlBox").addClass("zenario_moveDestination");$("#plgslt_"+b+"-control_box").removeClass("zenario_moveDestination").addClass("zenario_moveSource")});return!1};c.doMovePlugin=function(a,b){a.blur();var d=c.moveSource;
c.cancelMovePlugin(a);if(d&&b)if("edit"==c.toolbar)c.doMovePlugin2(d,b,1);else if("template"==c.toolbar){var h=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!1);if(c.loggedOut(h))return;c.floatingBox(h,l.movePlugin,"warning",!1,!1,function(){c.doMovePlugin2(d,b,2)})}return!1};c.doMovePlugin2=function(a,b,d){(d=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,level:d,slotNameSource:a,slotNameDestination:b,cID:e.cID,cType:e.cType,
cVersion:e.cVersion},!0))?c.showMessage(d):(e.refreshPluginSlot(a,"",c.importantGetRequests),e.refreshPluginSlot(b,"",c.importantGetRequests))};c.cancelMovePlugin=function(a){a&&a.blur();delete c.moveSource;$(".zenario_slotAdminControlBox").removeClass("zenario_moveDestination").removeClass("zenario_moveSource");return!1};c.refreshAllSlotsWithCutCopyPaste=function(a){var b,d;a=c.csvToObject(a);a.zenario_banner=!0;a.zenario_html_snippet=!0;a.zenario_wysiwyg_editor=!0;for(d in a)if(t(a,d)&&r[d]&&r[d].slots)for(b in r[d].slots)t(r[d].slots,
b)&&e.slots[b]&&e.slots[b].isVersionControlled&&r[d].refreshPluginSlot(b,!1,!1,!1)};c.copyContents=function(a,b,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{copyContents:1,allowedModules:d,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?c.showMessage(a):c.refreshAllSlotsWithCutCopyPaste(d)};c.cutContents=function(a,b,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{cutContents:1,allowedModules:d,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?
c.showMessage(a):c.refreshAllSlotsWithCutCopyPaste(d)};c.pasteContents=function(a,b){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{pasteContents:1,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?c.showMessage(d):e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)};c.overwriteContents=function(a,b){a.blur();c.floatingBox(l.overwriteContentsConfirm,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{overwriteContents:1,slotName:b,cID:e.cID,
cType:e.cType,cVersion:e.cVersion},!0);a?c.showMessage(a):e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)});return!1};c.swapContents=function(a,b){a.blur();c.floatingBox(l.swapContentsConfirm,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{swapContents:1,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);a?c.showMessage(a):e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)});return!1};c.removePlugin=function(a,b,d){a.blur();var h={removePlugin:1,level:d,slotName:b,
cID:e.cID,cType:e.cType,cVersion:e.cVersion};a=function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",h,!0);a?c.showMessage(a):e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)};if(1<d){html=e.moduleNonAsyncAJAX("zenario_common_features",h,!1);if(c.loggedOut(html))return;c.floatingBox(html,l.remove,!0,!1,!1,a)}else a();return!1};c.hidePlugin=function(a,b){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{hidePlugin:1,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?c.showMessage(d):
e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)};c.showPlugin=function(a,b){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{showPlugin:1,slotName:b,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?c.showMessage(d):e.refreshPluginSlot(b,"",f,!1,!1,!1,!1)};c.replacePluginSlot=function(a,b,d,h,k,g,D){var s=!1,m=!1,l=!1,p="",n="";if(g)for(var x in g)if(t(g,x)){var u=g[x].split("--");"IN_EDIT_MODE"==u[0]?l=!0:"MODULE_ID"==u[0]?s=1*u[1]:"WIREFRAME"==u[0]?m=!0:"NAMESPACE"==u[0]?s&&!r[e.uneschyp(u[1])]&&
e.addPluginJavaScript(s):"SLOT_CONTROLS"==u[0]?p=e.uneschyp(u[1]):"SLOT_CONTROLS_CSS_CLASS"==u[0]&&(n=e.uneschyp(u[1]))}s||(b=0);e.slot([[a,b,s,d,h,f,l,m]]);l&&(n+=" zenario_slot_being_edited");v("plgslt_"+a+"-wrap").className=n;r.onbeforeunload=c.onbeforeunload;e.slots[a].beingEdited=l;for(var w in D)t(D,w)&&e.slots[a]&&e.callScript(D[w],e.slots[a].moduleClassName);v("plgslt_"+a).innerHTML=k;v("zenario_fbAdminSlotControlsContents-"+a).innerHTML=p;e.tooltips("#plgslt_"+a+" a");e.tooltips("#plgslt_"+
a+" img");e.tooltips("#plgslt_"+a+" input")};c.checkSlotsBeingEdited=function(){if(e.slots)for(var a in e.slots)if(t(e.slots,a)&&e.slots[a].beingEdited)return $("body").addClass("zenario_being_edited"),!0;$("body").removeClass("zenario_being_edited");return!1};c.checkForEdits=function(){return"edit"==c.toolbar&&c.checkSlotsBeingEdited()?(c.showMessage(l.editorOpen),!1):!0};c.onbeforeunload=function(){return z.isOpen&&z.editModeOnBox()&&(z.changes()||z.callFunctionOnEditors("isDirty"))?l.leaveAdminBoxWarning:
zenarioSE.isOpen&&zenarioSE.editModeOnBox()&&(zenarioSE.changes()||zenarioSE.callFunctionOnEditors("isDirty"))?l.leaveAdminBoxWarning:c.checkSlotsBeingEdited()?l.leavePageWarning:f};c.boxesOpen={};c.openBox=function(a,b,d,h,e,g,m,s,r,l,p,n,x,u,w){d||(d=1);b===f&&(b="");var q;if(s||r){if(!v("zenario_fb"+d+"__overlay")){var y,B,z="zenario_overlay";if(b)for(y in q=b.split(" "),q)t(q,y)&&(B=q[y])&&(z+=" "+B+"__overlay");$("body").append('<div class="'+z+'" id="zenario_fb'+d+'__overlay" style="display: none;"></div>')}q=
$("#zenario_fb"+d+"__overlay")}v("zenario_fb"+d)||$("body").append('<div id="zenario_fb'+d+'"></div>');v("zenario_fb"+d).className=b;b=$("#zenario_fb"+d);!0===l?b.draggable({handle:".zenario_drag",cancel:".zenario_no_drag",containment:"window"}):"string"==typeof l&&b.draggable({handle:l,cancel:".zenario_no_drag",containment:"window"});c.adjustBox(d,h,e,g,m,a,n,x,u,w);if(s||r)a=b.css("z-index"),q.css("z-index",E(1*a-1,0,0)).show().unbind("click"),s||q.click(function(){c.closeBox(d)}),q.show();p&&(!0===
p&&(p={}),p.containment===f&&(p.containment="document"),p.minWidth===f&&(p.minWidth=e),b.resizable(p));$("body").addClass("zenario_fb"+d+"__isOpen");b.show()};c.adjustBox=function(a,b,d,h,k,g,m,s,l,t){var p=v("zenario_fb"+a);a||(a=1);k===f&&(k=15);h===f&&(h=50);m===f&&(m=15);d?p.style.width=d+"px":(m=h=0,p.style.left="0",p.style.width="100%");!1!==g&&g!==f&&(p.innerHTML=g,e.addJQueryElements("#zenario_fb"+a+" ",!0));s===f&&(s=E($("#zenario_fb"+a).height(),50));b?(b.clientY!==f||b.pageY!==f?a=e.getMouseY(b)+
k:(a=$(b).offset().top+k,t&&(a+=$(b).height())),t=1+e.scrollTop(),a<t?a=t:(t=$(r).height(),c.pageEl&&(t=Math.min(t,$(c.pageEl).height())),s=t-s-m+e.scrollTop(),a>s&&(a=s)),p.style.bottom=null,p.style.top=a+"px",p.style.position="absolute"):(1>k?k=0:100<k&&(k=100),e.browserIsIE(6)?(p.style.position="absolute",s=p.className,s=s.replace(/zenario_fbIE6Hack\d+/,""),s+=" zenario_fbIE6Hack"+(4>k?k:5*Math.round(k/5)),p.className=s):(p.style.position="fixed",50>=k?(p.style.bottom=null,p.style.top=k+"%"):(p.style.top=
null,p.style.bottom=100-k+"%")));d&&(b?(b.clientX!==f||b.pageX!==f?h=e.getMouseX(b)+k:(h=$(b).offset().left+h,l&&(h+=$(b).width())),b=1+e.scrollLeft(),h<b?h=b:(d=$(r).width()-d-m+e.scrollLeft(),h>d&&(h=d)),p.style.right=null,p.style.marginRight=0,p.style.marginLeft=0,p.style.left=h+"px"):(1>h?h=0:100<h&&(h=100),d=Math.max(0,$(r).width()-d),p.style.right=null,p.style.left=Math.round(d*h/100)+"px"))};c.checkIfBoxIsOpen=function(a){return $("#zenario_fb"+a).is(":visible")};c.closeBox=function(a,b,d){a||
(a=1);b?$("#zenario_fb"+a).hide(d):$("#zenario_fb"+a).remove();$("#zenario_fb"+a+"__overlay").remove();$("body").removeClass("zenario_fb"+a+"__isOpen");c.checkIfBoxIsOpen(a)&&A.body.focus();return!1};c.closeBoxHandler=function(a){a.w&&(delete c.boxesOpen[a.w.attr("id")],a.w.hide());a.o&&a.o.remove();for(var b in c.boxesOpen)if(t(c.boxesOpen,b))return;setTimeout(function(){c.floatingBoxOpen=!1;for(var a in c.boxesOpen)t(c.boxesOpen,a)&&(c.floatingBoxOpen=!0)},100)};c.forcePathWrap=function(a,b,c){if(e.browserIsFirefox()&&
b===f)return a;b===f&&(b=/\//g);c===f&&(c="/");return a.replace(b,c+'<span style="font-size: 1px;"> </span>')};c.generateRandomString=function(a){for(var b="",c=0,c=0;c<a;++c)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return b};c.loggedOut=function(a){return"\x3c!--Logged_Out--\x3e"==a.substr(0,17)?(c.showMessage(a),!0):!1};c.loggedOutIframeCheck=function(a,b){var c=self&&self!=self.parent&&self.parent;try{if(c&&c.zenarioA&&c.zenarioA.showMessage)return c.zenarioA.closeBox("AdminOrganizer"),
c.zenarioA.showMessage(a,!0,b),!0}catch(h){}return!1};c.floatingBox=function(a,b,d,h,k,g){var m=!1;k&&(a=x(a,!0));!0===b?b='<input type="button" class="submit" value="'+l.OK+'"/>':b&&-1===b.indexOf("<input ")&&(b='<input class="submit_selected" type="button" value="'+x(b)+'"/><input type="button" class="submit" value="'+l.cancel+'"/>');"success"==d||4==d?d="zenario_fbSuccess":"question"==d||3==d?d="zenario_fbQuestion":"error"==d||2==d?d="zenario_fbError":d&&"none"!=d?(d="zenario_fbWarning",m=!0):
d="";h===f&&(h=m);a=c.microTemplate("zenario_popout_message",{message:a,messageType:d,buttonsHTML:b});c.openBox(a,"zenario_fbAdmin zenario_prompt","AdminMessage",f,550,50,17,h,!0,!1,!1);e.addJQueryElements("#zenario_fbAdminMessage ",!0);g&&(h=$("#zenario_fbMessageButtons .submit_selected"),h.length||(h=$("#zenario_fbMessageButtons .submit")),h.click(function(){setTimeout(g,1)}))};c.currentlyClosingFloatingBox=!1;c.closeFloatingBox=function(a){c.currentlyClosingFloatingBox?c.currentlyClosingFloatingBox=
!1:c.checkIfBoxIsOpen("AdminMessage")&&(c.closeBox("AdminMessage"),a&&(c.currentlyClosingFloatingBox=!0))};c.addJQueryElements=function(a){$(a+"input.zenario_datepicker").each(function(a,d){if(d.id&&c.siteSettings&&v("_value_for__"+d.id)){var h=$(d).hasClass("zenario_datepicker_change_month_and_year");$(d).datepicker({changeMonth:h,changeYear:h,dateFormat:c.siteSettings.organizer_date_format,altField:"#_value_for__"+d.id,altFormat:"yy-mm-dd",showOn:"focus",onSelect:function(a,b){$(d).change()}})}});
c.tooltips(a+"span[title]");c.tooltips(a+".pluginAdminMenuButton[title]",{position:{my:"left top+2",at:"left bottom",collision:"flipfit"}})};c.tooltips=function(a,b){b||(b={});b.tooltipClass===f&&(b.tooltipClass="zenario_admin_tooltip");e.tooltips(a,b)};c.setTooltipIfTooLarge=function(a,b,d){$(a).each(function(a,e){var g;g=b===f?e.innerHTML:b;try{$(e).jQueryTooltip("destroy")}catch(m){}g.replace(/\&\w+;/g,"-").length>d?c.tooltips(e,{content:g,items:"*"}):$(e).attr("title","")})};c.tinyMCEPasteRreprocess=
function(a,b){b.content=b.content.replace(/<\/?font\b[^>]*?>/gi,"").replace(/<b\b[^>]*?>/gi,"<strong>").replace(/<\/b>/gi,"</strong>").replace(/<i\b[^>]*?>/gi,"<em>").replace(/<\/i>/gi,"</em>").replace(/<u\b[^>]*?>/gi,"<u>").replace(/<\/u>/gi,"</u>").replace(/<u>\s*<p\b[^>]*?>/gi,"<p><u>").replace(/<\/p>\s*<\/u>/gi,"</u></p>").replace(/<em>\s*<p\b[^>]*?>/gi,"<p><em>").replace(/<\/p>\s*<\/em>/gi,"</em></p>").replace(/<strong>\s*<p\b[^>]*?>/gi,"<p><strong>").replace(/<\/p>\s*<\/strong>/gi,"</strong></p>").replace(/<u\b[^>]*?>/gi,
'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"</span>")};c.enableDragDropUploadInTinyMCE=function(a,b,d){"string"==typeof d&&(d=v(d));d&&(c.disableFileDragDrop(d),a&&c.canDoHTML5Upload()&&c.setHTML5UploadFromDragDrop(y+"zenario/ajax.php",{method_call:"handleOrganizerPanelAJAX",__pluginClassName__:"zenario_common_features",__path__:"editor_temp_file",upload:1},!1,function(){c.addMediaToTinyMCE(b)},d))};c.addMediaToTinyMCE=function(a){var b,c="";if(b=e.nonAsyncAJAX(y+"zenario/ajax.php?method_call=getNewEditorTempFiles",
!0,!0))for(var h in b)if(t(b,h)){var k=b[h];if(k&&k.checksum&&k.filename)var g=a+"zenario/file.php?c="+(k.short_checksum||k.checksum)+"&filename="+encodeURIComponent(k.filename),c=c+('\n<img src="'+x(g)+'" alt="'+x(k.filename)+'" width="'+k.width+'" height="'+k.height+'"/>')}tinyMCE.execCommand("mceInsertContent",!1,c)};c.fileBrowser=function(a,b,d,h){b=(b=r.tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.id)&&z.tuix&&z.tuix.tab&&z.tuix.tabs&&z.tuix.tabs[z.tuix.tab]&&z.tuix.tabs[z.tuix.tab].fields&&
z.tuix.tabs[z.tuix.tab].fields[b];c.tinyMCE_win=h;c.tinyMCE_field=a;c.tinyMCE_fromFAB=!!b;"file"==d?(pick_items=b&&b.insert_link_button&&b.insert_link_button.pick_items?b.insert_link_button.pick_items:{path:"zenario__content/panels/content",target_path:"zenario__content/panels/content",min_path:"zenario__content/panels/content",max_path:"zenario__content/panels/content",disallow_refiners_looping_on_min_path:!1},c.organizerSelect("zenarioA","setLinkURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,
pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,f,pick_items.one_to_one_choose_phrase,f,!0)):"image"==d?(pick_items=b&&b.insert_link_button&&b.insert_link_button.pick_items?b.insert_link_button.pick_items:!b&&e.cID&&e.cType&&r.zenario_wysiwyg_editor&&zenario_wysiwyg_editor.poking?{path:"zenario__content/panels/content/item_buttons/images//"+e.cType+"_"+e.cID+"//",target_path:"zenario__content/panels/inline_images_for_content",min_path:"zenario__content/panels/inline_images_for_content",
max_path:"zenario__content/panels/inline_images_for_content",disallow_refiners_looping_on_min_path:!1}:{path:"zenario__content/panels/image_library",target_path:"zenario__content/panels/image_library",min_path:"zenario__content/panels/image_library",max_path:!1,disallow_refiners_looping_on_min_path:!1},c.organizerSelect("zenarioA","setImageURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,f,pick_items.one_to_one_choose_phrase,
f,!0)):"zenario_document"==d&&c.organizerSelect("zenarioA","setDocumentURL",!1,"zenario__content/panels/documents","zenario__content/panels/documents","zenario__content/panels/documents","zenario__content/panels/documents",!1,f,f,f,!0,f,f,f,f,f,f,f,f,f,{disabled_if:'item && item.privacy != "public" && item.privacy != "Public"'})};c.setLinkPickerOnTinyMCE=function(){var a=$(".mce-zenario_link_picker input.mce-textbox"),b=$(".mce-zenario_link_picker .mce-open"),d=$(c.microTemplate("zenario_tinymce_link_picker",
{urlFieldId:a.attr("id")})),h=a.width(),e=b.width();b.replaceWith(d);b=d.width();a.width(h+e-b);c.tooltips(d.find("button"),{tooltipClass:"zenario_admin_tooltip zenario_admin_tooltip_over_tinymce"})};c.lastFieldValue="";c.setEditorField=function(a,b,d){b===f&&(b=(c.tinyMCE_win||r).document.getElementById(c.tinyMCE_field));if(d){if(""!==b.value&&b.value!=c.lastFieldValue)return;c.lastFieldValue=a}b.value=a;e.fireChangeEvent(b)};c.setLinkURL=function(a,b,d){b.getItemURL=1;a=e.moduleNonAsyncAJAX("zenario_common_features",
b,!0);c.loggedOut(a)||(c.tinyMCE_fromFAB&&-1===a.indexOf("://")&&(a=y+a),c.setEditorField(d.title,$(".mce-panel input.mce-link_text_to_display")[0],!0),c.setEditorField(a))};c.setDocumentURL=function(a,b,d){a=d.frontend_link;c.tinyMCE_fromFAB&&(a=y+a);c.setEditorField(d.name,$(".mce-panel input.mce-link_text_to_display")[0]);c.setEditorField(a)};c.setImageURL=function(a,b,d){a="zenario/file.php?c="+(d.short_checksum||d.checksum);b.usage&&"image"!=b.usage&&(a+="&usage="+encodeURIComponent(b.usage));
a+="&filename="+encodeURIComponent(d.filename);c.tinyMCE_fromFAB&&(a=y+a);c.setEditorField(d.alt_tag,$(".mce-panel input.mce-image_alt")[0]);c.setEditorField(a)};c.skinDesc=f;c.getSkinDesc=function(){if(c.skinDesc===f){c.skinDesc={};var a;e.skinId&&(a=e.moduleNonAsyncAJAX("zenario_common_features",{skinId:e.skinId},!1,!0))&&"object"==typeof a&&(c.skinDesc=a)}return c.skinDesc};c.formatFilesizeNicely=function(a,b){if(0>=a)return"0";var c=Math.min(4,Math.floor(Math.log(a)/Math.log(1024)));b=Math.pow(10,
b);return Math.round(b*a/Math.pow(1024,c))/b+l[["_BYTES","_KBYTES","_MBYTES","_GBYTES","_TBYTES"][c]]};c.makeTimeFromParts=function(a,b,c){c==f&&(c="00");return a+":"+b+":"+c};c.showPagePreview=function(a,b,c,h){var k,g="";if(m.tuix&&(h=m.getKeyId(!0))&&(k=m.tuix.items[h])){switch(k.admin_version_status){case "first_draft":case "published_with_draft":case "hidden_with_draft":case "trashed_with_draft":adminVersionStatus="Draft";break;case "published":adminVersionStatus="Published";break;case "hidden":adminVersionStatus=
"Hidden";break;case "trashed":adminVersionStatus="Trashed"}g=k.tag+" Version "+k.version+" ["+adminVersionStatus+"] "+a+" x "+b+" ("+c+")"}else g=c,e.cID&&e.cType&&(h=e.cType+"_"+e.cID);$.colorbox({innerWidth:a+"px",innerHeight:b+"px",maxWidth:!1,maxHeight:!1,iframe:!0,preloading:!1,open:!0,title:g,href:y+"index.php?cID="+h+"&_show_page_preview=1",className:"zenario_page_preview_colorbox"})};c.formatOrganizerItemName=function(a,b){var d=f,h,e;if(a.items&&a.items[b])if(d=E(a.label_format_for_picked_items,
a.label_format_for_grid_view))for(var g in a.items[b]){if(t(a.items[b],g)&&-1!=d.indexOf("[["+g+"]]"))for(e=a.items[b][g],a.columns&&a.columns[g]&&(a.columns[g].format||a.columns[g].empty_value)&&(e=c.formatSKItemField(e,a.columns[g]));d!=(h=d.replace("[["+g+"]]",e));)d=h}else d=a.items[b][E(a.default_sort_column,"name")];return d===f?b:d.replace(/\s+/g," ")};c.formatSKItemField=function(a,b){if(b&&b.format){var d=b.format,h="";if(a&&"date"!=d&&"datetime"!=d&&"datetime_with_seconds"!=d&&"remove_zero_padding"!=
d){var k=a.indexOf(" ");-1!=k&&(h=a.substr(k),a=a.substr(0,k))}if("true_or_false"==d)a=B(a)?l.tru:l.fal;else if("yes_or_no"==d)a=B(a)?b.yes_phrase!==f?b.yes_phrase:l.yes:b.no_phrase!==f?b.no_phrase:l.no;else if("remove_zero_padding"==d)a=a.replace(/\b0+/g,"");else if("enum"==d&&b.values&&b.values[a]!==f)"object"==typeof b.values[a]?b.values[a].label!==f&&(a=b.values[a].label):a=b.values[a];else if(("module_name"==d||"module_class_name"==d)&&m.init)a?c.pluginNames[a]&&(a=c.pluginNames[a]):a=l.core;
else if("filesize"==d&&a==1*a)a=c.formatFilesizeNicely(a,1);else if(("language_english_name"==d||"language_local_name"==d)&&c.lang[a])a=c.lang[a].name;else if(("language_english_name_with_id"==d||"language_local_name_with_id"==d)&&c.lang[a])a=c.lang[a].name+" ("+a+")";else if("date"==d||"datetime"==d||"datetime_with_seconds"==d)a=e.formatDate(a,"date"==d?!1:d);a+=h}!a&&b&&b.empty_value&&(a=b.empty_value);return a};c.organizerQuick=function(a,b,d,e,k,g,m,s,l){c.organizerSelect(!1,!1,!1,a,!1,d,e,k,
!1,!1,!1,!1,!1,!0,b,m,f,f,f,s,l)};c.getSKBodyClass=function(a,b){a===f&&(a=r);return"zenario_og "+(a.zenarioONotFull||a.zenarioA.openedInIframe?(a.zenarioOQuickMode?"zenario_organizer_quick":"zenario_organizer_select")+" "+(a.zenarioOOpenOverAdminBox?"zenario_organizer_over_admin_box":"zenario_organizer_under_admin_box"):"zenario_organizer_full")+" "+(a.zenarioOWrapperCSSClass||"")+" "+(b?"zenario_panel_type__"+b:"")};c.organizerSelect=function(a,b,d,h,k,g,l,s,t,x,p,n,y,u,w,q,z,C,A,E,H,I){var J=!u||
c.isFullOrganizerWindow||c.checkIfBoxIsOpen("og");I||(I={});J?(c.SKInit(),n=v("zenario_sk_iframe").contentWindow,y=!1):n=r;e.closeTooltip();n.zenarioOQueue=[{path:h,branch:-1,selectedItems:{}}];g||(g=h);k||(k=h);l===f?k&&(l=k):B(l)||(l=!1);n.zenarioOTargetPath=k;n.zenarioOMinPath=g;n.zenarioOMaxPath=l;n.zenarioOCheckPaths=!0;n.zenarioODisallowRefinersLoopingOnMinPath=B(s);n.zenarioOCallbackObject=a;n.zenarioOCallbackFunction=b;n.zenarioOChoosePhrase=x;n.zenarioOChooseButtonActiveClass=t;n.zenarioOChooseMultiplePhrase=
p;n.zenarioOMultipleSelect=B(d);n.zenarioOAllowNoSelection=B(C);n.zenarioONoSelectionChoosePhrase=A;n.zenarioONotFull=!0;n.zenarioOQuickMode=u;n.zenarioOSelectMode=!u;n.zenarioOSelectObject=I;n.zenarioOOpeningPath=w;n.zenarioOOpeningInstance=q;n.zenarioOCombineItem=z;n.zenarioOReloadOnChanges=E;n.zenarioOWrapperCSSClass=H||"";n.zenarioOOpenOverAdminBox=y;n.zenarioOFirstLoad=!0;J||(m.open(c.getSKBodyClass(n),f,0.8*$(r).width(),50,10,!u,!0,!0,{minWidth:550}),m.init());n.zenarioO&&n.zenarioO.go(h,-1);
J&&(c.openBox(!1,c.getSKBodyClass(n),"AdminOrganizer",!1,!1,50,2,!u,!0,!1,!1),v("zenario_sk_iframe").style.width=e.browserIsIE(6)?"600px":"96%",u?v("zenario_sk_iframe").style.height="100%":v("zenario_sk_iframe").style.height="96%",v("zenario_sk_iframe").contentWindow.zenarioO&&(v("zenario_sk_iframe").contentWindow.zenarioO.lastSize=!1),v("zenario_fbAdminOrganizer").style.left="0px")};c.SKInitted=!1;c.SKInit=function(){c.SKInitted||(v("zenario_fbAdminOrganizer").innerHTML='<iframe id="zenario_sk_iframe" src="'+
y+"zenario/admin/organizer.php?openedInIframe=1&amp;rand="+(new Date).getTime()+'"></iframe>',c.SKInitted=!0)};c.multipleLanguagesEnabled=function(){var a,b=0;if(c.lang)for(a in c.lang)if(t(c.lang,a)&&c.lang[a].enabled&&b++)return!0;return!1};c.uploading=!1;c.canDoHTML5Upload=function(){return r.FileReader};c.clearHTML5UploadFromDragDrop=function(){delete c.uploadPathFromDragDrop;delete c.uploadRequestFromDragDrop;delete c.uploadCallBackFromDragDrop};c.setHTML5UploadFromDragDrop=function(a,b,d,e,
f){return c.canDoHTML5Upload()?(c.uploadPathFromDragDrop=a,c.uploadRequestFromDragDrop=b,c.uploadCallBackFromDragDrop=e,E(f,A.body).addEventListener("drop",function(a){d&&d();c.doHTML5UploadFromDragDrop(a)},!1),!0):!1};c.doHTML5UploadFromDragDrop=function(a){c.stopFileDragDrop(a);c.doHTML5Upload(a.target.files||a.dataTransfer.files,c.uploadPathFromDragDrop,c.uploadRequestFromDragDrop,c.uploadCallBackFromDragDrop)};c.doHTML5Upload=function(a,b,d,e){b&&d&&!c.uploading&&(c.uploadPath=b,c.uploadRequest=
d,c.uploadCallBack=e,c.uploadResponses=[],c.uploadFile=-1,c.uploadFiles=a,c.doNextUpload())};c.doNextUpload=function(){var a=$("#zenario_progress_wrap"),b=$("#zenario_progress_name"),d=$("#zenario_progress_stop");b.text("");d.unbind("click");c.uploading=!!c.uploadFiles[++c.uploadFile];m.init&&m.setWrapperClass("uploading",c.uploading);if(c.uploading)if(a.show().removeClass("zenario_progress_cancelled"),v("zenario_progressbar").style.width="0%",c.uploadFiles[c.uploadFile].size&&c.uploadFiles[c.uploadFile].name)if(c.uploadFiles[c.uploadFile].size>
c.maxUpload)c.showMessage(l.uploadTooLarge.replace("[[maxUploadF]]",c.maxUploadF),!0,"error"),c.doNextUpload();else{b.text(c.uploadFiles[c.uploadFile].name);c.uploader=new XMLHttpRequest;c.uploader.open("POST",c.uploadPath,!0);try{c.uploader.setRequestHeader("X_FILENAME",c.uploadFiles[c.uploadFile].name)}catch(e){}var b=new FormData,f;for(f in c.uploadRequest)t(c.uploadRequest,f)&&b.append(f,""+c.uploadRequest[f]);b.append("Filedata",c.uploadFiles[c.uploadFile]);c.uploader.upload.addEventListener("progress",
c.uploadProgress,!1);c.uploader.addEventListener("load",c.uploadDone,!1);c.uploader.addEventListener("error",c.uploadDone,!1);c.uploader.addEventListener("abort",c.uploadDone,!1);d.click(function(){a.show().removeClass("zenario_progress_cancelled");c.uploader.abort()});c.uploader.send(b)}else c.doNextUpload();else a.hide(),c.uploadCallBack&&c.uploadCallBack(c.uploadResponses)};c.uploadProgress=function(a){var b=0;a.lengthComputable&&(b=100*a.loaded/a.total);v("zenario_progress_wrap").style.display=
"block";v("zenario_progressbar").style.width=b+"%"};c.uploadDone=function(a){if(c.uploader.responseText&&1!=c.uploader.responseText)try{data=JSON.parse(c.uploader.responseText);if("object"!=typeof data)throw 0;c.uploadResponses.push(data)}catch(b){c.showMessage(c.uploader.responseText,!0,"error",!1,!0)}c.doNextUpload()};c.debug=function(a,b){r.open(y+"zenario/admin/dev_tools/dev_tools.php?mode="+encodeURIComponent(a)+(b?"&orgMap=1":""));return!1};c.openMenuAdminBox=function(a,b){a||(a={});if(!b){if("preview"==
c.pageMode)return!0;if("menu"==c.pageMode&&c.menuWandOn)b="zenario_menu_text";else return!1}e.cID&&(a.cID=e.cID,a.cType=e.cType,a.languageId=e.langId);if("organizer"==b){var d=e.moduleNonAsyncAJAX("zenario_common_features",{getMenuItemStorekeeperDeepLink:a.id,languageId:a.languageId},!0);if(c.loggedOut(d))return;C.action({organizer_quick:{path:d,target_path:"zenario__menu/panels/menu_nodes",min_path:"zenario__menu/panels/menu_nodes",max_path:"zenario__menu/panels/menu_nodes",disallow_refiners_looping_on_min_path:!1,
reload_menu_slots:!0,reload_admin_toolbar:!0}})}else z.open(b,a);return!1};c.reloadMenuPlugins=function(){$(".zenario_slotShownInMenuMode .zenario_slot").each(function(a,b){if(b.id&&"plgslt_"==b.id.substr(0,7)){var d=b.id.substr(7);e.refreshPluginSlot(d,"lookup",c.importantGetRequests,!1,!1,!1,!1,!1)}})};c.draft=function(a,b,d,e){if(c.draftDoingCallback)return delete c.draftDoingCallback,!0;delete c.draftDoingCallback;var f;return C.tuix&&C.tuix.sections&&C.tuix.sections.edit&&C.tuix.sections.edit.buttons&&
C.tuix.sections.edit.buttons.start_editing&&C.tuix.sections.edit.buttons.start_editing.ajax&&!c.hidden(C.tuix.sections.edit.buttons.start_editing)?(f=$.extend(!0,{},C.tuix.sections.edit.buttons.start_editing),delete f.ajax.request.switch_to_edit_mode,c.checkSpecificPermsOnThisPage()&&C.tuix.sections.edit.buttons.start_editing.ajax.confirm?(d?d+="\n\n"+f.ajax.confirm.message__editing_published:(d=f.ajax.confirm.message__editing_published,e=f.ajax.confirm.button_message),e='<input type="button" class="submit_selected" value="'+
x(e)+'" onclick="zenarioA.draftSetCallback(\''+x(a)+"'); zenarioAT.action2();\"/>",b&&(e+='<input type="button" class="submit" value="'+x(f.ajax.confirm.button_message__just_view)+'" onclick="zenarioA.draftDoCallback(\''+x(a)+"');\"/>"),e+='<input type="button" class="submit" value="'+x(f.ajax.confirm.cancel_button_message)+'"/>',f.ajax.confirm.message="\x3c!--Button_HTML:"+e+"--\x3e"+d):d?(c.draftSetCallback(a),f.ajax.confirm={message:d,button_message:e,cancel_button_message:c.phrase.cancel,message_type:"warning"}):
(c.draftSetCallback(a),delete f.ajax.confirm),c.action(C,f),!1):d?(e='<input type="button" class="submit_selected" value="'+x(e)+'" onclick="zenarioA.draftDoCallback(\''+x(a)+"');\"/>",e+='<input type="button" class="submit" value="'+c.phrase.cancel+'"/>',c.showMessage(d,e,"warning"),!1):!0};c.savePageMode=function(a,b){b||(b={});b._save_page_mode=c.pageMode;b._save_page_toolbar=c.toolbar;b._save_page_slot_wand=c.slotWandOn?1:"";b._save_page_show_grid=c.showGridOn?1:"";$.ajax({type:"POST",url:y+"zenario/admin/quick_ajax.php",
data:b,async:a})};c.draftSetCallback=function(a){c.savePageMode(!1,{_draft_set_callback:a})};c.draftDoCallback=function(a){c.draftDoingCallback=!0;$("#"+a).click();delete c.draftDoingCallback};c.hidden=function(a,b,d,e){var f;return B(a.hidden)||(f=a.visible_if||a.js_condition)&&!c.eval(f,a,d,e)?!0:!1};c.lastToast=!1;c.clearLastToast=!1;c.toast=function(a){if(a!==f&&_.isObject(a)){c.clearLastToast&&clearTimeout(c.clearLastToast);c.lastToast=JSON.stringify(a);setTimeout(function(){c.lastToast=!1},
6E4);var b=a.message_type,d=toastr.info;switch(a.message_type){case "error":case "warning":case "success":d=toastr[b]}d(a.message,a.title,a.options)}};c.rememberToast=function(){c.lastToast&&e.nonAsyncAJAX(y+"zenario/admin/quick_ajax.php",{_remember_toast:c.lastToast})};c.checkActionUnique=function(a){var b=[],c,e="admin_box ajax combine_items navigation_path frontend_link help link onclick panel pick_items popout organizer_quick upload".split(" ");for(c in e)t(e,c)&&a[e[c]]&&b.push(e[c]);switch(b.length){case 1:return!0;
case 0:return!1;default:return console.log(a),alert("This navigation or button has multiple actions associated with it:\n\n"+b+"\n\n(See the console log for the faulty definition.)"),!1}};c.action=function(a,b,d,h,k,g,v){if(a.uploading||!k&&!c.checkActionUnique(b))return!1;var s;switch(a.encapName){case "zenarioO":s="handleOrganizerPanelAJAX";break;case "zenarioAT":s="handleAdminToolbarAJAX";break;case "zenarioW":s="handleWizardAJAX";break;default:s="handleAdminBoxAJAX"}!k&&b.link?k=b.link:!k&&b.panel&&
b.panel._path_here&&(k={path:b.panel._path_here});if(!k||!m.pathNotAllowed(k)){m.yourWorkInProgressLastUpdated=0;a.pickItemsItemLevel=d;a.postPickItemsObject=!1;var C,A,p;if((p=b.upload)||(p=b.ajax))!d&&b.ajax&&b.ajax.pass_matched_ids&&"zenarioO"==a.encapName?(C="zenario/admin/organizer.ajax.php?__pluginClassName__="+p.class_name+"&path="+m.path+"&_get_matched_ids=1&method_call="+s+e.urlRequest(m.lastRequests),A={}):(C="zenario/ajax.php?__pluginClassName__="+p.class_name+"&__path__="+a.path+"&method_call="+
s,A=a.getKey(d)),p.request&&$.extend(A,p.request),g&&$.extend(A,g);if(b.upload){p=!c.canDoHTML5Upload();g='<input type="file" name="Filedata"';var n,G,u;if(u=b.upload.accept||b.upload.extensions){u=_.isString(u)?u.split(","):_.toArray(u);for(n in u)if(t(u,n))switch(G=u[n],G){case "text":u[n]="text/*";break;case "images":u[n]="image/*";break;case "video":u[n]="video/*";break;case "audio":u[n]="audio/*";break;default:-1==G.indexOf("/")&&"."!=G.substr(0,1)&&(u[n]="."+G)}g+=' accept="'+x(u.join(","))+
'"'}else"Images"==b.upload.fileDesc&&(g+=' accept="image/*"');p&&(g+=' id="zenario_fallback_fileupload"');!p&&B(b.upload.multi)&&(g+=" multiple");g+="/>";if(p)b=$.extend(!0,{},b),A._html5_backwards_compatibility_hack=1,b.ajax={class_name:b.upload.class_name,confirm:{message:g,html:!0,button_message:l.upload,cancel_button_message:l.cancel,form:!0},request:A};else{b=$(g);b.change(function(){a.uploadStart&&a.uploadStart();c.doHTML5Upload(this.files,y+C,A,function(b){a.uploadComplete(b)})});b.click();
return}}if(k)B(k.unselect_items)&&(m.selectedItems={},m.saveSelection()),m.go(k.path,h,k.refiner?{id:d?m.getKeyId():"",name:k.refiner}:f,f,f,f,f,v);else if(b.frontend_link){var w,q;b=b.frontend_link;var F=!1;d&&(w=a.getKeyId(!0))&&(q=a.tuix.items[w])&&q.frontend_link&&(b=q.frontend_link);"zenarioO"==a.encapName&&(b=m.parseReturnLink(b),-1!=b.indexOf("&zenario_sk_return=")&&(F=!0));F||"zenario/admin/welcome.php"==b.substr(0,25)?e.goToURL(e.addBasePath(b)):-1!==b.indexOf("://")&&0!==b.indexOf(y)?r.open(b):
"zenarioAT"==a.encapName?e.goToURL(e.addBasePath(b)):H&&!H.zenarioO?r.opener.location=e.addBasePath(b):r.storekeeperChildWindow&&!r.storekeeperChildWindow.closed?r.storekeeperChildWindow.location=e.addBasePath(b):r.storekeeperChildWindow=r.open(e.addBasePath(b))}else if(b.navigation_path)b=b.navigation_path,d&&(w=a.getKeyId(!0))&&(q=a.tuix.items[w])&&q.navigation_path&&(b=q.navigation_path),"zenarioO"==a.encapName?m.go(b,-1):e.goToURL(e.addBasePath((r.zenarioATLinks&&r.zenarioATLinks.organizer||"zenario/admin/organizer.php")+
"#"+b));else if(b.admin_box){c.nowDoingSomething("loading");d=E(a.getKey(d),{});if(b.admin_box.key)for(F in b.admin_box.key)t(b.admin_box.key,F)&&(d[F]=b.admin_box.key[F]);z.open(b.admin_box.path,d,b.admin_box.tab,b.admin_box.values,f,B(b.admin_box.create_another)?b.admin_box:!1,f,B(b.admin_box.pass_matched_ids))}else if(b.popout){b=$.extend(!0,{},b.popout);d&&(w=a.getKeyId(!0))&&(q=a.tuix.items[w])&&(q.popout&&(b=$.extend(b,q.popout)),!b.title&&a.popoutLabelFormat&&(b.title=a.applyMergeFields(a.popoutLabelFormat,
!1,w)));q&&q.href&&b.href===f?b.href=q.href:q&&q.frontend_link&&b.href===f?b.href=m.parseReturnLink(q.frontend_link,"_show_page_preview=1"):q&&b.href&&(b.href+=-1===b.href.indexOf("?")?"?":"&",q.checksum?(b.href+="c="+encodeURIComponent(q.checksum),w==1*w&&(b.href+="&id="+w)):b.href=w==1*w?b.href+("id="+w):b.href+("c="+encodeURIComponent(w)),d=E(a.getKey().usage,q.usage))&&(b.href+="&usage="+encodeURIComponent(d));if(b.href){if(d=q&&q.filename||b.options&&b.options.filename||b.filename){if(w=d.match(/(.*) \[.*\]/))d=
w[1];b.href+="&filename="+encodeURIComponent(d)}b.href=e.addBasePath(b.href)}if(b.css_class){var K=(""+b.css_class).split(" ");b.onOpen=function(){e.addClassesToColorbox(K)};b.onClosed=function(){e.removeClassesToColorbox(K)}}b.iframe&&b.width===f&&(b.width="93%");b.iframe&&b.height===f&&(b.height="90%");q&&q.width&&(b.initialWidth=q.width);q&&q.height&&(b.initialHeight=q.height);b.preloading===f&&(b.preloading=!1);$.colorbox(b)}else if(b.organizer_quick)q=b.organizer_quick.path,d&&(w=a.getKeyId(!0))&&
(q=q.replace(/\[\[id\]\]/g,w)),c.organizerQuick(q,b.organizer_quick.min_path||b.organizer_quick.max_path||b.organizer_quick.path,b.organizer_quick.min_path,b.organizer_quick.max_path,B(b.organizer_quick.disallow_refiners_looping_on_min_path),f,f,a.encapName);else if(b.pick_items&&!d)b.pick_items.ajax&&(a.postPickItemsObject=b.pick_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+b.pick_items.class_name+"&__path__="+a.path+"&method_call="+s,a.actionRequests=a.getKey(d),b.pick_items.request&&
$.extend(a.actionRequests,b.pick_items.request),c.organizerSelect(a.encapName,"pickItems",b.pick_items.multiple_select,b.pick_items.path,b.pick_items.target_path,b.pick_items.min_path,b.pick_items.max_path,b.pick_items.disallow_refiners_looping_on_min_path,!0,b.pick_items.one_to_one_choose_phrase,b.pick_items.one_to_many_choose_phrase,f,f,f,f,f,a.getLastKeyId(!0),b.pick_items.allow_no_selection,b.pick_items.one_to_no_selection_choose_phrase,f,f,b.pick_items);else if(b.combine_items&&d)b.combine_items.ajax&&
(a.postPickItemsObject=b.combine_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+b.combine_items.class_name+"&__path__="+a.path+"&method_call="+s,a.actionRequests=a.getKey(d),b.combine_items.request&&$.extend(a.actionRequests,b.combine_items.request),c.organizerSelect(a.encapName,"pickItems",b.combine_items.multiple_select,b.combine_items.path,b.combine_items.target_path,b.combine_items.min_path,b.combine_items.max_path,b.combine_items.disallow_refiners_looping_on_min_path,!0,1<a.itemsSelected&&
b.combine_items.many_to_one_choose_phrase?b.combine_items.many_to_one_choose_phrase:b.combine_items.one_to_one_choose_phrase,1<a.itemsSelected&&b.combine_items.many_to_many_choose_phrase?b.combine_items.many_to_many_choose_phrase:b.combine_items.one_to_many_choose_phrase,f,f,f,f,f,a.getKeyId(!1),b.combine_items.allow_no_selection,1<a.itemsSelected&&b.combine_items.many_to_no_selection_choose_phrase?b.combine_items.many_to_no_selection_choose_phrase:b.combine_items.one_to_no_selection_choose_phrase,
f,f,b.combine_items);else if(b.ajax)if(a.actionTarget=C,a.actionRequests=A,b.ajax.confirm){q=B(b.ajax.confirm.html);w=B(b.ajax.confirm.download);d=b.ajax.confirm.message?b.upload?b.ajax.confirm.message:a.applyMergeFieldsToLabel(b.ajax.confirm.message,q,d,b.ajax.confirm.multiple_select_message):e.nonAsyncAJAX(y+a.actionTarget+e.urlRequest(a.actionRequests),!1);w&&(a.actionRequests._download=1,a.searchTerm!==f&&(a.actionRequests._search=a.searchTerm),a.prefs[a.path]&&a.prefs[a.path].sortBy?(a.actionRequests._sort_col=
a.prefs[a.path].sortBy,a.actionRequests._sort_desc=a.prefs[a.path].sortDesc?1:0):a.actionRequests._sort_col=a.labelTag);h=g="";if(w||b.upload){g+='<form id="zenario_bc_form" action="'+x(y+a.actionTarget+"&_sk_form_submission=1")+'" onsubmit="get(\'preloader_circle\').style.visibility = \'visible\';" target="zenario_iframe" method="post"'+(b.upload?' enctype="multipart/form-data"':"")+">";for(F in a.actionRequests)t(a.actionRequests,F)&&(g+='<input type="hidden" value="'+x(a.actionRequests[F])+'" name="'+
x(F)+'"/>');q||(d=x(d,!0),q=!0)}g+=d;w||b.upload?(g+="</form>",h='<input type="button" class="submit_selected" value="'+x(b.ajax.confirm.button_message)+'" onclick="get(\'zenario_bc_form\').submit();"/>'):h='<input type="button" class="submit_selected" value="'+x(b.ajax.confirm.button_message)+'" onclick="'+a.encapName+'.action2();"/>';h+='<input type="button" class="submit" value="'+x(b.ajax.confirm.cancel_button_message)+'"/>';c.showMessage(g,h,b.ajax.confirm.message_type,f,!q);b.upload&&(e.browserIsIE()||
$("#zenario_fallback_fileupload").click())}else a.action2();else b.help&&(d=E(b.help.message_type,"question"),q=!B(b.help.html),b.help.message&&c.showMessage(b.help.message,!0,d,!1,q))}};c.isHtaccessWorking=function(){return"Yes"==e.nonAsyncAJAX(y+"zenario/includes/test_files/is_htaccess_working.txt",!0)};c.checkFunctionExists=function(a,b){return b?r[b]&&"function"==typeof r[b][a]:"function"==typeof r[a]};c.resizeImage=function(a,b,c,e,f,g){f.width=a;f.height=b;a*=1;b*=1;if(a!=c||b!=e)!g&&a<=c&&
b<=e||(c/a<e/b?(f.width=c,f.height=Math.floor(b*c/a)):(f.height=e,f.width=Math.floor(a*e/b)))};c.sortArray=function(a,b){return c.sortLogic(a,b,1)};c.sortArrayByOrd=function(a,b){return c.sortLogic(a,b,"ord")};c.sortArrayByOrdinal=function(a,b){return c.sortLogic(a,b,"ordinal")};c.sortArrayWithGrouping=function(a,b){return a[2]===b[2]?c.sortLogic(a,b,1):a[2]===f?c.sortLogic(a,b,1,2):c.sortLogic(a,b,2,1)};c.sortLogic=function(a,b,c,e){a=a[c];b=e===f?b[c]:b[e];if(a===b)return 0;c=a==1*a;e=b==1*b;return c&&
e?1*a<1*b?-1:1:c||e?c?-1:1:(""+a).toUpperCase()<(""+b).toUpperCase()?-1:1};c.getSortedIdsOfTUIXElements=function(a,b,d,e){var f,g,m=!1,l=[];d||(d="ord");"items"==b&&a.columns&&a.columns[d]&&(m=a.columns[d].format);_.isObject(b)||(b=a[b]);if(b)for(g in b)t(b,g)&&(a=b[g])&&(a=a[d],"true_or_false"==m||"yes_or_no"==m?l.push([g,B(a),!0]):"remove_zero_padding"!=m&&a==(f=1*a)?l.push([g,f,!0]):a?l.push([g,a.toLowerCase(),!1]):l.push([g,0,!0]));e?l.sort(c.sortArrayDesc):l.sort(c.sortArrayForOrganizer);for(g in l)t(l,
g)&&(l[g]=l[g][0]);return l};c.sortArrayForOrganizer=function(a,b){return a[1]===b[1]?0:(a[2]?b[2]:!b[2])?a[1]<b[1]?-1:1:a[2]?-1:1};c.sortArrayDesc=function(a,b){return c.sortArrayForOrganizer(b,a)};c.csvToObject=function(a){if(_.isString(a)){var b,c={};a=a.split(",");for(b in a)""!==a[b]&&(c[a[b]]=!0);return c}return a};c.setButtonKin=function(a,b){c.setKin(a,b||"organiser_button_with_children")};c.setKin=function(a,b){var c,e,k,g,l={};for(c in a)t(a,c)&&(e=a[c],l[e.id]=c);for(c in a)t(a,c)&&(e=
a[c],k=e.tuix||e,g=k.parent)&&(g=l[g],g=a[g])&&(g.children||(g.children=[],b!==f&&(g.css_class=g.css_class?g.css_class+" "+b:b)),e.enabled&&!B(k.remove_filter)&&(g.childEnabled=!0),e.current&&(g.childCurrent=!0),g.children.push(e));for(c=a.length-1;0<=c;--c)e=a[c],k=e.tuix||e,(k.parent||B(k.hide_when_children_are_not_visible)&&!e.children)&&a.splice(c,1)};c.readData=function(a,b,d,f){try{if(a=JSON.parse(a),"object"!=typeof a)throw 0;}catch(k){return f?(b='<input id="zenario_retry" class="submit_selected" type="button" value="'+
l.retry+'"/>',c.nowDoingSomething(),c.showMessage(a,b,"error",!0,!0),$("#zenario_retry").click(function(){setTimeout(f,1)})):c.showMessage(a,!0,"error",!1,!0),c.hideAJAXLoader(),!1}b&&e.setSessionStorage(a,b,d,!0);return a};c.AJAXErrorHandler=function(a,b,d){if(!c.unloaded){var f="",k=c.adminSettings.show_dev_tools;d&&(f+="<h1><b>"+x(a.status+" "+d)+"</b></h1>");if(404==a.status)f+="<p>"+(k?l.error404Dev:l.error404)+"</p>";else if(500==a.status)f+="<p>"+(k?l.error500Dev:l.error500)+"</p>";else if(0==
a.status||"timeout"==b)f+="<p>"+(k?l.errorTimedOutDev:l.errorTimedOut)+"</p>";a.responseText&&(f+="<div>"+a.responseText+"</div>");f+='<p style="display: none;">Last URL accessed: '+x(e.checkLastUrl)+"</p>";showErrorMessage=function(){if(a.zenario_retry){var b='<input id="zenario_retry" class="submit_selected" type="button" value="'+l.retry+'"/>';c.nowDoingSomething();c.showMessage(f,b,"error",!0);$("#zenario_retry").click(function(){setTimeout(a.zenario_retry,1)})}else c.showMessage(f,"","error")};
0==a.status||"timeout"==b?setTimeout(showErrorMessage,750):showErrorMessage()}};$.ajaxSetup({error:c.AJAXErrorHandler});c.attempts={};c.attemptNum=0;c.keepTrying=function(a,b){if(b===f)b=++c.attemptNum,c.attempts[b]=!0;else if(!c.attempts[b])return;a(b);setTimeout(function(){c.keepTrying(a,b)},3E4)};c.stopTrying=function(a){return c.attempts[a]?(delete c.attempts[a],!0):!1};c.onunload=function(a){r.onpagehide&&a.persisted||(c.unloaded=!0,c.closeFloatingBox())};r.onpagehide?r.addEventListener("pagehide",
c.onunload,!1):r.onunload=c.onunload;c.stopDefault=function(a){(a=a||event)&&a.stopPropagation&&a.stopPropagation();a&&a.preventDefault&&a.preventDefault();return!1};c.stopFileDragDrop=function(a){var b=!1;a.dataTransfer&&a.dataTransfer.types&&(b="function"==typeof a.dataTransfer.types.contains?a.dataTransfer.types.contains("Files"):"Files"==""+a.dataTransfer.types||a.dataTransfer.types[0]&&"Files"==""+a.dataTransfer.types[0]);b&&(a.stopPropagation(),a.preventDefault())};c.disableFileDragDrop=function(a){c.canDoHTML5Upload()&&
(a.addEventListener("drop",c.stopDefault,!1),a.addEventListener("dragenter",c.stopDefault,!1),a.addEventListener("dragover",c.stopDefault,!1),a.addEventListener("dragexit",c.stopDefault,!1))};c.checkCookiesEnabled=function(){var a=y+"zenario/cookies.php?check_cookies_enabled=1&no_cache=1",b=new e.callback;e.ajax(a).after(function(c){c?b.call(c):e.ajax(a).after(function(a){b.call(a)})});return b};$(A).ready(function(){c.disableFileDragDrop(A.body)});r.onbeforeunload=c.onbeforeunload});

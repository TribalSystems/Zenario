zenario.lib(function(g,y,D,n,H,L,e,b,z,A,l,s,C,u,E,M,m,N,O,x){b.init=!0;b.menuWandOn=!0;b.slotWandOn=!1;b.showGridOn=!1;b.storekeeperInitTime=5E3;b.adminSettings={};b.tooltipLengthThresholds={adminBoxTitle:120,adminToolbarTitle:60,organizerBackButton:70,organizerPanelTitle:100};b.microTemplates={};b.microTemplate=function(a,c,d){if(a===g||!c)return"";if(_.isArray(c)){d=c.length;for(var f="",h=0;h<d;++h)f+=b.microTemplate(a,c[h],h);return f}c.i===g&&d!==g&&(c.i=1*d);if(255>a.length&&b.microTemplates[a]){if("string"==
typeof b.microTemplates[a])try{f=$.extend({},_.templateSettings,!0),_.templateSettings={variable:"m",escape:!1,interpolate:/\{\{(.+?)\}\}/g,evaluate:/[<\{]%([\s\S]+?)%[>\}]/g,twigStyleSyntax:!0},b.microTemplates[a]=_.template(b.microTemplates[a]),_.templateSettings=f}catch(e){throw console.log("Error in template "+a+": \n\n"+b.microTemplates[a]),e;}return b.microTemplates[a](c)}f="microtemplate_"+hex_md5(a);b.microTemplates[f]===g&&(b.microTemplates[f]=a);return b.microTemplate(f,c,d)};b.showAJAXLoader=
function(){$(D.body).addClass("zenario_adminAJAXLoaderOpen");b.openBox("<div></div>","zenario_fbAdminAJAXLoader","AdminAJAXLoader",!1,!1,50,1,!0,!0,!1,!1)};b.hideAJAXLoader=function(){$(D.body).removeClass("zenario_adminAJAXLoaderOpen");b.closeBox("AdminAJAXLoader",!1)};b.nowDoingSomething=function(a,c){$("#zenario_now_loading").clearQueue().hide();$("#zenario_now_saving").clearQueue().hide();var b=$("#zenario_now_installing");b.length&&b.clearQueue().hide();a&&(c?$("#zenario_now_"+a).fadeIn(1E3):
$("#zenario_now_"+a).delay(900).fadeIn(2E3))};b.infoBox=function(){var a=y+"zenario/ajax.php?__pluginClassName__=zenario_common_features&method_call=handleAJAX"+e.urlRequest({infoBox:1});b.showAJAXLoader();e.ajax(a,!1,!0,!1).after(function(a){b.hideAJAXLoader();b.openBox(b.microTemplate("zenario_info_box",a),"zenario_fbAdminInfoBox","AdminInfoBox",g,405,g,g,!1,!0,".zenario_infoBoxHead",!1)})};b.closeInfoBox=function(){b.closeBox("AdminInfoBox")};b.showMessage=function(a,c,d,f,h){var k=!1,B=!1;a=a?
""+a:b.adminSettings.show_dev_tools?m.errorTimedOutDev:m.errorTimedOut;c===g&&(c=!0);d===g&&(d="none");"\x3c!--Message_Type:None--\x3e"==a.substr(0,24)?(a=a.substr(24),d=!1):"\x3c!--Message_Type:Error--\x3e"==a.substr(0,25)?(a=a.substr(25),d="error"):"\x3c!--Message_Type:Success--\x3e"==a.substr(0,27)?(a=a.substr(27),d="success"):"\x3c!--Message_Type:Warning--\x3e"==a.substr(0,27)?(a=a.substr(27),d="warning"):"\x3c!--Message_Type:Question--\x3e"==a.substr(0,28)&&(a=a.substr(28),d="question");if("\x3c!--Reload_Storekeeper--\x3e"==
a.substr(0,25)&&l.init&&!n.zenarioOQuickMode&&!n.zenarioOSelectMode)return(a=a.substr(25))&&alert(a),b.rememberToast(),b.uploading=!1,l.setWrapperClass("uploading",b.uploading),l.reloadPage(),!1;"\x3c!--Refresh_Storekeeper--\x3e"!=a.substr(0,26)||!l.init||n.zenarioOQuickMode||n.zenarioOSelectMode?"\x3c!--Go_To_Storekeeper_Panel:"==a.substr(0,28)&&-1!=(k=a.indexOf("--\x3e"))?(l.go(a.substr(28,k-28),-1),a=a.substr(k+3),B=!0):"\x3c!--Open_Admin_Box:"==a.substr(0,19)&&-1!=(k=a.indexOf("--\x3e"))?(z.open(a.substr(19,
k-19)),a=a.substr(k+3),B=!0):"\x3c!--Go_To_URL:"==a.substr(0,14)&&-1!=(k=a.indexOf("--\x3e"))&&(b.rememberToast(),e.goToURL(e.addBasePath(a.substr(14,k-14)),!0),a=a.substr(k+3),B=!0):(l.reload(),a=a.substr(26),B=!0);if(B&&!a)return!1;"\x3c!--Modal--\x3e"==a.substr(0,12)&&(a=a.substr(12),f=!0);if("\x3c!--Button_HTML:"==a.substr(0,16)&&-1!=(k=a.indexOf("--\x3e")))c=a.substr(16,k-16),a=a.substr(k+3);else if("\x3c!--Reload_Button:"==a.substr(0,18)&&-1!=(k=a.indexOf("--\x3e")))c='<input class="submit_selected" type="button" onclick="document.location.href = document.location.href; return false;" value="'+
a.substr(18,k-18)+'">',a=a.substr(k+3);else if("\x3c!--Logged_Out--\x3e"==a.substr(0,17)){if(b.loggedOutIframeCheck(a,d))return;c=l.init&&l.path&&b.isFullOrganizerWindow?'<input type="button" value="'+m.login+'" class="submit_selected" onclick="zenarioO.reloadPage(undefined, true);"><input type="button" class="submit" value="'+m.cancel+'" onclick="zenario.goToURL(URLBasePath);"/>':'<input type="button" value="'+m.login+'" class="submit_selected" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests, true));"><input type="button" class="submit" value="'+
m.cancel+'" onclick="zenario.goToURL(zenario.linkToItem(zenario.cID, zenario.cType, zenarioA.importantGetRequests));"/>';a=a.substr(17);f=!0}if("error"==d&&-1!=(k=a.indexOf('{"')))try{if("object"!=typeof JSON.parse(a.substr(k)))throw 0;a=a.substr(0,k)}catch(s){}b.floatingBox(a,c,d,f,h);return!0};b.notification=function(a){s("zenario_notification").style.display="";s("zenario_notification").innerHTML="<div><h1>"+e.htmlspecialchars(a)+"</h1></div>";$("#zenario_notification div").clearQueue().show({effect:"drop",
duration:500,direction:"up"}).delay(2500).hide({effect:"drop",duration:500,direction:"up",complete:function(){s("zenario_notification").style.display="none"}})};b.showHelp=function(a){var c=introJs(),d=$("#zenario_fbog");a=$(a);var f=[],h;d.addClass("zenario_introjs_fixPosition");a.each(function(a,c){h=$(c).data();h.element=c;f.push(h)});f.sort(function(a,c){return a.step==c.step?0:a.step<c.step?-1:1});c.setOptions({steps:f,nextLabel:b.phrase.next,prevLabel:b.phrase.prev});c.start();c.onexit(function(){d.removeClass("zenario_introjs_fixPosition")})};
b.showTutorial=function(a,c){!a&&l.currentTopLevelPath&&(a=l.currentTopLevelPath.substr(0,l.currentTopLevelPath.indexOf("/")));var d={},f={videos:[],show_help_tour_next_time:b.show_help_tour_next_time,auto:c},h,e;for(h in l.map)x(l.map,h)&&(e=l.map[h])&&e.youtube_video_id&&(d[h]={id:e.youtube_video_id,title:e.youtube_thumbnail_title});var B=0;a&&d[a]&&(f.main_video_id=d[a].id,f.main_video_title=d[a].title,d[a].index=B++,d[a].selected=!0,f.videos.push(d[a]),delete d[a]);for(h in d)x(d,h)&&(e=d[h],
e.index=B++,f.videos.push(e));if(!0!=c||f.main_video_id!=g)d=b.microTemplate("zenario_tutorial",f),$.colorbox({width:964,height:791,innerHeight:696,maxHeight:"95%",html:d,className:"zenario_tutorial_cbox",overlayClose:!1,escKey:!1,onComplete:function(){0<f.videos.length&&b.initTutorialSlideshow()}})};b.initTutorialSlideshow=function(){(new $JssorSlider$("zenario_tutorial_other_videos",{$FillMode:1,$SlideDuration:300,$MinDragOffsetToSlide:20,$SlideWidth:200,$SlideHeight:150,$SlideSpacing:75,$DisplayPieces:3,
$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1})).$On($JssorSlider$.$EVT_CLICK,function(a,c){$video=$("#zenario_tutorial_other_video_"+a);b.clickOtherTutorialVideo($video.data("id"),$video.data("title"),a)})};b.clickOtherTutorialVideo=function(a,c,d){a=b.microTemplate("zenario_tutorial_main_video",{main_video_id:a});$("#zenario_tutorial_video_banner").html(c);$("#zenario_tutorial_main_video").html(a);$("#zenario_tutorial_other_videos_slideshow div.video").removeClass("selected");
$("#zenario_tutorial_other_video_"+d).addClass("selected")};b.toggleShowHelpTourNextTime=function(){var a=$("#zenario_show_help_tour_next_time").prop("checked")?1:0;e.ajax(y+"zenario/admin/quick_ajax.php?_show_help_tour_next_time="+a)};b.getSKItem=b.getItemFromOrganizer=function(a,c){var b,f=!1,h=y+"zenario/admin/organizer.ajax.php?_start=0&_get_item_name=1&path="+encodeURIComponent(a);if(c!==g)if(h+="&_item=","object"==typeof c)for(b in c)x(c,b)&&(f?f=!1:h+=",",h+=encodeURIComponent(c[b]));else h+=
encodeURIComponent(c)+"&_limit=1";(b=e.checkSessionStorage(h,{},!0))||(b=e.nonAsyncAJAX(h,!1,!0),e.setSessionStorage(b,h,{},!0));return b};b.lookupFileDetails=function(a){var c=y+"zenario/admin/quick_ajax.php?lookupFileDetails="+encodeURIComponent(a);(a=e.checkSessionStorage(c,"",!0))||(a=e.nonAsyncAJAX(c,!1,!0),e.setSessionStorage(a,c,"",!0));return a};b.toggleSlotWand=function(){b.checkForEdits()&&(b.slotWandOn=!b.slotWandOn,A.clickTab(b.toolbar))};b.toggleShowGrid=function(){b.checkForEdits()&&
(b.showGridOn=!b.showGridOn,A.clickTab(b.toolbar))};b.checkSpecificPerms=function(a){if(!b.adminHasSpecificPerms)return!0;var c,d=a.split(",");for(c in d)if(x(d,c)&&(a=d[c],!(l.tuix&&l.tuix.items&&l.tuix.items[a]&&l.tuix.items[a]._specific_perms)))return!1;return!0};b.checkSpecificPermsOnThisPage=function(){return!b.adminHasSpecificPerms||b.adminHasSpecificPermsOnThisPage};b.slotParentMouseOverLastId=!1;b.slotParentMouseOver=function(a){b.slotControlHide&&clearTimeout(b.slotControlHide);$(".zenario_slotParent").removeClass("zenario_slotParent");
a?("zenario_slotControlsWrap"!=this.className?(a=$(this).attr("id").replace("-control_box",""),$(this).parent().addClass("zenario_slotParent")):(a="plgslt_"+(this.id+"").replace("zenario_fbAdminPluginOptionsWrap-",""),$("#"+a).parent().addClass("zenario_slotParent")),b.slotParentMouseOverLastId&&b.slotParentMouseOverLastId!=a&&b.closeSlotControls(),b.slotParentMouseOverLastId=a):(b.closeSlotControls(),b.slotParentMouseOverLastId=!1)};b.slotParentMouseOut=function(a){b.slotControlHide&&clearTimeout(b.slotControlHide);
b.slotControlHide=setTimeout(b.slotParentMouseOver,b.slotControlHoverInterval)};b.setSlotParents=function(){$(".zenario_slotAdminControlBox").parent().children().mouseenter(b.slotParentMouseOver);$(".zenario_slotAdminControlBox").parent().children().mouseleave(b.slotParentMouseOut);$("#zenario_afb_container .zenario_slotControlsWrap").mouseenter(b.slotParentMouseOver);$("#zenario_afb_container .zenario_slotControlsWrap").mouseleave(b.slotParentMouseOut)};b.slotControlHide=!1;b.slotControlHoverInterval=
1500;b.slotControlCloseInterval=100;$(D).ready(b.setSlotParents);b.getGridSlotDetails=function(a){a=$("."+a+".span.slot");var c={container:!1,cssClass:!1,columns:!1,width:!1,widthInfo:!1};if(a.length){c.cssClass=a.attr("class");c.cssClass=c.cssClass.replace(" alpha "," ").replace(" omega "," ");var b=!1,f="",e=a.width(),g,B=(a.attr("class")||"").match(/\bspan\d+\b/);B&&(B=1*B[0].match(/\d+/));try{var n;a:for(n in D.styleSheets)if(x(D.styleSheets,n)){var s=D.styleSheets[n],l=s.rules||s.cssRules,q;
for(q in l)if(x(l,q)){var p=l[q];if(p.selectorText&&p.style.width&&(""+p.selectorText).match(/\.span/)&&a.is(p.selectorText)){f=p.style.width;break a}}}}catch(u){f=""}f?f.match(/\d+px/)||(b=!0):f=e+"px";b&&(f+=" ("+e+" px "+m.atCurrentSize+")");B&&(f=1==B?"1 column, "+f:B+" columns, "+f);c.widthInfo=f;c.pxWidth=e;c.columns=B;(g=a.closest("div.container"))&&(g=g.attr("class"))&&(g=g.match(/container_(\d+)/))&&g[1]&&(c.container=1*g[1])}return c};b.openSlotControlsBox=!1;b.openSlotControls=function(a,
c,d){var f=$("#zenario_fbAdminSlotControls-"+d).is(":visible");a.blur();b.closeSlotControls();if(!f&&b.checkForEdits()){var e,k={info:!1,notes:!1,actions:!1,overridden_info:!1,overridden_actions:!1},f=b.getGridSlotDetails(d);a=-1==s("zenario_fbAdminSlotControls-"+d).innerHTML.indexOf("zenario_long_option")?255:280;var n=-a+34;b.openBox(g,s("plgslt_"+d+"-wrap").className+" zenario_fbAdminSlotControls",b.openSlotControlsBox="AdminSlotControls-"+d,c,a,n,32,!1,!1,!1,!1);for(e in k)x(k,e)&&($("#zenario_fbAdminSlotControls-"+
d+" .zenario_slotControlsWrap_"+e).show(),$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+e+" .zenario_sc:visible").each(function(a,c){k[e]=!0}),k[e]||$("#zenario_fbAdminSlotControls-"+d+" .zenario_slotControlsWrap_"+e).hide());f.cssClass?(f.cssClass=f.cssClass.replace(/\bspan\d*_?\d*\s/g,""),$("#zenario_slot_control__"+d+"__info__grid_css_class").show(),$("#zenario_slot_control__"+d+"__info__grid_css_class > span").text(f.cssClass)):$("#zenario_slot_control__"+d+"__info__grid_css_class").hide();
f.widthInfo?($("#zenario_slot_control__"+d+"__info__grid_width").show(),$("#zenario_slot_control__"+d+"__info__grid_width > span").text(f.widthInfo)):$("#zenario_slot_control__"+d+"__info__grid_width").hide();$("#plgslt_"+d+"-control_box").addClass("zenario_adminSlotControlsOpen")}return!1};b.dontCloseSlotControls=function(){b.slotControlClose&&clearTimeout(b.slotControlClose)};b.closeSlotControlsAfterDelay=function(){b.dontCloseSlotControls();b.slotControlClose=setTimeout(b.closeSlotControls,b.slotControlCloseInterval)};
b.closeSlotControls=function(){b.dontCloseSlotControls();b.openSlotControlsBox&&(b.closeBox(b.openSlotControlsBox,!0,{effect:"fade",duration:200}),$(".zenario_slotAdminControlBox").removeClass("zenario_adminSlotControlsOpen"))};b.pickNewPluginSlotName=!1;b.pickNewPlugin=function(a,c,d,f){a.blur();b.pickNewPluginSlotName=c;b.pickNewPluginLevel=d;a="zenario__modules/panels/modules/refiners/slotable_only////";!f&&e.slots[c]&&e.slots[c].moduleId&&e.slots[c].instanceId&&(a+="item//"+e.slots[c].moduleId+
"//"+e.slots[c].instanceId);b.organizerSelect("zenarioA","addNewReusablePlugin",!1,a,"zenario__modules/panels/plugins","zenario__modules/panels/modules","zenario__modules/panels/plugins",!0,!0,m.insertReusablePlugin);return!1};b.addNewReusablePlugin=function(a,c,d){a=b.pickNewPluginSlotName;(c=e.moduleNonAsyncAJAX("zenario_common_features",{addPluginInstance:c.id,slotName:a,level:b.pickNewPluginLevel,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(c):e.refreshPluginSlot(a,"")};b.addNewWireframePlugin=
function(a,c,d){a.blur();var f={addPlugin:d,slotName:c,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion};d=e.moduleNonAsyncAJAX("zenario_common_features",f,!1);if(!b.loggedOut(d))return b.floatingBox(d,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",f,!0);a?b.showMessage(a):e.refreshPluginSlot(c,"")}),!1};b.pluginSlotEditSettings=function(a,c,b){a.blur();a=e.slots[c].instanceId;!s("zenario_theme_name_"+c+"__0")&&a&&z.open(b||"plugin_settings",{cID:e.cID,
cType:e.cType,cVersion:e.cVersion,slotName:c,instanceId:a,frontEnd:1});return!1};b.movePlugin=function(a,c){a.blur();b.floatingBox(m.movePluginDesc,!0,"question",!0,!0,function(){b.moveSource=c;$(".zenario_slotAdminControlBox").addClass("zenario_moveDestination");$("#plgslt_"+c+"-control_box").removeClass("zenario_moveDestination").addClass("zenario_moveSource")});return!1};b.doMovePlugin=function(a,c){a.blur();var d=b.moveSource;b.cancelMovePlugin(a);if(d&&c)if("edit"==b.toolbar)b.doMovePlugin2(d,
c,1);else if("template"==b.toolbar){var f=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,level:2,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!1);if(b.loggedOut(f))return;b.floatingBox(f,m.movePlugin,"warning",!1,!1,function(){b.doMovePlugin2(d,c,2)})}return!1};b.doMovePlugin2=function(a,c,d){(d=e.moduleNonAsyncAJAX("zenario_common_features",{movePlugin:1,level:d,slotNameSource:a,slotNameDestination:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(d):(e.refreshPluginSlot(a,
"",b.importantGetRequests),e.refreshPluginSlot(c,"",b.importantGetRequests))};b.cancelMovePlugin=function(a){a&&a.blur();delete b.moveSource;$(".zenario_slotAdminControlBox").removeClass("zenario_moveDestination").removeClass("zenario_moveSource");return!1};b.refreshAllSlotsWithCutCopyPaste=function(a){var c,b,f,h={};a=a.split(",");for(b in a)x(a,b)&&(f=a[b])&&(h[f]=!0);h.zenario_banner=!0;h.zenario_html_snippet=!0;h.zenario_wysiwyg_editor=!0;for(f in h)if(x(h,f)&&n[f]&&n[f].slots)for(c in n[f].slots)x(n[f].slots,
c)&&e.slots[c]&&e.slots[c].isVersionControlled&&n[f].refreshPluginSlot(c,!1,!1,!1)};b.copyContents=function(a,c,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{copyContents:1,allowedModules:d,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?b.showMessage(a):b.refreshAllSlotsWithCutCopyPaste(d)};b.cutContents=function(a,c,d){a.blur();(a=e.moduleNonAsyncAJAX("zenario_common_features",{cutContents:1,allowedModules:d,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0))?
b.showMessage(a):b.refreshAllSlotsWithCutCopyPaste(d)};b.pasteContents=function(a,c){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{pasteContents:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.overwriteContents=function(a,c){a.blur();b.floatingBox(m.overwriteContentsConfirm,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{overwriteContents:1,slotName:c,cID:e.cID,
cType:e.cType,cVersion:e.cVersion},!0);a?b.showMessage(a):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)});return!1};b.swapContents=function(a,c){a.blur();b.floatingBox(m.swapContentsConfirm,$(a).text(),"warning",!1,!1,function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",{swapContents:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);a?b.showMessage(a):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)});return!1};b.removePlugin=function(a,c,d){a.blur();var f={removePlugin:1,level:d,slotName:c,
cID:e.cID,cType:e.cType,cVersion:e.cVersion};a=function(){var a=e.moduleNonAsyncAJAX("zenario_common_features",f,!0);a?b.showMessage(a):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};if(1<d){html=e.moduleNonAsyncAJAX("zenario_common_features",f,!1);if(b.loggedOut(html))return;b.floatingBox(html,m.remove,!0,!1,!1,a)}else a();return!1};b.hidePlugin=function(a,c){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{hidePlugin:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):
e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.showPlugin=function(a,c){a.blur();var d=e.moduleNonAsyncAJAX("zenario_common_features",{showPlugin:1,slotName:c,cID:e.cID,cType:e.cType,cVersion:e.cVersion},!0);d?b.showMessage(d):e.refreshPluginSlot(c,"",g,!1,!1,!1,!1)};b.replacePluginSlot=function(a,c,d,f,h,k,B){var l=!1,m=!1,w=!1,q="",p="";if(k)for(var u in k)if(x(k,u)){var t=k[u].split("--");"IN_EDIT_MODE"==t[0]?w=!0:"MODULE_ID"==t[0]?l=1*t[1]:"WIREFRAME"==t[0]?m=!0:"CSS_CLASS"==t[0]?s("plgslt_"+a).className=
"zenario_slot "+e.uneschyp(t[1]):"NAMESPACE"==t[0]?l&&!n[e.uneschyp(t[1])]&&e.addPluginJavaScript(l):"SLOT_CONTROLS"==t[0]?q=e.uneschyp(t[1]):"SLOT_CONTROLS_CSS_CLASS"==t[0]&&(p=e.uneschyp(t[1]))}l||(c=0);e.slot([[a,c,l,d,f,g,w,m]]);w&&(p+=" zenario_slot_being_edited");s("plgslt_"+a+"-wrap").className=p;n.onbeforeunload=b.onbeforeunload;e.slots[a].beingEdited=w;for(var v in B)x(B,v)&&e.slots[a]&&e.callScript(B[v],e.slots[a].moduleClassName);s("plgslt_"+a).innerHTML=h;s("zenario_fbAdminSlotControlsContents-"+
a).innerHTML=q;e.tooltips("#plgslt_"+a+" a");e.tooltips("#plgslt_"+a+" img");e.tooltips("#plgslt_"+a+" input")};b.checkSlotsBeingEdited=function(){if(e.slots)for(var a in e.slots)if(x(e.slots,a)&&e.slots[a].beingEdited)return $("body").addClass("zenario_being_edited"),!0;$("body").removeClass("zenario_being_edited");return!1};b.checkForEdits=function(){return"edit"==b.toolbar&&b.checkSlotsBeingEdited()?(b.showMessage(m.editorOpen),!1):!0};b.onbeforeunload=function(){return z.isOpen&&z.editModeOnBox()&&
(z.changes()||z.callFunctionOnEditors("isDirty"))?m.leaveAdminBoxWarning:b.checkSlotsBeingEdited()?m.leavePageWarning:g};b.boxesOpen={};b.openBox=function(a,c,d,f,e,k,n,l,m,w,q,p,u,t,v){d||(d=1);c===g&&(c="");var r;if(l||m){if(!s("zenario_fb"+d+"__overlay")){var y,z,C="zenario_overlay";if(c)for(y in r=c.split(" "),r)x(r,y)&&(z=r[y])&&(C+=" "+z+"__overlay");$("body").append('<div class="'+C+'" id="zenario_fb'+d+'__overlay" style="display: none;"></div>')}r=$("#zenario_fb"+d+"__overlay")}s("zenario_fb"+
d)||$("body").append('<div id="zenario_fb'+d+'"></div>');s("zenario_fb"+d).className=c;c=$("#zenario_fb"+d);!0===w?c.draggable({handle:".zenario_drag",cancel:".zenario_no_drag",containment:"window"}):"string"==typeof w&&c.draggable({handle:w,cancel:".zenario_no_drag",containment:"window"});b.adjustBox(d,f,e,k,n,a,p,u,t,v);if(l||m)a=c.css("z-index"),r.css("z-index",E(1*a-1,0,0)).show().unbind("click"),l||r.click(function(){b.closeBox(d)}),r.show();q&&(!0===q&&(q={}),q.containment===g&&(q.containment=
"document"),q.minWidth===g&&(q.minWidth=e),c.resizable(q));$("body").addClass("zenario_fb"+d+"__isOpen");c.show()};b.adjustBox=function(a,c,d,f,h,k,l,m,u,w){var q=s("zenario_fb"+a);a||(a=1);h===g&&(h=15);f===g&&(f=50);l===g&&(l=15);d?q.style.width=d+"px":(l=f=0,q.style.left="0",q.style.width="100%");!1!==k&&k!==g&&(q.innerHTML=k,e.addJQueryElements("#zenario_fb"+a+" ",!0));m===g&&(m=E($("#zenario_fb"+a).height(),50));c?(c.clientY!==g||c.pageY!==g?a=e.getMouseY(c)+h:(a=$(c).offset().top+h,w&&(a+=$(c).height())),
w=1+e.scrollTop(),a<w?a=w:(w=$(n).height(),b.pageEl&&(w=Math.min(w,$(b.pageEl).height())),m=w-m-l+e.scrollTop(),a>m&&(a=m)),q.style.bottom=null,q.style.top=a+"px",q.style.position="absolute"):(1>h?h=0:100<h&&(h=100),e.browserIsIE(6)?(q.style.position="absolute",m=q.className,m=m.replace(/zenario_fbIE6Hack\d+/,""),m+=" zenario_fbIE6Hack"+(4>h?h:5*Math.round(h/5)),q.className=m):(q.style.position="fixed",50>=h?(q.style.bottom=null,q.style.top=h+"%"):(q.style.top=null,q.style.bottom=100-h+"%")));d&&
(c?(c.clientX!==g||c.pageX!==g?f=e.getMouseX(c)+h:(f=$(c).offset().left+f,u&&(f+=$(c).width())),c=1+e.scrollLeft(),f<c?f=c:(d=$(n).width()-d-l+e.scrollLeft(),f>d&&(f=d)),q.style.right=null,q.style.marginRight=0,q.style.marginLeft=0,q.style.left=f+"px"):(1>f?f=0:100<f&&(f=100),d=Math.max(0,$(n).width()-d),q.style.right=null,q.style.left=Math.round(d*f/100)+"px"))};b.checkIfBoxIsOpen=function(a){return $("#zenario_fb"+a).is(":visible")};b.closeBox=function(a,c,d){a||(a=1);c?$("#zenario_fb"+a).hide(d):
$("#zenario_fb"+a).remove();$("#zenario_fb"+a+"__overlay").remove();$("body").removeClass("zenario_fb"+a+"__isOpen");b.checkIfBoxIsOpen(a)&&D.body.focus();return!1};b.closeBoxHandler=function(a){a.w&&(delete b.boxesOpen[a.w.attr("id")],a.w.hide());a.o&&a.o.remove();for(var c in b.boxesOpen)if(x(b.boxesOpen,c))return;setTimeout(function(){b.floatingBoxOpen=!1;for(var a in b.boxesOpen)x(b.boxesOpen,a)&&(b.floatingBoxOpen=!0)},100)};b.forcePathWrap=function(a,c,b){if(e.browserIsFirefox()&&c===g)return a;
c===g&&(c=/\//g);b===g&&(b="/");return a.replace(c,b+'<span style="font-size: 1px;"> </span>')};b.generateRandomString=function(a){for(var c="",b=0,b=0;b<a;++b)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return c};b.loggedOut=function(a){return"\x3c!--Logged_Out--\x3e"==a.substr(0,17)?(b.showMessage(a),!0):!1};b.loggedOutIframeCheck=function(a,c){var b=self&&self!=self.parent&&self.parent;try{if(b&&b.zenarioA&&b.zenarioA.showMessage)return b.zenarioA.closeBox("AdminOrganizer"),
b.zenarioA.showMessage(a,!0,c),!0}catch(f){}return!1};b.floatingBox=function(a,c,d,f,h,k){var l=!1;h&&(a=u(a,!0));!0===c?c='<input type="button" class="submit" value="'+m.OK+'"/>':c&&-1===c.indexOf("<input ")&&(c='<input class="submit_selected" type="button" value="'+u(c)+'"/><input type="button" class="submit" value="'+m.cancel+'"/>');"success"==d||4==d?d="zenario_fbSuccess":"question"==d||3==d?d="zenario_fbQuestion":"error"==d||2==d?d="zenario_fbError":d&&"none"!=d?(d="zenario_fbWarning",l=!0):
d="";f===g&&(f=l);a=b.microTemplate("zenario_popout_message",{message:a,messageType:d,buttonsHTML:c});b.openBox(a,"zenario_fbAdmin zenario_prompt","AdminMessage",g,550,50,17,f,!0,!1,!1);e.addJQueryElements("#zenario_fbAdminMessage ",!0);k&&(f=$("#zenario_fbMessageButtons .submit_selected"),f.length||(f=$("#zenario_fbMessageButtons .submit")),f.click(function(){setTimeout(k,1)}))};b.currentlyClosingFloatingBox=!1;b.closeFloatingBox=function(a){b.currentlyClosingFloatingBox?b.currentlyClosingFloatingBox=
!1:b.checkIfBoxIsOpen("AdminMessage")&&(b.closeBox("AdminMessage"),a&&(b.currentlyClosingFloatingBox=!0))};b.addJQueryElements=function(a){$(a+"input.zenario_datepicker").each(function(a,d){if(d.id&&b.siteSettings&&s("_value_for__"+d.id)){var f=$(d).hasClass("zenario_datepicker_change_month_and_year");$(d).datepicker({changeMonth:f,changeYear:f,dateFormat:b.siteSettings.organizer_date_format,altField:"#_value_for__"+d.id,altFormat:"yy-mm-dd",showOn:"focus",onSelect:function(a,c){$(d).change()}})}});
b.tooltips(a+"span[title]");b.tooltips(a+".pluginAdminMenuButton[title]",{position:{my:"left top+2",at:"left bottom",collision:"flipfit"}})};b.tooltips=function(a,c){c||(c={});c.tooltipClass===g&&(c.tooltipClass="zenario_admin_tooltip");e.tooltips(a,c)};b.setTooltipIfTooLarge=function(a,c,d){$(a).each(function(a,e){var k;k=c===g?e.innerHTML:c;try{$(e).jQueryTooltip("destroy")}catch(l){}k.replace(/\&\w+;/g,"-").length>d?b.tooltips(e,{content:k,items:"*"}):$(e).attr("title","")})};b.tinyMCEPasteRreprocess=
function(a,c){c.content=c.content.replace(/<\/?font\b[^>]*?>/gi,"").replace(/<b\b[^>]*?>/gi,"<strong>").replace(/<\/b>/gi,"</strong>").replace(/<i\b[^>]*?>/gi,"<em>").replace(/<\/i>/gi,"</em>").replace(/<u\b[^>]*?>/gi,"<u>").replace(/<\/u>/gi,"</u>").replace(/<u>\s*<p\b[^>]*?>/gi,"<p><u>").replace(/<\/p>\s*<\/u>/gi,"</u></p>").replace(/<em>\s*<p\b[^>]*?>/gi,"<p><em>").replace(/<\/p>\s*<\/em>/gi,"</em></p>").replace(/<strong>\s*<p\b[^>]*?>/gi,"<p><strong>").replace(/<\/p>\s*<\/strong>/gi,"</strong></p>").replace(/<u\b[^>]*?>/gi,
'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"</span>")};b.enableDragDropUploadInTinyMCE=function(a,c,d){"string"==typeof d&&(d=s(d));d&&(b.disableFileDragDrop(d),a&&b.canDoHTML5Upload()&&b.setHTML5UploadFromDragDrop(y+"zenario/ajax.php",{method_call:"handleOrganizerPanelAJAX",__pluginClassName__:"zenario_common_features",__path__:"editor_temp_file",upload:1},!1,function(){b.addMediaToTinyMCE(c)},d))};b.addMediaToTinyMCE=function(a){var c,b="";if(c=e.nonAsyncAJAX(y+"zenario/ajax.php?method_call=getNewEditorTempFiles",
!0,!0))for(var f in c)if(x(c,f)){var h=c[f];if(h&&h.checksum&&h.filename)var g=a+"zenario/file.php?c="+(h.short_checksum||h.checksum)+"&filename="+encodeURIComponent(h.filename),b=b+('\n<img src="'+u(g)+'" alt="'+u(h.filename)+'" width="'+h.width+'" height="'+h.height+'"/>')}tinyMCE.execCommand("mceInsertContent",!1,b)};b.fileBrowser=function(a,c,d,f){c=(c=n.tinyMCE&&tinyMCE.activeEditor&&tinyMCE.activeEditor.id)&&z.tuix&&z.tuix.tab&&z.tuix.tabs&&z.tuix.tabs[z.tuix.tab]&&z.tuix.tabs[z.tuix.tab].fields&&
z.tuix.tabs[z.tuix.tab].fields[c];b.tinyMCE_win=f;b.tinyMCE_field=a;b.tinyMCE_fromFAB=!!c;"file"==d?(pick_items=c&&c.insert_link_button&&c.insert_link_button.pick_items?c.insert_link_button.pick_items:{path:"zenario__content/panels/content",target_path:"zenario__content/panels/content",min_path:"zenario__content/panels/content",max_path:"zenario__content/panels/content",disallow_refiners_looping_on_min_path:!1},b.organizerSelect("zenarioA","setLinkURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,
pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,g,pick_items.one_to_one_choose_phrase,g,!0)):"image"==d?(pick_items=c&&c.insert_link_button&&c.insert_link_button.pick_items?c.insert_link_button.pick_items:!c&&e.cID&&e.cType&&n.zenario_wysiwyg_editor&&zenario_wysiwyg_editor.poking?{path:"zenario__content/panels/content/item_buttons/images//"+e.cType+"_"+e.cID+"//",target_path:"zenario__content/panels/inline_images_for_content",min_path:"zenario__content/panels/inline_images_for_content",
max_path:"zenario__content/panels/inline_images_for_content",disallow_refiners_looping_on_min_path:!1}:{path:"zenario__content/panels/image_library",target_path:"zenario__content/panels/image_library",min_path:"zenario__content/panels/image_library",max_path:!1,disallow_refiners_looping_on_min_path:!1},b.organizerSelect("zenarioA","setImageURL",!1,pick_items.path,pick_items.target_path,pick_items.min_path,pick_items.max_path,pick_items.disallow_refiners_looping_on_min_path,g,pick_items.one_to_one_choose_phrase,
g,!0)):"zenario_document"==d&&b.organizerSelect("zenarioA","setDocumentURL",!1,"zenario__content/panels/documents","zenario__content/panels/documents","zenario__content/panels/documents","zenario__content/panels/documents",!1,g,g,g,!0,g,g,g,g,g,g,g,g,g,{disabled_if:'item && item.privacy != "public" && item.privacy != "Public"'})};b.setLinkPickerOnTinyMCE=function(){var a=$(".mce-zenario_link_picker input.mce-textbox"),c=$(".mce-zenario_link_picker .mce-open"),d=$(b.microTemplate("zenario_tinymce_link_picker",
{urlFieldId:a.attr("id")})),f=a.width(),e=c.width();c.replaceWith(d);c=d.width();a.width(f+e-c);b.tooltips(d.find("button"),{tooltipClass:"zenario_admin_tooltip zenario_admin_tooltip_over_tinymce"})};b.lastFieldValue="";b.setEditorField=function(a,c,d){c===g&&(c=(b.tinyMCE_win||n).document.getElementById(b.tinyMCE_field));if(d){if(""!==c.value&&c.value!=b.lastFieldValue)return;b.lastFieldValue=a}c.value=a;e.fireChangeEvent(c)};b.setLinkURL=function(a,c,d){c.getItemURL=1;a=e.moduleNonAsyncAJAX("zenario_common_features",
c,!0);b.loggedOut(a)||(b.tinyMCE_fromFAB&&-1===a.indexOf("://")&&(a=y+a),b.setEditorField(d.title,$(".mce-panel input.mce-link_text_to_display")[0],!0),b.setEditorField(a))};b.setDocumentURL=function(a,c,d){a=d.frontend_link;b.tinyMCE_fromFAB&&(a=y+a);b.setEditorField(d.name,$(".mce-panel input.mce-link_text_to_display")[0]);b.setEditorField(a)};b.setImageURL=function(a,c,d){a="zenario/file.php?c="+(d.short_checksum||d.checksum);c.usage&&"image"!=c.usage&&(a+="&usage="+encodeURIComponent(c.usage));
a+="&filename="+encodeURIComponent(d.filename);b.tinyMCE_fromFAB&&(a=y+a);b.setEditorField(d.alt_tag,$(".mce-panel input.mce-image_alt")[0]);b.setEditorField(a)};b.skinDesc=g;b.getSkinDesc=function(){if(b.skinDesc===g){b.skinDesc={};var a;e.skinId&&(a=e.moduleNonAsyncAJAX("zenario_common_features",{skinId:e.skinId},!1,!0))&&"object"==typeof a&&(b.skinDesc=a)}return b.skinDesc};b.formatFilesizeNicely=function(a,c){if(0>=a)return"0";var b=Math.min(4,Math.floor(Math.log(a)/Math.log(1024)));c=Math.pow(10,
c);return Math.round(c*a/Math.pow(1024,b))/c+m[["_BYTES","_KBYTES","_MBYTES","_GBYTES","_TBYTES"][b]]};b.makeTimeFromParts=function(a,c,b){b==g&&(b="00");return a+":"+c+":"+b};b.showPagePreview=function(a,c,b,f){var h,g="";if(l.tuix&&(f=l.getKeyId(!0))&&(h=l.tuix.items[f])){switch(h.admin_version_status){case "first_draft":case "published_with_draft":case "hidden_with_draft":case "trashed_with_draft":adminVersionStatus="Draft";break;case "published":adminVersionStatus="Published";break;case "hidden":adminVersionStatus=
"Hidden";break;case "trashed":adminVersionStatus="Trashed"}g=h.tag+" Version "+h.version+" ["+adminVersionStatus+"] "+a+" x "+c+" ("+b+")"}else g=b,e.cID&&e.cType&&(f=e.cType+"_"+e.cID);$.colorbox({innerWidth:a+"px",innerHeight:c+"px",maxWidth:!1,maxHeight:!1,iframe:!0,preloading:!1,open:!0,title:g,href:y+"index.php?cID="+f+"&_sk_preview=1",className:"zenario_page_preview_colorbox"})};b.formatOrganizerItemName=function(a,c){var d=g,f,e;if(a.items&&a.items[c])if(d=E(a.label_format_for_picked_items,
a.label_format_for_grid_view))for(var k in a.items[c]){if(x(a.items[c],k)&&-1!=d.indexOf("[["+k+"]]"))for(e=a.items[c][k],a.columns&&a.columns[k]&&(a.columns[k].format||a.columns[k].empty_value)&&(e=b.formatSKItemField(e,a.columns[k]));d!=(f=d.replace("[["+k+"]]",e));)d=f}else d=a.items[c][E(a.default_sort_column,"name")];return d===g?c:d.replace(/\s+/g," ")};b.formatSKItemField=function(a,c){if(c&&c.format){var d=c.format,f="";if(a&&"date"!=d&&"datetime"!=d&&"datetime_with_seconds"!=d&&"remove_zero_padding"!=
d){var h=a.indexOf(" ");-1!=h&&(f=a.substr(h),a=a.substr(0,h))}if("true_or_false"==d)a=C(a)?m.tru:m.fal;else if("yes_or_no"==d)a=C(a)?c.yes_phrase!==g?c.yes_phrase:m.yes:c.no_phrase!==g?c.no_phrase:m.no;else if("remove_zero_padding"==d)a=a.replace(/\b0+/g,"");else if("enum"==d&&c.values&&c.values[a]!==g)"object"==typeof c.values[a]?c.values[a].label!==g&&(a=c.values[a].label):a=c.values[a];else if(("module_name"==d||"module_class_name"==d)&&l.init)a?b.pluginNames[a]&&(a=b.pluginNames[a]):a=m.core;
else if("filesize"==d&&a==1*a)a=b.formatFilesizeNicely(a,1);else if(("language_english_name"==d||"language_local_name"==d)&&b.lang[a])a=b.lang[a].name;else if(("language_english_name_with_id"==d||"language_local_name_with_id"==d)&&b.lang[a])a=b.lang[a].name+" ("+a+")";else if("date"==d||"datetime"==d||"datetime_with_seconds"==d)a=e.formatDate(a,"date"==d?!1:d);a+=f}!a&&c&&c.empty_value&&(a=c.empty_value);return a};b.organizerQuick=function(a,c,d,f,e,k,l,m,n){b.organizerSelect(!1,!1,!1,a,!1,d,f,e,
!1,!1,!1,!1,!1,!0,c,l,g,g,g,m,n)};b.getSKBodyClass=function(a,c){a===g&&(a=n);return"zenario_og "+(a.zenarioONotFull||a.zenarioA.openedInIframe?(a.zenarioOQuickMode?"zenario_organizer_quick":"zenario_organizer_select")+" "+(a.zenarioOOpenOverAdminBox?"zenario_organizer_over_admin_box":"zenario_organizer_under_admin_box"):"zenario_organizer_full")+" "+(a.zenarioOWrapperCSSClass||"")+" "+(c?"zenario_panel_type__"+c:"")};b.organizerSelect=function(a,c,d,f,h,k,m,u,y,w,q,p,x,t,v,r,z,A,D,E,H,I){var J=!t||
b.isFullOrganizerWindow||b.checkIfBoxIsOpen("og");I||(I={});J?(b.SKInit(),p=s("zenario_sk_iframe").contentWindow,x=!1):p=n;e.closeTooltip();p.zenarioOQueue=[{path:f,branch:-1,selectedItems:{}}];-1===f.indexOf("//")&&(k||(k=f),h||(h=f));m===g?h&&-1===h.indexOf("//")&&(m=h):C(m)||(m=!1);p.zenarioOTargetPath=h;p.zenarioOMinPath=k;p.zenarioOMaxPath=m;p.zenarioODisallowRefinersLoopingOnMinPath=C(u);p.zenarioOCallbackObject=a;p.zenarioOCallbackFunction=c;p.zenarioOChoosePhrase=w;p.zenarioOChooseButtonActiveClass=
y;p.zenarioOChooseMultiplePhrase=q;p.zenarioOMultipleSelect=C(d);p.zenarioOAllowNoSelection=C(A);p.zenarioONoSelectionChoosePhrase=D;p.zenarioONotFull=!0;p.zenarioOQuickMode=t;p.zenarioOSelectMode=!t;p.zenarioOSelectObject=I;p.zenarioOOpeningPath=v;p.zenarioOOpeningInstance=r;p.zenarioOCombineItem=z;p.zenarioOReloadOnChanges=E;p.zenarioOWrapperCSSClass=H||"";p.zenarioOOpenOverAdminBox=x;p.zenarioOFirstLoad=!0;J||(l.open(b.getSKBodyClass(p),g,0.8*$(n).width(),50,10,!t,!0,!0,{minWidth:550}),l.init());
p.zenarioO&&p.zenarioO.go(f,-1);J&&(b.openBox(!1,b.getSKBodyClass(p),"AdminOrganizer",!1,!1,50,2,!t,!0,!1,!1),s("zenario_sk_iframe").style.width=e.browserIsIE(6)?"600px":"96%",t?s("zenario_sk_iframe").style.height="100%":s("zenario_sk_iframe").style.height="96%",s("zenario_sk_iframe").contentWindow.zenarioO&&(s("zenario_sk_iframe").contentWindow.zenarioO.lastSize=!1),s("zenario_fbAdminOrganizer").style.left="0px")};b.SKInitted=!1;b.SKInit=function(){b.SKInitted||(s("zenario_fbAdminOrganizer").innerHTML=
'<iframe id="zenario_sk_iframe" src="'+y+"zenario/admin/organizer.php?openedInIframe=1&amp;rand="+(new Date).getTime()+'"></iframe>',b.SKInitted=!0)};b.SKStartInit=function(){if(e.browserIsIE(7))return!1;n.zenario_inIframe||b.openedInIframe||setTimeout(b.SKInit,b.storekeeperInitTime)};b.getCustomFromSK=function(a,c,d,f,e,g){b.SKTarget=a;b.organizerSelect("zenarioA","setCustom",!1,c,d,f,e,g)};b.setCustom=function(a,c,d){s(b.SKTarget).value=c.id;s("name_for_"+b.SKTarget).value=d[d.__label_tag__]};b.setGroupNameAndId=
function(a,c,d){s(b.SKTarget).value=c.id;s("name_for_"+b.SKTarget).value=d.name};b.setUserNameAndId=function(a,c,d){s(b.SKTarget).value=c.id;s("name_for_"+b.SKTarget).value=d.username};b.setContentIdAndCType=function(a,c,d,f){s(b.SKTarget).value=c.id;s("name_for_"+b.SKTarget).value=b.formatOrganizerItemName(f,c.id)};b.removeNameAndId=function(a){s(a).value="";s("name_for_"+a).value=s("nothing_selected_phrase_for_"+a).value};b.multipleLanguagesEnabled=function(){var a,c=0;if(b.lang)for(a in b.lang)if(x(b.lang,
a)&&b.lang[a].enabled&&c++)return!0;return!1};b.uploading=!1;b.canDoHTML5Upload=function(){return n.FileReader};b.clearHTML5UploadFromDragDrop=function(){delete b.uploadPathFromDragDrop;delete b.uploadRequestFromDragDrop;delete b.uploadCallBackFromDragDrop};b.setHTML5UploadFromDragDrop=function(a,c,d,f,e){return b.canDoHTML5Upload()?(b.uploadPathFromDragDrop=a,b.uploadRequestFromDragDrop=c,b.uploadCallBackFromDragDrop=f,E(e,D.body).addEventListener("drop",function(a){d&&d();b.doHTML5UploadFromDragDrop(a)},
!1),!0):!1};b.doHTML5UploadFromDragDrop=function(a){b.stopFileDragDrop(a);b.doHTML5Upload(a.target.files||a.dataTransfer.files,b.uploadPathFromDragDrop,b.uploadRequestFromDragDrop,b.uploadCallBackFromDragDrop)};b.doHTML5Upload=function(a,c,d,f){c&&d&&!b.uploading&&(b.uploadPath=c,b.uploadRequest=d,b.uploadCallBack=f,b.uploadResponses=[],b.uploadFile=-1,b.uploadFiles=a,b.doNextUpload())};b.doNextUpload=function(){var a=$("#zenario_progress_wrap"),c=$("#zenario_progress_name"),d=$("#zenario_progress_stop");
c.text("");d.unbind("click");b.uploading=!!b.uploadFiles[++b.uploadFile];l.init&&l.setWrapperClass("uploading",b.uploading);if(b.uploading)if(a.show().removeClass("zenario_progress_cancelled"),s("zenario_progressbar").style.width="0%",b.uploadFiles[b.uploadFile].size&&b.uploadFiles[b.uploadFile].name)if(b.uploadFiles[b.uploadFile].size>b.maxUpload)b.showMessage(m.uploadTooLarge.replace("[[maxUploadF]]",b.maxUploadF),!0,"error"),b.doNextUpload();else{c.text(b.uploadFiles[b.uploadFile].name);b.uploader=
new XMLHttpRequest;b.uploader.open("POST",b.uploadPath,!0);try{b.uploader.setRequestHeader("X_FILENAME",b.uploadFiles[b.uploadFile].name)}catch(f){}var c=new FormData,e;for(e in b.uploadRequest)x(b.uploadRequest,e)&&c.append(e,""+b.uploadRequest[e]);c.append("Filedata",b.uploadFiles[b.uploadFile]);b.uploader.upload.addEventListener("progress",b.uploadProgress,!1);b.uploader.addEventListener("load",b.uploadDone,!1);b.uploader.addEventListener("error",b.uploadDone,!1);b.uploader.addEventListener("abort",
b.uploadDone,!1);d.click(function(){a.show().removeClass("zenario_progress_cancelled");b.uploader.abort()});b.uploader.send(c)}else b.doNextUpload();else a.hide(),b.uploadCallBack&&b.uploadCallBack(b.uploadResponses)};b.uploadProgress=function(a){var c=0;a.lengthComputable&&(c=100*a.loaded/a.total);s("zenario_progress_wrap").style.display="block";s("zenario_progressbar").style.width=c+"%"};b.uploadDone=function(a){if(b.uploader.responseText&&1!=b.uploader.responseText)try{data=JSON.parse(b.uploader.responseText);
if("object"!=typeof data)throw 0;b.uploadResponses.push(data)}catch(c){b.showMessage(b.uploader.responseText,!0,"error",!1,!0)}b.doNextUpload()};b.debug=function(a,c){n.open(y+"zenario/admin/dev_tools/dev_tools.php?mode="+encodeURIComponent(a)+(c?"&orgMap=1":""));return!1};b.openMenuAdminBox=function(a,c){a||(a={});if(!c){if("preview"==b.pageMode)return!0;if("menu"==b.pageMode&&b.menuWandOn)c="zenario_menu_text";else return!1}e.cID&&(a.cID=e.cID,a.cType=e.cType,a.languageId=e.langId);if("organizer"==
c){var d=e.moduleNonAsyncAJAX("zenario_common_features",{getMenuItemStorekeeperDeepLink:a.id,languageId:a.languageId},!0);if(b.loggedOut(d))return;A.action({organizer_quick:{path:d,target_path:"zenario__menu/panels/menu_nodes",min_path:"zenario__menu/panels/menu_nodes",max_path:"zenario__menu/panels/menu_nodes",disallow_refiners_looping_on_min_path:!1,reload_menu_slots:!0,reload_admin_toolbar:!0}})}else z.open(c,a);return!1};b.reloadMenuPlugins=function(){$(".zenario_slotShownInMenuMode .zenario_slot").each(function(a,
c){if(c.id&&"plgslt_"==c.id.substr(0,7)){var b=c.id.substr(7);e.refreshPluginSlot(b,"lookup",g,!1,!1,!1,!1,!1)}})};b.draft=function(a,c,d,e){if(b.draftDoingCallback)return delete b.draftDoingCallback,!0;delete b.draftDoingCallback;var h;return A.tuix&&A.tuix.sections&&A.tuix.sections.edit&&A.tuix.sections.edit.buttons&&A.tuix.sections.edit.buttons.start_editing&&A.tuix.sections.edit.buttons.start_editing.ajax&&!b.hidden(A.tuix.sections.edit.buttons.start_editing)?(h=$.extend(!0,{},A.tuix.sections.edit.buttons.start_editing),
delete h.ajax.request.switch_to_edit_mode,b.checkSpecificPermsOnThisPage()&&A.tuix.sections.edit.buttons.start_editing.ajax.confirm?(d?d+="\n\n"+h.ajax.confirm.message__editing_published:(d=h.ajax.confirm.message__editing_published,e=h.ajax.confirm.button_message),e='<input type="button" class="submit_selected" value="'+u(e)+'" onclick="zenarioA.draftSetCallback(\''+u(a)+"'); zenarioAT.action2();\"/>",c&&(e+='<input type="button" class="submit" value="'+u(h.ajax.confirm.button_message__just_view)+
'" onclick="zenarioA.draftDoCallback(\''+u(a)+"');\"/>"),e+='<input type="button" class="submit" value="'+u(h.ajax.confirm.cancel_button_message)+'"/>',h.ajax.confirm.message="\x3c!--Button_HTML:"+e+"--\x3e"+d):d?(b.draftSetCallback(a),h.ajax.confirm={message:d,button_message:e,cancel_button_message:b.phrase.cancel,message_type:"warning"}):(b.draftSetCallback(a),delete h.ajax.confirm),b.action(A,h),!1):d?(e='<input type="button" class="submit_selected" value="'+u(e)+'" onclick="zenarioA.draftDoCallback(\''+
u(a)+"');\"/>",e+='<input type="button" class="submit" value="'+b.phrase.cancel+'"/>',b.showMessage(d,e,"warning"),!1):!0};b.savePageMode=function(a,c){c||(c={});c._save_page_mode=b.pageMode;c._save_page_toolbar=b.toolbar;c._save_page_slot_wand=b.slotWandOn?1:"";c._save_page_show_grid=b.showGridOn?1:"";$.ajax({type:"POST",url:y+"zenario/admin/quick_ajax.php",data:c,async:a})};b.draftSetCallback=function(a){b.savePageMode(!1,{_draft_set_callback:a})};b.draftDoCallback=function(a){b.draftDoingCallback=
!0;$("#"+a).click();delete b.draftDoingCallback};b.hidden=function(a,c,d,e){var h;return C(a.hidden)||(h=a.visible_if||a.js_condition)&&!b.eval(h,a,d,e)?!0:!1};b.lastToast=!1;b.clearLastToast=!1;b.toast=function(a){if(a!==g&&_.isObject(a)){b.clearLastToast&&clearTimeout(b.clearLastToast);b.lastToast=JSON.stringify(a);setTimeout(function(){b.lastToast=!1},6E4);var c=a.message_type,d=toastr.info;switch(a.message_type){case "error":case "warning":case "success":d=toastr[c]}d(a.message,a.title,a.options)}};
b.rememberToast=function(){b.lastToast&&e.nonAsyncAJAX(y+"zenario/admin/quick_ajax.php",{_remember_toast:b.lastToast})};b.checkActionUnique=function(a){var b=[],d,e="admin_box ajax combine_items navigation_path frontend_link help link onclick panel pick_items popout organizer_quick upload".split(" ");for(d in e)x(e,d)&&a[e[d]]&&b.push(e[d]);switch(b.length){case 1:return!0;case 0:return!1;default:return console.log(a),alert("This navigation or button has multiple actions associated with it:\n\n"+
b+"\n\n(See the console log for the faulty definition.)"),!1}};b.action=function(a,c,d,f,h,k,s){if(a.uploading||!h&&!b.checkActionUnique(c))return!1;var A;A="zenarioO"==a.encapName?"handleOrganizerPanelAJAX":"zenarioAT"==a.encapName?"handleAdminToolbarAJAX":"zenarioW"==a.encapName?"handleWizardAJAX":"handleAdminBoxAJAX";!h&&c.link?h=c.link:!h&&c.panel&&c.panel._path_here&&(h={path:c.panel._path_here});if(!h||!l.pathNotAllowed(h)){l.yourWorkInProgressLastUpdated=0;a.pickItemsItemLevel=d;a.postPickItemsObject=
!1;var D,w,q;if((q=c.upload)||(q=c.ajax))!d&&c.ajax&&c.ajax.pass_matched_ids&&"zenarioO"==a.encapName?(D="zenario/admin/organizer.ajax.php?__pluginClassName__="+q.class_name+"&path="+l.path+"&_get_matched_ids=1&method_call="+A+e.urlRequest(l.lastRequests),w={}):(D="zenario/ajax.php?__pluginClassName__="+q.class_name+"&__path__="+a.path+"&method_call="+A,w=a.getKey(d)),q.request&&$.extend(w,q.request),k&&$.extend(w,k);if(c.upload){q=!b.canDoHTML5Upload();k='<input type="file" name="Filedata"';var p,
G,t;if(t=c.upload.accept||c.upload.extensions){t=_.isString(t)?t.split(","):_.toArray(t);for(p in t)if(x(t,p))switch(G=t[p],G){case "text":t[p]="text/*";break;case "images":t[p]="image/*";break;case "video":t[p]="video/*";break;case "audio":t[p]="audio/*";break;default:-1==G.indexOf("/")&&"."!=G.substr(0,1)&&(t[p]="."+G)}k+=' accept="'+u(t.join(","))+'"'}else"Images"==c.upload.fileDesc&&(k+=' accept="image/*"');q&&(k+=' id="zenario_fallback_fileupload"');!q&&C(c.upload.multi)&&(k+=" multiple");k+=
"/>";if(q)c=$.extend(!0,{},c),w._html5_backwards_compatibility_hack=1,c.ajax={class_name:c.upload.class_name,confirm:{message:k,html:!0,button_message:m.upload,cancel_button_message:m.cancel,form:!0},request:w};else{c=$(k);c.change(function(){a.uploadStart&&a.uploadStart();b.doHTML5Upload(this.files,y+D,w,function(b){a.uploadComplete(b)})});c.click();return}}if(h)C(h.unselect_items)&&(l.selectedItems={},l.saveSelection()),l.go(h.path,f,h.refiner?{id:d?l.getKeyId():"",name:h.refiner}:g,g,g,g,g,s);
else if(c.frontend_link){var v,r;c=c.frontend_link;var F=!1;d&&(v=a.getKeyId(!0))&&(r=a.tuix.items[v])&&r.frontend_link&&(c=r.frontend_link);"zenarioO"==a.encapName&&(c=l.parseReturnLink(c),-1!=c.indexOf("&zenario_sk_return=")&&(F=!0));F||"zenario/admin/welcome.php"==c.substr(0,25)?e.goToURL(e.addBasePath(c)):-1!==c.indexOf("://")&&0!==c.indexOf(y)?n.open(c):"zenarioAT"==a.encapName?e.goToURL(e.addBasePath(c)):H&&!H.zenarioO?n.opener.location=e.addBasePath(c):n.storekeeperChildWindow&&!n.storekeeperChildWindow.closed?
n.storekeeperChildWindow.location=e.addBasePath(c):n.storekeeperChildWindow=n.open(e.addBasePath(c))}else if(c.navigation_path)c=c.navigation_path,d&&(v=a.getKeyId(!0))&&(r=a.tuix.items[v])&&r.navigation_path&&(c=r.navigation_path),"zenarioO"==a.encapName?l.go(c,-1):e.goToURL(e.addBasePath((n.zenarioATLinks&&n.zenarioATLinks.organizer||"zenario/admin/organizer.php")+"#"+c));else if(c.admin_box){b.nowDoingSomething("loading");d=E(a.getKey(d),{});if(c.admin_box.key)for(F in c.admin_box.key)x(c.admin_box.key,
F)&&(d[F]=c.admin_box.key[F]);z.open(c.admin_box.path,d,c.admin_box.tab,c.admin_box.values,g,C(c.admin_box.create_another)?c.admin_box:!1,g,C(c.admin_box.pass_matched_ids))}else if(c.popout){c=$.extend(!0,{},c.popout);d&&(v=a.getKeyId(!0))&&(r=a.tuix.items[v])&&(r.popout&&(c=$.extend(c,r.popout)),!c.title&&a.popoutLabelFormat&&(c.title=a.applyMergeFields(a.popoutLabelFormat,!1,v)));r&&r.href&&c.href===g?c.href=r.href:r&&r.frontend_link&&c.href===g?c.href=l.parseReturnLink(r.frontend_link,"_sk_preview=1"):
r&&c.href&&(c.href+=-1===c.href.indexOf("?")?"?":"&",r.checksum?(c.href+="c="+encodeURIComponent(r.checksum),v==1*v&&(c.href+="&id="+v)):c.href=v==1*v?c.href+("id="+v):c.href+("c="+encodeURIComponent(v)),d=E(a.getKey().usage,r.usage))&&(c.href+="&usage="+encodeURIComponent(d));if(c.href){if(d=r&&r.filename||c.options&&c.options.filename||c.filename){if(v=d.match(/(.*) \[.*\]/))d=v[1];c.href+="&filename="+encodeURIComponent(d)}c.href=e.addBasePath(c.href)}r&&r.width&&(c.initialWidth=r.width);r&&r.height&&
(c.initialHeight=r.height);if(c.css_class){var K=(""+c.css_class).split(" ");c.onOpen=function(){e.addClassesToColorbox(K)};c.onClosed=function(){e.removeClassesToColorbox(K)}}c.iframe&&c.width===g&&(c.width=Math.min(Math.floor(0.93*$(n).width()),1200));c.iframe&&c.height===g&&(c.height=Math.floor(0.9*$(n).height()));c.preloading===g&&(c.preloading=!1);$.colorbox(c)}else if(c.organizer_quick)r=c.organizer_quick.path,d&&(v=a.getKeyId(!0))&&(r=r.replace(/\[\[id\]\]/g,v)),b.organizerQuick(r,c.organizer_quick.min_path||
c.organizer_quick.max_path||c.organizer_quick.path,c.organizer_quick.min_path,c.organizer_quick.max_path,C(c.organizer_quick.disallow_refiners_looping_on_min_path),g,g,a.encapName);else if(c.pick_items&&!d)c.pick_items.ajax&&(a.postPickItemsObject=c.pick_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+c.pick_items.class_name+"&__path__="+a.path+"&method_call="+A,a.actionRequests=a.getKey(d),c.pick_items.request&&$.extend(a.actionRequests,c.pick_items.request),b.organizerSelect(a.encapName,
"pickItems",c.pick_items.multiple_select,c.pick_items.path,c.pick_items.target_path,c.pick_items.min_path,c.pick_items.max_path,c.pick_items.disallow_refiners_looping_on_min_path,!0,c.pick_items.one_to_one_choose_phrase,c.pick_items.one_to_many_choose_phrase,g,g,g,g,g,a.getLastKeyId(!0),c.pick_items.allow_no_selection,c.pick_items.one_to_no_selection_choose_phrase,g,g,c.pick_items);else if(c.combine_items&&d)c.combine_items.ajax&&(a.postPickItemsObject=c.combine_items),a.actionTarget="zenario/ajax.php?__pluginClassName__="+
c.combine_items.class_name+"&__path__="+a.path+"&method_call="+A,a.actionRequests=a.getKey(d),c.combine_items.request&&$.extend(a.actionRequests,c.combine_items.request),b.organizerSelect(a.encapName,"pickItems",c.combine_items.multiple_select,c.combine_items.path,c.combine_items.target_path,c.combine_items.min_path,c.combine_items.max_path,c.combine_items.disallow_refiners_looping_on_min_path,!0,1<a.itemsSelected&&c.combine_items.many_to_one_choose_phrase?c.combine_items.many_to_one_choose_phrase:
c.combine_items.one_to_one_choose_phrase,1<a.itemsSelected&&c.combine_items.many_to_many_choose_phrase?c.combine_items.many_to_many_choose_phrase:c.combine_items.one_to_many_choose_phrase,g,g,g,g,g,a.getKeyId(!1),c.combine_items.allow_no_selection,1<a.itemsSelected&&c.combine_items.many_to_no_selection_choose_phrase?c.combine_items.many_to_no_selection_choose_phrase:c.combine_items.one_to_no_selection_choose_phrase,g,g,c.combine_items);else if(c.ajax)if(a.actionTarget=D,a.actionRequests=w,c.ajax.confirm){r=
C(c.ajax.confirm.html);v=C(c.ajax.confirm.download);d=c.ajax.confirm.message?c.upload?c.ajax.confirm.message:a.applyMergeFieldsToLabel(c.ajax.confirm.message,r,d,c.ajax.confirm.multiple_select_message):e.nonAsyncAJAX(y+a.actionTarget+e.urlRequest(a.actionRequests),!1);v&&(a.actionRequests._download=1,a.searchTerm!==g&&(a.actionRequests._search=a.searchTerm),a.prefs[a.path]&&a.prefs[a.path].sortBy?(a.actionRequests._sort_col=a.prefs[a.path].sortBy,a.actionRequests._sort_desc=a.prefs[a.path].sortDesc?
1:0):a.actionRequests._sort_col=a.labelTag);f=k="";if(v||c.upload){k+='<form id="zenario_bc_form" action="'+u(y+a.actionTarget+"&_sk_form_submission=1")+'" onsubmit="get(\'preloader_circle\').style.visibility = \'visible\';" target="zenario_iframe" method="post"'+(c.upload?' enctype="multipart/form-data"':"")+">";for(F in a.actionRequests)x(a.actionRequests,F)&&(k+='<input type="hidden" value="'+u(a.actionRequests[F])+'" name="'+u(F)+'"/>');r||(d=u(d,!0),r=!0)}k+=d;v||c.upload?(k+="</form>",f='<input type="button" class="submit_selected" value="'+
u(c.ajax.confirm.button_message)+'" onclick="get(\'zenario_bc_form\').submit();"/>'):f='<input type="button" class="submit_selected" value="'+u(c.ajax.confirm.button_message)+'" onclick="'+a.encapName+'.action2();"/>';f+='<input type="button" class="submit" value="'+u(c.ajax.confirm.cancel_button_message)+'"/>';b.showMessage(k,f,c.ajax.confirm.message_type,g,!r);c.upload&&(e.browserIsIE()||$("#zenario_fallback_fileupload").click())}else a.action2();else c.help&&(d=E(c.help.message_type,"question"),
r=!C(c.help.html),c.help.message&&b.showMessage(c.help.message,!0,d,!1,r))}};b.isHtaccessWorking=function(){return"Yes"==e.nonAsyncAJAX(y+"zenario/includes/test_files/is_htaccess_working.txt",!0)};b.checkFunctionExists=function(a,b){return b?n[b]&&"function"==typeof n[b][a]:"function"==typeof n[a]};b.resizeImage=function(a,b,d,e,h,g){h.width=a;h.height=b;a*=1;b*=1;if(a!=d||b!=e)!g&&a<=d&&b<=e||(d/a<e/b?(h.width=d,h.height=Math.floor(b*d/a)):(h.height=e,h.width=Math.floor(a*e/b)))};b.sortArray=function(a,
c){return b.sortLogic(a,c,1)};b.sortArrayByOrd=function(a,c){return b.sortLogic(a,c,"ord")};b.sortArrayByOrdinal=function(a,c){return b.sortLogic(a,c,"ordinal")};b.sortArrayWithGrouping=function(a,c){return a[2]===c[2]?b.sortLogic(a,c,1):a[2]===g?b.sortLogic(a,c,1,2):b.sortLogic(a,c,2,1)};b.sortLogic=function(a,b,d,e){a=a[d];b=e===g?b[d]:b[e];if(a===b)return 0;d=a==1*a;e=b==1*b;return d&&e?1*a<1*b?-1:1:d||e?d?-1:1:(""+a).toUpperCase()<(""+b).toUpperCase()?-1:1};b.readData=function(a,c,d,f){try{if(a=
JSON.parse(a),"object"!=typeof a)throw 0;}catch(g){return f?(c='<input id="zenario_retry" class="submit_selected" type="button" value="'+m.retry+'"/>',b.nowDoingSomething(),b.showMessage(a,c,"error",!0,!0),$("#zenario_retry").click(function(){setTimeout(f,1)})):b.showMessage(a,!0,"error",!1,!0),b.hideAJAXLoader(),!1}c&&e.setSessionStorage(a,c,d,!0);return a};b.AJAXErrorHandler=function(a,c,d){if(!b.unloaded){var f="",g=b.adminSettings.show_dev_tools;d&&(f+="<h1><b>"+u(a.status+" "+d)+"</b></h1>");
if(404==a.status)f+="<p>"+(g?m.error404Dev:m.error404)+"</p>";else if(500==a.status)f+="<p>"+(g?m.error500Dev:m.error500)+"</p>";else if(0==a.status||"timeout"==c)f+="<p>"+(g?m.errorTimedOutDev:m.errorTimedOut)+"</p>";a.responseText&&(f+="<div>"+a.responseText+"</div>");f+='<p style="display: none;">Last URL accessed: '+u(e.checkLastUrl)+"</p>";showErrorMessage=function(){if(a.zenario_retry){var c='<input id="zenario_retry" class="submit_selected" type="button" value="'+m.retry+'"/>';b.nowDoingSomething();
b.showMessage(f,c,"error",!0);$("#zenario_retry").click(function(){setTimeout(a.zenario_retry,1)})}else b.showMessage(f,"","error")};0==a.status||"timeout"==c?setTimeout(showErrorMessage,750):showErrorMessage()}};$.ajaxSetup({error:b.AJAXErrorHandler});b.attempts={};b.attemptNum=0;b.keepTrying=function(a,c){if(c===g)c=++b.attemptNum,b.attempts[c]=!0;else if(!b.attempts[c])return;a(c);setTimeout(function(){b.keepTrying(a,c)},3E4)};b.stopTrying=function(a){return b.attempts[a]?(delete b.attempts[a],
!0):!1};b.onunload=function(a){n.onpagehide&&a.persisted||(b.unloaded=!0,b.closeFloatingBox())};n.onpagehide?n.addEventListener("pagehide",b.onunload,!1):n.onunload=b.onunload;b.stopDefault=function(a){(a=a||event)&&a.stopPropagation&&a.stopPropagation();a&&a.preventDefault&&a.preventDefault();return!1};b.stopFileDragDrop=function(a){var b=!1;a.dataTransfer&&a.dataTransfer.types&&(b="function"==typeof a.dataTransfer.types.contains?a.dataTransfer.types.contains("Files"):"Files"==""+a.dataTransfer.types||
a.dataTransfer.types[0]&&"Files"==""+a.dataTransfer.types[0]);b&&(a.stopPropagation(),a.preventDefault())};b.disableFileDragDrop=function(a){b.canDoHTML5Upload()&&(a.addEventListener("drop",b.stopDefault,!1),a.addEventListener("dragenter",b.stopDefault,!1),a.addEventListener("dragover",b.stopDefault,!1),a.addEventListener("dragexit",b.stopDefault,!1))};b.checkCookiesEnabled=function(){var a=y+"zenario/cookies.php?check_cookies_enabled=1&no_cache=1",b=new e.callback;e.ajax(a).after(function(d){d?b.call(d):
e.ajax(a).after(function(a){b.call(a)})});return b};$(D).ready(function(){b.disableFileDragDrop(D.body)});n.onbeforeunload=b.onbeforeunload});

zenario.lib(function(k,g,w,x,y,z,r,n,s,A,t,B,C,D,E,F,G,u,v,m,q){g=v(q.form_builder=u(q.form_builder_base_class));g.init=function(){this.saveChangesWarningMessage="You are currently editing this form. If you leave now you will lose any unsaved changes.";this.valuesChanged=this.changingForm=!1;this.formatOnChange="values_source readonly_or_mandatory mandatory_condition_field_id visibility visible_condition_field_id validation default_value_options send_to_crm".split(" ");this.formEditorSelector="#organizer_form_builder";
this.formFieldsSelector="#organizer_form_fields .form_field";this.formFieldInlineButtonsSelector="#organizer_form_fields .form_field_inline_buttons";this.pageBreakCount=0;this.saveButtonText="Save changes";this.cancelButtonText="Reset"};g.getOrderedItems=function(b){var a,d,c,f=[];for(a in b)if(m(b,a)){d=b[a];var h=_.clone(d);if(!d.remove){if(h.lov){var e=[];for(c in h.lov)m(h.lov,c)&&(d=h.lov[c],e.push(d));e.sort(this.sortByOrd);h.lov=e}f.push(h)}}f.sort(this.sortByOrd);return f};g.getOrderedItemCRMLOV=
function(b,a){var d,c,f=[];for(d in b)m(b,d)&&(c=b[d],c.remove||(c=_.clone(c),c.id=d,a&&isNaN(parseInt(d))&&(c.crm_value=c.label),f.push(c)));f.sort(this.sortByOrd);return f};g.getOrderedTranslations=function(b){var a,d,c=[],f=this.tuix.items[this.current.id],h=this.getOrderedItems(this.tuix.languages);for(a in b)if(m(b,a)){d=b[a];var e=this.tuix.translatable_fields[a],p=!1;e.value=f[e.column];e.value||(e.value="(No text is defined in the default language)",p=!0);e.phrases=[];var g,k;for(g in h)m(h,
g)&&(k=h[g],parseInt(k.translate_phrases)&&e.phrases.push({field_column:e.column,language_id:k.id,language_name:k.english_name,phrase:d.phrases[k.id]&&!p?d.phrases[k.id]:"",disabled:p}));c.push(e)}c.sort(this.sortByOrd);return c};g.getOrderedDatasetFields=function(b){var a={};for(e in this.tuix.items)m(this.tuix.items,e)&&(g=this.tuix.items[e],g.field_id&&(a[g.field_id]=!0));var d,c,f,h,e,g,l=[];for(c in b)if(m(b,c)){f=b[c];d={};for(h in f)m(f,h)&&(g=f[h],"fields"!=h&&(d[h]=g));if(f.fields){d.fields=
[];for(e in f.fields)m(f.fields,e)&&(g=f.fields[e],!0!==a[e]&&d.fields.push(g));d.fields.sort(this.sortByOrd)}l.push(d)}l.sort(this.sortByOrd);for(var k in l)m(l,k)&&(f=l[k],a=f.fields,f.fields=[],b={index:1,fields:a.splice(0,Math.ceil(a.length/2))},a={index:2,fields:a},f.columns=[b,a]);return l};g.showPanel=function(b,a,d){b.html("").hide();this.changesSaved&&(this.changesSaved=!1,n.toast({message_type:"success",message:"Your changes have been saved!"}));var c=this;b=_.clone(this.tuix.items);var f=
{items:{},field:{},details_section:"field_type_list",form_title:this.tuix.form_title};this.currentFieldTab=this.currentFieldTab?this.currentFieldTab:"details";"translations"!=this.currentFieldTab||this.tuix.show_translation_tab||(this.currentFieldTab="details");this.current&&this.current.id&&this.tuix.items[this.current.id]?(f.items=this.getOrderedItems(b),!this.tuix.items[this.current.id]&&this.currentFieldOrd!==k&&f.items[this.currentFieldOrd]&&(this.current.id=f.items[this.currentFieldOrd].id),
f.details_section="field_details",f.field=this.getCurrentFieldDetailsMergeFields(),b[this.current.id].selected=!0):this.current={id:!1,type:!1};f.items=this.getOrderedItems(b);b=n.microTemplate("zenario_organizer_form_builder",f);a.html(b).show();this.current&&this.initCurrentFieldDetails();this.maxNewCustomFieldValue=this.maxNewCustomField=this.maxNewCustomTab=1;this.current_db_columns=this.tuix.existing_db_columns;this.deleting=!1;this.pageBreakCount=this.tuix.pageBreakCount;this.initSection();
$("#organizer_field_type_list div.field_type, #organizer_centralised_field_type_list div.field_type").draggable({connectToSortable:"#organizer_form_fields",helper:"clone"});this.initLinkedFieldsAdder();$(this.formFieldsSelector).on("click",function(){c.fieldClick($(this))});this.initDeleteButtons();this.initFormSettingsButton();d.html("").show()};g.initLinkedFieldsAdder=function(){var b=this.getOrderedDatasetFields(this.tuix.dataset_fields),b=n.microTemplate("zenario_organizer_form_builder_dataset_tab",
b);$("#organizer_linked_field_type_list").html(b);$("#organizer_linked_field_type_list div.dataset_field").draggable({connectToSortable:"#organizer_form_fields",helper:"clone"})};g.initDeleteButtons=function(){var b=this;$("#organizer_form_fields .delete_icon").off().on("click",function(a){var d=this,c={mode:"get_field_response_count",id:$(this).data("id")};b.sendAJAXRequest(c).after(function(a){a=JSON.parse(a);var c="",e="";a.count?(e=1==a.count?"":"s",c+="<p>This field has "+a.count+" user response"+
e+" recorded against it.</p>",c+="<p>When you save changes to this form, that data will be deleted.</p>"):c+="<p>There are no user responses for this field.</p>";b.deleting=!0;n.showMessage(c+"<p>Delete this form field?</p>","Delete","warning",!0);b.listenForDelete($(d).data("id"))});a.stopPropagation()})};g.listenForDelete=function(b){var a=this;$("#zenario_fbMessageButtons input.submit_selected").on("click",function(){setTimeout(function(){!0==a.deleting&&a.deleteField(b);a.deleting=!1})})};g.deleteField=
function(b){var a=this,d=function(c){if(_.isEmpty(c)){var d,h;b===k&&(b=a.current.id);c=a.tuix.items[b];"page_break"==c.type&&a.pageBreakCount--;a.tuix.items[b]={remove:!0};d=$("#organizer_form_field_"+b);c.field_id&&a.initLinkedFieldsAdder();d&&(h=a.selectNextField(d),a.changeMadeToPanel(),d.animate({height:0,opacity:0},500,function(){d.remove();!1===h&&a.showNoFieldsMessage()}))}};(cb=this.validate(!0))?cb.after(d):d([])};g.selectNextField=function(b){for($next=b.prev();1==$next.length;)if(this.tuix.items[$next.data("id")]&&
this.tuix.items[$next.data("id")].remove)$next=$next.prev();else break;if(0==$next.length)for($next=b.next();1==$next.length;)if(this.tuix.items[$next.data("id")]&&this.tuix.items[$next.data("id")].remove)$next=$next.next();else break;return 1==$next.length?(this.fieldClick($next),$next):!1};g.showNoFieldsMessage=function(){$("#organizer_section_"+this.currentTab).addClass("empty").html('<span class="no_fields_message">There are no fields on this form</span>');this.showDetailsSection("organizer_field_type_list")};
g.initSection=function(){var b=this;$("#organizer_form_fields").sortable({items:"div.form_field",placeholder:"preview",receive:function(a,d){$(this).find("div.field_type, div.dataset_field").each(function(){b.addNewField($(this))})},start:function(a,d){b.startIndex=d.item.index()},stop:function(a,d){b.startIndex!=d.item.index()&&("field"==b.current.type&&(b.currentFieldOrd=$("#organizer_form_field_"+b.current.id).index()),b.changeMadeToPanel())}})};g.removeNoItemsMessage=function(b){$("#organizer_section_"+
b).removeClass("empty").find("span.no_fields_message").remove()};g.addNewField=function(b){var a="t"+this.maxNewCustomField++,d=b.data("id"),c=b.data("tab_name"),f="",h={},e={form_field_id:a,field_label:"Untitled"};d&&c?e.type=this.tuix.dataset_fields[c].fields[d].type:(e.type=b.data("type"),e.name="Untitled "+this.getFieldReadableType(e.type).toLowerCase());d&&c&&(datasetField=this.tuix.dataset_fields[c].fields[d],e.field_label=datasetField.label,e.name=datasetField.label,e.field_id=d,e.lov=datasetField.lov);
this.removeNoItemsMessage(this.currentTab);if(!e.lov&&-1<$.inArray(e.type,["checkboxes","radios","select"])){e.lov={};for(var g=1;3>=g;g++){var l="t"+this.maxNewCustomFieldValue++;e.lov[l]={is_new_value:!0,id:l,ord:g,label:"Option "+g}}}else if(d||"centralised_radios"!=e.type&&"centralised_select"!=e.type)"page_break"==e.type&&(e.next_button_text="Next",e.previous_button_text="Previous",e.name="Page break "+ ++this.pageBreakCount);else{for(method in this.tuix.centralised_lists.values)if(m(this.tuix.centralised_lists.values,
method)){f=method;break}e.lov=_.clone(this.tuix.centralised_lists.initial_lov)}mergeFields=_.clone(e);e.lov&&(mergeFields.lov=this.getOrderedItemCRMLOV(e.lov));if(this.tuix.show_translation_tab){h.field_label={phrases:{}};"section_description"==e.type&&(h.description={phrases:{}});if("text"==e.type||"textarea"==e.type)"text"==e.type&&(h.validation_error_message={phrases:{}}),h.placeholder={phrases:{}};if("page_break"!=e.type||"section_description"!=e.type)h.note_to_user={phrases:{}},h.required_error_message=
{phrases:{}}}g=n.microTemplate("zenario_organizer_form_builder_field",mergeFields);b.replaceWith(g);$.extend(e,{is_new_field:!0,just_added:!0,values_source:f,readonly_or_mandatory:"none",default_value_mode:"none",visibility:"visible",remove:!1,_crm_data:{},_translations:h});this.tuix.items[a]=e;b=$("#organizer_form_field_"+a);b.effect({effect:"highlight",duration:1E3});this.initField(b);this.fieldClick(b);d!==k&&c!==k&&this.initLinkedFieldsAdder()};g.fieldClick=function(b,a){var d=this,c=function(c){_.isEmpty(c)&&
(c=b.data("id"),d.valuesChanged=!1,d.current={type:"field",id:c},d.currentFieldOrd=b.index(),$(d.formFieldsSelector).removeClass("selected"),b.addClass("selected"),d.currentFieldTab=a?a:"details",d.setCurrentFieldDetails(),$(d.formFieldInlineButtonsSelector).hide(),$("#organizer_form_field_inline_buttons_"+d.current.id).show(),d.showDetailsSection("organizer_field_details"))};this.save();(cb=this.validate())?cb.after(c):c([])};g.setCurrentFieldDetails=function(){var b=this.getCurrentFieldDetailsMergeFields(),
b=n.microTemplate("zenario_organizer_form_builder_field_details",b);$("#organizer_field_details_inner").html(b);this.initCurrentFieldDetails()};g.getCurrentFieldDetailsMergeFields=function(){var b=this.tuix.items[this.current.id]||{},a=_.clone(b);a.currentFieldTab=this.currentFieldTab;a.formattedType=this.getFieldReadableType(a.type);a.field_id&&(a.formattedType+=", dataset field");a.crm_enabled=this.tuix.crm_enabled;var d,c,f={},h={},e={},g={};for(d in this.tuix.items)m(this.tuix.items,d)&&(c=this.tuix.items[d],
-1!=["integer","number","floating_point"].indexOf(c.field_validation)&&(f[d]=_.clone(c)),-1!="checkbox checkboxes date editor radios centralised_radios select centralised_select text textarea url attachment calculated".split(" ").indexOf(c.type)&&(h[d]=_.clone(c)),"centralised_select"==c.type&&d!=this.current.id&&(e[d]=_.clone(c)),-1!="checkbox group radios select centralised_radios centralised_select".split(" ").indexOf(c.type)&&d!=this.current.id&&(g[d]={label:c.name,ord:c.ord}));c={};var l=1;for(func in this.tuix.centralised_lists.values)m(this.tuix.centralised_lists.values,
func)&&(details=this.tuix.centralised_lists.values[func],c[func]={ord:l++,label:details.label});a.values_source_options=this.createSelectList(c,a.values_source);this.tuix.centralised_lists.values[a.values_source]&&this.tuix.centralised_lists.values[a.values_source].info.can_filter&&(a.show_source_filter=!0,a.source_filter_label=this.tuix.centralised_lists.values[a.values_source].info.filter_label);l={};for(d in e)m(e,d)&&(c=e[d],l[d]={ord:c.ord,label:c.name});a.filter_on_field_options=this.createSelectList(l,
a.filter_on_field,!0);a.readonly_or_mandatory_options=this.createSelectList({none:{ord:1,label:"None"},mandatory:{ord:2,label:"Mandatory"},readonly:{ord:3,label:"Read-only"},conditional_mandatory:{ord:4,label:"Mandatory on condition"}},a.readonly_or_mandatory);a.mandatory_condition_field_id_options=this.createSelectList(g,a.mandatory_condition_field_id,!0);c=this.tuix.items[a.mandatory_condition_field_id];e={};l=!0;c&&("checkbox"==c.type||"group"==c.type?e={0:{label:"Unchecked",ord:1},1:{label:"Checked",
ord:2}}:(e=c.lov,l="-- Any value --"));""!==a.mandatory_condition_field_id&&a.mandatory_condition_field_id!==k&&(a.mandatory_condition_field_value_options=this.createSelectList(e,a.mandatory_condition_field_value,l));a.visibility_options=this.createSelectList({visible:{ord:1,label:"Visible"},hidden:{ord:2,label:"Hidden"},visible_on_condition:{ord:3,label:"Visible on condition"}},a.visibility);a.visible_condition_field_id_options=this.createSelectList(g,a.visible_condition_field_id,!0);c=this.tuix.items[a.visible_condition_field_id];
e={};l=!0;c&&("checkbox"==c.type||"group"==c.type?e={0:{label:"Unchecked",ord:1},1:{label:"Checked",ord:2}}:(e=c.lov,l="-- Any value --"));""!==a.visible_condition_field_id&&a.visible_condition_field_id!==k&&(a.visible_condition_field_value_options=this.createSelectList(e,a.visible_condition_field_value,l));a.validation_options=this.createSelectList({none:{ord:1,label:"None"},email:{ord:2,label:"Email"},URL:{ord:3,label:"URL"},number:{ord:4,label:"Number"},integer:{ord:5,label:"Integer"},floating_point:{ord:6,
label:"Floating point"}},a.field_validation);a.size_options=this.createSelectList({small:{ord:1,label:"Small"},medium:{ord:2,label:"Medium"},large:{ord:3,label:"Large"}},a.size,!0);g={};for(d in f)m(f,d)&&(c=f[d],g[d]={ord:c.ord,label:c.name});a.numeric_field_1_options=this.createSelectList(g,a.numeric_field_1,!0);a.numeric_field_2_options=this.createSelectList(g,a.numeric_field_2,!0);a.calculation_type_options=this.createSelectList({"+":{ord:1,label:"+"},"-":{ord:2,label:"-"}},a.calculation_type);
f={};for(d in h)m(h,d)&&(c=h[d],f[d]={ord:c.ord,label:c.name});a.restatement_field_options=this.createSelectList(f,a.restatement_field);a.default_value_mode_options=this.createRadioList({none:{ord:1,label:"Don't pre-populate"},value:{ord:2,label:"Pre-populate with value"},method:{ord:3,label:"Call a module's static method to get the value"}},a.default_value_mode,"default_value_mode");d={};"checkbox"==a.type||"group"==a.type?d={0:{ord:1,label:0},1:{ord:2,label:1}}:-1!=["radios","centralised_radios",
"select","centralised_select"].indexOf(a.type)&&(d=a.lov);a.default_value_lov_options=this.createSelectList(d,a.default_value);a.translatable_fields=this.getOrderedTranslations(a._translations);a.hasCRMValues=this.fieldCanHaveCRMValues(a.type);a.hasCRMValues&&("checkbox"==a.type?(b={0:{ord:1,label:0,crm_value:0},1:{ord:2,label:1,crm_value:1}},a._crm_data&&a._crm_data.values&&(b=a._crm_data.values),a.crm_values=this.getOrderedItemCRMLOV(b)):a.crm_values=this.getOrderedItemCRMLOV(b.lov,!a.field_id&&
("select"==a.type||"radios"==a.type)));a.showDetailsTab=!0;a.showAdvancedTab="page_break"!=a.type;a.showValuesTab=-1!=["select","radios","checkboxes"].indexOf(a.type);a.showTranslationsTab=this.tuix.show_translation_tab&&"page_break"!=a.type;a.showCRMTab=a.crm_enabled&&"page_break"!=a.type&&"section_description"!=a.type;return a};g.initCurrentFieldDetails=function(){var b=this,a=this.tuix.items[this.current.id]||{};$("#organizer_field_details :input").off().on("change",function(){b.changeMadeToPanel()});
$('#organizer_field_details input[type="text"], #organizer_field_details textarea, #zenario_field_details_header_content input[type="text"]').on("keyup",function(){b.changeMadeToPanel()});$("#field__field_label").on("keyup",function(){var c=$(this).val();$("#organizer_form_field_"+b.current.id+" .label").text(c);a.just_added&&$("#field__name").val(c)});a.field_id||($("#zenario_field_details_header_content .edit_field_name_button").off().on("click",function(){$("#zenario_field_details_header_content .view_mode").hide();
$("#zenario_field_details_header_content .edit_mode").show()}),$("#zenario_field_details_header_content .done_field_name_button").off().on("click",function(){$("#zenario_field_details_header_content .edit_mode").hide();$("#zenario_field_details_header_content .view_mode").show();var a=$('#zenario_field_details_header_content .edit_mode input[name="name"]').val();$("#zenario_field_details_header_content .view_mode h5").text(a)}));$("#field__note_to_user").on("keyup",function(){var a=$(this).val(),
c=$("#organizer_form_field_note_below_"+b.current.id);$("#organizer_form_field_note_below_"+b.current.id+" div.zenario_note_content").html(a);c.toggle(""!==a)});if("text"==a.type||"textarea"==a.type)$("#field__placeholder").on("keyup",function(){$("#organizer_form_field_"+b.current.id+" :input").prop("placeholder",$(this).val())});else if("section_description"==a.type)$("#field__description").on("keyup",function(){$("#organizer_form_field_"+b.current.id+" .description").text($(this).val())});$("#field_container__values_source :input").on("change",
function(){$("#field_container__values_source_filter :input").val("");var a=$(this).val();b.centralisedListUpdated(b.current.id,a,"")});var d=function(){var a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();$("#field_container__values_source_filter :input").on("keyup",function(){var a=$("#field_container__values_source :input").val(),c=$(this).val();d(function(){b.centralisedListUpdated(b.current.id,a,c)},1E3)});for(var c="",f=0;f<this.formatOnChange.length;f++)0!=f&&(c+=", "),c+="#field_container__"+
this.formatOnChange[f]+" :input";$(c).on("change",function(){b.formatFieldDetails()});c=this.getOrderedItems(a.lov);if(a.field_id)for(f in c)c[f].disabled=!0;f=n.microTemplate("zenario_organizer_admin_box_builder_field_value",c);c=$("#field_values_list");c.html(f);a.field_id||(c.sortable({axis:"y",start:function(a,c){b.startIndex=c.item.index()},stop:function(c,d){b.startIndex!=d.item.index()&&(b.save(),b.setCurrentFieldValues(a),b.changeMadeToPanel())}}),this.initFieldValues(a),this.initAddNewFieldValuesButton(a));
if("centralised_select"==a.type||"centralised_radios"==a.type)$("#organizer_crm_button__set_labels").on("click",function(){$("#field_section__crm input.crm_value_input").each(function(a,c){var d=$(this).data("id"),f="";b.tuix.items[b.current.id].lov&&b.tuix.items[b.current.id].lov[d]&&(f=b.tuix.items[b.current.id].lov[d].label);$(this).val(f)})}),$("#organizer_crm_button__set_values").on("click",function(){$("#field_section__crm input.crm_value_input").each(function(a,b){var c=$(this).data("id");
$(this).val(c)})});this.initAddNewFieldsButton();this.initFormSettingsButton()};g.fieldCanHaveCRMValues=function(b){return-1!="select radios checkboxes centralised_select centralised_radios checkbox".split(" ").indexOf(b)};g.getFieldReadableType=function(b){switch(b){case "checkbox":return"Checkbox";case "checkboxes":return"Checkboxes";case "date":return"Date";case "editor":return"Editor";case "radios":return"Radios";case "centralised_radios":return"Centralised radios";case "select":return"Select";
case "centralised_select":return"Centralised select";case "text":return"Text";case "textarea":return"Textarea";case "url":return"URL";case "attachment":return"Attachment";case "page_break":return"Page break";case "section_description":return"Subheading";case "calculated":return"Calculated";case "restatement":return"Mirror";case "group":return"Group";case "file_picker":return"File picker";default:return"Unknown"}};g.centralisedListUpdated=function(b,a,d){var c=this;this.sendAJAXRequest({mode:"get_centralised_lov",
method:a,filter:d,type:"object"}).after(function(a){a=JSON.parse(a);c.tuix.items[b].lov=a;c.valuesChanged=!0;a=c.getOrderedItemCRMLOV(a);a=n.microTemplate("zenario_organizer_admin_box_builder_radio_values_preview",a);$("#organizer_form_field_values_"+b).html(a)})};g.getCurrentFieldDetails=function(){var b={},a=this.tuix.items[this.current.id];$.each($("#organizer_field_details_form :input:not([disabled], [type=button], .crm_value_input, .translation)").serializeArray(),function(a,c){c.name&&(b[c.name]=
c.value)});$("#organizer_field_details_form input[type=checkbox]").map(function(a,c){b[c.name]=c.checked?1:0});b.default_value_lov!==k?b.default_value=b.default_value_lov:b.default_value_text!==k&&(b.default_value=b.default_value_text);-1==["select","radios","checkboxes"].indexOf(a.type)||a.field_id||(b.lov=this.getCurrentFieldValues(a));this.tuix.show_translation_tab&&$("#field_section__translations input.translation").map(function(b,c){var f=$(this).data("language_id"),g=$(this).data("field_column");
a._translations&&a._translations[g]&&(a._translations[g].phrases[f]=c.value)});this.fieldCanHaveCRMValues(a.type)&&(b.lov||(b.lov=a.lov?_.clone(a.lov):{}),"checkbox"==a.type&&(a._crm_data.values={0:{ord:1,label:0,crm_value:0},1:{ord:2,label:1,crm_value:1}}),$("#field_section__crm input.crm_value_input").map(function(d,c){var f=$(this).data("id");"checkbox"==a.type?a._crm_data.values[f].crm_value=$(this).val():b.lov[f]&&!b.lov[f].remove&&(b.lov[f].crm_value=$(this).val())}));return b};g.save=function(){var b=
{};if(this.current.id){b=this.getCurrentFieldDetails();if(!this.tuix.items[this.current.id])this.tuix.items[this.current.id]={};else if(this.tuix.items[this.current.id].remove)return;for(id in b)m(b,id)&&(value=b[id],"field_crm_name"==id||"send_to_crm"==id?this.tuix.items[this.current.id]._crm_data[id]=value:this.tuix.items[this.current.id][id]=value)}};g.validate=function(b){var a=this,d=new r.callback,c={mode:"validate_field",id:this.current.id,field_tab:this.currentFieldTab,items:JSON.stringify(this.tuix.items)};
!0===b&&(c.removingField=!0);return this.current.id&&!this.tuix.items[this.current.id].remove?(this.sendAJAXRequest(c).after(function(b){b=JSON.parse(b);$("#organizer_form_field_error").remove();if(0<b.length){var c=$('<div id="organizer_form_field_error"></div>');for(index in b)m(b,index)&&(message=b[index],c.append('<p class="error">'+message+"</p>"));$("#organizer_field_details").prepend(c);a.shakeBox("#organizer_form_builder .form_fields_palette")}else delete a.tuix.items[a.current.id].just_added;
d.call(b)}),d):!1};g.saveItemsOrder=function(){var b=this;$(this.formFieldsSelector).each(function(a,d){var c=$(d).data("id");b.tuix.items[c].ord=a+1})};g.initFormSettingsButton=function(){$("input.form_settings").off().on("click",function(){s.open("zenario_user_admin_box_form",{id:t.pi.refiner.id},k,k,function(b,a){var d=a.details.title;this.tuix.title=d;$("#organizer_form_builder .form_outer .form_header h5").text(d)})})};g.showFieldDetailsSection=function(b,a){var d=this,c,f=function(a){_.isEmpty(a)&&
(d.currentFieldTab=b,$("#organizer_field_details_tabs div.tab").removeClass("on"),$("#field_tab__"+b).addClass("on"),$("#organizer_field_details div.section").hide(),$("#field_section__"+b).show())};if(this.valuesChanged&&"crm"==b)this.fieldClick($("#organizer_form_field_"+this.current.id),"crm");else if(this.changingForm&&"translations"==b)this.fieldClick($("#organizer_form_field_"+this.current.id),"translations");else{if(!a&&(this.save(),c=this.validate())){c.after(f);return}f([])}}},zenarioO.panelTypes);

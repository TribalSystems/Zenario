zenario.lib(function(h,F,M,n,L,N,k,r,c,G,P,t,I,p,v,E,K,Q,C,R,S,y){C=C||{};_._e(" div input select option span label p h1 ul li form".split(" "),function(h){c[h||"html"]=function(c){var k;a:{k=h||c;for(var b=arguments,a="<"+k,f=b.length,e=h?1:2,g,d,A={br:1,hr:1,img:1,link:1,input:1}[k],x={checked:1,disabled:1,multiple:1,selected:1};e<f;e+=2)g=b[e-1],d=b[e],x[g]?d&&(a+=" "+g+'="'+g+'"'):!1!==d&&p(d)&&(a+=" "+g+'="'+K(d)+'"');if(A)a+="/>";else if(f%2?h:!h){b=b[f-1];if(" "===b){k=a;break a}if(">"===b){k=
a+">";break a}a+=">"+b}else a+=">";A||(a+="</"+k+">");k=a}return k}});c.lib=function(h){h(c.html,c.div,c.input,c.select,c.option,c.span,c.label,c.p,c.h1,c.ul,c.li)};c.lib(function(O,N,J){c.prop=function(b,a,c){var e=0,g,d,k;if(p(c))e=1,k=arguments;else if("string"==typeof a){if(-1===a.indexOf("."))return b[a];k=a.s(".")}else k=a;for(g=k.length;e<g;++e)if(d=k[e],"object"==typeof b&&p(b[d]))b=b[d];else return h;return b};c.microTemplate=function(b,a,f){return k._mT(b,a,f,c.microTemplates)};c.onbeforeunload=
function(){var b;return n.zenarioAB&&G.isOpen&&G.editModeOnBox()&&(G.changes()||G.callFunctionOnEditors("isDirty"))?C.leaveAdminBoxWarning:n.zenarioSE&&zenarioSE.isOpen&&zenarioSE.editModeOnBox()&&(zenarioSE.changes()||zenarioSE.callFunctionOnEditors("isDirty"))?C.leaveAdminBoxWarning:h!==(b=zenario_conductor._cOCM())?b:r.checkSlotsBeingEdited&&r._cSBE()?C.leavePageWarning:h};c.uploading=!1;c.canDoHTML5Upload=function(){return n.FileReader};c.setHTML5UploadFromDragDrop=function(b,a,f,e,g){return c._cDHTML5U()?
($(g||M.body).on("drop",function(d){$(d.target).removeClass("dragover");d=d.originalEvent;f&&f();c._sFDD(d);c._dHTML5U(d.target.files||d.dataTransfer.files,b,a,e)}),!0):!1};c.doHTML5Upload=function(b,a,f,e){a&&f&&!c.uploading&&(c.uploadPath=a,c.uploadRequest=f,c.uploadCallBack=e,c.uploadResponses=[],c.uploadFile=-1,c.uploadFiles=b,c._dNU())};c.doNextUpload=function(){var b=$("#zenario_progress_wrap"),a=$("#zenario_progress_name"),f=$("#zenario_progress_stop");a.text("");f.unbind("click");c.uploading=
!!c.uploadFiles[++c.uploadFile];t.init&&t._sWC("uploading",c.uploading);if(c.uploading)if(b.show().removeClass("zenario_progress_cancelled"),E("zenario_progressbar").style.width="0%",c.uploadFiles[c.uploadFile].size&&c.uploadFiles[c.uploadFile].name)if(r.maxUpload&&r.maxUpload<c.uploadFiles[c.uploadFile].size)r._sM(C.uploadTooLarge.r("[[maxUploadF]]",r.maxUploadF),!0,"error"),c._dNU();else{a.text(c.uploadFiles[c.uploadFile].name);c.uploader=new XMLHttpRequest;c.uploader.open("POST",c.uploadPath,!0);
try{c.uploader.setRequestHeader("X_FILENAME",c.uploadFiles[c.uploadFile].name)}catch(e){}var a=new FormData,g;for(g in c.uploadRequest)y(c.uploadRequest,g)&&a.append(g,""+c.uploadRequest[g]);a.append("Filedata",c.uploadFiles[c.uploadFile]);c.uploader.upload.addEventListener("progress",c.uploadProgress,!1);c.uploader.addEventListener("load",c.uploadDone,!1);c.uploader.addEventListener("error",c.uploadDone,!1);c.uploader.addEventListener("abort",c.uploadDone,!1);f.click(function(){b.show().removeClass("zenario_progress_cancelled");
c.uploader.abort()});c.uploader.send(a)}else c._dNU();else b.hide(),c.uploadCallBack&&c.uploadCallBack(c.uploadResponses)};c.uploadProgress=function(b){var a=0;b.lengthComputable&&(a=100*b.loaded/b.total);E("zenario_progress_wrap").style.display="block";E("zenario_progressbar").style.width=a+"%"};c.uploadDone=function(b){if(c.uploader.responseText&&1!=c.uploader.responseText)try{data=JSON.parse(c.uploader.responseText);if("object"!=typeof data)throw 0;c.uploadResponses.push(data)}catch(a){r.showMessage?
r._sM(c.uploader.responseText,!0,"error",!1,!0):alert(c.uploader.responseText)}c._dNU()};c.stopDefault=function(b){(b=b||event)&&b.stopPropagation&&b.stopPropagation();b&&b.preventDefault&&b.preventDefault();return!1};c.stopFileDragDrop=function(b){var a=!1;b.dataTransfer&&b.dataTransfer.types&&(a="function"==typeof b.dataTransfer.types.contains?b.dataTransfer.types.contains("Files"):"Files"==""+b.dataTransfer.types||b.dataTransfer.types[0]&&"Files"==""+b.dataTransfer.types[0]);a&&(b.stopPropagation(),
b.preventDefault())};c.disableFileDragDrop=function(b){c._cDHTML5U()&&(b.addEventListener("drop",c.stopDefault,!1),b.addEventListener("dragenter",c.stopDefault,!1),b.addEventListener("dragover",c.stopDefault,!1),b.addEventListener("dragexit",c.stopDefault,!1))};c.resizeImage=function(b,a,c,e,g,d){g.width=b;g.height=a;b*=1;a*=1;if(b!=c||a!=e)!d&&b<=c&&a<=e||(c/b<e/a?(g.width=c,g.height=Math.floor(a*c/b)):(g.height=e,g.width=Math.floor(b*e/a)))};c.checkActionUnique=function(b){var a=[],c,e="admin_box ajax combine_items navigation_path frontend_link help link onclick panel pick_items popout organizer_quick upload".split(" ");
for(c in e)y(e,c)&&b[e[c]]&&a.push(e[c]);switch(a.length){case 1:return!0;case 0:return!1;default:return console.log(b),alert("This navigation or button has multiple actions associated with it:\n\n"+a+"\n\n(See the console log for the faulty definition.)"),!1}};c.action=function(b,a,f,e,g,d,A,x){if(b.uploading||!g&&!c._cAU(a))return!1;var w;switch(b.globalName){case "zenarioO":w="handleOrganizerPanelAJAX";break;case "zenarioAT":w="handleAdminToolbarAJAX";break;case "zenarioW":w="handleWizardAJAX";
break;case "zenarioAB":case "zenarioSE":w="handleAdminBoxAJAX";break;default:w="handlePluginAJAX"}!g&&a.link?g=a.link:!g&&a.panel&&a.panel._path_here&&(g={path:a.panel._path_here});if(!g||!t._pNA(g)){t.yourWorkInProgressLastUpdated=0;b.pickItemsItemLevel=f;b.postPickItemsObject=!1;var H,B,q;if((q=a.upload)||(q=a.ajax))x?(H=x,B=b.getKey(f)):!f&&a.ajax&&a.ajax.pass_matched_ids&&"zenarioO"==b.globalName?(H=F+"zenario/admin/organizer.ajax.php?__pluginClassName__="+q.class_name+"&path="+t.path+"&_get_matched_ids=1&method_call="+
w+k._uR(t.lastRequests),B={}):(H=F+"zenario/ajax.php?__pluginClassName__="+q.class_name+"&__path__="+b.path+"&method_call="+w,B=b.getKey(f)),q.request&&$.extend(B,q.request),d&&$.extend(B,d);if(a.upload){x=!c._cDHTML5U();d='<input type="file" name="Filedata"';var D,u;if(u=a.upload.accept||a.upload.extensions){u=c._tTA(u);for(D in u)if(y(u,D))switch(q=u[D],q){case "text":u[D]="text/*";break;case "images":u[D]="image/*";break;case "video":u[D]="video/*";break;case "audio":u[D]="audio/*";break;default:-1==
q.indexOf("/")&&"."!=q.substr(0,1)&&(u[D]="."+q)}d+=' accept="'+K(u.join(","))+'"'}else"Images"==a.upload.fileDesc&&(d+=' accept="image/*"');x&&(d+=' id="zenario_fallback_fileupload"');!x&&v(a.upload.multi)&&(d+=" multiple");d+="/>";if(x)a=k._cl(a),B._html5_backwards_compatibility_hack=1,a.ajax={class_name:a.upload.class_name,confirm:{message:d,html:!0,button_message:C.upload,cancel_button_message:C.cancel,form:!0},request:B};else{a=$(d);n._zenario_open_file_picker=a[0];a.change(function(){b.uploadStart&&
b.uploadStart();c._dHTML5U(this.files,H,B,function(a){b.uploadComplete(a)})});a.click();return}}if(g)v(g.unselect_items)&&(t.selectedItems={},t.saveSelection()),t.go(g.path,e,g.refiner?{id:f?t._gKI():"",name:g.refiner}:h,h,h,h,h,A);else if(a.frontend_link){var m,l;a=a.frontend_link;var z=!1;f&&(m=b.getKeyId(!0))&&(l=b.tuix.items[m])&&l.frontend_link&&(a=l.frontend_link);"zenarioO"==b.globalName&&(a=t._pRL(a),-1!=a.indexOf("&zenario_sk_return=")&&(z=!0));z||"admin.php"==a.substr(0,25)?k._gTU(k._aBP(a)):
-1!==a.indexOf("://")&&0!==a.indexOf(F)?n.open(a):"zenarioAT"==b.globalName?k._gTU(k._aBP(a)):L&&!L.zenarioO?n.opener.location=k._aBP(a):n.storekeeperChildWindow&&!n.storekeeperChildWindow.closed?n.storekeeperChildWindow.location=k._aBP(a):n.storekeeperChildWindow=n.open(k._aBP(a))}else if(a.navigation_path)a=a.navigation_path,f&&(m=b.getKeyId(!0))&&(l=b.tuix.items[m])&&l.navigation_path&&(a=l.navigation_path),"zenarioO"==b.globalName?t.go(a,-1):k._gTU(k._aBP((n.zenarioATLinks&&n.zenarioATLinks.organizer||
"zenario/admin/organizer.php")+"#"+a));else if(a.admin_box){r._nDS("loading");f=b.getKey(f)||{};if(a.admin_box.key)for(z in a.admin_box.key)y(a.admin_box.key,z)&&(f[z]=a.admin_box.key[z]);G.open(a.admin_box.path,f,a.admin_box.tab,a.admin_box.values,h,v(a.admin_box.create_another)?a.admin_box:!1,h,v(a.admin_box.pass_matched_ids))}else if(a.popout){a=k._cl(a.popout);f&&(m=b.getKeyId(!0))&&(l=b.tuix.items[m])&&(l.popout&&(a=$.extend(a,l.popout)),!a.title&&b.popoutLabelFormat&&(a.title=b.applyMergeFields(b.popoutLabelFormat,
!1,m)));l&&l.href&&!p(a.href)?a.href=l.href:l&&l.frontend_link&&!p(a.href)?a.href=t._pRL(l.frontend_link,"_show_page_preview=1"):l&&a.href&&(a.href+=-1===a.href.indexOf("?")?"?":"&",l.checksum?(a.href+="c="+I(l.checksum),m==1*m&&(a.href+="&id="+m)):a.href=m==1*m?a.href+("id="+m):a.href+("c="+I(m)),f=b.getKey().usage||l.usage)&&(a.href+="&usage="+I(f));if(a.href){if(f=l&&l.filename||a.options&&a.options.filename||a.filename){if(m=f.m(/(.*) \[.*\]/))f=m[1];a.href+="&filename="+I(f)}a.href=k._aBP(a.href)}if(a.css_class){var E=
(""+a.css_class).s(" ");a.onOpen=function(){k._aCTC(E)};a.onClosed=function(){k._rCTC(E)}}a.iframe&&!p(a.width)&&(a.width="93%");a.iframe&&!p(a.height)&&(a.height="90%");l&&l.width&&(a.initialWidth=l.width);l&&l.height&&(a.initialHeight=l.height);p(a.preloading)||(a.preloading=!1);$.colorbox(a)}else if(a.organizer_quick)l=a.organizer_quick.path,f&&(m=b.getKeyId(!0))&&(l=l.r(/\[\[id\]\]/g,m)),r._oQ(l,a.organizer_quick.min_path||a.organizer_quick.max_path||a.organizer_quick.path,a.organizer_quick.min_path,
a.organizer_quick.max_path,v(a.organizer_quick.disallow_refiners_looping_on_min_path),h,h,b.globalName);else if(a.pick_items&&!f)a.pick_items.ajax&&(b.postPickItemsObject=a.pick_items),b.actionTarget=F+"zenario/ajax.php?__pluginClassName__="+a.pick_items.class_name+"&__path__="+b.path+"&method_call="+w,b.actionRequests=b.getKey(f),a.pick_items.request&&$.extend(b.actionRequests,a.pick_items.request),r._oS(b.globalName,"pickItems",a.pick_items.multiple_select,a.pick_items.path,a.pick_items.target_path,
a.pick_items.min_path,a.pick_items.max_path,a.pick_items.disallow_refiners_looping_on_min_path,!0,a.pick_items.one_to_one_choose_phrase,a.pick_items.one_to_many_choose_phrase,h,h,h,h,h,b.getLastKeyId(!0),a.pick_items.allow_no_selection,a.pick_items.one_to_no_selection_choose_phrase,h,h,a.pick_items);else if(a.combine_items&&f)a.combine_items.ajax&&(b.postPickItemsObject=a.combine_items),b.actionTarget=F+"zenario/ajax.php?__pluginClassName__="+a.combine_items.class_name+"&__path__="+b.path+"&method_call="+
w,b.actionRequests=b.getKey(f),a.combine_items.request&&$.extend(b.actionRequests,a.combine_items.request),r._oS(b.globalName,"pickItems",a.combine_items.multiple_select,a.combine_items.path,a.combine_items.target_path,a.combine_items.min_path,a.combine_items.max_path,a.combine_items.disallow_refiners_looping_on_min_path,!0,1<b.itemsSelected&&a.combine_items.many_to_one_choose_phrase?a.combine_items.many_to_one_choose_phrase:a.combine_items.one_to_one_choose_phrase,1<b.itemsSelected&&a.combine_items.many_to_many_choose_phrase?
a.combine_items.many_to_many_choose_phrase:a.combine_items.one_to_many_choose_phrase,h,h,h,h,h,b.getKeyId(!1),a.combine_items.allow_no_selection,1<b.itemsSelected&&a.combine_items.many_to_no_selection_choose_phrase?a.combine_items.many_to_no_selection_choose_phrase:a.combine_items.one_to_no_selection_choose_phrase,h,h,a.combine_items);else if(a.ajax)if(b.actionTarget=H,b.actionRequests=B,a.ajax.confirm){l=v(a.ajax.confirm.html);m=v(a.ajax.confirm.download);f=a.ajax.confirm.message?a.upload?a.ajax.confirm.message:
b.applyMergeFieldsToLabel(a.ajax.confirm.message,l,f,a.ajax.confirm.multiple_select_message):k._nAA(b.actionTarget+k._uR(b.actionRequests),!1);m&&(b.actionRequests._download=1,p(b.searchTerm)&&(b.actionRequests._search=b.searchTerm),b.prefs[b.path]&&b.prefs[b.path].sortBy?(b.actionRequests._sort_col=b.prefs[b.path].sortBy,b.actionRequests._sort_desc=b.prefs[b.path].sortDesc?1:0):b.actionRequests._sort_col=b.labelTag);e=d="";if(m||a.upload){d+=O("form","id","zenario_bc_form","action",b.actionTarget+
"&_sk_form_submission=1","onsubmit","get('preloader_circle').style.visibility = 'visible';","target","zenario_iframe","method","post","enctype",a.upload&&"multipart/form-data",">");for(z in b.actionRequests)y(b.actionRequests,z)&&(d+=J("type","hidden","value",b.actionRequests[z],"name",z));l||(f=K(f,!0),l=!0)}d+=f;m||a.upload?(d+="</form>",e=J("type","button","class","submit_selected","value",a.ajax.confirm.button_message,"onclick","get('zenario_bc_form').submit();")):e=J("type","button","class",
"submit_selected","value",a.ajax.confirm.button_message,"onclick",b.globalName+".action2()");e+=J("type","button","class","submit","value",a.ajax.confirm.cancel_button_message);r._sM(d,e,a.ajax.confirm.message_type,h,!l);a.upload&&(k._bII()||$("#zenario_fallback_fileupload").click())}else b.action2();else a.help&&(f=a.help.message_type||"question",l=!v(a.help.html),a.help.message&&r._sM(a.help.message,!0,f,!1,l))}};c.generateGlobalName=function(){var b,a;for(b=1;n[a="zenarioLib"+b];++b);return a};
c.newSimpleForm=function(b,a){var f=new zenarioF;a||(a=c.generateGlobalName());f.init(a,"fea",b);return n[a]=f};c.eval=function(b,a,f,e,g,d,A,x,w,r,p){var q,t,u,m,l=!0;p=p||a&&a.tuix||h;f=f||d||A||x||e||w||r;if("object"==typeof b){for(q in b)if(y(b,q))if(m=b[q],q==1*q){if(l=!1,c._e(m,a,f,e,g,d,A,x,w,r,p))return!0}else{q=q.s(".",2);t=q[0];u=q[1];if(!u)u=t,a=n;else if("lib"!=t&&!(a=n[t]))return!1;if(!a[u]||!a[u].apply(a,c._tTA(m)))return!1}return l}if("function"==typeof b)return b();try{m=c._dE(b+"",
a,f,e,g,d,A,x,w,r,p)}catch(v){throw n.console&&console.error&&console.error("JavaScript error in evaluated expression:",b),v;}"function"==typeof m&&(m=m(f,e,g,p,d,A,x,w,r));return k._eTB(m)};c.hidden=function(b,a,f,e,g,d,k,h,n,p){b=b||g||d||k||f||h||n;return!b||v(b.hidden)||b.visible_if&&!c._e(b.visible_if,a,b,f,e,g,d,k,h,n,p)||b.js_condition&&!c._e(b.js_condition,a,b,f,e,g,d,k,h,n,p)};c.checkFunctionExists=function(b,a){return a?n[a]&&"function"==typeof n[a][b]:"function"==typeof n[b]};c.sortArray=
function(b,a){return c._sL(b,a,1)};c.sortArrayByOrd=function(b,a){return c._sL(b,a,"ord")};c.sortArrayByOrdinal=function(b,a){return c._sL(b,a,"ordinal")};c.sortArrayWithGrouping=function(b,a){return b[2]===a[2]?c._sL(b,a,1):p(b[2])?p(a[2])?c._sL(b,a,2):c._sL(b,a,2,1):c._sL(b,a,1,2)};c.sortLogic=function(b,a,c,e){b=b[c];a=p(e)?a[e]:a[c];if(b===a)return 0;c=b==1*b;e=a==1*a;return c&&e?1*b<1*a?-1:1:c||e?c?-1:1:(""+b).toUpperCase()<(""+a).toUpperCase()?-1:1};c.getSortedIdsOfTUIXElements=function(b,a,
f,e){var g,d,k=!1,h=[];f||(f="ord");"items"==a&&b.columns&&b.columns[f]&&(k=b.columns[f].format);_._isOb(a)||(a=b[a]);if(a)for(d in a)y(a,d)&&(b=a[d])&&(b=b[f],"true_or_false"==k||"yes_or_no"==k?h.push([d,v(b),!0]):"remove_zero_padding"!=k&&b==(g=1*b)?h.push([d,g,!0]):b?h.push([d,b.toLowerCase(),!1]):h.push([d,0,!0]));e?h.sort(c.sortArrayDesc):h.sort(c.sortArrayForOrganizer);for(d in h)y(h,d)&&(h[d]=h[d][0]);return h};c.sortArrayForOrganizer=function(b,a){return b[1]===a[1]?0:(b[2]?a[2]:!a[2])?b[1]<
a[1]?-1:1:b[2]?-1:1};c.sortArrayDesc=function(b,a){return c._sAFO(a,b)};c.csvToObject=function(b,a){if(_._iS(b)){var c,e={},g=b.s(a||",");for(c in g)""!==g[c]&&(e[g[c]]=!0);return e}return b};c.tuixToArray=function(b){if(_._isAr(b))return b;var a,c,e=[];switch(typeof b){case "string":return b.s(/\s*,\s*/);case "object":for(a in b)y(b,a)&&(c=b[a],a==1*a?e.push(c):v(c)&&e.push(a));break;default:e=[b]}return e};c.setButtonKin=function(b,a){c._sK(b,a||"organizer_button_with_children")};c.setKin=function(b,
a){var c,e,g,d,h={};for(c in b)y(b,c)&&(e=b[c],delete e.children,h[e.id]=c);for(c in b)y(b,c)&&(e=b[c],g=e.tuix||e,d=g.parent)&&(d=h[d],d=b[d])&&(d.children||(d.children=[],p(a)&&(d.css_class=d.css_class?d.css_class+" "+a:a)),e.enabled&&!v(g.remove_filter)&&(d.childEnabled=!0),e.current&&(d.childCurrent=!0),e.selected&&(d.childSelected=!0),d.children.push(e));for(c=b.length-1;0<=c;--c)e=b[c],g=e.tuix||e,(g.parent||v(g.hide_when_children_are_not_visible)&&!e.children)&&b.splice(c,1)};c.attempts={};
c.attemptNum=0;c.keepTrying=function(b,a){if(!p(a))a=++c.attemptNum,c.attempts[a]=!0;else if(!c.attempts[a])return;b(a);setTimeout(function(){c._kT(b,a)},3E4)};c.stopTrying=function(b){return c.attempts[b]?(delete c.attempts[b],!0):!1};c.splitDataFromErrorMessage=function(b){_._iS(b)&&(b={responseText:b});if(!p(b.data)&&b.responseText&&-1!=(end=b.responseText.indexOf('{"')))try{var a=JSON.parse(b.responseText.substr(end));"object"==typeof a&&(b.data=a,b.responseText=b.responseText.substr(0,end))}catch(c){}return b};
c.parse=function(b){return JSON.parse(b.r(/\~/g,'"').r(/%S/g,"~").r(/\+/g,":").r(/%P/g,"+").r(/%0/g,'":false').r(/%1/g,'":true').r(/%2/g,'"pre_field_html":').r(/%3/g,'"post_field_html":').r(/%4/g,'"redraw_immediately_onchange":').r(/%5/g,'"redraw_onchange":').r(/%7/g,'"hide_if_previous_value_isnt":').r(/%8/g,'"hide_when_children_are_not_visible":').r(/%9/g,'"hide_with_previous_field":').r(/%a/g,'"ajax":').r(/%b/g,'"enable_microtemplates_in_properties":').r(/%c/g,'"css_class":').r(/%d/g,'"disabled":').r(/%e/g,
'"last_edited":').r(/%f/g,'"confirm":').r(/%g/g,'"grouping":').r(/%h/g,'"hidden":').r(/%i/g,'"title":').r(/%k/g,'"onclick":').r(/%l/g,'"label":').r(/%m/g,'"message":').r(/%n/g,'"name":').r(/%o/g,'"ord":').r(/%p/g,'"parent":').r(/%q/g,'"placeholder":').r(/%r/g,'"row_class":').r(/%s/g,'"snippet":').r(/%t/g,'"tooltip":').r(/%u/g,'"value":').r(/%v/g,'"visible_if":').r(/%w/g,'"empty_value":').r(/%x/g,'"tuix":').r(/%y/g,'"type":').r(/%z/g,'"readonly":').r(/%C/g,"%"))};c.onChangeOrSearch=function(){return k._bII()||
k._bIE()?"onchange":"onsearch"};c.showDevTools=function(){return(r.adminSettings||{}).show_dev_tools};c.filter=function(b){return!1===b?function(a){return!a.location}:"string"==typeof b?function(a){return a.location==b}:_._isAr(b)?function(a){return-1!==b.indexOf(a.location)}:b};c.find=function(b,a){return _._fi(b,c._f(a))};c.numberFormat=function(b,a){return s.numberFormat(b,a,k.decPoint,k.thousandsSep)};c.init=!0;k._sN(c)})});

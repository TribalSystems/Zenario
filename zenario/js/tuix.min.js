zenario.lib(function(g,F,T,n,S,U,h,k,c,G,V,r,H,E,q,M,W,y,X,Y,u,Z,ea,B,N,fa,ga,ha,I,ia,ja,ka,la,ma,na,J,oa,pa,aa,O){y=y||{};_._e(" div span input select option h1 p".split(" "),function(h){c[h||"html"]=function(c){var n;a:{n=h||c;for(var k=arguments,p="<"+n,r=k.length,q=h?1:2,u,z,y={br:1,hr:1,img:1,link:1,input:1}[n],B={checked:1,disabled:1,multiple:1,selected:1};q<r;q+=2)u=k[q-1],z=k[q],B[u]?z&&(p+=" "+u+'="'+u+'"'):!1!==z&&z!==g&&(p+=" "+u+'="'+M(z)+'"');if(y)p+="/>";else if(p+=">",r%2?h:!h){k=k[r-
1];if(">"===k){n=p;break a}p+=k}y||(p+="</"+n+">");n=p}return n}});c.lib=function(g){g(c.html,c.div,c.span,c.input,c.select,c.option,c.h1,c.p,"type","button","class","submit","value","onclick","style")};c.lib(function(ba,U,V,K,p,W,X,Y,z,P,Q,ca,L,R,Z){c.prop=function(b,a,c){var d=0,m,e,h;if(c!==g)d=1,h=arguments;else if("string"==typeof a){if(-1===a.indexOf("."))return b[a];h=a.split(".")}else h=a;for(m=h.length;d<m;++d)if(e=h[d],"object"==typeof b&&b[e]!==g)b=b[e];else return g;return b};c.microTemplate=
function(b,a,f){return h._mT(b,a,f,c.microTemplates)};c.onbeforeunload=function(){var b;return n.zenarioAB&&G.isOpen&&G.editModeOnBox()&&(G.changes()||G.callFunctionOnEditors("isDirty"))?y.leaveAdminBoxWarning:n.zenarioSE&&zenarioSE.isOpen&&zenarioSE.editModeOnBox()&&(zenarioSE.changes()||zenarioSE.callFunctionOnEditors("isDirty"))?y.leaveAdminBoxWarning:g!==(b=zenario_conductor.confirmOnCloseMessage())?b:k.checkSlotsBeingEdited&&k._cSBE()?y.leavePageWarning:g};c.uploading=!1;c.canDoHTML5Upload=function(){return n.FileReader};
c.clearHTML5UploadFromDragDrop=function(){delete c.uploadPathFromDragDrop;delete c.uploadRequestFromDragDrop;delete c.uploadCallBackFromDragDrop};c.setHTML5UploadFromDragDrop=function(b,a,f,d,m){return c._cDHTML5U()?(c.uploadPathFromDragDrop=b,c.uploadRequestFromDragDrop=a,c.uploadCallBackFromDragDrop=d,(m||T.body).addEventListener("drop",function(a){f&&f();c._dHTML5UFDD(a)},!1),!0):!1};c.doHTML5UploadFromDragDrop=function(b){c._sFDD(b);c._dHTML5U(b.target.files||b.dataTransfer.files,c.uploadPathFromDragDrop,
c.uploadRequestFromDragDrop,c.uploadCallBackFromDragDrop)};c.doHTML5Upload=function(b,a,f,d){a&&f&&!c.uploading&&(c.uploadPath=a,c.uploadRequest=f,c.uploadCallBack=d,c.uploadResponses=[],c.uploadFile=-1,c.uploadFiles=b,c._dNU())};c.doNextUpload=function(){var b=$(I+"progress_wrap"),a=$(I+"progress_name"),f=$(I+"progress_stop");a.text("");f.unbind("click");c.uploading=!!c.uploadFiles[++c.uploadFile];r.init&&r._sWC("uploading",c.uploading);if(c.uploading)if(b.show().removeClass(B+"progress_cancelled"),
E(B+"progressbar").style.width="0%",c.uploadFiles[c.uploadFile].size&&c.uploadFiles[c.uploadFile].name)if(k.maxUpload&&k.maxUpload<c.uploadFiles[c.uploadFile].size)k._sM(y.uploadTooLarge.replace("[[maxUploadF]]",k.maxUploadF),!0,"error"),c._dNU();else{a.text(c.uploadFiles[c.uploadFile].name);c.uploader=new XMLHttpRequest;c.uploader.open("POST",c.uploadPath,!0);try{c.uploader.setRequestHeader("X_FILENAME",c.uploadFiles[c.uploadFile].name)}catch(d){}var a=new FormData,m;for(m in c.uploadRequest)u(c.uploadRequest,
m)&&a.append(m,""+c.uploadRequest[m]);a.append("Filedata",c.uploadFiles[c.uploadFile]);c.uploader.upload.addEventListener("progress",c.uploadProgress,!1);c.uploader.addEventListener("load",c.uploadDone,!1);c.uploader.addEventListener("error",c.uploadDone,!1);c.uploader.addEventListener("abort",c.uploadDone,!1);f.click(function(){b.show().removeClass(B+"progress_cancelled");c.uploader.abort()});c.uploader.send(a)}else c._dNU();else b.hide(),c.uploadCallBack&&c.uploadCallBack(c.uploadResponses)};c.uploadProgress=
function(b){var a=0;b.lengthComputable&&(a=100*b.loaded/b.total);E(B+"progress_wrap").style.display="block";E(B+"progressbar").style.width=a+"%"};c.uploadDone=function(b){if(c.uploader.responseText&&1!=c.uploader.responseText)try{data=JSON.parse(c.uploader.responseText);if("object"!=typeof data)throw 0;c.uploadResponses.push(data)}catch(a){k.showMessage?k._sM(c.uploader.responseText,!0,"error",!1,!0):alert(c.uploader.responseText)}c._dNU()};c.stopDefault=function(b){(b=b||event)&&b.stopPropagation&&
b.stopPropagation();b&&b.preventDefault&&b.preventDefault();return!1};c.stopFileDragDrop=function(b){var a=!1;b.dataTransfer&&b.dataTransfer.types&&(a="function"==typeof b.dataTransfer.types.contains?b.dataTransfer.types.contains("Files"):"Files"==""+b.dataTransfer.types||b.dataTransfer.types[0]&&"Files"==""+b.dataTransfer.types[0]);a&&(b.stopPropagation(),b.preventDefault())};c.disableFileDragDrop=function(b){c._cDHTML5U()&&(b.addEventListener("drop",c.stopDefault,!1),b.addEventListener("dragenter",
c.stopDefault,!1),b.addEventListener("dragover",c.stopDefault,!1),b.addEventListener("dragexit",c.stopDefault,!1))};c.resizeImage=function(b,a,c,d,m,e){m.width=b;m.height=a;b*=1;a*=1;if(b!=c||a!=d)!e&&b<=c&&a<=d||(c/b<d/a?(m.width=c,m.height=Math.floor(a*c/b)):(m.height=d,m.width=Math.floor(b*d/a)))};c.checkActionUnique=function(b){var a=[],c,d=["admin_box","ajax","combine_items","navigation_path","frontend_link","help","link",R,"panel","pick_items","popout","organizer_quick","upload"];for(c in d)u(d,
c)&&b[d[c]]&&a.push(d[c]);switch(a.length){case 1:return!0;case 0:return!1;default:return console.log(b),alert("This navigation or button has multiple actions associated with it:\n\n"+a+"\n\n(See the console log for the faulty definition.)"),!1}};c.action=function(b,a,f,d,m,e,da,A){if(b.uploading||!m&&!c._cAU(a))return!1;var C;switch(b.globalName){case "zenarioO":C="handleOrganizerPanelAJAX";break;case "zenarioAT":C="handleAdminToolbarAJAX";break;case "zenarioW":C="handleWizardAJAX";break;case "zenarioAB":case "zenarioSE":C=
"handleAdminBoxAJAX";break;default:C="handlePluginAJAX"}!m&&a.link?m=a.link:!m&&a.panel&&a.panel._path_here&&(m={path:a.panel._path_here});if(!m||!r._pNA(m)){r.yourWorkInProgressLastUpdated=0;b.pickItemsItemLevel=f;b.postPickItemsObject=!1;var p,D,t;if((t=a.upload)||(t=a.ajax))A?(p=A,D=b.getKey(f)):!f&&a.ajax&&a.ajax.pass_matched_ids&&"zenarioO"==b.globalName?(p=F+N+"admin/organizer.ajax.php?__pluginClassName__="+t.class_name+"&path="+r.path+"&_get_matched_ids=1"+J+""+C+h._uR(r.lastRequests),D={}):
(p=F+O+"?__pluginClassName__="+t.class_name+"&__path__="+b.path+J+""+C,D=b.getKey(f)),t.request&&$.extend(D,t.request),e&&$.extend(D,e);if(a.upload){A=!c._cDHTML5U();e='<input type="file" name="Filedata"';var v,w;if(w=a.upload.accept||a.upload.extensions){w=c._tTA(w);for(v in w)if(u(w,v))switch(t=w[v],t){case "text":w[v]="text/*";break;case "images":w[v]="image/*";break;case "video":w[v]="video/*";break;case "audio":w[v]="audio/*";break;default:-1==t.indexOf("/")&&"."!=t.substr(0,1)&&(w[v]="."+t)}e+=
' accept="'+M(w.join(","))+'"'}else"Images"==a.upload.fileDesc&&(e+=' accept="image/*"');A&&(e+=' id="zenario_fallback_fileupload"');!A&&q(a.upload.multi)&&(e+=" multiple");e+="/>";if(A)a=h._cl(a),D._html5_backwards_compatibility_hack=1,a.ajax={class_name:a.upload.class_name,confirm:{message:e,html:!0,button_message:y.upload,cancel_button_message:y.cancel,form:!0},request:D};else{a=$(e);a.change(function(){b.uploadStart&&b.uploadStart();c._dHTML5U(this.files,p,D,function(a){b.uploadComplete(a)})});
a.click();return}}if(m)q(m.unselect_items)&&(r.selectedItems={},r.saveSelection()),r.go(m.path,d,m.refiner?{id:f?r._gKI():"",name:m.refiner}:g,g,g,g,g,da);else if(a.frontend_link){var s,l;a=a.frontend_link;var x=!1;f&&(s=b.getKeyId(!0))&&(l=b.tuix.items[s])&&l.frontend_link&&(a=l.frontend_link);"zenarioO"==b.globalName&&(a=r._pRL(a),-1!=a.indexOf("&zenario_sk_return=")&&(x=!0));x||a.substr(0,25)==N+"admin/welcome.php"?h._gTU(h._aBP(a)):-1!==a.indexOf("://")&&0!==a.indexOf(F)?n.open(a):"zenarioAT"==
b.globalName?h._gTU(h._aBP(a)):S&&!S.zenarioO?n.opener.location=h._aBP(a):n.storekeeperChildWindow&&!n.storekeeperChildWindow.closed?n.storekeeperChildWindow.location=h._aBP(a):n.storekeeperChildWindow=n.open(h._aBP(a))}else if(a.navigation_path)a=a.navigation_path,f&&(s=b.getKeyId(!0))&&(l=b.tuix.items[s])&&l.navigation_path&&(a=l.navigation_path),"zenarioO"==b.globalName?r.go(a,-1):h._gTU(h._aBP((n.zenarioATLinks&&n.zenarioATLinks.organizer||N+"admin/organizer.php")+"#"+a));else if(a.admin_box){k._nDS("loading");
f=b.getKey(f)||{};if(a.admin_box.key)for(x in a.admin_box.key)u(a.admin_box.key,x)&&(f[x]=a.admin_box.key[x]);G.open(a.admin_box.path,f,a.admin_box.tab,a.admin_box.values,g,q(a.admin_box.create_another)?a.admin_box:!1,g,q(a.admin_box.pass_matched_ids))}else if(a.popout){a=h._cl(a.popout);f&&(s=b.getKeyId(!0))&&(l=b.tuix.items[s])&&(l.popout&&(a=$.extend(a,l.popout)),!a.title&&b.popoutLabelFormat&&(a.title=b.applyMergeFields(b.popoutLabelFormat,!1,s)));l&&l.href&&a.href===g?a.href=l.href:l&&l.frontend_link&&
a.href===g?a.href=r._pRL(l.frontend_link,"_show_page_preview=1"):l&&a.href&&(a.href+=-1===a.href.indexOf("?")?"?":"&",l.checksum?(a.href+="c="+H(l.checksum),s==1*s&&(a.href+="&id="+s)):a.href=s==1*s?a.href+("id="+s):a.href+("c="+H(s)),f=b.getKey().usage||l.usage)&&(a.href+="&usage="+H(f));if(a.href){if(f=l&&l.filename||a.options&&a.options.filename||a.filename){if(x=f.match(/(.*) \[.*\]/))f=x[1];a.href+="&filename="+H(f)}a.href=h._aBP(a.href)}if(a.css_class){var E=(""+a.css_class).split(" ");a.onOpen=
function(){h._aCTC(E)};a.onClosed=function(){h._rCTC(E)}}a.iframe&&a.width===g&&(a.width="93%");a.iframe&&a.height===g&&(a.height="90%");l&&l.width&&(a.initialWidth=l.width);l&&l.height&&(a.initialHeight=l.height);a.preloading===g&&(a.preloading=!1);$[aa](a)}else if(a.organizer_quick)l=a.organizer_quick.path,f&&(s=b.getKeyId(!0))&&(l=l.replace(/\[\[id\]\]/g,s)),k._oQ(l,a.organizer_quick.min_path||a.organizer_quick.max_path||a.organizer_quick.path,a.organizer_quick.min_path,a.organizer_quick.max_path,
q(a.organizer_quick.disallow_refiners_looping_on_min_path),g,g,b.globalName);else if(a.pick_items&&!f)a.pick_items.ajax&&(b.postPickItemsObject=a.pick_items),b.actionTarget=F+O+"?__pluginClassName__="+a.pick_items.class_name+"&__path__="+b.path+J+""+C,b.actionRequests=b.getKey(f),a.pick_items.request&&$.extend(b.actionRequests,a.pick_items.request),k._oS(b.globalName,"pickItems",a.pick_items.multiple_select,a.pick_items.path,a.pick_items.target_path,a.pick_items.min_path,a.pick_items.max_path,a.pick_items.disallow_refiners_looping_on_min_path,
!0,a.pick_items.one_to_one_choose_phrase,a.pick_items.one_to_many_choose_phrase,g,g,g,g,g,b.getLastKeyId(!0),a.pick_items.allow_no_selection,a.pick_items.one_to_no_selection_choose_phrase,g,g,a.pick_items);else if(a.combine_items&&f)a.combine_items.ajax&&(b.postPickItemsObject=a.combine_items),b.actionTarget=F+O+"?__pluginClassName__="+a.combine_items.class_name+"&__path__="+b.path+J+""+C,b.actionRequests=b.getKey(f),a.combine_items.request&&$.extend(b.actionRequests,a.combine_items.request),k._oS(b.globalName,
"pickItems",a.combine_items.multiple_select,a.combine_items.path,a.combine_items.target_path,a.combine_items.min_path,a.combine_items.max_path,a.combine_items.disallow_refiners_looping_on_min_path,!0,1<b.itemsSelected&&a.combine_items.many_to_one_choose_phrase?a.combine_items.many_to_one_choose_phrase:a.combine_items.one_to_one_choose_phrase,1<b.itemsSelected&&a.combine_items.many_to_many_choose_phrase?a.combine_items.many_to_many_choose_phrase:a.combine_items.one_to_many_choose_phrase,g,g,g,g,g,
b.getKeyId(!1),a.combine_items.allow_no_selection,1<b.itemsSelected&&a.combine_items.many_to_no_selection_choose_phrase?a.combine_items.many_to_no_selection_choose_phrase:a.combine_items.one_to_no_selection_choose_phrase,g,g,a.combine_items);else if(a.ajax)if(b.actionTarget=p,b.actionRequests=D,a.ajax.confirm){l=q(a.ajax.confirm.html);s=q(a.ajax.confirm.download);f=a.ajax.confirm.message?a.upload?a.ajax.confirm.message:b.applyMergeFieldsToLabel(a.ajax.confirm.message,l,f,a.ajax.confirm.multiple_select_message):
h._nAA(b.actionTarget+h._uR(b.actionRequests),!1);s&&(b.actionRequests._download=1,b.searchTerm!==g&&(b.actionRequests._search=b.searchTerm),b.prefs[b.path]&&b.prefs[b.path].sortBy?(b.actionRequests._sort_col=b.prefs[b.path].sortBy,b.actionRequests._sort_desc=b.prefs[b.path].sortDesc?1:0):b.actionRequests._sort_col=b.labelTag);d=e="";d=B+"bc_form";if(s||a.upload){e+=ba("form","id",d,"action",b.actionTarget+"&_sk_form_submission=1","onsubmit","get('preloader_circle').style.visibility = 'visible';",
"target",B+"iframe","method","post","enctype",a.upload&&"multipart/form-data",">");for(x in b.actionRequests)u(b.actionRequests,x)&&(e+=K(z,"hidden",L,b.actionRequests[x],"name",x));l||(f=M(f,!0),l=!0)}e+=f;s||a.upload?(e+="</form>",d=K(z,P,Q,"submit_selected",L,a.ajax.confirm.button_message,R,"get('"+d+"').submit();")):d=K(z,P,Q,"submit_selected",L,a.ajax.confirm.button_message,R,b.globalName+".action2()");d+=K(z,P,Q,ca,L,a.ajax.confirm.cancel_button_message);k._sM(e,d,a.ajax.confirm.message_type,
g,!l);a.upload&&(h._bII()||$(I+"fallback_fileupload").click())}else b.action2();else a.help&&(f=a.help.message_type||"question",l=!q(a.help.html),a.help.message&&k._sM(a.help.message,!0,f,!1,l))}};c.eval=function(b,a,f,d,m,e,k,A,p,q,r){var t,v;r=r||a&&a.tuix||g;f=f||e||k||A||d||p||q;if("object"==typeof b){for(t in b)if(u(b,t)){v=b[t];t=t.split(".",2);f=t[0];d=t[1];if(!d)d=f,a=n;else if("lib"!=f&&!(a=n[f]))return!1;if(!a[d]||!a[d].apply(a,c._tTA(v)))return!1}return!0}try{v=c._dE(b+"",a,f,d,m,e,k,A,
p,q,r)}catch(w){throw n.console&&console.error&&console.error("JavaScript error in evaluated expression:",b),w;}"function"==typeof v&&(v=v(f,d,m,r,e,k,A,p,q));return h._eTB(v)};c.hidden=function(b,a,f,d,m,e,g,h,k,n){b=b||m||e||g||f||h||k;return!b||q(b.hidden)||b.visible_if&&!c._e(b.visible_if,a,b,f,d,m,e,g,h,k,n)||b.js_condition&&!c._e(b.js_condition,a,b,f,d,m,e,g,h,k,n)};c.checkFunctionExists=function(b,a){return a?n[a]&&"function"==typeof n[a][b]:"function"==typeof n[b]};c.sortArray=function(b,
a){return c._sL(b,a,1)};c.sortArrayByOrd=function(b,a){return c._sL(b,a,"ord")};c.sortArrayByOrdinal=function(b,a){return c._sL(b,a,"ordinal")};c.sortArrayWithGrouping=function(b,a){return b[2]===a[2]?c._sL(b,a,1):b[2]===g?c._sL(b,a,1,2):a[2]===g?c._sL(b,a,2,1):c._sL(b,a,2)};c.sortLogic=function(b,a,c,d){b=b[c];a=d===g?a[c]:a[d];if(b===a)return 0;c=b==1*b;d=a==1*a;return c&&d?1*b<1*a?-1:1:c||d?c?-1:1:(""+b).toUpperCase()<(""+a).toUpperCase()?-1:1};c.getSortedIdsOfTUIXElements=function(b,a,f,d){var g,
e,h=!1,k=[];f||(f="ord");"items"==a&&b.columns&&b.columns[f]&&(h=b.columns[f].format);_._isOb(a)||(a=b[a]);if(a)for(e in a)u(a,e)&&(b=a[e])&&(b=b[f],"true_or_false"==h||"yes_or_no"==h?k.push([e,q(b),!0]):"remove_zero_padding"!=h&&b==(g=1*b)?k.push([e,g,!0]):b?k.push([e,b.toLowerCase(),!1]):k.push([e,0,!0]));d?k.sort(c.sortArrayDesc):k.sort(c.sortArrayForOrganizer);for(e in k)u(k,e)&&(k[e]=k[e][0]);return k};c.sortArrayForOrganizer=function(b,a){return b[1]===a[1]?0:(b[2]?a[2]:!a[2])?b[1]<a[1]?-1:
1:b[2]?-1:1};c.sortArrayDesc=function(b,a){return c._sAFO(a,b)};c.csvToObject=function(b){if(_._iS(b)){var a,c={};b=b.split(",");for(a in b)""!==b[a]&&(c[b[a]]=!0);return c}return b};c.tuixToArray=function(b){if(_._isAr(b))return b;var a,c,d=[];switch(typeof b){case "string":return b.split(/\s*,\s*/);case "object":for(a in b)u(b,a)&&(c=b[a],a==1*a?d.push(c):q(c)&&d.push(a))}return d};c.setButtonKin=function(b,a){c._sK(b,a||"organiser_button_with_children")};c.setKin=function(b,a){var c,d,h,e,k={};
for(c in b)u(b,c)&&(d=b[c],delete d.children,k[d.id]=c);for(c in b)u(b,c)&&(d=b[c],h=d.tuix||d,e=h.parent)&&(e=k[e],e=b[e])&&(e.children||(e.children=[],a!==g&&(e.css_class=e.css_class?e.css_class+" "+a:a)),d.enabled&&!q(h.remove_filter)&&(e.childEnabled=!0),d.current&&(e.childCurrent=!0),d.selected&&(e.childSelected=!0),e.children.push(d));for(c=b.length-1;0<=c;--c)d=b[c],h=d.tuix||d,(h.parent||q(h.hide_when_children_are_not_visible)&&!d.children)&&b.splice(c,1)};c.attempts={};c.attemptNum=0;c.keepTrying=
function(b,a){if(a===g)a=++c.attemptNum,c.attempts[a]=!0;else if(!c.attempts[a])return;b(a);setTimeout(function(){c._kT(b,a)},3E4)};c.stopTrying=function(b){return c.attempts[b]?(delete c.attempts[b],!0):!1};c.splitDataFromErrorMessage=function(b){_._iS(b)&&(b={responseText:b});if(b.data===g&&b.responseText&&-1!=(end=b.responseText.indexOf('{"')))try{var a=JSON.parse(b.responseText.substr(end));"object"==typeof a&&(b.data=a,b.responseText=b.responseText.substr(0,end))}catch(c){}return b};c.onChangeOrSearch=
function(){return h._bII()||h._bIE()?"onchange":"onsearch"};c.showDevTools=function(){return(k.adminSettings||{}).show_dev_tools};c.filter=function(b){return!1===b?function(a){return!a.location}:"string"==typeof b?function(a){return a.location==b}:b};c.find=function(b,a){return _._fi(b,c.filter(a))};c.init=!0;h._sN(c)})});

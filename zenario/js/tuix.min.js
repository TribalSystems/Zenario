zenario.lib(function(g,F,T,h,S,U,l,n,c,G,V,r,H,E,q,M,W,y,X,Y,s,Z,ea,D,N,fa,ga,ha,I,ia,ja,ka,la,ma,na,J,oa,pa,aa,O){y=y||{};_._e(" div span input select option h1 p".split(" "),function(l){c[l||"html"]=function(c){var h;a:{h=l||c;for(var n=arguments,p="<"+h,r=n.length,q=l?1:2,s,z,y={br:1,hr:1,img:1,link:1,input:1}[h];q<r;q+=2)s=n[q-1],z=n[q],"checked"==s||"disabled"==s||"multiple"==s||"selected"==s?z&&(p+=" "+s+'="'+s+'"'):!1!==z&&z!==g&&(p+=" "+s+'="'+M(z)+'"');p=y?p+"/>":p+">";if(r%2?l:!l){n=n[r-
1];if(">"===n){h=p;break a}p+=n}y||(p+="</"+h+">");h=p}return h}});c.lib=function(g){g(c.html,c.div,c.span,c.input,c.select,c.option,c.h1,c.p,"type","button","class","submit","value","onclick","style")};c.lib(function(ba,U,V,K,p,W,X,Y,z,P,Q,ca,L,R,Z){c.prop=function(b,a,c){var d=0,k,e,l;if(c!==g)d=1,l=arguments;else if("string"==typeof a){if(-1===a.indexOf("."))return b[a];l=a.split(".")}else l=a;for(k=l.length;d<k;++d)if(e=l[d],"object"==typeof b&&b[e]!==g)b=b[e];else return g;return b};c.microTemplate=
function(b,a,f){return l._mT(b,a,f,c.microTemplates)};c.onbeforeunload=function(){var b;return h.zenarioAB&&G.isOpen&&G.editModeOnBox()&&(G.changes()||G.callFunctionOnEditors("isDirty"))?y.leaveAdminBoxWarning:h.zenarioSE&&zenarioSE.isOpen&&zenarioSE.editModeOnBox()&&(zenarioSE.changes()||zenarioSE.callFunctionOnEditors("isDirty"))?y.leaveAdminBoxWarning:g!==(b=zenario_conductor.confirmOnCloseMessage())?b:n.checkSlotsBeingEdited&&n._cSBE()?y.leavePageWarning:g};c.uploading=!1;c.canDoHTML5Upload=function(){return h.FileReader};
c.clearHTML5UploadFromDragDrop=function(){delete c.uploadPathFromDragDrop;delete c.uploadRequestFromDragDrop;delete c.uploadCallBackFromDragDrop};c.setHTML5UploadFromDragDrop=function(b,a,f,d,k){return c._cDHTML5U()?(c.uploadPathFromDragDrop=b,c.uploadRequestFromDragDrop=a,c.uploadCallBackFromDragDrop=d,(k||T.body).addEventListener("drop",function(a){f&&f();c._dHTML5UFDD(a)},!1),!0):!1};c.doHTML5UploadFromDragDrop=function(b){c._sFDD(b);c._dHTML5U(b.target.files||b.dataTransfer.files,c.uploadPathFromDragDrop,
c.uploadRequestFromDragDrop,c.uploadCallBackFromDragDrop)};c.doHTML5Upload=function(b,a,f,d){a&&f&&!c.uploading&&(c.uploadPath=a,c.uploadRequest=f,c.uploadCallBack=d,c.uploadResponses=[],c.uploadFile=-1,c.uploadFiles=b,c._dNU())};c.doNextUpload=function(){var b=$(I+"progress_wrap"),a=$(I+"progress_name"),f=$(I+"progress_stop");a.text("");f.unbind("click");c.uploading=!!c.uploadFiles[++c.uploadFile];r.init&&r._sWC("uploading",c.uploading);if(c.uploading)if(b.show().removeClass(D+"progress_cancelled"),
E(D+"progressbar").style.width="0%",c.uploadFiles[c.uploadFile].size&&c.uploadFiles[c.uploadFile].name)if(n.maxUpload&&n.maxUpload<c.uploadFiles[c.uploadFile].size)n._sM(y.uploadTooLarge.replace("[[maxUploadF]]",n.maxUploadF),!0,"error"),c._dNU();else{a.text(c.uploadFiles[c.uploadFile].name);c.uploader=new XMLHttpRequest;c.uploader.open("POST",c.uploadPath,!0);try{c.uploader.setRequestHeader("X_FILENAME",c.uploadFiles[c.uploadFile].name)}catch(d){}var a=new FormData,k;for(k in c.uploadRequest)s(c.uploadRequest,
k)&&a.append(k,""+c.uploadRequest[k]);a.append("Filedata",c.uploadFiles[c.uploadFile]);c.uploader.upload.addEventListener("progress",c.uploadProgress,!1);c.uploader.addEventListener("load",c.uploadDone,!1);c.uploader.addEventListener("error",c.uploadDone,!1);c.uploader.addEventListener("abort",c.uploadDone,!1);f.click(function(){b.show().removeClass(D+"progress_cancelled");c.uploader.abort()});c.uploader.send(a)}else c._dNU();else b.hide(),c.uploadCallBack&&c.uploadCallBack(c.uploadResponses)};c.uploadProgress=
function(b){var a=0;b.lengthComputable&&(a=100*b.loaded/b.total);E(D+"progress_wrap").style.display="block";E(D+"progressbar").style.width=a+"%"};c.uploadDone=function(b){if(c.uploader.responseText&&1!=c.uploader.responseText)try{data=JSON.parse(c.uploader.responseText);if("object"!=typeof data)throw 0;c.uploadResponses.push(data)}catch(a){n.showMessage?n._sM(c.uploader.responseText,!0,"error",!1,!0):alert(c.uploader.responseText)}c._dNU()};c.stopDefault=function(b){(b=b||event)&&b.stopPropagation&&
b.stopPropagation();b&&b.preventDefault&&b.preventDefault();return!1};c.stopFileDragDrop=function(b){var a=!1;b.dataTransfer&&b.dataTransfer.types&&(a="function"==typeof b.dataTransfer.types.contains?b.dataTransfer.types.contains("Files"):"Files"==""+b.dataTransfer.types||b.dataTransfer.types[0]&&"Files"==""+b.dataTransfer.types[0]);a&&(b.stopPropagation(),b.preventDefault())};c.disableFileDragDrop=function(b){c._cDHTML5U()&&(b.addEventListener("drop",c.stopDefault,!1),b.addEventListener("dragenter",
c.stopDefault,!1),b.addEventListener("dragover",c.stopDefault,!1),b.addEventListener("dragexit",c.stopDefault,!1))};c.resizeImage=function(b,a,c,d,k,e){k.width=b;k.height=a;b*=1;a*=1;if(b!=c||a!=d)!e&&b<=c&&a<=d||(c/b<d/a?(k.width=c,k.height=Math.floor(a*c/b)):(k.height=d,k.width=Math.floor(b*d/a)))};c.checkActionUnique=function(b){var a=[],c,d=["admin_box","ajax","combine_items","navigation_path","frontend_link","help","link",R,"panel","pick_items","popout","organizer_quick","upload"];for(c in d)s(d,
c)&&b[d[c]]&&a.push(d[c]);switch(a.length){case 1:return!0;case 0:return!1;default:return console.log(b),alert("This navigation or button has multiple actions associated with it:\n\n"+a+"\n\n(See the console log for the faulty definition.)"),!1}};c.action=function(b,a,f,d,k,e,da,A){if(b.uploading||!k&&!c._cAU(a))return!1;var B;switch(b.globalName){case "zenarioO":B="handleOrganizerPanelAJAX";break;case "zenarioAT":B="handleAdminToolbarAJAX";break;case "zenarioW":B="handleWizardAJAX";break;case "zenarioAB":case "zenarioSE":B=
"handleAdminBoxAJAX";break;default:B="handlePluginAJAX"}!k&&a.link?k=a.link:!k&&a.panel&&a.panel._path_here&&(k={path:a.panel._path_here});if(!k||!r._pNA(k)){r.yourWorkInProgressLastUpdated=0;b.pickItemsItemLevel=f;b.postPickItemsObject=!1;var p,C,u;if((u=a.upload)||(u=a.ajax))A?(p=A,C=b.getKey(f)):!f&&a.ajax&&a.ajax.pass_matched_ids&&"zenarioO"==b.globalName?(p=F+N+"admin/organizer.ajax.php?__pluginClassName__="+u.class_name+"&path="+r.path+"&_get_matched_ids=1"+J+""+B+l._uR(r.lastRequests),C={}):
(p=F+O+"?__pluginClassName__="+u.class_name+"&__path__="+b.path+J+""+B,C=b.getKey(f)),u.request&&$.extend(C,u.request),e&&$.extend(C,e);if(a.upload){A=!c._cDHTML5U();e='<input type="file" name="Filedata"';var v,w;if(w=a.upload.accept||a.upload.extensions){w=c._tTA(w);for(v in w)if(s(w,v))switch(u=w[v],u){case "text":w[v]="text/*";break;case "images":w[v]="image/*";break;case "video":w[v]="video/*";break;case "audio":w[v]="audio/*";break;default:-1==u.indexOf("/")&&"."!=u.substr(0,1)&&(w[v]="."+u)}e+=
' accept="'+M(w.join(","))+'"'}else"Images"==a.upload.fileDesc&&(e+=' accept="image/*"');A&&(e+=' id="zenario_fallback_fileupload"');!A&&q(a.upload.multi)&&(e+=" multiple");e+="/>";if(A)a=l._cl(a),C._html5_backwards_compatibility_hack=1,a.ajax={class_name:a.upload.class_name,confirm:{message:e,html:!0,button_message:y.upload,cancel_button_message:y.cancel,form:!0},request:C};else{a=$(e);a.change(function(){b.uploadStart&&b.uploadStart();c._dHTML5U(this.files,p,C,function(a){b.uploadComplete(a)})});
a.click();return}}if(k)q(k.unselect_items)&&(r.selectedItems={},r.saveSelection()),r.go(k.path,d,k.refiner?{id:f?r._gKI():"",name:k.refiner}:g,g,g,g,g,da);else if(a.frontend_link){var t,m;a=a.frontend_link;var x=!1;f&&(t=b.getKeyId(!0))&&(m=b.tuix.items[t])&&m.frontend_link&&(a=m.frontend_link);"zenarioO"==b.globalName&&(a=r._pRL(a),-1!=a.indexOf("&zenario_sk_return=")&&(x=!0));x||a.substr(0,25)==N+"admin/welcome.php"?l._gTU(l._aBP(a)):-1!==a.indexOf("://")&&0!==a.indexOf(F)?h.open(a):"zenarioAT"==
b.globalName?l._gTU(l._aBP(a)):S&&!S.zenarioO?h.opener.location=l._aBP(a):h.storekeeperChildWindow&&!h.storekeeperChildWindow.closed?h.storekeeperChildWindow.location=l._aBP(a):h.storekeeperChildWindow=h.open(l._aBP(a))}else if(a.navigation_path)a=a.navigation_path,f&&(t=b.getKeyId(!0))&&(m=b.tuix.items[t])&&m.navigation_path&&(a=m.navigation_path),"zenarioO"==b.globalName?r.go(a,-1):l._gTU(l._aBP((h.zenarioATLinks&&h.zenarioATLinks.organizer||N+"admin/organizer.php")+"#"+a));else if(a.admin_box){n._nDS("loading");
f=b.getKey(f)||{};if(a.admin_box.key)for(x in a.admin_box.key)s(a.admin_box.key,x)&&(f[x]=a.admin_box.key[x]);G.open(a.admin_box.path,f,a.admin_box.tab,a.admin_box.values,g,q(a.admin_box.create_another)?a.admin_box:!1,g,q(a.admin_box.pass_matched_ids))}else if(a.popout){a=l._cl(a.popout);f&&(t=b.getKeyId(!0))&&(m=b.tuix.items[t])&&(m.popout&&(a=$.extend(a,m.popout)),!a.title&&b.popoutLabelFormat&&(a.title=b.applyMergeFields(b.popoutLabelFormat,!1,t)));m&&m.href&&a.href===g?a.href=m.href:m&&m.frontend_link&&
a.href===g?a.href=r._pRL(m.frontend_link,"_show_page_preview=1"):m&&a.href&&(a.href+=-1===a.href.indexOf("?")?"?":"&",m.checksum?(a.href+="c="+H(m.checksum),t==1*t&&(a.href+="&id="+t)):a.href=t==1*t?a.href+("id="+t):a.href+("c="+H(t)),f=b.getKey().usage||m.usage)&&(a.href+="&usage="+H(f));if(a.href){if(f=m&&m.filename||a.options&&a.options.filename||a.filename){if(x=f.match(/(.*) \[.*\]/))f=x[1];a.href+="&filename="+H(f)}a.href=l._aBP(a.href)}if(a.css_class){var E=(""+a.css_class).split(" ");a.onOpen=
function(){l._aCTC(E)};a.onClosed=function(){l._rCTC(E)}}a.iframe&&a.width===g&&(a.width="93%");a.iframe&&a.height===g&&(a.height="90%");m&&m.width&&(a.initialWidth=m.width);m&&m.height&&(a.initialHeight=m.height);a.preloading===g&&(a.preloading=!1);$[aa](a)}else if(a.organizer_quick)m=a.organizer_quick.path,f&&(t=b.getKeyId(!0))&&(m=m.replace(/\[\[id\]\]/g,t)),n._oQ(m,a.organizer_quick.min_path||a.organizer_quick.max_path||a.organizer_quick.path,a.organizer_quick.min_path,a.organizer_quick.max_path,
q(a.organizer_quick.disallow_refiners_looping_on_min_path),g,g,b.globalName);else if(a.pick_items&&!f)a.pick_items.ajax&&(b.postPickItemsObject=a.pick_items),b.actionTarget=F+O+"?__pluginClassName__="+a.pick_items.class_name+"&__path__="+b.path+J+""+B,b.actionRequests=b.getKey(f),a.pick_items.request&&$.extend(b.actionRequests,a.pick_items.request),n._oS(b.globalName,"pickItems",a.pick_items.multiple_select,a.pick_items.path,a.pick_items.target_path,a.pick_items.min_path,a.pick_items.max_path,a.pick_items.disallow_refiners_looping_on_min_path,
!0,a.pick_items.one_to_one_choose_phrase,a.pick_items.one_to_many_choose_phrase,g,g,g,g,g,b.getLastKeyId(!0),a.pick_items.allow_no_selection,a.pick_items.one_to_no_selection_choose_phrase,g,g,a.pick_items);else if(a.combine_items&&f)a.combine_items.ajax&&(b.postPickItemsObject=a.combine_items),b.actionTarget=F+O+"?__pluginClassName__="+a.combine_items.class_name+"&__path__="+b.path+J+""+B,b.actionRequests=b.getKey(f),a.combine_items.request&&$.extend(b.actionRequests,a.combine_items.request),n._oS(b.globalName,
"pickItems",a.combine_items.multiple_select,a.combine_items.path,a.combine_items.target_path,a.combine_items.min_path,a.combine_items.max_path,a.combine_items.disallow_refiners_looping_on_min_path,!0,1<b.itemsSelected&&a.combine_items.many_to_one_choose_phrase?a.combine_items.many_to_one_choose_phrase:a.combine_items.one_to_one_choose_phrase,1<b.itemsSelected&&a.combine_items.many_to_many_choose_phrase?a.combine_items.many_to_many_choose_phrase:a.combine_items.one_to_many_choose_phrase,g,g,g,g,g,
b.getKeyId(!1),a.combine_items.allow_no_selection,1<b.itemsSelected&&a.combine_items.many_to_no_selection_choose_phrase?a.combine_items.many_to_no_selection_choose_phrase:a.combine_items.one_to_no_selection_choose_phrase,g,g,a.combine_items);else if(a.ajax)if(b.actionTarget=p,b.actionRequests=C,a.ajax.confirm){m=q(a.ajax.confirm.html);t=q(a.ajax.confirm.download);f=a.ajax.confirm.message?a.upload?a.ajax.confirm.message:b.applyMergeFieldsToLabel(a.ajax.confirm.message,m,f,a.ajax.confirm.multiple_select_message):
l._nAA(b.actionTarget+l._uR(b.actionRequests),!1);t&&(b.actionRequests._download=1,b.searchTerm!==g&&(b.actionRequests._search=b.searchTerm),b.prefs[b.path]&&b.prefs[b.path].sortBy?(b.actionRequests._sort_col=b.prefs[b.path].sortBy,b.actionRequests._sort_desc=b.prefs[b.path].sortDesc?1:0):b.actionRequests._sort_col=b.labelTag);d=e="";d=D+"bc_form";if(t||a.upload){e+=ba("form","id",d,"action",b.actionTarget+"&_sk_form_submission=1","onsubmit","get('preloader_circle').style.visibility = 'visible';",
"target",D+"iframe","method","post","enctype",a.upload&&"multipart/form-data",">");for(x in b.actionRequests)s(b.actionRequests,x)&&(e+=K(z,"hidden",L,b.actionRequests[x],"name",x));m||(f=M(f,!0),m=!0)}e+=f;t||a.upload?(e+="</form>",d=K(z,P,Q,"submit_selected",L,a.ajax.confirm.button_message,R,"get('"+d+"').submit();")):d=K(z,P,Q,"submit_selected",L,a.ajax.confirm.button_message,R,b.globalName+".action2()");d+=K(z,P,Q,ca,L,a.ajax.confirm.cancel_button_message);n._sM(e,d,a.ajax.confirm.message_type,
g,!m);a.upload&&(l._bII()||$(I+"fallback_fileupload").click())}else b.action2();else a.help&&(f=a.help.message_type||"question",m=!q(a.help.html),a.help.message&&n._sM(a.help.message,!0,f,!1,m))}};c.eval=function(b,a,f,d,k,e,n,A,p,q,r){var u,v;r=r||a&&a.tuix||g;f=f||e||n||A||d||p||q;if("object"==typeof b){for(u in b)if(s(b,u)){v=b[u];u=u.split(".",2);f=u[0];d=u[1];if(!d)d=f,a=h;else if("lib"!=f&&!(a=h[f]))return!1;if(!a[d]||!a[d].apply(a,c._tTA(v)))return!1}return!0}try{v=c._dE(b+"",a,f,d,k,e,n,A,
p,q,r)}catch(w){throw h.console&&console.error&&console.error("JavaScript error in evaluated expression:",b),w;}"function"==typeof v&&(v=v(f,d,k,r,e,n,A,p,q));return l._eTB(v)};c.hidden=function(b,a,f,d,k,e,g,l,h,n){b=b||k||e||g||f||l||h;return!b||q(b.hidden)||b.visible_if&&!c._e(b.visible_if,a,b,f,d,k,e,g,l,h,n)||b.js_condition&&!c._e(b.js_condition,a,b,f,d,k,e,g,l,h,n)};c.checkFunctionExists=function(b,a){return a?h[a]&&"function"==typeof h[a][b]:"function"==typeof h[b]};c.sortArray=function(b,
a){return c._sL(b,a,1)};c.sortArrayByOrd=function(b,a){return c._sL(b,a,"ord")};c.sortArrayByOrdinal=function(b,a){return c._sL(b,a,"ordinal")};c.sortArrayWithGrouping=function(b,a){return b[2]===a[2]?c._sL(b,a,1):b[2]===g?c._sL(b,a,1,2):a[2]===g?c._sL(b,a,2,1):c._sL(b,a,2)};c.sortLogic=function(b,a,c,d){b=b[c];a=d===g?a[c]:a[d];if(b===a)return 0;c=b==1*b;d=a==1*a;return c&&d?1*b<1*a?-1:1:c||d?c?-1:1:(""+b).toUpperCase()<(""+a).toUpperCase()?-1:1};c.getSortedIdsOfTUIXElements=function(b,a,f,d){var g,
e,l=!1,h=[];f||(f="ord");"items"==a&&b.columns&&b.columns[f]&&(l=b.columns[f].format);_._isOb(a)||(a=b[a]);if(a)for(e in a)s(a,e)&&(b=a[e])&&(b=b[f],"true_or_false"==l||"yes_or_no"==l?h.push([e,q(b),!0]):"remove_zero_padding"!=l&&b==(g=1*b)?h.push([e,g,!0]):b?h.push([e,b.toLowerCase(),!1]):h.push([e,0,!0]));d?h.sort(c.sortArrayDesc):h.sort(c.sortArrayForOrganizer);for(e in h)s(h,e)&&(h[e]=h[e][0]);return h};c.sortArrayForOrganizer=function(b,a){return b[1]===a[1]?0:(b[2]?a[2]:!a[2])?b[1]<a[1]?-1:
1:b[2]?-1:1};c.sortArrayDesc=function(b,a){return c._sAFO(a,b)};c.csvToObject=function(b){if(_._iS(b)){var a,c={};b=b.split(",");for(a in b)""!==b[a]&&(c[b[a]]=!0);return c}return b};c.tuixToArray=function(b){if(_._isAr(b))return b;var a,c,d=[];switch(typeof b){case "string":return b.split(/\s*,\s*/);case "object":for(a in b)s(b,a)&&(c=b[a],a==1*a?d.push(c):q(c)&&d.push(a))}return d};c.setButtonKin=function(b,a){c._sK(b,a||"organiser_button_with_children")};c.setKin=function(b,a){var c,d,k,e,h={};
for(c in b)s(b,c)&&(d=b[c],delete d.children,h[d.id]=c);for(c in b)s(b,c)&&(d=b[c],k=d.tuix||d,e=k.parent)&&(e=h[e],e=b[e])&&(e.children||(e.children=[],a!==g&&(e.css_class=e.css_class?e.css_class+" "+a:a)),d.enabled&&!q(k.remove_filter)&&(e.childEnabled=!0),d.current&&(e.childCurrent=!0),e.children.push(d));for(c=b.length-1;0<=c;--c)d=b[c],k=d.tuix||d,(k.parent||q(k.hide_when_children_are_not_visible)&&!d.children)&&b.splice(c,1)};c.attempts={};c.attemptNum=0;c.keepTrying=function(b,a){if(a===g)a=
++c.attemptNum,c.attempts[a]=!0;else if(!c.attempts[a])return;b(a);setTimeout(function(){c._kT(b,a)},3E4)};c.stopTrying=function(b){return c.attempts[b]?(delete c.attempts[b],!0):!1};c.splitDataFromErrorMessage=function(b){_._iS(b)&&(b={responseText:b});if(b.data===g&&b.responseText&&-1!=(end=b.responseText.indexOf('{"')))try{var a=JSON.parse(b.responseText.substr(end));"object"==typeof a&&(b.data=a,b.responseText=b.responseText.substr(0,end))}catch(c){}return b};c.init=!0;l._sN(c)})});

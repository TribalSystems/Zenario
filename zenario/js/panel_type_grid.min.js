zenario.lib(function(K,H,L,r,M,N,G,n,O,P,a,v,w,Q,R,S,A,I,J,p,t){var f=J(t.grid=I(t.base));f.returnPanelTitle=function(){var c=this.tuix.title;!r.zenarioOSelectMode||this.path!=r.zenarioOTargetPath&&!1!==r.zenarioOTargetPath||(r.zenarioOMultipleSelect&&this.tuix.multiple_select_mode_title?c=this.tuix.multiple_select_mode_title:this.tuix.select_mode_title&&(c=this.tuix.select_mode_title));a.filteredView&&(c+=A.refined);return c};f.showPanel=function(a,b,e){this.setHeader(a);this.showViewOptions(a);
this.drawItems(b);this.setScroll(b);this.setTooltips(a,b,e)};f.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(n.microTemplate("zenario_organizer_grid",this.items));a.show()};f.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};f.showButtons=function(c){var b,e={itemButtons:!1,collectionButtons:!1};0<a.itemsSelected?e.itemButtons=a.getItemButtons():e.collectionButtons=a.getCollectionButtons();b=n.microTemplate("zenario_organizer_panel_buttons",e);
c.html(b).show();this.enableDragDropUpload(e.collectionButtons,e.itemButtons);n.tooltips(c.find("a[title]"));n.tooltips(c.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};f.setScroll=function(c){var b;if(b=a.getKeyId(!0)){if(b=$(v("organizer_item_"+b)).position())b=Math.max(0,b.top+c.scrollTop()-Math.floor(c.height()/4)),c.scrollTop(b).trigger("scroll")}else f.restoreScrollPosition(c)};f.enableDragDropUpload=function(c,b){n.canDoHTML5Upload()||
this.disableDragDropUpload();var e,d,k,m=!1;do{if(b)for(e in b)if(p(b,e)&&(k=b[e],!k.disabled&&k.tuix.upload&&w(k.tuix.upload.drag_and_drop))){m=k.tuix;break}if(c)for(e in c){if(p(c,e)&&(k=c[e],!k.disabled&&k.tuix.upload&&w(k.tuix.upload.drag_and_drop))){m=k.tuix;break}}else for(d in this.tuix.collection_buttons)if(p(this.tuix.collection_buttons,d)&&(k=this.tuix.collection_buttons[d])&&k.upload&&w(k.upload.drag_and_drop)&&!a.checkButtonHidden(k)&&!a.checkDisabled(k)){m=k;break}}while(0);if(m){var g;
e=a.getKey(a.uploadIsItemLevel);if(m.upload&&m.upload.request)for(g in m.upload.request)p(m.upload.request,g)&&(e[g]=m.upload.request[g]);e.__pluginClassName__=m.class_name;e.__path__=this.path;e.method_call="handleOrganizerPanelAJAX";n.setHTML5UploadFromDragDrop(H+"zenario/ajax.php",e,function(){a.disableInteraction()},function(){a.enableInteraction();a.selectCreatedIds()},v("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};
f.disableDragDropUpload=function(){n.clearHTML5UploadFromDragDrop();$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover")};f.setHeader=function(c){var b={quickFilters:a.getQuickFilters()};c.html(n.microTemplate("zenario_organizer_panel_header",b));c.show()};f.sizePanel=function(a,b,e,d){this.items&&this.drawPagination(e)};f.drawPagination=function(c){c.html(n.microTemplate("zenario_organizer_pagination",this.items)).show();var b=a.getPageCount(),e=c.find("#organizer_pagination");
1<b&&e.size()&&setTimeout(function(){var c=890>=$(r).width()?5:10;e.jPaginator({nbPages:a.getPageCount(),selectedPage:a.getCurrentPage(),nbVisible:c,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(c,b){a.goToPage(b)}})},0)};f.setTooltips=function(a,b,e){n.tooltips(b.find("[title]"));n.tooltips(a.find("a[title]"));n.tooltips(a.find("#organizer_quickFilter ul ul"),
{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};f.getMergeFieldsForItemsAndColumns=function(c){var b=!1,e=!1,d,k,m,g,f,n=-1,x=-1,B=!1;f="firstcell ";var C=0,D={},y,q,l={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a.allItemsSelected()};(y=this.tuix.label_format_for_grid_view)||(y="[["+a.defaultSortColumn+"]]");q=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||y;a.popoutLabelFormat=this.tuix.label_format_for_popouts;
if(this.tuix.item_buttons)for(k in this.tuix.item_buttons)if(p(this.tuix.item_buttons,k)){e=!0;break}for(m in a.sortedColumns)p(a.sortedColumns,m)&&(d=a.sortedColumns[m],a.isShowableColumn(d,!0)&&(B=d));for(m in a.sortedColumns)if(p(a.sortedColumns,m)){d=a.sortedColumns[m];if(q==d||-1!==q.indexOf("[["+d+"]]"))D[d]=!0;a.isShowableColumn(d,!0)&&(k={id:d,tuix:this.tuix.columns[d],htmlId:"organizer_column__"+d,css_class:f+(B==d?"lastcell":"")+(D[d]?" label_column":"")+a.columnCssClass(d),title:this.tuix.columns[d].title,
tooltip:this.tuix.columns[d].tooltip},this.addExtraMergeFieldsForColumns(l,k),l.columns[++n]=k,f="")}l.totalWidth+=a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var s,E;a.thisPageSize&&(s=a.page*a.thisPageSize,E=s-a.thisPageSize,s=Math.min(s,a.searchMatches),l.pageStart=E+1,l.pageStop=s);l.page=a.page;l.pageCount=a.pageCount;l.itemCount=a.searchMatches;q="firstrow ";for(var z in a.searchedItems)if(p(a.searchedItems,z)){var h=a.searchedItems[z],b=!0;if(a.thisPageSize)if(z>=
s)break;else if(z<E)continue;if(this.tuix.items[h]){if(n=!!a.itemClickThroughLink(h))l.canClickThrough=!0;g={id:h,cells:[],tuix:this.tuix.items[h],open_in_inspection_view:a.inspectionView&&h==a.inspectionViewItem,canClickThrough:n,showCheckbox:r.zenarioOSelectMode||e,label:a.applySmallSpaces($.trim(a.applyMergeFields(y,!1,h,!0))).replace(/\n/g,"<br/>"),selected:!!this.selectedItems[h],css_class:a.rowCssClass(h)+" "+q};g.image_css_class=a.getItemCSSClass(h);!c&&this.tuix.items[h].list_image?(g.image_css_class+=
" organiser_item_with_image",g.image=G.addBasePath(this.tuix.items[h].list_image)):c&&this.tuix.items[h].image&&(g.image_css_class+=" organiser_item_with_image",g.image=G.addBasePath(this.tuix.items[h].image));g.tooltip=this.tuix.items[h].tooltip;!g.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a.itemClickThroughLink(h)?g.tooltip=a.applyMergeFields(this.tuix.item.tooltip_when_link_is_active,!0,h):this.tuix.item.tooltip&&(g.tooltip=a.applyMergeFields(this.tuix.item.tooltip,
!0,h)));g.inline_buttons=a.getInlineButtons(h);g.inline_buttons&&(C=g.inline_buttons.length)&&C>l.maxNumberOfInlineButtons&&(l.maxNumberOfInlineButtons=C);this.addExtraMergeFieldsForRows(l,g);var v=-1;f="firstcell ";var F=!1,t=!1,u,n=-1;for(m in a.sortedColumns)p(a.sortedColumns,m)&&(d=a.sortedColumns[m],a.isShowableColumn(d,!0)&&(k=l.columns[++n],u=a.columnValue(h,d),F=!(""==u&&0!==u),f={id:d,first:!!f,css_class:"organizer_column__"+d+"__cell "+q+f+(B==d?"lastcell":"")+(w(this.tuix.columns[d].align_right)?
" right":"")+(D[d]?" label_column":"")+a.columnCssClass(d,h),value:u,needsComma:F&&t},this.addExtraMergeFieldsForCells(l,k,g,f),g.cells[++v]=f,f="",t=F&&!(u+"").match(/\W\s*$/)));l.items[++x]=g;a.shownItems[h]=!0;++a.shownItemsLength;q=""}}for(x in l.items)p(l.items,x)&&(g=l.items[x],g.maxNumberOfInlineButtons=l.maxNumberOfInlineButtons)}for(h in this.selectedItems)p(this.selectedItems,h)&&(a.shownItems[h]||delete this.selectedItems[h]);b||(l.no_items_message=a.filteredView?this.tuix.no_items_in_search_message?
this.tuix.no_items_in_search_message:A.noItemsInSearch:this.tuix.no_items_message?this.tuix.no_items_message:A.noItems);this.addExtraMergeFields(l);return l};f.addExtraMergeFields=function(a){};f.addExtraMergeFieldsForColumns=function(a,b){};f.addExtraMergeFieldsForRows=function(a,b){};f.addExtraMergeFieldsForCells=function(a,b,e,d){}},zenarioO.panelTypes);

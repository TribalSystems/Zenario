zenario.lib(function(d,I,M,s,N,t,D,m,u,O,P,a,Q,z,A,R,S,E,J,K,n,x,T,r,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ga,ha,ia,L){d=K(x.grid=J(x.base));d.returnAJAXRequests=function(){return{skinId:D.skinId||t&&t.zenario&&t.zenario.skinId}};d.returnPanelTitle=function(){var f=s.zenarioOSelectMode&&(this.path==s.zenarioOTargetPath||!1===s.zenarioOTargetPath)&&(s.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(f+=E.refined);return f};d.showPanel=
function(a,g,c){this.setHeader(a);this.showViewOptions(a);this.drawItems(g);this.setScroll(g);this.setTooltips(a,g,c)};d.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(this.microTemplate(r+"organizer_grid",this.items));a.show()};d.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};d.showButtons=function(f){var g,c={itemButtons:!1,collectionButtons:!1};0<a.itemsSelected?c.itemButtons=a._geItBu():c.collectionButtons=a._gCB();g=this.microTemplate(r+
"organizer_panel_buttons",c);f.html(g).show();this.enableDragDropUpload(c.collectionButtons,c.itemButtons);m._to(f.find("a[title]"));m._to(f.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};d.setScroll=function(f){var g=this,c=function(){var b;if(b=a._gKI(!0)){if(b=g.getItemPosition(f,b))b=Math.max(0,b.top-Math.floor(f.height()/4)),f.scrollTop(b).trigger("scroll")}else g.restoreScrollPosition(f)};s.zenarioONotFull?setTimeout(c,0):c()};
d.getItemPosition=function(a,g){var c=$(z("organizer_item_"+g)).position();c.top+=a.scrollTop();return c};d.enableDragDropUpload=function(f,g){u._cDHTML5U()||this.disableDragDropUpload();var c,b,e,p=!1;do{if(g)for(c in g)if(n(g,c)&&(e=g[c],!e.disabled&&e.tuix.upload&&A(e.tuix.upload.drag_and_drop))){p=e.tuix;break}if(f)for(c in f){if(n(f,c)&&(e=f[c],!e.disabled&&e.tuix.upload&&A(e.tuix.upload.drag_and_drop))){p=e.tuix;break}}else for(b in this.tuix.collection_buttons)if(n(this.tuix.collection_buttons,
b)&&(e=this.tuix.collection_buttons[b])&&e.upload&&A(e.upload.drag_and_drop)&&!a._cBH(e)&&!a._cD(e)){p=e;break}}while(0);if(p){var h;c=a._gK(a.uploadIsItemLevel);if(p.upload&&p.upload.request)for(h in p.upload.request)n(p.upload.request,h)&&(c[h]=p.upload.request[h]);c.__pluginClassName__=p.class_name;c.__path__=this.path;c.method_call="handleOrganizerPanelAJAX";u._sHTML5UFDD(I+L+"",c,function(){a._dI()},function(){a._eI();a._sCI()},z("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};
d.disableDragDropUpload=function(){u._cHTML5UFDD();$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover")};d.setHeader=function(f){var g={quickFilters:a._gQF()};f.html(this.microTemplate(r+"organizer_panel_header",g));f.show()};d.sizePanel=function(a,g,c,b){this.items&&this.drawPagination(c)};d.drawPagination=function(f){f.html(this.microTemplate(r+"organizer_pagination",this.items)).show();var g=a._gPC(),c=f.find("#organizer_pagination");1<g&&c.size()&&setTimeout(function(){var b=
890>=$(s).width()?5:10;c.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:b,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(b,c){a._gTP(c)}})},0)};d.setTooltips=function(a,g,c){m._to(g.find("[title]"));m._to(a.find("a[title]"));m._to(a.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};
d.getMergeFieldsForItemsAndColumns=function(f){var g=!1,c=!1,b,e,d,h,q,m=-1,r=-1,t=!1;q="firstcell ";var u=0,F={},B,v,l={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._aIS()};(B=this.tuix.label_format_for_grid_view)||(B="[["+a.defaultSortColumn+"]]");v=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||B;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(b in this.tuix.item_buttons)if(n(this.tuix.item_buttons,
b)){c=!0;break}for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],a._iSC(b,!0)&&(t=b));for(d in a.sortedColumns)if(n(a.sortedColumns,d)){b=a.sortedColumns[d];if(v==b||-1!==v.indexOf("[["+b+"]]"))F[b]=!0;a._iSC(b,!0)&&(e=this.tuix.columns[b],e={id:b,tuix:e,htmlId:"organizer_column__"+b,css_class:q+(t==b?"lastcell":"")+(F[b]?" label_column":"")+a._cCC(b),title:e.title,tooltip:e.tooltip,encrypted:e.encrypted},this.addExtraMergeFieldsForColumns(l,e),l.columns[++m]=e,q="")}l.totalWidth+=
a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var w,G;a.thisPageSize&&(w=a.page*a.thisPageSize,G=w-a.thisPageSize,w=Math.min(w,a.searchMatches),l.pageStart=G+1,l.pageStop=w);l.page=a.page;l.pageCount=a.pageCount;l.itemCount=a.searchMatches;v="firstrow ";for(var C in a.searchedItems)if(n(a.searchedItems,C)){var k=a.searchedItems[C],g=!0;if(a.thisPageSize)if(C>=w)break;else if(C<G)continue;if(this.tuix.items[k]){if(m=!!a._iCTL(k))l.canClickThrough=!0;h={id:k,cells:[],
tuix:this.tuix.items[k],open_in_inspection_view:a.inspectionView&&k==a.inspectionViewItem,canClickThrough:m,showCheckbox:s.zenarioOSelectMode||c,label:a._aSS($.trim(a._aMF(B,!1,k,!0))).replace(/\n/g,"<br/>"),selected:!!this.selectedItems[k],css_class:a._rCC(k)+" "+v};h.image_css_class=a._gICC(k);!f&&this.tuix.items[k].list_image?(h.image_css_class+=" organiser_item_with_image",h.image=D._aBP(this.tuix.items[k].list_image)):f&&this.tuix.items[k].image&&(h.image_css_class+=" organiser_item_with_image",
h.image=D._aBP(this.tuix.items[k].image));h.tooltip=this.tuix.items[k].tooltip;!h.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(k)?h.tooltip=a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,k):this.tuix.item.tooltip&&(h.tooltip=a._aMF(this.tuix.item.tooltip,!0,k)));h.inline_buttons=a._gIB(k);h.inline_buttons&&(u=h.inline_buttons.length)&&u>l.maxNumberOfInlineButtons&&(l.maxNumberOfInlineButtons=u);this.addExtraMergeFieldsForRows(l,h);var z=-1;q="firstcell ";var H=
!1,x=!1,y,m=-1;for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],a._iSC(b,!0)&&(e=l.columns[++m],y=a._cV(k,b),H=!(""==y&&0!==y),q={id:b,first:!!q,css_class:"organizer_column__"+b+"__cell "+v+q+(t==b?"lastcell":"")+(A(this.tuix.columns[b].align_right)?" right":"")+(F[b]?" label_column":"")+a._cCC(b,k),value:y,needsComma:H&&x},this.addExtraMergeFieldsForCells(l,e,h,q),h.cells[++z]=q,q="",x=H&&!(y+"").match(/\W\s*$/)));l.items[++r]=h;a.shownItems[k]=!0;++a.shownItemsLength;v=""}}for(r in l.items)n(l.items,
r)&&(h=l.items[r],h.maxNumberOfInlineButtons=l.maxNumberOfInlineButtons)}for(k in this.selectedItems)n(this.selectedItems,k)&&(a.shownItems[k]||delete this.selectedItems[k]);g||(l.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||E.noItemsInSearch:a._pP("no_items_message")||E.noItems);this.addExtraMergeFields(l);return l};d.addExtraMergeFields=function(a){};d.addExtraMergeFieldsForColumns=function(a,d){};d.addExtraMergeFieldsForRows=function(a,d){};d.addExtraMergeFieldsForCells=
function(a,d,c,b){}},zenarioO.panelTypes);

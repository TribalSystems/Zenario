zenario.lib(function(M,I,N,s,O,t,D,m,u,P,Q,a,R,z,A,S,T,E,J,K,n,x,U,r,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,L){var c=K(x.grid=J(x.base));c.returnAJAXRequests=function(){return{skinId:D.skinId||t&&t.zenario&&t.zenario.skinId}};c.returnPanelTitle=function(){var e=s.zenarioOSelectMode&&(this.path==s.zenarioOTargetPath||!1===s.zenarioOTargetPath)&&(s.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(e+=E.refined);return e};c.showPanel=
function(a,k,d){this.setHeader(a);this.showViewOptions(a);this.drawItems(k);this.setScroll(k);this.setTooltips(a,k,d)};c.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(this.microTemplate(r+"organizer_grid",this.items));a.show()};c.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};c.showButtons=function(e){var k,d={itemButtons:!1,collectionButtons:!1};0<a.itemsSelected?d.itemButtons=a._geItBu():d.collectionButtons=a._gCB();k=this.microTemplate(r+
"organizer_panel_buttons",d);e.html(k).show();this.enableDragDropUpload(d.collectionButtons,d.itemButtons);m._to(e.find("a[title]"));m._to(e.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};c.setScroll=function(e){var k=this,d=function(){var b;if(b=a._gKI(!0)){if(b=k.getItemPosition(b))b=Math.max(0,b.top+e.scrollTop()-Math.floor(e.height()/4)),e.scrollTop(b).trigger("scroll")}else c.restoreScrollPosition(e)};s.zenarioONotFull?setTimeout(d,
0):d()};c.getItemPosition=function(a){return $(z("organizer_item_"+a)).position()};c.enableDragDropUpload=function(e,k){u._cDHTML5U()||this.disableDragDropUpload();var d,b,f,p=!1;do{if(k)for(d in k)if(n(k,d)&&(f=k[d],!f.disabled&&f.tuix.upload&&A(f.tuix.upload.drag_and_drop))){p=f.tuix;break}if(e)for(d in e){if(n(e,d)&&(f=e[d],!f.disabled&&f.tuix.upload&&A(f.tuix.upload.drag_and_drop))){p=f.tuix;break}}else for(b in this.tuix.collection_buttons)if(n(this.tuix.collection_buttons,b)&&(f=this.tuix.collection_buttons[b])&&
f.upload&&A(f.upload.drag_and_drop)&&!a._cBH(f)&&!a._cD(f)){p=f;break}}while(0);if(p){var g;d=a._gK(a.uploadIsItemLevel);if(p.upload&&p.upload.request)for(g in p.upload.request)n(p.upload.request,g)&&(d[g]=p.upload.request[g]);d.__pluginClassName__=p.class_name;d.__path__=this.path;d.method_call="handleOrganizerPanelAJAX";u._sHTML5UFDD(I+L+"",d,function(){a._dI()},function(){a._eI();a._sCI()},z("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};
c.disableDragDropUpload=function(){u._cHTML5UFDD();$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover")};c.setHeader=function(e){var k={quickFilters:a._gQF()};e.html(this.microTemplate(r+"organizer_panel_header",k));e.show()};c.sizePanel=function(a,k,d,b){this.items&&this.drawPagination(d)};c.drawPagination=function(e){e.html(this.microTemplate(r+"organizer_pagination",this.items)).show();var k=a._gPC(),d=e.find("#organizer_pagination");1<k&&d.size()&&setTimeout(function(){var b=
890>=$(s).width()?5:10;d.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:b,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(b,e){a._gTP(e)}})},0)};c.setTooltips=function(a,k,d){m._to(k.find("[title]"));m._to(a.find("a[title]"));m._to(a.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};
c.getMergeFieldsForItemsAndColumns=function(e){var k=!1,d=!1,b,f,c,g,q,m=-1,r=-1,t=!1;q="firstcell ";var u=0,F={},B,v,l={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._aIS()};(B=this.tuix.label_format_for_grid_view)||(B="[["+a.defaultSortColumn+"]]");v=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||B;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(b in this.tuix.item_buttons)if(n(this.tuix.item_buttons,
b)){d=!0;break}for(c in a.sortedColumns)n(a.sortedColumns,c)&&(b=a.sortedColumns[c],a._iSC(b,!0)&&(t=b));for(c in a.sortedColumns)if(n(a.sortedColumns,c)){b=a.sortedColumns[c];if(v==b||-1!==v.indexOf("[["+b+"]]"))F[b]=!0;a._iSC(b,!0)&&(f=this.tuix.columns[b],f={id:b,tuix:f,htmlId:"organizer_column__"+b,css_class:q+(t==b?"lastcell":"")+(F[b]?" label_column":"")+a._cCC(b),title:f.title,tooltip:f.tooltip,encrypted:f.encrypted},this.addExtraMergeFieldsForColumns(l,f),l.columns[++m]=f,q="")}l.totalWidth+=
a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var w,G;a.thisPageSize&&(w=a.page*a.thisPageSize,G=w-a.thisPageSize,w=Math.min(w,a.searchMatches),l.pageStart=G+1,l.pageStop=w);l.page=a.page;l.pageCount=a.pageCount;l.itemCount=a.searchMatches;v="firstrow ";for(var C in a.searchedItems)if(n(a.searchedItems,C)){var h=a.searchedItems[C],k=!0;if(a.thisPageSize)if(C>=w)break;else if(C<G)continue;if(this.tuix.items[h]){if(m=!!a._iCTL(h))l.canClickThrough=!0;g={id:h,cells:[],
tuix:this.tuix.items[h],open_in_inspection_view:a.inspectionView&&h==a.inspectionViewItem,canClickThrough:m,showCheckbox:s.zenarioOSelectMode||d,label:a._aSS($.trim(a._aMF(B,!1,h,!0))).replace(/\n/g,"<br/>"),selected:!!this.selectedItems[h],css_class:a._rCC(h)+" "+v};g.image_css_class=a._gICC(h);!e&&this.tuix.items[h].list_image?(g.image_css_class+=" organiser_item_with_image",g.image=D._aBP(this.tuix.items[h].list_image)):e&&this.tuix.items[h].image&&(g.image_css_class+=" organiser_item_with_image",
g.image=D._aBP(this.tuix.items[h].image));g.tooltip=this.tuix.items[h].tooltip;!g.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(h)?g.tooltip=a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,h):this.tuix.item.tooltip&&(g.tooltip=a._aMF(this.tuix.item.tooltip,!0,h)));g.inline_buttons=a._gIB(h);g.inline_buttons&&(u=g.inline_buttons.length)&&u>l.maxNumberOfInlineButtons&&(l.maxNumberOfInlineButtons=u);this.addExtraMergeFieldsForRows(l,g);var z=-1;q="firstcell ";var H=
!1,x=!1,y,m=-1;for(c in a.sortedColumns)n(a.sortedColumns,c)&&(b=a.sortedColumns[c],a._iSC(b,!0)&&(f=l.columns[++m],y=a._cV(h,b),H=!(""==y&&0!==y),q={id:b,first:!!q,css_class:"organizer_column__"+b+"__cell "+v+q+(t==b?"lastcell":"")+(A(this.tuix.columns[b].align_right)?" right":"")+(F[b]?" label_column":"")+a._cCC(b,h),value:y,needsComma:H&&x},this.addExtraMergeFieldsForCells(l,f,g,q),g.cells[++z]=q,q="",x=H&&!(y+"").match(/\W\s*$/)));l.items[++r]=g;a.shownItems[h]=!0;++a.shownItemsLength;v=""}}for(r in l.items)n(l.items,
r)&&(g=l.items[r],g.maxNumberOfInlineButtons=l.maxNumberOfInlineButtons)}for(h in this.selectedItems)n(this.selectedItems,h)&&(a.shownItems[h]||delete this.selectedItems[h]);k||(l.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||E.noItemsInSearch:a._pP("no_items_message")||E.noItems);this.addExtraMergeFields(l);return l};c.addExtraMergeFields=function(a){};c.addExtraMergeFieldsForColumns=function(a,c){};c.addExtraMergeFieldsForRows=function(a,c){};c.addExtraMergeFieldsForCells=
function(a,c,d,b){}},zenarioO.panelTypes);

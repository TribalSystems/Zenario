zenario.lib(function(l,Q,U,v,V,F,K,x,L,W,X,a,Y,Z,y,M,aa,ba,G,R,S,p,N){l=S(N.grid=R(N.base));l.returnAJAXRequests=function(){return{skinId:zenarioL.skinId||F&&F.zenario&&F.zenarioL.skinId}};l.returnPanelTitle=function(){var b=v.zenarioOSelectMode&&(this.path==v.zenarioOTargetPath||!1===v.zenarioOTargetPath)&&(v.zenarioOMultipleSelect&&a._lhq("multiple_select_mode_title")||a._lhq("select_mode_title"))||a._lhq("title");a.filteredView&&(b+=G.refined);return b};l.showPanel=function(b,c,f){this.setHeader(b);
this.showViewOptions(b);this.drawItems(c);this.setScroll(c);this.setTooltips(b,c,f)};l.drawItems=function(b){this.items=this.getMergeFieldsForItemsAndColumns(!0);b.html(this.microTemplate("zenario_organizer_grid",this.items));b.show()};l.showViewOptions=function(b){b.find("#organizer_viewOptions").show()};l.showButtons=function(b){var c={};0<a.itemsSelected&&a._khv(c);a._5qa(c);var f=this.microTemplate("zenario_organizer_panel_buttons",c);b.html(f).show();this.enableDragDropUpload(c.collectionButtons,
c.itemButtons);x._cjm(b.find("a[title]"));x._cjm(b.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};l.setScroll=function(b){var c=this,f=function(){var d;if(d=a._6ie(!0)){if(d=c.getItemPosition(b,d))d=Math.max(0,d.top-Math.floor(b.height()/4)),b.scrollTop(d).trigger("scroll")}else c.restoreScrollPosition(b)};v.zenarioONotFull?setTimeout(f,0):f()};l.getItemPosition=function(b,c){c=$(M("organizer_item_"+c)).position();c.top+=b.scrollTop();
return c};l.enableDragDropUpload=function(b,c){L._3gj()||this.disableDragDropUpload();var f,d,n=!1;if(c)for(f in c)if(p(c,f)){var h=c[f];if(!h.disabled&&h.tuix.upload&&y(h.tuix.upload.drag_and_drop)){n=h.tuix;break}}if(b)for(f in b){if(p(b,f)&&(h=b[f],!h.disabled&&h.tuix.upload&&y(h.tuix.upload.drag_and_drop))){n=h.tuix;break}}else for(d in this.tuix.collection_buttons)if(p(this.tuix.collection_buttons,d)&&(h=this.tuix.collection_buttons[d])&&h.upload&&y(h.upload.drag_and_drop)&&!a._b0p(h)&&!a._jdn(h)){n=
h;break}if(n){var u;b=a._i1(a.uploadIsItemLevel);if(n.upload&&n.upload.request)for(u in n.upload.request)p(n.upload.request,u)&&(b[u]=n.upload.request[u]);b.__pluginClassName__=n.class_name;b.__path__=this.path;b.method_call="handleOrganizerPanelAJAX";L._u4i(Q+"zenario/ajax.php",b,function(){a._x6q()},function(){a._rj7();a._2oe()},M("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};l.disableDragDropUpload=function(){$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover").off("drop")};
l.setHeader=function(b){var c={quickFilters:a._v94()};b.html(this.microTemplate("zenario_organizer_panel_header",c));b.show()};l.sizePanel=function(b,c,f,d){this.items&&this.drawPagination(f)};l.drawPagination=function(b){b.html(this.microTemplate("zenario_organizer_pagination",this.items)).show();var c=a._dt1(),f=b.find("#organizer_pagination");1<c&&f.length&&setTimeout(function(){var d=890>=$(v).width()?5:10;f.jPaginator({nbPages:a._dt1(),selectedPage:a._awe(),nbVisible:d,widthPx:24,marginPx:1,
overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(n,h){a._6gn(h)}})},0)};l.setTooltips=function(b,c,f){x._cjm(c.find("[title]"));x._cjm(b.find("a[title]"));x._cjm(b.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};l.getMergeFieldsForItemsAndColumns=function(b){var c=!1,f=!1,d,n=-1,h=-1,u=!1;var r="firstcell ";var H=
0,I={},B,g={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._qbt()};(B=this.tuix.label_format_for_grid_view)||(B="[["+a.defaultSortColumn+"]]");var w=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||B;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(e in this.tuix.item_buttons)if(p(this.tuix.item_buttons,e)){f=!0;break}for(d in a.sortedColumns)if(p(a.sortedColumns,d)){var e=a.sortedColumns[d];
a._7fm(e,!0)&&(u=e)}for(d in a.sortedColumns)if(p(a.sortedColumns,d)){e=a.sortedColumns[d];if(w==e||-1!==w.indexOf("[["+e+"]]"))I[e]=!0;if(a._7fm(e,!0)){var t=this.tuix.columns[e];t={id:e,tuix:t,htmlId:"organizer_column__"+e,css_class:r+(u==e?"lastcell":"")+(I[e]?" label_column":"")+a._2jx(e),title:t.title,tooltip:t.tooltip,encrypted:t.encrypted};this.addExtraMergeFieldsForColumns(g,t);g.columns[++n]=t;r=""}}g.totalWidth+=a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){if(a.thisPageSize){var z=
a.page*a.thisPageSize;var O=z-a.thisPageSize;z=Math.min(z,a.searchMatches);g.pageStart=O+1;g.pageStop=z}g.page=a.page;g.pageCount=a.pageCount;g.itemCount=a.searchMatches;w="firstrow ";var A,C=this.tuix.item||{};for(A in a.searchedItems)if(p(a.searchedItems,A)){var m=a.searchedItems[A];c=!0;var q=this.tuix.items[m];if(a.thisPageSize)if(A>=z)break;else if(A<O)continue;if(q){if(n=!!a._vn8(m))g.canClickThrough=!0;var k={id:m,cells:[],item:q,tuix:q,open_in_inspection_view:a.inspectionView&&m==a.inspectionViewItem,
canClickThrough:n,showCheckbox:v.zenarioOSelectMode||f,label:a._eew($.trim(a._yqq(B,!1,m,!0))).r(/\n/g,"<br/>"),selected:!!this.selectedItems[m],css_class:a._q9o(m)+" "+w};k.short_checksum=q.short_checksum;k.image_css_class=a._r9t(m);!b&&q.image?(k.image_css_class+=" organizer_item_with_image",k.image=K._ozg(q.image)):b&&q.image&&(k.image_css_class+=" organizer_item_with_image",k.image=K._ozg(q.image));!(k.tooltip=q.tooltip)&&C.tooltip&&(k.tooltip=a._yqq(C.tooltip,!0,m));a._vn8(m)&&!(k.tooltip_when_link_is_active=
q.tooltip_when_link_is_active)&&C.tooltip_when_link_is_active&&(k.tooltip_when_link_is_active=a._yqq(C.tooltip_when_link_is_active,!0,m));k.inline_buttons=a._6fb(m);k.inline_buttons&&(H=k.inline_buttons.length)&&H>g.maxNumberOfInlineButtons&&(g.maxNumberOfInlineButtons=H);this.addExtraMergeFieldsForRows(g,k);var T=-1;r="firstcell ";var P=!1;n=-1;for(d in a.sortedColumns)if(p(a.sortedColumns,d)&&(e=a.sortedColumns[d],a._7fm(e,!0))){t=g.columns[++n];var J=this.tuix.columns[e];var D=y(J.html);var E=
a._5zt(m,e,D);D=!(""==E&&0!==E);r={id:e,first:!!r,css_class:"organizer_column__"+e+"__cell "+w+r+(u==e?"lastcell":"")+(y(J.align_right)?" right":"")+(I[e]?" label_column":"")+a._2jx(e,m),value:E,col:J,item:q,needsComma:D&&P};this.addExtraMergeFieldsForCells(g,t,k,r);k.cells[++T]=r;r="";P=D&&!(E+"").m(/\W\s*$/)}g.items[++h]=k;a.shownItems[m]=!0;++a.shownItemsLength;w=""}}for(h in g.items)p(g.items,h)&&(k=g.items[h],k.maxNumberOfInlineButtons=g.maxNumberOfInlineButtons)}for(m in this.selectedItems)p(this.selectedItems,
m)&&(a.shownItems[m]||delete this.selectedItems[m]);c||(g.no_items_message=a.filteredView?a._lhq("no_items_in_search_message")||G.noItemsInSearch:a._lhq("no_items_message")||G.noItems);this.addExtraMergeFields(g);return g};l.addExtraMergeFields=function(b){};l.addExtraMergeFieldsForColumns=function(b,c){};l.addExtraMergeFieldsForRows=function(b,c){};l.addExtraMergeFieldsForCells=function(b,c,f,d){}},zenarioO.panelTypes);

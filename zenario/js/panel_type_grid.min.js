zenario.lib(function(K,H,L,t,M,r,B,n,N,O,a,q,P,x,y,Q,R,C,I,J,p,v){var c=J(v.grid=I(v.base));c.returnAJAXRequests=function(){return{skinId:B.skinId||r&&r.zenario&&r.zenario.skinId}};c.returnPanelTitle=function(){var e=t.zenarioOSelectMode&&(this.path==t.zenarioOTargetPath||!1===t.zenarioOTargetPath)&&(t.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(e+=C.refined);return e};c.showPanel=function(a,b,f){this.setHeader(a);this.showViewOptions(a);
this.drawItems(b);this.setScroll(b);this.setTooltips(a,b,f)};c.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(this.microTemplate(q.z+"organizer_grid",this.items));a.show()};c.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};c.showButtons=function(e){var b,f={itemButtons:!1,collectionButtons:!1};0<a.itemsSelected?f.itemButtons=a._geItBu():f.collectionButtons=a._gCB();b=this.microTemplate(q.z+"organizer_panel_buttons",f);e.html(b).show();this.enableDragDropUpload(f.collectionButtons,
f.itemButtons);n._to(e.find("a[title]"));n._to(e.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};c.setScroll=function(e){var b;if(b=a._gKI(!0)){if(b=$(x("organizer_item_"+b)).position())b=Math.max(0,b.top+e.scrollTop()-Math.floor(e.height()/4)),e.scrollTop(b).trigger("scroll")}else c.restoreScrollPosition(e)};c.enableDragDropUpload=function(e,b){n._cDHTML5U()||this.disableDragDropUpload();var f,d,k,m=!1;do{if(b)for(f in b)if(p(b,f)&&(k=
b[f],!k.disabled&&k.tuix.upload&&y(k.tuix.upload.drag_and_drop))){m=k.tuix;break}if(e)for(f in e){if(p(e,f)&&(k=e[f],!k.disabled&&k.tuix.upload&&y(k.tuix.upload.drag_and_drop))){m=k.tuix;break}}else for(d in this.tuix.collection_buttons)if(p(this.tuix.collection_buttons,d)&&(k=this.tuix.collection_buttons[d])&&k.upload&&y(k.upload.drag_and_drop)&&!a._cBH(k)&&!a._cD(k)){m=k;break}}while(0);if(m){var g;f=a._gK(a.uploadIsItemLevel);if(m.upload&&m.upload.request)for(g in m.upload.request)p(m.upload.request,
g)&&(f[g]=m.upload.request[g]);f.__pluginClassName__=m.class_name;f.__path__=this.path;f.method_call="handleOrganizerPanelAJAX";n._sHTML5UFDD(H+q.a+"",f,function(){a._dI()},function(){a._eI();a._sCI()},x("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};c.disableDragDropUpload=function(){n._cHTML5UFDD();$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover")};c.setHeader=function(e){var b=
{quickFilters:a._gQF()};e.html(this.microTemplate(q.z+"organizer_panel_header",b));e.show()};c.sizePanel=function(a,b,f,d){this.items&&this.drawPagination(f)};c.drawPagination=function(e){e.html(this.microTemplate(q.z+"organizer_pagination",this.items)).show();var b=a._gPC(),f=e.find("#organizer_pagination");1<b&&f.size()&&setTimeout(function(){var e=890>=$(t).width()?5:10;f.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:e,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",
withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(e,b){a._gTP(b)}})},0)};c.setTooltips=function(a,b,f){n._to(b.find("[title]"));n._to(a.find("a[title]"));n._to(a.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};c.getMergeFieldsForItemsAndColumns=function(e){var b=!1,f=!1,d,k,m,g,c,n=-1,q=-1,r=!1;c="firstcell ";var D=0,E={},z,s,l={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,
allItemsSelected:a._aIS()};(z=this.tuix.label_format_for_grid_view)||(z="[["+a.defaultSortColumn+"]]");s=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||z;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(k in this.tuix.item_buttons)if(p(this.tuix.item_buttons,k)){f=!0;break}for(m in a.sortedColumns)p(a.sortedColumns,m)&&(d=a.sortedColumns[m],a._iSC(d,!0)&&(r=d));for(m in a.sortedColumns)if(p(a.sortedColumns,m)){d=a.sortedColumns[m];
if(s==d||-1!==s.indexOf("[["+d+"]]"))E[d]=!0;a._iSC(d,!0)&&(k={id:d,tuix:this.tuix.columns[d],htmlId:"organizer_column__"+d,css_class:c+(r==d?"lastcell":"")+(E[d]?" label_column":"")+a._cCC(d),title:this.tuix.columns[d].title,tooltip:this.tuix.columns[d].tooltip},this.addExtraMergeFieldsForColumns(l,k),l.columns[++n]=k,c="")}l.totalWidth+=a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var u,F;a.thisPageSize&&(u=a.page*a.thisPageSize,F=u-a.thisPageSize,u=Math.min(u,
a.searchMatches),l.pageStart=F+1,l.pageStop=u);l.page=a.page;l.pageCount=a.pageCount;l.itemCount=a.searchMatches;s="firstrow ";for(var A in a.searchedItems)if(p(a.searchedItems,A)){var h=a.searchedItems[A],b=!0;if(a.thisPageSize)if(A>=u)break;else if(A<F)continue;if(this.tuix.items[h]){if(n=!!a._iCTL(h))l.canClickThrough=!0;g={id:h,cells:[],tuix:this.tuix.items[h],open_in_inspection_view:a.inspectionView&&h==a.inspectionViewItem,canClickThrough:n,showCheckbox:t.zenarioOSelectMode||f,label:a._aSS($.trim(a._aMF(z,
!1,h,!0))).replace(/\n/g,"<br/>"),selected:!!this.selectedItems[h],css_class:a._rCC(h)+" "+s};g.image_css_class=a._gICC(h);!e&&this.tuix.items[h].list_image?(g.image_css_class+=" organiser_item_with_image",g.image=B._aBP(this.tuix.items[h].list_image)):e&&this.tuix.items[h].image&&(g.image_css_class+=" organiser_item_with_image",g.image=B._aBP(this.tuix.items[h].image));g.tooltip=this.tuix.items[h].tooltip;!g.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(h)?g.tooltip=
a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,h):this.tuix.item.tooltip&&(g.tooltip=a._aMF(this.tuix.item.tooltip,!0,h)));g.inline_buttons=a._gIB(h);g.inline_buttons&&(D=g.inline_buttons.length)&&D>l.maxNumberOfInlineButtons&&(l.maxNumberOfInlineButtons=D);this.addExtraMergeFieldsForRows(l,g);var x=-1;c="firstcell ";var G=!1,v=!1,w,n=-1;for(m in a.sortedColumns)p(a.sortedColumns,m)&&(d=a.sortedColumns[m],a._iSC(d,!0)&&(k=l.columns[++n],w=a._cV(h,d),G=!(""==w&&0!==w),c={id:d,first:!!c,css_class:"organizer_column__"+
d+"__cell "+s+c+(r==d?"lastcell":"")+(y(this.tuix.columns[d].align_right)?" right":"")+(E[d]?" label_column":"")+a._cCC(d,h),value:w,needsComma:G&&v},this.addExtraMergeFieldsForCells(l,k,g,c),g.cells[++x]=c,c="",v=G&&!(w+"").match(/\W\s*$/)));l.items[++q]=g;a.shownItems[h]=!0;++a.shownItemsLength;s=""}}for(q in l.items)p(l.items,q)&&(g=l.items[q],g.maxNumberOfInlineButtons=l.maxNumberOfInlineButtons)}for(h in this.selectedItems)p(this.selectedItems,h)&&(a.shownItems[h]||delete this.selectedItems[h]);
b||(l.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||C.noItemsInSearch:a._pP("no_items_message")||C.noItems);this.addExtraMergeFields(l);return l};c.addExtraMergeFields=function(a){};c.addExtraMergeFieldsForColumns=function(a,b){};c.addExtraMergeFieldsForRows=function(a,b){};c.addExtraMergeFieldsForCells=function(a,b,c,d){}},zenarioO.panelTypes);

zenario.lib(function(d,L,O,s,P,t,F,m,B,Q,R,a,S,T,x,y,U,V,G,M,N,n,K){d=N(K.grid=M(K.base));d.returnAJAXRequests=function(){return{skinId:F.skinId||t&&t.zenario&&t.zenario.skinId}};d.returnPanelTitle=function(){var f=s.zenarioOSelectMode&&(this.path==s.zenarioOTargetPath||!1===s.zenarioOTargetPath)&&(s.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(f+=G.refined);return f};d.showPanel=function(a,g,c){this.setHeader(a);this.showViewOptions(a);
this.drawItems(g);this.setScroll(g);this.setTooltips(a,g,c)};d.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(this.microTemplate("zenario_organizer_grid",this.items));a.show()};d.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};d.showButtons=function(f){var g,c={itemButtons:!1,collectionButtons:!1};0<a.itemsSelected?c.itemButtons=a._geItBu():c.collectionButtons=a._gCB();g=this.microTemplate("zenario_organizer_panel_buttons",c);f.html(g).show();
this.enableDragDropUpload(c.collectionButtons,c.itemButtons);m._to(f.find("a[title]"));m._to(f.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};d.setScroll=function(f){var g=this,c=function(){var b;if(b=a._gKI(!0)){if(b=g.getItemPosition(f,b))b=Math.max(0,b.top-Math.floor(f.height()/4)),f.scrollTop(b).trigger("scroll")}else g.restoreScrollPosition(f)};s.zenarioONotFull?setTimeout(c,0):c()};d.getItemPosition=function(a,g){var c=$(y("organizer_item_"+
g)).position();c.top+=a.scrollTop();return c};d.enableDragDropUpload=function(f,g){B._cDHTML5U()||this.disableDragDropUpload();var c,b,e,p=!1;do{if(g)for(c in g)if(n(g,c)&&(e=g[c],!e.disabled&&e.tuix.upload&&x(e.tuix.upload.drag_and_drop))){p=e.tuix;break}if(f)for(c in f){if(n(f,c)&&(e=f[c],!e.disabled&&e.tuix.upload&&x(e.tuix.upload.drag_and_drop))){p=e.tuix;break}}else for(b in this.tuix.collection_buttons)if(n(this.tuix.collection_buttons,b)&&(e=this.tuix.collection_buttons[b])&&e.upload&&x(e.upload.drag_and_drop)&&
!a._cBH(e)&&!a._cD(e)){p=e;break}}while(0);if(p){var h;c=a._gK(a.uploadIsItemLevel);if(p.upload&&p.upload.request)for(h in p.upload.request)n(p.upload.request,h)&&(c[h]=p.upload.request[h]);c.__pluginClassName__=p.class_name;c.__path__=this.path;c.method_call="handleOrganizerPanelAJAX";B._sHTML5UFDD(L+"zenario/ajax.php",c,function(){a._dI()},function(){a._eI();a._sCI()},y("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};
d.disableDragDropUpload=function(){$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover").off("drop")};d.setHeader=function(f){var g={quickFilters:a._gQF()};f.html(this.microTemplate("zenario_organizer_panel_header",g));f.show()};d.sizePanel=function(a,g,c,b){this.items&&this.drawPagination(c)};d.drawPagination=function(f){f.html(this.microTemplate("zenario_organizer_pagination",this.items)).show();var g=a._gPC(),c=f.find("#organizer_pagination");1<g&&c.size()&&setTimeout(function(){var b=
890>=$(s).width()?5:10;c.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:b,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(b,c){a._gTP(c)}})},0)};d.setTooltips=function(a,g,c){m._to(g.find("[title]"));m._to(a.find("a[title]"));m._to(a.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};
d.getMergeFieldsForItemsAndColumns=function(f){var g=!1,c=!1,b,e,d,h,q,m=-1,C=-1,t=!1;q="firstcell ";var H=0,I={},D,u,k={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._aIS()};(D=this.tuix.label_format_for_grid_view)||(D="[["+a.defaultSortColumn+"]]");u=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||D;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(b in this.tuix.item_buttons)if(n(this.tuix.item_buttons,
b)){c=!0;break}for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],a._iSC(b,!0)&&(t=b));for(d in a.sortedColumns)if(n(a.sortedColumns,d)){b=a.sortedColumns[d];if(u==b||-1!==u.indexOf("[["+b+"]]"))I[b]=!0;a._iSC(b,!0)&&(e=this.tuix.columns[b],e={id:b,tuix:e,htmlId:"organizer_column__"+b,css_class:q+(t==b?"lastcell":"")+(I[b]?" label_column":"")+a._cCC(b),title:e.title,tooltip:e.tooltip,encrypted:e.encrypted},this.addExtraMergeFieldsForColumns(k,e),k.columns[++m]=e,q="")}k.totalWidth+=
a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var v,J;a.thisPageSize&&(v=a.page*a.thisPageSize,J=v-a.thisPageSize,v=Math.min(v,a.searchMatches),k.pageStart=J+1,k.pageStop=v);k.page=a.page;k.pageCount=a.pageCount;k.itemCount=a.searchMatches;u="firstrow ";var E,r,z,l;for(z in a.searchedItems)if(n(a.searchedItems,z)){l=a.searchedItems[z];g=!0;r=this.tuix.items[l];if(a.thisPageSize)if(z>=v)break;else if(z<J)continue;if(r){if(m=!!a._iCTL(l))k.canClickThrough=!0;h={id:l,
cells:[],item:r,tuix:r,open_in_inspection_view:a.inspectionView&&l==a.inspectionViewItem,canClickThrough:m,showCheckbox:s.zenarioOSelectMode||c,label:a._aSS($.trim(a._aMF(D,!1,l,!0))).r(/\n/g,"<br/>"),selected:!!this.selectedItems[l],css_class:a._rCC(l)+" "+u};h.image_css_class=a._gICC(l);!f&&r.list_image?(h.image_css_class+=" organiser_item_with_image",h.image=F._aBP(r.list_image)):f&&r.image&&(h.image_css_class+=" organiser_item_with_image",h.image=F._aBP(r.image));h.tooltip=r.tooltip;!h.tooltip&&
this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(l)?h.tooltip=a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,l):this.tuix.item.tooltip&&(h.tooltip=a._aMF(this.tuix.item.tooltip,!0,l)));h.inline_buttons=a._gIB(l);h.inline_buttons&&(H=h.inline_buttons.length)&&H>k.maxNumberOfInlineButtons&&(k.maxNumberOfInlineButtons=H);this.addExtraMergeFieldsForRows(k,h);var B=-1;q="firstcell ";var w=!1,y=w=!1,A,m=-1;for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],a._iSC(b,
!0)&&(e=k.columns[++m],E=this.tuix.columns[b],w=x(E.html),A=a._cV(l,b,w),w=!(""==A&&0!==A),q={id:b,first:!!q,css_class:"organizer_column__"+b+"__cell "+u+q+(t==b?"lastcell":"")+(x(E.align_right)?" right":"")+(I[b]?" label_column":"")+a._cCC(b,l),value:A,col:E,item:r,needsComma:w&&y},this.addExtraMergeFieldsForCells(k,e,h,q),h.cells[++B]=q,q="",y=w&&!(A+"").m(/\W\s*$/)));k.items[++C]=h;a.shownItems[l]=!0;++a.shownItemsLength;u=""}}for(C in k.items)n(k.items,C)&&(h=k.items[C],h.maxNumberOfInlineButtons=
k.maxNumberOfInlineButtons)}for(l in this.selectedItems)n(this.selectedItems,l)&&(a.shownItems[l]||delete this.selectedItems[l]);g||(k.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||G.noItemsInSearch:a._pP("no_items_message")||G.noItems);this.addExtraMergeFields(k);return k};d.addExtraMergeFields=function(a){};d.addExtraMergeFieldsForColumns=function(a,d){};d.addExtraMergeFieldsForRows=function(a,d){};d.addExtraMergeFieldsForCells=function(a,d,c,b){}},zenarioO.panelTypes);

'use strict';zenario.lib(function(l,P,T,v,U,E,F,x,K,V,W,a,X,Y,y,L,Z,aa,G,Q,R,p,M){l=R(M.grid=Q(M.base));l.returnAJAXRequests=function(){return{skinId:F.skinId||E&&E.zenario&&E.zenario.skinId}};l.returnPanelTitle=function(){var b=v.zenarioOSelectMode&&(this.path==v.zenarioOTargetPath||!1===v.zenarioOTargetPath)&&(v.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(b+=G.refined);return b};l.showPanel=function(b,c,f){this.setHeader(b);
this.showViewOptions(b);this.drawItems(c);this.setScroll(c);this.setTooltips(b,c,f)};l.drawItems=function(b){this.items=this.getMergeFieldsForItemsAndColumns(!0);b.html(this.microTemplate("zenario_organizer_grid",this.items));b.show()};l.showViewOptions=function(b){b.find("#organizer_viewOptions").show()};l.showButtons=function(b){var c={};0<a.itemsSelected&&a._geItBu(c);a._gCB(c);var f=this.microTemplate("zenario_organizer_panel_buttons",c);b.html(f).show();this.enableDragDropUpload(c.collectionButtons,
c.itemButtons);x._to(b.find("a[title]"));x._to(b.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};l.setScroll=function(b){var c=this,f=function(){var d;if(d=a._gKI(!0)){if(d=c.getItemPosition(b,d))d=Math.max(0,d.top-Math.floor(b.height()/4)),b.scrollTop(d).trigger("scroll")}else c.restoreScrollPosition(b)};v.zenarioONotFull?setTimeout(f,0):f()};l.getItemPosition=function(b,c){c=$(L("organizer_item_"+c)).position();c.top+=b.scrollTop();
return c};l.enableDragDropUpload=function(b,c){K._cDHTML5U()||this.disableDragDropUpload();var f,d,n=!1;if(c)for(f in c)if(p(c,f)){var h=c[f];if(!h.disabled&&h.tuix.upload&&y(h.tuix.upload.drag_and_drop)){n=h.tuix;break}}if(b)for(f in b){if(p(b,f)&&(h=b[f],!h.disabled&&h.tuix.upload&&y(h.tuix.upload.drag_and_drop))){n=h.tuix;break}}else for(d in this.tuix.collection_buttons)if(p(this.tuix.collection_buttons,d)&&(h=this.tuix.collection_buttons[d])&&h.upload&&y(h.upload.drag_and_drop)&&!a._cBH(h)&&
!a._cD(h)){n=h;break}if(n){var u;b=a._gK(a.uploadIsItemLevel);if(n.upload&&n.upload.request)for(u in n.upload.request)p(n.upload.request,u)&&(b[u]=n.upload.request[u]);b.__pluginClassName__=n.class_name;b.__path__=this.path;b.method_call="handleOrganizerPanelAJAX";K._sHTML5UFDD(P+"zenario/ajax.php",b,function(){a._dI()},function(){a._eI();a._sCI()},L("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};l.disableDragDropUpload=
function(){$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover").off("drop")};l.setHeader=function(b){var c={quickFilters:a._gQF()};b.html(this.microTemplate("zenario_organizer_panel_header",c));b.show()};l.sizePanel=function(b,c,f,d){this.items&&this.drawPagination(f)};l.drawPagination=function(b){b.html(this.microTemplate("zenario_organizer_pagination",this.items)).show();var c=a._gPC(),f=b.find("#organizer_pagination");1<c&&f.length&&setTimeout(function(){var d=890>=
$(v).width()?5:10;f.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:d,widthPx:24,marginPx:1,overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(n,h){a._gTP(h)}})},0)};l.setTooltips=function(b,c,f){x._to(c.find("[title]"));x._to(b.find("a[title]"));x._to(b.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};
l.getMergeFieldsForItemsAndColumns=function(b){var c=!1,f=!1,d,n=-1,h=-1,u=!1;var r="firstcell ";var H=0,I={},B,g={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._aIS()};(B=this.tuix.label_format_for_grid_view)||(B="[["+a.defaultSortColumn+"]]");var w=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||B;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(e in this.tuix.item_buttons)if(p(this.tuix.item_buttons,
e)){f=!0;break}for(d in a.sortedColumns)if(p(a.sortedColumns,d)){var e=a.sortedColumns[d];a._iSC(e,!0)&&(u=e)}for(d in a.sortedColumns)if(p(a.sortedColumns,d)){e=a.sortedColumns[d];if(w==e||-1!==w.indexOf("[["+e+"]]"))I[e]=!0;if(a._iSC(e,!0)){var t=this.tuix.columns[e];t={id:e,tuix:t,htmlId:"organizer_column__"+e,css_class:r+(u==e?"lastcell":"")+(I[e]?" label_column":"")+a._cCC(e),title:t.title,tooltip:t.tooltip,encrypted:t.encrypted};this.addExtraMergeFieldsForColumns(g,t);g.columns[++n]=t;r=""}}g.totalWidth+=
a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){if(a.thisPageSize){var z=a.page*a.thisPageSize;var N=z-a.thisPageSize;z=Math.min(z,a.searchMatches);g.pageStart=N+1;g.pageStop=z}g.page=a.page;g.pageCount=a.pageCount;g.itemCount=a.searchMatches;w="firstrow ";var A;for(A in a.searchedItems)if(p(a.searchedItems,A)){var m=a.searchedItems[A];c=!0;var q=this.tuix.items[m];if(a.thisPageSize)if(A>=z)break;else if(A<N)continue;if(q){if(n=!!a._iCTL(m))g.canClickThrough=!0;var k=
{id:m,cells:[],item:q,tuix:q,open_in_inspection_view:a.inspectionView&&m==a.inspectionViewItem,canClickThrough:n,showCheckbox:v.zenarioOSelectMode||f,label:a._aSS($.trim(a._aMF(B,!1,m,!0))).r(/\n/g,"<br/>"),selected:!!this.selectedItems[m],css_class:a._rCC(m)+" "+w};k.short_checksum=q.short_checksum;k.image_css_class=a._gICC(m);!b&&q.image?(k.image_css_class+=" organizer_item_with_image",k.image=F._aBP(q.image)):b&&q.image&&(k.image_css_class+=" organizer_item_with_image",k.image=F._aBP(q.image));
k.tooltip=q.tooltip;!k.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(m)?k.tooltip=a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,m):this.tuix.item.tooltip&&(k.tooltip=a._aMF(this.tuix.item.tooltip,!0,m)));k.inline_buttons=a._gIB(m);k.inline_buttons&&(H=k.inline_buttons.length)&&H>g.maxNumberOfInlineButtons&&(g.maxNumberOfInlineButtons=H);this.addExtraMergeFieldsForRows(g,k);var S=-1;r="firstcell ";var O=!1;n=-1;for(d in a.sortedColumns)if(p(a.sortedColumns,d)&&
(e=a.sortedColumns[d],a._iSC(e,!0))){t=g.columns[++n];var J=this.tuix.columns[e];var C=y(J.html);var D=a._cV(m,e,C);C=!(""==D&&0!==D);r={id:e,first:!!r,css_class:"organizer_column__"+e+"__cell "+w+r+(u==e?"lastcell":"")+(y(J.align_right)?" right":"")+(I[e]?" label_column":"")+a._cCC(e,m),value:D,col:J,item:q,needsComma:C&&O};this.addExtraMergeFieldsForCells(g,t,k,r);k.cells[++S]=r;r="";O=C&&!(D+"").m(/\W\s*$/)}g.items[++h]=k;a.shownItems[m]=!0;++a.shownItemsLength;w=""}}for(h in g.items)p(g.items,
h)&&(k=g.items[h],k.maxNumberOfInlineButtons=g.maxNumberOfInlineButtons)}for(m in this.selectedItems)p(this.selectedItems,m)&&(a.shownItems[m]||delete this.selectedItems[m]);c||(g.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||G.noItemsInSearch:a._pP("no_items_message")||G.noItems);this.addExtraMergeFields(g);return g};l.addExtraMergeFields=function(b){};l.addExtraMergeFieldsForColumns=function(b,c){};l.addExtraMergeFieldsForRows=function(b,c){};l.addExtraMergeFieldsForCells=
function(b,c,f,d){}},zenarioO.panelTypes);

zenario.lib(function(d,L,O,s,P,t,F,m,B,Q,R,a,S,T,x,y,U,V,G,M,N,n,K){d=N(K.grid=M(K.base));d.returnAJAXRequests=function(){return{skinId:F.skinId||t&&t.zenario&&t.zenario.skinId}};d.returnPanelTitle=function(){var g=s.zenarioOSelectMode&&(this.path==s.zenarioOTargetPath||!1===s.zenarioOTargetPath)&&(s.zenarioOMultipleSelect&&a._pP("multiple_select_mode_title")||a._pP("select_mode_title"))||a._pP("title");a.filteredView&&(g+=G.refined);return g};d.showPanel=function(a,h,c){this.setHeader(a);this.showViewOptions(a);
this.drawItems(h);this.setScroll(h);this.setTooltips(a,h,c)};d.drawItems=function(a){this.items=this.getMergeFieldsForItemsAndColumns(!0);a.html(this.microTemplate("zenario_organizer_grid",this.items));a.show()};d.showViewOptions=function(a){a.find("#organizer_viewOptions").show()};d.showButtons=function(g){var h,c={};0<a.itemsSelected&&a._geItBu(c);a._gCB(c);h=this.microTemplate("zenario_organizer_panel_buttons",c);g.html(h).show();this.enableDragDropUpload(c.collectionButtons,c.itemButtons);m._to(g.find("a[title]"));
m._to(g.find(".toolbarButtons ul ul a[title]"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};d.setScroll=function(g){var h=this,c=function(){var b;if(b=a._gKI(!0)){if(b=h.getItemPosition(g,b))b=Math.max(0,b.top-Math.floor(g.height()/4)),g.scrollTop(b).trigger("scroll")}else h.restoreScrollPosition(g)};s.zenarioONotFull?setTimeout(c,0):c()};d.getItemPosition=function(a,h){var c=$(y("organizer_item_"+h)).position();c.top+=a.scrollTop();return c};d.enableDragDropUpload=function(g,
h){B._cDHTML5U()||this.disableDragDropUpload();var c,b,e,q=!1;do{if(h)for(c in h)if(n(h,c)&&(e=h[c],!e.disabled&&e.tuix.upload&&x(e.tuix.upload.drag_and_drop))){q=e.tuix;break}if(g)for(c in g){if(n(g,c)&&(e=g[c],!e.disabled&&e.tuix.upload&&x(e.tuix.upload.drag_and_drop))){q=e.tuix;break}}else for(b in this.tuix.collection_buttons)if(n(this.tuix.collection_buttons,b)&&(e=this.tuix.collection_buttons[b])&&e.upload&&x(e.upload.drag_and_drop)&&!a._cBH(e)&&!a._cD(e)){q=e;break}}while(0);if(q){var f;c=
a._gK(a.uploadIsItemLevel);if(q.upload&&q.upload.request)for(f in q.upload.request)n(q.upload.request,f)&&(c[f]=q.upload.request[f]);c.__pluginClassName__=q.class_name;c.__path__=this.path;c.method_call="handleOrganizerPanelAJAX";B._sHTML5UFDD(L+"zenario/ajax.php",c,function(){a._dI()},function(){a._eI();a._sCI()},y("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else this.disableDragDropUpload()};d.disableDragDropUpload=function(){$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover").off("drop")};
d.setHeader=function(g){var h={quickFilters:a._gQF()};g.html(this.microTemplate("zenario_organizer_panel_header",h));g.show()};d.sizePanel=function(a,h,c,b){this.items&&this.drawPagination(c)};d.drawPagination=function(g){g.html(this.microTemplate("zenario_organizer_pagination",this.items)).show();var h=a._gPC(),c=g.find("#organizer_pagination");1<h&&c.size()&&setTimeout(function(){var b=890>=$(s).width()?5:10;c.jPaginator({nbPages:a._gPC(),selectedPage:a._gCP(),nbVisible:b,widthPx:24,marginPx:1,
overBtnLeft:"#organizer_page_left",overBtnRight:"#organizer_page_right",withSlider:!0,minSlidesForSlider:2,withAcceleration:!0,speed:2,coeffAcceleration:2,onPageClicked:function(b,c){a._gTP(c)}})},0)};d.setTooltips=function(a,h,c){m._to(h.find("[title]"));m._to(a.find("a[title]"));m._to(a.find("#organizer_quickFilter ul ul"),{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})};d.getMergeFieldsForItemsAndColumns=function(g){var h=!1,c=!1,b,e,d,f,r,m=-1,C=-1,t=!1;r="firstcell ";var H=
0,I={},D,u,k={items:[],columns:[],totalWidth:0,canClickThrough:!1,maxNumberOfInlineButtons:0,allItemsSelected:a._aIS()};(D=this.tuix.label_format_for_grid_view)||(D="[["+a.defaultSortColumn+"]]");u=this.tuix.bold_columns_in_list_view||this.tuix.label_format_for_picked_items||D;a.popoutLabelFormat=this.tuix.label_format_for_popouts;if(this.tuix.item_buttons)for(b in this.tuix.item_buttons)if(n(this.tuix.item_buttons,b)){c=!0;break}for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],
a._iSC(b,!0)&&(t=b));for(d in a.sortedColumns)if(n(a.sortedColumns,d)){b=a.sortedColumns[d];if(u==b||-1!==u.indexOf("[["+b+"]]"))I[b]=!0;a._iSC(b,!0)&&(e=this.tuix.columns[b],e={id:b,tuix:e,htmlId:"organizer_column__"+b,css_class:r+(t==b?"lastcell":"")+(I[b]?" label_column":"")+a._cCC(b),title:e.title,tooltip:e.tooltip,encrypted:e.encrypted},this.addExtraMergeFieldsForColumns(k,e),k.columns[++m]=e,r="")}k.totalWidth+=a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(this.tuix.items){var v,
J;a.thisPageSize&&(v=a.page*a.thisPageSize,J=v-a.thisPageSize,v=Math.min(v,a.searchMatches),k.pageStart=J+1,k.pageStop=v);k.page=a.page;k.pageCount=a.pageCount;k.itemCount=a.searchMatches;u="firstrow ";var E,p,z,l;for(z in a.searchedItems)if(n(a.searchedItems,z)){l=a.searchedItems[z];h=!0;p=this.tuix.items[l];if(a.thisPageSize)if(z>=v)break;else if(z<J)continue;if(p){if(m=!!a._iCTL(l))k.canClickThrough=!0;f={id:l,cells:[],item:p,tuix:p,open_in_inspection_view:a.inspectionView&&l==a.inspectionViewItem,
canClickThrough:m,showCheckbox:s.zenarioOSelectMode||c,label:a._aSS($.trim(a._aMF(D,!1,l,!0))).r(/\n/g,"<br/>"),selected:!!this.selectedItems[l],css_class:a._rCC(l)+" "+u};f.short_checksum=p.short_checksum;f.image_css_class=a._gICC(l);!g&&p.image?(f.image_css_class+=" organizer_item_with_image",f.image=F._aBP(p.image)):g&&p.image&&(f.image_css_class+=" organizer_item_with_image",f.image=F._aBP(p.image));f.tooltip=p.tooltip;!f.tooltip&&this.tuix.item&&(this.tuix.item.tooltip_when_link_is_active&&a._iCTL(l)?
f.tooltip=a._aMF(this.tuix.item.tooltip_when_link_is_active,!0,l):this.tuix.item.tooltip&&(f.tooltip=a._aMF(this.tuix.item.tooltip,!0,l)));f.inline_buttons=a._gIB(l);f.inline_buttons&&(H=f.inline_buttons.length)&&H>k.maxNumberOfInlineButtons&&(k.maxNumberOfInlineButtons=H);this.addExtraMergeFieldsForRows(k,f);var B=-1;r="firstcell ";var w=!1,y=w=!1,A,m=-1;for(d in a.sortedColumns)n(a.sortedColumns,d)&&(b=a.sortedColumns[d],a._iSC(b,!0)&&(e=k.columns[++m],E=this.tuix.columns[b],w=x(E.html),A=a._cV(l,
b,w),w=!(""==A&&0!==A),r={id:b,first:!!r,css_class:"organizer_column__"+b+"__cell "+u+r+(t==b?"lastcell":"")+(x(E.align_right)?" right":"")+(I[b]?" label_column":"")+a._cCC(b,l),value:A,col:E,item:p,needsComma:w&&y},this.addExtraMergeFieldsForCells(k,e,f,r),f.cells[++B]=r,r="",y=w&&!(A+"").m(/\W\s*$/)));k.items[++C]=f;a.shownItems[l]=!0;++a.shownItemsLength;u=""}}for(C in k.items)n(k.items,C)&&(f=k.items[C],f.maxNumberOfInlineButtons=k.maxNumberOfInlineButtons)}for(l in this.selectedItems)n(this.selectedItems,
l)&&(a.shownItems[l]||delete this.selectedItems[l]);h||(k.no_items_message=a.filteredView?a._pP("no_items_in_search_message")||G.noItemsInSearch:a._pP("no_items_message")||G.noItems);this.addExtraMergeFields(k);return k};d.addExtraMergeFields=function(a){};d.addExtraMergeFieldsForColumns=function(a,d){};d.addExtraMergeFieldsForRows=function(a,d){};d.addExtraMergeFieldsForCells=function(a,d,c,b){}},zenarioO.panelTypes);

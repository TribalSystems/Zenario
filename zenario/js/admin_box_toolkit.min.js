zenario.lib(function(r,t,c,z,G,H,e,k,p,C,x,l,s,y,m,I,D,J,A,K,u,v,w,E){var q=z.zenarioABG=new w;q.init("zenarioABG","zenario_admin_box");c=u(E);c.open=function(a,b,g,d,B,f,h,c){if(k._cIBIO("AdminOrganizer"))return!1;e._dS(this.globalName);b||(b={});a=(""+a).s("//",2);a[1]&&!b.id&&(b.id=a[1]);a=a[0];this.isOpen=!0;this.callBack=B;this.passMatchedIds=c;this.createAnotherObject=f;this.getRequestKey=b;this.changed={};this.isSlidUp=this.heightBeforeSlideUp=this.hasPreviewWindow=this.previewMD5=this.previewPost=
this.previewSlotWidth=!1;this.previewSlotWidthInfo="";this.previewHidden=!0;this.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+a;h||(B=this.microTemplate(this.mtPrefix,{}),this.openBox(B));z.onbeforeunload=p.onbeforeunload;this.start(a,b,g,d);return this.cb=new e.callback};c.openBox=function(a){};c.closeBox=function(){};c.updateHash=function(){};c.initFields=function(){this.hasPreviewWindow=!!this.pluginPreviewDetails();u(w).initFields.call(this)};c.refreshParentAndClose=function(a,
b,g){k._nDS(!1);var d,c={};b||(this.isOpen=!1,this.updateHash());if(this.callBack&&!b){var f;(f=this.getValueArrayofArrays())&&this.callBack(this.tuix.key,f)}else if(l.init&&(k.isFullOrganizerWindow||k._cIBIO("og"))){a=!1;if(y(this.tuix.key.id))a=this.tuix.key.id;else for(var h in this.tuix.key)if(v(this.tuix.key,h)){a=this.tuix.key[h];break}l._rTSI(a,g&&A.createdAnother,!b&&A.savedButNotShown)}else e.cID&&(d=this.tuix.key.slotName)?(e._rS(d,k.importantGetRequests),x.init&&x.init()):!e.cID||"zenario_menu"!=
this.path&&"zenario_menu_text"!=this.path?a||b||(this.tuix.key.cID?(this.tuix.key.cID==e.cID&&this.tuix.key.cType==e.cType&&(c=k.importantGetRequests),e._gTU(e._lTI(this.tuix.key.cID,this.tuix.key.cType,c))):x.init&&(c=_._cl(k.importantGetRequests),c.cVersion=e.cVersion,e._gTU(e._lTI(e.cID,e.cType,c)))):(k._rMP(),x.init&&x.init());a=this.tuix.popout_message;g=g&&this.createAnotherObject;b||g||(this.cb&&this.cb.done(),this.close());a&&k._sM(a,!0,!1);if(b){this.changed={};if(this.tuix.tabs)for(h in this.tuix.tabs)v(this.tuix.tabs,
h)&&this.tuix.tabs[h]&&this.editModeOn(h)&&(this.tuix.tabs[h]._saved_and_continued=!0);this.sortTabs();this.draw()}else g&&($("#zenario_abtab").clearQueue(),delete this.tuix,this.open(this.createAnotherObject.path,this.getRequestKey,this.createAnotherObject.tab,this.createAnotherObject.values,r,this.createAnotherObject,!0,this.passMatchedIds))};c.close=function(a){this.callFunctionOnEditors("remove");k._nDS(!1);this.sizing&&clearTimeout(this.sizing);this.stopPoking();e._cAD();a||k._cFB();this.isOpen=
!1;this.closeBox();e._eS(this.globalName);delete this.cb;delete this.tuix;delete this.previewMD5;delete this.previewPost;delete this.previewSlotWidth;delete this.previewSlotWidthInfo;return!1};c.closeButton=function(a){var b=p._o();(!y(b)||!a&&confirm(b))&&this.isOpen&&this.close();return!1};c.draw=function(){this.isOpen&&this.loaded&&this.tabHidden&&this.draw2()};c.draw2=function(){var a=this;if(a.tuix.tabs){a.get("zenario_fbAdminFloatingBox").className=a.baseCSSClass+" "+(a.tuix.css_class||"zenario_fab_default_style")+
" "+(m(a.tuix.hide_tab_bar)?"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");var b=a.tuix;!b.tab||b.tabs[b.tab]&&!p._h(r,a,r,b.tab,r,r,r,r,b.tabs[b.tab])||(b.tab=!1);a.get("zenario_fabTabs").innerHTML=a.drawTabs();var g=!a.editModeOnBox(),d="",d={isReadOnly:g};a.setTitle(g);a.showCloseButton();a.get("zenario_fbButtons").innerHTML=a.microTemplate(a.mtPrefix+"_buttons",d);e._aJQE("#zenario_fbButtons ",!0);a.get("zenario_fbAdminFloatingBox").style.display="block";a.tallAsPossibleField=
r;a.size(!0);k._nDS(!1);var g=new e.callback,d=a.drawFields(g),c;g.after(a.makeFieldAsTallAsPossible);a.animateInTab(d,g,$("#zenario_abtab"));a.shownTab=b.tab;delete a.lastScrollTop;a.startPoking();(c=b.tabs.global_area)&&!_._isEm(c.fields)?(q.tuix={tab:"global_area",tabs:{global_area:JSON.parse(JSON.stringify(c))}},q.sortTabs(),q.validate=function(){a.validate()},q.format=function(){a.format()},q.redrawTab=function(){a.redrawTab()},q.readTab=function(){u(w).readTab.call(q);var b,g,d,c=a.tuix.tabs.global_area;
for(b in c.fields)v(c.fields,b)&&(g=c.fields[b],d=q.tuix.tabs.global_area.fields[b],g.value=d.value,g.current_value=d.current_value,g.pressed=d.pressed,g.selected_option=d.selected_option,g._display_value=d._display_value,g.hidden=d.hidden,g._was_hidden_before=d._was_hidden_before)},g=new e.callback,d=q.drawFields(g),$("#zenario_fabGlobalArea").show().html(d),a.addJQueryElements("#zenario_fabGlobalArea"),g.done()):$("#zenario_fabGlobalArea").hide()}};c.readTab=function(){u(w).readTab.call(this);this.tuix.tabs.global_area&&
q.readTab()};c.sortTabs=function(){u(w).sortTabs.call(this);this.sortedTabs=_._f(this.sortedTabs,function(a){return"global_area"!=a})};c.setTitle=function(a){};c.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};c.returnAJAXURL=function(a){return"start"==a&&this.passMatchedIds&&l.lastRequests?t+"zenario/admin/organizer.ajax.php?_get_matched_ids=1&_fab_path="+
s(this.path)+"&path="+s(l.path)+e._uR(l.lastRequests)+e._uR(this.getRequestKey):t+"zenario/admin/admin_boxes.ajax.php?path="+s(this.path)+e._uR(this.getRequestKey)};c.typeaheadSearchEnabled=function(a,b,g){return(a=a.pick_items)&&(a.path||a.target_path)&&!1!==a.enable_type_ahead_search};c.typeaheadSearchAJAXURL=function(a,b,g){b=a.pick_items;a=b.path&&l._cNPTTPAR(b.path);b=b.target_path&&l._cNPTTPAR(b.target_path);if(a=a&&b&&a.path==b.path?a:b||a)return t+"zenario/admin/organizer.ajax.php?_typeahead_search=1&path="+
s(a.path)+e._uR(a.request)};c.parseTypeaheadSearch=function(a,b,g,d,c){var f,e,m=[];if(c.items)for(f in c.items)v(c.items,f)&&(g=c.items[f],e=k._fOIN(c,f),a.values=a.values||{},a.values[f]={image:g.image,css_class:g.css_class||c.item&&c.item.css_class,label:e},m.push({value:f,text:e,html:this.drawPickedItem(f,b,a,d,!0)}));return m};c.drawPickedItem=function(a,b,g,d,c){y(g)||(g=this.field(b));var f=g.values&&g.values[a],h=g.pick_items||{},k=a==1*a,n,l;b={id:b,item:a,label:f,readOnly:d};_._isOb(f)?
(b.missing=f.missing,b.css_class=f.css_class,b.image=f.image,f=b.label=f.label):f?b.label=f:(f=b.label=a,b.missing=!0);g.tag_colors&&(b.tag_color=g.tag_colors[a]||"blue");m(h.hide_info_button)||g.upload&&!k||!(n=h.info_button_path)&&(!(n=h.path)||n!=h.target_path&&h.min_path!=h.target_path)||(n="//"==e._rHSS(n,2)?n+a:"/"==e._rHSS(n,1)?n+("/"+a):n+("//"+a),b.organizerPath=n);g.upload&&(b.isUpload=!0,n=(n=(""+f).m(/(.*?)\.(\w+)$/)||(""+f).m(/(.*?)\.(\w+) \[.*\]$/))&&n[2]?n[2].toLowerCase():"unknown",
b.extension=n,k?(l=g.values&&g.values[a])&&l.checksum?(a=t+"zenario/file.php?c="+s(l.checksum),l.usage&&(a+="&usage="+s(l.usage))):a=t+"zenario/file.php?id="+a:a=t+"zenario/file.php?getUploadedFileInCacheDir="+s(a),n.m(/gif|jpg|jpeg|png|svg/)?(b.thumbnail={onclick:this.globalName+".showPickedItemInPopout('"+a+"&popout=1&dummy_filename="+s("image."+n)+"', '"+f+"');",src:a+"&og=1"},(f=(""+f).m(/.*\[\s*(\d+)p?x?\s*[\u00d7x]\s*(\d+)p?x?\s*\]$/))&&f[1]&&f[2]&&p._rI(f[1],f[2],180,120,b.thumbnail)):b.adminDownload=
a+"&adminDownload=1");return c?this.microTemplate(h.dropdown_item_microtemplate||this.mtPrefix+"_dropdown_item",b):this.microTemplate(h.picked_item_microtemplate||this.mtPrefix+"_picked_item",b)};c.pluginPreviewDetails=function(a,b,g,d,c){if(this.tuix&&this.tuix.key&&(this.tuix.key.nest||this.tuix.key.eggId))return!1;var f={post:{}},h=_._cl(k.importantGetRequests);b=!b;switch(this.path){case "zenario_skin_editor":b=!1;case "plugin_settings":a&&(f.md5=hex_md5((f.post.overrideSettings=JSON.stringify(this.getValues1D(!0,
!1)))+(f.post.overrideFrameworkAndCSS=JSON.stringify(this.getValues1D(!1,!0,!1,!0,!0,["this_css_tab","all_css_tab","framework_tab"])))));break;default:return!1}d=d||this.tuix&&this.tuix.key&&this.tuix.key.slotName;c=c||this.tuix&&this.tuix.key&&this.tuix.key.instanceId||e.slots&&e.slots[d]&&e.slots[d].instanceId;d&&zenario_conductor._e(d)&&(h=zenario_conductor._re(d,"refresh",h));h.cVersion=e.cVersion;if(b){if(!d||!c)return!1;b=k._gGSD(d);var l;a=b&&b.cssClass&&b.cssClass.s(" ")||[];h.method_call=
"showSingleSlot";h.fakeLayout=1;h.grid_columns=b.columns;h.grid_container=b.container;this.previewSlotWidth=b.pxWidth;this.previewSlotWidthInfo=b.widthInfo;h.grid_pxWidth=this.previewWidth&&!g?this.previewWidth:this.previewSlotWidth;h.grid_cssClass="";for(l in a)v(a,l)&&(g=a[l],"alpha"==g||"omega"==g||g.m(/^span[\d_]*$/)||(h.grid_cssClass+=g+" "))}else h._show_page_preview=1;d&&(h.slotName=d);c&&(h.instanceId=c);f.url=e._lTI(e.cID,e.cType,h);return f};c.addExtraAttsForTextFields=function(a,b){this.hasPreviewWindow&&
(b.onkeyup=(b.onkeyup||"")+" "+this.globalName+".updatePreview();")};c.fieldChange=function(a,b){this.updatePreview(750);u(w).fieldChange.call(this,a,b)};c.updatePreview=function(a){var b=this;b.hasPreviewWindow&&!b.previewHidden&&e._aADINS("fabUpdatePreview",function(){var a=b.pluginPreviewDetails(!0);a&&b.previewMD5!=a.md5&&(b.previewMD5=a.md5,b.previewPost=a.post,b.submitPreview(a))},a||1E3)};var F=0;c.submitPreview=function(a,b,c){b=b||$("#zenario_fabPreview");c=c||"zenario_fabPreviewFrame";var d=
"zenario_previewFrame"+ ++F,e=b.find("."+c).not(".beingRemoved");c=$(p._ht("iframe","id",d,"name",d,"class",c));var f=e[0]&&e[0].contentDocument;if(f=1*(f&&$(f).scrollTop()))a.url+="&_scroll_to="+f;e[0]&&(e.width(e.width()).height(e.height()).attr("id","").attr("name","").addClass("beingRemoved"),setTimeout(function(){e.fadeOut(600,function(){e.remove()})},400));b.append(c);this.showPreviewViaPost(a,d)};c.showPreviewViaPost=function(a,b){$(p.form("action",a.url,"method","post","target",b,p._i("name",
"overrideSettings","value",a.post.overrideSettings)+p._i("name","overrideFrameworkAndCSS","value",a.post.overrideFrameworkAndCSS))).appendTo("body").hide().submit().remove()};c.showPreviewInPopoutBox=function(a,b){var c=this,d,k,f=c.pluginPreviewDetails(!0,a,b);f&&(c.previewMD5=f.md5,c.previewPost=f.post,d=f.url+e._uR(f.post),d.length>=(e._bII()?2E3:4E3)&&(d="",k=function(){c.showPreviewViaPost(f,$("#cboxLoadedContent iframe")[0].name)}),$.colorbox({width:"95%",height:"90%",iframe:!0,preloading:!1,
open:!0,title:c.previewSlotWidthInfo||A.preview,className:"zenario_plugin_preview_popout_box",href:d,onComplete:k}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};c.editModeOn=function(a){if(!this.tuix||!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=m(this.tuix.tabs[a].edit_mode.enabled)&&(m(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};c.editModeAlwaysOn=function(a){return!y(this.tuix.tabs[a].edit_mode.always_on)||
m(this.tuix.tabs[a].edit_mode.always_on)||this.savedAndContinued(a)};c.editCancelEnabled=function(a){return this.tuix.tabs[a].edit_mode&&m(this.tuix.tabs[a].edit_mode.enabled)&&!this.editModeAlwaysOn(a)};c.revertEnabled=function(a){return this.tuix.tabs[a].edit_mode&&m(this.tuix.tabs[a].edit_mode.enabled)&&this.editModeAlwaysOn(a)&&!this.savedAndContinued(a)&&(!y(this.tuix.tabs[a].edit_mode.enable_revert)&&this.tuix.key&&this.tuix.key.id||m(this.tuix.tabs[a].edit_mode.enable_revert))};c.savedAndContinued=
function(a){return!1};c.editModeOnBox=function(){if(this.tuix&&this.tuix.tabs&&this.sortedTabs)for(var a in this.sortedTabs)if(v(this.sortedTabs,a)&&this.editModeOn(this.sortedTabs[a]))return!0;return!1};c.setData=function(a){this.setDataDiff(a)};c.sendStateToServer=function(){return this.sendStateToServerDiff()};c.save=function(a,b,c){var d=this,k;d.loaded&&(k=d.getURL("save"))&&(d.saving||setTimeout(function(){d.saving=!0;d.differentTab=!0;d.loaded=!1;d.hideTab(!0);d.checkValues();var f={_save:!0,
_confirm:a?1:"",_save_and_continue:b,_box:d.sendStateToServer()};m(d.tuix.download)||d.tuix.confirm&&m(d.tuix.confirm.download)?d.save2(e._nAA(d.getURL("save"),e._uR(f),!0),b,c):d.retryAJAX(k,f,!0,function(a){d.save2(a,b,c)},"saving")},100))};c.save2=function(a,b,c){delete this.saving;var d=a&&a._sync&&a._sync.flags||{},m=l.init&&!z.zenarioOQuickMode&&!z.zenarioOSelectMode;d.close_with_message?(this.close(),m&&l._r(),k._sM(d.close_with_message)):d.reload_organizer&&m?(this.close(),k._tONT(d),p.uploading=
!1,l._sWC("uploading",p.uploading),l._rePa(d.organizer_path)):d.open_admin_box&&C.init?(this.close(),C.open(d.open_admin_box)):d.go_to_url?(this.close(),k._tONT(d),e._gTU(e._aBP(d.go_to_url),!0)):d.valid?d.confirm?(this.load(a),this.sortTabs(),this.draw(),this.showConfirm(b,c)):d.download?(k.doDownload(this.getURL("download"),{_download:1,_box:this.sendStateToServer()}),b&&(a=a.substr(15),this.load(a)),this.refreshParentAndClose(!0,b,c)):d.saved?(this.load(a),this.refreshParentAndClose(!1,b,c)):(this.close(),
k._sM(a,!0,"error")):(this.load(a),this.sortTabs(),this.switchToATabWithErrors(),this.draw())};c.showConfirm=function(a,b){if(this.tuix&&this.tuix.confirm&&m(this.tuix.confirm.show)){var c=this.tuix.confirm.message;m(this.tuix.confirm.html)||(c=D(c,!0));var d='<input type="button" class="submit_selected" value="'+this.tuix.confirm.button_message+'" onclick="'+this.globalName+".save(true, "+m(a)+", "+m(b)+');"/><input type="button" class="submit" value="'+this.tuix.confirm.cancel_button_message+'"/>';
k._flBo(c,d,this.tuix.confirm.message_type||"none")}};c.dragDropTarget=function(){return this.get("zenario_fbAdminInner")};c.enableDragDropUpload=function(){var a=this.dragDropTarget();p._sHTML5UFDD(this.ajaxURL(),{fileUpload:1},!1,this.uploadCallback,a);$(a).addClass("upload_enabled").removeClass("dragover")};c.disableDragDropUpload=function(){$(this.dragDropTarget()).removeClass("upload_enabled").removeClass("dragover").off("drop")};c.dragListeners=function(){return p._cDHTML5U()?"ondragover=\"$(this).addClass('dragover');\" ondragleave=\"$(this).removeClass('dragover');\"":
""};c.stopPoking=function(){this.poking&&clearInterval(this.poking);this.poking=!1};c.startPoking=function(){this.poking||(this.poking=setInterval(this.poke,12E4))};c.poke=function(){e._a(t+"zenario/admin/quick_ajax.php?keep_session_alive=1")}},zenarioAF,zenarioABToolkit);

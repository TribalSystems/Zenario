zenario.lib(function(s,u,d,A,G,H,g,l,p,C,y,m,t,z,q,I,D,J,B,K,v,w,x,E){var r=A.zenarioABG=new x;r.init("zenarioABG","zenario_admin_box");d=v(E);d.open=function(a,c,e,b,h,f,k,d){if(l._cIBIO("AdminOrganizer"))return!1;g._dS(this.globalName);c||(c={});a=(""+a).s("//",2);a[1]&&!c.id&&(c.id=a[1]);a=a[0];this.isOpen=!0;this.callBack=h;this.passMatchedIds=d;this.createAnotherObject=f;this.getRequestKey=c;this.changed={};this.isSlidUp=this.heightBeforeSlideUp=this.hasPreviewWindow=this.previewMD5=this.previewPost=
this.previewSlotWidth=!1;this.previewSlotWidthInfo="";this.previewHidden=!0;this.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+a;k||(h=this.microTemplate(this.mtPrefix,{}),this.openBox(h));A.onbeforeunload=p.onbeforeunload;this.start(a,c,e,b);return this.cb=new g.callback};d.openBox=function(a){};d.closeBox=function(){};d.updateHash=function(){};d.initFields=function(){this.hasPreviewWindow=!!this.pluginPreviewDetails();v(x).initFields.call(this)};d.refreshParentAndClose=function(a,
c,e){l._nDS(!1);var b,h={};c||(this.isOpen=!1,this.updateHash());if(this.callBack&&!c){var f;(f=this.getValueArrayofArrays())&&this.callBack(this.tuix.key,f)}else if(m.init&&(l.isFullOrganizerWindow||l._cIBIO("og"))){a=!1;if(z(this.tuix.key.id))a=this.tuix.key.id;else for(var k in this.tuix.key)if(w(this.tuix.key,k)){a=this.tuix.key[k];break}m._rTSI(a,e&&B.createdAnother,!c&&B.savedButNotShown)}else g.cID&&(b=this.tuix.key.slotName)?(g._rS(b,l.importantGetRequests),y.init&&y.init()):!g.cID||"zenario_menu"!=
this.path&&"zenario_menu_text"!=this.path?a||c||(this.tuix.key.cID?(this.tuix.key.cID==g.cID&&this.tuix.key.cType==g.cType&&(h=l.importantGetRequests),g._gTU(g._lTI(this.tuix.key.cID,this.tuix.key.cType,h))):y.init&&(h=_._cl(l.importantGetRequests),h.cVersion=g.cVersion,g._gTU(g._lTI(g.cID,g.cType,h)))):(l._rMP(),y.init&&y.init());a=this.tuix.popout_message;e=e&&this.createAnotherObject;c||e||(this.cb&&this.cb.done(),this.close());a&&l._sM(a,!0,!1);if(c){this.changed={};if(this.tuix.tabs)for(k in this.tuix.tabs)w(this.tuix.tabs,
k)&&this.tuix.tabs[k]&&this.editModeOn(k)&&(this.tuix.tabs[k]._saved_and_continued=!0);this.sortTabs();this.draw()}else e&&($("#zenario_abtab").clearQueue(),delete this.tuix,this.open(this.createAnotherObject.path,this.getRequestKey,this.createAnotherObject.tab,this.createAnotherObject.values,s,this.createAnotherObject,!0,this.passMatchedIds))};d.close=function(a){this.callFunctionOnEditors("remove");l._nDS(!1);this.sizing&&clearTimeout(this.sizing);g.stopPoking(this);g._cAD();a||l._cFB();this.isOpen=
!1;this.closeBox();g._eS(this.globalName);delete this.cb;delete this.tuix;delete this.previewMD5;delete this.previewPost;delete this.previewSlotWidth;delete this.previewSlotWidthInfo;return!1};d.closeButton=function(a){var c=p._o();(!z(c)||!a&&confirm(c))&&this.isOpen&&this.close();return!1};d.draw=function(){this.isOpen&&this.loaded&&this.tabHidden&&this.draw2()};d.draw2=function(){var a=this;if(a.tuix.tabs){a.get("zenario_fbAdminFloatingBox").className=a.baseCSSClass+" "+(a.tuix.css_class||"zenario_fab_default_style")+
" "+(q(a.tuix.hide_tab_bar)?"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");var c=a.tuix;!c.tab||c.tabs[c.tab]&&!p._h(s,a,s,c.tab,s,s,s,s,c.tabs[c.tab])||(c.tab=!1);a.get("zenario_fabTabs").innerHTML=a.drawTabs();var e=!a.editModeOnBox(),b="",b={isReadOnly:e};a.setTitle(e);a.showCloseButton();a.get("zenario_fbButtons").innerHTML=a.microTemplate(a.mtPrefix+"_buttons",b);g._aJQE("#zenario_fbButtons ",!0);a.get("zenario_fbAdminFloatingBox").style.display="block";a.tallAsPossibleField=
s;a.size(!0);l._nDS(!1);var e=new g.callback,b=a.drawFields(e),h;e.after(a.makeFieldAsTallAsPossible);a.animateInTab(b,e,$("#zenario_abtab"));a.shownTab=c.tab;delete a.lastScrollTop;g.startPoking(a);(h=c.tabs.global_area)&&!_._isEm(h.fields)?(r.tuix={tab:"global_area",tabs:{global_area:JSON.parse(JSON.stringify(h))}},r.sortTabs(),r.validate=function(){a.validate()},r.format=function(){a.format()},r.redrawTab=function(){a.redrawTab()},r.readTab=function(){v(x).readTab.call(r);var c,b,e,h=a.tuix.tabs.global_area;
for(c in h.fields)w(h.fields,c)&&(b=h.fields[c],e=r.tuix.tabs.global_area.fields[c],b.value=e.value,b.current_value=e.current_value,b.pressed=e.pressed,b.selected_option=e.selected_option,b._display_value=e._display_value,b.hidden=e.hidden,b._was_hidden_before=e._was_hidden_before)},e=new g.callback,b=r.drawFields(e),$("#zenario_fabGlobalArea").show().html(b),a.addJQueryElements("#zenario_fabGlobalArea"),e.done()):$("#zenario_fabGlobalArea").hide()}};d.readTab=function(){v(x).readTab.call(this);this.tuix.tabs.global_area&&
r.readTab()};d.sortTabs=function(){v(x).sortTabs.call(this);this.sortedTabs=_._f(this.sortedTabs,function(a){return"global_area"!=a})};d.setTitle=function(a){};d.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};d.returnAJAXURL=function(a){return"start"==a&&this.passMatchedIds&&m.lastRequests?u+"zenario/admin/organizer.ajax.php?_get_matched_ids=1&_fab_path="+
t(this.path)+"&path="+t(m.path)+g._uR(m.lastRequests)+g._uR(this.getRequestKey):u+"zenario/admin/admin_boxes.ajax.php?path="+t(this.path)+g._uR(this.getRequestKey)};d.typeaheadSearchEnabled=function(a,c,e){return(a=a.pick_items)&&(a.path||a.target_path)&&!1!==a.enable_type_ahead_search};d.typeaheadSearchAJAXURL=function(a,c,e){c=a.pick_items;a=c.path&&m._cNPTTPAR(c.path);c=c.target_path&&m._cNPTTPAR(c.target_path);if(a=a&&c&&a.path==c.path?a:c||a)return u+"zenario/admin/organizer.ajax.php?_typeahead_search=1&path="+
t(a.path)+g._uR(a.request)};d.parseTypeaheadSearch=function(a,c,e,b,h){var f,d,g=[];if(h.items)for(f in h.items)w(h.items,f)&&(e=h.items[f],d=l._fOIN(h,f),a.values=a.values||{},a.values[f]={image:e.image,css_class:e.css_class||h.item&&h.item.css_class,label:d},g.push({value:f,text:d,html:this.drawPickedItem(f,c,a,b,!0)}));return g};d.drawPickedItem=function(a,c,e,b,h){z(e)||(e=this.field(c));var f=e.values&&e.values[a],d=e.pick_items||{},l=a==1*a,n,m;b={id:c,item:a,label:f,readOnly:b};_._isOb(f)?
(b.missing=f.missing,b.css_class=f.css_class,b.image=f.image,f=b.label=f.label):f?b.label=f:(f=b.label=a,b.missing=!0);e.tag_colors&&(b.tag_color=e.tag_colors[a]||"blue");q(d.hide_info_button)||e.upload&&!l||!(n=d.info_button_path)&&(!(n=d.path)||n!=d.target_path&&d.min_path!=d.target_path)||(n="//"==g._rHSS(n,2)?n+a:"/"==g._rHSS(n,1)?n+("/"+a):n+("//"+a),b.organizerPath=n);e.upload&&(b.isUpload=!0,n=(n=(""+f).m(/(.*?)\.(\w+)$/)||(""+f).m(/(.*?)\.(\w+) \[.*\]$/))&&n[2]?n[2].toLowerCase():"unknown",
b.extension=n,l?(m=e.values&&e.values[a])&&m.checksum?(a=u+"zenario/file.php?c="+t(m.checksum),m.usage&&(a+="&usage="+t(m.usage))):a=u+"zenario/file.php?id="+a:a=u+"zenario/file.php?getUploadedFileInCacheDir="+t(a),n.m(/gif|jpg|jpeg|png|svg/)?(b.thumbnail={onclick:this.globalName+".showPickedItemInPopout('"+a+"&popout=1&dummy_filename="+t("image."+n)+"', '"+f+"');",src:a+"&og=1"},(f=(""+f).m(/.*\[\s*(\d+)p?x?\s*[\u00d7x]\s*(\d+)p?x?\s*\]$/))&&f[1]&&f[2]&&p._rI(f[1],f[2],180,120,b.thumbnail)):b.adminDownload=
a+"&adminDownload=1");return this.drawPickedItem2(c,d,h,b)};d.pluginPreviewDetails=function(a,c,e,b,d){if(this.tuix&&this.tuix.key&&(this.tuix.key.nest||this.tuix.key.eggId))return!1;var f={post:{}},k=_._cl(l.importantGetRequests);c=!c;switch(this.path){case "zenario_skin_editor":c=!1;case "plugin_settings":a&&(f.md5=hex_md5((f.post.overrideSettings=JSON.stringify(this.getValues1D(!0,!1)))+(f.post.overrideFrameworkAndCSS=JSON.stringify(this.getValues1D(!1,!0,!1,!0,!0,["this_css_tab","all_css_tab",
"framework_tab"])))));break;default:return!1}b=b||this.tuix&&this.tuix.key&&this.tuix.key.slotName;d=d||this.tuix&&this.tuix.key&&this.tuix.key.instanceId||g.slots&&g.slots[b]&&g.slots[b].instanceId;b&&zenario_conductor._e(b)&&(k=zenario_conductor._re(b,"refresh",k));k.cVersion=g.cVersion;if(c){if(!b||!d)return!1;c=l._gGSD(b);var m;a=c&&c.cssClass&&c.cssClass.s(" ")||[];k.method_call="showSingleSlot";k.fakeLayout=1;k.grid_columns=c.columns;k.grid_container=c.container;this.previewSlotWidth=c.pxWidth;
this.previewSlotWidthInfo=c.widthInfo;k.grid_pxWidth=this.previewWidth&&!e?this.previewWidth:this.previewSlotWidth;k.grid_cssClass="";for(m in a)w(a,m)&&(e=a[m],"alpha"==e||"omega"==e||e.m(/^span[\d_]*$/)||(k.grid_cssClass+=e+" "))}else k._show_page_preview=1;b&&(k.slotName=b);d&&(k.instanceId=d);f.url=g._lTI(g.cID,g.cType,k);return f};d.addExtraAttsForTextFields=function(a,c){this.hasPreviewWindow&&(c.onkeyup=(c.onkeyup||"")+" "+this.globalName+".updatePreview();")};d.fieldChange=function(a,c){this.updatePreview(750);
v(x).fieldChange.call(this,a,c)};d.updatePreview=function(a){var c=this;c.hasPreviewWindow&&!c.previewHidden&&g._aADINS("fabUpdatePreview",function(){var a=c.pluginPreviewDetails(!0);a&&c.previewMD5!=a.md5&&(c.previewMD5=a.md5,c.previewPost=a.post,c.submitPreview(a))},a||1E3)};var F=0;d.submitPreview=function(a,c,e){c=c||$("#zenario_fabPreview");e=e||"zenario_fabPreviewFrame";var b="zenario_previewFrame"+ ++F,d=c.find("."+e).not(".beingRemoved");e=$(p._ht("iframe","id",b,"name",b,"class",e));var f=
d[0]&&d[0].contentDocument;if(f=1*(f&&$(f).scrollTop()))a.url+="&_scroll_to="+f;d[0]&&(d.width(d.width()).height(d.height()).attr("id","").attr("name","").addClass("beingRemoved"),setTimeout(function(){d.fadeOut(600,function(){d.remove()})},400));c.append(e);this.showPreviewViaPost(a,b)};d.showPreviewViaPost=function(a,c){$(p._fo("action",a.url,"method","post","target",c,p._i("name","overrideSettings","value",a.post.overrideSettings)+p._i("name","overrideFrameworkAndCSS","value",a.post.overrideFrameworkAndCSS))).appendTo("body").hide().submit().remove()};
d.showPreviewInPopoutBox=function(a,c){var e=this,b,d,f=e.pluginPreviewDetails(!0,a,c);f&&(e.previewMD5=f.md5,e.previewPost=f.post,b=f.url+g._uR(f.post),b.length>=(g._bII()?2E3:4E3)&&(b="",d=function(){e.showPreviewViaPost(f,$("#cboxLoadedContent iframe")[0].name)}),$.colorbox({width:"95%",height:"90%",iframe:!0,preloading:!1,open:!0,title:e.previewSlotWidthInfo||B.preview,className:"zenario_plugin_preview_popout_box",href:b,onComplete:d}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};
d.editModeAlwaysOn=function(a){return!z(this.tuix.tabs[a].edit_mode.always_on)||q(this.tuix.tabs[a].edit_mode.always_on)||this.savedAndContinued(a)};d.editCancelEnabled=function(a){return this.tuix.tabs[a].edit_mode&&q(this.tuix.tabs[a].edit_mode.enabled)&&!this.editModeAlwaysOn(a)};d.revertEnabled=function(a){return this.tuix.tabs[a].edit_mode&&q(this.tuix.tabs[a].edit_mode.enabled)&&this.editModeAlwaysOn(a)&&!this.savedAndContinued(a)&&(!z(this.tuix.tabs[a].edit_mode.enable_revert)&&this.tuix.key&&
this.tuix.key.id||q(this.tuix.tabs[a].edit_mode.enable_revert))};d.savedAndContinued=function(a){return!1};d.editModeOnBox=function(){if(this.tuix&&this.tuix.tabs&&this.sortedTabs)for(var a in this.sortedTabs)if(w(this.sortedTabs,a)&&this.editModeOn(this.sortedTabs[a]))return!0;return!1};d.setData=function(a){this.setDataDiff(a)};d.sendStateToServer=function(){return this.sendStateToServerDiff()};d.save=function(a,c,e){var b=this,d;b.loaded&&(d=b.getURL("save"))&&(b.saving||setTimeout(function(){b.saving=
!0;b.differentTab=!0;b.loaded=!1;b.hideTab(!0);b.checkValues();var f={_save:!0,_confirm:a?1:"",_save_and_continue:c,_box:b.sendStateToServer()};q(b.tuix.download)||b.tuix.confirm&&q(b.tuix.confirm.download)?b.save2(g._nAA(b.getURL("save"),g._uR(f),!0),c,e):b.retryAJAX(d,f,!0,function(a){b.save2(a,c,e)},"saving")},100))};d.save2=function(a,c,d){delete this.saving;var b=a&&a._sync&&a._sync.flags||{},h=m.init&&!A.zenarioOQuickMode&&!A.zenarioOSelectMode;b.close_with_message?(this.close(),h&&m._r(),l._sM(b.close_with_message)):
b.reload_organizer&&h?(this.close(),l._tONT(b),p.uploading=!1,m._sWC("uploading",p.uploading),m._rePa(b.organizer_path)):b.open_admin_box&&C.init?(this.close(),C.open(b.open_admin_box)):b.go_to_url?(this.close(),l._tONT(b),g._gTU(g._aBP(b.go_to_url),!0)):b.valid?b.confirm?(this.load(a),this.sortTabs(),this.draw(),this.showConfirm(c,d)):b.download?(l._dD(this.getURL("download"),{_download:1,_box:this.sendStateToServer()}),c&&(a=a.substr(15),this.load(a)),this.refreshParentAndClose(!0,c,d)):b.saved?
(this.load(a),this.refreshParentAndClose(!1,c,d)):(this.close(),l._sM(a,!0,"error")):(this.load(a),this.sortTabs(),this.switchToATabWithErrors(),this.draw())};d.showConfirm=function(a,c){if(this.tuix&&this.tuix.confirm&&q(this.tuix.confirm.show)){var d=this.tuix.confirm.message;q(this.tuix.confirm.html)||(d=D(d,!0));var b='<input type="button" class="submit_selected" value="'+this.tuix.confirm.button_message+'" onclick="'+this.globalName+".save(true, "+q(a)+", "+q(c)+');"/><input type="button" class="submit" value="'+
this.tuix.confirm.cancel_button_message+'"/>';l._flBo(d,b,this.tuix.confirm.message_type||"none")}};d.dragDropTarget=function(){return this.get("zenario_fbAdminInner")};d.enableDragDropUpload=function(){var a=this.dragDropTarget();p._sHTML5UFDD(this.ajaxURL(),{fileUpload:1},!1,this.uploadCallback,a);$(a).addClass("upload_enabled").removeClass("dragover")};d.disableDragDropUpload=function(){$(this.dragDropTarget()).removeClass("upload_enabled").removeClass("dragover").off("drop")};d.dragListeners=
function(){return p._cDHTML5U()?"ondragover=\"$(this).addClass('dragover');\" ondragleave=\"$(this).removeClass('dragover');\"":""}},zenarioAF,zenarioABToolkit);

zenario.lib(function(s,t,c,A,H,I,f,k,r,E,y,h,q,z,n,J,u,K,C,L,v,w,x,F){var p=A.zenarioABG=new x;p.init("zenarioABG","zenario_admin_box");c=v(F);c.open=function(a,b,g,d,D,e,c,B){if(k._cIBIO("AdminOrganizer"))return!1;f._dS(this.globalName);b||(b={});a=(""+a).s("//",2);a[1]&&!b.id&&(b.id=a[1]);a=a[0];this.isOpen=!0;this.callBack=D;this.passMatchedIds=B;this.createAnotherObject=e;this.getRequestKey=b;this.changed={};this.isSlidUp=this.heightBeforeSlideUp=this.hasPreviewWindow=this.lastPreviewValues=this.previewValues=
this.previewSlotWidth=!1;this.previewSlotWidthInfo="";this.previewHidden=!0;this.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+a;c||(D=this.microTemplate(this.mtPrefix,{}),this.openBox(D));A.onbeforeunload=r.onbeforeunload;this.start(a,b,g,d);return this.cb=new f.callback};c.openBox=function(a){};c.closeBox=function(){};c.updateHash=function(){};c.initFields=function(){this.hasPreviewWindow=!!this.pluginPreviewDetails();v(x).initFields.call(this)};c.refreshParentAndClose=function(a,
b,g){k._nDS(!1);var d,c={};b||(this.isOpen=!1,this.updateHash());if(this.callBack&&!b){var e;(e=this.getValueArrayofArrays())&&this.callBack(this.tuix.key,e)}else if(h.init&&(k.isFullOrganizerWindow||k._cIBIO("og"))){a=!1;if(z(this.tuix.key.id))a=this.tuix.key.id;else for(var m in this.tuix.key)if(w(this.tuix.key,m)){a=this.tuix.key[m];break}h._rTSI(a,g&&C.createdAnother,!b&&C.savedButNotShown)}else f.cID&&(d=this.tuix.key.slotName)?(f._rS(d,k.importantGetRequests),y.init&&y.init()):!f.cID||"zenario_menu"!=
this.path&&"zenario_menu_text"!=this.path?a||b||(this.tuix.key.cID?(this.tuix.key.cID==f.cID&&this.tuix.key.cType==f.cType&&(c=k.importantGetRequests),f._gTU(f._lTI(this.tuix.key.cID,this.tuix.key.cType,c))):y.init&&(c=_._cl(k.importantGetRequests),c.cVersion=f.cVersion,f._gTU(f._lTI(f.cID,f.cType,c)))):(k._rMP(),y.init&&y.init());a=this.tuix.popout_message;g=g&&this.createAnotherObject;b||g||(this.cb&&this.cb.done(),this.close());a&&k._sM(a,!0,!1);if(b){this.changed={};if(this.tuix.tabs)for(m in this.tuix.tabs)w(this.tuix.tabs,
m)&&this.tuix.tabs[m]&&this.editModeOn(m)&&(this.tuix.tabs[m]._saved_and_continued=!0);this.sortTabs();this.draw()}else g&&($("#zenario_abtab").clearQueue(),delete this.tuix,this.open(this.createAnotherObject.path,this.getRequestKey,this.createAnotherObject.tab,this.createAnotherObject.values,s,this.createAnotherObject,!0,this.passMatchedIds))};c.close=function(a){this.callFunctionOnEditors("remove");k._nDS(!1);this.sizing&&clearTimeout(this.sizing);this.stopPoking();f._cAD();a||k._cFB();this.isOpen=
!1;this.closeBox();f._eS(this.globalName);delete this.cb;delete this.tuix;delete this.previewValues;delete this.lastPreviewValues;delete this.previewSlotWidth;delete this.previewSlotWidthInfo;return!1};c.closeButton=function(a){var b=r._o();(!z(b)||!a&&confirm(b))&&this.isOpen&&this.close();return!1};c.draw=function(){this.isOpen&&this.loaded&&this.tabHidden&&this.draw2()};c.draw2=function(){var a=this;if(a.tuix.tabs){a.get("zenario_fbAdminFloatingBox").className=a.baseCSSClass+" "+(a.tuix.css_class||
"zenario_fab_default_style")+" "+(n(a.tuix.hide_tab_bar)?"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");var b=a.tuix;!b.tab||b.tabs[b.tab]&&!r._h(s,a,s,b.tab,s,s,s,s,b.tabs[b.tab])||(b.tab=!1);a.get("zenario_fabTabs").innerHTML=a.drawTabs();var g=!a.editModeOnBox(),d="",d={isReadOnly:g};a.setTitle(g);a.showCloseButton();a.get("zenario_fbButtons").innerHTML=a.microTemplate(a.mtPrefix+"_buttons",d);f._aJQE("#zenario_fbButtons ",!0);a.get("zenario_fbAdminFloatingBox").style.display=
"block";a.tallAsPossibleField=s;a.size(!0);k._nDS(!1);var g=new f.callback,d=a.drawFields(g),c;g.after(a.makeFieldAsTallAsPossible);a.animateInTab(d,g,$("#zenario_abtab"));a.shownTab=b.tab;delete a.lastScrollTop;a.startPoking();(c=b.tabs.global_area)&&!_._isEm(c.fields)?(p.tuix={tab:"global_area",tabs:{global_area:JSON.parse(JSON.stringify(c))}},p.sortTabs(),p.validate=function(){a.validate()},p.format=function(){a.format()},p.redrawTab=function(){a.redrawTab()},p.readTab=function(){v(x).readTab.call(p);
var b,g,d,c=a.tuix.tabs.global_area;for(b in c.fields)w(c.fields,b)&&(g=c.fields[b],d=p.tuix.tabs.global_area.fields[b],g.value=d.value,g.current_value=d.current_value,g.pressed=d.pressed,g.selected_option=d.selected_option,g._display_value=d._display_value,g.hidden=d.hidden,g._was_hidden_before=d._was_hidden_before)},g=new f.callback,d=p.drawFields(g),$("#zenario_fabGlobalArea").show().html(d),a.addJQueryElements("#zenario_fabGlobalArea"),g.done()):$("#zenario_fabGlobalArea").hide()}};c.readTab=
function(){v(x).readTab.call(this);this.tuix.tabs.global_area&&p.readTab()};c.sortTabs=function(){v(x).sortTabs.call(this);this.sortedTabs=_._f(this.sortedTabs,function(a){return"global_area"!=a})};c.setTitle=function(a){};c.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};c.returnAJAXURL=function(a){return"start"==a&&this.passMatchedIds&&h.lastRequests?
t+"zenario/admin/organizer.ajax.php?_get_matched_ids=1&_fab_path="+q(this.path)+"&path="+q(h.path)+f._uR(h.lastRequests)+f._uR(this.getRequestKey):t+"zenario/admin/admin_boxes.ajax.php?path="+q(this.path)+f._uR(this.getRequestKey)};c.typeaheadSearchEnabled=function(a,b,g){return(a=a.pick_items)&&(a.path||a.target_path)&&!1!==a.enable_type_ahead_search};c.typeaheadSearchAJAXURL=function(a,b,g){b=a.pick_items;a=b.path&&h._cNPTTPAR(b.path);b=b.target_path&&h._cNPTTPAR(b.target_path);if(a=a&&b&&a.path==
b.path?a:b||a)return t+"zenario/admin/organizer.ajax.php?_typeahead_search=1&path="+q(a.path)+f._uR(a.request)};c.parseTypeaheadSearch=function(a,b,g,d,c){var e,f,B=[];if(c.items)for(e in c.items)w(c.items,e)&&(g=c.items[e],f=k._fOIN(c,e),a.values=a.values||{},a.values[e]={image:g.image,css_class:g.css_class||c.item&&c.item.css_class,label:f},B.push({value:e,text:f,html:this.drawPickedItem(e,b,a,d,!0)}));return B};c.drawPickedItem=function(a,b,g,d,c){z(g)||(g=this.field(b));var e=g.values&&g.values[a],
m=g.pick_items||{},k=a==1*a,l,h;b={id:b,item:a,label:e,readOnly:d};_._isOb(e)?(b.missing=e.missing,b.css_class=e.css_class,b.image=e.image,e=b.label=e.label):e?b.label=e:(e=b.label=a,b.missing=!0);g.tag_colors&&(b.tag_color=g.tag_colors[a]||"blue");n(m.hide_info_button)||g.upload&&!k||!(l=m.path)||l!=m.target_path&&m.min_path!=m.target_path||(l="//"==f._rHSS(l,2)?l+a:"/"==f._rHSS(l,1)?l+("/"+a):l+("//"+a),b.organizerPath=l);g.upload&&(b.isUpload=!0,l=(l=(""+e).m(/(.*?)\.(\w+)$/)||(""+e).m(/(.*?)\.(\w+) \[.*\]$/))&&
l[2]?l[2].toLowerCase():"unknown",b.extension=l,k?(h=g.values&&g.values[a])&&h.checksum?(a=t+"zenario/file.php?c="+q(h.checksum),h.usage&&(a+="&usage="+q(h.usage))):a=t+"zenario/file.php?id="+a:a=t+"zenario/file.php?getUploadedFileInCacheDir="+q(a),l.m(/gif|jpg|jpeg|png|svg/)?(b.thumbnail={onclick:this.globalName+".showPickedItemInPopout('"+a+"&popout=1&dummy_filename="+q("image."+l)+"', '"+e+"');",src:a+"&og=1"},(e=(""+e).m(/.*\[\s*(\d+)p?x?\s*[\u00d7x]\s*(\d+)p?x?\s*\]$/))&&e[1]&&e[2]&&r._rI(e[1],
e[2],180,120,b.thumbnail)):b.adminDownload=a+"&adminDownload=1");return c?this.microTemplate(m.dropdown_item_microtemplate||this.mtPrefix+"_dropdown_item",b):this.microTemplate(m.picked_item_microtemplate||this.mtPrefix+"_picked_item",b)};c.pluginPreviewDetails=function(a,b,g,d,c){if(this.tuix&&this.tuix.key&&(this.tuix.key.nest||this.tuix.key.eggId))return!1;var e=_._cl(k.importantGetRequests),m,h=!b;switch(this.path){case "zenario_skin_editor":h=!1;case "plugin_css_and_framework":b="overrideFrameworkAndCSS";
a&&(m=JSON.stringify(this.getValues1D(!1,!0,!1,!0,!0)));break;case "plugin_settings":b="overrideSettings";a&&(m=JSON.stringify(this.getValues1D(!0,!1)));break;default:return!1}d=d||this.tuix&&this.tuix.key&&this.tuix.key.slotName;c=c||this.tuix&&this.tuix.key&&this.tuix.key.instanceId||f.slots&&f.slots[d]&&f.slots[d].instanceId;d&&zenario_conductor._e(d)&&(e=zenario_conductor._re(d,"refresh",e));e.cVersion=f.cVersion;if(h){if(!d||!c)return!1;var h=k._gGSD(d),l;a=h&&h.cssClass&&h.cssClass.s(" ")||
[];e.method_call="showSingleSlot";e.fakeLayout=1;e.grid_columns=h.columns;e.grid_container=h.container;this.previewSlotWidth=h.pxWidth;this.previewSlotWidthInfo=h.widthInfo;e.grid_pxWidth=this.previewWidth&&!g?this.previewWidth:this.previewSlotWidth;e.grid_cssClass="";for(l in a)w(a,l)&&(g=a[l],"alpha"==g||"omega"==g||g.m(/^span[\d_]*$/)||(e.grid_cssClass+=g+" "))}else e._show_page_preview=1;d&&(e.slotName=d);c&&(e.instanceId=c);return{url:f._lTI(f.cID,f.cType,e),postName:b,postValues:m}};c.addExtraAttsForTextFields=
function(a,b){this.hasPreviewWindow&&(b.onkeyup=(b.onkeyup||"")+" "+this.globalName+".updatePreview();")};c.fieldChange=function(a,b){this.updatePreview(750);v(x).fieldChange.call(this,a,b)};c.updatePreview=function(a){var b=this;b.hasPreviewWindow&&!b.previewHidden&&f._aADINS("fabUpdatePreview",function(){var a=b.pluginPreviewDetails(!0);a&&b.lastPreviewValues!=a.postValues&&(b.lastPreviewValues=b.previewValues=a.postValues,b.submitPreview(a))},a||1E3)};var G=0;c.submitPreview=function(a,b,c){b=
b||$("#zenario_fabPreview");c=c||"zenario_fabPreviewFrame";var d="zenario_previewFrame"+ ++G,f=b.find("."+c).not(".beingRemoved");c=$(r._ht("iframe","id",d,"name",d,"class",c));var e=f[0]&&f[0].contentDocument;if(e=1*(e&&$(e).scrollTop()))a.url+="&_scroll_to="+e;f[0]&&(f.width(f.width()).height(f.height()).attr("id","").attr("name","").addClass("beingRemoved"),setTimeout(function(){f.fadeOut(600,function(){f.remove()})},400));b.append(c);this.showPreviewViaPost(a,d)};c.showPreviewViaPost=function(a,
b){$('<form action="'+u(a.url)+'" method="post" target="'+u(b)+'"><input name="'+u(a.postName)+'" value="'+u(a.postValues)+'"/></form>').appendTo("body").hide().submit().remove()};c.showPreviewInPopoutBox=function(a,b){var c=this,d,h,e=c.pluginPreviewDetails(!0,a,b);e&&(c.previewValues=e.postValues,d=e.url+"&"+q(e.postName)+"="+q(e.postValues),d.length>=(f._bII()?2E3:4E3)&&(d="",h=function(){c.showPreviewViaPost(e,$("#cboxLoadedContent iframe")[0].name)}),$.colorbox({width:"95%",height:"90%",iframe:!0,
preloading:!1,open:!0,title:c.previewSlotWidthInfo||C.preview,className:"zenario_plugin_preview_popout_box",href:d,onComplete:h}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};c.editModeOn=function(a){if(!this.tuix||!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=n(this.tuix.tabs[a].edit_mode.enabled)&&(n(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};c.editModeAlwaysOn=function(a){return!z(this.tuix.tabs[a].edit_mode.always_on)||
n(this.tuix.tabs[a].edit_mode.always_on)||this.savedAndContinued(a)};c.editCancelEnabled=function(a){return this.tuix.tabs[a].edit_mode&&n(this.tuix.tabs[a].edit_mode.enabled)&&!this.editModeAlwaysOn(a)};c.revertEnabled=function(a){return this.tuix.tabs[a].edit_mode&&n(this.tuix.tabs[a].edit_mode.enabled)&&this.editModeAlwaysOn(a)&&!this.savedAndContinued(a)&&(!z(this.tuix.tabs[a].edit_mode.enable_revert)&&this.tuix.key&&this.tuix.key.id||n(this.tuix.tabs[a].edit_mode.enable_revert))};c.savedAndContinued=
function(a){return!1};c.editModeOnBox=function(){if(this.tuix&&this.tuix.tabs&&this.sortedTabs)for(var a in this.sortedTabs)if(w(this.sortedTabs,a)&&this.editModeOn(this.sortedTabs[a]))return!0;return!1};c.setData=function(a){this.setDataDiff(a)};c.sendStateToServer=function(){return this.sendStateToServerDiff()};c.save=function(a,b,c){var d=this,h;d.loaded&&(h=d.getURL("save"))&&(d.saving||setTimeout(function(){d.saving=!0;d.differentTab=!0;d.loaded=!1;d.hideTab(!0);d.checkValues();var e={_save:!0,
_confirm:a?1:"",_save_and_continue:b,_box:d.sendStateToServer()};n(d.tuix.download)||d.tuix.confirm&&n(d.tuix.confirm.download)?d.save2(f._nAA(d.getURL("save"),f._uR(e),!0),b,c):d.retryAJAX(h,e,!0,function(a){d.save2(a,b,c)},"saving")},100))};c.save2=function(a,b,c){delete this.saving;var d=a&&a._sync&&a._sync.flags||{},n=h.init&&!A.zenarioOQuickMode&&!A.zenarioOSelectMode;d.close_with_message?(this.close(),n&&h._r(),k._sM(d.close_with_message)):d.reload_organizer&&n?(this.close(),k.toastOrNoToast(d),
r.uploading=!1,h._sWC("uploading",r.uploading),h._rePa(d.organizer_path)):d.open_admin_box&&E.init?(this.close(),E.open(d.open_admin_box)):d.go_to_url?(this.close(),k.toastOrNoToast(d),f._gTU(f._aBP(d.go_to_url),!0)):d.valid?d.confirm?(this.load(a),this.sortTabs(),this.draw(),this.showConfirm(b,c)):d.download?(this.get("zenario_iframe_form").action=this.getURL("download"),this.get("zenario_iframe_form").innerHTML='<input type="hidden" name="_download" value="1"/><input type="hidden" name="_box" value="'+
u(this.sendStateToServer())+'"/>',this.get("zenario_iframe_form").submit(),b&&(a=a.substr(15),this.load(a)),this.refreshParentAndClose(!0,b,c)):d.saved?(this.load(a),this.refreshParentAndClose(!1,b,c)):(this.close(),k._sM(a,!0,"error")):(this.load(a),this.sortTabs(),this.switchToATabWithErrors(),this.draw())};c.showConfirm=function(a,b){if(this.tuix&&this.tuix.confirm&&n(this.tuix.confirm.show)){var c=this.tuix.confirm.message;n(this.tuix.confirm.html)||(c=u(c,!0));var d='<input type="button" class="submit_selected" value="'+
this.tuix.confirm.button_message+'" onclick="'+this.globalName+".save(true, "+n(a)+", "+n(b)+');"/><input type="button" class="submit" value="'+this.tuix.confirm.cancel_button_message+'"/>';k._flBo(c,d,this.tuix.confirm.message_type||"none")}};c.dragDropTarget=function(){return this.get("zenario_fbAdminInner")};c.enableDragDropUpload=function(){var a=this.dragDropTarget();r._sHTML5UFDD(this.ajaxURL(),{fileUpload:1},!1,this.uploadCallback,a);$(a).addClass("upload_enabled").removeClass("dragover")};
c.disableDragDropUpload=function(){$(this.dragDropTarget()).removeClass("upload_enabled").removeClass("dragover").off("drop")};c.dragListeners=function(){return r._cDHTML5U()?"ondragover=\"$(this).addClass('dragover');\" ondragleave=\"$(this).removeClass('dragover');\"":""};c.stopPoking=function(){this.poking&&clearInterval(this.poking);this.poking=!1};c.startPoking=function(){this.poking||(this.poking=setInterval(this.poke,12E4))};c.poke=function(){f._a(t+"zenario/admin/quick_ajax.php?keep_session_alive=1")}},
zenarioAF,zenarioABToolkit);

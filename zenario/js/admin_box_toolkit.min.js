zenario.lib(function(l,v,b,w,E,F,e,h,n,z,r,k,s,t,d,G,q,H,x,I,y,u,A,B){b=y(B);b.open=function(a,g,p,c,b,f,C,d){if(h._cIBIO("AdminOrganizer"))return!1;e._dS(this.globalName);g||(g={});a=(""+a).s("//",2);a[1]&&!g.id&&(g.id=a[1]);a=a[0];this.isOpen=!0;this.callBack=b;this.passMatchedIds=d;this.createAnotherObject=f;this.getRequestKey=g;this.changed={};this.isSlidUp=this.heightBeforeSlideUp=this.hasPreviewWindow=this.lastPreviewValues=this.previewValues=this.previewSlotWidth=!1;this.previewSlotWidthInfo=
"";this.previewHidden=!0;this.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+a;C||(b=this.microTemplate(this.mtPrefix,{}),this.openBox(b));w.onbeforeunload=n.onbeforeunload;this.start(a,g,p,c);return this.cb=new e.callback};b.openBox=function(a){};b.closeBox=function(){};b.updateHash=function(){};b.initFields=function(){this.hasPreviewWindow=!!this.pluginPreviewDetails();y(A).initFields.call(this)};b.refreshParentAndClose=function(a,g,p){h._nDS(!1);var c,b={};g||(this.isOpen=!1,this.updateHash());
if(this.callBack&&!g){var f;(f=this.getValueArrayofArrays())&&this.callBack(this.tuix.key,f)}else if(k.init&&(h.isFullOrganizerWindow||h._cIBIO("og"))){a=!1;if(t(this.tuix.key.id))a=this.tuix.key.id;else for(var d in this.tuix.key)if(u(this.tuix.key,d)){a=this.tuix.key[d];break}k._rTSI(a,p&&x.createdAnother,!g&&x.savedButNotShown)}else e.cID&&(c=this.tuix.key.slotName)?(e._rS(c,h.importantGetRequests),r.init&&r.init()):!e.cID||"zenario_menu"!=this.path&&"zenario_menu_text"!=this.path?a||g||(this.tuix.key.cID?
(this.tuix.key.cID==e.cID&&this.tuix.key.cType==e.cType&&(b=h.importantGetRequests),e._gTU(e._lTI(this.tuix.key.cID,this.tuix.key.cType,b))):r.init&&(b=_._cl(h.importantGetRequests),b.cVersion=e.cVersion,e._gTU(e._lTI(e.cID,e.cType,b)))):(h._rMP(),r.init&&r.init());a=this.tuix.popout_message;p=p&&this.createAnotherObject;g||p||(this.cb&&this.cb.call(),this.close());a&&h._sM(a,!0,!1);if(g){this.changed={};if(this.tuix.tabs)for(d in this.tuix.tabs)u(this.tuix.tabs,d)&&this.tuix.tabs[d]&&this.editModeOn(d)&&
(this.tuix.tabs[d]._saved_and_continued=!0);this.sortTabs();this.draw()}else p&&($("#zenario_abtab").clearQueue(),delete this.tuix,this.open(this.createAnotherObject.path,this.getRequestKey,this.createAnotherObject.tab,this.createAnotherObject.values,l,this.createAnotherObject,!0,this.passMatchedIds))};b.close=function(a){this.callFunctionOnEditors("remove");h._nDS(!1);this.sizing&&clearTimeout(this.sizing);this.stopPoking();e._cAD();a||h._cFB();this.isOpen=!1;this.closeBox();e._eS(this.globalName);
delete this.cb;delete this.tuix;delete this.previewValues;delete this.lastPreviewValues;delete this.previewSlotWidth;delete this.previewSlotWidthInfo;return!1};b.closeButton=function(a){var g=n._o();(!t(g)||!a&&confirm(g))&&this.isOpen&&this.close();return!1};b.draw=function(){this.isOpen&&this.loaded&&this.tabHidden&&this.draw2()};b.draw2=function(){if(this.tuix.tabs){this.get("zenario_fbAdminFloatingBox").className=this.baseCSSClass+" "+(this.tuix.css_class||"zenario_fab_default_style")+" "+(d(this.tuix.hide_tab_bar)?
"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");var a=this.tuix;!a.tab||a.tabs[a.tab]&&!n._h(l,this,l,a.tab,l,l,l,l,a.tabs[a.tab])||(a.tab=!1);this.get("zenario_fabTabs").innerHTML=this.drawTabs();var g=!this.editModeOnBox(),b="",b={isReadOnly:g};this.setTitle(g);this.showCloseButton();this.get("zenario_fbButtons").innerHTML=this.microTemplate(this.mtPrefix+"_buttons",b);e._aJQE("#zenario_fbButtons ",!0);this.get("zenario_fbAdminFloatingBox").style.display="block";this.tallAsPossibleField=
l;this.size(!0);h._nDS(!1);g=new e.callback;b=this.drawFields(g);g.after(this.makeFieldAsTallAsPossible);this.animateInTab(b,g,$("#zenario_abtab"));this.shownTab=a.tab;delete this.lastScrollTop;this.startPoking()}};b.setTitle=function(a){};b.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};b.returnAJAXURL=function(a){return"start"==a&&this.passMatchedIds&&
k.lastRequests?v+"zenario/admin/organizer.ajax.php?_get_matched_ids=1&_fab_path="+s(this.path)+"&path="+s(k.path)+e._uR(k.lastRequests)+e._uR(this.getRequestKey):v+"zenario/admin/admin_boxes.ajax.php?path="+s(this.path)+e._uR(this.getRequestKey)};b.pluginPreviewDetails=function(a,g,b,c,d){if(this.tuix&&this.tuix.key&&(this.tuix.key.nest||this.tuix.key.eggId))return!1;var f=_._cl(h.importantGetRequests),k,m=!g;switch(this.path){case "zenario_skin_editor":m=!1;case "plugin_css_and_framework":g="overrideFrameworkAndCSS";
a&&(k=JSON.stringify(this.getValues1D(!1,!0,!1,!0,!0)));break;case "plugin_settings":g="overrideSettings";a&&(k=JSON.stringify(this.getValues1D(!0,!1)));break;default:return!1}c=c||this.tuix&&this.tuix.key&&this.tuix.key.slotName;d=d||this.tuix&&this.tuix.key&&this.tuix.key.instanceId||e.slots&&e.slots[c]&&e.slots[c].instanceId;c&&zenario_conductor._e(c)&&zenario_conductor._mR(c,f);f.cVersion=e.cVersion;if(m){if(!c||!d)return!1;var m=h._gGSD(c),l;a=m&&m.cssClass&&m.cssClass.s(" ")||[];f.method_call=
"showSingleSlot";f.fakeLayout=1;f.grid_columns=m.columns;f.grid_container=m.container;this.previewSlotWidth=m.pxWidth;this.previewSlotWidthInfo=m.widthInfo;f.grid_pxWidth=this.previewWidth&&!b?this.previewWidth:this.previewSlotWidth;f.grid_cssClass="";for(l in a)u(a,l)&&(b=a[l],"alpha"==b||"omega"==b||b.m(/^span[\d_]*$/)||(f.grid_cssClass+=b+" "))}else f._show_page_preview=1;c&&(f.slotName=c);d&&(f.instanceId=d);return{url:e._lTI(e.cID,e.cType,f),postName:g,postValues:k}};b.addExtraAttsForTextFields=
function(a,b){this.hasPreviewWindow&&(b.onkeyup=(b.onkeyup||"")+" "+this.globalName+".updatePreview();")};b.fieldChange=function(a,b){this.updatePreview(750);y(A).fieldChange.call(this,a,b)};b.updatePreview=function(a){var b=this;b.hasPreviewWindow&&!b.previewHidden&&e._aADINS("fabUpdatePreview",function(){var a=b.pluginPreviewDetails(!0);a&&b.lastPreviewValues!=a.postValues&&(b.lastPreviewValues=b.previewValues=a.postValues,b.submitPreview(a))},a||1E3)};var D=0;b.submitPreview=function(a,b,e){b=
b||$("#zenario_fabPreview");e=e||"zenario_fabPreviewFrame";var c="zenario_previewFrame"+ ++D,d=b.find("."+e).not(".beingRemoved");e=$(n._ht("iframe","id",c,"name",c,"class",e));var f=d[0]&&d[0].contentDocument;if(f=1*(f&&$(f).scrollTop()))a.url+="&_scroll_to="+f;d[0]&&(d.width(d.width()).height(d.height()).attr("id","").attr("name","").addClass("beingRemoved"),setTimeout(function(){d.fadeOut(600,function(){d.remove()})},400));b.append(e);this.showPreviewViaPost(a,c)};b.showPreviewViaPost=function(a,
b){$('<form action="'+q(a.url)+'" method="post" target="'+q(b)+'"><input name="'+q(a.postName)+'" value="'+q(a.postValues)+'"/></form>').appendTo("body").hide().submit().remove()};b.showPreviewInPopoutBox=function(a,b){var d=this,c,h,f=d.pluginPreviewDetails(!0,a,b);f&&(d.previewValues=f.postValues,c=f.url+"&"+s(f.postName)+"="+s(f.postValues),c.length>=(e._bII()?2E3:4E3)&&(c="",h=function(){d.showPreviewViaPost(f,$("#cboxLoadedContent iframe")[0].name)}),$.colorbox({width:"95%",height:"90%",iframe:!0,
preloading:!1,open:!0,title:d.previewSlotWidthInfo||x.preview,className:"zenario_plugin_preview_popout_box",href:c,onComplete:h}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};b.editModeOn=function(a){if(!this.tuix||!this.tuix.tabs)return!1;a||(a=this.tuix.tab);return this.tuix.tabs[a].edit_mode?this.tuix.tabs[a].edit_mode.on=d(this.tuix.tabs[a].edit_mode.enabled)&&(d(this.tuix.tabs[a].edit_mode.on)||this.editModeAlwaysOn(a)):!1};b.editModeAlwaysOn=function(a){return!t(this.tuix.tabs[a].edit_mode.always_on)||
d(this.tuix.tabs[a].edit_mode.always_on)||this.savedAndContinued(a)};b.editCancelEnabled=function(a){return this.tuix.tabs[a].edit_mode&&d(this.tuix.tabs[a].edit_mode.enabled)&&!this.editModeAlwaysOn(a)};b.revertEnabled=function(a){return this.tuix.tabs[a].edit_mode&&d(this.tuix.tabs[a].edit_mode.enabled)&&this.editModeAlwaysOn(a)&&!this.savedAndContinued(a)&&(!t(this.tuix.tabs[a].edit_mode.enable_revert)&&this.tuix.key&&this.tuix.key.id||d(this.tuix.tabs[a].edit_mode.enable_revert))};b.savedAndContinued=
function(a){return!1};b.editModeOnBox=function(){if(this.tuix&&this.tuix.tabs&&this.sortedTabs)for(var a in this.sortedTabs)if(u(this.sortedTabs,a)&&this.editModeOn(this.sortedTabs[a]))return!0;return!1};b.setData=function(a){this.setDataDiff(a)};b.sendStateToServer=function(){return this.sendStateToServerDiff()};b.save=function(a,b,h){var c=this,k;c.loaded&&(k=c.getURL("save"))&&(c.saving||setTimeout(function(){c.saving=!0;c.differentTab=!0;c.loaded=!1;c.hideTab(!0);c.checkValues();var f={_save:!0,
_confirm:a?1:"",_save_and_continue:b,_box:c.sendStateToServer()};d(c.tuix.download)||c.tuix.confirm&&d(c.tuix.confirm.download)?c.save2(e._nAA(c.getURL("save"),e._uR(f),!0),b,h):c.retryAJAX(k,f,!0,function(a){c.save2(a,b,h)},"saving")},100))};b.save2=function(a,b,d){delete this.saving;var c=a&&a._sync&&a._sync.flags||{},l=k.init&&!w.zenarioOQuickMode&&!w.zenarioOSelectMode;c.close_with_message?(this.close(),l&&k._r(),h._sM(c.close_with_message)):c.reload_organizer&&l?(this.close(),h._rT(),n.uploading=
!1,k._sWC("uploading",n.uploading),k._rePa()):c.open_admin_box&&z.init?(this.close(),z.open(c.open_admin_box)):c.go_to_url?(this.close(),h._rT(),e._gTU(e._aBP(c.go_to_url),!0)):c.valid?c.confirm?(this.load(a),this.sortTabs(),this.draw(),this.showConfirm(b,d)):c.download?(this.get("zenario_iframe_form").action=this.getURL("download"),this.get("zenario_iframe_form").innerHTML='<input type="hidden" name="_download" value="1"/><input type="hidden" name="_box" value="'+q(this.sendStateToServer())+'"/>',
this.get("zenario_iframe_form").submit(),b&&(a=a.substr(15),this.load(a)),this.refreshParentAndClose(!0,b,d)):c.saved?(this.load(a),this.refreshParentAndClose(!1,b,d)):(this.close(),h._sM(a,!0,"error")):(this.load(a),this.sortTabs(),this.switchToATabWithErrors(),this.draw())};b.showConfirm=function(a,b){if(this.tuix&&this.tuix.confirm&&d(this.tuix.confirm.show)){var e=this.tuix.confirm.message;d(this.tuix.confirm.html)||(e=q(e,!0));var c='<input type="button" class="submit_selected" value="'+this.tuix.confirm.button_message+
'" onclick="'+this.globalName+".save(true, "+d(a)+", "+d(b)+');"/><input type="button" class="submit" value="'+this.tuix.confirm.cancel_button_message+'"/>';h._flBo(e,c,this.tuix.confirm.message_type||"none")}};b.dragDropTarget=function(){return this.get("zenario_fbAdminInner")};b.enableDragDropUpload=function(){var a=this.dragDropTarget();n._sHTML5UFDD(this.ajaxURL(),{fileUpload:1},!1,this.uploadCallback,a);$(a).addClass("upload_enabled").removeClass("dragover")};b.disableDragDropUpload=function(){$(this.dragDropTarget()).removeClass("upload_enabled").removeClass("dragover").off("drop")};
b.dragListeners=function(){return n._cDHTML5U()?"ondragover=\"$(this).addClass('dragover');\" ondragleave=\"$(this).removeClass('dragover');\"":""};b.stopPoking=function(){this.poking&&clearInterval(this.poking);this.poking=!1};b.startPoking=function(){this.poking||(this.poking=setInterval(this.poke,12E4))};b.poke=function(){e._a(v+"zenario/admin/quick_ajax.php?keep_session_alive=1")}},zenarioAF,zenarioABToolkit);

zenario.lib(function(s,u,e,A,G,H,g,h,p,C,y,m,t,z,q,I,D,J,B,K,v,w,x,E){var r=A.zenarioABG=new x;r.init("zenarioABG","zenario_admin_box");e=v(E);e.open=function(a,c,d,b,k,f,l,e){if(h._cIBIO("AdminOrganizer"))return!1;g._dS(this.globalName);c||(c={});a=(""+a).s("//",2);a[1]&&!c.id&&(c.id=a[1]);a=a[0];this.isOpen=!0;this.callBack=k;this.passMatchedIds=e;this.createAnotherObject=f;this.getRequestKey=c;this.changed={};this.isSlidUp=this.heightBeforeSlideUp=this.hasPreviewWindow=this.previewMD5=this.previewPost=
this.previewSlotWidth=!1;this.previewSlotWidthInfo="";this.previewHidden=!0;this.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+a;l||(k=this.microTemplate(this.mtPrefix,{}),this.openBox(k));A.onbeforeunload=p.onbeforeunload;this.start(a,c,d,b);return this.cb=new g.callback};e.openBox=function(a){};e.closeBox=function(){};e.updateHash=function(){};e.initFields=function(){this.hasPreviewWindow=!!this.pluginPreviewDetails();v(x).initFields.call(this)};e.refreshParentAndClose=function(a,
c,d){h._nDS(!1);var b,k={};c||(this.isOpen=!1,this.updateHash());if(this.callBack&&!c){var f;(f=this.getValueArrayofArrays())&&this.callBack(this.tuix.key,f)}else if(m.init&&(h.isFullOrganizerWindow||h._cIBIO("og"))){a=!1;if(z(this.tuix.key.id))a=this.tuix.key.id;else for(var l in this.tuix.key)if(w(this.tuix.key,l)){a=this.tuix.key[l];break}m._rTSI(a,d&&B.createdAnother,!c&&B.savedButNotShown)}else g.cID&&(b=this.tuix.key.slotName)?(g._rS(b,h.importantGetRequests),y.init&&y.init()):!g.cID||"zenario_menu"!=
this.path&&"zenario_menu_text"!=this.path?a||c||(this.tuix.key.cID?(this.tuix.key.cID==g.cID&&this.tuix.key.cType==g.cType&&(k=h.importantGetRequests),g._gTU(g._lTI(this.tuix.key.cID,this.tuix.key.cType,k))):y.init&&(k=_._cl(h.importantGetRequests),k.cVersion=g.cVersion,g._gTU(g._lTI(g.cID,g.cType,k)))):(h._rMP(),y.init&&y.init());a=this.tuix.popout_message;d=d&&this.createAnotherObject;c||d||(this.cb&&this.cb.done(),this.close());a&&h._sM(a,!0,!1);if(c){this.changed={};if(this.tuix.tabs)for(l in this.tuix.tabs)w(this.tuix.tabs,
l)&&this.tuix.tabs[l]&&this.editModeOn(l)&&(this.tuix.tabs[l]._saved_and_continued=!0);this.sortTabs();this.draw()}else d&&($("#zenario_abtab").clearQueue(),delete this.tuix,this.open(this.createAnotherObject.path,this.getRequestKey,this.createAnotherObject.tab,this.createAnotherObject.values,s,this.createAnotherObject,!0,this.passMatchedIds))};e.close=function(a){this.callFunctionOnEditors("remove");h._nDS(!1);this.sizing&&clearTimeout(this.sizing);g.stopPoking(this);g._cAD();a||h._cFB();this.isOpen=
!1;this.closeBox();g._eS(this.globalName);delete this.cb;delete this.tuix;delete this.previewMD5;delete this.previewPost;delete this.previewSlotWidth;delete this.previewSlotWidthInfo;return!1};e.closeButton=function(a){var c=p._o();(!z(c)||!a&&confirm(c))&&this.isOpen&&this.close();return!1};e.draw=function(){this.isOpen&&this.loaded&&this.tabHidden&&this.draw2()};e.draw2=function(){var a=this;if(a.tuix.tabs){a.get("zenario_fbAdminFloatingBox").className=a.baseCSSClass+" "+(a.tuix.css_class||"zenario_fab_default_style")+
" "+(q(a.tuix.hide_tab_bar)?"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");var c=a.tuix;!c.tab||c.tabs[c.tab]&&!p._h(s,a,s,c.tab,s,s,s,s,c.tabs[c.tab])||(c.tab=!1);a.get("zenario_fabTabs").innerHTML=a.drawTabs();var d=!a.editModeOnBox(),b="",b={isReadOnly:d};a.setTitle(d);a.showCloseButton();a.get("zenario_fbButtons").innerHTML=a.microTemplate(a.mtPrefix+"_buttons",b);g._aJQE("#zenario_fbButtons ",!0);a.get("zenario_fbAdminFloatingBox").style.display="block";a.tallAsPossibleField=
s;a.size(!0);h._nDS(!1);var d=new g.callback,b=a.drawFields(d),k;d.after(a.makeFieldAsTallAsPossible);a.animateInTab(b,d,$("#zenario_abtab"));a.shownTab=c.tab;delete a.lastScrollTop;g.startPoking(a);(k=c.tabs.global_area)&&!_._isEm(k.fields)?(r.tuix={tab:"global_area",tabs:{global_area:JSON.parse(JSON.stringify(k))}},r.sortTabs(),r.validate=function(){a.validate()},r.format=function(){a.format()},r.redrawTab=function(){a.redrawTab()},r.readTab=function(){v(x).readTab.call(r);var c,b,d,k=a.tuix.tabs.global_area;
for(c in k.fields)w(k.fields,c)&&(b=k.fields[c],d=r.tuix.tabs.global_area.fields[c],b.value=d.value,b.current_value=d.current_value,b.pressed=d.pressed,b.selected_option=d.selected_option,b._display_value=d._display_value,b.hidden=d.hidden,b._was_hidden_before=d._was_hidden_before)},d=new g.callback,b=r.drawFields(d),$("#zenario_fabGlobalArea").show().html(b),a.addJQueryElements("#zenario_fabGlobalArea"),d.done()):$("#zenario_fabGlobalArea").hide()}};e.readTab=function(){v(x).readTab.call(this);this.tuix.tabs.global_area&&
r.readTab()};e.sortTabs=function(){v(x).sortTabs.call(this);this.sortedTabs=_._f(this.sortedTabs,function(a){return"global_area"!=a})};e.setTitle=function(a){};e.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};e.returnAJAXURL=function(a){return"start"==a&&this.passMatchedIds&&m.lastRequests?u+"zenario/admin/organizer.ajax.php?_get_matched_ids=1&_fab_path="+
t(this.path)+"&path="+t(m.path)+g._uR(m.lastRequests)+g._uR(this.getRequestKey):u+"zenario/admin/admin_boxes.ajax.php?path="+t(this.path)+g._uR(this.getRequestKey)};e.typeaheadSearchEnabled=function(a,c,d){return(a=a.pick_items)&&(a.path||a.target_path)&&!1!==a.enable_type_ahead_search};e.typeaheadSearchAJAXURL=function(a,c,d){c=a.pick_items;a=c.path&&m._cNPTTPAR(c.path);c=c.target_path&&m._cNPTTPAR(c.target_path);if(a=a&&c&&a.path==c.path?a:c||a)return u+"zenario/admin/organizer.ajax.php?_typeahead_search=1&path="+
t(a.path)+g._uR(a.request)};e.parseTypeaheadSearch=function(a,c,d,b,k){var f,e,g=[];if(k.items)for(f in k.items)w(k.items,f)&&(d=k.items[f],e=h._fOIN(k,f),a.values=a.values||{},a.values[f]={image:d.image,css_class:d.css_class||k.item&&k.item.css_class,label:e},g.push({value:f,text:e,html:this.drawPickedItem(f,c,a,b,!0)}));return g};e.drawPickedItem=function(a,c,d,b,k){z(d)||(d=this.field(c));var f=d.values&&d.values[a],e=d.pick_items||{},h=a==1*a,n,m;b={id:c,item:a,label:f,readOnly:b};_._isOb(f)?
(b.missing=f.missing,b.css_class=f.css_class,b.image=f.image,f=b.label=f.label,b.fileSize=d.values[a].size):f?b.label=f:(f=b.label=a,b.missing=!0);d.tag_colors&&(b.tag_color=d.tag_colors[a]||"blue");q(e.hide_info_button)||d.upload&&!h||!(n=e.info_button_path)&&(!(n=e.path)||n!=e.target_path&&e.min_path!=e.target_path)||(n="//"==g._rHSS(n,2)?n+a:"/"==g._rHSS(n,1)?n+("/"+a):n+("//"+a),b.organizerPath=n);d.upload&&(b.isUpload=!0,n=(n=(""+f).m(/(.*?)\.(\w+)$/)||(""+f).m(/(.*?)\.(\w+) \[.*\]$/))&&n[2]?
n[2].toLowerCase():"unknown",b.extension=n,h?(m=d.values&&d.values[a])&&m.checksum?(h=u+"zenario/file.php?c="+t(m.checksum),m.usage&&(h+="&usage="+t(m.usage))):h=u+"zenario/file.php?id="+a:h=u+"zenario/file.php?getUploadedFileInCacheDir="+t(a),n.m(/gif|jpg|jpeg|png|svg/)?(b.thumbnail={onclick:this.globalName+".showPickedItemInPopout('"+h+"&popout=1&dummy_filename="+t("image."+n)+"', '"+f+"');",src:h+"&og=1"},(a=(""+f).m(/.*\[\s*(\d+)p?x?\s*[\u00d7x]\s*(\d+)p?x?\s*\]$/))&&a[1]&&a[2]&&p._rI(a[1],a[2],
180,120,b.thumbnail)):d.values[a].location&&"s3"==d.values[a].location?d.values[a].s3Link&&(b.adminDownload=d.values[a].s3Link):b.adminDownload=h+"&adminDownload=1");return this.drawPickedItem2(c,e,k,b)};e.pluginPreviewDetails=function(a,c,d,b,e){if(this.tuix&&this.tuix.key&&(this.tuix.key.nest||this.tuix.key.eggId))return!1;var f={post:{}},l=_._cl(h.importantGetRequests);c=!c;switch(this.path){case "zenario_skin_editor":c=!1;case "plugin_settings":a&&(f.md5=hex_md5((f.post.overrideSettings=JSON.stringify(this.getValues1D(!0,
!1)))+(f.post.overrideFrameworkAndCSS=JSON.stringify(this.getValues1D(!1,!0,!1,!0,!0,["this_css_tab","all_css_tab","framework_tab"])))));break;default:return!1}b=b||this.tuix&&this.tuix.key&&this.tuix.key.slotName;e=e||this.tuix&&this.tuix.key&&this.tuix.key.instanceId||g.slots&&g.slots[b]&&g.slots[b].instanceId;b&&zenario_conductor._e(b)&&(l=zenario_conductor._re(b,"refresh",l));l.cVersion=g.cVersion;if(c){if(!b||!e)return!1;c=h._gGSD(b);var m;a=c&&c.cssClass&&c.cssClass.s(" ")||[];l.method_call=
"showSingleSlot";l.fakeLayout=1;l.grid_columns=c.columns;l.grid_container=c.container;this.previewSlotWidth=c.pxWidth;this.previewSlotWidthInfo=c.widthInfo;l.grid_pxWidth=this.previewWidth&&!d?this.previewWidth:this.previewSlotWidth;l.grid_cssClass="";for(m in a)w(a,m)&&(d=a[m],"alpha"==d||"omega"==d||d.m(/^span[\d_]*$/)||(l.grid_cssClass+=d+" "))}else l._show_page_preview=1;b&&(l.slotName=b);e&&(l.instanceId=e);f.url=g._lTI(g.cID,g.cType,l);return f};e.addExtraAttsForTextFields=function(a,c){this.hasPreviewWindow&&
(c.onkeyup=(c.onkeyup||"")+" "+this.globalName+".updatePreview();")};e.fieldChange=function(a,c){this.updatePreview(750);v(x).fieldChange.call(this,a,c)};e.updatePreview=function(a){var c=this;c.hasPreviewWindow&&!c.previewHidden&&g._aADINS("fabUpdatePreview",function(){var a=c.pluginPreviewDetails(!0);a&&c.previewMD5!=a.md5&&(c.previewMD5=a.md5,c.previewPost=a.post,c.submitPreview(a))},a||1E3)};var F=0;e.submitPreview=function(a,c,d){c=c||$("#zenario_fabPreview");d=d||"zenario_fabPreviewFrame";var b=
"zenario_previewFrame"+ ++F,e=c.find("."+d).not(".beingRemoved");d=$(p._ht("iframe","id",b,"name",b,"class",d));var f=e[0]&&e[0].contentDocument;if(f=1*(f&&$(f).scrollTop()))a.url+="&_scroll_to="+f;e[0]&&(e.width(e.width()).height(e.height()).attr("id","").attr("name","").addClass("beingRemoved"),setTimeout(function(){e.fadeOut(600,function(){e.remove()})},400));c.append(d);this.showPreviewViaPost(a,b)};e.showPreviewViaPost=function(a,c){$(p._fo("action",a.url,"method","post","target",c,p._i("name",
"overrideSettings","value",a.post.overrideSettings)+p._i("name","overrideFrameworkAndCSS","value",a.post.overrideFrameworkAndCSS))).appendTo("body").hide().submit().remove()};e.showPreviewInPopoutBox=function(a,c){var d=this,b,e,f=d.pluginPreviewDetails(!0,a,c);f&&(d.previewMD5=f.md5,d.previewPost=f.post,b=f.url+g._uR(f.post),b.length>=(g._bII()?2E3:4E3)&&(b="",e=function(){d.showPreviewViaPost(f,$("#cboxLoadedContent iframe")[0].name)}),$.colorbox({width:"95%",height:"90%",iframe:!0,preloading:!1,
open:!0,title:d.previewSlotWidthInfo||B.preview,className:"zenario_plugin_preview_popout_box",href:b,onComplete:e}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};e.editModeAlwaysOn=function(a){return!z(this.tuix.tabs[a].edit_mode.always_on)||q(this.tuix.tabs[a].edit_mode.always_on)||this.savedAndContinued(a)};e.editCancelEnabled=function(a){return this.tuix.tabs[a].edit_mode&&q(this.tuix.tabs[a].edit_mode.enabled)&&!this.editModeAlwaysOn(a)};e.revertEnabled=function(a){return this.tuix.tabs[a].edit_mode&&
q(this.tuix.tabs[a].edit_mode.enabled)&&this.editModeAlwaysOn(a)&&!this.savedAndContinued(a)&&(!z(this.tuix.tabs[a].edit_mode.enable_revert)&&this.tuix.key&&this.tuix.key.id||q(this.tuix.tabs[a].edit_mode.enable_revert))};e.savedAndContinued=function(a){return!1};e.editModeOnBox=function(){if(this.tuix&&this.tuix.tabs&&this.sortedTabs)for(var a in this.sortedTabs)if(w(this.sortedTabs,a)&&this.editModeOn(this.sortedTabs[a]))return!0;return!1};e.setData=function(a){this.setDataDiff(a)};e.sendStateToServer=
function(){return this.sendStateToServerDiff()};e.save=function(a,c,d){var b=this,e;b.loaded&&(e=b.getURL("save"))&&(b.saving||setTimeout(function(){b.saving=!0;b.differentTab=!0;b.loaded=!1;b.hideTab(!0);b.checkValues();var f={_save:!0,_confirm:a?1:"",_save_and_continue:c,_box:b.sendStateToServer()};q(b.tuix.download)||b.tuix.confirm&&q(b.tuix.confirm.download)?b.save2(g._nAA(b.getURL("save"),g._uR(f),!0),c,d):b.retryAJAX(e,f,!0,function(a){b.save2(a,c,d)},"saving")},100))};e.save2=function(a,c,
d){delete this.saving;var b=a&&a._sync&&a._sync.flags||{},e=m.init&&!A.zenarioOQuickMode&&!A.zenarioOSelectMode;b.close_with_message?(this.close(),e&&m._r(),h._sM(b.close_with_message)):b.reload_organizer&&e?(this.close(),h._tONT(b),p.uploading=!1,m._sWC("uploading",p.uploading),m._rePa(b.organizer_path)):b.open_admin_box&&C.init?(this.close(),C.open(b.open_admin_box)):b.go_to_url?(this.close(),h._tONT(b),g._gTU(g._aBP(b.go_to_url),!0)):b.valid?b.confirm?(this.load(a),this.sortTabs(),this.draw(),
this.showConfirm(c,d)):b.download?(h._dD(this.getURL("download"),{_download:1,_box:this.sendStateToServer()}),c&&(a=a.substr(15),this.load(a)),this.refreshParentAndClose(!0,c,d)):b.saved?(this.load(a),this.refreshParentAndClose(!1,c,d)):(this.close(),h._sM(a,!0,"error")):(this.load(a),this.sortTabs(),this.switchToATabWithErrors(),this.draw())};e.showConfirm=function(a,c){if(this.tuix&&this.tuix.confirm&&q(this.tuix.confirm.show)){var d=this.tuix.confirm.message;q(this.tuix.confirm.html)||(d=D(d,!0));
var b='<input type="button" class="submit_selected" value="'+this.tuix.confirm.button_message+'" onclick="'+this.globalName+".save(true, "+q(a)+", "+q(c)+');"/><input type="button" class="submit" value="'+this.tuix.confirm.cancel_button_message+'"/>';h._flBo(d,b,this.tuix.confirm.message_type||"none")}};e.dragDropTarget=function(){return this.get("zenario_fbAdminInner")};e.enableDragDropUpload=function(){var a=this.dragDropTarget();p._sHTML5UFDD(this.ajaxURL(),{fileUpload:1},!1,this.uploadCallback,
a);$(a).addClass("upload_enabled").removeClass("dragover")};e.disableDragDropUpload=function(){$(this.dragDropTarget()).removeClass("upload_enabled").removeClass("dragover").off("drop")};e.dragListeners=function(){return p._cDHTML5U()?"ondragover=\"$(this).addClass('dragover');\" ondragleave=\"$(this).removeClass('dragover');\"":""}},zenarioAF,zenarioABToolkit);

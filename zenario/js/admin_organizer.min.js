window.zenarioNewO=function(X,Y,Z){(function(a,M,g,W,l,m,da,ea,h,q,s,x,R,t,n){a.encapName="zenarioO";a.pageSize=50;a.getItemLinkTimeoutTime=7E3;a.yourWorkInProgressLastUpdateFrequency=6E4;a.yourWorkInProgressItemCount=10;a.numberOfAdvancedSearches=8;a.itemDoubleClickTime=500;a.searchDelayTime=700;a.firstLoaded=!1;a.defaultColumnWidth=150;a.columnsExtraSpacing=1;a.columnSpacing=1;a.columnPadding=10;a.columnWidths={xxsmall:45,xsmall:75,small:100,medium:150,large:225,xlarge:350,xxlarge:500};a.defaultPath=
"zenario__content/panels/content";a.defaultPathInIframePreload="loading_message/panel";a.open=function(a,c,d,e,f,l,k,z,g,n,h,q,t){Y||(Y="");Z||(Z='<div class="organizer_close_button"><a onclick="zenarioO.closeSelectMode();"></a></div>');var J=m.microTemplate("zenario_organizer",{topLeftHTML:Y,topRightHTML:Z});m.openBox(J,a,"sk"+X,c,d,e,f,l,k,z,g,n,h,q,t)};a.init=function(b){if(!a.map||b){m.showAJAXLoader();a.pageTitle=W.title;!l.browserIsIE(7)&&m.siteSettings.storekeeper_page_size&&m.siteSettings.storekeeper_page_size==
1*m.siteSettings.storekeeper_page_size&&(a.pageSize=Math.min(500,1*m.siteSettings.storekeeper_page_size));a.showLeftColumn=g.zenarioONotFull?!1:!0;a.setSearch(n);a.checkPrefs();try{if(m.openedInIframe&&self.parent&&self.parent.zenarioO&&self.parent.zenarioO.map&&self.parent.zenarioA.moduleCodeHash===m.moduleCodeHash&&self.parent.zenarioCSSJSVersionNumber===g.zenarioCSSJSVersionNumber){a.map=self.parent.zenarioO.map;a.init2();return}if(g.opener&&g.opener.zenarioO&&g.opener.zenarioO.map&&g.opener.zenarioA.moduleCodeHash===
m.moduleCodeHash&&g.opener.zenarioCSSJSVersionNumber===g.zenarioCSSJSVersionNumber){a.map=g.opener.zenarioO.map;a.init2();return}if(g.opener&&g.opener.get&&g.opener.get("zenario_sk_iframe")&&g.opener.get("zenario_sk_iframe").contentWindow&&g.opener.get("zenario_sk_iframe").contentWindow.zenarioO&&g.opener.get("zenario_sk_iframe").contentWindow.zenarioO.map&&g.opener.get("zenario_sk_iframe").contentWindow.zenarioA.moduleCodeHash===m.moduleCodeHash&&g.opener.get("zenario_sk_iframe").contentWindow.zenarioCSSJSVersionNumber===
g.zenarioCSSJSVersionNumber){a.map=g.opener.get("zenario_sk_iframe").contentWindow.zenarioO.map;a.init2();return}}catch(c){}var d=M+"zenario/admin/ajax.php?_json=1";(a.map=l.checkSessionStorage(d,{},!0))?a.init2():m.keepTrying(function(b){$.ajax({url:d,dataType:"text"}).fail(function(a,c,d){m.stopTrying(b)&&m.AJAXErrorHandler(a,c,d)}).done(function(c){m.stopTrying(b)&&(a.map=m.readData(c,d,{}))&&a.init2()})})}};a.init2=function(){a.lookForBranches(a.map);m.tooltips();a.createSortArrayTopLevel("sortedTopLevelItems");
a.setTopLevelItems();m.canDoHTML5Upload()&&(h("organizer_rightColumn").addEventListener("dragover",function(){$("#organizer_rightColumn").addClass("dragover")},!1),h("organizer_rightColumn").addEventListener("dragleave",function(){$("#organizer_rightColumn").removeClass("dragover")},!1));a.checkQueue()||m.openedInIframe||a.go()};a.prefs={};a.prefsChecksum="{}";a.previousPrefChecksums={"{}":!0};a.checkPrefs=function(){var b,c=M+"zenario/admin/quick_ajax.php?_manage_prefs=1",d=l.nonAsyncAJAX(c+"&_get_checksum=1",
!0,!1);return d&&d!=a.prefsChecksum&&!a.previousPrefChecksums[d]&&(b=l.nonAsyncAJAX(c+"&_load_prefs=1",!0,!0))&&b?(a.prefs=b,a.previousPrefChecksums[a.prefsChecksum=d]=!0,!1):!0};a.savePrefs=function(b){var c={_manage_prefs:1,_save_prefs:1,prefs:JSON.stringify(a.prefs)};a.previousPrefChecksums[a.prefsChecksum=c.checksum=hex_md5(c.prefs)]=!0;$.ajax({type:"POST",async:!b,dataType:"text",url:M+"zenario/admin/quick_ajax.php",data:c,success:function(a){a&&m.showMessage(a)}})};a.shortenPath=function(a){return a};
a.implodeKeys=function(a){var c="",d;for(d in a)l.has(a,d)&&(c+=(c?",":"")+d);return c};a.checkQueue=function(b){var c;if(c=a.checkQueueLength()){var d="",e=g.zenarioOQueue.shift();e.selectedItems&&(d=a.implodeKeys(e.selectedItems),a.selectedItems=e.selectedItems,a.saveSelection(!0));e.refinerName&&(e.refiner={name:e.refinerName,id:d});a.go(e.path,e.branch,e.refiner,!0,!--c,n,n,n,b);return!0}return!1};a.checkQueueLength=function(){return g.zenarioOQueue?g.zenarioOQueue.length:0};a.reloadOpeningInstanceIfRelevant=
function(b){a.checkQueueLength()||(b!=g.zenarioOOpeningPath||!g.zenarioOOpeningInstance&&"zenarioAT"!=g.zenarioOReloadOnChanges||(b="",g.zenarioOOpeningInstance&&(b=g.zenarioOOpeningInstance+"!_refresh="+(""+Math.random()).replace(".","")),"zenarioAT"==g.zenarioOReloadOnChanges&&(b+="&__zenario_reload_at__="+(""+Math.random()).replace(".","")),g.opener&&g.opener.zenario?g.opener.document.location.hash=b:g.parent&&g.parent.zenario&&(g.parent.document.location.hash=b)),"zenarioO"==g.zenarioOReloadOnChanges&&
g.parent&&g.parent.zenarioO&&g.parent.zenarioO.init&&g.parent.zenarioO.refresh())};a.pathNotAllowed=function(b){return b&&g.zenarioONotFull&&!1!==g.zenarioOMaxPath&&a.path==g.zenarioOMaxPath&&b.path!=a.path};a.goNum=0;a.loadNum=0;a.lastSuccessfulGoNum=0;a.go=function(b,c,d,e,f,p,k,z,w,Q,r){r||(a.lastActivity=Date.now());if(m.storekeeperWindow||m.checkIfBoxIsOpen("sk"+X)){if(m.uploading)return!1;if(a.map){e||(g.zenarioOQueue=!1);var t,S,J,v;if(r=b){var G=b.split("//"),D=G.length;if(2<D){z=n;for(var P,
A=0;A<D-1;A+=2){0==A?(k=a.getFromToFromLink(G[0]),g.zenarioOQueue=[{path:k.from,branch:-1}]):(k="/"==G[A].substr(0,1)?G[A].substr(1):P.to+"/"+G[A],k=a.getFromToFromLink(k),P.to!=k.from&&g.zenarioOQueue.push({path:k.from}));var F={};if(G[A+1]){var B=G[A+1].split(","),O;for(O in B)l.has(B,O)&&(F[B[O]]=!0)}B=!1;k.refiner&&(B=k.refiner);e=k.to;if(!e)return m.showMessage('The requested path "'+r+'" was not found in the system. If you have just updated or added files to the CMS, you will need to reload the page.',
n,"error",!1,!0),!1;A+2==D-1&&(e+="//"+G[A+2]);g.zenarioOQueue.push({path:e,branch:!0,selectedItems:F,refinerName:B});P=k}a.checkQueue(!0);return}2==D?(z=n,b=G[0],-1!=G[1].indexOf(",")?(J=G[1],v=t=!1):(z=G[1])?(D=z.length-1,"/"==z.substr(D)?(z=z.substr(0,D),v=!1):v=!0,t=S=!0):v=t=!1):(t=!1,v=z?S=!0:!1);b=a.shortenPath(b)}b||(b=g.zenarioONotFull?a.defaultPathInIframePreload:a.defaultPath,v=t=!1);if(!a.followPathOnMap(b))return m.showMessage('The requested path "'+r+'" was not found in the system. If you have just updated or added files to the CMS, you will need to reload the page.',
n,"error",!1,!0),!1;var V=++a.goNum;w||++a.loadNum;var E=!1;O=$.extend(!0,{},a.loadFromBranches(b,c,"filters"));var H=a.loadFromBranches(b,c,"searches"),C=a.loadFromBranches(b,c,"adv_searches");r=a.loadFromBranches(b,c,"open_items");var D=G=!1,I=b;d===n&&(d=a.loadRefiner(b,c));if(!d&&q(a.followPathOnMap(b,"refiner_required")))m.showMessage("A refiner was required, but none was set.",!0,error);else{var L={};P=a.branches.length-1;if(-1!==c){for(w=0;w<P;++w){var K=a.branches[w].refiners[a.branches[w+
1].from];K&&(L["refiner__"+K.name]=K.id)}if(K=a.branches[P].refiners[a.path])L["refiner__"+K.name]=K.id;d&&(L["refiner__"+d.name]=d.id)}d&&(G=a.followPathOnMap(b+"/refiners/"+d.name))&&((D=G.use_different_view_options_per_id_in_previous_refiner)&&L["refiner__"+D]!==n?I=b+"/refiners/"+D+"/"+L["refiner__"+D]:q(G.use_different_view_options_per_refiner_id)?I=b+"/refiners/"+d.name+"/"+d.id:q(G.use_different_view_options)&&(I=b+"/refiners/"+d.name));C&&a.prefs[I]&&a.prefs[I].adv_searches&&a.prefs[I].adv_searches[C]?
advancedSearchValues=a.prefs[I].adv_searches[C]:C=!1;var u=a.followPathOnMap(b,"default_sort_column");u||(u="name");var G=a.followPathOnMap(b,"db_items"),D=a.followPathOnMap(b,"reorder"),N=G&&!q(G.client_side),aa=D&&D.column?999:a.pageSize,T=M+"zenario/admin/ajax.php?_json=1&path="+b,y={},U={};P=!1;var ba=function(e){a.go2(b,T,y,I,c,V,u,aa,S,t,z,v,H,C,E,d,L,N,p,Q,e)};g.zenarioONotFull&&(g.zenarioOSelectMode?T+="&_select_mode=1":g.zenarioOQuickMode&&(T+="&_quick_mode=1"));e&&!f&&(y._queued=1);d!==
n&&(y.refinerId=d.id,y.refinerName=d.name,d.languageId&&(y.languageId=d.languageId));g.zenarioOCombineItem&&(y._combineItem=g.zenarioOCombineItem);for(var ca in L)l.has(L,ca)&&(y[ca]=L[ca]);if(N||a.CSVExport){y._limit=aa;if(a.refreshToPage)y._start=(a.refreshToPage-1)*aa;else if(y._start=0,J)y._item=J;else if(S&&z)y._item=z;else if(S)y._item=S;else if(p)if("object"==typeof p&&p.selectedItemFromLastPanel)y._item=p.selectedItemFromLastPanel;else if(e=a.getSelectedItemFromLastPanel(b))y._item=e;D&&D.column?
y._sort_col=D.column:a.prefs[I]&&a.prefs[I].sortBy?(y._sort_col=a.prefs[I].sortBy,y._sort_desc=a.prefs[I].sortDesc?1:0):(y._sort_col=u,y._sort_desc=q(a.followPathOnMap(b,"default_sort_desc")))}if(O!==n){for(B in O)l.has(O,B)&&(a.filterSetOnColumn(B,O)?E=!0:delete O[B]);y._filters=JSON.stringify(O)}if(N||a.CSVExport)H!==n&&(y._search=H),C&&(P=!0,U._adv_search=JSON.stringify(advancedSearchValues));D&&D.lazy_load&&(z&&!r?y._openItemInHierarchy=z:y._openItemsInHierarchy=r?a.implodeKeys(r):"");if(a.CSVExport){a.CSVExport=
n;a.refreshToPage=n;delete y._start;delete y._limit;U._shownColumnsInCSV=b===a.path?a.getShownColumns(I,u,a.focus.columns):a.getShownColumns(I,u,a.followPathOnMap(b,"columns"));if(a.prefs[a.voPath]&&a.prefs[a.voPath].shownColumnsInCSV)for(B in a.prefs[a.voPath].shownColumnsInCSV)l.has(a.prefs[a.voPath].shownColumnsInCSV,B)&&(U._shownColumnsInCSV[B]=a.prefs[a.voPath].shownColumnsInCSV[B]);U._shownColumnsInCSV=JSON.stringify(U._shownColumnsInCSV);U._sortedColumns=JSON.stringify(x(a.prefs[a.voPath].sortedColumns,
a.sortedColumns));h("zenario_iframe_form").action=T+l.urlRequest(y)+"&_csv=1";k="";for(A in U)l.has(U,A)&&(k+='<input type="hidden" name="'+s(A)+'" value="'+s(U[A])+'"/>');h("zenario_iframe_form").innerHTML=k;h("zenario_iframe_form").submit()}else a.stopRefreshing(),b!=a.defaultPathInIframePreload&&(h("organizer_preloader_circle").style.display="block"),g.zenarioOFirstLoad!==n&&(g.zenarioOFirstLoad?g.zenarioOFirstLoad=!1:a.reloadOpeningInstanceIfRelevant(b)),P?m.keepTrying(function(a){$.ajax({url:T+
l.urlRequest(y),data:U,type:"POST",dataType:"text"}).fail(function(b,c,d){m.stopTrying(a)&&m.AJAXErrorHandler(b,c,d)}).done(function(b){m.stopTrying(a)&&(b=m.readData(b))&&ba(b)})}):G&&!k&&(F=l.checkSessionStorage(T,y,!0,a.loadNum))?ba(F):m.keepTrying(function(a){$.ajax({url:T,data:y,dataType:"text"}).fail(function(b,c,d){m.stopTrying(a)&&m.AJAXErrorHandler(b,c,d)}).done(function(b){m.stopTrying(a)&&(b=m.readData(b,T,y))&&ba(b)})})}}else g.zenarioONotFull||(g.zenarioOQueue=[{path:b,branch:-1}])}};
a.go2=function(b,c,d,e,f,p,k,z,g,h,r,t,s,J,v,x,D,P,A,F,B){B&&B.comment!==n&&console.log(B.comment);if((m.storekeeperWindow||m.checkIfBoxIsOpen("sk"+X))&&p==a.goNum){a.stopRefreshing();if(a.voPath!=e||!0===f||-1===f)a.scrollToPageTop=!0;g=a.path;var O,V;a.focus&&(O=a.focus.title,V=q(a.focus.no_return));a.url=c+l.urlRequest(d);a.lastRequests=d;a.path=b;a.voPath=e;a.defaultSortColumn=k;a.thisPageSize=z;a.filtersSet=v;a.server_side=P;a.inCloseUpView=h;a.itemToSelect=r;a.selectAnItem=t;a.advancedSearch=
J;a.markIfViewIsFiltered();a.prefs[e]||(a.prefs[e]={});-1===f?a.resetBranches():f&&a.branch(b,g,O,V);a.saveRefiner(x);a.lastRefiners=D;a.itemHierarchy={};delete a.focus;a.focus=B;a.focus.__item_hierarchy__&&(a.itemHierarchy=a.focus.__item_hierarchy__);(a.labelFormat=a.focus.label_format_for_grid_view)||(a.labelFormat="[["+a.defaultSortColumn+"]]");a.popoutLabelFormat=a.focus.label_format_for_popouts;a.boldColsInListView=a.focus.bold_columns_in_list_view||a.focus.label_format_for_picked_items||a.labelFormat;
a.focus.columns||(a.focus.columns={name:{title:"Name"}});(c=a.followPathOnMap(b,"reorder"))&&c.column?(a.sortBy=c.column,a.sortDesc=!1):a.prefs[e].sortBy&&a.focus.columns[a.prefs[e].sortBy]?(a.sortBy=a.prefs[e].sortBy,a.sortDesc=a.prefs[e].sortDesc):((k=a.followPathOnMap(b,"default_sort_column"))?a.sortBy=k:a.sortBy=a.defaultSortColumn,a.sortDesc=q(a.followPathOnMap(b,"default_sort_desc")));a.focus.__item_hierarchy__?a.view_mode="hierarchy":(a.view_mode=a.focus.force_view_mode?a.focus.force_view_mode:
a.prefs[e].view_mode?a.prefs[e].view_mode:a.focus.view_mode?a.focus.view_mode:"list","grid"!==a.view_mode&&"list"!==a.view_mode&&(a.view_mode="list"));a.createSortArray("sortedColumns","columns","ord");a.createSortArray("sortedItemButtons","item_buttons","ord");a.createSortArray("sortedInlineButtons","inline_buttons","ord");a.createSortArray("sortedCollectionButtons","collection_buttons","ord");a.createSortArray("sortedQuickFilterButtons","quick_filter_buttons","ord");a.shownColumns=a.getShownColumns(e,
k,a.focus.columns);if(a.prefs[e].sortedColumns){c={};for(var E in a.prefs[e].sortedColumns)if(l.has(a.prefs[e].sortedColumns,E)){var H=a.prefs[e].sortedColumns[E];c[H]=E}b=!1;for(E in a.sortedColumns)if(l.has(a.sortedColumns,E)){H=a.sortedColumns[E];if(a.isShowableColumn(H,!1,!0)&&c[H]===n){b=c[b];b=b===n?0:1*b+1;a.prefs[e].sortedColumns.splice(b,0,H);for(var C in c)l.has(c,C)&&c[C]>=b&&++c[C];c[H]=b}b=H}a.sortedColumns=a.prefs[e].sortedColumns}a.focus.items&&1==a.focus.items.count&&q(a.focus.allow_bypass)?
a.branches[a.branches.length-1].bypasses[a.path]=!0:delete a.branches[a.branches.length-1].bypasses[a.path];if(!a.checkQueue(!0)){if(a.focus.items&&1==a.focus.items.count&&q(a.focus.allow_bypass))if(A){if(!1!==a.getBackButtonTitle()){a.back();return}}else{if(a.focus.items)for(var I in a.focus.items)if(l.has(a.focus.items,I)&&!a.isInfoTag(I)){a.selectedItems={};a.selectedItems[I]=!0;a.saveSelection();if(a.itemDoubleClickAction(I))return;break}}else if((!a.focus.items||!a.focus.items.count)&&q(a.focus.return_if_empty)&&
!1!==a.getBackButtonTitle()){a.back();return}e={};E={};var L;for(H in a.focus.columns)if(l.has(a.focus.columns,H)&&a.isShowableColumn(H))if("menu_item"==a.focus.columns[H].item_link)for(var K in a.focus.items){if(l.has(a.focus.items,K)&&!a.isInfoTag(K)&&(L=a.focus.items[K][H])&&L==1*L){var u=a.itemLanguage(K);e[u]=e[u]?e[u]+",":"";e[u]+=L}}else if("content_item"==a.focus.columns[H].item_link||"content_item_or_url"==a.focus.columns[H].item_link)for(K in a.focus.items)if(l.has(a.focus.items,K)&&!a.isInfoTag(K)&&
(L=a.focus.items[K][H])&&(C=L.split("_"),C[0]&&"null"!=C[0]&&C[0]===C[0].replace(/\W/,"")&&C[1]&&C[1]==1*C[1])){var u=a.itemLanguage(K),N=a.itemParent(K);E[u]||(E[u]={});E[u][N]=E[u][N]?E[u][N]+",":"";E[u][N]+=C[0]+"_"+C[1]}a.menuItems={};a.contentItems={};a.itemLinkRequestsLeft=0;a.shallowLinks={content_item:"zenario__content/panels/content",content_item_or_url:"zenario__content/panels/content",menu_item:"zenario__menu/panels/menu_nodes"};for(u in E)if(l.has(E,u))for(N in E)l.has(E,N)&&E[u][N]&&
(a.contentItems[u]||(a.contentItems[u]={}),a.contentItems[u][N]||(a.contentItems[u][N]={}),c=M+"zenario/admin/ajax.php?_json=1&path="+a.shallowLinks.content_item+"&_get_item_links="+E[u][N]+"&languageId="+encodeURIComponent(u),(a.contentItems[u][N]=l.checkSessionStorage(c,{},!0,a.loadNum))||(++a.itemLinkRequestsLeft,a.getDataHack(c,u,function(b,c,d){p==a.goNum&&(a.contentItems[c][N]=m.readData(d,b,{}),--a.itemLinkRequestsLeft||a.go3(p,s,A,F))})));for(u in e)l.has(e,u)&&e[u]&&(a.menuItems[u]||(a.menuItems[u]=
{}),c=M+"zenario/admin/ajax.php?_json=1&path="+a.shallowLinks.menu_item+"&_get_item_links="+e[u]+"&languageId="+encodeURIComponent(u)+"&refinerName=language&refinerId="+encodeURIComponent(u)+"&refiner__language="+encodeURIComponent(u),(a.menuItems[u]=l.checkSessionStorage(c,{},!0,a.loadNum))||(++a.itemLinkRequestsLeft,a.getDataHack(c,u,function(b,c,d){p==a.goNum&&(a.menuItems[c]=m.readData(d,b,{}),--a.itemLinkRequestsLeft||a.go3(p,s,A,F))})));a.itemLinkRequestsLeft?(a.go3Timeout&&clearTimeout(a.go3Timeout),
a.go3Timeout=setTimeout(function(){a.go3(p,s,A,F)},a.getItemLinkTimeoutTime)):a.go3(p,s,A,F)}}};a.getDataHack=function(a,c,d){setTimeout(function(){var e=l.nonAsyncAJAX(a,2E3<a.length);d(a,c,e)},1)};a.go3=function(b,c,d,e){(m.storekeeperWindow||m.checkIfBoxIsOpen("sk"+X))&&b==a.goNum&&(a.lastSuccessfulGoNum=++a.goNum,a.go3Timeout&&clearTimeout(a.go3Timeout),h("organizer_preloader_circle").style.display="none",a.setTopLevelItems(),!d&&a.focus.popout_message&&(a.refreshToPage!==n&&a.focus.popout_message==
a.lastPopoutMessage||m.showMessage(a.focus.popout_message,!0,!1),a.lastPopoutMessage=a.focus.popout_message),a.refreshToPage===n&&a.setSearch(c),a.searchAndSortItems(),a.firstLoaded||(a.firstLoaded=!0,m.hideAJAXLoader()),a.setWrapperClass("loaded",!0),a.setWrapperClass("filters_set",a.filtersSet),e&&e())};a.setWrapperClass=function(a,c){$("#organizer__box_inner").removeClass("organizer_"+(c?"not_":"")+a).addClass("organizer_"+(c?"":"not_")+a)};a.itemLanguage=function(b){return b&&a.focus&&a.focus.items&&
a.focus.items[b]&&(!a.focus.items[b].css_class||-1==(""+a.focus.items[b].css_class).indexOf("ghost"))&&a.focus.items[b].language_id?a.focus.items[b].language_id:a.focus&&a.focus.key?x(a.focus.key.languageId,a.focus.key.language):""};a.itemParent=function(b){return b&&a.focus&&a.focus.items&&a.focus.items[b]&&a.focus.db_items&&a.focus.db_items.hierarchy_column?a.focus.items[b][a.focus.db_items.hierarchy_column]||"":""};a.getShownColumns=function(b,c,d){var e=!1,f=!1,p={};a.prefs&&a.prefs[b]&&a.prefs[b].shownColumns&&
(p=a.prefs[b].shownColumns);if(d)for(var k in d)l.has(d,k)&&(e||(e=k),q(d[k].always_show)?f=p[k]=!0:p[k]!==n?p[k]&&(f=!0):q(d[k].show_by_default)&&(f=p[k]=!0));f||(p[x(e,c)]=!0);return p};a.scrollToPageTop=!1;a.nextPage=function(){if(a.lockPageClicks)return!1;a.page<a.pageCount&&(a.scrollToPageTop=!0,a.goToPage(a.page+1))};a.prevPage=function(){if(a.lockPageClicks)return!1;1<a.page&&(a.scrollToPageTop=!0,a.goToPage(a.page-1))};a.goToPage=function(b){if(m.uploading||a.changingHierarchy)return!1;a.lockPageClicks=
!0;a.inCloseUpView=!1;a.server_side?a.refreshAndShowPage(b):a.showPage(b)};a.refreshAndShowPage=function(b){a.page=x(b,1);a.refresh(!1,!0)};a.showPage=function(b){a.page=b;a.drawPanel()};a.searchAndSortItems=function(){var b,c,d;a.searchTerm===n||h("organizer_search");a.nonSearchMatches={};if(a.server_side)a.searchedItems=a.focus.__item_sort_order__,a.searchMatches=a.focus.items.count;else if(a.createSortArray("sortedItems","items",a.sortBy,a.sortDesc),a.server_side||a.searchTerm===n||"hidden"==h("organizer_search").style.visibility)a.searchedItems=
a.sortedItems,a.searchMatches=a.focus.items?a.focus.items.count:n;else{a.searchedItems={};a.searchMatches=0;var e=[],f={},p=a.searchTerm.toLowerCase?a.searchTerm.toLowerCase():p,k;for(k in a.sortedItems)if(l.has(a.sortedItems,k)){b=a.sortedItems[k];c=!1;for(var z in a.focus.columns)if(l.has(a.focus.columns,z)&&!a.isInfoTag(z)&&q(a.focus.columns[z].searchable)&&(value=a.columnValue(b,z,!0),value==(d=1*value)?c=d==a.searchTerm:value&&(c=-1!==value.toLowerCase().indexOf(p)),c)){e.push(b);f[b]=!0;break}}if(a.focus.__item_hierarchy__)for(k=
0;k<e.length;++k)b=e[k],a.itemHierarchy[b]&&!f[a.itemHierarchy[b]]&&(e.push(a.itemHierarchy[b]),f[a.itemHierarchy[b]]=!0,a.nonSearchMatches[a.itemHierarchy[b]]=!0);for(k in a.sortedItems)l.has(a.sortedItems,k)&&(b=a.sortedItems[k],f[b]&&(a.searchedItems[a.searchMatches++]=a.sortedItems[k]))}a.itemsOrder={};for(k in a.searchedItems)l.has(a.searchedItems,k)&&!a.isInfoTag(k)&&(b=a.searchedItems[k],a.itemsOrder[b]=1*k);c=1;if(a.server_side&&a.server_side)c=x(a.focus.__page__,a.refreshToPage,1);else if(a.refreshToPage!==
n)c=a.refreshToPage;else if(a.itemToSelect||(a.itemToSelect=a.loadSelection()),b=a.itemsOrder[a.itemToSelect])c=Math.floor(b/a.thisPageSize)+1;a.itemHierarchyArray={0:[]};if(a.focus.__item_hierarchy__)for(k in a.itemHierarchy=a.focus.__item_hierarchy__,a.searchedItems)l.has(a.searchedItems,k)&&(b=a.searchedItems[k],a.itemHierarchy[b]!==n?(a.itemHierarchyArray[a.itemHierarchy[b]]||(a.itemHierarchyArray[a.itemHierarchy[b]]=[]),a.itemHierarchyArray[a.itemHierarchy[b]].push(b)):a.itemHierarchyArray[0].push(b));
delete a.refreshToPage;a.showPage(c)};a.drawPanel=function(){var b,c="disable_grid_view disable_list_view",d=!1,e=$("#organizer_rightColumnContent"),f=e.scrollTop(),p=e.scrollLeft();a.itemButtonsExist=!1;a.changingHierarchy=!1;a.setWrapperClass("changing_hierarchy",a.changingHierarchy);$("#organizer_applyButton").unbind();if(a.focus.html||a.focus.url)d="html";else{c=a.view_mode+"_view";if(a.focus.__item_hierarchy__||q(a.focus.disable_grid_view)||a.focus.force_view_mode&&"grid"!=a.focus.force_view_mode)c+=
" disable_grid_view";if(a.focus.__item_hierarchy__||q(a.focus.disable_list_view)||a.focus.force_view_mode&&"list"!=a.focus.force_view_mode)c+=" disable_list_view";a.reorderingUsingOldMethod&&$("#organizer_items_wrapper").sortable("destroy");a.reordering=!1;a.reorderingUsingOldMethod=!1;a.reorderingUsingNewMethod=!1;a.changingHierarchyView=!1;if(a.focus.item_buttons)for(b in a.focus.item_buttons)if(l.has(a.focus.item_buttons,b)&&!a.isInfoTag(b)){a.itemButtonsExist=!0;break}a.loadSelection();if(g.zenarioOSelectMode)a.multipleSelectEnabled=
g.zenarioOMultipleSelect;else if(a.multipleSelectEnabled=!1,a.focus.item_buttons)for(b in a.focus.item_buttons)if(l.has(a.focus.item_buttons,b)&&!a.isInfoTag(b)&&q(a.focus.item_buttons[b].multiple_select)&&!a.checkButtonHidden(a.focus.item_buttons[b])){a.multipleSelectEnabled=!0;break}if(a.inCloseUpView||a.selectAnItem)a.itemsOrder[a.itemToSelect]!==n?(a.selectedItems={},a.selectedItems[a.itemToSelect]=!0,a.selectAnItem&&(a.inCloseUpView=!1)):(a.selectedItems={},a.inCloseUpView=!1);a.focus.reorder&&
a.focus.reorder.hierarchy_view_mode&&!g.zenarioOSelectMode&&!a.filteredView&&(a.changingHierarchyView=!0);a.focus.reorder&&a.focus.reorder.column&&!g.zenarioOSelectMode&&!a.filteredView&&("hierarchy"==a.view_mode?"parent_ids_and_ordinals"==a.focus.reorder.hierarchy_view_mode&&(a.reordering=!0,a.reorderingUsingNewMethod=!0):(a.reordering=!0,a.reorderingUsingOldMethod=!0,c+=" reordering "+a.view_mode+"_view_reordering"));if(e=h("organizer_debug_button"))e.className=a.refiner?a.refiner.id?"zenario_debug zenario_debug_with_refiner_and_id":
"zenario_debug zenario_debug_with_refiner_and_no_id":"zenario_debug zenario_debug_with_no_refiner"}b=a.itemToSelect;a.selectAnItem=!1;a.lastClicked=!1;a.CSVExportEnabled=!1;if(d)a.drawBespokePanel(),a.clearUpload();else{a.drawRegularPanel();a.setPanelTitle();a.setPanelItems();a.setItemCount();a.setTrash();a.saveSelection();a.setPages();a.setButtons();a.setQuickFilters();var k=$("#organizer_rightColumnContent"),z=$("#organizer_rightColumnContent .organizer_header");z.length&&k.scroll(function(){z.css("top",
k.scrollTop())});h("organizer_viewModeSelected").className=c}a.setBackButton();!d&&a.reorderingUsingOldMethod&&$("#organizer_items_wrapper").sortable({opacity:0.8,start:function(){a.closeSlidedownView()},stop:function(b){b=$("#organizer_items_wrapper").sortable("toArray",{attribute:"data-id"});var c=[],d=[],e={},f="",k,p;for(p=b.length;0<=p;--p)""!==b[p]&&b[p]!==n||b.splice(p,1);for(k in b)l.has(b,k)&&(p=b[k],e[p]=!0);for(k in a.searchedItems)l.has(a.searchedItems,k)&&(p=a.searchedItems[k],e[p]&&
(c.push(p),d.push(a.focus.items[p][a.focus.reorder.column])));e=a.getKey();for(k in b)l.has(b,k)&&(p=b[k],p!=c[k]&&(f+=(f?",":"")+p,e["item__"+p]=d[k]));e.reorder=!0;e.id=f;k="zenario/ajax.php?__pluginClassName__="+a.focus.reorder.class_name+"&__path__="+a.path+"&method_call=handleOrganizerPanelAJAX";delete l.rev;$.post(M+k,e,function(){a.refresh()})}});a.size(!0);if(!d){e=$("#organizer_rightColumnContent");if(a.scrollToPageTop||!f)f=0;if(a.scrollToPageTop||!p)p=0;e.scrollTop(f);e.scrollLeft(p);a.refreshIsPeriodic||
(b||(b=a.getKeyId(!0)),b&&a.scrollToItem(b,500))}a.lockPageClicks=!1;a.scrollToPageTop=!1;a.scrollToPageBottom=!1;a.refreshIsPeriodic=!1;l.browserIsChrome()&&setTimeout(function(){var a=$("#organizer_rightColumnContent");a.css("padding-right","1px");setTimeout(function(){a.css("padding-right","0px")},1)},1)};a.scrollToItem=function(a,c){var d,e=$("#organizer_rightColumnContent");return(d=$(h("organizer_item_"+a)).position())?(d=d.top+e.scrollTop(),e.stop().animate({scrollTop:Math.max(0,d-Math.floor(e.height()/
4))},c),!0):!1};a.stripBodyPanelClasses=function(){$("body").removeClass("zenario_organizer_bespoke_panel").removeClass("zenario_organizer_bespoke_html_panel").removeClass("zenario_organizer_bespoke_url_panel")};a.drawRegularPanel=function(){a.stripBodyPanelClasses();$("body").addClass("zenario_organizer_regular_panel");h("organizer_rightColumnInner").innerHTML=m.microTemplate("zenario_organizer_panel",{})};a.drawBespokePanel=function(){a.stripBodyPanelClasses();$("body").addClass("zenario_organizer_bespoke_panel");
$("#organizer_quickFilter").hide().html("");a.focus.html?($("body").addClass("zenario_organizer_bespoke_html_panel"),h("organizer_rightColumnInner").innerHTML=a.focus.html):a.focus.url&&($("body").addClass("zenario_organizer_bespoke_url_panel"),h("organizer_rightColumnInner").innerHTML=l.nonAsyncAJAX(l.addBasePath(a.focus.url)));a.setHash()};a.back=function(b){if(m.uploading||a.changingHierarchy)return!1;var c={},d={};if(!1!==a.getFromLastPanel(a.branches.length-1,a.path,"title",!1,b,!1,c)){d.selectedItemFromLastPanel=
a.getSelectedItemFromLastPanel(c.path);a.deselectAllItems();a.clearRefiner();a.clearSearch();for(b=c.pops;0<b;--b)a.branches.pop();a.go(c.path,n,n,n,n,d)}};a.knownBranches={};a.lookForBranches=function(b,c,d,e){b._path_here&&(d=b._path_here);for(var f in b)if(l.has(b,f)&&b[f]&&"object"==typeof b[f]){var p=c?c+"/"+f:f,k=!1;e!==n&&b[f].link&&"object"==typeof b[f].link&&("nav"!=e?b[f].link.branch=k=!0:(b[f].link.branch=k=!1,b[f].link.refiner&&b[f].link.path&&-1==b[f].link.path.indexOf("//")&&(b[f].link.path+=
"/refiners/"+b[f].link.refiner+"////")));"refiners"==e&&"object"==typeof b[f]&&b[f].link===n&&(b[f].link={path:d,refiner:f},b[f].link.branch=k=!0);k&&(a.knownBranches[d]||(a.knownBranches[d]={}),a.knownBranches[d][b[f].link.path]||(a.knownBranches[d][b[f].link.path]={}),a.knownBranches[d][b[f].link.path][x(b[f].link.refiner,1)]&&"item"==(""+a.knownBranches[d][b[f].link.path][x(b[f].link.refiner,1)]).substr(-4)||(a.knownBranches[d][b[f].link.path][x(b[f].link.refiner,1)]=a.shortenPath(p)));a.lookForBranches(b[f],
p,d,f)}};a.resetBranches=function(){a.branches=[{bypasses:{},filters:{},refiners:{},searches:{},adv_searches:{},selected_items:{},open_items:{}}]};a.resetBranches();a.branch=function(b,c,d,e){b=a.shortenPath(b);a.branches[a.branches.length]={from:c,to:b,title:d,no_return:e,bypasses:{},filters:{},refiners:{},searches:{},adv_searches:{},selected_items:{},open_items:{}}};a.setHash=function(){if(!g.zenarioONotFull){if(!l.browserIsIE(7)){var b=a.getHash();W.location.hash=b;l.currentHash=W.location.hash}m.homeLink&&
h("home_page_button_link")&&(h("home_page_button_link").href=a.parseReturnLink(m.homeLink));m.backLink&&h("last_page_button_link")&&(h("last_page_button_link").href=a.parseReturnLink(m.backLink))}};a.getHash=function(b,c){var d="",e=a.path,f,p,k,z=!1;f=!1;var g="";if(!b){for(var m in a.selectedItems)if(l.has(a.selectedItems,m)&&a.selectedItems[m])if(!1===f)f=m;else{f=!1;break}f&&(g=a.inCloseUpView?f+"/":f)}for(m in a.branches)if(l.has(a.branches,m)&&0<m&&(c===n||m<=c))if(f=a.branches[m],f.to&&a.knownBranches[f.from]&&
a.knownBranches[f.from][f.to]&&(p=a.knownBranches[f.from][f.to][f.refiners[f.to]?f.refiners[f.to].name:1])){p=a.shortenPath(p);if(k){if(p.substr(0,k.length)==k)p=a.shortenPath(p.substr(k.length+1));else{z=!0;break}d+="//"}d+=p+"//"+a.implodeKeys(a.branches[m-1].selected_items[f.from]);k=f.to}else{z=!0;break}!z&&k&&e.substr(0,k.length)==k&&(e=d+"//"+a.shortenPath(e.substr(k.length+1)));g&&(e="//"==l.rightHandedSubStr(e,2)?e+g:"/"==l.rightHandedSubStr(e,1)?e+("/"+g):e+("//"+g));return e};a.searchOnClick=
function(a){};a.searchOnKeyUp=function(b){a.doSearchAfterDelay&&clearTimeout(a.doSearchAfterDelay);a.doSearchAfterDelay=setTimeout(function(){a.doSearch(h("organizer_search_term"))},a.searchDelayTime)};a.searchOnChange=function(b){a.server_side&&a.doSearchAfterDelay&&(clearTimeout(a.doSearchAfterDelay),a.doSearch(b))};a.markIfViewIsFiltered=function(){a.filteredView=a.searchTerm!==n||a.filtersSet||a.advancedSearch};a.doSearch=function(b){""===b.value?b=n:(b=b.value,b==1*b&&(b*=1));b!==a.searchTerm&&
(a.searchTerm=b,a.markIfViewIsFiltered(),a.saveSearch(),a.runSearch())};a.runSearch=function(){if(m.uploading||a.changingHierarchy)return!1;a.lockPageClicks=!0;a.inCloseUpView=!1;a.server_side?a.refreshAndShowPage():a.searchAndSortItems()};a.itemClicked=!1;a.lastClicked=!1;a.selectedItems={};a.openItemsInHierarchy={};a.itemClickTimeout=!1;a.itemClick=function(b,c,d,e){a.itemClickTimeout&&clearTimeout(a.itemClickTimeout);a.itemClicked=!0;d&&l.stop(c);if(!a.focus||!a.focus.items[b])return!1;if(e&&a.itemDoubleClickLink(b))return a.itemClickTimeout=
setTimeout(function(){a.itemClick(b,c,d)},300),!1;a.multipleSelectEnabled&&(c||event).shiftKey&&a.lastClicked?a.selectItemRange(b,a.lastClicked):a.multipleSelectEnabled&&d?(a.selectItem(b,!a.selectedItems[b]),a.toggleSelectAllCheckbox(),a.lastClicked=b):!a.multipleSelectEnabled&&d&&a.selectedItems[b]?(a.deselectAllItems(),a.toggleSelectAllCheckbox(),a.lastClicked=b):a.selectSingleItem(b);d&&setTimeout(function(){$(h("organizer_itemcheckbox_"+b)).prop("checked",!!a.selectedItems[b])},1);a.setButtons(!0);
a.saveSelection();return!1};a.itemBGClick=function(){a.itemClicked=!1};a.allItemsSelected=function(){if(0==a.shownItemsLength)return!1;var b,c=0;for(b in a.selectedItems)l.has(a.selectedItems,b)&&++c;return c==a.shownItemsLength};a.toggleSelectAll=function(){a.itemClickTimeout&&clearTimeout(a.itemClickTimeout);a.allItemsSelected()?(a.deselectAllItems(),a.setButtons(!0),a.saveSelection()):a.selectAll()};a.toggleSelectAllCheckbox=function(b){a.allItemsSelected()?$("#organizer_checkbox_col input").prop("checked",
!0):$("#organizer_checkbox_col input").prop("checked",!1);b||a.closeSlidedownView()};a.selectSingleItem=function(b,c){a.deselectAllItems();a.selectItem(b,!0);a.toggleSelectAllCheckbox(c);a.lastClicked=b};a.selectItem=function(b,c){c?(a.selectedItems[b]=!0,$(h("organizer_itemcheckbox_"+b)).prop("checked",!0),$(h("organizer_item_"+b)).addClass("organizer_selected")):(delete a.selectedItems[b],$(h("organizer_itemcheckbox_"+b)).prop("checked",!1),$(h("organizer_item_"+b)).removeClass("organizer_selected"))};
a.selectItemRange=function(b,c){var d=b===n,e;for(e in a.searchedItems)if(l.has(a.searchedItems,e)&&!a.isInfoTag(e)){var f=a.searchedItems[e];if(a.shownItems&&a.shownItems[f])if(a.selectItem(f,d||f===b||f===c),f===b&&f===c)d=!1;else if(f===b||f===c)d=!d}a.toggleSelectAllCheckbox()};a.selectAll=function(){a.selectItemRange();a.setButtons(!0);a.saveSelection()};a.deselectAllItems=function(){a.selectItemRange(-1)};a.saveSelection=function(b){a.recordOpenItems();a.saveOpenItems();a.branches[a.branches.length-
1].selected_items[a.path]=a.selectedItems;b||a.checkQueueLength()||a.setHash()};a.saveOpenItems=function(){a.branches[a.branches.length-1].open_items[a.path]=a.openItemsInHierarchy};a.recordOpenItems=function(){if("hierarchy"==a.view_mode&&a.itemHierarchyArray){a.openItemsInHierarchy={};var b,c;for(c in a.itemHierarchyArray)l.has(a.itemHierarchyArray,c)&&0!=c&&(b=a.itemHierarchyArray[c][0],b!==n&&$(h("organizer_item_"+b)).is(":visible")&&(a.openItemsInHierarchy[c]=!0))}};a.loadSelection=function(){var b=
0,c=!1;if(a.branches[a.branches.length-1].selected_items[a.path]){a.selectedItems=a.branches[a.branches.length-1].selected_items[a.path];for(var d in a.selectedItems)l.has(a.selectedItems,d)&&(a.focus.items[d]?1==++b&&(c=d):delete a.selectedItems[d])}else a.selectedItems={};a.openItemsInHierarchy=a.branches[a.branches.length-1].open_items[a.path]?a.branches[a.branches.length-1].open_items[a.path]:{};!a.lastClicked&&c&&(a.lastClicked=c);!a.multipleSelectEnabled&&1<b&&(a.selectedItems={});return a.lastClicked=
c};a.parseReturnLink=function(a,c){c===n&&(c=a&&l.currentHash&&!l.browserIsIE(7)?"zenario_sk_return="+l.currentHash.replace("#",""):"");return l.addBasePath((""+a).replace("zenario_sk_return=navigation_path",c))};a.saveRefiner=function(b){a.branches[a.branches.length-1].refiners[a.path]=a.refiner=b};a.loadRefiner=function(b,c){return-1===c||c?n:a.branches[a.branches.length-1].refiners[b]?a.branches[a.branches.length-1].refiners[b]:n};a.clearRefiner=function(){a.refiner=n;a.saveRefiner()};a.saveSearch=
function(){a.branches[a.branches.length-1].searches[a.path]=a.searchTerm};a.saveAdvancedSearch=function(b){a.branches[a.branches.length-1].adv_searches[a.path]=b};a.loadFromBranches=function(b,c,d){return-1===c||c?n:a.branches[a.branches.length-1]&&a.branches[a.branches.length-1][d]&&a.branches[a.branches.length-1][d][b]?a.branches[a.branches.length-1][d][b]:n};a.setSearch=function(b){var c="hidden";a.searchTerm=b;a.markIfViewIsFiltered();if((!a.server_side||"hierarchy"!=a.view_mode)&&a.focus&&a.focus.columns)for(var d in a.focus.columns)l.has(a.focus.columns,
d)&&!a.isInfoTag(d)&&q(a.focus.columns[d].searchable)&&(c="visible");h("organizer_search").style.visibility=c;a.searchTerm===n?h("organizer_search_term").value="":h("organizer_search_term").value=a.searchTerm};a.clearSearch=function(){h("organizer_search_term").value="";a.searchTerm=n;a.markIfViewIsFiltered();a.saveSearch()};a.itemJustDoubleClicked=!1;a.itemDoubleClick=function(b,c){if(m.uploading||a.changingHierarchy)return!1;l.stop(c);if(a.itemJustDoubleClicked)return!1;a.itemJustDoubleClicked=
!0;setTimeout(function(){a.itemJustDoubleClicked=!1},a.itemDoubleClickTime);a.itemClickTimeout&&clearTimeout(a.itemClickTimeout);a.itemClicked=!0;if(!a.focus||!a.focus.items[b])return!1;a.itemDoubleClickAction(b);return!1};a.itemDoubleClickLink=function(b){var c=a.focus.items[b].link;b=a.focus.items[b].panel;c===n&&b===n&&a.focus.item&&(c=a.focus.item.link,b=a.focus.item.panel);b&&(c={path:b._path_here});return c&&g.zenarioONotFull&&a.path===g.zenarioOMaxPath&&(a.path!==c.path||g.zenarioODisallowRefinersLoopingOnMinPath)?
!1:c};a.itemDoubleClickAction=function(b){var c=a.itemDoubleClickLink(b);return c?(q(c.unselect_items)||(a.selectedItems={},a.selectedItems[b]=!0,a.saveSelection()),m.action(a,a.focus.items[b],!0,!0,c),!0):!1};a.topLevelClick=function(b,c,d){if(m.uploading||a.changingHierarchy)return!1;a.clearRefiner();a.clearSearch();a.resetBranches();c!==n?(b=$.extend(!0,{},a.map[b].nav[c]),m.action(a,b,!1,-1)):m.action(a,a.map[b],!1,-1)};a.viewTrash=function(){!g.zenarioOSelectMode&&a.focus&&a.focus.trash&&!q(a.focus.trash.empty)&&
m.action(a,a.focus.trash,!1,!0);return!1};a.collectionButtonClick=function(b){a.focus&&a.focus.collection_buttons&&a.focus.collection_buttons[b]&&m.action(a,a.focus.collection_buttons[b],!1,!0)};a.itemButtonClick=function(b){a.focus&&a.focus.item_buttons&&a.focus.item_buttons[b]&&m.action(a,a.focus.item_buttons[b],!0,!0)};a.inlineButtonClick=function(b,c){a.focus&&a.focus.inline_buttons&&a.focus.inline_buttons[b]&&(a.selectSingleItem(c),a.saveSelection(),m.action(a,a.focus.inline_buttons[b],!0,!0))};
a.toggleQuickFilter=function(b,c){var d,e,f;a.focus&&a.focus.quick_filter_buttons&&(d=a.focus.quick_filter_buttons[b])&&(e=d.column)&&(f=a.getColumnFilterType(e))&&a.checkIfColumnPickerChangesAreAllowed(e)&&(q(d.remove_filter)?c=!1:c===n&&(c=!a.quickFilterEnabled(b)),a.setFilterValue("shown",e,c),a.clearFilter(e),c&&(a.setFilterValue("not",e,q(d.invert)),"yes_or_no"==f?a.setFilterValue("yes_or_no_",e,1):"enum"==f&&d.value!==n?a.setFilterValue("enum_",e,d.value):"search"==f&&d.value!==n&&a.setFilterValue("searchcol_",
e,d.value)),a.refreshAndShowPage())};a.quickFilterEnabled=function(b){var c,d,e;if((c=a.focus.quick_filter_buttons[b])&&(d=c.column)&&(e=a.getColumnFilterType(d))){if(q(c.remove_filter))return!a.getFilterValue("shown",d);if(a.getFilterValue("shown",d)&&q(c.invert)==q(a.getFilterValue("not",d))){if("yes_or_no"==e)return!0;if("enum"==e&&c.value!==n)return a.getFilterValue("enum_",d)===c.value;if("search"==e&&c.value!==n)return a.getFilterValue("searchcol_",d)===c.value}}return!1};a.applyMergeFields=
function(b,c,d,e){var f=b;d===n&&(d=a.getKeyId());for(var p in a.focus.items[d])if(l.has(a.focus.items[d],p)&&-1!=b.indexOf("[["+p+"]]")){var k=a.columnValue(d,p,!c);for(e||k===n||(k=k.replace(/\n/g," "));b!=(f=b.replace("[["+p+"]]",k));)b=f}return b};a.applySmallSpaces=function(b){for(var c,d,e="";-1!=(c=b.search(/([a-z][A-Z]|[a-zA-Z][^a-zA-Z\)]|[^a-zA-Z\(][a-zA-Z]|[0-9][^0-9\)]|[^0-9\(][0-9])/));)d=null!==b[c+1].match(/\s/)?c+2:c+1,c=b.substr(0,d),b=b.substr(d),e+=a.maxLengthString(s(c,!1,"asis"),
25),-1==c.search(/\s/)&&(e+='<span style="font-size: 1px;"> </span>');return e+=a.maxLengthString(s(b),25)};a.maxLengthString=function(a,c){for(var d="";a.wordLength>c;)d+=a.substr(0,c)+'<span style="font-size: 1px;"> </span>',a=a.substr(c);return d+a};a.pickItems=function(b,c,d){b={};for(var e in c)l.has(c,e)&&("id"==e?b[e]=c[e]:"parent__"!=e.substr(0,8)&&(b["child__"+e]=c[e]));if(a.postPickItemsObject)a.pickItemsItemLevel&&(b.id2=b.id,delete b.id),m.action(a,a.postPickItemsObject,!0,!0,n,b);else if(a.actionTarget){if(a.pickItemsItemLevel){a.actionRequests.id2=
b.id;for(var f in b)l.has(b,f)&&"id"!=f&&(a.actionRequests[f]=b[f])}else for(f in b)l.has(b,f)&&(a.actionRequests[f]=b[f]);a.action2()}a.postPickItemsObject=!1};a.action2=function(){if(a.actionTarget){var b=++a.goNum;h("organizer_preloader_circle").style.display="block";$.post(M+a.actionTarget,a.actionRequests,function(c){b!=a.goNum||c&&!1===m.showMessage(c,n,"error")||a.selectCreatedIds()},"text")}a.actionTarget=!1;delete a.actionRequests};a.uploadComplete=function(){a.selectCreatedIds()};a.selectCreatedIds=
function(){var b;if(b=l.nonAsyncAJAX(M+"zenario/ajax.php?method_call=getNewId",!0,!0))a.deselectAllItems(),a.selectedItems=b,a.saveSelection();h("organizer_preloader_circle").style.display="none";var c="",d;for(d in a.selectedItems)l.has(a.selectedItems,d)&&(c+=(c?",":"")+d);delete l.rev;b&&c?a.go(a.path+"//"+c):a.refresh()};a.lastActivity=!1;a.refreshIsPeriodic=!1;a.refresh=function(b,c,d){if(b&&(!a.lastActivity||12E5<Date.now()-a.lastActivity))return!1;a.stopRefreshing();a.recordOpenItems();a.saveOpenItems();
a.refreshToPage=a.page;a.refreshIsPeriodic=b;var e=a.path;a.inCloseUpView&&(e+="//"+a.itemToSelect+"/");a.go(e,n,n,n,n,n,!c,n,n,d,b)};a.changePassword=function(){a.reload(n,!0,"change_password")};a.reload=function(b,c,d){if(m.uploading)return!1;d=d||"";b===n&&(b=l.currentHash&&!l.browserIsIE(7)?l.currentHash.replace("#",""):a.getHash());d||c||(d="zenario__administration/panels/site_settings//site_reset"==b?"site_reset":"zenario__administration/panels/backups"==b.substr(0,31)?"restore":"reload_sk");
g.location.href=M+"zenario/admin/welcome.php?task="+d+"&sk="+encodeURIComponent(b)+(m.fromCID?"&fromCID="+m.fromCID+"&fromCType="+m.fromCType:"")};a.refreshToShowItem=function(b){if(m.uploading)return!1;if("zenario__administration/panels/site_settings"==a.path)a.reload();else{a.focus.db_items&&a.focus.db_items.encode_id_column&&(b=l.encodeItemIdForStorekeeper(b));var c=(b+"").split(",");a.selectedItems={};for(var d in c)l.has(c,d)&&(a.selectedItems[c[d]]=!0);a.saveSelection();a.stopRefreshing();delete l.rev;
a.inCloseUpView?a.go(a.path+"//"+b+"/"):a.go(a.path+"//"+b)}};a.refreshing=!1;a.stopRefreshing=function(){a.refreshing&&clearTimeout(a.refreshing)};a.doCSVExport=function(){a.CSVExport=!0;a.refresh()};a.getKey=function(b){var c={};if(a.focus.key)for(var d in a.focus.key)l.has(a.focus.key,d)&&(a.isInfoTag(d)||(c[d]=a.focus.key[d]));a.refiner&&(c.refinerId=a.refiner.id,c.refinerName=a.refiner.name);if(a.lastRefiners)for(var e in a.lastRefiners)l.has(a.lastRefiners,e)&&(c[e]=a.lastRefiners[e]);b&&a.selectedItems&&
(c.id=a.getKeyId());if(m.openedInIframe&&g.parent&&g.parent.zenario)if(g.parent.zenarioO.init)for(d in b=g.parent.zenarioO.getKey(!0),b)l.has(b,d)&&(c["parent__"+d]=b[d]);else g.parent.zenario.cID&&(c.parent__cID=g.parent.zenario.cID,c.parent__cType=g.parent.zenario.cType,c.parent__cVersion=g.parent.zenario.cVersion);return c};a.getKeyId=function(b){var c="",d="";if(a.selectedItems)for(var e in a.selectedItems)if(l.has(a.selectedItems,e)&&!a.isInfoTag(e)){if(b)return e;c+=d+e;d=","}return c};a.getLastKeyId=
function(b){var c;return(c=a.loadRefiner(a.path))?c.id:!1};a.followPathOnMap=function(b,c,d){b||(b=a.defaultPath);var e=a.map;b=b.split("/");var f=!1,p=!1,k;for(k in b)if(l.has(b,k)){var g=b[k];if(""!==g){0==k&&(f=p=g);if(e[g])e=e[g];else return!1;e.link&&e.link.path?(f=p,p=e.link.path):e._path_here&&(f=p,p=e._path_here)}}e.panel&&(d||!c||e[c]===n&&e.panel[c]!==n)&&(e=e.panel);return d?e.link?{from:f,to:p,branch:e.link.branch,refiner:e.link.refiner}:!1:c?e[c]:e};a.getFromToFromLink=function(b){return a.followPathOnMap(b,
!1,!0)};a.changeView=function(b){if(m.uploading||!a.focus||"hierarchy"==a.view_mode||a.focus.force_view_mode&&a.focus.force_view_mode!=b||"grid"==b&&q(a.focus.disable_grid_view)||"list"==b&&q(a.focus.disable_list_view))return!1;a.changeViewMode=b;a.checkPrefs()?a.changeView2():a.refresh(n,n,a.changeView2)};a.changeView2=function(){a.prefs[a.voPath].view_mode=a.changeViewMode;a.view_mode=a.changeViewMode;a.inCloseUpView=!1;a.scrollToPageTop=!0;a.drawPanel();a.savePrefs();return!1};a.showViewOptions=
function(b){if(m.uploading||a.changingHierarchy||!a.focus.columns)return!1;a.checkPrefs()?a.showViewOptions2():a.refresh(n,n,a.showViewOptions2);return!1};a.showViewOptions2=function(){m.openBox(!1,"zenario_view_options","AdminViewModeOptions",h("organizer_listViewOptionsDropdown"),445,-395,-2,!1,!0,!1,!1,n,n,!1,!0);a.setViewOptions()};a.getColumnFilterType=function(b){if(!a.focus||!a.focus.columns||!a.focus.columns[b])return!1;var c=!1;"date"==a.focus.columns[b].format||"datetime"==a.focus.columns[b].format||
"datetime_with_seconds"==a.focus.columns[b].format?c="date":"yes_or_no"==a.focus.columns[b].format?c="yes_or_no":"enum"==a.focus.columns[b].format&&a.focus.columns[b].values||"language_english_name_with_id"==a.focus.columns[b].format||"language_english_name"==a.focus.columns[b].format||"language_local_name_with_id"==a.focus.columns[b].format||"language_local_name"==a.focus.columns[b].format?c="enum":q(a.focus.columns[b].searchable)&&(c="search");return c};a.setViewOptions=function(){a.CSVExportEnabled||
(a.showCSVInViewOptions=!1);var b="";zenarioAB.templatePrefix="zenario_filters";zenarioAB.shownTab="cp";zenarioAB.focus={tab:"cp",tabs:{cp:{template:"zenario_filters_popup",edit_mode:{on:!0,enabled:!0,always_on:!0},fields:{}}}};zenarioAB.focus.tabs.cp.fields.showcol__title_={ord:-3,full_width:!0,pre_field_html:'<div class="organizer_colPickerTitle_show" style="">',snippet:{html:t.show},post_field_html:"</div>"};a.showCSVInViewOptions&&(zenarioAB.focus.tabs.cp.fields.showcsv__title_={ord:-2,same_row:!0,
pre_field_html:'<div class="organizer_colPickerTitle_csv">',snippet:{html:t.csv},post_field_html:"</div>"});zenarioAB.focus.tabs.cp.fields.sortcol__title_={ord:-1,same_row:!0,pre_field_html:'<div class="organizer_colPickerTitle_sort">',snippet:{html:t.sort},post_field_html:"</div>"};var c,d,e=!1,f=!1;for(d in a.sortedColumns)if(l.has(a.sortedColumns,d)&&(c=a.sortedColumns[d],a.isShowableColumn(c,!1,a.showCSVInViewOptions))){zenarioAB.focus.tabs.cp.fields["start_of_row__"+c]={ord:100*d,full_width:!0,
snippet:{html:""}};zenarioAB.focus.tabs.cp.fields["showcol_"+c]={ord:100*d+4,same_row:!0,type:"toggle",onclick:"zenarioO.showHideColumn(!"+q(a.shownColumns[c])+", '"+s(c)+"'); zenarioO.setViewOptions();",value:a.shownColumns[c]?"Hide":"Show",title:t.showCol,"class":("grid"==a.view_mode||q(a.focus.columns[c].always_show)?"notused ":"")+(a.shownColumns[c]?"zen_col_hidden":"zen_col_shown")};if(a.showCSVInViewOptions){delete zenarioAB.focus.tabs.cp.fields["showcol_"+c].onclick;q(q(a.focus.columns[c].server_side_only))?
zenarioAB.focus.tabs.cp.fields["showcol_"+c].style="visibility: hidden;":zenarioAB.focus.tabs.cp.fields["showcol_"+c].disabled="disabled";var p=a.shownColumns[c];a.prefs[a.voPath].shownColumnsInCSV!==n&&a.prefs[a.voPath].shownColumnsInCSV[c]!==n&&(p=a.prefs[a.voPath].shownColumnsInCSV[c]);zenarioAB.focus.tabs.cp.fields["showcsv_"+c]={ord:100*d+5,same_row:!0,type:"checkbox",onclick:"zenarioO.showHideColumnInCSV(this, '"+s(c)+"');",value:p,"class":"grid"==a.view_mode||q(a.focus.columns[c].always_show)?
"notused":""}}zenarioAB.focus.tabs.cp.fields["sortcol_"+c]={ord:100*d+6,same_row:!0,snippet:{html:'<label class="zenario_filter_column_name" for="showcol_'+c+'">'+s(a.focus.columns[c].title)+"</label>"}};if(a.canFilterColumn(c)){var k=p=!a.getFilterValue("shown",c),g='<a class="'+(a.getFilterValue("not",c)?"organizer_inverter organizer_not":"organizer_inverter")+'" title="'+t.invertFilter+'" onclick="zenarioO.invertFilter(this, \''+s(c)+"', '"+s(a.focus.columns[c].format)+"');\">";if("date"==a.focus.columns[c].format||
"datetime"==a.focus.columns[c].format||"datetime_with_seconds"==a.focus.columns[c].format)zenarioAB.focus.tabs.cp.fields["date_after_col_"+c]={ord:100*d+7,row_class:"zenario_date_filters_for_field",label:t.after,type:"date",_change_filter_on_change:!0,value:a.getFilterValue("date_after_col_",c),hidden:p,_h:k},zenarioAB.focus.tabs.cp.fields["date_before_col_"+c]={ord:100*d+8,row_class:"zenario_date_filters_for_field",label:t.before,type:"date",_change_filter_on_change:!0,value:a.getFilterValue("date_before_col_",
c),hidden:p,_h:k};else if("yes_or_no"==a.focus.columns[c].format){var w=""+a.focus.columns[c].title;-1==w.indexOf(":")&&(w+=":",w.replace(/\s*:/,":"));zenarioAB.focus.tabs.cp.fields["yes_or_no_"+c]={ord:100*d+7,row_class:"zenario_filters_for_field yes_or_no",snippet:{html:g+(a.getFilterValue("not",c)?t.no:t.yes)+"</a>"},hidden:p,_h:k}}else if("enum"==a.focus.columns[c].format&&a.focus.columns[c].values||"language_english_name_with_id"==a.focus.columns[c].format||"language_english_name"==a.focus.columns[c].format||
"language_local_name_with_id"==a.focus.columns[c].format||"language_local_name"==a.focus.columns[c].format){if("enum"==a.focus.columns[c].format){if(w=a.focus.columns[c].values,!w[""]&&!w[0]){w={};w[""]=t.selectListSelect;for(var Q in a.focus.columns[c].values)l.has(a.focus.columns[c].values,Q)&&(w[Q]=a.focus.columns[c].values[Q])}}else for(Q in w={},w[""]=t.selectListSelect,m.lang)l.has(m.lang,Q)&&m.lang[Q].enabled&&(w[Q]=m.lang[Q].name,"language_english_name_with_id"==a.focus.columns[c].format||
"language_local_name_with_id"==a.focus.columns[c].format)&&(w[Q]+=" ("+Q+")");zenarioAB.focus.tabs.cp.fields["enum_"+c]={ord:100*d+7,row_class:"zenario_filters_for_field enum",label:g+(a.getFilterValue("not",c)?t.isnt:t.is)+"</a>",type:"select",_change_filter_on_change:!0,values:w,value:a.getFilterValue("enum_",c),hidden:p,_h:k}}else q(a.focus.columns[c].searchable)&&(zenarioAB.focus.tabs.cp.fields["searchcol_"+c]={ord:100*d+7,row_class:"zenario_filters_for_field",label:g+(a.getFilterValue("not",
c)?t.notLike:t.like)+"</a>",type:"text",onkeyup:"zenarioAB.changeFiltersAfterDelay();",value:a.getFilterValue("searchcol_",c),hidden:p,_h:k});a.getColumnFilterType(c)&&(zenarioAB.focus.tabs.cp.fields["togglefilter_"+c]={ord:100*d+2,same_row:!0,pre_field_html:'<div class="organizer_togglefilter">',type:"toggle",onclick:"zenarioO.toggleFilter(this, '"+s(c)+"');","class":p?"togglefilter_closed":"togglefilter_open",value:p?" ":"x",title:p?t.filterByCol:t.filterByColStop,post_field_html:"</div>"})}a.showCSVInViewOptions&&
(zenarioAB.focus.tabs.cp.fields["up__"+c]={ord:100*d+1,same_row:!0,pre_field_html:'<div class="organizer_mov_col">',type:"toggle",value:" ","class":"movcol_up",style:"visibility: hidden;",title:t.moveColForward},zenarioAB.focus.tabs.cp.fields["down__"+c]={ord:100*d+2,same_row:!0,type:"toggle",value:" ","class":"movcol_down",style:"visibility: hidden;",title:t.moveColBack,post_field_html:"</div>"},!1!==e&&(zenarioAB.focus.tabs.cp.fields["up__"+c].style="",zenarioAB.focus.tabs.cp.fields["up__"+c].onclick=
"zenarioO.switchColumnOrder("+d+", "+e+", true)",zenarioAB.focus.tabs.cp.fields["down__"+f].style="",zenarioAB.focus.tabs.cp.fields["down__"+f].onclick="zenarioO.switchColumnOrder("+d+", "+e+", true)"));e=d;f=c}c=!1;if(a.branches[a.branches.length-1]&&a.branches[a.branches.length-1].filters&&a.branches[a.branches.length-1].filters[a.path])for(var r in a.branches[a.branches.length-1].filters[a.path])if(l.has(a.branches[a.branches.length-1].filters[a.path],r)&&a.branches[a.branches.length-1].filters[a.path][r].shown){c=
!0;break}if(a.prefs[a.voPath])for(r in a.prefs[a.voPath])if(l.has(a.prefs[a.voPath],r)&&r&&"adv_searches"!=r){c=!0;break}c&&(zenarioAB.focus.tabs.cp.fields.reset={ord:100*d+11,full_width:!0,type:"toggle",onclick:"zenarioO.resetPrefs();",value:t.reset});a.CSVExportEnabled&&(zenarioAB.focus.tabs.cp.fields.toggle_csv={ord:100*d+12,full_width:!0,same_row:c,type:"toggle",style:"float: right; width: auto;",onclick:"zenarioO.showCSVInViewOptions = !zenarioO.showCSVInViewOptions; zenarioO.setViewOptions();",
value:a.showCSVInViewOptions?t.hideExport:t.showExport});zenarioAB.sortTabs();b+=zenarioAB.draw2(!0);h("zenario_fbAdminViewModeOptions").innerHTML=b;l.addJQueryElements("#zenario_fbAdminViewModeOptions ",!0);a.size(!0)};a.canSortColumn=function(b){return a.reordering||q(a.focus.columns[b].disallow_sorting)||a.server_side&&!a.focus.columns[b].db_column?!1:!0};a.canFilterColumn=function(b){if(!a.focus.columns[b].db_column||q(a.focus.columns[b].server_side_only)||q(a.focus.columns[b].disallow_filtering)||
"enum"==a.focus.columns[b].format&&!a.focus.columns[b].values)return!1;switch(a.focus.columns[b].format){case "date":case "datetime":case "datetime_with_seconds":case "yes_or_no":case "enum":case "language_english_name_with_id":case "language_english_name":case "language_local_name_with_id":case "language_local_name":return!q(a.focus.columns[b].disallow_sorting);default:return q(a.focus.columns[b].searchable)}};a.showHideColumn=function(b,c){if(q(a.focus.columns[c].always_show))b=!0;else{var d=0,
e;for(e in a.focus.columns)l.has(a.focus.columns,e)&&(a.isInfoTag(e)||a.shownColumns[e]&&++d);2>d&&!b&&(b=!0)}a.shownColumns[c]=b?!0:!1;a.checkPrefs();a.prefs[a.voPath].shownColumns=a.shownColumns;a.savePrefs();a.drawPanel()};a.resizeColumn=function(b,c){a.shownColumns[b]&&(c=Math.max(c,a.columnWidths.xxsmall),a.checkPrefs(),a.prefs[a.voPath].colSizes||(a.prefs[a.voPath].colSizes={}),a.prefs[a.voPath].colSizes[b]=c,a.savePrefs());a.drawPanel()};a.showHideColumnInCSV=function(b,c){a.checkPrefs();a.prefs[a.voPath].shownColumnsInCSV||
(a.prefs[a.voPath].shownColumnsInCSV={});a.prefs[a.voPath].shownColumnsInCSV[c]=b.checked?!0:!1;a.savePrefs()};a.switchColumnOrder=function(b,c,d){if("object"==typeof b){var e,f={};moveableColumns={};pi=-1;positions=[];for(e in b)l.has(b,e)&&(c=b[e],f[c]=!0);for(e in a.sortedColumns)l.has(a.sortedColumns,e)&&(c=a.sortedColumns[e],f[c]&&(moveableColumns[c]=!0,positions[++pi]=e,a.sortedColumns[e]=n));pi=-1;for(e in b)l.has(b,e)&&(c=b[e],f[c]&&moveableColumns[c]&&(a.sortedColumns[positions.shift()]=
c));for(e=a.sortedColumns.length-1;0<=e;--e)a.sortedColumns[e]===n&&a.sortedColumns.splice(e,1)}else e=a.sortedColumns[b],a.sortedColumns[b]=a.sortedColumns[c],a.sortedColumns[c]=e;a.checkPrefs();a.prefs[a.voPath].sortedColumns=a.sortedColumns;a.drawPanel();d&&a.setViewOptions();a.savePrefs()};a.resetPrefs=function(){a.checkPrefs();a.prefs[a.voPath]&&(a.prefs[a.voPath]=a.prefs[a.voPath].adv_searches?{adv_searches:a.prefs[a.voPath].adv_searches}:{},a.savePrefs());a.branches[a.branches.length-1]&&a.branches[a.branches.length-
1].filters&&(a.branches[a.branches.length-1].filters[a.path]={});m.closeBox("AdminViewModeOptions");a.refreshAndShowPage()};a.checkIfColumnPickerChangesAreAllowed=function(b){return a.reordering?!1:!0};a.changeSortOrder=function(b){a.canSortColumn(b)&&a.checkIfColumnPickerChangesAreAllowed(b)&&(a.sortBy==b?a.sortDesc=!a.sortDesc:(a.sortBy=b,a.sortDesc=!1),a.checkPrefs(),a.prefs[a.voPath].sortBy=a.sortBy,a.prefs[a.voPath].sortDesc=a.sortDesc,a.runSearch(),a.savePrefs(!0))};a.possibleFilters={searchcol_:!0,
enum_:!0,date_after_col_:!0,date_before_col_:!0,yes_or_no_:!0};a.toggleFilter=function(b,c){var d,e=a.getColumnFilterType(c);if(e&&a.checkIfColumnPickerChangesAreAllowed(c)){d=!a.getFilterValue("shown",c);a.setFilterValue("shown",c,d);var f=!1;if(!d){for(var p in a.possibleFilters)l.has(a.possibleFilters,p)&&a.getFilterValue(p,c)&&(a.setFilterValue(p,c,""),f=!0);a.setFilterValue("not",c,!1)}"yes_or_no"==e&&d&&(f=!0,a.setFilterValue("yes_or_no_",c,1));a.setViewOptions(c);zenarioAB.hideShowFields(function(){a.size(!0);
h("searchcol_"+c)&&$(h("searchcol_"+c)).is(":visible")&&h("searchcol_"+c).focus()});f&&a.refreshAndShowPage()}};a.invertFilter=function(b,c,d){a.checkIfColumnPickerChangesAreAllowed(c)&&(b=!a.getFilterValue("not",c),a.setFilterValue("not",c,b),a.setViewOptions(c),a.filterSetOnColumn(c)&&a.refreshAndShowPage())};a.refreshIfFilterSet=function(b){for(var c in a.possibleFilters)l.has(a.possibleFilters,c)&&a.getFilterValue(c,b)&&a.refreshAndShowPage()};a.filterSetOnColumn=function(b,c){for(var d in a.possibleFilters)if(l.has(a.possibleFilters,
d)&&a.getFilterValue(d,b,c))return!0;return!1};a.getFilterValue=function(b,c,d){d===n&&(d=a.branches[a.branches.length-1].filters[a.path]);return d&&d[c]&&d[c][b]?d[c][b]:""};a.setFilterValue=function(b,c,d){a.branches[a.branches.length-1].filters[a.path]||(a.branches[a.branches.length-1].filters[a.path]={});a.branches[a.branches.length-1].filters[a.path][c]||(a.branches[a.branches.length-1].filters[a.path][c]={});d===n?delete a.branches[a.branches.length-1].filters[a.path][c][b]:a.branches[a.branches.length-
1].filters[a.path][c][b]=d;$.isEmptyObject(a.branches[a.branches.length-1].filters[a.path][c])&&delete a.branches[a.branches.length-1].filters[a.path][c];$.isEmptyObject(a.branches[a.branches.length-1].filters[a.path])&&delete a.branches[a.branches.length-1].filters[a.path]};a.clearFilter=function(b){for(var c in a.possibleFilters)l.has(a.possibleFilters,c)&&a.setFilterValue(c,b);a.setFilterValue("not",b)};zenarioAB.changeFiltersAfterDelay=function(){l.actAfterDelayIfNotSuperseded("changeFilters",
a.changeFilters,700)};a.changeFilters=function(){if(a.reordering)a.setViewOptions();else{var b,c;for(c in a.focus.columns)if(l.has(a.focus.columns,c)&&a.isShowableColumn(c))for(var d in a.possibleFilters)if(l.has(a.possibleFilters,d)){if(h(d+c)||h(d+c+"___yes"))(b=zenarioAB.readField(d+c))?a.setFilterValue(d,c,b):a.setFilterValue(d,c,"");h("remove_filter_"+c)&&(h("remove_filter_"+c).className=a.filterSetOnColumn(c)?"organizer_remove_filter organizer_remove_filter_active":"organizer_remove_filter organizer_remove_filter_inactive")}a.refreshAndShowPage()}};
a.hideViewOptions=function(a){m.closeBox("AdminViewModeOptions");return!1};a.openAdvancedSearch=function(b){if(m.uploading||a.changingHierarchy||!a.focus.columns)return!1;a.checkPrefs()?a.openAdvancedSearch2():a.refresh(n,n,a.openAdvancedSearch2);return!1};a.openAdvancedSearch2=function(){m.openBox(!1,"zenario_advanced_search","AdminAdvancedSearch",h("organizer_openAdvancedSearch"),300,0,-2,!1,!0,!1,!1,n,n,!1,!0);a.openAdvancedSearch3()};a.openAdvancedSearch3=function(){var b='<div class="organizer_colsortheader"><a onclick="zenarioO.hideAdvancedSearch();"></a>'+
t.advancedSearches+'</div><div class="organizer_colsortfields" id="organizer_colsortfields">',c=0,d=0;if(a.prefs[a.voPath].adv_searches)for(c in a.prefs[a.voPath].adv_searches)l.has(a.prefs[a.voPath].adv_searches,c)&&(c==1*c&&a.prefs[a.voPath].adv_searches[c].first_tab&&a.prefs[a.voPath].adv_searches[c].first_tab.name&&d<a.numberOfAdvancedSearches?(b+='<p class="saved_search'+(a.advancedSearch==c?" current_search":"")+'"><a class="organizer_search_name" onclick="zenarioO.openAdvancedSearchSettings('+
c+');">'+s(a.prefs[a.voPath].adv_searches[c].first_tab.name)+"</a>",c!=a.advancedSearch&&(b+=' <a class="organizer_delete_search" onclick="zenarioO.deleteAdvancedSearchConfirm('+c+');">'+t.deleteSearch+"</a>"),b+="</p>",++d):a.deleteAdvancedSearch(c));d<a.numberOfAdvancedSearches&&(b+='<p class="organizer_new_search"><a onclick="zenarioO.openAdvancedSearchSettings('+ ++c+');">'+t.createSearch+"</a></p>");b+="</div>";h("zenario_fbAdminAdvancedSearch").innerHTML=b;l.addJQueryElements("#zenario_fbAdminAdvancedSearch ",
!0);a.size(!0)};a.deleteAdvancedSearchConfirm=function(b){var c=t.deleteSearchConfirm.replace(/\[\[name\]\]/g,s(a.prefs[a.voPath].adv_searches[b].first_tab.name));m.floatingBox(c,'<input type="button" class="submit_selected" value="'+t.deleteSearch+'" onclick="zenarioO.deleteAdvancedSearch('+b+'); zenarioO.openAdvancedSearch3();"/><input type="button" class="submit" value="'+t.cancel+'"/>',!0)};a.deleteAdvancedSearch=function(b){a.checkPrefs();delete a.prefs[a.voPath].adv_searches[b];a.savePrefs()};
a.clearAdvancedSearch=function(b){a.advancedSearch&&(a.saveAdvancedSearch(!1),a.runSearch())};a.hideAdvancedSearch=function(a){m.closeBox("AdminAdvancedSearch");return!1};a.openAdvancedSearchSettings=function(b){a.hideAdvancedSearch();var c=n;a.prefs[a.voPath].adv_searches&&(c=a.prefs[a.voPath].adv_searches[b]);zenarioAB.open("advanced_search",{search:b,storekeeper_path:a.path},n,c,function(b,c){b.search&&b.search==1*b.search&&c.first_tab&&c.first_tab.name&&(a.checkPrefs(),a.prefs[a.voPath].adv_searches||
(a.prefs[a.voPath].adv_searches={}),a.prefs[a.voPath].adv_searches[b.search]=c,a.saveAdvancedSearch(b.search),a.savePrefs(),a.runSearch())})};a.isInfoTag=function(a){return"back_link"===a||"class_name"===a||"count"===a||"ord"===a};a.isShowableColumn=function(b,c,d){return c?a.shownColumns[b]&&a.isShowableColumn(b):a.focus.columns[b]&&!a.isInfoTag(b)&&!m.hidden(a.focus.columns[b])&&a.focus.columns[b].title&&(d||!q(a.focus.columns[b].server_side_only))};a.createSortArray=function(b,c,d,e){var f,p=!1,
k;"items"==c&&a.focus.columns&&a.focus.columns[d]&&(p=a.focus.columns[d].format);a[b]=[];if(a.focus[c])for(var g in a.focus[c])l.has(a.focus[c],g)&&!a.isInfoTag(g)&&a.focus[c][g]&&(f=a.focus[c][g][d],"true_or_false"==p||"yes_or_no"==p?a[b].push([g,q(f),!0]):"remove_zero_padding"!=p&&f==(k=1*f)?a[b].push([g,k,!0]):f?a[b].push([g,f.toLowerCase(),!1]):a[b].push([g,0,!0]));e?a[b].sort(a.sortArrayDesc):a[b].sort(a.sortArray);for(g in a[b])l.has(a[b],g)&&(a[b][g]=a[b][g][0])};a.createSortArrayTopLevel=
function(b){var c,d;a[b]=[];for(var e in a.map)l.has(a.map,e)&&!a.isInfoTag(e)&&(c=a.map[e].ord,c==(d=1*c)?a[b].push([e,d,!0]):c?a[b].push([e,c.toLowerCase(),!1]):a[b].push([e,0,!0]));a[b].sort(a.sortArray);for(e in a[b])l.has(a[b],e)&&(a[b][e]=a[b][e][0])};a.createSortArraySecondLevel=function(b,c){var d,e;a[b]=[];if(a.map[c].nav)for(var f in a.map[c].nav)l.has(a.map[c].nav,f)&&!a.isInfoTag(f)&&(d=a.map[c].nav[f].ord,d==(e=1*d)?a[b].push([f,e,!0]):d?a[b].push([f,d.toLowerCase(),!1]):a[b].push([f,
0,!0]));a[b].sort(a.sortArray);for(f in a[b])l.has(a[b],f)&&(a[b][f]=a[b][f][0])};a.sortArray=function(a,c){return a[1]===c[1]?0:(a[2]?c[2]:!c[2])?a[1]<c[1]?-1:1:a[2]?-1:1};a.sortArrayDesc=function(b,c){return a.sortArray(c,b)};a.dateDays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");a.dateMonths="January Feburary March April May June July August September October November December".split(" ");a.checkCondition=function(b){for(var c in a.selectedItems)if(l.has(a.selectedItems,
c)&&(!a.focus.items[c]||!b(c,a.focus.items[c])))return!1;return!0};a.columnEqual=function(b,c){return a.checkCondition(function(d){return a.columnRawValue(d,b)==c})};a.columnNotEqual=function(b,c){return a.checkCondition(function(d){return a.columnRawValue(d,b)!=c})};a.columnRawValue=function(b,c){return a.focus&&a.focus.columns&&a.focus.columns[c]!==n&&a.focus.items[b]!==n?a.focus.items[b][c]:""};a.columnValue=function(b,c,d){if(!a.focus||!a.focus.columns||a.focus.columns[c]===n)return"";var e=a.focus.items[b][c],
e=e===n||!1===e||null===e?"":""+e,f=a.focus.columns[c].item_link,p=!0,k=!1;if(f){var h=!1;if("menu_item"==f){var w=a.itemLanguage(b);e&&a.menuItems[w]&&(h=a.menuItems[w].items)&&(h=h[e])}else if("content_item"==f||"content_item_or_url"==f){var w=a.itemLanguage(b),q=a.itemParent(b);if(!(e&&a.contentItems[w]&&a.contentItems[w][q]&&(h=a.contentItems[w][q].items)&&(h=h[e])))if("content_item_or_url"==f&&e&&"_"!=e.substr(0,1)&&"_"!=e.substr(1,2))h={name:e,frontend_link:e},p=!1;else return""}if(h){if(d)return h.name;
d="";if(a.focus.items[b].cell_css_classes&&a.focus.items[b].cell_css_classes[c]&&-1!=(""+a.focus.items[b].cell_css_classes[c]).indexOf("ghost"))if(d=' style="cursor: default;"',"menu_item"==f)d+=' title="'+s(h.name)+'|"';else{if("content_item"==f||"content_item_or_url"==f)d+=' title="'+s(h.name)+'|"'}else if(p&&a.shallowLinks[f]&&!g.zenarioONotFull?d=' href="organizer.php#'+s(x(h.navigation_path,a.shallowLinks[f]+"//"+b))+'" onclick="zenarioO.deselectAllItems();zenarioO.selectedItems[\''+s(b)+"'] = true;zenarioO.saveSelection();zenarioO.go('"+
s(a.shallowLinks[f])+"', true, {id: '"+s(e)+"', name: 'following_item_link', languageId: '"+s(a.itemLanguage(b))+"'}, undefined, undefined, undefined, undefined, '"+s(e)+"');return zenario.stop(event);\"":h.navigation_path?d=' href="'+M+"zenario/admin/organizer.php#/"+s(h.navigation_path)+'" target="_blank"':(p=!1,h.frontend_link&&(k=!0,d=' href="'+s(l.addBasePath(h.frontend_link))+'" target="_blank"')),p)if("menu_item"==f)d+=' title="'+s(h.name)+"|"+t.clkToViewLinkedMenuNode+'"';else{if("content_item"==
f||"content_item_or_url"==f)d+=' title="'+s(h.name)+"|"+t.clkToViewLinkedCItem+'"'}else k&&(d+=' title="'+s(h.name)+"|"+t.clkToViewLinkInNewWindow+'"');c='<table class="organizer_no_border item_link"><tr>';h.css_class&&(c+='<td><div class="listicon '+h.css_class+'"><a'+d+"></a></div></td>");c+='<td class="organizer_item_link_text" width="95%">';"menu_item"==f?(e=s(h.name),f=e.replace(/.*?\-\&gt\; /g,"-&gt; "),f==e&&(f=e.replace(/.*?\: /g,"")),c+="<a"+d+">"+f+"</a>"):c+="<a"+d+">"+s(h.name)+"</a>";
return c+"</td></tr></table>"}}if(a.focus.columns[c].format||a.focus.columns[c].empty_value)e=m.formatSKItemField(e,a.focus.columns[c]);f=a.focus.columns[c].length_limit&&e.length>a.focus.columns[c].length_limit;return d?f?e.substr(0,a.focus.columns[c].length_limit)+"...":e:f?'<span class="tooltip" title="'+s(e)+'">'+s(e.substr(0,a.focus.columns[c].length_limit))+"...</span>":s(e)};a.rowCssClass=function(b){return a.focus.items[b]&&a.focus.items[b].row_css_class?" "+a.focus.items[b].row_css_class:
""};a.columnCssClass=function(b,c){var d="";a.focus.columns[b]&&a.focus.columns[b].css_class&&(d+=" "+a.focus.columns[b].css_class);c!=n&&a.focus.items[c]&&a.focus.items[c].cell_css_classes&&a.focus.items[c].cell_css_classes[b]&&(d+=" "+a.focus.items[c].cell_css_classes[b]);return d};a.setBackButton=function(){var b,c="",d=a.getBackButtonTitle(-1,!0),e={buttons:[]};if(d&&0!=d.length){h("organizer_backButton").style.visibility="visible";for(b in d)l.has(d,b)&&(e.buttons[b]={orderAsc:b+1,orderDesc:d.length-
b,title:d[b]});c=m.microTemplate("zenario_organizer_back_buttons",e)}else h("organizer_backButton").style.visibility="hidden";h("organizer_backButton").innerHTML=c;m.tooltips("#organizer_backButton *[title]");m.setTooltipIfTooLarge(".organizer_lastBackButton a",n,m.tooltipLengthThresholds.organizerBackButton)};a.getBackButtonTitle=function(b,c){return a.getFromLastPanel(a.branches.length-1,a.path,"title",!1,b,c)};a.getSelectedItemFromLastPanel=function(b){var c,d,e=!1;if(d=a.getFromLastPanel(a.branches.length-
1,a.path,"selected_items",!0))if(d=d[b])for(c in d)if(l.has(d,c)){e=c;break}return e};a.getFromLastPanel=function(b,c,d,e,f,p,k,l){if(!a.focus||!a.path)return!1;var h=!1,m,r,t=!1,s=!1;f===n&&(f=1);k===n&&(k={});k.path===n&&(k.path=c);k.pops===n&&(k.pops=0);if(0===b&&-1==c.indexOf("/")||"no_return"!=d&&(q(a.getFromLastPanel(b,c,"no_return"))||0===b&&!a.focus.back_link||1>=b&&(m=a.getHash(!0,b))&&(0===b&&m==a.currentTopLevelPath||1===b&&m==a.currentTopLevelPath)))return!1;if(0<b&&c==a.branches[b].to){if(g.zenarioONotFull&&
g.zenarioOMinPath&&c==g.zenarioOMinPath&&(g.zenarioODisallowRefinersLoopingOnMinPath||a.branches[b].from!=c))return!1;if(a.branches[b-1].bypasses[a.branches[b].from]&&a.knownBranches[a.branches[b].from]&&a.knownBranches[a.branches[b].from][a.branches[b].to]&&a.knownBranches[a.branches[b].from][a.branches[b].to][a.branches[b].refiners[a.branches[b].to]?a.branches[b].refiners[a.branches[b].to].name:1]&&"item"==a.knownBranches[a.branches[b].from][a.branches[b].to][a.branches[b].refiners[a.branches[b].to]?
a.branches[b].refiners[a.branches[b].to].name:1].substr(-4))return a.getFromLastPanel(b-1,a.branches[b].from,d,e,f,p,k,!0);t=!0;c=e?a.branches[b-1][d]:a.branches[b][d]}else if(a.branches[b][d])t=!0,c=a.branches[b][d];else if(r=l||c!=a.path?a.followPathOnMap(c,"back_link"):a.focus.back_link){if(g.zenarioONotFull&&g.zenarioOMinPath&&c==g.zenarioOMinPath&&(g.zenarioODisallowRefinersLoopingOnMinPath||r!=c))return!1;s=!0;c=a.followPathOnMap(r,d)}else return!1;t?(k.path=a.branches[b].from,++k.pops):s&&
r&&(k.path=r);if(0!=--f)if(t)h=a.getFromLastPanel(b-1,a.branches[b].from,d,e,f,p,k,!0);else if(s&&r)h=a.getFromLastPanel(b,r,d,e,f,p,k,!0);else return!1;return p?(h||(h=[]),h[h.length]=c,h):!1!==h?h:c};a.setTopLevelItems=function(){var b,c,d=-1,e,f,p=0,k={items:[],selected1st:0},g=a.path,n=a.getHash(!0);1<a.branches.length&&(g=a.branches[1].from);for(b in a.map)if(l.has(a.map,b)&&"object"==typeof a.map[b]&&a.map[b].nav)for(c in a.map[b].nav)if(l.has(a.map[b].nav,c)&&"object"==typeof a.map[b].nav[c]){g=
b+"/nav/"+c+"/panel";a.map[b].nav[c].link&&a.map[b].nav[c].link.path&&(g=a.map[b].nav[c].link.path);var t=(g+"").length+1;p<t&&(n+"/").substr(0,t)==g+"/"&&(p=t,e=b,f=c)}for(var r in a.sortedTopLevelItems)if(l.has(a.sortedTopLevelItems,r)&&(b=a.sortedTopLevelItems[r],!m.hidden(a.map[b]))){p=!0;n=-1;k.items[++d]={id:b,items:[],selected:b===e,css_class:a.map[b].css_class,label:x(a.map[b].label,a.map[b].name),tooltip:a.map[b].tooltip};a.setDataAttributes(a.map[b],k.items[d]);b===e&&(k.selected1st=d);
a.createSortArraySecondLevel("sortedSecondLevelItems",b);for(var s in a.sortedSecondLevelItems)l.has(a.sortedSecondLevelItems,s)&&(c=a.sortedSecondLevelItems[s],m.hidden(a.map[b].nav[c])||(g=a.map[b].nav[c].link&&a.map[b].nav[c].link.path?a.map[b].nav[c].link.path:b+"/nav/"+c+"/panel",b===e&&c===f&&(a.currentTopLevelPath=g),k.items[d].items[++n]={id:c,selected:b===e&&c===f,href:"#"+g,onclick:"zenarioO.topLevelClick('"+R(b)+"', '"+R(c)+"', "+q(0==n)+"); return false;",label:x(a.map[b].nav[c].label,
a.map[b].nav[c].name),tooltip:a.map[b].nav[c].tooltip},p&&(p=!1,k.items[d].href=k.items[d].items[n].href,k.items[d].onclick=k.items[d].items[n].onclick)))}h("organizer_leftColumn").innerHTML=m.microTemplate("zenario_organizer_nav",k);m.tooltips("#organizer_leftColumn #organizer_topLevelNav a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"},show:!1,hide:!1});m.tooltips("#organizer_leftColumn .organizer_sectionTitleTextAnd2ndLevelNav a[title]",{position:{my:"left+2 center",
at:"right center",collision:"flipfit"}});var M=$("#organizer_topLevelNav");$("#organizer_topLevelNavScrollUp").mousehold(function(){a.scrollTopLevelNav(M,!0)},100);$("#organizer_topLevelNavScrollDown").mousehold(function(){a.scrollTopLevelNav(M,!1)},100);a.setTopLevelNavScrollStatus(M)};a.scrollTopLevelNav=function(b,c){b.scrollTop(b.scrollTop()+(c?-50:50));a.setTopLevelNavScrollStatus(b)};a.setTopLevelNavScrollStatus=function(a){a||(a=$("#organizer_topLevelNav"));var c=$("#organizer_topLevelNavInner").outerHeight()-
a.innerHeight();0>=c?$("#organizer_topLevelNavScroll").hide():($("#organizer_topLevelNavScroll").show(),a=a.scrollTop(),0<a?$("#organizer_topLevelNavScrollUp").addClass("organizer_scrollActive"):$("#organizer_topLevelNavScrollUp").removeClass("organizer_scrollActive"),a<c?$("#organizer_topLevelNavScrollDown").addClass("organizer_scrollActive"):$("#organizer_topLevelNavScrollDown").removeClass("organizer_scrollActive"))};a.setDataAttributes=function(a,c){for(var d in a)l.has(a,d)&&"data"==d.substr(0,
4)&&(c[d]=a[d])};a.checkButtonHidden=function(b){if(m.hidden(b,!0)||g.zenarioONotFull&&b.frontend_link||g.zenarioOQuickMode&&q(b.hide_in_quick_mode)||g.zenarioOSelectMode&&q(b.hide_in_select_mode)||!(g.zenarioOQuickMode||!q(b.quick_mode_only)||g.zenarioOSelectMode&&q(b.select_mode_only))||!(g.zenarioOSelectMode||!q(b.select_mode_only)||g.zenarioOQuickMode&&q(b.quick_mode_only)))return!0;if(b.only_show_on_refiner){if(!a.refiner)return!0;if("object"==typeof b.only_show_on_refiner){if(!q(b.only_show_on_refiner[a.refiner.name]))return!0}else if(a.refiner.name!=
b.only_show_on_refiner)return!0}if(b.hide_on_refiner&&a.refiner)if("object"==typeof b.hide_on_refiner){if(q(b.hide_on_refiner[a.refiner.name]))return!0}else if(a.refiner.name==b.hide_on_refiner)return!0;return b.call_js_function&&!m.checkFunctionExists(b.call_js_function["function"],b.call_js_function.encapsulated_object)||a.pathNotAllowed(b.link)?!0:!1};a.setButtons=function(b){a.itemsSelected=0;for(var c in a.selectedItems)l.has(a.selectedItems,c)&&++a.itemsSelected;h("organizer_rightColumnOptions")&&
(a.changingHierarchy?($("#organizer_rightColumnOptions").hide(),$("#organizer_rightColumnApplyCancel").show()):($("#organizer_rightColumnOptions").show(),$("#organizer_rightColumnApplyCancel").hide(),delete a.upload,delete a.uploadIsItemLevel,a.itemsSelected?a.setItemButtons(b):a.setCollectionButtons(b),a.setUploads(),a.setChooseButton()))};a.setQuickFilters=function(){var b=-1,c=[],d={},e;for(e in a.sortedQuickFilterButtons)if(l.has(a.sortedQuickFilterButtons,e)){var f=a.sortedQuickFilterButtons[e],
g=a.focus.quick_filter_buttons[f];a.checkButtonHidden(g)||(c[++b]={id:f,css_class:x(g.css_class,"",""),label:g.label,parent:g.parent},d[f]=b,c[b].tooltip=g.tooltip,c[b].onclick="zenarioO.toggleQuickFilter('"+R(f)+"'); return false;",c[b].enabled=a.quickFilterEnabled(f))}var k;for(f in d)l.has(d,f)&&(k=a.focus.quick_filter_buttons[f].parent)&&(b=d[k])!==n&&(c[b].children||(c[b].children=[],c[b].css_class+=" organiser_button_with_children"),c[d[f]].enabled&&!q(c[d[f]].remove_filter)&&(c[b].childEnabled=
!0),c[b].children.push(c[d[f]]));for(b=c.length-1;0<=b;--b)a.focus.quick_filter_buttons[c[b].id].parent&&c.splice(b,1);c.length?($("#organizer_quickFilter").show().html(m.microTemplate("zenario_organizer_quick_filter_button",c)),m.tooltips("#organizer_quickFilter"),m.tooltips("#organizer_quickFilter ul ul",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})):$("#organizer_quickFilter").hide().html("")};a.setCollectionButtons=function(b){var c=-1,d=[],e={},f,g;for(g in a.sortedCollectionButtons)if(l.has(a.sortedCollectionButtons,
g)){var k=a.sortedCollectionButtons[g],h=a.focus.collection_buttons[k];a.checkButtonHidden(h)||!a.searchMatches&&(q(h.do_csv_export)||q(h.hide_when_no_search_results))||(f=a.checkDisabled(h),d[++c]={id:k,css_class:x(h.css_class,"label_without_icon"),label:x(h.label,h.name),parent:h.parent,disabled:f},e[k]=c,d[c].tooltip=f&&h.disabled_tooltip?h.disabled_tooltip:h.tooltip,f?d[c].onclick="return false;":h.navigation_path?d[c].href="#/"+h.navigation_path:h.frontend_link?d[c].href=l.addBasePath(h.frontend_link):
d[c].onclick="zenarioO.collectionButtonClick('"+R(k)+"'); return false;")}var w;for(k in e)l.has(e,k)&&(w=a.focus.collection_buttons[k].parent)&&(c=e[w])!==n&&(d[c].children||(d[c].children=[],d[c].css_class+=" organiser_button_with_children"),d[c].children[d[c].children.length]=d[e[k]]);for(c=d.length-1;0<=c;--c)a.focus.collection_buttons[d[c].id].parent&&d.splice(c,1);d.length?(a.showCollectionButtons(m.microTemplate("zenario_organizer_button",d),b),m.tooltips("#organizer_collectionToolbarButtons"),
m.tooltips("#organizer_collectionToolbarButtons ul ul",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})):a.hideCollectionButtons(b)};a.buttonsPrevHTML="";a.fadeOutLastButtons=function(b,c,d){if(h("organizer_rightColumnOptions")){var e=$("#organizer_collectionToolbar"),f=$("#organizer_collectionToolbarButtons"),g=$("#organizer_itemToolbar"),k=$("#organizer_itemToolbarButtons"),l=$("#organizer_previousToolbar"),m=$("#organizer_previousToolbarButtons");e.is(":visible")&&e.clearQueue().hide();
g.is(":visible")&&g.clearQueue().hide();c?k.html(b):f.html(b);l.clearQueue().hide();d&&a.buttonsPrevHTML!=b?(a.buttonsPrevHTML&&(m.html(a.buttonsPrevHTML),l.show().fadeOut({duration:250,easing:"zenarioLinearWithDelayAfterwards",complete:function(){m.html("")}})),c?g.css("animation","none").fadeIn({duration:250,easing:"zenarioLinearWithDelayAfterwards",complete:function(){g.css("animation","");g.addClass("yellow_flash")}}):e.css("animation","none").fadeIn({duration:250,easing:"zenarioLinearWithDelay",
complete:function(){e.css("animation","");e.addClass("white_flash")}})):c?g.show():e.show();a.buttonsPrevHTML=b}};a.showCollectionButtons=function(b,c){a.fadeOutLastButtons(b,!1,c)};a.hideCollectionButtons=function(b){a.fadeOutLastButtons("",!1,b)};a.showItemButtons=function(b,c){a.fadeOutLastButtons(b,!0,c)};a.hideItemButtons=function(b){a.fadeOutLastButtons("",!0,b)};a.setItemButtons=function(b){var c,d=-1,e,f=[],g={},k,h;if(0<a.itemsSelected)for(var w in a.sortedItemButtons)if(l.has(a.sortedItemButtons,
w)&&(c=a.sortedItemButtons[w],e=a.focus.item_buttons[c],!a.checkButtonHidden(e))){var t=h=1;q(e.multiple_select)&&(h=e.multiple_select_max_items,q(e.multiple_select_only)&&(t=2));if(!(a.itemsSelected<t||h&&a.itemsSelected>h)&&a.checkTraits(e,a.selectedItems))if(h=a.checkDisabled(e,a.selectedItems),f[++d]={id:c,css_class:x(e.css_class,"label_without_icon"),label:x(e.label,e.name),parent:e.parent,disabled:h},g[c]=d,1<a.itemsSelected&&e.multiple_select_label&&(f[d].label=e.multiple_select_label),f[d].tooltip=
h&&e.disabled_tooltip?e.disabled_tooltip:1<a.itemsSelected&&e.multiple_select_tooltip?e.multiple_select_tooltip:e.tooltip,h)f[d].onclick="return false;";else if(e.navigation_path){var r,s;(r=a.getKeyId(!0))&&(s=a.focus.items[r])&&s.navigation_path?f[d].href="#/"+s.navigation_path:f[d].href="#/"+e.navigation_path}else e.frontend_link?(r=a.getKeyId(!0))&&(s=a.focus.items[r])&&s.frontend_link?f[d].href=l.addBasePath(s.frontend_link):f[d].href=l.addBasePath(e.frontend_link):(f[d].onclick="zenarioO.itemButtonClick('"+
R(c)+"'); return false;",e.upload&&q(e.upload.drag_and_drop)&&!a.upload&&(a.upload=e.upload,a.uploadIsItemLevel=!0))}for(c in g)l.has(g,c)&&(k=a.focus.item_buttons[c].parent)&&(d=g[k])!==n&&(f[d].children||(f[d].children=[],f[d].css_class+=" organiser_button_with_children"),f[d].children[f[d].children.length]=f[g[c]]);for(d=f.length-1;0<=d;--d)e=a.focus.item_buttons[f[d].id],(e.parent||q(e.hide_when_children_are_not_visible)&&!f[d].children)&&f.splice(d,1);f.length?(a.showItemButtons(m.microTemplate("zenario_organizer_button",
f),b),m.tooltips("#organizer_itemToolbarButtons"),m.tooltips("#organizer_itemToolbarButtons ul ul",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}})):a.hideItemButtons(b);a.setWrapperClass("multiple_items_selected",1<a.itemsSelected)};a.checkDisabled=function(b,c){var d;if(q(b.disabled)||b.disabled_if!==n&&m.eval(b.disabled_if,b))return!0;if(c&&b.disabled_if_for_any_selected_items!==n)for(d in c)if(l.has(c,d)&&m.eval(b.disabled_if_for_any_selected_items,b,a.focus.items[d],d))return!0;
if(c&&b.disabled_if_for_all_selected_items!==n){for(d in c)if(l.has(c,d)&&!m.eval(b.disabled_if_for_all_selected_items,b,a.focus.items[d],d))return!1;return!0}return!1};a.checkTraits=function(b,c){var d,e;if(!b)return!0;if(b.visible_if_for_all_selected_items!==n)for(d in c)if(l.has(c,d)&&!m.eval(b.visible_if_for_all_selected_items,b,a.focus.items[d],d))return!1;e=!1;if(b.visible_if_for_any_selected_items!==n){for(d in c)if(l.has(c,d)&&m.eval(b.visible_if_for_any_selected_items,b,a.focus.items[d],
d)){e=!0;break}if(!e)return!1}e=!0;var f={traits:{condition:function(b,c){return a.focus.items[b].traits&&q(a.focus.items[b].traits[c])}},without_traits:{condition:function(b,c){return!a.focus.items[b].traits||!q(a.focus.items[b].traits[c])}},with_columns_set:{condition:function(b,c){return q(a.focus.items[b][c])}},without_columns_set:{condition:function(b,c){return!q(a.focus.items[b][c])}}};f.one_with_traits=$.extend(!0,{},f.traits,{one:!0});f.one_without_traits=$.extend(!0,{},f.without_traits,{one:!0});
f.one_with_columns_set=$.extend(!0,{},f.with_columns_set,{one:!0});f.one_without_columns_set=$.extend(!0,{},f.without_columns_set,{one:!0});for(var g in f)if(l.has(f,g)){if(b[g])for(d in e=!f[g].one,c)if(l.has(c,d)){var k=!0,h;for(h in b[g])if(l.has(b[g],h)&&!a.isInfoTag(h)&&q(b[g][h])&&!f[g].condition(d,h)){k=!1;break}if(f[g].one){if(k){e=!0;break}}else if(!k){e=!1;break}}if(!e)break}return e};a.checkItemPickable=function(b){var c={};c[b]=!0;return a.checkTraits(g.zenarioOSelectObject,c)&&!a.checkDisabled(g.zenarioOSelectObject,
c)};a.setInlineButtons=function(b){var c=-1,d=[],e,f;for(f in a.sortedInlineButtons)if(l.has(a.sortedInlineButtons,f)){var g=a.sortedInlineButtons[f],k=a.focus.inline_buttons[g];e={};e[b]=!0;if(!a.checkButtonHidden(k)&&a.checkTraits(k,e))if(e=a.checkDisabled(k,e),d[++c]={id:g,css_class:x(k.css_class,"label_without_icon"),label:x(k.label,k.name),parent:k.parent,disabled:e},d[c].tooltip=e&&k.disabled_tooltip?k.disabled_tooltip:k.tooltip,e)d[c].onclick="return false;";else if(k.navigation_path){var h;
(h=a.focus.items[b])&&h.navigation_path?d[c].href="#/"+h.navigation_path:d[c].href="#/"+k.navigation_path}else k.frontend_link?(h=a.focus.items[b])&&h.frontend_link?d[c].href=a.parseReturnLink(h.frontend_link):d[c].href=a.parseReturnLink(k.frontend_link):d[c].onclick="zenarioO.inlineButtonClick('"+R(g)+"', '"+R(b)+"'); return false;"}return d.length?d:n};a.setUploads=function(b){for(var c in a.sortedCollectionButtons)l.has(a.sortedCollectionButtons,c)&&(b=a.focus.collection_buttons[a.sortedCollectionButtons[c]],
a.checkButtonHidden(b)||(q(b.do_csv_export)&&(a.CSVExportEnabled=!0),b.upload&&q(b.upload.drag_and_drop)&&!a.upload&&(a.upload=b.upload,a.uploadIsItemLevel=!1)));if(a.upload&&m.canDoHTML5Upload()){c=a.getKey(a.uploadIsItemLevel);if(a.upload.request)for(var d in a.upload.request)l.has(a.upload.request,d)&&(a.isInfoTag(d)||(c[d]=a.upload.request[d]));c.__pluginClassName__=a.upload.class_name;c.__path__=a.path;c.method_call="handleOrganizerPanelAJAX";m.setHTML5UploadFromDragDrop(M+"zenario/ajax.php",
c,a.selectCreatedIds,h("organizer_rightColumn"));$("#organizer_rightColumn").addClass("upload_enabled").removeClass("dragover")}else a.clearUpload()};a.clearUpload=function(){delete a.upload;delete a.uploadIsItemLevel;m.clearHTML5UploadFromDragDrop();$("#organizer_rightColumn").removeClass("upload_enabled").removeClass("dragover")};a.chooseButtonActive=function(){return g.zenarioOSelectMode&&(a.path==g.zenarioOTargetPath||!1===g.zenarioOTargetPath)};a.setChooseButton=function(){if(g.zenarioOSelectMode){var b=
x(g.zenarioOChoosePhrase,t.choose),c=!0,d="submit_disabled";a.chooseButtonActive()&&a.checkTraits(g.zenarioOSelectObject,a.selectedItems)&&!a.checkDisabled(g.zenarioOSelectObject,a.selectedItems)&&(0<a.itemsSelected||g.zenarioOAllowNoSelection)&&(1>=a.itemsSelected||g.zenarioOMultipleSelect)?(c=!1,d=g.zenarioOChooseButtonActiveClass?"submit_selected":"submit",0==a.itemsSelected&&g.zenarioOAllowNoSelection&&g.zenarioONoSelectionChoosePhrase?b=g.zenarioONoSelectionChoosePhrase:1<a.itemsSelected&&g.zenarioOChooseMultiplePhrase&&
(b=g.zenarioOChooseMultiplePhrase)):g.zenarioOAllowNoSelection&&g.zenarioONoSelectionChoosePhrase&&(b=g.zenarioONoSelectionChoosePhrase);h("organizer_choose_button").disabled=c;h("organizer_choose_button").className=d;h("organizer_choose_button").value=s(b)}};a.setPages=function(){if(a.page)if(a.pageCount=a.searchMatches!==n?Math.ceil(a.searchMatches/a.thisPageSize):1,h("organizer_pagePrev").style.display=h("organizer_pageNext").style.display=h("organizer_pagePrevOff").style.display=h("organizer_pageNextOff").style.display=
"none",1==a.pageCount)h("organizer_pages").innerHTML="";else{1<a.page?h("organizer_pagePrev").style.display="":h("organizer_pagePrevOff").style.display="";a.page<a.pageCount?h("organizer_pageNext").style.display="":h("organizer_pageNextOff").style.display="";var b=[-999999,-1E5,-7E4,-4E4,-2E4,-1E4,-7E3,-4E3,-2E3,-1E3,-700,-400,-200,-100,-70,-40,-20,-10,-7,-4,-3,-2,-1,0,1,2,3,4,7,10,20,40,70,100,200,400,700,1E3,2E3,4E3,7E3,1E4,2E4,4E4,7E4,1E5,999999],c={},d;for(d in b)if(l.has(b,d)){var e=b[d],f=a.page-
1+e;if(0>f)f=0;else if(f>=a.pageCount)f=a.pageCount-1;else{for(var g=1E5;1<g;g/=10)if(e<-g||g<e){f=f-(a.page-1)%g-1;break}0>f?f=0:f>=a.pageCount&&(f=a.pageCount-1)}c[1*f+1]=!0}var b="",k;for(k in c)l.has(c,k)&&(b+=(b?" ":"")+k);b=b.length;d="";e=Math.floor(($("#organizer_itemCountWrap").width()-$("#organizer_before_pages").width()-$("#organizer_after_pages").width())/10);e-=(" "+a.page).length;e-=(" "+a.pageCount).length;if(0<e){b-=(" "+a.page).length;b-=(" "+a.pageCount).length;if(b>e)for(k in f=
e,c)l.has(c,k)&&1!=k&&k!=a.page&&k!=a.pageCount&&(f>e&&delete c[k],f=(f+e)%b);for(k in c)l.has(c,k)&&(d+='<a class="'+(k==a.page?"currentPage":"page")+'" onclick="zenarioO.goToPage('+k+');">'+k+"</a> ")}h("organizer_pages").innerHTML=d}};a.getPanelTitle=function(){var b=a.focus.title;!g.zenarioOSelectMode||a.path!=g.zenarioOTargetPath&&!1!==g.zenarioOTargetPath||(g.zenarioOMultipleSelect&&a.focus.multiple_select_mode_title?b=a.focus.multiple_select_mode_title:a.focus.select_mode_title&&(b=a.focus.select_mode_title));
return b};a.setPanelTitle=function(){if(a.focus&&h("organizer_rightColumnTitle")){h("organizer_rightColumnTitle").style.display="";var b=a.getPanelTitle();a.filteredView&&(b+=t.refined);a.focus.item&&a.focus.item.css_class?h("organizer_panelTitle").innerHTML='<div class="listicon '+a.focus.item.css_class+'"></div><div>'+s(b)+"</div>":h("organizer_panelTitle").innerHTML=s(b);Math.max(0,x($("#organizer_rightColumnTitle").width(),0,0)-75-x($("#organizer_collectionToolbar").width(),90));m.setTooltipIfTooLarge("#organizer_panelTitle",
b,m.tooltipLengthThresholds.organizerPanelTitle);m.storekeeperWindow&&(W.title=a.pageTitle+t.colon+b)}};a.setTrash=function(){!g.zenarioOSelectMode&&a.focus&&a.focus.trash?(h("organizer_trash_button").style.display="",h("organizer_trash_button").className=q(a.focus.trash.empty)?x(a.focus.trash.empty_css_class,"trash_button_empty"):x(a.focus.trash.full_css_class,"trash_button_full"),m.tooltips("#organizer_trash_button a",{position:{my:"center bottom-12",at:"center top",collision:"flipfit",using:l.tooltipsUsing},
items:"*",content:q(a.focus.trash.empty)?x(a.focus.trash.empty_tooltip,t.viewTrash):x(a.focus.trash.full_tooltip,t.viewTrash)})):h("organizer_trash_button").style.display="none"};a.setPanelItems=function(){if(h("organizer_rightColumnContent")){var b="",b=!1,c,d,e=-1,f=-1,g=!1,k="firstcell ",s={},w=0,x={},r={items:[],itemsById:{},columns:[],totalWidth:0,maxNumberOfInlineButtons:0,allItemsSelected:a.allItemsSelected(),reordering:a.reorderingUsingOldMethod?"organizer_reordering":"",slidedown_view_microtemplate:a.focus.slidedown_view_microtemplate};
for(d in a.sortedColumns)l.has(a.sortedColumns,d)&&(c=a.sortedColumns[d],a.isShowableColumn(c,!0)&&(g=c));for(d in a.sortedColumns)if(l.has(a.sortedColumns,d)){c=a.sortedColumns[d];if(a.boldColsInListView==c||-1!==a.boldColsInListView.indexOf("[["+c+"]]"))x[c]=!0;a.isShowableColumn(c,!0)&&(s[c]=a.prefs[a.voPath]&&a.prefs[a.voPath].colSizes&&a.prefs[a.voPath].colSizes[c]?Math.max(a.prefs[a.voPath].colSizes[c],a.columnWidths.xxsmall):a.focus.columns[c].width,s[c]&&a.columnWidths[s[c]]?s[c]=a.columnWidths[s[c]]:
(s[c]*=1)||(s[c]=a.defaultColumnWidth),r.totalWidth&&(r.totalWidth+=a.columnSpacing),r.totalWidth+=s[c]+a.columnPadding,r.columns[++e]={id:c,htmlId:"organizer_column__"+c,css_class:k+(g==c?"lastcell":"")+(x[c]?" label_column":"")+a.columnCssClass(c),title:a.focus.columns[c].title,tooltip:a.focus.columns[c].tooltip,width:s[c]},k="")}r.totalWidth+=a.columnsExtraSpacing;a.shownItems={};a.shownItemsLength=0;if(a.focus.items){var e=a.page*a.thisPageSize,R=e-a.thisPageSize,e=Math.min(e,a.searchMatches);
h("organizer_pageStart").innerHTML=R+1;h("organizer_pageStop").innerHTML=e;var S="firstrow ",J;for(J in a.searchedItems)if(l.has(a.searchedItems,J)&&!a.isInfoTag(J)){var b=!0,v=a.searchedItems[J];if(!a.focus.__item_hierarchy__)if(J>=e)break;else if(J<R)continue;if(a.focus.items[v]){c=!1;a.itemHierarchy[v]&&(c=a.itemHierarchy[v]);r.items[++f]={id:v,parentId:c,cells:[],slidedown_view_open:a.inCloseUpView&&v==a.itemToSelect,slidedown_view_microtemplate:a.focus.slidedown_view_microtemplate,grid_view_microtemplate:a.focus.grid_view_microtemplate,
canDoubleClick:!!a.itemDoubleClickLink(v),canDrag:a.changingHierarchyView&&!q(a.focus.items[v].disable_reorder),label:a.applySmallSpaces($.trim(a.applyMergeFields(a.labelFormat,!1,v,!0))).replace(/\n/g,"<br/>"),selected:!!a.selectedItems[v],css_class:a.rowCssClass(v)+" "+S};r.items[f].image_css_class=a.getItemCSSClass(v);"grid"!=a.view_mode&&a.focus.items[v].list_image?(r.items[f].image_css_class+=" organiser_item_with_image",r.items[f].image=l.addBasePath(a.focus.items[v].list_image)):"grid"==a.view_mode&&
a.focus.items[v].image&&(r.items[f].image_css_class+=" organiser_item_with_image",r.items[f].image=l.addBasePath(a.focus.items[v].image));r.items[f].tooltip=a.focus.items[v].tooltip;!r.items[f].tooltip&&a.focus.item&&(a.focus.item.tooltip_when_link_is_active&&a.itemDoubleClickLink(v)?r.items[f].tooltip=a.applyMergeFields(a.focus.item.tooltip_when_link_is_active,!0,v):a.focus.item.tooltip&&(r.items[f].tooltip=a.applyMergeFields(a.focus.item.tooltip,!0,v)));var G=-1,k="firstcell ",D=!1,P=!1,A;for(d in a.sortedColumns)l.has(a.sortedColumns,
d)&&(c=a.sortedColumns[d],a.isShowableColumn(c,!0)&&(A=a.columnValue(v,c),D=!(""==A&&0!==A),r.items[f].cells[++G]={id:c,first:!!k,css_class:"organizer_column__"+c+"__cell "+S+k+(g==c?"lastcell":"")+(q(a.focus.columns[c].align_right)?" right":"")+(x[c]?" label_column":"")+a.columnCssClass(c,v),value:A,needsComma:D&&P,width:s[c]},k="",P=D&&!(A+"").match(/\W\s*$/)));r.items[f].inline_buttons=a.setInlineButtons(v);r.items[f].inline_buttons&&(w=r.items[f].inline_buttons.length)&&w>r.maxNumberOfInlineButtons&&
(r.maxNumberOfInlineButtons=w);r.itemsById[v]=r.items[f];S="";a.shownItems[v]=!0;++a.shownItemsLength}}for(f in r.items)l.has(r.items,f)&&(r.items[f].maxNumberOfInlineButtons=r.maxNumberOfInlineButtons)}for(v in a.selectedItems)l.has(a.selectedItems,v)&&(a.shownItems[v]||delete a.selectedItems[v]);b||(r.no_items_message=a.filteredView?a.focus.no_items_in_search_message?a.focus.no_items_in_search_message:t.noItemsInSearch:a.focus.no_items_message?a.focus.no_items_message:t.noItems);b="grid"==a.view_mode?
m.microTemplate("zenario_organizer_grid",r):"hierarchy"==a.view_mode?m.microTemplate("zenario_organizer_hierarchy",r):m.microTemplate("zenario_organizer_list",r);h("organizer_rightColumnContent").innerHTML=b;h("organizer_rightColumnContent").className=a.view_mode+"_view";if("hierarchy"==a.view_mode){var F;J=!0;d={};var B=$("#organizer_rightColumnContent .dd"),v=99;a.focus.reorder&&a.focus.reorder.hierarchy_depth&&(v=a.focus.reorder.hierarchy_depth);B.nestable({maxDepth:v});if(a.searchTerm===n){B.nestable("collapseAll");
a.focus.__open_item_in_hierarchy__&&(d[a.focus.__open_item_in_hierarchy__]=!0);if(a.openItemsInHierarchy)for(F in a.openItemsInHierarchy)l.has(a.openItemsInHierarchy,F)&&(d[F]=!0);for(F in a.selectedItems)l.has(a.selectedItems,F)&&a.itemHierarchy[F]&&(d[a.itemHierarchy[F]]=!0);for(;J;)for(F in J=!1,d)l.has(d,F)&&a.itemHierarchy[F]&&!d[a.itemHierarchy[F]]&&(J=d[a.itemHierarchy[F]]=!0);for(F in d)l.has(d,F)&&(J=$(h("organizer_item_"+F)).parent(),J.length&&B.nestable("expandItem",J))}if(a.changingHierarchyView){var O=
function(b){var c=B.nestable("serialize_zenario_modified_version"),d,e,f,g=!1,h={};for(e in c)if(l.has(c,e)){var k=!1,p=!1,q=c[e].length;for(f=0;f<q;++f)(d=c[e][f],a.reorderingUsingNewMethod)?a.itemHierarchyArray&&a.itemHierarchyArray[e]&&a.itemHierarchyArray[e][f]!==n&&a.itemHierarchyArray[e][f]==d||(h[d]={parentId:e,ordinal:f+1},g=k=!0):e!=(a.itemHierarchy[d]!==n?a.itemHierarchy[d]:0)&&(h[d]={parentId:e},g=k=!0);if(a.reorderingUsingNewMethod&&k){for(f=0;f<q;++f)if(d=c[e][f],!h[d]&&f+1!=a.focus.items[d][a.focus.reorder.column]){p=
!0;break}if(p)for(f=0;f<q;++f)d=c[e][f],h[d]={parentId:e,ordinal:f+1}}}if(!b)return g;if(g){b=a.getKey();c="";b.hierarchy=!0;for(d in h)l.has(h,d)&&(c+=(c?",":"")+d,b["parent_id__"+d]=h[d].parentId,a.reorderingUsingNewMethod&&(b.reorder=!0,b["ordinal__"+d]=h[d].ordinal,b["item__"+d]=h[d].ordinal,a.focus.items[d][a.focus.reorder.column]=h[d].ordinal));b.id=c;d="zenario/ajax.php?__pluginClassName__="+a.focus.class_name+"&__path__="+a.path+"&method_call=handleOrganizerPanelAJAX";delete l.rev;(d=l.nonAsyncAJAX(M+
d,b))&&m.showMessage(d);a.refresh()}};B.on("change",function(){(a.changingHierarchy=O(!1))&&$("#organizer_applyButton").unbind().click(function(){O(!0)});a.setWrapperClass("changing_hierarchy",a.changingHierarchy);a.setButtons()})}B.on("collapseItem",function(){var b=!1;a.openItemsInHierarchy={};$(".organizer_row[data-id]:visible").each(function(b,c){a.openItemsInHierarchy[$(c).data("id")]=!0});for(var c in a.selectedItems)l.has(a.selectedItems,c)&&a.selectedItems.hasOwnProperty(c)&&!a.openItemsInHierarchy[c]&&
(delete a.selectedItems[c],b=!0);b&&(a.setButtons(!0),a.saveSelection())});B.on("expandItem",function(){a.focus.reorder&&a.focus.reorder.lazy_load&&l.actAfterDelayIfNotSuperseded("zenario_hierarchy_expand",function(){if(m.uploading||a.changingHierarchy)return!1;a.saveSelection();a.refresh()},1)})}m.tooltips("#organizer_rightColumnContent [title]");var V=$("#organizer_rightColumnContent .organizer_sort_and_resize_wrapper"),E=$("#organizer_rightColumnContent .organizer_sort_and_resize_wrapper .organizer_sortable"),
H=$("#organizer_rightColumnContent .organizer_sort_and_resize_wrapper .organizer_resizable"),C={},I={},L=function(){var a,b=$("#organizer_non_sortable_resizeable_cols").width();H.each(function(c,d){if(a=$(d).outerWidth())b+=a});$("#organizer_list_view").css("min-width",b+"px");$("#organizer_list_view .organizer_row").css("min-width",b+"px")},K=function(a,b){E.each(function(a,b){var c=b.id;if(c){C[c]||(C[c]=$("."+c+"__cell"));var d=1*$(b).position().left-I[c];C[c].css("left",d+"px")}})},u=function(b,
c,d){if(b=$(c.element).attr("id"))C[b]||(C[b]=$("."+b+"__cell")),d?a.resizeColumn(b.replace("organizer_column__",""),c.element.width()):(V.css("width","auto"),C[b].width(c.element.width()),L())};H.resizable({handles:"e",minWidth:a.columnWidths.xxsmall,start:function(b,c){a.resizingColumn=!0},resize:u,stop:function(b,c){u(b,c,!0);setTimeout(function(){delete a.resizingColumn},50)}});V.sortable({containment:"parent",items:".organizer_sortable",start:function(b,c){a.sortingColumn=!0},sort:K,stop:function(b,
c){K(b,c);setTimeout(function(){delete a.sortingColumn},50);var d=V.sortable("toArray"),e;for(e in d)l.has(d,e)&&(d[e]=d[e].replace("organizer_column__",""));a.switchColumnOrder(d)}});L();E.each(function(a,b){b.id&&(I[b.id]=1*$(b).position().left)})}};a.toggleSlidedownView=function(b,c){l.stop(c);a.inCloseUpView&&b==a.itemToSelect?a.closeSlidedownView(b):(a.selectSingleItem(b,!0),a.openSlidedownView(b),a.setButtons(!0),a.saveSelection());a.setHash()};a.openSlidedownView=function(b){a.inCloseUpView&&
a.itemToSelect&&a.closeSlidedownView(a.itemToSelect);var c=$(h("organizer_slidedown_view_toggle_"+b)),d=$(h("organizer_slidedown_"+b));d.is(":visible")||(c.removeClass("organizer_slidedown_view_toggle_closed").addClass("organizer_slidedown_view_toggle_open"),d.clearQueue().removeClass("organizer_slidedown_view_closed").addClass("organizer_slidedown_view_open").html(m.microTemplate(a.focus.slidedown_view_microtemplate,{id:b})).slideDown());a.inCloseUpView=!0;a.itemToSelect=b};a.closeSlidedownView=
function(b){if(b===n)if(a.inCloseUpView&&a.itemToSelect)b=a.itemToSelect;else return;var c=$(h("organizer_slidedown_view_toggle_"+b)),d=$(h("organizer_slidedown_"+b));d.is(":visible")&&(c.removeClass("organizer_slidedown_view_toggle_open").addClass("organizer_slidedown_view_toggle_closed"),d.clearQueue().slideUp(400,function(){d.removeClass("organizer_slidedown_view_open").addClass("organizer_slidedown_view_closed").html("")}));a.inCloseUpView=!1};a.getItemCSSClass=function(b){return a.focus.items[b].css_class?
a.focus.items[b].css_class:a.focus.item?a.focus.item.css_class:n};a.setItemCount=function(){var b=0;a.searchMatches!==n&&(b=a.searchMatches);b?(h("organizer_itemCount").innerHTML=s(b),h("organizer_itemCountWrap").style.visibility="visible"):a.hideItemCount()};a.hideItemCount=function(){h("organizer_itemCount").innerHTML="";h("organizer_itemCountWrap").style.visibility="hidden"};a.fillLowerLeft=function(){var a,c,d=[],e=l.sendSignal("fillStorekeeperLowerLeft");e.push([[m.microTemplate("zenario_organizer_lower_left_column",
{}),0]]);for(a in e)if(l.has(e,a))for(c in e[a])l.has(e[a],c)&&d.push(e[a][c]);d.sort(m.sortArray);for(a in d)l.has(d,a)&&(d[a]=d[a][0]);return d.join("\n")};a.closeSelectMode=function(){a.closeInfoBox();m.storekeeperWindow?(g.parent.zenarioA.closeBox("AdminOrganizer",!0),a.go(a.defaultPathInIframePreload),m.showAJAXLoader()):(a.go(a.defaultPathInIframePreload),m.closeBox("sk"));return a.firstLoaded=!1};a.choose=function(){if(a.lastSuccessfulGoNum==a.goNum&&g.parent&&g.zenarioOSelectMode&&(a.path==
g.zenarioOTargetPath||!1===g.zenarioOTargetPath)&&(0<a.itemsSelected||g.zenarioOAllowNoSelection)&&(1>=a.itemsSelected||g.zenarioOMultipleSelect)){a.stopRefreshing();var b=a.getKey(!0),c=a.path,d=$.extend(!0,{},a.focus),e;b._items={};for(e in a.selectedItems)if(l.has(a.selectedItems,e)&&(a.isInfoTag(e)||(b._items[e]=!0),!g.zenarioOMultipleSelect))break;!g.zenarioOMultipleSelect&&a.selectedItems&&b.id?(e=d.items[b.id],e.__label_tag__=a.defaultSortColumn):e={};a.closeSelectMode();if(g.zenarioOMultipleSelect)g.parent[g.zenarioOCallbackObject][g.zenarioOCallbackFunction](c,
b,n,d);else g.parent[g.zenarioOCallbackObject][g.zenarioOCallbackFunction](c,b,e,d)}};a.setupSlotAdminBox=function(b,c){b=$.extend(!0,{},b);delete b.call_js_function;b.admin_box=b.custom_admin_box;b.admin_box.key||(b.admin_box.key={});b.admin_box.key.slotName=c;b.admin_box.key.moduleId=a.focus.items[c].module_id;b.admin_box.key.instanceId=a.focus.items[c].instance_id;m.action(a,b,!0)};a.infoBox=function(a){var c=m.microTemplate("zenario_organizer_debug_info",{});m.openBox(c,"zenario_fbDebugInfoBox",
"DebugInfoBox",a,600,-286,28,!1,!1,n,n,n,n,!1,!1)};a.closeInfoBox=function(){m.closeBox("DebugInfoBox")};a.yourWorkInProgressLastUpdated=0;a.updateYourWorkInProgress=function(){var b=(new Date).getTime();if(a.yourWorkInProgressLastUpdated-b<-a.yourWorkInProgressLastUpdateFrequency){a.yourWorkInProgressLastUpdated=b;var c=h("zenario_ywip_dropdown");c&&($(c).removeClass("zenario_ywip_loaded").addClass("zenario_ywip_loading"),setTimeout(function(){var b=l.nonAsyncAJAX(M+"zenario/admin/ajax.php?_json=1&path=zenario__content/panels/content&_sort_col=last_modified_datetime&_sort_desc=1&_start=0&_limit="+
a.yourWorkInProgressItemCount+"&refinerId=&refinerName=your_work_in_progress&refiner__your_work_in_progress=&_get_item_data=1",!1,!0,!0),b=m.microTemplate("zenario_ywip",b);c.innerHTML=b;$(c).removeClass("zenario_ywip_loading").addClass("zenario_ywip_loaded")},1))}};$(W).ready(a.updateYourWorkInProgress);a.sizing=!1;a.lastSize=!1;a.size=function(b){var c=46,d=66,e=$("#zenario_fbsk");a.sizing&&clearTimeout(a.sizing);if(h("organizer__box_wrap")){var f,n;m.storekeeperWindow?(f=Math.floor($(g).width()),
n=Math.floor($(g).height())):(f=Math.floor(e.width()),n=Math.floor(e.height()));f&&n&&(550>f&&(f=550),400>n&&(n=400),b||a.lastSize!=f+"x"+n)&&(e.length&&(h("zenario_fbsk").className=m.getSKBodyClass()),m.storekeeperWindow||e.height(n),a.focus&&a.focus.banner||(d=0),g.zenarioONotFull&&--c,h("organizer_leftColumn").style.height=1*n-46-c-2+"px",h("organizer_rightColumn").style.height=h("organizer_preloader_circle").style.height=1*n-46-c+"px",h("organizer_Outer").style.height=1*n-46+"px",h("organizer_colsortfields")&&
(l.browserIsIE(6)?h("organizer_colsortfields").style.height=1*n-46-130+"px":h("organizer_colsortfields").style.maxHeight=1*n-46-130+"px"),b=1*n-46-c-40-d-30-2-a.columnPadding+0-55-13,h("organizer_rightColumnContent")&&(h("organizer_rightColumnContent").style.height=b+"px"),a.showLeftColumn?(b=204,h("organizer_leftColumn").style.display=h("organizer_leftColumnOuter").style.display=""):(b=0,h("organizer_leftColumn").style.display=h("organizer_leftColumnOuter").style.display="none"),h("organizer__box_top").style.width=
h("organizer__box_wrap").style.width=h("organizer__box_center").style.width=h("organizer__box_bottom").style.width=f-0+"px",h("organizer_Outer").style.width=f-22+"px",h("organizer_wrapInner_bm").style.width=f-32+"px",h("organizer_wrapOuter_tm").style.width=f-0+"px",h("organizer_rightColumn").style.width=h("organizer_preloader_circle").style.width=f-30-b+"px",h("organizer_rightColumnTitle")&&(h("organizer_rightColumnTitle").style.width=f-30-b-2+"px"),h("organizer_rightColumnContent")&&(h("organizer_rightColumnContent").style.width=
f-30-b-2+"px"),g.zenarioOSelectMode?h("organizer_choose_button").style.display="inline":h("organizer_choose_button").style.display="none",a.setPages(),a.setPanelTitle(),a.lastSize=f+"x"+n,a.setTopLevelNavScrollStatus(),a.adjustSlideDownViewInGridMode());l.browserIsIE()&&h("organizer_rightColumnContent")&&(l.browserIsIE(8)?h("organizer_Outer").onselectstart=function(){return!1}:(h("organizer_leftColumnOuter").onselectstart=h("organizer_itemCountWrap").onselectstart=function(){return!1},h("organizer_rightColumn").onselectstart=
function(){return!(1<a.itemsSelected)}));a.sizing=setTimeout(a.size,500)}};a.adjustSlideDownViewInGridMode=function(){if("grid"==a.view_mode&&a.focus.slidedown_view_microtemplate){var b,c=0,d=1,e,f,g=[],h={};$("#organizer_items_wrapper > div.organizer_slidedown_view").each(function(a,b){h[b.id]=b.style.display;b.style.display="none"});$("#organizer_items_wrapper > div.organizer_item").each(function(a,g){b=$(g);f=b.offset().top;e!==n&&e!=f?(d=Math.max(d,c),c=1):++c;e=f});d=Math.max(d,c);$("#organizer_items_wrapper > div.organizer_slidedown_view").each(function(a,
c){b=$(c);c.style.display=h[c.id];g.push(b.detach())});c=0;$("#organizer_items_wrapper > div.organizer_item").each(function(e,f){b=$(f);++c>=d&&(a.adjustSlideDownViewInGridMode2(g,b,d),c=0)});a.adjustSlideDownViewInGridMode2(g,b,d)}};a.adjustSlideDownViewInGridMode2=function(a,c,d){var e,f;for(e=0;e<d&&a[0];++e)f=a.shift(),c.after(f),c=f}})(this,URLBasePath,window,document,zenario,zenarioA,zenarioTab,zenarioAT,zenario.get,zenario.engToBoolean,zenario.htmlspecialchars,zenario.ifNull,zenario.jsEscape,
zenarioA.phrase)};

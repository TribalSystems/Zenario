zenario.lib(function(l,J,L,m,C,x,y,q,T,U,a,p,t,s,w,P,u,V,W,r){a.getItemLinkTimeoutTime=7E3;a.yourWorkInProgressLastUpdateFrequency=6E4;a.yourWorkInProgressItemCount=10;a.itemDoubleClickTime=500;a.searchDelayTime=700;a.firstLoaded=!1;a.defaultColumnWidth=150;a.columnsExtraSpacing=1;a.columnSpacing=1;a.columnPadding=10;a.columnWidths={xxsmall:45,xsmall:75,small:100,medium:150,large:225,xlarge:350,xxlarge:500};a.pi=!1;a.panelTypes={};a.inspectionView=!1;var v=m.zenarioVO=new zenarioAF;v.init("zenarioVO",
"zenario_filters");a.defaultPath="zenario__content/panels/content";a.defaultPathInIframePreload="dummy_item/panels/loading_message";a.inInspectionView=function(b){if(!a.inspectionViewEnabled())return a.inspectionView=!1;if(b===l)return a.inspectionView;!1===b?a.inspectionView=a.inspectionViewItem=!1:(a.inspectionView=!0,a.inspectionViewItem=b);a.setHash()};a.inspectionViewItemId=function(){return a.inInspectionView()?a.inspectionViewItem:!1};a.inspectionViewEnabled=function(){return a.pi&&a.pi.returnInspectionViewEnabled()};
a.toggleInspectionView=function(b){a.inspectionViewEnabled()&&a.pi.toggleInspectionView(b)};a.openInspectionView=function(b){a.inspectionViewEnabled()&&a.pi.openInspectionView(b)};a.closeInspectionView=function(b){a.inspectionViewEnabled()&&a.pi.closeInspectionView(b)};a.print=function(){try{var a=$("#organizer_panelTitle div:eq(1)").text(),c=$(".organizer_list_view").removeAttr("style").html(),d=m.open("",a,"height=50,width=50");d.document.write("<html><head><title></title>");d.document.write('<link rel="stylesheet" href="http://dev-jc.tribiq.com/HEAD/zenario/styles/admin_organizer_print.css" type="text/css" />');
d.document.write("<script>myFunction = function() { window.print(); window.close();};\x3c/script>");d.document.write('</head><body onload="myFunction()"><div class="table_wrapper"><h1 class="print_title">'+a+"</h1>");d.document.write(c);d.document.write("</div></body></html>");d.document.close();d.focus()}catch(e){}};a.open=function(b,c,d,e,f,g,k,h,l,m,p,r,t){a.topLeftHTML||(a.topLeftHTML="");a.topRightHTML||(a.topRightHTML='<div class="organizer_close_button"><a onclick="zenarioO.closeSelectMode();"></a></div>');
var y=q.microTemplate("zenario_organizer",{topLeftHTML:a.topLeftHTML,topRightHTML:a.topRightHTML});q.openBox(y,b,"og",c,d,e,f,g,k,h,l,m,p,r,t)};a.init=function(b){if(!a.map||b){q.showAJAXLoader();a.pageTitle=L.title;a.setSearch(l);a.checkPrefs();try{if(q.openedInIframe&&self.parent&&self.parent.zenarioO&&self.parent.zenarioO.map&&self.parent.zenarioA.moduleCodeHash===q.moduleCodeHash&&self.parent.zenarioCSSJSVersionNumber===m.zenarioCSSJSVersionNumber){a.map=self.parent.zenarioO.map;a.init2();return}if(C&&
C.zenarioO&&C.zenarioO.map&&C.zenarioA.moduleCodeHash===q.moduleCodeHash&&C.zenarioCSSJSVersionNumber===m.zenarioCSSJSVersionNumber){a.map=C.zenarioO.map;a.init2();return}if(C&&C.zenario&&C.zenario.get&&C.zenario.get("zenario_sk_iframe")&&C.zenario.get("zenario_sk_iframe").contentWindow&&C.zenario.get("zenario_sk_iframe").contentWindow.zenarioO&&C.zenario.get("zenario_sk_iframe").contentWindow.zenarioO.map&&C.zenario.get("zenario_sk_iframe").contentWindow.zenarioA.moduleCodeHash===q.moduleCodeHash&&
C.zenario.get("zenario_sk_iframe").contentWindow.zenarioCSSJSVersionNumber===m.zenarioCSSJSVersionNumber){a.map=C.get("zenario_sk_iframe").contentWindow.zenarioO.map;a.init2();return}}catch(c){}var d=J+"zenario/admin/organizer.ajax.php";y.ajax(d,!1,!1,!0).after(function(b){(a.map=q.readData(b,d,{}))&&a.init2()})}};a.init2=function(){a.lookForBranches(a.map);q.tooltips();a.sortedTopLevelItems=a.getSortedIdsOfTUIXElements(a.map);a.setNavigation();a.setTopRightButtons();q.canDoHTML5Upload()&&(p("organizer_rightColumn").addEventListener("dragover",
function(){$("#organizer_rightColumn").addClass("dragover")},!1),p("organizer_rightColumn").addEventListener("dragleave",function(){$("#organizer_rightColumn").removeClass("dragover")},!1));a.checkQueue()||q.openedInIframe||a.go()};a.prefs={};a.prefsChecksum="{}";a.previousPrefChecksums={"{}":!0};a.checkPrefs=function(){var b,c=J+"zenario/admin/quick_ajax.php?_manage_prefs=1",d=y.nonAsyncAJAX(c+"&_get_checksum=1",!0,!1);return d&&d!=a.prefsChecksum&&!a.previousPrefChecksums[d]&&(b=y.nonAsyncAJAX(c+
"&_load_prefs=1",!0,!0))&&b?(a.prefs=b,a.previousPrefChecksums[a.prefsChecksum=d]=!0,!1):!0};a.savePrefs=function(b){var c={_manage_prefs:1,_save_prefs:1,prefs:JSON.stringify(a.prefs)};a.previousPrefChecksums[a.prefsChecksum=c.checksum=hex_md5(c.prefs)]=!0;$.ajax({type:"POST",async:!b,dataType:"text",url:J+"zenario/admin/quick_ajax.php",data:c,success:function(a){a&&q.showMessage(a)}})};a.shortenPath=function(a){return a};a.implodeKeys=function(a){var c="",d;for(d in a)r(a,d)&&(c+=(c?",":"")+d);return c};
a.getPanelType=function(b){return(b=b||a.path)&&(b=a.followPathOnMap(b,"panel_type"))&&a.panelTypes[b]?b:"list"};a.initNewPanelInstance=function(b,c){var d=a.getPanelType(b),e=new a.panelTypes[d];e.panelType=d;e.cmsSetsPath(b);e.cmsSetsRefiner(c);e.init();return e};a.checkQueue=function(b){var c;if(c=a.checkQueueLength()){var d="",e=m.zenarioOQueue.shift();e.selectedItems?(d=a.implodeKeys(e.selectedItems),e.refinerName&&(e.refiner={name:e.refinerName,id:d}),a.pi&&a.branches[a.branches.length-1].panel_instances[a.path]||
(a.pi=a.branches[a.branches.length-1].panel_instances[a.path]=a.initNewPanelInstance(a.path,e.refiner)),a.pi.cmsSetsSelectedItems(e.selectedItems)):e.refinerName&&(e.refiner={name:e.refinerName,id:d});a.go(e.path,e.branch,e.refiner,!0,!--c,l,l,l,b);return!0}return!1};a.checkQueueLength=function(){return m.zenarioOQueue?m.zenarioOQueue.length:0};a.reloadOpeningInstanceIfRelevant=function(b){a.checkQueueLength()||(b!=m.zenarioOOpeningPath||!m.zenarioOOpeningInstance&&"zenarioAT"!=m.zenarioOReloadOnChanges||
(b="",m.zenarioOOpeningInstance&&(b=m.zenarioOOpeningInstance+"!_refresh="+(""+Math.random()).replace(".","")),"zenarioAT"==m.zenarioOReloadOnChanges&&(b+="&__zenario_reload_at__="+(""+Math.random()).replace(".","")),C&&C.zenario?m.opener.document.location.hash=b:x&&x.zenario&&(m.parent.document.location.hash=b)),"zenarioO"==m.zenarioOReloadOnChanges&&x&&x.zenarioO&&x.zenarioO.init&&x.zenarioO.reload())};a.callPanelOnUnload=function(){if(a.path&&a.pi&&a.pi.onUnload){var b=$("#organizer_header"),c=
$("#organizer_rightColumnContent"),d=$("#organizer_lowerMiddleColumn");a.pi.onUnload(b,c,d)}};a.pathNotAllowed=function(b){return b&&m.zenarioONotFull&&!1!==m.zenarioOMaxPath&&a.path==m.zenarioOMaxPath&&b.path!=a.path};a.goNum=0;a.loadNum=0;a.lastSuccessfulGoNum=0;a.go=function(b,c,d,e,f,g,k,h,S,I,A,G){A||(a.lastActivity=Date.now());if(q.isFullOrganizerWindow||q.checkIfBoxIsOpen("og")){if(a.stop)return!1;if(a.map){a.callPanelOnUnload();e||(m.zenarioOQueue=!1);if(k=b){A=b.split("//");var Q=A.length;
if(2<Q){h=l;G=!1;var s;for(e=0;e<Q-1;e+=2){0==e?(f=a.getFromToFromLink(A[0]),m.zenarioOQueue=[{path:f.from,branch:-1}]):(f="/"==A[e].substr(0,1)?A[e].substr(1):s.to+"/"+A[e],f=a.getFromToFromLink(f),s.to!=f.from&&m.zenarioOQueue.push({path:f.from}));var v={};if(A[e+1]){var u=A[e+1].split(","),x;for(x in u)r(u,x)&&(v[u[x]]=!0)}u=!1;f.refiner&&(u=f.refiner);s=f.to;if(!s)return q.showMessage('The requested path "'+k+'" was not found in the system. If you have just updated or added files to the CMS, you will need to reload the page.',
l,"error",!1,!0),!1;e+2==Q-1&&(s+="//"+A[e+2]);m.zenarioOQueue.push({path:s,branch:!0,selectedItems:v,refinerName:u});s=f}a.checkQueue(!0);return}2==Q?(h=l,G=!1,b=A[0],-1==A[1].indexOf(",")&&(h=A[1])&&(Q=h.length-1,"/"==h.substr(Q)&&(h=h.substr(0,Q),G=!0))):h||(G=!1);b=a.shortenPath(b)}b||(b=m.zenarioONotFull?a.defaultPathInIframePreload:a.defaultPath,G=!1);if(!a.followPathOnMap(b))return q.showMessage('The requested path "'+k+'" was not found in the system. If you have just updated or added files to the CMS, you will need to reload the page.',
l,"error",!1,!0),!1;var C=++a.goNum;S||++a.loadNum;var F=!1,w=a.loadFromBranches(b,c,"filters"),J=a.loadFromBranches(b,c,"searches");d===l&&(d=a.loadRefiner(b,c));if(!d&&t(a.followPathOnMap(b,"refiner_required")))q.showMessage("A refiner was required, but none was set.",!0,"error");else{var M={};x=a.branches.length-1;if(-1!==c){F=a.loadFromBranches(b,c,"panel_instances");for(k=0;k<x;++k)if(A=a.branches[k].refiners[a.branches[k+1].from])M["refiner__"+A.name]=A.id;if(A=a.branches[x].refiners[a.path])M["refiner__"+
A.name]=A.id;d&&(M["refiner__"+d.name]=d.id)}F?(F.cmsSetsPath(b),F.cmsSetsRefiner(d)):F=a.initNewPanelInstance(b,d);var D=a.followPathOnMap(b,"default_sort_column");D||(D="name");x=a.followPathOnMap(b);F.cmsSetsPanelTUIX(x);F.cmsSetsRequestedItem(h);F.cmsSetsSearchTerm(J);w=w&&!_.isEmpty(w)?$.extend(!0,{},w):{};for(u in w)r(w,u)&&(a.filterSetOnColumn(u,w)||w[u]&&(w[u]={}));k=x.reorder;var H=F.returnDoSortingAndSearchingOnServer(),N=1*F.returnPageSize(),E=F.returnAJAXURL(),O=F.returnDevToolsAJAXURL(),
B={};A=function(e){a.go2(b,E,O,B,c,C,D,N,G,h,F,J,w,d,M,H,g,I,e)};if(E){m.zenarioONotFull&&(m.zenarioOSelectMode?E+="&_select_mode=1":m.zenarioOQuickMode&&(E+="&_quick_mode=1"));e&&!f&&(B._queued=1);d!==l&&(B.refinerId=d.id,B.refinerName=d.name,d.languageId&&(B.languageId=d.languageId));m.zenarioOCombineItem&&(B._combineItem=m.zenarioOCombineItem);for(v in M)r(M,v)&&(B[v]=M[v]);if(H||a.CSVExport){if(N)if(B._limit=N,B._start=a.refreshToPage?(a.refreshToPage-1)*N:0,h)B._item=h;else if(g)if("object"==
typeof g&&g.selectedItemFromLastPanel)B._item=g.selectedItemFromLastPanel;else if(e=a.getSelectedItemFromLastPanel(b))B._item=e;k&&k.column?B._sort_col=k.column:a.prefs[b]&&a.prefs[b].sortBy?(B._sort_col=a.prefs[b].sortBy,B._sort_desc=a.prefs[b].sortDesc?1:0):(B._sort_col=D,B._sort_desc=t(a.followPathOnMap(b,"default_sort_desc")))}w&&!_.isEmpty(w)&&(B._filters=JSON.stringify(w));(H||a.CSVExport)&&J!==l&&(B._search=J)}a.stopRefreshing();b!=a.defaultPathInIframePreload&&(p("organizer_preloader_circle").style.display=
"block");m.zenarioOFirstLoad!==l&&(m.zenarioOFirstLoad?m.zenarioOFirstLoad=!1:a.reloadOpeningInstanceIfRelevant(b));E?y.ajax(E+y.urlRequest(B),!1,!0,!0,!0).after(A):A(x)}}else m.zenarioONotFull||(m.zenarioOQueue=[{path:b,branch:-1}])}};a.go2=function(b,c,d,e,f,g,k,h,p,I,A,s,u,v,w,x,C,L,F){F&&F.comment!==l&&m.console&&console.log(F.comment);if((q.isFullOrganizerWindow||q.checkIfBoxIsOpen("og"))&&g==a.goNum){a.stopRefreshing();var P=a.path,R,M;a.tuix&&(R=a.tuix.title,M=t(a.tuix.no_return));a.url=c+
y.urlRequest(e);a.devToolsURL=d!=c?d+y.urlRequest(e):l;a.lastRequests=e;a.path=b;a.defaultSortColumn=k;a.thisPageSize=h;a.server_side=x;a.inspectionView=p;a.inspectionViewItem=I;a.prefs[b]||(a.prefs[b]={});-1===f?a.resetBranches():f&&a.branch(b,P,R,M);a.pi=a.branches[a.branches.length-1].panel_instances[a.path]=A;F._filters!==l&&(u=F._filters,delete F._filters);a.branches[a.branches.length-1].filters[a.path]=u;delete a.tuix;a.tuix=F;a.focus=a.tuix;a.pi.cmsSetsPanelTUIX(a.tuix);a.filtersSet=!1;a.filtersSetInViewOptions=
!1;for(var D in u)if(r(u,D)&&a.filterSetOnColumn(D,u)&&(a.filtersSet=!0,a.canFilterColumn(D))){a.filtersSetInViewOptions=!0;break}a.markIfViewIsFiltered();a.saveRefiner(v);a.lastRefiners=w;a.tuix.columns||(a.tuix.columns={name:{title:"Name"}});(c=a.followPathOnMap(b,"reorder"))&&c.column?(a.sortBy=c.column,a.sortDesc=!1):a.prefs[b].sortBy&&a.tuix.columns[a.prefs[b].sortBy]?(a.sortBy=a.prefs[b].sortBy,a.sortDesc=a.prefs[b].sortDesc):((k=a.followPathOnMap(b,"default_sort_column"))?a.sortBy=k:a.sortBy=
a.defaultSortColumn,a.sortDesc=t(a.followPathOnMap(b,"default_sort_desc")));a.sortedColumns=a.getSortedIdsOfTUIXElements("columns");a.sortedItemButtons=a.getSortedIdsOfTUIXElements("item_buttons");a.sortedInlineButtons=a.getSortedIdsOfTUIXElements("inline_buttons");a.sortedCollectionButtons=a.getSortedIdsOfTUIXElements("collection_buttons");a.sortedQuickFilterButtons=a.getSortedIdsOfTUIXElements("quick_filter_buttons");a.shownColumns=a.getShownColumns(b,k,a.tuix.columns);if(a.prefs[b].sortedColumns){c=
{};for(var H in a.prefs[b].sortedColumns)r(a.prefs[b].sortedColumns,H)&&(D=a.prefs[b].sortedColumns[H],c[D]=H);k=!1;for(H in a.sortedColumns)if(r(a.sortedColumns,H)){D=a.sortedColumns[H];if(a.isShowableColumn(D,!1,!0)&&c[D]===l){k=c[k];k=k===l?0:1*k+1;a.prefs[b].sortedColumns.splice(k,0,D);for(var N in c)r(c,N)&&c[N]>=k&&++c[N];c[D]=k}k=D}a.sortedColumns=a.prefs[b].sortedColumns}a.tuix.items&&1==a.tuix.__item_count__&&t(a.tuix.allow_bypass)?a.branches[a.branches.length-1].bypasses[a.path]=!0:delete a.branches[a.branches.length-
1].bypasses[a.path];if(!a.checkQueue(!0)){if(a.tuix.items&&1==a.tuix.__item_count__&&t(a.tuix.allow_bypass))if(C){if(!1!==a.getBackButtonTitle()){a.back();return}}else{if(a.tuix.items)for(var E in a.tuix.items)if(r(a.tuix.items,E)){b={};b[E]=!0;a.pi.cmsSetsSelectedItems(b);if(a.itemClickThroughAction(E))return;break}}else if((!a.tuix.items||!a.tuix.__item_count__)&&t(a.tuix.return_if_empty)&&!1!==a.getBackButtonTitle()){a.back();return}E={};b={};var O;for(D in a.tuix.columns)if(r(a.tuix.columns,D)&&
a.isShowableColumn(D))if("menu_item"==a.tuix.columns[D].item_link)for(var B in a.tuix.items){if(r(a.tuix.items,B)&&(O=a.tuix.items[B][D])&&O==1*O){var z=a.itemLanguage(B);E[z]=E[z]?E[z]+",":"";E[z]+=O}}else if("content_item"==a.tuix.columns[D].item_link||"content_item_or_url"==a.tuix.columns[D].item_link)for(B in a.tuix.items)if(r(a.tuix.items,B)&&(O=a.tuix.items[B][D])&&(H=O.split("_"),H[0]&&"null"!=H[0]&&H[0]===H[0].replace(/\W/,"")&&H[1]&&H[1]==1*H[1])){var z=a.itemLanguage(B),K=a.itemParent(B);
b[z]||(b[z]={});b[z][K]=b[z][K]?b[z][K]+",":"";b[z][K]+=H[0]+"_"+H[1]}a.menuItems={};a.contentItems={};a.itemLinkRequestsLeft=0;a.shallowLinks={content_item:"zenario__content/panels/content",content_item_or_url:"zenario__content/panels/content",menu_item:"zenario__menu/panels/menu_nodes"};for(z in b)if(r(b,z))for(K in b)r(b,K)&&b[z][K]&&(a.contentItems[z]||(a.contentItems[z]={}),a.contentItems[z][K]||(a.contentItems[z][K]={}),c=J+"zenario/admin/organizer.ajax.php?path="+a.shallowLinks.content_item+
"&_get_item_links="+b[z][K]+"&languageId="+encodeURIComponent(z),++a.itemLinkRequestsLeft,a.getDataHack(c,z,function(b,c){g==a.goNum&&(a.contentItems[b][K]=c,--a.itemLinkRequestsLeft||a.go3(g,s,C,L))}));for(z in E)r(E,z)&&E[z]&&(a.menuItems[z]||(a.menuItems[z]={}),c=J+"zenario/admin/organizer.ajax.php?path="+a.shallowLinks.menu_item+"&_get_item_links="+E[z]+"&languageId="+encodeURIComponent(z)+"&refinerName=language&refinerId="+encodeURIComponent(z)+"&refiner__language="+encodeURIComponent(z),++a.itemLinkRequestsLeft,
a.getDataHack(c,z,function(b,c){g==a.goNum&&(a.menuItems[b]=c,--a.itemLinkRequestsLeft||a.go3(g,s,C,L))}));a.itemLinkRequestsLeft?(a.go3Timeout&&clearTimeout(a.go3Timeout),a.go3Timeout=setTimeout(function(){a.go3(g,s,C,L)},a.getItemLinkTimeoutTime)):a.go3(g,s,C,L)}}};a.getDataHack=function(a,c,d){y.ajax(a,2E3<a.length,!0,!0,!0).after(function(a){d(c,a)})};a.go3=function(b,c,d,e){(q.isFullOrganizerWindow||q.checkIfBoxIsOpen("og"))&&b==a.goNum&&(a.lastSuccessfulGoNum=++a.goNum,a.go3Timeout&&clearTimeout(a.go3Timeout),
p("organizer_preloader_circle").style.display="none",a.setNavigation(),!d&&a.tuix.popout_message&&(a.refreshToPage!==l&&a.tuix.popout_message==a.lastPopoutMessage||q.showMessage(a.tuix.popout_message,!0,!1),a.lastPopoutMessage=a.tuix.popout_message),a.searchAndSortItems(c),a.firstLoaded||(a.firstLoaded=!0,q.hideAJAXLoader()),a.setWrapperClass("loaded",!0),a.setWrapperClass("filters_set",a.filtersSet),a.setWrapperClass("filters_set_in_view_options",a.filtersSetInViewOptions),e&&e())};a.setWrapperClass=
function(a,c){$("#organizer__box_inner").removeClass("organizer_"+(c?"not_":"")+a).addClass("organizer_"+(c?"":"not_")+a)};a.itemLanguage=function(b){return b&&a.tuix&&a.tuix.items&&a.tuix.items[b]&&(!a.tuix.items[b].css_class||-1==(""+a.tuix.items[b].css_class).indexOf("ghost"))&&a.tuix.items[b].language_id?a.tuix.items[b].language_id:a.tuix&&a.tuix.key?w(a.tuix.key.languageId,a.tuix.key.language):""};a.itemParent=function(a){return""};a.getShownColumns=function(b,c,d){var e=!1,f=!1,g={};a.prefs&&
a.prefs[b]&&a.prefs[b].shownColumns&&(g=a.prefs[b].shownColumns);if(d)for(var k in d)r(d,k)&&(e||(e=k),t(d[k].always_show)?f=g[k]=!0:g[k]!==l?g[k]&&(f=!0):t(d[k].show_by_default)&&(f=g[k]=!0));f||(g[w(e,c)]=!0);return g};a.nextPage=function(){if(a.lockPageClicks)return!1;a.page<a.pageCount&&a.goToPage(a.page+1)};a.prevPage=function(){if(a.lockPageClicks)return!1;1<a.page&&a.goToPage(a.page-1)};a.goToPage=function(b){if(a.stop)return!1;a.page!=b&&a.deselectAllItems();a.lockPageClicks=!0;a.inspectionView=
!1;a.server_side?a.refreshAndShowPage(b):a.showPage(b)};a.goToLastPage=function(){if(a.stop)return!1;a.goToPage(a.pageCount)};a.refreshAndShowPage=function(b){a.page=w(b,1);a.load()};a.showPage=function(b){a.page=b;a.setPanel()};a.searchAndSortItems=function(b){var c;a.refreshToPage===l&&a.setSearch(b);a.server_side?(a.searchedItems=a.tuix.__item_sort_order__,a.searchMatches=a.tuix.__item_count__):(a.searchTerm===l||"hidden"==p("organizer_search").style.visibility?a.searchedItems=a.pi.sortAndSearchItems():
a.searchedItems=a.pi.sortAndSearchItems(b),a.searchMatches=a.searchedItems.length);a.itemsOrder={};for(var d in a.searchedItems)r(a.searchedItems,d)&&(c=a.searchedItems[d],a.itemsOrder[c]=1*d);b=1;if(a.thisPageSize)if(a.server_side&&a.server_side)b=w(a.tuix.__page__,a.refreshToPage,1);else if(a.refreshToPage!==l)b=a.refreshToPage;else{if(!a.inspectionViewItem)for(c in d=a.pi.returnSelectedItems(),d)if(r(d,c)){a.inspectionViewItem=c;break}if(c=a.itemsOrder[a.inspectionViewItem])b=Math.floor(c/a.thisPageSize)+
1}delete a.refreshToPage;a.showPage(b)};a.stop=!1;a.stopWarningMessage=!1;a.disableInteraction=function(b){a.stop=!0;b&&(a.stopWarningMessage=b);$("#organizer_search_term").prop("disabled",!0);a.setWrapperClass("interaction_disabled",!0)};a.enableInteraction=function(){a.stop=!1;a.stopWarningMessage=!1;$("#organizer_search_term").prop("disabled",!1);a.setWrapperClass("interaction_disabled",!1)};a.setPanel=function(){var b,c=$("#organizer_header"),d=$("#organizer_rightColumnContent"),e=$("#organizer_lowerMiddleColumn"),
f=!1;n=0;a.multipleSelectEnabled=m.zenarioOSelectMode?m.zenarioOMultipleSelect:a.pi.returnMultipleSelectEnabled();var g=_.clone(a.pi.returnSelectedItems());for(b in g)r(g,b)&&(a.tuix.items[b]?++n:(delete g[b],f=!0));f&&0==n?a.selectNextItem&&a.tuix.items[a.selectNextItem]&&(g[a.selectNextItem]=!0,++n):!a.multipleSelectEnabled&&1<n&&(g={},n=0);delete a.selectNextItem;if(0==n&&a.inspectionViewItem&&a.tuix.items[a.inspectionViewItem])n=1,g={},g[a.inspectionViewItem]=!0;else if(1<n||!a.inspectionViewItem||
!a.tuix.items[a.inspectionViewItem])a.inspectionView=!1;a.pi.cmsSetsSelectedItems(g);if(b=p("organizer_debug_button"))b.className=a.refiner?a.refiner.id?"zenario_debug zenario_debug_with_refiner_and_id":"zenario_debug zenario_debug_with_refiner_and_no_id":"zenario_debug zenario_debug_with_no_refiner";a.enableInteraction();a.setPanelTitle();a.setBackButton();a.getPageCount();a.pi.showPanel(c,d,e);a.tuix.toast&&q.toast(a.tuix.toast);a.setButtons();a.setTrash();a.size(!0);a.refreshIsPeriodic=!1;a.lockPageClicks=
!1;a.setHash();q.show_help_tour_next_time&&!q.seen_help_tour&&q.showTutorial("dummy_item",!0);q.seen_help_tour=!0;setTimeout(function(){a.size(!0)},0)};a.back=function(b){if(a.stop)return a.stopWarningMessage&&alert(a.stopWarningMessage),!1;var c={},d={};if(!1!==a.getFromLastPanel(a.branches.length-1,a.path,"title",!1,b,!1,c)){d.selectedItemFromLastPanel=a.getSelectedItemFromLastPanel(c.path);a.deselectAllItems();a.clearRefiner();a.clearSearch();for(b=c.pops;0<b;--b)a.branches.pop();a.go(c.path,l,
l,l,l,d)}};a.knownBranches={};a.lookForBranches=function(b,c,d,e){var f,g,k,h;b._path_here&&(d=b._path_here);for(k in b)r(b,k)&&b[k]&&"object"==typeof b[k]&&(g=c?c+"/"+k:k,f=!1,e!==l&&(h=b[k].link)&&"object"==typeof h&&("nav"!=e?h.branch=f=!0:(h.branch=f=!1,h.refiner&&h.path&&-1==h.path.indexOf("//")&&(h.path+="/refiners/"+h.refiner+"//",h.refinerId&&(h.path+=h.refinerId),h.path+="//"))),"refiners"==e&&"object"==typeof b[k]&&b[k].link===l&&(b[k].link={path:d,refiner:k},b[k].link.branch=f=!0),f&&(a.knownBranches[d]||
(a.knownBranches[d]={}),a.knownBranches[d][b[k].link.path]||(a.knownBranches[d][b[k].link.path]={}),a.knownBranches[d][b[k].link.path][w(b[k].link.refiner,1)]&&"item"==(""+a.knownBranches[d][b[k].link.path][w(b[k].link.refiner,1)]).substr(-4)||(a.knownBranches[d][b[k].link.path][w(b[k].link.refiner,1)]=a.shortenPath(g))),a.lookForBranches(b[k],g,d,k))};a.resetBranches=function(){a.branches=[{panel_instances:{},bypasses:{},filters:{},refiners:{},searches:{}}]};a.resetBranches();a.branch=function(b,
c,d,e){b=a.shortenPath(b);a.branches[a.branches.length]={from:c,to:b,title:d,no_return:e,panel_instances:{},bypasses:{},filters:{},refiners:{},searches:{}}};a.setHash=function(){if(!m.zenarioONotFull){if(!y.browserIsIE(7)){var b=a.getHash();L.location.hash=b;y.currentHash=L.location.hash}q.homeLink&&p("home_page_button_link")&&(p("home_page_button_link").href=a.parseReturnLink(q.homeLink));q.backLink&&p("last_page_button_link")&&(p("last_page_button_link").href=a.parseReturnLink(q.backLink))}};a.getHash=
function(b){var c="",d=a.path,e,f,g=!1,k=!1,h="",l=a.pi&&a.pi.returnSelectedItems();if(!b&&l){for(var m in l)if(r(l,m)&&l[m])if(!1===k)k=m;else{k=!1;break}k&&(h=a.inspectionView?k+"/":k)}for(m in a.branches)if(r(a.branches,m)&&0<m)if(b=a.branches[m],b.to&&a.knownBranches[b.from]&&a.knownBranches[b.from][b.to]&&(e=a.knownBranches[b.from][b.to][b.refiners[b.to]?b.refiners[b.to].name:1])){e=a.shortenPath(e);if(f){if(e.substr(0,f.length)==f)e=a.shortenPath(e.substr(f.length+1));else{g=!0;break}c+="//"}c+=
e+"//";f=a.branches[m-1];if(f=f.panel_instances[b.from])c+=a.implodeKeys(f.returnSelectedItems());f=b.to}else{g=!0;break}!g&&f&&d.substr(0,f.length)==f&&(d=c+"//"+a.shortenPath(d.substr(f.length+1)));h&&(d="//"==y.rightHandedSubStr(d,2)?d+h:"/"==y.rightHandedSubStr(d,1)?d+("/"+h):d+("//"+h));return d};a.searchOnClick=function(a){};a.searchOnKeyUp=function(b){a.doSearchAfterDelay&&clearTimeout(a.doSearchAfterDelay);a.doSearchAfterDelay=setTimeout(function(){a.doSearch(p("organizer_search_term"))},
a.searchDelayTime)};a.searchOnChange=function(b){a.server_side&&a.doSearchAfterDelay&&(clearTimeout(a.doSearchAfterDelay),a.doSearch(b))};a.markIfViewIsFiltered=function(){a.filteredView=a.searchTerm!==l||a.filtersSet};a.doSearch=function(b){a.doSearchAfterDelay&&clearTimeout(a.doSearchAfterDelay);""===b.value?b=l:(b=b.value,b==1*b&&(b*=1));b!==a.searchTerm&&(a.searchTerm=b,a.markIfViewIsFiltered(),a.saveSearch(),a.runSearch())};a.runSearch=function(){if(a.stop)return!1;a.lockPageClicks=!0;a.inspectionView=
!1;a.server_side||(a.server_side=a.pi.returnDoSortingAndSearchingOnServer())?a.refreshAndShowPage():a.searchAndSortItems(a.searchTerm)};a.allItemsSelected=function(){if(0==a.shownItemsLength)return!1;var b,c=0,d=a.pi.returnSelectedItems();for(b in d)r(d,b)&&++c;return c==a.shownItemsLength};a.noItemsSelected=function(){if(0==a.shownItemsLength)return!0;var b,c=a.pi.returnSelectedItems();for(b in c)if(r(c,b))return!1;return!0};a.parseReturnLink=function(a,c){c===l&&(c=a&&y.currentHash&&!y.browserIsIE(7)?
"zenario_sk_return="+y.currentHash.replace("#",""):"");return y.addBasePath((""+a).replace("zenario_sk_return=navigation_path",c))};a.saveRefiner=function(b){a.branches[a.branches.length-1].refiners[a.path]=a.refiner=b};a.loadRefiner=function(b,c){return-1===c||c?l:a.branches[a.branches.length-1].refiners[b]?a.branches[a.branches.length-1].refiners[b]:l};a.clearRefiner=function(){a.refiner=l;a.saveRefiner()};a.saveSearch=function(){a.branches[a.branches.length-1].searches[a.path]=a.searchTerm;a.pi.cmsSetsSearchTerm(a.searchTerm)};
a.loadFromBranches=function(b,c,d){return-1===c||c?l:a.branches[a.branches.length-1]&&a.branches[a.branches.length-1][d]&&a.branches[a.branches.length-1][d][b]?a.branches[a.branches.length-1][d][b]:l};a.setSearch=function(b){var c;a.pi&&a.pi.returnSearchingEnabled()?(c="visible",a.searchTerm=b):(c="hidden",a.searchTerm=l);a.markIfViewIsFiltered();p("organizer_search").style.visibility=c;a.searchTerm===l?p("organizer_search_term").value="":p("organizer_search_term").value=a.searchTerm};a.clearSearch=
function(){p("organizer_search_term").value="";a.searchTerm=l;a.markIfViewIsFiltered();a.saveSearch()};a.toggleAllItems=function(){a.allItemsSelected()?a.deselectAllItems():a.selectAllItems();a.setButtons();a.setHash()};a.selectAllItems=function(){a.selectItemRange()};a.deselectAllItems=function(){a.selectItemRange(-1)};a.selectItemRange=function(b,c){var d=!1,e,f=b===l,g=a.pi.returnSelectedItems(),k;for(k in a.searchedItems){var h=a.searchedItems[k];if(a.shownItems&&a.shownItems[h])if((e=f||h===
b||h===c)&&!g[h]?(a.pi.selectItem(h),d=!0):!e&&g[h]&&(a.pi.deselectItem(h),d=!0),h===b&&h===c)f=!1;else if(h===b||h===c)f=!f}d&&a.closeInspectionView()};a.selectItems=function(b){var c,d,e={},f=!1,g=a.pi.returnSelectedItems();if(_.isArray(b))for(c in b)r(b,c)&&(d=b[c],e[d]=!0);else _.isObject(b)?e=b:e[b]=!0;for(d in a.shownItems)r(a.shownItems,d)&&((b=e[d])&&!g[d]?(a.pi.selectItem(d),f=!0):!b&&g[d]&&(a.pi.deselectItem(d),f=!0));f&&(a.closeInspectionView(),a.setButtons(),a.setHash())};a.itemClickThrough=
function(b,c){if(a.stop)return!1;y.stop(c);if(!a.tuix||!a.tuix.items||!a.tuix.items[b])return!1;a.itemClickThroughAction(b);return!1};a.itemClickThroughAction=function(b){var c=a.itemClickThroughLink(b),d;return c?(t(c.unselect_items)||(d={},d[b]=!0,a.pi.cmsSetsSelectedItems(d)),q.action(a,a.tuix.items[b],!0,!0,c),!0):!1};a.itemClickThroughLink=function(b){var c=a.tuix.items[b].link;b=a.tuix.items[b].panel;c===l&&b===l&&a.tuix.item&&(c=a.tuix.item.link,b=a.tuix.item.panel);b&&(c={path:b._path_here});
return c&&m.zenarioONotFull&&a.path===m.zenarioOMaxPath&&(a.path!==c.path||m.zenarioODisallowRefinersLoopingOnMinPath)?!1:c};a.topRightButtonClick=function(b){if(a.stop)return!1;q.action(a,a.map.top_right_buttons[b],!1,-1)};a.topLevelClick=function(b,c,d){if(a.stop)return!1;a.clearRefiner();a.clearSearch();a.resetBranches();c!==l?(b=$.extend(!0,{},a.map[b].nav[c]),q.action(a,b,!1,-1)):q.action(a,a.map[b],!1,-1)};a.viewTrash=function(){!m.zenarioOSelectMode&&a.tuix&&a.tuix.trash&&!t(a.tuix.trash.empty)&&
q.action(a,a.tuix.trash,!1,!0);return!1};a.collectionButtonClick=function(b){a.tuix&&a.tuix.collection_buttons&&a.tuix.collection_buttons[b]&&q.action(a,a.tuix.collection_buttons[b],!1,!0)};a.itemButtonClick=function(b,c){a.tuix&&a.tuix.item_buttons&&a.tuix.item_buttons[b]&&(c!==l&&a.selectItems(c),q.action(a,a.tuix.item_buttons[b],!0,!0))};a.inlineButtonClick=function(b,c){a.tuix&&a.tuix.inline_buttons&&a.tuix.inline_buttons[b]&&(a.selectItems(c),q.action(a,a.tuix.inline_buttons[b],!0,!0))};a.toggleQuickFilter=
function(b,c){var d,e,f,g,k=!1,h=a.tuix&&a.tuix.quick_filter_buttons;if(button=h&&h[b]){if(t(button.clear_all))for(e in h)r(h,e)&&(f=h[e],e==b||button.parent&&button.parent!=e&&button.parent!=f.parent||!(d=f.column)||!a.getFilterValue("shown",d)||(a.setFilterValue("shown",d,!1),a.clearFilter(d),k=!0));(d=button.column)&&(g=a.getColumnFilterType(d))&&a.checkIfColumnPickerChangesAreAllowed(d)&&(t(button.remove_filter)?c=!1:c===l&&(c=!a.quickFilterEnabled(b)),a.setFilterValue("shown",d,c),a.clearFilter(d),
c&&(a.setFilterValue("not",d,t(button.invert)),"yes_or_no"==g?a.setFilterValue("value_",d,1):button.value!==l&&a.setFilterValue("value_",d,button.value)),k=!0);k&&a.refreshAndShowPage()}};a.quickFilterEnabled=function(b){var c,d,e;if((c=a.tuix.quick_filter_buttons[b])&&(d=c.column)&&(e=a.getColumnFilterType(d))){if(t(c.remove_filter))return!a.getFilterValue("shown",d);if(a.getFilterValue("shown",d)&&t(c.invert)==t(a.getFilterValue("not",d))){if("yes_or_no"==e)return!0;if(c.value!==l)return a.getFilterValue("value_",
d)===c.value}}return!1};a.applyMergeFields=function(b,c,d,e){var f=b=b.replace(/~/g,"~1"),g,k;d===l&&(d=a.getKeyId());for(k in a.tuix.items[d])if(r(a.tuix.items[d],k)&&(f=a.tuix.items[d][k],-1!=b.indexOf("[["+k+"]]")))for(g=a.tuix.columns&&a.tuix.columns[k]?a.columnValue(d,k,!c):c?s(f):f,e||g===l||(g=g.replace(/\n/g," ")),g=g.replace(/~/g,"~1").replace(/\[/g,"~2").replace(/\]/g,"~3");b!=(f=b.replace("[["+k+"]]",g));)b=f;return b.replace(/~2/g,"[").replace(/~3/g,"[").replace(/~1/g,"~")};a.applyMergeFieldsToLabel=
function(b,c,d,e){d&&e&&1<a.itemsSelected&&(b=e);if(!b)return b;b=(""+b).replace(/\[\[item_count\]\]/ig,a.itemsSelected);d&&1==a.itemsSelected&&(b=a.applyMergeFields(b,c));return b};a.applySmallSpaces=function(b){for(var c,d,e="";-1!=(c=b.search(/([a-z][A-Z]|[a-zA-Z][^a-zA-Z\)]|[^a-zA-Z\(][a-zA-Z]|[0-9][^0-9\)]|[^0-9\(][0-9])/));)d=null!==b[c+1].match(/\s/)?c+2:c+1,c=b.substr(0,d),b=b.substr(d),e+=a.maxLengthString(s(c,!1,"asis"),25),-1==c.search(/\s/)&&(e+='<span style="font-size: 1px;"> </span>');
return e+=a.maxLengthString(s(b),25)};a.maxLengthString=function(a,c){for(var d="";a.wordLength>c;)d+=a.substr(0,c)+'<span style="font-size: 1px;"> </span>',a=a.substr(c);return d+a};a.pickItems=function(b,c,d){b={};for(var e in c)r(c,e)&&("id"==e?b[e]=c[e]:"parent__"!=e.substr(0,8)&&(b["child__"+e]=c[e]));if(a.postPickItemsObject)a.pickItemsItemLevel&&(b.id2=b.id,delete b.id),q.action(a,a.postPickItemsObject,!0,!0,l,b);else if(a.actionTarget){if(a.pickItemsItemLevel){a.actionRequests.id2=b.id;for(var f in b)r(b,
f)&&"id"!=f&&(a.actionRequests[f]=b[f])}else for(f in b)r(b,f)&&(a.actionRequests[f]=b[f]);a.action2()}a.postPickItemsObject=!1};a.action2=function(){if(a.actionTarget){var b=++a.goNum;p("organizer_preloader_circle").style.display="block";y.ajax(J+a.actionTarget,a.actionRequests,!1,!1,!0).after(function(c){b==a.goNum&&(c&&!1===q.showMessage(c,l,"error")?p("organizer_preloader_circle").style.display="none":a.selectCreatedIds())})}a.actionTarget=!1;delete a.actionRequests};a.uploadStart=function(){a.disableInteraction()};
a.uploadComplete=function(){a.enableInteraction();a.selectCreatedIds()};a.selectCreatedIds=function(){y.ajax(J+"zenario/ajax.php?method_call=getNewId",!0,!0).after(function(b){a.refreshToShowItem(b)})};a.reloadButton=function(){y.outdateCachedData();a.reload()};a.lastActivity=!1;a.refreshIsPeriodic=!1;a.reload=function(b,c,d){if(b&&(!a.lastActivity||12E5<Date.now()-a.lastActivity))return!1;a.stopRefreshing();var e=a.path,f=a.getKeyId(!0),g=a.inspectionView;a.refreshToPage=f?l:a.page;a.refreshIsPeriodic=
b;a.go(e,l,l,l,l,l,!c,f,l,d,b,g)};a.load=function(){a.reload(!1,!0)};a.changePassword=function(){a.reloadPage(l,!0,"change_password")};a.reloadPage=a.refreshPage=function(b,c,d){if(a.stop)return!1;d=d||"";b===l&&(b=y.currentHash&&!y.browserIsIE(7)?y.currentHash.replace("#",""):a.getHash());d||c||(d="zenario__administration/panels/site_settings//site_reset"==b?"site_reset":"zenario__administration/panels/backups"==b.substr(0,31)?"restore":"reload_sk");m.location.href=J+"zenario/admin/welcome.php?task="+
d+"&og="+encodeURIComponent(b)+(q.fromCID?"&fromCID="+q.fromCID+"&fromCType="+q.fromCType:"")};a.refreshToShowItem=function(b,c,d){if(a.stop)return!1;if("zenario__administration/panels/site_settings"==a.path)a.reloadPage();else{var e,f,g=a.path,k;a.page&&(a.refreshToPage=a.page);a.selectNextItem=a.getNextItem();f=!1===b||b===l?[]:_.isObject(b)?_.keys(b):_.isArray(b)?b:(b+"").split(",");if(f.length){k={};for(e in f)r(f,e)&&(a.tuix.db_items&&a.tuix.db_items.encode_id_column&&(f[e]=y.encodeItemIdForOrganizer(f[e])),
k[f[e]]=!0);a.pi.cmsSetsSelectedItems(k);a.setHash();g+="//"+f.join(",");a.inspectionView&&(g+="/")}a.stopRefreshing();y.outdateCachedData();a.go(g,l,l,l,l,l,l,l,l,function(){var e;b&&-1==(b+"").indexOf(",")&&a.pi&&a.tuix&&(c&&(e=q.formatOrganizerItemName(a.tuix,b))&&a.pi.displayToastMessage(c.replace(/\[\[name\]\]/ig,s(e))),!d||a.tuix.items&&a.tuix.items[b]||a.pi.displayToastMessage(d))})}};a.refreshing=!1;a.stopRefreshing=function(){a.refreshing&&clearTimeout(a.refreshing)};a.doCSVExport=function(){a.CSVExport=
!0;a.reload()};a.getNextItem=function(){var b,c,d,e=-1,f,g;if(!(f=a.tuix&&a.tuix.__item_sort_order__)||!(g=a.pi&&a.pi.returnSelectedItems()))return!1;for(c in f)r(f,c)&&(b=f[c],c=1*c+1,c>e&&g[b]&&(d=f[c])&&!g[d]&&(e=c));return-1!=e&&f[e]};a.getKey=function(b){var c={};if(a.tuix.key)for(var d in a.tuix.key)r(a.tuix.key,d)&&(c[d]=a.tuix.key[d]);a.refiner&&(c.refinerId=a.refiner.id,c.refinerName=a.refiner.name);if(a.lastRefiners)for(var e in a.lastRefiners)r(a.lastRefiners,e)&&(c[e]=a.lastRefiners[e]);
b&&(c.id=a.getKeyId());if(q.openedInIframe&&x&&x.zenario)if(x.zenarioO.init&&x.zenarioO.tuix)for(d in b=x.zenarioO.getKey(!0),b)r(b,d)&&(c["parent__"+d]=b[d]);else x.zenario.cID&&(c.parent__cID=x.zenario.cID,c.parent__cType=x.zenario.cType,c.parent__cVersion=x.zenario.cVersion);return c};a.getKeyId=function(b){var c="",d="",e=a.pi&&a.pi.returnSelectedItems();if(e)for(var f in e)if(r(e,f)){if(b)return f;c+=d+f;d=","}return c};a.getLastKeyId=function(b){var c;return(c=a.loadRefiner(a.path))?c.id:!1};
a.followPathOnMap=function(b,c,d){b||(b=a.defaultPath);var e=a.map;b=b.split("/");var f=!1,g=!1,k;for(k in b)if(r(b,k)){var h=b[k];if(""!==h){0==k&&(f=g=h);if(e[h])e=e[h];else return!1;e.link&&e.link.path?(f=g,g=e.link.path):e._path_here&&(f=g,g=e._path_here)}}e.panel&&(d||!c||e[c]===l&&e.panel[c]!==l)&&(e=e.panel);return d?e.link?{from:f,to:g,branch:e.link.branch,refiner:e.link.refiner}:!1:c?e[c]:e};a.getFromToFromLink=function(b){return a.followPathOnMap(b,!1,!0)};a.showViewOptions=function(b){if(a.stop||
!a.tuix.columns)return!1;a.checkPrefs()?a.showViewOptions2():a.reload(l,l,a.showViewOptions2);return!1};a.showViewOptions2=function(){q.openBox(!1,"zenario_view_options","AdminViewModeOptions",p("organizer_listViewOptionsDropdown"),445,-395,-2,!1,!0,!1,!1,l,l,!1,!0);a.setViewOptions()};a.getColumnFilterType=function(b){if(!a.tuix||!a.tuix.columns||!a.tuix.columns[b])return!1;var c=!1,d=a.tuix.columns[b].filter_format||a.tuix.columns[b].format;"date"==d||"datetime"==d||"datetime_with_seconds"==d?c=
"date":"yes_or_no"==d?c="yes_or_no":"enum"==d&&a.tuix.columns[b].values||"language_english_name_with_id"==d||"language_english_name"==d||"language_local_name_with_id"==d||"language_local_name"==d?c="enum":t(a.tuix.columns[b].searchable)&&(c="search");return c};a.setViewOptions=function(){v.shownTab="cp";v.tuix={tab:"cp",tabs:{cp:{template:"zenario_filters_popup",edit_mode:{on:!0,enabled:!0,always_on:!0},fields:{}}}};v.tuix.tabs.cp.fields.showcol__title_={ord:-3,full_width:!0,pre_field_html:'<div class="organizer_colPickerTitle_show" style="">',
snippet:{html:u.show},post_field_html:"</div>"};v.tuix.tabs.cp.fields.sortcol__title_={ord:-1,same_row:!0,pre_field_html:'<div class="organizer_colPickerTitle_sort">',snippet:{html:u.sort},post_field_html:"</div>"};var b,c,d,e=!1,f=!1;for(c in a.sortedColumns)if(r(a.sortedColumns,c)&&(b=a.sortedColumns[c],(d=a.tuix.columns[b])&&a.isShowableColumn(b,!1))){v.tuix.tabs.cp.fields["start_of_row__"+b]={ord:100*c,full_width:!0,snippet:{html:""}};v.tuix.tabs.cp.fields["showcol_"+b]={ord:100*c+4,same_row:!0,
type:"toggle",onclick:"zenarioO.showHideColumn(!"+t(a.shownColumns[b])+", '"+s(b)+"'); zenarioO.setViewOptions();",value:a.shownColumns[b]?"Hide":"Show",title:u.showCol,"class":("grid"==a.view_mode||t(d.always_show)?"notused ":"")+(a.shownColumns[b]?"zen_col_hidden":"zen_col_shown")};if(a.showCSVInViewOptions){delete v.tuix.tabs.cp.fields["showcol_"+b].onclick;t(t(d.server_side_only))?v.tuix.tabs.cp.fields["showcol_"+b].style="visibility: hidden;":v.tuix.tabs.cp.fields["showcol_"+b].disabled="disabled";
var g=a.shownColumns[b];a.prefs[a.path].shownColumnsInCSV!==l&&a.prefs[a.path].shownColumnsInCSV[b]!==l&&(g=a.prefs[a.path].shownColumnsInCSV[b]);v.tuix.tabs.cp.fields["showcsv_"+b]={ord:100*c+5,same_row:!0,type:"checkbox",onclick:"zenarioO.showHideColumnInCSV(this, '"+s(b)+"');",value:g,"class":"grid"==a.view_mode||t(d.always_show)?"notused":""}}v.tuix.tabs.cp.fields["sortcol_"+b]={ord:100*c+6,same_row:!0,snippet:{html:'<label class="zenario_filter_column_name" for="showcol_'+b+'">'+s(d.title)+"</label>"}};
if(a.canFilterColumn(b)){var k=g=!a.getFilterValue("shown",b),h=a.getFilterValue("value_",b),m,I="",A="",G=d.filter_format||d.format;m='<a class="'+(a.getFilterValue("not",b)?"organizer_inverter organizer_not":"organizer_inverter")+'" title="'+u.invertFilter+'" onclick="zenarioO.invertFilter(this, \''+s(b)+"', '"+s(G)+"');\">";if("date"==G||"datetime"==G||"datetime_with_seconds"==G)h&&(m=h.split(","),I=m[1],A=m[0]),v.tuix.tabs.cp.fields["date_after_col_"+b]={ord:100*c+7,row_class:"zenario_date_filters_for_field",
label:'<span class="zenario_date_filters_phrase">'+u.after+"</span>",type:"date",onchange:"zenarioO.updateDateFilters('"+s(b)+"');",value:A,hidden:g,_was_hidden_before:k},v.tuix.tabs.cp.fields["date_before_col_"+b]={ord:100*c+8,row_class:"zenario_date_filters_for_field",label:'<span class="zenario_date_filters_phrase">'+u.before+"</span>",type:"date",onchange:"zenarioO.updateDateFilters('"+s(b)+"');",value:I,hidden:g,_was_hidden_before:k},v.tuix.tabs.cp.fields["value_"+b]={ord:100*c+9,same_row:!0,
type:"hidden",value:h,hidden:g,_was_hidden_before:k};else if("yes_or_no"==G)h=""+d.title,-1==h.indexOf(":")&&(h+=":",h.replace(/\s*:/,":")),v.tuix.tabs.cp.fields["value_"+b]={ord:100*c+7,row_class:"zenario_filters_for_field yes_or_no",snippet:{html:m+(a.getFilterValue("not",b)?u.no:u.yes)+"</a>"},hidden:g,_was_hidden_before:k};else if("enum"==G&&d.values||"language_english_name_with_id"==G||"language_english_name"==G||"language_local_name_with_id"==G||"language_local_name"==G){A=l;if("enum"==G){if(I=
d.values,!I[""]&&!I[0]){var I={},A=u.selectListSelect,w;for(w in d.values)r(d.values,w)&&(I[w]=d.values[w])}}else for(w in I={},I[""]=u.selectListSelect,q.lang)r(q.lang,w)&&q.lang[w].enabled&&(I[w]=q.lang[w].name,"language_english_name_with_id"==G||"language_local_name_with_id"==G)&&(I[w]+=" ("+w+")");v.tuix.tabs.cp.fields["value_"+b]={ord:100*c+7,row_class:"zenario_filters_for_field enum",label:m+(a.getFilterValue("not",b)?u.isnt:u.is)+"</a>",type:"select",onchange:"zenarioO.changeFilters();",empty_value:A,
values:I,value:h,hidden:g,_was_hidden_before:k}}else t(d.searchable)&&(d=a.getFilterValue("not",b)?"id"==d.format?u.isnt:u.notLike:"id"==d.format?u.is:u.like,v.tuix.tabs.cp.fields["value_"+b]={ord:100*c+7,row_class:"zenario_filters_for_field",label:m+d+"</a>",type:"text",onkeyup:"zenarioVO.changeFiltersAfterDelay();",value:h,hidden:g,_was_hidden_before:k});a.getColumnFilterType(b)&&(v.tuix.tabs.cp.fields["togglefilter_"+b]={ord:100*c+2,same_row:!0,pre_field_html:'<div class="organizer_togglefilter">',
type:"toggle",onclick:"zenarioO.toggleFilter(this, '"+s(b)+"');","class":g?"togglefilter_closed":"togglefilter_open",value:g?" ":"x",title:g?u.filterByCol:u.filterByColStop,post_field_html:"</div>"})}a.showCSVInViewOptions&&(v.tuix.tabs.cp.fields["up__"+b]={ord:100*c+1,same_row:!0,pre_field_html:'<div class="organizer_mov_col">',type:"toggle",value:" ","class":"movcol_up",style:"visibility: hidden;",title:u.moveColForward},v.tuix.tabs.cp.fields["down__"+b]={ord:100*c+2,same_row:!0,type:"toggle",value:" ",
"class":"movcol_down",style:"visibility: hidden;",title:u.moveColBack,post_field_html:"</div>"},!1!==e&&(v.tuix.tabs.cp.fields["up__"+b].style="",v.tuix.tabs.cp.fields["up__"+b].onclick="zenarioO.switchColumnOrder("+c+", "+e+", true)",v.tuix.tabs.cp.fields["down__"+f].style="",v.tuix.tabs.cp.fields["down__"+f].onclick="zenarioO.switchColumnOrder("+c+", "+e+", true)"));e=c;f=b}b=!1;if(a.branches[a.branches.length-1]&&a.branches[a.branches.length-1].filters&&a.branches[a.branches.length-1].filters[a.path])for(var x in a.branches[a.branches.length-
1].filters[a.path])if(r(a.branches[a.branches.length-1].filters[a.path],x)&&a.branches[a.branches.length-1].filters[a.path][x].shown){b=!0;break}if(a.prefs[a.path])for(x in a.prefs[a.path])if(r(a.prefs[a.path],x)&&x){b=!0;break}b&&(v.tuix.tabs.cp.fields.reset={ord:100*c+11,full_width:!0,type:"toggle",onclick:"zenarioO.resetPrefs();",value:u.reset});v.sortTabs();c=new y.callback;x=v.drawFields(c);p("zenario_fbAdminViewModeOptions").innerHTML=x;y.addJQueryElements("#zenario_fbAdminViewModeOptions ",
!0);c.call();a.size(!0)};a.updateDateFilters=function(b){var c=v.readField("date_after_col_"+b),d=v.readField("date_before_col_"+b);p("value_"+b).value=c||d?c+","+d:"";a.changeFilters()};a.canSortColumn=function(b){return a.stop||t(a.tuix.columns[b].disallow_sorting)||a.server_side&&!a.tuix.columns[b].db_column?!1:!0};a.canFilterColumn=function(b){if(!a.tuix.columns[b].db_column||t(a.tuix.columns[b].server_side_only)||t(a.tuix.columns[b].disallow_filtering))return!1;var c=a.tuix.columns[b].filter_format||
a.tuix.columns[b].format;if("enum"==c&&!a.tuix.columns[b].values)return!1;switch(c){case "date":case "datetime":case "datetime_with_seconds":case "language_english_name_with_id":case "language_english_name":case "language_local_name_with_id":case "language_local_name":return!t(a.tuix.columns[b].disallow_sorting);default:return t(a.tuix.columns[b].searchable)}};a.showHideColumn=function(b,c){if(t(a.tuix.columns[c].always_show))b=!0;else{var d=0,e;for(e in a.tuix.columns)r(a.tuix.columns,e)&&a.shownColumns[e]&&
++d;2>d&&!b&&(b=!0)}a.shownColumns[c]=b?!0:!1;a.checkPrefs();a.prefs[a.path].shownColumns=a.shownColumns;a.savePrefs();a.setPanel()};a.resizeColumn=function(b,c){a.shownColumns[b]&&(c=Math.max(c,a.columnWidths.xxsmall),a.checkPrefs(),a.prefs[a.path].colSizes||(a.prefs[a.path].colSizes={}),a.prefs[a.path].colSizes[b]=c,a.savePrefs());a.setPanel()};a.showHideColumnInCSV=function(b,c){a.checkPrefs();a.prefs[a.path].shownColumnsInCSV||(a.prefs[a.path].shownColumnsInCSV={});a.prefs[a.path].shownColumnsInCSV[c]=
b.checked?!0:!1;a.savePrefs()};a.switchColumnOrder=function(b,c,d){if("object"==typeof b){var e,f={};moveableColumns={};pi=-1;positions=[];for(e in b)r(b,e)&&(c=b[e],f[c]=!0);for(e in a.sortedColumns)r(a.sortedColumns,e)&&(c=a.sortedColumns[e],f[c]&&(moveableColumns[c]=!0,positions[++pi]=e,a.sortedColumns[e]=l));pi=-1;for(e in b)r(b,e)&&(c=b[e],f[c]&&moveableColumns[c]&&(a.sortedColumns[positions.shift()]=c));for(e=a.sortedColumns.length-1;0<=e;--e)a.sortedColumns[e]===l&&a.sortedColumns.splice(e,
1)}else e=a.sortedColumns[b],a.sortedColumns[b]=a.sortedColumns[c],a.sortedColumns[c]=e;a.checkPrefs();a.prefs[a.path].sortedColumns=a.sortedColumns;a.setPanel();d&&a.setViewOptions();a.savePrefs()};a.resetPrefs=function(){a.checkPrefs();a.prefs[a.path]&&(a.prefs[a.path]={},a.savePrefs());a.branches[a.branches.length-1]&&a.branches[a.branches.length-1].filters&&(a.branches[a.branches.length-1].filters[a.path]={});q.closeBox("AdminViewModeOptions");a.refreshAndShowPage()};a.checkIfColumnPickerChangesAreAllowed=
function(b){return a.stop?!1:!0};a.changeSortOrder=function(b){a.canSortColumn(b)&&a.checkIfColumnPickerChangesAreAllowed(b)&&(a.sortBy==b?a.sortDesc=!a.sortDesc:(a.sortBy=b,a.sortDesc=!1),a.checkPrefs(),a.prefs[a.path].sortBy=a.sortBy,a.prefs[a.path].sortDesc=a.sortDesc,a.runSearch(),a.savePrefs(!0))};a.toggleFilter=function(b,c){var d,e=a.getColumnFilterType(c);if(e&&a.checkIfColumnPickerChangesAreAllowed(c)){d=!a.getFilterValue("shown",c);a.setFilterValue("shown",c,d);var f=!1;d||(a.getFilterValue("value_",
c)&&(a.setFilterValue("value_",c,""),f=!0),a.setFilterValue("not",c,!1));"yes_or_no"==e&&d&&(f=!0,a.setFilterValue("value_",c,1));a.setViewOptions(c);v.hideShowFields(function(){a.size(!0);p("value_"+c)&&$(p("value_"+c)).is(":visible")&&p("value_"+c).focus()});f&&a.refreshAndShowPage()}};a.invertFilter=function(b,c,d){a.checkIfColumnPickerChangesAreAllowed(c)&&(b=!a.getFilterValue("not",c),a.setFilterValue("not",c,b),a.setViewOptions(c),a.filterSetOnColumn(c)&&a.refreshAndShowPage())};a.refreshIfFilterSet=
function(b){a.getFilterValue("value_",b)&&a.refreshAndShowPage()};a.filterSetOnColumn=function(b,c){return!!a.getFilterValue("value_",b,c)};a.getFilterValue=function(b,c,d){d===l&&(d=a.branches[a.branches.length-1].filters[a.path]);return d&&d[c]&&d[c][b]?d[c][b]:""};a.setFilterValue=function(b,c,d){var e=a.branches[a.branches.length-1].filters;e[a.path]||(e[a.path]={});e[a.path][c]||(e[a.path][c]={});d===l?delete e[a.path][c][b]:e[a.path][c][b]=d;_.isEmpty(e[a.path][c])&&delete e[a.path][c];_.isEmpty(e[a.path])&&
delete e[a.path]};a.clearFilter=function(b){a.setFilterValue("value_",b);a.setFilterValue("not",b)};v.changeFiltersAfterDelay=function(){y.actAfterDelayIfNotSuperseded("changeFilters",a.changeFilters,700)};a.changeFilters=function(){if(a.stop)a.setViewOptions();else{var b,c;for(c in a.tuix.columns)if(r(a.tuix.columns,c)&&a.isShowableColumn(c)){if(p("value_"+c)||p("value_"+c+"___yes"))(b=v.readField("value_"+c))?a.setFilterValue("value_",c,b):a.setFilterValue("value_",c,"");p("remove_filter_"+c)&&
(p("remove_filter_"+c).className=a.filterSetOnColumn(c)?"organizer_remove_filter organizer_remove_filter_active":"organizer_remove_filter organizer_remove_filter_inactive")}a.refreshAndShowPage()}};a.hideViewOptions=function(a){q.closeBox("AdminViewModeOptions");return!1};a.isShowableColumn=function(b,c){return c?a.shownColumns[b]&&a.isShowableColumn(b):a.tuix.columns[b]&&!q.hidden(a.tuix.columns[b])&&a.tuix.columns[b].title&&!t(a.tuix.columns[b].server_side_only)};a.getSortedIdsOfTUIXElements=function(b,
c,d){var e,f,g,k=!1,h=[];c||(c="ord");"items"==b&&a.tuix.columns&&a.tuix.columns[c]&&(k=a.tuix.columns[c].format);_.isObject(b)||(b=a.tuix[b]);if(b)for(g in b)r(b,g)&&(e=b[g])&&(e=e[c],"true_or_false"==k||"yes_or_no"==k?h.push([g,t(e),!0]):"remove_zero_padding"!=k&&e==(f=1*e)?h.push([g,f,!0]):e?h.push([g,e.toLowerCase(),!1]):h.push([g,0,!0]));d?h.sort(a.sortArrayDesc):h.sort(a.sortArray);for(g in h)r(h,g)&&(h[g]=h[g][0]);return h};a.sortArray=function(a,c){return a[1]===c[1]?0:(a[2]?c[2]:!c[2])?a[1]<
c[1]?-1:1:a[2]?-1:1};a.sortArrayDesc=function(b,c){return a.sortArray(c,b)};a.dateDays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");a.dateMonths="January Feburary March April May June July August September October November December".split(" ");a.checkCondition=function(b){var c,d=a.pi.returnSelectedItems();for(c in d)if(r(d,c)&&(!a.tuix.items[c]||!b(c,a.tuix.items[c])))return!1;return!0};a.columnEqual=function(b,c){return a.checkCondition(function(d){return a.columnRawValue(d,
b)==c})};a.columnNotEqual=function(b,c){return a.checkCondition(function(d){return a.columnRawValue(d,b)!=c})};a.columnRawValue=function(b,c){return a.tuix&&a.tuix.columns&&a.tuix.columns[c]!==l&&a.tuix.items[b]!==l?a.tuix.items[b][c]:""};a.columnValue=function(b,c,d){if(!a.tuix||!a.tuix.columns||a.tuix.columns[c]===l)return"";var e=a.tuix.items[b][c],e=e===l||!1===e||null===e?"":""+e,f=a.tuix.columns[c].item_link,g=!0,k=!1;if(f){var h=!1;if("menu_item"==f){var p=a.itemLanguage(b);e&&a.menuItems[p]&&
(h=a.menuItems[p].items)&&(h=h[e])}else if("content_item"==f||"content_item_or_url"==f){var p=a.itemLanguage(b),r=a.itemParent(b);if(!(e&&a.contentItems[p]&&a.contentItems[p][r]&&(h=a.contentItems[p][r].items)&&(h=h[e])))if("content_item_or_url"==f&&e&&"_"!=e.substr(0,1)&&"_"!=e.substr(1,2))h={name:e,frontend_link:e},g=!1;else return""}if(h){if(d)return h.name;d="";if(a.tuix.items[b].cell_css_classes&&a.tuix.items[b].cell_css_classes[c]&&-1!=(""+a.tuix.items[b].cell_css_classes[c]).indexOf("ghost"))if(d=
' style="cursor: default;"',"menu_item"==f)d+=' title="'+s(h.name)+'|"';else{if("content_item"==f||"content_item_or_url"==f)d+=' title="'+s(h.name)+'|"'}else if(g&&a.shallowLinks[f]&&!m.zenarioONotFull?d=' href="organizer.php#'+s(w(h.navigation_path,a.shallowLinks[f]+"//"+b))+'" onclick="zenarioO.deselectAllItems();var selectedItems = {};selectedItems[\''+s(b)+"'] = true;zenarioO.pi.cmsSetsSelectedItems(selectedItems);zenarioO.setHash();zenarioO.go('"+s(a.shallowLinks[f])+"', true, {id: '"+s(e)+"', name: 'following_item_link', languageId: '"+
s(a.itemLanguage(b))+"'}, undefined, undefined, undefined, undefined, '"+s(e)+"');return zenario.stop(event);\"":h.navigation_path?d=' href="'+J+"zenario/admin/organizer.php#/"+s(h.navigation_path)+'" target="_blank"':(g=!1,h.frontend_link&&(k=!0,d=' href="'+s(y.addBasePath(h.frontend_link))+'" target="_blank"')),g)if("menu_item"==f)d+=' title="'+s(h.name)+"|"+u.clkToViewLinkedMenuNode+'"';else{if("content_item"==f||"content_item_or_url"==f)d+=' title="'+s(h.name)+"|"+u.clkToViewLinkedCItem+'"'}else k&&
(d+=' title="'+s(h.name)+"|"+u.clkToViewLinkInNewWindow+'"');c='<table class="organizer_no_border item_link"><tr>';h.css_class&&(c+='<td><div class="listicon organizer_item_image '+h.css_class+'"><a'+d+"></a></div></td>");c+='<td class="organizer_item_link_text" width="95%">';"menu_item"==f?(e=s(h.name),f=e.replace(/.*?\-\&gt\; /g,"-&gt; "),f==e&&(f=e.replace(/.*?\: /g,"")),c+="<a"+d+">"+f+"</a>"):c+="<a"+d+">"+s(h.name)+"</a>";return c+"</td></tr></table>"}}if(a.tuix.columns[c].format||a.tuix.columns[c].empty_value)e=
q.formatSKItemField(e,a.tuix.columns[c]);f=a.tuix.columns[c].length_limit&&e.length>a.tuix.columns[c].length_limit;return d?f?e.substr(0,a.tuix.columns[c].length_limit)+"...":e:f?'<span class="tooltip" title="'+s(e)+'">'+s(e.substr(0,a.tuix.columns[c].length_limit))+"...</span>":s(e)};a.rowCssClass=function(b){return a.tuix.items[b]&&a.tuix.items[b].row_css_class?" "+a.tuix.items[b].row_css_class:""};a.columnCssClass=function(b,c){var d="";a.tuix.columns[b]&&a.tuix.columns[b].css_class&&(d+=" "+a.tuix.columns[b].css_class);
c!=l&&a.tuix.items[c]&&a.tuix.items[c].cell_css_classes&&a.tuix.items[c].cell_css_classes[b]&&(d+=" "+a.tuix.items[c].cell_css_classes[b]);return d};a.setBackButton=function(){var b,c="",d=a.getBackButtonTitle(-1,!0),e={buttons:[]};if(d&&0!=d.length){p("organizer_branding_title").style.display="none";p("organizer_backButton").style.display="block";for(b in d)r(d,b)&&(e.buttons[b]={orderAsc:b+1,orderDesc:d.length-b,title:d[b]});c=q.microTemplate("zenario_organizer_back_buttons",e)}else p("organizer_branding_title").style.display=
"block",p("organizer_backButton").style.display="none";p("organizer_backButton").innerHTML=c;q.tooltips("#organizer_backButton *[title]");q.setTooltipIfTooLarge(".organizer_lastBackButton a",l,q.tooltipLengthThresholds.organizerBackButton)};a.getBackButtonTitle=function(b,c){return a.getFromLastPanel(a.branches.length-1,a.path,"title",!1,b,c)};a.getSelectedItemFromLastPanel=function(b){var c,d=!1;(panelInstance=a.getFromLastPanel(a.branches.length-1,a.path,"panel_instances",!0))&&(panelInstance=panelInstance[b])&&
(d=panelInstance.returnSelectedItems());if(d)for(c in d)if(r(d,c))return c;return!1};a.getFromLastPanel=function(b,c,d,e,f,g,k,h){if(!a.tuix||!a.path)return!1;var p=!1,q,r=!1,s=!1;f===l&&(f=1);k===l&&(k={});k.path===l&&(k.path=c);k.pops===l&&(k.pops=0);if(0===b&&-1==c.indexOf("/")||"no_return"!=d&&(t(a.getFromLastPanel(b,c,"no_return"))||0===b&&!a.tuix.back_link||2>b&&a.currentTopLevelPathHasRefiner))return!1;if(0<b&&c==a.branches[b].to){if(m.zenarioONotFull&&m.zenarioOMinPath&&c==m.zenarioOMinPath&&
(m.zenarioODisallowRefinersLoopingOnMinPath||a.branches[b].from!=c))return!1;if(a.branches[b-1].bypasses[a.branches[b].from]&&a.knownBranches[a.branches[b].from]&&a.knownBranches[a.branches[b].from][a.branches[b].to]&&a.knownBranches[a.branches[b].from][a.branches[b].to][a.branches[b].refiners[a.branches[b].to]?a.branches[b].refiners[a.branches[b].to].name:1]&&"item"==a.knownBranches[a.branches[b].from][a.branches[b].to][a.branches[b].refiners[a.branches[b].to]?a.branches[b].refiners[a.branches[b].to].name:
1].substr(-4))return a.getFromLastPanel(b-1,a.branches[b].from,d,e,f,g,k,!0);r=!0;c=e?a.branches[b-1][d]:a.branches[b][d]}else if(a.branches[b][d])r=!0,c=a.branches[b][d];else if(q=h||c!=a.path?a.followPathOnMap(c,"back_link"):a.tuix.back_link){if(m.zenarioONotFull&&m.zenarioOMinPath&&c==m.zenarioOMinPath&&(m.zenarioODisallowRefinersLoopingOnMinPath||q!=c))return!1;s=!0;c=a.followPathOnMap(q,d)}else return!1;r?(k.path=a.branches[b].from,++k.pops):s&&q&&(k.path=q);if(0!=--f)if(r)p=a.getFromLastPanel(b-
1,a.branches[b].from,d,e,f,g,k,!0);else if(s&&q)p=a.getFromLastPanel(b,q,d,e,f,g,k,!0);else return!1;return g?(p||(p=[]),p[p.length]=c,p):!1!==p?p:c};a.setNavigation=function(){var b,c,d,e,f=-1,g,k,h,l=-1,m,s={items:[],selected1st:0};h=a.path;var u=a.getHash(!0),v;a.currentTopLevelPathHasRefiner=!1;1<a.branches.length&&(h=a.branches[1].from);for(b in a.map)if(r(a.map,b)&&"top_right_buttons"!=b&&"object"==typeof a.map[b]&&a.map[b].nav)for(c in a.map[b].nav)r(a.map[b].nav,c)&&"object"==typeof a.map[b].nav[c]&&
(v=b+"/nav/"+c+"/panel",a.map[b].nav[c].link&&a.map[b].nav[c].link.path&&(v=a.map[b].nav[c].link.path),h=(v+"").length,l<h&&(m=(u+"/").substr(0,h))&&(m==v||m==v+"/")&&(l=h,g=b,k=c));for(d in a.sortedTopLevelItems)if(r(a.sortedTopLevelItems,d)&&(b=a.sortedTopLevelItems[d],"top_right_buttons"!=b&&!q.hidden(a.map[b])&&(m=!0,u=-1,s.items[++f]={id:b,items:[],selected:b===g,css_class:a.map[b].css_class,label:w(a.map[b].label,a.map[b].name),tooltip:a.map[b].tooltip,youtube_video_id:a.map[b].youtube_video_id,
youtube_thumbnail_title:a.map[b].youtube_thumbnail_title},a.setDataAttributes(a.map[b],s.items[f]),b===g&&(s.selected1st=f),(nav=a.map[b].nav)&&_.isObject(nav))))for(e in l=a.getSortedIdsOfTUIXElements(a.map[b].nav),l)r(l,e)&&(c=l[e],h=a.map[b].nav[c].link&&a.map[b].nav[c].link.path?a.map[b].nav[c].link.path:b+"/nav/"+c+"/panel",b===g&&c===k&&(a.currentTopLevelPath=h,h.match(/\/\//)&&(a.currentTopLevelPathHasRefiner=!0)),q.hidden(a.map[b].nav[c])||(s.items[f].items[++u]={id:c,selected:b===g&&c===
k,href:"#"+h,onclick:"zenarioO.topLevelClick('"+P(b)+"', '"+P(c)+"', "+t(0==u)+"); return false;",css_class:a.map[b].nav[c].css_class,label:w(a.map[b].nav[c].label,a.map[b].nav[c].name),tooltip:a.map[b].nav[c].tooltip},m&&(m=!1,s.items[f].href=s.items[f].items[u].href,s.items[f].onclick=s.items[f].items[u].onclick)));p("organizer_leftColumn").innerHTML=q.microTemplate("zenario_organizer_nav",s);q.tooltips("#organizer_leftColumn #organizer_topLevelNav a[title]",{position:{my:"left+2 center",at:"right center",
collision:"flipfit"},show:!1,hide:!1});q.tooltips("#organizer_leftColumn .organizer_sectionTitleTextAnd2ndLevelNav a[title]",{position:{my:"left+2 center",at:"right center",collision:"flipfit"}});var x=$("#organizer_topLevelNav");$("#organizer_topLevelNavScrollUp").mousehold(function(){a.scrollTopLevelNav(x,!0)},100);$("#organizer_topLevelNavScrollDown").mousehold(function(){a.scrollTopLevelNav(x,!1)},100);a.setTopLevelNavScrollStatus(x)};a.scrollTopLevelNav=function(b,c){b.scrollTop(b.scrollTop()+
(c?-50:50));a.setTopLevelNavScrollStatus(b)};a.setTopLevelNavScrollStatus=function(a){a||(a=$("#organizer_topLevelNav"));var c=$("#organizer_topLevelNavInner").outerHeight()-a.innerHeight();0>=c?$("#organizer_topLevelNavScroll").hide():($("#organizer_topLevelNavScroll").show(),a=a.scrollTop(),0<a?$("#organizer_topLevelNavScrollUp").addClass("organizer_scrollActive"):$("#organizer_topLevelNavScrollUp").removeClass("organizer_scrollActive"),a<c?$("#organizer_topLevelNavScrollDown").addClass("organizer_scrollActive"):
$("#organizer_topLevelNavScrollDown").removeClass("organizer_scrollActive"))};a.setDataAttributes=function(a,c){for(var d in a)r(a,d)&&"data"==d.substr(0,4)&&(c[d]=a[d])};a.setTopRightButtons=function(){delete a.map.top_right_buttons.ord;var b=a.getSortedIdsOfTUIXElements(a.map.top_right_buttons),c=-1,d,e=[],f,g,k;for(k in b)r(b,k)&&(g=b[k],d=a.map.top_right_buttons[g],a.checkButtonHidden(d)||(f=a.checkDisabled(d),e[++c]=a.setButtonAction("zenarioO.topRightButtonClick",d,f,g,l,l,"")));a.setButtonKin(e);
$("#organizer_top_right_buttons").html(q.microTemplate("zenario_organizer_top_right_button",e));q.tooltips("#organizer_top_right_buttons a[title]",{position:{my:"right center",at:"left center",collision:"flipfit"},show:!1,hide:!1})};a.setButtons=function(){var b=a.pi.returnSelectedItems();a.itemsSelected=0;for(var c in b)r(b,c)&&++a.itemsSelected;a.pi.showButtons($("#organizer_buttons"));a.setChooseButton()};a.getQuickFilters=function(){var b=-1,c,d=[],e,f,g;for(g in a.sortedQuickFilterButtons)r(a.sortedQuickFilterButtons,
g)&&(f=a.sortedQuickFilterButtons[g],c=a.tuix.quick_filter_buttons[f],a.checkButtonHidden(c)||(e=a.checkDisabled(c),d[++b]=a.setButtonAction("zenarioO.toggleQuickFilter",c,e,f,l,l,""),d[b].enabled=a.quickFilterEnabled(f)));a.setButtonKin(d);return d};a.getCollectionButtons=function(){var b=-1,c,d=[],e,f,g;for(g in a.sortedCollectionButtons)r(a.sortedCollectionButtons,g)&&(f=a.sortedCollectionButtons[g],c=a.tuix.collection_buttons[f],a.checkButtonHidden(c)||!a.searchMatches&&(t(c.do_csv_export)||t(c.hide_when_no_search_results))||
(e=a.checkDisabled(c),d[++b]=a.setButtonAction("zenarioO.collectionButtonClick",c,e,f)));a.setButtonKin(d);return d};a.buttonsPrevHTML="";a.fadeOutLastButtons=function(b,c,d){if(p("organizer_rightColumnOptions")){var e=$("#organizer_collectionToolbar"),f=$("#organizer_collectionToolbarButtons"),g=$("#organizer_itemToolbar"),k=$("#organizer_itemToolbarButtons"),h=$("#organizer_previousToolbar"),l=$("#organizer_previousToolbarButtons");e.is(":visible")&&e.clearQueue().hide();g.is(":visible")&&g.clearQueue().hide();
c?k.html(b):f.html(b);h.clearQueue().hide();d&&a.buttonsPrevHTML!=b?(a.buttonsPrevHTML&&(l.html(a.buttonsPrevHTML),h.show().fadeOut({duration:250,easing:"zenarioLinearWithDelayAfterwards",complete:function(){l.html("")}})),c?g.css("animation","none").fadeIn({duration:250,easing:"zenarioLinearWithDelayAfterwards",complete:function(){g.css("animation","");g.addClass("yellow_flash")}}):e.css("animation","none").fadeIn({duration:250,easing:"zenarioLinearWithDelay",complete:function(){e.css("animation",
"");e.addClass("white_flash")}})):c?g.show():e.show();a.buttonsPrevHTML=b}};a.showCollectionButtons=function(b,c){a.fadeOutLastButtons(b,!1,c)};a.hideCollectionButtons=function(b){a.fadeOutLastButtons("",!1,b)};a.showItemButtons=function(b,c){a.fadeOutLastButtons(b,!0,c)};a.hideItemButtons=function(b){a.fadeOutLastButtons("",!0,b)};a.getItemButtons=function(){var b,c=-1,d,e=[],f,g,k=a.pi.returnSelectedItems(),h=(b=a.getKeyId(!0))&&a.tuix.items&&a.tuix.items[b];if(0<a.itemsSelected)for(g in a.sortedItemButtons)if(r(a.sortedItemButtons,
g)){b=a.sortedItemButtons[g];d=a.tuix.item_buttons[b];var m=f=1;t(d.multiple_select)&&(f=d.multiple_select_max_items,t(d.multiple_select_only)&&(m=2));a.itemsSelected<m||f&&a.itemsSelected>f||a.checkButtonHidden(d,k)||!a.checkTraits(d,k)||(f=a.checkDisabled(d,k),e[++c]=a.setButtonAction("zenarioO.itemButtonClick",d,f,b,l,h),e[c].label=a.applyMergeFieldsToLabel(w(d.label,d.name),!1,!0,d.multiple_select_label),e[c].tooltip=f&&d.disabled_tooltip?a.applyMergeFieldsToLabel(d.disabled_tooltip,!1,!0):a.applyMergeFieldsToLabel(d.tooltip,
!1,!0,d.multiple_select_tooltip))}a.setButtonKin(e);return e};a.setButtonAction=function(b,c,d,e,f,g,k){k===l&&(k="label_without_icon");k={id:e,tuix:c,css_class:c.css_class||k,label:c.label||c.name,disabled:d};d?k.onclick="return false;":c.navigation_path?k.href=g&&g.navigation_path?"#/"+g.navigation_path:"#/"+c.navigation_path:c.frontend_link?k.href=g&&g.frontend_link?a.parseReturnLink(g.frontend_link):a.parseReturnLink(c.frontend_link):c.onclick?(k.onclick=c.onclick,f&&g&&(k.onclick="zenarioO.selectItems('"+
P(f)+"'); zenario.stop(event); "+k.onclick)):k.onclick=b+"('"+P(e)+(f===l?"":"', '"+P(f))+"'); return false;";k.tooltip=d&&c.disabled_tooltip?c.disabled_tooltip:c.tooltip;return k};a.setButtonKin=function(a){var c,d,e,f={};for(c in a)r(a,c)&&(d=a[c],f[d.id]=c);for(c in a)r(a,c)&&(d=a[c],e=d.tuix.parent)&&(e=f[e],e=a[e])&&(e.children||(e.children=[],e.css_class+=" organiser_button_with_children"),d.enabled&&!t(d.tuix.remove_filter)&&(e.childEnabled=!0),e.children.push(d));for(c=a.length-1;0<=c;--c)d=
a[c],(d.tuix.parent||t(d.tuix.hide_when_children_are_not_visible)&&!d.children)&&a.splice(c,1)};a.checkDisabled=function(b,c){var d,e=l,f=l;if(t(b.disabled))return!0;if(c)for(d in c)if(r(c,d))if(f===l)f=d,e=a.tuix.items&&a.tuix.items[d];else{f=e=l;break}if(b.disabled_if!==l&&q.eval(b.disabled_if,b,e,f))return!0;if(c&&b.disabled_if_for_any_selected_items!==l)for(d in c)if(r(c,d)&&q.eval(b.disabled_if_for_any_selected_items,b,a.tuix.items[d],d))return!0;if(c&&b.disabled_if_for_all_selected_items!==
l){for(d in c)if(r(c,d)&&!q.eval(b.disabled_if_for_all_selected_items,b,a.tuix.items[d],d))return!1;return!0}return!1};a.checkButtonHidden=function(b,c){var d,e=l,f=l,g;if(c)for(d in c)if(r(c,d))if(f===l)f=d,e=a.tuix.items&&a.tuix.items[d];else{f=e=l;break}if(q.hidden(b,!0,e,f)||m.zenarioONotFull&&b.frontend_link||m.zenarioOQuickMode&&t(b.hide_in_quick_mode)||m.zenarioOSelectMode&&t(b.hide_in_select_mode)||!(m.zenarioOQuickMode||!t(b.quick_mode_only)||m.zenarioOSelectMode&&t(b.select_mode_only))||
!(m.zenarioOSelectMode||!t(b.select_mode_only)||m.zenarioOQuickMode&&t(b.quick_mode_only)))return!0;if(b.only_show_on_refiner){if(!a.refiner)return!0;if("object"==typeof b.only_show_on_refiner){if(!t(b.only_show_on_refiner[a.refiner.name]))return!0}else if(a.refiner.name!=b.only_show_on_refiner)return!0}if(a.refiner&&(g=b.hide_on_refiner)){if(1===1*g)return!0;if("object"==typeof g){if(t(g[a.refiner.name]))return!0}else if(a.refiner.name==g)return!0}return a.filteredView&&t(b.hide_on_filter)||a.pathNotAllowed(b.link)?
!0:!1};a.checkTraits=function(b,c){var d,e;if(!b)return!0;if(b.visible_if_for_all_selected_items!==l)for(d in c)if(r(c,d)&&!q.eval(b.visible_if_for_all_selected_items,b,a.tuix.items[d],d))return!1;e=!1;if(b.visible_if_for_any_selected_items!==l){for(d in c)if(r(c,d)&&q.eval(b.visible_if_for_any_selected_items,b,a.tuix.items[d],d)){e=!0;break}if(!e)return!1}e=!0;var f={traits:{condition:function(b,c){return a.tuix.items[b].traits&&t(a.tuix.items[b].traits[c])}},without_traits:{condition:function(b,
c){return!a.tuix.items[b].traits||!t(a.tuix.items[b].traits[c])}},with_columns_set:{condition:function(b,c){return t(a.tuix.items[b][c])}},without_columns_set:{condition:function(b,c){return!t(a.tuix.items[b][c])}}};f.one_with_traits=$.extend(!0,{},f.traits,{one:!0});f.one_without_traits=$.extend(!0,{},f.without_traits,{one:!0});f.one_with_columns_set=$.extend(!0,{},f.with_columns_set,{one:!0});f.one_without_columns_set=$.extend(!0,{},f.without_columns_set,{one:!0});for(var g in f)if(r(f,g)){if(b[g])for(d in e=
!f[g].one,c)if(r(c,d)){var k=!0,h;for(h in b[g])if(r(b[g],h)&&t(b[g][h])&&!f[g].condition(d,h)){k=!1;break}if(f[g].one){if(k){e=!0;break}}else if(!k){e=!1;break}}if(!e)break}return e};a.checkItemPickable=function(b){var c={};c[b]=!0;return a.checkTraits(m.zenarioOSelectObject,c)&&!a.checkDisabled(m.zenarioOSelectObject,c)};a.getInlineButtons=function(b){var c=-1,d=[],e,f,g;for(g in a.sortedInlineButtons)r(a.sortedInlineButtons,g)&&(f=a.sortedInlineButtons[g],button=a.tuix.inline_buttons[f],e={},e[b]=
!0,!a.checkButtonHidden(button,e)&&a.checkTraits(button,e)&&(e=a.checkDisabled(button,e),d[++c]=a.setButtonAction("zenarioO.inlineButtonClick",button,e,f,b,a.tuix.items[b]),d[c].tooltip&&(d[c].tooltip=a.applyMergeFields(d[c].tooltip,!1,b)),d[c].label&&(d[c].label=a.applyMergeFields(d[c].label,!1,b))));return d.length?d:l};a.chooseButtonActive=function(){return m.zenarioOSelectMode&&(a.path==m.zenarioOTargetPath||!1===m.zenarioOTargetPath)};a.setChooseButton=function(){if(m.zenarioOSelectMode){var b=
w(m.zenarioOChoosePhrase,u.choose),c=!0,d="submit_disabled",e=a.pi.returnSelectedItems();a.chooseButtonActive()&&a.checkTraits(m.zenarioOSelectObject,e)&&!a.checkDisabled(m.zenarioOSelectObject,e)&&(0<a.itemsSelected||m.zenarioOAllowNoSelection)&&(1>=a.itemsSelected||m.zenarioOMultipleSelect)?(c=!1,d=m.zenarioOChooseButtonActiveClass?"submit_selected":"submit",0==a.itemsSelected&&m.zenarioOAllowNoSelection&&m.zenarioONoSelectionChoosePhrase?b=m.zenarioONoSelectionChoosePhrase:1<a.itemsSelected&&m.zenarioOChooseMultiplePhrase&&
(b=m.zenarioOChooseMultiplePhrase)):m.zenarioOAllowNoSelection&&m.zenarioONoSelectionChoosePhrase&&(b=m.zenarioONoSelectionChoosePhrase);p("organizer_choose_button").disabled=c;p("organizer_choose_button").className=d;p("organizer_choose_button").value=s(b)}};a.getCurrentPage=function(){return a.page};a.getPageCount=function(){a.pageCount=a.thisPageSize&&a.searchMatches!==l?Math.ceil(a.searchMatches/a.thisPageSize):1;return a.pageCount};a.setPanelTitle=function(){if(a.pi&&a.tuix&&p("organizer_rightColumnTitle")){p("organizer_rightColumnTitle").style.display=
"";var b=a.pi.returnPanelTitle();a.tuix.item&&a.tuix.item.css_class?p("organizer_panelTitle").innerHTML='<div class="listicon organizer_item_image '+a.tuix.item.css_class+'"></div><div>'+s(b)+"</div>":p("organizer_panelTitle").innerHTML=s(b);Math.max(0,w($("#organizer_rightColumnTitle").width(),0,0)-75-w($("#organizer_collectionToolbar").width(),90));q.setTooltipIfTooLarge("#organizer_panelTitle",b,q.tooltipLengthThresholds.organizerPanelTitle);q.isFullOrganizerWindow&&(L.title=a.pageTitle+u.colon+
b)}};a.setTrash=function(){!m.zenarioOSelectMode&&a.tuix&&a.tuix.trash?(p("organizer_trash_button").style.display="",p("organizer_trash_button").className=t(a.tuix.trash.empty)?w(a.tuix.trash.empty_css_class,"trash_button_empty"):w(a.tuix.trash.full_css_class,"trash_button_full"),q.tooltips("#organizer_trash_button a",{position:{my:"center bottom-12",at:"center top",collision:"flipfit",using:y.tooltipsUsing},items:"*",content:t(a.tuix.trash.empty)?w(a.tuix.trash.empty_tooltip,u.viewTrash):w(a.tuix.trash.full_tooltip,
u.viewTrash)})):p("organizer_trash_button").style.display="none"};a.getItemCSSClass=function(b){return a.tuix.items[b].css_class?a.tuix.items[b].css_class:a.tuix.item?a.tuix.item.css_class:l};a.fillLowerLeft=function(){var a,c,d=[],e=y.sendSignal("fillOrganizerLowerLeft");e.push([[q.microTemplate("zenario_organizer_lower_left_column",{}),0]]);for(a in e)if(r(e,a))for(c in e[a])r(e[a],c)&&d.push(e[a][c]);d.sort(q.sortArray);for(a in d)r(d,a)&&(d[a]=d[a][0]);return d.join("\n")};a.closeSelectMode=function(){a.closeInfoBox();
q.isFullOrganizerWindow?(x.zenarioA.closeBox("AdminOrganizer",!0),a.go(a.defaultPathInIframePreload),q.showAJAXLoader()):(a.go(a.defaultPathInIframePreload),q.closeBox("og"));return a.firstLoaded=!1};a.choose=function(){if(a.lastSuccessfulGoNum==a.goNum&&x&&m.zenarioOSelectMode&&(a.path==m.zenarioOTargetPath||!1===m.zenarioOTargetPath)&&(0<a.itemsSelected||m.zenarioOAllowNoSelection)&&(1>=a.itemsSelected||m.zenarioOMultipleSelect)){a.stopRefreshing();var b=a.getKey(!0),c=a.path,d=$.extend(!0,{},a.tuix),
e;e=a.pi.returnSelectedItems();var f=!1;b._items={};for(var g in e)if(r(e,g)&&(b._items[g]=!0,!m.zenarioOMultipleSelect))break;!m.zenarioOMultipleSelect&&b.id?(e=d.items[b.id],e.__label_tag__=a.defaultSortColumn):e={};a.closeSelectMode();_.isFunction(m.zenarioOCallbackObject)?f=m.zenarioOCallbackObject:_.isFunction(m.zenarioOCallbackFunction)&&(f=m.zenarioOCallbackFunction);if(f)m.zenarioOMultipleSelect?f(c,b,l,d):f(c,b,e,d);else if(m.zenarioOMultipleSelect)x[m.zenarioOCallbackObject][m.zenarioOCallbackFunction](c,
b,l,d);else x[m.zenarioOCallbackObject][m.zenarioOCallbackFunction](c,b,e,d)}};a.infoBox=function(a){var c=q.microTemplate("zenario_organizer_debug_info",{});q.openBox(c,"zenario_fbDebugInfoBox","DebugInfoBox",a,600,-286,28,!1,!1,l,l,l,l,!1,!1)};a.closeInfoBox=function(){q.closeBox("DebugInfoBox")};a.yourWorkInProgressLastUpdated=0;a.updateYourWorkInProgress=function(){var b=(new Date).getTime(),c;a.yourWorkInProgressLastUpdated-b<-a.yourWorkInProgressLastUpdateFrequency&&(c=$("#zenario_ywip_dropdown"))&&
(a.yourWorkInProgressLastUpdated=b,c.removeClass("zenario_ywip_loaded").addClass("zenario_ywip_loading"),b=J+"zenario/admin/organizer.ajax.php?path=zenario__content/panels/content&_sort_col=last_modified_datetime&_sort_desc=1&_start=0&_limit="+a.yourWorkInProgressItemCount+"&refinerId=&refinerName=your_work_in_progress&refiner__your_work_in_progress=&_get_item_data=1",y.ajax(b,!1,!0,!0).after(function(a){a=q.microTemplate("zenario_ywip",a);c.removeClass("zenario_ywip_loading").addClass("zenario_ywip_loaded").html(a)}))};
$(L).ready(function(){setTimeout(a.updateYourWorkInProgress,100)});a.sizing=!1;a.lastSize=!1;a.size=function(b){var c=46,d=57,e=30,c=35,f=55,g=p("zenario_fbog"),k=$(g),h,l;a.sizing&&clearTimeout(a.sizing);if(p("organizer__box_wrap")){q.isFullOrganizerWindow?(h=Math.floor($(m).width()),l=Math.floor($(m).height())):(h=Math.floor(k.width()),l=Math.floor(k.height()));if(h&&l&&(550>h&&(h=550),400>l&&(l=400),b||a.lastSize!=h+"x"+l)){a.showLeftColumn=a.pi?a.pi.returnShowLeftColumn():!m.zenarioONotFull;b=
p("organizer_rightColumnContent");var r=p("organizer_lowerLeftColumn"),s=p("organizer_lowerMiddleColumn"),t=p("organizer_lowerRightColumn"),u=$("#organizer_header"),v=$(b),w=$(s),x=$("#organizer_buttons"),C=$("#organizer_bottomWrap");u.is(":visible")||(f=0);x.is(":visible")||(e=0);C.is(":visible")||(d=0);g&&(g.className=q.getSKBodyClass(m,a.pi&&a.pi.panelType));q.isFullOrganizerWindow||k.height(l);p("organizer_rightColumn").style.height=p("organizer_preloader_circle").style.height=1*l-c-d+"px";p("organizer_leftColumn").style.height=
1*l-c-d-2+"px";p("organizer_Outer").style.height=1*l-c+"px";p("organizer_colsortfields")&&(y.browserIsIE(6)?p("organizer_colsortfields").style.height=1*l-c-130+"px":p("organizer_colsortfields").style.maxHeight=1*l-c-130+"px");c=1*l-c-d-40-e-2-a.columnPadding+0-f-13;b&&(b.style.height=c+"px");a.showLeftColumn?(c=204,p("organizer_leftColumn").style.display=p("organizer_leftColumnOuter").style.display=""):(c=0,p("organizer_leftColumn").style.display=p("organizer_leftColumnOuter").style.display="none");
p("organizer__box_top").style.width=p("organizer__box_wrap").style.width=p("organizer__box_center").style.width=p("organizer__box_bottom").style.width=h-0+"px";p("organizer_Outer").style.width=h-22+"px";p("organizer_wrapInner_bm").style.width=h-32+"px";p("organizer_wrapOuter_tm").style.width=h-0+"px";p("organizer_rightColumn").style.width=p("organizer_preloader_circle").style.width=h-30-c+"px";p("organizer_rightColumnTitle")&&(p("organizer_rightColumnTitle").style.width=h-30-c-2+"px");b&&(b.style.width=
h-30-c-2+"px");m.zenarioOSelectMode?p("organizer_choose_button").style.display="inline":p("organizer_choose_button").style.display="none";825>=h?(r.style.width="40%",s.style.width="49%",t.style.width="10%"):965>=h?(r.style.width="35%",s.style.width="49%",t.style.width="15%"):1155>=h?(r.style.width="30%",s.style.width="49%",t.style.width="20%"):1155<=h&&(r.style.width="25%",s.style.width="49%",t.style.width="25%");a.setPanelTitle();a.pi&&a.pi.sizePanel(u,v,w,x);a.lastSize=h+"x"+l;a.setTopLevelNavScrollStatus()}if(y.browserIsIE()&&
p("organizer_rightColumnContent"))if(y.browserIsIE(8)){if(h=p("organizer_Outer"))h.onselectstart=function(){return!1}}else{if(h=p("organizer_leftColumnOuter"))h.onselectstart=function(){return!1};if(h=p("organizer_itemCountWrap"))h.onselectstart=function(){return!1};if(h=p("organizer_rightColumn"))h.onselectstart=function(){return!(1<a.itemsSelected)}}a.sizing=setTimeout(a.size,500)}}});

'use strict';zenario.lib(function(ea,la,U,ta,ua,va,Y,wa,fa,xa,ya,za,Aa,z,M,ma,N,Ba,r,Ca,na,v,oa){var m=na(oa);fa.lib(function(Da,u,Ea,Fa,Ga,ha,Ha,Ia,Ja,Ka,pa){m.initVars=function(){this.editing=!1;this.data={};this.openedSkinId=this.layoutName="";this.history=[];this.savedAtPos=this.pos=0;this.lastIframeHeight=360;this.bodyPadding=0;this.desktopSmallestSize=800;this.previewPaddingLeftRight=75;this.gridAreaSmallestHeight=150;this.tabletWidth=768;this.mobileWidth=320;this.lastToast=!1;this.gridId="..."};
m.init=function(b,a){this.initVars();this.gridId=a;this.data="object"==typeof b?b:JSON.parse(b);this.checkDataR(this.data.cells);this.rememberNames(this.data.cells)};m.checkDataNonZero=function(b,a,c,f,p){1*a[c]||(a[c]=f,b=!0);a[c]=Math.round(a[c]);a[c]<=p&&(a[c]=f,b=!0);return b};m.checkDataNumeric=function(b,a,c,f,p){p||(p=1);z(a[c])&&1*a[c]==a[c]||(a[c]=f,b=!0);0>p?(p*=-1,a[c]=Math.round(a[c]*p)/p):a[c]=Math.round(a[c]/p)*p;0>a[c]&&(a[c]=f,b=!0);return b};m.checkDataNonZeroAndNumeric=function(b,
a){var c=!1,f=!1;a=this.checkDataNonZero(a,b,"cols",10,0);c=this.checkDataNonZero(c,b,"colWidth",60,1);this.checkDataNonZero(f,b,"minWidth",600,100);a=this.checkDataNonZero(a,b,"maxWidth",960,100);this.checkDataNumeric(a,b,"bp1",0,1);this.checkDataNumeric(a,b,"bp2",0,1);c=this.checkDataNumeric(c,b,"gutter",40);c=this.checkDataNumeric(c,b,"gutterLeftEdge",0);c=this.checkDataNumeric(c,b,"gutterRightEdge",0);this.checkDataNumeric(a,b,"gutterFlu",1,-10);this.checkDataNumeric(a,b,"gutterLeftEdgeFlu",0,
-10);f=this.checkDataNumeric(a,b,"gutterRightEdgeFlu",0,-10);100<b.gutterFlu*(b.cols-1)+b.gutterLeftEdgeFlu+b.gutterRightEdgeFlu&&(b.gutterFlu=0,b.gutterLeftEdgeFlu=0,b.gutterRightEdgeFlu=0,f=!0);b.minWidth>b.maxWidth&&(b.minWidth=b.maxWidth,f=!0);return a||(b.fluid?f:c)};m.checkDataR=function(b){var a,c,f;for(a=0;a<b.length;++a)if(b[c=a].grid_break_group&&b[c].cells){for(f in b[c].cells)v(b[c].cells,f)&&b.splice(++a,0,b[c].cells[f]);delete b[c].cells;b[a+1]&&(b[a+1].grid_break||b[a+1].grid_break_group)||
(b.splice(++a,0,{grid_break:!0,grid_css_class:this.randomName(2,"Grid_"),html:b[c].after}),delete b[c].after);b[c].grid_break=!0;b[c].grid_css_class=b[c].name||this.randomName(2,"Grid_");delete b[c].name;delete b[c].grid_break_group}for(a=0;a<b.length;++a)!b[a].name||b[a].cells||b[a].grid_break||b[a].grid_break_group||b[a].space||(b[a].slot=!0);for(a=0;a<b.length;++a)c=[],b[a].responsive?b[a].small="hide":b[a].first&&(b[a].small="first"),delete b[a].responsive,delete b[a].first,b[a].custom_class&&
(c.push(b[a].custom_class),delete b[a].custom_class),b[a].name&&(b[a].space||b[a].cells)&&(c.push(b[a].name),delete b[a].name),c.length&&b[a].css_class&&c.push(b[a].css_class),c.length&&(b[a].css_class=c.join(" ")),b[a].cells?(delete b[a].html,delete b[a].after,delete b[a].before,this.checkDataR(b[a].cells)):b[a].name?(delete b[a].after,delete b[a].before):(c=[],b[a].after&&(c.push(b[a].after),delete b[a].after),b[a].before&&(c.push(b[a].before),delete b[a].before),c.length&&(b[a].html=c.join(" ")))};
m.ajaxData=function(){return JSON.stringify(this.data)};m.rememberNames=function(b){for(var a=0;a<b.length;++a)b[a].cells?this.rememberNames(b[a].cells):b[a].name&&(b[a].oName=b[a].name)};m.checkData=function(b,a){var c;this.data?_._isAr(this.data)?(this.data={cells:this.data},a&&(c=1*a.r(/\D/g,""))&&(this.data.cols=c)):this.data.cells||(this.data.cells=[]):this.data={cells:[]};this.data.fluid&&!z(this.data.gutterFlu)&&z(this.data.gutter)?(this.checkDataNonZeroAndNumeric(this.data),b=this.data.gutterLeftEdge+
this.data.cols*this.data.colWidth+(this.data.cols-1)*this.data.gutter+this.data.gutterRightEdge,this.data.minWidth=960<b?960:760<b?760:b,this.data.maxWidth=b,this.data.gutterFlu=Math.round(this.data.gutter/b*1E3)/10,this.data.gutterLeftEdgeFlu=Math.round(this.data.gutterLeftEdge/b*1E3)/10,this.data.gutterRightEdgeFlu=Math.round(this.data.gutterRightEdge/b*1E3)/10):this.data.fluid||z(this.data.gutter)||!z(this.data.gutterFlu)||(this.checkDataNonZeroAndNumeric(this.data),b=this.data.maxWidth,this.data.gutter=
Math.round(this.data.gutterFlu*b/100),this.data.gutterLeftEdge=Math.round(this.data.gutterLeftEdgeFlu*b/100),this.data.gutterRightEdge=Math.round(this.data.gutterRightEdgeFlu*b/100),this.data.colWidth=(b-(this.data.gutterLeftEdge+(this.data.cols-1)*this.data.gutter+this.data.gutterRightEdge))/this.data.cols,(b=this.recalcColumnAndGutterOptions(this.data,!0,b))?(this.data.colWidth=b.colWidth,this.data.gutter=b.gutter):(delete this.data.colWidth,delete this.data.gutter));this.checkDataNonZeroAndNumeric(this.data);
this.data.fluid?(delete this.data.gutter,delete this.data.gutterLeftEdge,delete this.data.gutterRightEdge,delete this.data.colWidth):(delete this.data.gutterFlu,delete this.data.gutterLeftEdgeFlu,delete this.data.gutterRightEdgeFlu);this.history.length||(this.pos=0,this.history=[this.ajaxData()])};m.draw=function(b){this.drawEditor()};m.cellLabel=function(b){return b.name};m.drawEditor=function(b,a,c,f,p,g,I,G,O,A,Z){var e=this,J=0,ia=0;if(c&&z(c[0])){var q=e.data;for(var B in c)v(c,B)&&(B*=1,J=B+
1,q=q.cells[c[B]])}else ia=$("#"+e.gridId).scrollTop(),e.checkData(),q=e.data,J=0,c=[],e.names={},e.randomNameCount=0;z(b)||(b=e.gridId);z(f)||(f=e.data.cols);z(p)||(e.data.fluid?(Z=e.data.gutterFlu,A=(100-e.data.gutterLeftEdgeFlu-(e.data.cols-1)*e.data.gutterFlu-e.data.gutterRightEdgeFlu)/e.data.cols,g=Math.round(e.data.gutterFlu*e.data.maxWidth/100),I=Math.round(e.data.gutterLeftEdgeFlu*e.data.maxWidth/100),G=Math.round(e.data.gutterRightEdgeFlu*e.data.maxWidth/100),O=g,p=Math.round(A*e.data.maxWidth/
100)):(Z=A=0,g=e.data.gutter,I=e.data.gutterLeftEdge,G=e.data.gutterRightEdge,O=g,p=e.data.colWidth));var k="";B={};var aa=1,d=q.cells,w=e.gridId+"__cell"+c.join("-"),H=p+g,P=f*H,R=0,S=0,ba=0,ca=0,T=Math.ceil(g/2),Q=Math.floor(g/2),qa=Math.ceil(O/2),ra=Math.floor(O/2);I>=T?R=I-T:P-=ba=T-I;G>=Q?S=G-Q:P-=ca=Q-G;k=0==J?k+('<div class="zenario_overflow_wrap" style="width: '+P+'px; overflow-x: hidden;"><ul id="')+(w+'s" class="zenario_grids" style="width: '+(P+Math.abs(Q-G)+1)+"px;"):k+('<ul id="'+w+'s" class="zenario_grids" style="width: '+
P+"px;");R&&(k+="padding-left: "+R+"px;");S&&(k+="padding-right: "+S+"px;");0==J&&(k+="background: white top left repeat-y url("+N(la)+"zenario/admin/grid_maker/grid_bg.php?gColWidth="+p+"&gCols="+f+"&gGutter="+g+"&gGutterLeftEdge="+I+"&gGutterRightEdge="+G+");",e.gGutterLeftEdge=I,e.gGutterLeft=T,e.gGutterRight=Q,e.gGutterRightEdge=G,e.gColAndGutterWidth=H,e.typAddSlot=2*H-g,e.typAddBreak=f*H-g);k+='">';0<J&&"zenarioSD"!=e.globalName&&(k+=u("class","zenario_grid_object_properties",u(ha("data-type",
"grouping","data-for",a,"data-small",q.small,"data-is_full",M(q.isAlpha&&q.atRightEdge),"data-is_last",M(!q.isAlpha&&q.isOmega),"data-css_class",q.css_class,"title",r.gridEditProperties,q.css_class?N(q.css_class):r.gridEditPlaceholder)))+"<br/>");d||(d=[]);for(a=d.length-1;0<=a;--a)d[a].cells&&e.checkCellsEmpty(d[a])&&d.splice(a,1);q=f;var K=!1;for(a in d)if(v(d,a)){d[a].width=d[a].grid_break?f:Math.min(f,d[a].width||1);q+=d[a].width;if(d[a].width==f||0==q%f)d[a].atRightEdge=!0;q>f&&(q=d[a].width,
!1!==K&&(d[K].isOmega=!0),d[a].isAlpha=!0);K=a}!1!==K&&(d[K].isOmega=!0);for(a in d)if(v(d,a)){e.data.responsive&&("first"!=d[a].small||!d[a].isAlpha&&d[a].isOmega||delete d[a].small,"only"!=d[a].small||d[a].isAlpha&&d[a].isOmega||delete d[a].small);d[a].widthPx=d[a].width*H-(d[a].isAlpha?ba:0)-(d[a].atRightEdge?ca:0);d[a].widthPercent=d[a].width*A+(d[a].width-1)*Z;d[a].marginLeft=d[a].isAlpha&&ba?I:T;d[a].marginRight=d[a].atRightEdge&&ca?G:Q;k+=pa("id",w+"-"+a,"data-i",a,"data-level",J,"data-levels",
c.join("-"),"data-gutter",g,"data-minwidth",1*H-g,"data-maxwidth",H*f-g,"data-is_alpha",M(d[a].isAlpha),"data-is_omega",M(d[a].isOmega),"data-at_right_edge",M(d[a].atRightEdge),"data-col_and_gutter_width",H,"data-displayed_width",d[a].width*H-g,"data-displayed_margin_left",d[a].marginLeft," ");q="";d[a].grid_break||"only"==d[a].small||(q="zenario_grid_cell_resizable");k+=' class="zenario_grid_cell '+q+" zenario_grid_cell__"+w;d[a].flash&&!e.undoing&&(delete d[a].flash,k+=" zenario_grid_newly_added");
k=d[a].cells?k+' zenario_grid_nest"':d[a].space?k+' zenario_grid_space_cell"':k+' zenario_grid_slot"';k+=' style="width: '+d[a].widthPx+'px;">';d[a].grid_break&&(k+=u("class","zenario_grid_break_outer_wrap",">"));q="margin-left: "+d[a].marginLeft+"px; margin-right: "+d[a].marginRight+"px;";if(d[a].cells)k+=u("id",w+"-"+a+"-span","class","zenario_grid_wrap");else{if(d[a].slot)d[a].name?e.checkIfNameUsed(d[a].name)||(e.registerNewName(d[a].name),++e.randomNameCount):d[a].name=e.uniqueRandomName(),K=
e.cellLabel(d[a]),"zenarioSD"==e.globalName&&_._isEm(e.cellLabel(d[a]))&&(K=r.gridNoPluginMessage),k+=u("class","zenario_grid_border zenario_cell_in_grid zenario_grid_gutter "+(d[a].grid_break?"zenario_grid_break zenario_grid_break_with_slot":""),"style",q,">"),k+=u("class","zenario_grid_name_area",u("class","zenario_grid_delete","title",r.gridDelete,"data-for",w+"-"+a,"style","right: "+d[a].marginRight+"px;")+u("class","zenario_grid_faux_block_t")+u("class","zenario_grid_object_properties",u(ha("data-type",
d[a].grid_break?"grid_break_with_slot":"slot","data-for",w+"-"+a,"data-name",d[a].name,"data-small",d[a].small,"data-height",d[a].height,"data-is_full",M(d[a].isAlpha&&d[a].atRightEdge),"data-is_last",M(!d[a].isAlpha&&d[a].isOmega),"data-css_class",d[a].css_class,"title",r.gridEditProperties,"data-grid_css_class",d[a].grid_break&&d[a].grid_css_class,N(K)+(d[a].height&&"small"!=d[a].height?" ("+d[a].height+")":""))))),k+=u("class","zenario_grid_faux_block_r"),k+=u("class","zenario_grid_cell_size",
">"),d[a].grid_break||(q=d[a].width*H-g,k=e.data.fluid?J?k+(Math.round(d[a].widthPercent)+"%"):k+(Math.round(10*d[a].widthPercent)/10+"%"):k+(q+"px")),k+="</div>",k+=u("class","zenario_grid_faux_block_t");else{k+=u("class","zenario_cell_in_grid zenario_grid_gutter "+(d[a].grid_break?"zenario_grid_break zenario_grid_break_no_slot":"zenario_grid_space"),"style",q,"title",d[a].grid_break?r.gridGridBreak:r.gridEmptySpace,">");k+=u("class","zenario_grid_delete","title",r.gridDelete,"data-for",w+"-"+a,
"style","right: "+d[a].marginRight+"px;");k+=u("&nbsp;");k+=u("&nbsp;");k+='<div class="zenario_grid_object_properties"><div><span data-type="'+(d[a].grid_break?"grid_break":"space")+'" data-for="'+w+"-"+a+'" data-html="'+N(d[a].html)+'"';var V;k=d[a].grid_break?k+(' data-grid_css_class="'+N(V=d[a].grid_css_class)+'"'):k+(' data-css_class="'+N(V=d[a].css_class)+'"');k+=' title="'+r.gridEditProperties+'">'+(V?N(V):r.gridEditPlaceholder)+"</span></div></div>"}k+="</div>"}d[a].grid_break&&(k+="</div>");
k+="</li>"}k+="</ul>";0==J&&(k+="</div>");$(".ui-tooltip").remove();ma(b).innerHTML=k;q=0;for(a in d)if(v(d,a)){a*=1;d[a].cells&&(g=p,A=d[a].width,c.push(a),g=e.drawEditor(w+"-"+a+"-span",w+"-"+a,c,A,g,O,d[a].isAlpha?I-R:qa,d[a].atRightEdge?G-S:ra,O,d[a].widthPercent/A,0),c.pop(),1<g&&(d[a].width=Math.max(d[a].width,g)));aa=Math.max(aa,d[a].width);delete d[a].isAlpha;delete d[a].isOmega;delete d[a].atRightEdge;delete d[a].widthPx;delete d[a].widthPercent;delete d[a].marginLeft;delete d[a].marginRight;
q+=d[a].width;if(q>f){A=g=0;for(g in B)v(B,g)&&(A=Math.max(A,$("#"+w+"-"+g).height()));for(g in B)v(B,g)&&$("#"+w+"-"+g).height(A);q=d[a].width;B={}}B[a]=!0}A=g=0;for(g in B)v(B,g)&&(A=Math.max(A,$("#"+w+"-"+g).height()));for(g in B)v(B,g)&&$("#"+w+"-"+g).height(A);$("#"+w+"s").disableSelection();$("#"+w+"s").sortable({cancel:"a,button,input,select",placeholder:"zenario_grid_cell zenario_grid_sortable_target",sort:function(n,l){n=$(".zenario_grid_sortable_target");var h=l.item.data("add");$(".zenario_overflow_wrap").scrollLeft(0);
if(z(h)){var x=70;switch(h){case "grid_break":case "grid_break_with_slot":var t=e.typAddBreak;break;default:t=e.typAddSlot}h=n.next();h.length||(h=n.prev());h.length&&(x=h.height()-10);n.height(x).width(t).css("margin-left",0).css("margin-right",0).html(u());h=n.next();h.hasClass("ui-draggable")&&(h=!1);t=n.offset().left<e.gColAndGutterWidth;l=!h||!h.offset()||h.offset().left<n.offset().left;x=!!(h&&1*h.data("is_alpha"));h&&h.data("at_right_edge");h=t?e.gGutterLeftEdge:e.gGutterLeft;l=l?e.gGutterRightEdge:
e.gGutterRight;x&&(l+=e.gGutterLeft-e.gGutterLeftEdge);n.css("margin-left",h).css("margin-right",l)}else t=l.item.width(),x=l.item.height(),h=1*l.item.data("displayed_margin_left"),l=t-h-1*l.item.data("displayed_width"),n.height(x),x-=24,n.width(t).html(u("style","margin: 10px "+l+"px 14px "+h+"px; height: "+x+"px;"))},items:"li.zenario_grid_cell__"+w,connectWith:".zenario_grids",start:function(n,l){e.stopRenames=!0},stop:function(n,l){n=e.data;var h=l.item.data(),x=l.item.prev().data();l.item.prev().data();
l=l.item.parent().parent().parent().data();l&&z(l.level)||(l=ea);if(!h.add){var t=h.i;var C=n;if(1*h.level)for(y in c=(""+h.levels).s("-"),c)if(v(c,y)){var E=c[y];C=C.cells[1*E]}}x=x?x.i+1:0;var D=n;if(l)for(y in c=""!=l.levels?(l.levels+"-"+l.i).s("-"):[l.i],c)v(c,y)&&(E=c[y],D=D.cells[1*E]);var y=t==x;if(E=C===D){if(y)return;x>t&&--x}if(E||!C||!C.cells[t].grid_break){switch(h.add){case "slot":t={width:2,slot:!0,name:e.uniqueRandomName(),flash:!0};C=r.growlSlotAdded;l&&"zenarioSD"==e.globalName&&
(t.width=D.width);break;case "space":t={width:2,space:!0,css_class:e.randomName(2,"Space_"),flash:!0};C=r.growlSpaceAdded;break;case "grouping":if(l&&"zenarioSD"==e.globalName){e.change();return}t={width:2,css_class:e.randomName(2,"Grouping_"),flash:!0,cells:[{width:2,slot:!0,name:e.uniqueRandomName()},{width:2,slot:!0,name:e.uniqueRandomName()}]};C=r.growlChildrenAdded;break;case "grid_break":if(l){e.change();return}t={width:n.cols,grid_break:!0,grid_css_class:e.randomName(2,"Grid_"),flash:!0};C=
r.growlGridBreakAdded;break;case "grid_break_with_slot":if(l){e.change();return}t={width:n.cols,grid_break:!0,slot:!0,grid_css_class:e.randomName(2,"Grid_"),name:e.uniqueRandomName(),flash:!0};C=r.growlSlotAdded;break;default:t=C.cells.splice(t,1)[0],C=r.growlSlotMoved}D.cells.splice(x,0,t);toastr.success(C)}e.change()}});if(0==J)$("#"+b+" .zenario_grid_cell_resizable").each(function(n,l){var h=$(l),x=h.width()-1*h.data("displayed_width"),t=1*h.data("col_and_gutter_width"),C=1*h.data("displayed_margin_left");
n=1*h.data("minwidth");l=1*h.data("maxwidth");h.data("level");h.resizable({cancel:"a,button,input,select",handles:"se",grid:t,minHeight:h.height(),maxHeight:h.height(),minWidth:Math.floor(n-.5*t+1),maxWidth:Math.floor(l+.5*t-1),helper:"ui-resizable-helper",start:function(E,D){h.hasClass("zenario_grid_nest")?$(U.body).addClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell"):h.hasClass("zenario_grid_space_cell")?$(U.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").addClass("zenario_grid_resizing_space_cell"):
$(U.body).removeClass("zenario_grid_resizing_nest").addClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell")},resize:function(E,D){E=D.helper.width();var y=D.element.width(),L=E-x,F="";E!=y&&(F=e.data.fluid?F+("~"+Math.round(100*L/e.data.maxWidth)+"%"):F+(L+"px"));D.helper.html(u("class","zenario_resizing_border","style","height: "+(D.helper.height()-4)+"px; width: "+(L-4)+"px; margin-left: "+C+"px;",u("class","zenario_size_when_resizing",F)))},stop:function(E,D){$(U.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell");
E=1*D.element.data("i");var y=e.getLevels(D.element),L=e.data;if(y){y=y.s("-");for(var F in y)v(y,F)&&(F*=1,L=L.cells[1*y[F]])}F=L.cells[1*E];var sa=F.width,ja=F.width=Math.round((D.element.width()+h.data("gutter")/2)/t),ka=function(W){if(W){var da;for(da in W)if(v(W,da)){var X=W[da];if(X.width==sa||X.width>ja)X.width=ja;ka(X.cells)}}};ka(L.cells[E].cells);e.change()}})}),$("#"+b+" .ui-resizable-handle").each(function(n,l){n=$(l);l=n.prev();var h=l.children().first();h&&h.length&&h.hasClass("zenario_grids")?
(n.css("right","-2px"),n.css("top",l.height()-12+"px"),n.attr("title",r.gridResizeNestedCells)):(n.css("right",1*l.css("marginRight").r(/\D/g,"")),n.css("top",l.height()+10+2+10+10+2-19+"px"),n.attr("title",r.gridResizeSlot),"zenarioSD"==e.globalName&&1==n.parent().data("level")&&n.remove())}),$("#"+b).width(P+R+S).addClass("zenario_grid_wrapper"),e.tooltips("#"+b),$("#"+b+" .zenario_grid_delete").click(function(){e.deleteCell(this)}),$("#"+b+" .zenario_grid_object_properties span").click(function(){e.stopRenames||
e.editProperties(this)}),setTimeout(function(){delete e.stopRenames},100),e.drawLinks(),$("#"+b+" .zenario_grid_newly_added .zenario_cell_in_grid").effect({effect:"highlight",duration:1E3,easing:"zenarioOmmitEnd"}),$("#"+e.gridId).scrollTop(ia),e.drawAddToolbar();else return aa};m.tooltips=function(b){return Y._t(b)};m.clearAddToolbar=function(){};m.drawAddToolbar=function(){};m.drawLinks=function(){};m.checkCellsEmpty=function(b){if(!b||!b.cells)return!0;var a=ea;for(a in b.cells)if(v(b.cells,a))break;
return!z(a)};m.deleteCell=function(b){var a=this,c;if((c=$(b).data("for"))&&(c=$("#"+c))){var f=c.data("i");b=a.getLevels(c);var p=a.data;if(b)for(g in b=b.s("-"),b)v(b,g)&&(g*=1,p=p.cells[1*b[g]]);var g=p.cells[f];b=function(){p.cells.splice(f,1);a.change();toastr.success(r.growlSlotDeleted)};g.oName&&a.layoutId&&a.confirmDeleteSlot?a.confirmDeleteSlot(g,b):b()}};m.add=function(b,a,c){c=$(b);b=this.getLevels(c);c=c.attr("data-new-width")||1;var f=this.data;$.colorbox.close();if(z(b)&&!1!==b){if(b){b=
b.s("-");for(var p in b)v(b,p)&&(p*=1,f=f.cells[1*b[p]])}"slot"==a?(f.cells.push({width:c,slot:!0,name:this.uniqueRandomName(),flash:!0}),toastr.success(r.growlSlotAdded)):"space"==a?(f.cells.push({width:c,space:!0,css_class:this.randomName(2,"Space_"),flash:!0}),toastr.success(r.growlSpaceAdded)):"grouping"==a?(f.cells.push({width:c,css_class:this.randomName(2,"Grouping_"),flash:!0,cells:[{width:c,slot:!0,name:this.uniqueRandomName()},{width:c,slot:!0,name:this.uniqueRandomName()}]}),toastr.success(r.growlChildrenAdded)):
"grid_break"==a?(f.cells.push({width:f.cols,grid_break:!0,grid_css_class:this.randomName(2,"Grid_"),flash:!0}),toastr.success(r.growlGridBreakAdded)):"grid_break_with_slot"==a&&(f.cells.push({width:f.cols,grid_break:!0,slot:!0,grid_css_class:this.randomName(2,"Grid_"),name:this.uniqueRandomName(),flash:!0}),toastr.success(r.growlSlotAdded));this.change()}};m.getLevels=function(b){b=b.data("levels");return z(b)?""+b:""};m.saveProperties=function(b,a){var c;if((c=$(b).data("for"))&&(c=$("#"+c))){b=
c.data("i");c=this.getLevels(c);var f=this.data;if(c){c=c.s("-");for(var p in c)v(c,p)&&(p*=1,f=f.cells[1*c[p]])}if(f.cells[b].slot){if(a.name){if(a.name!=a.name.r(/[^a-zA-Z0-9_]/g,"")){$("#zenario_grid_error").html(r.gridErrorNameFormat).slideDown();return}if(a.name!=f.cells[b].name&&this.checkIfNameUsed(a.name)){$("#zenario_grid_error").html(r.gridErrorNameInUse).slideDown();return}}else{$("#zenario_grid_error").html(r.gridErrorNameIncomplete).slideDown();return}delete this.names[f.cells[b].name];
this.registerNewName(a.name)}for(var g in a)v(a,g)&&(""!=a[g]?f.cells[b][g]=a[g]:delete f.cells[b][g]);this.change()}$.colorbox.close()};m.randomName=function(b,a){a=a||"Slot_";for(var c=0;c<b;++c)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(26*Math.random()));return a};m.uniqueRandomName=function(){var b=Math.ceil(Math.log(Math.max(this.randomNameCount,2))/Math.log(10));do var a=this.randomName(b);while(this.checkIfNameUsed(a));this.names[a]=!0;++this.randomNameCount;return a};m.checkIfNameUsed=
function(b){return z(this.names[b.toLowerCase()])};m.registerNewName=function(b){return this.names[b.toLowerCase()]=b};m.change=function(b,a){b||(this.pos<this.history.length-1&&this.history.splice(this.pos+1,this.history.length-1-this.pos),this.history.push(this.ajaxData()),this.pos=this.history.length-1,this.savedAtPos>=this.pos&&(this.savedAtPos=-1));this.draw(a)};m.undoOrRedo=function(b){var a=this.pos-b;0>a||a>=this.history.length||(this.pos=a,this.data=JSON.parse(this.history[a]),this.change(!0,
1<b))};m.undo=function(){this.undoing=!0;this.undoOrRedo(1);delete this.undoing};m.redo=function(){this.undoOrRedo(-1)};m.revert=function(){this.undoOrRedo(0)};m.canUndo=function(){return 0<this.pos};m.canRedo=function(){return this.pos<this.history.length-1};m.microTemplate=function(b,a,c){var f=Y._aLP(a,this);b=fa._mT(b,a,c);f&&Y._tLP(a);return b}})},window.zenarioG=zenario._cZL("G",void 0,function(){this.initVars()}));

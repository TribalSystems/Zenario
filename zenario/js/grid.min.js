'use strict';zenario.lib(function(ea,la,U,ta,ua,va,Y,wa,fa,xa,ya,za,Aa,z,M,ma,N,Ba,q,Ca,na,v,oa){var m=na(oa);fa.lib(function(Da,u,Ea,Fa,Ga,ha,Ha,Ia,Ja,Ka,pa){m.initVars=function(){this.editing=!1;this.data={};this.openedSkinId=this.layoutName="";this.history=[];this.savedAtPos=this.pos=0;this.lastIframeHeight=360;this.bodyPadding=0;this.desktopSmallestSize=800;this.previewPaddingLeftRight=75;this.gridAreaSmallestHeight=150;this.tabletWidth=768;this.mobileWidth=320;this.lastToast=!1;this.gridId="..."};
m.init=function(b,a){this.initVars();this.gridId=a;this.data="object"==typeof b?b:JSON.parse(b);this.checkDataR(this.data.cells);this.rememberNames(this.data.cells)};m.checkDataNonZero=function(b,a,d,f,r){1*a[d]||(a[d]=f,b=!0);a[d]=Math.round(a[d]);a[d]<=r&&(a[d]=f,b=!0);return b};m.checkDataNumeric=function(b,a,d,f,r){r||(r=1);z(a[d])&&1*a[d]==a[d]||(a[d]=f,b=!0);0>r?(r*=-1,a[d]=Math.round(a[d]*r)/r):a[d]=Math.round(a[d]/r)*r;0>a[d]&&(a[d]=f,b=!0);return b};m.checkDataNonZeroAndNumeric=function(b,
a){var d=!1,f=!1;a=this.checkDataNonZero(a,b,"cols",10,0);d=this.checkDataNonZero(d,b,"colWidth",60,1);this.checkDataNonZero(f,b,"minWidth",600,100);a=this.checkDataNonZero(a,b,"maxWidth",960,100);this.checkDataNumeric(a,b,"bp1",0,1);this.checkDataNumeric(a,b,"bp2",0,1);d=this.checkDataNumeric(d,b,"gutter",40);d=this.checkDataNumeric(d,b,"gutterLeftEdge",0);d=this.checkDataNumeric(d,b,"gutterRightEdge",0);this.checkDataNumeric(a,b,"gutterFlu",1,-10);this.checkDataNumeric(a,b,"gutterLeftEdgeFlu",0,
-10);f=this.checkDataNumeric(a,b,"gutterRightEdgeFlu",0,-10);100<b.gutterFlu*(b.cols-1)+b.gutterLeftEdgeFlu+b.gutterRightEdgeFlu&&(b.gutterFlu=0,b.gutterLeftEdgeFlu=0,b.gutterRightEdgeFlu=0,f=!0);b.minWidth>b.maxWidth&&(b.minWidth=b.maxWidth,f=!0);return a||(b.fluid?f:d)};m.checkDataR=function(b){var a,d,f;for(a=0;a<b.length;++a)if(b[d=a].grid_break_group&&b[d].cells){for(f in b[d].cells)v(b[d].cells,f)&&b.splice(++a,0,b[d].cells[f]);delete b[d].cells;b[a+1]&&(b[a+1].grid_break||b[a+1].grid_break_group)||
(b.splice(++a,0,{grid_break:!0,grid_css_class:this.randomName(2,"Grid_"),html:b[d].after}),delete b[d].after);b[d].grid_break=!0;b[d].grid_css_class=b[d].name||this.randomName(2,"Grid_");delete b[d].name;delete b[d].grid_break_group}for(a=0;a<b.length;++a)!b[a].name||b[a].cells||b[a].grid_break||b[a].grid_break_group||b[a].space||(b[a].slot=!0);for(a=0;a<b.length;++a)d=[],b[a].responsive?b[a].small="hide":b[a].first&&(b[a].small="first"),delete b[a].responsive,delete b[a].first,b[a].custom_class&&
(d.push(b[a].custom_class),delete b[a].custom_class),b[a].name&&(b[a].space||b[a].cells)&&(d.push(b[a].name),delete b[a].name),d.length&&b[a].css_class&&d.push(b[a].css_class),d.length&&(b[a].css_class=d.join(" ")),b[a].cells?(delete b[a].html,delete b[a].after,delete b[a].before,this.checkDataR(b[a].cells)):b[a].name?(delete b[a].after,delete b[a].before):(d=[],b[a].after&&(d.push(b[a].after),delete b[a].after),b[a].before&&(d.push(b[a].before),delete b[a].before),d.length&&(b[a].html=d.join(" ")))};
m.ajaxData=function(){return JSON.stringify(this.data)};m.rememberNames=function(b){for(var a=0;a<b.length;++a)b[a].cells?this.rememberNames(b[a].cells):b[a].name&&(b[a].oName=b[a].name)};m.checkData=function(b,a){var d;this.data?_._isAr(this.data)?(this.data={cells:this.data},a&&(d=1*a.r(/\D/g,""))&&(this.data.cols=d)):this.data.cells||(this.data.cells=[]):this.data={cells:[]};this.data.fluid&&!z(this.data.gutterFlu)&&z(this.data.gutter)?(this.checkDataNonZeroAndNumeric(this.data),b=this.data.gutterLeftEdge+
this.data.cols*this.data.colWidth+(this.data.cols-1)*this.data.gutter+this.data.gutterRightEdge,this.data.minWidth=960<b?960:760<b?760:b,this.data.maxWidth=b,this.data.gutterFlu=Math.round(this.data.gutter/b*1E3)/10,this.data.gutterLeftEdgeFlu=Math.round(this.data.gutterLeftEdge/b*1E3)/10,this.data.gutterRightEdgeFlu=Math.round(this.data.gutterRightEdge/b*1E3)/10):this.data.fluid||z(this.data.gutter)||!z(this.data.gutterFlu)||(this.checkDataNonZeroAndNumeric(this.data),b=this.data.maxWidth,this.data.gutter=
Math.round(this.data.gutterFlu*b/100),this.data.gutterLeftEdge=Math.round(this.data.gutterLeftEdgeFlu*b/100),this.data.gutterRightEdge=Math.round(this.data.gutterRightEdgeFlu*b/100),this.data.colWidth=(b-(this.data.gutterLeftEdge+(this.data.cols-1)*this.data.gutter+this.data.gutterRightEdge))/this.data.cols,(b=this.recalcColumnAndGutterOptions(this.data,!0,b))?(this.data.colWidth=b.colWidth,this.data.gutter=b.gutter):(delete this.data.colWidth,delete this.data.gutter));this.checkDataNonZeroAndNumeric(this.data);
this.data.fluid?(delete this.data.gutter,delete this.data.gutterLeftEdge,delete this.data.gutterRightEdge,delete this.data.colWidth):(delete this.data.gutterFlu,delete this.data.gutterLeftEdgeFlu,delete this.data.gutterRightEdgeFlu);this.history.length||(this.pos=0,this.history=[this.ajaxData()])};m.draw=function(b){this.drawEditor()};m.cellLabel=function(b){return b.name};m.drawEditor=function(b,a,d,f,r,l,I,G,O,A,Z){var e=this,J=0,ia=0;if(d&&z(d[0])){var p=e.data;for(var B in d)v(d,B)&&(B*=1,J=B+
1,p=p.cells[d[B]])}else ia=$("#"+e.gridId).scrollTop(),e.checkData(),p=e.data,J=0,d=[],e.names={},e.randomNameCount=0;z(b)||(b=e.gridId);z(f)||(f=e.data.cols);z(r)||(e.data.fluid?(Z=e.data.gutterFlu,A=(100-e.data.gutterLeftEdgeFlu-(e.data.cols-1)*e.data.gutterFlu-e.data.gutterRightEdgeFlu)/e.data.cols,l=Math.round(e.data.gutterFlu*e.data.maxWidth/100),I=Math.round(e.data.gutterLeftEdgeFlu*e.data.maxWidth/100),G=Math.round(e.data.gutterRightEdgeFlu*e.data.maxWidth/100),O=l,r=Math.round(A*e.data.maxWidth/
100)):(Z=A=0,l=e.data.gutter,I=e.data.gutterLeftEdge,G=e.data.gutterRightEdge,O=l,r=e.data.colWidth));var h="";B={};var aa=1,c=p.cells,w=e.gridId+"__cell"+d.join("-"),H=r+l,P=f*H,R=0,S=0,ba=0,ca=0,T=Math.ceil(l/2),Q=Math.floor(l/2),qa=Math.ceil(O/2),ra=Math.floor(O/2);I>=T?R=I-T:P-=ba=T-I;G>=Q?S=G-Q:P-=ca=Q-G;h=0==J?h+('<div class="zenario_overflow_wrap" style="width: '+P+'px; overflow-x: hidden;"><ul id="')+(w+'s" class="zenario_grids" style="width: '+(P+Math.abs(Q-G)+1)+"px;"):h+('<ul id="'+w+'s" class="zenario_grids" style="width: '+
P+"px;");R&&(h+="padding-left: "+R+"px;");S&&(h+="padding-right: "+S+"px;");0==J&&(h+="background: white top left repeat-y url("+N(la)+"zenario/admin/grid_maker/grid_bg.php?gColWidth="+r+"&gCols="+f+"&gGutter="+l+"&gGutterLeftEdge="+I+"&gGutterRightEdge="+G+");",e.gGutterLeftEdge=I,e.gGutterLeft=T,e.gGutterRight=Q,e.gGutterRightEdge=G,e.gColAndGutterWidth=H,e.typAddSlot=2*H-l,e.typAddBreak=f*H-l);h+='">';0<J&&"zenarioSD"!=e.globalName&&(h+=u("class","zenario_grid_object_properties",u(ha("data-type",
"grouping","data-for",a,"data-small",p.small,"data-is_full",M(p.isAlpha&&p.atRightEdge),"data-is_last",M(!p.isAlpha&&p.isOmega),"data-css_class",p.css_class,"title",q.gridEditProperties,p.css_class?N(p.css_class):q.gridEditPlaceholder)))+"<br/>");c||(c=[]);for(a=c.length-1;0<=a;--a)c[a].cells&&e.checkCellsEmpty(c[a])&&c.splice(a,1);p=f;var K=!1;for(a in c)if(v(c,a)){c[a].width=c[a].grid_break?f:Math.min(f,c[a].width||1);p+=c[a].width;if(c[a].width==f||0==p%f)c[a].atRightEdge=!0;p>f&&(p=c[a].width,
!1!==K&&(c[K].isOmega=!0),c[a].isAlpha=!0);K=a}!1!==K&&(c[K].isOmega=!0);for(a in c)if(v(c,a)){e.data.responsive&&("first"!=c[a].small||!c[a].isAlpha&&c[a].isOmega||delete c[a].small,"only"!=c[a].small||c[a].isAlpha&&c[a].isOmega||delete c[a].small);c[a].widthPx=c[a].width*H-(c[a].isAlpha?ba:0)-(c[a].atRightEdge?ca:0);c[a].widthPercent=c[a].width*A+(c[a].width-1)*Z;c[a].marginLeft=c[a].isAlpha&&ba?I:T;c[a].marginRight=c[a].atRightEdge&&ca?G:Q;h+=pa("id",w+"-"+a,"data-i",a,"data-level",J,"data-levels",
d.join("-"),"data-gutter",l,"data-minwidth",1*H-l,"data-maxwidth",H*f-l,"data-is_alpha",M(c[a].isAlpha),"data-is_omega",M(c[a].isOmega),"data-at_right_edge",M(c[a].atRightEdge),"data-col_and_gutter_width",H,"data-displayed_width",c[a].width*H-l,"data-displayed_margin_left",c[a].marginLeft," ");p="";c[a].grid_break||"only"==c[a].small||(p="zenario_grid_cell_resizable");h+=' class="zenario_grid_cell '+p+" zenario_grid_cell__"+w;c[a].flash&&!e.undoing&&(delete c[a].flash,h+=" zenario_grid_newly_added");
h=c[a].cells?h+' zenario_grid_nest"':c[a].space?h+' zenario_grid_space_cell"':h+' zenario_grid_slot"';h+=' style="width: '+c[a].widthPx+'px;">';c[a].grid_break&&(h+=u("class","zenario_grid_break_outer_wrap",">"));p="margin-left: "+c[a].marginLeft+"px; margin-right: "+c[a].marginRight+"px;";if(c[a].cells)h+=u("id",w+"-"+a+"-span","class","zenario_grid_wrap");else{if(c[a].slot)c[a].name?e.checkIfNameUsed(c[a].name)||(e.registerNewName(c[a].name),++e.randomNameCount):c[a].name=e.uniqueRandomName(),K=
e.cellLabel(c[a]),"zenarioSD"==e.globalName&&_._isEm(e.cellLabel(c[a]))&&(K=q.gridNoPluginMessage),h+=u("class","zenario_grid_border zenario_cell_in_grid zenario_grid_gutter "+(c[a].grid_break?"zenario_grid_break zenario_grid_break_with_slot":""),"style",p,">"),h+=u("class","zenario_grid_name_area",u("class","zenario_grid_delete","title",q.gridDelete,"data-for",w+"-"+a,"style","right: "+c[a].marginRight+"px;")+u("class","zenario_grid_faux_block_t")+u("class","zenario_grid_object_properties",u(ha("data-type",
c[a].grid_break?"grid_break_with_slot":"slot","data-for",w+"-"+a,"data-name",c[a].name,"data-small",c[a].small,"data-height",c[a].height,"data-is_full",M(c[a].isAlpha&&c[a].atRightEdge),"data-is_last",M(!c[a].isAlpha&&c[a].isOmega),"data-css_class",c[a].css_class,"title",q.gridEditProperties,"data-grid_css_class",c[a].grid_break&&c[a].grid_css_class,N(K)+(c[a].height&&"small"!=c[a].height?" ("+c[a].height+")":""))))),h+=u("class","zenario_grid_faux_block_r"),h+=u("class","zenario_grid_cell_size",
">"),c[a].grid_break||(p=c[a].width*H-l,h=e.data.fluid?J?h+(Math.round(c[a].widthPercent)+"%"):h+(Math.round(10*c[a].widthPercent)/10+"%"):h+(p+"px")),h+="</div>",h+=u("class","zenario_grid_faux_block_t");else{h+=u("class","zenario_cell_in_grid zenario_grid_gutter "+(c[a].grid_break?"zenario_grid_break zenario_grid_break_no_slot":"zenario_grid_space"),"style",p,"title",c[a].grid_break?q.gridGridBreak:q.gridEmptySpace,">");h+=u("class","zenario_grid_delete","title",q.gridDelete,"data-for",w+"-"+a,
"style","right: "+c[a].marginRight+"px;");h+=u("&nbsp;");h+=u("&nbsp;");h+='<div class="zenario_grid_object_properties"><div><span data-type="'+(c[a].grid_break?"grid_break":"space")+'" data-for="'+w+"-"+a+'" data-html="'+N(c[a].html)+'"';var V;h=c[a].grid_break?h+(' data-grid_css_class="'+N(V=c[a].grid_css_class)+'"'):h+(' data-css_class="'+N(V=c[a].css_class)+'"');h+=' title="'+q.gridEditProperties+'">'+(V?N(V):q.gridEditPlaceholder)+"</span></div></div>"}h+="</div>"}c[a].grid_break&&(h+="</div>");
h+="</li>"}h+="</ul>";0==J&&(h+="</div>");$(".ui-tooltip").remove();ma(b).innerHTML=h;p=0;for(a in c)if(v(c,a)){a*=1;c[a].cells&&(l=r,A=c[a].width,d.push(a),l=e.drawEditor(w+"-"+a+"-span",w+"-"+a,d,A,l,O,c[a].isAlpha?I-R:qa,c[a].atRightEdge?G-S:ra,O,c[a].widthPercent/A,0),d.pop(),1<l&&(c[a].width=Math.max(c[a].width,l)));aa=Math.max(aa,c[a].width);delete c[a].isAlpha;delete c[a].isOmega;delete c[a].atRightEdge;delete c[a].widthPx;delete c[a].widthPercent;delete c[a].marginLeft;delete c[a].marginRight;
p+=c[a].width;if(p>f){A=l=0;for(l in B)v(B,l)&&(A=Math.max(A,$("#"+w+"-"+l).height()));for(l in B)v(B,l)&&$("#"+w+"-"+l).height(A);p=c[a].width;B={}}B[a]=!0}A=l=0;for(l in B)v(B,l)&&(A=Math.max(A,$("#"+w+"-"+l).height()));for(l in B)v(B,l)&&$("#"+w+"-"+l).height(A);$("#"+w+"s").disableSelection();$("#"+w+"s").sortable({cancel:"a,button,input,select",placeholder:"zenario_grid_cell zenario_grid_sortable_target",sort:function(n,k){n=$(".zenario_grid_sortable_target");var g=k.item.data("add");$(".zenario_overflow_wrap").scrollLeft(0);
if(z(g)){var x=70;switch(g){case "grid_break":case "grid_break_with_slot":var t=e.typAddBreak;break;default:t=e.typAddSlot}g=n.next();g.length||(g=n.prev());g.length&&(x=g.height()-10);n.height(x).width(t).css("margin-left",0).css("margin-right",0).html(u());g=n.next();g.hasClass("ui-draggable")&&(g=!1);t=n.offset().left<e.gColAndGutterWidth;k=!g||!g.offset()||g.offset().left<n.offset().left;x=!!(g&&1*g.data("is_alpha"));g&&g.data("at_right_edge");g=t?e.gGutterLeftEdge:e.gGutterLeft;k=k?e.gGutterRightEdge:
e.gGutterRight;x&&(k+=e.gGutterLeft-e.gGutterLeftEdge);n.css("margin-left",g).css("margin-right",k)}else t=k.item.width(),x=k.item.height(),g=1*k.item.data("displayed_margin_left"),k=t-g-1*k.item.data("displayed_width"),n.height(x),x-=24,n.width(t).html(u("style","margin: 10px "+k+"px 14px "+g+"px; height: "+x+"px;"))},items:"li.zenario_grid_cell__"+w,connectWith:".zenario_grids",start:function(n,k){e.stopRenames=!0},stop:function(n,k){n=e.data;var g=k.item.data(),x=k.item.prev().data();k.item.prev().data();
k=k.item.parent().parent().parent().data();k&&z(k.level)||(k=ea);if(!g.add){var t=g.i;var C=n;if(1*g.level)for(y in d=(""+g.levels).s("-"),d)if(v(d,y)){var E=d[y];C=C.cells[1*E]}}x=x?x.i+1:0;var D=n;if(k)for(y in d=""!=k.levels?(k.levels+"-"+k.i).s("-"):[k.i],d)v(d,y)&&(E=d[y],D=D.cells[1*E]);var y=t==x;if(E=C===D){if(y)return;x>t&&--x}if(E||!C||!C.cells[t].grid_break){switch(g.add){case "slot":t={width:2,slot:!0,name:e.uniqueRandomName(),flash:!0};C=q.growlSlotAdded;k&&"zenarioSD"==e.globalName&&
(t.width=D.width);break;case "space":t={width:2,space:!0,css_class:e.randomName(2,"Space_"),flash:!0};C=q.growlSpaceAdded;break;case "grouping":if(k&&"zenarioSD"==e.globalName){e.change();return}t={width:2,css_class:e.randomName(2,"Grouping_"),flash:!0,cells:[{width:2,slot:!0,name:e.uniqueRandomName()},{width:2,slot:!0,name:e.uniqueRandomName()}]};C=q.growlChildrenAdded;break;case "grid_break":if(k){e.change();return}t={width:n.cols,grid_break:!0,grid_css_class:e.randomName(2,"Grid_"),flash:!0};C=
q.growlGridBreakAdded;break;case "grid_break_with_slot":if(k){e.change();return}t={width:n.cols,grid_break:!0,slot:!0,grid_css_class:e.randomName(2,"Grid_"),name:e.uniqueRandomName(),flash:!0};C=q.growlSlotAdded;break;default:t=C.cells.splice(t,1)[0],C=q.growlSlotMoved}D.cells.splice(x,0,t);toastr.success(C)}e.change()}});if(0==J)$("#"+b+" .zenario_grid_cell_resizable").each(function(n,k){var g=$(k),x=g.width()-1*g.data("displayed_width"),t=1*g.data("col_and_gutter_width"),C=1*g.data("displayed_margin_left");
n=1*g.data("minwidth");k=1*g.data("maxwidth");g.data("level");g.resizable({cancel:"a,button,input,select",handles:"se",grid:t,minHeight:g.height(),maxHeight:g.height(),minWidth:Math.floor(n-.5*t+1),maxWidth:Math.floor(k+.5*t-1),helper:"ui-resizable-helper",start:function(E,D){g.hasClass("zenario_grid_nest")?$(U.body).addClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell"):g.hasClass("zenario_grid_space_cell")?$(U.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").addClass("zenario_grid_resizing_space_cell"):
$(U.body).removeClass("zenario_grid_resizing_nest").addClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell")},resize:function(E,D){E=D.helper.width();var y=D.element.width(),L=E-x,F="";E!=y&&(F=e.data.fluid?F+("~"+Math.round(100*L/e.data.maxWidth)+"%"):F+(L+"px"));D.helper.html(u("class","zenario_resizing_border","style","height: "+(D.helper.height()-4)+"px; width: "+(L-4)+"px; margin-left: "+C+"px;",u("class","zenario_size_when_resizing",F)))},stop:function(E,D){$(U.body).removeClass("zenario_grid_resizing_nest").removeClass("zenario_grid_resizing_cell").removeClass("zenario_grid_resizing_space_cell");
E=1*D.element.data("i");var y=e.getLevels(D.element),L=e.data;if(y){y=y.s("-");for(var F in y)v(y,F)&&(F*=1,L=L.cells[1*y[F]])}F=L.cells[1*E];var sa=F.width,ja=F.width=Math.round((D.element.width()+g.data("gutter")/2)/t),ka=function(W){if(W){var da;for(da in W)if(v(W,da)){var X=W[da];if(X.width==sa||X.width>ja)X.width=ja;ka(X.cells)}}};ka(L.cells[E].cells);e.change()}})}),$("#"+b+" .ui-resizable-handle").each(function(n,k){n=$(k);k=n.prev();var g=k.children().first();g&&g.length&&g.hasClass("zenario_grids")?
(n.css("right","-2px"),n.css("top",k.height()-12+"px"),n.attr("title",q.gridResizeNestedCells)):(n.css("right",1*k.css("marginRight").r(/\D/g,"")),n.css("top",k.height()+10+2+10+10+2-19+"px"),n.attr("title",q.gridResizeSlot),"zenarioSD"==e.globalName&&1==n.parent().data("level")&&n.remove())}),$("#"+b).width(P+R+S).addClass("zenario_grid_wrapper"),e.tooltips("#"+b),$("#"+b+" .zenario_grid_delete").click(function(){e.deleteCell(this)}),$("#"+b+" .zenario_grid_object_properties span").click(function(){e.stopRenames||
e.editProperties(this)}),setTimeout(function(){delete e.stopRenames},100),e.drawLinks(),$("#"+b+" .zenario_grid_newly_added .zenario_cell_in_grid").effect({effect:"highlight",duration:1E3,easing:"zenarioOmmitEnd"}),$("#"+e.gridId).scrollTop(ia),e.drawAddToolbar();else return aa};m.tooltips=function(b){return Y._t(b)};m.clearAddToolbar=function(){};m.drawAddToolbar=function(){};m.drawLinks=function(){};m.checkCellsEmpty=function(b){if(!b||!b.cells)return!0;var a=ea;for(a in b.cells)if(v(b.cells,a))break;
return!z(a)};m.deleteCell=function(b){var a;if((a=$(b).data("for"))&&(a=$("#"+a))){b=a.data("i");a=this.getLevels(a);var d=this.data;if(a){a=a.s("-");for(var f in a)v(a,f)&&(f*=1,d=d.cells[1*a[f]])}d.cells.splice(b,1);this.change();toastr.success(q.growlSlotDeleted)}};m.add=function(b,a,d){d=$(b);b=this.getLevels(d);d=d.attr("data-new-width")||1;var f=this.data;$.colorbox.close();if(z(b)&&!1!==b){if(b){b=b.s("-");for(var r in b)v(b,r)&&(r*=1,f=f.cells[1*b[r]])}"slot"==a?(f.cells.push({width:d,slot:!0,
name:this.uniqueRandomName(),flash:!0}),toastr.success(q.growlSlotAdded)):"space"==a?(f.cells.push({width:d,space:!0,css_class:this.randomName(2,"Space_"),flash:!0}),toastr.success(q.growlSpaceAdded)):"grouping"==a?(f.cells.push({width:d,css_class:this.randomName(2,"Grouping_"),flash:!0,cells:[{width:d,slot:!0,name:this.uniqueRandomName()},{width:d,slot:!0,name:this.uniqueRandomName()}]}),toastr.success(q.growlChildrenAdded)):"grid_break"==a?(f.cells.push({width:f.cols,grid_break:!0,grid_css_class:this.randomName(2,
"Grid_"),flash:!0}),toastr.success(q.growlGridBreakAdded)):"grid_break_with_slot"==a&&(f.cells.push({width:f.cols,grid_break:!0,slot:!0,grid_css_class:this.randomName(2,"Grid_"),name:this.uniqueRandomName(),flash:!0}),toastr.success(q.growlSlotAdded));this.change()}};m.getLevels=function(b){b=b.data("levels");return z(b)?""+b:""};m.saveProperties=function(b,a){var d;if((d=$(b).data("for"))&&(d=$("#"+d))){b=d.data("i");d=this.getLevels(d);var f=this.data;if(d){d=d.s("-");for(var r in d)v(d,r)&&(r*=
1,f=f.cells[1*d[r]])}if(f.cells[b].slot){if(a.name){if(a.name!=a.name.r(/[^a-zA-Z0-9_]/g,"")){$("#zenario_grid_error").html(q.gridErrorNameFormat).slideDown();return}if(a.name!=f.cells[b].name&&this.checkIfNameUsed(a.name)){$("#zenario_grid_error").html(q.gridErrorNameInUse).slideDown();return}}else{$("#zenario_grid_error").html(q.gridErrorNameIncomplete).slideDown();return}delete this.names[f.cells[b].name];this.registerNewName(a.name)}for(var l in a)v(a,l)&&(""!=a[l]?f.cells[b][l]=a[l]:delete f.cells[b][l]);
this.change()}$.colorbox.close()};m.randomName=function(b,a){a=a||"Slot_";for(var d=0;d<b;++d)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(26*Math.random()));return a};m.uniqueRandomName=function(){var b=Math.ceil(Math.log(Math.max(this.randomNameCount,2))/Math.log(10));do var a=this.randomName(b);while(this.checkIfNameUsed(a));this.names[a]=!0;++this.randomNameCount;return a};m.checkIfNameUsed=function(b){return z(this.names[b.toLowerCase()])};m.registerNewName=function(b){return this.names[b.toLowerCase()]=
b};m.change=function(b,a){b||(this.pos<this.history.length-1&&this.history.splice(this.pos+1,this.history.length-1-this.pos),this.history.push(this.ajaxData()),this.pos=this.history.length-1,this.savedAtPos>=this.pos&&(this.savedAtPos=-1));this.draw(a)};m.undoOrRedo=function(b){var a=this.pos-b;0>a||a>=this.history.length||(this.pos=a,this.data=JSON.parse(this.history[a]),this.change(!0,1<b))};m.undo=function(){this.undoing=!0;this.undoOrRedo(1);delete this.undoing};m.redo=function(){this.undoOrRedo(-1)};
m.revert=function(){this.undoOrRedo(0)};m.canUndo=function(){return 0<this.pos};m.canRedo=function(){return this.pos<this.history.length-1};m.microTemplate=function(b,a,d){var f=Y._aLP(a,this);b=fa._mT(b,a,d);f&&Y._tLP(a);return b}})},window.zenarioG=zenario._cZL("G",void 0,function(){this.initVars()}));

zenario.lib(function(g,v,A,q,B,C,f,h,a,r,w,n,x,p,y,D,s,E,t,u){a.init("zenarioAB");zfabName="AdminFloatingBox";zfabWidthNoPreview=800;zfabMinWidthWithPreview=1100;zfabPreviewBorderWidth=4;zfabLeft=50;zfabTop=2;zfabPaddingHeight=188;zfabTabBarHeight=53;a.open=function(c,b,d,e,g,m,z){if(h.checkIfBoxIsOpen("AdminOrganizer"))return!1;!1===a.documentScrollTop&&(a.documentScrollTop=$(f.browserIsSafari()?"body":"html").scrollTop());b||(b={});c=(""+c).split("//",2);c[1]&&!b.id&&(b.id=c[1]);c=c[0];a.isOpen=
!0;a.callBack=g;a.createAnotherObject=m;a.getRequestKey=b;a.changed={};a.isSlidUp=!1;a.previewHidden=!0;a.hasPreviewWindow=!1;a.lastPreviewValues=!1;a.previewSlotWidth=!1;a.previewSlotWidthInfo="";a.heightBeforeSlideUp=!1;a.baseCSSClass="zenario_fbAdmin zenario_admin_box zenario_fab_"+c;z||(g=h.microTemplate(a.mtPrefix,{}),h.openBox(g,a.baseCSSClass,zfabName,!1,zfabWidthNoPreview,zfabLeft,zfabTop,!0,!0,".zenario_fabHead",!1),n("zenario_fbAdminFloatingBox").style.display="none");q.onbeforeunload=h.onbeforeunload;
a.start(c,b,d,e)};a.initFields=function(){a.hasPreviewWindow=!!a.pluginPreviewURL();t(u).initFields.call(a)};a.refreshParentAndClose=function(c,b,d){h.nowDoingSomething(!1);var e={};b||(a.isOpen=!1);if(a.callBack&&!b){var n;(n=a.getValueArrayofArrays())&&a.callBack(a.tuix.key,n)}else if(w.init&&(h.isFullOrganizerWindow||h.checkIfBoxIsOpen("og"))){c=!1;if(a.tuix.key.id!==g)c=a.tuix.key.id;else for(var m in a.tuix.key)if(f.has(a.tuix.key,m)){c=a.tuix.key[m];break}w.refreshToShowItem(c)}else f.cID&&
a.tuix.key.slotName?(f.refreshPluginSlot(a.tuix.key.slotName,"",h.importantGetRequests),r.init&&r.init()):!f.cID||"zenario_menu"!=a.path&&"zenario_menu_text"!=a.path?c||b||(a.tuix.key.cID?(a.tuix.key.cID==f.cID&&a.tuix.key.cType==f.cType&&(e=h.importantGetRequests),f.goToURL(f.linkToItem(a.tuix.key.cID,a.tuix.key.cType,e))):r.init&&(e=_.clone(h.importantGetRequests),e.cVersion=f.cVersion,f.goToURL(f.linkToItem(f.cID,f.cType,e)))):(h.reloadMenuPlugins(),r.init&&r.init());c=a.tuix.popout_message;d=
d&&a.createAnotherObject;b||d||a.close();c&&h.showMessage(c,!0,!1);if(b){a.changed={};if(a.tuix.tabs)for(m in a.tuix.tabs)f.has(a.tuix.tabs,m)&&a.tuix.tabs[m]&&a.editModeOn(m)&&(a.tuix.tabs[m]._saved_and_continued=!0);a.sortTabs();a.draw()}else d&&($("#zenario_abtab").clearQueue(),delete a.tuix,a.open(a.createAnotherObject.path,a.getRequestKey,a.createAnotherObject.tab,a.createAnotherObject.values,g,a.createAnotherObject,!0))};a.close=function(c){a.callFunctionOnEditors("remove");h.nowDoingSomething(!1);
a.sizing&&clearTimeout(a.sizing);a.stopPoking();f.clearAllDelays();c||h.closeFloatingBox();h.closeBox(zfabName);a.isOpen=!1;!1!==a.documentScrollTop&&($(f.browserIsSafari()?"body":"html").scrollTop(a.documentScrollTop),a.documentScrollTop=!1);delete a.tuix;delete a.lastPreviewValues;delete a.previewSlotWidth;delete a.previewSlotWidthInfo;return!1};a.closeButton=function(c){var b=h.onbeforeunload();(b===g||!c&&confirm(b))&&a.isOpen&&a.close();return!1};a.setData=function(c){a.syncAdminBoxFromServerToClient(c,
a.tuix)};a.syncAdminBoxFromServerToClient=function(c,b){for(var d in c)c[d]["[[__unset__]]"]?delete b[d]:b[d]===g||null===b[d]?b[d]=c[d]:c[d]["[[__replace__]]"]?(delete c[d]["[[__replace__]]"],b[d]=c[d]):"object"!=typeof b[d]?b[d]=c[d]:"object"==typeof b[d]&&"object"!=typeof c[d]?b[d]=c[d]:a.syncAdminBoxFromServerToClient(c[d],b[d])};a.sendStateToServer=function(){var c={};a.syncAdminBoxFromClientToServerR(c,a.tuix);return JSON.stringify(c)};a.syncAdminBoxFromClientToServerR=function(c,b,d,e,f,m,
h,n){if("object"==typeof b){var l,k;for(k in b)if((l="array")&&d===g&&"_sync"==k||(l="value")&&e===g&&"_sync"==d&&"session"==k||(l="value")&&e===g&&"_sync"==d&&"cache_dir"==k||(l="value")&&e===g&&"_sync"==d&&"password"==k||(l="value")&&e===g&&"_sync"==d&&"iv"==k||(l="array")&&d===g&&"key"==k||(l="value")&&e===g&&"key"==d||(l="value")&&d===g&&"shake"==k||(l="value")&&d===g&&"download"==k||(l="array")&&d===g&&"tabs"==k||(l="array")&&e===g&&"tabs"==d||(l="array")&&f===g&&"tabs"==e&&"edit_mode"==k||(l=
"value")&&m===g&&"tabs"==f&&"edit_mode"==d&&"on"==k||(l="array")&&f===g&&"tabs"==e&&"fields"==k||(l="array")&&m===g&&"tabs"==f&&"fields"==d||(l="value")&&h===g&&"tabs"==m&&"fields"==e&&"current_value"==k||(l="value")&&h===g&&"tabs"==m&&"fields"==e&&"_display_value"==k||(l="value")&&h===g&&"tabs"==m&&"fields"==e&&"_was_hidden_before"==k||(l="value")&&h===g&&"tabs"==m&&"fields"==e&&"pressed"==k||(l="array")&&h===g&&"tabs"==m&&"fields"==e&&"multiple_edit"==k||(l="value")&&n===g&&"tabs"==h&&"fields"==
f&&"multiple_edit"==d&&"_changed"==k)"value"==l?"function"!=typeof b[k]&&"object"!=typeof b[k]&&(c[k]=b[k]):"array"==l&&"object"==typeof b[k]&&(c[k]={},a.syncAdminBoxFromClientToServerR(c[k],b[k],k,d,e,f,m,h))}};a.draw=function(){a.isOpen&&a.loaded&&a.tabHidden&&a.draw2()};a.draw2=function(){if(a.tuix.tabs){n("zenario_fbAdminFloatingBox").className=a.baseCSSClass+" "+(a.tuix.css_class||"zenario_fab_default_style")+" "+(x(a.tuix.hide_tab_bar)?"zenario_admin_box_with_tabs_hidden":"zenario_admin_box_with_tabs_shown");
!a.tuix.tab||a.tuix.tabs[a.tuix.tab]&&!h.hidden(a.tuix.tabs[a.tuix.tab])||(a.tuix.tab=!1);n("zenario_fabTabs").innerHTML=a.drawTabs();var c=!a.editModeOnBox(),b="";a.setTitle(a.tuix.title,c);a.showCloseButton();a.tuix.save_and_continue_button_message&&(b+='<input id="zenarioAFB_save_and_continue"  type="button" value="'+p(a.tuix.save_and_continue_button_message)+'"',b=c?b+' class="submit_disabled"/>':b+(' class="submit_selected" onclick="'+a.globalName+'.save(undefined, true);"/>'));a.createAnotherObject&&
(b+='<input id="zenarioAFB_save_and_continue"  type="button" value="'+s.createAnother+'"',b=c?b+' class="submit_disabled"/>':b+(' class="submit_selected" onclick="'+a.globalName+'.save(undefined, false, true);"/>'));b+='<input id="zenarioAFB_save"  type="button" value="'+y(p(a.tuix.save_button_message),s.save)+'"';b=c?b+' class="submit_disabled"/>':b+(' class="submit_selected" onclick="'+a.globalName+'.save();"/>');a.tuix.cancel_button_message&&(b+='<input type="button" value="'+p(a.tuix.cancel_button_message)+
'" onclick="'+a.globalName+'.close();">');a.tuix.extra_button_html&&(b+=a.tuix.extra_button_html);n("zenario_fbButtons").innerHTML=b;n("zenario_fbAdminFloatingBox").style.display="block";a.size(!0);h.nowDoingSomething(!1);c=new f.callback;b=a.drawFields(c);a.animateInTab(b,c,$("#zenario_abtab"));a.shownTab=a.tuix.tab;delete a.lastScrollTop;a.startPoking()}};a.setTitle=function(a,b){a?($("#zenario_fabTitleWrap").css("display","block"),$("#zenario_fabTitleWrap").addClass(" zenario_no_drag"),n("zenario_fabTitle").innerHTML=
p(a)):$("#zenario_fabTitleWrap").css("display","none");b?$("#zenario_fabBox_readonlyMarker").css("display","block"):$("#zenario_fabBox_readonlyMarker").css("display","none")};a.showCloseButton=function(){this.tuix.cancel_button_message?$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","none"):$("#zenario_fbAdminFloatingBox .zenario_fabClose").css("display","block")};a.lastSize=!1;a.previewHidden=!0;a.size=function(c){a.sizing&&clearTimeout(a.sizing);var b=Math.floor($(q).width()),d=
Math.floor($(q).height()),e;b&&d&&!a.isSlidUp&&((e=a.lastSize!=b+"x"+d)||c)&&(a.lastSize=b+"x"+d,e=a.tuix&&x(a.tuix.hide_tab_bar),n("zenario_fbMain")&&(e?(n("zenario_fbMain").style.top="0px",n("zenario_fbButtons").style.paddingBottom="7px",n("zenario_fabTabs").style.display="none"):(n("zenario_fbMain").style.top="24px",n("zenario_fbButtons").style.paddingBottom="31px",n("zenario_fabTabs").style.display=f.browserIsIE()?"":"inherit")),c=zfabPaddingHeight,e&&(c-=zfabTabBarHeight),c+=$("#zenario_fabTitleWrap").height(),
d=Math.floor(0.96*d),maxBoxWidth=Math.floor(0.96*b),b=d-c,(e=1*(a.tuix&&a.tuix.max_height))&&b>e&&(b=e,d=e+c),b&&0<b&&$("#zenario_fbAdminInner").height(b),d&&0<d&&($("#zenario_fabBox").height(d),$("#zenario_fabPreview").height(d)),(previewHidden=!a.hasPreviewWindow||maxBoxWidth<zfabMinWidthWithPreview)?(b=zfabWidthNoPreview,a.previewWidth=!1,a.lastPreviewValues=!1):(b=a.previewSlotWidth?Math.min(maxBoxWidth,zfabWidthNoPreview+zfabPreviewBorderWidth+a.previewSlotWidth):maxBoxWidth,a.previewWidth=b-
zfabWidthNoPreview-zfabPreviewBorderWidth,$("#zenario_fabPreview").width(a.previewWidth),a.previewSlotWidthInfo?$("#zenario_fabPreviewInfo").show().text(a.previewSlotWidthInfo):$("#zenario_fabPreviewInfo").hide()),a.hasPreviewWindow?previewHidden?$("#zenario_fb"+zfabName).removeClass("zenario_fab_with_no_preview").addClass("zenario_fab_with_preview").addClass("zenario_fab_with_preview_hidden").removeClass("zenario_fab_with_preview_shown"):$("#zenario_fb"+zfabName).removeClass("zenario_fab_with_no_preview").addClass("zenario_fab_with_preview").removeClass("zenario_fab_with_preview_hidden").addClass("zenario_fab_with_preview_shown"):
$("#zenario_fb"+zfabName).addClass("zenario_fab_with_no_preview").removeClass("zenario_fab_with_preview").removeClass("zenario_fab_with_preview_hidden").removeClass("zenario_fab_with_preview_shown"),a.previewHidden!=previewHidden&&((a.previewHidden=previewHidden)||a.updatePreview()),h.adjustBox(zfabName,!1,b,zfabLeft,zfabTop));a.isOpen&&!1!==a.documentScrollTop&&$(f.browserIsSafari()?"body":"html").scrollTop(a.documentScrollTop);a.sizing=setTimeout(a.size,250)};a.returnAJAXURL=function(){return v+
"zenario/admin/ajax.php?_json=1&_ab=1&path="+encodeURIComponent(a.path)+f.urlRequest(a.getRequestKey)};a.pluginPreviewURL=function(c,b){if("plugin_settings"!=a.path||!f.slots||!(c=c||a.tuix&&a.tuix.key&&a.tuix.key.slotName)||!(b=b||a.tuix&&a.tuix.key&&a.tuix.key.instanceId||f.slots[c].instanceId))return!1;var d=h.getGridSlotDetails(c),e=_.clone(h.importantGetRequests),g,m=d&&d.cssClass&&d.cssClass.split(" ")||[];e.cVersion=f.cVersion;e.slotName=c;e.instanceId=b;e.method_call="showSingleSlot";e.fakeLayout=
1;e.grid_columns=d.columns;e.grid_container=d.container;a.previewSlotWidth=d.pxWidth;a.previewSlotWidthInfo=d.widthInfo;e.grid_pxWidth=a.previewWidth?a.previewWidth:a.previewSlotWidth;e.grid_cssClass="";for(g in m)f.has(m,g)&&(d=m[g],"alpha"==d||"omega"==d||d.match(/^span[\d_]*$/)||(e.grid_cssClass+=d+" "));return f.linkToItem(f.cID,f.cType,e)};a.addExtraAttsForTextFields=function(c,b){a.hasPreviewWindow&&(b.onkeyup=y(b.onkeyup,"","")+" zenarioAB.updatePreview();")};a.fieldChange=function(c,b){a.updatePreview(750);
t(u).fieldChange.call(a,c,b)};a.updatePreview=function(c){a.hasPreviewWindow&&!a.previewHidden&&f.actAfterDelayIfNotSuperseded("fabUpdatePreview",a.updatePreview2,c||1E3)};a.updatePreview2=function(){var c=JSON.stringify(a.getValues1D(!0));a.lastPreviewValues!=c&&(a.lastPreviewValues=c,$('<form action="'+p(a.pluginPreviewURL())+'" method="post" target="zenario_fabPreviewFrame"><input name="overrideSettings" value="'+p(c)+'"/></form>').appendTo("body").hide().submit().remove())};a.showPreviewInPopoutBox=
function(){var c=a.pluginPreviewURL(),b=JSON.stringify(a.getValues1D(!0));c&&($.colorbox({width:Math.floor(0.7*$(q).width()),height:Math.floor(0.9*$(q).height()),iframe:!0,preloading:!1,open:!0,title:a.previewSlotWidthInfo||s.preview,href:c+"&overrideSettings="+encodeURIComponent(b),className:"zenario_plugin_preview_popout_box"}),$("#colorbox,#cboxOverlay,#cboxWrapper").css("z-index","333000"))};a.slideToggle=function(){a.isSlidUp?a.slideDown():a.slideUp()};a.slideUp=function(){if(!a.isSlidUp){var c=
$("#zenario_fabBox_Header").height(),b=$("#zenario_fabBox");a.heightBeforeSlideUp=b.height();$("#zenario_fabBox_Body").stop(!0).slideUp();b.stop(!0).animate({height:c});$("#zenario_fabSlideToggle").addClass("zenario_fabSlideToggleUp").removeClass("zenario_fabSlideToggleDown");a.isSlidUp=!0}};a.slideDown=function(){a.isSlidUp&&($("#zenario_fabBox_Body").stop(!0).slideDown(),$("#zenario_fabBox").stop(!0).animate({height:a.heightBeforeSlideUp},function(){a.size(!0)}),$("#zenario_fabSlideToggle").addClass("zenario_fabSlideToggleDown").removeClass("zenario_fabSlideToggleUp"),
a.isSlidUp=!1)};a.clickTab=function(c){a.slideDown();t(u).clickTab.call(a,c)};a.stopPoking=function(){a.poking&&clearInterval(a.poking);a.poking=!1};a.startPoking=function(){a.poking||(a.poking=setInterval(a.poke,12E4))};a.poke=function(){f.ajax(v+"zenario/admin/quick_ajax.php?keep_session_alive=1")}},zenarioAF);
